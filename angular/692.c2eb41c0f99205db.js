"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[692],{70460:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.FileParser=void 0;const y=T(87693),m=T(3934),U=T(78721),C=T(32651);F.FileParser=class u{constructor(){this.services=[],this.conf=""}loadConf(x){this.conf=x}init(){this.registerService(new C.WordService),this.registerService(new m.PdfService),this.registerService(new y.ImageService),this.registerService(new U.TableService)}registerService(x){x.loadConf(this.conf),this.services.push(x)}start(x){return new Promise((b,O)=>{let Z=0;for(let A=0;A<this.services.length;A++)this.services[A].start(x).then(j=>{Z++,j.supported?b(j):Z===this.services.length&&O()})})}loadAllLibs(x){return new Promise(b=>{let O=0;const Z=()=>{if(O===x.length)b(!0);else{const A=x[O];if(document.getElementById(A.name))O++,Z();else{const j=document.createElement("script");j.setAttribute("src",A.link),j.setAttribute("id",A.name),j.setAttribute("async","false"),j.addEventListener("load",()=>{O++,Z()},!1),document.body.appendChild(j)}}};Z()})}}},37908:(nt,F,T)=>{F.uD=void 0;const m=T(70460);Object.defineProperty(F,"uD",{enumerable:!0,get:function(){return m.FileParser}});T(89)},89:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DocxParser=void 0;class T{constructor(){this.arrayBuffer=null,this.numberID=0}start(m){this.wmf||(this.wmf=new WMFConverter),this.file=m}reset(){this.file=void 0,this.arrayBuffer=void 0}load(){return new Promise(m=>{if(this.file)if("docx"===this.file.name.split(".").pop()?.toLocaleLowerCase()){const C=new FileReader;C.onloadend=()=>{this.arrayBuffer=C.result,m(!0)},C.readAsArrayBuffer(this.file)}else m(!1);else m(!1)})}toTextLines(){return new Promise((m,U)=>{this.load().then(C=>{if(C){const u=[],g=[];mammoth.convertToMarkdown({arrayBuffer:this.arrayBuffer},{styleMap:["b => ","i => ","u => "]}).then(O=>{O.value.split("\n").forEach(A=>{A.length>0&&(0===A.indexOf("\t")&&(A=A.substring(1)),A=this.convertImageString(A,g),u.push(A.replace(/\t/g,"    ").replace(/\\./g,".")))}),g.forEach(A=>{this.processImageWmf(A)}),m({str:u,maps:g})})}else U({msg:"File kh\xf4ng h\u1ed7 tr\u1ee3."})})})}processImageWmf(m){(m.link.indexOf("image/x-wmf")>=0||m.link.indexOf("image/x-emf")>=0)&&(m.link=this.wmf.toPNG(m.link))}convertImageString(m,U){for(;-1!==m.indexOf(T.IMG_MD_START);){const C="ha"+this.numberID,u=m.indexOf(T.IMG_MD_START),g=m.indexOf(")",u+1),x=m.substring(u+T.IMG_MD_START.length,g);U.push({id:C,link:x}),m=m.substring(0,u)+"[!img:"+C+"]"+m.substring(g+1,m.length),this.numberID++}return m}}F.DocxParser=T,T.IMG_MD_START="![]("},87693:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.ImageService=void 0,F.ImageService=class T{constructor(){this.conf=""}toBase64(m){return new Promise((U,C)=>{const u=new FileReader;u.onload=()=>{U(u.result)},u.onerror=g=>{C(g)},u.readAsDataURL(m)})}isFileImage(m){return m&&"image"===m.type.split("/")[0]}generateIdRequired(m){let U="";const C="abcdefghijklmnopqrstuvwxyz0123456789",u=C.length;for(let g=0;g<m;g++)U+=C.charAt(Math.floor(Math.random()*u));return Math.floor(Date.now()/1e3)+U}loadConf(m){this.conf=m}start(m){return new Promise(U=>{this.isFileImage(m)?this.toBase64(m).then(C=>{const u="ih"+this.generateIdRequired(3),g={maps:[],str:[]};g.maps.push({id:u,link:C}),g.str.push("[!img:"+u+"]"),U({type:"image",supported:!0,data:g})}).catch(()=>{U({type:"image",supported:!1,data:{str:[],maps:[]}})}):U({type:"image",supported:!1,data:{str:[],maps:[]}})})}}},3934:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.PdfService=void 0,F.PdfService=class T{constructor(){this.conf=""}isPdfDocument(m){return/^(?:application\/pdf)$/i.test(m.type)}loadConf(m){this.conf=m}start(m){return new Promise(U=>{this.isPdfDocument(m)?U({type:"pdf",supported:!0,data:{str:[],maps:[]}}):U({type:"pdf",supported:!1,data:{str:[],maps:[]}})})}cropQuestionContent(m,U){const C=[];let u=Number.MAX_VALUE;return m.answers.forEach(x=>{C.push({label:this.mergeContentCanvas(x.remove,U),content:this.mergeContentsCanvas(x.positions,U),conf:x}),u>x.positions[0].top&&(u=x.positions[0].top)}),m.positions[m.positions.length-1].heigh=u-m.positions[m.positions.length-1].top,{label:this.mergeContentCanvas(m.remove,U),content:this.mergeContentsCanvas(m.positions,U),ans:C,conf:m}}mergeContentsCanvas(m,U){let C=0,u=0,g=[];m.forEach(Z=>{const A=this.mergeContentCanvas(Z,U);C=A.width,u+=A.height,g.push(A)});const x=document.createElement("canvas");x.width=C,x.height=u;const b=x.getContext("2d");let O=0;return g.forEach(Z=>{b?.drawImage(Z,0,O,Z.width,Z.height,0,0,Z.width,Z.height),O+=Z.height}),x}mergeContentCanvas(m,U){const C=U[m.pageIndex].canvas,u=document.createElement("canvas");return u.width=m.width,u.height=m.heigh,u.getContext("2d")?.drawImage(C,m.left,m.top,m.width,m.heigh,0,0,m.width,m.heigh),u}}},78721:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.TableService=void 0;const y=T(89);F.TableService=class m{constructor(){this.conf="",this.docxParser=new y.DocxParser}loadConf(C){}start(C){return new Promise(u=>{u("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==C.type||"application/vnd.ms-excel"==C.type||".csv"==C.type?{type:"xlsx",supported:!0,data:{str:[],maps:[]}}:{type:"xlsx",supported:!1,data:{str:[],maps:[]}})})}}},32651:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.WordService=void 0;const y=T(89);F.WordService=class m{constructor(){this.pattern_remove=/<a id="[^"]+"><\/a>/g,this.conf="",this.docxParser=new y.DocxParser}loadConf(C){}start(C){return new Promise(u=>{this.docxParser.start(C),this.docxParser.toTextLines().then(g=>{for(let x=0;x<g.str.length;x++)g.str[x]=g.str[x].replace(this.pattern_remove,"");u({type:"docx",supported:!0,data:g})}).catch(g=>{u({type:"docx",supported:!1,data:{str:[],maps:[]}})})})}}},25442:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Utils=F.CONST=void 0;class T{static load(U){let C=JSON.parse(U);Object.assign(this,C)}}F.CONST=T,T.RENDER_SCALE=2,T.LINE_SMALL_HEIGHT=7*T.RENDER_SCALE,T.SPLIT_MARGIN=3*T.RENDER_SCALE,T.INTERSEC_MARGIN=20*T.RENDER_SCALE,T.LINE_MAGIN=2*T.RENDER_SCALE,T.MARGIN_LEFT=2*T.RENDER_SCALE,T.ENABLE_IMAGE_PROCESS=!0,T.STEP_SIZE=2,T.CROP_FULL_WIDTH=!0,T.OVERLAP=.5,T.QUESTION_PATTERN=[],T.QUESTION_PATTERN2=[],T.BREAK_LINE_PATTERN=[],T.SECTION_PATTERN_LOWER=[],T.SECTION_PATTERN_NORMAL=[],T.KICK_PATTERN=[],T.TVCN_CHAR=[],T.HET_PATTERN=[],T.DAPAN_PATTERN=[],T.HUONGDAN_PATTERN=[],T.MULTIPLE_ANS_PATTERN=[],T.DRAW_RESULT="",T.SKIP_CHAR=[],T.FOOTER_PATTERN=[],T.HELP_ANS_PATTERN=[],F.Utils=class y{static capitalizeFirstLetter(U){return U.charAt(0).toUpperCase()+U.slice(1)}static tagLang(U){let C=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return C.has(U)?C.get(U):U}static parseInclude(U){var C;let u=U.split("=>"),g=u.length>1?u[1]:-1,A=u[0];A=A.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let V,P=A.split("."),j=[],L=[],I=[],M=[],H=[],Y=[],G=[],$=[],R=[],ot=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),dt=[];for(let ct=P.length-1;ct>=0;ct--){let wt=P[ct].trim();if(/^\d*$/.test(wt)){V=+wt;continue}let Pt=wt.split(",");for(let vt of Pt){let At=vt.split(":"),ut=At[0],Ct=null!==(C=At[1])&&void 0!==C?C:"";if(/^G[\-\d]+$/.test(ut.trim()))j.push(+ut.trim().substring(1));else if(/^Q[\-\d]+$/.test(ut.trim()))I.push(+ut.trim().substring(1)),$.push(Ct),dt.push({type:"QUEST",id:+ut.trim().substring(1)});else if(/^C[\-\d]+$/.test(ut.trim())){let yt=+ut.trim().substring(1);M.push(yt),Y.push(Ct),dt.push({type:""!=Ct?"SHARE":"CATEGORY",id:yt})}else if(/^K[\-\d]+$/.test(ut.trim())){let yt=+ut.trim().substring(1);M.push(yt),Y.push(Ct),dt.push({type:""!=Ct?"SHARE":"KNOWLEDGE",id:yt})}else if(/^T[\-\d]+$/.test(ut.trim()))L.push(+ut.trim().substring(1)),G.push(Ct),dt.push({type:"EXAM",id:+ut.trim().substring(1),groupIds:j});else if(/^F:/.test(vt.trim())){let yt=vt.trim().substring(2);R.push(ot.has(yt)?ot.get(yt):yt)}}if(dt.length>0){if(R.length>0){let vt=["TL","TN","\u0110T","ES","MC","FB"];for(let At of dt)At.tags=R.filter(ut=>vt.indexOf(ut)<0),At.answerTypes=R.filter(ut=>vt.indexOf(ut)>=0).map(ut=>"TL"==ut||"ES"==ut?3:"TN"==ut||"MC"==ut?1:4)}break}}return I.length>0&&(V=I.length),H.push(...Y),H.push(...G),H.push(...$),{paths:dt,shareTypes:H,catId:M,examId:L,tag:R,groupId:j,questId:I,getNum:V,idx:g}}static getNumberFromStr(U){let C=U.match(/(\d+)/);return C?C[0]:""}static removeAccents(U){let C=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const u of C){let g=new RegExp("["+u.substring(1)+"]","g");U=U.replace(g,u[0])}return U}static zeroPad(U,C){return U=U||2,(new Array(U).join("0")+C).slice(-1*U)}}},17585:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.ExamParser=void 0;const y=T(25442),m=T(70432),U=T(99739),C=T(80983),u=T(65465),g=T(72687),x=T(29688),b=T(49362),O=T(50610),Z=T(85215),A=T(72617),P=T(69504),j=T(633);F.ExamParser=class L{constructor(M){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",y.CONST.load(M)}setLang(M){this.lang=M,this.DEF_QUEST_NAME="vi"==M?"c\xe2u ":"question "}parse(M,H,Y){var G,$,V,R,ot,dt,lt,ct,wt,Pt;let vt=this.findItems(M,Y);H&&console.log("items",vt);let At=new Map,ut=[],Ct=null,yt=0,It="main",Rt=0,ae=0,ye=[],vn=!0,Et=new Map;for(let ie=0;ie<vt.length;ie++){let jt=vt[ie],de=ie==vt.length-1?void 0:vt[ie+1],Ut=this.getPartInfo(M,jt,de);if(this.loadText(M,Ut),jt.type==O.SectionParser.TYPE_NAME&&"main"==It&&(yt++,ut.push({label:yt,parts:Ut,answers:[],isGroup:!0})),jt.type==b.QuestionParser.TYPE_NAME){if(de&&de.type==m.AnswerParser.TYPE_NAME&&de.pos[2]>0){let Dt;for(let ue=ie+1;ue<vt.length;ue++)if(vt[ue].type!=m.AnswerParser.TYPE_NAME){Dt=vt[ue];break}Ut=this.getPartInfo(M,jt,Dt),this.loadText(M,Ut)}let le=jt.label?+jt.label:0,t=At.get(le);t&&"main"!=It?(t.help=Ut,Ct=t):"main"==It&&(t={label:le,olabel:jt.olabel,answers:[],parts:Ut},yt>0&&(t.group=yt),At.set(le,t),ut.push(t),Ct=t)}if(jt.type==m.AnswerParser.TYPE_NAME&&Ct){let le=!1;if(1==Ut.length){let Ht=M[Ut[0].lineIdx].replace(/\|/g,"").trim().match(y.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Ht&&Ht.length>0&&(le=!0)}let t=""==jt.olabel;jt.pos[2]>0&&(Ut=[Ut[0]],Ut[0].e=jt.pos[2],this.loadText(M,Ut),t=!0);let Dt={label:null!==(G=jt.label)&&void 0!==G?G:"",isCorrect:"*"==jt.extInfo,parts:t?[Ut[0]]:Ut,isInline:t,olabel:jt.olabel};Ct.answers.push(Dt),Ct.isFixAns=t||le}if(jt.type==x.IncludeParser.TYPE_NAME)if(jt.label&&/\.\d*$/.test(jt.label)){let le=jt.label.split("."),t=+le[le.length-1],Dt=null!==($=Ut[0].text)&&void 0!==$?$:"",ue=null!==(V=Et.get(Dt))&&void 0!==V?V:-1;if(ue++,Et.set(Dt,ue),0==t){yt++;let Te=Dt+"=>"+ue+"-0",Fe=[];Fe.push(...Ut),Fe[0]={lineIdx:Ut[0].lineIdx,s:0,b:0,text:Te},ut.push({label:yt,parts:Fe,answers:[],isGroup:!0});continue}let sn=Ct?Ct.label:0,Ht=0;for(let Te=0;Te<t;Te++){Ht++;let Fe=Dt+"=>"+ue+"-"+Te,rn=[];rn.push(...Ut),rn[0]={lineIdx:Ut[0].lineIdx,s:0,b:0,text:Fe};let _t={label:sn+Ht,olabel:Ct?null===(R=Ct.olabel)||void 0===R?void 0:R.replace(/\d+/,sn+Ht+""):this.DEF_QUEST_NAME+(sn+Ht)+".",answers:[],parts:rn};At.set(_t.label,_t),ut.push(_t),Ct=_t}}else if(jt.label&&/\.Q\d+(,Q\d+)*$/.test(jt.label)){let Dt=null!==(ot=jt.label.split(".").pop()?.split(",").length)&&void 0!==ot?ot:0;for(let ue=0;ue<Dt;ue++){let sn={lineIdx:Ut[0].lineIdx,s:0,b:0,text:Ut[0].text+"=>0-"+ue},Ht=Ct?Ct.label:0,Te={label:Ht+1,olabel:Ct?null===(dt=Ct.olabel)||void 0===dt?void 0:dt.replace(/\d+/,Ht+1+""):this.DEF_QUEST_NAME+(Ht+1)+".",answers:[],parts:[sn]};At.set(Te.label,Te),ut.push(Te),Ct=Te}}jt.type==g.HuongDanParser.TYPE_NAME&&Ct&&(Ut.splice(0,1),de&&de.type==b.QuestionParser.TYPE_NAME&&de.label&&!At.has(+de.label)||!de||de.type==O.SectionParser.TYPE_NAME?"main"==It&&(Ct.help=Ut):"main"==It&&(It="info",Rt=null!==(lt=jt.lineIdx)&&void 0!==lt?lt:0),Rt>0&&0==ae&&(ae=null!==(ct=jt.lineIdx)&&void 0!==ct?ct:0)),(jt.type==u.HetParser.TYPE_NAME||jt.type==C.DapAnParser.TYPE_NAME)&&(It="info",Rt=null!==(wt=jt.lineIdx)&&void 0!==wt?wt:0),jt.type==U.DapAnChiTietParser.TYPE_NAME&&vn&&ye.push(jt),jt.type!=U.DapAnChiTietParser.TYPE_NAME&&ye.length>0&&(vn=!1)}let ne=new U.DapAnChiTietParser,un=ne.getAnsMC(M,ye),an=new Map;if(Rt>0){let ie=ae>0?M.slice(Rt,ae):M.slice(Rt);an=ne.getAnsStr(ie)}for(const ie of ut){if(ie.isGroup)continue;let jt=un.get(ie.label),de=an.get(ie.label),Ut=null;if(ie.help&&(Ut=ne.getAnsFromHelp(ie.help,M)),ie.answers.length>0){let le=ie.answers.filter(t=>t.isCorrect);for(let t=1;t<le.length;t++)le[t].isCorrect=!1;if(0==le.length){let t=null!==(Pt=jt??Ut)&&void 0!==Pt?Pt:de?de[0]:"";for(const Dt of ie.answers)if(Dt.label==t){Dt.isCorrect=!0;break}}}else ie.strAns=de}return H&&console.log("lstQuest",ut),ut}cleanRes(M){for(const H of M){for(let Y=H.parts.length-1;Y>=0;Y--)""==H.parts[Y].text&&H.parts.splice(Y,1);for(const Y of H.answers)for(let G=Y.parts.length-1;G>=0;G--)""==Y.parts[G].text&&Y.parts.splice(G,1);if(H.help)for(let Y=H.help.length-1;Y>=0;Y--)""==H.help[Y].text&&H.help.splice(Y,1)}}getPartInfo(M,H,Y){var G,$;let V=null!==(G=H.lineIdx)&&void 0!==G?G:0,R=null!==($=Y?.lineIdx)&&void 0!==$?$:M.length-1;if(V==R)return Y?[{lineIdx:V,b:H.pos[0],s:H.pos[1],e:Y?.pos[0]}]:[{lineIdx:V,b:H.pos[0],s:H.pos[1]}];{let ot=[];ot.push({lineIdx:V,b:H.pos[0],s:H.pos[1]});for(let dt=V+1;dt<R;dt++)ot.push({lineIdx:dt,b:0,s:0});if(Y){let dt=Y?.pos[0];""!=M[R].substring(0,dt).replace(/\|/g,"").trim()&&ot.push({lineIdx:R,b:0,s:0,e:dt})}else ot.push({lineIdx:R,b:0,s:0});return ot}}loadText(M,H){for(const Y of H)Y.text=M[Y.lineIdx].substring(Y.s,Y.e)}findItems(M,H){let Y=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];H&&(Y=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let G=[new P.RemoveRule,new Z.ModifyAnsRule,new j.SameKindRule,new A.RemoveDupRule],$=[{parser:new U.DapAnChiTietParser,also:[2]},{parser:new O.SectionParser,from:[0],to:[1],also:[3]},{parser:new b.QuestionParser,from:[0],to:[1],also:[3]},{parser:new m.AnswerParser},{parser:new u.HetParser,to:[2]},{parser:new C.DapAnParser,to:[2],also:[6]},{parser:new g.HuongDanParser},{parser:new x.IncludeParser,from:[0],to:[1]}],V=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],R=V[0],ot=[],dt=0;for(const wt of M)if(""!=wt){for(const Pt of R.expect){let vt=$[Pt],At=vt.parser.parse(wt);if(At.length>0){if(At.forEach(ut=>ut.lineIdx=dt),ot.push(...At),vt.parser.TYPE==g.HuongDanParser.TYPE_NAME){let ut=ot.filter(It=>It.type==b.QuestionParser.TYPE_NAME).length,Ct=ot.filter(It=>It.type==g.HuongDanParser.TYPE_NAME).length,yt=ot.filter(It=>It.type==C.DapAnParser.TYPE_NAME).length;if(R.name==V[1].name&&ut>1&&0==Ct){R=V[2];let It=V[2].expect.indexOf(6);It>=0&&V[2].expect.splice(It,1)}else if(R.name==V[2].name){yt>0&&$[0].parser.off();let It=V[2].expect.indexOf(6);It>=0&&V[2].expect.splice(It,1)}}if(vt.to){let ut=0;for(const Ct of vt.to)(vt.from&&V[vt.from[ut]]==R||!vt.from)&&(R=V[Ct])}if(vt.also)for(const ut of vt.also){let yt=ot[ot.length-1].pos[1],It=$[ut].parser.parse(wt.substring(yt));It.length>0&&(It.forEach(Rt=>{Rt.lineIdx=dt;for(let ae=0;ae<Rt.pos.length;ae++)Rt.pos[ae]=Rt.pos[ae]+yt}),ot.push(...It))}break}}dt++}else dt++;let lt=[];for(const wt of Y)for(const Pt of G){let vt=Pt.load(wt);if(vt){lt.push(vt);break}}let ct=0;for(;ct<ot.length;){for(const wt of lt){let Pt=ot.length;if(wt.run(ot,ct)){let vt=Pt-ot.length;vt>0&&(ct-=vt+1);break}}ct++}return ot}}},82439:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.EditorApiService=void 0,F.EditorApiService=class T{}},86855:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.ExamIntellisense=void 0;const y=T(17585),m=T(71063),U=T(82910),C=T(68954),u=T(82642),g=T(59615),x=T(82781);F.ExamIntellisense=class b{constructor(Z){this.conf=Z,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new y.ExamParser(Z),this.apiService=null}setSingleMode(Z){this.singleMode=Z}setLines(Z){this._lines=Z}setApiService(Z){this.apiService=Z}parse(){return this._lstQuest=this.exParser.parse(this._lines,!0,!0),this._lstQuest}getAutofillValue(Z,A,P){var j;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[Z].trim()))return[];let I=[],M=this.getCurPos(Z,A),H=M[0],Y=M[1],G=M[2],$=this._lines[Z>0?Z-1:0];if(H&&H.parts.length>0&&null!==(j=H.parts[0].text)&&void 0!==j&&j.trim().startsWith("[@"),$.startsWith("[@")||""==$.trim())return[];if(Y&&H){let V="ABCDEFGHIJKLMN",R=V.indexOf(Y.label),ot=V[R+1]+Y.olabel+" ",dt=Y.label+Y.olabel+" ";if(!this.singleMode&&this._lines[Y.parts[0].lineIdx].trim()==dt.trim()&&Y.parts[0].lineIdx!=Z){let lt=H.parts[0],wt=this._lines[lt.lineIdx].substring(lt.b,lt.s).replace(/\d+/,H.label+1+"")+" ";return I.push(`${Y.parts[0].lineIdx}|0|${dt.length}|`),I.push(`${Z}|${A}|${A}|${wt}`),I}if(Y.label<"D"&&("enter"!=P||Z>0&&""!=this._lines[Z-1].trim()&&Y.parts[0].lineIdx!=Z))return I.push(`${Z}|${A}|${A}|${ot}`),I;if(!this.singleMode&&Y.label>="D"&&Y.parts[0].lineIdx!=Z&&"enter"==P&&Z==this._lines.length-1){let lt=H.parts[0],wt=this._lines[lt.lineIdx].substring(lt.b,lt.s).replace(/\d+/,H.label+1+"")+" ";return I.push(`${Z}|${A}|${A}|\n${wt}`),I}}if(!Y&&!G&&H&&"enter"==P&&""==this._lines[Z].trim()&&Z>0&&""!=this._lines[Z-1].trim()){let V=H.parts[0],R=this._lines[V.lineIdx].substring(V.s).trim();if(this.singleMode||""!=R)if(0==H.answers.length)I.push(`${Z}|${A}|${A}|A. `);else if(!this.singleMode){let ot=H.parts[0],lt=this._lines[ot.lineIdx].substring(ot.b,ot.s).replace(/\d+/,H.label+1+"")+" ";I.push(`${Z}|${A}|${A}|${lt}`)}return I}return I}getSuggestions(Z,A,P,j){return new Promise(L=>{var I,M;let H=null!==(I=j?.substring(0,A))&&void 0!==I?I:"",Y=this.singleMode?[new m.AnsSugg,new C.EndSugg,new U.ChooseSugg]:[new u.IncludeSugg(this.apiService,L),new g.QuestSugg,new m.AnsSugg,new x.SectionSugg,new C.EndSugg,new U.ChooseSugg],G=[],$=this.getCurPos(Z,A),V=$[0],R=$[1],lt=V?{type:$[2]?"h":R?"a":"q",quest:V,ansLabel:R?R.label:void 0,secLabel:V.group?null===(M=this._lstQuest.filter(ct=>ct.isGroup).pop())||void 0===M?void 0:M.parts[0].text:void 0,lineIdx:Z,col:A}:void 0;for(let ct of Y){let wt=ct.run(H,P,lt);if(1==wt.length&&"-1"==wt[0])return;G.push(...wt)}L(G)})}getEditHint(){let A=0,P=[],j=!1;for(const L of this._lstQuest){if(L.isGroup)continue;let I="",M="A".charCodeAt(0)-1,H=!1;for(const Y of L.answers){if(""==Y.olabel)break;if(I+=Y.label,!H&&!"ABCDEFGHIJKLMN".startsWith(I)&&(H=!0),M++,H){let G=Y.parts[0],$="*"==this._lines[G.lineIdx].substring(G.b,G.b+1)?1:0;P.push(`${G.lineIdx}|${G.b+$}|${G.b+$+1}|${String.fromCharCode(M)}`)}}if(!j&&L.label-A<=0&&A>0&&(j=!0),j){let Y=L.parts[0],$=this._lines[Y.lineIdx].substring(Y.b,Y.s).replace(/\d+/,A+1+"");P.push(`${Y.lineIdx}|${Y.b}|${Y.s}|${$}`),A++}else A=L.label}return P}getCurPos(Z,A){var P,j;let L=!1,I=null,M=null,H=!1,Y=!1;for(const G of this._lstQuest)if(!G.isGroup){for(const $ of G.parts)if($.lineIdx==Z){L=!0,I=G,M=null,G.parts.length>0&&null!==(P=G.parts[0].text)&&void 0!==P&&P.trim().startsWith("[@")&&(Y=!0,L=!1);break}if(Y&&G.parts.length>0&&(null===(j=G.parts[0].text)||void 0===j||!j.trim().startsWith("[@")))break;for(const $ of G.answers)for(const V of $.parts)if(V.lineIdx==Z&&V.s<=A&&(!V.e||V.e>=A)){L=!0,I=G,M=$;break}if(L)break;if(G.help)for(const $ of G.help)if($.lineIdx==Z&&$.s<=A&&(!$.e||$.e>=A)){L=!0,I=G,M=null,H=!0;break}if(L)break}return[I,M,H]}}},71063:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.AnsSugg=void 0;const y=T(30033);F.AnsSugg=class m extends y.Sugg{run(C,u,g){if(!g||"h"==g.type||/^\[?\s*@/.test(C))return[];let x=g.ansLabel?String.fromCharCode(g.ansLabel.charCodeAt(0)+1)+".":"A.";return[x+"|"+x+" "]}}},82910:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.ChooseSugg=void 0;const y=T(30033);F.ChooseSugg=class m extends y.Sugg{run(C,u,g){if(C!=u||!g)return[];let x=[];if("h"==g.type&&g.quest)for(let b of g.quest.answers)x.push(`azt_lang_sugg_choose ${b.label}|azt_lang_sugg_choose ${b.label}`);return x}}},68954:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.EndSugg=void 0;const y=T(30033);F.EndSugg=class m extends y.Sugg{run(C,u){return C!=u?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},82642:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.IncludeSugg=void 0;const y=T(25442),m=T(30033);F.IncludeSugg=class U extends m.Sugg{constructor(u,g){super(),this.apiService=u,this.resolve=g}run(u){let g=u;if(g.startsWith("@[")&&(g=g.substring(1)),/^\[?\s*@/.test(g)&&null!=this.apiService){let x=g.replace("]..","].").split("].").map(Y=>Y.replace("]","").replace("[","").replace("@","").trim()),b=x[x.length-1],O=0,Z=!0,A="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",P="azt_lang_sugg_get_all|[ALL]|snippet",j=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],L="",I="",H=g.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let Y=H.next();if(Y.done)break;I="user_"+Y.value[1]}if(x.length>1){b.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(b)&&(L=b.substring(0,1),b="");let Y=x[x.length-2];if(Y.startsWith("F:"))return this.resolve([A]),["-1"];if(Y.indexOf(",")>=0){let G=[];return""==L&&G.push(A),G.push(...j),this.resolve(G),["-1"]}if(b.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(b))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(Y))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(Y)&&(O=+Y.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(Y)&&(I="user")),/^T[\-\d]+:/.test(Y)&&(O=+Y.split(":")[0].trim().substring(1),Z=!1),/^G[\-\d]+:/.test(Y)){let G=Y.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${g}[azt_lang_sugg_get_all ${G} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+g+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(Y)||/^Q[\-\d]+:/.test(b))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(Y)||/^Q[\-\d]+:/.test(b))return this.resolve([]),["-1"]}if(Z)return"F"==L?(this.resolve(j),["-1"]):(this.apiService.searchRes(I,O).then(Y=>{let G="";-1==O&&(G=":user-"),(0==O||-1==O)&&(A="");let $=Y.map(V=>{let R=V.name;return R=R.replaceAll(/[\[\],\.\-]+/g,""),`${R}|[@${("cat"==V.type?"C":"T")+V.id}:${G}${R}].|${"cat"==V.type?"folder":"file"}`});""!=A&&""==L&&($.push(A),$.push(...j)),this.resolve($)}),["-1"]);if(g.endsWith(".")||g.endsWith(",")){let Y=Math.abs(O);return this.apiService.getQuestion(Y).then(G=>{let $=G.map(ot=>{let dt=("group"==ot.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+ot.label,lt=("group"==ot.type?"G":"Q")+ot.id,ct="group"==ot.type?".":"",wt=ot.content,Pt="group"==ot.type?"class":"function",vt="group"==ot.type?G.filter(yt=>yt.groupId==ot.id).length+"-":"",At="group"!=ot.type&&ot.groupId?"G"+y.Utils.zeroPad(3,ot.groupId):"G000";return"group"==ot.type&&(At="G"+y.Utils.zeroPad(3,ot.id)),{name:dt,code:lt,groupQnum:vt,posfix:ct,icon:Pt,sort:`${At}-${"group"==ot.type?"G"+y.Utils.zeroPad(3,ot.id):"Q"+y.Utils.zeroPad(10,ot.id)}`,doc:wt}});$.sort((ot,dt)=>ot.sort>dt.sort?1:-1);let V=$.map(ot=>`${ot.name}|[@${ot.code}:${ot.groupQnum}${ot.name}]${ot.posfix}|${ot.icon}|${ot.sort}|${ot.doc}`),R=[];if(""!=A){""==L&&(R.push(A),R.push(...j));let ot=P.split("|");ot[1]=$.map((dt,lt)=>(0==lt?"":g)+`[@${dt.code}:${dt.groupQnum}${dt.name}]`+(dt.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),R.push(ot.join("|"))}R.push(...V),"F"==L&&(R=j),this.resolve(R)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},59615:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.QuestSugg=void 0;const y=T(25442),m=T(30033);F.QuestSugg=class U extends m.Sugg{run(u,g,x){var b;if(u!=g)return[];if(!x)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let O=null!==(b=x.quest.olabel)&&void 0!==b?b:"azt_lang_sugg_question_cc 1.",Z=+y.Utils.getNumberFromStr(O),A=O.replace(/\d+/,Z+1+"");return A=x.quest.olabel?y.Utils.capitalizeFirstLetter(A):A,[y.Utils.removeAccents(A)+"|"+A+" ",A+"|"+A+" "]}}},82781:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.SectionSugg=F.toArabic=F.isRoman=F.toRoman=F.BaseNumbers=F.RomanNumber=void 0;const y=T(25442),m=T(30033);class U{constructor(O,Z){this.baseUnits=0,this.thousands=0,this.num=O,this.str=Z}}function C(b){let O,Z;if(b<=0||b>3999)return"";{O=0;let A="";for(b=Math.floor(b);b>0;)Z=F.BaseNumbers[O],0===Math.floor(b/Z.num)?++O:(A+=Z.str,b-=Z.num);return A}}function u(b){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(b)}function g(b){let O=b.toUpperCase();if(!u(O))return null;let Z=0,A=0;for(;O.length>0&&A<F.BaseNumbers.length;){const P=F.BaseNumbers[A];O.startsWith(P.str)?(Z+=P.num,O=O.substring(P.str.length)):A++}return O.length>0?null:Z}F.RomanNumber=U,F.BaseNumbers=[new U(1e3,"M"),new U(900,"CM"),new U(500,"D"),new U(400,"CD"),new U(100,"C"),new U(90,"XC"),new U(50,"L"),new U(40,"XL"),new U(10,"X"),new U(9,"IX"),new U(5,"V"),new U(4,"IV"),new U(1,"I")],F.toRoman=C,F.isRoman=u,F.toArabic=g,F.SectionSugg=class x extends m.Sugg{run(O,Z,A){var P,j;if(O!=Z)return[];if(!A)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==A.type||!A.secLabel)return[];let L="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(A.secLabel.toLowerCase())){let I=A.secLabel.split("."),M=+y.Utils.getNumberFromStr(I[0]);L=I[0].replace(/\d+/,M+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(A.secLabel.toLowerCase())){let M=A.secLabel.split(".")[0].split(" "),Y=C((null!==(P=g(M.pop()))&&void 0!==P?P:0)+1);M.push(Y),L=M.join(" ")+"."}else/^[ivx]+\./.test(A.secLabel.toLowerCase())&&(L=C((null!==(j=g(A.secLabel.split(".")[0]))&&void 0!==j?j:0)+1)+".");return[y.Utils.removeAccents(L)+"|"+L+" ",L+"|"+L+" "]}}},30033:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Sugg=void 0,F.Sugg=class T{constructor(){this.lang="vi"}setLang(m){this.lang=m}}},25034:function(nt,F,T){var y=this&&this.__createBinding||(Object.create?function(U,C,u,g){void 0===g&&(g=u);var x=Object.getOwnPropertyDescriptor(C,u);(!x||("get"in x?!C.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return C[u]}}),Object.defineProperty(U,g,x)}:function(U,C,u,g){void 0===g&&(g=u),U[g]=C[u]}),m=this&&this.__exportStar||function(U,C){for(var u in U)"default"!==u&&!Object.prototype.hasOwnProperty.call(C,u)&&y(C,U,u)};Object.defineProperty(F,"__esModule",{value:!0}),m(T(86855),F),m(T(82439),F),m(T(17585),F),m(T(22161),F),m(T(25442),F)},68261:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.CanvasUtil=void 0;const y=T(25442);class m{static drawPoint(C,u,g){null!=C&&(C.fillStyle=u,C.beginPath(),C.arc(g.left,g.top,5,0,2*Math.PI),C.fill())}static drawBox(C,u,g,x){null!=C&&(x?(C.fillStyle=u,C.beginPath(),C.rect(g.left,g.top,g.width,g.heigh),C.fill()):(C.strokeStyle=u,C.beginPath(),C.rect(g.left,g.top,g.width,g.heigh),C.stroke()))}static drawBox2(C,u,g,x,b){null!=C&&(C.strokeStyle=u,C.beginPath(),C.rect(b[4],b[5],g,x),C.stroke())}static drawLine(C,u,g,x){null!=C&&(C.strokeStyle=u,C.beginPath(),C.moveTo(g,x),C.lineTo(C.canvas.width-10,x),C.stroke())}static drawText(C,u,g,x){null!=C&&(C.font="11px Arial",C.fillStyle=u,C.fillText(x,g[4],g[5]))}static isLineIntersec(C,u){let g=C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height,x=u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height,b=C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width+y.CONST.INTERSEC_MARGIN,O=u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width+y.CONST.INTERSEC_MARGIN,Z=this.isSameLine(C,u);return(g||x)&&(b||O)&&!Z}static isLineVIntersec(C,u){return(C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height)&&(C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width+y.CONST.INTERSEC_MARGIN||u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width+y.CONST.INTERSEC_MARGIN)&&Math.abs(u.transform[4]-C.transform[4])>y.CONST.INTERSEC_MARGIN/2}static isSameLine(C,u){return Math.abs(C.transform[5]+C.height-(u.transform[5]+u.height))<=y.CONST.LINE_MAGIN}static isObjIntersec(C,u){return C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height}static isObjFullIntersec(C,u){return(C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height)&&(C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width||u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width)}static isFirstLineOfPage(C,u){return!(C<0||C>=u.length||0!=C&&u[C-1].pageIndex==u[C].pageIndex)}static isLastLineOfPage(C,u){return!(C<0||C>=u.length||C!=u.length-1&&u[C+1].pageIndex==u[C].pageIndex)}static getTopLine(C,u,g){let x=g[u],b=[[y.CONST.STEP_SIZE,y.CONST.OVERLAP],[1,y.CONST.OVERLAP],[1,.3]];for(const O of b){let Z=O[0],A=O[1],P=x.transform[5],j=0,L=3*Z;if(!m.isFirstLineOfPage(u,g)){let M=m.isSameLine(g[u-1],x);m.isLineIntersec(g[u-1],x)?(P=g[u-1].transform[5]+g[u-1].height,j=g[u-1].transform[5],g[u-1].transform[4]>g[u].transform[4]+2*y.CONST.MARGIN_LEFT?j-=2*y.CONST.MARGIN_LEFT:j+=g[u-1].height*A,Z=1,L=g[u].transform[5]+g[u].height/2-P):(j=M&&u-2>=0?g[u-2].transform[5]+g[u-2].height*A:g[u-1].transform[5]+g[u-1].height*A,M&&m.isFirstLineOfPage(u-1,g)&&(j=0))}if(!y.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let I=!1;for(;P>j;){if(!m.hasColor(C,x.transform[4],P,x.width,Z))return[P,0];I||(I=!0,P+=L),P-=Z}}return[x.transform[5],1]}static arrContains(C,u){for(const g of u)if(g==C)return!0;return!1}static getBottomLine(C,u,g){let x=g[u],b=[[y.CONST.STEP_SIZE,y.CONST.OVERLAP],[1,y.CONST.OVERLAP],[1,.3]];for(const O of b){let Z=O[0],A=O[1],P=x.transform[5]+x.height,j=9999,L=3*Z;if(!m.isLastLineOfPage(u,g)){let M=m.isSameLine(g[u+1],x);m.isLineIntersec(g[u+1],x)?(P=g[u+1].transform[5],j=g[u+1].transform[5]+g[u+1].height,g[u+1].transform[4]>g[u].transform[4]+2*y.CONST.MARGIN_LEFT?j+=2*y.CONST.MARGIN_LEFT:j-=g[u+1].height*A,L=g[u].transform[5]+g[u].height/2-P):(j=M&&u+2<g.length?g[u+2].transform[5]+g[u+2].height-g[u+2].height*A:g[u+1].transform[5]+g[u+1].height-g[u+1].height*A,M&&m.isLastLineOfPage(u+1,g)&&(j=9999));let H=g[u+1].top;if(H&&P>=H&&!M)return[H,0]}if(!y.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let I=!1;for(;P<j;){if(!m.hasColor(C,x.transform[4],P,x.width,Z))return[P,0];I||(I=!0,P-=L),P+=Z}}return[x.transform[5]+x.height,1]}static hasColor(C,u,g,x,b){let O=Math.round(u),Z=Math.round(O+x),A=Math.round(g),P=Math.round(A+b);for(let H=A;H<P;H++)for(let Y=O;Y<Z;Y++){let G=4*(H*C.width+Y);if((C.data[G]+C.data[G+1]+C.data[G+2])/3<150)return!0}return!1}static calIndexPos2(C,u,g,x,b){let O=[],Z=0,A=0,P=0,j=0,L=0,I=0,M=!0,H=!0;for(const V of C){H=this.isObjIntersec(C[0],V),j=V.transform[4],b||(Z+=j-P>y.CONST.SPLIT_MARGIN&&""!=V.str.trim()||L!=V.transform[5]?1:0),M=j+2*y.CONST.MARGIN_LEFT>=P;let R=V.transform[4]+V.width;if(H&&(P=R),R>A&&H&&(A=R),Z+=V.str.length,Z>x&&M&&H){V.transform.forEach(ct=>{O.push(ct)}),O[3]=V.height,O[2]=I,O[1]=V.str.length-Z+x;let ot=V.str.substr(0,V.str.length-Z+x+1);if(ot.length==V.str.length){O[4]=O[4]+V.width;break}var G=u[V.fontName].fontFamily,$=Math.hypot(V.transform[2],V.transform[3]);g.font=`${$}px ${G}`;let dt=g.measureText(ot).width,lt=g.measureText(V.str).width;O[4]=O[4]+V.width*dt/lt;break}H&&(L=V.transform[5]),I++}return 0==O.length&&(O=[0,C[C.length-1].length-1,C.length-1,C[0].height,A,C[0].transform[5]]),O}static calIndexPos(C,u,g,x,b){let O=[],Z=0,A=0,P=0,j=0,L=0,I=0,M=!0,H=!0,Y="";for(const R of C){H=this.isObjIntersec(C[0],R),j=R.transform[4],b||(Z+=j-P>y.CONST.SPLIT_MARGIN&&""!=R.str.trim()||L!=R.transform[5]?1:0,Y+=(j-P>y.CONST.SPLIT_MARGIN&&""!=R.str.trim()||L!=R.transform[5]?"|":"")+R.str),M=j+2*y.CONST.MARGIN_LEFT>=P;let ot=R.transform[4]+R.width;if(H&&(P=ot),ot>A&&H&&(A=ot),Z+=R.str.length,Z>x&&M&&H){let dt=R.str.substr(0,R.str.length-Z+x);var $=u[R.fontName].fontFamily,V=Math.hypot(R.transform[2],R.transform[3]);g.font=`${V}px ${$}`;let lt=g.measureText(dt).width,ct=g.measureText(R.str).width;R.transform.forEach(wt=>{O.push(wt)}),O[4]=O[4]+R.width*lt/ct,O[3]=R.height,O[2]=I,O[1]=R.str.length-Z+x;break}H&&(L=R.transform[5]),I++}return 0==O.length&&(O=[0,C[C.length-1].length-1,C.length-1,C[0].height,A,C[0].transform[5]]),O}static getTextBottom(C,u,g,x){let b=Math.atan2(C[1],C[0]);u.vertical&&(b+=Math.PI/2);const O=Math.hypot(C[2],C[3]),Z=O*m.getAscent(u.fontFamily,g,x);let A=C[5],P=0;P=0===b?Z:Z*Math.cos(b);let j=0*P;return A=C[5]-P-j,[A,O+j]}static getAscent(C,u,g){const O=g.get(C);if(O)return O;u.save(),u.font=`30px ${C}`;const Z=u.measureText("");let A=Z.fontBoundingBoxAscent,P=Math.abs(Z.fontBoundingBoxDescent);if(A){u.restore();const L=A/(A+P);return g.set(C,L),L}u.strokeStyle="red",u.clearRect(0,0,30,30),u.strokeText("g",0,0);let j=u.getImageData(0,0,30,30).data;P=0;for(let L=j.length-1-3;L>=0;L-=4)if(j[L]>0){P=Math.ceil(L/4/30);break}u.clearRect(0,0,30,30),u.strokeText("A",0,30),j=u.getImageData(0,0,30,30).data,A=0;for(let L=0,I=j.length;L<I;L+=4)if(j[L]>0){A=30-Math.floor(L/4/30);break}if(u.restore(),A){const L=A/(A+P);return g.set(C,L),L}return g.set(C,.8),.8}static getMaxLineRight(C,u){let g=0;for(const x of u)if(x.pageIndex==C||-1==C){let b=x.transform[4]+x.width;b>g&&(g=b)}return g}static getMinLineLeft(C,u){let g=99999;for(const x of u)if(x.pageIndex==C||-1==C){let b=x.transform[4];b<g&&(g=b)}return g}}F.CanvasUtil=m},95318:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.PdfUtils=void 0;const y=T(25442),m=T(68261);class U{constructor(){let u=document.createElement("canvas");this.tempCanvas=u.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(u,g){let b={url:URL.createObjectURL(u),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const O=pdfjsLib.getDocument(b);let Z=[],A=this;O.promise.then(function(P){A.optionalContentConfigPromise=P.getOptionalContentConfig();let j=P._pdfInfo.numPages;for(let L=1;L<=j;L++)P.getPage(L).then(I=>{Z.push(I),Z.length==j&&(Z=Z.sort((M,H)=>M._pageIndex>H._pageIndex?1:-1),g(Z))})},function(P){console.error(P)})}getImages(u,g){let x=[];if("function"!=typeof u.objs.getAll)return x;let b=u.objs.getAll(),O=Object.keys(b);for(const Z of O)b[Z].data.pageIndex=g,x.push(b[Z].data);return x}isImageObj(u){return-999==u.transform[0]&&"img"==u.str}getLines(u,g,x,b){let O=b.scale,Z=u.items.length;for(let I=0;I<Z;I++){let M=u.items[I];this.isImageObj(M)||(M.transform=U.transform(b.transform,M.transform),M.width=M.width*O),M.transform[4]+M.width>x.canvas.width&&(M.width=x.canvas.width-M.transform[4]-20);let H=this.isImageObj(M)?[M.transform[5],M.height]:m.CanvasUtil.getTextBottom(M.transform,u.styles[M.fontName],this.tempCanvas,this.ascentCache);M.height=H[1];let Y=Math.ceil(H[0]);M.transform[5]=Y}u.items.sort((I,M)=>1e6*Math.floor(I.transform[5])-I.transform[4]<1e6*Math.floor(M.transform[5])-M.transform[4]?-1:1);let j,A=[],P=0;this.imageCache[g]?j=this.imageCache[g]:(j=x.getImageData(0,0,x.canvas.width,x.canvas.height),this.imageCache[g]=j);let L={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let I=0;I<Z;I++){let M=u.items[I];if(this.isImageObj(M))for(let Y=0;Y<Z;Y++){let G=u.items[Y];if(!this.isImageObj(G)&&I!=Y&&m.CanvasUtil.isObjIntersec(M,G)&&""!=G.str.trim()&&!/^[\sA-K\.\|]+$/g.test(G.str)){M.str="";break}}if(m.CanvasUtil.arrContains(M.str.trim(),y.CONST.SKIP_CHAR))continue;let H=Math.floor(M.transform[5]+M.height);0!=P?P-H>=-y.CONST.LINE_MAGIN?this.addTxtToLine(L,M):0!=L.textObjs.length&&(A.push(L),L=this.newLine(M,g),P=Math.floor(L.transform[5]+L.height)):(L=this.newLine(M,g),P=Math.floor(L.transform[5]+L.height))}A.push(L);for(const I of A)this.calculateSize(I);this.findAndMergeAnsQuestBlock(A,"ans"),this.findAndMergeAnsQuestBlock(A,"quest"),this.findAndMergeBlock(A),this.mergeIntersecLine(A),this.mergeSmallLine(A,j);for(const I of A)this.calculateSize(I);return A}mergeIntersecLine(u){let g=0;for(;g<u.length;){let x=u[g];g++,g<u.length&&m.CanvasUtil.isLineVIntersec(x,u[g])&&(this.mergeLine(x,u[g]),u.splice(g,1),g--)}}findAndSplitQuestAnsLine(u,g,x){let b=0,O=[],Z=y.CONST.BREAK_LINE_PATTERN.join("|");for(const A of u){A.top=void 0,A.bottom=void 0;let P=A.strLine.replace(/\|/g,"").trim().match(Z);if(null!=P&&P.length>0){let j=/[\s\|\.]+[B\u0412][\s\|]*\./g,L=A.strLine.trim().toUpperCase().match(j);if(null!=L&&L.length>0){let I=P[0].toUpperCase().indexOf("A");O.push({lineIndex:b,strIndex:I})}}b++}for(let A=O.length-1;A>=0;A--){let P=O[A].lineIndex;this.splitLine(P,g[u[P].pageIndex],x[u[P].pageIndex],O[A].strIndex,u)}}mergeSmallLine(u,g){let x=0,b=1.2*y.CONST.LINE_SMALL_HEIGHT;for(;x<u.length;){let O=u[x];if(!O||!this.isSmallLine(O)){x++;continue}x-1>=0&&!u[x-1].bottom&&(u[x-1].bottom=m.CanvasUtil.getBottomLine(g,x-1,u)[0]),x+1<u.length&&!u[x+1].top&&(u[x+1].top=m.CanvasUtil.getTopLine(g,x+1,u)[0]);let Z=x-1<0?-9999:this.getLineTop(O)-this.getLineBot(u[x-1]),A=x+1>=u.length?-9999:this.getLineTop(u[x+1])-this.getLineBot(O),P=x-1>=0&&u[x-1].transform[4]<=O.transform[4]&&O.transform[4]<=u[x-1].transform[4]+u[x-1].width,j=x+1<u.length&&u[x+1].transform[4]<=O.transform[4]&&O.transform[4]<=u[x+1].transform[4]+u[x+1].width;if(0==x&&A<=b&&j){this.mergeLine(u[x+1],O),u.splice(x,1),x--;continue}if(x==u.length-1&&Z<=b&&P){this.mergeLine(u[x-1],O),u.splice(x,1),x--;continue}let L=-1;Z>A&&j&&A<=b?L=x+1:Z<=A&&P&&Z<=b?L=x-1:Z<=A&&j&&A<=b?L=x+1:Z>A&&P&&Z<=b&&(L=x-1),L>=0?(this.mergeLine(u[L],O),u.splice(x,1),x--):x++}}isSmallLine(u){return u.height<y.CONST.LINE_SMALL_HEIGHT}mergeLine(u,g){for(const x of g.textObjs)this.addTxtToLine(u,x)}findAndMergeAnsQuestBlock(u,g){let b=0;for(;b<u.length;){if("ans"==g&&this.isAnsLine(u[b])||"quest"==g&&this.isQuestLine(u[b])){let Z=b,A=-1,P=1,j=[];for(;P<=10;){if(Z=b+A*P,Z<0){A=1,P=1;continue}if(Z>=u.length)break;let L=this.isAnsLine(u[Z]),I=L||this.isQuestLine(u[Z]),M="ans"==g&&L&&m.CanvasUtil.isSameLine(u[b],u[Z]),H=!I&&m.CanvasUtil.isLineIntersec(u[b],u[Z])&&u[Z].transform[4]>u[b].transform[4];if((M||H)&&j.push(Z),P++,I&&1==A)break;(P>10||I)&&-1==A&&(A=1,P=1)}j.sort((L,I)=>L<I?1:-1);for(const L of j)for(const I of u[L].textObjs)this.addTxtToLine(u[b],I);for(const L of j)u.splice(L,1),L<b&&b--}b++}}findAndMergeBlock(u){let g=0;for(;g<u.length;){if(this.isAnsLine(u[g])||this.isQuestLine(u[g])){g++;continue}let b=g+1;for(;b<u.length&&u[g].pageIndex==u[b].pageIndex;){let O=this.isAnsLine(u[b])||this.isQuestLine(u[b]);if(m.CanvasUtil.isLineIntersec(u[g],u[b])&&!O||m.CanvasUtil.isSameLine(u[g],u[b])){for(const Z of u[b].textObjs)this.addTxtToLine(u[g],Z);u.splice(b,1),b=g}b++}g++}}isAnsLine(u){let x=u.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=x&&x.length>0}isQuestLine(u){let g=y.CONST.QUESTION_PATTERN.join("|"),x=u.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=x&&x.length>0}encodeLines(u,g){let x="",b=0;for(const O of g){if(O.height<y.CONST.LINE_SMALL_HEIGHT){b-1>=0&&!g[b-1].bottom&&(g[b-1].bottom=m.CanvasUtil.getBottomLine(u,b-1,g)[0]),b+1<g.length&&!g[b+1].top&&(g[b+1].top=m.CanvasUtil.getTopLine(u,b+1,g)[0]);let Z=b-1<0?-9999:this.getLineTop(O)-this.getLineBot(g[b-1]),A=b+1>=g.length?-9999:this.getLineTop(g[b+1])-this.getLineBot(O),P=b-1>=0&&g[b-1].transform[4]<=O.transform[4]&&O.transform[4]+O.width<=g[b-1].transform[4]+g[b-1].width,j=b+1<g.length&&g[b+1].transform[4]<=O.transform[4]&&O.transform[4]+O.width<=g[b+1].transform[4]+g[b+1].width,L=1.2*y.CONST.LINE_SMALL_HEIGHT;Math.abs(Z)>=L&&Math.abs(A)>=L?x+="L":x+=-9999==Z?"3":-9999==A?"4":Z>A&&j?"2":Z<=A&&P?"1":Z<=A&&j?"2":Z>A&&P?"1":"L"}else x+="L";b++}return x}getLineTop(u){return u.top?u.top:u.transform[5]}getLineBot(u){return u.bottom?u.bottom:u.transform[5]+u.height}splitLine(u,g,x,b,O){let Z=O[u],A=m.CanvasUtil.calIndexPos(Z.textObjs,g,x,b,!0),P=this.newLine(Z.textObjs[0],Z.pageIndex),j=A[2],L=A[1],I=Z.textObjs[j],M=I.transform,H={str:I.str.substr(0,L),width:A[4]-M[4],height:I.height,fontName:I.fontName,transform:[M[0],M[1],M[2],M[3],M[4],M[5]]},Y={str:I.str.substr(L),width:I.width-H.width,height:I.height,fontName:I.fontName,transform:[M[0],M[1],M[2],M[3],A[4],M[5]]},G=Z.textObjs;Z.textObjs=[],P.textObjs=[];for(let $=0;$<G.length;$++)$<j?this.addTxtToLine(Z,G[$]):$>j?this.addTxtToLine(P,G[$]):(this.addTxtToLine(Z,H),this.addTxtToLine(P,Y));return this.calculateSize(Z),this.calculateSize(P),u==O.length-1?O.push(P):O.splice(u+1,0,P),P}findAndMergeSmallLine(u,g,x){let b=0,O=u.matchAll(x),Z=[];for(;;){let A=O.next();if(A.done)break;let P=A.value[0],j=A.value.index,L=0,I=[];for(let M=0;M<P.length;M++)"L"==P[M]?L=j+M:I.push(j+M);for(const M of I){for(const H of g[M].textObjs)this.addTxtToLine(g[L],H);g[L].top=void 0,g[L].bottom=void 0,Z.push(M)}b++}Z.sort((A,P)=>A<P?1:-1);for(const A of Z)g.splice(A,1);return b}newLine(u,g){let x={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return x.transform[4]=u.transform[4],x.transform[5]=u.transform[5],x.height=u.height,x.width=u.width,x.txtLength=u.str.length,x.textObjs.push(u),x}addTxtToLine(u,g){g.transform[4]<u.transform[4]&&(u.transform[4]=g.transform[4]),g.transform[5]<u.transform[5]&&(u.transform[5]=g.transform[5]),g.transform[5]+g.height>u.transform[5]+u.height&&(u.height=g.transform[5]+g.height-u.transform[5]),g.transform[4]+g.width>u.transform[4]+u.width&&(u.width=g.transform[4]+g.width-u.transform[4]),u.txtLength+=g.str.length,u.textObjs.push(g);let x=u.transform[4]+u.width,b=u.height;for(const O of u.textObjs)O.transform[4]+O.width>x&&(x=O.transform[4]+O.width),O.transform[5]+O.height>u.transform[5]+b&&(b=O.transform[5]+O.height-u.transform[5]);u.width=x-u.transform[4],u.height=b}static transform(u,g){return pdfjsLib.Util.transform(u,g)}render(u,g,x,b){var O;let Z=this,A=u.length;for(let P=0;P<A;P++){let j=document.createElement("div");j.className="pdf-page",j.id="page-"+P,null===(O=document.getElementById(g))||void 0===O||O.appendChild(j),Z.renderPage(u[P],x,b)}}calculateSize(u){if(0==u.textObjs.length)return;u.textObjs.sort((I,M)=>1e6*Math.floor(I.transform[4])+I.transform[5]>1e6*Math.floor(M.transform[4])+M.transform[5]?1:-1),u.strLine="";let g=0,x=0,b=0,O=0,Z=9999,A=0,P=9999;for(const I of u.textObjs){let M=m.CanvasUtil.isObjIntersec(u.textObjs[0],I);b=I.transform[4];let H=b-x>y.CONST.SPLIT_MARGIN&&""!=I.str.trim()||O!=I.transform[5]?"|":"";u.strLine+=H+I.str,b<P&&(P=b);let Y=I.transform[4]+I.width;M&&(x=Y),Y>g&&M&&(g=Y),M&&(O=I.transform[5]),I.transform[5]<Z&&(Z=I.transform[5]),I.transform[5]+I.height>A&&(A=I.transform[5]+I.height)}u.transform[4]=P,u.transform[5]=Z,u.width=g-P,u.height=A-Z,u.transform[0]=Z,u.transform[1]=A;let j=y.CONST.TVCN_CHAR,L=u.strLine;for(const I of j)L=L.replace(new RegExp(I[0],"g"),I[1]);u.strLine=L}renderPage(u,g,x){let b=u._pageIndex,O=u.getViewport({scale:g}),Z=.8*O.width,A=document.createElement("canvas"),P=document.getElementById("page-"+b);P?.appendChild(A),A.id="canvas"+b;let j=A.getContext("2d",{alpha:!1});A.height=O.height,A.width=O.width,A.style.height=O.height*Z/O.width+"px",A.style.width=Z+"px",P&&(P.style.width=A.style.width,P.style.height=A.style.height);const I={canvasContext:j,transform:[1,0,0,1,0,0],viewport:O,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};u.render(I).promise.then(function(){x&&x(j,u._pageIndex,O)})}}F.PdfUtils=U},22161:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Process=void 0;const y=T(25442),m=T(17585),U=T(82700),C=T(68261),u=T(95318);F.Process=class g{constructor(b){var O,Z;this.config=b,y.CONST.load(b);let A=JSON.parse(b);y.CONST.LINE_SMALL_HEIGHT=A.LINE_SMALL_HEIGHT*y.CONST.RENDER_SCALE,y.CONST.SPLIT_MARGIN=A.SPLIT_MARGIN*y.CONST.RENDER_SCALE,y.CONST.INTERSEC_MARGIN=A.INTERSEC_MARGIN*y.CONST.RENDER_SCALE,y.CONST.LINE_MAGIN=A.LINE_MAGIN*y.CONST.RENDER_SCALE,y.CONST.MARGIN_LEFT=A.MARGIN_LEFT*y.CONST.RENDER_SCALE,y.CONST.FOOTER_PATTERN=null!==(O=A.FOOTER_PATTERN)&&void 0!==O?O:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],y.CONST.HELP_ANS_PATTERN=null!==(Z=A.HELP_ANS_PATTERN)&&void 0!==Z?Z:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(b){this.updateStatusCallback=b}setOncompleteCallback(b){this.onCompleteCallback=b}getOverview(b){let O=b.filter(M=>M.isGroup).length,Z=b.filter(M=>!M.isGroup).length,A=b.filter(M=>M.answers.length>0).length,P=b.filter(M=>!M.isGroup&&0==M.answers.length).length,j=b.filter(M=>M.answers.length>4),L=j.length+"|"+j.map(M=>M.num).join(",");return j=b.filter(M=>M.answers.length<4&&M.answers.length>0),{groupNum:O+"",questNum:Z+"",tnNum:A+"",tlNum:P+"",tnGt4:L,tnLt4:j.length+"|"+j.map(M=>M.num).join(",")}}parsePdf(b){let O=new u.PdfUtils;O.loadPdf(b,Z=>{const A=Z.length;let P=[],j=[],L=document.createElement("div");L.id="hiddenWrapper",L.style.width="1px",L.style.height="1px",L.style.overflow="hidden",L.style.opacity="0",L.style.zIndex="-9999",L.style.position="fixed",L.style.top="0",L.style.left="0",document.body.appendChild(L);let I=document.createElement("div"),M="canvasWrapper";I.id=M,L.appendChild(I);const H=(new Date).getTime();let Y=[];O.render(Z,M,y.CONST.RENDER_SCALE,(G,$,V)=>{if(null!=G&&(P[$]=G,j[$]=V),Y.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${Y.length}/${A}`),Y.length==A){const R=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(R-H)/1e3+" secs"),this.startAnalyze(P,j,Z)}})})}imgToTextObj(b,O){return{str:"img",fontName:O,width:b.paintWidth,height:b.paintHeight,transform:[-999,0,0,0,-b.left,-b.top-b.paintHeight]}}startAnalyze(b,O,Z){const A=Z.length;let P=[],j=[],L=[],I=new u.PdfUtils;const M=(new Date).getTime();for(let H=0;H<A;H++){const Y=H;let G=I.getImages(Z[H],Y);Z[H].getTextContent().then($=>{for(const R of G)$.items.push(this.imgToTextObj(R,$.items.length>0?$.items[0].fontName:""));let V=I.getLines($,Y,b[Y],O[Y]);if(j=j.concat(V),L[Y]=$.styles,P.push(1),P.length==A){j.sort((vt,At)=>1e7*vt.pageIndex+(vt.transform.length>0?vt.transform[5]:0)-(1e7*At.pageIndex+(At.transform.length>0?At.transform[5]:0))),I.findAndSplitQuestAnsLine(j,L,b);let R=new U.FooterParser,ot=0;for(const vt of j){if((j.length-1==ot||ot+1<j.length-1&&vt.pageIndex!=j[ot+1].pageIndex)&&(vt.isLastLine=!0),vt.isLastLine&&R.parse(vt.strLine).length>0){vt.isFooter=!0;let At=C.CanvasUtil.getBottomLine(I.imageCache[j[ot-1].pageIndex],ot-1,j);vt.top=At[0]+y.CONST.MARGIN_LEFT}ot++}let dt=new m.ExamParser(this.config),lt=j.map(vt=>vt.strLine),ct=dt.parse(lt),wt=this.getQuestionInfo(ct,j,L,b,I.imageCache);const Pt=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(Pt-M)/1e3+" secs"),this.showOnCanvas(wt,b,y.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(wt,b)}})}}getPosInfo(b,O,Z,A,P,j,L,I,M){if(!Z.top){let G=C.CanvasUtil.getTopLine(P,j,A);Z.top=G[0],Z.isIntersec=G[1]}if(!Z.bottom){let G=C.CanvasUtil.getBottomLine(P,j,A);Z.bottom=G[0],Z.isIntersec=G[1]}return{str:"",pageIndex:Z.pageIndex,lineIndex:j,transform:"a"==b?C.CanvasUtil.calIndexPos2(Z.textObjs,I,L,M?M-1:0):Z.transform,startLeft:O>=0?C.CanvasUtil.calIndexPos2(Z.textObjs,I,L,O-1):void 0,type:b}}getQuestionInfo(b,O,Z,A,P){let j=[];for(const L of b){let I=L.parts[0].lineIdx,M=O[I],H=this.getPosInfo("q",L.parts[0].s,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex]),Y=null;if(I=L.parts[L.parts.length-1].lineIdx,L.answers.length>0){let G=L.answers[L.answers.length-1];G.parts.length>0&&(I=G.parts[G.parts.length-1].lineIdx)}if(I+=1,I<O.length&&(M=O[I],Y=this.getPosInfo("q",-1,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex])),L.isGroup)j.push({num:L.label,answers:[],remove:this.getQuestRemoveBox(H,O),positions:this.getQuestBoxes(H,O,Y,A[M.pageIndex].canvas.height),isGroup:!0,text:L.parts.map(G=>O[G.lineIdx])});else{let G={num:L.label,answers:[],remove:this.getQuestRemoveBox(H,O),positions:this.getQuestBoxes(H,O,Y,A[M.pageIndex].canvas.height),group:L.group,strAns:L.strAns,isFixAns:L.isFixAns,text:L.parts.map(V=>O[V.lineIdx])};j.push(G);let $=0;for(const V of L.answers){let R={pageIndex:G.remove.pageIndex,top:G.remove.top-1,left:G.remove.left-1,width:1,heigh:1};if(V.parts.length>0){if(I=V.parts[0].lineIdx,M=O[I],1==M.isIntersec&&(G.isFixAns=!0),V.parts.length>1&&(G.isFixAns=!0),H=this.getPosInfo("a",V.parts[0].s,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex],V.parts[0].b),Y=null,$<L.answers.length-1){let lt=L.answers[$+1];I=lt.parts[0].lineIdx,M=O[I],Y=this.getPosInfo("a",lt.parts[0].s,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex],lt.parts[0].b)}else I=V.parts[V.parts.length-1].lineIdx+1,I<O.length-1&&(M=O[I],Y=this.getPosInfo("q",-1,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex]));let ot=this.getAnsRemoveBox(H,O),dt={label:V.label,remove:ot,isCorrect:V.isCorrect,positions:V.isInline?[ot]:this.getAnsBoxes(H,O,Y,A[M.pageIndex].canvas.height)};G.answers.push(dt)}else G.answers.push({label:V.label,remove:R,isCorrect:V.isCorrect,positions:[R]});$++}L.help&&L.help.length>0&&(I=L.help[0].lineIdx,M=O[I],H=this.getPosInfo("q",L.help[0].s,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex]),Y=null,I=L.help[L.help.length-1].lineIdx+1,I<O.length&&(M=O[I],Y=this.getPosInfo("q",-1,M,O,P[M.pageIndex],I,A[M.pageIndex],Z[M.pageIndex])),G.help={num:L.label,remove:this.getQuestRemoveBox(H,O),positions:this.getQuestBoxes(H,O,Y,A[M.pageIndex].canvas.height),text:L.help.map(V=>O[V.lineIdx])})}}return j}showHidden(){let b=document.getElementById("hiddenWrapper");b&&(b.style.opacity="1",b.style.width="",b.style.height="",b.style.overflow="",b.style.position="")}showOnCanvas(b,O,Z){const A=(new Date).getTime(),P=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(Z.indexOf("quest")>=0)for(const L of b){for(const I of L.positions)C.CanvasUtil.drawBox(O[I.pageIndex],L.isGroup?"black":"red",I);C.CanvasUtil.drawBox(O[L.remove.pageIndex],"yellow",L.remove);for(const I of L.answers){for(const M of I.positions)C.CanvasUtil.drawBox(O[M.pageIndex],P.get(I.label)+"",M,!0);C.CanvasUtil.drawBox(O[I.remove.pageIndex],"yellow",I.remove),I.isCorrect&&C.CanvasUtil.drawPoint(O[I.positions[0].pageIndex],"green",I.positions[0])}if(L.help){for(const I of L.help.positions)C.CanvasUtil.drawBox(O[I.pageIndex],"orange",I);L.help.remove&&C.CanvasUtil.drawBox(O[L.help.remove.pageIndex],"yellow",L.help.remove)}}const j=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(j-A)/1e3+" secs")}getAnsRemoveBox(b,O){let Z=b.startLeft?b.startLeft[5]-2:O[b.lineIndex].top,A=b.transform[4]-y.CONST.MARGIN_LEFT,P=b.startLeft?b.startLeft[5]+b.startLeft[3]:O[b.lineIndex].bottom;return{pageIndex:b.pageIndex,top:Z||20,left:A,heigh:P&&Z?P-Z:0,width:(b.startLeft?b.startLeft[4]:0)-A}}getAnsBoxes(b,O,Z,A){const P=A,j=y.CONST.MARGIN_LEFT;let L=[],I=O[b.lineIndex].top,M=O[b.lineIndex].bottom;if(!I||!M)return[];let Y=M,G=b.transform[4]-j,$=Z&&b.lineIndex==Z.lineIndex?Z.transform[4]-j:O[b.lineIndex].transform[4]+O[b.lineIndex].width+j;if(L.push({pageIndex:b.pageIndex,top:I,left:G,width:$-G,heigh:M-I}),Z&&Z.lineIndex==b.lineIndex)return L;I=M,M=P,$=0;let V=b.pageIndex,R=0;for(R=b.lineIndex+1;R<O.length;R++){if(M==P&&C.CanvasUtil.isLastLineOfPage(R,O)){let dt=O[R].isFooter?O[R-1]:O[R];M=dt.transform[5]+dt.height+20}let ot=O[R].top;if(R>b.lineIndex+1&&!O[R-1].isFooter){let dt=O[R-1].transform[4]+O[R-1].width+j;dt>$&&($=dt);let lt=O[R-1].transform[4]-j;lt<G&&(G=lt)}if(O[R].isFooter&&ot)R-b.lineIndex>1?(M=O[R-1].transform[5]+O[R-1].height+y.CONST.LINE_MAGIN,G=O[b.lineIndex+1].transform[4]-j):M=O[b.lineIndex].bottom;else if(O[R].pageIndex>V&&(M&&M-I>y.CONST.LINE_SMALL_HEIGHT&&R-b.lineIndex>1&&L.push({pageIndex:V,top:I,left:G,width:$-G,heigh:M-I}),I=20,Y=I),V=O[R].pageIndex,ot){M=ot;break}}if(R>=O.length&&(R=O.length-1),R-b.lineIndex>1&&O[R-1].transform[5]>Y&&!C.CanvasUtil.isFirstLineOfPage(R,O)){let ot=20==I?O[R].transform[4]:O[b.lineIndex+1].transform[4];if(20!=I)for(let dt=b.lineIndex+2;dt<=R;dt++)O[dt].transform[4]<ot&&(ot=O[dt].transform[4]);M&&M-I>y.CONST.LINE_SMALL_HEIGHT&&L.push({pageIndex:V,top:I,left:ot,width:$-ot,heigh:M-I})}Z&&"a"==Z.type&&Z.transform[4]>O[Z.lineIndex].transform[4]+10*y.CONST.RENDER_SCALE&&($=Z.transform[4]-j,I=O[Z.lineIndex].top,G=O[Z.lineIndex].transform[4]-j,M=O[Z.lineIndex].bottom,I&&M&&M-I>y.CONST.LINE_SMALL_HEIGHT&&L.push({pageIndex:V,top:I,left:G,width:$-G,heigh:M-I}));for(let ot=L.length-1;ot>=1;ot--)L[ot].left-(L[ot-1].left+L[ot-1].width)>=20*y.CONST.RENDER_SCALE&&L.splice(ot,1);return L}getQuestRemoveBox(b,O){let Z=b.startLeft?b.startLeft[5]:O[b.lineIndex].top,A=b.transform[4]-y.CONST.MARGIN_LEFT,P=b.startLeft?b.startLeft[5]+b.startLeft[3]:O[b.lineIndex].bottom;return{pageIndex:b.pageIndex,top:Z||20,left:A,heigh:P&&Z?P-Z:0,width:(b.startLeft?b.startLeft[4]:0)-A}}getQuestBoxes(b,O,Z,A){let P=A;for(let R=b.lineIndex;R<O.length;R++)if(C.CanvasUtil.isLastLineOfPage(R,O)){let ot=O[R].isFooter?O[R-1]:O[R];P=ot.transform[5]+ot.height+20;break}let j=[],L=b.pageIndex,I=Z?Z.lineIndex:O.length-1,M=O[b.lineIndex].transform[4]-y.CONST.MARGIN_LEFT,H=O[b.lineIndex].top;if(!H)return[];let Y=y.CONST.CROP_FULL_WIDTH?C.CanvasUtil.getMaxLineRight(-1,O)+2*y.CONST.MARGIN_LEFT:O[b.lineIndex].transform[4]+O[b.lineIndex].width+2*y.CONST.MARGIN_LEFT,G=P,$=L,V=b.lineIndex+1;for(;V<=I;V++){let R=O[V].top;if(V==O.length-1&&!Z&&(R=O[V].bottom),!y.CONST.CROP_FULL_WIDTH){let dt=O[V-1].transform[4]+O[V-1].width+2*y.CONST.MARGIN_LEFT;dt>Y&&(Y=dt)}let ot=O[V-1].transform[4]-y.CONST.MARGIN_LEFT;ot<M&&(M=ot),O[V].isFooter&&R?G=R:(O[V].pageIndex>$&&(O[V-1].isFooter||(G=P),j.push({pageIndex:$,top:H,left:M,width:Y-M,heigh:G-H}),H=20,M=C.CanvasUtil.getMinLineLeft(O[V].pageIndex,O)-y.CONST.MARGIN_LEFT),$=O[V].pageIndex,R&&(G=R))}if(V-=1,!Z&&C.CanvasUtil.isLastLineOfPage(V,O)){let R=O[V].isFooter?O[V-1]:O[V];G=R.transform[5]+R.height+20}return C.CanvasUtil.isFirstLineOfPage(V,O)||j.push({pageIndex:$,top:H,left:M,width:Y-M,heigh:G-H}),j}}},70432:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.AnswerParser=void 0;const y=T(20430);class m extends y.Parser{constructor(C){super(),null!=C&&(this.isOn=C),this.TYPE=m.TYPE_NAME}do(C){let u=[],g="|"+C,x=/([\s\|\.\]]+\*?[A-H][\s\|]*[\.\)])/g,b=this.matchPos(g,x,!1);0==b.length&&(b=this.matchPos(g,x,!0));let O=!1;0==b.length&&/^\|?\s*\*?[A-H\s\|]+$/g.test(g)&&(O=!0,b=this.matchPos(g,/\*?[A-H]/g,!1));let Z=!1;if(0==b.length&&(O=!0,Z=!0,b=this.matchPos(g,/\[\*?[A-H]:[^\]]+\]/g,!1)),b.length>0)for(const A of b){let P=A.index+A.value.length-1,j=-9999,L=A.value.replace(/\*?[\sA-H\|]/g,"");Z&&(j=A.index+A.value.length-2,A.index=A.index+1,P=A.index+1+(A.value.startsWith("[*")?1:0),L=".");let I={type:this.TYPE,pos:[A.index-1,P,j]},M=C.substring(I.pos[0]);!O&&!/^\|?\s*\*?[A-Himg\s\|\.]+$/g.test(g)&&M.trim()==A.value.trim()||(I.label=C.substring(I.pos[0],I.pos[0]+1),"*"==I.label&&(I.label=C.substring(I.pos[0]+1,I.pos[0]+2),I.extInfo="*"),I.olabel=L,I.score=1,""==C.substring(0,I.pos[0]).replace(/[\s\|]/g,"")&&(I.score=2),u.push(I))}return u}matchPos(C,u,g){let x=g?C.toUpperCase():C,b=/[\s\|\.\]]/,O=x.matchAll(u),Z=[];for(;;){let A=O.next();if(A.done)break;let P=0;for(let L=A.value.index;L<x.length&&b.test(x[L]);L++)P++;let j=A.value[0].substr(P,1);"A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("A")||"*A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("*A")||Z.push({value:A.value[0].substr(P),index:A.value.index+P})}return Z}}F.AnswerParser=m,m.TYPE_NAME="answer"},99739:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DapAnChiTietParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),this.TYPE=U.TYPE_NAME,null!=u&&(this.isOn=u)}do(u){let x=this.cleanLine(u);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(x)&&x.length>=2?[{type:U.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(u){let g=[/\|/g,/[\s\.\-:,;!\[\]@\*\$\(\)]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],x=u;x=x.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),x=x.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const b of g)x=x.replaceAll(b,"");return x=x.replaceAll("\\n"," "),x}getAnsMC(u,g){var x;let b=[];for(const j of g)b.push(u[null!==(x=j.lineIdx)&&void 0!==x?x:0]);let O=b.join(""),Z=this.cleanLine(O),A=this.getResultMC(Z.toUpperCase()),P=new Map;for(const j of A)P.set(j.num,j.str);return P}getAnsStr(u){let g=u.join("\n");g=g.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),g=g.replaceAll(/\[![!iucsbp]+:!!\]/g,""),g=g.replaceAll("[*","").replaceAll("*]","");let x=this.getResultStr(g),b=new Map;for(const O of x)b.set(O.num,O.str);return b}getAnsFromHelp(u,g){let x=[];for(const O of u){let Z=g[O.lineIdx];Z=Z.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),Z=Z.replaceAll(/\[![!iucsbp]+:!!\]/g,""),x.push(Z)}let b=0;for(const O of x){let Z=O.trim().match(y.CONST.HELP_ANS_PATTERN.join("|"));if(null!=Z)for(const A of Z)if(null!=A&&1==A.length)return u.splice(b,1),A;b++}return""}getResultStr(u){let g=[],x=u.replace(/\n/g,"\n"),b=y.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),O=x.matchAll(new RegExp(b,"ig"));for(;;){let L=O.next();if(L.done)break;let I=L.value[0],M=y.Utils.getNumberFromStr(I);x=x.replace(I,M+".")}let j,A=x.matchAll(/\d+[\.\-]/g),P=-1;for(;;){let L=A.next();if(L.done)break;if(-1==P)P=L.value.index,j=L;else{let I=x.substr(P,L.value.index-P);g.push(this.toAns(I,j)),P=L.value.index,j=L}}if(P>=0&&j){let L=x.substr(P);g.push(this.toAns(L,j))}return g}toAns(u,g){let x=g.value[0].length;return{num:+g.value[0].substr(0,x-1),str:u.substring(x).replace(/\s+/g," ").trim()}}getResultMC(u){let g=[],x="",b=[],O=!1;for(let Z=0;Z<u.length;Z++){let A=u.charCodeAt(Z),P=A>=65&&A<=72;if(P&&""==x)return[];P!=O&&(b.push(x),x=""),O=P,x+=u[Z]}""!=x&&b.push(x);for(let Z=1;Z<b.length;Z+=2){let A=0,P=Math.floor(b[Z-1].length/b[Z].length),j=+b[Z-1].substring(A,P),L=j;for(let I=0;I<b[Z].length;I++){if(I>=b[Z-1].length)return[];if(j=+b[Z-1].substring(A,A+P),j!=L)return[];g.push({num:j,str:b[Z][I]}),A+=P,L=j+1,P=L.toString().length}}return g}}F.DapAnChiTietParser=U,U.TYPE_NAME="chitietdapan"},80983:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DapAnParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){return this.match(u,y.CONST.DAPAN_PATTERN)}static getAnsFromHelp(u){for(const g of u){let x=g.replace(/\|/g,"").trim().match(y.CONST.HELP_ANS_PATTERN.join("|"));if(null!=x)for(const b of x)if(null!=b&&1==b.length)return b}return""}}F.DapAnParser=U,U.TYPE_NAME="dapan"},82700:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.FooterParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){return this.match(u,y.CONST.FOOTER_PATTERN)}}F.FooterParser=U,U.TYPE_NAME="footer"},65465:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.HetParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){return this.match(u,y.CONST.HET_PATTERN)}}F.HetParser=U,U.TYPE_NAME="end"},72687:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.HuongDanParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){return this.match(u,y.CONST.HUONGDAN_PATTERN)}}F.HuongDanParser=U,U.TYPE_NAME="huongdan"},29688:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.IncludeParser=void 0;const y=T(20430);class m extends y.Parser{constructor(C){super(),null!=C&&(this.isOn=C),this.TYPE=m.TYPE_NAME}do(C){let u=C.replace(/\|/g,"").trim(),x=/\[@([CTQG]\d+):[^\]]*\]/g,b=/\[@(F:[^\]]*)\]/g,O=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,Z=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(u)){let A=u;return A=A.replaceAll(x,"$1").replaceAll(b,"$1").replaceAll(O,"$1").replaceAll(Z,""),[{type:this.TYPE,pos:[0,0],label:"@@."+A}]}return[]}}F.IncludeParser=m,m.TYPE_NAME="include"},20430:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Parser=void 0,F.Parser=class T{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(m){return this.isOn?this.do(m):[]}match(m,U){let C=m.replace(/\|/g,"").trim().match(U.join("|"));return null!=C&&C.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},49362:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.QuestionParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){let g=this.matchPos(u);if(g.value){let x=null;for(let j=g.value.length-1;j>=0;j--)if(g.value[j]){x=g.value[j];break}if(null==x)return[];let b=u.replace(/\|/g,"").toLowerCase().indexOf(x),O=b,Z="",A=u.toLowerCase();for((x.endsWith("(")||x.endsWith("["))&&(x=x.substring(0,x.length-1));O<A.length&&("|"!=A[O]&&(Z+=A[O]),O++,Z!=x););let P={type:this.TYPE,pos:[b,O]};return P.label=this.getNumberFromStr(u.substring(P.pos[0],P.pos[1])),P.olabel=x,[P]}return[]}matchPos(u){let g=u.replace(/\|/g,"").toLowerCase().trim(),x=y.CONST.QUESTION_PATTERN.join("|"),b=g.matchAll(x).next();return b.value||(x=y.CONST.QUESTION_PATTERN2.join("|"),b=g.matchAll(x).next()),b}getNumberFromStr(u){let g=u.match(/(\d+)/);return g?g[0]:""}}F.QuestionParser=U,U.TYPE_NAME="question"},50610:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.SectionParser=void 0;const y=T(25442),m=T(20430);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}do(u){let g=u.replace(/\|/g,"");g=g.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let x=g.toLowerCase().trim().match(y.CONST.SECTION_PATTERN_LOWER.join("|")),b=null!=x&&x.length>0;return b||(x=g.trim().match(y.CONST.SECTION_PATTERN_NORMAL.join("|")),b=null!=x&&x.length>0),b&&x?[{type:this.TYPE,pos:[0,0],label:g}]:[]}}F.SectionParser=U,U.TYPE_NAME="section"},85215:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.ModifyAnsRule=void 0;const y=T(36994);class m extends y.Rule{constructor(C){super(C??"","modify:")}load(C){let u=new m(C);return""!=u.pattern?u:null}run(C,u){if(""==this.pattern)return!1;if(this.getStack(C,u).endsWith(this.pattern)&&this.checkVal(C,u)){for(const x of this.data){let b=x.split(":"),O=u-+b[0],Z=C[O].label;C[O].label=b[1],C[O].err=Z+" -> "+b[1]}return!0}return!1}}F.ModifyAnsRule=m},72617:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.RemoveDupRule=void 0;const y=T(36994);class m extends y.Rule{constructor(C){super(C??"","rmdup:")}load(C){let u=new m(C);return""!=u.pattern?u:null}run(C,u){var g,x;if(""==this.pattern)return!1;if(this.getStack(C,u).endsWith(this.pattern)){let O=null!==(g=C[u].score)&&void 0!==g?g:0,Z=null!==(x=C[u-1].score)&&void 0!==x?x:0;if(C[u].label==C[u-1].label)return C.splice(O>Z?u-1:u,1),!0}return!1}}F.RemoveDupRule=m},69504:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.RemoveRule=void 0;const y=T(36994);class m extends y.Rule{constructor(C){super(C??"","remove:")}load(C){let u=new m(C);return""!=u.pattern?u:null}run(C,u){if(""==this.pattern)return!1;if(this.getStack(C,u).endsWith(this.pattern)&&this.checkVal(C,u)){for(const x of this.data)C.splice(u-+x,1);return!0}return!1}}F.RemoveRule=m},36994:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Rule=void 0,F.Rule=class T{constructor(m,U){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=U,!m.startsWith(this.TYPE))return;let u=m.substring(this.TYPE.length).split("=>"),g=u[0].split(":");this.pattern=g[0].trim(),this.valPattern=g.length>1?g[1].trim():"",this.data=u[1].split(",").map(x=>x.trim())}checkVal(m,U){var C;if(""==this.valPattern)return!0;let g=[];for(let b=Math.ceil(this.pattern.length/2);b>0;b--)g.push(null===(C=m[U-b+1].label)||void 0===C?void 0:C.trim());let x=g.join("-");return new RegExp(this.valPattern).test(x)}getStack(m,U){let C="",u=U-10>=0?U-10:0;for(;u<=U;u++)C+="-"+m[u].type[0];return C}}},633:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.SameKindRule=void 0;const y=T(25442),m=T(80983),U=T(65465),C=T(72687),u=T(36994);class g extends u.Rule{constructor(b){super(b??"","same:")}load(b){let O=new g(b);return""!=O.pattern?O:null}run(b,O){var Z,A,P;if(""==this.pattern)return!1;let j=b[O];if(j.type[0]!=this.pattern)return!1;let L=[],I=[],M="";for(let H=0;H<O;H++){let Y=b[H];(Y.type==U.HetParser.TYPE_NAME||Y.type==m.DapAnParser.TYPE_NAME)&&(M="da"),Y.type==C.HuongDanParser.TYPE_NAME&&"da"==M&&(M="hd")}if("da"==M)return!1;for(let H=O-1;H>=0;H--){let Y=b[H];if(Y.type==U.HetParser.TYPE_NAME||Y.type==m.DapAnParser.TYPE_NAME||"hd"==M&&Y.type==C.HuongDanParser.TYPE_NAME||(Y.type[0]==this.pattern&&Y.olabel&&(L.push(Y.olabel),I.push(Y.label)),2==L.length))break}if(L.length>=1){let H=L[0],Y=2==L.length?L[1]:H,G=null!==(Z=j.olabel)&&void 0!==Z?Z:"";if("a"==this.pattern&&(""==H&&(H="."),""==Y&&(Y="."),""==G&&(G=".")),""==this.valPattern){if(H==Y&&G!=H)return b.splice(O,1),!0}else{let $=this.valPattern.split(",");for(const V of $){let R=V.trim(),dt=new RegExp(y.CONST[R].join("|"));if(dt.test(H)&&dt.test(Y)&&!dt.test(G)&&+(null!==(A=I[0])&&void 0!==A?A:"0")+1!=+(null!==(P=j.label)&&void 0!==P?P:"0"))return b.splice(O,1),!0}}}return!1}}F.SameKindRule=g},1164:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.AnswerParser=void 0;const y=T(51535),m=T(30479),U=T(71789);class C extends U.Parser{constructor(){super(),this.TYPE=C.TYPE_NAME}parse(g,x,b,O,Z,A){var P=[],j=this.matchPos(x.strLine,!1);if(0==j.length&&(j=this.matchPos(x.strLine,!0)),j.length>0)for(const L of j)P.push({str:L.value,pageIndex:x.pageIndex,lineIndex:b,transform:y.CanvasUtil.calIndexPos(x.textObjs,Z,A,L.index),startLeft:y.CanvasUtil.calIndexPos2(x.textObjs,Z,A,L.index+1),type:this.TYPE});return P}static getRemoveBox(g,x){let b=g.startLeft?g.startLeft[5]-2:x[g.lineIndex].top,O=g.transform[4]-m.CONST.MARGIN_LEFT,Z=g.startLeft?g.startLeft[5]+g.startLeft[3]:x[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:b||20,left:O,heigh:Z&&b?Z-b:0,width:(g.startLeft?g.startLeft[4]:0)-O}}static getBoxes(g,x,b,O){const Z=O,A=m.CONST.MARGIN_LEFT;let P=[],j=x[g.lineIndex].top,L=x[g.lineIndex].bottom;if(!j||!L)return[];let M=L,H=g.transform[4]-A,Y=b&&g.lineIndex==b.lineIndex?b.transform[4]-A:x[g.lineIndex].transform[4]+x[g.lineIndex].width+A;if(P.push({pageIndex:g.pageIndex,top:j,left:H,width:Y-H,heigh:L-j}),b&&b.lineIndex==g.lineIndex)return P;j=L,L=Z,Y=0;let G=g.pageIndex,$=0;for($=g.lineIndex+1;$<x.length;$++){if(L==Z&&y.CanvasUtil.isLastLineOfPage($,x)){let R=x[$].isFooter?x[$-1]:x[$];L=R.transform[5]+R.height+20}let V=x[$].top;if($>g.lineIndex+1&&!x[$-1].isFooter){let R=x[$-1].transform[4]+x[$-1].width+A;R>Y&&(Y=R);let ot=x[$-1].transform[4]-A;ot<H&&(H=ot)}if(x[$].isFooter&&V)$-g.lineIndex>1?(L=x[$-1].transform[5]+x[$-1].height+m.CONST.LINE_MAGIN,H=x[g.lineIndex+1].transform[4]-A):L=x[g.lineIndex].bottom;else if(x[$].pageIndex>G&&(L&&L-j>m.CONST.LINE_SMALL_HEIGHT&&$-g.lineIndex>1&&P.push({pageIndex:G,top:j,left:H,width:Y-H,heigh:L-j}),j=20,M=j),G=x[$].pageIndex,V){L=V;break}}if($>=x.length&&($=x.length-1),$-g.lineIndex>1&&x[$-1].transform[5]>M&&!y.CanvasUtil.isFirstLineOfPage($,x)){let V=20==j?x[$].transform[4]:x[g.lineIndex+1].transform[4];L&&L-j>m.CONST.LINE_SMALL_HEIGHT&&P.push({pageIndex:G,top:j,left:V,width:Y-V,heigh:L-j})}b&&b.type==C.TYPE_NAME&&b.transform[4]>x[b.lineIndex].transform[4]+25*m.CONST.RENDER_SCALE&&(Y=b.transform[4]-A,j=x[b.lineIndex].top,H=x[b.lineIndex].transform[4]-A,L=x[b.lineIndex].bottom,j&&L&&L-j>m.CONST.LINE_SMALL_HEIGHT&&P.push({pageIndex:G,top:j,left:H,width:Y-H,heigh:L-j}));for(let V=P.length-1;V>=1;V--)P[V].left-(P[V-1].left+P[V-1].width)>=20*m.CONST.RENDER_SCALE&&P.splice(V,1);return P}matchPos(g,x){for(var b=x?g.toUpperCase():g,O=m.CONST.ANS_PATTERN,Z=new RegExp("[\\s\\|\\.]"),A=b.matchAll(O),P=[];;){var j=A.next();if(j.done)break;for(var L=0,I=j.value.index;I<b.length&&Z.test(b[I]);I++)L++;let M=j.value[0].substr(L,1);"A"==M&&!b.replace(/\|/g,"").trim().startsWith("A")||P.push({value:M,index:j.value.index+L})}return P}}F.AnswerParser=C,C.TYPE_NAME="answer"},51535:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.CanvasUtil=void 0;const y=T(30479);class m{static drawPoint(C,u,g){null!=C&&(C.fillStyle=u,C.beginPath(),C.arc(g.left,g.top,5,0,2*Math.PI),C.fill())}static drawBox(C,u,g,x){null!=C&&(x?(C.fillStyle=u,C.beginPath(),C.rect(g.left,g.top,g.width,g.heigh),C.fill()):(C.strokeStyle=u,C.beginPath(),C.rect(g.left,g.top,g.width,g.heigh),C.stroke()))}static drawBox2(C,u,g,x,b){null!=C&&(C.strokeStyle=u,C.beginPath(),C.rect(b[4],b[5],g,x),C.stroke())}static drawLine(C,u,g,x){null!=C&&(C.strokeStyle=u,C.beginPath(),C.moveTo(g,x),C.lineTo(C.canvas.width-10,x),C.stroke())}static drawText(C,u,g,x){null!=C&&(C.font="11px Arial",C.fillStyle=u,C.fillText(x,g[4],g[5]))}static isLineIntersec(C,u){let g=C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height,x=u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height,b=C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width+y.CONST.INTERSEC_MARGIN,O=u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width+y.CONST.INTERSEC_MARGIN,Z=this.isSameLine(C,u);return(g||x)&&(b||O)&&!Z}static isLineVIntersec(C,u){return(C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height)&&(C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width+y.CONST.INTERSEC_MARGIN||u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width+y.CONST.INTERSEC_MARGIN)&&Math.abs(u.transform[4]-C.transform[4])>y.CONST.INTERSEC_MARGIN/2}static isSameLine(C,u){return Math.abs(C.transform[5]+C.height-(u.transform[5]+u.height))<=y.CONST.LINE_MAGIN}static isObjIntersec(C,u){return C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height}static isObjFullIntersec(C,u){return(C.transform[5]<=u.transform[5]&&u.transform[5]<=C.transform[5]+C.height||u.transform[5]<=C.transform[5]&&C.transform[5]<=u.transform[5]+u.height)&&(C.transform[4]<=u.transform[4]&&u.transform[4]<=C.transform[4]+C.width||u.transform[4]<=C.transform[4]&&C.transform[4]<=u.transform[4]+u.width)}static isFirstLineOfPage(C,u){return!(C<0||C>=u.length||0!=C&&u[C-1].pageIndex==u[C].pageIndex)}static isLastLineOfPage(C,u){return!(C<0||C>=u.length||C!=u.length-1&&u[C+1].pageIndex==u[C].pageIndex)}static getTopLine(C,u,g){let x=g[u],b=[[y.CONST.STEP_SIZE,y.CONST.OVERLAP],[1,y.CONST.OVERLAP],[1,.3]];for(const O of b){let Z=O[0],A=O[1],P=x.transform[5],j=0,L=3*Z;if(!m.isFirstLineOfPage(u,g)){let M=m.isSameLine(g[u-1],x);m.isLineIntersec(g[u-1],x)?(P=g[u-1].transform[5]+g[u-1].height,j=g[u-1].transform[5],g[u-1].transform[4]>g[u].transform[4]+2*y.CONST.MARGIN_LEFT?j-=2*y.CONST.MARGIN_LEFT:j+=g[u-1].height*A,Z=1,L=g[u].transform[5]+g[u].height/2-P):(j=M&&u-2>=0?g[u-2].transform[5]+g[u-2].height*A:g[u-1].transform[5]+g[u-1].height*A,M&&m.isFirstLineOfPage(u-1,g)&&(j=0))}if(!y.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let I=!1;for(;P>j;){if(!m.hasColor(C,x.transform[4],P,x.width,Z))return[P,0];I||(I=!0,P+=L),P-=Z}}return[x.transform[5],1]}static arrContains(C,u){for(const g of u)if(g==C)return!0;return!1}static getBottomLine(C,u,g){let x=g[u],b=[[y.CONST.STEP_SIZE,y.CONST.OVERLAP],[1,y.CONST.OVERLAP],[1,.3]];for(const O of b){let Z=O[0],A=O[1],P=x.transform[5]+x.height,j=9999,L=3*Z;if(!m.isLastLineOfPage(u,g)){let M=m.isSameLine(g[u+1],x);m.isLineIntersec(g[u+1],x)?(P=g[u+1].transform[5],j=g[u+1].transform[5]+g[u+1].height,g[u+1].transform[4]>g[u].transform[4]+2*y.CONST.MARGIN_LEFT?j+=2*y.CONST.MARGIN_LEFT:j-=g[u+1].height*A,L=g[u].transform[5]+g[u].height/2-P):(j=M&&u+2<g.length?g[u+2].transform[5]+g[u+2].height-g[u+2].height*A:g[u+1].transform[5]+g[u+1].height-g[u+1].height*A,M&&m.isLastLineOfPage(u+1,g)&&(j=9999));let H=g[u+1].top;if(H&&P>=H&&!M)return[H,0]}if(!y.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let I=!1;for(;P<j;){if(!m.hasColor(C,x.transform[4],P,x.width,Z))return[P,0];I||(I=!0,P-=L),P+=Z}}return[x.transform[5]+x.height,1]}static hasColor(C,u,g,x,b){let O=Math.round(u),Z=Math.round(O+x),A=Math.round(g),P=Math.round(A+b);for(let H=A;H<P;H++)for(let Y=O;Y<Z;Y++){let G=4*(H*C.width+Y);if((C.data[G]+C.data[G+1]+C.data[G+2])/3<150)return!0}return!1}static calIndexPos2(C,u,g,x,b){let O=[],Z=0,A=0,P=0,j=0,L=0,I=0,M=!0,H=!0;for(const V of C){H=this.isObjIntersec(C[0],V),j=V.transform[4],b||(Z+=j-P>y.CONST.SPLIT_MARGIN&&""!=V.str.trim()||L!=V.transform[5]?1:0),M=j+2*y.CONST.MARGIN_LEFT>=P;let R=V.transform[4]+V.width;if(H&&(P=R),R>A&&H&&(A=R),Z+=V.str.length,Z>x&&M&&H){V.transform.forEach(ct=>{O.push(ct)}),O[3]=V.height,O[2]=I,O[1]=V.str.length-Z+x;let ot=V.str.substr(0,V.str.length-Z+x+1);if(ot.length==V.str.length){O[4]=O[4]+V.width;break}var G=u[V.fontName].fontFamily,$=Math.hypot(V.transform[2],V.transform[3]);g.font=`${$}px ${G}`;let dt=g.measureText(ot).width,lt=g.measureText(V.str).width;O[4]=O[4]+V.width*dt/lt;break}H&&(L=V.transform[5]),I++}return 0==O.length&&(O=[0,C[C.length-1].length-1,C.length-1,C[0].height,A,C[0].transform[5]]),O}static calIndexPos(C,u,g,x,b){let O=[],Z=0,A=0,P=0,j=0,L=0,I=0,M=!0,H=!0,Y="";for(const R of C){H=this.isObjIntersec(C[0],R),j=R.transform[4],b||(Z+=j-P>y.CONST.SPLIT_MARGIN&&""!=R.str.trim()||L!=R.transform[5]?1:0,Y+=(j-P>y.CONST.SPLIT_MARGIN&&""!=R.str.trim()||L!=R.transform[5]?"|":"")+R.str),M=j+2*y.CONST.MARGIN_LEFT>=P;let ot=R.transform[4]+R.width;if(H&&(P=ot),ot>A&&H&&(A=ot),Z+=R.str.length,Z>x&&M&&H){let dt=R.str.substr(0,R.str.length-Z+x);var $=u[R.fontName].fontFamily,V=Math.hypot(R.transform[2],R.transform[3]);g.font=`${V}px ${$}`;let lt=g.measureText(dt).width,ct=g.measureText(R.str).width;R.transform.forEach(wt=>{O.push(wt)}),O[4]=O[4]+R.width*lt/ct,O[3]=R.height,O[2]=I,O[1]=R.str.length-Z+x;break}H&&(L=R.transform[5]),I++}return 0==O.length&&(O=[0,C[C.length-1].length-1,C.length-1,C[0].height,A,C[0].transform[5]]),O}static getTextBottom(C,u,g,x){let b=Math.atan2(C[1],C[0]);u.vertical&&(b+=Math.PI/2);const O=Math.hypot(C[2],C[3]),Z=O*m.getAscent(u.fontFamily,g,x);let A=C[5],P=0;P=0===b?Z:Z*Math.cos(b);let j=0*P;return A=C[5]-P-j,[A,O+j]}static getAscent(C,u,g){const O=g.get(C);if(O)return O;u.save(),u.font=`30px ${C}`;const Z=u.measureText("");let A=Z.fontBoundingBoxAscent,P=Math.abs(Z.fontBoundingBoxDescent);if(A){u.restore();const L=A/(A+P);return g.set(C,L),L}u.strokeStyle="red",u.clearRect(0,0,30,30),u.strokeText("g",0,0);let j=u.getImageData(0,0,30,30).data;P=0;for(let L=j.length-1-3;L>=0;L-=4)if(j[L]>0){P=Math.ceil(L/4/30);break}u.clearRect(0,0,30,30),u.strokeText("A",0,30),j=u.getImageData(0,0,30,30).data,A=0;for(let L=0,I=j.length;L<I;L+=4)if(j[L]>0){A=30-Math.floor(L/4/30);break}if(u.restore(),A){const L=A/(A+P);return g.set(C,L),L}return g.set(C,.8),.8}static getMaxLineRight(C,u){let g=0;for(const x of u)if(x.pageIndex==C||-1==C){let b=x.transform[4]+x.width;b>g&&(g=b)}return g}static getMinLineLeft(C,u){let g=99999;for(const x of u)if(x.pageIndex==C||-1==C){let b=x.transform[4];b<g&&(g=b)}return g}}F.CanvasUtil=m},30479:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.CONST=void 0;class T{}F.CONST=T,T.RENDER_SCALE=2,T.LINE_SMALL_HEIGHT=7*T.RENDER_SCALE,T.SPLIT_MARGIN=3*T.RENDER_SCALE,T.INTERSEC_MARGIN=20*T.RENDER_SCALE,T.LINE_MAGIN=2*T.RENDER_SCALE,T.MARGIN_LEFT=2*T.RENDER_SCALE,T.ENABLE_IMAGE_PROCESS=!0,T.STEP_SIZE=2,T.CROP_FULL_WIDTH=!0,T.OVERLAP=.5,T.QUESTION_PATTERN=[],T.QUESTION_PATTERN2=[],T.BREAK_LINE_PATTERN=[],T.SECTION_PATTERN_LOWER=[],T.SECTION_PATTERN_NORMAL=[],T.KICK_PATTERN=[],T.TVCN_CHAR=[],T.HET_PATTERN=[],T.DAPAN_PATTERN=[],T.HUONGDAN_PATTERN=[],T.MULTIPLE_ANS_PATTERN=[],T.DRAW_RESULT="",T.SKIP_CHAR=[],T.FOOTER_PATTERN=[],T.HELP_ANS_PATTERN=[],T.ANS_PATTERN=[]},34283:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DapAnChiTietParser=void 0;const y=T(71789);class m extends y.Parser{constructor(C,u){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=m.TYPE_NAME,null!=C&&(this.isOn=C),this.offCalback=u}parse(C,u,g,x,b,O){var A=u.strLine.replace(/\|/g,"").replace(/\s*\.*\-*:*,*;*/g,"");return A=(A=(A=(A=(A=A.replace(/C\xe2u/g,"")).replace(/\u0110\xe1p\xe1n/g,"")).replace(/\u0110\xe1p/g,"")).replace(/\xe1n/g,"")).replace(/\u0110\/A/g,""),/^[0-9ABCDEFGHabcdefgh]+$/g.test(A)&&A.length>=2&&(null==this.firstLine&&(this.firstLine=u,this.lineIdx=g),this.str+=A),[]}static getBoxes(C,u,g,x){return[]}getResult(C){let u=[],g="",x=[],b=!1;for(let O=0;O<C.length;O++){let Z=C.charCodeAt(O),A=Z>=65&&Z<=72;if(A&&""==g)return[];A!=b&&(x.push(g),g=""),b=A,g+=C[O]}""!=g&&x.push(g);for(let O=1;O<x.length;O+=2){let Z=0,A=Math.floor(x[O-1].length/x[O].length),P=+x[O-1].substr(Z,A),j=P;for(let L=0;L<x[O].length;L++){if(L>=x[O-1].length)return[];if(P=+x[O-1].substr(Z,A),P!=j)return[];u.push({num:P,str:x[O][L]}),Z+=A,j=P+1,A=j.toString().length}}return u}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var C=this.getResult(this.str.toUpperCase());if(C.length>0){let u=JSON.stringify({main:C,sub:[]});this.offCalback([{str:u,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}F.DapAnChiTietParser=m,m.TYPE_NAME="dapanchitiet"},23076:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DapAnDienTuParser=void 0;const y=T(30479),m=T(52311),U=T(79391),C=T(71789);class u extends C.Parser{constructor(x,b){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=u.TYPE_NAME,null!=x&&(this.isOn=x),this.offCalback=b}parse(x,b,O,Z,A,P){let j=[new m.FooterParser,new U.HuongDanParser];for(const I of j)if(I.parse(x,b,O,Z,A,P).length>0)return[];var L=b.strLine;return null==this.firstLine&&(this.firstLine=b,this.lineIdx=O),this.str+=L+"\n",[]}static getBoxes(x,b,O,Z){return[]}getResult(x){let b=[],O=x.replace(/\n/g,"\n|"),Z=y.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"(\\|"),A=O.matchAll(new RegExp(Z,"ig"));for(;;){let M=A.next();if(M.done)break;let H=M.value[0],Y=this.getNumberFromStr(H);O=O.replace(H,Y+".")}let I,j=O.matchAll(/\d+[\.\-]/g),L=-1;for(;;){let M=j.next();if(M.done)break;if(-1==L)L=M.value.index,I=M;else{let H=O.substr(L,M.value.index-L);b.push(this.toAns(H,I)),L=M.value.index,I=M}}if(L>=0&&I){let M=O.substr(L);b.push(this.toAns(M,I))}return b}toAns(x,b){let O=b.value[0].length;return{num:+b.value[0].substr(0,O-1),str:x.substr(O).replace(/\|/g," ").replace(/ +/g," ").trim()}}getNumberFromStr(x){var b=x.match(/(\d+)/);return b?b[0]:""}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var x=this.getResult(this.str);if(x.length>0){let b=JSON.stringify({main:[],sub:x});this.offCalback([{str:b,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}F.DapAnDienTuParser=u,u.TYPE_NAME="dapandientu"},18932:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.DapAnParser=void 0;const y=T(30479),m=T(71789);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}parse(u,g,x,b,O,Z){let A=g.strLine.replace(/\|/g,"").trim().match(y.CONST.DAPAN_PATTERN.join("|"));return null!=A&&A.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,x,b){return[]}static getAnsFromHelp(u){for(const g of u){let x=g.strLine.replace(/\|/g,"").trim().match(y.CONST.HELP_ANS_PATTERN.join("|"));if(null!=x)for(let b=0;b<x.length;b++)if(null!=x[b]&&1==x[b].length)return x[b]}return""}strContains(u,g){var x=u;for(const b of g)if(x.indexOf(b)>=0)return!0;return!1}}F.DapAnParser=U,U.TYPE_NAME="dapan"},52311:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.FooterParser=void 0;const y=T(30479),m=T(71789);class U extends m.Parser{constructor(){super(),this.TYPE=U.TYPE_NAME}parse(u,g,x,b,O,Z){if(!g.isLastLine||b&&g.transform[5]<b.transform[5]+b.height)return[];var P=g.strLine.replace(/\|/g,"").trim().match(y.CONST.FOOTER_PATTERN.join("|"));return null!=P&&P.length>0?[{str:P[0],pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,x,b){return[]}}F.FooterParser=U,U.TYPE_NAME="footer"},11843:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.HetParser=void 0;const y=T(30479),m=T(71789);class U extends m.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=U.TYPE_NAME}parse(u,g,x,b,O,Z){let A=g.strLine.replace(/\|/g,"").trim().match(y.CONST.HET_PATTERN.join("|"));return null!=A&&A.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,x,b){return[]}strContains(u,g){for(const x of g)if(u.indexOf(x)>=0)return!0;return!1}}F.HetParser=U,U.TYPE_NAME="het"},79391:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.HuongDanParser=void 0;const y=T(30479),m=T(71789),U=T(35677);class C extends m.Parser{constructor(){super(),this.TYPE=C.TYPE_NAME}parse(g,x,b,O,Z,A){let P=x.strLine.replace(/\|/g,"").trim().match(y.CONST.HUONGDAN_PATTERN.join("|"));return null!=P&&P.length>0?[{str:x.strLine,pageIndex:x.pageIndex,lineIndex:b,transform:x.transform,type:this.TYPE}]:[]}static getBoxes(g,x,b,O){return U.QuestionParser.getBoxes(g,x,b,O)}strContains(g,x){var b=g;for(const O of x)if(b.indexOf(O)>=0)return!0;return!1}}F.HuongDanParser=C,C.TYPE_NAME="huongdan"},71789:(nt,F)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Parser=void 0,F.Parser=class T{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}process(m,U,C,u,g,x){return this.isOn?this.parse(m,U,C,u,g,x):[]}}},449:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.PdfRender=void 0;const y=T(51535),m=T(30479);class U{constructor(){let u=document.createElement("canvas");this.tempCanvas=u.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(u,g){var x=URL.createObjectURL(u);const O=pdfjsLib.getDocument({url:x,cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1});var Z=[];let A=this;O.promise.then(function(P){A.optionalContentConfigPromise=P.getOptionalContentConfig();for(var j=P._pdfInfo.numPages,L=1;L<=j;L++)P.getPage(L).then(I=>{Z.push(I),Z.length==j&&(Z=Z.sort((M,H)=>M._pageIndex>H._pageIndex?1:-1),g(Z))})},function(P){console.error(P)})}getImages(u,g){let x=[];if("function"!=typeof u.objs.getAll)return console.log("Unable to read img"),x;let b=u.objs.getAll(),O=Object.keys(b);for(const Z of O)b[Z].data.pageIndex=g,x.push(b[Z].data);return x}isImageObj(u){return-999==u.transform[0]&&"img"==u.str}getLines(u,g,x,b){let O=b.scale,Z=u.items.length;for(let I=0;I<Z;I++){let M=u.items[I];this.isImageObj(M)||(M.transform=U.transform(b.transform,M.transform),M.width=M.width*O),M.transform[4]+M.width>x.canvas.width&&(M.width=x.canvas.width-M.transform[4]-20);let H=this.isImageObj(M)?[M.transform[5],M.height]:y.CanvasUtil.getTextBottom(M.transform,u.styles[M.fontName],this.tempCanvas,this.ascentCache);M.height=H[1];let Y=Math.ceil(H[0]);M.transform[5]=Y}u.items.sort((I,M)=>1e6*Math.floor(I.transform[5])-I.transform[4]<1e6*Math.floor(M.transform[5])-M.transform[4]?-1:1);let j,A=[],P=0;this.imageCache[g]?j=this.imageCache[g]:(j=x.getImageData(0,0,x.canvas.width,x.canvas.height),this.imageCache[g]=j);var L={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let I=0;I<Z;I++){let M=u.items[I];if(this.isImageObj(M))for(let Y=0;Y<Z;Y++)if(I!=Y&&y.CanvasUtil.isObjIntersec(M,u.items[Y])){M.str="";break}if(y.CanvasUtil.arrContains(M.str.trim(),m.CONST.SKIP_CHAR))continue;let H=Math.floor(M.transform[5]+M.height);0!=P?P-H>=-m.CONST.LINE_MAGIN?this.addTxtToLine(L,M):0!=L.textObjs.length&&(A.push(L),L=this.newLine(M,g),P=Math.floor(L.transform[5]+L.height)):(L=this.newLine(M,g),P=Math.floor(L.transform[5]+L.height))}A.push(L);for(const I of A)this.calculateSize(I);this.findAndMergeAnsQuestBlock(A,"ans"),this.findAndMergeAnsQuestBlock(A,"quest"),this.findAndMergeBlock(A),this.mergeIntersecLine(A),this.mergeSmallLine(A,j);for(const I of A)this.calculateSize(I);return A}mergeIntersecLine(u){let g=0;for(;g<u.length;){let x=u[g];g++,g<u.length&&y.CanvasUtil.isLineVIntersec(x,u[g])&&(this.mergeLine(x,u[g]),u.splice(g,1),g--)}}findAndSplitQuestAnsLine(u,g,x){let b=0,O=[],Z=m.CONST.BREAK_LINE_PATTERN.join("|");for(const P of u){P.top=void 0,P.bottom=void 0;var A=P.strLine.replace(/\|/g,"").trim().match(Z);if(null!=A&&A.length>0){let j=/[\s\|\.]+[B\u0412][\s\|]*\./g,L=P.strLine.trim().toUpperCase().match(j);if(null!=L&&L.length>0){let I=A[0].toUpperCase().indexOf("A");O.push({lineIndex:b,strIndex:I})}}b++}for(let P=O.length-1;P>=0;P--){let j=O[P].lineIndex;this.splitLine(j,g[u[j].pageIndex],x[u[j].pageIndex],O[P].strIndex,u)}}mergeSmallLine(u,g){let x=0,b=1.2*m.CONST.LINE_SMALL_HEIGHT;for(;x<u.length;){let O=u[x];if(!O||!this.isSmallLine(O)){x++;continue}x-1>=0&&!u[x-1].bottom&&(u[x-1].bottom=y.CanvasUtil.getBottomLine(g,x-1,u)[0]),x+1<u.length&&!u[x+1].top&&(u[x+1].top=y.CanvasUtil.getTopLine(g,x+1,u)[0]);let Z=x-1<0?-9999:this.getLineTop(O)-this.getLineBot(u[x-1]),A=x+1>=u.length?-9999:this.getLineTop(u[x+1])-this.getLineBot(O),P=x-1>=0&&u[x-1].transform[4]<=O.transform[4]&&O.transform[4]<=u[x-1].transform[4]+u[x-1].width,j=x+1<u.length&&u[x+1].transform[4]<=O.transform[4]&&O.transform[4]<=u[x+1].transform[4]+u[x+1].width;if(0==x&&A<=b&&j){this.mergeLine(u[x+1],O),u.splice(x,1),x--;continue}if(x==u.length-1&&Z<=b&&P){this.mergeLine(u[x-1],O),u.splice(x,1),x--;continue}let L=-1;Z>A&&j&&A<=b?L=x+1:Z<=A&&P&&Z<=b?L=x-1:Z<=A&&j&&A<=b?L=x+1:Z>A&&P&&Z<=b&&(L=x-1),L>=0?(this.mergeLine(u[L],O),u.splice(x,1),x--):x++}}isSmallLine(u){return u.height<m.CONST.LINE_SMALL_HEIGHT}mergeLine(u,g){for(const x of g.textObjs)this.addTxtToLine(u,x)}findAndMergeAnsQuestBlock(u,g){let b=0;for(;b<u.length;){if("ans"==g&&this.isAnsLine(u[b])||"quest"==g&&this.isQuestLine(u[b])){let Z=b,A=-1,P=1,j=[];for(;P<=10;){if(Z=b+A*P,Z<0){A=1,P=1;continue}if(Z>=u.length)break;let L=this.isAnsLine(u[Z]),I=L||this.isQuestLine(u[Z]),M="ans"==g&&L&&y.CanvasUtil.isSameLine(u[b],u[Z]),H=!I&&y.CanvasUtil.isLineIntersec(u[b],u[Z])&&u[Z].transform[4]>u[b].transform[4];if((M||H)&&j.push(Z),P++,I&&1==A)break;(P>10||I)&&-1==A&&(A=1,P=1)}j.sort((L,I)=>L<I?1:-1);for(const L of j)for(const I of u[L].textObjs)this.addTxtToLine(u[b],I);for(const L of j)u.splice(L,1),L<b&&b--}b++}}findAndMergeBlock(u){let g=0;for(;g<u.length;){if(this.isAnsLine(u[g])||this.isQuestLine(u[g])){g++;continue}let b=g+1;for(;b<u.length&&u[g].pageIndex==u[b].pageIndex;){let O=this.isAnsLine(u[b])||this.isQuestLine(u[b]);if(y.CanvasUtil.isLineIntersec(u[g],u[b])&&!O||y.CanvasUtil.isSameLine(u[g],u[b])){for(const Z of u[b].textObjs)this.addTxtToLine(u[g],Z);u.splice(b,1),b=g}b++}g++}}isAnsLine(u){let x=u.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=x&&x.length>0}isQuestLine(u){let g=m.CONST.QUESTION_PATTERN.join("|"),x=u.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=x&&x.length>0}encodeLines(u,g){let x="",b=0;for(const O of g){if(O.height<m.CONST.LINE_SMALL_HEIGHT){b-1>=0&&!g[b-1].bottom&&(g[b-1].bottom=y.CanvasUtil.getBottomLine(u,b-1,g)[0]),b+1<g.length&&!g[b+1].top&&(g[b+1].top=y.CanvasUtil.getTopLine(u,b+1,g)[0]);let Z=b-1<0?-9999:this.getLineTop(O)-this.getLineBot(g[b-1]),A=b+1>=g.length?-9999:this.getLineTop(g[b+1])-this.getLineBot(O),P=b-1>=0&&g[b-1].transform[4]<=O.transform[4]&&O.transform[4]+O.width<=g[b-1].transform[4]+g[b-1].width,j=b+1<g.length&&g[b+1].transform[4]<=O.transform[4]&&O.transform[4]+O.width<=g[b+1].transform[4]+g[b+1].width,L=1.2*m.CONST.LINE_SMALL_HEIGHT;Math.abs(Z)>=L&&Math.abs(A)>=L?x+="L":x+=-9999==Z?"3":-9999==A?"4":Z>A&&j?"2":Z<=A&&P?"1":Z<=A&&j?"2":Z>A&&P?"1":"L"}else x+="L";b++}return x}getLineTop(u){return u.top?u.top:u.transform[5]}getLineBot(u){return u.bottom?u.bottom:u.transform[5]+u.height}splitLine(u,g,x,b,O){let Z=O[u],A=y.CanvasUtil.calIndexPos(Z.textObjs,g,x,b,!0),P=this.newLine(Z.textObjs[0],Z.pageIndex),j=A[2],L=A[1],I=Z.textObjs[j],M=I.transform,H={str:I.str.substr(0,L),width:A[4]-M[4],height:I.height,fontName:I.fontName,transform:[M[0],M[1],M[2],M[3],M[4],M[5]]},Y={str:I.str.substr(L),width:I.width-H.width,height:I.height,fontName:I.fontName,transform:[M[0],M[1],M[2],M[3],A[4],M[5]]},G=Z.textObjs;Z.textObjs=[],P.textObjs=[];for(let $=0;$<G.length;$++)$<j?this.addTxtToLine(Z,G[$]):$>j?this.addTxtToLine(P,G[$]):(this.addTxtToLine(Z,H),this.addTxtToLine(P,Y));return this.calculateSize(Z),this.calculateSize(P),u==O.length-1?O.push(P):O.splice(u+1,0,P),P}findAndMergeSmallLine(u,g,x){let b=0,O=u.matchAll(x),Z=[];for(;;){let A=O.next();if(A.done)break;let P=A.value[0],j=A.value.index,L=0,I=[];for(let M=0;M<P.length;M++)"L"==P[M]?L=j+M:I.push(j+M);for(const M of I){for(const H of g[M].textObjs)this.addTxtToLine(g[L],H);g[L].top=void 0,g[L].bottom=void 0,Z.push(M)}b++}Z.sort((A,P)=>A<P?1:-1);for(const A of Z)g.splice(A,1);return b}newLine(u,g){let x={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return x.transform[4]=u.transform[4],x.transform[5]=u.transform[5],x.height=u.height,x.width=u.width,x.txtLength=u.str.length,x.textObjs.push(u),x}addTxtToLine(u,g){g.transform[4]<u.transform[4]&&(u.transform[4]=g.transform[4]),g.transform[5]<u.transform[5]&&(u.transform[5]=g.transform[5]),g.transform[5]+g.height>u.transform[5]+u.height&&(u.height=g.transform[5]+g.height-u.transform[5]),g.transform[4]+g.width>u.transform[4]+u.width&&(u.width=g.transform[4]+g.width-u.transform[4]),u.txtLength+=g.str.length,u.textObjs.push(g);let x=u.transform[4]+u.width,b=u.height;for(const O of u.textObjs)O.transform[4]+O.width>x&&(x=O.transform[4]+O.width),O.transform[5]+O.height>u.transform[5]+b&&(b=O.transform[5]+O.height-u.transform[5]);u.width=x-u.transform[4],u.height=b}static transform(u,g){return pdfjsLib.Util.transform(u,g)}render(u,g,x,b){for(var O,A=u.length,P=0;P<A;P++){var j=document.createElement("div");j.className="pdf-page",j.id="page-"+P,null===(O=document.getElementById(g))||void 0===O||O.appendChild(j),this.renderPage(u[P],x,b)}}calculateSize(u){if(0==u.textObjs.length)return;u.textObjs.sort((I,M)=>1e6*Math.floor(I.transform[4])+I.transform[5]>1e6*Math.floor(M.transform[4])+M.transform[5]?1:-1),u.strLine="";let g=0,x=0,b=0,O=0,Z=9999,A=0,P=9999;for(const I of u.textObjs){let M=y.CanvasUtil.isObjIntersec(u.textObjs[0],I);b=I.transform[4];let H=b-x>m.CONST.SPLIT_MARGIN&&""!=I.str.trim()||O!=I.transform[5]?"|":"";u.strLine+=H+I.str,b<P&&(P=b);let Y=I.transform[4]+I.width;M&&(x=Y),Y>g&&M&&(g=Y),M&&(O=I.transform[5]),I.transform[5]<Z&&(Z=I.transform[5]),I.transform[5]+I.height>A&&(A=I.transform[5]+I.height)}u.transform[4]=P,u.transform[5]=Z,u.width=g-P,u.height=A-Z,u.transform[0]=Z,u.transform[1]=A;let j=m.CONST.TVCN_CHAR,L=u.strLine;for(const I of j)L=L.replace(new RegExp(I[0],"g"),I[1]);u.strLine=L}renderPage(u,g,x){var b=u._pageIndex,O=u.getViewport({scale:g});let Z=.8*O.width;var A=document.createElement("canvas"),P=document.getElementById("page-"+b);P?.appendChild(A),A.id="canvas"+b;var j=A.getContext("2d",{alpha:!1});A.height=O.height,A.width=O.width,A.style.height=O.height*Z/O.width+"px",A.style.width=Z+"px",P&&(P.style.width=A.style.width,P.style.height=A.style.height);const M={canvasContext:j,transform:[1,0,0,1,0,0],viewport:O,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};u.render(M).promise.then(function(){x&&x(j,u._pageIndex,O)})}}F.PdfRender=U},38761:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.Process=void 0;const y=T(1164),m=T(51535),U=T(30479),C=T(34283),u=T(18932),g=T(52311),x=T(11843),b=T(79391),O=T(449),Z=T(35677),A=T(22676),P=T(23076);F.Process=class j{constructor(I){var M,H,Y;let G=JSON.parse(I);U.CONST.RENDER_SCALE=G.RENDER_SCALE,U.CONST.LINE_SMALL_HEIGHT=G.LINE_SMALL_HEIGHT*U.CONST.RENDER_SCALE,U.CONST.SPLIT_MARGIN=G.SPLIT_MARGIN*U.CONST.RENDER_SCALE,U.CONST.INTERSEC_MARGIN=G.INTERSEC_MARGIN*U.CONST.RENDER_SCALE,U.CONST.LINE_MAGIN=G.LINE_MAGIN*U.CONST.RENDER_SCALE,U.CONST.MARGIN_LEFT=G.MARGIN_LEFT*U.CONST.RENDER_SCALE,U.CONST.ENABLE_IMAGE_PROCESS=G.ENABLE_IMAGE_PROCESS,U.CONST.STEP_SIZE=G.STEP_SIZE,U.CONST.CROP_FULL_WIDTH=G.CROP_FULL_WIDTH,U.CONST.OVERLAP=G.OVERLAP,U.CONST.QUESTION_PATTERN=G.QUESTION_PATTERN,U.CONST.QUESTION_PATTERN2=G.QUESTION_PATTERN2,U.CONST.BREAK_LINE_PATTERN=G.BREAK_LINE_PATTERN,U.CONST.SECTION_PATTERN_LOWER=G.SECTION_PATTERN_LOWER,U.CONST.SECTION_PATTERN_NORMAL=G.SECTION_PATTERN_NORMAL,U.CONST.KICK_PATTERN=G.KICK_PATTERN,U.CONST.TVCN_CHAR=G.TVCN_CHAR,U.CONST.HET_PATTERN=G.HET_PATTERN,U.CONST.DAPAN_PATTERN=G.DAPAN_PATTERN,U.CONST.HUONGDAN_PATTERN=G.HUONGDAN_PATTERN,U.CONST.MULTIPLE_ANS_PATTERN=G.MULTIPLE_ANS_PATTERN,U.CONST.DRAW_RESULT=G.DRAW_RESULT,U.CONST.SKIP_CHAR=G.SKIP_CHAR,U.CONST.FOOTER_PATTERN=null!==(M=G.FOOTER_PATTERN)&&void 0!==M?M:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],U.CONST.HELP_ANS_PATTERN=null!==(H=G.HELP_ANS_PATTERN)&&void 0!==H?H:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"],U.CONST.ANS_PATTERN=null!==(Y=G.ANS_PATTERN)&&void 0!==Y?Y:["([\\s\\|\\.]+[ABCDEFGHIJK][\\s\\|]*[\\.\\)])"]}setUpdateStatusCallback(I){this.updateStatusCallback=I}setOncompleteCallback(I){this.onCompleteCallback=I}parsePdf(I){let M=new O.PdfRender;M.loadPdf(I,H=>{const Y=H.length;let G=[],$=[],V=document.createElement("div");V.id="hiddenWrapper",V.style.width="1px",V.style.height="1px",V.style.overflow="hidden",V.style.opacity="0",V.style.zIndex="-9999",V.style.position="fixed",V.style.top="0",V.style.left="0",document.body.appendChild(V);let R=document.createElement("div"),ot="canvasWrapper";R.id=ot,V.appendChild(R);const dt=(new Date).getTime();let lt=[];M.render(H,ot,U.CONST.RENDER_SCALE,(ct,wt,Pt)=>{if(null!=ct&&(G[wt]=ct,$[wt]=Pt),lt.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${lt.length}/${Y}`),lt.length==Y){const vt=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(vt-dt)/1e3+" secs"),this.startAnalyze(G,$,H)}})})}showHidden(){let I=document.getElementById("hiddenWrapper");I&&(I.style.opacity="1",I.style.width="",I.style.height="",I.style.overflow="",I.style.position="")}imgToTextObj(I,M){return{str:"img",fontName:M,width:I.paintWidth,height:I.paintHeight,transform:[-999,0,0,0,-I.left,-I.top-I.paintHeight]}}startAnalyze(I,M,H){const Y=H.length;let G=[],$=[],V=[],R=[],ot=new O.PdfRender;const dt=(new Date).getTime();for(let lt=0;lt<Y;lt++){const ct=lt;let wt=ot.getImages(H[lt],ct);for(const Pt of wt)R.push(Pt);H[lt].getTextContent().then(Pt=>{var vt;for(const ut of wt)Pt.items.push(this.imgToTextObj(ut,Pt.items.length>0?Pt.items[0].fontName:""));var At=ot.getLines(Pt,ct,I[ct],M[ct]);if($=$.concat(At),V[ct]=Pt.styles,G.push(1),G.length==Y){$.sort((Et,ne)=>1e7*Et.pageIndex+(Et.transform.length>0?Et.transform[5]:0)-(1e7*ne.pageIndex+(ne.transform.length>0?ne.transform[5]:0))),ot.findAndSplitQuestAnsLine($,V,I),""!=U.CONST.DRAW_RESULT&&console.log($);let ut=this.findEntityPos($,V,I,ot.imageCache,0);console.log("lstPos",ut);let Ct=!1;for(const Et of ut)if(Et.type==Z.QuestionParser.TYPE_NAME){Ct=!0;break}if(Ct||(ut=this.findEntityPos($,V,I,ot.imageCache,1)),0==ut.length)return void(this.onCompleteCallback&&this.onCompleteCallback([],I));let yt=ut[0].type==C.DapAnChiTietParser.TYPE_NAME,It=yt?JSON.parse(ut[0].str):null,Rt=new Map,ae=new Map;if(yt){for(const Et of It.main)Rt.set(Et.num,Et.str);for(const Et of It.sub)ae.set(Et.num,Et.str)}let ye=this.getQuestionInfo(ut,$,I,Rt);ye.forEach(Et=>{if(!Rt.has(Et.num)&&!ae.has(Et.num)&&Et.help&&Et.help.text){let ne=u.DapAnParser.getAnsFromHelp(Et.help.text);""!=ne&&ae.set(Et.num,ne)}});for(const Et of ye){if(!Et.isGroup&&0==Et.answers.length&&Rt.has(Et.num)){let ne={pageIndex:Et.remove.pageIndex,top:Et.remove.top-1,left:Et.remove.left-1,width:1,heigh:1};for(const un of["A","B","C","D"]){let an={label:un,remove:ne,positions:[ne]};Rt.get(Et.num)==un&&(an.isCorrect=!0),Et.answers.push(an)}Et.isFixAns=!0}if(!Et.isGroup&&0==Et.answers.length&&!Rt.has(Et.num)&&ae.has(Et.num)&&(Et.strAns=ae.get(Et.num)),!Et.isGroup&&Et.answers.length>0&&!Rt.has(Et.num)&&ae.has(Et.num))for(const ne of Et.answers)ne.label==(null===(vt=ae.get(Et.num))||void 0===vt?void 0:vt.toUpperCase().substring(0,1))&&(ne.isCorrect=!0)}const vn=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(vn-dt)/1e3+" secs"),this.showOnCanvas(ye,ut,$,I,R,U.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(ye,I)}})}}findEntityPos(I,M,H,Y,G){let $=[],ot=!1;var lt=[{parser:new A.SectionParser,on:[],off:[]},{parser:new Z.QuestionParser(G),on:[3,4],off:[6]},{parser:new y.AnswerParser,on:[3,6],off:[]},{parser:new x.HetParser(!1),on:[6,8],off:[0,2]},{parser:new u.DapAnParser(!1),on:[6,8],off:[0,2,4]},{parser:new b.HuongDanParser,on:[],off:[8]},{parser:new C.DapAnChiTietParser(!1,ut=>{for(const Ct of ut)$.unshift(Ct)}),on:[],off:[2]},{parser:new g.FooterParser,on:[],off:[]},{parser:new P.DapAnDienTuParser(!1,ut=>{if(0!=ut.length)if($.length>0&&$[0].type==C.DapAnChiTietParser.TYPE_NAME){let Ct=JSON.parse(ut[0].str),yt=JSON.parse($[0].str);yt.sub=Ct.sub,$[0].str=JSON.stringify(yt)}else ut[0].type=C.DapAnChiTietParser.TYPE_NAME,$.unshift(ut[0])}),on:[],off:[2]}],ct=[8,0,1,2,3,4,5,6,7],wt=null;let Pt=0,vt="";for(const ut of I){(Pt==I.length-1||ut.pageIndex<I[Pt+1].pageIndex)&&(ut.isLastLine=!0);for(const Ct of ct){let yt=lt[Ct];var At=yt.parser.process($,ut,Pt,wt,M[ut.pageIndex],H[ut.pageIndex]);if(At.length>0){for(const It of At){if(It.type!=y.AnswerParser.TYPE_NAME&&It.type!=g.FooterParser.TYPE_NAME&&(vt=""),It.type==y.AnswerParser.TYPE_NAME){if(!"ABCDEFGH".startsWith(vt+It.str))continue;vt+=It.str;for(let Rt=$.length-1;Rt>=0&&$[Rt].type==A.SectionParser.TYPE_NAME;Rt--)$.splice(Rt,1)}It.type==g.FooterParser.TYPE_NAME&&(ut.isFooter=!0),It.type==u.DapAnParser.TYPE_NAME&&(ot=!0),It.type==b.HuongDanParser.TYPE_NAME&&ot&&lt[5].parser.off(),$.push(It)}for(const It of yt.on)lt[It].parser.on();for(const It of yt.off)lt[It].parser.off();break}}wt=ut,Pt++}for(const ut of lt)ut.parser.off();return $.forEach(ut=>{if(!I[ut.lineIndex].top){let yt=m.CanvasUtil.getTopLine(Y[ut.pageIndex],ut.lineIndex,I);I[ut.lineIndex].top=yt[0],1!=ut.isIntersec&&(ut.isIntersec=yt[1])}}),$.forEach(ut=>{if(!I[ut.lineIndex].bottom){let yt=m.CanvasUtil.getBottomLine(Y[ut.pageIndex],ut.lineIndex,I);I[ut.lineIndex].bottom=yt[0],1!=ut.isIntersec&&(ut.isIntersec=yt[0])}}),$}showOnCanvas(I,M,H,Y,G,$){const V=(new Date).getTime(),R=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]),ot=new Map([[Z.QuestionParser.TYPE_NAME,"red"],[y.AnswerParser.TYPE_NAME,"blue"],[x.HetParser.TYPE_NAME,"gray"],[C.DapAnChiTietParser.TYPE_NAME,"green"],[u.DapAnParser.TYPE_NAME,"orange"],[b.HuongDanParser.TYPE_NAME,"pink"],[g.FooterParser.TYPE_NAME,"yellow"],[A.SectionParser.TYPE_NAME,"black"]]);if($.indexOf("quest")>=0)for(const lt of I){for(const ct of lt.positions)m.CanvasUtil.drawBox(Y[ct.pageIndex],lt.isGroup?"black":"red",ct);m.CanvasUtil.drawBox(Y[lt.remove.pageIndex],"yellow",lt.remove);for(const ct of lt.answers){for(const wt of ct.positions)m.CanvasUtil.drawBox(Y[wt.pageIndex],R.get(ct.label)+"",wt,!0);m.CanvasUtil.drawBox(Y[ct.remove.pageIndex],"yellow",ct.remove),ct.isCorrect&&m.CanvasUtil.drawPoint(Y[ct.positions[0].pageIndex],"green",ct.positions[0])}if(lt.help){for(const ct of lt.help.positions)m.CanvasUtil.drawBox(Y[ct.pageIndex],"orange",ct);lt.help.remove&&m.CanvasUtil.drawBox(Y[lt.help.remove.pageIndex],"yellow",lt.help.remove)}}if($.indexOf("line")>=0)for(const lt of H)m.CanvasUtil.drawBox2(Y[lt.pageIndex],lt.height<U.CONST.LINE_SMALL_HEIGHT?"red":"rgba(50, 58, 168, 0.4)",lt.width,lt.height,lt.transform);if($.indexOf("txt")>=0)for(const lt of H)for(const ct of lt.textObjs)""!=ct.str.trim()&&m.CanvasUtil.drawBox2(Y[lt.pageIndex],lt.height<U.CONST.LINE_SMALL_HEIGHT?"red":"rgba(132, 0, 137, 0.2)",ct.width,ct.height,ct.transform);if($.indexOf("img")>=0)for(const lt of G)m.CanvasUtil.drawBox2(Y[lt.pageIndex],"green",lt.paintWidth,lt.paintHeight,[0,0,0,0,-lt.left,-lt.top-lt.paintHeight]);if($.indexOf("pos")>=0)for(const lt of M){let ct={top:lt.transform[5],left:lt.transform[4],width:0,heigh:0,pageIndex:lt.pageIndex};m.CanvasUtil.drawPoint(Y[lt.pageIndex],ot.get(lt.type)+"",ct)}const dt=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(dt-V)/1e3+" secs")}getQuestionInfo(I,M,H,Y){if(0==I.length)return[];let G=0,$=[],V=new Map,R="",ot=!1,dt=!1,lt=0;I.forEach((ct,wt)=>{wt>0&&null==I[wt-1].text&&(I[wt-1].text=M.slice(I[wt-1].lineIndex,ct.lineIndex)),wt==I.length-1&&(I[wt].text=M.slice(I[wt].lineIndex,M.length))}),I.forEach(ct=>{let wt=":"+ct.type;!ot&&(ct.type==x.HetParser.TYPE_NAME||ct.type==u.DapAnParser.TYPE_NAME)&&(ot=!0);let Pt=null;for(let At=G+1;At<I.length;At++)if((ct.type!=Z.QuestionParser.TYPE_NAME||I[At].type!=y.AnswerParser.TYPE_NAME)&&I[At].type!=g.FooterParser.TYPE_NAME){Pt=I[At];break}let vt=H[ct.pageIndex].canvas.height-20;if(!ot&&ct.type==A.SectionParser.TYPE_NAME&&(lt++,$.push({num:lt,answers:[],remove:A.SectionParser.getRemoveBox(ct,M),positions:A.SectionParser.getBoxes(ct,M,Pt,vt),isGroup:!0,text:ct.text})),!ot&&ct.type==Z.QuestionParser.TYPE_NAME&&$.push({num:+ct.str,answers:[],remove:Z.QuestionParser.getRemoveBox(ct,M),positions:Z.QuestionParser.getBoxes(ct,M,Pt,vt),group:lt,text:ct.text}),!ot&&ct.type==y.AnswerParser.TYPE_NAME&&$.length>0){let At=$[$.length-1].num,ut={label:ct.str,remove:y.AnswerParser.getRemoveBox(ct,M),positions:y.AnswerParser.getBoxes(ct,M,Pt,vt)};Y.size>0&&Y.get(At)==ut.label&&(ut.isCorrect=!0),$[$.length-1].answers.push(ut);let Ct=M[ct.lineIndex].strLine.replace(/\|/g,"").trim().match(U.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Ct&&Ct.length>0&&($[$.length-1].isFixAns=!0),1==ct.isIntersec&&($[$.length-1].isFixAns=!0)}if(!dt&&ct.type==b.HuongDanParser.TYPE_NAME&&1==$.length&&R.endsWith(`:${Z.QuestionParser.TYPE_NAME}:${y.AnswerParser.TYPE_NAME}`)&&(dt=!0),ct.type==b.HuongDanParser.TYPE_NAME&&dt){let At=$[$.length-1].num;V.set(At,{num:At,positions:b.HuongDanParser.getBoxes(ct,M,Pt,vt),text:ct.text})}if(ct.type==b.HuongDanParser.TYPE_NAME&&!dt&&(V.clear(),ot=!0),ot&&ct.type==Z.QuestionParser.TYPE_NAME){let At=+ct.str;V.get(At)||V.set(At,{num:At,positions:Z.QuestionParser.getBoxes(ct,M,Pt,vt),remove:Z.QuestionParser.getRemoveBox(ct,M),text:ct.text})}!R.endsWith(wt)&&ct.type!=g.FooterParser.TYPE_NAME&&(R+=wt),G++});for(const ct of $)ct.isGroup||(ct.help=V.get(ct.num),1==ct.answers.length&&(ct.answers=[]));return $}}},35677:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.QuestionParser=void 0;const y=T(51535),m=T(30479),U=T(71789);class C extends U.Parser{constructor(g){super(),this.TYPE=C.TYPE_NAME,this.questType=g}parse(g,x,b,O,Z,A){var P=this.matchPos(x.strLine);if(P.value){let j=null;for(let Y=P.value.length-1;Y>=0;Y--)if(P.value[Y]){j=P.value[Y];break}if(null==j)return[];let I=j.matchAll(/\d+/g).next(),M=j.length;!I.done&&!j.trim().endsWith(".")&&!j.trim().endsWith(":")&&(M=I.value.index+I.value[0].length);let H=x.strLine.replace(/\|/g,"").toLowerCase().indexOf(j)+M-1;return[{str:this.getNumberFromStr(j),pageIndex:x.pageIndex,lineIndex:b,transform:x.transform,startLeft:y.CanvasUtil.calIndexPos2(x.textObjs,Z,A,H,!0),type:this.TYPE}]}return[]}matchPos(g){let x=g.replace(/\|/g,"").toLowerCase().trim();if(0==this.questType){let b=m.CONST.QUESTION_PATTERN.join("|");return x.matchAll(b).next()}{let b=m.CONST.QUESTION_PATTERN2.join("|");return x.matchAll(b).next()}}getNumberFromStr(g){var x=g.match(/(\d+)/);return x?x[0]:""}static getRemoveBox(g,x){let b=g.startLeft?g.startLeft[5]:x[g.lineIndex].top,O=g.transform[4]-m.CONST.MARGIN_LEFT,Z=g.startLeft?g.startLeft[5]+g.startLeft[3]:x[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:b||20,left:O,heigh:Z&&b?Z-b:0,width:(g.startLeft?g.startLeft[4]:0)-O}}static getBoxes(g,x,b,O){let Z=O;for(let $=g.lineIndex;$<x.length;$++)if(y.CanvasUtil.isLastLineOfPage($,x)){let V=x[$].isFooter?x[$-1]:x[$];Z=V.transform[5]+V.height+20;break}let A=[],P=g.pageIndex,j=b?b.lineIndex:x.length-1,L=x[g.lineIndex].transform[4]-m.CONST.MARGIN_LEFT,I=x[g.lineIndex].top;if(!I)return[];let M=m.CONST.CROP_FULL_WIDTH?y.CanvasUtil.getMaxLineRight(-1,x)+2*m.CONST.MARGIN_LEFT:x[g.lineIndex].transform[4]+x[g.lineIndex].width+2*m.CONST.MARGIN_LEFT,H=Z,Y=P,G=g.lineIndex+1;for(;G<=j;G++){let $=x[G].top;if(G==x.length-1&&!b&&($=x[G].bottom),!m.CONST.CROP_FULL_WIDTH){let R=x[G-1].transform[4]+x[G-1].width+2*m.CONST.MARGIN_LEFT;R>M&&(M=R)}let V=x[G-1].transform[4]-m.CONST.MARGIN_LEFT;V<L&&(L=V),x[G].isFooter&&$?H=$:(x[G].pageIndex>Y&&(x[G-1].isFooter||(H=Z),A.push({pageIndex:Y,top:I,left:L,width:M-L,heigh:H-I}),I=20,L=y.CanvasUtil.getMinLineLeft(x[G].pageIndex,x)-m.CONST.MARGIN_LEFT),Y=x[G].pageIndex,$&&(H=$))}if(G-=1,!b&&y.CanvasUtil.isLastLineOfPage(G,x)){let $=x[G].isFooter?x[G-1]:x[G];H=$.transform[5]+$.height+20}return y.CanvasUtil.isFirstLineOfPage(G,x)||A.push({pageIndex:Y,top:I,left:L,width:M-L,heigh:H-I}),A}}F.QuestionParser=C,C.TYPE_NAME="question"},22676:(nt,F,T)=>{Object.defineProperty(F,"__esModule",{value:!0}),F.SectionParser=void 0;const y=T(51535),m=T(30479),U=T(71789),C=T(35677);class u extends U.Parser{constructor(){super(),this.TYPE=u.TYPE_NAME}parse(x,b,O,Z,A,P){let j=b.strLine.replace(/\|/g,"").toLowerCase().trim().match(m.CONST.SECTION_PATTERN_LOWER.join("|")),L=null!=j&&j.length>0;if(L||(j=b.strLine.replace(/\|/g,"").trim().match(m.CONST.SECTION_PATTERN_NORMAL.join("|")),L=null!=j&&j.length>0),L&&j){let I=b.strLine.indexOf(j[0])+j[0].length+1,M=[j[0][0]];for(let H=x.length-1;H>=0;H--){if(x[H].type==C.QuestionParser.TYPE_NAME){M.push(".Q");break}M.push(x[H].str[0])}return"HGFEDCBA.Q".endsWith(M.join(""))?[]:[{str:j[0],pageIndex:b.pageIndex,lineIndex:O,transform:b.transform,startLeft:y.CanvasUtil.calIndexPos(b.textObjs,A,P,I,!0),type:this.TYPE}]}return[]}static getRemoveBox(x,b){let O=b[x.lineIndex].top,Z=x.transform[4]-m.CONST.MARGIN_LEFT,A=b[x.lineIndex].bottom;return{pageIndex:x.pageIndex,top:O||20,left:Z,heigh:A&&O?A-O:0,width:Z-Z}}static getBoxes(x,b,O,Z){const A=Z;let P=[],j=x.pageIndex,L=O?O.lineIndex:b.length-1,I=y.CanvasUtil.getMinLineLeft(-1,b)-m.CONST.MARGIN_LEFT,M=b[x.lineIndex].top;if(!M)return[];let H=y.CanvasUtil.getMaxLineRight(-1,b)+2*m.CONST.MARGIN_LEFT,Y=A,G=j,$=x.lineIndex+1;for(;$<=L;$++){let V=b[$].top;if(b[$].isFooter&&V)Y=V;else if(b[$].pageIndex>G&&(P.push({pageIndex:G,top:M,left:I,width:H-I,heigh:Y-M}),M=20),G=b[$].pageIndex,V){Y=V;break}}return $>=b.length&&($=b.length-1),y.CanvasUtil.isFirstLineOfPage($,b)||P.push({pageIndex:G,top:M,left:I,width:H-I,heigh:Y-M}),P}}F.SectionParser=u,u.TYPE_NAME="section"},39087:function(nt,F,T){var y=this&&this.__createBinding||(Object.create?function(U,C,u,g){void 0===g&&(g=u),Object.defineProperty(U,g,{enumerable:!0,get:function(){return C[u]}})}:function(U,C,u,g){void 0===g&&(g=u),U[g]=C[u]}),m=this&&this.__exportStar||function(U,C){for(var u in U)"default"!==u&&!Object.prototype.hasOwnProperty.call(C,u)&&y(C,U,u)};Object.defineProperty(F,"__esModule",{value:!0}),m(T(38761),F)},50692:(nt,F,T)=>{T.r(F),T.d(F,{TestbankModule:()=>iO});var y=T(36895),m=T(24006),U=T(35559),C=T(34793),u=T(750),g=T(39102),x=T(37020),b=T(93194),O=T(1737),Z=T(43189),A=T(63728),P=T(59650),j=T(47470),L=T(75658),I=T(76310),M=T(8785),H=T(80529),Y=T(37908),G=T(25034),$=T(39841);class V extends G.EditorApiService{constructor(s,e,n,i,a){super(),this.questionHelper=s,this.apiUploadService=e,this.documentService=n,this.examService=i,this.questionService=a,this.treeData=[],this.treeQuestion=[],this.saveTreeData=[],this.saveTreeQuestion=[],this.saveTreeResponse=[]}loadData(s,e){return console.log("search",s,e),new Promise(n=>{this.saveTreeData.includes(e)?n():(this.saveTreeData.push(e),this.documentService.apiDocumentsGet(e,void 0,""!=s?s:void 0,"exam_online",void 0,1,1,-1).subscribe(i=>{1===i.success&&i.data&&((i.data.categoryObjs||[]).forEach(l=>{this.treeData.push({id:l.id||0,name:l.name||"",type:"cat",pr:e})}),(i.data.documentObjs||[]).forEach(l=>{l.exam&&this.treeData.push({id:l.exam.id||0,name:l.exam.name||"",type:"test",pr:e})})),n()}))})}getTotalQuest(s){return this.treeQuestion.filter(e=>e.pr===s&&"quest"===e.type).length}loadQuestion(s){return new Promise(e=>{this.saveTreeQuestion.includes(s)?e():(this.saveTreeQuestion.push(s),this.examService.apiExamGetExamWithQuestionObjsIdGet(s).subscribe(n=>{if(1===n.success&&n.data){let a=[];(n.data.questionObjs||[]).forEach(r=>{var l;this.treeQuestion.push({id:r.id||0,label:(null!==(l=r.rawIndex)&&void 0!==l?l:0)+1,content:this.questionHelper.renderContent(r),groupId:r.groupId,type:"quest",pr:s}),a.includes(r.groupId||0)||a.push(r.groupId||0)}),a.length>1&&a.forEach(r=>{this.treeQuestion.push({id:r,label:r,content:"Nh\xf3m "+(r+1),type:"group",pr:s})}),e()}}))})}searchRes(s,e){return new Promise(n=>{this.loadData(s,e).then(()=>{n(this.treeData.filter(i=>i.pr===e))})})}getQuestion(s){return new Promise(e=>{this.loadQuestion(s).then(()=>{e(this.treeQuestion.filter(n=>n.pr===s))})})}convertQuestionInfo(s){return{id:s.id||0,label:Number(s.label)||0,content:"C\xe2u"+s.label,type:"quest"}}apiQuestionsGet(s,e,n,i,a,r){return new Promise(l=>{const c=n+"_"+i+"_"+r+"_"+a+"_"+s,_=this.saveTreeResponse.find(d=>d.key===c);_&&e?l(_.questions):this.questionService.apiQuestionsGet(n+"",i+"",r+"","",void 0,a+"","",void 0,void 0,void 0,s).subscribe(d=>{if(1===d.success&&d.data&&d.data.questions&&d.data.questions.length>0){const p=this.saveTreeResponse.findIndex(h=>h.key===c);return-1===p?this.saveTreeResponse.push({key:c,questions:d.data.questions}):this.saveTreeResponse[p].questions=d.data.questions,void l(d.data.questions)}l([])})})}randomQuestToFull(s,e,n,i,a,r){return new Promise(l=>{this.apiQuestionsGet(s,e,n,i,a,r).then(c=>{l(c)})})}randomQuest(s,e,n,i,a,r){return new Promise(l=>{this.apiQuestionsGet(s,e,n,i,a,r).then(c=>{l(c.map(_=>this.convertQuestionInfo(_)))})})}uploadToCdnForHomework(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnForHomework(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}uploadToCdnProgressForExamQuestionContent(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionResult(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionResult(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionAttachment(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankPdf(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnProgressForTestbankPdf(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankDocx(s){return new Promise((e,n)=>{this.apiUploadService.uploadToCdnProgressForTestbankDocx(s).subscribe(i=>{1==i.success&&i.data?e(JSON.stringify(i.data)):n(new Error("Not upload file"))})})}}var R=T(55330),ot=T(81721);function dt(o,s,e=8,n=[]){if(s<=1)return n.push(o),n;let i=n.push(parseFloat((o/s).toPrecision(e)));return dt(o-n[i-1],s-1,e,n)}var lt=T(51442),ct=T(36221);class wt{static loadImageToBase64(s,e){return new Promise((n,i)=>{const a=new Image;a.crossOrigin="anonymous",a.setAttribute("count","1"),a.onload=()=>{const r=document.createElement("canvas");r.width=a.width,r.height=a.height,r.getContext("2d")?.drawImage(a,0,0,a.width,a.height,0,0,r.width,r.height);let _=r.toDataURL();n(_)},a.onerror=()=>{const r=a.getAttribute("count");r&&1==Number(r)?(a.src=e.getMyCdn(s),a.setAttribute("count","2")):r&&Number(r)<5?(a.setAttribute("count",r+1),a.src=e.getRawCdnLink(s)+"?t="+(new Date).getTime()):i(new Error)},a.src=e.getRawCdnLink(s)})}}class Pt{constructor(s,e){this.editorOutputDataService=s,this.commonService=e,this.typeMatrix="user",this.startIndex=0,this.backToLink="",this.title="",this.editor={show:!0},this.examSave={},this.homeworkSave={},this.mathEditor={},this.imageEditor={},this.logConfig={},this.heightContent=600}showEditor(){this.disAll(),this.reSetBackToLink(),this.editor.show=!0}showHomework(){var s;this.disAll(),this.backToLink="",this.title=null!==(s=this.commonService.myTranslateInstant("lang_cms_config_homework_title"))&&void 0!==s?s:"",this.homeworkSave.show=!0}showExam(){var s;this.disAll(),this.title=null!==(s=this.commonService.myTranslateInstant("lang_auto_cau_hinh_de_thi"))&&void 0!==s?s:"",this.backToLink="",this.examSave.show=!0}disAll(){this.title="",this.examSave.show=!1,this.homeworkSave.show=!1,this.editor.show=!1}reSetBackToLink(){var s;this.title=null!==(s=this.commonService.myTranslateInstant("lang_auto_cong_cu_soan_thao_noi_dung"))&&void 0!==s?s:"",this.backToLink=this.sourceBackToLink?this.sourceBackToLink:"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0)}getBackLink(){return this.matrix&&this.matrix.matrix.length>0?(this.editorOutputDataService.setMatrixData(this.matrix,!0),`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/${this.typeMatrix}/0`):this.backToLink}}class vt{constructor(s,e){this.editorCommonService=s,this.commonService=e,this.wmf=new WMFConverter}readFileInputEventAsArrayBuffer(s,e){var n=new FileReader;n.onload=function(i){e(i.target.result)},n.readAsArrayBuffer(s)}handleFileSelect(s,e,n){let i=this,a=(c,_)=>{if(n){let d=this.commonService.myTranslateInstant("lang_auto_cong_thuc");n(c,_,d)}},l=new ct.Q(30,{function:n?(c,_)=>{if(n){let d=this.commonService.myTranslateInstant("lang_auto_image");n(c,_,d)}}:()=>{}});this.readFileInputEventAsArrayBuffer(s,function(c){azotaDocx.readDocx(c,a).then(function(_){for(let d of _.data)"img"==d.type&&("image/x-wmf"==d.contentType||"image/x-emf"==d.contentType?l.addTask(i,i.convert,[d]):d.value="data:"+d.contentType+";base64, "+d.value,!d.cssStyle&&d.height&&d.width&&"EMU"==d.measureUnit)&&(d.cssStyle=`width:${+d.width/12700}pt;height:${+d.height/12700}pt;margin-top:0px;`);l.start().then(()=>{let d=new Map,p=0;for(let h of _.data)"img"==h.type&&h.cropInfo&&d.set(p,1),p++;if(e&&0==d.size)e(_);else{p=0;for(let h of _.data){if("img"==h.type&&h.cropInfo){const f=p,w=document.createElement("img");w.src=h.value,w.onload=()=>{i.cropImage(h,w),d.delete(f),0==d.size&&e&&e(_)},w.onerror=()=>{d.delete(f),0==d.size&&e&&e(_)}}p++}}})})})}convert(s){return new Promise(e=>{if("image/x-wmf"==s.contentType)s.value=this.wmf.toPNG("data:"+s.contentType+";base64, "+s.value),e();else{let r=new ToContext2D(0,1),l=this.decodeBase64(s.value);try{FromEMF.Parse(l,r)}catch{}var n=this.scaleCanvas(r.canvas,200,200);s.value=n.toDataURL(),e()}})}decodeBase64(s){return Uint8Array.from(atob(s),function(e){return e.charCodeAt(0)})}scaleCanvas(s,e,n){let i=document.createElement("canvas");return i.width=e,i.height=n,i.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,e,n),i}cropImage(s,e){if(!s.cropInfo)return;let n=s.cropInfo.left?+s.cropInfo.left:0,i=s.cropInfo.top?+s.cropInfo.top:0,a=s.cropInfo.right?+s.cropInfo.right:0,r=s.cropInfo.bottom?+s.cropInfo.bottom:0;if(n+i+a+r==0)return;let l=e.width,c=e.height,_=n*l/1e5,d=i*c/1e5,f=l-a*l/1e5-_,w=c-r*c/1e5-d;const k=document.createElement("canvas");k.width=f,k.height=w,k.getContext("2d")?.drawImage(e,_,d,f,w,0,0,f,w),s.value=k.toDataURL()}}class At{parse(s){let e=["NB_SOCH","TH_SOCH","VD_SOCH","VDC_SOCH","DIEM"],n=[],i=[],a=[];for(let f of s){a=[];for(let w of f.content){if("POS"==w.indexName&&""!=w.value){let q=w.value.trim();q=q.replaceAll("C",""),a=q.split(",")}if(w.isMerge||""==w.value.trim()||e.indexOf(w.indexName)<0)continue;let k=s.filter(q=>q.obj.id==w.id).map(q=>({id:q.obj.id,type:q.obj.type[0].toUpperCase(),name:q.obj.item,shareType:this.getShareType(q.obj)})),S=w.value;S=S.replace(/\d+/g,"").trim();let D=[w.indexName.split("_")[0]];""!=S?D.push(...S.split(",").map(q=>q.trim())):D.push("TN","DT");let Q=G.Utils.getNumberFromStr(w.value),N={value:Q,tag:D,items:[...k],point:0,pos:a.splice(0,Q)};for(let q of w.mergeId){let W=s.filter(X=>X.index==q).map(X=>({id:X.obj.id,type:X.obj.type[0].toUpperCase(),name:X.obj.item,shareType:this.getShareType(X.obj)}));N.items.push(...W)}"DIEM"==N.tag[0]?i.push(N):n.push(N)}}for(let f of i){let w=0;for(let k of n)f.items.filter(D=>k.items.filter(Q=>Q.id==D.id).length>0).length>0&&(w+=+k.value);w>0&&(f.point=Math.round(+f.value/10*100/w)/100);for(let k of n)f.items.filter(D=>k.items.filter(Q=>Q.id==D.id).length>0).length>0&&(k.point=f.point)}let r=[],l=[],c=new Map,_=["NB","TH","VD","VDC"];n.sort((f,w)=>_.indexOf(f.tag[0])-_.indexOf(w.tag[0]));let d=1,p=0;for(let f of n)p+=+f.value;for(let f of n){let w=[],k=f.items.map(N=>`[@${N.type}${N.id}:${"user"==N.shareType?`:${N.shareType}-`:""}${N.name}]`).join(",")+".";w.push(k);let S=f.tag.map(N=>`[@F:azt_lang_tag_${N}]`).join(",");w.push(`${S}.`),w.push("[azt_lang_sugg_random $__d_value__$ azt_lang_sugg_question]");let D=w.join(""),Q=+f.value;for(let N=0;N<Q;N++)c.set(D+"=>"+N,{d:f.point});for(let N=0;N<Q;N++){let q={txt:D.replace("$__d_value__$","1"),idx:f.pos[N]?+f.pos[N].trim():d};f.pos[N]&&q.idx<=p?r.push(q):l.push(q),d++}}r=r.sort((f,w)=>f.idx-w.idx),l=l.sort((f,w)=>f.idx-w.idx);let h=[];for(let f=1;f<=p;f++)r.length>0&&r[0].idx==f?h.push(r.splice(0,1)[0]):l.length>0&&h.push(l.splice(0,1)[0]);return r.length>0&&h.push(...r),l.length>0&&h.push(...l),{text:h.map(f=>f.txt).join("\n"),extra:c}}getShareType(s){var e;let n=null===(e=s.prNode)||void 0===e?void 0:e.prNode,i="",a=[];for(s.prNode&&a.push(s.prNode.id);n;)i=`[@C${n.id}:-].`+i,a.push(n.id),n=n.prNode;let r="";return 1==a.length&&-1==a[0]&&(r="user"),a.length>1&&-1==a[a.length-1]&&(r="user_"+a[a.length-2]),r}}class ut{process(s){let e=/^\s*#(\d)\s*\[[A-Z0-9\-\[\]\$!:b]+\]/g,n=["NB","TH","VD","VDC"],i=0,a=!1,r=1;for(let l of s){let _=l.matchAll(e).next();if(!_.done){let p=+_.value[1]-1;p<n.length&&(s[i]=l.replace(_.value[0],`C\xe2u ${r++}. (${n[p]})`)),a=!0}a&&"GY"==l.trim()&&(s[i]="L\u1eddi gi\u1ea3i"),i++}}}var Ct=T(40794),yt=T(82782);class It extends yt.N{constructor(){super(...arguments),this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}render(s,e,n){if(s.trim().startsWith("[@"))return s;let i=s,a=this.chemBase.join("|"),r=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?(${a})+\\d*(${a}|\\d+|\\(|\\))*(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|$)`,"g"),l=i.matchAll(r),c=[];for(;;){let d=l.next();if(d.done)break;let p=0==d.value.index?d.value[0]:d.value[0].substring(1);p.replace("(","").replace(")","").length<=1||c.push({s:0==d.value.index?0:d.value.index+1,len:p.length,val:this.autoFormat(p)})}if(c.sort((d,p)=>d.s>p.s?-1:1),c.filter(d=>/\d+/.test(d.val)).length>0)for(let d of c)i=i.substring(0,d.s)+"\\("+d.val+"\\)"+i.substring(d.s+d.len);return i}autoFormat(s){return s.replaceAll(/([^\(])(\d+)/g,"$1_{$2}")}}var Rt=T(76944);class ae extends yt.N{constructor(s){super(),this.cdnService=s}render(s,e,n){var i;if(s.indexOf("[img:")<0)return s;let r=s,l=r.matchAll(/\[img:\$[a-zA-Z0-9_]+\$\]/g);for(;;){let c=l.next();if(c.done)break;let _=c.value[0];const d=_.replace("[img:$","").replace("$]","");if(e){const p=e.find(h=>h.id===d);if(p){const h=document.createElement("img");h.id=d,h.classList.add(0===d.indexOf("af")?"qv_full_a_img":0===d.indexOf("f")?"qv_full_img":"qv_img"),h.crossOrigin="anonymous",h.style.cssText=null!==(i=p.cssStyle)&&void 0!==i?i:"";let f=Rt.G.generateIdRequired(10),w=this.cdnService.getRawCdnLink(p.link);this.loadingManager.set(f,w),h.onload=()=>{this.loadingManager.delete(f)},h.onerror=()=>{this.loadingManager.delete(f)},h.src=w,r=r.replace(_,h.outerHTML)}}}return r}}var ye=T(44823),vn=T(25442),Et=T(25482);class ne extends yt.N{constructor(s,e,n,i,a,r,l,c,_){var d;super(),this.cdnService=s,this.commonService=e,this.callBack=n,this.apiCallbackCache=i,this.editor=a,this.onError=r,this.loadedQuestIds=l,this.apiDataCache=c,this.matrixData=_,this.getOne=!1,this.trans={err_empty_quest:""},this.trans.err_empty_quest=null!==(d=this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_cau_hoi_tu_ngan_hang"))&&void 0!==d?d:""}render(s,e,n){var i,a,r,l;let c=s.split("<br>")[0].trim(),_=c.split("=>"),d=_.length>1?+_[1].split("-")[1]:0,p=_.length>1?+_[1].split("-")[0]:0;if(!this.callBack||!/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])+$/.test(_[0].trim())&&!/^\[@Q[\-\d]+:[^\]]+\](\s*,\s*\[@Q[\-\d]+:[^\]]+\])*$/.test(_[0].trim()))return s;let w=_[0]+"=>"+p,k=vn.Utils.parseInclude(c);if(this.apiDataCache){let W=this.apiDataCache.get(c);if(W&&this.callBack)return setTimeout(()=>{W&&this.callBack&&this.callBack(W)},50),"Loading...|"+k.questId.join(",")}if(this.apiCallbackCache){let q={i:d,call:this.callBack,err:this.onError},W=this.apiCallbackCache.get(w);if(W)return W.push(q),"Loading...|"+k.questId.join(",");this.apiCallbackCache.set(w,[q])}let S=this.loadedQuestIds&&0==k.questId.length?this.loadedQuestIds:[],D=!1;0==k.getNum&&k.groupId.length>0&&(D=!0,k.getNum=1,S=k.questId.length>0?S:[]),this.getOne&&k.getNum&&k.getNum>1&&(k.getNum=1);let Q=Rt.G.generateIdRequired(10),N=null===(i=this.matrixData)||void 0===i?void 0:i.filter(q=>q.key==w)[0];if(N)setTimeout(()=>{var q;this.processApiResponse(null!==(q=N?.questions)&&void 0!==q?q:[],w,D)},400);else{this.loadingManager.set(Q,c);let q={exceptQuestionIds:S,matrix:[]};null===(a=q.matrix)||void 0===a||a.push({number:k.getNum,key:w,paths:k.paths.map(E=>({type:E.type,id:E.id,groupIds:E.groupIds,tags:E.tags,answerTypes:E.answerTypes}))});let X=null!==(l=null===(r=q.matrix)||void 0===r?void 0:r.filter(E=>{var J,z;return null!==(z=null===(J=E.paths)||void 0===J?void 0:J.filter(K=>"KNOWLEDGE"==K.type).length)&&void 0!==z&&z}).length)&&void 0!==l&&l?n?.apiQuestionsMatrixGlobalPost(q):n?.apiQuestionsMatrixPost(q);X&&X.subscribe(E=>{let J=[];1===E.success&&E.data&&E.data[0]&&E.data[0].questions&&E.data[0].questions.length>0&&(J=E.data[0].questions),setTimeout(()=>{this.processApiResponse(J,w,D)},400),this.loadingManager.delete(Q)})}return"Loading...|"+k.questId}setGetOne(s){this.getOne=s}processApiResponse(s,e,n){var i,a,r,l,c,_,d,p;let h=s??[],f=null===(i=this.apiCallbackCache)||void 0===i?void 0:i.get(e);if(f)for(const w of f){let k=this.getOne?0:w.i;if(h.length<=k){w.err&&w.err(this.trans.err_empty_quest);continue}let S=h[k];const D=this.commonService.willDeleteParseJson(null!==(a=S.content)&&void 0!==a?a:"[]"),Q={type:"bank",sourceId:S.id};if(D&&D.length>0&&D[0].vMetaEditor&&(Q.heightLabel=D[0].vMetaEditor.heightLabel),n){let W=this.commonService.willDeleteParseJson(S.content||"[]"),X="",E={renderedStr:X,label:"",quest:{label:0,isGroup:!0,parts:[],answers:[]},answers:[],isFixGroup:"1"===S.groupType,meta:Q};if(1==S.isImage&&W[0].groupUrl){let J=Rt.G.generateIdRequired(10);this.loadingManager.set(J,W[0].groupUrl),this.loadImage(W[0].groupUrl,this.cdnService).then(z=>{var K;const B=document.createElement("canvas");B.width=z.width,B.height=z.height,null===(K=B.getContext("2d"))||void 0===K||K.drawImage(z,0,0,z.width,z.height);const et=document.createElement("img");et.src=B.toDataURL(),et.classList.add("qv_img-group-content"),E.renderedStr=et.outerHTML,w.call(E),this.loadingManager.delete(J)}).catch(z=>{E.renderedStr="Load image error",w.call(E),this.loadingManager.delete(J)})}else X=null!==(r=W[0].groupContent)&&void 0!==r?r:"",E.renderedStr=X,w.call(E);this.apiDataCache&&this.apiDataCache.set(e+"-"+w.i,E);continue}let N=4==S.answerType&&S.answerResult?this.commonService.willDeleteParseJson(S.answerResult):[],q="text";if(1===S.isImage&&(q=this.commonService.willDeleteParseJson(S.content||"")[0].url?"image":q),"image"===q){let W=this.commonService.willDeleteParseJson(S.content||""),X=W[0].metaData,E={renderedStr:"",label:"",attachments:S.attachments,quest:{isFixAns:1==S.isFixAns,label:0,parts:[],answers:X&&X.answers?X.answers.map(z=>{var K;return{label:z.label,isCorrect:-1!==(null===(K=S.answerResult)||void 0===K?void 0:K.indexOf(z.label)),parts:[]}}):(null!==(c=this.commonService.willDeleteParseJson(null!==(l=S.answerConfig)&&void 0!==l?l:"").answer)&&void 0!==c?c:[]).map(z=>{var K;return{label:z,isCorrect:-1!==(null===(K=S.answerResult)||void 0===K?void 0:K.indexOf(z)),parts:[]}})},strAns:N.length>0?N:void 0,answers:[],v:X?"pdf-2-0":"pdf-1-0",id:S.id,meta:Q};E.originCorrectAns=null===(_=E.quest.answers.find(z=>z.isCorrect))||void 0===_?void 0:_.label,S.tags&&(E.tag=S.tags.map(z=>({id:z.id,code:z.code,viName:z.viName,enName:z.enName})));let J=Rt.G.generateIdRequired(10);this.loadingManager.set(J,W[0].url),this.loadImage(W[0].url,this.cdnService).then(z=>{this.processImageQuestion(z,W,E),S.answerMedia?this.loadImageToBase64(S.answerMedia,this.cdnService).then(K=>{E.helpRenderedStr=K,w.call(E)}):w.call(E),this.apiDataCache&&this.apiDataCache.set(e+"-"+w.i,E),this.loadingManager.delete(J)}).catch(z=>{E.renderedStr="Load image error",w.call(E),this.loadingManager.delete(J)})}else{let W=this.commonService.willDeleteParseJson(S.content||"[]"),X=this.commonService.willDeleteParseJson(S.answerConfig||"[]"),E={renderedStr:"",label:"",attachments:S.attachments,quest:{isFixAns:1==S.isFixAns,label:0,parts:[],answers:X?X.map(J=>{var z;return{label:J.key,isCorrect:-1!==(null===(z=S.answerResult)||void 0===z?void 0:z.indexOf(J.key)),parts:[]}}):[]},strAns:N.length>0?N:void 0,answers:[],v:"docx",id:S.id,meta:Q};E.originCorrectAns=null===(d=E.quest.answers.find(J=>J.isCorrect))||void 0===d?void 0:d.label,W.length>0&&(E.renderedStr=W[0].content),S.answerMedia&&(E.helpRenderedStr=S.answerMedia),S.tags&&(E.tag=S.tags.map(J=>({id:J.id,code:J.code,viName:J.viName,enName:J.enName}))),E.answers=E.quest.answers.map((J,z)=>({renderedStr:X[z].content,ans:J})),this.apiDataCache&&this.apiDataCache.set(e+"-"+w.i,E),w.call(E)}}null===(p=this.apiCallbackCache)||void 0===p||p.delete(e)}setCallback(s){this.callBack=s}setApiCache(s){this.apiCallbackCache=s}processImageQuestion(s,e,n){const i=e[0].metaData;if(i){const a={x:0,y:0,w:i.question.width,h:i.question.height};let r=i.question.height;i.answers&&i.answers.forEach((c,_)=>{let d="";if(1!==c.width||1!==c.height){const p=this.cropImageWithPos({x:c.x,y:c.y,w:c.width,h:c.height},{x:c.remove.x,y:c.remove.y,w:c.remove.width,h:c.remove.height},s);p.classList.add("qv_ats_image"),r>c.y&&(a.h=c.y,r=c.y),d=p.outerHTML}n.answers.push({renderedStr:d,ans:n.quest.answers[_]})}),a.h<5&&(a.h=1,a.h=1);const l=this.cropImageWithPos(a,{x:i.question.remove.x,y:i.question.remove.y,w:i.question.remove.width,h:i.question.remove.height},s,!0);l.classList.add("qv_qts_image"),n.renderedStr=l.outerHTML,n.meta&&(n.meta.heightLabel=this.calculateHeightLabel(s,i.question.remove))}else n.renderedStr=s.outerHTML}cropImageWithPos(s,e,n,i,a){const r=document.createElement("canvas");r.width=s.w,r.height=s.h;const l=r.getContext("2d"),c=document.createElement("img");l?.drawImage(n,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l&&(l.fillStyle="#fff"),l?.fillRect(e.x-s.x,e.y-s.y,e.w,e.h);const d=Et.rj.cropCanvas(r,void 0);return a?d:(c.src=d.toDataURL(),c.style.width=d.width*this.ratioImage+"px",c)}calculateHeightLabel(s,e){return this.cropImageWithPos({x:e.x,y:e.y,w:e.width,h:e.height},{x:0,y:0,w:0,h:0},s,!1,!0).height}}class un extends yt.N{constructor(s){super(),this.mathMap=s}render(s,e,n){let i=s,r=i.matchAll(/\[!m:\$(([^\]]|[^\$]\])+)\$\]/g);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],_=l.value[1],d=this.mathMap.get(_),p="";const h=document.createElement("span");h.classList.add("tex2jax_process"),h.classList.add("azt-mathml"),h.id=_,d&&(h.innerHTML=d.str,d.raw&&h.setAttribute("data-azt-math-raw",d.raw)),p=h.outerHTML,i=i.replace(c,p)}return i}}class an extends yt.N{render(s,e,n){let i=this.bypassChild(s);return i=i.replaceAll(/\\\)\s*\\\(/g,""),i}bypassChild(s,e="\\(",n="\\)"){if(e.length!==n.length)return"";const i=[];let a=0;for(;;){let c=s.indexOf(e,a);if(-1===c)break;i.push("s_"+c),a=c+1}for(a=0;;){let c=s.indexOf(n,a);if(-1===c)break;i.push("e_"+c),a=c+1}i.sort(function(c,_){return parseInt(c.substr(2))-parseInt(_.substring(2))});let r=[];const l=[];return i.forEach(c=>{if("s"===c.substring(0,1))r.push(parseInt(c.substring(2)));else if(1==r.length)r=[];else{let _=r.pop();if(_){let d=parseInt(c.substring(2));l.push(_),l.push(d)}}}),l.sort(function(c,_){return c-_}).reverse().forEach(c=>{s=s.substring(0,c)+s.substring(c+e.length)}),s}}class ie extends yt.N{render(s){let e=s,n=e.split("<br>"),i=0,a=/\[![!ibucsbphl]+:!!\]/;for(let c of n){if(a.test(c)){let d=c.split(":!!]")[0].split("["),p=d[d.length-1].split(":")[0];n[i]=c.startsWith("[*")?"[* ["+p+":$"+c.replace(a,"$]").substring(2):"["+p+":$"+c.replace(a,"$]")}i++}e=n.join("<br>"),e=e.replaceAll(/\[![!ibucsbphl]+:\$\$\]/g,"");let l=e.matchAll(/\[![!ibucsbphl]+:\$(([^\$]|\$[^\]])+)\$\]/g);for(;;){let c=l.next();if(c.done)break;let _=c.value[0],d=c.value[1],p=_.split(":")[0].split("!");p.shift();for(let h=p.length-1;h>=0;h--){let f=p[h];d="hl"==f?d:`<${f}>${d}</${f}>`}e=e.replace(_,d)}return e}}class jt extends yt.N{render(s,e,n){let i=s,a=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let r of a)i=i.replaceAll(r[0],r[1]);return i}}class de extends yt.N{render(s,e,n){let a=s.split("<br>"),r=[],l=[];for(let c of a)if(c.trim().startsWith("[*")&&c.trim().endsWith("*]")){let _=c.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");_=_.replaceAll("|","</td><td>"),l.push(_)}else l.length>0&&(r.push('<table class="q-table">'+l.join("")+"</table>"),l=[]),r.push(c.replaceAll("\\n","<br>"));return l.length>0&&r.push('<table class="q-table">'+l.join("")+"</table>"),r.join("<br>")}}class Ut extends yt.N{render(s,e,n){let i=s,r=i.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let _=r.next();if(_.done)break;let d=_.value[0],h=d.substring(1,d.length-1).split(":");2==h[0].length&&(h[0]=h[0].substring(1)),i=i.replace(d,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${h[1]} <span style='position: absolute;top: 20px;left: 45%;'>${h[0]}</span></span>`)}return i}revert(s,e){let n=s;return n=n.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),n=n.replace("["+e+":","[*"+e+":"),n}}let le=(()=>{class o{}return o.EXAM_FULL=["Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. (VDC) T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\n------H\u1ebeT------\nB\u1ea2NG \u0110\xc1P \xc1N\n1A 2B 3C\nH\u01b0\u1edbng d\u1eabn gi\u1ea3i\nC\xe2u 1 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nC\xe2u 2 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nC\xe2u 3 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nC\xe2u 4 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1.(VD) Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nCh\u1ecdn C\n\nC\xe2u 2.(NB) N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nCh\u1ecdn A\n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nCh\u1ecdn C\n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\n\nQuestion 5. The apple ___ the table.\n\nANSWER KEYS\n1b 2d 3a 4b\n5. on | On | ON","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c."],o.EXAM_FULL_EN=["Question 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Part 1. Answer from 1 - 2\nQuestion 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nPart 2. Answer from 2 - 4\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\nANSWER KEYS\n1b 2d 3a 4b","Question 1.I used to __________ in Germany when I was 7.\n*A. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \n*B. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \n*C. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \n*D. to clean\n------THE END------\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4"],o})();var t=T(94650),Dt=T(15043);let ue=(()=>{class o{constructor(e){this.cdnService=e}renderContent(e){const n=JSON.parse(e.questionContent||"{}");if("image"==(e.isImage&&n[0].url?"image":"text"))return`<img width="700" src="${this.cdnService.getRawCdnLink(n[0].url)}">`;{const a=/@\[\][^@\[\]]+@\[\]/g;let r=`<p>${n[0].content.replace(a,"[h\xecnh]")}</p>`;return JSON.parse(e.answerConfig||"[]").forEach(c=>{r+=`<p><b>${c.key}.</b>${c.content.replace(a,"[h\xecnh]")}</p>`}),r}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Dt.U))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),sn=(()=>{class o{static generate(e){const n=o._DEFAULT;if(void 0!==e)for(const i in n)Object.hasOwnProperty.call(n,i)&&Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}}return o._DEFAULT={is_select_cell:!0,is_select_row:!0},o})();class Ht{constructor(s,e,n,i,a,r,l){this.commonService=s,this.noteAction=e,this.questionService=n,this.callbackOnChange=l,this.name="table_matrix",this.class_active="select",this.first_matrix=null,this.last_matrix=null,this.max_row=0,this.max_col=0,this.menuElement=null,this.list=[],this.menuMode=[],this.lstNode=[],this.isErrSum=!1,this.statusDisable=!1,this.table__main=i,this.table__element=a,this.option=r,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1,this.list=[],this.startAddEvent(),this.setupMenuMode(),window.addEventListener("mouseup",()=>{this.endCheck()})}get isErrNumPos(){return this.lstNode.filter(s=>s.content.filter(e=>e.isErr).length>0).length>0}setDisable(s){this.statusDisable=s,this.reBuild()}pushNode(s){return s=Object.assign({},s),new Promise(e=>{if(this.statusDisable)e();else{"knowledge"===s.type&&(s.item=s.item.substring(0,s.item.lastIndexOf("(")),s.prNode&&(s.prNode=Object.assign({},s.prNode),s.prNode.item=s.prNode.item.substring(0,s.prNode.item.lastIndexOf("("))));const n=this.pushTrElement(s);n&&this.reqCheck(n).then(()=>{e()})}})}getResult(){return this.lstNode.length>0?this.lstNode.map(s=>(s.content=s.content.map(e=>Object.assign(Object.assign({},e),{value:"POS"===e.indexName?e.value.replace("&nbsp;","").trim().toUpperCase():this.getResultOfString(e.value)})),s)):[]}resetAndPushList(s){return new Promise(e=>{this.lstNode=s.map(i=>{if("knowledge"===i.obj.type&&i.obj.item.endsWith(")")&&(i.obj.item=i.obj.item.substring(0,i.obj.item.lastIndexOf("(")),i.obj.prNode&&i.obj.prNode.item.endsWith(")")&&(i.obj.prNode.item=i.obj.prNode.item.substring(0,i.obj.prNode.item.lastIndexOf("(")))),i.content.length!==this.colName().length){const a=this.colName();let r=i.content.map(l=>l.indexName);a.forEach((l,c)=>{r.includes(l)||i.content.unshift(this.createEmptyContentWithName(c,i.content[0].id))}),i.content=i.content.map(l=>Object.assign(Object.assign({},l),{index:this.colNameToIndex(l.indexName)}))}return i.content=i.content.map(a=>(a.totalTL=0,a.totalTN=0,a.tempTotalTL=0,a.tempTotalTN=0,a)),i});const n=new ct.Q(2);this.lstNode.forEach(i=>{n.addTask(this,this.reqCheck,[i])}),n.start().then(()=>{this.lstNode.forEach(i=>{i.content.forEach(a=>{a.mergeId.length>0&&(a.tempTotalTL=a.totalTL,a.tempTotalTN=a.totalTN,a.mergeId.forEach(r=>{const l=this.lstNode.findIndex(c=>c.index===r);-1!==l&&this.lstNode[l].content[a.index]&&(a.totalTL+=this.lstNode[l].content[a.index].totalTL,a.totalTN+=this.lstNode[l].content[a.index].totalTN)}))})}),this.reBuild(),e()})})}getSumQuestion(){let s=0;return this.lstNode.forEach(e=>{const n=this.sumParamOfColName(e.content,"SOCH_TL"),i=this.sumParamOfColName(e.content,"SOCH_TN");s+=n+i}),s}sumParamOfColName(s,e){const n={SOCH_TN:0,SOCH_TL:0,TGP:0};return s.forEach(i=>{var a,r,l;i.indexName.indexOf("SOCH")>0&&(-1!==i.value.toUpperCase().indexOf("TL")?n.SOCH_TL+=null!==(a=Ht.selectNumberOfString(i.value))&&void 0!==a?a:0:n.SOCH_TN+=null!==(r=Ht.selectNumberOfString(i.value))&&void 0!==r?r:0),i.indexName.indexOf("TGP")>0&&(n.TGP+=null!==(l=Ht.selectNumberOfString(i.value))&&void 0!==l?l:0)}),n[e]}reqCheck(s){return new Promise(e=>{var n;let i,a,r;"test"===s.obj.type&&(a=s.obj.id.toString(),s.obj.shareType=s.obj.prNode?s.obj.prNode.shareType:void 0),"cate"===s.obj.type&&(i=s.obj.id.toString(),"-1"===i&&(s.obj.shareType="user")),"knowledge"===s.obj.type&&(r=s.obj.id.toString());let l=null!==(n=this.commonService.myTranslateInstant("lang_auto_don_vi"))&&void 0!==n?n:"",c=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_hoi_duoc_gan_nhan");this.questionService.apiQuestionsSummarizeTagsTypesGet(i,a,void 0,void 0,s.obj.shareType,r).subscribe(_=>{var d;s.disLoading=!0,1===_.success&&_.data?0===_.data.reduce((h,f)=>{var w;return h+(null!==(w=f.total)&&void 0!==w?w:0)},0)?(s.obj.item=null!==(d=this.commonService.myTranslateInstant(s.obj.item))&&void 0!==d?d:"",this.noteAction(l+': "'+s.obj.item+'":'+c,!0),s.content.forEach(h=>{h.disabled=!0})):s.content.forEach(h=>{var f,w,k,S,D;const Q=null===(f=_.data)||void 0===f?void 0:f.map(W=>{var X;return{answerType:W.answerType,tags:null===(X=W.tags)||void 0===X?void 0:X.filter(E=>E.code==h.indexName.split("_")[0])}}),N=Q?.find(W=>3===W.answerType),q=Q?.find(W=>1===W.answerType||4===W.answerType);h.totalTL=null!==(k=null===(w=N?.tags)||void 0===w?void 0:w.reduce((W,X)=>{var E;return W+(null!==(E=X.total)&&void 0!==E?E:0)},0))&&void 0!==k?k:0,h.totalTN=null!==(D=null===(S=q?.tags)||void 0===S?void 0:S.reduce((W,X)=>{var E;return W+(null!==(E=X.total)&&void 0!==E?E:0)},0))&&void 0!==D?D:0}):(this.noteAction(l+': "'+s.obj.item+'":'+c,!0),s.content.forEach(p=>{p.disabled=!0})),this.reBuild(),e()})})}getResultOfString(s){s=s.replace("&nbsp;","").trim().toUpperCase();let e=!1;const n=Ht.selectNumberOfString(s);return n?(["TN","TL"].forEach(i=>{-1!==s.indexOf(i)&&(e=!0,s=n.toString()+i)}),e?s:n.toString()):""}pushChangeEvent(){this.callbackOnChange&&this.callbackOnChange(this.lstNode)}startAddEvent(){if(this.getMatrixTable(),this.statusDisable)return;const s=c=>{this.startCheck(c)},e=c=>(c.preventDefault(),this.startRightCheck(c),!1),n=c=>{this.flag&&(c.preventDefault(),this.moveCheck(c.target))},i=c=>{this.validateInput(c)},a=c=>{this.checkHotKey(c)},r=c=>{this.checkHotKeyEnd(c)};for(let c=0;c<this.max_row;c++)for(let _=0;_<this.max_col;_++){const d=this.getElWithMatrix(_,c);d&&d.classList.contains("edit-item-tb")&&(d.setAttribute("row_index",c.toString()),d.setAttribute("col_index",_.toString()),d.addEventListener("mousedown",s),d.addEventListener("contextmenu",e,!1),d.addEventListener("mouseover",n),d.addEventListener("input",i),d.addEventListener("keydown",a),d.addEventListener("keyup",r))}const l=document.getElementsByClassName("tb-matrix-editor-trash-node");for(let c=0;c<l.length;c++){const _=l[c];_.addEventListener("click",()=>{const d=this.getNodeWithElement(_);if(d){if(d.isMergeCate){const p=this.getRootMerge(d,"Cate");p&&p.numMergeCate--}else if(d.numMergeCate>1){const p=this.lstNode[this.lstNode.indexOf(d)+1];p&&(p.isMergeCate=!1,p.numMergeCate=d.numMergeCate-1)}d.content.forEach(p=>{if(p.isMerge){const h=this.findContentRootOfMerge(p,d.index);h&&h.mergeId.splice(h.mergeId.indexOf(d.index),1)}else if(p.mergeId.length>0){const h=this.findContentNextMerge(p);h&&(p.mergeId.splice(0,1),h.isMerge=!1,h.mergeId=p.mergeId)}}),this.lstNode.splice(this.lstNode.indexOf(d),1)}this.reBuild()})}}findContentRootOfMerge(s,e){let n;return this.lstNode.forEach(i=>{i.content.forEach(a=>{a.index==s.index&&a.mergeId.includes(e)&&(n=a)})}),n}findContentNextMerge(s){const e=this.lstNode.find(n=>n.index==s.mergeId[0]);if(e&&e.content[s.index])return e.content[s.index]}checkHotKeyEnd(s){return 16===s.keyCode&&(s.preventDefault(),this.list.length>1&&this.openMenu("select")),!1}checkHotKey(s){const e=(a,r)=>{if(this.flag_shift&&r){const l=this.getElWithMatrix(a.cell,a.row);l&&(0===this.list.length&&this.checkList(s.target),this.checkList(l))}else this.removeAllList(),this.focusMatrix(a);return!1},n=0===this.list.length?s.target:this.list[this.list.length-1],i=this.getMatrixEl(n);return 40===s.keyCode?(s.preventDefault(),e(Object.assign(Object.assign({},i),{row:i.row+1}),this.option.is_select_row)):38===s.keyCode?(s.preventDefault(),e(Object.assign(Object.assign({},i),{row:i.row-n.rowSpan}),this.option.is_select_row)):37===s.keyCode?(s.preventDefault(),e({row:i.row-n.rowSpan+1,cell:i.cell-1},this.option.is_select_cell)):39===s.keyCode?(s.preventDefault(),e({row:i.row-n.rowSpan+1,cell:i.cell+1},this.option.is_select_cell)):13===s.keyCode?(s.preventDefault(),this.flag_un_merge?(this.startUnMergeAction(),!1):this.flag_merge?(this.startMergeAction(),!1):this.flag_shift?(this.startRightCheck(s),!1):e(Object.assign(Object.assign({},i),{row:i.row+1}),this.option.is_select_row)):(16===s.keyCode&&(s.preventDefault(),this.flag_shift=!0),!1)}focusMatrix(s){const e=this.getElWithMatrix(s.cell,s.row);e&&e.focus()}startRightCheck(s){const e=s.target;e.rowSpan>1&&(this.flag_right=!0,this.flag=!1,this.list=[e],this.openMenu("right"),this.flag_un_merge=!0)}startCheck(s){this.removeAllList(),this.flag=!0,this.checkList(s.target)}moveCheck(s){this.toggleCursor(!0),this.checkList(s)}endCheck(){this.flag_right||(this.toggleCursor(!1),this.flag=!1,this.stepMenu()||this.removeAllList())}checkList(s){0===this.list.length?this.first_matrix=this.getMatrixEl(s):this.last_matrix=this.getMatrixEl(s),this.getList(),this.loopList(),this.flag_merge=!0}removeAllList(){this.closeMenu(),this.removeSelectList(),this.first_matrix=null,this.last_matrix=null,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1}getMatrixEl(s){return{cell:Number(s.getAttribute("col_index")),row:Number(s.getAttribute("row_index"))}}getMatrixTable(){this.table__element.innerHTML=this.table__element.innerHTML,this.max_row=this.table__element.rows.length,this.max_col=16}getList(){if(this.removeSelectList(),this.first_matrix&&this.last_matrix){let s=0,e=0,n=0,i=0;this.first_matrix.cell<this.last_matrix.cell?(s=this.first_matrix.cell,e=this.last_matrix.cell):(s=this.last_matrix.cell,e=this.first_matrix.cell),this.first_matrix.row<this.last_matrix.row?(n=this.first_matrix.row,i=this.last_matrix.row):(n=this.last_matrix.row,i=this.first_matrix.row);for(let a=s;a<=e;a++)for(let r=n;r<=i;r++){let l=!1;this.option.is_select_cell&&this.option.is_select_row?l=!0:this.option.is_select_row?s===e&&(l=!0):n===i&&(l=!0),l?this.pushList(this.getElWithMatrix(a,r)):this.endCheck()}}else this.first_matrix&&this.pushList(this.getElWithMatrix(this.first_matrix.cell,this.first_matrix.row))}loopList(){this.list.forEach(s=>{s.classList.add(this.class_active)})}getElWithMatrix(s,e){var i,a,r,l,c,_,d,n=[];for(d=0;d<this.table__element.rows.length;d++)for(i=this.table__element.rows[d],_=0;_<i.cells.length;_++){for(a=i.cells[_],r=_;n[d]&&n[d][r];++r);for(l=r;l<r+a.colSpan;++l)for(c=d;c<d+a.rowSpan;++c)n[c]||(n[c]=[]),n[c][l]=!0;if(r<=s&&s<r+a.colSpan&&d<=e&&e<d+a.rowSpan)return a}}pushList(s){s&&this.list.push(s)}removeSelectList(){this.list.forEach(s=>{s.classList.remove(this.class_active)}),this.list=[]}toggleCursor(s){document.body.style.cursor=s?"crosshair":"auto"}setupMenuMode(){this.menuMode.push({id:"__merge",mode:"select",action:this.startMergeAction}),this.menuMode.push({id:"__un_merge",mode:"right",action:this.startUnMergeAction})}generateMenu(s){this.menuElement||(this.menuElement=document.getElementById("menu__excel_editor"),this.menuMode.forEach(e=>{var n;const i=document.getElementById((null===(n=this.menuElement)||void 0===n?void 0:n.id)+e.id);i&&i.addEventListener("click",a=>{e.action.call(this)})})),this.menuMode.forEach(e=>{var n;const i=document.getElementById((null===(n=this.menuElement)||void 0===n?void 0:n.id)+e.id);i&&(i.style.display=e.mode===s?"flex":"none")})}stepMenu(){return this.list.length>1&&(this.openMenu("select"),!0)}openMenu(s){if(this.list.length>0){this.generateMenu(s);const e=this.getPosWithParent(this.list[this.list.length-1]);this.menuElement&&(this.menuElement.style.top=e.top+Math.floor(e.height/2)+"px",this.menuElement.style.left=e.left+Math.floor(e.width/2)+"px",this.menuElement.style.display="block")}}closeMenu(){this.menuElement&&(this.menuElement.style.display="none")}getPosWithParent(s){const e=this.table__main.getBoundingClientRect(),n=s.getBoundingClientRect();return{top:n.top-e.top,left:n.left-e.left,width:n.width,height:n.height}}startMergeAction(){let s;var e,n;for(let a=0;a<this.list.length;a++){const r=this.list[a];if(r){const l=this.getNodeWithElement(r);if(l){const c=this.getContentOfNodeWithElement(r,l);c&&(0===a?(s=this.getMatrixEl(r),n=l,(e=c).tempTotalTL=e.totalTL,e.tempTotalTN=e.totalTN):r.parentElement&&e&&(e.mergeId.push(l.index),c.isMerge=!0,c.value=""))}}}let i=[];if(n&&e&&e.mergeId.length>0){const a=[n];e.mergeId.forEach(r=>{const l=this.getNodeWithIndex(r);l&&a.push(l)}),i=this.getLstNodeParent(a)}if(e&&i.length>0)for(let a=0;a<this.list.length;a++){const r=this.list[a];if(r){const l=this.getNodeWithElement(r);if(l&&i.filter(c=>c.obj.id===l.obj.id).length>0){const c=this.getContentOfNodeWithElement(r,l);c&&0!==a&&(e.totalTL+=c.totalTL,e.totalTN+=c.totalTN)}}}this.reBuild(),s&&this.focusMatrix(s)}startUnMergeAction(){const s=this.list[0],e=this.getMatrixEl(s),n=this.getNodeWithElement(s);if(n){const i=this.getContentOfNodeWithElement(s,n);i&&(i.totalTL=i.tempTotalTL,i.totalTN=i.tempTotalTN,i.mergeId.forEach(a=>{const r=this.lstNode.find(l=>l.index==a);if(r){const l=r.content[i.index];l&&(l.isMerge=!1)}}),i.mergeId=[])}this.reBuild(),this.focusMatrix(e)}getCellOfCNode(s,e){for(let n=0;n<this.table__element.rows.length;n++){const i=this.table__element.rows[n];if(i.getAttribute("data-index")===s.index)for(let a=0;a<i.cells.length;a++){const r=i.cells[a];if(r.getAttribute("data-index")===e.index.toString())return r}}}getNodeWithElement(s){if(s.parentElement&&"TR"==s.parentElement.tagName.toUpperCase()){const e=s.parentElement.getAttribute("data-index");if(e){const n=e;return this.lstNode.find(i=>i.index===n)}}}getNodeWithIndex(s){return this.lstNode.find(e=>e.index===s)}isChildWithMatrix(s,e){if(s.obj.prNode)for(var n=this.commonService.myClone(s.obj.prNode);n;){if(e.includes(n.id))return!0;n=n.prNode}return!1}getLstNodeParent(s){const e=[],n=[];return s.forEach(i=>{e.push(i.obj.id)}),s.forEach(i=>{this.isChildWithMatrix(i,e)||0===n.filter(a=>a.obj.id===i.obj.id).length&&n.push(i)}),n}getContentOfNodeWithElement(s,e){const n=s.getAttribute("data-index");if(n&&n?.length>0)return e.content[parseInt(n)]}selectNumberWithElement(s){return Ht.selectNumberOfString(s.innerText)}static selectNumberOfString(s){var e=s.replace(/([0-9]+)T/g,"$1");if(!isNaN(Number(e)))return Number(e);var n=s.replace(/([0-9]+)TL/g,"$1");if(!isNaN(Number(n)))return Number(n);var i=s.replace(/([0-9]+)TN/g,"$1");if(!isNaN(Number(i)))return Number(i);var a=s.replace(/([0-9]+)%/g,"$1");return isNaN(Number(a))?void 0:Number(a)}validateInput(s){var e,n,i,a,r,l;const c=s.target,d=this.getNodeWithElement(c)?.content.find(f=>f.indexName===c.getAttribute("data-name"));if(0===(null!==(e=c.getAttribute("data-name"))&&void 0!==e?e:"").indexOf("POS")&&(c.classList.remove("border-err"),c.classList.remove("common-warning-item")),0==c.innerText.length)return d&&0===(null!==(n=c.getAttribute("data-name"))&&void 0!==n?n:"").indexOf("POS")&&(d.isErr=!1),void this.pushValueWithElement(c);if(c.innerText=c.innerText.replace(/(\r\n|\n|\r)/gm,"").trim().toUpperCase(),-1!==(null!==(i=c.getAttribute("data-name"))&&void 0!==i?i:"").indexOf("_SOCH")&&(null==this.selectNumberWithElement(c)||c.innerText.includes(".")||c.innerText.includes(","))&&(c.innerHTML="&nbsp;",this.snackErrElement(c)),-1!==(null!==(a=c.getAttribute("data-name"))&&void 0!==a?a:"").indexOf("_TGP")&&isNaN(Number(c.innerText))&&(c.innerText.includes(".")||c.innerText.includes(","))&&(c.innerHTML="&nbsp;",this.snackErrElement(c)),0===(null!==(r=c.getAttribute("data-name"))&&void 0!==r?r:"").indexOf("DIEM")){let f=c.innerText.replace("%","");isNaN(Number(f))?(c.innerHTML="&nbsp;",this.snackErrElement(c)):c.innerText=f}if(0===(null!==(l=c.getAttribute("data-name"))&&void 0!==l?l:"").indexOf("POS")){const f=Number(c.getAttribute("data-total-input-number"));this.getNoteValidatePos(f,c.innerText,d).isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}""==c.innerText&&(c.innerHTML="&nbsp;");const p=window.getSelection(),h=document.createRange();p.removeAllRanges(),h.selectNodeContents(c),h.collapse(!1),p.addRange(h),c.focus(),this.pushValueWithElement(c)}pushValueWithElement(s){const e=this.getNodeWithElement(s);if(e){const n=this.getContentOfNodeWithElement(s,e);n&&(n.value=s.innerText+("DIEM"===n.indexName?"%":""),this.isNodeWarning(n)?s.classList.add(...this.getWarMsg(n).split(" ")):s.classList.remove("warning-item","wn-empty","wn-over-tn","wn-over-tl"))}this.sumAll()}sumAll(){let s=" ".repeat(this.colName().length).split("").map(()=>0);this.lstNode.forEach(a=>{a.content.forEach(r=>{var l;if(["SOCH_TN","SOCH_TL","TGP"].includes(r.indexName)){r.value=this.sumParamOfColName(a.content,r.indexName).toString();const c=this.getCellOfCNode(a,r);c&&(c.innerText=r.value)}void 0!==s[r.index]&&!r.isMerge&&0!==r.index&&(s[r.index]+=null!==(l=Ht.selectNumberOfString(r.value))&&void 0!==l?l:0)})});var e="";s.forEach((a,r)=>{r===s.length-1?(this.isErrSum=Number(a)>100,e+=`<td class="text-center">${a>0?a.toString()+"%":""}</td>`):e+=0===r?'<td class="text-center"></td>':`<td class="text-center">${a>0?a.toString():""}</td>`});const i=`<tr class="dis-item-tb"><td colspan="4" class="text-center">${this.commonService.myTranslateInstant("lang_auto_tong")}</td>${e}</tr>`;this.table__element.tFoot&&(this.table__element.tFoot.innerHTML=i),this.lstNode.forEach(a=>{a.content.forEach(r=>{if("POS"===r.indexName){let l=this.countTotalNumQuestRow(a);const c=document.getElementById(`total_input_number_${r.index}${r.id}`);if(c){c.classList.remove("border-err"),c.classList.remove("common-warning-item"),c.setAttribute("data-total-input-number",l.toString());let _=this.getNoteValidatePos(l,r.value,r);c.setAttribute("common-note-trans",_.str),_.isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}}})})}indexToColName(s){var e;return null!==(e=this.colName()[s])&&void 0!==e?e:""}colNameToIndex(s){return this.colName().findIndex(e=>e===s)}colName(){return["POS","NB_SOCH","NB_TGP","TH_SOCH","TH_TGP","VD_SOCH","VD_TGP","VDC_SOCH","VDC_TGP","SOCH_TN","SOCH_TL","TGP","DIEM"]}snackErrElement(s,e=!0){var n;let i=null!==(n=this.commonService.myTranslateInstant("lang_auto_du_lieu_nhap_vao_khong_hop_le"))&&void 0!==n?n:"";this.noteAction(i,!0),s.classList.add("border-err"),e&&setTimeout(()=>{s.classList.remove("border-err")},1200)}hiddenNoteEmpty(){if(0===this.lstNode.length){let s=this.commonService.myTranslateInstant("lang_auto_matrix_content_text");this.table__element.tBodies[0].innerHTML=`<tr class="text-center"><td colspan="16">${s}</td></tr>`}}getRootMerge(s,e){let n=this.lstNode.findIndex(i=>i.index===s.index);for(let i=n;i>=0;i--)if(!this.lstNode[i]["isMerge"+e])return this.lstNode[i];return s}createEmptyContentWithName(s,e){return{totalTL:0,totalTN:0,tempTotalTL:0,tempTotalTN:0,indexName:this.indexToColName(s),index:s,id:e,value:"&nbsp;",mergeId:[],isErr:!1}}pushTrElement(s){var e,n,i=!1;if(this.lstNode.length>0){const r=this.lstNode[this.lstNode.length-1];if(r.obj.id===s.id)return;const l=this.getRootMerge(r,"Cate");(i=(null===(e=r.obj.prNode)||void 0===e?void 0:e.id)===(null===(n=s.prNode)||void 0===n?void 0:n.id))&&l.numMergeCate++}const a={numMergeCate:1,isMergeCate:i,index:this.generateIdRequired(10),obj:s,content:" ".repeat(this.colName().length).split("").map((r,l)=>this.createEmptyContentWithName(l,s.id))};return this.lstNode.push(a),this.reBuild(),a}getNoteValidatePos(s,e,n){var i,a,r,l,c,_;let d={str:null!==(i=this.commonService.myTranslateInstant("lang_auto_validate_empty"))&&void 0!==i?i:"",isErr:!1};const p=null!==(a=this.commonService.myTranslateInstant("lang_auto_khong_qua"))&&void 0!==a?a:"",h=null!==(r=this.commonService.myTranslateInstant("lang_auto_du"))&&void 0!==r?r:"",f=e.replace("&nbsp;","").trim().toUpperCase();if(0===f.length)return n&&(n.isErr=!1),d;let w=f.split(",").map(k=>k.trim());if(!/^[C0-9,]+$/g.test(f)||f.includes(",,")||f.includes("CC")||w.length!==w.filter(k=>""!==k&&0!==Number(k)).length)return d.isErr=!0,n&&(n.isErr=!0),d.str=null!==(l=this.commonService.myTranslateInstant("lang_auto_validate_format"))&&void 0!==l?l:"",d;if(!d.isErr){if(0===w.length)return n&&(n.isErr=!1),d;w.forEach(k=>{var S;d.isErr=!/C([0-9]+)$/.test(k)&&!/([0-9]+)$/.test(k),d.isErr&&(d.str=null!==(S=this.commonService.myTranslateInstant("lang_auto_validate_format"))&&void 0!==S?S:"")})}if(!d.isErr){const k=[];w.forEach(D=>{var Q;const N=Number(D.replace("C",""));k.includes(N)&&(d.isErr=!0,d.str=null!==(Q=this.commonService.myTranslateInstant("lang_auto_validate_exits"))&&void 0!==Q?Q:""),k.push(N)});let S=!1;this.lstNode.map(D=>{var Q;return null===(Q=D.content.find(N=>"POS"===N.indexName&&N.id!==n?.id))||void 0===Q?void 0:Q.value.split(",").filter(N=>"&nbsp;"!==N).map(N=>Number(N.replace("C","")))}).forEach(D=>{D&&D.forEach(Q=>{k.includes(Q)&&(S=!0)})}),S&&(d.isErr=!0,d.str=null!==(c=this.commonService.myTranslateInstant("lang_auto_validate_exits"))&&void 0!==c?c:"")}return d.isErr||(d.isErr=w.length!==s,d.isErr&&(d.str=(null!==(_=this.commonService.myTranslateInstant("lang_auto_validate_number"))&&void 0!==_?_:"").replace("${2}",w.length.toString()).replace("${3}",w.length>s?p:h).replace("${1}",s.toString()))),n&&(n.isErr=w.length!==s),d}reBuild(){this.removeAllList();var s="";this.lstNode.forEach((e,n)=>{var i,a,r,l="";l+=`<td class="dis-item-tb text-center">${n+1}</td>`,!e.isMergeCate&&e.obj.prNode&&(e.obj.prNode.item=null!==(i=this.commonService.myTranslateInstant(e.obj.prNode.item))&&void 0!==i?i:"",l+=`<td rowSpan="${e.numMergeCate}" class="dis-item-tb text-center">${null!==(a=e.obj.prNode.item)&&void 0!==a?a:""}</td>`),e.obj.item=null!==(r=this.commonService.myTranslateInstant(e.obj.item))&&void 0!==r?r:"",l+=`<td class="dis-item-tb text-center" colSpan="${e.obj.prNode?1:2}">${e.obj.item}</td>`,l+='<td class="dis-item-tb text-center tb-matrix-editor-trash-node"><i class="fa fa-trash"></i></td>',e.content.forEach(c=>{var _,d,p,h,f,w,k,S;if(["SOCH_TN","SOCH_TL","TGP"].includes(c.indexName))l+=`<td data-index="${c.index}" class="dis-item-tb text-center">${c.value}</td>`;else if("POS"===c.indexName){let D=this.countTotalNumQuestRow(e),Q=this.getNoteValidatePos(D,c.value,c);l+=`<td id="total_input_number_${c.index}${c.id}" data-total-input-number="${D}" col-name="${this.getNameCol(c.indexName)}" data-name="${c.indexName}" data-index="${c.index}" class="${this.isNoteEditTable(c)?"note-edit-item-tb":""} ${this.getWarMsg(c)} edit-item-tb text-center common-note-item" common-note-trans="${Q.str}" ${this.statusDisable?"":'contenteditable="true"'} ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}>${c.value}</td>`}else if(!c.isMerge)if(e.disLoading){let D=null!==(_=this.commonService.myTranslateInstant("lang_auto_hien_co_trac_nghiem"))&&void 0!==_?_:"",Q=null!==(d=this.commonService.myTranslateInstant("lang_auto_tu_luan"))&&void 0!==d?d:"",N=null!==(p=this.commonService.myTranslateInstant("lang_auto_khong_co_cau_hoi_nao"))&&void 0!==p?p:"",q=null!==(h=this.commonService.myTranslateInstant("lang_auto_khong_du_cau_hoi"))&&void 0!==h?h:"",W=q+" "+(null===(f=this.commonService.myTranslateInstant("lang_auto_cau_TL"))||void 0===f?void 0:f.toLowerCase()),X=q+" "+(null===(w=this.commonService.myTranslateInstant("lang_auto_trac_nghiem"))||void 0===w?void 0:w.toLowerCase());l+=`<td col-name="${this.getNameCol(c.indexName)}" num-tl="${null!==(k=c.totalTL)&&void 0!==k?k:0}" num-tn="${null!==(S=c.totalTN)&&void 0!==S?S:0}" data-name="${c.indexName}" first-trans="${D}" last-trans="${Q}" over-question-trans-tl="${W}" over-question-trans-tn="${X}" empty-question-trans="${N}" data-index="${c.index}" class="${this.isNoteEditTable(c)?"note-edit-item-tb":""} ${this.getWarMsg(c)} edit-item-tb text-center ${c.value&&(c.value.includes(".")||c.value.includes(","))?"border-err":""}" ${this.statusDisable?"":'contenteditable="true"'} ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}>${c.value}</td>`}else l+=`<td data-name="${c.indexName}" data-index="${c.index}" class="text-center" ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}><i class="fa fa-spinner fa-spin"></i></td>`}),s+=`<tr data-index="${e.index}">${l}</tr>`}),this.table__element.tBodies[0].innerHTML=s,this.sumAll(),this.startAddEvent(),this.hiddenNoteEmpty(),this.pushChangeEvent()}countTotalNumQuestRow(s){let e=0;return s.content.filter(n=>["SOCH_TN","SOCH_TL"].includes(n.indexName)).forEach(n=>{var i;e+=Number(null!==(i=n.value)&&void 0!==i?i:"0")}),e}isNodeWarning(s){var e;let n=!s.value.includes("TL");const i=null!==(e=Ht.selectNumberOfString(s.value))&&void 0!==e?e:0;return this.isNoteEditTable(s)&&(0===s.totalTL&&0===s.totalTN||n&&i>s.totalTN||!n&&i>s.totalTL||!s.totalTL&&!s.totalTN)}getWarMsg(s){var e;let n=!s.value.includes("TL");const i=null!==(e=Ht.selectNumberOfString(s.value))&&void 0!==e?e:0;if(this.isNoteEditTable(s)){if(0===s.totalTL&&0===s.totalTN||!s.totalTL&&!s.totalTN)return"warning-item wn-empty";if(n&&i>s.totalTN)return"warning-item wn-over-tn";if(!n&&i>s.totalTL)return"warning-item wn-over-tl"}return""}isNoteEditTable(s){return s.indexName.includes("SOCH")&&s.indexName.indexOf("SOCH")>0}getNameCol(s){var e,n,i,a;let r=null!==(e=this.commonService.myTranslateInstant("lang_auto_nhan_biet"))&&void 0!==e?e:"",l=null!==(n=this.commonService.myTranslateInstant("lang_auto_thong_hieu"))&&void 0!==n?n:"",c=null!==(i=this.commonService.myTranslateInstant("lang_auto_van_dung"))&&void 0!==i?i:"",_=null!==(a=this.commonService.myTranslateInstant("lang_auto_van_dung_cao"))&&void 0!==a?a:"";return 0===s.indexOf("NB")?r:0===s.indexOf("TH")?l:0===s.indexOf("VDC")?c:0===s.indexOf("VD")?_:""}generateIdRequired(s){let e="";const n="abcdefghijklmnopqrstuvwxyz0123456789",i=n.length;for(let a=0;a<s;a++)e+=n.charAt(Math.floor(Math.random()*i));return Math.floor(Date.now()/1e3)+e}}var Te=T(92340),Fe=T(76056),rn=T(81896),_t=T(50690);let $n=(()=>{class o{constructor(e,n,i){this.baseApiService=e,this.gzipHelper=n,this.commonService=i,this.apiLink=Te.N.print_api+"/convert_img"}convertAction(e){return new Promise((n,i)=>{this.baseApiService.commonHttp(this.apiLink,{"Content-Type":"application/json"},e).subscribe(a=>{a&&a.success?n({id:e.id,base64:a.data}):i(new Error("No load image out"))})})}convertImageService(e){return new Promise((n,i)=>{const a=new ct.Q(10);e.forEach(r=>{a.addTask(this,this.convertAction,[r])}),a.start().then(r=>{0==r.errs.length?n(r.datas):i(new Error("L\u1ed7i convert"))})})}pushRankToMatrixBeauty(e,n,i){let a=e.ranks.find(r=>r.name===n);a?a.numQuest+=i:e.ranks.push({name:n,numQuest:i})}makeBeautyMatrixObj(e){var n,i;const a={id:e.id,name:null!==(n=e.name)&&void 0!==n?n:"",numberQuest:0,ranks:[],knowledge:[]};let r=this.gzipHelper.resultContentSupport(null!==(i=e.content)&&void 0!==i?i:"");const l=this.commonService.castJsonToObj(r);return l&&l.forEach(c=>{var _,d,p,h,f,w,k,S;const D=c.content.find(E=>"NB_SOCH"===E.indexName);D&&this.pushRankToMatrixBeauty(a,null!==(_=this.commonService.myTranslateInstant("azt_lang_tag_NB"))&&void 0!==_?_:"NB",null!==(d=Ht.selectNumberOfString(D.value))&&void 0!==d?d:0);const Q=c.content.find(E=>"TH_SOCH"===E.indexName);Q&&this.pushRankToMatrixBeauty(a,null!==(p=this.commonService.myTranslateInstant("azt_lang_tag_TH"))&&void 0!==p?p:"TH",null!==(h=Ht.selectNumberOfString(Q.value))&&void 0!==h?h:0);const N=c.content.find(E=>"VD_SOCH"===E.indexName);N&&this.pushRankToMatrixBeauty(a,null!==(f=this.commonService.myTranslateInstant("azt_lang_tag_VD"))&&void 0!==f?f:"VD",null!==(w=Ht.selectNumberOfString(N.value))&&void 0!==w?w:0);const q=c.content.find(E=>"VDC_SOCH"===E.indexName);q&&this.pushRankToMatrixBeauty(a,null!==(k=this.commonService.myTranslateInstant("azt_lang_tag_VDC"))&&void 0!==k?k:"VDC",null!==(S=Ht.selectNumberOfString(q.value))&&void 0!==S?S:0);const W=c.content.find(E=>"SOCH_TN"===E.indexName),X=c.content.find(E=>"SOCH_TL"===E.indexName);W&&X&&(isNaN(Number(W.value))||(a.numberQuest+=Number(W.value)),isNaN(Number(X.value))||(a.numberQuest+=Number(X.value))),c.obj.item.endsWith(")")&&(c.obj.item=c.obj.item.substring(0,c.obj.item.lastIndexOf("("))),a.knowledge.push(c.obj.item)}),a}getBeautyMatrixObjs(e){let n=[];return e.forEach(i=>{n.push(this.makeBeautyMatrixObj(i))}),n}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Fe._),t.LFG(rn.n),t.LFG(_t.v))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var mn=T(45511),xt=T(85794),ki=T(28555),Le=T(34782);let pn=(()=>{class o{constructor(e,n){this.browserStorageService=e,this.commonService=n,this.data={}}setMode(e){this.browserStorageService.saveSimpleStorage("__editor:mode_open",e)}getMode(){var e=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),e}setFileProcess(e){this.file=e}getFirstFile(){let e=this.file;return this.file=void 0,e}setOutputData(e){this.data=e}getOutputData(){return this.data}redirectToConfig(e){this.data.homework&&e.showHomework(),(this.data.exam||this.data.examOffline)&&e.showExam()}setMatrixData(e,n){n?this.matrix=e:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(e))}getMatrixData(){var e=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),e?this.commonService.castJsonToObj(e):this.matrix}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Le.z),t.LFG(_t.v))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var hn=T(88386);let Oi=(()=>{class o{constructor(e,n){this.commonService=e,this.apiUploadService=n,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new ct.Q(50,{function:(i,a)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(i,a)}}),this.taskUploadImage=new ct.Q(3,{function:(i,a)=>{this.callbackUploadImage&&this.callbackUploadImage(i,a)}})}convertQuestions(e,n,i){return new Promise(a=>{this.reset(),e.forEach(r=>{var l,c,_,d;const p=this.commonService.willDeleteParseJson(r.answerConfig||"[]");!(null===(l=r.questionContent)||void 0===l)&&l.includes("<img ")&&this.replaceImageCdnInContent(r,"questionContent"),!(null===(c=r.questionText)||void 0===c)&&c.includes("<img ")&&this.replaceImageCdnInContent(r,"questionText"),!(null===(_=r.answerMedia)||void 0===_)&&_.includes("<img ")&&this.replaceImageCdnInContent(r,"answerMedia"),!(null===(d=r.mediaMeta)||void 0===d)&&d.includes("<img ")&&this.replaceImageCdnInContent(r,"mediaMeta"),p.forEach(h=>{h.content.includes("<img ")&&this.replaceImageCdnInContent(h,"content")}),this.actionRunAfterConvert.push(()=>{r.answerConfig=JSON.stringify(p)})}),this.imageMaps.forEach(r=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[r])}),this.taskConvertBase64ToCanvas.start().then(r=>{if(r.errs.length>0)i(r.errs,void 0);else{let c=0;const _=[],d=()=>{const p=document.createElement("canvas");p.width=this.sizeDefaultCanvas,p.height=this.sizeDefaultCanvas;const h=p.getContext("2d");h&&(h.fillStyle="white",h.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),_.push({cdn:"",cX:0,cY:0,canvas:p,imgs:[]})};d(),r.datas.forEach((p,h)=>{var f=_[_.length-1];f.cX+p.canvas.width+4>this.sizeDefaultCanvas?(f.cX=4,f.cY+=c+4,c=0):f.cX+=4,f.cY+p.canvas.height>this.sizeDefaultCanvas&&(d(),f=_[_.length-1]);var w=f.canvas.getContext("2d");f.imgs.push({x:f.cX,y:f.cY,width:p.canvas.width,height:p.canvas.height,index:h}),w?.drawImage(p.canvas,0,0,p.canvas.width,p.canvas.height,f.cX,f.cY,p.canvas.width,p.canvas.height),f.cX+=p.canvas.width,c=c<p.canvas.height?p.canvas.height:c}),_[0].imgs.length>0&&_.forEach(p=>{this.taskUploadImage.addTask(this,this.startUploadFile,[p])}),this.taskUploadImage.start().then(p=>{if(p.errs.length>0)i(r.errs,void 0);else{let h=!0;p.datas.forEach(f=>{f.imgs.forEach(w=>{const k=r.datas[w.index];if(k){const S={link:f.cdn,data:{x:w.x,y:w.y,width:w.width,height:w.height}};k.objs.forEach(D=>{if(D[k.path])if(this.commonService.isJson(D[k.path])){const N=this.commonService.willDeleteParseJson(D[k.path]);Object.prototype.hasOwnProperty.call(N,"renderedStr")?(N.renderedStr=N.renderedStr.replace(k.base,`@[]${JSON.stringify(S)}@[]`),D[k.path]=JSON.stringify(N)):D[k.path]=D[k.path].replace(k.base,`@[]${JSON.stringify(S)}@[]`)}else D[k.path]=D[k.path].replace(k.base,`@[]${JSON.stringify(S)}@[]`);else h=!1})}})}),h?(this.actionRunAfterConvert.forEach(f=>{f()}),e.forEach((f,w)=>{let k=this.commonService.willDeleteParseJson(f.mediaMeta||"{}"),S=n[w];const D={id:0,name:f.name,extension:"text",content:f.questionContent,groupContent:k.renderedStr,metaData:{isFixAns:Number(f.isFixAns),forcedFixAns:!1,groupType:f.groupType?Number(f.groupType):void 0}};S&&(D.vMetaEditor=S.meta),f.questionContent=JSON.stringify([D])}),a()):i(r.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(e,n){var i=e[n];if(this.commonService.isJson(e[n])){const l=this.commonService.willDeleteParseJson(e[n]);Object.prototype.hasOwnProperty.call(l,"renderedStr")&&(i=l.renderedStr)}let a=i.matchAll(this.pattern_image);for(;;){let l=a.next();if(l.done)break;let c=l.value[0];var r=this.imageMaps.findIndex(_=>_.base===c&&_.path===n);-1===r?this.imageMaps.push({base:c,cdn:"",data:null,objs:[e],path:n,canvas:document.createElement("canvas")}):this.imageMaps[r].objs.push(e)}}startConvertCanvas(e){return new Promise((n,i)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let l=1;a.width>this.sizeDefaultCanvas&&(l=a.width/this.sizeDefaultCanvas),e.canvas.width=a.width*l,e.canvas.height=a.height*l,e.canvas.getContext("2d")?.drawImage(a,0,0,a.width,a.height,0,0,e.canvas.width,e.canvas.height),n(e)},a.onerror=()=>{i(new Error("l\u1ed7i load \u1ea3nh"))};let r=this.pattern_base64.exec(e.base);null!=r?a.src=r[0]:i(new Error("l\u1ed7i regex"))})}startUploadFile(e){return new Promise((n,i)=>{const a=this.dataURLtoFile(e.canvas.toDataURL("image/png",1));(0,lt.hv)(a).then(r=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(r).subscribe(l=>{l.type!=H.dt.UploadProgress&&(1==l.success&&l.data?n(Object.assign(Object.assign({},e),{cdn:l.data.url||""})):i(new Error("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi[SPLIT_LANG] [SPLIT_LANG]"+l.message)))})})})}dataURLtoFile(e){let n=this.getFileName(e);for(var i=e.split(","),a=i[0].match(/:(.*?);/),r=atob(i[1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);return new File([c],n,{type:a&&a.length>0?a[1]:"png"})}getFileName(e){var n=e.split("").reverse().join(""),i=n.indexOf(";"),a=n.indexOf("/",i);return n.substring(i,a).split("").reverse().join("")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_t.v),t.LFG(mn.$))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ca=["popupConfirm"],ka=["mobileEditor"],Oa=["popupOnlyImageEditor"];function ya(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",27)(2,"button",28),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw(4);return t.KtG(!!r.attachFiles&&r.attachFiles.splice(a,1))}),t.TgZ(3,"mat-icon",29),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"span",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.onShowFile(a,-1))}),t.TgZ(6,"span",31),t._uU(7),t.qZA()()()()}if(2&o){const e=s.$implicit;t.xp6(6),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function Aa(o,s){if(1&o&&(t.TgZ(0,"div",24)(1,"div",25),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,ya,8,2,"div",26),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_danh_sach_file_dinh_kem")+":"," "),t.xp6(2),t.Q6J("ngForOf",e.attachFiles)}}function Sa(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",32)(1,"question-dropper",33),t.NdJ("onDropFile",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.onDropFile(i))}),t.qZA()()}}function Za(o,s){if(1&o&&(t.TgZ(0,"div",18)(1,"div",19)(2,"div",20),t._UZ(3,"div",21),t.ALo(4,"safeContentQuestion"),t.ALo(5,"mathJaxContent"),t.YNc(6,Aa,5,4,"div",22),t.YNc(7,Sa,2,0,"div",23),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,3,t.lcZ(5,5,e.text)),t.oJD),t.xp6(3),t.Q6J("ngIf",e.attachFiles.length>0),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function Ea(o,s){if(1&o&&(t.TgZ(0,"mat-icon",44),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t._uU(3," push_pin"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.s9C("matTooltip",e.isFixGroup?t.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):t.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function Ia(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",45)(1,"span",46),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.setFixGroup(i))}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"tieu_de_nhom")),t.xp6(3),t.AsE(" ",e.isFixGroup?t.lcZ(6,5,"lang_auto_bo_co_dinh"):t.lcZ(7,7,"lang_auto_co_dinh")," ",t.lcZ(8,9,"lang_auto_cau_trong_nhom"),"")}}function Ma(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",48)(1,"app-quest-header",49),t.NdJ("onChangeQuest",function(i){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.onChangeQuest(i,a))})("onApplyAllTag",function(i){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.onApplyAllTag(i,a))})("onError",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.commonService.snackError(i))})("onLabelClick",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.editorFocus(i))})("onHotKeyPointSync",function(i){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.setPointBelow(i,a))})("onExtraInfo",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.setExtra(i))})("onCut",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.onCut(i))})("onDel",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.onDel(i))})("onCopy",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.onCopy(i))}),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("q",e)("notOnlyQuestEdit",!n.editQuestId)("questionTags",n.questionTags)}}function Pa(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function La(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,Pa,2,1,"span",53),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function ja(o,s){if(1&o&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,La,2,1,"span",26),t.qZA()),2&o){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an_dung")+":"),t.xp6(2),t.Q6J("ngForOf",e.quest.answers)}}function Na(o,s){if(1&o&&(t.TgZ(0,"span",59),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function qa(o,s){if(1&o&&(t.TgZ(0,"div",56)(1,"span",57),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Na,2,1,"span",58),t.qZA()),2&o){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an")+":"),t.xp6(2),t.Q6J("ngForOf",e.strAns)}}function Qa(o,s){1&o&&(t.TgZ(0,"span",64),t._UZ(1,"div",65)(2,"div",66),t.qZA())}const lo=function(o){return{"an-true":o}};function Da(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",60),t.YNc(1,Qa,3,0,"span",61),t.TgZ(2,"div",62),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4).$implicit,l=t.oxw(2);return t.KtG(l.setCorrectAns(r,a.ans))}),t.ALo(3,"mytranslate"),t._uU(4),t.qZA(),t.TgZ(5,"div",63),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(6);return t.KtG(r.editorFocus(a.ans.parts))}),t.ALo(6,"safeContentQuestion"),t.ALo(7,"mathJaxContent"),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw(6);t.xp6(1),t.Q6J("ngIf",e.ans.isCorrect),t.xp6(1),t.s9C("matTooltip",n.showTooltip?t.lcZ(3,7,"lang_auto_cick_de_chon_lam_dap_an_dung"):void 0),t.Q6J("matTooltipPosition","right")("ngClass",t.VKq(13,lo,e.ans.isCorrect)),t.xp6(2),t.hij(" ",e.ans.label,""),t.xp6(1),t.Q6J("innerHTML",t.lcZ(6,9,t.lcZ(7,11,e.renderedStr)),t.oJD)("ngClass",t.VKq(15,lo,e.ans.isCorrect))}}function Ua(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,ja,5,4,"div",53),t.YNc(2,qa,5,4,"div",54),t.YNc(3,Da,8,17,"div",55),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.Gre("box-ans quest-ans-ver-",e.v,""),t.xp6(1),t.Q6J("ngIf","pdf-1-0"==e.v),t.xp6(1),t.Q6J("ngIf",4==e.type&&e.strAns),t.xp6(1),t.Q6J("ngForOf",e.answers)}}const Fa=function(o){return{"padding-mobile":o}};function Ra(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",67)(1,"div",68)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).$implicit,a=t.oxw(2);return t.KtG(a.editorFocus(i.quest.help))}),t.ALo(6,"safeContentQuestion"),t.ALo(7,"mathJaxContent"),t.qZA()()}if(2&o){const e=t.oxw(3).$implicit,n=t.oxw(2);t.Gre("box-help quest-help-ver-",e.v,""),t.Q6J("ngClass",t.VKq(12,Fa,n.isMobile)),t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),t.xp6(2),t.Q6J("innerHTML",t.lcZ(6,8,t.lcZ(7,10,e.helpRenderedStr)),t.oJD)}}function za(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",50)(1,"div",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.editorFocus(i.quest.parts))}),t.ALo(2,"safeContentQuestion"),t.ALo(3,"mathJaxContent"),t.qZA(),t.YNc(4,Ua,4,6,"div",17),t.YNc(5,Ra,8,14,"div",52),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Gre("tex2jax_process box-content quest-ver-",e.v,""),t.Q6J("innerHTML",t.lcZ(2,6,t.lcZ(3,8,e.renderedStr)),t.oJD),t.xp6(3),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",e.helpRenderedStr)}}function Ja(o,s){if(1&o&&(t._UZ(0,"div",70),t.ALo(1,"safeContentQuestion")),2&o){const e=t.oxw(2).$implicit;t.Q6J("innerHTML",t.lcZ(1,1,e.err),t.oJD)}}function Ba(o,s){if(1&o&&t._UZ(0,"exam-matrix-feedback-dialog",71),2&o){const e=t.oxw(2).$implicit;t.Q6J("questionId",e.id)("role","TEACHER")("applyType","MATRIX_QUESTION")}}function Ha(o,s){if(1&o&&(t.TgZ(0,"div",19),t.YNc(1,Ea,4,5,"mat-icon",37),t._UZ(2,"div",38),t.ALo(3,"safeContentQuestion"),t.YNc(4,Ia,9,11,"div",39),t.YNc(5,Ma,2,3,"div",40),t.TgZ(6,"div",20)(7,"div"),t.YNc(8,za,6,10,"div",41),t.YNc(9,Ja,2,3,"div",42),t.qZA()(),t.YNc(10,Ba,1,3,"exam-matrix-feedback-dialog",43),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isFixGroup||e.quest.isFixAns),t.xp6(1),t.Q6J("innerHTML",t.lcZ(3,7,n.errorQuestionView.makeErr(e,n.lstQuest)),t.oJD),t.xp6(2),t.Q6J("ngIf",e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(3),t.Q6J("ngIf",!e.err),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(1),t.Q6J("ngIf",e.id&&"azota"==n.type)}}function Ya(o,s){1&o&&t._UZ(0,"div",72)}const Ga=function(o){return{height:o}};function $a(o,s){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,Ha,11,9,"div",35),t.YNc(2,Ya,1,0,"div",36),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2);t.hYB("id","quest",e.quest.isGroup?"-g":"","-",e.quest.label,""),t.Q6J("ngStyle",t.VKq(6,Ga,i.lstQuest.length<i.maxQuestEnableLazy?"auto":e.lazyQuestView&&e.lazyQuestView.curHeight?e.lazyQuestView.curHeight:"200px")),t.uIk("data-idx-quest",n),t.xp6(1),t.Q6J("ngIf",i.lstQuest.length<i.maxQuestEnableLazy||(null==e.lazyQuestView?null:e.lazyQuestView.show)),t.xp6(1),t.Q6J("ngIf",!(i.lstQuest.length<i.maxQuestEnableLazy||null!=e.lazyQuestView&&e.lazyQuestView.show))}}function Ka(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",82),t.NdJ("click",function(){t.CHM(e),t.oxw(3);const i=t.MAs(6);return t.KtG(i.click())}),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",84)(3,"polyline",85)(4,"line",86),t.qZA(),t.kcU(),t.TgZ(5,"span",87),t._uU(6,"Upload File"),t.qZA()()}}function Wa(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",88),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openLibrary())}),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"line",89)(3,"line",90),t.qZA(),t.kcU(),t.TgZ(4,"span",87),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_chon_tu_ngan_hang")," "))}function Va(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",91),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openMathEditor())}),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",92),t.qZA(),t.kcU(),t.TgZ(3,"span",87),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_chen_cong_thuc")," "))}function Xa(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",93),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.saveLocal())}),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",84)(3,"polyline",94)(4,"line",95),t.qZA(),t.kcU(),t.TgZ(5,"span",87),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_luu_ve_may")," "))}function ts(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",111),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.format())}),t.O4$(),t.TgZ(2,"svg",106),t._UZ(3,"rect",112)(4,"rect",113)(5,"path",114),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_format")," "))}function es(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",96)(1,"button",97),t.O4$(),t.TgZ(2,"svg",98),t._UZ(3,"circle",99)(4,"circle",100)(5,"circle",101),t.qZA()(),t.kcU(),t.TgZ(6,"mat-menu",null,102)(8,"div",103)(9,"ul",104)(10,"li")(11,"a",105),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.randomAllAgain())}),t.O4$(),t.TgZ(12,"svg",106),t._UZ(13,"path",107)(14,"path",108)(15,"path",109)(16,"path",110),t.qZA(),t.kcU(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()(),t.YNc(20,ts,9,3,"li",53),t.qZA()()()()}if(2&o){const e=t.MAs(7),n=t.oxw(3);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(17),t.hij(" ",t.lcZ(19,3,"lang_auto_lay_ngau_nhien_lai_toan_bo")," "),t.xp6(2),t.Q6J("ngIf","user"==n.type)}}function ns(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",115)(1,"div",116),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",117),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loadExample(1,i.commonService.getCurrentLang()))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t._uU(7," | "),t.TgZ(8,"a",118),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loadExample(2,i.commonService.getCurrentLang()))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t._uU(11," | "),t.TgZ(12,"a",119),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loadExample(3,i.commonService.getCurrentLang()))}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t._uU(15," | "),t.TgZ(16,"a",120),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.loadExample(4,i.commonService.getCurrentLang()))}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()}2&o&&(t.xp6(2),t.hij("",t.lcZ(3,5,"lang_auto_noi_dung_mau")+": "," "),t.xp6(3),t.Oqu(t.lcZ(6,7,"lang_auto_mau")+" 1"),t.xp6(4),t.Oqu(t.lcZ(10,9,"lang_auto_mau")+" 2"),t.xp6(4),t.Oqu(t.lcZ(14,11,"lang_auto_mau")+" 3"),t.xp6(4),t.Oqu(t.lcZ(18,13,"lang_auto_mau")+" 4"))}const is=function(o){return{height:o}};function os(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",73)(2,"div",74),t.YNc(3,Ka,7,0,"div",75),t.YNc(4,Wa,7,3,"div",76),t.YNc(5,Va,6,3,"div",77),t.YNc(6,Xa,8,3,"div",78),t.YNc(7,es,21,5,"div",79),t.qZA()(),t.TgZ(8,"azt-monaco-editor",80),t.NdJ("onStartProcessFile",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.processFile(i))})("onInit",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onEditorInitComplete(i))}),t.qZA(),t.YNc(9,ns,19,15,"div",81),t.qZA()}if(2&o){const e=t.oxw(2);t.Gre("col-editor tex2jax_ignore ",e.isMobile?"azt-order-1":"",""),t.xp6(3),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type),t.xp6(1),t.Q6J("ngIf","user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Akn(t.VKq(14,is,e.conf.heightContent+"px")),t.Q6J("config",e.aztLangConfig)("readOnly","azota"==e.type)("editorApiService",e.editorApiService),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function as(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t.NdJ("scroll",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onScrollQuest())}),t.YNc(2,Za,8,7,"div",14),t.YNc(3,$a,3,8,"div",15),t._UZ(4,"div",16),t.qZA(),t.YNc(5,os,10,16,"div",17),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Gre("col-questions box bg-slate-100 dark:bg-darkmode-400 rounded-none ",e.isMobile?"azt-order-2":"",""),t.xp6(1),t.Q6J("ngIf",""!=e.text||e.attachFiles.length>0),t.xp6(1),t.Q6J("ngForOf",e.lstQuest),t.xp6(2),t.Q6J("ngIf",""!=e.aztLangConfig)}}function ss(o,s){if(1&o&&(t.TgZ(0,"div",121)(1,"div",122)(2,"div",123)(3,"span"),t._UZ(4,"span",124),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",125),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,1,e.conf.logConfig.msg))}}function rs(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",126)(1,"app-test-finder",127),t.NdJ("closeTestFinder",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.closeLibrary(i))}),t.qZA()()}if(2&o){const e=t.oxw();let n;t.xp6(1),t.Q6J("isFirstTime",null!==(n=e.conf.isFirstTime)&&void 0!==n&&n)}}function ls(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mathtype-editor",128),t.NdJ("onClose",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.conf.mathEditor.show=!1)})("onInsertLatex",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onInsertLatex(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("inp",e.conf.mathEditor.latex)}}function cs(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"only-image-editor",129),t.NdJ("onClose",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.conf.imageEditor.show=!1)})("onPushImage",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onPushImageAction(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("el_target",e.conf.imageEditor.el)}}function _s(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",130)(1,"main-config-homework",131),t.NdJ("onBack",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.conf.showEditor())}),t.qZA()()}}function ds(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",132)(1,"app-info-general",131),t.NdJ("onBack",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.conf.showEditor())}),t.qZA()()}}const us=function(o){return{hidden:o}};class ms{constructor(s){this.commonService=s,this.check=!1}makeErr(s,e,n){const i=this.isFullNoPoint(e);if(!this.check)return;if(!s.quest.isGroup&&(!s.point||s.point<=0)&&!i){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_diem_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return n?r:`<span class="quest-err">${r} ${l}</span>`}let a=s.answers.filter(r=>r.ans.isCorrect).length>0;if(1==s.type&&!a){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return n?r:`<span class="quest-err">${r} ${l}</span>`}}makeFirstErr(s){this.check=!0;for(const e of s)if(void 0!==this.makeErr(e,s,void 0))return e}isFullNoPoint(s){return s.filter(e=>!e.point).length===s.length}}let yi=(()=>{class o extends R.Q{handleFileDrop(e){""!==this.text?this.onDropFile(e[0]):this.processFile(e[0])}convertPartItem(e){var n,i;return 0===e.length?"":/^\[@((.)+)\]/g.test(null!==(n=e[0].text)&&void 0!==n?n:"")?e[0].lineIdx+"_____"+(null===(i=e[0].text)||void 0===i?void 0:i.split("]=>")[0])+"]":""}convertQuestion(e,n,i,a,r){return new Promise(l=>{var c,_,d,p;const h=[];i.answers.forEach(S=>{h.push({key:S.ans.label,content:S.renderedStr})});let f=i.answers.find(S=>!0===S.ans.isCorrect);const k={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(a+1),answerType:i.type,categoryId:0,questionContent:i.renderedStr,questionText:i.renderedStr,answerConfig:JSON.stringify(h),groupId:r,answerResult:f?JSON.stringify([f.ans.label]):i.strAns&&(null===(c=i.strAns)||void 0===c?void 0:c.length)>0?JSON.stringify(i.strAns):void 0,totalQuestion:this.lstQuest.length,version:"4",isFixAns:i.quest.isFixAns?1:0,isImage:1,answerMedia:i.helpRenderedStr,mediaMeta:JSON.stringify(e),groupType:e?.isFixGroup?"1":void 0,tags:i.tag&&i.tag.length?i.tag.map(S=>{var D;return null!==(D=S.code)&&void 0!==D?D:""}):[],__path:this.convertPartItem(i.quest.parts)};null===(d=null===(_=n.exam)||void 0===_?void 0:_.questionObj.listQuestions)||void 0===d||d.push(k),null===(p=n.exam)||void 0===p||p.rootQuests.push(i),i.audio&&(0,lt.F0)(i.audio.type)?i.attachments&&"[]"!==i.attachments?(k.attachments=i.attachments,l()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(i.audio).subscribe(S=>{S.type!=H.dt.UploadProgress&&(1==S.success?k.attachments=JSON.stringify([S.data]):this.showErrorSnack("lang_auto_upload_file_audio_that_bai"),l())}):l()})}uploadAttHomeworkFile(e,n,i){return new Promise(a=>{this.apiUploadService.uploadToCdnForHomework(i).subscribe(r=>{1==r.success&&r.data&&(n.push(r.data),n.length===this.attachFiles.length&&e.homework&&(e.homework.files=JSON.stringify(n)),a())})})}uploadFileProcess(e){return new Promise(n=>{this.saveFileProcess?this.apiUploadService.uploadToCdnProgressForTestbankDocx(this.saveFileProcess).subscribe(i=>{var a,r;i.type!=H.dt.UploadProgress&&(1==i.success&&e.exam&&(e.exam.examObj.cdnExamFile=null!==(r=null===(a=i.data)||void 0===a?void 0:a.url)&&void 0!==r?r:""),n())}):n()})}saveAction(){var e;if(this.errs.length>0){let n=this.commonService.myTranslateInstant("lang_auto_line"),i=this.errs.map(a=>a.split("|")).map(a=>`${n} ${a[0]}: ${a[1]}`).join(". ");this.commonService.snackError(i)}else{if(this.lstQuest.length>0){const n=this.errorQuestionView.makeFirstErr(this.lstQuest);if(null!=n)return this.commonService.snackError(this.errorQuestionView.makeErr(n,this.lstQuest,!0)||""),void this.revealQuest(n.quest.label+"")}this.loadingManager.size>0?null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_msg_confirm_watting_loading").then(n=>{n&&(this.stopAudio(),this.save())}):(this.stopAudio(),this.save())}}parseAzt(e){let n=this;var i=new FileReader;i.readAsText(e,"UTF-8"),i.onload=a=>{var r,l;let c=null!==(r=i.result)&&void 0!==r?r:"",_=JSON.parse(c);if(!_.text)return n.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0);n.images=_.imgs,n.mathMap=new Map;for(let d of _.maths)n.mathMap.set(d[0],d[1]);n.extraMap=new Map;for(let d of _.infos)n.extraMap.set(d[0],d[1]);null===(l=n.aztEditor)||void 0===l||l._editor.setValue(_.text),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},i.onerror=a=>{n.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}}saveCdn(e){return new Promise(n=>{var i;if(null!==(i=e.exam)&&void 0!==i&&i.examObj){let a=new Date,r=`user-${this.userService.getUserObj().id}-de-azota-${a.getDate()}${a.getMonth()+1}${a.getFullYear()}-${a.getTime()}.azt`;const l=this.generateFileAzt();if(l){const c=new File([l],r,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(c).subscribe(_=>{var d,p;_.type!=H.dt.UploadProgress&&(1==_.success&&_.data&&!(null===(d=e.exam)||void 0===d)&&d.examObj&&(e.exam.examObj.cdnEditorFile=null!==(p=_.data.url)&&void 0!==p?p:""),n())})}else n()}else n()})}saveLocal(){let e=new Date,n=`de-azota-${e.getDate()}${e.getMonth()+1}${e.getFullYear()}-${e.getTime()}.azt`;const i=this.generateFileAzt();if(i)if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,n);else{const a=window.document.createElement("a");a.href=window.URL.createObjectURL(i),a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)}}generateFileAzt(){var e,n;let i=null!==(n=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue().trim())&&void 0!==n?n:"";if(""!=i){let a=[],r=[];for(let _ of this.mathMap)a.push(_);for(let _ of this.extraMap)r.push(_);let c=JSON.stringify({text:i,imgs:this.images,maths:a,infos:r});return new Blob([c],{type:"text/plain"})}return null}makeExpandInfoObj(){var e,n;const a=this.lstQuest.map(r=>{var l;return null===(l=r.quest.olabel)||void 0===l?void 0:l.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")}).filter(r=>r&&r.length>0);return a.length>0?{label:(r=null!==(e=a[0])&&void 0!==e?e:null!==(n=this.commonService.myTranslateInstant("lang_auto_cau"))&&void 0!==n?n:"",r.charAt(0).toUpperCase()+r.slice(1))}:{};var r}save(){var e;if(this.lstQuest.length>0||""!==this.text){let n=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu");this.conf.logConfig.msg=n,this.conf.logConfig.status=!0;const i=new ct.Q(10,{function:(r,l)=>{this.conf.logConfig.msg=`${n} ${Math.floor(r/l*100)}%`}}),a={};if(this.lstQuest.length>0){this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_chuan_bi_du_lieu_de_thi";const l=null!==(e=(this.lstQuest[0].quest.isGroup?this.lstQuest[1]:this.lstQuest[0]).quest.label)&&void 0!==e?e:1;let c,_=[],d=!0;a.exam={examObj:{categoryId:Number(this.conf.cur_cateId),name:this.title.value,startQuestionIndex:l},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},i.addTask(this,this.uploadFileProcess,[a]);const p=this.errorQuestionView.isFullNoPoint(this.lstQuest);let f=dt(10,this.lstQuest.filter(w=>!w.quest.isGroup).length);this.lstQuest.forEach((w,k)=>{var S,D,Q;if(w.quest.isGroup)c=w,d=!1;else{d||(d=!0,_.push(k-(_.length+1)));const q={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(k-_.length+1),point:p?null!==(S=f[k-_.length])&&void 0!==S?S:1:null!==(D=w.point)&&void 0!==D?D:1};null===(Q=a.exam)||void 0===Q||Q.examConfig.push(q),i.addTask(this,this.convertQuestion,[c,a,w,k-_.length,_.length])}}),0==this.editQuestId&&i.addTask(this,this.saveCdn,[a]),a.exam.examObj.firstInGroupIndexes=JSON.stringify(_),a.exam.examObj.expandInfoObj=this.makeExpandInfoObj()}else if(a.homework={name:this.title.value,content:this.text,deadline:void 0,testbankExams:void 0,files:void 0,mustVerified:void 0,whenShowAnswer:void 0,categoryId:void 0,classroomIds:void 0},this.attachFiles.length>0){const r=[];this.attachFiles.forEach(l=>{i.addTask(this,this.uploadAttHomeworkFile,[a,r,l])})}i.start().then(()=>{var r;if(this.editQuestId){let l={exceptQuestionIds:[],matrix:[]};null===(r=l.matrix)||void 0===r||r.push({paths:[{type:"QUEST",id:this.editQuestId}],number:1,key:`[@${this.editQuestId}:Question]=>0`}),this.questionService.apiQuestionsMatrixPost(l).subscribe(c=>{var _,d,p;if(1==c.success&&c.data&&c.data.length>0&&c.data[0].questions&&1===c.data[0].questions.length){const h=c.data[0].questions[0];if(null!==(_=a.exam)&&void 0!==_&&_.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){let f=null!==(d=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de"))&&void 0!==d?d:"";this.questionSaveService.convertQuestions(a.exam.questionObj.listQuestions,a.exam.rootQuests,(w,k=f)=>{this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.showErrorSnack(k)}).then(()=>{var w,k,S,D;if(null!==(w=a.exam)&&void 0!==w&&w.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){const Q=a.exam.questionObj.listQuestions[0],N=this.commonService.myParseJson(null!==(k=Q.questionContent)&&void 0!==k?k:""),q=this.commonService.myParseJson(null!==(S=h.content)&&void 0!==S?S:"");if(!(N&&N[0]&&q&&q[0]))return this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,void this.showErrorSnack(null!==(D=c.message)&&void 0!==D?D:"");Object.prototype.hasOwnProperty.call(q[0],"groupContent")&&(N[0].groupContent=q[0].groupContent),Object.prototype.hasOwnProperty.call(q[0],"groupUrl")&&(N[0].groupContent=`@[]{"link":"${q[0].groupUrl}","data":${JSON.stringify({x:0,y:0,width:-1,height:-1})}}@[]`),Object.prototype.hasOwnProperty.call(q[0],"name")&&(N[0].name=q[0].name),Object.prototype.hasOwnProperty.call(q[0],"id")&&(N[0].id=q[0].id),Object.prototype.hasOwnProperty.call(h,"groupId")&&(Q.groupId=h.groupId),Object.prototype.hasOwnProperty.call(h,"groupType")&&(Q.groupType=h.groupType),Q.questionContent=JSON.stringify(N),delete Q.__path,this.questionService.apiQuestionsIdPut(this.editQuestId,Q).subscribe(W=>{var X;if(this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,1==W.success){this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong");let E=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(E)}else this.showErrorSnack(null!==(X=W.message)&&void 0!==X?X:"")})}})}}else this.showErrorSnack(null!==(p=c.message)&&void 0!==p?p:"")})}else this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.editorOutputDataService.setOutputData(a),this.editorOutputDataService.redirectToConfig(this.conf)})}else this.showErrorSnack("lang_auto_khong_tim_thay_noi_dung_can_luu")}lengthRealQuest(){return this.lstQuest.filter(e=>!e.quest.isGroup).length}cancelAction(){var e;null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_confirm_destroy_content").then(n=>{n&&location.reload()})}openLibrary(){this.conf.startLibrary=!0}switchFilePdfProcess(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigationWithQueryString("/admin/testbank/create-file-pdf-ver2/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}switchFileXlsxProcess(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigationWithQueryString("/admin/testbank/create-exam-by-excel/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}clearData(){this.images=[],this.editedImages=new Map,this.lstQuest=[],this.text="",this.attachFiles=[],this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.editorParsedData=void 0,this.curQuest=void 0,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.matrixLoadedData=void 0}processFile(e){if(this.editQuestId>0)return;this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_cho_xu_ly_file",this.title=new m.p4(e.name);let n=e.name.split(".").pop();return"docx"==n?.trim().toLowerCase()?(this.clearData(),void this.parseDocx(e)):"azt"==n?.trim().toLowerCase()?(this.clearData(),void this.parseAzt(e)):(0,lt.Or)(e.type)?(this.insertImgFromFile(e),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0)):void this.fileParser.start(e).then(i=>{"pdf"===i.type?this.switchFilePdfProcess(e):"docx"===i.type?(this.images=[],i.data.maps.forEach(a=>{this.images.push(a)}),this.aztEditor&&this.aztEditor._editor.setValue(i.data.str.join("\n"))):"xlsx"===i.type?this.switchFileXlsxProcess(e):(this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0)}).catch(()=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0})}attachImg(e){var n;let i=this.commonService.myTranslateInstant("lang_auto_nhap_noi_dung");null===(n=this.aztEditor)||void 0===n||n._editor.setValue(i),this.onDropFile(e),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}openFile(e){this.processFile(e.target.files[0]),e.target.value=null}parseDocx(e){new vt(this.editorCommonService,this.commonService).handleFileSelect(e,i=>{var a,r;this.saveFileProcess=e,this.images=[],this.mathMap.clear();let l=[];for(let h of i.data)if("img"==h.type)this.images.push({id:h.key,link:h.value,cssStyle:h.cssStyle}),h.cssStyle&&h.cssStyle.split(";").length>2&&l.push([`^\\[img:\\$${h.key}\\$\\]`,`[img:$${h.key}$]\n`]);else if("mathml"==h.type){let f=+h.key.split("_")[1];this.mathMap.set(h.key,{id:f,str:h.value,raw:h.docx,lineIdx:0,startCol:0,endCol:0}),f>this.curMathId&&(this.curMathId=f)}this.curMathId++;let c=[];for(let h of i.lines){if(0==h.length)continue;let f="";f=Array.isArray(h[0])&&Array.isArray(h[h.length-1])&&Array.isArray(h[Math.floor(h.length/2)])?"[* "+h.map(k=>k.map(S=>S.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":h.join("");for(let k of l)f=f.replaceAll(new RegExp(k[0],"g"),k[1]);let w=f.split("\n");for(let k of w)c.push(k)}(new ut).process(c);let d=this.processStyle(c);this.processMath(d),this.lstQuest=[],this.curQuest=void 0,null===(a=this.aztEditor)||void 0===a||a.setPosition(1,0);let p=d.join("\n");null===(r=this.aztEditor)||void 0===r||r._editor.setValue(p),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},(i,a,r)=>{let l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly");this.conf.logConfig.msg=`${l} ${r}...(${i}/${a})`})}format(){var e,n,i,a,r,l,c,_;let p=(null!==(n=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue())&&void 0!==n?n:"").split("\n"),h=p.length,f=p.length>0?p[p.length-1].length:0,w=null===(a=null===(i=this.aztEditor)||void 0===i?void 0:i.azotaIntel)||void 0===a?void 0:a.examIntel;w?.setLines(p);let k=null!==(r=w?.parse())&&void 0!==r?r:[],S=[],D=[],Q=[],N=-999;for(let q of k){if(q.isGroup){let K=q.parts.map(B=>{var et;return null!==(et=B.text)&&void 0!==et?et:""}).join("\n");S.push(K);continue}-999==N&&(N=q.label-1),q.label-N>1&&(q.olabel=null===(l=q.olabel)||void 0===l?void 0:l.replace(q.label+"",N+1+""),q.label=N+1);let W=G.Utils.capitalizeFirstLetter(null!==(c=q.olabel)&&void 0!==c?c:q.label+"")+" ",X=W+q.parts.map(K=>{var B;return null!==(B=K.text)&&void 0!==B?B:""}).join("\n"),E=0==q.answers.length||q.answers[0].isInline?void 0:q.answers.map(K=>(K.isCorrect?"   *":"    ")+K.label+". "+K.parts.map(B=>{var et;return null!==(et=B.text)&&void 0!==et?et:""}).join("\n").trim()).join("\n"),J=q.help?W+q.help.map(K=>{var B;return null!==(B=K.text)&&void 0!==B?B:""}).join("\n"):void 0,z=q.strAns?W+q.strAns:void 0;S.push(X),E&&S.push(E),J&&D.push(J),z&&Q.push(z),N++}if(S.length>0){(Q.length>0||D.length>0)&&S.push("----------------------"+this.commonService.myTranslateInstant("azt_lang_sugg_the_end")+"----------------------"),Q.length>0&&(S.push(this.commonService.myTranslateInstant("azt_lang_sugg_ans_table")),S.push(...Q)),D.length>0&&(S.push(this.commonService.myTranslateInstant("azt_lang_sugg_instruction")),S.push(...D));let q=S.join("\n");null===(_=this.aztEditor)||void 0===_||_._editor.executeEdits("",[{range:{startLineNumber:0,endLineNumber:h+100,startColumn:0,endColumn:f+100},text:q}])}}processMath(e){let n=0;for(let i of e){let a=i.matchAll(this.MATH_PAT);for(;;){let r=a.next();if(r.done)break;let l=r.value[0],_=this.mathMap.get(r.value[1]);_&&(_.lineIdx=n+1,_.startCol=r.value.index+1,_.endCol=_.startCol+l.length)}n++}}processStyle(e){var n,i,a,r;let l=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,c=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,_=[],d=0;for(let Q of e){c.test(e[d].replaceAll(l,"$1"))&&(e[d]=e[d].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),Q=e[d]);let W,N=Q.matchAll(l),q=0;for(;;){let X=N.next();if(X.done)break;let E=X.value[0],J=E.indexOf(":"),z=E.substring(1,J),B=X.value.index-q,et=B+X.value[1].length;W&&B==W.e&&W.style==z?W.e=et:(W={lineIdx:d,s:B,e:et,style:z},_.push(W)),q+=J+4}e[d]=Q.replaceAll(l,"$1"),d++}let p=null===(i=null===(n=this.aztEditor)||void 0===n?void 0:n.azotaIntel)||void 0===i?void 0:i.examIntel;p?.setLines(e);let h=null!==(a=p?.parse())&&void 0!==a?a:[],f=[],w=new Map,k=0;for(let Q of h){k++;for(let N of Q.parts)f.push(N);for(let N of Q.answers){let q=this.hasStyleAns(e,N.parts[0],_);""!=q&&w.set(`${Q.label}-${Q.group}-${N.label}-${k}`,q);for(let W of N.parts)f.push(W)}}for(let Q of h)if(Q.help)for(let N of Q.help)f.push(N);this.applyStyle(e,f,_),p?.setLines(e),h=null!==(r=p?.parse())&&void 0!==r?r:[];let S=[];k=0;for(let Q of h){k++;let N=new Map;if(!(Q.answers.filter(q=>q.isCorrect).length>0)){for(let q of Q.answers){let W=w.get(`${Q.label}-${Q.group}-${q.label}-${k}`);W&&""!=W&&N.set(W,N.has(W)?void 0:q.parts[0])}for(let q of N)if(q[1]){S.push(q[1]);break}}}for(let Q=S.length-1;Q>=0;Q--){let N=S[Q];e[N.lineIdx]=e[N.lineIdx].substring(0,N.b)+"*"+e[N.lineIdx].substring(N.b)}return e=this.processUnderlineAns(e),h.length>0?e.slice(h[0].parts[0].lineIdx):e}processUnderlineAns(e){let n=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,i=0,a=[];for(let r of e){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&i>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),_=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let d=e[i-1].match(n);if(d&&l.length==d.length){for(let h of d)e[i-1]=e[i-1].replace(h,h.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==_?"*":""}${l.substring(0,1)}:`).replace("$]","]")),a[a.length-1]=e[i-1],l=l.substring(1),_++;i++;continue}}}a.push(r),i++}return a}hasStyleAns(e,n,i){if(!n)return"";let a=i.filter(r=>r.lineIdx==n.lineIdx&&r.s<=n.b&&r.e>=n.b);for(let r of a)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(e,n,i){var a;for(let r=n.length-1;r>=0;r--){let l=n[r],c=i.filter(_=>_.lineIdx==l.lineIdx&&_.e>=l.s);for(let _=c.length-1;_>=0;_--){let d=c[_].s>=l.s?c[_].s:l.s,p=c[_].e<=(null!==(a=l.e)&&void 0!==a?a:9999999)?c[_].e:l.e,h=c[_].style.replaceAll("!hl","");if(d<p&&""!=h){let f=e[l.lineIdx],w=f.substring(d,p);""!=w.trim()&&(e[l.lineIdx]=f.substring(0,d)+"["+h+":$"+w+"$]"+f.substring(p))}}}}setCorrectAns(e,n){var i,a;let r=[],l=0,c=0;this.editorFocus(n.parts);for(let _ of e.answers){let d=_.ans.parts[0];if(!d)continue;let p=null===(i=this.aztEditor)||void 0===i?void 0:i.getLineText(d.lineIdx+1);d.lineIdx!=c&&(l=0,c=d.lineIdx);let h=p.substring(d.b,d.b+1);"*"==h&&(r.push(`${d.lineIdx}|${d.b+l}|${d.b+l+1}|`),l--),_.ans.label==n.label&&"*"!=h&&(r.push(`${d.lineIdx}|${d.b+l}|${d.b+l}|*`),l++)}null===(a=this.aztEditor)||void 0===a||a.runEditAction(r,this.aztEditor._editor,!0),this.showTooltip=!1}closeLibrary(e){this.conf.startLibrary=!1,this.conf.isFirstTime||(this.conf.isFirstTime=!0),e&&this.aztEditor&&this.aztEditor.insertLine(e.join("\n"))}parseTag(e){let i=e.trim(),r=i.matchAll(/^(\[!info:\d+\]\s*)?(\[[iubhl!]+:\$\s*)?[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g).next();return r.done?["",i]:(i=i.replace(/[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g," "),[r.value[3],i])}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:e};let a=e.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let _=a.next();if(_.done)break;r=_.value[0],l=_.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}setExtra(e,n=!0){var i,a,r,l,c;let _=e.q.quest.parts[0],d=this.parseExtra(null!==(i=_.text)&&void 0!==i?i:"");"0"==d.id&&(d.id=this.curExtraId+"",this.curExtraId++);let p=this.extraMap.get(d.id);if(p||(p={d:e.q.point,audio:e.q.audio,file:void 0,fix:e.q.quest.isFixAns,tag:e.q.tag},this.extraMap.set(d.id,p)),"point"==e.type&&(p.d=e.data&&e.data>0?e.data:void 0),"audio"==e.type&&(p.audio=e.q.audio?e.q.audio:void 0,p.file=void 0),"fix"==e.type&&(p.fix=e.data?"fix":void 0),"tag"==e.type&&(p.tag=e.data),+d.id>0){let f=_.s+d.idx,w=_.s+d.idx+d.val.length;e.q.quest.isGroup&&""==d.val&&(f=_.s+(null!==(r=null===(a=_.text)||void 0===a?void 0:a.length)&&void 0!==r?r:0)+10,w=f),null===(l=this.aztEditor)||void 0===l||l.runEditAction([`${_.lineIdx}|${f}|${w}|[!info:${d.id}]`],this.aztEditor._editor,n)}n&&(null===(c=this.aztEditor)||void 0===c||c.setPosition(_.lineIdx+1,0))}setFixGroup(e){e.isFixGroup=!e.isFixGroup,this.setExtra({q:e,type:"fix",data:e.isFixGroup})}randomAllAgain(){var e,n;this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),this.renderCache.clear(),this.lastMatrixHash="";let i=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue().split("\n"),a=null!==(n=this.editorParsedData)&&void 0!==n?n:[];this.onEditorChangeValue(i,a)}reRender(){this.editorParsedData&&(this.lstQuest=this.editorParsedData.map((e,n)=>this.renderQuest(e,n)),this.text="")}onApplyAllTag(e,n){this.lstQuest.forEach((i,a)=>{a<=n||i.quest.isGroup||(i.tag=e,this.setExtra({type:"tag",data:e,q:this.lstQuest[a]},a==this.lstQuest.length-1))})}showHover(e,n,i){if(this.lstQuest)for(let a of this.lstQuest){let r=i;if(a.quest.parts[0].lineIdx==e-1&&/\[!info:\d+\]/.test(i)){let l=r.indexOf("[")+1,c=r.indexOf("]")+1;if(l<=n&&n<=c){let _=[],d=this.commonService.myTranslateInstant("lang_auto_diem"),p=this.commonService.myTranslateInstant("lang_auto_audio_file"),h=this.commonService.myTranslateInstant("lang_auto_file_dinh_kem"),f=this.commonService.myTranslateInstant("lang_auto_nhan"),w=this.commonService.myTranslateInstant("lang_auto_co_dinh");return a.point&&_.push(`${a.point} ${d}`),a.audio&&_.push(p+": "+a.audio.name),a.attachments&&_.push(h+": "+a.attachments),a.tag&&a.tag.length>0&&_.push(f+": "+a.tag.map(k=>k[this.commonService.getCurrentLang()+"Name"]).join(",")),(a.isFixGroup||a.quest.isFixAns)&&_.push(w),{lineIdx:e,s:l,e:c,text:_.join(", ")}}}}}onEditorChangeValue(e,n){clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.onEditorChangeValueExec(e,n)},400)}onEditorChangeValueExec(e,n){var i;if(n&&n.length>0){this.errs=[],null===(i=this.aztEditor)||void 0===i||i.setError([]),this.editorParsedData=n;let a=this.lstQuest.map((r,l)=>r.lazyQuestView&&r.lazyQuestView.show?{i:l,v:r.lazyQuestView}:{i:-1,v:void 0}).filter(r=>r.i>=0);this.lstQuest=[],this.loadMatrixQuest(this.editorParsedData).then(r=>{var l;this.matrixLoadedData=r,this.lstQuest=n.map((_,d)=>this.renderQuest(_,d));for(let _ of a){if(_.i>=this.lstQuest.length)break;this.lstQuest[_.i].lazyQuestView=_.v}n.forEach((_,d)=>{var p;let h=null===(p=_.answers.find(f=>f.isCorrect))||void 0===p?void 0:p.label;h||(h=this.lstQuest[d].originCorrectAns),h||(h="");for(let f of this.lstQuest[d].answers)f.ans.isCorrect=f.ans.label==h}),this.text="",setTimeout(()=>{this.revealCurrentQuest()},200),this.validate();let c=null===(l=this.aztEditor)||void 0===l?void 0:l._editor.getValue().split("\n");this.processMath(c)})}else this.lstQuest=[],this.text=this.renderText(e.join("<br>"))}loadMatrixQuest(e){return new Promise((n,i)=>{var a,r,l,c,_,d;let p={exceptQuestionIds:[],matrix:[]},h=new Map;for(let w of e)if(null!==(a=w.parts[0].text)&&void 0!==a&&a.startsWith("[@")){let k=w.parts[0].text.split("=>"),S=k[0]+"=>"+k[1].split("-")[0];if(h.has(S))continue;h.set(S,!0);let D=G.Utils.parseInclude(w.parts[0].text);null===(r=p.matrix)||void 0===r||r.push({number:D.getNum,key:S,paths:D.paths.map(Q=>({type:Q.type,id:Q.id,groupIds:Q.groupIds,tags:Q.tags,answerTypes:Q.answerTypes}))})}let f=null!==(c=null===(l=p.matrix)||void 0===l?void 0:l.map(w=>w.key).join(":"))&&void 0!==c?c:"";f!=this.lastMatrixHash?(this.lastMatrixHash=f,this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),(null!==(d=null===(_=p.matrix)||void 0===_?void 0:_.filter(S=>{var D,Q;return null!==(Q=null===(D=S.paths)||void 0===D?void 0:D.filter(N=>"KNOWLEDGE"==N.type).length)&&void 0!==Q&&Q}).length)&&void 0!==d&&d?this.questionService.apiQuestionsMatrixGlobalPost(p):this.questionService.apiQuestionsMatrixPost(p)).subscribe(S=>{n(1===S.success&&S.data?S.data:[])})):n(this.matrixLoadedData?this.matrixLoadedData:[])})}onMobileEditorChange(e){this.mobileEditorContent=e.lines.join("\n"),this.onEditorChangeValue(e.lines,e.data)}onEditorInitComplete(e){if(this.aztEditor=e.azotaEditor,this.aztEditor.setLang(this.commonService),this.aztEditor.setHoverCalback((a,r,l)=>this.showHover(a,r,l)),this.aztEditor.onChange((a,r)=>{var l;if(this.editQuestId>0&&r.length>0){r.length>1&&this.showErrorSnack("lang_auto_khong_the_them_cau_hoi_moi");let c=this.conf.startIndex+1;(r=[r[0]])[0].olabel=null===(l=r[0].olabel)||void 0===l?void 0:l.replace(r[0].label+"",c+""),r[0].label=c}this.onEditorChangeValue(a,r)}),this.aztEditor.onRefreshInclude((a,r)=>{var l,c;if(this.timeOutDelayStatus.refresh){const _=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((null!==(l=this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question"))&&void 0!==l?l:"").replace("@",_.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let _=0;this.matrixLoadedData=[];let d=this.lstQuest.filter(p=>{var h;return(null===(h=p.quest.parts[0].text)||void 0===h?void 0:h.startsWith(a))&&p.quest.parts[0].lineIdx==r-1}).map(p=>{var h;return null!==(h=p.id)&&void 0!==h?h:0});for(let p of this.lstQuest){if(p.quest.parts[0].lineIdx==r-1){const h=null!==(c=p.quest.parts[0].text)&&void 0!==c?c:"",f=_;let S=new ne(this.cdnService,this.commonService,D=>{this.fillQuest(f,D)},this.apiCallbackCache,this.aztEditor,D=>{this.fillError(f,D)},this.getIncludeIds(d),this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(h),S.render(h,this.images,this.questionService)}_++}setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}),this.aztEditor.onInsertQuestText((a,r)=>{var l,c,_;let d=this.lstQuest.filter(p=>p.quest.parts[0].lineIdx==r-1)[0];if(d){let p=this.getQuestText(d);null===(l=this.aztEditor)||void 0===l||l.setPosition(r,0),null===(c=this.aztEditor)||void 0===c||c.removeText(r,0,999999,!1),null===(_=this.aztEditor)||void 0===_||_.insertAtCurPos(p)}}),this.aztEditor.onInsertDetails((a,r)=>{var l,c,_,d;let p=this.lstQuest.filter(Q=>Q.quest.parts[0].lineIdx==r-1);if(0==p.length)return;for(let Q=0;Q<p.length;Q++)this.apiDataCache.delete(a+"=>"+Q);let h=this.commonService.myTranslateInstant("lang_auto_cau"),f=p.map(Q=>`${Q.id}: ${h} ${Q.quest.label}`),k=(null!==(l=p[0].quest.parts[0].text)&&void 0!==l?l:"").split("=>")[0],S=null===(c=p[0].quest.parts[0].text)||void 0===c?void 0:c.split("=>")[1],D=null===(_=p[p.length-1].quest.parts[0].text)||void 0===_?void 0:_.split("=>")[1];if(S&&D){let Q=+S,N=+D,q=k.split("].["),W=q[q.length-1],X=+G.Utils.getNumberFromStr(W),E=N-Q+1;q[q.length-1]=W.replace(" "+X+" "," "+(X-E)+" ");let z=q.join("].[");for(let K=N+1;K<X;K++){let B=this.apiDataCache.get(k+"=>"+K);B&&this.apiDataCache.set(z+"=>"+(K-E),B)}for(let K=0;K<Q;K++){let B=this.apiDataCache.get(k+"=>"+K);B&&this.apiDataCache.set(z+"=>"+K,B)}}null===(d=this.aztEditor)||void 0===d||d.insertDetails(r,f)}),this.aztEditor.onChangePosition((a,r)=>{var l;this.revealCurrentQuest();let d=(null===(l=this.aztEditor)||void 0===l?void 0:l.getCurLineText()).matchAll(/\[(!m|img):\$([^\$\]]+)\$\]/g);for(;;){let p=d.next();if(p.done)break;let h=p.value[2];if(p.value.index+1<r&&r<p.value.index+p.value[0].length)if(p.value[0].startsWith("[!m:")){let w=this.mathMap.get(h);if(w){this.openMathEditor(w);break}}else this.actionEditImage(document.getElementById(h))}}),window.addEventListener("paste",a=>{var r;if((null===(r=this.aztEditor)||void 0===r?void 0:r._editor).hasTextFocus()){let c=a.clipboardData.getData("text/html")+"",_=a.clipboardData.files[0],p=c.matchAll(/<img [^>]*src="([^"]+)"/g);if(_&&_.type.startsWith("image"))return void this.insertImgFromFile(_);for(;;){let h=p.next();if(h.done)break;this.insertImgFromLink(h.value[1])}}}),this.editQuestId>0){this.aztEditor.setSingleMode(!0);let a=this.commonService.myTranslateInstant("lang_auto_cau_hoi");this.aztEditor._editor.setValue(`[@Q${this.editQuestId}:${a}]`)}const n=this.editorOutputDataService.getFirstFile(),i=this.editorOutputDataService.getMatrixData();n?this.processFile(n):i&&this.processMatrixData(i)}insertImgFromBase64(e){var n;let i=0;for(let a of this.images){let r=+a.id.split("_")[1];r>i&&(i=r)}i++,this.images.push({id:"img_"+i,link:e}),null===(n=this.aztEditor)||void 0===n||n.insertAtCurPos(`[img:$img_${i}$]`)}insertImgFromLink(e){wt.loadImageToBase64(e,this.cdnService).then(n=>{this.insertImgFromBase64(n)})}insertImgFromFile(e){let n=new FileReader;n.onload=()=>{this.insertImgFromBase64(n.result+"")},n.readAsDataURL(e)}processMatrixData(e){var n;let i=new At;this.conf.matrix=e;let a=i.parse(e.matrix);this.extraMap=a.extra,null===(n=this.aztEditor)||void 0===n||n._editor.setValue(this.commonService.translateString(a.text))}revealCurrentQuest(){var e;if(this.isMobile)return;let n=null===(e=this.aztEditor)||void 0===e?void 0:e.getCurQuest();n?(this.revealQuest((n.isGroup?"g-":"")+n.label),this.curQuest=n):this.revealQuest("1")}revealQuest(e){document.getElementById("quest-"+e)?.scrollIntoView({behavior:"auto"}),this.onScrollQuest()}onScrollQuest(){clearTimeout(this.scrollId),this.scrollId=setTimeout(()=>{this.checkElementQuestionLazy()},100)}onChangeQuest(e,n){var i,a;if(this.timeOutDelayStatus.refresh){const r=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((null!==(i=this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question"))&&void 0!==i?i:"").replace("@",r.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[];let r=this.lstQuest.map(h=>{var f;return null!==(f=h.id)&&void 0!==f?f:0});const l=null!==(a=e.quest.parts[0].text)&&void 0!==a?a:"",c=this.apiDataCache.get(l);let p=new ne(this.cdnService,this.commonService,h=>{this.fillQuest(n,h)},this.apiCallbackCache,this.aztEditor,h=>{this.showErrorSnack(h),c&&this.apiDataCache.set(l,c)},r,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(l),p.setGetOne(!0),p.render(l,this.images,this.questionService),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}setPointBelow(e,n){for(let i=n;i<this.lstQuest.length;i++)this.lstQuest[i].quest.isGroup||(this.lstQuest[i].point=e,this.setExtra({type:"point",data:e,q:this.lstQuest[i]},i==this.lstQuest.length-1))}editorFocus(e){var n;e&&e.length>0&&(null===(n=this.aztEditor)||void 0===n||n.goToLine(e[0].lineIdx+1))}onCopy(e,n){let i=this;n||(n="Copy");let a=r=>{var l;let c=G.Utils.capitalizeFirstLetter(null!==(l=e.quest.olabel)&&void 0!==l?l:"");navigator.clipboard.writeText(i.getQuestText(e));let _=this.commonService.myTranslateInstant("lang_auto_noi_dung"),d=this.commonService.myTranslateInstant("lang_auto_thanh_cong");i.showSuccessSnack(`${n} ${_} ${c} ${d}`)};document.addEventListener("copy",a),document.execCommand("copy"),document.removeEventListener("copy",a)}onCut(e){let n=this.commonService.myTranslateInstant("lang_auto_cat");this.onCopy(e,n),this.onDel(e,n)}onDel(e,n){var i,a,r,l,c,_;let d=[],p=G.Utils.capitalizeFirstLetter(null!==(i=e.quest.olabel)&&void 0!==i?i:""),h=this.commonService.myTranslateInstant("lang_auto_xoa");if(n||(n=h),(null!==(r=null===(a=e.quest.parts[0].text)||void 0===a?void 0:a.indexOf(".[L\u1ea5y ng\u1eabu nhi\xean"))&&void 0!==r?r:-1)>0||(null!==(c=null===(l=e.quest.parts[0].text)||void 0===l?void 0:l.indexOf(".[Random"))&&void 0!==c?c:-1)>0){let f=this.commonService.myTranslateInstant("lang_auto_nam_trong_nhom_lay_ngau_nhien"),w=this.commonService.myTranslateInstant("lang_auto_khong_thanh_cong");this.showErrorSnack(`${p} ${f}, ${n} ${w}`)}else{d.push(...e.quest.parts.map(f=>f.lineIdx));for(let f of e.quest.answers)d.push(...f.parts.map(w=>w.lineIdx));e.quest.help&&d.push(...e.quest.help.map(f=>f.lineIdx)),d=d.filter((f,w,k)=>k.indexOf(f)===w),null===(_=this.aztEditor)||void 0===_||_.removeLines(d,!0)}}getQuestText(e){var n,i,a;let r=G.Utils.capitalizeFirstLetter(null!==(n=e.quest.olabel)&&void 0!==n?n:"");this.defaultQuestionLabel&&(r=G.Utils.capitalizeFirstLetter(this.defaultQuestionLabel).trim()+" "+e.quest.label+".");let l=this.curExtraId;this.curExtraId++,this.extraMap.set(l+"",{d:e.point,audio:e.audio,file:e.attachments,fix:e.quest.isFixAns,tag:e.tag});let d=[`${r}[!info:${l}] ${this.formatContent(e.renderedStr)}`],p="";if(e.renderedStr.indexOf('class="qv_string_eng_ans"')<0)for(let w of e.answers)d.push((w.ans.isCorrect?"*":"")+w.ans.label+". "+this.formatContent(w.renderedStr));else p=e.answers.filter(w=>w.ans.isCorrect)[0].ans.label;if(e.quest.strAns){let w=null!==(i=this.commonService.myTranslateInstant("azt_lang_sugg_ans_table_upper"))&&void 0!==i?i:"";d.push(`${w}\n${e.quest.label}. ${e.quest.strAns}`)}if(e.helpRenderedStr){let w=null!==(a=this.commonService.myTranslateInstant("lang_auto_loi_giai"))&&void 0!==a?a:"";d.push(w),d.push(this.formatContent(e.helpRenderedStr))}return(new Ut).revert(d.join("\n"),p)}formatContent(e){e=e.replaceAll("&lt;","<");let i=document.createElement("div");i.innerHTML=e;let a=i.getElementsByClassName("azt-mathml"),r=i.getElementsByTagName("img");for(let c=a.length-1;c>=0;c--){let _=a[c];if(!_)continue;let d=this.curMathId;this.mathMap.set("mathtype_"+this.curMathId,{id:d,str:_.innerHTML,lineIdx:0,startCol:0,endCol:0}),this.curMathId++;let h=document.createTextNode(`[!m:$mathtype_${d}$]`);i.replaceChild(h,_)}for(let c=r.length-1;c>=0;c--){let _=r[c];if(!_)continue;let d=this.images.length>0?Math.max(...this.images.map(h=>+h.id.split("_")[1]))+1:1;this.images.push({id:"img_"+d,link:_.src,cssStyle:_.style.cssText});let p=document.createTextNode(`[img:$img_${d}$]`);i.replaceChild(p,_)}return i.innerHTML.replaceAll("<br>","\n")}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}validate(){var e;let n=new Map,i=0;this.errs=this.errs.filter(a=>a.indexOf("Tr\xf9ng c\xe2u h\u1ecfi")<0),null===(e=this.aztEditor)||void 0===e||e.setError(this.errs);for(let a of this.lstQuest)"Tr\xf9ng c\xe2u h\u1ecfi"==a.err&&(a.err=void 0),a.id&&(n.has(a.id)&&this.fillError(i,"Tr\xf9ng c\xe2u h\u1ecfi"),n.set(a.id,1),i++)}fillError(e,n){var i;this.lstQuest[e].err=`<span style='color:red'>${n}</span>`;let r=this.lstQuest[e].quest.parts[0].lineIdx+1+"|"+n;-1==this.errs.indexOf(r)&&this.errs.push(r),null===(i=this.aztEditor)||void 0===i||i.setError(this.errs)}fillImg(e,n,i,a){var r;let l=new RegExp("<div id='"+n+"'[^>]+></div>","g"),c=this.lstQuest[e];c.renderedStr=c.renderedStr.replace(l,i??"");for(let _ of c.answers)_.renderedStr=_.renderedStr.replace(l,i??"");if(c.helpRenderedStr&&(c.helpRenderedStr=c.helpRenderedStr.replace(l,i??"")),a)for(let _ of a){let d=this.renderCache.get(_);d&&this.renderCache.set(_,d.replace(l,i??""))}if(this.editQuestId>0){let _=this.getQuestText(c);_.indexOf("img-docx")<0&&(null===(r=this.aztEditor)||void 0===r||r._editor.setValue(_))}}fillQuest(e,n){var i,a,r,l;let c=this.commonService.myClone(n),_=this.lstQuest[e];if(_){c.label=_.label,c.point=_.point,c.lazyQuestView=_.lazyQuestView,c.isFixGroup=_.isFixGroup;let d=_.quest.isFixAns||c.quest.isFixAns;if(this.editorParsedData){let w=c.quest.strAns;c.quest=this.editorParsedData[e],c.quest.strAns=w;let k=null!==(i=c.originCorrectAns)&&void 0!==i?i:"";for(let S of c.quest.answers)if(S.isCorrect){k=S.label;break}for(let S of c.answers)S.ans.isCorrect=S.ans.label==k}c.quest.strAns?c.strAns=c.quest.strAns.split(/[\/\|]/).map(w=>w.trim()):c.strAns&&(c.quest.strAns=c.strAns.join("|"));let p=[];p.push(c.renderedStr),p.push(...c.answers.map(w=>w.renderedStr)),p.push(c.helpRenderedStr);let h=(w,k)=>{this.fillImg(e,w,k,p)};c.renderedStr=this.renderStr(c.renderedStr,"link",h,void 0,void 0,!1);for(const w of c.answers)w.renderedStr=this.renderStr(w.renderedStr,"link",h,void 0,void 0,!1);c.helpRenderedStr&&(c.helpRenderedStr=this.renderStr(c.helpRenderedStr,"link",h,void 0,void 0,!1));let f=3;if(c.answers.length>0&&(f=1),0==c.answers.length&&c.quest.strAns&&(f=4),c.type=f,d&&(c.quest.isFixAns=d),c.changeable=/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(null!==(r=null===(a=c.quest.parts[0].text)||void 0===a?void 0:a.split("=>")[0])&&void 0!==r?r:""),this.lstQuest[e]=c,this.editQuestId>0){let w=this.getQuestText(c);w.indexOf("img-docx")<0&&(null===(l=this.aztEditor)||void 0===l||l._editor.setValue(w))}this.fillQuestCache.set(e+"-"+c.quest.parts[0].text,c),this.validate()}}renderText(e){let n=e;return n=this.renderStr(n,"help",(a,r)=>{let l=new RegExp("<div id='"+a+"'[^>]+></div>","g");n=n.replace(l,r??"")}),n}getLoadedIds(){return this.lstQuest.filter(e=>e.id&&e.id>0).map(e=>{var n;return null!==(n=e.id)&&void 0!==n?n:0})}getIncludeIds(e){var n;let l=(null===(n=this.aztEditor)||void 0===n?void 0:n._editor.getValue()).matchAll(/\[@Q(\d+):[^\]]*\]/g),c=[];for(;;){let d=l.next();if(d.done)break;c.push(+d.value[1])}let _=this.getLoadedIds();return c.push(-1),c.push(..._),c.filter(d=>(e??[]).indexOf(d)<0)}renderStr(e,n,i,a,r,l=!0){let c=this.renderCache.get(e);if(c&&!c.startsWith("Loading...|"))return c;let _=l?e.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("&lt;code>","<code>").replaceAll("&lt;/code>","</code>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):e,d=[new It,new ae(this.cdnService),new Ut,new ie,new jt,new de,new un(this.mathMap),new an,new ye.$(this.cdnService,this.commonService,this.configRenderService,i),new ne(this.cdnService,this.commonService,a,this.apiCallbackCache,this.aztEditor,r,this.getIncludeIds(),this.apiDataCache,this.matrixLoadedData)];"link"==n&&(d=[new ye.$(this.cdnService,this.commonService,this.configRenderService,i)]),"help"==n&&d.pop();for(const p of d)p.setLoadingManager(this.loadingManager),_=p.render(_,this.images,this.questionService);return this.renderCache.set(e,_),_}renderQuest(e,n){var i,a;let r=3;e.answers.length>0&&(r=1),0==e.answers.length&&e.strAns&&(r=4);let l=(S,D)=>{this.fillImg(n,S,D)},c=S=>{this.fillQuest(n,S)},_=S=>{this.fillError(n,S)},d=e.parts.map(S=>{var D;return null!==(D=S.text)&&void 0!==D?D:""}).join("<br>").trim(),p=this.parseTag(d);""!=p[0]?d=p[1]:e.help&&e.help.length>0&&(p=this.parseTag(null!==(i=e.help[0].text)&&void 0!==i?i:""));let h=this.parseExtra(d);""!=h.val&&(d=d.substring(0,h.idx)+d.substring(h.idx+h.val.length));let f=e.help?e.help.map(S=>{var D;return null!==(D=S.text)&&void 0!==D?D:""}).join("<br>").trim():void 0,w=this.lstQuest[n],k={renderedStr:this.renderStr(d,"full",l,c,_),quest:e,type:r,tag:""==p[0]?void 0:[{code:G.Utils.tagLang(p[0])}],lazyQuestView:w?w.lazyQuestView:void 0,strAns:e.strAns?e.strAns.split(/[\/\|]/).map(S=>S.trim()):void 0,label:this.upperFirst(null!==(a=e.olabel)&&void 0!==a?a:""),helpRenderedStr:f?this.renderStr(f,"full",l,c,_):void 0,answers:e.answers.map(S=>{let D=S.parts.map(Q=>{var N;return null!==(N=Q.text)&&void 0!==N?N:""}).join("<br>").trim();return{renderedStr:this.renderStr(D,"full",l,c,_),ans:S}})};if(k.renderedStr.startsWith("Loading...|")){let S=k.renderedStr.split("|");if(S[1].indexOf(",")<0){let Q=+S[1];Q>0&&(k.id=Q)}k.renderedStr=S[0];let D=this.fillQuestCache.get(n+"-"+e.parts[0].text);D&&(k=D)}if("0"!=h.id){let S=this.extraMap.get(h.id);S&&(k.point=S.d,k.audio=S.audio,k.attachments=S.file,k.isFixGroup=k.quest.isGroup&&S.fix,k.tag=S.tag,k.quest.isFixAns||(k.quest.isFixAns=!k.quest.isGroup&&S.fix))}return this.editableEventObj.addCount(),k}openMathEditor(e){var n;if(!e){let i=null===(n=this.aztEditor)||void 0===n?void 0:n.getCurPos();e={id:this.curMathId,str:'<math xmlns="http://www.w3.org/1998/Math/MathML"/>',lineIdx:i.lineNumber,startCol:i.column,endCol:i.column}}this.conf.mathEditor.show=!0,this.conf.mathEditor.latex=e}onInsertLatex(e){if(this.conf.mathEditor.show=!1,this.aztEditor){let n="mathtype_"+this.curMathId,i=`[!m:$${n}$]`;this.mathMap.set(n,{id:this.curMathId,str:e.str,lineIdx:e.lineIdx,startCol:e.startCol,endCol:e.startCol+i.length}),this.aztEditor.removeText(e.lineIdx,e.startCol,e.endCol,!1),this.aztEditor.insertAtCurPos(i),this.curMathId++}}loadExample(e,n){var i,a;let r="vi"==n?le.EXAM_FULL:le.EXAM_FULL_EN;this.aztEditor&&""!=this.aztEditor._editor.getValue().trim()?null===(i=this.popupConfirm)||void 0===i||i.startConfirm("lang_auto_azt_edtor_confirm_chang_content").then(l=>{var c;l&&(null===(c=this.aztEditor)||void 0===c||c._editor.setValue(r[e-1]))}):this.aztEditor&&(null===(a=this.aztEditor)||void 0===a||a._editor.setValue(r[e-1]))}onShowFile(e,n){}onDropFile(e){(0,lt.C0)(e.type)?(0,lt.ml)(e.type)?this.showErrorSnack("lang_auto_chua_ho_tro_dinh_dang_video_vui_long_thu_lai"):(0,lt.hv)(e).then(n=>{this.attachFiles.push(n)}):this.showErrorSnack("lang_auto_pleas_upload_file_support")}setupEvent(){this.mapEventElement.push({eventName:"click",className:"img-docx",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_qts_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img-group-content",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_ats_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"azt-mathml",action:this.actionEditMathMl,caller:this})}actionEditImage(e){var n;if(e&&this.images.filter(i=>i.id==e.id).length>0){this.conf.imageEditor.show=!0,this.conf.imageEditor.el=e;let i=null===(n=this.aztEditor)||void 0===n?void 0:n._editor.getValue().split("\n"),a=0,r=0;for(let l of i)if(a++,r=l.indexOf(`[img:$${e.id}$]`),r>=0)break;setTimeout(()=>{var l;null===(l=this.aztEditor)||void 0===l||l.setPosition(a,r+1)},100)}}actionEditMathMl(e){var n;let i=e.id;const a=this.mathMap.get(i);a&&(null===(n=this.aztEditor)||void 0===n?void 0:n._editor.getValue().indexOf(`[!m:$${i}$]`))>=0&&setTimeout(()=>{var r;null===(r=this.aztEditor)||void 0===r||r.setPosition(a.lineIdx,a.startCol+1),this.openMathEditor(a)},100)}onPushImageAction(e){var n;if(this.conf.imageEditor.show=!1,e.element&&e.element.id&&this.aztEditor){let i=this.images.filter(_=>{var d;return _.id==(null===(d=e.element)||void 0===d?void 0:d.id)})[0];if(!i)return;let r="img_"+(this.images.length>0?Math.max(...this.images.map(_=>+_.id.split("_")[1]))+1:1),l=`[img:$${r}$]`;this.images.push({id:r,link:e.output,cssStyle:i?.cssStyle});let c=null===(n=this.aztEditor)||void 0===n?void 0:n.getCurPos();this.aztEditor.removeText(c.lineNumber,c.column,c.column+i.id.length+8,!1),this.aztEditor.insertAtCurPos(l)}}checkElementQuestionLazy(){if(this.lstQuest.length>=this.maxQuestEnableLazy){let e=document.getElementsByClassName("question-content");for(let n=0;n<e.length;n++){const i=e[n],a=null!==i.getAttribute("start_loading")&&"true"===i.getAttribute("start_loading"),r=i.getAttribute("data-idx-quest"),l=this.lstQuest[Number(r)];l&&(l.lazyQuestView||(l.lazyQuestView={show:!1}),a&&null!==r?l.lazyQuestView.show||(l.lazyQuestView.show=!0,l.lazyQuestView.curHeight="auto"):(l.lazyQuestView.curHeight=i.getBoundingClientRect().height+"px",l.lazyQuestView.show=!1))}}}checkTypeActionService(){const e=document.getElementById("list-quest-panel");e&&this.mapEventElement.forEach(n=>{const i=e.getElementsByClassName(n.className);for(let a=0;a<i.length;a++){const r=i[a];r.getAttribute("event_"+n.eventName+"_target")||(r.setAttribute("event_"+n.eventName+"_target","true"),r.addEventListener(n.eventName,()=>{n.action.call(n.caller,r)}))}})}onResize(e){this.conf.isCalculatorHeight=!1,this.actionResize()}actionResize(){const e=document.getElementById("toolbar__editor");e&&(this.conf.heightContent=window.innerHeight-e.getBoundingClientRect().height-96,this.isMobile&&(this.conf.heightContent=this.conf.heightContent/2),this.conf.isCalculatorHeight=!0)}ngOnInit(){super.ngOnInit(),this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_tai_thu_vien",this.isMobile=this.commonService.isMobileOrTable(),this.maxQuestEnableLazy=this.isMobile?1e4:this.maxQuestEnableLazy,(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n;this.conf.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.editQuestId=+(null!==(e=this.commonService.getMyParam(this.activeRoute,"quest_id"))&&void 0!==e?e:"0"),this.type=this.commonService.getMyQueryParamOrDefault("self","user"),this.defaultQuestionLabel=this.commonService.getMyQueryParam("defaultQuestLabel"),this.conf.typeMatrix=this.type,this.conf.sourceBackToLink=this.commonService.getMyQueryParam("backto"),this.conf.startIndex=Number(null!==(n=this.commonService.getMyQueryParam("r"))&&void 0!==n?n:"0"),this.conf.reSetBackToLink()}),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS,EDITOR_TEMPLATE").subscribe(e=>{this.aztLangConfig=e.CROPPDF_PARAMS,this.fileParser.loadAllLibs([{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{link:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{link:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{link:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.questionService.apiQuestionGetTagsGet().subscribe(n=>{var i;n.success&&n.data?this.questionTags=null!==(i=n.data.objs)&&void 0!==i?i:[]:this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.fileParser.loadConf(this.aztLangConfig),this.fileParser.init(),this.conf.isConfigInit=!0,"bank"==this.editorOutputDataService.getMode()&&this.openLibrary(),setTimeout(()=>{this.actionResize(),this.setupDropFile()},100)})}).catch(()=>{this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai")})})}ngDoCheck(){this.checkTypeActionService()}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0)}setupDropFile(){const e=window.jQuery("#list-quest-panel");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault(),n.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",n=>{this.handleFileDrop(n.originalEvent.dataTransfer.files)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio(),this.store.dispatch(ot.qs())}constructor(e,n,i,a,r,l,c,_,d,p,h,f,w,k){super(p),this.questionHelper=e,this.editorCommonService=n,this.apiUploadService=i,this.infoService=a,this.documentService=r,this.examService=l,this.cdnService=c,this.activeRoute=_,this.store=d,this.commonService=p,this.editorOutputDataService=h,this.userService=f,this.questionSaveService=w,this.questionService=k,this.images=[],this.editedImages=new Map,this.errorQuestionView=new ms(this.commonService),this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g,this.title=new m.p4,this.lstQuest=[],this.text="",this.attachFiles=[],this.aztLangConfig="",this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.showTooltip=!0,this.questionTags=[],this.mapEventElement=[],this.configRenderService=new Ct.B,this.maxQuestEnableLazy=20,this.isMobile=!1,this.lastMatrixHash="",this.editQuestId=0,this.editableEventObj={isChange:!1,count:0,addCount:function(){this.count++,this.count>2&&(this.isChange=!0)}},this.type="user",this.timeOutDelayStatus={refresh:!1,timeRefresh:0,limitRefresh:2},this.conf=new Pt(this.editorOutputDataService,this.commonService),this.editorApiService=new V(e,i,r,l,k),this.fileParser=new Y.uD,this.setupEvent();let S=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.questionSaveService.callbackBase64ToCanvas=(D,Q)=>{this.conf.logConfig.msg=`${S} ${Math.floor(D/Q*100*.7)}%`},this.questionSaveService.callbackUploadImage=(D,Q)=>{this.conf.logConfig.msg=`${S} ${Math.floor(D/Q*100*.3)+70}%`}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ue),t.Y36($n),t.Y36(mn.$),t.Y36(xt.CM),t.Y36(xt.Zg),t.Y36(xt.Oe),t.Y36(Dt.U),t.Y36(C.gz),t.Y36(ki.yh),t.Y36(_t.v),t.Y36(pn),t.Y36(hn.K),t.Y36(Oi),t.Y36(xt.aE))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-azota-editor"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Ca,5),t.Gf(ka,5),t.Gf(Oa,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.popupConfirm=i.first),t.iGM(i=t.CRH())&&(n.mobileEditor=i.first),t.iGM(i=t.CRH())&&(n.popupOnlyImageEditor=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("resize",function(a){return n.onResize(a)},!1,t.Jf7)},features:[t.qOj],decls:13,vars:17,consts:[[3,"headerBackTolink","checkBackDialog","disableConfirmBtn","confirmTitle","showInput","examName","showConfirmButton","handleBackDialog","handleCancel","handleConfirm"],[1,"main__editor",3,"ngClass"],["class","app-editor",4,"ngIf"],["class","loading-mess",4,"ngIf"],["id","testFinderMask",4,"ngIf"],["type","file",1,"azt-hidden",3,"change"],["fileOpenProcess",""],["popupConfirm",""],[3,"inp","onClose","onInsertLatex",4,"ngIf"],[3,"el_target","onClose","onPushImage",4,"ngIf"],["class","main__homework-save",4,"ngIf"],["class","main__exam-save",4,"ngIf"],[1,"app-editor"],["id","list-quest-panel",3,"scroll"],["class","question-content",4,"ngIf"],["class","question-content","load_effect_lazy","",3,"id","ngStyle",4,"ngFor","ngForOf"],[2,"height","250px"],[3,"class",4,"ngIf"],[1,"question-content"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],[1,"box-service-content"],[1,"mb-5","tex2jax_process","homework-content",3,"innerHTML"],["class","box-show-files",4,"ngIf"],["class","box-input-file",4,"ngIf"],[1,"box-show-files"],[1,"box-line"],[4,"ngFor","ngForOf"],[1,"box-file"],["azt-track-service","azota-editor-VmAdzC0JVjO",1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],["azt-track-service","azota-editor-YPQZFq3W5pa",3,"click"],[1,"line-file",3,"title"],[1,"box-input-file"],[3,"onDropFile"],["load_effect_lazy","",1,"question-content",3,"id","ngStyle"],["class","box-service box border border-slate-400 dark:border-darkmode-400",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],[3,"questionId","role","applyType",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],["azt-track-service","azota-editor-t2MSjyyGi8_",1,"link-option",3,"click"],[1,"box-service-header","w-full"],[3,"q","notOnlyQuestEdit","questionTags","onChangeQuest","onApplyAllTag","onError","onLabelClick","onHotKeyPointSync","onExtraInfo","onCut","onDel","onCopy"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"innerHTML","click"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"matTooltipPosition","matTooltip","ngClass","click"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"innerHTML","ngClass","click"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"innerHTML","click"],[1,"exam-box",3,"innerHTML"],[3,"questionId","role","applyType"],[1,"skeleton-box-loading","h-100","w-100"],["id","toolbar__editor",1,"toolbar-editor","box","rounded-none"],[1,"toolbar-left"],["azt-track-service","azota-editor-PYOwtUkbiHX","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-RriKBPZhZhL","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-SevIBYRKYxI","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-nphQ4dxT9FC","class","toolbar-btn",3,"click",4,"ngIf"],["class","toolbar-btn",4,"ngIf"],[3,"config","readOnly","editorApiService","onStartProcessFile","onInit"],["class","footer-editor",4,"ngIf"],["azt-track-service","azota-editor-PYOwtUkbiHX",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],[1,"azt-hidden","md:block"],["azt-track-service","azota-editor-RriKBPZhZhL",1,"toolbar-btn",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","azota-editor-SevIBYRKYxI",1,"toolbar-btn",3,"click"],["d","M18 7V4H6l6 8-6 8h12v-3"],["azt-track-service","azota-editor-nphQ4dxT9FC",1,"toolbar-btn",3,"click"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"toolbar-btn"],[1,"btn-transpanrent",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","w-56","relative"],[1,"dropdown-content"],["azt-track-service","azota-editor-a3UJXgWi4cK",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","azota-editor-55CS__ezSf3",1,"dropdown-item",3,"click"],["x","6","y","14","width","9","height","6","rx","2"],["x","6","y","4","width","16","height","6","rx","2"],["d","M2 2v20"],[1,"footer-editor"],[1,"footer-item"],["azt-track-service","azota-editor-bC2YM9_C3mx",1,"text-primary",3,"click"],["azt-track-service","azota-editor-ENvq0_KzaKp",1,"text-primary",3,"click"],["azt-track-service","azota-editor-lHk43akYxBc",1,"text-primary",3,"click"],["azt-track-service","azota-editor-zb38B_roeqf",1,"text-primary",3,"click"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"],["id","testFinderMask"],[1,"box","border","border-slate-400","dark:border-darkmode-400",3,"isFirstTime","closeTestFinder"],[3,"inp","onClose","onInsertLatex"],[3,"el_target","onClose","onPushImage"],[1,"main__homework-save"],[3,"onBack"],[1,"main__exam-save"]],template:function(e,n){1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleBackDialog",function(){return n.conf.showEditor()})("handleCancel",function(){return n.cancelAction()})("handleConfirm",function(){return n.saveAction()}),t.TgZ(1,"div",1),t.YNc(2,as,6,6,"div",2),t.qZA(),t.YNc(3,ss,9,3,"div",3),t.YNc(4,rs,2,1,"div",4),t.TgZ(5,"input",5,6),t.NdJ("change",function(a){return n.openFile(a)}),t.qZA(),t._UZ(7,"editor-confirm",null,7),t.YNc(9,ls,1,1,"mathtype-editor",8),t.YNc(10,cs,1,1,"only-image-editor",9),t.YNc(11,_s,2,0,"div",10),t.YNc(12,ds,2,0,"div",11),t.qZA()),2&e&&(t.Q6J("headerBackTolink",n.conf.getBackLink())("checkBackDialog",!n.conf.editor.show)("disableConfirmBtn",n.editQuestId>0&&!n.editableEventObj.isChange)("confirmTitle",0==n.editQuestId?"lang_auto_tiep_tuc":"lang_buttom_save")("showInput",n.conf.editor.show&&!n.editQuestId)("examName",n.title)("showConfirmButton",n.conf.editor.show),t.xp6(1),t.Q6J("ngClass",t.VKq(15,us,!n.conf.editor.show)),t.xp6(1),t.Q6J("ngIf",n.conf.isConfigInit),t.xp6(1),t.Q6J("ngIf",n.conf.logConfig.status),t.xp6(1),t.Q6J("ngIf",n.conf.startLibrary),t.xp6(5),t.Q6J("ngIf",n.conf.mathEditor.show),t.xp6(1),t.Q6J("ngIf",n.conf.imageEditor.show),t.xp6(1),t.Q6J("ngIf",n.conf.homeworkSave.show),t.xp6(1),t.Q6J("ngIf",n.conf.examSave.show))},styles:['#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{overflow:auto;position:relative}.question-content[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-y:auto}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .quest-err{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .quest-err:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-y:auto}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}']}),o})();function ps(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.actionClose())}),t.qZA(),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",6),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.actionClose())}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",7),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"div",9),t.TgZ(15,"div",10)(16,"span",11)(17,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.actionClose())}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.actionClose(!0))}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,4,"lang_auto_xac_nhan")," "),t.xp6(6),t.hij(" ",t.lcZ(12,6,e.msgConfirm)," "),t.xp6(7),t.hij(" ",t.lcZ(19,8,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," ")}}let Ai=(()=>{class o extends R.Q{constructor(e){super(e),this.commonService=e,this.showConfirm=!1,this.msgConfirm=""}actionClose(e){this.showConfirm=!1,this.callback&&this.callback(e||!1)}startConfirm(e){return new Promise(n=>{this.msgConfirm=e,this.showConfirm=!0,this.callback=i=>{n(i)}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["editor-confirm"]],features:[t.qOj],decls:1,vars:1,consts:[["class","box-dialog",4,"ngIf"],[1,"box-dialog"],["azt-track-service","confirm-KaF7r9iJd",1,"overlay",3,"click"],[1,"dialog","box"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","confirm-uojtwFwgYyj",1,"dialog-close",3,"click"],[1,"dialog-body"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-confirm"],[1,"mr-3"],["azt-track-service","confirm-IkBjzbPeZUQ",1,"btn","btn-secondary","mr-2","w-24",3,"click"],["azt-track-service","confirm-PuBYMRtw1El",1,"btn","btn-primary","w-24",3,"click"]],template:function(e,n){1&e&&t.YNc(0,ps,23,12,"div",0),2&e&&t.Q6J("ngIf",n.showConfirm)},styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.dialog[_ngcontent-%COMP%]{margin-top:7vh;width:550px;box-shadow:#0000003d 0 3px 8px}.overlay[_ngcontent-%COMP%]{background-color:#0000004d;width:100%;height:100vh;position:absolute}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}"]}),o})(),co=(()=>{class o extends R.Q{actionClose(){this.onClose.emit()}actionFinish(){this.onPushImage.emit({element:this.el_target,source:this.src_source,output:this.editor._imgCtx.canvas.toDataURL("image/png",1)})}startLoad(){this.is_load_libs=!1,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"}]).then(()=>{var e;if(this.is_load_libs=!0,this.el_target){this.src_source=this.el_target.getAttribute("src")||"";var n=document.createElement("img");null===(e=this.el)||void 0===e||e.appendChild(n),n.onload=()=>{var i,a;const r=mnpaint.getInstance();r.startSession(n),r.config.width=null===(i=this.el)||void 0===i?void 0:i.clientWidth,r.config.height=null===(a=this.el)||void 0===a?void 0:a.clientHeight,r.config.resizable=!1,r.config.stopWhenClickOutsize=!1,r.config.stopWhenClickOutside=!1,r.config.autoUpdateSource="change",this.editor=r},n.src=this.src_source}})}uploadImageAction(){this.editor._fileInput.click()}addTextAction(){this.editor._addText()}cropAction(){this.editor._setSelectionType("crop")}undoAction(){this.editor._undo()}redoAction(){this.editor._redo()}zoomAction(e){e?this.editor.zoomIn():this.editor.zoomOut()}ngAfterViewInit(){this.el=document.getElementById("only-image-editor_image__process"),this.startLoad()}constructor(e,n){super(e),this.commonService=e,this.cdnService=n,this.onClose=new t.vpe,this.onPushImage=new t.vpe,this.el=null,this.src_source="",this.is_load_libs=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Dt.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["only-image-editor"]],inputs:{el_target:"el_target"},outputs:{onClose:"onClose",onPushImage:"onPushImage"},features:[t.qOj],decls:66,vars:6,consts:[[1,"box-dialog"],["azt-track-service","imageEditor-E8qc0UaMWsA",1,"dialog-overlay",3,"click"],[1,"dialog","box"],[1,"dialog-body"],[1,"img-editor-bx"],[1,"bx-content"],[1,"az-editor"],[1,"az-editor-top-bar"],[1,"top-bar-tool",2,"width","55px"],[1,"top-bar-tool"],[1,"top-bar-tool-item"],["azt-track-service","imageEditor-Z62bVA0hAQV","matTooltip","Undo",1,"btn-az-text","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M3 7v6h6"],["d","M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"],["azt-track-service","imageEditor-_e7HTV21HlD","matTooltip","Redo",1,"btn-az-text",3,"click"],["d","M21 7v6h-6"],["d","M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"],["azt-track-service","imageEditor-z4iVO06Ys6H","matTooltip","Zoom +",1,"btn-az-text","mr-2",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["azt-track-service","imageEditor-690dZE83J6L","matTooltip","Zoom -",1,"btn-az-text",3,"click"],[1,"az-editor-body"],[1,"az-editor-slide-bar"],[1,"az-tool"],["azt-track-service","imageEditor-qzyGDqt8nDW",1,"az-tool-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"az-tool-icon"],["d","M6 2v14a2 2 0 0 0 2 2h14"],["d","M18 22V8a2 2 0 0 0-2-2H2"],["azt-track-service","imageEditor-RUdGS0nAto3",1,"az-tool-item",3,"click"],["points","4 7 4 4 20 4 20 7"],["x1","9","y1","20","x2","15","y2","20"],["x1","12","y1","4","x2","12","y2","20"],["azt-track-service","imageEditor-efAq1HoIGbC",1,"az-tool-item",3,"click"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"az-editor-main"],["id","only-image-editor_image__process",1,"az-editor-content"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","imageEditor-DcXjxkUVcBd",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","imageEditor-GDQpZCPJRZZ",1,"btn","btn-primary","w-20",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.actionClose()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"div",8),t.TgZ(9,"div",9)(10,"div",10)(11,"button",11),t.NdJ("click",function(){return n.undoAction()}),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"path",14),t.qZA()(),t.kcU(),t.TgZ(15,"button",15),t.NdJ("click",function(){return n.redoAction()}),t.O4$(),t.TgZ(16,"svg",12),t._UZ(17,"path",16)(18,"path",17),t.qZA()()()(),t.kcU(),t.TgZ(19,"div",9)(20,"div",10)(21,"button",18),t.NdJ("click",function(){return n.zoomAction(!0)}),t.O4$(),t.TgZ(22,"svg",12),t._UZ(23,"circle",19)(24,"line",20)(25,"line",21)(26,"line",22),t.qZA()(),t.kcU(),t.TgZ(27,"button",23),t.NdJ("click",function(){return n.zoomAction()}),t.O4$(),t.TgZ(28,"svg",12),t._UZ(29,"circle",19)(30,"line",20)(31,"line",22),t.qZA()()()()(),t.kcU(),t.TgZ(32,"div",24)(33,"div",25)(34,"nav",26)(35,"button",27),t.NdJ("click",function(){return n.cropAction()}),t.O4$(),t.TgZ(36,"svg",28),t._UZ(37,"path",29)(38,"path",30),t.qZA(),t.kcU(),t.TgZ(39,"span"),t._uU(40,"Crop"),t.qZA()(),t.TgZ(41,"button",31),t.NdJ("click",function(){return n.addTextAction()}),t.O4$(),t.TgZ(42,"svg",28),t._UZ(43,"polyline",32)(44,"line",33)(45,"line",34),t.qZA(),t.kcU(),t.TgZ(46,"span"),t._uU(47,"Text"),t.qZA()(),t.TgZ(48,"button",35),t.NdJ("click",function(){return n.uploadImageAction()}),t.O4$(),t.TgZ(49,"svg",28),t._UZ(50,"path",36)(51,"path",37)(52,"path",38),t.qZA(),t.kcU(),t.TgZ(53,"span"),t._uU(54,"Upload"),t.qZA()()()(),t.TgZ(55,"div",39),t._UZ(56,"div",40),t.qZA()()()()()(),t.TgZ(57,"div",41),t._UZ(58,"div",42),t.TgZ(59,"div",43)(60,"button",44),t.NdJ("click",function(){return n.actionClose()}),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"button",45),t.NdJ("click",function(){return n.actionFinish()}),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(61),t.hij(" ",t.lcZ(62,2,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(65,4,"lang_auto_luu")," "))},styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:90vw;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #dfe0e5;justify-content:space-between;align-items:center}.az-editor[_ngcontent-%COMP%]{width:100%}.az-editor-top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #dfe0e5;padding:10px}.az-editor-body[_ngcontent-%COMP%]{display:flex}.az-editor-slide-bar[_ngcontent-%COMP%]{border-right:1px solid #dfe0e5;border-top:0px;flex-direction:column;flex-shrink:0;height:70vh;width:80px;overflow:hidden auto}.az-editor-main[_ngcontent-%COMP%]{background:#f7f7f8;width:100%}.az-editor-content[_ngcontent-%COMP%]{width:100%;height:100%}.az-editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.top-bar-tool[_ngcontent-%COMP%]{display:flex;margin-right:20px}.top-bar-tool-item[_ngcontent-%COMP%]{display:flex;align-items:center;color:#5d647b;font-size:12px}.top-bar-tool-input[_ngcontent-%COMP%]{border:1px solid #dfe0e5;border-radius:5px;width:50px;color:#5d647b;margin-left:5px;padding-left:3px;padding-right:3px}.az-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column}.az-tool-item[_ngcontent-%COMP%]{padding:10px 24px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#5d647b;background:transparent;border:none;-webkit-user-select:none;user-select:none;text-transform:initial;transition:all .5s}.az-tool-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.az-tool-item[_ngcontent-%COMP%]:hover{color:#1e41af;font-weight:500}.az-tool-icon[_ngcontent-%COMP%]{width:24px;height:24px}.az-tool[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#1e41af;font-weight:500}.btn-az-text[_ngcontent-%COMP%]{border:none;background:transparent;color:#5d647b;transition:all .5s}.btn-az-text[_ngcontent-%COMP%]:hover:not([disabled]){color:#1e41af}.btn-az-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px}.btn-az-text[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 768px){.top-bar-tool[_ngcontent-%COMP%]{margin-right:10px}.top-bar-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]}),o})();var _o=T(25631);const hs=function(o,s){return{left:o,bottom:s}},gs=function(){return{}},fs=["*"];let xs=(()=>{class o extends R.Q{constructor(){super(...arguments),this.isConfig=!0,this.bottom=-60,this.left=-5}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["common-tooltip"]],inputs:{isConfig:"isConfig",bottom:"bottom",left:"left"},features:[t.qOj],ngContentSelectors:fs,decls:3,vars:6,consts:[[1,"qv_tooltip"],[1,"content_tooltip"]],template:function(e,n){1&e&&(t.F$t(),t.TgZ(0,"span",0)(1,"span",1),t.Hsn(2),t.qZA()()),2&e&&t.Akn(n.isConfig?t.WLB(2,hs,n.left+"px",n.bottom+"px"):t.DdM(5,gs))},styles:['.qv_tooltip[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px;position:absolute;z-index:999;width:400px;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #faebd7}']}),o})();var bn=T(24363),je=T(99818),Ce=T(89923),Wt=T(97392),Ft=T(86255),jn=T(46289),Qt=T(42542),tt=T(1033);let vs=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[y.ez,I.j,m.u5,m.UX,L.Z,g.Z_]}),o})();t.B6R(_o.X,[y.mk,y.sg,y.O5,bn.CK,je.eB,Ce.ir,Ce.lw,Ce.Y6,Wt.Hw,Ft.W0,Ft.tN,Ft.D8,jn.x8,Qt.Kd,m.Fj,m.JJ,m.On,xs],[tt.bT]),t.B6R(Ai,[y.O5,Wt.Hw],[tt.bT]),t.B6R(co,[Qt.Kd],[tt.bT]);var Si=T(60139),Re=T(7100),Zi=T(8277),Ei=T(3238),Ii=T(24149),Mi=T(96551),ze=T(85053),Ae=T(72491),Pi=T(1574),wn=T(41303),Li=T(79001),uo=T(50136),xe=T(18455),Kn=T(29203),zt=T(91350),Jt=T(49692),Wn=T(16883),Vn=T(73727);function bs(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function ws(o,s){1&o&&(t.TgZ(0,"div",71),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function Ts(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function Cs(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function ks(o,s){1&o&&(t.TgZ(0,"div",72),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Os(o,s){1&o&&(t.TgZ(0,"div",85),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function ys(o,s){if(1&o&&(t.TgZ(0,"div",83),t.YNc(1,Os,3,3,"div",84),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}const As=function(o){return{"h-56-important":o}};function Ss(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",73)(2,"div",74)(3,"div",75)(4,"h3",76),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",77),t._UZ(8,"azt-list-classroom-checkall",78),t.qZA()(),t.TgZ(9,"div",79)(10,"ng-scrollbar",80),t._UZ(11,"azt-list-classroom-checkbox",81),t.qZA()()()(),t.YNc(12,ys,2,1,"div",82),t.BQk()),2&o){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,11,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",e.form)("objs",e.classroomObjs)("permissionName",e.permissionTypes.homework),t.xp6(2),t.Q6J("visibility","hover")("ngClass",t.VKq(13,As,e.isMobileWebView)),t.xp6(1),t.Q6J("form",e.form)("objs",e.classroomObjs)("homeworkObj",e.homeworkObj)("permissionName",e.permissionTypes.homework),t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors)}}function Zs(o,s){if(1&o&&(t.TgZ(0,"div",86)(1,"div",87)(2,"span",88),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"span",89),t._uU(6),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_da_giao_bai_tap_cho_lop")+": "," "),t.xp6(3),t.hij(" ",e.classroomObj.name," ")}}function Es(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",90),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.saveNewOrConfigHomework(0))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",e.form.invalid||e.checkDeadLineValid(e.form.controls.homeworkStartDate.value,e.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_luu_nhap")," ")}}function Is(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"h3",6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",9)(14,"div",11),t._UZ(15,"input",12),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,ws,3,3,"div",13),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"label",16),t._uU(21),t.ALo(22,"mytranslate"),t.O4$(),t.TgZ(23,"svg",17),t.ALo(24,"mytranslate"),t._UZ(25,"circle",18)(26,"line",19)(27,"line",20),t.qZA()()(),t.kcU(),t.TgZ(28,"div",15)(29,"div",21)(30,"div",22)(31,"mat-form-field",23)(32,"input",24),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(43);return t.KtG(i.open())}),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",25),t.NdJ("click",function(i){return t.CHM(e),t.MAs(43).open(),t.KtG(i.stopPropagation())}),t.O4$(),t.TgZ(35,"svg",26),t._UZ(36,"path",27)(37,"path",28)(38,"path",29)(39,"path",30)(40,"path",31)(41,"path",32),t.qZA()(),t.kcU(),t.TgZ(42,"ngx-mat-datetime-picker",null,33),t.YNc(44,Ts,2,0,"ng-template"),t.qZA()()(),t.TgZ(45,"div",22)(46,"mat-form-field",23)(47,"input",34),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(58);return t.KtG(i.open())}),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"button",35),t.NdJ("click",function(i){return t.CHM(e),t.MAs(58).open(),t.KtG(i.stopPropagation())}),t.O4$(),t.TgZ(50,"svg",26),t._UZ(51,"path",27)(52,"path",28)(53,"path",29)(54,"path",30)(55,"path",31)(56,"path",32),t.qZA()(),t.kcU(),t.TgZ(57,"ngx-mat-datetime-picker",null,36),t.YNc(59,Cs,2,0,"ng-template"),t.qZA()()(),t.TgZ(60,"div",37)(61,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clearTime())}),t.O4$(),t.TgZ(62,"svg",39),t._UZ(63,"path",40)(64,"path",41)(65,"path",42)(66,"path",43),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(69,"div",44)(70,"div",45),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.YNc(73,ks,3,3,"div",46),t.qZA()()(),t.TgZ(74,"div",47)(75,"div",48)(76,"label",49),t._uU(77),t.ALo(78,"mytranslate"),t.qZA()(),t.TgZ(79,"div",50)(80,"div",51)(81,"div",52),t._UZ(82,"input",53),t.TgZ(83,"label",54),t._uU(84),t.ALo(85,"mytranslate"),t.qZA()(),t.TgZ(86,"div",55),t._UZ(87,"input",56),t.TgZ(88,"label",57),t._uU(89),t.ALo(90,"mytranslate"),t.qZA()()()()(),t.TgZ(91,"div",58)(92,"div",48)(93,"label",49),t._uU(94),t.ALo(95,"mytranslate"),t.qZA()(),t.TgZ(96,"div",50)(97,"div",51)(98,"div",52),t._UZ(99,"input",59),t.TgZ(100,"label",60),t._uU(101),t.ALo(102,"mytranslate"),t.qZA()(),t.TgZ(103,"div",55),t._UZ(104,"input",61),t.TgZ(105,"label",62),t._uU(106),t.ALo(107,"mytranslate"),t.qZA()()()()(),t.TgZ(108,"div",63)(109,"div",64)(110,"div",65),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()(),t.YNc(113,Ss,13,15,"ng-container",0),t.YNc(114,Zs,7,4,"ng-template",null,66,t.W1O),t.qZA()(),t.TgZ(116,"div",67)(117,"div",68),t.YNc(118,Es,3,4,"button",69),t.TgZ(119,"button",70),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveNewOrConfigHomework(1))}),t._uU(120),t.ALo(121,"mytranslate"),t.qZA()()()()()()()}if(2&o){const e=t.MAs(43),n=t.MAs(58),i=t.MAs(115),a=t.oxw();t.xp6(1),t.Q6J("formGroup",a.form),t.xp6(4),t.hij(" ",t.lcZ(6,26,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,28,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,30,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",a.form.controls.homeworkName.errors),t.xp6(4),t.hij(" ",t.lcZ(22,32,"lang_testbank_test_config_time_assigne_homework")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(24,34,"lang_homework_add_home_work_startDate_introduce")),t.xp6(9),t.s9C("placeholder",t.lcZ(33,36,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(15),t.s9C("placeholder",t.lcZ(48,38,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",n),t.xp6(20),t.hij(" ",t.lcZ(68,40,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(72,42,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(2),t.Q6J("ngIf",a.calculatorTimeValidate(a.form.controls.homeworkDeadline.value,a.form.controls.homeworkStartDate.value)<0),t.xp6(4),t.hij(" ",t.lcZ(78,44,"lang_auto_cho_xem_ket_qua")," "),t.xp6(7),t.hij(" ",t.lcZ(85,46,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(90,48,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(95,50,"lang_auto_dang_nhap_de_nop_bai")," "),t.xp6(7),t.hij(" ",t.lcZ(102,52,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(107,54,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(112,56,"lang_auto_giao_cho_lop")," "),t.xp6(2),t.Q6J("ngIf","2"==a.form.controls.whoAllow.value)("ngIfElse",i),t.xp6(5),t.Q6J("ngIf",1!=a.homeworkObj.isPublished),t.xp6(1),t.Q6J("disabled",a.form.invalid||a.checkDeadLineValid(a.form.controls.homeworkStartDate.value,a.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(121,58,"lang_auto_xuat_ban")," ")}}let mo=(()=>{class o extends R.Q{redirectBackTo(){this.onBack.emit()}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}clearTimeStart(){this.form.controls.homeworkStartDate.setValue("")}calculatorTimeValidate(e,n){return""!=e&&""!=n?this.timeService.calculationHomeworkTime(e,n):0}checkDeadLineValid(e,n){return""!=e&&""!=n?this.timeService.getDiffFromTwoDate(n,e):0}saveNewOrConfigHomework(e){var n,i;this.isUpdate?this.updateHomework(e):(this.initStatusObj(),this.homeWorkContent=null!==(i=null===(n=this.createHomeworkEditorData.homework)||void 0===n?void 0:n.content)&&void 0!==i?i:"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(a=>{null==a.errorMessage?(this.homeWorkContent=a.content,this.createHomework(e)):(this.showErrorSnack(a.errorMessage),this.stopStatusObj())}))}updateHomework(e){let n=this.commonService.getFormObj(this.form);n.homeworkStartDate=""===n.homeworkStartDate||null===n.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(n.homeworkStartDate),n.homeworkDeadline=""===n.homeworkDeadline||null===n.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(n.homeworkDeadline);var i=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.homework);const a=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,i,n.classroomIds);this.initStatusObj();let r={name:n.homeworkName,startDate:n.homeworkStartDate,deadline:n.homeworkDeadline,mustVerified:n.mustVerified,whenShowAnswer:parseInt(n.whenShowAnswer),enableUpdateDeadLine:1,classroomIds:2==n.whoAllow?a:void 0,isPublished:e||(null!=this.homeworkObj?this.homeworkObj.isPublished:0)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(r,this.homeworkHashId).subscribe(l=>{var c,_,d,p;if(1==l.success){let w=null!==(c=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==c?c:"";var h=[];if(null!==(_=l.data)&&void 0!==_&&_.objs)for(var f=0;f<l.data.objs.length;f++)h.push(null===(d=l.data)||void 0===d?void 0:d.objs[f].hashId);let k=`/admin/testbank/config-homework/${w??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${w??0}/${JSON.stringify(h)}`,`?backto=${k}`),this.successStatusObj(r.isPublished?"lang_auto_xuat_ban_thanh_cong":"lang_auto_luu_thanh_cong_chua_xuat_ban",!0)}else this.errorStatusObj(null!==(p=l.message)&&void 0!==p?p:"",!0)}))}createHomework(e){var n,i;let a=this.commonService.getFormObj(this.form);a.homeworkStartDate=""===a.homeworkStartDate||null===a.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(a.homeworkStartDate),a.homeworkDeadline=""===a.homeworkDeadline||null===a.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(a.homeworkDeadline);var r=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.homework);const l=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,r,a.classroomIds);if(this.form.invalid)this.showErrorSnack(l.length<=0?"lang_auto_please_select_classroom":"lang_auto_vui_long_nhap_day_du_thong_tin");else{this.initStatusObj();let c=this.userService.getUserObj(),_=JSON.stringify({type:"homework",id:this.homeworkId,user:c.id}),d={name:a.homeworkName,content:this.homeWorkContent,files:null!==(i=null===(n=this.createHomeworkEditorData.homework)||void 0===n?void 0:n.files)&&void 0!==i?i:"",startDate:a.homeworkStartDate,deadline:a.homeworkDeadline,mustVerified:a.mustVerified,whenShowAnswer:parseInt(a.whenShowAnswer),classroomIds:l,isPublished:e,categoryId:this.commonService.getMyParam(this.activeRoute,"cat_id")?Number(this.commonService.getMyParam(this.activeRoute,"cat_id")):0};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(d,_).subscribe(p=>{var h,f,w,k;if(1==p.success){let Q=null!==(h=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==h?h:"";if(d.isPublished){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);var S=[];if(null!==(f=p.data)&&void 0!==f&&f.objs)for(var D=0;D<p.data.objs.length;D++)S.push(null===(w=p.data)||void 0===w?void 0:w.objs[D].hashId);let N=`/admin/testbank/config-homework/${Q??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${Q??0}/${JSON.stringify(S)}`,`?backto=${N}`)}else this.myNavigationWithQueryString("/admin/testbank/document-management/1/0/1",`?backto=/admin/testbank/config-homework/${Q??0}/${this.homeworkHashId}`),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(null!==(k=p.message)&&void 0!==k?k:"",!0)}))}}getHomework(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost([],e).subscribe(n=>{var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W;if(1==n.success){this.classroomObjs=null!==(a=null===(i=n?.data)||void 0===i?void 0:i.classroomObjs)&&void 0!==a?a:new Array,this.homeworkObj=null!==(l=null===(r=n?.data)||void 0===r?void 0:r.homeworkObj)&&void 0!==l?l:{};let X=null!==(_=null===(c=this.homeworkObj)||void 0===c?void 0:c.classroomId)&&void 0!==_?_:0;if(X){for(let J=0;J<this.classroomObjs.length;J++)if(this.classroomObjs[J].id==X){this.classroomObj=this.classroomObjs[J];break}}else this.classroomObj=this.classroomObjs.length>0?this.classroomObjs[0]:{};this.createHomeworkEditorData=this.isUpdate?this.createHomeworkEditorData:this.editorOutputDataService.getOutputData();let E=null!==(f=null!==(p=null===(d=this.createHomeworkEditorData.homework)||void 0===d?void 0:d.name)&&void 0!==p?p:null===(h=this.homeworkObj)||void 0===h?void 0:h.name)&&void 0!==f?f:"";this.form.patchValue({homeworkName:E,homeworkStartDate:null!=(null===(w=this.homeworkObj)||void 0===w?void 0:w.startDate)?null===(k=this.homeworkObj)||void 0===k?void 0:k.startDate:"",homeworkDeadline:null!=(null===(S=this.homeworkObj)||void 0===S?void 0:S.deadline)?null===(D=this.homeworkObj)||void 0===D?void 0:D.deadline:"",mustVerified:1==(null===(Q=this.homeworkObj)||void 0===Q?void 0:Q.mustVerified)?"1":"0",whenShowAnswer:1==(null===(N=this.homeworkObj)||void 0===N?void 0:N.whenShowAnswer)?"1":"0",whoAllow:null!==(q=n.data)&&void 0!==q&&q.hasStudentAnswers&&this.isUpdate?"1":"2"}),this.successStatusObj()}else this.errorStatusObj(null!==(W=n.message)&&void 0!==W?W:"",!0)}))}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.homeworkHashId?(this.isUpdate=!0,this.getHomework(this.homeworkHashId)):(this.isUpdate=!1,this.getHomework("add_new")),this.form=this.formBuilder.group({homeworkName:new m.p4("",[m.kI.required,wn._.noWhiteSpace]),homeworkStartDate:new m.p4(""),homeworkDeadline:new m.p4(""),mustVerified:new m.p4("0"),whoAllow:new m.p4(this.isUpdate?"1":"2"),whenShowAnswer:new m.p4("1"),classroomIds:this.formBuilder.array([])},{validators:[Pi.h.classroomCheckBoxValidator]})}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p){super(e),this.commonService=e,this.formBuilder=n,this.activeRoute=i,this.timeService=a,this.documentConfigService=r,this.editorOutputDataService=l,this.homeworkService=c,this.userService=_,this.sEAztClassroomCheckboxService=d,this.uploadImageOfHomeworkService=p,this.onBack=new t.vpe,this.form=new m.nJ({}),this.permissionTypes=ze.$,this.homeworkId=0,this.homeworkHashId="",this.classroomObjs=[],this.classroomObj={},this.homeworkObj={},this.isUpdate=!1,this.homeWorkContent="",this.createHomeworkEditorData={}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS),t.Y36(C.gz),t.Y36(Ae.O),t.Y36(xt.Cq),t.Y36(pn),t.Y36(xt.Lk),t.Y36(hn.K),t.Y36(Li.L),t.Y36(uo.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["main-config-homework"]],outputs:{onBack:"onBack"},features:[t._Bn([{provide:Re.fM,useClass:Ii.HF,deps:[Ei.Ad,Zi.o8]},{provide:Re.ab,useFactory:Mi.hx,deps:[Ae.O]}]),t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto","p-5",2,"max-width","1000px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","main-config-7OYF4TAsq1","matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-wVzabbXyPl2","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],["startTime",""],["azt-track-service","main-config-mBwAoax2xyu","matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-L6psEhMGCUO","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","main-config-_41QHswfgPw",1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified","value","0",1,"form-check-input"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified","value","1",1,"form-check-input"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],["elseAllowed",""],[1,"my-5"],[1,"text-right"],["azt-track-service","main-config-xaAyYXPj2ZT","class","btn btn-pending w-24 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","main-config-3CEX8CXtLDk",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"col-span-12","mt-4","intro-y"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","ngClass"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],[1,"col-span-12","mt-4"],[1,"bg-slate-100","dark:bg-darkmode-600","rounded-md","p-3"],[1,"text-md"],[1,"text-md","font-medium"],["azt-track-service","main-config-xaAyYXPj2ZT",1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.YNc(0,bs,1,0,"azt-loading-effect",0),t.YNc(1,Is,122,60,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.mk,y.O5,xe.v_,xe.nX,Kn.k0,Qt.Kd,Re.AB,Re.g2,P.KC,m._Y,m.Fj,m._,m.JJ,m.JL,m.sg,m.u,m.CE,zt.Q,Jt.M,Wn.o,Vn.g,tt.bT],encapsulation:2}),o})();var Ms=T(61227),Ke=T(44262);function Ps(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14)(3,"line",15)(4,"line",16)(5,"line",17),t.qZA())}function Ls(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14),t.qZA())}function js(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,Ps,6,0,"svg",11),t.YNc(2,Ls,3,0,"svg",11),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==(null==e.dataObj.homework?null:e.dataObj.homework.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.homework?null:e.dataObj.homework.isPublished))}}function Ns(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",20),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14)(4,"path",21),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function qs(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",22),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function Qs(o,s){if(1&o&&(t.YNc(0,Ns,5,3,"svg",18),t.YNc(1,qs,4,3,"svg",19)),2&o){const e=t.oxw();t.Q6J("ngIf",1==(null==e.dataObj.exam?null:e.dataObj.exam.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.exam?null:e.dataObj.exam.isPublished))}}function Ds(o,s){if(1&o&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(4,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_nop_bai"),": ",e.dataObj.deadline?t.lcZ(3,4,e.dataObj.deadline):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function Us(o,s){if(1&o&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_lam_bai"),": ",null!=e.dataObj.exam&&e.dataObj.exam.minutes?(null==e.dataObj.exam?null:e.dataObj.exam.minutes)+" "+t.lcZ(3,4,"lang_auto_phut"):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function Fs(o,s){if(1&o&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&o){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_luot_lam")),t.xp6(2),t.hij(" ",e.dataObj.submited+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_luot_lam"))}}function Rs(o,s){if(1&o&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&o){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_da_nop")),t.xp6(2),t.hij(" ",e.dataObj.submited+"/"+e.dataObj.total+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_da_nop"))}}const zs=function(o){return{"bg-slate-100 dark:bg-darkmode-400":o}};let ji=(()=>{class o extends R.Q{ngOnInit(){super.ngOnInit()}constructor(e){super(e),this.commonService=e,this.dataObj={},this.showByClass=!1,this.viewType=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-file-item"]],inputs:{dataObj:"dataObj",showByClass:"showByClass",viewType:"viewType"},features:[t.qOj],decls:19,vars:19,consts:[[1,"box","p-3","flex","items-center","zoom-in",2,"min-height","102px",3,"ngClass"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],[4,"ngIf","ngIfElse"],["ExamIcon",""],[1,"ml-4","mr-auto","w-2/3"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium"],[3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-primary","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-primary"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["class","w-10 h-10 text-pending lucide","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","text-pending","lucide",3,"matTooltip"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-pending",3,"matTooltip"],[3,"matTooltip"],[1,"azt-hidden"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,js,3,2,"div",2),t.YNc(3,Qs,2,2,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"div",5,6),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(14,Ds,5,8,"div",8),t.YNc(15,Us,5,8,"div",8),t.qZA(),t.TgZ(16,"div",9),t.YNc(17,Fs,6,7,"span",10),t.YNc(18,Rs,6,7,"span",10),t.qZA()()),2&e){const i=t.MAs(4),a=t.MAs(7);t.Q6J("ngClass",t.VKq(17,zs,"classroom"==n.viewType)),t.xp6(2),t.Q6J("ngIf","homework"==n.dataObj.type)("ngIfElse",i),t.xp6(4),t.s9C("matTooltip",n.dataObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(2),t.hij(" ",n.dataObj.name," "),t.xp6(3),t.AsE("",t.lcZ(12,13,"lang_auto_ngay_tao"),": ",t.lcZ(13,15,n.dataObj.createdAt),""),t.xp6(3),t.Q6J("ngIf","homework"==n.dataObj.type),t.xp6(1),t.Q6J("ngIf","exam"==n.dataObj.type),t.xp6(2),t.Q6J("ngIf","exam"==n.dataObj.type),t.xp6(1),t.Q6J("ngIf","homework"==n.dataObj.type)}},dependencies:[y.mk,y.O5,Qt.Kd,Ke.Q,tt.bT,tt.tO],encapsulation:2}),o})();var Xn=T(51178);function Js(o,s){1&o&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const Bs=function(o){return[o]},Hs=function(o){return{backto:o}};function Ys(o,s){if(1&o&&(t.TgZ(0,"div",17)(1,"a",18),t.ALo(2,"localize"),t._UZ(3,"azt-file-item",19),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3);let i;t.xp6(1),t.Q6J("routerLink",t.lcZ(2,5,t.VKq(7,Bs,"exam"==e.type?"/admin/testbank/exam-results-list/"+(null!==(i=null==e.exam?null:e.exam.categoryId)&&void 0!==i?i:0)+"/"+(null==e.exam?null:e.exam.id)+"/0":"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(9,Hs,"/admin/testbank/document-management/"+("exam"==e.type?"0":"1")+"/"+n.currentCategoryId+"/1")),t.xp6(2),t.Q6J("dataObj",e)("showByClass",!0)("viewType","classroom")}}function Gs(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",15),t.YNc(2,Ys,4,11,"div",16),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",e.recommendDataObjs)}}function $s(o,s){1&o&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_homework_classroom_list_not_found_homework")," "))}const Ks=function(o){return{cursor:o}};function Ws(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6,7),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToClass(a))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.YNc(7,Js,3,3,"span",8),t.ALo(8,"fullPermission"),t.TgZ(9,"div",9)(10,"button",10),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.viewAllDocumentClass(a))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",11),t.YNc(14,Gs,3,1,"div",12),t.YNc(15,$s,3,3,"ng-template",null,13,t.W1O),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.MAs(4),i=t.MAs(16),a=t.oxw();t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("ngStyle",t.VKq(16,Ks,e.id?"pointer":"default"))("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,9,e.name)," "),t.xp6(2),t.Q6J("ngIf",0==a.checkPermissionObj(t.xi3(8,11,e.permissionObj,"classroom"))),t.xp6(4),t.hij(" ",t.lcZ(12,14,"lang_auto_xem_tat_ca")," "),t.xp6(3),t.Q6J("ngIf",e.recommendDataObjs&&e.recommendDataObjs.length>0)("ngIfElse",i)}}const Vs=function(){return["name"]};let Xs=(()=>{class o extends R.Q{constructor(e,n,i,a){super(e),this.commonService=e,this.activeRoute=n,this.dialog=i,this.documentService=a,this.cateObjs=[],this.classroomWithDocument=[],this.viewType=1,this.isOnLib=0,this.ExistClipboard=!1,this.searchKey="",this.isShowContextmenu=!1,this.isSort=!1,this.isSortByPublish=!1,this.isSortByPrice=!1,this.isSortByDateUpdated=!1,this.isSortByAttended=!1,this.currentCategoryId=0,this.page=0,this.dataDialogWarning={isShow:!1,content:""},this.demoData=[]}checkPermissionObj(e){return e}goToClass(e){e.id&&this.commonService.myNavigationWithQueryString("/admin/student/class-details/"+e.id,"?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.page}`))}viewAllDocumentClass(e){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+e.id+"/1","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.page}`))}getDataForClasses(){this.initStatusObj(),this.documentService.apiDocumentsGet(this.currentCategoryId,"category").subscribe(e=>{var n,i,a;1==e.success?(this.cateObjs=null!==(i=null===(n=e.data)||void 0===n?void 0:n.categoryObjs)&&void 0!==i?i:[],this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"",!0)})}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.page=Number(this.commonService.getMyParam(this.activeRoute,"page"))}),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"})}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(U.on),t.Y36(Ms.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-folder-and-classes"]],inputs:{classroomWithDocument:"classroomWithDocument",viewType:"viewType",isOnLib:"isOnLib",ExistClipboard:"ExistClipboard",searchKey:"searchKey"},features:[t.qOj],decls:4,vars:7,consts:[["id","contentent-view-2"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3"],[1,"box",2,"min-height","300px"],[1,"flex","items-center","p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-classes-b2nw0JUA5LF",1,"font-medium","truncate","text-md",2,"max-width","40%",3,"ngStyle","matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-auto"],["azt-track-service","folder-and-classes-jpGtWYvPZzj",1,"btn","btn-outline-primary","btn-transparent","p-2",3,"click"],[1,"p-3"],[4,"ngIf","ngIfElse"],["noDocumentData",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12 intro-y",4,"ngFor","ngForOf"],[1,"col-span-12","intro-y"],["azt-track-service","folder-and-classes-M4tBKNEyrqt",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-3","text-center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,Ws,17,18,"div",2),t.ALo(3,"appFilter"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.gM2(3,1,n.classroomWithDocument,n.searchKey,t.DdM(6,Vs),!0)))},dependencies:[C.rH,y.sg,y.O5,y.PC,Qt.Kd,ji,Ke.Q,Xn.lO,tt.bT,tt.gB,tt.Gf],encapsulation:2}),o})();var po=T(85003);let tr=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n}onNoClick(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["multiple-delete-confirm"]],decls:35,vars:22,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"font-medium"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[2,"text-transform","lowercase"],[1,"p-3","text-right"],["azt-track-service","multiple-delete-dialog-NgJ73bNleKj",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","multiple-delete-dialog-zU2F66X2jAh",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t.kcU(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"span",10),t._uU(14),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"div",11)(18,"p",12)(19,"span"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"span",13),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()()()()(),t.TgZ(28,"div",14)(29,"button",15),t.NdJ("click",function(){return n.onNoClick()}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA(),t.TgZ(32,"button",16),t.NdJ("click",function(){return n.onAccept()}),t._uU(33),t.ALo(34,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,8,"lang_auto_ban_co_chac_chan_muon_xoa")," "),t.xp6(3),t.Oqu(n.data.totalSelected+" "),t.xp6(1),t.hij(" ",t.lcZ(16,10,"lang_auto_tai_lieu_vua_chon")," "),t.xp6(5),t.Oqu(t.lcZ(21,12,"lang_auto_khi_xac_nhan")+", "),t.xp6(3),t.hij("",t.lcZ(24,14,"lang_auto_tai_lieu"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(27,16,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),t.xp6(4),t.hij(" ",t.lcZ(31,18,"lang_cms_common_close_btn")," "),t.xp6(3),t.hij(" ",t.lcZ(34,20,"lang_cms_common_confirm_btn")," "))},dependencies:[tt.bT],encapsulation:2}),o})();const er=["class","html"];let nr=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n}onNoClick(){this.dialogRef.close()}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["notice-dialog",8,"html"]],attrs:er,decls:18,vars:12,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],["azt-track-service","notice-dialog-PKBlnv4_Yy_",1,"clickable","ytb--button","clickable",3,"click"],["alt","",1,"img",3,"src"],[1,"text-right","mt-3"],["azt-track-service","notice-dialog-G9Gqu1HVigF",1,"btn","w-24","btn-secondary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",3)(9,"div",5),t.NdJ("click",function(){return n.redirectToYTB()}),t._UZ(10,"img",6),t.ALo(11,"convertCdnLinkOfGitHub"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",7)(15,"button",8),t.NdJ("click",function(){return n.onNoClick()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_testbank_folder_and_file_note_tutorial")),t.xp6(5),t.Q6J("src",t.lcZ(11,6,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(13,8,"lang_testbank_folder_and_file_see_tutorial")," "),t.xp6(4),t.hij("",t.lcZ(17,10,"lang_buttom_close")," "))},dependencies:[tt.bT,tt.Jc],styles:[".img[_ngcontent-%COMP%]{\n    display: initial;\n    vertical-align: middle;\n    margin-right: 5px;\n  }"]}),o})();var ir=T(51541),Tn=T(64425),ti=T(89933);function or(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function ar(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const sr=function(o){return{active:o}},rr=function(o){return{clickable:o}},lr=function(o){return{"truncate-bread":o}};function cr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li",21)(1,"a",22),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goBackParent(a))}),t.TgZ(2,"span",23,24),t.ALo(4,"mytranslate"),t.YNc(5,or,3,3,"span",10),t.YNc(6,ar,2,1,"span",10),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.MAs(3),i=t.oxw();t.Q6J("ngClass",t.VKq(10,sr,e.id==i.categoryId)),t.xp6(1),t.Q6J("ngClass",t.VKq(12,rr,e.id!=i.categoryId)),t.xp6(1),t.s9C("matTooltip",t.lcZ(4,8,e.name)),t.Q6J("ngClass",t.VKq(14,lr,e.id!=i.categoryId))("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(3),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id)}}const _r=function(o){return{"w-full":o}};function dr(o,s){if(1&o&&(t.TgZ(0,"span",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,_r,e.isMobile||e.isMobileWebView)),t.xp6(1),t.AsE("",t.lcZ(2,3,"lang_auto_da_chon")," ",e.totalSelectCopyOrCut,"")}}function ur(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.acceptCopyDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"rect",34)(3,"path",35),t.qZA(),t._uU(4," Copy "),t.qZA()}}function mr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.acceptCutDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"polyline",37)(3,"polyline",38)(4,"polyline",39)(5,"polyline",40)(6,"line",41)(7,"line",42),t.qZA(),t._uU(8," Cut "),t.qZA()}}function pr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handlePasteFolder(i.currentCategoryId))}),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"rect",45)(3,"path",46),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_paste")," "))}function hr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.acceptDeleteDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"path",48)(3,"path",49)(4,"path",50)(5,"line",51)(6,"line",52),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}const gr=function(o){return{"justify-between":o}};function fr(o,s){if(1&o&&(t.TgZ(0,"div",25),t.YNc(1,dr,3,7,"span",26),t.YNc(2,ur,5,0,"button",27),t.YNc(3,mr,9,0,"button",28),t.YNc(4,pr,6,3,"button",29),t.YNc(5,hr,9,3,"button",30),t.qZA()),2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(6,gr,e.isMobile||e.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",e.totalSelectCopyOrCut>0),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType)),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType)&&e.hasClipBoard()),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType))}}function xr(o,s){1&o&&(t.TgZ(0,"div",53)(1,"div",54),t.O4$(),t.TgZ(2,"svg",55),t._UZ(3,"path",56)(4,"path",57)(5,"path",58)(6,"path",59),t.qZA(),t.kcU(),t.TgZ(7,"p",60),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(8),t.hij("",t.lcZ(9,1,"lang_not_found_search"),"!"))}function vr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw(2),r=t.MAs(31);return t.KtG(a.onContextMenu(i,a.currentObj,r))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function br(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",85),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectAllDocument())}),t.qZA()}}function wr(o,s){1&o&&t._UZ(0,"input",86),2&o&&t.Q6J("disabled",!0)}const ln=function(o){return{"text-primary stroke-width-2.5":o}};function Tr(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",88),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleSortByAttended(i.isSortByAttended))}),t.TgZ(2,"span",89),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_number_attended")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,ln,e.isSortByAttended)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,ln,!e.isSortByAttended))}}function Cr(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",90)(2,"div",91),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleSortByPublish(i.isSortByPublish))}),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_status")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,ln,e.isSortByPublish)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,ln,!e.isSortByPublish))}}function kr(o,s){1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",92),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_folder_and_file_delivery_for")," "))}function Or(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",93),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleSortByDateUpdated(i.isSortByDateUpdated))}),t.TgZ(2,"div",94),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_time_update")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,ln,e.isSortByDateUpdated)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,ln,!e.isSortByDateUpdated))}}function yr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2),l=t.MAs(18);return t.KtG(r.onContextMenu(i,a,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("disabled",!e.id||e.id<0||"user"==e.shareType)}}function Ar(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"span",61)(1,"input",114),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(i,a.id,0))}),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function Sr(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,Ar,2,1,"span",113),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",0==e.controls.type.value&&e.controls.id.value==n.id)}}function Zr(o,s){if(1&o&&(t.TgZ(0,"span",112),t.YNc(1,Sr,2,1,"span",78),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function Er(o,s){1&o&&t._UZ(0,"input",115)}function Ir(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",116),t.ALo(2,"mytranslate"),t._UZ(3,"path",117)(4,"path",118)(5,"path",119),t.qZA()()),2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function Mr(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",120),t._UZ(1,"path",121),t.qZA())}function Pr(o,s){1&o&&(t.TgZ(0,"span",122),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}function Lr(o,s){1&o&&(t.TgZ(0,"div",123),t._UZ(1,"div",124),t.qZA())}function jr(o,s){1&o&&(t.TgZ(0,"div",123),t._UZ(1,"div",90),t.qZA())}function Nr(o,s){1&o&&(t.TgZ(0,"div",123),t._UZ(1,"div",125),t.qZA())}function qr(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.updatedAt)," ")}}const Ni=function(o,s){return{"col-span-4":o,"col-span-12":s}},ei=function(o,s){return{"ml-5":o,"ml-3":s}};function Qr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",95)(1,"div",96)(2,"div",97)(3,"div",98)(4,"div",99)(5,"div",100),t.YNc(6,yr,5,1,"button",101),t.YNc(7,Zr,2,1,"span",102),t.ALo(8,"fullPermission"),t.YNc(9,Er,1,0,"ng-template",null,103,t.W1O),t.qZA(),t.TgZ(11,"div",104),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.handleOpenFolder(a))}),t.TgZ(12,"div",105),t.YNc(13,Ir,6,3,"span",106),t.YNc(14,Mr,2,0,"ng-template",null,107,t.W1O),t.qZA(),t.TgZ(16,"div",108,24),t.ALo(18,"mytranslate"),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()(),t.YNc(22,Pr,3,3,"span",109),t.qZA()()(),t.YNc(23,Lr,2,0,"div",110),t.YNc(24,jr,2,0,"div",110),t.YNc(25,Nr,2,0,"div",110),t.YNc(26,qr,4,3,"div",110),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.MAs(10),i=t.MAs(15),a=t.MAs(17),r=t.oxw(2),l=t.MAs(34),c=t.MAs(18);t.s9C("id","folder_"+e.id),t.Q6J("contextMenu",!e.id||e.id<0||"user"==e.shareType?l:c)("contextMenuSubject",e),t.xp6(3),t.Q6J("ngClass",t.WLB(29,Ni,!r.isMobileWebView,r.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",r.isMobile),t.xp6(1),t.Q6J("ngIf",-1!=e.id&&t.xi3(8,22,e.permissionObj,"exam"))("ngIfElse",n),t.xp6(4),t.Q6J("ngClass",t.WLB(32,ei,!r.isMobileWebView,r.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",e.shared)("ngIfElse",i),t.xp6(3),t.s9C("matTooltip",t.lcZ(18,25,e.name)),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(3),t.Tol(r.isMobileWebView&&-1!=e.id?"azt-wv-item-name":""),t.xp6(1),t.Oqu(t.lcZ(21,27,e.name)),t.xp6(2),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView)}}function Dr(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",138),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2),l=t.MAs(21);return t.KtG(r.onContextMenu(i,a.exam,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function Ur(o,s){if(1&o){const e=t.EpF();t.ynx(0,61),t.TgZ(1,"input",139),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(4).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(i,a.exam.id,1))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function Fr(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ur,2,1,"ng-container",113),t.BQk()),2&o){const e=s.$implicit,n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",1==e.controls.type.value&&e.controls.id.value==n.exam.id)}}function Rr(o,s){if(1&o&&(t.TgZ(0,"span",112),t.YNc(1,Fr,2,1,"ng-container",78),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function zr(o,s){1&o&&t._UZ(0,"input",140),2&o&&t.Q6J("disabled",!0)}function Jr(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",141),t.ALo(1,"mytranslate"),t._UZ(2,"path",142)(3,"polyline",143)(4,"path",144),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function Br(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",141),t.ALo(1,"mytranslate"),t._UZ(2,"path",142)(3,"polyline",143),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function Hr(o,s){if(1&o&&(t.TgZ(0,"span",145),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",e.exam.attended," ")}}function Yr(o,s){1&o&&(t.TgZ(0,"div",146),t.O4$(),t.TgZ(1,"svg",147),t.ALo(2,"mytranslate"),t._UZ(3,"path",148)(4,"path",149)(5,"path",150),t.qZA()()),2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function Gr(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",124)(2,"span",151),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.exam.attended," ")}}function $r(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",152)(2,"span",153)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA()()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(1==e.exam.isPublished?t.lcZ(5,1,"lang_testbank_folder_and_file_published"):t.lcZ(6,3,"lang_testbank_folder_and_file_Unpublished"))}}function Kr(o,s){if(1&o&&(t.TgZ(0,"span",156,24),t._uU(2),t.ALo(3,"slice"),t.qZA()),2&o){const e=t.MAs(1),n=t.oxw(3).$implicit,i=t.oxw(2);t.Q6J("matTooltip",i.getClassName(n.exam.classrooms).join(", "))("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.Oqu(i.getClassName(n.exam.classrooms).join(", ").length>100?t.Dn7(3,4,i.getClassName(n.exam.classrooms).join(", "),0,100)+"..":i.getClassName(n.exam.classrooms).join(", "))}}function Wr(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_tat_ca_moi_nguoi")))}function Vr(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",154)(2,"span",153),t.YNc(3,Kr,4,8,"span",155),t.YNc(4,Wr,3,3,"span",10),t.qZA()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Q6J("ngIf",e.exam.classrooms&&e.exam.classrooms.length>0),t.xp6(1),t.Q6J("ngIf",!e.exam.classrooms||0==e.exam.classrooms.length)}}function Xr(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.exam.updatedAt)," ")}}function tl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",128)(1,"div",129)(2,"div",97)(3,"div",98)(4,"div",99)(5,"div",100),t.YNc(6,Dr,5,0,"button",130),t.YNc(7,Rr,2,1,"span",102),t.ALo(8,"fullPermission"),t.ALo(9,"copyPermission"),t.YNc(10,zr,1,1,"ng-template",null,131,t.W1O),t.qZA(),t.TgZ(12,"div",132),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.handleListTestedExam(i.exam))}),t.TgZ(13,"div",133),t.YNc(14,Jr,5,3,"svg",134),t.YNc(15,Br,4,3,"svg",135),t.qZA(),t.TgZ(16,"div",108,24)(18,"span"),t._uU(19),t.qZA(),t.YNc(20,Hr,3,4,"span",136),t.qZA(),t.YNc(21,Yr,6,3,"div",137),t.qZA()()(),t.YNc(22,Gr,4,1,"div",110),t.YNc(23,$r,7,5,"div",110),t.YNc(24,Vr,5,2,"div",110),t.YNc(25,Xr,4,3,"div",110),t.qZA()()()}if(2&o){const e=t.MAs(11),n=t.MAs(17),i=t.oxw().$implicit,a=t.oxw(2),r=t.MAs(34),l=t.MAs(21);t.s9C("id","exam_"+i.exam.id),t.Q6J("contextMenu",!i.exam.permissionObj||a.isEmptyObj(i.exam.permissionObj)?r:l)("contextMenuSubject",i.exam),t.xp6(3),t.Q6J("ngClass",t.WLB(29,Ni,!a.isMobileWebView,a.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",a.isMobile&&null!=i.exam.permissionObj),t.xp6(1),t.Q6J("ngIf",t.xi3(8,23,i.exam.permissionObj,"exam")||t.xi3(9,26,i.exam.permissionObj,"exam"))("ngIfElse",e),t.xp6(5),t.Q6J("ngClass",t.WLB(32,ei,!a.isMobileWebView,a.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",1==i.exam.isPublished),t.xp6(1),t.Q6J("ngIf",1!=i.exam.isPublished),t.xp6(1),t.s9C("matTooltip",i.exam.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",a.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(i.exam.name),t.xp6(1),t.Q6J("ngIf",a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",i.shared),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView)}}function el(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",163),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2),l=t.MAs(28);return t.KtG(r.onContextMenu(i,a.homework,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function nl(o,s){if(1&o){const e=t.EpF();t.ynx(0,61),t.TgZ(1,"input",114),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(4).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(i,a.homework.id,2))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function il(o,s){if(1&o&&(t.ynx(0),t.YNc(1,nl,2,1,"ng-container",113),t.BQk()),2&o){const e=s.$implicit,n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",2==e.controls.type.value&&e.controls.id.value==n.homework.id)}}function ol(o,s){if(1&o&&(t.TgZ(0,"span",112),t.YNc(1,il,2,1,"ng-container",78),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function al(o,s){1&o&&t._UZ(0,"input",164)}function sl(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",165),t._UZ(1,"path",166),t.qZA())}function rl(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",167),t._UZ(1,"path",142)(2,"path",168)(3,"path",169),t.qZA())}function ll(o,s){if(1&o&&(t.TgZ(0,"span",145),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_testbank_folder_and_file_number_attended"),": ",e.homework.count,"/",e.homework.totalStudent," ")}}function cl(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",124)(2,"span",151),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",e.homework.count,"/",e.homework.totalStudent," ")}}function _l(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",152)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(1==e.homework.isPublished?t.lcZ(4,1,"lang_testbank_folder_and_file_published"):t.lcZ(5,3,"lang_testbank_folder_and_file_Unpublished"))}}function dl(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",170)(2,"span",153)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",e.homework.className?e.homework.className:t.lcZ(5,1,"lang_auto_tat_ca_moi_nguoi"),"")}}function ul(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.homework.updatedAt)," ")}}function ml(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",128)(1,"div",129)(2,"div",97)(3,"div",157)(4,"div",124)(5,"div",100),t.YNc(6,el,5,0,"button",158),t.YNc(7,ol,2,1,"span",102),t.ALo(8,"fullPermission"),t.ALo(9,"copyPermission"),t.YNc(10,al,1,0,"ng-template",null,159,t.W1O),t.qZA(),t.TgZ(12,"div",160),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.handleHomeworkScoreList(i.homework))}),t.TgZ(13,"div",133),t.YNc(14,sl,2,0,"svg",161),t.YNc(15,rl,4,0,"svg",162),t.qZA(),t.TgZ(16,"div",108,24)(18,"span"),t._uU(19),t.qZA(),t.YNc(20,ll,3,5,"span",136),t.qZA()()()(),t.YNc(21,cl,4,2,"div",110),t.YNc(22,_l,6,5,"div",110),t.YNc(23,dl,6,3,"div",110),t.YNc(24,ul,4,3,"div",110),t.qZA()()()}if(2&o){const e=t.MAs(11),n=t.MAs(17),i=t.oxw().$implicit,a=t.oxw(2),r=t.MAs(28);t.s9C("id","homework_"+i.homework.id),t.Q6J("contextMenu",r)("contextMenuSubject",i.homework),t.xp6(6),t.Q6J("ngIf",a.isMobile),t.xp6(1),t.Q6J("ngIf",t.xi3(8,21,i.homework.permissionObj,"homework")||t.xi3(9,24,i.homework.permissionObj,"homework"))("ngIfElse",e),t.xp6(5),t.Q6J("ngClass",t.WLB(27,ei,!a.isMobileWebView,a.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",1==i.homework.isPublished),t.xp6(1),t.Q6J("ngIf",1!=i.homework.isPublished),t.xp6(1),t.s9C("matTooltip",i.homework.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",a.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(i.homework.name),t.xp6(1),t.Q6J("ngIf",a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!a.isMobileWebView)}}function pl(o,s){if(1&o&&(t.ynx(0),t.YNc(1,tl,26,35,"div",127),t.YNc(2,ml,25,30,"div",127),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf","exam"==e.type&&e.exam),t.xp6(1),t.Q6J("ngIf","homework"==e.type&&e.homework)}}const hl=function(o,s){return{"overflow-x-auto":o,"overflow-x-hidden":s}},ho=function(o){return{"min-width":o}},Cn=function(){return["name"]};function gl(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",61)(2,"div",62)(3,"div",63)(4,"div",64)(5,"div",65),t.YNc(6,vr,5,0,"button",66),t.YNc(7,br,1,0,"input",67),t.YNc(8,wr,1,1,"ng-template",null,68,t.W1O),t.TgZ(10,"div",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSort(i.isSort))}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",70),t.O4$(),t.TgZ(14,"svg",71),t._UZ(15,"polyline",72),t.qZA(),t.TgZ(16,"svg",73),t._UZ(17,"polyline",74),t.qZA()()()(),t.YNc(18,Tr,10,9,"div",75),t.YNc(19,Cr,10,9,"div",75),t.YNc(20,kr,4,3,"div",75),t.YNc(21,Or,10,9,"div",75),t.qZA()(),t.kcU(),t.TgZ(22,"div",76),t.YNc(23,Qr,27,35,"div",77),t.ALo(24,"appFilter"),t.YNc(25,pl,3,2,"ng-container",78),t.ALo(26,"appFilter"),t.qZA(),t._UZ(27,"div",79),t.qZA()(),t.BQk()}if(2&o){const e=t.MAs(9),n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngClass",t.WLB(28,hl,!n.isMobileWebView,n.isMobileWebView)),t.xp6(1),t.Q6J("ngStyle",t.VKq(31,ho,n.isMobileWebView?"":"1100px")),t.xp6(2),t.Q6J("ngClass",t.WLB(33,Ni,!n.isMobileWebView,n.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",n.isMobile),t.xp6(1),t.Q6J("ngIf",-1!=n.currentCategoryId&&(!n.shareType||"owner"==n.shareType))("ngIfElse",e),t.xp6(3),t.Q6J("ngClass",t.WLB(36,ei,!n.isMobileWebView,n.isMobileWebView)),t.xp6(1),t.hij(" ",t.lcZ(12,18,"lang_testbank_folder_and_file_name")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(39,ln,n.isSort)),t.xp6(2),t.Q6J("ngClass",t.VKq(41,ln,!n.isSort)),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngStyle",t.VKq(43,ho,n.isMobileWebView?"":"1100px")),t.xp6(1),t.Q6J("ngForOf",t.Dn7(24,20,n.cateObjs,n.searchKey,t.DdM(45,Cn))),t.xp6(2),t.Q6J("ngForOf",t.Dn7(26,24,n.documentObjs,n.searchKey,t.DdM(46,Cn)))}}function fl(o,s){if(1&o&&t._UZ(0,"azt-share",175),2&o){const e=t.oxw(2).$implicit;t.Q6J("objectCodeType",4)("objectCode","CATEGORY")("objectId",e.id)("categoryWithPermissionObj",e)}}function xl(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",176),t.qZA())}function vl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",177),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleEditFolder(i))}),t.O4$(),t.TgZ(2,"svg",178),t._UZ(3,"path",179)(4,"path",180),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_buttom_edit")," "))}function bl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",181),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCopyFolder(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",182)(4,"path",183),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function wl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",184),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCutFolder(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&o&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function Tl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",185),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePasteFolder(i.id))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",45)(4,"path",46),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function Cl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",186),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.removeAllCutOrCopy())}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"circle",187)(4,"line",188)(5,"line",189),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function kl(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",176),t.qZA())}function Ol(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",190),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleDeleteFolder(i,0))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function yl(o,s){if(1&o&&(t.TgZ(0,"div",172)(1,"ul",173)(2,"li"),t.YNc(3,fl,1,4,"azt-share",174),t.ALo(4,"sharePermission"),t.qZA(),t.YNc(5,xl,2,0,"li",10),t.ALo(6,"fullPermission"),t.YNc(7,vl,7,3,"li",10),t.ALo(8,"editPermission"),t.YNc(9,bl,7,3,"li",10),t.ALo(10,"copyPermission"),t.YNc(11,wl,11,3,"li",10),t.ALo(12,"deletePermission"),t.YNc(13,Tl,7,3,"li",10),t.ALo(14,"editPermission"),t.YNc(15,Cl,8,3,"li",10),t.ALo(16,"editPermission"),t.YNc(17,kl,2,0,"li",10),t.ALo(18,"fullPermission"),t.YNc(19,Ol,10,3,"li",10),t.ALo(20,"deletePermission"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(3),t.Q6J("ngIf",t.xi3(4,9,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(6,12,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(8,15,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(10,18,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,21,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,24,1==n.hasClipBoard()&&!n.checkPasteFunc(e.id)&&e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,27,n.hasClipBoard()&&e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,30,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,33,e.permissionObj,"category"))}}function Al(o,s){if(1&o&&t.YNc(0,yl,21,36,"div",171),2&o){const e=t.oxw();t.Q6J("ngIf",0==e.isOnLib)}}function Sl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",194),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleShowExam(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"circle",187)(4,"line",195)(5,"line",196),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_xem_noi_dung_de")," "))}function Zl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",197),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleListTestedExam(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",198)(4,"circle",199)(5,"path",200)(6,"path",201),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function El(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",202),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCopyLinkExam(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",203)(4,"path",204),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("cdkCopyToClipboard",n.copyLink(e)),t.xp6(4),t.hij(" ",t.lcZ(6,2,"lang_auto_copy_link")," ")}}function Il(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",176),t.qZA())}function Ml(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",205),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleConfigExam(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",206)(4,"path",207)(5,"path",208)(6,"path",209)(7,"path",210)(8,"path",211)(9,"path",212)(10,"path",213)(11,"path",214)(12,"path",215)(13,"path",216)(14,"path",217)(15,"path",218)(16,"path",219),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()}2&o&&(t.xp6(17),t.hij(" ",t.lcZ(18,1,"lang_auto_cai_dat")," "))}function Pl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",220),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleEditExam(i.id))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",221)(4,"path",222),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function Ll(o,s){1&o&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"polyline",224),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.BQk()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function jl(o,s){1&o&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"line",225)(3,"line",226),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.BQk()),2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function Nl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",223),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePublishExam(i))}),t.YNc(2,Ll,5,3,"ng-container",10),t.YNc(3,jl,6,3,"ng-container",10),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",0==e.isPublished),t.xp6(1),t.Q6J("ngIf",1==e.isPublished)}}function ql(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",227),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleStatisticalExam(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",228)(4,"path",229),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_thong_ke")," "))}function Ql(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",176),t.qZA())}function Dl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",230),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCopyExam(i))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"rect",34)(4,"path",35),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function Ul(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",231),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCutExam(i))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&o&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function Fl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",232),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleDeleteExam(i,1))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function Rl(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",176),t.qZA())}function zl(o,s){if(1&o&&(t.TgZ(0,"div",193)(1,"ul",173),t.YNc(2,Sl,8,3,"li",10),t.ALo(3,"viewPermission"),t.YNc(4,Zl,9,3,"li",10),t.ALo(5,"configAndViewPermission"),t.ALo(6,"configAndMarkPermission"),t.ALo(7,"viewPermission"),t.ALo(8,"configPermission"),t.YNc(9,El,7,4,"li",10),t.ALo(10,"viewPermission"),t.ALo(11,"configPermission"),t.YNc(12,Il,2,0,"li",10),t.ALo(13,"editPermission"),t.ALo(14,"configPermission"),t.YNc(15,Ml,19,3,"li",10),t.ALo(16,"editPermission"),t.YNc(17,Pl,7,3,"li",10),t.ALo(18,"editPermission"),t.YNc(19,Nl,4,2,"li",10),t.ALo(20,"editPermission"),t.YNc(21,ql,7,3,"li",10),t.ALo(22,"statisticalPermission"),t.YNc(23,Ql,2,0,"li",10),t.ALo(24,"copyPermission"),t.ALo(25,"fullPermission"),t.ALo(26,"deletePermission"),t.YNc(27,Dl,7,3,"li",10),t.ALo(28,"copyPermission"),t.YNc(29,Ul,11,3,"li",10),t.ALo(30,"fullPermission"),t.YNc(31,Fl,10,3,"li",10),t.ALo(32,"deletePermission"),t.YNc(33,Rl,2,0,"li",10),t.ALo(34,"configPermission"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngIf",t.xi3(3,13,e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(5,16,e.permissionObj,"exam")||t.xi3(6,19,e.permissionObj,"exam")||t.xi3(7,22,e.permissionObj,"exam")||t.xi3(8,25,e.permissionObj,"exam"))),t.xp6(5),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(10,28,e.permissionObj,"exam")||t.xi3(11,31,e.permissionObj,"exam"))),t.xp6(3),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(13,34,e.permissionObj,"exam")||t.xi3(14,37,e.permissionObj,"exam"))),t.xp6(3),t.Q6J("ngIf",t.xi3(16,40,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,43,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,46,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(22,49,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(24,52,e.permissionObj,"exam")||t.xi3(25,55,e.permissionObj,"exam")||t.xi3(26,58,e.permissionObj,"exam"))),t.xp6(4),t.Q6J("ngIf",t.xi3(28,61,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(30,64,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(32,67,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==n.isOnLib&&t.xi3(34,70,e.permissionObj,"exam"))}}function Jl(o,s){if(1&o&&t.YNc(0,zl,35,73,"div",192),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("ngIf",null!=e.permissionObj||1==n.isOnLib)}}function Bl(o,s){1&o&&(t.TgZ(0,"li")(1,"a",235),t._uU(2),t.ALo(3,"mytranslate"),t.O4$(),t.TgZ(4,"svg",236),t._UZ(5,"polyline",237),t.qZA()()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_them")," "))}function Hl(o,s){if(1&o&&(t.TgZ(0,"div",234)(1,"ul",173),t.YNc(2,Bl,6,3,"li",10),t.ALo(3,"configPermission"),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",t.xi3(3,1,e.permissionObj,"exam"))}}function Yl(o,s){if(1&o&&(t.YNc(0,Hl,4,4,"div",233),t.ALo(1,"configPermission")),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("ngIf",0==n.isOnLib&&t.xi3(1,1,e.permissionObj,"exam"))}}function Gl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",239),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw();return t.KtG(a.handleGoToPowerPoint(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",240)(4,"polygon",241),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_insert_into_powerpoint")," "))}function $l(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",242),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw();return t.KtG(a.handleConfigClassroom(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"rect",243)(4,"path",244),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_configuration_class")," "))}function Kl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",245),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw();return t.KtG(a.handleReturnOfflineShare(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",246)(4,"polyline",143)(5,"path",247)(6,"path",248),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function Wl(o,s){if(1&o&&(t.TgZ(0,"div",238)(1,"ul",173),t.YNc(2,Gl,7,3,"li",10),t.ALo(3,"fullPermission"),t.YNc(4,$l,7,3,"li",10),t.ALo(5,"configPermission"),t.YNc(6,Kl,9,3,"li",10),t.ALo(7,"fullPermission"),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngIf",0==n.isOnLib&&t.xi3(3,3,e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(5,6,0==n.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(7,9,0==n.isOnLib&&e.permissionObj,"exam"))}}function Vl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",249),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleHomeworkScoreList(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",198)(4,"circle",199)(5,"path",200)(6,"path",201),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function Xl(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",250),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCopyLinkHomework(i))}),t.O4$(),t.TgZ(2,"svg",191),t._UZ(3,"path",203)(4,"path",204),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("cdkCopyToClipboard",n.copyLinkHomework(e)),t.xp6(4),t.hij(" ",t.lcZ(6,2,"lang_auto_copy_link")," ")}}function tc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",251),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleConfigHomework(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",206)(4,"path",207)(5,"path",208)(6,"path",209)(7,"path",210)(8,"path",211)(9,"path",212)(10,"path",213)(11,"path",214)(12,"path",215)(13,"path",216)(14,"path",217)(15,"path",218)(16,"path",219),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()}2&o&&(t.xp6(17),t.hij(" ",t.lcZ(18,1,"lang_auto_cai_dat")," "))}function ec(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",252),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleEditHomework(i))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",221)(4,"path",222),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function nc(o,s){1&o&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"polyline",224),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.BQk()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function ic(o,s){1&o&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"line",225)(3,"line",226),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.BQk()),2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function oc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",253),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handlePublishHomework(i))}),t.YNc(2,nc,5,3,"ng-container",10),t.YNc(3,ic,6,3,"ng-container",10),t.qZA()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",0==e.isPublished),t.xp6(1),t.Q6J("ngIf",1==e.isPublished)}}function ac(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",254),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCopyHomework(i))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"rect",34)(4,"path",35),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function sc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",255),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleCutHomework(i))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&o&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function rc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",256),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.handleDeleteHomework(i,2))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function lc(o,s){if(1&o&&(t.TgZ(0,"div",193)(1,"ul",173),t.YNc(2,Vl,9,3,"li",10),t.ALo(3,"configAndViewPermission"),t.ALo(4,"configAndMarkPermission"),t.ALo(5,"viewPermission"),t.ALo(6,"configPermission"),t.YNc(7,Xl,7,4,"li",10),t.ALo(8,"viewPermission"),t.ALo(9,"configPermission"),t.TgZ(10,"li"),t._UZ(11,"hr",176),t.qZA(),t.YNc(12,tc,19,3,"li",10),t.ALo(13,"editPermission"),t.YNc(14,ec,7,3,"li",10),t.ALo(15,"editPermission"),t.YNc(16,oc,4,2,"li",10),t.ALo(17,"editPermission"),t.TgZ(18,"li"),t._UZ(19,"hr",176),t.qZA(),t.YNc(20,ac,7,3,"li",10),t.ALo(21,"copyPermission"),t.YNc(22,sc,11,3,"li",10),t.ALo(23,"fullPermission"),t.YNc(24,rc,10,3,"li",10),t.ALo(25,"deletePermission"),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(3,8,e.permissionObj,"homework")||t.xi3(4,11,e.permissionObj,"homework")||t.xi3(5,14,e.permissionObj,"homework")||t.xi3(6,17,e.permissionObj,"homework"))),t.xp6(5),t.Q6J("ngIf",0==n.isOnLib&&(t.xi3(8,20,e.permissionObj,"homework")||t.xi3(9,23,e.permissionObj,"homework"))),t.xp6(5),t.Q6J("ngIf",t.xi3(13,26,0==n.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(15,29,0==n.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(17,32,0==n.isOnLib&&e.permissionObj,"homework")),t.xp6(4),t.Q6J("ngIf",t.xi3(21,35,0==n.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(23,38,0==n.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(25,41,0==n.isOnLib&&e.permissionObj,"homework"))}}function cc(o,s){if(1&o&&t.YNc(0,lc,26,44,"div",192),2&o){const e=s.$implicit,n=t.oxw();t.Q6J("ngIf",null!=e.permissionObj||1==n.isOnLib)}}function _c(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",257),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handlePasteFolder(i.currentCategoryId))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",45)(4,"path",46),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function dc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",258),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.removeAllCutOrCopy())}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"circle",187)(4,"line",188)(5,"line",189),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function uc(o,s){if(1&o&&(t.TgZ(0,"div",172)(1,"ul",173),t.YNc(2,_c,7,3,"li",10),t.YNc(3,dc,8,3,"li",10),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.hasClipBoard()),t.xp6(1),t.Q6J("ngIf",e.hasClipBoard())}}const mc=function(){return{hidden:"isShowContextmenu == false"}};let pc=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c){super(e),this.commonService=e,this.contextMenuService=n,this.activeRoute=i,this.dialog=a,this.clipboardService=r,this.browserStorageService=l,this.fb=c,this.viewType=0,this.isOnLib=0,this.categoryId=0,this.ExistClipboard=!1,this.searchKey="",this.listBreadcrumb=[],this.totalExam=0,this.openFolder=new t.vpe,this.editFolder=new t.vpe,this.cutFolder=new t.vpe,this.deleteFolder=new t.vpe,this.pasteFolder=new t.vpe,this.checkClipboard=new t.vpe,this.backToAllCategory=new t.vpe,this.backToParentCategory=new t.vpe,this.showExamDetail=new t.vpe,this.tryExam=new t.vpe,this.offlineExam=new t.vpe,this.copyExam=new t.vpe,this.cutExam=new t.vpe,this.copyLinkExam=new t.vpe,this.listTestedExam=new t.vpe,this.publishExam=new t.vpe,this.configExam=new t.vpe,this.configExamClassroom=new t.vpe,this.editExam=new t.vpe,this.deleteExam=new t.vpe,this.goToPowerPoint=new t.vpe,this.statisticalExam=new t.vpe,this.supervisingCandidatesExam=new t.vpe,this.returnOfflineShare=new t.vpe,this.sort=new t.vpe,this.sortByPublish=new t.vpe,this.sortByPrice=new t.vpe,this.sortByDateUpdated=new t.vpe,this.sortByAttended=new t.vpe,this.previewHomework=new t.vpe,this.homeworkScoreList=new t.vpe,this.homeworkCopyLink=new t.vpe,this.configHomework=new t.vpe,this.editHomework=new t.vpe,this.publishHomework=new t.vpe,this.copyHomework=new t.vpe,this.cutHomework=new t.vpe,this.deleteHomework=new t.vpe,this.deleteMultipleDocument=new t.vpe,this.loadApiData=new t.vpe,this.form=new m.nJ({}),this.totalSelectCopyOrCut=0,this.isShowContextmenu=!1,this.isSort=!1,this.isSortByPublish=!1,this.isSortByPrice=!1,this.isSortByDateUpdated=!1,this.isSortByAttended=!1,this.currentCategoryId=0,this.shareType="",this.isMobile=this.commonService.isMobileDevice(),this.dataDialogWarning={isShow:!1,content:""},this.documentSortSaver={isSort:!1,isSortByPublish:!1,isSortByPrice:!1,isSortByDateUpdated:!1,isSortByAttended:!1},this.demoData=[]}get ClipboardObjsFormControls(){return this.form.get("clipboardObjs").controls}hasClipBoard(){let e=this.clipboardService.checkClipboard(),n=!1;return e.forEach(i=>{("copy"==i.action||"cut"==i.action)&&(n=!0)}),n}isEmptyObj(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}checkPasteFunc(e){return this.clipboardService.checkSelfPasteFolder(e)}handleSort(e){this.isSort=!this.isSort,this.documentSortSaver.isSort=this.isSort,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sort.emit(this.isSort)}handleSortByPublish(e){this.isSortByPublish=!this.isSortByPublish,this.documentSortSaver.isSortByPublish=this.isSortByPublish,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByPublish.emit(this.isSortByPublish)}handleSortByPrice(e){this.isSortByPrice=!this.isSortByPrice,this.documentSortSaver.isSortByPrice=this.isSortByPrice,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByPrice.emit(this.isSortByPrice)}handleSortByDateUpdated(e){this.isSortByDateUpdated=!this.isSortByDateUpdated,this.documentSortSaver.isSortByDateUpdated=this.isSortByDateUpdated,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByDateUpdated.emit(this.isSortByDateUpdated)}handleSortByAttended(e){this.isSortByAttended=!this.isSortByAttended,this.documentSortSaver.isSortByAttended=this.isSortByAttended,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByAttended.emit(this.isSortByAttended)}handleOpenFolder(e){this.openFolder.emit(e)}handleEditFolder(e){this.editFolder.emit(e)}handleCutFolder(e){let n=document.getElementById("folder_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,0),this.acceptCutDocument()}handleCopyFolder(e){let n=document.getElementById("folder_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,0),this.acceptCopyDocument()}handleDeleteFolder(e,n){let i=this.commonService.getFormObj(this.form.get("clipboardObjs")),a=0;for(let r=0;r<i.length;r++)i[r].id==e.id&&i[r].type==n&&!i[r].checked&&(i[r].checked=!0,this.totalSelectCopyOrCut++),i[r].checked&&("delete"!=i[r].action&&(i[r].action="delete"),a++);if(this.form.controls.clipboardObjs.setValue(i),a>1){let r=document.getElementById("folder_"+e.id);r&&(r.style.opacity="0.6"),this.acceptDeleteDocument()}else this.deleteFolder.emit(e)}handlePasteFolder(e){this.removeStyleOpacity(),this.pasteFolder.emit(e)}handleCheckClipboard(){this.checkClipboard.emit(!0)}handleStatisticalExam(e){this.statisticalExam.emit(e)}handleSupervisingCandidatesExam(e){this.supervisingCandidatesExam.emit(e)}handleReturnOfflineShare(e){this.returnOfflineShare.emit(e)}handleGoToPowerPoint(e){this.goToPowerPoint.emit(e.id)}handleShowExam(e){this.showExamDetail.emit(e)}handleTryExam(e){this.tryExam.emit(e)}handleOfflineExam(e){this.offlineExam.emit(e)}handleCopyExam(e){let n=document.getElementById("exam_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,1),this.acceptCopyDocument()}handleCutExam(e){let n=document.getElementById("exam_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,1),this.acceptCutDocument()}handleCopyLinkExam(e){this.copyLinkExam.emit(this.copyLink(e))}copyLink(e){return`${this.commonService.getCurrentDomain()}/de-thi/${e.hashId}`}handleListTestedExam(e){this.listTestedExam.emit(e)}handlePublishExam(e){this.publishExam.emit(e)}handleConfigExam(e){this.configExam.emit(e)}handleEditExam(e){this.editExam.emit(e)}handleGoToShare(e){this.configExam.emit(e)}handleDeleteExam(e,n){let i=this.commonService.getFormObj(this.form.get("clipboardObjs")),a=0;for(let l=0;l<i.length;l++)i[l].id==e.id&&i[l].type==n&&!i[l].checked&&(i[l].checked=!0,this.totalSelectCopyOrCut++),i[l].checked&&("delete"!=i[l].action&&(i[l].action="delete"),a++);this.form.controls.clipboardObjs.setValue(i);let r=document.getElementById("exam_"+e.id);r&&(r.style.opacity="0.6"),a>1?this.acceptDeleteDocument():this.deleteExam.emit(e)}handleConfigClassroom(e){this.configExamClassroom.emit(e)}handleHomeworkScoreList(e){this.homeworkScoreList.emit(e)}handleCopyLinkHomework(e){this.homeworkCopyLink.emit(this.copyLinkHomework(e))}copyLinkHomework(e){return`${this.commonService.getCurrentDomain()}/bai-tap/${e.hashId}`}handleConfigHomework(e){this.configHomework.emit(e)}handleEditHomework(e){this.editHomework.emit(e)}handlePublishHomework(e){this.publishHomework.emit(e)}handleCopyHomework(e){let n=document.getElementById("homework_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,2),this.acceptCopyDocument()}handleCutHomework(e){let n=document.getElementById("homework_"+e.id);n&&(n.style.opacity="0.6"),this.changeStageClipboardControl(e.id,2),this.acceptCutDocument()}handleDeleteHomework(e,n){let i=this.commonService.getFormObj(this.form.get("clipboardObjs")),a=0;for(let r=0;r<i.length;r++)i[r].id==e.id&&i[r].type==n&&!i[r].checked&&(i[r].checked=!0,this.totalSelectCopyOrCut++),i[r].checked&&("delete"!=i[r].action&&(i[r].action="delete"),a++);if(this.form.controls.clipboardObjs.setValue(i),a>1){let r=document.getElementById("homework_"+e.id);r&&(r.style.opacity="0.6"),this.acceptDeleteDocument()}else this.deleteHomework.emit(e)}openDialog(){this.dialog.open(nr,{width:"70vh",restoreFocus:!1}).afterClosed().subscribe(n=>{})}openDialogWaring(){this.commonService.getTranslate("lang_auto_hien_tinh_nang_thi_offline_chua_ho_tro_de_thi_docx").subscribe(e=>{this.dataDialogWarning={isShow:!0,content:e}})}getClassName(e){let n=[];return e.forEach(i=>{i.name&&!this.commonService.filterArray(n,i.name)&&n.push(i.name)}),n}onContextMenu(e,n,i){e&&(this.contextMenuService.show.next({anchorElement:e?.target?e.target:void 0,contextMenu:i,event:e,item:n}),e?.preventDefault(),e?.stopPropagation())}getHeightParent(e,n){let i=document.getElementById(n+"_"+e);return i?i.offsetHeight+"px":"auto"}changeStageClipboardControl(e,n){let i=this.commonService.getFormObj(this.form.get("clipboardObjs"));for(let a=0;a<i.length;a++)i[a].type==n&&i[a].id==e&&(i[a].checked||(i[a].checked=!0,this.totalSelectCopyOrCut++));this.form.controls.clipboardObjs.setValue(i)}createFormArrayCopyOrCut(){this.cateObjs&&this.cateObjs.length>0&&this.cateObjs.forEach(e=>{if(e.id&&e.id>0){let n=this.clipboardService.checkChooseDocumentClipboard(e.id,0),i=new m.nJ({id:new m.p4(e.id),name:new m.p4(e.name),type:new m.p4(0),action:new m.p4(this.clipboardService.getActionDocument(e.id,0)),documentType:new m.p4(""),checked:new m.p4(n)});n&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(i)}}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(e=>{var n,i,a,r,l,c,_,d,p,h,f,w;if("exam"==e.type&&e.exam){let k=this.clipboardService.checkChooseDocumentClipboard(null!==(i=null===(n=e.exam)||void 0===n?void 0:n.id)&&void 0!==i?i:0,1),S=new m.nJ({id:new m.p4(null===(a=e.exam)||void 0===a?void 0:a.id),name:new m.p4(null===(r=e.exam)||void 0===r?void 0:r.name),type:new m.p4(1),action:new m.p4(this.clipboardService.getActionDocument(null!==(c=null===(l=e.exam)||void 0===l?void 0:l.id)&&void 0!==c?c:0,1)),documentType:new m.p4(""),checked:new m.p4(k)});k&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(S)}else if("homework"==e.type&&e.homework){let k=this.clipboardService.checkChooseDocumentClipboard(null!==(d=null===(_=e.homework)||void 0===_?void 0:_.id)&&void 0!==d?d:0,2),S=new m.nJ({id:new m.p4(null===(p=e.homework)||void 0===p?void 0:p.id),name:new m.p4(null===(h=e.homework)||void 0===h?void 0:h.name),type:new m.p4(2),action:new m.p4(this.clipboardService.getActionDocument(null!==(w=null===(f=e.homework)||void 0===f?void 0:f.id)&&void 0!==w?w:0,2)),documentType:new m.p4("homework"),checked:new m.p4(k)});k&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(S)}})}selectDocument(e,n,i){let r=document.getElementById((0==i?"folder_":1==i?"exam_":"homework_")+n);e.target.checked?(r&&(r.classList.add("bg-slate-100"),r.classList.add("dark:bg-darkmode-400/70"),r.style.opacity="0.6"),this.totalSelectCopyOrCut++):(this.totalSelectCopyOrCut>0&&this.totalSelectCopyOrCut--,this.clipboardService.removeDocumentOnClipboard(n??0,i),r&&(r.classList.remove("bg-slate-100"),r.classList.remove("dark:bg-darkmode-400/70"),r.style.opacity="1"))}selectAllDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));if(this.commonService.getFormObj(this.form).isSelectAll){this.totalSelectCopyOrCut=0;for(let i=0;i<e.length;i++){let a=0==e[i].type?"folder_":1==e[i].type?"exam_":"homework_";e[i].checked=!0,this.totalSelectCopyOrCut++;let r=document.getElementById(a+e[i].id);r&&(r.style.opacity="0.6")}}else{this.totalSelectCopyOrCut=0;for(let i=0;i<e.length;i++)e[i].checked=!1,this.clipboardService.removeDocumentOnClipboard(e[i].id,e[i].type);this.removeStyleOpacity()}this.form.controls.clipboardObjs.setValue(e)}acceptCopyDocument(){var e;let n=this.commonService.getFormObj(this.form.get("clipboardObjs")),i=0;for(let a=0;a<n.length;a++)n[a].checked&&(this.clipboardService.cutOrCopyObj(n[a].id,n[a].type,"copy",null!==(e=n[a].name)&&void 0!==e?e:void 0),i++);this.commonService.getTranslate("lang_auto_copy_thanh_cong").subscribe(a=>{this.commonService.getTranslate("lang_auto_tai_lieu").subscribe(r=>{this.showSuccessSnack(a+" "+i+" "+r)})})}acceptCutDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs")),n=0;for(let i=0;i<e.length;i++)e[i].checked&&(this.clipboardService.cutOrCopyObj(e[i].id,e[i].type,"cut"),n++);this.commonService.getTranslate("lang_auto_cut_thanh_cong").subscribe(i=>{this.commonService.getTranslate("lang_auto_tai_lieu").subscribe(a=>{this.showSuccessSnack(i+" "+n+" "+a)})})}acceptDeleteDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs")),n=0;for(let i=0;i<e.length;i++)e[i].checked&&(this.clipboardService.cutOrCopyObj(e[i].id,e[i].type,"delete"),n++);n>0&&this.dialog.open(tr,{data:{totalSelected:n},restoreFocus:!1}).afterClosed().subscribe(a=>{!0===a&&this.deleteMultipleDocument.emit(!0)})}removeAllCutOrCopy(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));this.totalSelectCopyOrCut=0;for(let n=0;n<e.length;n++)e[n].checked=!1;this.removeStyleOpacity(),this.form.controls.clipboardObjs.setValue(e),this.clipboardService.donePasteClipboard()}checkCupOrCopyItem(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));for(let n=0;n<e.length;n++)if(e[n].checked){let a=document.getElementById((1==e[n].type?"exam_":2==e[n].type?"homework_":"folder_")+e[n].id);a&&(a.style.opacity="0.6")}}removeStyleOpacity(){let e=document.getElementsByClassName("folder-item"),n=document.getElementsByClassName("exam-item"),i=document.getElementsByClassName("homework-item");for(let a=0;a<e.length;a++)e[a].removeAttribute("style");for(let a=0;a<n.length;a++)n[a].removeAttribute("style");for(let a=0;a<i.length;a++)i[a].removeAttribute("style")}backToAllCate(){this.backToAllCategory.emit()}goBackParent(e){this.backToParentCategory.emit(e)}ngOnChanges(){this.currentObj=this.cateObjs,this.isShowContextmenu=this.ExistClipboard}ngOnInit(){this.form=this.fb.group({clipboardObjs:new m.vC([]),isSelectAll:new m.p4(!1)}),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var n;this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.shareType=null!==(n=this.commonService.getMyQueryParam("shareType"))&&void 0!==n?n:"",this.createFormArrayCopyOrCut()});let e=this.browserStorageService.getSimpleSessionStorage("documentSort");if(e){let n=this.commonService.myParseJson(e);n&&(this.documentSortSaver=n,this.documentSortSaver.isSort&&this.handleSort(!0),this.documentSortSaver.isSortByPublish&&this.handleSortByPublish(!0),this.documentSortSaver.isSortByDateUpdated&&this.handleSortByDateUpdated(!0),this.documentSortSaver.isSortByAttended&&this.handleSortByAttended(!0))}}ngAfterViewInit(){this.contextMenuService.closeAllContextMenus({eventType:"cancel"}),this.checkCupOrCopyItem()}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(u.Lk),t.Y36(C.gz),t.Y36(U.on),t.Y36(ir.Y),t.Y36(Le.z),t.Y36(m.QS))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-folder-and-file-new"]],viewQuery:function(e,n){if(1&e&&(t.Gf(u.GI,5),t.Gf(u.GI,5),t.Gf(u.GI,5),t.Gf(u.GI,5),t.Gf(u.GI,5),t.Gf(u.GI,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.basicMenuCate=i.first),t.iGM(i=t.CRH())&&(n.basicMenuFile=i.first),t.iGM(i=t.CRH())&&(n.basicMenuAll=i.first),t.iGM(i=t.CRH())&&(n.basicMenuCateGrid=i.first),t.iGM(i=t.CRH())&&(n.basicMenuFileGrid=i.first),t.iGM(i=t.CRH())&&(n.basicMenuAllGrid=i.first)}},inputs:{cateObjs:"cateObjs",documentObjs:"documentObjs",viewType:"viewType",isOnLib:"isOnLib",categoryId:"categoryId",ExistClipboard:"ExistClipboard",searchKey:"searchKey",listBreadcrumb:"listBreadcrumb",totalExam:"totalExam"},outputs:{openFolder:"openFolder",editFolder:"editFolder",cutFolder:"cutFolder",deleteFolder:"deleteFolder",pasteFolder:"pasteFolder",checkClipboard:"checkClipboard",backToAllCategory:"backToAllCategory",backToParentCategory:"backToParentCategory",showExamDetail:"showExamDetail",tryExam:"tryExam",offlineExam:"offlineExam",copyExam:"copyExam",cutExam:"cutExam",copyLinkExam:"copyLinkExam",listTestedExam:"listTestedExam",publishExam:"publishExam",configExam:"configExam",configExamClassroom:"configExamClassroom",editExam:"editExam",deleteExam:"deleteExam",goToPowerPoint:"goToPowerPoint",statisticalExam:"statisticalExam",supervisingCandidatesExam:"supervisingCandidatesExam",returnOfflineShare:"returnOfflineShare",sort:"sort",sortByPublish:"sortByPublish",sortByPrice:"sortByPrice",sortByDateUpdated:"sortByDateUpdated",sortByAttended:"sortByAttended",previewHomework:"previewHomework",homeworkScoreList:"homeworkScoreList",homeworkCopyLink:"homeworkCopyLink",configHomework:"configHomework",editHomework:"editHomework",publishHomework:"publishHomework",copyHomework:"copyHomework",cutHomework:"cutHomework",deleteHomework:"deleteHomework",deleteMultipleDocument:"deleteMultipleDocument",loadApiData:"loadApiData"},features:[t.qOj,t.TTD],decls:35,vars:33,consts:[[1,"azt-file-manager"],[1,"mt-3","mb-3","h-auto","sm:h-10","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","folder-and-file-new-F58H12G9GB-",3,"click"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","flex flex-wrap items-center mt-3 sm:mt-0 mr-auto sm:mr-0",3,"ngClass",4,"ngIf"],[1,"table-zone",2,"overflow-x","auto",3,"contextMenu"],["class","box p-5 flex items-center","style","height: 300px; ",4,"ngIf"],[4,"ngIf"],["basicMenuCate",""],["contextMenuItem",""],["basicMenuFile",""],["contextMenuItem","",3,"subMenu"],["subMenuMove",""],["basicMenuHomeworkFile",""],[3,"ngClass","disabled"],["basicMenuAll",""],[3,"disabled"],["disableMenu",""],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","folder-and-file-new-emN2AGc-y20",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","flex-wrap","items-center","mt-3","sm:mt-0","mr-auto","sm:mr-0",3,"ngClass"],["class","inline-block mr-2",3,"ngClass",4,"ngIf"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"inline-block","mr-2",3,"ngClass"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["points","5 9 2 12 5 15"],["points","9 5 12 2 15 5"],["points","15 19 12 22 9 19"],["points","19 9 22 12 19 15"],["x1","2","y1","12","x2","22","y2","12"],["x1","12","y1","2","x2","12","y2","22"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-primary",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["width","84","height","84","viewBox","0 0 84 84","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M38.5 70H14C12.1435 70 10.363 69.2625 9.05025 67.9497C7.7375 66.637 7 64.8565 7 63V17.5C7 13.65 10.15 10.5 14 10.5H27.755C28.9079 10.506 30.0416 10.7966 31.0552 11.3462C32.0687 11.8957 32.9309 12.6871 33.565 13.65L36.435 17.85C37.0691 18.8129 37.9313 19.6043 38.9448 20.1538C39.9584 20.7034 41.092 20.994 42.245 21H70C71.8565 21 73.637 21.7375 74.9497 23.0503C76.2625 24.363 77 26.1435 77 28V42","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M59.5 70C65.299 70 70 65.299 70 59.5C70 53.701 65.299 49 59.5 49C53.701 49 49 53.701 49 59.5C49 65.299 53.701 70 59.5 70Z","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M73.5 73.5L68.25 68.25","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 26V44.3184M16 50V54.7432V50Z","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"font-medium","mt-2"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","folder-and-file-new-py2iPbmv_K9","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["class","form-check-input","type","checkbox","formControlName","isSelectAll",3,"change",4,"ngIf","ngIfElse"],["onShareFolder",""],["azt-track-service","folder-and-file-new-Fh5Xeywt4Vl",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["points","18 15 12 9 6 15"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","-mt-2",3,"ngClass"],["points","6 9 12 15 18 9"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"id","contextMenu","contextMenuSubject",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],["azt-track-service","folder-and-file-new-py2iPbmv_K9",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"change"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"disabled"],[1,"col-span-2"],["azt-track-service","folder-and-file-new-bTOV6xW1dIT",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"flex","mx-auto"],[1,"w-40"],["azt-track-service","folder-and-file-new-C81T6Hn4LB6",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"lg:w-auto","ml-auto"],["azt-track-service","folder-and-file-new-0OUTvRkSwMy",1,"flex","items-center","cursor-pointer","pl-10",3,"click"],[1,"whitespace-nowrap"],[1,"folder-item",3,"id","contextMenu","contextMenuSubject"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"grid","grid-cols-12","gap-3","items-center","px-5"],[3,"ngClass"],[1,"flex-none","flex","items-center","mr-10"],[1,"flex","items-center","py-3"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"disabled","click",4,"ngIf"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],["shareFolder",""],["azt-track-service","folder-and-file-new-UCBI7ziYKss",1,"flex","items-center","py-3","clickable",2,"width","100%",3,"ngClass","click"],[1,"image-fit"],[4,"ngIf","ngIfElse"],["noShare",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["class","col-span-2 py-3",4,"ngIf"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"disabled","click"],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox","disabled","",1,"form-check-input"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","bi","bi-folder-fill",3,"matTooltip"],["d","M9.63852 2H13.62C14.7961 2 15.7183 3.00984 15.6118 4.18107L14.9755 11.1811C14.8818 12.2112 14.0181 13 12.9837 13H2.63653C1.60212 13 0.738391 12.2112 0.64474 11.1811L0.00837643 4.18107C-0.0356793 3.69646 0.0963746 3.23948 0.349653 2.87023L0.310097 2C0.310097 0.895431 1.20553 0 2.3101 0H5.98167C6.5121 0 7.02081 0.210714 7.39588 0.585787L8.22431 1.41421C8.59938 1.78929 9.10809 2 9.63852 2ZM1.31657 2.11964C1.52937 2.04231 1.75945 2 2.00016 2H7.39588L6.68878 1.29289C6.50124 1.10536 6.24689 1 5.98167 1H2.3101C1.76412 1 1.32033 1.43755 1.31027 1.98112L1.31657 2.11964Z","fill","currentColor"],["d","M2.5 12C2.5 12 2 12 2 11.5C2 11 2.5 9.5 5 9.5C7.5 9.5 8 11 8 11.5C8 12 7.5 12 7.5 12H2.5Z","fill","white"],["d","M5 9C5.82843 9 6.5 8.32843 6.5 7.5C6.5 6.67157 5.82843 6 5 6C4.17157 6 3.5 6.67157 3.5 7.5C3.5 8.32843 4.17157 9 5 9Z","fill","white"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","bi","bi-folder-fill"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],[1,"col-span-2","py-3"],[1,"flex-none","flex","items-center","mr-5"],[1,"w-80"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],["class","exam-item",3,"id","contextMenu","contextMenuSubject",4,"ngIf"],[1,"exam-item",3,"id","contextMenu","contextMenuSubject"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-VLcxoWQErXD","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["shareExam",""],["azt-track-service","folder-and-file-new-1sDCbpyZRKl",1,"flex","items-center","py-3","clickable",2,"width","100%",3,"ngClass","click"],[1,"w-6","h-6","image-fit"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","folder-and-file-new-VLcxoWQErXD",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["formControlName","checked","type","checkbox",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-4","h-4","lucide","text-slate-200","dark:text-darkmode-400",2,"padding","3px",3,"matTooltip"],["d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"],["d","M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"],[1,"inbox__item--highlight","mx-auto"],[1,"flex-none","flex","items-center"],[1,"inbox__item--highlight"],[1,"lg:w-auto","truncate"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"col-span-4"],["azt-track-service","folder-and-file-new-k6_FrZt9LrK","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["shareHomework",""],["azt-track-service","folder-and-file-new-VbsMi66DBFK",1,"flex","items-center","py-3","clickable",2,"width","100%",3,"ngClass","click"],["class","w-6 h-6 text-primary bi bi-file-text-fill","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",4,"ngIf"],["class","text-primary bi bi-file-earmark-check-fill","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["azt-track-service","folder-and-file-new-k6_FrZt9LrK",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["type","checkbox","disabled","",1,"form-check-input","flex-none"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","text-primary","bi","bi-file-text-fill"],["d","M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"text-primary","bi","bi-file-earmark-check-fill"],["d","M12 9v4"],["d","M12 17h.01"],[1,"lg:w-auto"],["class","dropdown-menu show w-60 relative p-3",4,"ngIf"],[1,"dropdown-menu","show","w-60","relative","p-3"],[1,"dropdown-content"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj",4,"ngIf"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-dngdKwgVYql",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],["d","M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],["azt-track-service","folder-and-file-new-dMvAkRVjW8P",1,"dropdown-item",3,"click"],["d","M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],["d","M2 8v11c0 1.1.9 2 2 2h14"],["azt-track-service","folder-and-file-new-Eqyg7w3RWjc",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hh3aACvDlTx",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-dpksjYyWqXr",1,"dropdown-item",3,"click"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["azt-track-service","folder-and-file-new-73z5tojbR5l",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["class","dropdown-menu w-60 show relative p-3",4,"ngIf"],[1,"dropdown-menu","w-60","show","relative","p-3"],["azt-track-service","folder-and-file-new-saSjFTRviTc",1,"dropdown-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","folder-and-file-new-0TxDH9uhI5N",1,"dropdown-item",3,"click"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["azt-track-service","folder-and-file-new-Yrb2Iei9P3i",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["azt-track-service","folder-and-file-new-imOSjqX7qwB",1,"dropdown-item",3,"click"],["d","M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],["d","M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],["d","M12 2v2"],["d","M12 22v-2"],["d","m17 20.66-1-1.73"],["d","M11 10.27 7 3.34"],["d","m20.66 17-1.73-1"],["d","m3.34 7 1.73 1"],["d","M14 12h8"],["d","M2 12h2"],["d","m20.66 7-1.73 1"],["d","m3.34 17 1.73-1"],["d","m17 3.34-1 1.73"],["d","m11 13.73-4 6.93"],["azt-track-service","folder-and-file-new-yU7FoiHf8nE",1,"dropdown-item",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","folder-and-file-new-IFDWsvZh0l2",1,"dropdown-item",3,"click"],["points","20 6 9 17 4 12"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["azt-track-service","folder-and-file-new-nI3PRUcmMOn",1,"dropdown-item",3,"click"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","folder-and-file-new-f1MqcshOTmu",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-z4nXVrVuy-s",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-LM51mwt6vZ2",1,"dropdown-item",3,"click"],["class","dropdown-menu show relative p-3","style","margin-top: -38px",4,"ngIf"],[1,"dropdown-menu","show","relative","p-3",2,"margin-top","-38px"],[1,"dropdown-item",2,"cursor","default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-auto"],["points","9 18 15 12 9 6"],[1,"dropdown-menu","show","w-56","relative",2,"margin-left","-5px"],["azt-track-service","folder-and-file-new-PIBIuTYB0c1",1,"dropdown-item",3,"click"],["d","M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],["points","12 15 17 21 7 21 12 15"],["azt-track-service","folder-and-file-new-1pfCD5AevZz",1,"dropdown-item",3,"click"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["azt-track-service","folder-and-file-new-U8OX6yR8aix",1,"dropdown-item",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","folder-and-file-new-v__VS-iYotq",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-jiXhp44NhSY",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["azt-track-service","folder-and-file-new-kV8Cpp2f4yB",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hHK4eqbEIdB",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-kFSsxg0JlA-",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-0sWZoY849CX",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-Cy5tjH-t1d0",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-ByVJRVaby4L",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-wPbmJ8sZGAH",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-or8esZsCIRc",1,"dropdown-item",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),t.NdJ("click",function(){return n.backToAllCate()}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.YNc(8,cr,7,16,"li",6),t.qZA()(),t.YNc(9,fr,6,8,"div",7),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,xr,10,3,"div",9),t.ALo(12,"appFilter"),t.ALo(13,"appFilter"),t.YNc(14,gl,28,47,"ng-container",10),t.ALo(15,"appFilter"),t.ALo(16,"appFilter"),t.qZA()(),t.TgZ(17,"context-menu",null,11),t.YNc(19,Al,1,1,"ng-template",12),t.qZA(),t.TgZ(20,"context-menu",null,13),t.YNc(22,Jl,1,1,"ng-template",12),t.YNc(23,Yl,2,4,"ng-template",14),t.TgZ(24,"context-menu",null,15),t.YNc(26,Wl,8,12,"ng-template",12),t.qZA()(),t.TgZ(27,"context-menu",null,16),t.YNc(29,cc,1,1,"ng-template",12),t.qZA(),t.TgZ(30,"context-menu",17,18),t.YNc(32,uc,4,2,"ng-template",12),t.qZA(),t._UZ(33,"context-menu",19,20)),2&e){const i=t.MAs(25),a=t.MAs(31);let r,l;t.xp6(6),t.hij(" ",t.lcZ(7,10,"lang_auto_tat_ca")," "),t.xp6(2),t.Q6J("ngForOf",n.listBreadcrumb),t.xp6(1),t.Q6J("ngIf",-1!=n.currentCategoryId&&(n.totalSelectCopyOrCut>0||n.hasClipBoard())),t.xp6(1),t.Q6J("contextMenu",a),t.xp6(1),t.Q6J("ngIf",0==(null==(r=t.Dn7(12,12,n.cateObjs,n.searchKey,t.DdM(28,Cn)))?null:r.length)&&0==(null==(r=t.Dn7(13,16,n.documentObjs,n.searchKey,t.DdM(29,Cn)))?null:r.length)),t.xp6(3),t.Q6J("ngIf",0!=(null==(l=t.Dn7(15,20,n.cateObjs,n.searchKey,t.DdM(30,Cn)))?null:l.length)||0!=(null==(l=t.Dn7(16,24,n.documentObjs,n.searchKey,t.DdM(31,Cn)))?null:l.length)),t.xp6(9),t.Q6J("subMenu",i),t.xp6(7),t.Q6J("ngClass",t.DdM(32,mc))("disabled",!n.hasClipBoard()),t.xp6(3),t.Q6J("disabled",!0)}},dependencies:[y.mk,y.sg,y.O5,y.PC,Tn.i3,Qt.Kd,m._Y,m.Wl,m.JJ,m.JL,m.sg,m.u,m.CE,Jt.M,Ke.Q,ti.I,u.HW,u.GI,u.n5,y.OU,tt.bT,tt.gB,tt.Gf,tt.BU,tt.vL,tt.Pz,tt.Jx,tt.I$,tt.El,tt.cW,tt.QE,tt._W,tt.tO],encapsulation:2}),o})();var hc=T(55981);function gc(o,s){if(1&o&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("value",e.id)("selected",e.id==n.form.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function fc(o,s){1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function xc(o,s){if(1&o&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("value",e.id)("selected",e.id==n.form.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function vc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"select",6),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.filterSchoolSubject(i.form.controls.schoolLevel.value))}),t.TgZ(9,"option",7),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.YNc(12,gc,3,5,"option",8),t.qZA(),t.YNc(13,fc,3,3,"div",9),t.qZA(),t.TgZ(14,"div",3)(15,"div",4)(16,"label",5),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"select",10)(20,"option",7),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.YNc(23,xc,3,5,"option",8),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(5),t.hij(" ",t.lcZ(7,11,"lang_auto_khoi_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.form.controls.schoolLevel.value),t.xp6(1),t.hij("",t.lcZ(11,13,"lang_auto_---chon_khoi"),"---"),t.xp6(2),t.Q6J("ngForOf",e.schoolLevelObjs),t.xp6(1),t.Q6J("ngIf",(0==(null==e.form||null==e.form.controls||null==e.form.controls.schoolLevel?null:e.form.controls.schoolLevel.value)||0==(null==e.form||null==e.form.controls||null==e.form.controls.schoolSubject?null:e.form.controls.schoolSubject.value))&&(e.form.controls.schoolLevel.touched||e.form.controls.schoolLevel.dirty)),t.xp6(4),t.hij(" ",t.lcZ(18,15,"lang_auto_mon_hoc")," "),t.xp6(2),t.uIk("disabled",0==e.form.controls.schoolLevel.value?"":null),t.xp6(1),t.Q6J("selected",0==e.form.controls.schoolSubject.value),t.xp6(1),t.hij("",t.lcZ(22,17,"lang_auto_---chon_mon"),"---"),t.xp6(2),t.Q6J("ngForOf",e.subjectSelectedList)}}let Nn=(()=>{class o extends R.Q{constructor(e){super(e),this.commonService=e,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={},this.formControlName="",this.typeView=0,this.subjectSelectedList=[]}filterSchoolSubject(e){var n,i,a;if(0==this.subjectSelectedList.length)this.filterSubject(e??1);else{let r=!1;for(let l=0;l<this.subjectSelectedList.length;l++)e&&(e<(null!==(n=this.subjectSelectedList[l].from)&&void 0!==n?n:0)||e>(null!==(i=this.subjectSelectedList[l].to)&&void 0!==i?i:0))&&(r=!0);r&&(this.filterSubject(e??1),null===(a=this.form)||void 0===a||a.controls.schoolSubject.setValue(0))}}filterSubject(e){let n=this.commonService.myClone(this.schoolSubjectObjs);this.subjectSelectedList=n.filter(i=>!(i.from&&i.to&&e)||e>=i.from&&e<=i.to)}renderData(){var e,n,i,a;if(0==this.typeView)if(this.examSchoolLogObj.id){let r=null!==(e=this.examSchoolLogObj.lastSchoolLevelId)&&void 0!==e?e:0;this.filterSchoolSubject(r??this.schoolLevelObjs[0].id),null===(n=this.form)||void 0===n||n.controls.schoolLevel.setValue(this.examSchoolLogObj.lastSchoolLevelId),null===(i=this.form)||void 0===i||i.controls.schoolSubject.setValue(this.examSchoolLogObj.lastSchoolSubjectId)}else this.filterSchoolSubject(0);else this.filterSchoolSubject(null===(a=this.form)||void 0===a?void 0:a.controls.schoolLevel.value)}ngOnChanges(){(this.schoolLevelObjs||this.subjectSelectedList)&&this.renderData()}ngOnInit(){this.renderData()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["config-level-subject"]],inputs:{form:"form",schoolLevelObjs:"schoolLevelObjs",schoolSubjectObjs:"schoolSubjectObjs",examSchoolLogObj:"examSchoolLogObj",formControlName:"formControlName",typeView:"typeView"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],[1,"form-label","flex","items-center"],["formControlName","schoolLevel",1,"form-select",3,"change"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","text-xs mt-1 text-danger",4,"ngIf"],["formControlName","schoolSubject",1,"form-select"],[3,"value","selected"],[1,"text-xs","mt-1","text-danger"]],template:function(e,n){1&e&&t.YNc(0,vc,24,19,"div",0),2&e&&t.Q6J("ngIf",n.form)},dependencies:[y.sg,y.O5,m._Y,m.YN,m.Kr,m.EJ,m.JJ,m.JL,m.sg,m.u,Jt.M,tt.bT],encapsulation:2}),o})();function bc(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function wc(o,s){1&o&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function Tc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",12),t._UZ(15,"input",13),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,wc,3,3,"div",14),t.qZA()(),t.TgZ(18,"div",15),t._UZ(19,"config-level-subject",16),t.qZA(),t.TgZ(20,"div",17)(21,"div",10)(22,"label",18),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.TgZ(25,"div",10)(26,"div",12),t._UZ(27,"textarea",19),t.ALo(28,"mytranslate"),t.qZA()()()(),t.TgZ(29,"div",20)(30,"div",21)(31,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleDestroy())}),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSubmitData())}),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()()()()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,14,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,16,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,18,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",e.form.controls.generalTitle.errors&&(e.form.controls.generalTitle.dirty||e.form.controls.generalTitle.touched)),t.xp6(2),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("examSchoolLogObj",e.examSchoolLogObj),t.xp6(4),t.hij(" ",t.lcZ(24,20,"lang_auto_mo_ta")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(28,22,"lang_auto_nhap_ten")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(33,24,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||0==e.form.controls.schoolLevel.value||0==e.form.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(36,26,"lang_auto_luu")," ")}}function Cc(o,s){if(1&o&&(t.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"span"),t._UZ(4,"span",28),t._uU(5,"\xa0"),t.qZA(),t.TgZ(6,"div",29),t._uU(7),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(e.logConfig.msg)}}let kc=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c,_,d){super(e),this.commonService=e,this.formBuilder=n,this.editorOutputDataService=i,this.activeRoute=a,this.questionService=r,this.examService=l,this.userService=c,this.questionSaveService=_,this.documentConfigService=d,this.onBack=new t.vpe,this.logConfig={},this.cur_cateId=0,this.backToLink="",this.form=new m.nJ({}),this.dataSave={},this.newListUrls=[],this.contentBase64Count=0,this.countProcess=0,this.actionRunAfterConvert=[],this.saveParts=[],this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={},this.questionSaveService.callbackBase64ToCanvas=(p,h)=>{let f=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${f} ${Math.floor(p/h*100*.7)}%`},this.questionSaveService.callbackUploadImage=(p,h)=>{let f=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${f} ${Math.floor(p/h*100*.3)+70}%`}}ngOnInit(){var e,n,i,a;this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.dataSave=this.editorOutputDataService.getOutputData(),this.GetSubjectAndLevel();let r=null!==(a=null!==(n=null===(e=this.dataSave.exam)||void 0===e?void 0:e.examObj.name)&&void 0!==n?n:null===(i=this.dataSave.homework)||void 0===i?void 0:i.name)&&void 0!==a?a:"";this.form=this.formBuilder.group({generalTitle:new m.p4(r,[m.kI.required,wn._.noWhiteSpace]),generalDescription:new m.p4(""),schoolLevel:new m.p4(0,[m.kI.required]),schoolSubject:new m.p4(0,[m.kI.required])}),super.ngOnInit()}processSaveQuestions(e,n,i){var a,r,l,c,_;if(null!==(a=this.dataSave.exam)&&void 0!==a&&a.questionObj&&null!==(r=this.dataSave.exam)&&void 0!==r&&r.questionObj.listQuestions){var d=null===(l=this.dataSave.exam)||void 0===l?void 0:l.questionObj.listQuestions.length;let p=e+100>d?d:e+100,h=null!==(_=null===(c=this.dataSave.exam)||void 0===c?void 0:c.questionObj.listQuestions.slice(e,p))&&void 0!==_?_:[];h.length>0?this.saveQuestionObjs(h,n).then(f=>{if(f.examConfigs&&f.examConfigs.length>0){let w=i.concat(f.examConfigs);this.processSaveQuestions(p,f.indexSaved,w)}else this.countProcess=0,this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai")}):this.saveExamObj(i)}}saveExamObj(e){if(this.dataSave.exam){let n=!1;this.saveParts=this.saveParts.map(l=>{var c;const _=l.split("_____");return-1!==l.toLocaleLowerCase().indexOf(null!==(c=this.commonService.myTranslateInstant("lang_auto_ngau_nhien"))&&void 0!==c?c:"ng\u1eabu nhi\xean")&&(n=!0),1===_.length?_[0]:_[1]});let i=this.commonService.getFormObj(this.form),a=this.userService.getUserObj(),r=JSON.stringify({type:"exam",id:0,user:a.id});this.dataSave.exam.examObj.scoringMethod="1",this.dataSave.exam.examObj.name=i.generalTitle,this.dataSave.exam.examObj.examConfigs=JSON.stringify(e),this.dataSave.exam.examObj.description=i.generalDescription,this.dataSave.exam.examObj.editorStatus=2,this.dataSave.exam.examObj.metadata=JSON.stringify(this.saveParts),this.dataSave.exam.examObj.isRandomExam=n,this.dataSave.exam.examObj.schoolLevelId=i.schoolLevel,this.dataSave.exam.examObj.schoolSubjectId=i.schoolSubject,this.examService.apiExamSaveObjPost(this.dataSave.exam.examObj,r).subscribe(l=>{var c;if(this.logConfig.status=!1,this.logConfig.msg=void 0,1===l.success){const _=null===(c=l.data)||void 0===c?void 0:c.obj;this.backToLink=`/admin/testbank/azota-editor/${null!=this.cur_cateId?this.cur_cateId:0}`,this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!=this.cur_cateId?this.cur_cateId:0}/${_?.hashId}`,`?backto=${this.backToLink}&isNewDocument=1`)}})}}saveQuestionObjs(e,n){return new Promise(i=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:e}).subscribe(a=>{var r,l,c;if(this.dataSave.exam&&1===a.success&&null!==(r=a.data)&&void 0!==r&&r.objs){const _=[];a.data.objs.forEach((d,p)=>{var h;const f=null===(h=this.dataSave.exam)||void 0===h?void 0:h.examConfig.find(k=>k.name==d.name);if(_.push({id:d.id,name:d.name,groupId:d.groupId,scorePerQuestion:f?.point||1,totalQuestion:1,sort:p+n}),e[p]){const k=e[p];if(k.__path&&k.__path.length>0){const S=k.__path.split("=>")[0].trim();this.saveParts.includes(S)||this.saveParts.push(S)}else this.saveParts.push(`[@Q${d.id}: C\xe2u ${p+n+1}]`)}}),i({indexSaved:(null===(c=null===(l=a.data)||void 0===l?void 0:l.objs)||void 0===c?void 0:c.length)+n,examConfigs:_})}else i({indexSaved:n,examConfigs:[]})})})}startMainProcessSave(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestions(0,0,[])}handleSubmitData(){var e,n;if(this.logConfig.status)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.logConfig.status=!0,this.logConfig.msg=null!==(e=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi"))&&void 0!==e?e:"",this.countProcess=0,this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){const i=this.dataSave.exam.questionObj.listQuestions;let a=null!==(n=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi"))&&void 0!==n?n:"";this.questionSaveService.convertQuestions(i,this.dataSave.exam.rootQuests,(r,l=a,c)=>{this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack(l),c&&this.stopStatusObj()}).then(()=>{this.startMainProcessSave()})}}handleDestroy(){this.onBack.emit()}GetSubjectAndLevel(){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var n,i,a,r,l,c,_;1==e.success?(this.examSchoolLogObj=null!==(i=null===(n=e.data)||void 0===n?void 0:n.examSchoolLogObj)&&void 0!==i?i:{},this.schoolLevelObjs=null!==(r=null===(a=e.data)||void 0===a?void 0:a.schoolLevelObjs)&&void 0!==r?r:[],this.schoolSubjectObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.schoolSubjectObjs)&&void 0!==c?c:[],this.successStatusObj()):this.errorStatusObj(null!==(_=e.message)&&void 0!==_?_:"")}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS),t.Y36(pn),t.Y36(C.gz),t.Y36(xt.aE),t.Y36(xt.Oe),t.Y36(hn.K),t.Y36(Oi),t.Y36(xt.Cq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-info-general"]],outputs:{onBack:"onBack"},features:[t.qOj],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","generalTitle","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","generalDescription",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"mt-5"],[1,"text-right"],["azt-track-service","info-general-j9RyDEucWp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","info-general-ZAzZ6aTX1b",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"mt-2","text-danger","text-xs","fade"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(e,n){if(1&e&&(t.YNc(0,bc,1,0,"azt-loading-effect",0),t.YNc(1,Tc,37,28,"ng-template",null,1,t.W1O),t.YNc(3,Cc,8,1,"div",2)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.logConfig.status)}},dependencies:[y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,zt.Q,Jt.M,Nn,tt.bT],encapsulation:2}),o})();var Oc=T(6834),ke=T(70655),gn=T(17489),yc=T(39087),Ac=T(4128),qi=T(68675),qn=T(54004),ni=T(81319),fo=T(45646);const xo={a:"rgb(0, 0, 255, 0.2)",b:"rgb(255, 165, 0, 0.2)",c:"rgb(0, 128, 0, 0.2)",d:"rgb(128, 0, 128, 0.2)",e:"rgb(255, 255, 0, 0.2)",f:"rgb(0, 0, 255, 0.2)",g:"rgb(0, 128, 0, 0.2)",h:"rgb(128, 0, 128, 0.2)"},vo={A:"B",B:"C",C:"D",D:"E",E:"F",F:"G",G:"H"},Se=100;let Sc=(()=>{class o{getErrorQtns(e){var n=[];for(let i=0;i<e.length;i++)!e[i].isGroup&&0==e[i].answers.length&&(e[i].strAns&&void 0!==e[i].strAns||n.push(e[i].num));return n}sumHighTo(e,n){let i=0,a=n.filter(r=>!r.inactive);for(let r=0;r<e;r++)i+=Math.round(a[r].heigh);return i}maxWidthTo(e,n){let i=[],a=n.filter(r=>!r.inactive);for(let r=0;r<e;r++)i.push(a[r].width);return Math.round(Math.max(...i))}constructor(e,n){this.commonService=e,this.http=n,this.fillColor=(i,a,r,l,c,_)=>{a.fillStyle=i,a.fillRect(Math.round(r),Math.round(l),Math.round(c),Math.round(_))},this.drawRect=(i,a,r,l,c,_)=>{a.beginPath(),a.lineWidth=1,a.strokeStyle=i,a.rect(Math.round(r),Math.round(l),Math.round(c),Math.round(_)),a.stroke()},this.getSingleImgData=(i,a)=>{var r;if(i.inactive){let l=null!==(r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin"))&&void 0!==r?r:"";throw this.commonService.snackError(l),new Error(l)}try{let l=document.createElement("canvas");return l.width=0==i.width?2:Math.round(i.width),l.height=0==i.heigh?2:Math.round(i.heigh),l.getContext("2d")?.drawImage(a[i.pageIndex].canvas,Math.round(i.left),Math.round(i.top),l.width,l.height,0,0,l.width,l.height),l.toDataURL("image/png")}catch(l){return console.log(l),"https://via.placeholder.com/300"}},this.getScatteredImgData=(i,a)=>{var r;const l=i.filter(_=>!_.inactive);if(i.filter(_=>_.inactive).length==i.length){let _=null!==(r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin"))&&void 0!==r?r:"";throw this.commonService.snackError(_),new Error(_)}try{let _=document.createElement("canvas"),d=l.map(f=>f.width);_.width=Math.round(Math.max(...d));let p=0;for(let f=0;f<l.length;f++)p+=l[f].heigh;_.height=Math.round(p);let h=_.getContext("2d");for(let f=0;f<l.length;f++)h?.drawImage(a[l[f].pageIndex].canvas,Math.round(l[f].left),Math.round(l[f].top),Math.round(l[f].width),Math.round(l[f].heigh),0,0==f?0:this.sumHighTo(f,l),Math.round(l[f].width),Math.round(l[f].heigh));return _.toDataURL("image/png")}catch(_){return console.log(_),"https://via.placeholder.com/300"}}}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_t.v),t.LFG(H.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Zc=T(42898),Ec=T(58914),Je=T(88161),wo=T(42873),Ic=T(93795),oi=T(52447),To=T(20074),Qi=T(31343);let Mc=(()=>{class o{constructor(e){this.ref=e}onInput(e){if(""!=e.target.value){let n=e.target.selectionStart,i=e.target.selectionEnd;if(e.target.value=e.target.value.replace(/[^\d.,]/g,""),""==e.target.value&&(e.target.value="0"),e.target.value.includes(",")&&(e.target.value=e.target.value.replace(",",".")),e.target.setSelectionRange(n,i),e.preventDefault(),!this.lastValue||this.lastValue&&e.target.value.length>0&&this.lastValue!==e.target.value){this.lastValue=this.ref.nativeElement.value=e.target.value;const a=document.createEvent("HTMLEvents");a.initEvent("input",!1,!0),e.target.dispatchEvent(a)}}else e.target.value=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","appReplaceCommas",""]],hostBindings:function(e,n){1&e&&t.NdJ("input",function(a){return n.onInput(a)})}}),o})();var We=T(44944);const Pc=["myDialogSplitPoint"];function Lc(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",24),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",26),t.qZA()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_trac_nghiem")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_trac_nghiem")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.multipleQuestion)}}function jc(o,s){if(1&o&&(t.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",27),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",28),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",26),t.qZA()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_dien_tu")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_dien_tu")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.fillQuestion)}}function Nc(o,s){if(1&o&&(t.TgZ(0,"div",29)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",30),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",31),t.qZA()()()()),2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_tu_luan")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_tu_luan")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.essayQuestion)}}function qc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onGlobalClick(i))}),t.TgZ(1,"div",5,6)(3,"div",7)(4,"h2",8),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",7)(8,"div",9)(9,"div",10)(10,"div",11)(11,"p",12),t._uU(12),t.ALo(13,"mytranslate"),t.ALo(14,"number"),t.ALo(15,"numberFloat"),t.ALo(16,"numberFloat"),t.ALo(17,"numberFloat"),t.qZA()()(),t.TgZ(18,"form",13),t.YNc(19,Lc,17,8,"div",14),t.YNc(20,jc,17,8,"div",14),t.YNc(21,Nc,17,8,"div",15),t.qZA()()(),t.TgZ(22,"div",16)(23,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.btnCloseDialog(!1))}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.setPointData())}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,10,"lang_auto_chia_diem")),t.xp6(7),t.AsE("",t.lcZ(13,12,"lang_auto_tong_diem"),": ",t.xi3(14,14,t.lcZ(15,17,e.form.controls.multiplePoint.value)+t.lcZ(16,19,e.form.controls.fillPoint.value)+t.lcZ(17,21,e.form.controls.essayPoint.value),"1.0-2"),""),t.xp6(6),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.multipleQuestion),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.fillQuestion),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.essayQuestion),t.xp6(3),t.hij(" ",t.lcZ(25,23,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(28,25,"lang_auto_chia")," ")}}let Co=(()=>{class o extends R.Q{onKeydownHandler(e){this.closeDialog.emit()}onGlobalClick(e){var n;null!==(n=this.myDialog)&&void 0!==n&&n.nativeElement.contains(e.target)||this.closeDialog.emit()}btnCloseDialog(e){e?this.closeDialog.emit(e):this.closeDialog.emit()}changeMultipPoint(e){this.multiplePoint=e.target.value}changeEssayPoint(e){this.essayPoint=e.target.value}changeFillPoint(e){this.fillPoint=e.target.value}setPointData(){let e=this.commonService.getFormObj(this.form),n=Number(e.multiplePoint),i=Number(e.essayPoint),a=Number(e.fillPoint);isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(a)&&(a=0);let r={multiplePoint:n.toString(),essayPoint:i.toString(),fillPoint:a.toString()};this.setPoint.emit(r)}ngOnInit(){var e,n,i,a,r,l,c,_;this.form=null!==(n=null===(e=this.data)||void 0===e?void 0:e.obj)&&void 0!==n&&n.essayQuestion?this.fb.group({multiplePoint:new m.p4(10,[m.kI.required,m.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new m.p4(0,[m.kI.required,m.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),fillPoint:new m.p4(0,[m.kI.required,m.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}):this.fb.group({multiplePoint:new m.p4(10,[m.kI.required,m.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new m.p4(0),fillPoint:new m.p4(0,[m.kI.required,m.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}),this.form.patchValue({multiplePoint:null===(a=null===(i=this.data)||void 0===i?void 0:i.obj)||void 0===a?void 0:a.multiplePoint,essayPoint:null===(l=null===(r=this.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.essayPoint,fillPoint:null===(_=null===(c=this.data)||void 0===c?void 0:c.obj)||void 0===_?void 0:_.fillPoint}),super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.fb=n,this.closeDialog=new t.vpe,this.setPoint=new t.vpe,this.form=new m.nJ({}),this.essayPoint="",this.multiplePoint="",this.fillPoint=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-split-point"]],viewQuery:function(e,n){if(1&e&&t.Gf(Pc,5),2&e){let i;t.iGM(i=t.CRH())&&(n.myDialog=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("keydown.escape",function(a){return n.onKeydownHandler(a)},!1,t.evT)},inputs:{data:"data"},outputs:{closeDialog:"closeDialog",setPoint:"setPoint"},features:[t.qOj],decls:4,vars:1,consts:[[1,"school-info_bg"],[1,"school-info","p-4",2,"border-radius","0.375rem"],[1,"modal-dialog","modal-lg"],["azt-track-service","azt-split-point-riLhb0Qv5Oo","class","modal-content",3,"click",4,"ngIf"],["azt-track-service","azt-split-point-riLhb0Qv5Oo",1,"modal-content",3,"click"],[1,"modal-body"],["myDialogSplitPoint",""],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"block-body"],[1,"row","mt-2"],[1,"col-md-12"],["for","total-point",1,"mr-2"],[1,"form-horizontal",3,"formGroup"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-dWuy_TsMB",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-gBtzvDfAHf",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"row"],[1,"flex","mt-2",2,"justify-content","space-between"],[1,"col-9"],["for","multiple-point"],[1,"col-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","multiplePoint",1,"input-point",3,"decimal"],["for",""],["type","number","readonly","",1,"input-point",3,"value"],["for","fill-point"],["type","text","appOnlyNumber","","id","fill-point","formControlName","fillPoint",1,"input-point",3,"decimal"],[1,"row","mt-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","essayPoint",1,"input-point",3,"decimal"],["type","text","readonly","",1,"input-point",3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,qc,29,27,"div",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==n.data?null:n.data.isShow))},dependencies:[y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,We.Y,Jt.M,y.JJ,tt.bT,tt.Hb],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:800px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),o})();const Qc=["myDialogExamInfo"];function Dc(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_trac_nghiem")),t.xp6(3),t.Oqu(null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.length),t.xp6(2),t.Oqu(null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.join(", "))}}function Uc(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_tu_luan")),t.xp6(3),t.Oqu(null==e.examInfo.listEssay?null:e.examInfo.listEssay.length),t.xp6(2),t.Oqu(null==e.examInfo.listEssay?null:e.examInfo.listEssay.join(", "))}}function Fc(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_dien_tu")),t.xp6(3),t.Oqu(null==e.examInfo.listFill?null:e.examInfo.listFill.length),t.xp6(2),t.Oqu(null==e.examInfo.listFill?null:e.examInfo.listFill.join(", "))}}function Rc(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_co_"+e.key+"_dap_an")),t.xp6(3),t.Oqu(e.value.length),t.xp6(2),t.Oqu(e.value.join(", "))}}function zc(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Rc,8,5,"tr",10),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",null==e.value?null:e.value.length)}}function Jc(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onGlobalClick(i))}),t.TgZ(1,"div",2,3)(3,"div")(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"p",7),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",8)(16,"table",9)(17,"tr")(18,"th"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()(),t.YNc(27,Dc,8,5,"tr",10),t.YNc(28,Uc,8,5,"tr",10),t.YNc(29,Fc,8,5,"tr",10),t.YNc(30,zc,2,1,"ng-container",11),t.ALo(31,"keyvalue"),t.qZA()(),t.TgZ(32,"div",12)(33,"div",13)(34,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.btnCloseDialog(!1))}),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()()()()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,12,"lang_auto_chi_tiet_de_thi")),t.xp6(5),t.hij(" ",t.lcZ(11,14,"lang_auto_tong_so_cau_cua_de")," : "),t.xp6(3),t.AsE("",e.examInfo.totalQuestion," ",t.lcZ(14,16,"lang_auto_cau"),""),t.xp6(6),t.Oqu(t.lcZ(20,18,"lang_auto_thong_tin")),t.xp6(3),t.Oqu(t.lcZ(23,20,"lang_auto_so_cau")),t.xp6(3),t.Oqu(t.lcZ(26,22,"lang_auto_danh_sach_cac_cau")),t.xp6(2),t.Q6J("ngIf",null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.length),t.xp6(1),t.Q6J("ngIf",null==e.examInfo.listEssay?null:e.examInfo.listEssay.length),t.xp6(1),t.Q6J("ngIf",null==e.examInfo.listFill?null:e.examInfo.listFill.length),t.xp6(1),t.Q6J("ngForOf",t.lcZ(31,24,e.examInfo.listQuestionWithTotalAnswer)),t.xp6(5),t.Oqu(t.lcZ(36,26,"lang_auto_dong"))}}let ko=(()=>{class o extends R.Q{constructor(e,n){super(e),this.commonService=e,this.answerTypeService=n,this.startIndexQuestion=1,this.data={},this.type="edit",this.closeDialog=new t.vpe,this.questionObjs=[],this.examInfo={}}onKeydownHandler(e){this.closeDialog.emit()}onGlobalClick(e){var n;null!==(n=this.myDialog)&&void 0!==n&&n.nativeElement.contains(e.target)||this.closeDialog.emit()}btnCloseDialog(e){this.closeDialog.emit(e)}initData(){var e;this.questionObjs=null!==(e=this.data.obj)&&void 0!==e?e:[],this.filterQuestion()}filterQuestion(){if(this.examInfo.listEssay=[],this.examInfo.listMultiple=[],this.examInfo.listFill=[],this.examInfo.listQuestionWithTotalAnswer={},"edit"==this.type){let e=0;this.questionObjs.forEach(n=>{var i,a,r;e++,this.answerTypeService.isEssayAnswer(n.answerType)?null!=n.rawIndex&&(null===(i=this.examInfo.listEssay)||void 0===i||i.push(n.rawIndex+this.startIndexQuestion)):null!=n.rawIndex&&!this.answerTypeService.isFillAnswer(n.answerType)&&(null===(a=this.examInfo.listMultiple)||void 0===a||a.push(n.rawIndex+this.startIndexQuestion)),this.answerTypeService.isFillAnswer(n.answerType)&&null!=n.rawIndex&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(n.rawIndex+this.startIndexQuestion)),(this.answerTypeService.isOneChoiceAnswer(n.answerType)||this.answerTypeService.isMultipleChoiceAnswer(n.answerType))&&n.answers&&null!=n.rawIndex&&this.countTotalAnswerOfQuestion(n.answers.length,n.rawIndex+this.startIndexQuestion)}),this.examInfo.totalQuestion=e}if("createPDF"==this.type){let e=0;this.questionObjs.forEach(n=>{var i,a,r;1==n.tempData.isSelect&&(e++,this.answerTypeService.isEssayAnswer(n.tempData.answerType)?null!=n.index&&(null===(i=this.examInfo.listEssay)||void 0===i||i.push(n.index+this.startIndexQuestion)):null!=n.index&&!this.answerTypeService.isFillAnswer(n.tempData.answerType)&&(null===(a=this.examInfo.listMultiple)||void 0===a||a.push(n.index+this.startIndexQuestion)),this.answerTypeService.isFillAnswer(n.tempData.answerType)&&null!=n.index&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(n.index+this.startIndexQuestion)),(this.answerTypeService.isOneChoiceAnswer(n.tempData.answerType)||this.answerTypeService.isMultipleChoiceAnswer(n.tempData.answerType))&&n.answers&&null!=n.index&&this.countTotalAnswerOfQuestion(n.answers.length,n.index+this.startIndexQuestion))}),this.examInfo.totalQuestion=e}if("createDocx"==this.type){let e=0;this.questionObjs.forEach(n=>{var i,a,r;e++,this.answerTypeService.isEssayAnswer(n.typeQuestion)?null!=n.numberQuestion&&(null===(i=this.examInfo.listEssay)||void 0===i||i.push(n.numberQuestion)):null!=n.numberQuestion&&!this.answerTypeService.isFillAnswer(n.typeQuestion)&&(null===(a=this.examInfo.listMultiple)||void 0===a||a.push(n.numberQuestion)),this.answerTypeService.isFillAnswer(n.typeQuestion)&&null!=n.numberQuestion&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(n.numberQuestion)),(this.answerTypeService.isOneChoiceAnswer(n.typeQuestion)||this.answerTypeService.isMultipleChoiceAnswer(n.typeQuestion))&&n.answers&&null!=n.numberQuestion&&this.countTotalAnswerOfQuestion(n.answers.length,n.numberQuestion)}),this.examInfo.totalQuestion=e}}countTotalAnswerOfQuestion(e,n){var i;this.examInfo.listQuestionWithTotalAnswer&&(!(null===(i=this.examInfo.listQuestionWithTotalAnswer)||void 0===i)&&i.hasOwnProperty(e)||(this.examInfo.listQuestionWithTotalAnswer[e]=[]),this.examInfo.listQuestionWithTotalAnswer[e].push(n))}ngOnInit(){this.initData(),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Je.T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-exam-info"]],viewQuery:function(e,n){if(1&e&&t.Gf(Qc,5),2&e){let i;t.iGM(i=t.CRH())&&(n.myDialog=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("keydown.escape",function(a){return n.onKeydownHandler(a)},!1,t.evT)},inputs:{startIndexQuestion:"startIndexQuestion",data:"data",type:"type"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:1,vars:1,consts:[["azt-track-service","azt-exam-info-HVPPdz9Jrco","class","school-info_bg",3,"click",4,"ngIf"],["azt-track-service","azt-exam-info-HVPPdz9Jrco",1,"school-info_bg",3,"click"],[1,"school-info","box","px-4","py-4"],["myDialogExamInfo",""],[1,"text-base","font-medium","mr-auto"],[1,"intro"],[1,"block-main"],[1,"text-right","mb-2"],[1,"table-responsive","table-height"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","mt-3",2,"justify-content","flex-end"],[1,"azt-block-button"],["azt-track-service","azt-exam-info-MSBs6dcNIww",1,"btn","btn-secondary",3,"click"]],template:function(e,n){1&e&&t.YNc(0,Jc,37,28,"div",0),2&e&&t.Q6J("ngIf",null==n.data?null:n.data.isShow)},dependencies:[y.sg,y.O5,y.Nd,tt.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:600px;width:950px;margin-left:auto;margin-right:auto}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.block-text[_ngcontent-%COMP%]{margin-bottom:15px}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.btn-icon[_ngcontent-%COMP%]{background:transparent;color:#333;border:none;display:flex;align-items:center;text-transform:inherit;padding:0;transition:all .3s}.btn-icon[_ngcontent-%COMP%]:hover{color:#2361ae}.block-show[_ngcontent-%COMP%]{background:#f4f5f7;border-radius:5px;margin-top:5px;padding:10px;max-width:100%;height:0;transition:opacity .3s;overflow:hidden;opacity:0;visibility:hidden;display:none}.show-active[_ngcontent-%COMP%]{display:block;height:auto;overflow:auto;opacity:1;visibility:visible}.table-height[_ngcontent-%COMP%]{height:350px;overflow:auto}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),o})();var ai=T(29225);function Bc(o,s){1&o&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cropper_edit_explain_error"),"\n"))}function Hc(o,s){1&o&&t._UZ(0,"azt-loading-effect")}let Yc=(()=>{class o{constructor(e,n,i){this.commonService=e,this.activeRoute=n,this.dialog=i,this.headerPosition={},this.listQuestion=[],this.listCanvas=[],this.applyEdit=new t.vpe,this.listOriginalQuestion=[],this.originalHeaderPostion={},this.loadingAssets=!1,this.isApplying=!1}addHeaderPiece(){let e=document.createElement("div");e.setAttribute("class","box-crop-info header-piece"),e.dataInfo=this.headerPosition,e.style.width=this.headerPosition.width+"px",e.style.height=this.headerPosition.heigh+"px",e.style.left=this.headerPosition.left+"px",e.style.top=this.headerPosition.top+"px",document.getElementById("canvas_edit_page_"+this.headerPosition.pageIndex)?.appendChild(e),this.addInteractiveElement(e)}processInfo(){this.addHeaderPiece();for(let e=0;e<this.listQuestion.length;e++){for(let r=0;r<this.listQuestion[e].positions.length;r++){const l=this.listQuestion[e].positions[r];let c=document.createElement("div");if(c.setAttribute("class",`box-crop-info question-piece question-piece-of-${e}`),l.inactive&&c.classList.add("inactive"),c.dataInfo=l,c.style.width=l.width+"px",c.style.height=l.heigh+"px",c.style.left=l.left+"px",c.style.top=l.top+"px",0==r){let p=document.createElement("div");if(p.setAttribute("class",`question-stt question-stt-${e} clickable`),p.textContent=`#${e+1}`,c.appendChild(p),!this.listQuestion[e].isGroup){let h=document.createElement("div");h.setAttribute("class",`question-ans-add question-ans-add-${e} clickable`),h.textContent="+",h.addEventListener("click",()=>{const f=this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].label;let w=document.createElement("div");w.setAttribute("class",`answer-append box-crop-info answer-piece answer-piece-${vo[f].toLowerCase()}`);let k=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");w.setAttribute("tittle",k);let S=Object.assign(Object.assign({},this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0]),{left:this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].left+this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].width});w.style.width=S.width+"px",w.style.height=S.heigh+"px",w.style.top=S.top+"px",w.style.left=S.left+"px",w.style.backgroundColor=xo[vo[f].toLowerCase()],w.dataInfo=S;let D=document.getElementById("canvas_edit_page_"+S.pageIndex);D?.appendChild(w),this.addInteractiveElement(w);let Q=document.createElement("div");Q.setAttribute("class","box-crop-info answer-label"),Q.setAttribute("tittle",k);let N=Object.assign(Object.assign({},this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].remove),{left:S.left,top:S.top});Q.style.width=N.width+"px",Q.style.height=N.heigh+"px",Q.style.top=N.top+"px",Q.style.left=N.left+"px",Q.dataInfo=N,D?.appendChild(Q),this.addInteractiveElement(Q)}),c.appendChild(h)}}document.getElementById("canvas_edit_page_"+l.pageIndex)?.appendChild(c),this.addInteractiveElement(c)}let n=document.createElement("div");n.setAttribute("class","box-crop-info question-label"),n.dataInfo=this.listQuestion[e].remove,n.style.width=this.listQuestion[e].remove.width+"px",n.style.height=this.listQuestion[e].remove.heigh+"px",n.style.left=this.listQuestion[e].remove.left+"px",n.style.top=this.listQuestion[e].remove.top+"px",this.listQuestion[e].answers.forEach(r=>{r.positions.forEach(d=>{let p=document.createElement("div");p.setAttribute("class",`box-crop-info ${!0===d.inactive?"inactive":""} answer-piece answer-piece-${r.label.toLowerCase()}`);let h=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");p.setAttribute("tittle",h),p.inactive&&p.classList.add("inactive"),p.dataInfo=d,p.style.width=d.width+"px",p.style.height=d.heigh+"px",p.style.left=d.left+"px",p.style.top=d.top+"px",p.style.backgroundColor=xo[r.label.toLowerCase()],document.getElementById("canvas_edit_page_"+d.pageIndex)?.appendChild(p),this.addInteractiveElement(p)});let l=document.createElement("div");l.setAttribute("class","box-crop-info answer-label"),l.dataInfo=r.remove,l.style.width=r.remove.width+"px",l.style.height=r.remove.heigh+"px",l.style.left=r.remove.left+"px",l.style.top=r.remove.top+"px",document.getElementById("canvas_edit_page_"+r.remove.pageIndex)?.appendChild(l),this.addInteractiveElement(l)}),document.getElementById("canvas_edit_page_"+this.listQuestion[e].remove.pageIndex)?.appendChild(n),this.addInteractiveElement(n)}}processRender(){var e;for(let n=0;n<this.listCanvas.length;n++){const i=this.listCanvas[n];let a=document.createElement("div");a.setAttribute("id","canvas_edit_page_"+n),a.classList.add("mb-3"),a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.position="relative",a.style.margin="0 auto",a.style.boxShadow="3px 2px 3px 2px #ccc";let r=document.createElement("canvas"),l=document.createElement("span");l.textContent=`Page ${n+1} of ${this.listCanvas.length}`,l.style.position="absolute",l.style.bottom="10px",l.style.right="10px",l.style.fontSize="12px",l.style.color="#ccc",r.width=i.width,r.height=i.height,a.appendChild(r),a.appendChild(l),r.getContext("2d")?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height),null===(e=document.getElementById("boxEdit"))||void 0===e||e.appendChild(a);let _=document.getElementById("tipsTrick");_&&(_.style.width=i.width+"px")}}dragMoveListener(e){let n=e.target,i=(parseFloat(n.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(n.getAttribute("data-y"))||0)+e.dy;n.style.top=a+"px",n.style.left=i+"px",n.setAttribute("data-x",i),n.setAttribute("data-y",a),n.dataInfo.left=parseInt(n.style.left),n.dataInfo.top=parseInt(n.style.top)}get invalidPositionsData(){let e=!1;for(let n=0;n<this.listQuestion.length;n++){if(this.listQuestion[n].remove.inactive){e=!0;break}if(this.listQuestion[n].positions.length==this.listQuestion[n].positions.filter(l=>l.inactive).length){e=!0;break}for(let l=0;l<this.listQuestion[n].answers.length;l++)if(this.listQuestion[n].answers[l].positions.length==this.listQuestion[n].answers[l].positions.filter(d=>d.inactive).length){e=!0;break}}return e}addInteractiveElement(e){e.setAttribute("data-x",parseInt(e.style.left)),e.setAttribute("data-y",parseInt(e.style.top)),interact(e).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(n){var i=n.target,a=parseFloat(i.getAttribute("data-x"))||0,r=parseFloat(i.getAttribute("data-y"))||0;i.style.width=n.rect.width+"px",i.style.height=n.rect.height+"px",a+=n.deltaRect.left,i.style.top=(r+=n.deltaRect.top)+"px",i.style.left=a+"px",i.setAttribute("data-x",a),i.setAttribute("data-y",r),i.dataInfo.width=parseInt(i.style.width),i.dataInfo.heigh=parseInt(i.style.height),i.dataInfo.left=parseInt(i.style.left),i.dataInfo.top=parseInt(i.style.top)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:10}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}).on("doubletap",function(n){n.currentTarget.dataInfo.inactive?(n.currentTarget.dataInfo.inactive=!1,n.currentTarget.classList.remove("inactive")):(n.currentTarget.dataInfo.inactive=!0,n.currentTarget.classList.add("inactive")),console.log(n.currentTarget.dataInfo),n.preventDefault()})}handleApply(){this.isApplying=!0,setTimeout(()=>{this.applyEdit.emit({headerPos:this.headerPosition,listQuestion:this.listQuestion})},2e3)}handleCancel(){confirm("Nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb m\u1ea5t, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn?")&&this.applyEdit.emit("")}ngOnInit(){this.listQuestion.length>0&&(this.listOriginalQuestion=gn.cloneDeep(this.listQuestion),this.originalHeaderPostion=gn.cloneDeep(this.headerPosition)),this.processRender(),this.processInfo(),this.loadingAssets=!0}ngAfterViewInit(){window.dragMoveListener=this.dragMoveListener}ngOnDestroy(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cropper-edit"]],inputs:{headerPosition:"headerPosition",listQuestion:"listQuestion",listCanvas:"listCanvas",examHeader:"examHeader"},outputs:{applyEdit:"applyEdit"},decls:19,vars:18,consts:[["style","position: fixed; top: 5px; left: 5px; right: 5px; font-size: 20px; z-index: 9999;","class","alert alert-danger p-2 text-center",4,"ngIf"],["id","mainEditArea",3,"hidden"],["id","buttonArea"],[1,"bb-holder","p-3"],["azt-track-service","cropper-edit-eys6rwcK5W","id","buttonApplys",1,"btn","btn-primary","mr-2",3,"disabled","click"],["azt-track-service","cropper-edit-zfl8meDVvX","id","buttonCancels",1,"btn","btn-secondary",3,"click"],["id","tipsTrick",1,"alert","box","p-2","mt-2","text-center",2,"margin-left","auto","margin-right","auto"],[2,"font-weight","500"],["id","boxEdit"],[4,"ngIf"],[1,"alert","alert-danger","p-2","text-center",2,"position","fixed","top","5px","left","5px","right","5px","font-size","20px","z-index","9999"]],template:function(e,n){1&e&&(t.YNc(0,Bc,3,3,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return n.handleApply()}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return n.handleCancel()}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",6)(12,"b",7),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t._UZ(17,"div",8),t.qZA(),t.YNc(18,Hc,1,0,"azt-loading-effect",9)),2&e&&(t.Q6J("ngIf",n.invalidPositionsData),t.xp6(1),t.Q6J("hidden",!n.loadingAssets),t.xp6(3),t.Q6J("disabled",n.isApplying),t.xp6(1),t.hij(" ",n.isApplying?t.lcZ(6,8,"lang_testbank_create_exam_width_file_pdf_cropper_edit_loading_apply"):t.lcZ(7,10,"lang_testbank_create_exam_width_file_pdf_cropper_edit_apply")," "),t.xp6(4),t.Oqu(t.lcZ(10,12,"lang_buttom_cancel")),t.xp6(4),t.hij("",t.lcZ(14,14,"lang_testbank_create_exam_width_file_pdf_cropper_edit_tips"),": "),t.xp6(2),t.hij("",t.lcZ(16,16,"lang_testbank_create_exam_width_file_pdf_cropper_edit_note_tip")," "),t.xp6(3),t.Q6J("ngIf",!n.loadingAssets))},dependencies:[y.O5,zt.Q,tt.bT],styles:["#mainEditArea[_ngcontent-%COMP%]{width:1200px;margin:0 auto}#mainEditArea[_ngcontent-%COMP%]   #buttonArea[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),o})();var Di=T(85736);const Gc=["hiddenInput"],$c=["iframePdf"],Kc=["resizeBar"],Wc=["boxLeftFile"],Vc=["parentResize"],Xc=["maskLayer"],si=function(o){return{color:o}};function t_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",49)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",50),t.NdJ("keyup.enter",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleEnterPage(i))})("ngModelChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.currentPage=i)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,si,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,si,e.bottomLazyLoad?"inherit":"#595959"))}}function e_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help "),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_show_view_all_explain"))}function n_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help_outlined "),t.qZA()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_hide_view_all_explain"))}function i_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",55),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.handleClickOption(a.index))}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e.index+n.startQuestion),t.xp6(1),t.hij(" ",e.index+n.startQuestion," ")}}function o_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-checkbox",33),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,t_,13,16,"div",34),t.TgZ(7,"div")(8,"button",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogSpitPoint())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",36),t.YNc(12,e_,3,3,"mat-icon",37),t.YNc(13,n_,3,3,"mat-icon",38),t.TgZ(14,"mat-icon",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openExamInfoDialog())}),t.ALo(15,"mytranslate"),t._uU(16,"info_outline"),t.qZA()(),t.TgZ(17,"div",40)(18,"span"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"form",41)(22,"input",42),t.NdJ("keyup.enter",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleEnterQuestion(i))}),t.qZA(),t.TgZ(23,"mat-autocomplete",43,44),t.YNc(25,i_,2,2,"mat-option",45),t.ALo(26,"async"),t.qZA()()(),t._UZ(27,"input",46,47),t.TgZ(29,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.editting=!0)}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()}if(2&o){const e=t.MAs(24),n=t.oxw(2);t.xp6(2),t.MGl("matTooltip","",t.lcZ(3,13,"lang_testbank_create_exam_width_file_pdf_note_tutorial_Proofreading"),"."),t.Q6J("formControl",n.debuggingMode),t.xp6(2),t.Oqu(t.lcZ(5,15,"lang_testbank_create_exam_width_file_pdf_Proofreading")),t.xp6(2),t.Q6J("ngIf",n.questionList.length>n.limitLazyLoad),t.xp6(3),t.Oqu(t.lcZ(10,17,"lang_split_points")),t.xp6(3),t.Q6J("ngIf",!n.isShowAllHelp),t.xp6(1),t.Q6J("ngIf",n.isShowAllHelp),t.xp6(1),t.s9C("matTooltip",t.lcZ(15,19,"lang_auto_chi_tiet_de_thi")),t.xp6(5),t.hij("",t.lcZ(20,21,"lang_testbank_create_exam_width_file_pdf_go_to"),": "),t.xp6(3),t.Q6J("formControl",n.myControl)("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(26,23,n.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(31,25,"lang_buttom_edit"))}}function a_(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.BQk()),2&o){const e=s.$implicit;t.xp6(2),t.hij("",e,"\xa0")}}function s_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",56)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",58),t.YNc(6,a_,3,1,"ng-container",59),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.TgZ(9,"div",60)(10,"button",61),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showNote=!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_unrecognizable_one")," "),t.xp6(3),t.Q6J("ngForOf",e.errorQuestions),t.xp6(1),t.hij(" ",t.lcZ(8,6,"lang_testbank_create_exam_width_file_pdf_unrecognizable_twe"),". "),t.xp6(4),t.Oqu(t.lcZ(12,8,"lang_testbank_create_exam_width_file_pdf_understood"))}}function r_(o,s){1&o&&(t.TgZ(0,"span",65),t._uU(1,",\xa0"),t.qZA())}function l_(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",63),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);let l;return t.KtG(r.goToQuestionAll(null!==(l=a.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,r_,2,0,"span",64),t.BQk()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(4);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",e.question.label,""),t.xp6(2),t.Q6J("ngIf",n<i.invalidTypeQuestionConfig.length-1)}}function c_(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",58),t.YNc(4,l_,6,8,"ng-container",59),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function __(o,s){if(1&o&&(t.TgZ(0,"div",62)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,c_,5,4,"ng-container",3),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function d_(o,s){1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.BQk()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cont_save"),"."))}function u_(o,s){if(1&o&&(t.TgZ(0,"div",62)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t.YNc(3,d_,3,3,"ng-container",3),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim())}}function m_(o,s){1&o&&(t.TgZ(0,"div",66)(1,"div",67)(2,"div")(3,"mat-icon",68),t._uU(4,"cloud_upload"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div")(9,"a",69),t.NdJ("click",function(n){return n.stopPropagation()}),t.ALo(10,"convertCdnLinkOfGitHubWithLocale"),t.ALo(11,"mytranslate"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div")(15,"a",70),t.NdJ("click",function(n){return n.stopPropagation()}),t.ALo(16,"convertCdnLinkOfGitHubWithLocale"),t.ALo(17,"mytranslate"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(6),t.Oqu(t.lcZ(7,7,"lang_tutorial_upload_file_exam")),t.xp6(3),t.s9C("download",t.lcZ(11,11,"lang_auto_de_mau_azota_pdf")),t.Q6J("href",t.lcZ(10,9,"azota_assets/medias_[LANG]/de_mau_azota.zip"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(13,13,"lang_auto_click_vao_day_de_download_de_mau")),t.xp6(3),t.s9C("download",t.lcZ(17,17,"lang_auto_de_mau_azota_pdf")),t.Q6J("href",t.lcZ(16,15,"azota_assets/medias_[LANG]/de_mau_azota.zip"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(19,19,"lang_auto_de_mau_azota_pdf")))}function p_(o,s){1&o&&(t.TgZ(0,"div",79),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_exam_header_not_select")))}function h_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",75),t.YNc(1,p_,3,3,"div",76),t.TgZ(2,"mat-icon",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.useHeader=!i.useHeader)}),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t._uU(5,"clear"),t.qZA(),t._UZ(6,"img",78),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.useHeader),t.xp6(1),t.Q6J("matTooltip",e.useHeader?t.lcZ(3,3,"lang_auto_xoa"):t.lcZ(4,5,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("src",e.examHeader,t.LSH)}}function g_(o,s){1&o&&(t.TgZ(0,"div",104)(1,"mat-icon",57),t._uU(2,"error"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_cau_hoi_nay_khong_co_noi_dung_cac_dap_an_abcd_nen_dot")+"!"," "))}function f_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",112),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).$implicit,a=t.oxw(3);return t.KtG(a.toggleRemoveAllGroup(i.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&o&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_xoa_toan_bo_cau_hoi_trong_nhom"))}function x_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",113),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).$implicit,a=t.oxw(3);return t.KtG(a.toggleRemoveAllGroup(i.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&o&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_bo_xoa_toan_bo_cau_hoi_trong_nhom"))}function v_(o,s){1&o&&t._UZ(0,"div",79)}function b_(o,s){1&o&&(t.TgZ(0,"div",114),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&o&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function w_(o,s){1&o&&(t.TgZ(0,"div",115),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_mix"),"?"))}function T_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",105),t.YNc(1,f_,3,3,"mat-icon",106),t.YNc(2,x_,3,3,"mat-icon",107),t.YNc(3,v_,1,0,"div",76),t.TgZ(4,"div",108),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(3);return t.KtG(a.toggleMixInGroup(i.group))}),t.YNc(5,b_,4,6,"div",109),t.YNc(6,w_,3,3,"div",110),t._UZ(7,"img",111),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2),n=e.index,i=e.$implicit,a=t.oxw(3);t.Q6J("hidden",!a.firstInGroupIndexes.includes(n)),t.xp6(1),t.Q6J("ngIf",a.atLeastOneUse(i.group)),t.xp6(1),t.Q6J("ngIf",!a.atLeastOneUse(i.group)),t.xp6(1),t.Q6J("ngIf",!a.atLeastOneUse(i.group)),t.xp6(1),t.Gre("mb-2 img-group image_group_",i.group,""),t.xp6(1),t.Q6J("ngIf",i.groupType),t.xp6(1),t.Q6J("ngIf",!i.groupType),t.xp6(1),t.s9C("matTooltip",i.groupType?t.lcZ(8,11,"lang_testbank_create_exam_width_file_pdf_click_mix_question"):t.lcZ(9,13,"lang_testbank_create_exam_width_file_pdf_click_pin_question")),t.s9C("src",i.groupUrl,t.LSH)}}function C_(o,s){1&o&&(t.TgZ(0,"div",79),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_question_not_select")))}const Ui=function(o,s){return{"width.%":o,"height.%":s}};function k_(o,s){if(1&o&&(t.TgZ(0,"div",123)(1,"div",124),t._UZ(2,"img",125)(3,"img",118),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(4,Ui,e.remove.width/n.question.width*100,e.remove.height/n.question.height*100))("src",e.remove.url,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(7,Ui,e.width/n.question.width*100,e.height/n.question.height*100))("src",e.url,t.LSH)}}function O_(o,s){if(1&o&&(t.TgZ(0,"div",116)(1,"div",117),t._UZ(2,"img",118),t.qZA(),t.TgZ(3,"div",119),t._UZ(4,"img",120),t.qZA(),t.TgZ(5,"div",121),t.YNc(6,k_,4,10,"div",122),t.qZA()()),2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(6,Ui,e.question.remove.width/e.question.width*100,e.question.remove.height/e.question.height*100))("src",e.question.remove.url,t.LSH),t.xp6(2),t.Q6J("width",e.question.width)("height",e.question.height)("src",e.question.url,t.LSH),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function y_(o,s){1&o&&t._UZ(0,"div",79)}function A_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"span",128),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.changeAnswerResult(r,a.label))}),t._uU(1),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(3).$implicit;t.Q6J("ngClass",n.tempData.answerResult.includes(e.label)?"btn-ans-result":""),t.xp6(1),t.Oqu(e.label)}}function S_(o,s){if(1&o&&(t.TgZ(0,"div",126)(1,"span",96),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,A_,2,2,"span",127),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_create_exam_width_file_pdf_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function Z_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",129)(1,"span",130),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).index,a=t.oxw(3);return t.KtG(a.setupFillAnswersQuestion(i))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_create_exam_width_file_pdf_enter_add_answer")," "))}function E_(o,s){1&o&&(t.TgZ(0,"b"),t._uU(1,"\u25b2"),t.qZA())}function I_(o,s){1&o&&(t.TgZ(0,"mat-icon",100),t.ALo(1,"mytranslate"),t._uU(2,"shuffle"),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_keep_stable_answer"))}function M_(o,s){1&o&&(t.TgZ(0,"mat-icon",100),t.ALo(1,"mytranslate"),t._uU(2,"shuffle_on"),t.qZA()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_tutorial_click_mix_question"))}function P_(o,s){1&o&&(t.ynx(0),t._uU(1,"\xa0|\xa0"),t.BQk())}function L_(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.YNc(3,P_,2,0,"ng-container",3),t.BQk()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(4).$implicit;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",n<i.tempData.answerResult.length-1)}}function j_(o,s){if(1&o&&(t.TgZ(0,"div",133),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,L_,4,2,"ng-container",59),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_list_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.tempData.answerResult)}}function N_(o,s){1&o&&(t.TgZ(0,"div",134)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_answer")," "))}function q_(o,s){1&o&&(t.TgZ(0,"div",134)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_point")," "))}function Q_(o,s){1&o&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"a",135),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_not_identification_answer"),". "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_xem_huong_dan")," "))}function D_(o,s){1&o&&(t.TgZ(0,"div",134)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_note_quizzes")," "))}function U_(o,s){1&o&&(t.TgZ(0,"div",134)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_enter_max_point")," "))}function F_(o,s){1&o&&(t.TgZ(0,"div",134)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_select_answer")," "))}function R_(o,s){if(1&o&&(t.TgZ(0,"div",138),t._UZ(1,"img",139),t.qZA()),2&o){const e=t.oxw(4).$implicit;t.xp6(1),t.Q6J("src",e.help.url,t.LSH)}}function z_(o,s){1&o&&(t.TgZ(0,"div",140),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_data_explain")))}function J_(o,s){if(1&o&&(t.ynx(0),t.YNc(1,R_,2,1,"div",136),t.YNc(2,z_,3,3,"ng-template",null,137,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",n.help.url)("ngIfElse",e)}}function B_(o,s){if(1&o&&(t.ynx(0),t.YNc(1,j_,4,4,"div",131),t.ALo(2,"isFillAnswer"),t.YNc(3,N_,5,3,"div",132),t.ALo(4,"isFillAnswer"),t.YNc(5,q_,5,3,"div",132),t.YNc(6,Q_,8,6,"div",131),t.YNc(7,D_,5,3,"div",132),t.ALo(8,"isOneChoiceAnswer"),t.YNc(9,U_,5,3,"div",132),t.YNc(10,F_,5,3,"div",132),t.ALo(11,"isOneChoiceAnswer"),t.YNc(12,J_,4,2,"ng-container",3),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tempData.answerResult.length>0&&t.lcZ(2,8,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(4,10,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",!e.tempData.point&&!n.isFullNoPoint),t.xp6(1),t.Q6J("ngIf",e.answers.length>0&&1==e.answers[0].width&&1==e.answers[0].height),t.xp6(1),t.Q6J("ngIf",e.answers.length<2&&t.lcZ(8,12,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.point<0),t.xp6(1),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(11,14,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.isShowHelp)}}function H_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",145),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3).index,a=t.oxw(3);return t.KtG(a.clickUploadFile(i))}),t.TgZ(1,"div",129)(2,"mat-icon",68),t._uU(3,"cloud_upload"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"lang_testbank_create_exam_width_file_pdf_attach_file_audio")),t.xp6(3),t.hij("",t.lcZ(9,4,"lang_testbank_create_exam_width_file_docx_click_choose_audio"),"."))}function Y_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",148)(1,"audio",149),t._UZ(2,"source",150),t.ALo(3,"mycdn"),t._uU(4," Your browser does not support the audio element. "),t.qZA(),t.TgZ(5,"span",151),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4).$implicit;return t.KtG(i.tempData.questionMedia=[])}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Q6J("src",t.lcZ(3,2,e.url),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(7,4,"lang_auto_xoa")," ")}}function G_(o,s){if(1&o&&(t.TgZ(0,"div",146),t.YNc(1,Y_,8,6,"div",147),t.qZA()),2&o){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngForOf",e.tempData.questionMedia)}}function $_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",141)(1,"input",142),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(3);return t.KtG(r.uploadFileQuestion(a,i))}),t.qZA(),t.YNc(2,H_,10,6,"div",143),t.YNc(3,G_,2,1,"div",144),t.qZA()}if(2&o){const e=t.oxw(2),n=e.index,i=e.$implicit;t.xp6(1),t.Q6J("id","inputFileQuestion_"+n),t.xp6(1),t.Q6J("ngIf",0===i.tempData.questionMedia.length),t.xp6(1),t.Q6J("ngIf",i.tempData.questionMedia.length>0)}}function K_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",82),t.YNc(1,g_,5,3,"div",83),t.ALo(2,"isOneChoiceAnswer"),t.YNc(3,T_,10,15,"div",84),t.TgZ(4,"div",85)(5,"mat-icon",86),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw(3);return t.KtG(a.changeSelectTempData(i))}),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t._uU(8,"clear"),t.qZA(),t.YNc(9,C_,3,3,"div",76),t.YNc(10,O_,7,9,"div",87),t.qZA(),t.TgZ(11,"div",88)(12,"div",89),t.YNc(13,y_,1,0,"div",76),t.TgZ(14,"div",90)(15,"span",91),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"select",92),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.changeTypeQuestion(a,i))}),t.TgZ(19,"option",93),t.ALo(20,"isOneChoiceAnswer"),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"option",93),t.ALo(24,"isFillAnswer"),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"option",93),t.ALo(28,"isEssayAnswer"),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()(),t.YNc(31,S_,5,4,"div",94),t.ALo(32,"isOneChoiceAnswer"),t.YNc(33,Z_,4,3,"div",95),t.ALo(34,"isFillAnswer"),t.TgZ(35,"div",90)(36,"span",96),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.TgZ(39,"input",97),t.NdJ("input",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.changeQuestionPoint(a,i))}),t.qZA()(),t.TgZ(40,"mat-icon",98),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.toggleViewHelp(i))}),t.ALo(41,"mytranslate"),t.ALo(42,"mytranslate"),t._uU(43),t.qZA(),t.TgZ(44,"span",99),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit;return t.KtG(i.tempData.isShowAttach=!i.tempData.isShowAttach)}),t.TgZ(45,"mat-icon",100),t.ALo(46,"mytranslate"),t._uU(47,"attachment"),t.qZA(),t.YNc(48,E_,2,0,"b",3),t.qZA(),t.TgZ(49,"span",101),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.toogleMixAns(i))}),t.YNc(50,I_,3,3,"mat-icon",102),t.YNc(51,M_,3,3,"mat-icon",102),t.qZA()()(),t.YNc(52,B_,13,16,"ng-container",3),t.YNc(53,$_,4,3,"div",103),t.qZA()}if(2&o){const e=t.oxw(),n=e.index,i=e.$implicit,a=t.oxw(3);t.uIk("id","box-questions-item-"+n),t.xp6(1),t.Q6J("ngIf",0==i.answers.length&&t.lcZ(2,31,i.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",i.groupUrl),t.xp6(2),t.Q6J("matTooltip",i.tempData.isSelect?t.lcZ(6,33,"lang_auto_xoa"):t.lcZ(7,35,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("ngIf",!i.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",a.debuggingMode.value),t.xp6(2),t.Q6J("ngClass","")("ngClass","border-result"),t.xp6(1),t.Q6J("ngIf",!i.tempData.isSelect),t.xp6(3),t.Oqu(t.lcZ(17,37,"lang_testbank_create_exam_width_file_pdf_question")+" "+i.question.label),t.xp6(3),t.Q6J("value",1)("selected",t.lcZ(20,39,i.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(22,41,"lang_testbank_create_exam_width_file_pdf_select_answer")),t.xp6(2),t.Q6J("value",4)("selected",t.lcZ(24,43,i.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(26,45,"lang_testbank_create_exam_width_file_pdf_enter_blank")),t.xp6(2),t.Q6J("value",3)("selected",t.lcZ(28,47,i.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(30,49,"lang_testbank_create_exam_width_file_docx_essay")),t.xp6(2),t.Q6J("ngIf",t.lcZ(32,51,i.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",t.lcZ(34,53,i.tempData.answerType)),t.xp6(4),t.hij("",t.lcZ(38,55,"lang_point"),": "),t.xp6(2),t.Q6J("value",i.tempData.point.toString().length>8?i.tempData.point.toFixed(8):i.tempData.point),t.xp6(1),t.s9C("matTooltip",i.tempData.isShowHelp?t.lcZ(41,57,"lang_testbank_create_exam_width_file_pdf_hide_view_explain"):t.lcZ(42,59,"lang_testbank_create_exam_width_file_pdf_show_view_explain")),t.xp6(3),t.hij(" ",i.tempData.isShowHelp?"help":"help_outlined"," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(46,61,"lang_testbank_create_exam_width_file_pdf_attach_file_question")),t.xp6(3),t.Q6J("ngIf",i.tempData.isShowAttach),t.xp6(2),t.Q6J("ngIf",1==i.isFixAns),t.xp6(1),t.Q6J("ngIf",0==i.isFixAns),t.xp6(1),t.Q6J("ngIf",i.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",!0===i.tempData.isShowAttach)}}function W_(o,s){if(1&o&&(t.TgZ(0,"div",80),t.YNc(1,K_,54,63,"div",81),t.qZA()),2&o){const e=s.index,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",n.questionList.length<=n.limitLazyLoad||e>=n.startChunkIndex&&e<n.startChunkIndex+n.lazyLoadSize)}}function V_(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",152)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",50),t.NdJ("keyup.enter",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleEnterPage(i))})("ngModelChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.currentPage=i)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",153),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",154),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,si,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,si,e.bottomLazyLoad?"inherit":"#595959"))}}function X_(o,s){if(1&o&&(t.TgZ(0,"div",71),t.YNc(1,h_,7,7,"div",72),t.YNc(2,W_,2,1,"div",73),t.YNc(3,V_,13,16,"div",74),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.examHeader),t.xp6(1),t.Q6J("ngForOf",e.questionList),t.xp6(1),t.Q6J("ngIf",e.questionList.length>e.limitLazyLoad)}}function td(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",155),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t._uU(4),t.ALo(5,"mytranslate"),t._UZ(6,"br"),t.TgZ(7,"mat-icon",156),t._uU(8,"report"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"span",157),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.resetBoxExamQuestions("tryOther"))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_testbank_create_exam_width_file_pdf_not_analysis_exam"),". "),t.xp6(3),t.hij(" ",t.lcZ(5,5,"lang_testbank_create_exam_width_file_pdf_contact_admin"),". "),t.xp6(7),t.Oqu(t.lcZ(12,7,"lang_testbank_create_exam_width_file_pdf_create_exam")))}function ed(o,s){if(1&o&&(t.TgZ(0,"div",163)(1,"span",164),t._uU(2),t.qZA()()),2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e)}}function nd(o,s){if(1&o&&(t.TgZ(0,"div",158)(1,"div",159)(2,"div",160),t._UZ(3,"mat-spinner",161),t.qZA(),t.YNc(4,ed,3,1,"div",162),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("strokeWidth",2)("diameter",30),t.xp6(1),t.Q6J("ngForOf",e.arrStatusFileExam)}}function id(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",165)(1,"app-cropper-edit",166),t.NdJ("applyEdit",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.applyEditEvent(i))}),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("listQuestion",e.rootQuestionInfo)("headerPosition",e.rootHeaderPosition)("listCanvas",e.rootCanvases)}}const od=function(o){return{width:o}};function ad(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"editor-layout",5),t.NdJ("handleConfirm",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.rxjsHandleSaveExam())})("handleCancel",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resetBoxExamQuestions())}),t.TgZ(2,"div",6)(3,"div",7)(4,"div",8,9)(6,"div",10,11),t._UZ(8,"input",12),t.YNc(9,o_,32,27,"div",13),t.YNc(10,s_,13,10,"div",14),t.YNc(11,__,6,4,"div",15),t.YNc(12,u_,4,1,"div",15),t.TgZ(13,"div",16),t.YNc(14,m_,20,21,"div",17),t._UZ(15,"div",18)(16,"div",19),t.YNc(17,X_,4,3,"div",20),t.YNc(18,td,13,9,"div",21),t.qZA()(),t.TgZ(19,"div",22,23),t.NdJ("mousedown",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.handleMouseDown(i))}),t.qZA(),t.TgZ(21,"div",24,25),t._UZ(23,"div",26,27)(25,"iframe",28),t.ALo(26,"safe"),t.qZA()()(),t.YNc(27,nd,5,3,"div",29),t.qZA()()(),t.YNc(28,id,2,3,"ng-template",30)}if(2&o){const e=t.oxw();t.Q6J("hidden",e.editting),t.xp6(1),t.Q6J("headerBackTolink",e.backToLink)("showInput",!0)("showConfirmButton",!0)("examName",e.nameExamInp),t.xp6(5),t.Q6J("ngStyle",t.VKq(19,od,e.notShowSourceFile?"100%":"calc(60% - 5px)")),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0),t.xp6(1),t.Q6J("ngIf",e.errorQuestions.length>0&&e.showNote),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim()),t.xp6(2),t.Q6J("ngIf",!e.doneAllProccessTasks),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0&&e.cropperDone),t.xp6(1),t.Q6J("ngIf",e.errAnalyzingPdf),t.xp6(3),t.Q6J("hidden",e.notShowSourceFile),t.xp6(4),t.Q6J("src",t.lcZ(26,17,e.examFileUrl),t.uOi),t.xp6(2),t.Q6J("ngIf",e.isShowLoadingFileExam),t.xp6(1),t.Q6J("ngIf",e.editting)}}function sd(o,s){if(1&o&&(t.TgZ(0,"div",167),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_your_current_browser")," ",""+e.currentBrowserInUsed,". ",t.lcZ(3,5,"lang_auto_no_support_browser"),"\n")}}function rd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-split-point",168),t.NdJ("closeDialog",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeDialogSpitPoint())})("setPoint",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.setPointTest(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("data",e.dataSpitPoint)}}function ld(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",169),t.NdJ("closeDialog",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeDialogExamInfo())}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("startIndexQuestion",e.startQuestion)("data",e.dataExamInfo)("type","createPDF")}}const Qn="exam_questions";let cd=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c,_,d,p,h,f,w,k,S,D){super(n),this.cropperService=e,this.commonService=n,this.activeRoute=i,this.dialog=a,this.questionService=r,this.apiUploadService=l,this.userService=c,this.infoService=_,this.examService=d,this.configService=p,this.cdnService=h,this.answerTypeService=f,this.redirectService=w,this.editorOutputDataService=k,this.browserStorageService=S,this.deviceDetectorService=D,this.x=0,this.y=0,this.leftWidth=0,this.cropperDone=!1,this.startChunkIndex=0,this.currentPage=1,this.editting=!1,this.errAnalyzingPdf=!1,this.categoriesIdParram=+this.commonService.getMyParam(this.activeRoute,"cat_id"),this.examFileUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/file_placeholder.jpg"),this.version="v2.0",this.cur_cateId=0,this.backToLink="",this.nameExamInp=new m.p4(""+Date.now()),this.totalPoint=new m.p4(10),this.isChangePoint=!1,this.isMixture=!1,this.confirmTotalQuestionChange=!1,this.examConfigs=[],this.newQuestionArrSave=[],this.isChangeQuestionPoint=!1,this.isShowLoadingFileExam=!1,this.arrStatusFileExam=[],this.isShowAllHelp=!1,this.curGotoIndex=new m.p4(0),this.showNote=!0,this.debuggingMode=new m.p4(!0),this.message=[],this.errorQuestions=[],this.doneAllProccessTasks=!1,this.notShowSourceFile=!0,this.questionList=[],this.questionConfigList=[],this.rootQuestionInfo=[],this.rootCanvases=[],this.clonedCtxForCreate=[],this.labelHolderSize={width:3500,height:3500},this.labelsBase64s=[],this.labelsUrls=[],this.resultUploadBase64Labels=[],this.abcdLabelPos={},this.questionLabelMap=[],this.maxQuestionLabelHeight=0,this.examHeader="",this.useHeader=!0,this.selects=[],this.nextIndex=0,this.countGroup=0,this.groupImages={},this.groupLengths=[],this.firstInGroupIndexes=[],this.totalInGroupTracking=0,this.countSaveQuestion=0,this.cropPdfConfigParam="",this.countClickApplyEdit=0,this.dataSpitPoint={isShow:!1},this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.multiplePoint=10,this.essayPoint=0,this.fillPoint=0,this.dataExamInfo={isShow:!1},this.startQuestion=1,this.handleMouseUp=Q=>{var N,q,W,X,E;this.maskLayer&&(this.maskLayer.nativeElement.style.width="0px"),this.resizeBar&&this.resizeBar.nativeElement.classList.remove("hover"),null===(N=this.resizeBar)||void 0===N||N.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),null===(q=this.iframePdf)||void 0===q||q.nativeElement.style.removeProperty("user-select"),null===(W=this.iframePdf)||void 0===W||W.nativeElement.style.removeProperty("pointer-events"),null===(X=this.boxLeftFile)||void 0===X||X.nativeElement.style.removeProperty("user-select"),null===(E=this.boxLeftFile)||void 0===E||E.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=Q=>{if(this.parentResize&&this.iframePdf&&this.boxLeftFile){let N=this.iframePdf.nativeElement,q=this.boxLeftFile.nativeElement;const X=100*(this.leftWidth+(Q.clientX-this.x))/this.parentResize.nativeElement.getBoundingClientRect().width;q.style.width=`${X}%`,document.body.style.cursor="col-resize",N.style.userSelect="none",N.style.pointerEvents="none",q.style.userSelect="none",q.style.pointerEvents="none"}},this.myControl=new m.p4(this.startQuestion),this.handleSaveAllExam=()=>{var Q,N;let q=null!==(Q=this.commonService.myTranslateInstant("lang_auto_luu_xong_tat_ca_cau_hoi_vao_he_thong"))&&void 0!==Q?Q:"",W=null!==(N=this.commonService.myTranslateInstant("lang_auto_dang_luu_thong_tin_de_thi"))&&void 0!==N?N:"";this.arrStatusFileExam=[q,`${W} ...`];let X=this.userService.getUserObj(),E=JSON.stringify({type:"exam",id:0,user:X.id});var J={categoryId:this.categoriesIdParram,scoringMethod:"1",name:this.nameExamInp.value,examConfigs:JSON.stringify(this.examConfigs),suggestions:JSON.stringify([]),labelsUrl:JSON.stringify(this.labelsUrls),abcdLabelPos:JSON.stringify(this.abcdLabelPos),questionLabelMap:JSON.stringify(this.questionLabelMap),firstInGroupIndexes:JSON.stringify(this.firstInGroupIndexes),totalExam:1,cdnExamFile:this.examFileUrl,trackEdit:this.countClickApplyEdit>0?JSON.stringify({countClickApplyEdit:this.countClickApplyEdit}):"",examHeader:this.examHeader,cutData:this.rootQuestionInfo,editorStatus:4,startQuestionIndex:this.questionList.length>0&&this.questionList[0].question.label>0?this.questionList[0].question.label:1};this.examService.apiExamSaveObjPost(J,E).subscribe(z=>{var K;if(1==z.success){let B=null!==(K=this.commonService.myTranslateInstant("lang_auto_luu_de_thi_thanh_cong_dang_chuyen_huong"))&&void 0!==K?K:"";this.arrStatusFileExam=[`${B} ...`],setTimeout(()=>{var et,st;jQuery("html").css("overflow","auto"),this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+(null===(st=null===(et=z.data)||void 0===et?void 0:et.obj)||void 0===st?void 0:st.hashId),"?backto="+encodeURIComponent(`/admin/testbank/document-management/0/${this.categoriesIdParram}/1`))},1500)}else this.showErrorSnack("lang_auto_tao_de_thi_khong_thanh_cong_vui_long_thu_lai"),this.isShowLoadingFileExam=!1})}}get isSupportedBrowser(){let e=this.commonService.getBrowserType().toString();return!(!["chrome","firefox"].includes(e.split(" ")[0].toLowerCase())||parseInt(e.split(" ")[1])<75)}get currentBrowserInUsed(){let e="",n=this.commonService.myTranslateInstant("lang_auto_version");return this.deviceDetectorService.browser&&(e=this.deviceDetectorService.browser+n+this.deviceDetectorService.browser_version),e}atLeastOneUse(e){return this.questionList.filter(n=>n.group===e&&n.tempData.isSelect).length>0}changePage(e){"prev"==e&&(this.topLazyLoad?(this.startChunkIndex-=Se,this.currentPage--):(this.startChunkIndex=0,this.currentPage=1)),"next"==e&&this.bottomLazyLoad&&(this.startChunkIndex+=Se,this.currentPage++)}handleMouseDown(e){this.boxLeftFile&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.boxLeftFile.nativeElement.getBoundingClientRect().width,this.maskLayer&&(this.maskLayer.nativeElement.style.width="100%"),this.resizeBar&&this.resizeBar.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}_filter(e){return this.questionList}handleEnterQuestion(e){let n=e.target,i=parseInt(n.value);(i<1||i>this.questionList.length)&&(i=1,this.myControl.setValue(this.startQuestion)),this.questionList.length<=500?this.goToQuestionAll(i-1):1==i?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)):(this.currentPage=Math.ceil(i/Se),this.startChunkIndex=(this.currentPage-1)*Se,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)),n.blur(),this.hiddenInput&&this.hiddenInput.nativeElement.click()}handleEnterPage(e){let n=e.target,i=parseInt(n.value);i<1||i>this.totalPage?(this.startChunkIndex=0,this.currentPage=1):(this.startChunkIndex=(i-1)*Se,this.currentPage=i),n.blur()}handleClickOption(e){if(e>=this.startChunkIndex&&e<this.startChunkIndex+Se)this.goToQuestionAll(e);else{let n=e+1;1==n?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(n-1)},1e3)):(this.currentPage=Math.ceil(n/Se),this.startChunkIndex=(this.currentPage-1)*Se,setTimeout(()=>{this.goToQuestionAll(n-1)},1e3))}}get totalPage(){return Math.ceil(this.questionList.length/this.lazyLoadSize)}get topLazyLoad(){return this.questionList.length>500&&this.startChunkIndex-Se>=0}get bottomLazyLoad(){return this.questionList.length>500&&this.startChunkIndex+Se<=this.questionList.length-1}get placeholderLink(){return this.cdnService.convertCdnLinkOfGitHub("azota_assets/svgs/Img2_dat-01.svg")}get lazyLoadSize(){return Se}get limitLazyLoad(){return 500}openManualDialog(e){this.dialog.open(_d,{width:"1000px",data:{fromButton:e},restoreFocus:!1}).afterClosed().subscribe(i=>{i&&this.browserStorageService.saveStorage("_DONT_SHOW_MANUAL","OK")})}startProcessFile(e){this.nameExamInp.setValue(e.name),this.uploadFilePdf(e),this.processPdf(e)}ngOnInit(){this.isSupportedBrowser&&((0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id");var e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(n=>{this.cropPdfConfigParam=n.CROPPDF_PARAMS,this.loadingFileJs().then(i=>{if(i){const a=this.editorOutputDataService.getFirstFile();a?this.startProcessFile(a):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)),this.listeningDropFileExam()}})})}),this.filteredOptions=this.myControl.valueChanges.pipe((0,qi.O)(""),(0,qn.U)(e=>this._filter(e||""))))}ngOnDestroy(){jQuery("#hiddenWrapper").remove()}get totalNumberQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&!this.answerTypeService.isEssayAnswer(e.tempData.answerType)).length}get totalTrueFalseQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)).length}get totalFillQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isFillAnswer(e.tempData.answerType)).length}get invalidTypeQuestionConfig(){return this.questionList.filter(e=>e.tempData.isSelect&&(e.tempData.point<0||!isFinite(e.tempData.point)||0==e.tempData.answerResult.length&&this.answerTypeService.isFillAnswer(e.tempData.answerType)||0==e.tempData.answerResult.length&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)||e.answers.length<2&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType))||!e.tempData.point&&!this.isFullNoPoint)}get isFullNoPoint(){return this.questionList.filter(e=>!e.tempData.point).length===this.questionList.length}changeQuestionPoint(e,n){for(let i=0;i<this.questionList.length;i++)this.questionList[i].question.label===e.question.label&&(this.questionList[i].tempData.point=Number(n.target.value))}changeAnswerResult(e,n){e.tempData.answerResult=[n]}changeTypeQuestion(e,n){e.tempData.answerType=Number(n.target.value),4==Number(n.target.value)&&(e.tempData.answerResult=[])}uploadFileQuestion(e,n){var i,a=n.target.files[0];let r=this.commonService.myTranslateInstant("lang_auto_dang_tai_len_tep_tin_dinh_kem_cho_cau_hoi");if(!0===(0,lt.Wg)(a.type))this.arrStatusFileExam=[`${r}  (0%)`],this.isShowLoadingFileExam=!0,this.apiUploadService.uploadToCdnProgressForExamQuestionContent(a).subscribe(l=>{var c;if(l.type!=H.dt.UploadProgress)if(1==l.success){e.tempData.questionMedia.push(l.data);let _=null!==(c=this.commonService.myTranslateInstant("lang_auto_tai_len_thanh_cong"))&&void 0!==c?c:"";this.arrStatusFileExam=[_],this.isShowLoadingFileExam=!1}else this.showErrorSnack("lang_auto_upload_that_bai");else if(l.loaded&&l.total){let _=Math.round(l.loaded/l.total*100);this.arrStatusFileExam=[`${r} (${_}%)`]}});else{let l=null!==(i=this.commonService.myTranslateInstant("lang_auto_chi_duoc_dinh_kem_tep_tin_mp_3_hoac_wav"))&&void 0!==i?i:"";this.showErrorSnack(l)}}uploadFilePdf(e){this.apiUploadService.uploadToCdnProgressForTestbankPdf(e).subscribe(n=>{var i,a;n.type!=H.dt.UploadProgress&&(1==n.success?(this.examFileUrl=null!==(a=null===(i=n.data)||void 0===i?void 0:i.url)&&void 0!==a?a:"",this.notShowSourceFile=!1):this.showErrorSnack("lang_auto_upload_that_bai"))})}clickUploadFile(e){jQuery(`#inputFileQuestion_${e}`).trigger("click")}changeIsSelect(e,n){e.tempData.isSelect=n}setupFillAnswersQuestion(e){var n=this.questionList[e];const i=[...n.tempData.answerResult];this.dialog.open(fo.P,{width:"50%",data:{answers:n.tempData.answerResult},restoreFocus:!1}).afterClosed().subscribe(r=>{!1===r&&(n.tempData.answerResult=i)})}listeningDropFileExam(){var e=this,n=jQuery("#box-left-file-drop");n.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){n.addClass("is-dragover")}).on("dragleave dragend drop",function(){n.removeClass("is-dragover")}).on("drop",function(i){e.nameExamInp.setValue(i.originalEvent.dataTransfer.files[0].name),e.uploadFilePdf(i.originalEvent.dataTransfer.files[0]),e.processPdf(i.originalEvent.dataTransfer.files[0])}),jQuery("#box-left-file-input").change(()=>{e.nameExamInp.setValue(jQuery("#box-left-file-input").get(0).files[0].name),e.uploadFilePdf(jQuery("#box-left-file-input").get(0).files[0]),e.processPdf(jQuery("#box-left-file-input").get(0).files[0])}),jQuery(n).click(()=>{jQuery("#box-left-file-input").trigger("click")})}processPdf(e){let n=this.commonService.myTranslateInstant("lang_auto_dang_tien_hanh_phan_tich");window.startLoading=()=>{this.arrStatusFileExam=[`${n} ...`],this.isShowLoadingFileExam=!0},this.arrStatusFileExam=[`${n} ...`],this.isShowLoadingFileExam=!0,jQuery("#box-left-file-drop").hide();var a=new yc.Process(this.cropPdfConfigParam);a.setUpdateStatusCallback(c=>{c.startsWith("Rendering")?0==this.message.length?this.message.push(c):this.message[this.message.length-1]=c:this.message.push(c)}),a.setOncompleteCallback((c,_)=>{c.length>0?(this.startQuestion=c[0].num,this.myControl.setValue(this.startQuestion),this.labelHolderSize.width=2*_[0].canvas.width,this.rootQuestionInfo=c,this.rootCanvases=_.map(d=>d.canvas),this.rootHeaderPosition={pageIndex:0,top:1,left:c[0].positions[0].left,width:c[0].positions[0].left+c[0].positions[0].width<_[0].canvas.width?c[0].positions[0].width:_[0].canvas.width-c[0].positions[0].left,heigh:c[0].positions[0].top-1},a.showHidden(),this.errorQuestions=this.cropperService.getErrorQtns(c),this.processData()):(this.errAnalyzingPdf=!0,this.isShowLoadingFileExam=!1)}),a.parsePdf(e)}applyEditEvent(e){if(this.questionConfigList=gn.cloneDeep(this.questionList),e){this.countClickApplyEdit++,this.rootQuestionInfo=e.listQuestion,this.rootHeaderPosition=e.headerPos,this.processData();for(let n=0;n<this.questionList.length;n++)this.questionList[n].isFixAns=this.questionConfigList[n].isFixAns,this.questionList[n].groupType=this.questionConfigList[n].groupType,this.questionList[n].tempData.point=this.questionConfigList[n].tempData.point,this.questionList[n].tempData.answerType=this.questionConfigList[n].tempData.answerType,this.questionList[n].tempData.answerResult=this.questionConfigList[n].tempData.answerResult,this.questionList[n].tempData.isSelect=this.questionConfigList[n].tempData.isSelect,this.questionList[n].tempData.isShowHelp=this.questionConfigList[n].tempData.isShowHelp,this.questionList[n].tempData.isShowAttach=this.questionConfigList[n].tempData.isShowAttach,this.questionList[n].tempData.questionMedia=this.questionConfigList[n].tempData.questionMedia;this.editting=!1,this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong")}else this.editting=!1}cloneCanvas(){let e=this.rootCanvases;for(let n=0;n<e.length;n++){const i=e[n];let a=document.createElement("canvas");a.width=i.width,a.height=i.height;let r=document.createElement("canvas");r.width=i.width,r.height=i.height;let l=a.getContext("2d");l?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height);let c=r.getContext("2d");c?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height),l&&c&&this.clonedCtxForCreate.push(c)}}processData(){this.questionList=[],this.abcdLabelPos={},this.groupImages={},this.totalInGroupTracking=0,this.questionLabelMap=[],this.groupLengths=[],this.countGroup=0,this.labelsUrls=[],this.labelsBase64s=[],this.firstInGroupIndexes=[],this.clonedCtxForCreate=[],this.cloneCanvas();const e=this.clonedCtxForCreate[0].canvas.width;this.rootQuestionInfo.forEach(E=>{E.positions.forEach(J=>{J.width+J.left>e&&(J.width=e-J.left)})});let n=this.rootQuestionInfo,i=this.clonedCtxForCreate;n.forEach(E=>{E.remove.heigh=Math.round(E.remove.heigh),E.remove.width=Math.round(E.remove.width),E.remove.top=Math.round(E.remove.top),E.remove.left=Math.round(E.remove.left),E.positions.forEach(J=>{J.heigh=Math.round(J.heigh),J.width=Math.round(J.width),J.top=Math.round(J.top),J.left=Math.round(J.left)}),E.help&&(E.help.remove&&(E.help.remove.heigh=Math.round(E.help.remove.heigh),E.help.remove.width=Math.round(E.help.remove.width),E.help.remove.left=Math.round(E.help.remove.left),E.help.remove.top=Math.round(E.help.remove.top)),E.help.positions.forEach(J=>{J.heigh=Math.round(J.heigh),J.width=Math.round(J.width),J.top=Math.round(J.top),J.left=Math.round(J.left)})),E.answers.length>0&&E.answers.forEach(J=>{J.remove.heigh=Math.round(J.remove.heigh),J.remove.width=Math.round(J.remove.width),J.remove.top=Math.round(J.remove.top),J.remove.left=Math.round(J.remove.left),J.positions.forEach(z=>{z.heigh=Math.round(z.heigh),z.width=Math.round(z.width),z.top=Math.round(z.top),z.left=Math.round(z.left)})})});let a=document.createElement("canvas");a.width=this.labelHolderSize.width,a.height=this.labelHolderSize.height;let r=a.getContext("2d"),l=0,c=r;const _=()=>{r&&(this.labelsBase64s[l]=r.canvas.toDataURL("image/png"),l++,r.clearRect(0,0,r.canvas.width,r.canvas.height)),p.left=0,p.top=0};let d=0,p={left:0,top:0,locate:0};const h=E=>{p.left=0,p.top+=E};let f=[];const w=E=>{let J=!0;for(let z=0;z<E.length;z++)if(1==E[z].remove.width||1==E[z].remove.heigh){J=!1;break}return J};n.forEach(E=>{f.push(E.answers.length)});for(let E=0;E<n.length;E++)if(w(n[E].answers)&&n[E].answers.length==Math.max(...f)){n[E].answers.forEach(J=>{c?.drawImage(i[J.remove.pageIndex].canvas,J.remove.left,J.remove.top,J.remove.width,J.remove.heigh,p.left,p.top,J.remove.width,J.remove.heigh),this.abcdLabelPos[J.label]={left:p.left,top:p.top},p.left=p.left+J.remove.width+5});break}this.examHeader=this.cropperService.getSingleImgData(this.rootHeaderPosition,i);for(let E=0;E<n.length;E++){let J={isFixAns:n[E].isFixAns?1:0,forcedFixAns:!!n[E].isFixAns,groupType:0,original:"",debugView:"",group:n[E].group,groupUrl:this.groupImages[`image_group_${n[E].group}`]?this.groupImages[`image_group_${n[E].group}`]:"",question:{label:n[E].num,posit:{top:0,left:0,locate:0},url:"",urlExcludeLabelOnly:"",width:1,height:1,remove:{x:1,y:1,width:1,height:1,url:this.cropperService.getSingleImgData(n[E].remove,i),left:0,top:0}},answers:[],help:{num:n[E].num,url:""},tempData:{sort:E,point:0,answerType:1,answerConfig:{},answerResult:[],isShowAttach:!1,questionMedia:[],isSelect:!0,isShowHelp:!1},rootIndex:E},z=n[E].positions;if(J.original=this.cropperService.getScatteredImgData(z,i),n[E].isGroup){this.groupLengths.push(this.totalInGroupTracking),this.totalInGroupTracking=0,this.countGroup++,J.isGroup=!0;var k=this.cropperService.getScatteredImgData(n[E].positions,i);this.groupImages[`image_group_${n[E].num}`]=k}else{d++,this.totalInGroupTracking++,c&&0!=d&&p.left+n[E].remove.width>c.canvas.width?(p.left=0,p.top=p.top+this.maxQuestionLabelHeight+5,this.maxQuestionLabelHeight=0,c&&p.top+n[E].remove.heigh>c.canvas.height&&_(),c?.drawImage(i[n[E].remove.pageIndex].canvas,n[E].remove.left,n[E].remove.top,n[E].remove.width,n[E].remove.heigh,p.left,p.top,n[E].remove.width,n[E].remove.heigh),J.question.remove.left=p.left,J.question.remove.top=p.top,this.questionLabelMap.push({locate:l,left:p.left,top:p.top,width:n[E].remove.width,height:n[E].remove.heigh}),p.left=p.left+n[E].remove.width+5):(c&&p.top+n[E].remove.heigh>c.canvas.height&&_(),c?.drawImage(i[n[E].remove.pageIndex].canvas,n[E].remove.left,n[E].remove.top,n[E].remove.width,n[E].remove.heigh,p.left,p.top,n[E].remove.width,n[E].remove.heigh),J.question.remove.left=p.left,J.question.remove.top=p.top,this.questionLabelMap.push({locate:l,left:p.left,top:p.top,width:n[E].remove.width,height:n[E].remove.heigh}),p.left=p.left+n[E].remove.width+5,n[E].remove.heigh>this.maxQuestionLabelHeight&&(this.maxQuestionLabelHeight=n[E].remove.heigh)),this.cropperService.fillColor("#ffffff",i[n[E].remove.pageIndex],n[E].remove.left,n[E].remove.top,n[E].remove.width,n[E].remove.heigh),J.question.urlExcludeLabelOnly=1==z.length?this.cropperService.getSingleImgData(z[0],i):this.cropperService.getScatteredImgData(z,i),J.question.remove.x=n[E].remove.left-z[0].left,J.question.remove.y=n[E].remove.top-z[0].top,J.question.remove.width=n[E].remove.width,J.question.remove.height=n[E].remove.heigh,n[E].answers.length>0?n[E].answers.forEach(B=>{let et={label:B.label,posit:{left:0,top:0,locate:0},url:"",x:B.positions[0].left-z[0].left,y:B.positions[0].top-z[0].top,width:1,height:1,remove:{x:B.remove.left-z[0].left,y:B.remove.top-z[0].top,xAns:B.remove.left-B.positions[0].left,yAns:B.remove.top-B.positions[0].top,width:B.remove.width,height:B.remove.heigh,url:this.cropperService.getSingleImgData(B.remove,i),left:0,top:0}};if(z.length>1&&z[0].pageIndex!==B.remove.pageIndex&&(et.remove.y=B.remove.top-z[1].top+z[0].heigh),this.cropperService.fillColor("#ffffff",i[B.remove.pageIndex],B.remove.left,B.remove.top,B.remove.width,B.remove.heigh),z.length>1)for(let st=0;st<z.length;st++)if(z[st].pageIndex==B.positions[0].pageIndex){et.y=0==st?B.positions[0].top-z[st].top:B.positions[0].top-z[st].top+z[0].heigh;break}if(B.isCorrect&&(J.tempData.answerResult=[B.label]),1==B.positions.length)et.url=this.cropperService.getSingleImgData(B.positions[0],i),et.width=B.positions[0].width,et.height=B.positions[0].heigh;else{et.url=this.cropperService.getScatteredImgData(B.positions,i);let st=B.positions.filter(at=>!at.inactive);et.width=this.cropperService.maxWidthTo(st.length,B.positions),et.height=this.cropperService.sumHighTo(st.length,B.positions)}J.answers.push(et),B.positions.forEach(st=>{this.cropperService.fillColor("#ffffff",i[st.pageIndex],st.left,st.top,st.width,st.heigh)})}):n[E].strAns&&void 0!==n[E].strAns?(J.tempData.answerType=4,J.tempData.answerResult.push(n[E].strAns||"")):J.tempData.answerType=3;let K=n[E].help;if(K&&(K.remove&&this.cropperService.fillColor("#ffffff",i[K.remove.pageIndex],K.remove.left,K.remove.top,K.remove.width,K.remove.heigh),K.positions&&K.positions.length>0&&(J.help.url=this.cropperService.getScatteredImgData(K.positions,i))),1==z.length)J.question.url=this.cropperService.getSingleImgData(z[0],i),J.question.width=z[0].width,J.question.height=z[0].heigh;else{J.question.url=this.cropperService.getScatteredImgData(z,i);let B=z.filter(et=>!et.inactive);J.question.width=this.cropperService.maxWidthTo(B.length,z),J.question.height=this.cropperService.sumHighTo(B.length,z)}this.questionList.push(J)}}for(let E=0;E<this.questionList.length;E++)this.questionList[E].tempData.point=this.totalNumberQuestion?Number(this.totalPoint.value/this.totalNumberQuestion):0,this.questionList[E].index=E;let S=0;for(let E=0;E<this.groupLengths.length;E++)this.firstInGroupIndexes.push(S+this.groupLengths[E]),S+=this.groupLengths[E];const D=()=>{let E=0,J=[];for(let z=0;z<this.questionList.length;z++)if(this.questionList[z].answers.length>0)for(let K=0;K<this.questionList[z].answers.length;K++){let B=new Image;B.crossOrigin="anonymous",B.setAttribute("indexMap",z.toString()),B.setAttribute("ansIndexMap",K.toString()),J.push(B),B.onload=()=>{if(E++,E==J.length){let et=[],st=[],at=0;for(let mt=0;mt<J.length;mt++){const it=J[mt];at+=it.width+5,at<=this.labelHolderSize.width?st.push(it):(et.push(st),st=[],st.push(it),at=it.width),mt==J.length-1&&et.push(st)}for(let mt=0;mt<et.length;mt++){const it=et[mt];let rt=it.map(ft=>ft.height),ht=Math.max(...rt);for(let ft=0;ft<it.length;ft++){const Tt=it[ft];c&&p.top+Tt.height>c?.canvas.height&&_(),c?.drawImage(Tt,p.left,p.top);let Ot=parseInt(Tt?.getAttribute("indexMap")),kt=parseInt(Tt?.getAttribute("ansIndexMap"));this.questionList[Ot].answers[kt].posit.left=p.left,this.questionList[Ot].answers[kt].posit.top=p.top,this.questionList[Ot].answers[kt].posit.locate=l,p.left+=Tt.width+5,ft==it.length-1&&mt==et.length-1&&(this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"))}h(ht+5)}}},B.src=this.questionList[z].answers[K].url}};let Q=this.questionList.filter(E=>!this.answerTypeService.isOneChoiceAnswer(E.tempData.answerType)).length;p.left=0,p.top+=this.questionList[this.questionList.length-1].question.remove.height+5;let N=[];for(let E=0;E<this.questionList.length;E++)N.push(E);let q=[];q=gn.shuffle(N);let W=0,X=[];q.forEach(E=>{let J=new Image;J.crossOrigin="anonymous",J.setAttribute("indexMap",E.toString()),X.push(J),J.onload=()=>{if(W++,W==q.length){let z=gn.chunk(X,2);for(let K=0;K<z.length;K++){const B=z[K];let et=B.map(at=>at.height),st=Math.max(...et);for(let at=0;at<B.length;at++){const mt=B[at];c&&p.top+mt.height>c?.canvas.height&&_(),c?.drawImage(mt,p.left,p.top);let it=parseInt(mt?.getAttribute("indexMap"));this.questionList[it].question.posit.left=p.left,this.questionList[it].question.posit.top=p.top,this.questionList[it].question.posit.locate=l,p.left+=mt.width+5}h(st+5)}Q==this.questionList.length?this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"):D()}},J.src=this.questionList[E].question.url}),this.completeCropper()}completeCropper(){this.isShowLoadingFileExam=!1,this.cropperDone=!0,jQuery("#hiddenWrapper").remove();try{this.browserStorageService.getStorage("_DONT_SHOW_MANUAL")||setTimeout(()=>{this.openManualDialog(!1)},2e3)}catch(e){console.log(e)}}toggleViewHelp(e){e.tempData.isShowHelp=!e.tempData.isShowHelp}toogleMixAns(e){e.forcedFixAns?this.commonService.snackError("lang_auto_cau_hoi_nay_phai_co_dinh_dap_an_ban_khong_the_thay_doi"):e.isFixAns=0==e.isFixAns?1:0}toggleMixInGroup(e){for(let n=0;n<this.questionList.length;n++)this.questionList[n].group&&this.questionList[n].group==e&&(1==this.questionList[n].groupType?(this.questionList[n].groupType=0,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_se_bi_dao_thu_tu_khi_de_thi_bi_dao")):(this.questionList[n].groupType=1,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_van_giu_nguyen_thu_tukhi_de_thi_bi_dao")))}toggleRemoveAllGroup(e){let n=this.questionList.filter(i=>i.group&&i.group==e);n.filter(i=>i.tempData.isSelect).length>0?n.forEach(i=>{var a;i.tempData.isSelect=!1,this.changePointWhenDeleteQuestion(null!==(a=i.index)&&void 0!==a?a:0)}):n.forEach(i=>{var a;i.tempData.isSelect=!0,this.changePointWhenDeleteQuestion(null!==(a=i.index)&&void 0!==a?a:0)})}loadingFileJs(){let e=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_cong_cu");this.arrStatusFileExam=[`${e} ...`],this.isShowLoadingFileExam=!0;let n=this.configService.getConfig("dynamicJsVersion");return new Promise(i=>{var a=[{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.js?ver=${n}`),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.worker.js?ver=${n}`),name:"pdf-js-v2-pdf.worker.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"}];this.commonService.loadScriptPromises(a).then(r=>{r?(i(!0),this.isShowLoadingFileExam=!1):i(!1)})})}setHeightFullScreen(){var a=jQuery(window).height()-(jQuery("#bxControl").height()+jQuery("#header-app-component").height()+10);jQuery(".box-file-content").height(a)}resetBoxExamQuestions(e){var n,i;let a=null!==(n=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_lai_de_thi"))&&void 0!==n?n:"",r=null!==(i=this.commonService.myTranslateInstant("lang_auto_hanh_dong_khong_the_hoan_tac"))&&void 0!==i?i:"";this.confirmDialog(a,r,"400px",()=>{this.commonService.myNavigation("/admin/testbank/create-new-document/"+this.cur_cateId)})}confirmDialog(e,n,i,a){this.dialog.open(ni.D,{width:i,data:{title:e,msg:n},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&a()})}handleSaveQuestionError(e){console.log(e),this.isShowLoadingFileExam=!1,this.showErrorSnack("lang_auto_tao_de_khong_thanh_cong_vui_long_thu_lai")}showAllHelp(){this.isShowAllHelp=!this.isShowAllHelp,this.questionList.forEach(e=>{e.tempData.isShowHelp=this.isShowAllHelp})}goToQuestionAll(e,n=150){var i=document.getElementById("box-questions-item-"+e),a=document.getElementById("box-questions-viewer");a&&i&&a.scrollTo({top:Number(i.offsetTop-n)})}rxjsHandleSaveExam(){if(this.isShowLoadingFileExam)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.invalidTypeQuestionConfig.length>0||!this.nameExamInp.value||""==this.nameExamInp.value.trim())this.commonService.snackError("lang_testbank_create_exam_width_file_pdf_cant_save_check_err");else{if(this.isFullNoPoint){const r=dt(10,this.questionList.length);this.questionList.forEach((l,c)=>{l.tempData.point=r[c]})}this.isShowLoadingFileExam=!0;let n,e=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");if(this.selects=this.questionList.filter(r=>r.tempData.isSelect),this.arrStatusFileExam=[`${e}: 0/${this.selects.length}`],!gn.isEmpty(this.groupImages)){let r={};for(const l in this.groupImages)r[l]=this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Qn,this.groupImages[l]);n=(0,Ac.D)(r)}const i=()=>{this.rxjsConstructQuestionInfo()},a=()=>{this.uploadParallelLabelsImage(0,5,r=>{r.success?(this.labelsUrls=r.urls,n?n.subscribe(l=>{var c,_,d="",p={};for(var h in l){var f=l[h];1==f.success?p[h]=null!==(c=f.data)&&void 0!==c?c:"":d=null!==(_=f.message)&&void 0!==_?_:"Unkown error"}""==d?(this.groupImages=p,i()):this.handleSaveQuestionError(d)}):i()):this.handleSaveQuestionError(r.message)})};this.useHeader&&this.examHeader?this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Qn,this.examHeader).subscribe(r=>{var l;1==r.success?(this.examHeader=null!==(l=r.data)&&void 0!==l?l:"",a()):this.handleSaveQuestionError(r.message)}):(this.examHeader="",a())}}rxjsConstructQuestionInfo(){this.rxJsCallSaveParallelQuestion(0,5,this.selects,e=>{e&&this.rxJsCallApiSaveQuestions(n=>{n&&this.handleSaveAllExam()})})}rxJsCallApiSaveQuestions(e){if(this.newQuestionArrSave.length<=this.limitLazyLoad){var n={listQuestions:this.newQuestionArrSave.sort((i,a)=>i.sortByIndex-a.sortByIndex)};this.questionService.apiQuestionSaveObjsV2Post(n).subscribe(i=>{var a,r,l,c,_;1==i.success&&(null!==(l=null===(r=null===(a=i.data)||void 0===a?void 0:a.objs)||void 0===r?void 0:r.length)&&void 0!==l?l:0)>0?(null===(_=null===(c=i.data)||void 0===c?void 0:c.objs)||void 0===_||_.forEach((d,p)=>{this.examConfigs.push({id:d.id,name:d.name,groupId:d.groupId,scorePerQuestion:this.selects[p].tempData.point,totalQuestion:1,sort:p})}),e(!0)):(this.handleSaveQuestionError(i.message),e(!1))})}else this.saveVeryLongListQuestions(this.newQuestionArrSave,e)}saveVeryLongListQuestions(e,n){var i,a,r,l,c;return(0,ke.mG)(this,void 0,void 0,function*(){this.newQuestionArrSave.sort((p,h)=>p.sortByIndex-h.sortByIndex);var _=gn.chunk(this.newQuestionArrSave,Se);let d=0;try{for(const p of _){let h=yield this.questionService.apiQuestionSaveObjsV2Post({listQuestions:p}).toPromise();if(!(1==h?.success&&(null!==(r=null===(a=null===(i=h?.data)||void 0===i?void 0:i.objs)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>0))throw h?.message;null===(c=null===(l=h.data)||void 0===l?void 0:l.objs)||void 0===c||c.forEach((f,w)=>{let k=Se*d+w;this.examConfigs.push({id:f.id,name:f.name,groupId:f.groupId,scorePerQuestion:this.selects[k].tempData.point,totalQuestion:1,sort:k})}),d++}n(!0)}catch(p){this.handleSaveQuestionError(p),n(!1)}})}rxJsCallSaveParallelQuestion(e,n,i,a){for(var r=[],l=0;l<n;l++)(c=e+l)<this.selects.length&&r.push(this.selects[c]);for(var _=0,d=r.length,p=0;p<r.length;p++){var c;this.rxjsProcessSaveOneQuestion(r[p],c=e+p,w=>{w?(_+=1)===d&&this.rxJsCallSaveParallelQuestion(e+d,n,i,a):a(!1)})}d<=0&&a(!0)}uploadParallelLabelsImage(e,n,i){for(var a=[],r=0;r<n;r++)(l=e+r)<this.labelsBase64s.length&&a.push(this.labelsBase64s[l]);for(var c=a.length,_=0,d=0;d<a.length;d++){var l;this.uploadOneLabelsImage(a[d],l=e+d,f=>{f.success?(this.resultUploadBase64Labels.push({index:f.index,url:f.url}),(_+=1)===c&&this.uploadParallelLabelsImage(e+c,n,i)):i({success:!1,message:"Fail to upload labels image to cdn"})})}c<=0&&(this.resultUploadBase64Labels.sort((h,f)=>h.index-f.index),i({success:!0,urls:this.resultUploadBase64Labels.map(h=>h.url)}))}uploadOneLabelsImage(e,n,i){this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Qn,e??"").subscribe(a=>{var r;i(a.success?{success:!0,index:n,url:null!==(r=a.data)&&void 0!==r?r:""}:{success:!1})})}rxjsProcessSaveOneQuestion(e,n,i){let a=e;this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Qn,a.original).subscribe(r=>{var l;1==r.success?(a.original=null!==(l=r.data)&&void 0!==l?l:"",this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Qn,a.help.url).subscribe(c=>{var _;if(1==c.success){a.help.url=null!==(_=c.data)&&void 0!==_?_:"";let p=this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)?e.answers.map(w=>({key:w.label,content:JSON.stringify(Object.assign(Object.assign({},w),{label:null,url:null,x:null,y:null,isCorrect:null,remove:null}))})):e.tempData.answerConfig,h="";e.answers.length>0&&(h=e.answers.map(w=>Object.assign(Object.assign({},w),{url:null,remove:Object.assign(Object.assign({},w.remove),{url:null})})));let f={name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,version:"2",isFixAns:e.isFixAns,groupType:e.groupType.toString(),answerConfig:JSON.stringify(p),answerResult:JSON.stringify(e.tempData.answerResult),answerType:e.tempData.answerType,questionText:"",metaData:"",answerMedia:e.help.url,questionMedia:"",attachments:JSON.stringify(e.tempData.questionMedia),questionContent:JSON.stringify(new Array({$id:0,id:0,name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,path:e.original,extension:"png",pimes:null,url:e.original,groupUrl:e.group?this.groupImages[`image_group_${e.group}`]:"",firstInGroupIndexes:null,abcdLabelPos:null,questionLabelMap:null,metaData:Object.assign(Object.assign({},e),{question:Object.assign(Object.assign({},e.question),{url:null,urlExcludeLabelOnly:this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)?null:e.question.urlExcludeLabelOnly,remove:Object.assign(Object.assign({},e.question.remove),{url:null})}),answers:h,tempData:null,original:null,debugView:null,isGroup:null,help:null,group:null,groupUrl:null,groupType:null})})),questionTags:JSON.stringify(new Array),tags:[],categoryId:0,groupId:e.group,coordinates:"{}",totalQuestion:1,sortByIndex:n};var d=this.newQuestionArrSave.filter(w=>w.name==f.name);if(!d||0==d.length){this.newQuestionArrSave.push(f),this.countSaveQuestion++;let w=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");this.arrStatusFileExam=[`${w}: ${this.countSaveQuestion}/${this.selects.length}`]}i(!0)}else this.handleSaveQuestionError(c.message),i(!1)})):(this.handleSaveQuestionError(r.message),i(!1))})}openDialogSpitPoint(){let e=0,n=0,i=0,a=0,r=0,l=0;for(let c=0;c<this.questionList.length;c++)this.questionList[c].tempData.isSelect&&(this.answerTypeService.isOneChoiceAnswer(this.questionList[c].tempData.answerType)?(e++,n+=this.questionList[c].tempData.point):this.answerTypeService.isFillAnswer(this.questionList[c].tempData.answerType)?(r++,l+=this.questionList[c].tempData.point):(i++,a+=this.questionList[c].tempData.point));if(this.countTrueFalseQuestion=e,this.countFillAnswerQuestion=r,this.dataSpitPoint){let c={multipleQuestion:e,multiplePoint:n.toFixed(4),essayQuestion:i,essayPoint:a.toFixed(4),fillQuestion:r,fillPoint:l.toFixed(4)};this.dataSpitPoint={isShow:!0,obj:c}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointTest(e){var n,i,a;this.multiplePoint=null!==(n=e.multiplePoint)&&void 0!==n?n:0,this.essayPoint=null!==(i=e.essayPoint)&&void 0!==i?i:0,this.fillPoint=null!==(a=e.fillPoint)&&void 0!==a?a:0;let r=Number(this.parseNumberFixed(Number(e.multiplePoint)/this.totalTrueFalseQuestion,8)),l=Number(this.parseNumberFixed(Number(e.fillPoint)/this.totalFillQuestion,8)),c=0,_=this.questionList.filter(d=>d.tempData.isSelect).length;_-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(c=Number(e.essayPoint)/(_-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let d=0;d<this.questionList.length;d++)this.questionList[d].tempData.isSelect&&(this.questionList[d].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[d].tempData.answerType)?r.toString().length>8?Number(this.parseNumberFixed(r,8)):r:this.answerTypeService.isFillAnswer(this.questionList[d].tempData.answerType)?l.toString().length>8?Number(this.parseNumberFixed(l,8)):l:c.toString().length>8?Number(this.parseNumberFixed(c,8)):c);this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1),this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}parseNumberFixed(e,n){let i=Number(parseFloat(e.toString()).toFixed(n));return isNaN(i)?"0":parseFloat(e.toString()).toFixed(n)}changeSelectTempData(e){this.questionList[e].tempData.isSelect=!this.questionList[e].tempData.isSelect,this.changePointWhenDeleteQuestion(e)}changePointWhenDeleteQuestion(e){let n=Number(this.multiplePoint)/this.totalTrueFalseQuestion,i=Number(this.fillPoint)/this.totalFillQuestion,a=0,r=this.questionList.filter(l=>l.tempData.isSelect).length;0==this.essayPoint&&(this.essayPoint=(r-this.totalTrueFalseQuestion-this.totalFillQuestion)*this.questionList[e].tempData.point),r-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(a=Number(this.essayPoint)/(r-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData.answerType)?n.toString().length>8?Number(this.parseNumberFixed(n,8)):n:this.answerTypeService.isFillAnswer(this.questionList[l].tempData.answerType)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:a.toString().length>8?Number(this.parseNumberFixed(a,8)):a)}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionList}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Sc),t.Y36(_t.v),t.Y36(C.gz),t.Y36(U.on),t.Y36(xt.aE),t.Y36(mn.$),t.Y36(hn.K),t.Y36(Zc.C),t.Y36(xt.Oe),t.Y36(Ec.E),t.Y36(Dt.U),t.Y36(Je.T),t.Y36(wo.V),t.Y36(pn),t.Y36(Le.z),t.Y36(Ic.x0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-cropper"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Gc,5),t.Gf($c,5),t.Gf(Kc,5),t.Gf(Wc,5),t.Gf(Vc,5),t.Gf(Xc,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.hiddenInput=i.first),t.iGM(i=t.CRH())&&(n.iframePdf=i.first),t.iGM(i=t.CRH())&&(n.resizeBar=i.first),t.iGM(i=t.CRH())&&(n.boxLeftFile=i.first),t.iGM(i=t.CRH())&&(n.parentResize=i.first),t.iGM(i=t.CRH())&&(n.maskLayer=i.first)}},features:[t.qOj],decls:5,vars:4,consts:[["browserSupported",""],["class","alert alert-danger alert-danger-note p-5","style","font-size: 18px",4,"ngIf","ngIfElse"],[3,"data","closeDialog","setPoint",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[3,"headerBackTolink","showInput","showConfirmButton","examName","handleConfirm","handleCancel"],["id","box-create-action"],[1,"container-fluid","mt-3"],[1,"flex","w-full"],["parentResize",""],["id","box-left-file",3,"ngStyle"],["boxLeftFile",""],["id","box-left-file-input","type","file","accept","application/pdf",1,"azt-hidden"],["class","flex justify-between items-center dt-header",4,"ngIf"],["class","p-2 mt-2 mb-2 text-center alert alert-info",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center alert-danger-note",4,"ngIf"],[1,"box-file-content"],["id","box-left-file-drop","class","box-file-content-file_drop",4,"ngIf"],["id","box-left-file-pdf",1,"box-file-content--viewer",2,"display","none"],["id","box-left-file-canvas",1,"box-file-content--viewer",2,"display","none"],["class","box-questions","id","box-questions-viewer","style","width: 100%",4,"ngIf"],["style","width: 100%","class","m-3 pt-5 p-3 alert text-center alert-danger",4,"ngIf"],["id","resizeBar",3,"mousedown"],["resizeBar",""],["id","iframePdf",3,"hidden"],["iframePdf",""],[1,"maskLayer"],["maskLayer",""],["frameBorder","0","scrolling","auto","height","100%","width","100%",3,"src"],["class","box-file-content-file_preview--blur_status","style","\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100vh;\n            background: #2632386b;\n            color: white;\n            z-index: 999;\n          ",4,"ngIf"],[3,"ngIf"],[1,"flex","justify-between","items-center","dt-header"],[1,"box-control"],["color","primary",1,"example-margin",3,"matTooltip","color","formControl"],["class","pagination",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-yF9GeAl2MK",1,"btnTotal",3,"click"],[1,"flex"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8xKwGSyZ8J",1,"clickable","ml-3",3,"matTooltip","click"],[1,"flex","justify-between","items-center"],[1,"form-enter-question","ml-1"],["id","inputQuestionNum","type","number",2,"padding","0",3,"formControl","matAutocomplete","keyup.enter"],["id","cropperFilterQuestion"],["auto","matAutocomplete"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click",4,"ngFor","ngForOf"],["type","hidden"],["hiddenInput",""],["azt-track-service","create-exam-with-file-pdf-E8H8iTfHP6","id","btnEdits","mat-raised-button","",3,"click"],[1,"pagination"],["type","number","name","inputPage","id","",3,"ngModel","keyup.enter","ngModelChange"],["azt-track-service","create-exam-with-file-pdf-j3HtJoLN74",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-i02GVPZfkg",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click"],[1,"p-2","mt-2","mb-2","text-center","alert","alert-info"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],[1,"text-right","mt-1"],["azt-track-service","create-exam-with-file-pdf-8zeZ9XDtb_",1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-iQvwZJTrjj",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-left-file-drop",1,"box-file-content-file_drop"],[1,"box-file-content-file_drop--input"],[1,"box-file-content-file_drop--input-icon"],["azt-track-service","create-exam-with-file-pdf-9xWndBIH7o","target","_self",2,"color","#5c5c5c",3,"href","download","click"],["azt-track-service","create-exam-with-file-pdf-vXYSGoSHdK","target","_self",3,"href","download","click"],["id","box-questions-viewer",1,"box-questions",2,"width","100%"],["id","examHeader","class","mb-4","style","padding: 15px; padding-top: 0",4,"ngIf"],["class","box-questions-item",4,"ngFor","ngForOf"],["class","pagination mb-5",4,"ngIf"],["id","examHeader",1,"mb-4",2,"padding","15px","padding-top","0"],["class","remove-layer",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf--HD0um3BB54",1,"clear-icon",3,"matTooltip","click"],["alt","",2,"width","100%",3,"src"],[1,"remove-layer"],[1,"box-questions-item"],["class","w-100 question-wrapper",4,"ngIf"],[1,"w-100","question-wrapper"],["class","alert alert-danger alert-danger-note","style","margin-bottom: -2px",4,"ngIf"],["class","box-questions-item__img group pt-4 mb-2",3,"hidden",4,"ngIf"],[1,"box-questions-item__img"],["azt-track-service","create-exam-with-file-pdf-n9OHfjQzIw6",1,"clear-icon",3,"matTooltip","click"],["class","cr-question-pieces",4,"ngIf"],[1,"box-questions-item__control"],[1,"box-questions-item__control_flex","position-relative","bg-slate-300","dark:bg-darkmode-400",3,"ngClass"],[1,"flex","items-center"],[2,"font-size","16px","margin-right","10px"],[1,"form-select","form-select-sm",2,"width","110px",3,"change"],[3,"value","selected"],["class","text-center flex items-center",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"font-size","16px"],["appReplaceCommas","","type","text",1,"form-control","inp",3,"value","input"],["azt-track-service","create-exam-with-file-pdf-6YL1FMa2jmG",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-bnQZ8KjeH-4",1,"attch-icon","clickable","flex",3,"click"],[1,"box-file-content-file_drop--input-icon",3,"matTooltip"],["azt-track-service","create-exam-with-file-pdf-4SNs7lyxp-f",1,"clickable","flex",3,"click"],["class","box-file-content-file_drop--input-icon",3,"matTooltip",4,"ngIf"],["style","margin-top: -5px; margin-bottom: 5px; border-radius: 5px",4,"ngIf"],[1,"alert","alert-danger","alert-danger-note",2,"margin-bottom","-2px"],[1,"box-questions-item__img","group","pt-4","mb-2",3,"hidden"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-9FChZOhg2jy",3,"click"],["class","mixInGroup",3,"matTooltip",4,"ngIf"],["class","mixInGroupNotif",4,"ngIf"],["loading","lazy","clickable","","alt","",3,"matTooltip","src"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb",1,"clear-icon",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI",1,"clear-icon",3,"matTooltip","click"],[1,"mixInGroup",3,"matTooltip"],[1,"mixInGroupNotif"],[1,"cr-question-pieces"],[1,"cr-question-label","mb-2"],["loading","lazy","alt","",3,"ngStyle","src"],[1,"cr-question","mb-2"],["loading","lazy","alt","",2,"width","100%","height","auto",3,"width","height","src"],[1,"cr-answers"],["class","cr-aswr",4,"ngFor","ngForOf"],[1,"cr-aswr"],[1,"mb-2"],["loading","lazy","alt","",2,"margin-right","10px","margin-bottom","5px",3,"ngStyle","src"],[1,"text-center","flex","items-center"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd","class","btn btn-ans",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd",1,"btn","btn-ans",3,"ngClass","click"],[1,"text-center"],["azt-track-service","create-exam-with-file-pdf-KOgDIAa3KdB",1,"btnAttQuestion",3,"click"],["class","box p-2 mt-2",4,"ngIf"],["class","alert alert-danger alert-danger-note",4,"ngIf"],[1,"box","p-2","mt-2"],[1,"alert","alert-danger","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-AlAR7KqulJm","href","https://docs.azota.vn/docs/trung-tam-tro-giup/tao-de-thi/tao-de-thi-khi-cau-hoi-khong-co-dap-an-de-chon/","target","_blank"],["style","margin-bottom: 50px; opacity: 0.8","class","box-questions-item__img_result",4,"ngIf","ngIfElse"],["noHelp",""],[1,"box-questions-item__img_result",2,"margin-bottom","50px","opacity","0.8"],[3,"src"],[2,"color","rgb(219, 219, 219)","padding","8px 20px"],[2,"margin-top","-5px","margin-bottom","5px","border-radius","5px"],["type","file","name","",1,"azt-hidden",3,"id","change"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4","class","dropFileAttachQuestion",3,"click",4,"ngIf"],["class","dropFileAttachQuestion bg-white",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4",1,"dropFileAttachQuestion",3,"click"],[1,"dropFileAttachQuestion","bg-white"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["controls",""],["type","audio/mpeg",3,"src"],["azt-track-service","create-exam-with-file-pdf-IopYkUBesXC",2,"margin-left","10px","background","#f06292","color","white","padding","0 10px","border-radius","5px","font-size","10px",3,"click"],[1,"pagination","mb-5"],["azt-track-service","create-exam-with-file-pdf-g_6T5-6RWqm",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-lPIlOAl7wnQ",1,"clickable",3,"ngStyle","matTooltip","click"],[1,"m-3","pt-5","p-3","alert","text-center","alert-danger",2,"width","100%"],[2,"font-size","50px","width","50px","height","50px"],["azt-track-service","create-exam-with-file-pdf-RPU348FbyDo",1,"btn","btn-primary",3,"click"],[1,"box-file-content-file_preview--blur_status",2,"position","fixed","top","0","left","0","width","100%","height","100vh","background","#2632386b","color","white","z-index","999"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[2,"display","flex","justify-content","center","margin-top","5rem"],["color","accent",3,"strokeWidth","diameter"],["class","span-status","style","font-size: 20px; margin-top: 30px;",4,"ngFor","ngForOf"],[1,"span-status",2,"font-size","20px","margin-top","30px"],[2,"background","#607d8b","padding","10px","border-radius","5px"],[1,"content","relative",2,"border-radius","0"],[3,"listQuestion","headerPosition","listCanvas","applyEdit"],[1,"alert","alert-danger","alert-danger-note","p-5",2,"font-size","18px"],[3,"data","closeDialog","setPoint"],[3,"startIndexQuestion","data","type","closeDialog"]],template:function(e,n){if(1&e&&(t.YNc(0,ad,29,21,"ng-template",null,0,t.W1O),t.YNc(2,sd,4,7,"div",1),t.YNc(3,rd,1,1,"azt-split-point",2),t.YNc(4,ld,2,3,"div",3)),2&e){const i=t.MAs(1);t.xp6(2),t.Q6J("ngIf",!n.isSupportedBrowser)("ngIfElse",i),t.xp6(1),t.Q6J("ngIf",null==n.dataSpitPoint?null:n.dataSpitPoint.isShow),t.xp6(1),t.Q6J("ngIf",n.dataExamInfo.isShow)}},dependencies:[y.mk,y.sg,y.O5,y.PC,oi.VN,oi.QJ,bn.CK,je.eB,To.FC,Wt.Hw,Qi.sN,Qt.Kd,m._Y,m.YN,m.Kr,m.Fj,m.wV,m.JJ,m.JL,m.On,m.F,m.oH,Mc,Co,ko,ai.Z,Yc,y.Ov,tt.bT,tt.GT,tt.yl,tt.y,tt.DC,tt.Tf,tt.UG],styles:[".span-status[_ngcontent-%COMP%]{font-size:18px;color:#fff}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%;background:rgba(0,0,0,.5882352941);height:100%;padding-top:20%}mat-icon.clear-icon[_ngcontent-%COMP%]{font-size:15px;color:#999;position:absolute;right:5px;z-index:10;top:5px;height:unset;width:unset}mat-icon.clear-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.remove-layer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:8;background-color:#000000d1;display:flex;justify-content:center;align-items:center;color:#fff;font-size:1em}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#examHeader[_ngcontent-%COMP%]{background:#fff;border-radius:7px;overflow:hidden;position:relative}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;margin-top:-15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;box-shadow:none;height:calc(100vh - 110px);display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;overflow-x:hidden;background:#323639;padding:4px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{margin-bottom:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{position:relative;padding:10px;border-radius:5px 5px 0 0;overflow:hidden;background-color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img.group[_ngcontent-%COMP%]{border-radius:5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default;border:1px solid #c0c0c0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:0 0 5px 5px;border:1px solid #414548}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:0 0 5px 5px;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:5px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:70px;text-align:center;border:none;height:25px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{border:none;height:25px;background-color:#e0e0e0;border-radius:5px;background-position:right 0rem center!important;color:#000;padding:0 5px;padding-right:20px!important;font-size:revert!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:55%;left:170px;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:85%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .btnAttQuestion[_ngcontent-%COMP%]{background:#f59c12;height:25px;display:flex;align-items:center;padding:0 10px;border-radius:3px;cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]{display:flex;height:88px;background:#ececec;justify-content:center;align-items:center;border-bottom:1px solid #44beb5;cursor:pointer;border-radius:5px 5px 0 0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{height:40px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:80px;background:white;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:3px;margin-left:5px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{text-align:center}.isShowHelp[_ngcontent-%COMP%]{display:block!important}.question-wrapper[_ngcontent-%COMP%]{position:relative}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;z-index:10;color:#fff!important;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.img-group[_ngcontent-%COMP%]{position:relative}.img-group[_ngcontent-%COMP%]   .mixInGroupNotif[_ngcontent-%COMP%]{display:none}.img-group[_ngcontent-%COMP%]:hover   .mixInGroupNotif[_ngcontent-%COMP%]{display:block;background-color:#d63031}.mixInGroup[_ngcontent-%COMP%], .mixInGroupNotif[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-30px;left:-46px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.dt-header[_ngcontent-%COMP%]{background:#323639;color:#fff;padding:12px}#examNameInput[_ngcontent-%COMP%]{position:absolute;width:110%;left:-10%;top:-18px;border:1px solid #e0e0e0;border-radius:3px;padding:0 5px;height:36px}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:absolute;z-index:9;width:50%;right:-50%;top:-18px}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}#examSaveBtns[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#box-manual[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;position:absolute;z-index:9;width:50%;right:100%;top:-16px}#box-manual[_ngcontent-%COMP%]   #buttonHD[_ngcontent-%COMP%]{color:#2361ae;border:none}.error-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}#btnEdits[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.pagination[_ngcontent-%COMP%]{min-width:130px;display:flex;align-items:center;justify-content:space-between;max-width:230px;color:#fff}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:25px;text-align:center;border:none;background-color:#414548;color:#fff}.pagination.mb-5[_ngcontent-%COMP%]{margin:0 auto}.alert-danger-note[_ngcontent-%COMP%]{display:revert!important;border:1px solid transparent!important;border-radius:.25rem!important;color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important}#inputQuestionNum[_ngcontent-%COMP%]{height:22px;width:100%;text-align:center;border:none;margin-left:5px;min-width:30px;max-width:50px;border-radius:3px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#resizeBar[_ngcontent-%COMP%]{width:5px;transition:background-color .5s}#resizeBar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}#resizeBar.hover[_ngcontent-%COMP%]{background-color:#2262ae}#iframePdf[_ngcontent-%COMP%]{position:relative;flex:auto}#iframePdf[_ngcontent-%COMP%]   .maskLayer[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}span.attch-icon[_ngcontent-%COMP%]{position:relative}span.attch-icon[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-12px;left:50%;margin-left:-7px;color:#ececec}"]}),o})(),_d=(()=>{class o{ngOnInit(){}constructor(e,n){this.dialogRef=e,this.data=n,this.isNotShowAgain=new m.p4}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["user-manual"]],decls:41,vars:32,consts:[[1,"box","p-5"],[2,"min-height","55vh"],[1,"text-center","mb-2"],[1,"font-medium","text-lg"],[1,"mt-2"],[2,"list-style","inherit","margin","inherit","padding","auto"],["src","assets/images/pdf-debug-v2.png","alt","",1,"mb-2",2,"max-width","100%"],[1,"mb-0"],["align","end"],[1,"flex","items-center","w-full",2,"justify-content","space-between"],[1,"form-check"],["id","is-not-show-again","type","checkbox",1,"form-check-input",3,"formControl"],["for","is-not-show-again",1,"form-check-label"],["azt-track-service","create-exam-with-file-pdf-WfkRk3L46OB",1,"btn","btn-primary","w-24",3,"mat-dialog-close"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"azt-mat-dialog-content")(2,"div",1)(3,"div",2)(4,"span",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",4)(8,"p"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"ul",5)(15,"li"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"li"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"li"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()(),t._UZ(24,"img",6),t.TgZ(25,"p"),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"p",7),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()(),t.TgZ(31,"mat-dialog-actions",8)(32,"div",9)(33,"div",10),t._UZ(34,"input",11),t.TgZ(35,"label",12),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"button",13),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_testbank_create_exam_width_file_pdf_tutorial_pdf")," "),t.xp6(4),t.hij("",t.lcZ(10,14,"lang_testbank_create_exam_width_file_pdf_note_one"),"."),t.xp6(3),t.hij("",t.lcZ(13,16,"lang_testbank_create_exam_width_file_pdf_note_two"),":"),t.xp6(4),t.Oqu(t.lcZ(17,18,"lang_testbank_create_exam_width_file_pdf_label_question")),t.xp6(3),t.Oqu(t.lcZ(20,20,"lang_testbank_create_exam_width_file_pdf_lable_answer")),t.xp6(3),t.Oqu(t.lcZ(23,22,"lang_testbank_create_exam_width_file_pdf_content_area")),t.xp6(4),t.hij("",t.lcZ(27,24,"lang_testbank_create_exam_width_file_pdf_note_three")," "),t.xp6(3),t.hij("",t.lcZ(30,26,"lang_testbank_create_exam_width_file_pdf_note_four"),"."),t.xp6(5),t.Q6J("formControl",n.isNotShowAgain),t.xp6(2),t.hij(" ",t.lcZ(37,28,"lang_testbank_create_exam_width_file_pdf_not_view")," "),t.xp6(2),t.Q6J("mat-dialog-close",n.isNotShowAgain.value),t.xp6(1),t.Oqu(t.lcZ(40,30,"lang_buttom_close")))},dependencies:[U.aO,U.ev,m.Wl,m.JJ,m.oH,Di.O,tt.bT],encapsulation:2}),o})();var Vt=T(20371),Dn=T(94327),Be=T(20259),cn=T(62842),Fi=T(79695),Ri=T(69751);class _n{constructor(){this.linkDataFile=""}initPdfData(s){return this.linkDataFile=s,this}createAnswerSheet(){return new Ri.y(s=>{s.next({success:1,message:"success"}),s.complete()})}exportPdf(s){Dn.saveAs(this.linkDataFile,s)}}let Oo=(()=>{class o{constructor(e){this.cdnService=e}createAnswerSheet(){return new Ri.y(e=>{this.creator?this.creator.createAnswerSheet().subscribe(n=>{1===n.success?(e.next({success:1,message:"successful"}),e.complete()):(e.next({success:0,message:n.message}),e.complete())}):(e.next({success:0,message:"Not find creator"}),e.complete())})}createMinistryAnswerSheet(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a4_bo_giao_duc_120.pdf")),this}createAzotaAnswerSheet_A4_120(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a4_120.pdf")),this}createAzotaAnswerSheet_A4(e){const n=new _n;return this.creator=n.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a4_${e&&e<=120?parseInt(e.toString(),10):120}.pdf`)),this}createAnswerSheetWrite(e){const n=new _n;return this.creator=n.initPdfData(this.cdnService.convertRawLinkOfGitHubWithLocale(`blob/master/azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_write_${e&&e<=120?parseInt(e.toString(),10):120}.docx?raw=true`)),this}createSmallAzotaAnswerSheet_A6_50(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a6_full_a4_50.pdf")),this}createSmallAzotaAnswerSheet_A6_20(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a6_full_a4_20.pdf")),this}createSmallAzotaAnswerSheet_A8_20(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a8_full_a4_20.pdf")),this}createThirtyFiveMultipleAndEssayAzotaAnswerSheet_35(){const e=new _n;return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answersheet_mau_a4_hon_hop_35.pdf")),this}exportPdf(e){this.creator&&this.creator.exportPdf(e+".pdf")}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Dt.U))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var fn=T(1218),dd=T(15816),zi=T(28293),ud=T(34890),Ji=T(38469),md=T(44207),pd=T(32343);function hd(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function gd(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"span")(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,hd,2,0,"span",10),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.xp6(2),t.hij(' "',null==e.classroom?null:e.classroom.name,'" '),t.xp6(1),t.Q6J("ngIf",i.classroomErrorObjs.length>1&&n!==i.classroomErrorObjs.length-1)}}function fd(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",15),t.qZA()()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_loi")," "))}function xd(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",16),t.qZA()()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_an_xem_chi_tiet_loi")," "))}function vd(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function bd(o,s){if(1&o&&(t.TgZ(0,"span",28)(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,vd,2,0,"span",10),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2).$implicit;t.xp6(2),t.hij(' "',e,'" '),t.xp6(1),t.Q6J("ngIf",i.duplicatedStudentCodes&&i.duplicatedStudentCodes.length>1&&n!==i.duplicatedStudentCodes.length-1)}}function wd(o,s){if(1&o&&(t.TgZ(0,"div",26)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,bd,4,2,"span",27),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ","- "+t.lcZ(3,2,"lang_auto_so_bao_danh_bi_trung")+": ",""),t.xp6(2),t.Q6J("ngForOf",e.duplicatedStudentCodes)}}function Td(o,s){1&o&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ","- "+t.lcZ(2,1,"lang_auto_hoc_sinh_khong_co_so_bao_danh")," "))}function Cd(o,s){if(1&o&&(t.TgZ(0,"div",23)(1,"div",17)(2,"div",24)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"span",13),t._uU(7),t.qZA()(),t.YNc(8,wd,5,4,"div",25),t.YNc(9,Td,3,3,"div",25),t.qZA()()),2&o){const e=s.$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,4,"lang_auto_cac_loi_so_bao_danh_trong_lop")+" "," "),t.xp6(3),t.hij(" ",'"'+(null==e.classroom?null:e.classroom.name)+'": '," "),t.xp6(1),t.Q6J("ngIf",e.isDuplicatedStudentCode),t.xp6(1),t.Q6J("ngIf",e.isMissingStudentCode)}}function kd(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",29),t._UZ(2,"path",30)(3,"path",31)(4,"path",32),t.qZA()())}function Od(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",33)(2,"g",34)(3,"g",35),t._UZ(4,"circle",36),t.TgZ(5,"path",37),t._UZ(6,"animateTransform",38),t.qZA()()()()())}function yd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,Cd,10,6,"div",19),t.qZA(),t.TgZ(3,"div",20)(4,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getStudentListByClassroomIds(i.classroomIds))}),t.YNc(5,kd,5,0,"span",10),t.YNc(6,Od,7,0,"span",10),t.TgZ(7,"span",22),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.classroomErrorObjs),t.xp6(3),t.Q6J("ngIf",!e.loadingExport),t.xp6(1),t.Q6J("ngIf",e.loadingExport),t.xp6(2),t.hij(" ",t.lcZ(9,4,"lang_auto_tai_danh_sach_hoc_sinh_loi")," ")}}function Ad(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-student-list",39),t.NdJ("exportDataDone",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.exportStudentListDone(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("objs",e.exportStudentObjs)("type",1)}}let Sd=(()=>{class o extends R.Q{constructor(e,n){super(e),this.commonService=e,this.studentProfileV2Service=n,this.classroomErrorObjs=[],this.classroomIds="",this.examId=0,this.checkPostParam=!1,this.showExpandError=!1,this.loadingExport=!1}getStudentListByClassroomIds(e){this.loadingExport=!0,this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(e,this.checkPostParam?void 0:this.examId).subscribe(n=>{var i,a,r;if(1===n.success){this.exportStudentObjs=n.data;let l=null!==(a=null===(i=this.exportStudentObjs)||void 0===i?void 0:i.length)&&void 0!==a?a:0;if(this.exportStudentObjs){let c=[],_=[];this.exportStudentObjs.forEach((d,p,h)=>{c.find(f=>f.identificationNumber===d.identificationNumber)?_.push(d):c.push(d)});for(let d=0;d<l;d++)if(this.exportStudentObjs[d].identificationNumber)for(let p=0;p<_.length;p++)this.exportStudentObjs&&this.exportStudentObjs[d].identificationNumber===_[p].identificationNumber&&(this.exportStudentObjs[d].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[d].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let c=0;c<l;c++)if(this.exportStudentObjs[c].identificationNumber)for(let _=c+1;_<l;_++)this.exportStudentObjs&&this.exportStudentObjs[c].identificationNumber===this.exportStudentObjs[_].identificationNumber&&(this.exportStudentObjs[c].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[c].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(null!==(r=n.message)&&void 0!==r?r:"");this.loadingExport=!1}))}exportStudentListDone(e){let n=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";Dn.saveAs(e,n)}toggleExpandErrors(){this.showExpandError=!this.showExpandError}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.LU))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-errors-identification"]],inputs:{classroomErrorObjs:"classroomErrorObjs",classroomIds:"classroomIds",examId:"examId",checkPostParam:"checkPostParam"},features:[t.qOj],decls:18,vars:11,consts:[[1,"azt-error-block"],[1,"flex","text-pending"],[1,"text-lg"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-triangle","data-lucide","alert-triangle",1,"lucide","lucide-alert-triangle","w-6","h-6","mr-2","flex-none"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[4,"ngFor","ngForOf"],[1,"mt-2","error-detail"],["azt-track-service","azt-errors-identification-ZElYECOq3mc",1,"btn-text-primary","font-medium",3,"click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["points","6 9 12 15 18 9"],["points","18 15 12 9 6 15"],[1,"mt-2"],[1,"alert","alert-outline-danger","show"],["class","text-md",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","azt-errors-identification-85xomF_be8D",1,"btn-text-primary","font-medium",3,"click"],[1,"text-primary"],[1,"text-md"],[1,"az-error-title"],["class","mt-1 text-xs",4,"ngIf"],[1,"mt-1","text-xs"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m8 17 4 4 4-4"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-5","h-5","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"objs","type","exportDataDone"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"line",5)(6,"line",6),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.YNc(9,gd,4,2,"span",7),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return n.toggleExpandErrors()}),t.YNc(14,fd,5,3,"span",10),t.YNc(15,xd,5,3,"span",10),t.qZA(),t.YNc(16,yd,10,6,"div",11),t.qZA()(),t.YNc(17,Ad,1,2,"azt-export-excel-for-student-list",12)),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,7,"lang_auto_so_bao_danh_cua_hoc_sinh_trong_lop")," "),t.xp6(2),t.Q6J("ngForOf",n.classroomErrorObjs),t.xp6(1),t.hij(" ",t.lcZ(11,9,"lang_auto_dang_bi_trung_hoac_bi_thieu")," "),t.xp6(4),t.Q6J("ngIf",!n.showExpandError),t.xp6(1),t.Q6J("ngIf",n.showExpandError),t.xp6(1),t.Q6J("ngIf",n.showExpandError),t.xp6(1),t.Q6J("ngIf",n.exportStudentObjs))},dependencies:[y.sg,y.O5,pd.s,tt.bT],encapsulation:2}),o})();function Zd(o,s){1&o&&(t.TgZ(0,"div",2),t.O4$(),t.TgZ(1,"svg",3)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function Ed(o,s){1&o&&(t.TgZ(0,"p",16),t.O4$(),t.TgZ(1,"svg",17),t._UZ(2,"path",18)(3,"polyline",19)(4,"path",20)(5,"rect",21)(6,"path",22),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()),2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_file_danh_sach_so_bao_danh")," "))}function Id(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function Md(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",29),t._UZ(1,"path",30)(2,"polyline",31)(3,"line",32),t.qZA())}function Pd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",23),t._UZ(1,"input",24),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.printStudentCode())}),t.YNc(3,Id,7,0,"span",26),t.YNc(4,Md,4,0,"ng-template",null,27,t.W1O),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&o){const e=t.MAs(5),n=t.oxw(3);t.xp6(1),t.s9C("value",n.createExportStudentCodeName(!1)),t.xp6(2),t.Q6J("ngIf",n.isLoadingPrintCodeStudent)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_tai_ve")," ")}}const Ld=function(o){return{"text-left":o}};function jd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.clickNumbering())}),t.O4$(),t.TgZ(2,"svg",29),t._UZ(3,"path",35)(4,"path",36)(5,"path",37)(6,"path",38),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(4,Ld,1==e.styleView)),t.xp6(7),t.hij(" ",t.lcZ(8,2,"lang_auto_danh_lai_sbd")," ")}}function Nd(o,s){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,Ed,9,3,"p",13),t.YNc(2,Pd,8,6,"div",14),t.YNc(3,jd,9,6,"div",15),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering)}}function qd(o,s){1&o&&(t.TgZ(0,"div",45),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_ban_chua_chon_lop_vui_long_chon_lop_de_in_so_bao_danh")," "))}function Qd(o,s){1&o&&(t.TgZ(0,"div",57),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function Dd(o,s){if(1&o&&(t.TgZ(0,"div",55),t.YNc(1,Qd,3,3,"div",56),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}function Ud(o,s){if(1&o&&(t.TgZ(0,"div",46)(1,"div",47)(2,"h3",48),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",49),t._UZ(6,"azt-list-classroom-checkall",50),t.qZA()(),t.TgZ(7,"div",51)(8,"div",52)(9,"ng-scrollbar",53),t._UZ(10,"azt-list-classroom-checkbox",54),t.qZA()(),t.YNc(11,Dd,2,1,"div",41),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,10,"lang_auto_danh_so_bao_danh")," "),t.xp6(3),t.Q6J("form",e.form)("objs",e.classroomObjs)("permissionName",e.permissionTypes.exam),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("form",e.form)("objs",e.classroomObjs)("examClassroomObjs",e.examClassroomObjs)("permissionName",e.permissionTypes.exam),t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors)}}function Fd(o,s){if(1&o&&(t.TgZ(0,"div",55)(1,"div",57),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,1,e.msgErrorTwo)," ")}}function Rd(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function zd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.destroyConfig())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.savePrintExam())}),t.YNc(5,Rd,7,0,"span",61),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||!e.validFormIdentify),t.xp6(1),t.Q6J("ngIf",e.loadingConfig),t.xp6(1),t.hij(" ",t.lcZ(7,6,"lang_auto_tiep_tuc")," ")}}function Jd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",62),t._UZ(1,"azt-errors-identification",63),t.TgZ(2,"div",64),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",65)(6,"button",66),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.backToChooseClassroom())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",67),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openAutomaticIdentification())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(3);let n;t.xp6(1),t.Q6J("classroomErrorObjs",e.classroomErrorObjs)("classroomIds",e.classroomIds)("examId",null!==(n=null==e.examObj?null:e.examObj.id)&&void 0!==n?n:0)("checkPostParam",e.checkPostParam),t.xp6(2),t.hij(" ",t.lcZ(4,7,"lang_auto_vui_long_click_vao_sua_sbd_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(8,9,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(11,11,"lang_auto_sua_sbd")," ")}}function Bd(o,s){if(1&o&&(t.YNc(0,qd,3,3,"div",39),t.YNc(1,Ud,12,12,"div",40),t.YNc(2,Fd,4,3,"div",41),t.TgZ(3,"div",42),t.YNc(4,zd,8,8,"div",43),t.YNc(5,Jd,12,13,"div",44),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("ngIf",""!==e.msgError&&e.form.controls.classroomIds.errors&&0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf",0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf","lang_core_class_has_no_student"===e.msgErrorTwo&&0===e.classroomErrorObjs.length),t.xp6(2),t.Q6J("ngIf",0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf",e.classroomErrorObjs.length>0)}}function Hd(o,s){if(1&o&&(t.TgZ(0,"form",9)(1,"div",10),t.YNc(2,Nd,4,3,"div",11),t.YNc(3,Bd,6,5,"ng-template",null,12,t.W1O),t.qZA()()),2&o){const e=t.MAs(4),n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("ngIf",!n.checkNumbering)("ngIfElse",e)}}let yo=(()=>{class o extends R.Q{createExportStudentCodeName(e){var n,i,a,r,l,c=this.printAnswersheetService.exportFileNameOfStudentCode(1,null!==(i=null===(n=this.examObj)||void 0===n?void 0:n.name)&&void 0!==i?i:"",null!==(r=null===(a=this.examObj)||void 0===a?void 0:a.hashId)&&void 0!==r?r:"");return e&&(c=null!==(l=this.commonService.replaceAll(c,"_","-"))&&void 0!==l?l:""),c}clickNumbering(){this.checkNumbering=!0}showInputAdvanceSetting(){this.showAdvanceSetting=!this.showAdvanceSetting}backToChooseClassroom(){this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}destroyConfig(){this.checkNumbering=!1,this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}savePrintExam(){this.loadingConfig=!0,this.classroomErrorObjs=[];let e=this.commonService.getFormObj(this.form);var n=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.exam);const i=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,n,e.classroomIds);0===i.length&&this.examClassroomObjs.forEach(r=>{r.classroomId&&i.push(r.classroomId)}),this.classroomIds=i.toString(),this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:i,examHashId:this.hashId}).subscribe(r=>{var l,c,_,d;if(1==r.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(null!==(l=this.hashId)&&void 0!==l?l:""),this.msgErrorTwo="";else{let p=null!==(_=null===(c=r?.data)||void 0===c?void 0:c.classrooms)&&void 0!==_?_:[];for(let h=0;h<p.length;h++){const f=p[h];(f.isDuplicatedStudentCode||f.isMissingStudentCode)&&this.classroomErrorObjs.push(f)}this.loadingConfig=!1,this.msgErrorTwo=null!==(d=r.message)&&void 0!==d?d:""}this.checkPostParam=!0})}printStudentCode(){this.isLoadingPrintCodeStudent=!0,this.subscriptions.add(this.offlineStudentCodeService.apiOfflineStudentCodeCreateStudentCodesGet(this.hashId).subscribe(e=>{var n,i,a,r,l,c,_;if(1==e.success)this.printAnswersheetService.printStudentCode(this.examObj,null!==(i=null===(n=e?.data)||void 0===n?void 0:n.objs)&&void 0!==i?i:[]),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!1,this.msgError="",this.classroomErrorObjs=[];else{let d=null!==(l=null===(r=null===(a=e?.data)||void 0===a?void 0:a.examClassroomConfig)||void 0===r?void 0:r.classrooms)&&void 0!==l?l:[],p=[];for(let h=0;h<d.length;h++){const f=d[h];(f.isDuplicatedStudentCode||f.isMissingStudentCode)&&this.classroomErrorObjs.push(f),p.push(null===(c=f.classroom)||void 0===c?void 0:c.id)}this.classroomIds=p.toString(),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!0,this.msgError=null!==(_=e.message)&&void 0!==_?_:""}this.checkPostParam=!1}))}calcMaxIndexInput(){let e=this.commonService.getFormObj(this.form);var n=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.exam);const i=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,n,e.classroomIds);let a=999999;return this.classroomObjs.forEach(r=>{var l;this.commonService.filterArray(i,r.id)&&(a-=null!==(l=r.countStudents)&&void 0!==l?l:0)}),a}checkValidFormIdentify(e){this.validFormIdentify=e.target instanceof HTMLInputElement&&Number(e.target.value)<=this.calcMaxIndexInput()}getExamDataByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(n=>{var i,a,r;1==n.success?null!=n.data&&(this.examObj=n.data.examObj,this.classroomObjs=null!==(i=n.data.classroomObjs)&&void 0!==i?i:new Array,this.examClassroomObjs=null!==(a=n.data.examClassroomObjs)&&void 0!==a?a:[],this.successStatusObj()):this.errorStatusObj(null!==(r=n.message)&&void 0!==r?r:"",!0)}))}openAutomaticIdentification(){let e=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.exam),n=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,e,this.form.controls.classroomIds.value);0===n.length&&this.examClassroomObjs.forEach(i=>{i.classroomId&&n.push(i.classroomId)}),this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(n.toString()).subscribe(i=>{var a,r;1===i.success&&(this.totalStudent=null!==(r=null===(a=i.data)||void 0===a?void 0:a.length)&&void 0!==r?r:0,this.dialog.open(md.p,{data:{type:2,listCheckBox:n,totalStudent:this.totalStudent},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(c=>{c&&this.savePrintExam()}))}))}ngOnInit(){this.hashId&&this.getExamDataByHashId(this.hashId),this.form=this.formBuilder.group({classroomIds:this.formBuilder.array([]),startIdentifyIndex:new m.p4(this.startStudentCode,[m.kI.min(1),m.kI.max(999999),m.kI.pattern(/^[0-9]*$/)]),whoAllow:new m.p4(2)},{validators:[Pi.h.classroomCheckBoxValidator]}),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_){super(e),this.commonService=e,this.documentConfigService=n,this.formBuilder=i,this.dialog=a,this.offlineStudentCodeService=r,this.printAnswersheetService=l,this.sEAztClassroomCheckboxService=c,this.studentProfileV2Service=_,this.form=new m.nJ({}),this.hashId="",this.styleView=0,this.checkStudentCode=!1,this.startStudentCode=1,this.examObj=void 0,this.permissionTypes=ze.$,this.checkNumbering=!1,this.checkDownloadSBD=!1,this.classroomObjs=[],this.examClassroomObjs=[],this.isLoadingPrintCodeStudent=!1,this.loadingConfig=!1,this.showAdvanceSetting=!1,this.validFormIdentify=!0,this.classroomErrorObjs=[],this.classroomIds="",this.msgError="",this.msgErrorTwo="",this.totalStudent=0,this.checkPostParam=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.Cq),t.Y36(m.qu),t.Y36(U.on),t.Y36(xt.MH),t.Y36(Fi.Y),t.Y36(Li.L),t.Y36(xt.LU))},o.\u0275cmp=t.Xpm({type:o,selectors:[["numbering-identification"]],inputs:{hashId:"hashId",styleView:"styleView",checkStudentCode:"checkStudentCode",startStudentCode:"startStudentCode"},features:[t.qOj],decls:3,vars:2,consts:[["class","w-full flex",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-full","flex"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-8","h-8","mx-auto"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"formGroup"],[1,"app"],["class","app",4,"ngIf","ngIfElse"],["numbering",""],["class","font-medium flex items-center intro-x",4,"ngIf"],["class","relative mt-2 intro-x",4,"ngIf"],["class","mt-3",3,"ngClass",4,"ngIf"],[1,"font-medium","flex","items-center","intro-x"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","text-success"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["points","14 2 14 8 20 8"],["d","M10 12h2v6"],["x","2","y","12","width","4","height","6"],["d","M10 18h4"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","numbering-identification-mO_7BlXNpZ8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[4,"ngIf","ngIfElse"],["donePrintCodeLoading",""],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"mt-3",3,"ngClass"],["azt-track-service","numbering-identification-GfouPhXkxs2",1,"btn","btn-outline-secondary",3,"click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["class","text-danger font-medium mb-4",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","w-full p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-2","justify-between","numbering-identification"],["class","col-span-12 items-center text-right mt-3",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],[1,"text-danger","font-medium","mb-4"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"main-numbering"],[2,"height","250px"],["pointerEventsMethod","scrollbar",3,"visibility"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName"],[1,"w-full","p-2"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"col-span-12","items-center","text-right","mt-3"],["azt-track-service","numbering-identification-EaHzWOF-ZYD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-422NanET_rP",1,"btn","btn-primary-soft",3,"disabled","click"],[4,"ngIf"],[1,"col-span-12","mt-3"],[3,"classroomErrorObjs","classroomIds","examId","checkPostParam"],[1,"mt-3","font-medium"],[1,"mt-3"],["azt-track-service","numbering-identification-yx-KGOCvWTN",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-_Mu1PflxZjE",1,"btn","btn-primary",3,"click"]],template:function(e,n){if(1&e&&(t.YNc(0,Zd,7,0,"div",0),t.YNc(1,Hd,5,3,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.mk,y.O5,P.KC,m._Y,m.JL,m.sg,m.CE,Wn.o,Vn.g,Sd,tt.bT],encapsulation:2}),o})(),Yd=(()=>{class o extends R.Q{btnCloseDialog(){this.dialogRef.close()}loadImage(){this.loading=!1}ngOnInit(){super.ngOnInit()}constructor(e,n,i,a){super(n),this.dialog=e,this.commonService=n,this.dialogRef=i,this.data=a,this.loading=!0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["notice-print-a4-paper-dialog"]],features:[t.qOj],decls:22,vars:12,consts:[[1,"box",2,"max-width","650px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex"],[1,"inline-block","w-6","h-6","mr-2","text-pending","flex-none"],["name","alert-octagon"],[1,"mb-0","h5"],[1,"p-3"],[1,"text-center","mt-3"],[1,"flex","items-center",2,"height","40vh",3,"hidden"],[1,"w-10","h-10","mx-auto"],[3,"type"],[3,"hidden"],["alt","",1,"h-auto","mx-auto",3,"src","load"],[1,"p-3","text-right"],["azt-track-service","notice-a4-dialog-ObwBAVC1Evd",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),t._UZ(5,"lucide-icon",5),t.qZA(),t.TgZ(6,"p",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"azt-mat-dialog-content")(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),t._UZ(14,"azt-loading-ui",11),t.qZA()(),t.TgZ(15,"div",12)(16,"img",13),t.NdJ("load",function(){return n.loadImage()}),t.ALo(17,"convertRawLinkOfGitHubWithLocale"),t.qZA()()()()()(),t.TgZ(18,"div",14)(19,"button",15),t.NdJ("click",function(){return n.btnCloseDialog()}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,6,"lang_auto_vui_long_cau_hinh_in_theo_mau_A4_nhu_huong_dan_duoi_day")),t.xp6(5),t.Q6J("hidden",!n.loading),t.xp6(2),t.Q6J("type","oval"),t.xp6(1),t.Q6J("hidden",n.loading),t.xp6(1),t.Q6J("src",t.lcZ(17,8,"blob/master/azota_assets/medias_[LANG]/a4_template_answer_sheet.jpg?raw=true"),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(21,10,"lang_auto_dong")," "))},dependencies:[Di.O,Ji.J,b.Nh5,tt.bT,tt.Rh],encapsulation:2}),o})(),Ao=(()=>{class o extends R.Q{showDialog(){this.dialog.open(Yd,{data:{},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}constructor(e,n){super(n),this.dialog=e,this.commonService=n}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["notice-print-a4-paper-box"]],features:[t.qOj],decls:3,vars:3,consts:[["azt-track-service","notice-a4-box-8TXulZreMgV",1,"btn-text-primary","ml-2","font-medium",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.showDialog()}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&e&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"lang_testbank_print_a4_notice"),")"))},dependencies:[tt.bT],encapsulation:2}),o})();function Gd(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function $d(o,s){1&o&&(t.TgZ(0,"span",32),t._UZ(1,"azt-loading-ui",33),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}function Kd(o,s){1&o&&(t.TgZ(0,"span",34),t._UZ(1,"lucide-icon",35),t.qZA())}function Wd(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.printPdfExam(!1,i.offlineExamObj.hashId,""))}),t.YNc(1,$d,2,1,"span",30),t.YNc(2,Kd,2,0,"ng-template",null,31,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&o){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function Vd(o,s){1&o&&(t.TgZ(0,"span",36),t._UZ(1,"azt-loading-ui",33),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}function Xd(o,s){1&o&&(t.TgZ(0,"span",34),t._UZ(1,"lucide-icon",35),t.qZA())}function tu(o,s){1&o&&(t.TgZ(0,"span",36),t._UZ(1,"azt-loading-ui",33),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}function eu(o,s){1&o&&(t.TgZ(0,"span",34),t._UZ(1,"lucide-icon",35),t.qZA())}function nu(o,s){1&o&&(t.TgZ(0,"span",32),t._UZ(1,"azt-loading-ui",33),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}function iu(o,s){1&o&&(t.TgZ(0,"span",34),t._UZ(1,"lucide-icon",35),t.qZA())}function ou(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.printPdfExam(!0,i.offlineExamObj.hashId,""))}),t.YNc(1,nu,2,1,"span",30),t.YNc(2,iu,2,0,"ng-template",null,31,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&o){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function au(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",38),t.NdJ("exportDataDone",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.exportDataDone(i))}),t.qZA()}if(2&o){const e=t.oxw(2);let n;t.Q6J("startQuestionIndex",null!==(n=e.examObj.startQuestionIndex)&&void 0!==n?n:1)("objs",e.exportExcelData)}}function su(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),t._UZ(5,"lucide-icon",7),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",8),t._UZ(9,"input",9),t.TgZ(10,"label",10),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",11),t._UZ(14,"input",12),t.YNc(15,Wd,6,5,"button",13),t.qZA()(),t.TgZ(16,"div",14)(17,"p",15)(18,"span",16),t._UZ(19,"lucide-icon",17),t.qZA(),t._uU(20),t.ALo(21,"mytranslate"),t._UZ(22,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(23,"div",11),t._UZ(24,"input",12),t.TgZ(25,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.printExamAnswersheet(i.offlineExamObj.hashId))}),t.YNc(26,Vd,2,1,"span",19),t.YNc(27,Xd,2,0,"ng-template",null,20,t.W1O),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()(),t.TgZ(31,"div",14)(32,"p",15)(33,"span",21),t._UZ(34,"lucide-icon",22),t.qZA(),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"div",11),t._UZ(38,"input",12),t.TgZ(39,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportExcelForAnswerSheet())}),t.YNc(40,tu,2,1,"span",19),t.YNc(41,eu,2,0,"ng-template",null,24,t.W1O),t._uU(43),t.ALo(44,"mytranslate"),t.qZA()()(),t.TgZ(45,"div",3)(46,"div",4)(47,"div",5)(48,"span",6),t._UZ(49,"lucide-icon",7),t.qZA(),t._uU(50),t.ALo(51,"mytranslate"),t.qZA()(),t.TgZ(52,"div",11),t._UZ(53,"input",12),t.YNc(54,ou,6,5,"button",25),t.qZA()(),t.TgZ(55,"div",14)(56,"div",26),t._UZ(57,"numbering-identification",27),t.ALo(58,"mustInClassroom"),t.qZA()()(),t.YNc(59,au,1,2,"azt-export-excel-for-answersheet",28)}if(2&o){const e=t.MAs(28),n=t.MAs(42),i=t.oxw();let a;t.xp6(6),t.hij(" ",t.lcZ(7,22,"lang_auto_file_de_thi")," "),t.xp6(3),t.Q6J("formControl",i.tableAnswerDownload),t.xp6(2),t.hij(" ",t.lcZ(12,24,"lang_auto_tai_de_voi_bang_tra_loi_trac_nghiem")," "),t.xp6(3),t.s9C("value",i.createNameExam("exam",!0)),t.xp6(1),t.Q6J("ngIf",0==i.showFormAddInformation),t.xp6(5),t.hij(" ",t.lcZ(21,26,"lang_auto_file_phieu_tra_loi")," "),t.xp6(4),t.s9C("value",i.createNameExam("answersheet",!0)),t.xp6(2),t.Q6J("ngIf",i.loadingObj.downloadAnswerSheet)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(30,28,"lang_auto_tai_ve")," "),t.xp6(6),t.hij(" ",t.lcZ(36,30,"lang_auto_file_answer_list")," "),t.xp6(3),t.s9C("value",i.createNameExam("answerexcel",!0)),t.xp6(2),t.Q6J("ngIf",i.isLoadingPrintAnswer)("ngIfElse",n),t.xp6(3),t.hij(" ",t.lcZ(44,32,"lang_auto_tai_ve")," "),t.xp6(7),t.hij(" ",t.lcZ(51,34,"lang_auto_file_de_thi_kem_dap_an")," "),t.xp6(3),t.s9C("value",i.createNameExam("answerdocx",!0)),t.xp6(1),t.Q6J("ngIf",0==i.showFormAddInformation),t.xp6(3),t.Q6J("hashId",i.examObj.hashId)("checkStudentCode",t.lcZ(58,36,null!==(a=i.examObj.whoAllow)&&void 0!==a?a:0))("startStudentCode",i.startStudentCode),t.xp6(2),t.Q6J("ngIf",null!=i.exportExcelData)}}let So=(()=>{class o extends R.Q{closeChangeInformation(e){this.showFormAddInformation=!1,e&&this.printPdfExam(!1,this.offlineExamObj.hashId,"")}createNameExam(e,n){var i,a,r,l,c,_,d,p,h,f,w="";w="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(i=this.examObj.name)&&void 0!==i?i:"",null!==(r=null===(a=this.offlineExamObj)||void 0===a?void 0:a.hashId)&&void 0!==r?r:""):"answerexcel"==e||"answerdocx"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,null!==(l=this.examObj.name)&&void 0!==l?l:"",null!==(_=null===(c=this.offlineExamObj)||void 0===c?void 0:c.hashId)&&void 0!==_?_:""):this.printAnswersheetService.exportFileNameOfExamOffline(0,null!==(d=this.examObj.name)&&void 0!==d?d:"",null!==(h=null===(p=this.offlineExamObj)||void 0===p?void 0:p.hashId)&&void 0!==h?h:"",void 0),n&&(w=null!==(f=this.commonService.replaceAll(w,"_","-"))&&void 0!==f?f:"");var k=".docx";return k="answersheet"==e&&7!=this.offlineExamObj.answersheetTemplate?".pdf":k,w+("answerexcel"==e?".xlsx":k)}printExamAnswersheet(e){var n;this.loadingObj.downloadAnswerSheet=!0,this.subscriptions.add(this.offlineMixquestionService.apiOfflineMixquestionGetObjsGet(null===(n=null==this?void 0:this.examObj)||void 0===n?void 0:n.hashId,e,"").subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D;if(1===i.success){let Q=this.getTotalQuestionInMixQuestionObjs(null!==(r=null===(a=i.data)||void 0===a?void 0:a.mixQuestionObjs)&&void 0!==r?r:[],null!==(c=null===(l=i.data)||void 0===l?void 0:l.questionObjs)&&void 0!==c?c:[]);if(Q){let q=null!==(p=null===(d=null===(_=i.data)||void 0===_?void 0:_.offlineExamObj)||void 0===d?void 0:d.answersheetTemplate)&&void 0!==p?p:0,W=null!==(w=null===(f=null===(h=i?.data)||void 0===h?void 0:h.offlineExamObj)||void 0===f?void 0:f.totalQuestionOfAnswersheet)&&void 0!==w?w:void 0;this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,q,Q,0,null===(k=i.data)||void 0===k?void 0:k.maxOfflineMixQuestionHashId,W);let X=this.createNameExam("answersheet",!1);this.answerSheetHelper.createAnswerSheet().subscribe(E=>{var J;1==E.success?this.answerSheetHelper.exportPdf(X):this.errorStatusObj(null!==(J=i.message)&&void 0!==J?J:"",!0),this.loadingObj.downloadAnswerSheet=!1})}else this.errorStatusObj(null!==(S=i.message)&&void 0!==S?S:"",!0),this.loadingObj.downloadAnswerSheet=!1}else this.errorStatusObj(null!==(D=i.message)&&void 0!==D?D:"",!0),this.loadingObj.downloadAnswerSheet=!1}))}getTotalQuestionInMixQuestionObjs(e,n){if(e.length>0){let i=0;return e.forEach(a=>{var r,l,c;let _=this.zipDataService.decodeContentGzip(null!==(r=a?.mixDatas)&&void 0!==r?r:""),d=this.castJsonToObj(_);i<(null!==(l=d?.length)&&void 0!==l?l:0)&&(i=null!==(c=d?.length)&&void 0!==c?c:0)}),i}return n.length>0?n.length:void 0}printPdfExam(e,n,i){var a;cn.G.openLoadingEffect(null!==(a=this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong"))&&void 0!==a?a:""),this.subscriptions.add(this.offlineMixquestionService.apiOfflineMixquestionListMixExamQuestionsGet(this.examObj.hashId,n).subscribe(r=>{var l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W;if(1===r.success)if(cn.G.changeMsgLoadingEffect(null!==(l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu"))&&void 0!==l?l:""),null!==(c=r.data)&&void 0!==c&&c.offlineExamMixQuestions){let X={nameSchool:"",nameSubject:""};this.examPrintInfoObj.status&&(X={nameSchool:null!==(_=this.examPrintInfoObj.schoolName)&&void 0!==_?_:"",nameSubject:null!==(d=this.examPrintInfoObj.subject)&&void 0!==d?d:""});let E=this.tableAnswerDownload.value?2:0;if(1==(null===(p=r.data)||void 0===p?void 0:p.offlineExamMixQuestions.length)){let J=null!==(w=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null!==(f=null===(h=r.data)||void 0===h?void 0:h.offlineExamMixQuestions[0].mixQuestions)&&void 0!==f?f:[])))&&void 0!==w?w:[];this.exportDocxService.downloadExam(e,null!==(k=r.data.exam)&&void 0!==k?k:{},null===(S=r.data)||void 0===S?void 0:S.offlineExam,null===(D=r.data)||void 0===D?void 0:D.offlineExamMixQuestions[0],J,X,E,z=>cn.G.closeLoadingEffect(z),z=>{cn.G.changeMsgLoadingEffect(z)}).then().catch(z=>{this.showErrorSnack(z.message)})}else this.exportDocxService.downloadExamObjs(e,null!==(Q=r.data.exam)&&void 0!==Q?Q:{},null===(N=r.data)||void 0===N?void 0:N.offlineExam,null===(q=r.data)||void 0===q?void 0:q.offlineExamMixQuestions,X,E,J=>cn.G.closeLoadingEffect(J),J=>{cn.G.changeMsgLoadingEffect(J)}).then().catch(J=>{this.showErrorSnack(J.message)})}else cn.G.closeLoadingEffect(10),this.showErrorSnack("lang_auto_khong_co_du_lieu_dao_de");else this.errorStatusObj(null!==(W=r.message)&&void 0!==W?W:"",!0),cn.G.closeLoadingEffect(10)}))}exportExcelForAnswerSheet(){var e;this.isLoadingPrintAnswer=!0;let n=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultForOfflineExamGet(n).subscribe(i=>{var a,r;if(1==i.success){let l=null===(a=i.data)||void 0===a?void 0:a.objs;l&&l.length>0?this.exportExcelData=this.commonService.myClone(l):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(null!==(r=i.message)&&void 0!==r?r:""),this.isLoadingPrintAnswer=!1}))}exportDataDone(e){let n=this.createNameExam("answerexcel",!1);Dn.saveAs(e,n),this.isLoadingPrintAnswer=!1}ngOnInit(){var e=[{source:this.cdnService.convertCdnLinkOfGitHub("almo/opencv.js"),name:"opencv_crop_white.js"}];this.commonService.loadScriptPromises(e).then(()=>{this.isLoadingLib=!1}),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p,h,f,w){super(e),this.commonService=e,this.activeRoute=n,this.fb=i,this.dialog=a,this.printAnswersheetService=r,this.offlineMixquestionService=l,this.answerSheetHelper=c,this.zipDataService=_,this.cdnService=d,this.exportDocxService=p,this.offlineExamExportService=h,this.exportExcelService=f,this.browserStorageService=w,this.startStudentCode=1,this.examPrintInfoObj={},this.loadingObj={},this.isLoadingLib=!0,this.isLoadingPrintAnswer=!1,this.showFormAddInformation=!1,this.tableAnswerDownload=new m.NI(!1)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(m.QS),t.Y36(U.on),t.Y36(Fi.Y),t.Y36(xt.cP),t.Y36(Oo),t.Y36(fn.D),t.Y36(Dt.U),t.Y36(dd.m),t.Y36(xt.qr),t.Y36(zi.O),t.Y36(Le.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["print-history-box"]],inputs:{examObj:"examObj",offlineExamObj:"offlineExamObj",startStudentCode:"startStudentCode",examPrintInfoObj:"examPrintInfoObj"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"action-history"],[1,"action-file","mt-4"],[1,"font-medium","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto","flex","items-center"],[1,"inline-block","w-4","h-4","text-pending","mr-2"],["name","file-check"],[1,"form-check","mt-1","md:mt-0"],["id","exportDocxType","type","checkbox",1,"form-check-input",3,"formControl"],["for","exportDocxType",1,"form-check-label"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-031D9RFdQh","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-danger"],["name","file-spreadsheet"],["azt-track-service","print_history-XPpw6jKuAiS",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneAnswerSheetLoading",""],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["doneLoadingPrintAnswer",""],["azt-track-service","print_history-yYG9YXhT8","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"intro-x"],[3,"hashId","checkStudentCode","startStudentCode"],[3,"startQuestionIndex","objs","exportDataDone",4,"ngIf"],["azt-track-service","print_history-031D9RFdQh",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 text-white mr-2",4,"ngIf","ngIfElse"],["doneExamLoading",""],[1,"w-4","h-4","text-white","mr-2"],[3,"type"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[1,"w-4","h-4","mr-2","text-white"],["azt-track-service","print_history-yYG9YXhT8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[3,"startQuestionIndex","objs","exportDataDone"]],template:function(e,n){if(1&e&&(t.YNc(0,Gd,1,0,"azt-loading-effect",0),t.YNc(1,su,60,38,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.isLoadingLib&&null!=n.examObj&&null!=n.offlineExamObj)("ngIfElse",i)}},dependencies:[y.O5,m.Wl,m.JJ,m.oH,zt.Q,ud.j,Ji.J,b.Nh5,yo,Ao,tt.bT,tt.Bm],encapsulation:2}),o})();function ru(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function lu(o,s){1&o&&(t.TgZ(0,"div",36)(1,"h3",37),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",38),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_tao_de_thanh_cong")," \u{1f44f} "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_auto_vui_long_chon_cac_hinh_thuc_ben_duoi")," "))}function cu(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"h3",39),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"print-history-box",40),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_auto_du_lieu_gan_nhat")," "),t.xp6(2),t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("examPrintInfoObj",e.examPrintInfoObj)("startStudentCode",e.startStudentCode)}}const Zo=function(o){return[o]};function _u(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t.YNc(1,lu,7,6,"div",4),t.TgZ(2,"div",5)(3,"h3",6),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",7)(7,"span",8),t._UZ(8,"lucide-icon",9),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.TgZ(11,"a",10),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",11)(15,"button",12),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectConfigTestOnline())}),t.TgZ(16,"span",13),t._UZ(17,"lucide-icon",14),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"p",15),t._uU(21),t.ALo(22,"mytranslate"),t.TgZ(23,"a",16),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()()()(),t.TgZ(26,"div",17)(27,"h3",6),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t.TgZ(30,"div",7)(31,"span",8),t._UZ(32,"lucide-icon",9),t.qZA(),t._uU(33),t.ALo(34,"mytranslate"),t.TgZ(35,"a",18),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"div",11)(39,"div",19)(40,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openDialogExamPrintTicket())}),t.TgZ(41,"span",13),t._UZ(42,"lucide-icon",21),t.qZA(),t.TgZ(43,"span",22),t._uU(44),t.ALo(45,"mytranslate"),t.ALo(46,"mytranslate"),t.qZA()(),t.TgZ(47,"p",15),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()()(),t.YNc(50,cu,5,7,"div",23),t.qZA(),t.TgZ(51,"div",24)(52,"h3",6),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.TgZ(55,"div",7)(56,"span",8),t._UZ(57,"lucide-icon",9),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.TgZ(60,"a",25),t._uU(61),t.ALo(62,"mytranslate"),t.qZA()(),t.TgZ(63,"div",11)(64,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectPowerpoint())}),t.TgZ(65,"span",13),t._UZ(66,"lucide-icon",27),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.qZA(),t.TgZ(69,"p",15),t._uU(70),t.ALo(71,"mytranslate"),t.qZA()()(),t.TgZ(72,"div",28)(73,"div",29)(74,"a",30),t.ALo(75,"mylocalize"),t.TgZ(76,"span",31),t._UZ(77,"lucide-icon",32),t.qZA(),t._uU(78),t.ALo(79,"mytranslate"),t.qZA()(),t.TgZ(80,"div",33)(81,"a",34),t.ALo(82,"mylocalize"),t.TgZ(83,"span",31),t._UZ(84,"lucide-icon",35),t.qZA(),t._uU(85),t.ALo(86,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw();let n,i;t.xp6(1),t.Q6J("ngIf",e.isNewDocument),t.xp6(3),t.hij(" ",t.lcZ(5,23,"lang_auto_online")," "),t.xp6(5),t.hij(" ",t.lcZ(10,25,"lang_auto_copy_link_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai_online_ho_tro_ca_trac_nghiem_va_tu_luan")," "),t.xp6(3),t.Oqu(t.lcZ(13,27,"lang_auto_tim_hieu_them")),t.xp6(6),t.hij(" ",t.lcZ(19,29,"lang_auto_cai_dat_lam_bai_online")," "),t.xp6(3),t.hij(" ",t.lcZ(22,31,"lang_auto_thiet_lap_thoi_gian_lam_bai_giam_sat_tu_dong_tao_de_con_cho_phep_xem_diem_doing_xuat_ban_de_tao_link_gui_cho_hoc_sinh_lam_bai_va_nop_bai")," "),t.xp6(3),t.Oqu(t.lcZ(25,33,"lang_auto_tim_hieu_them")),t.xp6(4),t.hij(" ",t.lcZ(29,35,"lang_auto_offline")," "),t.xp6(5),t.hij(" ",t.lcZ(34,37,"lang_auto_in_de_cho_hoc_sinh_lam_tren_giay_scan_hoac_chup_anh_bai_lam_cua_hoc_sinh_va_upload_len_azota_de_cham_tu_dong_hoc_sinh_cung_co_the_tu_chup_lai_bai_lam_cua_minh_va_nop_tren_azota")," "),t.xp6(3),t.Oqu(t.lcZ(37,39,"lang_auto_tim_hieu_them")),t.xp6(8),t.AsE("",t.lcZ(45,41,"lang_auto_in_de_upper")," ",t.lcZ(46,43,"lang_auto_-_co_phieu_tra_loi_trac_nghiem_rieng"),""),t.xp6(4),t.hij(" ",t.lcZ(49,45,"lang_auto_xuat_file_pdf_chua_cac_de_thi_da_duoc_dao_thu_tu_cau_hoi_va_dap_an_tu_de_goc_kem_theo_mot_file_pdf_chua_mau_phieu_tra_loi_trac_nghiem_theo_mau_tuy_chon")," "),t.xp6(2),t.Q6J("ngIf",e.offlineExamObj.hashId),t.xp6(3),t.hij(" ",t.lcZ(54,47,"lang_auto_chen_vao_powerpoint")," "),t.xp6(5),t.hij(" ",t.lcZ(59,49,"lang_auto_chen_noi_dung_cau_hoi_vao_slide_powerpoint_hoc_sinh_co_the_tuong_tac_dot")," "),t.xp6(3),t.Oqu(t.lcZ(62,51,"lang_auto_xem_huong_dan_tai_day")),t.xp6(6),t.hij(" ",t.lcZ(68,53,"lang_auto_chen_vao_powerpoint")," "),t.xp6(3),t.hij(" ",t.lcZ(71,55,"lang_auto_comment_powerpoint_guild")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(65,Zo,t.lcZ(75,57,"/admin/testbank/exam-results-list/"+(null!==(n=e.examObj.categoryId)&&void 0!==n?n:0)+"/"+e.examObj.id+"/0"))),t.xp6(4),t.hij(" ",t.lcZ(79,59,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(67,Zo,t.lcZ(82,61,"/admin/testbank/document-management/0/"+(e.backToLink.includes("shareType")?0:null!==(i=e.examObj.categoryId)&&void 0!==i?i:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(86,63,"lang_auto_ve_trang_quan_ly_file")," ")}}let du=(()=>{class o extends R.Q{redirectConfigTestOnline(){var e,n;let i=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${null!==(n=this.examObj.categoryId)&&void 0!==n?n:0}/${this.examObj.hashId}`,`?backto=${i}`)}openDialogExamPrintTicket(){var e,n;let i=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/print-exam-and-ticket/${null!==(n=this.examObj.categoryId)&&void 0!==n?n:0}/${this.examObj.hashId}`,`?backto=${i}`)}redirectPowerpoint(){var e,n;let i=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/powerpoint/${null!==(n=this.examObj.categoryId)&&void 0!==n?n:0}/${this.examObj.id}`,`?backto=${i}`)}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(n=>{var i,a,r,l,c;1==n.success?(this.dataConfigDocument=null!==(i=n.data)&&void 0!==i?i:{},n.data&&!(null===(a=n.data)||void 0===a)&&a.examObj&&(this.examObj=n.data.examObj,this.offlineExamObj=null!==(r=n.data.offlineExamObj)&&void 0!==r?r:{},this.examPrintInfoObj=null!==(l=n.data.examPrintInfoObj)&&void 0!==l?l:{}),this.successStatusObj()):this.errorStatusObj(null!==(c=n.message)&&void 0!==c?c:"",!0)}))}constructor(e,n,i,a){super(e),this.commonService=e,this.activeRoute=n,this.dialog=i,this.documentConfigService=a,this.backToLink="",this.paramBackToLink="",this.returnToLink="",this.examObj={},this.examHashId="",this.isNewDocument=!1,this.dataConfigDocument={},this.offlineExamObj={},this.startStudentCode=1,this.examPrintInfoObj={}}ngOnInit(){var e,n,i,a;let r=null!==(e=this.commonService.getMyQueryParam("isNewDocument"))&&void 0!==e?e:"";this.isNewDocument="1"==r.toString();var l=null!==(n=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==n?n:"";this.paramBackToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"",this.examHashId=null!==(a=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==a?a:"",this.backToLink=this.paramBackToLink?this.paramBackToLink:`/admin/testbank/document-management/0/${l??0}/1`,this.returnToLink=`/admin/testbank/action-online-offline/${l??0}/${this.examHashId}?backto=`+this.paramBackToLink,this.getExamInfoByHashId(this.examHashId),this.commonService.translateMetaData({title:"lang_cms_action_online_offline_title",description:"lang_cms_action_online_offline_description",image:""}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(U.on),t.Y36(xt.Cq))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-action-online-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],["class","action-heading mb-4",4,"ngIf"],[1,"action-online"],[1,"text-md","uppercase","font-medium"],[1,"text-md","mt-1"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["azt-track-service","action-online-offline-9sByNv80IwU","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"box","mt-3","p-5"],["azt-track-service","action-online-offline-Ow1f0tm7-at",1,"btn","btn-outline-primary",3,"click"],[1,"w-5","h-5","mr-2"],["name","cog"],[1,"text-xs","mt-2","text-slate-500"],["azt-track-service","action-online-offline-McQDzOjO9G-","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"action-offline","mt-8"],["azt-track-service","action-online-offline-yRjklKAot9b","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-offline/gioi-thieu-tinh-nang-thi-offline/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"azt-offline-print"],["azt-track-service","action-online-offline-IIO1TsHmgjr",1,"btn","btn-outline-primary",3,"click"],["name","printer"],[1,"mr-1"],["class","box mt-3 p-5",4,"ngIf"],[1,"action-online","mt-8"],["azt-track-service","action-online-offline-gcTAKBJcf3U","href","https://www.youtube.com/watch?v=FpcOtHNGMCQ&ab_channel=Azota","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],["azt-track-service","action-online-offline-sbrNKGia_Tt",1,"btn","btn-outline-primary",3,"click"],["name","sidebar"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","action-online-offline-ftSDs5DiFWa",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","action-online-offline-A6xAK9qc23J",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["name","folder"],[1,"action-heading","mb-4"],[1,"text-md","font-medium","mb-1"],[1,"text-md"],[1,"text-md","font-medium","flex","items-center"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,ru,1,0,"azt-loading-effect",1),t.YNc(2,_u,87,69,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[C.rH,y.O5,zt.Q,Vt._,b.Nh5,So,tt.mp,tt.bT],encapsulation:2}),o})();var ri=T(51176);function uu(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.hij(" ",e.numQuest>0?(0==n?"":", ")+e.name+"("+e.numQuest+")":""," ")}}function mu(o,s){if(1&o&&(t.TgZ(0,"li",13),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e)}}function pu(o,s){if(1&o&&(t.ynx(0),t.YNc(1,mu,2,1,"li",12),t.BQk()),2&o){const e=s.index;t.xp6(1),t.Q6J("ngIf",e<=2)}}function hu(o,s){1&o&&(t.TgZ(0,"div",14),t._uU(1," ... "),t.qZA())}function gu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.clickToMatrix(a.id))}),t.TgZ(2,"div",4)(3,"h2",5,6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",7)(8,"h2",8)(9,"b"),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"div",7)(14,"h2",8)(15,"b"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.YNc(18,uu,2,1,"ng-container",9),t.qZA()(),t.TgZ(19,"div",7)(20,"h2",8)(21,"b"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"ul",10),t.YNc(25,pu,2,1,"ng-container",9),t.qZA()()(),t.YNc(26,hu,2,0,"div",11),t.qZA()()}if(2&o){const e=s.$implicit,n=t.MAs(4);t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,11,e.name)," "),t.xp6(5),t.hij("",t.lcZ(11,13,"lang_matrix_list_total_question"),":"),t.xp6(2),t.hij(" ",e.numberQuest," "),t.xp6(4),t.hij("",t.lcZ(17,15,"lang_matrix_list_level_list"),":"),t.xp6(2),t.Q6J("ngForOf",e.ranks),t.xp6(4),t.hij("",t.lcZ(23,17,"lang_auto_don_vi_kien_thuc"),":"),t.xp6(3),t.Q6J("ngForOf",e.knowledge),t.xp6(1),t.Q6J("ngIf",e.knowledge.length>3)}}let fu=(()=>{class o extends R.Q{clickToMatrix(e){e&&this.chooseMatrix.emit(e)}ngOnInit(){super.ngOnInit()}constructor(e,n,i,a){super(e),this.commonService=e,this.activeRoute=n,this.examBank=i,this.editorCommonService=a,this.matrixList=[],this.chooseMatrix=new t.vpe}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(xt.SP),t.Y36($n))},o.\u0275cmp=t.Xpm({type:o,selectors:[["box-matrix-info"]],inputs:{matrixList:"matrixList"},outputs:{chooseMatrix:"chooseMatrix"},features:[t.qOj],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6 lg:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4"],["azt-track-service","box-matrix-info-61G2BIhvtR",1,"box","p-3","box-matrix-info",3,"click"],[1,"text-left","w-full",2,"align-self","center"],[1,"intro-x","font-bold","text-lg","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-left","w-full","mt-1",2,"align-self","center"],[1,"intro-x","text-md",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"px-1",2,"overflow","hidden","max-height","80px"],["class","text-left w-full pb-1","style","align-self: center;",4,"ngIf"],["style","list-style: circle; list-style-position: inside;",4,"ngIf"],[2,"list-style","circle","list-style-position","inside"],[1,"text-left","w-full","pb-1",2,"align-self","center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,gu,27,19,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.matrixList))},dependencies:[y.sg,y.O5,Qt.Kd,Ke.Q,tt.bT],encapsulation:2}),o})();function xu(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function vu(o,s){if(1&o&&(t.TgZ(0,"button",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function bu(o,s){if(1&o&&(t.TgZ(0,"button",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function wu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.addSubject(a))}),t.YNc(1,vu,3,3,"button",17),t.YNc(2,bu,3,3,"button",18),t.qZA()}if(2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.isChoose),t.xp6(1),t.Q6J("ngIf",!e.isChoose)}}function Tu(o,s){if(1&o&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function Cu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"p",23),t._uU(3),t.qZA()(),t.TgZ(4,"div",24)(5,"div",25)(6,"mat-form-field",26)(7,"mat-label"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"mat-select",27),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit;return t.KtG(r.subjectsIds=i)})("ngModelChange",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.backUpObjData())}),t.YNc(11,Tu,2,2,"mat-option",28),t.qZA()()()()()}if(2&o){const e=s.$implicit,n=t.oxw(3);let i;t.xp6(3),t.Oqu(null==e.class?null:e.class.desc),t.xp6(5),t.Oqu(t.lcZ(9,4,"lang_auto_chon_mon")),t.xp6(2),t.Q6J("ngModel",e.subjectsIds),t.xp6(1),t.Q6J("ngForOf",n.valueSubjectSurvey[null!==(i=null==e.class?null:e.class.value)&&void 0!==i?i:0])}}function ku(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",10)(8,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.nextStep())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()(),t.TgZ(11,"h3",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",13),t.YNc(15,wu,3,2,"div",14),t.qZA(),t.TgZ(16,"h3",12),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"div",7),t.YNc(20,Cu,12,6,"div",15),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"lang_matrix_list_teacher_choose_subject_and_grade")," "),t.xp6(3),t.Q6J("disabled",!e.checkValidChooseGradeAndSubject(e.dataObjs)),t.xp6(1),t.hij(" ",t.lcZ(10,9,"lang_auto_tiep_tuc")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"lang_auto_khoi_hoc")," "),t.xp6(3),t.Q6J("ngForOf",e.valueSurvey),t.xp6(2),t.hij(" ",t.lcZ(18,13,"lang_auto_mon_hoc")," "),t.xp6(3),t.Q6J("ngForOf",e.dataObjs)}}function Ou(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",31)(2,"h3",32),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.goToHome())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.BQk()}2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_matrix_list_not_have_suggestion")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_cms_publish_test_go_home")," "))}function yu(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"box-matrix-info",44),t.NdJ("chooseMatrix",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.gotoEditMatrix(i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_suggestion")," "),t.xp6(2),t.Q6J("matrixList",e.matrixSuggestList)}}function Au(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"box-matrix-info",44),t.NdJ("chooseMatrix",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.gotoEditMatrix(i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_owner_matrix")," "),t.xp6(2),t.Q6J("matrixList",e.matrixOwnerList)}}function Su(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",34)(3,"h3",35),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",10)(7,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.createNewMatrix())}),t.O4$(),t.TgZ(8,"svg",37),t._UZ(9,"line",38)(10,"line",39),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()(),t.YNc(13,yu,5,4,"ng-container",40),t.YNc(14,Au,5,4,"ng-container",40),t.kcU(),t.TgZ(15,"div",41)(16,"div",42)(17,"azt-paging",43),t.NdJ("SendPage",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.goToPage(i))}),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,6,"lang_matrix_list_choose_below_to_create_exam")," "),t.xp6(7),t.hij(" ",t.lcZ(12,8,"lang_matrix_list_create_new_matrix")," "),t.xp6(2),t.Q6J("ngIf",e.matrixSuggestList.length>0),t.xp6(1),t.Q6J("ngIf",e.matrixOwnerList.length>0),t.xp6(3),t.Q6J("lengthPage",e.totalPage)("paging",e.curPage)}}function Zu(o,s){if(1&o&&(t.TgZ(0,"div",5),t.YNc(1,Ou,8,6,"ng-container",1),t.YNc(2,Su,18,10,"ng-template",null,30,t.W1O),t.qZA()),2&o){const e=t.MAs(3),n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.matrixSuggestList.length&&!n.matrixOwnerList.length)("ngIfElse",e)}}function Eu(o,s){if(1&o&&(t.TgZ(0,"div",3),t.YNc(1,ku,21,15,"div",4),t.YNc(2,Zu,4,2,"div",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.step),t.xp6(1),t.Q6J("ngIf",2==e.step)}}let Iu=(()=>{class o extends R.Q{backUpObjData(){this.oldDataObjs=this.dataObjs}addSubject(e){var n,i,a,r;e.isChoose=!e.isChoose,this.commonService.filterArray(this.classGrade,e)?this.classGrade=this.classGrade.filter(_=>_.value!=e.value):this.classGrade.push(e),this.dataObjs=[];let l=this.oldDataObjs.length,c=this.classGrade.length;for(let _=0;_<c;_++)if(this.dataObjs[_]={class:this.classGrade[_],subjectsIds:[]},l>0)for(let p=0;p<l;p++)(null===(i=null===(n=this.dataObjs)||void 0===n?void 0:n[_].class)||void 0===i?void 0:i.value)==(null===(r=null===(a=this.oldDataObjs)||void 0===a?void 0:a[p].class)||void 0===r?void 0:r.value)&&(this.dataObjs[_]=this.oldDataObjs[p])}checkValidChooseGradeAndSubject(e){let n=!0;return e.length?e.forEach(i=>{(!i.subjectsIds||!i.subjectsIds.length)&&(n=!1)}):n=!1,n}nextStep(){var e,n,i,a,r,l,c;let _=[];for(let d=0;d<this.dataObjs.length;d++)if(this.dataObjs[d].subjectsIds)for(let p=0;p<(null!==(i=null===(n=null===(e=this.dataObjs)||void 0===e?void 0:e[d].subjectsIds)||void 0===n?void 0:n.length)&&void 0!==i?i:0);p++){let h={classId:null===(r=null===(a=this.dataObjs)||void 0===a?void 0:a[d].class)||void 0===r?void 0:r.value,subjectId:null===(c=null===(l=this.dataObjs)||void 0===l?void 0:l[d].subjectsIds)||void 0===c?void 0:c[p]};_.push(h)}_.length>0?(this.initStatusObj(),this.surveyConfigService.apiSurveyConfigSaveSurvey3Post({objs:_}).subscribe(d=>{d&&1==d.success?(this.step=2,this.getData()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})):this.errorStatusObj("lang_matrix_list_choose_grade_and_subject_fail",!0)}goToPage(e){this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.curCate+"/"+e,"?backto="+encodeURIComponent(this.backToLink))}goToHome(){this.commonService.myNavigation("/admin/dashboard")}createNewMatrix(){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/0","?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}gotoEditMatrix(e){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/"+e,"?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}getSuggestionMatrix(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","global",1,3).subscribe(e=>{var n,i,a;e&&1==e.success?(this.matrixSuggestList=this.editorCommonService.getBeautyMatrixObjs(null!==(i=null===(n=e.data)||void 0===n?void 0:n.banks)&&void 0!==i?i:[]),this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"",!0)}))}getGradeAndSubjectObj(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var n,i,a,r,l;if(1==e.success){let c=null!==(i=null===(n=e.data)||void 0===n?void 0:n.schoolLevelObjs)&&void 0!==i?i:[],_=null!==(r=null===(a=e.data)||void 0===a?void 0:a.schoolSubjectObjs)&&void 0!==r?r:[];c.forEach(f=>{let w={value:f.id,desc:this.commonService.myTranslateInstant(f.name)};this.commonService.filterArray(this.valueSurvey,w)||this.valueSurvey.push(w)});let d=[],p=[],h=[];_.forEach(f=>{let w={type:0,id:f.id,name:this.commonService.myTranslateInstant(f.name)};f.from&&f.to&&f.from>=1&&f.to<=5?(w.type=1,this.commonService.filterArray(d,w)||d.push(w)):f.from&&f.to&&f.from>=6&&f.to<=9?(w.type=2,this.commonService.filterArray(p,w)||p.push(w)):(w.type=3,this.commonService.filterArray(h,w)||h.push(w));for(var k=1;k<=5;k++)this.valueSubjectSurvey[k]=d;for(k=6;k<=9;k++)this.valueSubjectSurvey[k]=p;for(k=10;k<=13;k++)this.valueSubjectSurvey[k]=h}),this.successStatusObj()}else this.errorStatusObj(null!==(l=e.message)&&void 0!==l?l:"")}))}getData(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","own",this.curPage,this.sizePage).subscribe(e=>{var n,i,a,r,l;if(e&&1==e.success){this.matrixOwnerList=this.editorCommonService.getBeautyMatrixObjs(null!==(i=null===(n=e.data)||void 0===n?void 0:n.banks)&&void 0!==i?i:[]);let c=null!==(r=null===(a=e.data)||void 0===a?void 0:a.total)&&void 0!==r?r:1;this.totalOwnerMatrix=c,this.totalPage=c%this.sizePage>0?(c-c%this.sizePage)/this.sizePage+1:c>0?c/this.sizePage:1,this.curPage>this.totalPage&&(this.curPage=this.totalPage),this.getSuggestionMatrix()}else this.errorStatusObj(null!==(l=e.message)&&void 0!==l?l:"",!0)}))}checkSurveySubmitted(){this.initStatusObj(),this.surveyConfigService.apiSurveyConfigGetSurvey3Get().subscribe(e=>{var n;e&&1==e.success?null!==(n=e.data)&&void 0!==n&&n.obj?(this.step=2,this.getData()):this.getGradeAndSubjectObj():this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/document-management/0/0/1",this.curPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.curCate=Number(this.commonService.getMyParam(this.activeRoute,"cate")),this.checkSurveySubmitted()}),this.commonService.translateMetaData({title:"lang_matrix_list_title",description:"lang_matrix_list_description",image:""}),super.ngOnInit()}constructor(e,n,i,a,r,l){super(e),this.commonService=e,this.activeRoute=n,this.examBank=i,this.editorCommonService=a,this.documentConfigService=r,this.surveyConfigService=l,this.matrixOwnerList=[],this.matrixSuggestList=[],this.backToLink="",this.curPage=1,this.curCate=0,this.totalPage=1,this.totalOwnerMatrix=0,this.sizePage=12,this.step=1,this.valueSurvey=[],this.valueSubjectSurvey=[],this.dataObjs=[],this.oldDataObjs=[],this.classGrade=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(xt.SP),t.Y36($n),t.Y36(xt.Cq),t.Y36(xt.XG))},o.\u0275cmp=t.Xpm({type:o,selectors:[["test-config-online"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","py-5"],["class","block-cols-12-full m-0",4,"ngIf"],[1,"block-cols-12-full","m-0"],[1,"action-heading","mb-4"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6","text-left",2,"align-self","center"],[1,"text-lg","font-medium",2,"vertical-align","middle"],[1,"col-span-12","md:col-span-6","text-right"],["azt-track-service","azota-matrix-list-jSDqGYuTf",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"disabled","click"],[1,"text-lg","font-bold","mt-3","mb-3"],[1,"grid","grid-cols-10","gap-3",2,"max-width","620px"],["azt-track-service","azota-matrix-list-idyray5dXY","class","col-span-10 md:col-span-2 text-left",3,"click",4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],["azt-track-service","azota-matrix-list-idyray5dXY",1,"col-span-10","md:col-span-2","text-left",3,"click"],["class","btn btn-secondary shadow-md mr-2 w-full selected-border-box",4,"ngIf"],["class","btn btn-secondary shadow-md mr-2 w-full",4,"ngIf"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full","selected-border-box"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full"],[1,"col-span-12","md:col-span-4"],[1,"text-left"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","mt-2"],[1,"col-span-12"],["appearance","outline"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["alreadyData",""],[1,"text-center","mx-auto","w-full","py-5"],[1,"text-md","mx-auto"],["azt-track-service","azota-matrix-list-RSssWEqyTk",1,"btn","btn-primary","text-white","shadow-md","mt-3",3,"click"],[1,"col-span-12","md:col-span-6","text-left"],[1,"text-lg","font-bold",2,"vertical-align","middle"],["azt-track-service","azota-matrix-list-h4LcenZp7K",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[4,"ngIf"],[1,"col-span-12","flex","flex-wrap","sm:flex-row","sm:flex-nowrap","items-center","mt-5"],[1,"w-full","sm:w-auto","sm:mr-auto"],[3,"lengthPage","paging","SendPage"],[3,"matrixList","chooseMatrix"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,xu,1,0,"azt-loading-effect",1),t.YNc(2,Eu,3,2,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.sg,y.O5,bn.CK,xe.v_,xe.$V,jn.x8,m.JJ,m.On,zt.Q,ri.L,Vt._,fu,tt.bT],encapsulation:2}),o})();var li=T(30502);function Mu(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Pu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.answersheetImageLoaded())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("src",e.curAnswersheetImage,t.LSH)}}let Eo=(()=>{class o extends R.Q{getAnswersheetImageUrl(e){switch(e.toString()){case"1":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a4_bo_giao_duc_120.jpg");case"0":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a4_${this.amountAnswersheet&&this.amountAnswersheet<=120?parseInt(this.amountAnswersheet.toString(),10):120}.svg`);case"5":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a6_full_a4_20.jpg");case"6":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a6_full_a4_50.jpg");case"2":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a8_full_a4_20.jpg");case"4":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v3/answersheet_mau_a4_hon_hop_35.jpg");case"7":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v3/answersheet_write_${this.amountAnswersheet&&this.amountAnswersheet<=120?parseInt(this.amountAnswersheet.toString(),10):120}.png`)}return""}previewAnswersheetImage(){var e={name:"",mimes:"image/jpeg",url:this.getAnswersheetImageUrl(this.answersheetTemplate)};let i=Object.assign(Object.assign({},e),{index:0});this.dialog.open(li.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i,viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})}answersheetImageLoaded(){this.previewAnswersheetImageLoading=!1}initImageUrls(){this.previewAnswersheetImageLoading=!0,this.curAnswersheetImage=this.getAnswersheetImageUrl(this.answersheetTemplate)}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.dialog=n,this.cdnService=i,this.answersheetTemplate=0,this.amountAnswersheet=120,this.curAnswersheetImage="",this.previewAnswersheetImageLoading=!0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.on),t.Y36(Dt.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["preview-answersheet-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate",amountAnswersheet:"amountAnswersheet"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"flex","mx-auto",2,"width","75%","max-height","100%"],["azt-track-service","preivew-answersheet-dialog--hf6Yx84YB",1,"w-full","flex-none","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400",2,"height","100%",3,"click"],[4,"ngIf","ngIfElse"],["doneLoading",""],[2,"height","auto",3,"src","load"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.previewAnswersheetImage()}),t.YNc(2,Mu,1,0,"azt-loading-effect",2),t.YNc(3,Pu,1,1,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const i=t.MAs(4);t.xp6(2),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q],encapsulation:2}),o})();function Lu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.previewSampleImage())}),t._UZ(1,"img",2),t.qZA()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("src",e.curSampleImage,t.LSH)}}let ju=(()=>{class o extends R.Q{getSampleImageUrl(e){return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/sample_result_v2/no_student_code_result.jpg")}previewSampleImage(){var e={name:"",mimes:"image/jpeg",url:this.getSampleImageUrl(this.answersheetTemplate)};let i=Object.assign(Object.assign({},e),{index:0});this.dialog.open(li.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i,viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})}initImageUrls(){this.curSampleImage=this.getSampleImageUrl(this.answersheetTemplate)}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.dialog=n,this.cdnService=i,this.answersheetTemplate=0,this.curSampleImage=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.on),t.Y36(Dt.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["preview-sample-result-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["azt-track-service","preivew-sample-result-dialog-D-X1nHSiPU","class","inline-block rounded-md overflow-hidden clickable p-2 border border-slate-200 dark:border-darkmode-400 mt-2",3,"click",4,"ngIf"],["azt-track-service","preivew-sample-result-dialog-D-X1nHSiPU",1,"inline-block","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400","mt-2",3,"click"],[1,"h-16",3,"src"]],template:function(e,n){1&e&&t.YNc(0,Lu,2,1,"div",0),2&e&&t.Q6J("ngIf",n.curSampleImage)},dependencies:[y.O5],encapsulation:2}),o})();function Nu(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function qu(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Qu(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_nho_hon_120")," "))}function Du(o,s){if(1&o&&(t.TgZ(0,"div",30),t.YNc(1,Nu,3,3,"span",0),t.YNc(2,qu,3,3,"span",0),t.YNc(3,Qu,3,3,"span",0),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.max)}}function Uu(o,s){if(1&o&&(t.TgZ(0,"div",26)(1,"label",27),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",28),t.YNc(5,Du,4,3,"div",29),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_nhap_so_cau")," "),t.xp6(3),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors&&(e.form.controls.amountAnswersheet.dirty||e.form.controls.amountAnswersheet.touched))}}function Fu(o,s){1&o&&(t.TgZ(0,"div",26)(1,"label",27),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"select",31)(5,"option",32),t._uU(6,"120"),t.qZA(),t.TgZ(7,"option",33),t._uU(8,"115"),t.qZA(),t.TgZ(9,"option",34),t._uU(10,"90"),t.qZA(),t.TgZ(11,"option",35),t._uU(12,"75"),t.qZA(),t.TgZ(13,"option",36),t._uU(14,"60"),t.qZA(),t.TgZ(15,"option",37),t._uU(16,"45"),t.qZA(),t.TgZ(17,"option",38),t._uU(18,"30"),t.qZA(),t.TgZ(19,"option",39),t._uU(20,"15"),t.qZA()()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_chon_so_cau")," "))}function Ru(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"input",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",9)(16,"input",10),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.changeValueAnswer())}),t.qZA(),t.TgZ(17,"label",11),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.YNc(20,Uu,6,4,"div",12),t.TgZ(21,"div",9),t._UZ(22,"input",13),t.TgZ(23,"label",14),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",9),t._UZ(27,"input",15),t.TgZ(28,"label",16),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",9)(32,"input",17),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.changeValueAnswer())}),t.qZA(),t.TgZ(33,"label",18),t._uU(34),t.ALo(35,"mytranslate"),t.qZA()(),t.YNc(36,Fu,21,3,"div",12),t.qZA()(),t.TgZ(37,"div",19)(38,"div",4),t._uU(39),t.ALo(40,"mytranslate"),t.qZA(),t.TgZ(41,"div",20),t._uU(42),t.ALo(43,"mytranslate"),t.qZA(),t.TgZ(44,"div",5)(45,"div",6),t._UZ(46,"input",21),t.TgZ(47,"label",22),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()(),t.TgZ(50,"div",9),t._UZ(51,"input",23),t.TgZ(52,"label",24),t._uU(53),t.ALo(54,"mytranslate"),t.qZA()(),t._UZ(55,"preview-sample-result-dialog",25),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.hij(" ",t.lcZ(4,15,"lang_auto_chon_mau_phieu_tra_loi")," "),t.xp6(4),t.hij(" ",t.lcZ(8,17,"lang_auto_mau_lon_co_sbd_ma_de")," "),t.xp6(6),t.hij(" ",t.lcZ(14,19,"lang_auto_answersheet_mau_a4_bo_giao_duc_120")," "),t.xp6(5),t.hij(" ",t.lcZ(19,21,"lang_auto_answersheet_mau_a4")," "),t.xp6(2),t.Q6J("ngIf",0==e.form.controls.answersheetTemplate.value),t.xp6(4),t.hij(" ",t.lcZ(25,23,"lang_auto_answersheet_mau_a6_full_a4_20")," "),t.xp6(5),t.hij(" ",t.lcZ(30,25,"lang_auto_answersheet_mau_a4_hon_hop_35")," "),t.xp6(5),t.hij(" ",t.lcZ(35,27,"lang_auto_mau_viet_trac_nghiem_va_tu_luan")," "),t.xp6(2),t.Q6J("ngIf",7==e.form.controls.answersheetTemplate.value),t.xp6(3),t.hij(" ",t.lcZ(40,29,"lang_auto_mau_tiet_kiem_khong_co_sbd_khong_co_ma_de")," "),t.xp6(3),t.hij(" ",t.lcZ(43,31,"lang_auto_he_thong_se_cat_phan_ten_hoc_sinh_trong_phieu_de_dinh_danh")," "),t.xp6(6),t.hij(" ",t.lcZ(49,33,"lang_auto_answersheet_mau_a6_full_a4_50")," "),t.xp6(5),t.hij(" ",t.lcZ(54,35,"lang_auto_answersheet_mau_a8_full_a4_20")," "),t.xp6(2),t.Q6J("answersheetTemplate",e.form.controls.answersheetTemplate.value)}}let Io=(()=>{class o extends R.Q{ngOnInit(){var e;super.ngOnInit(),this.logAmountAnswersheet=null===(e=this.form)||void 0===e?void 0:e.controls.amountAnswersheet.value}constructor(e){super(e),this.commonService=e,this.formControlName="",this.logAmountAnswersheet=0}changeValueAnswer(){var e,n;7!=(null===(e=this.form)||void 0===e?void 0:e.controls.answersheetTemplate.value)||[120,115,90,75,60,45,30,15].includes(this.form.controls.amountAnswersheet.value)||this.form.controls.amountAnswersheet.setValue(120),0==(null===(n=this.form)||void 0===n?void 0:n.controls.answersheetTemplate.value)&&this.form.controls.amountAnswersheet.setValue(this.logAmountAnswersheet)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank-choose-answersheet"]],inputs:{form:"form",formControlName:"formControlName"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form-label","font-medium"],[1,"mt-2"],[1,"text-md"],[1,"border","p-2","border-slate-200","dark:border-darkmode-400","rounded","mt-2"],[1,"form-check"],["id","sample-1","type","radio","value","1","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-1",1,"form-check-label"],[1,"form-check","mt-2"],["id","sample-0","type","radio","value","0","formControlName","answersheetTemplate",1,"form-check-input",3,"change"],["for","sample-0",1,"form-check-label"],["class","mt-2 mb-4",4,"ngIf"],["id","sample-5","type","radio","value","5","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-5",1,"form-check-label"],["id","sample-4","type","radio","value","4","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-4",1,"form-check-label"],["id","sample-write","type","radio","value","7","formControlName","answersheetTemplate",1,"form-check-input",3,"change"],["for","sample-write",1,"form-check-label"],[1,"mt-4"],[1,"text-xs","text-slate-500"],["id","sample-6","type","radio","value","6","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-6",1,"form-check-label"],["id","sample-2","type","radio","value","2","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-2",1,"form-check-label"],[3,"answersheetTemplate"],[1,"mt-2","mb-4"],["for","input-sample-0",1,"form-label","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountAnswersheet",1,"form-control"],["class","mt-2 text-danger text-xs font-medium",4,"ngIf"],[1,"mt-2","text-danger","text-xs","font-medium"],["formControlName","amountAnswersheet",1,"form-select"],["value","120"],["value","115"],["value","90"],["value","75"],["value","60"],["value","45"],["value","30"],["value","15"]],template:function(e,n){1&e&&t.YNc(0,Ru,56,37,"div",0),2&e&&t.Q6J("ngIf",n.form)},dependencies:[y.O5,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m._,m.JJ,m.JL,m.sg,m.u,We.Y,Jt.M,ju,tt.bT],encapsulation:2}),o})();function zu(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Ju(o,s){1&o&&(t.TgZ(0,"div",24)(1,"div",25)(2,"div",26)(3,"label",27),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",28),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",29)(10,"div",30),t._UZ(11,"input",31),t.qZA()()()()),2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,2,"lang_config_create_exam_multiple_component")," "),t.xp6(3),t.hij(" ",t.lcZ(8,4,"lang_config_create_exam_multiple_component_description")," "))}function Bu(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",33)(3,"polyline",34)(4,"line",35),t.qZA()())}function Hu(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",36)(2,"g",37)(3,"g",38),t._UZ(4,"circle",39),t.TgZ(5,"path",40),t._UZ(6,"animateTransform",41),t.qZA()()()()())}function Yu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3),t.ALo(4,"mytranslate"),t._UZ(5,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(6,"div",6)(7,"form",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12),t._UZ(13,"app-testbank-choose-answersheet",13),t.qZA(),t.YNc(14,Ju,12,6,"div",14),t.qZA(),t.TgZ(15,"div",11),t._UZ(16,"preview-answersheet-dialog",15),t.qZA()()()(),t.TgZ(17,"div",16)(18,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.printExamAnswersheet(null==i.dataConfigDocument.offlineExamObj?null:i.dataConfigDocument.offlineExamObj.hashId))}),t.YNc(19,Bu,5,0,"span",18),t.YNc(20,Hu,7,0,"span",18),t.TgZ(21,"span"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()()()(),t.TgZ(24,"div",19)(25,"h3",20),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"div",21)(29,"div",22),t._UZ(30,"numbering-identification",23),t.ALo(31,"mustInClassroom"),t.qZA()()()()}if(2&o){const e=t.oxw();let n;t.xp6(3),t.hij(" ",t.lcZ(4,14,"lang_auto_in_phieu_tra_loi")," "),t.xp6(4),t.Q6J("formGroup",e.form),t.xp6(6),t.Q6J("form",e.form),t.xp6(1),t.Q6J("ngIf",120==e.examObj.countQuestion),t.xp6(2),t.Q6J("answersheetTemplate",e.form.controls.answersheetTemplate.value)("amountAnswersheet",e.form.controls.amountAnswersheet.value),t.xp6(3),t.Q6J("ngIf",!e.isLoadingPrintTicket),t.xp6(1),t.Q6J("ngIf",e.isLoadingPrintTicket),t.xp6(2),t.Oqu(t.lcZ(23,16,"lang_auto_tai_phieu_tra_loi")),t.xp6(4),t.hij(" ",t.lcZ(27,18,"lang_auto_danh_so_bao_danh")," "),t.xp6(4),t.Q6J("hashId",null==e.dataConfigDocument.examObj?null:e.dataConfigDocument.examObj.hashId)("checkStudentCode",t.lcZ(31,20,null!==(n=null==e.dataConfigDocument.examObj?null:e.dataConfigDocument.examObj.whoAllow)&&void 0!==n?n:0))("styleView",1)("startStudentCode",e.startStudentCode)}}let Gu=(()=>{class o extends R.Q{saveConfig(){return new Promise(e=>{let i={subjectMarks:this.commonService.getFormObj(this.form).subjectMarks?1:0};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(i,this.examHashId).subscribe(a=>{e(1==a.success)}))})}printExamAnswersheet(e){var n;this.isLoadingPrintTicket=!0,this.subscriptions.add(this.offlineMixquestionService.apiOfflineMixquestionGetObjsGet(null===(n=this.dataConfigDocument.examObj)||void 0===n?void 0:n.hashId,e,"").subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D,Q;if(1===i.success){let N=this.getTotalQuestionInMixQuestionObjs(null!==(r=null===(a=i.data)||void 0===a?void 0:a.mixQuestionObjs)&&void 0!==r?r:[],null!==(c=null===(l=i.data)||void 0===l?void 0:l.questionObjs)&&void 0!==c?c:[]);if(N){let W=null!==(_=this.form.controls.answersheetTemplate.value)&&void 0!==_?_:0,X=null!==(d=this.form.controls.amountAnswersheet.value)&&void 0!==d?d:void 0;this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,W,N,0,null===(p=i.data)||void 0===p?void 0:p.maxOfflineMixQuestionHashId,X);let E=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(f=null===(h=this.dataConfigDocument.examObj)||void 0===h?void 0:h.name)&&void 0!==f?f:"",null!==(S=null===(k=null===(w=i.data)||void 0===w?void 0:w.offlineExamObj)||void 0===k?void 0:k.hashId)&&void 0!==S?S:"");this.answerSheetHelper.createAnswerSheet().subscribe(J=>{1==J.success?this.saveConfig().then(z=>{z?this.answerSheetHelper.exportPdf(E):this.errorStatusObj("lang_auto_tao_phieu_loi_vui_long_thu_lai_split_lang"+i.message,!0)}):this.errorStatusObj("lang_auto_tao_phieu_loi_vui_long_thu_lai_split_lang"+i.message,!0),this.isLoadingPrintTicket=!1})}else this.errorStatusObj(null!==(D=i.message)&&void 0!==D?D:"",!0),this.isLoadingPrintTicket=!1}else this.errorStatusObj(null!==(Q=i.message)&&void 0!==Q?Q:"",!0),this.isLoadingPrintTicket=!1}))}getTotalQuestionInMixQuestionObjs(e,n){if(e.length>0){let i=0;return e.forEach(a=>{var r,l,c;let _=this.zipDataService.decodeContentGzip(null!==(r=a?.mixDatas)&&void 0!==r?r:""),d=this.castJsonToObj(_);i<(null!==(l=d?.length)&&void 0!==l?l:0)&&(i=null!==(c=d?.length)&&void 0!==c?c:0)}),i}return n.length>0?n.length:void 0}getExamInfoByHashId(e){var n;this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var a,r,l,c,_,d,p;1==i.success?(this.dataConfigDocument=null!==(a=i.data)&&void 0!==a?a:{},this.examObj=null!==(r=this.dataConfigDocument.examObj)&&void 0!==r?r:{},this.form.controls.amountAnswersheet.setValue(null!==(c=null===(l=this.dataConfigDocument.examObj)||void 0===l?void 0:l.countQuestion)&&void 0!==c?c:1),this.form.controls.subjectMarks.setValue(!(null===(_=this.dataConfigDocument.examObj)||void 0===_||!_.subjectMarks)),120!=(null===(d=this.dataConfigDocument.examObj)||void 0===d?void 0:d.countQuestion)&&this.form.controls.subjectMarks.disable(),this.successStatusObj()):this.errorStatusObj(null!==(p=i.message)&&void 0!==p?p:"",!0)})),this.examHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:""}ngOnInit(){var e,n,i;this.form=this.formBuilder.group({answersheetTemplate:new m.p4("0",[m.kI.required]),amountAnswersheet:new m.p4(1,[m.kI.required,m.kI.min(1),m.kI.max(120)]),subjectMarks:new m.p4({value:!1,disabled:!1})}),this.examHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";let a=null!==(n=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==n?n:0,r=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"";this.backLink=r||"/admin/testbank/document-management/0/"+(a??0)+"/1",this.examHashId&&this.getExamInfoByHashId(this.examHashId)}constructor(e,n,i,a,r,l,c,_,d,p){super(e),this.commonService=e,this.offlineMixquestionService=n,this.zipDataService=i,this.formBuilder=a,this.answerSheetHelper=r,this.printAnswersheetService=l,this.documentConfigService=c,this.activeRoute=_,this.dialog=d,this.browserStorageService=p,this.form=new m.nJ({}),this.examObj={},this.backLink="",this.isLoadingPrintTicket=!1,this.dataConfigDocument={},this.examHashId="",this.startStudentCode=1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.cP),t.Y36(fn.D),t.Y36(m.QS),t.Y36(Oo),t.Y36(Fi.Y),t.Y36(xt.Cq),t.Y36(C.gz),t.Y36(U.on),t.Y36(Le.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-exam-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","normal-case","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],["formArrayName","answersheetTemplate",3,"form"],["class","mt-3",4,"ngIf"],[3,"answersheetTemplate","amountAnswersheet"],[1,"p-3","text-right"],["azt-track-service","config-exam-offline--sdRHbNg8Am",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"setting-block","mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],[1,"mt-2","intro-y"],[3,"hashId","checkStudentCode","styleView","startStudentCode"],[1,"mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],[1,"form-check","form-switch","ml-auto"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,zu,1,0,"azt-loading-effect",1),t.YNc(2,Yu,32,22,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,m._Y,m.Wl,m.JJ,m.JL,m.sg,m.u,m.CE,zt.Q,Jt.M,Vt._,yo,Eo,Io,Ao,tt.bT,tt.Bm],encapsulation:2}),o})();class $u{static customDateTimeValidator(s){const e=s.get("startTime"),n=s.get("endTime");return null!==e&&null!==n&&""!=e.value&&""!=n.value&&null!==e.value&&null!==n.value&&e.value>=n.value?(n?.setErrors({customDateTimeValidator:!0}),{identityRevealed:!0}):(n?.setErrors(null),null)}}var Ku=T(47982),Bi=T(29521);const Wu=["tagInput"];function Vu(o,s){1&o&&(t.TgZ(0,"mat-icon",12),t._uU(1,"cancel"),t.qZA())}function Xu(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",10),t.NdJ("removed",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.removeTagName(a))}),t._uU(1),t.YNc(2,Vu,2,0,"mat-icon",11),t.qZA()}if(2&o){const e=s.$implicit;t.Q6J("selectable",!0)("removable",!0),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",!0)}}function tm(o,s){if(1&o&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let em=(()=>{class o extends R.Q{addTagName(e){const n=e.input,i=e.value;(i||"").trim()&&this.tagNames.push(i.trim()),n&&(n.value=""),this.tagNameCtrl.setValue(null)}removeTagName(e){const n=this.tagNames.indexOf(e);n>=0&&this.tagNames.splice(n,1)}selectedTagName(e){this.tagNames.push(e.option.viewValue),this.tagInput&&(this.tagInput.nativeElement.value=""),this.tagNameCtrl.setValue(null)}_filterTagName(e){const n=e.toLowerCase();return this.allTagNames.filter(i=>0===i.toLowerCase().indexOf(n))}ngOnInit(){super.ngOnInit(),this.filteredTags=this.tagNameCtrl.valueChanges.pipe((0,qi.O)(null),(0,qn.U)(e=>e?this._filterTagName(e):this.allTagNames.slice()))}constructor(e){super(e),this.commonService=e,this.form=new m.nJ({}),this.allTagNames=[],this.tagNames=[],this.tagNamesChange=new t.vpe,this.separatorKeysCodes=[Bi.K5,Bi.OC]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["test-config-online-tag"]],viewQuery:function(e,n){if(1&e&&t.Gf(Wu,5),2&e){let i;t.iGM(i=t.CRH())&&(n.tagInput=i.first)}},inputs:{form:"form",tagNameCtrl:"tagNameCtrl",allTagNames:"allTagNames",tagNames:"tagNames"},outputs:{tagNamesChange:"tagNamesChange"},features:[t.qOj],decls:11,vars:9,consts:[[3,"formGroup"],["appearance","outline",1,"my-chip-list"],["aria-label"," 'lang_cms_utils_choose_tag_name' | mytranslate "],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-chip-list",2,3),t.YNc(4,Xu,3,4,"mat-chip",4),t.TgZ(5,"input",5,6),t.NdJ("matChipInputTokenEnd",function(a){return n.addTagName(a)}),t.qZA()(),t.TgZ(7,"mat-autocomplete",7,8),t.NdJ("optionSelected",function(a){return n.selectedTagName(a)}),t.YNc(9,tm,2,2,"mat-option",9),t.ALo(10,"async"),t.qZA()()()),2&e){const i=t.MAs(3),a=t.MAs(8);t.Q6J("formGroup",n.form),t.xp6(4),t.Q6J("ngForOf",n.tagNames),t.xp6(1),t.Q6J("formControl",n.tagNameCtrl)("matAutocomplete",a)("matChipInputFor",i)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(10,7,n.filteredTags))}},dependencies:[y.sg,y.O5,oi.VN,oi.QJ,bn.CK,Ce.ir,Ce.lw,Ce.IP,Ce.Y6,Wt.Hw,xe.v_,m._Y,m.Fj,m.JJ,m.JL,m.oH,m.sg,y.Ov],encapsulation:2}),o})();function nm(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().index;t.xp6(1),t.hij("",e+1,".")}}function im(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"input",56),t.qZA())}function om(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"input",57),t.qZA())}function am(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",48)(1,"div",49),t.YNc(2,nm,2,1,"span",37),t.YNc(3,im,2,0,"span",37),t.YNc(4,om,2,0,"span",37),t.TgZ(5,"span",50)(6,"input",51),t.NdJ("change",function(i){const r=t.CHM(e).index,l=t.oxw(2).index,c=t.oxw();return t.KtG(c.changeInfoContent(i,l,r))}),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"a",52),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw(2).index,l=t.oxw();return t.KtG(l.removeContent(r,a))}),t.O4$(),t.TgZ(9,"svg",53),t._UZ(10,"line",54)(11,"line",55),t.qZA()()()()}if(2&o){const e=s.$implicit,n=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",3==n.type),t.xp6(1),t.Q6J("ngIf",2==n.type),t.xp6(1),t.Q6J("ngIf",1==n.type),t.xp6(2),t.s9C("placeholder",""==e?t.lcZ(7,5,"lang_testbank_test_config_request_enter_name"):""),t.s9C("value",""!=e&&null!=e?e:"")}}function sm(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",39),t._UZ(2,"rect",58)(3,"line",59)(4,"line",60),t.qZA()())}function rm(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",39),t._UZ(2,"circle",61)(3,"line",59)(4,"line",60),t.qZA()())}function lm(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.contents?e.contents.length+1:1,". ")}}function cm(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",33),t.YNc(1,am,12,7,"div",34),t.TgZ(2,"div",35)(3,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.addMoreContent(i))}),t.YNc(4,sm,5,0,"span",37),t.YNc(5,rm,5,0,"span",37),t.YNc(6,lm,2,1,"span",37),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.addFastContent(i))}),t.O4$(),t.TgZ(10,"svg",39),t._UZ(11,"line",8)(12,"line",9),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(15,"div",40)(16,"div",41)(17,"div",42)(18,"textarea",43),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw().index,r=t.oxw();return t.KtG(r.changeDataFastContent(i,a))}),t.qZA()(),t.TgZ(19,"div",44),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"div",45)(23,"button",46),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeDialogFastContent())}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw();return t.KtG(a.changeInfoFastContent(a.infoContentFast[i],i))}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()}if(2&o){const e=t.oxw(),n=e.$implicit,i=e.index,a=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.contents),t.xp6(3),t.Q6J("ngIf",1==n.type),t.xp6(1),t.Q6J("ngIf",2==n.type),t.xp6(1),t.Q6J("ngIf",3==n.type),t.xp6(1),t.hij(" ",t.lcZ(8,10,"lang_testbank_test_config_more_options")," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,"lang_testbank_test_config_quick_add")," "),t.xp6(2),t.Q6J("ngClass",a.checkDialogFastContent[i]?"":"hidden"),t.xp6(5),t.hij(" * ",t.lcZ(21,14,"lang_testbank_test_config_note")," "),t.xp6(4),t.hij(" ",t.lcZ(25,16,"lang_buttom_cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(28,18,"lang_buttom_confirm")," ")}}const _m=function(o){return{"mb-5":o}},dm=function(o){return{"border-danger":o}};function um(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"input",16),t.NdJ("change",function(i){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeInfoTitle(i,r))}),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()(),t.TgZ(10,"div",17)(11,"mat-form-field",18)(12,"mat-select",19),t.NdJ("selectionChange",function(i){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeTypeField(i,r))}),t.TgZ(13,"mat-option",20),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"mat-option",21),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"mat-option",22),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"mat-option",23),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()(),t.TgZ(25,"div",24)(26,"button",25),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeFields(a))}),t.ALo(27,"mytranslate"),t.O4$(),t.TgZ(28,"svg",26),t._UZ(29,"path",27)(30,"path",28)(31,"path",29)(32,"line",30)(33,"line",31),t.qZA()()()(),t.YNc(34,cm,29,20,"div",32),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(32,_m,n!==i.infoFields.length-1)),t.xp6(4),t.AsE(" ",t.lcZ(6,16,"lang_testbank_test_config_information")," ",n+1," "),t.xp6(2),t.s9C("placeholder",e.error?t.lcZ(8,18,"lang_testbank_test_config_request_enter_name"):t.lcZ(9,20,"lang_testbank_test_config_enter_Information_you_want_student_enter")),t.Q6J("ngClass",t.VKq(34,dm,e.error))("readonly",0===n)("value",e.title),t.xp6(5),t.s9C("value",e.type),t.Q6J("disabled",0===n),t.xp6(2),t.hij(" ",t.lcZ(15,22,"lang_testbank_test_config_reply_short"),""),t.xp6(3),t.hij("",t.lcZ(18,24,"lang_testbank_test_config_Checkbox")," "),t.xp6(3),t.Oqu(t.lcZ(21,26,"lang_testbank_test_config_quiz")),t.xp6(3),t.hij(" ",t.lcZ(24,28,"lang_testbank_test_config_drop_down_menu"),""),t.xp6(3),t.s9C("matTooltip",t.lcZ(27,30,"lang_testbank_test_config_delete_information")),t.Q6J("disabled",0===n),t.xp6(8),t.Q6J("ngIf",0!=e.type)}}let mm=(()=>{class o extends R.Q{removeFields(e){this.infoFields.splice(e,1)}addNewFields(e){let n="";this.commonService.myTranslate(["lang_auto_thong_tin"]).subscribe(a=>{n=a.lang_auto_thong_tin}),this.infoFields.push({type:0,title:n+" "+((this.infoFields?this.infoFields.length:0)+1),contents:[]})}changeTypeField(e,n){this.infoFields[n].type!=e.value&&(this.infoFields[n].type=Number(e.value),this.infoFields[n].error=!1)}changeInfoTitle(e,n){e.target.value&&""==e.target.value?(this.formInfoInvalid=!0,this.infoFields[n].error=!0,this.infoFields[n].title=e.target.value):(this.formInfoInvalid=!1,this.infoFields[n].error=!1,this.infoFields[n].title=e.target.value)}changeInfoContent(e,n,i){e.target.value&&""!=e.target.value?(this.infoFields[n].contents[i]=e.target.value,this.formInfoInvalid=!1):(this.infoFields[n].contents[i]=e.target.value,this.formInfoInvalid=!0)}removeContent(e,n){var i;null===(i=this.infoFields[e].contents)||void 0===i||i.splice(n,1)}addMoreContent(e,n){let i="";this.commonService.myTranslate(["lang_auto_tuy_chon"]).subscribe(r=>{i=r.lang_auto_tuy_chon});let a=this.infoFields[e].contents?this.infoFields[e].contents.length:0;this.infoFields[e].contents&&Array.isArray(this.infoFields[e].contents)||(this.infoFields[e].contents=new Array),this.infoFields[e].contents.push(i+" "+(a+1))}addFastContent(e){this.indexContent=e,this.checkDialogFastContent[this.indexContent]=!0}changeDataFastContent(e,n){e.target.value&&(this.infoContentFast[n]=e.target.value,e.target.value="")}closeDialogFastContent(){this.checkDialogFastContent[this.indexContent]=!1}changeInfoFastContent(e,n){if(""!=e){let i=e.split("\n");i=i.map(a=>a.trim()),i=i.filter(a=>""!=a),this.infoFields[n].contents||(this.infoFields[n].contents=new Array),this.infoFields[n].contents=this.infoFields[n].contents.concat(i)}this.checkDialogFastContent[n]=!1}ngOnInit(){super.ngOnInit()}constructor(e){super(e),this.commonService=e,this.infoFields=[],this.formInfoInvalid=!1,this.infoFieldsChange=new t.vpe,this.formInfoInvalidChange=new t.vpe,this.infoContentFast=[],this.indexContent=0,this.checkDialogFastContent=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["test-config-online-student-info"]],inputs:{infoFields:"infoFields",formInfoInvalid:"formInfoInvalid"},outputs:{infoFieldsChange:"infoFieldsChange",formInfoInvalidChange:"formInfoInvalidChange"},features:[t.qOj],decls:17,vars:10,consts:[[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"p-5"],["class","info-field",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","config-student-info-FlktZt6AJN",1,"btn","btn-primary","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"inline-block","ml-3","leading-relaxed","text-slate-500","text-xs"],[1,"info-field"],[1,"grid","grid-cols-12","gap-5",3,"ngClass"],[1,"col-span-12","md:col-span-7"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text",1,"form-control",3,"ngClass","readonly","placeholder","value","change"],[1,"col-span-8","md:col-span-3"],["appearance","outline"],[3,"value","disabled","selectionChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"col-span-4","md:col-span-2","text-right"],["azt-track-service","config-student-info-DEsxAq2B3",1,"btn","btn-secondary",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["class","info-content",4,"ngIf"],[1,"info-content"],["class","py-2",4,"ngFor","ngForOf"],[1,"py-2","flex","mb-3"],["azt-track-service","config-student-info-NVQjKt97Fu",1,"btn","btn-secondary","btn-sm","mr-2",3,"click"],[4,"ngIf"],["azt-track-service","config-student-info-OcHEB-Morx",1,"btn","btn-secondary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],[1,"azt-fast-content",3,"ngClass"],[1,"azt-fast","p-4"],[1,"dialog-content"],["rows","4",1,"form-control",3,"change"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"text-right","my-4"],["azt-track-service","config-student-info-8-eIbBQm3W",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["azt-track-service","config-student-info-2A5hJbaAWL",1,"btn","btn-primary","btn-sm",3,"click"],[1,"py-2"],[1,"flex","items-center"],[1,"w-full","mx-2"],["type","text",1,"form-control",2,"border","none","box-shadow","none",3,"placeholder","value","change"],["azt-track-service","config-student-info-QGYSvwSMLT",1,"btn","btn-primary","rounded-full",2,"padding","2px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["type","radio","disabled","",1,"form-check-input","cursor-default"],["type","checkbox","disabled","",1,"form-check-input","cursor-default"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["cx","12","cy","12","r","10"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,um,35,36,"div",4),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.addNewFields("")}),t.O4$(),t.TgZ(9,"svg",7),t._UZ(10,"line",8)(11,"line",9),t.qZA(),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(14,"span",10),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_test_config_configuration")," "),t.xp6(3),t.Q6J("ngForOf",n.infoFields),t.xp6(6),t.hij(" ",t.lcZ(13,6,"lang_testbank_test_config_add_information")," "),t.xp6(3),t.hij(" *",t.lcZ(16,8,"lang_testbank_test_config_click_add_infomation"),". "))},dependencies:[y.mk,y.sg,y.O5,bn.CK,xe.v_,jn.x8,Qt.Kd,tt.bT],encapsulation:2}),o})();const pm=function(o){return{paddingCustomQuestion:o}};function hm(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"p",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,pm,1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&e.examGroupInfos.length>1)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_nhap_so_luong_cau")," ")}}const gm=function(o){return{"is-invalid":o}};function fm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"input",17),t.NdJ("input",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.validWhenChangeLimitMixquestionValue())}),t.qZA()(),t.TgZ(5,"div",18)(6,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changesMixQuestionGroupType())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()()()}if(2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("ngClass",t.VKq(5,gm,e.formControlLimitMixQuestion.invalid||e.checkValidateCountQuestion)),t.xp6(2),t.Q6J("disabled",e.examGroupInfos.length<=1),t.xp6(1),t.hij(" ",t.lcZ(8,3,"lang_testbank_test_config_get_with_group")," ")}}const Mo=function(o){return{"border-danger":o}};function xm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",38),t.NdJ("input",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.validateWhenChangeGroupValue(i.controls.groupId))})("focus",function(){t.CHM(e),t.oxw();const i=t.MAs(10);return t.KtG(i.show())})("keydown",function(i){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.triggerCtrlEnter(i,a.controls.groupId))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Mo,!e.valid||!n.totalTakeQuestion))}}function vm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"input",39),t.NdJ("input",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.validateWhenChangeGroupValue(i.controls.groupId))}),t.qZA()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Mo,!e.valid||!n.totalTakeQuestion))}}function bm(o,s){1&o&&t._UZ(0,"input",40),2&o&&t.uIk("disabled",!0)}function wm(o,s){if(1&o&&(t.TgZ(0,"div",31),t.ynx(1,1),t.TgZ(2,"p",32),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA(),t.YNc(6,xm,1,3,"input",33),t.YNc(7,vm,1,3,"input",34),t.YNc(8,bm,1,1,"input",35),t.BQk(),t._UZ(9,"div",36,37),t.ALo(11,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.Q6J("formGroup",e),t.xp6(2),t.HOy(" ",t.lcZ(4,9,"lang_testbank_test_config_group")," ",n+1," (",e.controls.maxQuestion.value," ",t.lcZ(5,11,"lang_testbank_test_config_question"),") "),t.xp6(3),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1==e.controls.isFixed.value),t.xp6(1),t.s9C("matTooltip","Ctrl + Enter "+t.lcZ(11,13,"lang_auto_de_tu_dong_dien_so_luong_cau_cho_cac_nhom_con_lai"))}}function Tm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"div",21)(2,"div",22),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",23)(9,"a",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.changesMixQuestionGroupType())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"a",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.resetFormQuestionGroup())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()(),t.TgZ(15,"div",26)(16,"ng-scrollbar",27)(17,"div",28),t.ynx(18,29),t.YNc(19,wm,12,15,"div",30),t.BQk(),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,8,"lang_auto_so_luong_cau_hoi_can_lay")," "),t.xp6(3),t.lnq("(",e.totalTakeQuestion,"/",e.obj.countQuestion," ",t.lcZ(7,10,"lang_auto_cau_brackets"),""),t.xp6(4),t.hij(" ",t.lcZ(11,12,"lang_testbank_test_config_cancel_get_with_group")," "),t.xp6(3),t.hij(" ",t.lcZ(14,14,"lang_testbank_test_config_split_auto")," "),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(3),t.Q6J("ngForOf",e.formArrayGroupInfos.controls)}}function Cm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function km(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Om(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t._UZ(4,"br"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_vui_long_nhap_nho_hon_tong_so_cau")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_auto_cau_brackets")," ")}}function ym(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_nho_hon_hoac_bang_120")," "))}function Am(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,Cm,4,3,"span",42),t.YNc(2,km,4,3,"span",42),t.YNc(3,Om,5,7,"span",42),t.YNc(4,ym,4,3,"span",42),t.qZA()),2&o){const e=t.oxw(2);let n;t.xp6(1),t.Q6J("ngIf",""==e.form.controls.limitMixQuestion.value),t.xp6(1),t.Q6J("ngIf",""!=e.form.controls.limitMixQuestion.value&&e.form.controls.limitMixQuestion.value<=0),t.xp6(1),t.Q6J("ngIf",e.form.controls.limitMixQuestion.value>(null!==(n=e.obj.countQuestion)&&void 0!==n?n:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&e.form.controls.limitMixQuestion.value<e.totalTakeQuestion&&e.form.controls.limitMixQuestion.value>120)}}function Sm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_nhap_qua_so_cau_toi_da_trong_nhom")," "))}function Zm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_lon_hon_0")," "))}function Em(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cac_cau_cua_cac_nhom_lon_hon_tong_so_cau")," "))}function Im(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_nho_nhon_hoac_bang_120")," "))}function Mm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function Pm(o,s){if(1&o&&(t.TgZ(0,"div",41),t.YNc(1,Sm,4,3,"span",42),t.YNc(2,Zm,4,3,"span",42),t.YNc(3,Em,4,3,"span",42),t.YNc(4,Im,3,3,"span",42),t.YNc(5,Mm,4,3,"span",42),t.qZA()),2&o){const e=t.oxw(2);let n,i,a;t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion&&!(e.totalTakeQuestion>(null!==(n=e.obj.countQuestion)&&void 0!==n?n:0))),t.xp6(1),t.Q6J("ngIf",!e.totalTakeQuestion),t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion>(null!==(i=e.obj.countQuestion)&&void 0!==i?i:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&e.totalTakeQuestion<(null!==(a=e.obj.countQuestion)&&void 0!==a?a:0)&&(null!==(a=e.obj.countQuestion)&&void 0!==a?a:0)>120),t.xp6(1),t.Q6J("ngIf",e.checkEmpty)}}function Lm(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.gL8(" ",t.lcZ(2,6,"lang_testbank_test_config_enter_bigger_number_question_permanent")," (",e.minLimitMixQuestion," ",t.lcZ(3,8,"lang_testbank_test_config_question"),"), ",t.lcZ(4,10,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(5,12,"lang_testbank_test_config_question"),") ")}}function jm(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_testbank_test_config_enter_repuest_bigger_0"),", ",t.lcZ(3,6,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(4,8,"lang_testbank_test_config_question"),") ")}}function Nm(o,s){if(1&o&&(t.TgZ(0,"span",45),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_testbank_test_config_validate_number_question_enter")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_testbank_test_config_question"),"). ")}}function qm(o,s){if(1&o&&(t.TgZ(0,"div",43),t.YNc(1,Lm,6,14,"span",42),t.YNc(2,jm,5,10,"span",42),t.YNc(3,Nm,4,7,"span",44),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&e.minLimitMixQuestion>1&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&1==e.minLimitMixQuestion&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&e.isGroupMixQuestion)}}function Qm(o,s){1&o&&(t.TgZ(0,"div",46)(1,"p",47),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.TgZ(5,"a",48),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(2),t.AsE(" ",t.lcZ(3,3,"lang_auto_de_con_duoc_tao_tu_mot_luong_cau_hoi_duoc_lay_ngau_nhien_trong_de_goc_vi_du_de_goc_co_1000_cau_hoi")," ",t.lcZ(4,5,"lang_auto_ban_co_the_chi_in_40_cau_ngau_nhien_trong_1000_cau_hoi_do")," "),t.xp6(4),t.hij(" ",t.lcZ(7,7,"lang_auto_tim_hieu_them")," "))}const Dm=function(o,s){return{"md:col-span-9 setting-form-input-default-style":o,"col-md-12 setting-form-input-with-no-left-column":s}};function Um(o,s){if(1&o&&(t.ynx(0,1),t.TgZ(1,"div",2),t.YNc(2,hm,4,6,"div",3),t.TgZ(3,"div",4)(4,"div",5),t.YNc(5,fm,9,7,"div",6),t.YNc(6,Tm,20,16,"div",7),t.YNc(7,Am,5,4,"div",8),t.YNc(8,Pm,6,5,"div",8),t.YNc(9,qm,4,3,"div",9),t.YNc(10,Qm,8,9,"div",10),t.qZA()()(),t.BQk()),2&o){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngClass",t.WLB(9,Dm,!e.fromPrintOffline,e.fromPrintOffline)),t.xp6(2),t.Q6J("ngIf",!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",e.isGroupMixQuestion&&e.examGroupInfos.length>1),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline)}}let Po=(()=>{class o extends R.Q{emitDataToparent(){this.isGroupMixQuestionChange.emit(this.isGroupMixQuestion),this.checkValidateCountQuestionChange.emit(this.checkValidateCountQuestion),this.totalTakeQuestionChange.emit(this.totalTakeQuestion)}changeIsGroupMixQuestion(e){this.isGroupMixQuestion=e,this.emitDataToparent()}changeCheckValidateCountQuestion(e){this.checkValidateCountQuestion=e,this.emitDataToparent()}changeTotalTakeQuestion(e){this.totalTakeQuestion=e}changesMixQuestionGroupType(){this.changeIsGroupMixQuestion(!this.isGroupMixQuestion),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue()}setFormQuestion(e,n){let i=this.commonService.getFormObj(this.formArrayGroupInfos),a=this._getGroupMixquestionValue(e),r=this._countNullMixquestionValue();if(null!=a){if(this.commonService.isMobileOrTable())for(let l=0;l<i.length;l++)0==i[l].isFixed&&i[l].groupId!=e&&r>0&&(i[l].totalQuestion=Number(a>i[l].maxQuestion?i[l].maxQuestion:a));else for(let l=0;l<i.length;l++)0==i[l].isFixed&&i[l].groupId!=e&&n&&(i[l].totalQuestion=Number(a>i[l].maxQuestion?i[l].maxQuestion:a));this.formArrayGroupInfos.setValue(i),this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup())}this.isGroupMixQuestion&&this._validGroupMixquestionValue()}validateWhenChangeGroupValue(e){setTimeout(()=>{this.setFormQuestion(e.value,!1)},1500),this.isGroupMixQuestion&&this._validGroupMixquestionValue()}_validGroupMixquestionValue(){var e,n;let i=this._countNullMixquestionValue();if(this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.checkEmpty=!1,i)return this.changeCheckValidateCountQuestion(!0),this.checkEmpty=!0,!1;if(this.isGroupMixQuestion){let a=this.commonService.getFormObj(this.formArrayGroupInfos);for(let r=0;r<a.length;r++)if(a[r].totalQuestion>a[r].maxQuestion)return this.changeCheckValidateCountQuestion(!0),!1}return this.totalTakeQuestion>(null!==(e=this.obj.countQuestion)&&void 0!==e?e:0)||this.fromPrintOffline&&this.totalTakeQuestion>120||this.totalTakeQuestion<1||this.totalTakeQuestion<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):!(this.totalTakeQuestion>=this.minLimitMixQuestion&&this.totalTakeQuestion<=(null!==(n=this.obj.countQuestion)&&void 0!==n?n:0)&&(this.changeCheckValidateCountQuestion(!1),1))}validWhenChangeLimitMixquestionValue(){var e,n,i=this.form.controls.limitMixQuestion.value;return null!=i?(this.hasChangeValueLimitQuestion.emit(i),Number.isInteger(Number(i))?i>(null!==(e=this.obj.countQuestion)&&void 0!==e?e:0)||this.fromPrintOffline&&i>120||i<1||i<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):(i>=this.minLimitMixQuestion&&i<=(null!==(n=this.obj.countQuestion)&&void 0!==n?n:0)&&this.changeCheckValidateCountQuestion(!1),!0):(this.changeCheckValidateCountQuestion(!0),!1)):(this.changeCheckValidateCountQuestion(!0),!1)}resetFormQuestionGroup(){let e=this.commonService.getFormObj(this.formArrayGroupInfos);for(let n=0;n<e.length;n++)0===e[n].isFixed&&(e[n].totalQuestion=null);this.changeCheckValidateCountQuestion(!0),this.formArrayGroupInfos.setValue(e)}triggerCtrlEnter(e,n){e.ctrlKey&&"Enter"===e.code&&(this.setFormQuestion(n.value,!0),e.preventDefault())}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.isTooltipPoint=!1}_createMixGroupFormArray(e){this.formArrayGroupInfos.clear(),e.forEach(n=>{var i,a,r;let l=new m.cw({groupId:new m.p4(n.groupId),isFixed:new m.p4(n.isFixed),totalQuestion:new m.p4(n.limitQuestion,[m.kI.min(0),m.kI.max(null!==(i=n.totalQuestion)&&void 0!==i?i:0)]),maxQuestion:new m.p4(n.totalQuestion),error:new m.p4(!1)});null===(a=this.formArrayGroupInfos)||void 0===a||a.push(l),this.totalTakeQuestion+=null!==(r=Number(n.limitQuestion))&&void 0!==r?r:0})}_convertExamGroupInfos(e,n,i){let a=[];return e.forEach(r=>{var l,c;i?a.push(Object.assign(Object.assign({},r),{limitQuestion:r.totalQuestion})):n&&n.hasOwnProperty(null!==(l=r.groupId)&&void 0!==l?l:-1)&&a.push(Object.assign(Object.assign({},r),{limitQuestion:n[null!==(c=r.groupId)&&void 0!==c?c:-1]}))}),a}_getGroupMixquestionValue(e){let n=this.commonService.getFormObj(this.formArrayGroupInfos),i=null;for(let a=0;a<n.length;a++)n[a].groupId==e&&(i=n[a].totalQuestion);return i}_countNullMixquestionValue(){let e=this.commonService.getFormObj(this.formArrayGroupInfos),n=0;for(let i=0;i<e.length;i++)null==e[i].totalQuestion&&n++;return n}_countTotalQuestionInMixGroup(){let e=this.commonService.getFormObj(this.formArrayGroupInfos);var n=0;for(let i=0;i<e.length;i++)e[i].totalQuestion&&e[i].totalQuestion>0&&(n+=Number(e[i].totalQuestion));return n}_checkNullData(){var e,n;return this.form&&(this.formArrayGroupInfos=null===(e=this.form)||void 0===e?void 0:e.get(this.formArrayGroupInfosName),this.formControlLimitMixQuestion=null===(n=this.form)||void 0===n?void 0:n.get(this.formControlLimitMixQuestionName)),!!(this.form&&this.formArrayGroupInfos&&this.formControlLimitMixQuestion&&null!=this.obj&&null!=this.minLimitMixQuestion&&null!=this.examGroupInfos&&null!=this.isGroupMixQuestion&&null!=this.checkValidateCountQuestion)}_initGroupData(){var e,n;this.examGroupInfos.length>0&&(1==(null===(e=this.obj.limitQuestionGroupsParse)||void 0===e?void 0:e.status)?(this.changeIsGroupMixQuestion(!0),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.limitQuestionGroupsParse.objs,!1))):null!=this.obj.limitQuestionGroups&&0==(null===(n=this.obj.limitQuestionGroupsParse)||void 0===n?void 0:n.status)?(this.changeIsGroupMixQuestion(!1),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.limitQuestionGroupsParse.objs,!1))):this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,{},!0)),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue())}ngOnInit(){super.ngOnInit(),this.isNotNullData=this._checkNullData(),this.isNotNullData&&this._initGroupData()}constructor(e){super(e),this.commonService=e,this.fromPrintOffline=!1,this.formArrayGroupInfosName="",this.formControlLimitMixQuestionName="",this.isGroupMixQuestion=!1,this.isGroupMixQuestionChange=new t.vpe,this.checkValidateCountQuestion=!1,this.checkValidateCountQuestionChange=new t.vpe,this.totalTakeQuestion=0,this.totalTakeQuestionChange=new t.vpe,this.hasChangeValueLimitQuestion=new t.vpe,this.isNotNullData=!1,this.isTooltipPoint=!1,this.checkEmpty=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["test-config-online-mix-question"]],inputs:{fromPrintOffline:"fromPrintOffline",form:"form",formArrayGroupInfosName:"formArrayGroupInfosName",formControlLimitMixQuestionName:"formControlLimitMixQuestionName",obj:"obj",minLimitMixQuestion:"minLimitMixQuestion",examGroupInfos:"examGroupInfos"},outputs:{isGroupMixQuestionChange:"isGroupMixQuestionChange",checkValidateCountQuestionChange:"checkValidateCountQuestionChange",totalTakeQuestionChange:"totalTakeQuestionChange",hasChangeValueLimitQuestion:"hasChangeValueLimitQuestion"},features:[t.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","exam-get-mix-question",1,"grid","grid-cols-12","grap-5"],["class","col-span-12 md:col-span-3",3,"ngClass",4,"ngIf"],[1,"col-span-12","mt-2",3,"ngClass"],[1,"setting-block-create-sub","w-100"],["class","setting-block-mix-v1",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","col-span-12 mt-2 text-xs text-danger fade",4,"ngIf"],["class","col-span-12 leading-relaxed text-slate-500 text-xs px-0 mt-1",4,"ngIf"],["class","col-span-12 px-0 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-3",3,"ngClass"],[1,"font-medium","mt-5"],[1,"setting-block-mix-v1"],[1,"not-group"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","md:col-span-8","lg:col-span-9"],["type","text","appOnlyNumber","","formControlName","limitMixQuestion",1,"form-control",3,"ngClass","input"],[1,"col-span-6","md:col-span-4","lg:col-span-3"],["azt-track-service","config-mix-question-__RjMpaOvxg",1,"btn","btn-secondary","px-1","w-full",3,"disabled","click"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto"],[1,"flex"],["azt-track-service","config-mix-question-Bo6mIaGCJ9M",1,"btn","btn-sm","btn-outline-danger","mt-2","md:mt-0",3,"click"],["azt-track-service","config-mix-question-_MtktTKvfF4",1,"btn","btn-sm","btn-outline-secondary","ml-2","mt-2","md:mt-0","block","md:hidden",3,"click"],[2,"height","160px"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"grid","grid-cols-12","gap-5","mb-5","p-3"],["formArrayName","groupInfos"],["class","col-span-6 md:col-md-4 lg:col-span-3 mt-1",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-md-4","lg:col-span-3","mt-1"],[1,"mb-0","pb-0","text-left",2,"font-size","13.5px"],["class","azt-hidden md:block form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",3,"ngClass","input","focus","keydown",4,"ngIf"],["class","block md:hidden form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",3,"ngClass","input",4,"ngIf"],["type","text","class","form-control","formControlName","totalQuestion",4,"ngIf"],["matTooltipPosition","below","matTooltipClass","my-tooltip",1,"azt-hidden","md:block",3,"matTooltip"],["tooltip","matTooltip"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"azt-hidden","md:block","form-control",3,"ngClass","input","focus","keydown"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"block","md:hidden","form-control",3,"ngClass","input"],["type","text","formControlName","totalQuestion",1,"form-control"],[1,"col-span-12","mt-2","text-xs","text-danger","fade"],[4,"ngIf"],[1,"col-span-12","leading-relaxed","text-slate-500","text-xs","px-0","mt-1"],["class","clearfix pt-1 text-left",4,"ngIf"],[1,"clearfix","pt-1","text-left"],[1,"col-span-12","px-0","mt-2"],[1,"text-slate-500","text-xs"],["azt-track-service","config-mix-question-bbIjXerrNkY","href","https://docs.azota.vn/","target","_blank",1,"text-primary"]],template:function(e,n){1&e&&t.YNc(0,Um,11,12,"ng-container",0),2&e&&t.Q6J("ngIf",n.isNotNullData)},dependencies:[y.mk,y.sg,y.O5,Qt.Kd,P.KC,m.Fj,m.JJ,m.JL,m.sg,m.u,m.CE,We.Y,Jt.M,tt.bT],encapsulation:2}),o})();function Fm(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Rm(o,s){1&o&&(t.TgZ(0,"div",73),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_thoi_gian")," "))}function zm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function Jm(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function Bm(o,s){1&o&&(t.TgZ(0,"div",74),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Hm(o,s){1&o&&(t.TgZ(0,"div",75),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_lua_chon_nay_cho_phep_nhung_hoc_sinh_khong_dang_ky_dang_nhap_tai_khoang_van_co_the_tham_gia_thi")," "))}function Ym(o,s){1&o&&(t.TgZ(0,"div",78),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function Gm(o,s){if(1&o&&(t.TgZ(0,"div",76),t.YNc(1,Ym,3,3,"div",77),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}function $m(o,s){1&o&&(t.TgZ(0,"div",79),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_tao_de_con_giam_sat_tu_dong_an_hien_dap_an_doing")," "))}function Km(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",128)(1,"test-config-online-student-info",129),t.NdJ("infoFieldsChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.infoFields=i)})("formInfoInvalidChange",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.formInfoInvalid=i)}),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("infoFields",e.infoFields)("formInfoInvalid",e.formInfoInvalid)}}function Wm(o,s){1&o&&(t.TgZ(0,"div",87)(1,"div",82)(2,"label",130),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85),t._UZ(10,"input",131),t.qZA()()()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function Vm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",87)(1,"div",82)(2,"label",132),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"a",133),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",84)(12,"div",45)(13,"div",85)(14,"input",134),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.checkValidateCountQuestion=!1)}),t.qZA()()()()()}2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_dao_cau_hoi_va_dap_an")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_system_auto_mix_question_by_group")," "),t.xp6(3),t.hij(" ",t.lcZ(10,7,"lang_auto_xem_them")," "))}function Xm(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",138)(1,"test-config-online-mix-question",139),t.NdJ("isGroupMixQuestionChange",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.isGroupMixQuestion=i)})("checkValidateCountQuestionChange",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.checkValidateCountQuestion=i)}),t.qZA()()}if(2&o){const e=t.oxw(4);t.xp6(1),t.Q6J("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos)}}function tp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",87)(1,"div",82)(2,"label",135),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85)(10,"input",136),t.NdJ("change",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.checkValidateCountQuestion=!1)}),t.qZA()()(),t.YNc(11,Xm,2,4,"div",137),t.qZA()}if(2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,6,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "),t.xp6(4),t.Q6J("disabled",0==e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.isCreateSubTest.value&&1==e.form.controls.mixQuestion.value)}}function ep(o,s){if(1&o&&(t.TgZ(0,"div",91)(1,"div",82)(2,"label",140),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85),t._UZ(10,"input",141),t.qZA()()()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_co_dinh_cau_hoi_trong_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_khi_bat_chuc_nang_nay_he_thong_se_tu_dong_dao_cac_cau_hoi_dot")," "),t.xp6(4),t.Q6J("disabled",!e.form.controls.isCreateSubTest.value)}}function np(o,s){1&o&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function ip(o,s){if(1&o&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function op(o,s){1&o&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function ap(o,s){if(1&o&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function sp(o,s){1&o&&(t.TgZ(0,"div",143)(1,"div",44)(2,"label",144),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101)(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",89)(10,"div",15),t._UZ(11,"input",145),t.ALo(12,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_test_config_limit_listing_audio")," "),t.xp6(4),t.Oqu(t.lcZ(8,5,"lang_testbank_test_config_empty_if_not_limit_listen")),t.xp6(4),t.MGl("placeholder"," ",t.lcZ(12,7,"lang_auto_nhap_so_luot_nghe")+" ...",""))}function rp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",80)(1,"div",81)(2,"div",82)(3,"label",83),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",84)(7,"div",85),t._UZ(8,"input",86),t.qZA()()(),t.TgZ(9,"div",87)(10,"div",44)(11,"label",88),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",89)(15,"div",15),t._UZ(16,"input",90),t.ALo(17,"mytranslate"),t.qZA()()(),t.TgZ(18,"div",91)(19,"div",44)(20,"label",42),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",89)(24,"div",45)(25,"div",92),t._UZ(26,"input",93),t.TgZ(27,"label",94),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.TgZ(30,"div",95),t._UZ(31,"input",96),t.TgZ(32,"label",97),t._uU(33),t.ALo(34,"mytranslate"),t.TgZ(35,"span",13),t.ALo(36,"mytranslate"),t._UZ(37,"lucide-icon",14),t.qZA()()(),t.TgZ(38,"div",49),t._UZ(39,"input",98),t.TgZ(40,"label",99),t._uU(41),t.ALo(42,"mytranslate"),t.TgZ(43,"span",13),t.ALo(44,"mytranslate"),t._UZ(45,"lucide-icon",14),t.qZA()()()()()(),t.TgZ(46,"div",87)(47,"div",82)(48,"label",100),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"div",101),t._uU(52),t.ALo(53,"mytranslate"),t.qZA()(),t.TgZ(54,"div",84)(55,"div",102),t._UZ(56,"input",103),t.qZA()(),t.YNc(57,Km,2,2,"div",104),t.qZA(),t.YNc(58,Wm,11,6,"div",105),t.YNc(59,Vm,15,9,"div",105),t.YNc(60,tp,12,8,"div",105),t.YNc(61,ep,11,7,"div",106),t.TgZ(62,"div",87)(63,"div",82)(64,"label",107),t._uU(65),t.ALo(66,"mytranslate"),t.qZA(),t.TgZ(67,"div",101),t._uU(68),t.ALo(69,"mytranslate"),t.qZA()(),t.TgZ(70,"div",84)(71,"div",85),t._UZ(72,"input",108),t.qZA()()(),t.TgZ(73,"div",109)(74,"div",44)(75,"label",42),t._uU(76),t.ALo(77,"mytranslate"),t.qZA(),t.TgZ(78,"div",101),t.YNc(79,np,3,3,"span",110),t.YNc(80,ip,3,4,"span",110),t.qZA()(),t.TgZ(81,"div",89)(82,"div",45)(83,"div",92),t._UZ(84,"input",111),t.TgZ(85,"label",112),t._uU(86),t.ALo(87,"mytranslate"),t.qZA()(),t.TgZ(88,"div",95),t._UZ(89,"input",113),t.TgZ(90,"label",114),t._uU(91),t.ALo(92,"mytranslate"),t.qZA()(),t.TgZ(93,"div",49),t._UZ(94,"input",115),t.TgZ(95,"label",116),t._uU(96),t.ALo(97,"mytranslate"),t.qZA()()()()(),t.TgZ(98,"div",117)(99,"div",44)(100,"label",42),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"div",101),t.YNc(104,op,3,3,"span",110),t.YNc(105,ap,3,4,"span",110),t.qZA()(),t.TgZ(106,"div",89)(107,"div",45)(108,"div",92),t._UZ(109,"input",118),t.TgZ(110,"label",119),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()(),t.TgZ(113,"div",95),t._UZ(114,"input",120),t.TgZ(115,"label",121),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()(),t.TgZ(118,"div",49),t._UZ(119,"input",122),t.TgZ(120,"label",123),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()()()()(),t.TgZ(123,"div",124)(124,"div",44)(125,"label",125),t._uU(126),t.ALo(127,"mytranslate"),t.qZA()(),t.TgZ(128,"div",89)(129,"test-config-online-tag",126),t.NdJ("tagNamesChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.tagNames=i)}),t.qZA()()(),t.YNc(130,sp,13,9,"div",127),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,36,"lang_auto_chi_cho_phep_thi_mot_lan")," "),t.xp6(8),t.hij(" ",t.lcZ(13,38,"lang_testbank_test_config_password_exam")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(17,40,"lang_auto_nhap_mat_khau")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(22,42,"lang_testbank_test_config_automatic_monitoring")," "),t.xp6(7),t.hij(" ",t.lcZ(29,44,"lang_testbank_test_config_off")," "),t.xp6(5),t.hij(" ",t.lcZ(34,46,"lang_auto_giam_sat_thoat_man_hinh")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(36,48,"lang_auto_azota_se_ghi_lai_cac_lan_hoc_sinh_thoat_dot")),t.xp6(6),t.hij(" ",t.lcZ(42,50,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(44,52,"lang_auto_thuong_su_dung_cho_cac_ky_thi_doi_hoi_bao_mat_cao_hoc_sinh_can_dot")),t.xp6(6),t.hij(" ",t.lcZ(50,54,"lang_testbank_test_config_verify_profile_student")," "),t.xp6(3),t.hij(" ",t.lcZ(53,56,"lang_auto_khi_hoc_sinh_vao_lam_bai_se_phai_khai_bao_them_cac_thong_tin_dot")," "),t.xp6(5),t.Q6J("ngIf",1==e.form.controls.enterInfo.value),t.xp6(1),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&e.enableRandomQuestion||!e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value&&e.form.controls.isCreateSubTest.value),t.xp6(4),t.hij(" ",t.lcZ(66,58,"lang_auto_an_cau_hoi_nhom")," "),t.xp6(3),t.hij(" ",t.lcZ(69,60,"lang_auto_he_thong_se_an_di_phan_tieu_de_cua_moi_nhom_cau_hoi_co_trong_de_thi")," "),t.xp6(8),t.hij(" ",t.lcZ(77,62,"lang_auto_cho_xem_dap_an")," "),t.xp6(3),t.Q6J("ngIf",1==e.form.controls.whenShowAnswer.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.whenShowAnswer.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(87,64,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(92,66,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(97,68,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(102,70,"lang_auto_cho_xem_diem")," "),t.xp6(3),t.Q6J("ngIf",1==e.form.controls.whenShowResult.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.whenShowResult.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(112,72,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(117,74,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(122,76,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(127,78,"lang_testbank_test_config_add_tag")," "),t.xp6(3),t.Q6J("form",e.form)("tagNameCtrl",e.tagNameCtrl)("tagNames",e.tagNames)("allTagNames",e.allTagNames),t.xp6(1),t.Q6J("ngIf",e.isHasAudio)}}function lp(o,s){1&o&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui",147),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}function cp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",146),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.savePublishExam(0))}),t.YNc(1,lp,2,1,"span",72),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("disabled",e.checkValidateCountQuestion||e.formInfoInvalid||e.form.controls.classroomIds.errors),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_luu_nhap")," ")}}function _p(o,s){1&o&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui",147),t.qZA()),2&o&&(t.xp6(1),t.Q6J("type","oval"))}const dp=function(o){return{"h-56-important":o}};function up(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6)(4,"div",7)(5,"h3",8),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"config-level-subject",10),t.TgZ(10,"div",11)(11,"div",5)(12,"label",12),t._uU(13),t.ALo(14,"mytranslate"),t.TgZ(15,"span",13),t.ALo(16,"mytranslate"),t._UZ(17,"lucide-icon",14),t.qZA()()(),t.TgZ(18,"div",5)(19,"div",15),t._UZ(20,"input",16),t.ALo(21,"mytranslate"),t.TgZ(22,"div",17),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.YNc(25,Rm,3,3,"div",18),t.qZA()()(),t.TgZ(26,"div",19)(27,"div",5)(28,"label",20),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"span",13),t.ALo(32,"mytranslate"),t._UZ(33,"lucide-icon",14),t.qZA()()(),t.TgZ(34,"div",5)(35,"div",21)(36,"div",22)(37,"mat-form-field",23)(38,"input",24),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(44);return t.KtG(i.open())}),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"button",25),t.NdJ("click",function(i){return t.CHM(e),t.MAs(44).open(),t.KtG(i.stopPropagation())}),t.TgZ(41,"span",26),t._UZ(42,"lucide-icon",27),t.qZA()(),t.TgZ(43,"ngx-mat-datetime-picker",null,28),t.YNc(45,zm,2,0,"ng-template"),t.qZA()()(),t.TgZ(46,"div",22)(47,"mat-form-field",23)(48,"input",29),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(54);return t.KtG(i.open())}),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"button",30),t.NdJ("click",function(i){return t.CHM(e),t.MAs(54).open(),t.KtG(i.stopPropagation())}),t.TgZ(51,"span",26),t._UZ(52,"lucide-icon",27),t.qZA()(),t.TgZ(53,"ngx-mat-datetime-picker",null,31),t.YNc(55,Jm,2,0,"ng-template"),t.qZA()()(),t.TgZ(56,"div",32)(57,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clearTime())}),t.TgZ(58,"span",34),t._UZ(59,"lucide-icon",35),t.qZA(),t._uU(60),t.ALo(61,"mytranslate"),t.qZA()()(),t.TgZ(62,"div",36)(63,"div",37),t._uU(64),t.ALo(65,"mytranslate"),t.qZA(),t.TgZ(66,"div",38),t._uU(67),t.ALo(68,"mytranslate"),t.qZA(),t.YNc(69,Bm,3,3,"div",39),t.qZA()()(),t.TgZ(70,"div",40)(71,"div",41)(72,"label",42),t._uU(73),t.ALo(74,"mytranslate"),t.qZA(),t.YNc(75,Hm,3,3,"div",43),t.qZA(),t.TgZ(76,"div",44)(77,"div",45)(78,"div",46)(79,"input",47),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clearAllCheckBox(0))}),t.qZA(),t.TgZ(80,"label",48),t._uU(81),t.ALo(82,"mytranslate"),t.qZA()(),t.TgZ(83,"div",49)(84,"input",50),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clearAllCheckBox(2))}),t.qZA(),t.TgZ(85,"label",51),t._uU(86),t.ALo(87,"mytranslate"),t.qZA()()()(),t.TgZ(88,"div",52)(89,"div",53)(90,"div",54)(91,"h3",55),t._uU(92),t.ALo(93,"mytranslate"),t.qZA(),t.TgZ(94,"div",56),t._UZ(95,"azt-list-classroom-checkall",57),t.qZA()(),t.TgZ(96,"div",58)(97,"ng-scrollbar",59)(98,"azt-list-classroom-checkbox",60),t.NdJ("objsChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.classroomObjs=i)}),t.qZA()()()()(),t.YNc(99,Gm,2,1,"div",61),t.qZA()()(),t.TgZ(100,"div",62)(101,"h3",63),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toggleAdvancedSetting())}),t.TgZ(102,"span",64),t._uU(103),t.ALo(104,"mytranslate"),t.qZA(),t.TgZ(105,"span",65),t._UZ(106,"lucide-icon",66),t.qZA(),t.YNc(107,$m,3,3,"div",67),t.qZA(),t.YNc(108,rp,131,80,"div",68),t.qZA(),t.TgZ(109,"div",69),t.YNc(110,cp,4,5,"button",70),t.TgZ(111,"button",71),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.savePublishExam(1))}),t.YNc(112,_p,2,1,"span",72),t._uU(113),t.ALo(114,"mytranslate"),t.qZA()()()()()()}if(2&o){const e=t.MAs(44),n=t.MAs(54),i=t.oxw();t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(3),t.hij(" ",t.lcZ(7,45,"lang_auto_cau_hinh_chung")," "),t.xp6(3),t.Q6J("form",i.form)("schoolLevelObjs",i.schoolLevelObjs)("schoolSubjectObjs",i.schoolSubjectObjs)("typeView",1),t.xp6(4),t.hij(" ",t.lcZ(14,47,"lang_testbank_test_config_time_test_minutes")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(16,49,"lang_auto_thoi_gian_lam_bai_cua_hoc_sinh")),t.xp6(5),t.s9C("placeholder",t.lcZ(21,51,"lang_auto_nhap_thoi_gian")+" ..."),t.xp6(3),t.hij(" ",t.lcZ(24,53,"lang_testbank_test_config_enter_0_unlimited_time")," "),t.xp6(2),t.Q6J("ngIf",i.form.controls.minutes.errors),t.xp6(4),t.hij(" ",t.lcZ(30,55,"lang_testbank_test_config_time_assign_exam")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(32,57,"lang_auto_hoc_sinh_lam_bai_online_chi_duoc_lam_bai_vao_thoi_gian_giao_de")),t.xp6(7),t.s9C("placeholder",t.lcZ(39,59,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(10),t.s9C("placeholder",t.lcZ(49,61,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",n),t.xp6(12),t.hij(" ",t.lcZ(61,63,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(65,65,"lang_testbank_test_config_tutorial_time_assigne_exam"),". "),t.xp6(3),t.hij(" ",t.lcZ(68,67,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(2),t.Q6J("ngIf",i.calculatorTimeValidate(i.form.controls.endTime.value,i.form.controls.startTime.value)<0),t.xp6(4),t.hij(" ",t.lcZ(74,69,"lang_testbank_test_config_who_tested")," "),t.xp6(2),t.Q6J("ngIf",0==i.form.controls.whoAllow.value),t.xp6(6),t.hij(" ",t.lcZ(82,71,"lang_testbank_test_config_all_people")," "),t.xp6(5),t.hij(" ",t.lcZ(87,73,"lang_testbank_test_config_assigne_class")," "),t.xp6(2),t.Q6J("hidden",2!=i.form.controls.whoAllow.value),t.xp6(4),t.hij(" ",t.lcZ(93,75,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",i.form)("objs",i.classroomObjs)("permissionName",i.permissionTypes.exam),t.xp6(2),t.Q6J("visibility","hover")("ngClass",t.VKq(81,dp,i.isMobileWebView)),t.xp6(1),t.Q6J("form",i.form)("objs",i.classroomObjs)("examClassroomObjs",i.examClassroomObjs)("permissionName",i.permissionTypes.exam),t.xp6(1),t.Q6J("ngIf",i.form.controls.classroomIds.errors),t.xp6(4),t.hij(" ",t.lcZ(104,77,"lang_auto_cau_hinh_nang_cao")," "),t.xp6(3),t.s9C("name",i.showAdvancedSetting?"chevron-down":"chevron-up"),t.xp6(1),t.Q6J("ngIf",!i.showAdvancedSetting),t.xp6(1),t.Q6J("ngIf",i.showAdvancedSetting),t.xp6(2),t.Q6J("ngIf",0==i.obj.isPublished),t.xp6(1),t.Q6J("disabled",i.checkValidateCountQuestion||i.formInfoInvalid||i.form.controls.classroomIds.errors),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(114,79,"lang_auto_xuat_ban")," ")}}let mp=(()=>{class o extends R.Q{changModeView(e){var n;this.modeView=e,null===(n=document.getElementById(e))||void 0===n||n.scrollIntoView({behavior:"smooth"})}getGroupMixInfosSubmit(e){let n={};return e.forEach(i=>{var a;n.hasOwnProperty(i.groupId)||(n[i.groupId]=null!==(a=i.totalQuestion)&&void 0!==a?a:0)}),JSON.stringify({status:this.isGroupMixQuestion?1:0,objs:n})}clearTime(){this.form.controls.startTime.setValue(""),this.form.controls.endTime.setValue("")}calculateTime(e,n){console.log(e);let i=new Date(e).getTime()+60*n*1e3;return this.timeService.formatFullDateTimeByUserUnit(i)}calculatorTimeValidate(e,n){return""!=e&&""!=n?this.timeService.calculationHomeworkTime(e,n):0}checkInfosField(e){let n="",i="",a="";if(this.commonService.myTranslate(["lang_auto_ho_va_ten"]).subscribe(r=>{n=r.lang_auto_ho_va_ten}),this.commonService.myTranslate(["lang_auto_lop"]).subscribe(r=>{i=r.lang_auto_lop}),this.commonService.myTranslate(["lang_auto_truong"]).subscribe(r=>{a=r.lang_auto_truong}),null==e||""==e)this.infoFields.push({type:0,title:n,contents:[]}),this.infoFields.push({type:0,title:i,contents:[]}),this.infoFields.push({type:0,title:a,contents:[]});else{let r=this.commonService.myParseJson(e);this.infoFields=r??[]}}checkValidInfoField(){for(let e=0;e<this.infoFields.length;e++)if(0!=this.infoFields[e].type){if(!(this.infoFields[e].contents&&this.infoFields[e].contents.length>0)){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}{let n=this.infoFields[e].contents.filter(i=>""==i);if(n&&n.length>0){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}this.formInfoInvalid=!1}}else this.formInfoInvalid=!1}clearAllCheckBox(e){this.isSelectClassroom=2==e}toggleAdvancedSetting(){this.showAdvancedSetting=!this.showAdvancedSetting}redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}savePublishExam(e){var n;let i=null!==(n=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==n?n:0;this.form.controls.isRandomQuestion.value&&(this.form.controls.mixQuestion.setValue(!1),this.form.controls.isCreateSubTest.setValue(!1));let a=this.commonService.getFormObj(this.form);const r=this.tagNameCtrl.value;if(r?.trim()&&this.tagNames.push(r.trim()),this.calculatorTimeValidate(a.endTime,a.startTime)<0)return void this.showErrorSnack("lang_testbank_test_config_end_time_bigger_time_star");if(("1"==a.whenShowAnswer||"1"==a.whenShowResult)&&(!a.endTime||a.minutes<=0))return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian_giao_de_va_thoi_gian_lam_bai_khi_chon_khi_tat_ca_thi_xong");a.startTime=""===a.startTime||null===a.startTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.startTime),a.endTime=""===a.endTime||null===a.endTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.endTime),a.isTakeTestOnce=1!=a.isTakeTestOnce?0:1,a.limitAudio=a.limitAudio>0?a.limitAudio:0,a.mixQuestion=a.mixQuestion?1:0,a.limitMixQuestion=a.limitMixQuestion>0?a.limitMixQuestion:0,a.enterInfo=1!=a.enterInfo?0:1;let l=this.getGroupMixInfosSubmit(a.groupInfos),c=a.isCreateSubTest&&1==a.mixQuestion?2:a.mixQuestion;if(1==a.enterInfo?this.checkValidInfoField():this.formInfoInvalid=!1,a.isCreateSubTest||(this.checkValidateCountQuestion=!1),this.formInfoInvalid||this.checkValidateCountQuestion)return void this.showErrorSnack("lang_auto_loi_hay_chac_chan_ban_da_dien_du_thong_tin");if(this.form.controls.classroomIds.errors)return void this.showErrorSnack("lang_auto_please_select_classroom");var _=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ze.$.exam);const d=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,_,a.classroomIds);this.initStatusObj();let p={minutes:a.minutes,password:a.password,startTime:a.startTime,endTime:a.endTime,whenShowAnswer:a.whenShowAnswer,whenShowResult:a.whenShowResult,whoAllow:a.whoAllow,isPublished:e??void 0,autoMonitor:a.autoMonitor,limitAudio:a.limitAudio,tags:this.tagNames,isTakeTestOnce:a.isTakeTestOnce,mixQuestion:c,fixMixQuestion:a.fixMixQuestion?1:0,limitMixQuestion:a.limitMixQuestion,isRandomQuestion:this.enableRandomQuestion?a.isRandomQuestion?1:0:void 0,enterInfo:a.enterInfo,classroomIds:d,infoFieldsV2:JSON.stringify(this.infoFields),price:a.price,isSaveconfig:1,hideGroupQuestion:a.hideGroupQuestion?1:0,limitQuestionGroups:l,schoolLevelId:Number(a.schoolLevel),schoolSubjectId:Number(a.schoolSubject)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(p,this.hashId).subscribe(h=>{var f;if(1==h.success){if(e){let w=`/admin/testbank/config-exam-online/${i??0}/${this.obj.hashId}?backto=`+encodeURIComponent(this.backToLink);this.commonService.myNavigationWithQueryString(`/admin/testbank/publish-document/0/${i??0}/${this.obj.hashId}`,"?backto="+encodeURIComponent(w))}else{let w=this.backToLink.includes("shareType");this.commonService.myNavigation(`/admin/testbank/document-management/0/${w?0:i??0}/1`)}this.successStatusObj()}else this.errorStatusObj(null!==(f=h.message)&&void 0!==f?f:"",!0)}))}getExamDataByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(n=>{var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J;if(1==n.success){if(null!=n.data){let z=null!==(a=null===(i=n.data)||void 0===i?void 0:i.examObj)&&void 0!==a?a:{},K=null!==(r=this.castObj(z))&&void 0!==r?r:{};if(K.limitQuestionGroupsParse=this.commonService.myParseJson(null!==(l=z.limitQuestionGroups)&&void 0!==l?l:""),this.obj=K,this.hasGroupQuestion=!(null===(c=n.data)||void 0===c||!c.hasGroupQuestion),this.minLimitMixQuestion=null!==(_=n.data.minLimitMixQuestion)&&void 0!==_?_:0,this.examGroupInfos=n.data.examGroupInfos&&n.data.examGroupInfos.length>0?n.data.examGroupInfos:this.examGroupInfos,this.enableRandomQuestion=null!==(d=n.data.enableRandomQuestion)&&void 0!==d&&d,this.classroomObjs=null!==(p=n.data.classroomObjs)&&void 0!==p?p:new Array,this.examClassroomObjs=null!==(h=n.data.examClassroomObjs)&&void 0!==h?h:[],n.data.examTagObjs)for(let mt=0;mt<n.data.examTagObjs.length;mt++)this.tagNames.push(null!==(f=n.data.examTagObjs[mt].name)&&void 0!==f?f:"");if(n.data.allTagObjs)for(let mt=0;mt<n.data.allTagObjs.length;mt++)this.allTagNames.push(null!==(w=n.data.allTagObjs[mt].name)&&void 0!==w?w:"");this.schoolLevelObjs=null!==(k=n.data.schoolLevelObjs)&&void 0!==k?k:[],this.schoolSubjectObjs=null!==(S=n.data.schoolSubjectObjs)&&void 0!==S?S:[];let B=this.obj.schoolLevelId?this.obj.schoolLevelId:null!==(Q=null===(D=n.data.examSchoolLogObj)||void 0===D?void 0:D.lastSchoolLevelId)&&void 0!==Q?Q:0,et=this.obj.schoolSubjectId?this.obj.schoolSubjectId:null!==(q=null===(N=n.data.examSchoolLogObj)||void 0===N?void 0:N.lastSchoolSubjectId)&&void 0!==q?q:0;this.hashId=null!==(W=this.obj.hashId)&&void 0!==W?W:"",this.isHasAudio=null!==(X=n.data.isHasAudio)&&void 0!==X?X:0;let st=2==this.obj.mixQuestion,at=1==this.obj.mixQuestion||2==this.obj.mixQuestion;this.isSelectClassroom="2"==String(this.obj.whoAllow),this.form.patchValue({schoolLevel:B,schoolSubject:et,isTakeTestOnce:0!=this.obj.isTakeTestOnce,password:this.obj.password,price:null!=this.obj.price?Number(this.obj.price):0,autoMonitor:String(this.obj.autoMonitor),minutes:this.obj.minutes,startTime:null!=this.obj.startTime?this.obj.startTime:"",endTime:null!=this.obj.endTime?this.obj.endTime:"",whenShowAnswer:String(this.obj.whenShowAnswer),whenShowResult:String(this.obj.whenShowResult),whoAllow:String(this.obj.whoAllow),mixQuestion:at,isRandomQuestion:1===this.obj.isRandomQuestion,isCreateSubTest:st,limitMixQuestion:this.obj.limitMixQuestion,fixMixQuestion:1==this.obj.fixMixQuestion,hideGroupQuestion:1==this.obj.hideGroupQuestion,limitAudio:null!=this.obj.limitAudio?Number(this.obj.limitAudio):0,enterInfo:0!=this.obj.enterInfo}),this.checkInfosField(null!==(E=this.obj.infoFieldsV2)&&void 0!==E?E:""),this.successStatusObj()}}else this.errorStatusObj(null!==(J=n.message)&&void 0!==J?J:"",!0)}))}ngOnInit(){var e,n,i;this.form=this.formBuilder.group({schoolLevel:new m.p4(0,[m.kI.required]),schoolSubject:new m.p4(0,[m.kI.required]),minutes:[60,[m.kI.required,m.kI.min(0)]],startTime:new m.p4(""),endTime:new m.p4("",[m.kI.required]),isTakeTestOnce:new m.p4("0"),autoMonitor:new m.p4("0"),password:new m.p4(""),whenShowAnswer:new m.p4("0"),whenShowResult:new m.p4("0"),whoAllow:new m.p4("0"),classroomIds:this.formBuilder.array([]),mixQuestion:new m.p4(!1),isCreateSubTest:new m.p4(!1),limitMixQuestion:new m.p4("",[m.kI.required]),groupInfos:new m.vC([]),fixMixQuestion:new m.p4(!1),isRandomQuestion:new m.p4(!1),enterInfo:new m.p4(!1),price:new m.p4(0,[m.kI.min(0)]),limitAudio:new m.p4(0,[m.kI.min(0)]),hideGroupQuestion:new m.p4("0")},{validators:[$u.customDateTimeValidator,Pi.h.classroomCheckBoxValidator]}),this.form.valueChanges.subscribe(c=>{let _=JSON.stringify(c);_!=this.prevData&&(this.prevData=_,this.form.patchValue(c))}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_test_config_online_description",image:""});let a=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,r=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"",l=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"";this.backToLink=l||`/admin/testbank/document-management/0/${a}/1`,this.getExamDataByHashId(r),super.ngOnInit()}constructor(e,n,i,a,r,l){super(e),this.commonService=e,this.formBuilder=n,this.activeRoute=i,this.timeService=a,this.documentConfigService=r,this.sEAztClassroomCheckboxService=l,this.form=new m.nJ({}),this.permissionTypes=ze.$,this.backToLink="",this.hashId="",this.prevData="",this.isSelectClassroom=!1,this.showAdvancedSetting=!1,this.tagNameCtrl=new m.p4,this.tagNames=[],this.allTagNames=[],this.obj={},this.classroomObjs=[],this.examClassroomObjs=[],this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.hasGroupQuestion=!1,this.minLimitMixQuestion=0,this.examGroupInfos=[],this.enableRandomQuestion=!1,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.infoFields=[],this.formInfoInvalid=!1,this.isHasAudio=0,this.modeView="general"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS),t.Y36(C.gz),t.Y36(Ae.O),t.Y36(Ku.C),t.Y36(Li.L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["test-config-online"]],features:[t._Bn([{provide:Re.fM,useClass:Ii.HF,deps:[Ei.Ad,Zi.o8]},{provide:Re.ab,useFactory:Mi.hx,deps:[Ae.O]}]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12"],[3,"formGroup"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],["id","general",1,"box","p-5","mt-3"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],["id","azt-config-time-minutes",1,"grid","grid-cols-12","mt-4"],["for","document-time-minutes",1,"form-label","font-medium","flex","items-center"],[1,"w-4","h-4","inline-block","ml-2",3,"matTooltip"],["name","info"],[1,"setting-input"],["id","document-time-minutes","appOnlyNumber","","formControlName","minutes","type","text",1,"form-control",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1"],["class","text-xs text-danger mt-1",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],["for","regular-form-1",1,"form-label","font-medium","flex","items-center"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","config-exam-online-zpjNTbf42S","matInput","","formControlName","startTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-WIIkPQrzu5","matSuffix","",2,"font-size","18px",3,"click"],[1,"w-4","h-4","inline-block"],["name","calendar-clock"],["startTime",""],["azt-track-service","config-exam-online-NFd3Eq4Vq9","matInput","","formControlName","endTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-2LQ7XbEP9P","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","config-exam-online-ceMErvp9Ni",1,"btn","btn-outline-secondary","w-full",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","timer-reset"],[1,"text-xs","mt-2"],[1,"text-slate-500"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"form-label","font-medium","flex","items-center"],["class","leading-relaxed text-slate-500 text-xs mt-2",4,"ngIf"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio","value","0",1,"form-check-input",3,"change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio","value","2",1,"form-check-input",3,"change"],["for","config-who-class",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","ngClass"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"setting-advanced","mt-5"],[1,"text-md","flex","items-center","font-medium","mr-2","cursor-pointer",3,"click"],[1,"uppercase"],[1,"w-4","h-4","inline-block","ml-2"],[3,"name"],["class","ml-5 text-md text-slate-600 hidden lg:block",4,"ngIf"],["class","box p-5 mt-3","id","advanced",4,"ngIf"],[1,"text-right","mt-5"],["azt-track-service","config-exam-online-w_k87Co86T","class","btn w-24 btn-pending mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","config-exam-online-IJPSsthNNv",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"text-danger","mt-1"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],[1,"ml-5","text-md","text-slate-600","hidden","lg:block"],["id","advanced",1,"box","p-5","mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-5"],["for","config-once-test",1,"form-label","font-medium","flex","items-center"],[1,"col-span-2","lg:col-span-7"],[1,"setting-input","form-switch"],["id","config-once-test","formControlName","isTakeTestOnce","type","checkbox",1,"show-code","form-check-input"],[1,"grid","grid-cols-12","mt-4"],["for","config-password",1,"form-label","mt-2","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],["type","text","id","config-password","formControlName","password","type","text",1,"form-control",3,"placeholder"],[1,"grid","grid-cols-12","mt-5"],[1,"form-check","mr-8"],["id","automatic-off","type","radio","formControlName","autoMonitor","value","0",1,"form-check-input"],["for","automatic-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","automatic-exit-monitor","type","radio","formControlName","autoMonitor","value","1",1,"form-check-input"],["for","automatic-exit-monitor",1,"form-check-label","flex","items-center"],["id","automatic-advanced","type","radio","formControlName","autoMonitor","value","3",1,"form-check-input"],["for","automatic-advanced",1,"form-check-label","flex","items-center"],["for","config-verify-student",1,"form-label","font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],[1,"setting-input","form-switch","ml-"],["id","config-verify-student","formControlName","enterInfo","type","checkbox",1,"show-code","form-check-input"],["class","intro-y col-span-12 mt-5",4,"ngIf"],["class","grid grid-cols-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-5",4,"ngIf"],["for","config-hide-group-header",1,"form-label","font-medium","flex","items-center"],["id","config-hide-group-header","formControlName","hideGroupQuestion","type","checkbox",1,"show-code","form-check-input"],["id","whenShowAnswer-block",1,"grid","grid-cols-12","mt-4"],["class","clearfix pt-1",4,"ngIf"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","2",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-advanced",1,"form-check-label","flex","items-center"],["id","whenShowResult-block",1,"grid","grid-cols-12","mt-4"],["id","whenShowResult-off","type","radio","formControlName","whenShowResult","value","2",1,"form-check-input"],["for","whenShowResult-off",1,"form-check-label"],["id","whenShowResult-tested","type","radio","formControlName","whenShowResult","value","0",1,"form-check-input"],["for","whenShowResult-tested",1,"form-check-label","flex","items-center"],["id","whenShowResult-advanced","type","radio","formControlName","whenShowResult","value","1",1,"form-check-input"],["for","whenShowResult-advanced",1,"form-check-label","flex","items-center"],["id","tag-block",1,"grid","grid-cols-12","mt-4"],[1,"form-label","mt-2","font-medium","flex","items-center"],[2,"width","100%",3,"form","tagNameCtrl","tagNames","allTagNames","tagNamesChange"],["class","grid grid-cols-12 mt-4","id","exam-audio",4,"ngIf"],[1,"intro-y","col-span-12","mt-5"],[3,"infoFields","formInfoInvalid","infoFieldsChange","formInfoInvalidChange"],["for","config-random-matrix-question",1,"form-label","font-medium","flex","items-center"],["id","config-random-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-mix-question",1,"form-label","mb-0","font-medium","flex","items-center"],["azt-track-service","config-exam-online-vrhIU4hchP","href","https://docs.azota.vn/","target","_blank",1,"text-primary","font-medium"],["id","config-mix-question","formControlName","mixQuestion","type","checkbox",1,"show-code","form-check-input",3,"change"],["for","config-create-sub",1,"form-label","font-medium","flex","items-center"],["id","config-create-sub","formControlName","isCreateSubTest","type","checkbox",1,"show-code","form-check-input",3,"disabled","change"],["class","col-span-12 mt-4 intro-y",4,"ngIf"],[1,"col-span-12","mt-4","intro-y"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange"],["for","config-fix-mix",1,"form-label","font-medium","flex","items-center"],["id","config-fix-mix","formControlName","fixMixQuestion","type","checkbox",1,"show-code","form-check-input",3,"disabled"],[1,"clearfix","pt-1"],["id","exam-audio",1,"grid","grid-cols-12","mt-4"],["for","config-audio",1,"form-label","mt-2","mb-0","font-medium","flex","items-center"],["type","text","id","config-audio","appOnlyNumber","","formControlName","limitAudio",1,"form-control",3,"placeholder"],["azt-track-service","config-exam-online-w_k87Co86T",1,"btn","w-24","btn-pending","mr-2",3,"disabled","click"],[3,"type"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Fm,1,0,"azt-loading-effect",1),t.YNc(2,up,115,83,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.mk,y.O5,xe.v_,xe.nX,Kn.k0,Qt.Kd,Re.AB,Re.g2,P.KC,m._Y,m.Fj,m.Wl,m._,m.JJ,m.JL,m.sg,m.u,m.CE,zt.Q,We.Y,Jt.M,Wn.o,Vn.g,Ji.J,Vt._,b.Nh5,em,mm,Po,Nn,tt.bT],encapsulation:2}),o})(),Lo=(()=>{class o extends R.Q{redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n,i;let a=null!==(e=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==e?e:"";this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"",this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"";let r=this.commonService.getMyQueryParam("backto");this.backToLink=r??`/admin/testbank/document-management/1/${a??0}/1`}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.activeRoute=n,this.backToLink="",this.homeworkHashId=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-homework"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"headerBackTolink"],[3,"onBack"]],template:function(e,n){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"main-config-homework",1),t.NdJ("onBack",function(){return n.redirectBackTo()}),t.qZA()()),2&e&&t.Q6J("headerBackTolink",n.backToLink)},dependencies:[Vt._,mo]}),o})();var Hi=T(50491);let pp=(()=>{class o extends R.Q{constructor(e,n){super(e),this.commonService=e,this.activeRoute=n,this.linkCopy="",this.offlineCode="",this.hasOfflineExam=!1,this.checkValueInput=!1,this.form=new m.nJ({}),this.classroomObjs=[],this.isCheckAll=!1,this.shareClassroomIds=[],this.classIdsNotPermission=[],this.hashId="",this.cateId=""}ngOnInit(){var e;this.hashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"0",super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-share-offline-result"]],features:[t.qOj],decls:1,vars:2,consts:[[3,"examHashId","useDialog"]],template:function(e,n){1&e&&t._UZ(0,"azt-offline-share",0),2&e&&t.Q6J("examHashId",n.hashId)("useDialog",!1)},dependencies:[Hi.W],styles:[".school-info_bg[_ngcontent-%COMP%]{background:#fff;height:100vh}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:#16236c}"]}),o})();var hp=T(1222),jo=T(69183),No=T(28377),qo=T(25157);function gp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"form",5)(2,"div",6),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(9);return t.KtG(i.click())}),t.TgZ(3,"div",7),t.NdJ("filesChangeEmiter",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelected(i))}),t.TgZ(4,"div",8)(5,"a",9)(6,"mat-icon"),t._uU(7,"cloud_upload"),t.qZA()(),t.TgZ(8,"input",10,11),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelected(i.target.files))}),t.qZA(),t.TgZ(10,"span",12),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"div"),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"div")(17,"a",13),t.NdJ("click",function(i){return i.stopPropagation()}),t.ALo(18,"convertRawLinkOfGitHubWithLocale"),t.ALo(19,"mytranslate"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()()()()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(10),t.Oqu(t.lcZ(12,6,"lang_student_utils_click_choose_file")),t.xp6(3),t.hij(" ",t.lcZ(15,8,"lang_auto_click_vao_day_de_tai_file_excel_mau")," "),t.xp6(3),t.s9C("download",t.lcZ(19,12,"lang_auto_file_excel_mau_azota")),t.Q6J("href",t.lcZ(18,10,"blob/master/azota_assets/medias_[LANG]/de_mau_azota_excel.xlsx?raw=true"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(21,14,"lang_auto_file_excel_mau_azota"))}}function fp(o,s){1&o&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",18),t._UZ(3,"mat-spinner",19),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("strokeWidth",2)("diameter",30))}function xp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,",\xa0"),t.qZA())}function vp(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,xp,2,0,"span",55),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.Q6J("ngIf",n>0),t.xp6(1),t.hij("",t.lcZ(3,2,e)," ")}}function bp(o,s){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA(),t._uU(5," - "),t.YNc(6,vp,4,4,"span",45),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_auto_ma_de_loi"),": "),t.xp6(3),t.Oqu(null==e?null:e.offlineMixquestionId),t.xp6(2),t.Q6J("ngForOf",e.errorStrs)}}function wp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",26)(1,"mat-card",51)(2,"div",52)(3,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showErrorBlock=!1)}),t.ALo(4,"mytranslate"),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-card-content")(8,"p",54),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA(),t.YNc(12,bp,7,5,"p",45),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.s9C("matTooltip",t.lcZ(4,5,"lang_auto_dong")),t.xp6(6),t.lnq("",t.lcZ(10,7,"lang_auto_co")," ",e.excelErrorObjs.length," ",t.lcZ(11,9,"lang_auto_ma_de_loi_trong_file_excel"),""),t.xp6(3),t.Q6J("ngForOf",e.excelErrorObjs)}}function Tp(o,s){1&o&&(t.TgZ(0,"div",56)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function Cp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_thang_diem")," "))}function kp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_dung_dinh_dang")," "))}function Op(o,s){if(1&o&&(t.TgZ(0,"div",56),t.YNc(1,Cp,3,3,"span",55),t.YNc(2,kp,3,3,"span",55),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.formConfig.controls.totalScore.errors&&!e.checkValidateScore),t.xp6(1),t.Q6J("ngIf",e.checkValidateScore)}}const yp=function(o){return{"error-input":o}},Ap=function(o){return{"active-input":o}};function Sp(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",57),t.NdJ("focus",function(){const i=t.CHM(e),a=i.$implicit,r=i.index,l=t.oxw(3);return t.KtG(l.chooseHashId(a,r))})("input",function(i){const r=t.CHM(e).index,l=t.oxw(3);return t.KtG(l.changeOfflineHashId(i,r))}),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);let a;t.xp6(1),t.Q6J("max",999)("value",null!==(a=e.offlineMixquestionHashId)&&void 0!==a?a:"")("ngClass",t.VKq(4,yp,e.checkValidate||e.checkMatchHashId))("ngClass",t.VKq(6,Ap,i.indexHashId==n))}}function Zp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.removeAnswerItem())}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",38),t._UZ(4,"path",39)(5,"path",40)(6,"path",41)(7,"line",42)(8,"line",43),t.qZA()()()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_xoa_ma_de")))}function Ep(o,s){1&o&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" *",t.lcZ(2,1,"lang_auto_need_at_least_one_hash_id")," "))}function Ip(o,s){if(1&o&&(t.TgZ(0,"p",60),t._uU(1),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" *",e.msgError," ")}}function Mp(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",71),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2),l=r.index,c=r.$implicit,_=t.oxw(3);let d;return t.KtG(_.changeAnswer(l,null!==(d=c.indexQuestion)&&void 0!==d?d:0,a))}),t._uU(2),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,n=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngClass",e==n.answerQuestion?"btn-primary":""),t.xp6(1),t.hij(" ",e," ")}}function Pp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",66)(1,"div",67),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",68),t.YNc(5,Mp,3,2,"ng-container",45),t.qZA(),t.TgZ(6,"div",69)(7,"button",70),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=i.index,r=i.$implicit,l=t.oxw(3);let c;return t.KtG(l.deleteAnswerQuestion(a,null!==(c=r.indexQuestion)&&void 0!==c?c:0))}),t.ALo(8,"mytranslate"),t.O4$(),t.TgZ(9,"svg",38),t._UZ(10,"path",39)(11,"path",40)(12,"path",41)(13,"line",42)(14,"line",43),t.qZA()()()()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);let i;t.xp6(2),t.AsE(" ",t.lcZ(3,4,"lang_auto_cau")," ",(null!==(i=e.indexQuestion)&&void 0!==i?i:0)+1," "),t.xp6(3),t.Q6J("ngForOf",n.configAnswerData),t.xp6(2),t.s9C("matTooltip",t.lcZ(8,6,"lang_auto_xoa_dap_an"))}}function Lp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",75),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw().index,r=t.oxw(3);return t.KtG(r.changeAnswerQuestion(a,i))}),t.TgZ(1,"span",76),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4,"-"),t.qZA(),t.TgZ(5,"span",76),t._uU(6),t.qZA()()}if(2&o){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(2),t.Oqu(n+1),t.xp6(4),t.Oqu(i)}}function jp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,a=t.oxw().index,r=t.oxw(3);return t.KtG(r.changeAnswerQuestion(a,i))}),t.TgZ(1,"span",76),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4,"-"),t.qZA(),t.TgZ(5,"span",76),t._uU(6),t.qZA()()}if(2&o){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(2),t.Oqu(n+1),t.xp6(4),t.Oqu(i)}}function Np(o,s){if(1&o&&(t.TgZ(0,"div",72),t.YNc(1,Lp,7,2,"button",73),t.YNc(2,jp,7,2,"button",74),t.qZA()),2&o){const e=s.index,n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.indexQuestion===e),t.xp6(1),t.Q6J("ngIf",n.indexQuestion!==e)}}function qp(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",61),t.YNc(2,Pp,15,8,"div",62),t.TgZ(3,"div",63)(4,"p",21),t._uU(5),t.ALo(6,"mytranslate"),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()(),t.TgZ(10,"div",64),t.YNc(11,Np,3,2,"div",65),t.qZA()()(),t.BQk()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);t.xp6(1),t.Q6J("hidden",n!==i.indexHashId),t.xp6(1),t.Q6J("ngIf",e.checkChangeValue),t.xp6(3),t.hij(" ",t.lcZ(6,6,"lang_auto_bang_dap_an")," "),t.xp6(3),t.AsE("(",null==e.answerTexts?null:e.answerTexts.length," ",t.lcZ(9,8,"lang_auto_cau_hoi_brackets"),""),t.xp6(3),t.Q6J("ngForOf",e.answerTexts)}}function Qp(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h3",21),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",22)(5,"form",23)(6,"div",24),t.YNc(7,wp,13,11,"div",25),t.TgZ(8,"div",26)(9,"mat-form-field",27)(10,"mat-label"),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t._UZ(13,"input",28),t.YNc(14,Tp,4,3,"div",29),t.qZA()(),t.TgZ(15,"div",26)(16,"mat-form-field",27)(17,"mat-label"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"input",30),t.NdJ("input",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.checkValidation())}),t.qZA()(),t.YNc(21,Op,3,2,"div",29),t.qZA(),t.TgZ(22,"div",26),t._UZ(23,"config-level-subject",31),t.qZA(),t.TgZ(24,"div",26)(25,"div",32)(26,"div",33)(27,"div",34)(28,"p",35),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",36)(32,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.removeAnswerItem())}),t.ALo(33,"mytranslate"),t.O4$(),t.TgZ(34,"svg",38),t._UZ(35,"path",39)(36,"path",40)(37,"path",41)(38,"line",42)(39,"line",43),t.qZA()()(),t.kcU(),t.TgZ(40,"div",44),t.YNc(41,Sp,2,8,"ng-container",45),t.qZA(),t.YNc(42,Zp,9,3,"div",46),t.qZA(),t.YNc(43,Ep,3,3,"p",47),t.YNc(44,Ip,2,1,"p",47),t.qZA(),t.YNc(45,qp,12,10,"ng-container",45),t.qZA(),t.TgZ(46,"div",48)(47,"button",49),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.resetBoxFileExcel())}),t._uU(48),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"button",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleSaveQuestionAndExam())}),t._uU(51),t.ALo(52,"mytranslate"),t.qZA()()()()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,22,"lang_cms_create_exam_by_excel_title")," "),t.xp6(3),t.Q6J("formGroup",e.formConfig),t.xp6(2),t.Q6J("ngIf",e.excelErrorObjs.length>0&&e.showErrorBlock),t.xp6(4),t.Oqu(t.lcZ(12,24,"lang_auto_ten_de")),t.xp6(3),t.Q6J("ngIf",e.formConfig.controls.nameExam.errors),t.xp6(4),t.Oqu(t.lcZ(19,26,"lang_auto_thang_diem")),t.xp6(2),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.formConfig.controls.totalScore.errors||e.checkValidateScore),t.xp6(2),t.Q6J("form",e.formConfig)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("typeView",1),t.xp6(6),t.hij(" ",t.lcZ(30,28,"lang_auto_ma_de"),": "),t.xp6(3),t.s9C("matTooltip",t.lcZ(33,30,"lang_auto_xoa_ma_de")),t.xp6(9),t.Q6J("ngForOf",e.answerList),t.xp6(1),t.Q6J("ngIf",e.answerList.length),t.xp6(1),t.Q6J("ngIf",!e.answerList.length),t.xp6(1),t.Q6J("ngIf",e.msgError),t.xp6(1),t.Q6J("ngForOf",e.answerList),t.xp6(3),t.hij(" ",t.lcZ(49,32,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",""==e.formConfig.controls.nameExam.value.toString().trim()||e.checkValidateHashId||e.checkValidateScore||e.checkMatchHashId||e.formConfig.invalid||!e.formConfig.controls.schoolSubject.value||!e.formConfig.controls.schoolLevel.value||!e.answerList.length),t.xp6(1),t.hij(" ",t.lcZ(52,34,"lang_auto_luu")," ")}}function Dp(o,s){if(1&o&&(t.YNc(0,fp,4,2,"div",14),t.YNc(1,Qp,53,36,"ng-template",null,15,t.W1O)),2&o){const e=t.MAs(2),n=t.oxw();t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",e)}}const Qo=".box-upload-file[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:90vh}.box-upload[_ngcontent-%COMP%]{border:none!important;background:transparent!important;display:flex;justify-content:center;align-items:center}.wh-100[_ngcontent-%COMP%]{height:100%;width:100%}#dropzoneAreaFrame[_ngcontent-%COMP%]{cursor:pointer}.app-block-info[_ngcontent-%COMP%]{margin-bottom:40px}.close-btn[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-7px;padding:5px 10px;background:#dadada;cursor:pointer;border-radius:20px}.file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;vertical-align:super}.v-dragndrop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.file-input[_ngcontent-%COMP%]{display:none}.dz-clickable[_ngcontent-%COMP%]{cursor:pointer;color:#000}.font-size-1[_ngcontent-%COMP%]{font-size:15px}.app-block-content[_ngcontent-%COMP%]{margin-top:10px}.app-block-edit[_ngcontent-%COMP%]{margin:20px auto;text-align:center;position:relative;max-width:300px}.block-answer-close[_ngcontent-%COMP%]{position:absolute;top:-10px;right:0}.btn-azt-secodary-icon[_ngcontent-%COMP%]{color:#4e4d4d;transition:all .5s}.btn-azt-secodary-icon[_ngcontent-%COMP%]:hover{color:#000}.app-block-main[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.app-block[_ngcontent-%COMP%]{margin-top:15px}.app-block-input[_ngcontent-%COMP%]{margin-right:5px}.btn-item[_ngcontent-%COMP%]{display:inline-block;border:1px solid #eee;background:#fff;border-radius:5px;transition:all .3s;padding:5px 10px;margin-right:5px;margin-top:5px;width:calc(10% - 5px);cursor:pointer}.btn-item[_ngcontent-%COMP%]:hover{background:#eee}.card-custom[_ngcontent-%COMP%]{background:#fff;padding:15px;border-radius:5px;max-width:900px;margin:0 auto}.btn-answer-item[_ngcontent-%COMP%]{display:inline-block;border-radius:50%;padding:10px 16px;font-weight:500;border:1px solid #eee;background:#fff;margin-right:10px}.block-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.block-input[_ngcontent-%COMP%]{position:absolute;z-index:9;width:50%;right:-50%;top:-6px}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}.btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid #000;padding:5px 20px;font-size:small;text-align:center;width:100%;transition:all .2s}.btn-reload[_ngcontent-%COMP%]:hover:not([disabled]){background:#eee}.inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px;background:#fff}.inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;width:50%;padding:5px}.inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.active[_ngcontent-%COMP%]{color:#fff;transition:all .3s;background:#2361ae}.active[_ngcontent-%COMP%]:hover:not([disabled]){background:#154c90}.input-code[_ngcontent-%COMP%]{width:60px;border-radius:5px;padding:0 5px;font-size:14px;font-weight:400;text-align:center;transition:all .5s}.input-code[_ngcontent-%COMP%]:focus-visible{outline:none}.input-code[_ngcontent-%COMP%]:hover{border:1px solid #000}.active-input[_ngcontent-%COMP%]{background:#eee;color:#000}.btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding:5px 20px;width:100%;font-size:small;transition:all .3s}.btn-save[_ngcontent-%COMP%]:hover{background:#133864}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;width:100%;padding:5px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.hidden-lg[_ngcontent-%COMP%]{display:none}.box-file[_ngcontent-%COMP%]{width:50%}.box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}.box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:animatefadeIn .3s}.card-custom-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.text-error[_ngcontent-%COMP%]{color:#dc1a1a}.active-input[_ngcontent-%COMP%]{font-weight:500!important;border:1px solid #2361ae!important;transition:all .3s}.text-error[_ngcontent-%COMP%]{color:#f44336;display:block;font-style:10.5px;margin-left:14px;margin-top:-10px}.example-card[_ngcontent-%COMP%]{position:relative}.block-error-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0}.block-answer-delete[_ngcontent-%COMP%]{position:absolute;top:-10px;left:0}.error-input[_ngcontent-%COMP%]{font-weight:500!important;border:1px solid #f44336!important;transition:all .3s}.btn-hover[_ngcontent-%COMP%]:hover{background-color:#cbc8c8}.btn-accept-hover[_ngcontent-%COMP%]:hover{background-color:red}@media screen and (max-width: 768px){.btn-item[_ngcontent-%COMP%]{width:calc(12.5% - 5px)}.hidden-xs[_ngcontent-%COMP%]{display:none}.hidden-lg[_ngcontent-%COMP%]{display:block}.pb-mb-120[_ngcontent-%COMP%]{padding-bottom:120px}}@media screen and (max-width: 480px){.btn-item[_ngcontent-%COMP%]{width:calc(25% - 5px)}}@media (max-width: 992px){.order_last[_ngcontent-%COMP%]{order:13}.text-float-right[_ngcontent-%COMP%]{text-align:right!important}}";let Up=(()=>{class o extends R.Q{onFileSelected(e){this.file=e?e[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)?this.processFile():(this.file=null,this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}processFile(){this.initStatusObj(),this.subscriptions.add(this.offlineExamParserService.apiOfflineExamParserParserExcelPostForm(this.file).subscribe(e=>{var n,i,a,r,l,c,_;1==e.success?(this.answerList=null!==(a=null===(i=null===(n=e.data)||void 0===n?void 0:n.obj)||void 0===i?void 0:i.answerObjs)&&void 0!==a?a:[],this.excelErrorObjs=null!==(c=null===(l=null===(r=e.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.errorObjs)&&void 0!==c?c:[],this.excelErrorObjs.length>0&&(this.showErrorBlock=!0),this.answerList.length<=0?(this.showErrorSnack("lang_auto_vui_long_tai_dung_mau_file_excel"),this.file=null,this.form.controls.File.setValue(""),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))):this.curAnswerItem=this.answerList[0],this.successStatusObj()):this.errorStatusObj(null!==(_=e.message)&&void 0!==_?_:"")}))}changeOfflineHashId(e,n){var i,a,r;for(let c=0;c<this.answerList.length;c++)this.answerList[c].checkMatchHashId=!1;let l=e.target.value;if(this.answerList[n].offlineMixquestionHashId=l?Number(l):void 0,this.curAnswerItem=this.answerList[n],""==l.toString().trim())return this.checkValidateHashId=!0,this.answerList[n].checkValidate=!0,void this.commonService.getTranslate("lang_auto_ma_de_khong_duoc_bo_trong").subscribe(c=>{this.msgError=c});if(this.answerList[n].checkValidate=!1,this.checkValidateHashId=!1,l.toString().length>3)return this.checkValidateHashId=!0,this.answerList[n].checkValidate=!0,void this.commonService.getTranslate("lang_auto_ma_de_dai_toi_da_3_ky_tu").subscribe(c=>{this.msgError=c});if(this.answerList[n].checkValidate=!1,this.checkValidateHashId=!1,Number(l)<=0||Number(l)>999)return this.answerList[n].checkValidate=!0,this.checkValidateHashId=!0,void this.commonService.getTranslate("lang_auto_ma_de_phai_la_so_tu_1-999").subscribe(c=>{this.msgError=c});this.checkValidateHashId=!1,this.answerList[n].checkValidate=!1;for(let c=0;c<this.answerList.length;c++){for(let _=c+1;_<this.answerList.length;_++)if(this.answerList[c].offlineMixquestionHashId&&this.answerList[_].offlineMixquestionHashId){if(Number(this.answerList[c].offlineMixquestionHashId)==Number(this.answerList[_].offlineMixquestionHashId)){this.answerList[c].checkMatchHashId=!0,this.answerList[_].checkMatchHashId=!0;break}this.answerList[c].checkMatchHashId=!1,this.answerList[_].checkMatchHashId=!1}if(this.answerList[c].checkValidate)return""==(null===(i=this.answerList[c].offlineMixquestionHashId)||void 0===i?void 0:i.toString())&&this.commonService.getTranslate("lang_auto_ma_de_khong_duoc_bo_trong").subscribe(_=>{this.msgError=_}),(null!==(r=null===(a=this.answerList[c].offlineMixquestionHashId)||void 0===a?void 0:a.toString().length)&&void 0!==r?r:0)>3&&this.commonService.getTranslate("lang_auto_ma_de_dai_toi_da_3_ky_tu").subscribe(_=>{this.msgError=_}),(Number(this.answerList[c].offlineMixquestionHashId)<0||Number(this.answerList[c].offlineMixquestionHashId)>999)&&this.commonService.getTranslate("lang_auto_ma_de_phai_la_so_tu_1-999").subscribe(_=>{this.msgError=_}),void(this.checkValidateHashId=!0);if(this.checkValidateHashId=!1,this.answerList[c].checkMatchHashId)return this.checkMatchHashId=!0,void this.commonService.getTranslate("lang_auto_ma_de_thi_khong_duoc_trung_nhau").subscribe(_=>{this.msgError=_});this.checkMatchHashId=!1,this.answerList[c].checkMatchHashId=!1}!this.checkMatchHashId&&!this.checkValidateHashId&&(this.msgError="")}changeAnswerQuestion(e,n){var i;this.answerList[e].answerTexts&&(this.answerList[e].checkChangeValue=!0,this.answerList[e].indexQuestion=n,this.answerList[e].answerQuestion=null===(i=this.answerList[e].answerTexts)||void 0===i?void 0:i[n])}closeEditAnswer(e){this.answerList[e].checkChangeValue=!1,this.answerList[e].indexQuestion=-1}changeAnswer(e,n,i){this.answerList[e].answerTexts[n]=i,this.answerList[e].answerQuestion=i}removeAnswerItem(){this.dialog.open(Fp,{width:"300px",data:{item:this.curAnswerItem}}).afterClosed().subscribe(n=>{if(!0===n)for(var i=0;i<this.answerList.length;i++)this.answerList[i]==this.curAnswerItem&&(this.answerList.splice(i,1),this.chooseHashId(this.answerList.length>=1?this.answerList[0]:{},0),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}handleSaveQuestionAndExam(){var e;let n=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,i={name:this.formConfig.controls.nameExam.value,answerObjs:this.answerList,totalMark:this.formConfig.controls.totalScore.value,categoryId:n.toString(),orcLogId:-2,schoolLevelId:Number(this.form.controls.schoolLevel.value),schoolSubjectId:Number(this.form.controls.schoolSubject.value)};this.subscriptions.add(this.offlineExamCreatorService.apiOfflineExamCreatorCreateExamByAnswerDataPost(i).subscribe(a=>{var r,l,c;if(a.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");let _=`/admin/testbank/config-exam-offline/${n}/${null===(l=null===(r=a.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.hashId}`;this.myNavigation(_)}else this.showErrorSnack(null!==(c=a.message)&&void 0!==c?c:""),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}))}changeNameDownloadFile(e){return this.commonService.createFileNameExportFile([e])+".xlsx"}deleteAnswerQuestion(e,n){this.answerList[e].answerTexts.splice(n,1),this.answerList[e].checkChangeValue=!1,this.answerList[e].indexQuestion=-1,this.showSuccessSnack("lang_auto_xoa_dap_an_thanh_cong")}resetBoxFileExcel(){this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","400px",()=>{var e;this.file=null,this.answerList=[],this.form.controls.File.setValue("");let i=`/admin/testbank/create-new-document/${null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0}`;this.myNavigation(i)})}confirmDialog(e,n,i,a){this.dialog.open(ni.D,{width:i,data:{title:e,msg:n},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&a()})}chooseHashId(e,n){this.curAnswerItem=e,this.indexHashId=n}checkValidation(){this.checkValidateScore="."==this.formConfig.controls.totalScore.value.toString().charAt(0)}getGradeAndSubjectObj(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var n,i,a,r,l,c,_,d,p,h,f;if(1==e.success){this.schoolLevelObjs=null!==(i=null===(n=e.data)||void 0===n?void 0:n.schoolLevelObjs)&&void 0!==i?i:[],this.schoolSubjectObjs=null!==(r=null===(a=e.data)||void 0===a?void 0:a.schoolSubjectObjs)&&void 0!==r?r:[];let w=null!==(_=null===(c=null===(l=e.data)||void 0===l?void 0:l.examSchoolLogObj)||void 0===c?void 0:c.lastSchoolLevelId)&&void 0!==_?_:null,k=null!==(h=null===(p=null===(d=e.data)||void 0===d?void 0:d.examSchoolLogObj)||void 0===p?void 0:p.lastSchoolSubjectId)&&void 0!==h?h:null;this.formConfig.patchValue({schoolLevel:w,schoolSubject:k}),this.successStatusObj()}else this.errorStatusObj(null!==(f=e.message)&&void 0!==f?f:"")}))}ngOnInit(){var e;this.form=this.formBuilder.group({File:new m.p4("")});let n=this.commonService.myTranslateInstant("lang_auto_de_tao_tu_file_excel");this.formConfig=this.formBuilder.group({nameExam:new m.p4(n,[m.kI.required,wn._.noWhiteSpace]),totalScore:new m.p4("10",[m.kI.required]),schoolLevel:new m.p4(0,[m.kI.required]),schoolSubject:new m.p4(0,[m.kI.required])});let i=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;var a=this.commonService.getMyQueryParam("backto");this.backToLink=a??"/admin/testbank/create-new-document/"+(i??0),this.commonService.translateMetaData({title:"lang_cms_create_exam_by_excel_title",description:"lang_cms_create_exam_by_excel_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(l=>{let c=JSON.stringify(l);c!=this.prevData&&(this.prevData=c,this.form.patchValue(l))}),this.getGradeAndSubjectObj(),super.ngOnInit();const r=this.editorOutputDataService.getFirstFile();r?this.onFileSelected([r]):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}constructor(e,n,i,a,r,l,c,_,d){super(n),this.editorOutputDataService=e,this.commonService=n,this.activeRoute=i,this.dialog=a,this.documentConfigService=r,this.formBuilder=l,this.offlineExamParserService=c,this.offlineExamCreatorService=_,this.redirectService=d,this.form=new m.nJ({}),this.formConfig=new m.nJ({}),this.answerList=[],this.curAnswerItem={},this.nameExamInp=new m.p4(""),this.configAnswerData=["A","B","C","D"],this.backToLink="",this.checkMatchHashId=!1,this.checkValidateHashId=!1,this.msgError="",this.indexHashId=0,this.excelErrorObjs=[],this.checkValidateScore=!1,this.showErrorBlock=!1,this.prevData="",this.schoolLevelObjs=[],this.schoolSubjectObjs=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(pn),t.Y36(_t.v),t.Y36(C.gz),t.Y36(U.on),t.Y36(xt.Cq),t.Y36(m.QS),t.Y36(hp.L),t.Y36(jo.r),t.Y36(wo.V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-by-excel"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"headerBackTolink"],[1,"app"],["class","box-upload-file",4,"ngIf","ngIfElse"],["fileExist",""],[1,"box-upload-file"],[1,"form-horizontal","text-center","wh-100",3,"formGroup"],["azt-track-service","create-exam-by-excel-BCuBHyGiU2_","id","dropzoneAreaFrame",1,"wh-100","text-center","v-dragndrop","dropzone","dz-started","cur-po",3,"click"],["appDragDrop","",1,"px-4","py-3","rounded","box-upload","wh-100",3,"filesChangeEmiter"],[1,"file"],["id","select-upload-file",1,"align-self-center","select","dz-clickable"],["type","file","name","file","id","file","formControlName","File","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"form-control","file-input",3,"change"],["fileSelect",""],[1,"d-block","mt-20","text-dark-green","mt-2"],["azt-track-service","create-exam-by-excel-0GTkgfo3iUQ","target","_self",3,"href","download","click"],["class","box-file-content-file_preview--blur_status",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box-file-content-file_preview--blur_status"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[1,"d-flex","justify-content-center","mt-5"],["color","accent",3,"strokeWidth","diameter"],[1,"app-block","container","mt-5","pb-80","pb-mb-120","mx-auto",2,"max-width","900px"],[1,"text-lg","font-medium"],[1,"box","p-5","mt-3"],[3,"formGroup"],[1,"row"],["class","col-md-12 mb-4",4,"ngIf"],[1,"col-md-12","mb-4"],["appearance","outline"],["formControlName","nameExam","matInput",""],["class","text-danger text-xs mt-1",4,"ngIf"],["appOnlyNumber","","formControlName","totalScore","matInput","",3,"decimal","input"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],[1,"app-block-info"],[1,"grid","grid-cols-12","gap-3","items-center"],[1,"col-span-6","md:col-span-1"],[1,"block-title","mb-0"],[1,"col-span-6","md:col-span-1","pl-0","text-float-right","block","md:hidden"],["azt-track-service","create-exam-by-excel-i-DyqYR8k0v",1,"btn","btn-outline-secondary","btn-sm","btn-transparent",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"col-span-12","md:col-span-10","align-self-center","order_last"],[4,"ngFor","ngForOf"],["class","col-span-6 md:col-span-1 pl-0 text-float-right hidden md:block",4,"ngIf"],["class","text-danger text-xs mt-2 mb-0",4,"ngIf"],[1,"text-right"],["azt-track-service","create-exam-by-excel-yBLQEXokOUV",1,"btn","w-20","btn-secondary","mr-2",3,"click"],["azt-track-service","create-exam-by-excel-3bG0ORnKdPb",1,"btn","w-20","btn-primary",3,"disabled","click"],[1,"example-card"],[1,"block-error-close"],["azt-track-service","create-exam-by-excel-HGchE1J84tS","mat-icon-button","",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"clickable","text-danger"],[4,"ngIf"],[1,"text-danger","text-xs","mt-1"],["appOnlyNumber","","type","text",1,"input-code","form-control","mr-2","mt-2",3,"max","value","ngClass","focus","input"],[1,"col-span-6","md:col-span-1","pl-0","text-float-right","hidden","md:block"],["azt-track-service","create-exam-by-excel-T4w06-Ca29b",1,"btn","btn-outline-secondary","btn-sm","btn-transparent",3,"matTooltip","click"],[1,"text-danger","text-xs","mt-2","mb-0"],[1,"mt-4",3,"hidden"],["class","app-block-edit",4,"ngIf"],[1,"app-block-content"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-2 lg:col-span-1",4,"ngFor","ngForOf"],[1,"app-block-edit"],[1,"text-md","font-medium"],[1,"mt-3"],[1,"absolute","top-0","right-0","-mt-3"],["azt-track-service","create-exam-by-excel-kJiW7dJQbUP",1,"btn","btn-outline-secondary","btn-transparent",3,"matTooltip","click"],["azt-track-service","create-exam-by-excel-aVxz5qlALSu",1,"btn","rounded-full","mr-2",2,"width","40px","height","40px","line-height","40px",3,"ngClass","click"],[1,"col-span-2","lg:col-span-1"],["azt-track-service","create-exam-by-excel-_5yxsLY12vH","class","btn btn-sm btn-primary w-full",3,"click",4,"ngIf"],["azt-track-service","create-exam-by-excel-6GS41FoExBB","class","btn btn-sm btn-secondary w-full",3,"click",4,"ngIf"],["azt-track-service","create-exam-by-excel-_5yxsLY12vH",1,"btn","btn-sm","btn-primary","w-full",3,"click"],[1,"number"],["azt-track-service","create-exam-by-excel-6GS41FoExBB",1,"btn","btn-sm","btn-secondary","w-full",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.YNc(2,gp,22,16,"div",2),t.YNc(3,Dp,3,2,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const i=t.MAs(4);t.Q6J("headerBackTolink",n.backToLink),t.xp6(2),t.Q6J("ngIf",!n.file&&0==n.answerList.length)("ngIfElse",i)}},dependencies:[y.mk,y.sg,y.O5,je.eB,No.S$,No.Qi,Wt.Hw,xe.v_,xe.$V,Kn.k0,Qi.sN,Qt.Kd,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,We.Y,qo.N,Jt.M,Vt._,Nn,tt.bT,tt.Rh],styles:[Qo]}),o})(),Fp=(()=>{class o extends R.Q{constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data=i}acceptRemove(){this.dialogRef.close(!0)}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["remove-answer-dialog"]],features:[t.qOj],decls:19,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"p-3","text-right"],["azt-track-service","create-exam-by-excel-_Dq1t3t-Bte",1,"btn","btn-secondary","w-20","mr-2",3,"click"],["azt-track-service","create-exam-by-excel-v_m5vxafDqq",1,"btn","w-20","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(12,"div",10)(13,"button",11),t.NdJ("click",function(){return n.onNoClick()}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"button",12),t.NdJ("click",function(){return n.acceptRemove()}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(10),t.AsE(" ",t.lcZ(11,4,"lang_auto_ban_co_muon_xoa_ma_de_so"),": ",n.data.item.offlineMixquestionHashId," ? "),t.xp6(4),t.hij(" ",t.lcZ(15,6,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(18,8,"lang_auto_xoa")," "))},dependencies:[tt.bT],styles:[Qo]}),o})(),Rp=(()=>{class o extends R.Q{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data=i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-dialog-danger"]],features:[t.qOj],decls:14,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"w-6","h-6","mr-2","text-danger","inline-block","flex-none"],["name","trash-2"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),t._UZ(5,"lucide-icon",5),t.qZA(),t._UZ(6,"span",6),t.qZA()()(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){return n.btnCloseDialog()}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return n.confirmDialog()}),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("innerHtml",n.data.content,t.oJD),t.xp6(3),t.hij(" ",t.lcZ(10,3,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(13,5,"lang_auto_xac_nhan")," "))},dependencies:[b.Nh5,tt.bT],encapsulation:2}),o})();var ci=T(36307);function zp(o,s){1&o&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function Jp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_thang_diem")," "))}function Bp(o,s){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,Jp,3,3,"span",30),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form.controls.totalScore.errors.required)}}function Hp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ma_de")," "))}function Yp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_ma_de_phai_la_so_tu_1"),"",t.lcZ(3,4,"lang_auto_-999_va_toi_da_3_ky_tu")," "))}function Gp(o,s){if(1&o&&(t.TgZ(0,"div",28),t.YNc(1,Hp,3,3,"span",30),t.YNc(2,Yp,4,6,"span",30),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.codeExam.errors.required),t.xp6(1),t.Q6J("ngIf",e.controls.codeExam.errors.min||e.controls.codeExam.errors.max||e.controls.codeExam.errors.maxlength)}}function $p(o,s){1&o&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_khong_nhap_trung_ma_de")," "))}function Kp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_khong_qua_120_cau")," "))}function Wp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Vp(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_hoi")," "))}function Xp(o,s){if(1&o&&(t.TgZ(0,"div",28),t.YNc(1,Kp,3,3,"span",30),t.YNc(2,Wp,3,3,"span",30),t.YNc(3,Vp,3,3,"span",30),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.max),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.min),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.required)}}function th(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",58),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw().index,l=t.oxw().index,c=t.oxw().index,_=t.oxw();return t.KtG(_.chooseAnswerQuestion(c,r+l*_.colTotalItem,a))}),t._uU(2),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",n.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ",e," ")}}function eh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",52)(1,"div",53)(2,"span",54),t._uU(3),t.qZA(),t.YNc(4,th,3,2,"ng-container",55),t.TgZ(5,"button",56),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw().index,l=t.oxw().index,c=t.oxw();return t.KtG(c.deleteAnswerQuestion(l,a+r*c.colTotalItem))}),t.O4$(),t.TgZ(6,"svg",57),t._UZ(7,"path",39)(8,"path",40)(9,"path",41)(10,"line",42)(11,"line",43),t.qZA()()()()}if(2&o){const e=s.index,n=t.oxw().index,i=t.oxw(2);t.xp6(3),t.hij("",e+1+n*i.colTotalItem,"."),t.xp6(1),t.Q6J("ngForOf",i.configAnswerData)}}function nh(o,s){if(1&o&&(t.TgZ(0,"div",50),t.YNc(1,eh,12,2,"div",51),t.qZA()),2&o){const e=s.index,n=t.oxw().$implicit,i=t.oxw();let a;t.xp6(1),t.Q6J("ngForOf",null==(a=n.get("answerList"))?null:a.controls.slice(e*i.colTotalItem,e*i.colTotalItem+i.colTotalItem))}}function ih(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",5)(2,"div",32)(3,"div",33)(4,"div",34)(5,"h3",35),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"input",36),t.NdJ("input",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.checkDuplicateCode())}),t.ALo(9,"mytranslate"),t.qZA()(),t.YNc(10,Gp,3,2,"div",11),t.YNc(11,$p,4,3,"div",11),t.qZA(),t.TgZ(12,"button",37),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeItemCodeExam(a))}),t.O4$(),t.TgZ(13,"svg",38),t._UZ(14,"path",39)(15,"path",40)(16,"path",41)(17,"line",42)(18,"line",43),t.qZA()()(),t.kcU(),t.TgZ(19,"div",44)(20,"div",45)(21,"div",46),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"input",47),t.NdJ("input",function(){const i=t.CHM(e),a=i.index,r=i.$implicit,l=t.oxw();return t.KtG(l.createAnswerList(a,r.controls.totalQuestion.value,"update"))}),t.qZA()(),t.YNc(25,Xp,4,3,"div",11),t.TgZ(26,"div",19)(27,"h3",48),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t.TgZ(30,"div",6),t.YNc(31,nh,2,1,"div",49),t.qZA()()()()()()}if(2&o){const e=s.$implicit,n=t.oxw();let i,a,r;t.xp6(1),t.Q6J("formGroup",e),t.xp6(5),t.hij(" ",t.lcZ(7,10,"lang_auto_ma_de")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(9,12,"lang_auto_nhap_ma_de")+"..."),t.xp6(2),t.Q6J("ngIf",e.controls.codeExam.errors&&(e.controls.codeExam.touched||e.controls.codeExam.dirty)),t.xp6(1),t.Q6J("ngIf",n.checkDuplicateError),t.xp6(1),t.Q6J("disabled",1===(null==(i=n.form.get("codeExamList"))?null:i.controls.length)),t.xp6(10),t.hij(" ",t.lcZ(23,14,"lang_auto_nhap_so_cau")," "),t.xp6(3),t.Q6J("ngIf",e.controls.totalQuestion.errors),t.xp6(3),t.Oqu(t.lcZ(29,16,"lang_auto_bang_dap_an")),t.xp6(3),t.Q6J("ngForOf",null==(a=e.get("answerList"))?null:a.controls.slice(0,(null==(r=e.get("answerList"))?null:r.controls.length)/n.colTotalItem%1==0?(null==(r=e.get("answerList"))?null:r.controls.length)/n.colTotalItem:(null==(r=e.get("answerList"))?null:r.controls.length)/n.colTotalItem+1))}}const oh=function(o,s){return{"mt-3":o,"mt-10":s}};let ah=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c){super(e),this.commonService=e,this.activeRoute=n,this.formBuilder=i,this.offlineExamCreatorService=a,this.dialog=r,this.documentConfigService=l,this.mbService=c,this.backToLink="",this.form=new m.nJ({}),this.prevData="",this.totalQuestionNow=10,this.oldAnswerList=[],this.configAnswerData=["A","B","C","D"],this.indexQuestion=0,this.answerIndexQuestion="",this.checkEmptyAnswer=!0,this.checkValidateScore=!1,this.colTotalItem=3,this.checkDuplicateError=!1,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.form=i.group({nameExam:new m.p4("",[m.kI.required,wn._.noWhiteSpace]),totalScore:new m.p4(10,[m.kI.required]),codeExamList:i.array([]),schoolLevel:new m.p4(0,[m.kI.required]),schoolSubject:new m.p4(0,[m.kI.required])})}chooseAnswerQuestion(e,n,i){const r=this.form.get("codeExamList").controls[e].get("answerList");r.at(n).setValue({answer:i}),this.answerIndexQuestion=i,this.oldAnswerList[e]=r.value}createItemCodeExam(e){return this.formBuilder.group({codeExam:new m.p4("",[m.kI.required,m.kI.min(1),m.kI.max(999),m.kI.maxLength(3),wn._.noWhiteSpace]),totalQuestion:new m.p4(e??0,[m.kI.required,m.kI.min(1),m.kI.max(120)]),answerList:this.formBuilder.array([])})}addItemCodeExam(e){const n=this.form.get("codeExamList");n.push(this.createItemCodeExam(e)),this.createAnswerList(n.controls.length-1,e??0,"add")}removeItemCodeExam(e){const n=this.form.get("codeExamList");let i=n.controls[e],a=`${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_so_ma_de")} <b>${i.controls.codeExam.value}</b>`;this.dialog.open(Rp,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&1!==n.length&&(n.removeAt(e),this.oldAnswerList.splice(e,1),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}createItemAnswer(){return this.formBuilder.group({answer:new m.p4("",[m.kI.required])})}createAnswerList(e,n,i){var a,r,l,c,_,d;const h=this.form.get("codeExamList").controls[e].get("answerList");if(this.resetAnswerList(h),this.totalQuestionNow=n,n<=120){this.colTotalItem=Math.ceil(n/3);for(let k=0;k<n;k++)h.push(this.createItemAnswer());if(this.oldAnswerList[e]&&this.oldAnswerList[e]&&"update"==i){let k=null!==(r=null===(a=this.oldAnswerList)||void 0===a?void 0:a[e].length)&&void 0!==r?r:0;for(let S=0;S<k;S++)S<=n&&(h.value[S]=null!==(c=null===(l=this.oldAnswerList)||void 0===l?void 0:l[e][S])&&void 0!==c?c:"",h.controls[S]&&h.controls[S].setValue(null!==(d=null===(_=this.oldAnswerList)||void 0===_?void 0:_[e][S])&&void 0!==d?d:""))}}}resetAnswerList(e){for(;0!==e.length;)e.removeAt(0)}processDataAnswer(){let e=[];const n=this.form.get("codeExamList");for(let i=0;i<n.controls.length;i++){let a={answerTexts:[]};const r=n.controls[i];a.offlineMixquestionHashId=r.controls.codeExam.value;let l=r.get("answerList");for(let c=0;c<l.controls.length;c++)a.answerTexts.push(l.controls[c].controls.answer.value);e.push(a)}return e}handleSaveQuestionAndExam(){var e;if(this.form.invalid)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");let n=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,i=this.processDataAnswer(),a={name:this.form.controls.nameExam.value,answerObjs:i,totalMark:this.form.controls.totalScore.value,categoryId:n.toString(),orcLogId:-2,schoolLevelId:Number(this.form.controls.schoolLevel.value),schoolSubjectId:Number(this.form.controls.schoolSubject.value)};this.subscriptions.add(this.offlineExamCreatorService.apiOfflineExamCreatorCreateExamByAnswerDataPost(a).subscribe(r=>{var l,c,_;if(r.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");let d=`/admin/testbank/config-exam-offline/${n}/${null===(c=null===(l=r.data)||void 0===l?void 0:l.obj)||void 0===c?void 0:c.hashId}`;this.myNavigation(d)}else this.showErrorSnack(null!==(_=r.message)&&void 0!==_?_:"")}))}checkValidation(){this.checkValidateScore="."==this.form.controls.totalScore.value.toString().charAt(0)}confirmDialog(e,n,i,a){this.dialog.open(ni.D,{width:i,data:{title:e,msg:n},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&a()})}resetCreateExam(){var e;let n=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","480px",()=>{this.myNavigation(`admin/testbank/azota-editor/${n}`)})}checkDuplicateCode(){const e=this.form.get("codeExamList");for(let n=0;n<e.controls.length;n++){const i=e.controls[n];for(let a=n+1;a<e.controls.length;a++){const r=e.controls[a];if(parseInt(i.controls.codeExam.value,10)===parseInt(r.controls.codeExam.value,10)){this.checkDuplicateError=!0;break}this.checkDuplicateError=!1}}}deleteAnswerQuestion(e,n){const i=this.form.get("codeExamList"),a=i.controls[e].get("answerList");a.removeAt(n),i.controls[e].get("totalQuestion").setValue(a.controls.length),this.totalQuestionNow=a.controls.length,this.showSuccessSnack("lang_auto_xoa_dap_an_thanh_cong")}openScan(){this.mbService.sendSimpleMessage("OPEN_OFFLINE_SCAN")}getGradeAndSubjectObj(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var n,i,a,r,l,c,_,d,p,h,f;if(1==e.success){this.schoolLevelObjs=null!==(i=null===(n=e.data)||void 0===n?void 0:n.schoolLevelObjs)&&void 0!==i?i:[],this.schoolSubjectObjs=null!==(r=null===(a=e.data)||void 0===a?void 0:a.schoolSubjectObjs)&&void 0!==r?r:[];let w=null!==(_=null===(c=null===(l=e.data)||void 0===l?void 0:l.examSchoolLogObj)||void 0===c?void 0:c.lastSchoolLevelId)&&void 0!==_?_:null,k=null!==(h=null===(p=null===(d=e.data)||void 0===d?void 0:d.examSchoolLogObj)||void 0===p?void 0:p.lastSchoolSubjectId)&&void 0!==h?h:null;this.form.patchValue({schoolLevel:w,schoolSubject:k}),this.successStatusObj()}else this.errorStatusObj(null!==(f=e.message)&&void 0!==f?f:"")}))}ngOnInit(){var e,n;let i=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.backToLink=null!==(n=this.commonService.getMyQueryParam("backto"))&&void 0!==n?n:`/admin/testbank/create-new-document/${i}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"}),this.addItemCodeExam(this.totalQuestionNow),this.getGradeAndSubjectObj(),this.form.valueChanges.subscribe(a=>{let r=JSON.stringify(a);r!=this.prevData&&(this.prevData=r,this.form.patchValue(a))}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(m.QS),t.Y36(jo.r),t.Y36(U.on),t.Y36(xt.Cq),t.Y36(ci.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["create-by-hand"]],features:[t.qOj],decls:44,vars:40,consts:[[3,"headerBackTolink"],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-lg","font-medium"],[1,"box",3,"ngClass"],[1,"px-4","py-4","border-b","border-slate-200","dark:border-darkmode-400"],[3,"formGroup"],[1,"grid","grid-cols-12"],[1,"col-span-12","md:col-span-3"],["for","document-name",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],[1,"col-span-12","md:col-span-9"],["id","document-name","formControlName","nameExam","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],[1,"grid","grid-cols-12","mt-4"],["for","document-score",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","document-score","formControlName","totalScore","appOnlyNumber","","type","text",1,"form-control",3,"max","decimal","placeholder"],["class","text-xs font-medium text-danger mt-2",4,"ngIf"],[1,"mt-4"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],["class","mt-4","formArrayName","codeExamList",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","create-exam-by-hand-5qKruBeS5Vi",1,"btn","btn-success","text-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"text-white"],[1,"p-3","text-right"],[1,"btn","btn-secondary","w-20","mr-2"],["azt-track-service","create-exam-by-hand-VV_VzsR7QrJ",1,"btn","btn-primary","w-20",3,"disabled","click"],[1,"mt-2","text-xs","font-medium","text-danger"],[1,"text-xs","font-medium","text-danger","mt-2"],[4,"ngIf"],["formArrayName","codeExamList",1,"mt-4"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex","items-center"],["type","text","appOnlyNumber","","formControlName","codeExam",1,"form-control","form-control-sm","w-20","ml-2",2,"width","7rem",3,"placeholder","input"],["azt-track-service","create-exam-by-hand-ZLcxiYuHZw9",1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"p-3"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text","appOnlyNumber","","formControlName","totalQuestion",1,"form-control",3,"input"],[1,"text-md","font-medium"],["class","col-span-12 lg:col-span-4","formArrayName","answerList",4,"ngFor","ngForOf"],["formArrayName","answerList",1,"col-span-12","lg:col-span-4"],["class","app-item mt-2",4,"ngFor","ngForOf"],[1,"app-item","mt-2"],[1,"answer-item"],[1,"block-title","mr-2","inline-block",2,"width","28px"],[4,"ngFor","ngForOf"],["azt-track-service","create-exam-by-hand-X-cAXFDwUt5","mat-icon-button","",1,"btn-azt-secodary-icon","btn-delete",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["azt-track-service","create-exam-by-hand-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"width","35px","height","35px","line-height","35px",3,"ngClass","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4)(7,"form",5)(8,"div",6)(9,"div",7)(10,"label",8),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",9),t._UZ(14,"input",10),t.ALo(15,"mytranslate"),t.YNc(16,zp,4,3,"div",11),t.qZA()(),t.TgZ(17,"div",12)(18,"div",7)(19,"label",13),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()(),t.TgZ(22,"div",9),t._UZ(23,"input",14),t.ALo(24,"mytranslate"),t.YNc(25,Bp,2,1,"div",15),t.qZA()(),t.TgZ(26,"div",16),t._UZ(27,"config-level-subject",17),t.qZA(),t.YNc(28,ih,32,18,"div",18),t.TgZ(29,"div",19)(30,"button",20),t.NdJ("click",function(){return n.addItemCodeExam(n.totalQuestionNow)}),t.O4$(),t.TgZ(31,"svg",21),t._UZ(32,"line",22)(33,"line",23),t.qZA(),t.kcU(),t.TgZ(34,"span",24),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()()()()(),t.TgZ(37,"div",25)(38,"button",26),t._uU(39),t.ALo(40,"mytranslate"),t.qZA(),t.TgZ(41,"button",27),t.NdJ("click",function(){return n.handleSaveQuestionAndExam()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA()()()()()),2&e){let i;t.Q6J("headerBackTolink",n.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,21,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("ngClass",t.WLB(37,oh,!n.isMobileWebView,n.isMobileWebView)),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(4),t.hij(" ",t.lcZ(12,23,"lang_auto_ten_de")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(15,25,"lang_auto_nhap_ten_de")+" ..."),t.xp6(2),t.Q6J("ngIf",(n.form.controls.nameExam.touched||n.form.controls.nameExam.dirty)&&n.form.controls.nameExam.errors),t.xp6(4),t.hij(" ",t.lcZ(21,27,"lang_auto_thang_diem")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(24,29,"lang_auto_nhap_so_diem")+" ..."),t.Q6J("max",999)("decimal",!0),t.xp6(2),t.Q6J("ngIf",(n.form.controls.totalScore.dirty||n.form.controls.totalScore.touched)&&n.form.controls.totalScore.errors),t.xp6(2),t.Q6J("form",n.form)("schoolLevelObjs",n.schoolLevelObjs)("schoolSubjectObjs",n.schoolSubjectObjs)("typeView",1),t.xp6(1),t.Q6J("ngForOf",null==(i=n.form.get("codeExamList"))?null:i.controls),t.xp6(7),t.Oqu(t.lcZ(36,31,"lang_auto_them_ma_de")),t.xp6(4),t.hij(" ",t.lcZ(40,33,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",n.form.invalid||!n.form.controls.schoolSubject.value||!n.form.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(43,35,"lang_auto_luu")," ")}},dependencies:[y.mk,y.sg,y.O5,je.eB,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.CE,We.Y,Jt.M,Vt._,Nn,tt.bT],encapsulation:2}),o})(),sh=(()=>{class o{constructor(){this.fileDrop=new t.vpe,this.preventBodyDrop=!0,this.active=!1}onDrop(e){e.preventDefault(),this.active=!1;const{dataTransfer:n}=e;if(n?.items){const i=[];for(let a=0;a<n.items.length;a++)"file"===n.items[a].kind&&n.items[a].getAsFile()&&i.push(n.items[a].getAsFile());n.items.clear(),Array.isArray(i)&&this.fileDrop.emit(this.removeNullFile(i))}else{const i=n?.files;n?.clearData(),i&&this.fileDrop.emit(Array.from(i))}}removeNullFile(e){for(var n=[],i=0;i<e.length;i++)e[i]&&n.push(e[i]);return n}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0}onDragLeave(e){this.active=!1}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275dir=t.lG2({type:o,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(e,n){1&e&&t.NdJ("drop",function(a){return n.onDrop(a)})("dragover",function(a){return n.onDragOver(a)})("dragleave",function(a){return n.onDragLeave(a)})("dragover",function(a){return n.onBodyDragOver(a)},!1,t.pYS)("drop",function(a){return n.onBodyDrop(a)},!1,t.pYS),2&e&&t.ekj("drop-zone-active",n.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),o})();function rh(o,s){1&o&&t._UZ(0,"div",48)}let lh=(()=>{class o extends R.Q{redirectToMixBank(){this.commonService.myNavigation(`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/user/0`)}redirectToCreateExamOfflineByHand(){this.commonService.myNavigation("/admin/testbank/create-exam-by-hand/"+(null!=this.cur_cateId?this.cur_cateId:0))}redirectToBack(){this.commonService.myNavigation("/testbank")}saveAndSwitch(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigation("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}startParser(e){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(n=>{this.msgLoading=n}),this.saveAndSwitch(e)}changeFileAction(e){if(this.file=void 0,null!==e)for(let n in e)"length"!=n&&"item"!=n&&(console.log("haiau",e[n].name),(0,lt.D_)(e[n].type)||(0,lt._4)(e[n].type)||(0,lt.Or)(e[n].type)||e[n].name.toLowerCase().endsWith(".azt")?(0,lt.EO)(e[n].size)<=200?(this.file=e[n],this.isChooseFile=!0):this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb"):this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"));this.file&&(this.getFileIcon(),this.startParser(this.file))}onDrop(e){try{this.changeFileAction(e)}catch(n){alert(n)}}getFileIcon(){var e,n,i,a;const r=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];this.file&&((0,lt.D_)(null!==(e=this.file.type)&&void 0!==e?e:"")&&!r.includes(null!==(n=this.file.type)&&void 0!==n?n:"")?this.fileIcon="azota_assets/images/word-icon.png":(0,lt._4)(null!==(i=this.file.type)&&void 0!==i?i:"")?this.fileIcon="azota_assets/images/pdf-icon.png":(0,lt.Or)(null!==(a=this.file.type)&&void 0!==a?a:"")?this.fileIcon="azota_assets/images/jpg-icon.png":this.file.type&&r.includes(this.file.type)&&(this.fileIcon="azota_assets/images/excel.png")),this.fileIcon="azota_assets/images/documents.png"}beforeOpenEditor(e="editor"){this.editorOutputDataService.setMode(e),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink="/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.form=this.fb.group({file:new m.p4("",m.kI.required)})}),this.commonService.translateMetaData({title:"lang_cms_test_create_new_title",description:"lang_cms_test_create_new_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,n,i,a){super(i),this.fb=e,this.activeRoute=n,this.commonService=i,this.editorOutputDataService=a,this.cur_cateId=0,this.backToLink="",this.isChooseFile=!1,this.form=new m.nJ({}),this.isFollowLibParser=!1,this.fileParser=new Y.uD,this.isInitConf=!1,this.fileIcon="",this.msgLoading="",this.selectFile=r=>{let _=r.target.files;try{this.changeFileAction(_)}catch(d){alert(d)}}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.QS),t.Y36(C.gz),t.Y36(_t.v),t.Y36(pn))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-new-document"]],features:[t.qOj],decls:115,vars:85,consts:[[3,"headerBackTolink"],[1,"intro-y","flex","items-center","mt-5"],[1,"text-lg","font-medium","mr-auto"],[1,"intro-y","chat","grid","grid-cols-12","gap-5","mt-5"],[1,"intro-y","col-span-12","lg:col-span-8","2xl:col-span-9"],[3,"formGroup","hidden"],["type","file","id","box-left-file-input","formControlName","file",1,"form-control","file-input",3,"change"],["fileSelect",""],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5",3,"appDropZone","click"],[1,"h-full","flex","items-center"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-16","h-16","text-primary"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-UKkYIsGtv6","target","_blank",1,"text-primary",3,"href","download","click"],["azt-track-service","create-new-document-vhnFs0qasd","target","_self",1,"text-primary",3,"href","download","click"],["azt-track-service","create-new-document-cqAKCAso3Z","target","_self",1,"text-primary",3,"href","download","click"],["role","alert",1,"alert","alert-secondary-soft","mt-3","p-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-circle","data-lucide","alert-circle",1,"lucide","lucide-alert-circle","w-6","h-6","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"col-span-12","lg:col-span-4","2xl:col-span-3"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane"],[1,"pr-1"],["azt-track-service","create-new-document-eWSFP-ZUFW",1,"box","px-5","py-10","zoom-in",3,"click"],[1,"w-12","h-12","flex-none","image-fit","overflow-hidden","mx-auto"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-pending"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"text-center","mt-3"],[1,"font-medium","text-lg"],[1,"text-slate-500","text-xs","mt-2"],["azt-track-service","create-new-document-hV1kydIYef","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tu-soan-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-KJvjOB4efQ",1,"box","px-5","py-10","mt-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-success"],["d","M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"],["azt-track-service","create-new-document-nIicv9MPu1","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-PDK9L9LPGj",1,"box","px-5","py-10","mt-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-warning"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["class","loading",4,"ngIf"],[1,"loading"]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"form",5)(8,"input",6,7),t.NdJ("change",function(r){return n.selectFile(r)}),t.qZA()(),t.TgZ(10,"div",8),t.NdJ("appDropZone",function(r){return n.onDrop(r)})("click",function(){t.CHM(i);const r=t.MAs(9);return t.KtG(r.click())}),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11),t.O4$(),t.TgZ(14,"svg",12),t._UZ(15,"path",13)(16,"path",14),t.qZA()(),t.kcU(),t.TgZ(17,"div",15)(18,"div",16),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"div",17),t._uU(22),t.ALo(23,"mytranslate"),t._UZ(24,"br"),t._uU(25),t.ALo(26,"mytranslate"),t.TgZ(27,"b"),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t._uU(30,", "),t.TgZ(31,"b"),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t._uU(34),t.ALo(35,"mytranslate"),t.TgZ(36,"b"),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t._uU(39),t.ALo(40,"mytranslate"),t.TgZ(41,"a",18),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA(),t.TgZ(44,"div",19)(45,"a",20),t.NdJ("click",function(r){return r.stopPropagation()}),t.ALo(46,"convertCdnLinkOfGitHubWithLocale"),t.ALo(47,"mytranslate"),t._uU(48),t.ALo(49,"mytranslate"),t.qZA(),t._uU(50,"\xa0|\xa0 "),t.TgZ(51,"a",21),t.NdJ("click",function(r){return r.stopPropagation()}),t.ALo(52,"convertRawLinkOfGitHubWithLocale"),t.ALo(53,"mytranslate"),t._uU(54),t.ALo(55,"mytranslate"),t.qZA(),t._uU(56,"\xa0|\xa0 "),t.TgZ(57,"a",22),t.NdJ("click",function(r){return r.stopPropagation()}),t.ALo(58,"convertRawLinkOfGitHubWithLocale"),t.ALo(59,"mytranslate"),t._uU(60),t.ALo(61,"mytranslate"),t.qZA()()()(),t.TgZ(62,"div",23),t.O4$(),t.TgZ(63,"svg",24),t._UZ(64,"circle",25)(65,"line",26)(66,"line",27),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.kcU(),t.TgZ(69,"b"),t._uU(70,".docx"),t.qZA(),t._uU(71,". "),t.qZA()()()()(),t.TgZ(72,"div",28)(73,"div",29)(74,"div",30)(75,"div",31),t.NdJ("click",function(){return n.beforeOpenEditor()}),t.TgZ(76,"div",32),t.O4$(),t.TgZ(77,"svg",33),t._UZ(78,"path",34)(79,"path",35),t.qZA()(),t.kcU(),t.TgZ(80,"div",36)(81,"div",37),t._uU(82),t.ALo(83,"mytranslate"),t.qZA()()(),t.TgZ(84,"div",38)(85,"span"),t._uU(86),t.ALo(87,"mytranslate"),t.qZA(),t.TgZ(88,"a",39),t._uU(89),t.ALo(90,"mytranslate"),t.qZA()(),t.TgZ(91,"div",40),t.NdJ("click",function(){return n.redirectToMixBank()}),t.TgZ(92,"div",32),t.O4$(),t.TgZ(93,"svg",41),t._UZ(94,"path",42),t.qZA()(),t.kcU(),t.TgZ(95,"div",36)(96,"div",37),t._uU(97),t.ALo(98,"mytranslate"),t.qZA()()(),t.TgZ(99,"div",38)(100,"span"),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"a",43),t._uU(104),t.ALo(105,"mytranslate"),t.qZA()(),t.TgZ(106,"div",44),t.NdJ("click",function(){return n.redirectToCreateExamOfflineByHand()}),t.TgZ(107,"div",32),t.O4$(),t.TgZ(108,"svg",45),t._UZ(109,"path",46),t.qZA()(),t.kcU(),t.TgZ(110,"div",36)(111,"div",37),t._uU(112),t.ALo(113,"mytranslate"),t.qZA()()()()()()(),t.YNc(114,rh,1,0,"div",47),t.qZA()}2&e&&(t.Q6J("headerBackTolink",n.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,31,"lang_auto_tao_de_moi")," "),t.xp6(4),t.Q6J("formGroup",n.form)("hidden",!0),t.xp6(12),t.Oqu(t.lcZ(20,33,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),t.xp6(3),t.hij(" ",t.lcZ(23,35,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),t.xp6(3),t.hij("",t.lcZ(26,37,"lang_auto_can_upload")," "),t.xp6(3),t.Oqu(t.lcZ(29,39,"lang_auto_bai_tap")),t.xp6(4),t.Oqu(t.lcZ(33,41,"lang_auto_de_thi")),t.xp6(2),t.hij(" ",t.lcZ(35,43,"lang_auto_hoac")," "),t.xp6(3),t.Oqu(t.lcZ(38,45,"lang_auto_bang_dap_an")),t.xp6(2),t.hij(" ",t.lcZ(40,47,"lang_auto_de_cham_offline"),". "),t.xp6(3),t.hij(" ",t.lcZ(43,49,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.s9C("download",t.lcZ(47,53,"lang_testbank_create_document_azota_pdf_model")),t.Q6J("href",t.lcZ(46,51,"azota_assets/medias_[LANG]/de_mau_azota.zip"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(49,55,"lang_testbank_create_document_azota_pdf_model")),t.xp6(3),t.s9C("download",t.lcZ(53,59,"lang_testbank_create_document_azota_docx_model")),t.Q6J("href",t.lcZ(52,57,"blob/master/azota_assets/medias_[LANG]/de_mau_azota.docx?raw=true"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(55,61,"lang_testbank_create_document_azota_docx_model")),t.xp6(3),t.s9C("download",t.lcZ(59,65,"lang_testbank_create_document_azota_excel_model")),t.Q6J("href",t.lcZ(58,63,"blob/master/azota_assets/medias_[LANG]/de_mau_azota_excel.xlsx?raw=true"),t.LSH),t.xp6(3),t.Oqu(t.lcZ(61,67,"lang_testbank_create_document_azota_excel_model")),t.xp6(7),t.hij(" ",t.lcZ(68,69,"lang_auto_azota_best_support_file_type")+" "," "),t.xp6(15),t.hij(" ",t.lcZ(83,71,"lang_auto_tu_soan_de_tren_azota")," "),t.xp6(4),t.hij("",t.lcZ(87,73,"lang_auto_su_dung_trinh_soan_thao_de_cua_azota_chinh_sua_tu_cac_mau_co_san_hoac_copy_and_paste_tu_cac_nguon_khac_nhau"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(90,75,"lang_auto_tim_hieu_them")),t.xp6(8),t.hij(" ",t.lcZ(98,77,"lang_auto_tao_ma_tran_de_thi")," "),t.xp6(4),t.hij("",t.lcZ(102,79,"lang_auto_azota_se_sinh_ngau_nhien_de_moi_tu_cac_chuyen_de_so_luong_cau_trong_moi_chuyen_de_cac_muc_do_kho_de_ma_nguoi_dung_lua_chon"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(105,81,"lang_auto_tim_hieu_them")),t.xp6(8),t.hij(" ",t.lcZ(113,83,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("ngIf",n.isFollowLibParser))},dependencies:[y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,Jt.M,Vt._,sh,tt.bT,tt.y,tt.Rh],encapsulation:2}),o})();var Do=T(50727);function ch(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function _h(o,s){if(1&o&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"h3",8),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",10),t.TgZ(11,"a",11),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"polyline",14)(15,"line",15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,5,"lang_testbank_create_wibsite_result_header_title")," \u{1f389} "),t.xp6(4),t.hij(" ",t.lcZ(8,7,"lang_testbank_create_wibsite_result_address")," "),t.xp6(3),t.s9C("value",e.linkExerciseExist),t.xp6(1),t.Q6J("href",e.linkExerciseExist,t.LSH),t.xp6(5),t.hij(" ",t.lcZ(17,9,"lang_testbank_create_wibsite_result_Access")," ")}}let dh=(()=>{class o extends R.Q{getExamDataById(){this.status_obj={loading:!0,error:!1},this.subscriptions.add(this.examService.apiExamGetWebsiteInfoGet().subscribe(e=>{var n,i,a,r;1==e.success?(this.obj=null===(n=e.data)||void 0===n?void 0:n.obj,this.linkExerciseExist=`${null===(a=null===(i=e.data)||void 0===i?void 0:i.obj)||void 0===a?void 0:a.value}`,this.status_obj={loading:!1,error:!1}):(this.showErrorSnack(null!==(r=e.message)&&void 0!==r?r:""),this.status_obj={loading:!1,error:!0})}))}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getExamDataById(),this.backToLink="/admin/testbank/create-website"}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_result_title",description:"lang_cms_test_create_website_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,n,i){super(n),this.activeRoute=e,this.commonService=n,this.examService=i,this.subscriptions=new Do.w0,this.status_obj={loading:!1,error:!1},this.linkExerciseExist="",this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.gz),t.Y36(_t.v),t.Y36(xt.Oe))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-website-result"]],features:[t.qOj],decls:6,vars:6,consts:[[3,"headerTitle","headerBackTolink"],[1,"py-5","mt-8"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],[1,"azt-copy","relative","mt-3","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","create-website-result-F_Qjh-7fxPs","target","_blank",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1),t.YNc(3,ch,1,0,"azt-loading-effect",2),t.YNc(4,_h,18,11,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const i=t.MAs(5);t.Q6J("headerTitle",t.lcZ(1,4,"lang_testbank_create_wibsite_result_header_title"))("headerBackTolink",n.backToLink),t.xp6(3),t.Q6J("ngIf",n.status_obj.loading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q,Vt._,tt.bT],styles:[".content-box[_ngcontent-%COMP%]{border-width:0px;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dcdcdc;border-radius:4px;box-shadow:none}.click-to-href[_ngcontent-%COMP%], .click-to-href[_ngcontent-%COMP%]:hover{color:#5f5f5f!important}@media only screen and (max-width: 992px){.box[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 768px){.box[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 576px){.box[_ngcontent-%COMP%]{width:90%}}@media only screen and (max-width: 380px){.box[_ngcontent-%COMP%]{width:95%}}"]}),o})();function uh(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function mh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleRunSriptIframe())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",53)(3,"path",54),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_buttom_edit")," "))}function ph(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleCancelEdit())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",56)(3,"polyline",57)(4,"line",58)(5,"line",59),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_buttom_cancel")," "))}function hh(o,s){1&o&&(t.TgZ(0,"div",60),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()),2&o&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function gh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleRunSriptIframe())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_buttom_edit")))}function fh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleCancelEdit())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_buttom_cancel")))}function xh(o,s){1&o&&(t.TgZ(0,"div",66),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&o&&(t.xp6(6),t.hij("",t.lcZ(7,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function vh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",9)(9,"h3",10)(10,"button",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"mat-menu",null,12)(15,"div",13)(16,"div",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickTemplate("templateExample"))}),t.TgZ(17,"div",15),t._UZ(18,"img",16),t.ALo(19,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(20,"h4"),t._uU(21,"Landing Teacher"),t.qZA()()()()()()(),t.TgZ(22,"div",17)(23,"div",18)(24,"div",19)(25,"button",20),t.O4$(),t.TgZ(26,"svg",21),t._UZ(27,"line",22)(28,"line",23)(29,"line",24),t.qZA()(),t.kcU(),t.TgZ(30,"mat-menu",null,25)(32,"div",26)(33,"ul",27)(34,"li"),t.YNc(35,mh,6,3,"button",28),t.qZA(),t.TgZ(36,"li"),t.YNc(37,ph,8,3,"button",29),t.qZA(),t.TgZ(38,"li"),t._UZ(39,"hr",30),t.qZA(),t.TgZ(40,"li")(41,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSaveTemplate())}),t.O4$(),t.TgZ(42,"svg",32),t._UZ(43,"path",33)(44,"polyline",34)(45,"polyline",35),t.qZA(),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()()()()()()(),t.kcU(),t.TgZ(48,"div",36)(49,"div",37),t.YNc(50,hh,7,3,"div",38),t.YNc(51,gh,3,3,"a",39),t.TgZ(52,"a",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleSaveTemplate())}),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.YNc(55,fh,3,3,"a",41),t.qZA()()(),t.TgZ(56,"div",42),t.YNc(57,xh,8,3,"div",43),t.qZA()(),t.TgZ(58,"div",44)(59,"div",45)(60,"div",46)(61,"div",47)(62,"div",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleClickTemplate("templateExample"))}),t.TgZ(63,"div",15),t._UZ(64,"img",16),t.ALo(65,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(66,"h4"),t._uU(67,"Landing Teacher"),t.qZA()()()()(),t.TgZ(68,"div",49)(69,"div",50),t._UZ(70,"iframe",51),t.ALo(71,"safe"),t.qZA()()()()}if(2&o){const e=t.MAs(14),n=t.MAs(31),i=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,21,"lang_testbank_create_wibsite_Sampling")),t.xp6(4),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(12,23,"lang_testbank_create_wibsite_Sampling")," "),t.xp6(5),t.Gre("template-item ","templateExample"==i.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(19,25,"azota_assets/templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(7),t.Q6J("matMenuTriggerFor",n),t.xp6(10),t.Q6J("ngIf",!i.isEditable),t.xp6(2),t.Q6J("ngIf",i.isEditable),t.xp6(9),t.hij(" ",t.lcZ(47,27,"lang_buttom_save")," "),t.xp6(4),t.Q6J("ngIf",i.isEditable),t.xp6(1),t.Q6J("ngIf",!i.isEditable),t.xp6(2),t.Oqu(t.lcZ(54,29,"lang_buttom_save")),t.xp6(2),t.Q6J("ngIf",i.isEditable),t.xp6(2),t.Q6J("ngIf",i.isEditable),t.xp6(5),t.Gre("template-item ","templateExample"==i.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(65,31,"azota_assets/templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(6),t.Q6J("src",t.lcZ(71,33,i.iframeSrc),t.uOi)}}let bh=(()=>{class o extends R.Q{handleClickTemplate(e){this.iframeSrc="/assets/templates/"+e+"/index.html",this.templateName=e}handleCancelEdit(){this.isEditable=!1,window.location.reload()}handleRunSriptIframe(){this.isEditable=!0;const e=document.getElementById("template-iframe"),n=e?e.contentWindow:null;n&&n.eval(`\n        // *** INSERT THE SCRIPT TAG TO HEAD ***\n        // ---------------------------------------\n        var scriptExist=document.getElementById('ladi');\n        if(!scriptExist){console.log('Script Exist');\n        var script=document.createElement('script');\n        var att=document.createAttribute('src');\n        var attId=document.createAttribute('id');\n        att.value='${this.cdnService.convertCdnLinkOfGitHub("azota_assets/templates/common/ladipage.v3.js")}';\n        attId.value='ladi'; script.setAttributeNode(att);\n        script.setAttributeNode(attId);\n\n        document.head.appendChild(script);}\n        `)}getWebsiteUrl(){this.initStatusObj(),this.subscriptions.add(this.usersettingService.apiUsersettingGetMyDomainGet().subscribe(e=>{var n,i,a;1==e.success?(null!==(n=e.data)&&void 0!==n&&n.obj&&null!==(i=e.data)&&void 0!==i&&i.obj.value?(this.websiteUrl=e.data.obj.value,this.websiteUrl=this.websiteUrl):this.websiteUrl=this.commonService.getLocalRouter(this.commonService.getHostUrl()+"/en/test/category/"+this.baseApiService.getUserObj().id+"/0/1"),this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"",!0)}))}handleSaveTemplate(){const e=document.getElementById("template-iframe"),n=e?e.contentWindow:null;if(n){n.eval("\n        // *** REMOVE LADI JS SCRIPT TAG ***\n        // ---------------------------------\n        const myScript = document.getElementById('ladi');\n        if(myScript){myScript.remove();}\n\n        // *** REMOVE INPUT FILE TAG  ***\n        // ------------------------------\n        var inputFiles = document.querySelectorAll('.tpl-input-file');\n        inputFiles.forEach(input=>{jQuery(input).unwrap(); input.remove();});\n\n        // *** REMOVE demo test iframe  ***\n        var demoTestIMG = document.getElementById('demo_test_iframe');\n        if(demoTestIMG){demoTestIMG.remove();}\n        \n        // *** CHANGE ALL CONTENTEDITABLE TO FALSE ***\n        // -------------------------------------------\n        var editables=document.querySelectorAll('[contentEditable=true]');\n        editables.forEach(e=>{e.setAttribute('contentEditable','false');});\n        "),this.isLoading=!0;var i=n.document.body.outerHTML;this.apiUploadService.commonUploadLadipageFile(i,this.templateName,i.length).subscribe(a=>{var r,l,c;a.type!=H.dt.UploadProgress&&(1==a.success&&null!==(r=a?.data)&&void 0!==r&&r.url?this.usersettingService.apiUsersettingSaveMyDomainPost({path:null!==(c=null===(l=a?.data)||void 0===l?void 0:l.url)&&void 0!==c?c:""}).subscribe(_=>{1==_.success?this.commonService.myNavigation("/admin/testbank/create-website-result"):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong"))}):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong")))})}}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink="/admin/dashboard",this.getWebsiteUrl()}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_title",description:"lang_cms_test_create_website_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,n,i,a,r,l,c){super(r),this.usersettingService=e,this.http=n,this.cdnService=i,this.activeRoute=a,this.commonService=r,this.baseApiService=l,this.apiUploadService=c,this.subscriptions=new Do.w0,this.isLoading=!1,this.isEditable=!1,this.templateName="templateExample",this.iframeSrc="/assets/templates/"+this.templateName+"/index.html",this.websiteUrl="",this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(xt.nb),t.Y36(H.eN),t.Y36(Dt.U),t.Y36(C.gz),t.Y36(_t.v),t.Y36(Fe._),t.Y36(mn.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-website"]],features:[t.qOj],decls:5,vars:6,consts:[[3,"headerTitle","headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-builder","container-fluid","mt-3","pb-mb-80"],[1,"grid","grid-cols-12","gap-3","button-row","justify-between","mb-4"],[1,"col-span-4",2,"align-self","center"],[1,"button-bar","mb-0"],[1,"azt-hidden","lg:block"],[1,"text-md","font-medium",2,"padding-top","10px","padding-left","10px"],[1,"block","xl:hidden"],[1,"text-md","font-medium"],[1,"btn","btn-secondary",3,"matMenuTriggerFor"],["choose","matMenu"],[1,"box","dialog-landing"],["azt-track-service","create-website-m7o0z0tNGZ",3,"click"],[1,"tpl-avatar"],["alt","",3,"src"],[1,"col-span-8","pt-0","pb-0","text-right","w-full"],[1,"flex","justify-end","sm:hidden"],[1,"button-bar","flex","justify-end"],[1,"btn","btn-outline-secondary",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["reorder","matMenu"],[1,"dropdown-menu","w-56","show","relative","p-3"],[1,"dropdown-content"],["azt-track-service","create-website-KcLlwJbhLJ","class","dropdown-item w-full",3,"click",4,"ngIf"],["azt-track-service","create-website-hPK4dUWUNk","class","dropdown-item w-full",3,"click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","create-website-kAw_1A0pwF",1,"dropdown-item","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"azt-hidden","sm:block"],[1,"button-bar","justify-end"],["class","alert alert-info mr-3 mb-0 items-center flex p-2",4,"ngIf"],["azt-track-service","create-website-5leCyaUy9M","class","btn btn-secondary mr-2 w-20",3,"click",4,"ngIf"],["azt-track-service","create-website-JeQ8h6dSA5",1,"btn","btn-primary","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU","class","btn btn-secondary ml-2 w-20",3,"click",4,"ngIf"],[1,"col-span-12","block","sm:hidden"],["class","alert alert-info mr-1 mb-0 items-center flex text-left p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","content-row"],[1,"col-span-2","hidden","lg:block"],[1,"list-template"],[1,"wrap-layer"],["azt-track-service","create-website-bnKcSD98XWU",3,"click"],[1,"col","col-span-12","sm:col-span-12","md:col-span-10"],[1,"wrap-layer","w-full"],["id","template-iframe","frameborder","0",2,"width","100%","height","100%",3,"src"],["azt-track-service","create-website-KcLlwJbhLJ",1,"dropdown-item","w-full",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","create-website-hPK4dUWUNk",1,"dropdown-item","w-full",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","9.5","y1","12.5","x2","14.5","y2","17.5"],["x1","14.5","y1","12.5","x2","9.5","y2","17.5"],[1,"alert","alert-info","mr-3","mb-0","items-center","flex","p-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","create-website-5leCyaUy9M",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU",1,"btn","btn-secondary","ml-2","w-20",3,"click"],[1,"alert","alert-info","mr-1","mb-0","items-center","flex","text-left","p-2"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,uh,1,0,"azt-loading-effect",1),t.YNc(3,vh,72,35,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(4);t.Q6J("headerTitle",t.lcZ(1,4,"lang_testbank_create_wibsite_header_title"))("headerBackTolink","/admin/dashboard"),t.xp6(2),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,Ft.W0,Ft.D8,zt.Q,Vt._,tt.bT,tt.yl,tt.Jc],styles:[".container-builder[_ngcontent-%COMP%]{height:calc(100vh - 72px);overflow:hidden;display:flex;flex-direction:column}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;height:38px;display:flex;justify-content:center;align-items:center}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{background:white;padding:15px;flex:auto;border:1px solid #ececec;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   #template-iframe[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:15px;border:1px solid #ccc;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]{padding-right:0}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{overflow-y:auto}.container-builder[_ngcontent-%COMP%]   .list-template[_ngcontent-%COMP%]{height:100%}.button-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.button-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:auto;margin-bottom:0;text-align:center}.template-item[_ngcontent-%COMP%]:hover{cursor:pointer}.template-item[_ngcontent-%COMP%]:hover   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]{width:100%;height:0;padding-top:66.6666666667%;position:relative;overflow:hidden}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:auto;width:100%;top:0;left:0;transition:all .5s}.template-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-top:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999999;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#414141}.dialog-landing[_ngcontent-%COMP%]{width:280px;padding:20px}"]}),o})();function wh(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Th(o,s){1&o&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const Ch=function(o){return[o]},kh=function(o){return{backto:o}};function Oh(o,s){if(1&o&&(t.TgZ(0,"div",24)(1,"a",25),t.ALo(2,"localize"),t._UZ(3,"azt-file-item",26),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw(3);let i;t.xp6(1),t.Q6J("routerLink",t.lcZ(2,5,t.VKq(7,Ch,"exam"==e.type?"/admin/testbank/exam-results-list/"+(null!==(i=null==e.exam?null:e.exam.categoryId)&&void 0!==i?i:0)+"/"+(null==e.exam?null:e.exam.id)+"/0":"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(9,kh,"/admin/testbank/all-documents-in-class/"+n.classroomId+"/"+n.cur_page)),t.xp6(2),t.Q6J("dataObj",e)("showByClass",!0)("viewType","classroom")}}const yh=function(){return["name"]};function Ah(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",22),t.YNc(2,Oh,4,11,"div",23),t.ALo(3,"appFilter"),t.qZA()()),2&o){const e=t.oxw(2);let n;t.xp6(2),t.Q6J("ngForOf",t.Dn7(3,1,e.documentData,null==(n=e.form.get("searchContent"))?null:n.value,t.DdM(5,yh)))}}function Sh(o,s){1&o&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_homework_homework_list_not_found")," "))}function Zh(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"a",6),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,Th,3,3,"span",7),t.ALo(6,"fullPermission"),t.qZA(),t.TgZ(7,"div",8)(8,"form",9),t.O4$(),t.TgZ(9,"svg",10),t._UZ(10,"circle",11)(11,"line",12),t.qZA(),t.kcU(),t._UZ(12,"input",13),t.ALo(13,"mytranslate"),t.qZA()()(),t.TgZ(14,"div",14),t.YNc(15,Ah,4,6,"div",2),t.YNc(16,Sh,3,3,"ng-template",null,15,t.W1O),t.qZA()(),t.TgZ(18,"div",16)(19,"div",17)(20,"azt-paging",18),t.NdJ("SendPage",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.goToPage(i))}),t.qZA()(),t.TgZ(21,"div",19)(22,"p",20),t._uU(23),t.ALo(24,"number"),t.ALo(25,"mytranslate"),t.qZA()()()}if(2&o){const e=t.MAs(17),n=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,9,n.classroomObj.name)," "),t.xp6(2),t.Q6J("ngIf",!t.xi3(6,11,n.classroomObj.permissionObj,"classroom")),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(4),t.s9C("placeholder",t.lcZ(13,14,"lang_homework_homework_list_search")),t.xp6(3),t.Q6J("ngIf",n.documentData.length>0)("ngIfElse",e),t.xp6(5),t.Q6J("lengthPage",n.total_page)("paging",n.cur_page),t.xp6(3),t.Oqu(t.lcZ(24,16,n.totalDocument)+" "+t.lcZ(25,18,"lang_testbank_test_list_document"))}}let Eh=(()=>{class o extends R.Q{getClassroomName(e){var n=[];return e.forEach(i=>{i.name&&!this.commonService.filterArray(n,i.name)&&n.push(i.name)}),n}convertIAztTestbankDocumentRecommendData(e){var n=[];return e.forEach(i=>{var a;if(i.exam){var r={id:i.exam.id,hashId:i.exam.hashId,name:i.exam.name,deadline:i.exam.endTime,type:"exam",createdAt:i.exam.createdAt,submited:i.exam.attended,delivery:this.getClassroomName(null!==(a=i.exam.classrooms)&&void 0!==a?a:[]),exam:i.exam};n.push(r)}else i.homework&&(r={id:i.homework.id,hashId:i.homework.hashId,classroomId:i.homework.classroomId,name:i.homework.name,type:"homework",createdAt:i.homework.createdAt,deadline:i.homework.deadline,submited:i.homework.count,total:i.homework.totalStudent,delivery:i.homework.className?[i.homework.className]:new Array,homework:i.homework},n.push(r))}),n}goToPage(e){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+this.classroomId+"/"+e,"?backto="+this.backToLink)}getClassroomObj(){this.subscriptions.add(this.classroomService.apiClassroomGetObjGet(this.classroomId).subscribe(e=>{var n,i,a;1==e.success?(this.classroomObj=null!==(i=null===(n=e.data)||void 0===n?void 0:n.obj)&&void 0!==i?i:{},this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"",!0)}))}getData(){this.initStatusObj(),this.subscriptions.add(this.documentService.apiDocumentsGet(void 0,"file",void 0,"homework",this.classroomId,void 0,this.cur_page).subscribe(e=>{var n,i,a,r,l,c,_;if(1==e.success){this.documentData=this.convertIAztTestbankDocumentRecommendData(null!==(i=null===(n=e.data)||void 0===n?void 0:n.documentObjs)&&void 0!==i?i:[]),this.totalDocument=null!==(r=null===(a=e.data)||void 0===a?void 0:a.totalDocument)&&void 0!==r?r:0,this.totalObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.total)&&void 0!==c?c:0,this.total_page=this.totalObjs%this.item_per_page_admin>0?(this.totalObjs-this.totalObjs%this.item_per_page_admin)/this.item_per_page_admin+1:this.totalObjs>0?this.totalObjs/this.item_per_page_admin:1,-1==this.classroomId&&(this.total_page=this.totalDocument%this.item_per_page_admin>0?(this.totalDocument-this.totalDocument%this.item_per_page_admin)/this.item_per_page_admin+1:this.totalDocument>0?this.totalDocument/this.item_per_page_admin:1),this.start_page=this.cur_page-this.limit_page>=1?this.cur_page-this.limit_page:1,this.end_page=this.start_page+2*this.limit_page>this.total_page?this.total_page:this.start_page+2*this.limit_page;for(var d=[],p=this.start_page;p<=this.end_page;p++)d.push(p);if(this.show_pages=d,this.classroomId>0)this.getClassroomObj();else{let h=this.commonService.myTranslateInstant("lang_auto_tu_do");this.classroomObj={id:this.classroomId,name:h},this.successStatusObj()}}else this.errorStatusObj(null!==(_=e.message)&&void 0!==_?_:"",!0)}))}ngOnInit(){this.form=this.fb.group({searchContent:new m.p4("",m.kI.required)}),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"/admin/testbank/document-management/1/0/1",this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"classroom_id")),this.cur_page=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.getData()}),this.commonService.translateMetaData({title:"lang_cms_all_document_class_title",description:"lang_cms_all_document_class_description",image:""}),super.ngOnInit()}constructor(e,n,i,a,r){super(e),this.commonService=e,this.activeRoute=n,this.documentService=i,this.fb=a,this.classroomService=r,this.form=new m.nJ({}),this.backToLink="",this.classroomId=0,this.classroomObj={},this.documentData=[],this.totalDocument=0,this.totalObjs=1,this.item_per_page_admin=24,this.cur_page=1,this.start_page=1,this.end_page=1,this.total_page=1,this.limit_page=5,this.show_pages=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(xt.Zg),t.Y36(m.QS),t.Y36(xt.um))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-all-document-class"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"headerBackTolink"],[1,"mb-2","mt-3"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box",2,"min-height","300px"],[1,"flex","lg:items-center","flex-col","lg:flex-row","p-5","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"font-medium","truncate","text-md","mr-2"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-0","lg:ml-auto","relative","mt-2","lg:mt-0","mr-2"],[3,"formGroup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","absolute","my-auto","inset-y-0","ml-3","left-0","z-10","text-slate-500"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","formControlName","searchContent",1,"form-control","w-full","sm:w-72","box","px-10","bg-slate-200","dark:bg-darkmode-400",3,"placeholder"],[1,"p-5"],["noDocumentData",""],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"text-right","mt-2"],[1,"text-md"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-5"],["class","col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-3 intro-y",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","xl:col-span-4","2xl:col-span-3","intro-y"],["azt-track-service","all-document-class-KetDqkKFvjH",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-5","text-center"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.YNc(2,wh,1,0,"azt-loading-effect",2),t.YNc(3,Zh,26,20,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const i=t.MAs(4);t.Q6J("headerBackTolink",n.backToLink),t.xp6(2),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[C.rH,y.sg,y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,zt.Q,ri.L,Jt.M,ji,Vt._,y.JJ,Xn.lO,tt.bT,tt.gB,tt.Gf],encapsulation:2}),o})();var Ze=T(10261),kn=T(86317),Yi=T(91153),xn=T(72201),Ve=T(35191),_i=T(61886),Uo=T(88974),di=T(11526);let Fo=(()=>{class o{getDefaultFilterObj(){var e,n=this._getInitFilterObj(),i=this.commonService.castJsonToObj(null!==(e=this.browserStorageService.getSimpleStorage(this.localStorageSlug))&&void 0!==e?e:"");return i&&(n=i),n}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var n=0;for(var i in e)!0===e[i]&&(n+=1);return n}_getInitFilterObj(){return{isMarked:!1,isNotMarked:!1,isOnTest:!1,isNotSubmit:!1,isNotTested:!1}}constructor(e,n){this.commonService=e,this.browserStorageService=n,this.totalCustomFilter=0,this.localStorageSlug="testbank_exam_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_t.v),t.LFG(Le.z))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Ih=T(84817),Ro=T(68272),Ne=T(23267);function Mh(o,s){if(1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span"),t._UZ(4,"span",5),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",6),t._UZ(7,"div",7),t.qZA()()()),2&o){const e=t.oxw();t.xp6(7),t.Q6J("innerHTML",e.msg,t.oJD)}}let ui=(()=>{class o extends R.Q{constructor(e){super(e),this.commonService=e,this.show=!1,this.msg=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-export-docx-loading-box"]],inputs:{show:"show",msg:"msg",percent:"percent"},features:[t.qOj],decls:2,vars:1,consts:[[1,"export-docx-frame"],["class","loading-box",4,"ngIf"],[1,"loading-box"],[1,"loading-box-wrapper"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-lg"],[1,"loading-box-lines"],[1,"loading-box-lines-content",3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Mh,8,1,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.show))},dependencies:[y.O5],styles:[".export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9999;top:0;left:0;display:flex;justify-content:center;background-color:#000c}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{margin-top:100px;text-align:center;color:#fafafa;font-weight:400}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#fafafa;color:#000;height:-moz-fit-content;height:fit-content;width:500px;border-radius:5px}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines-content[_ngcontent-%COMP%]{padding:20px}  .export-docx-frame .loading-box .loading-box-lines p{padding-top:10px}  .export-docx-frame .loading-box .loading-box-lines p:first-child{padding-top:0}"]}),o})();const Ph=["TABLE"];function Lh(o,s){1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_testted_list_essay_score")))}function jh(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.index;t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_combine_exam_component")+(e+1))}}function Nh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,jh,3,3,"th",10),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(3))}}function qh(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_testbank_test_config_group"),"\xa0",e<9?"0"+(e+1):e+1,"")}}function Qh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,qh,3,4,"th",10),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function Dh(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.index,n=t.oxw();let i;t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_testbank_testted_list_question"),"\xa0",e+(null!==(i=n.examObj.startQuestionIndex)&&void 0!==i?i:0)<9?"0"+(e+(null!==(i=n.examObj.startQuestionIndex)&&void 0!==i?i:1)):e+(null!==(i=n.examObj.startQuestionIndex)&&void 0!==i?i:1),"")}}function Uh(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;let n;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(n=e.totalQuestion)&&void 0!==n?n:0)-(null!==(n=e.rightAnswer)&&void 0!==n?n:0)-e.countEssayQuestion:(null!==(n=e.totalQuestion)&&void 0!==n?n:0)-(null!==(n=e.rightAnswer)&&void 0!==n?n:0))}}function Fh(o,s){1&o&&(t.TgZ(0,"td",7),t._uU(1,"0"),t.qZA())}function Rh(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,n.checkStatusStudent(e)))}}function zh(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function Jh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,zh,2,1,"th",10),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.subjectMarkValues)}}function Bh(o,s){1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o&&(t.xp6(1),t.Oqu(""))}function Hh(o,s){if(1&o&&t.YNc(0,Bh,2,1,"th",10),2&o){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(3))}}function Yh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Jh,2,1,"ng-container",13),t.YNc(2,Hh,1,1,"ng-template",null,14,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==n.subjectMarkValues?null:n.subjectMarkValues.length)("ngIfElse",e)}}function Gh(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function $h(o,s){1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o&&(t.xp6(1),t.Oqu(""))}function Kh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,$h,2,1,"th",10),t.BQk()),2&o){const e=t.oxw(3).$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.createFakeArr(n.maxGroupQuestion-e.groupPoints.length))}}function Wh(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Gh,3,4,"th",10),t.YNc(2,Kh,2,1,"ng-container",9),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<n.maxGroupQuestion)}}function Vh(o,s){1&o&&t._UZ(0,"th",7)}function Xh(o,s){if(1&o&&t.YNc(0,Vh,1,0,"th",10),2&o){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function tg(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Wh,3,2,"ng-container",13),t.YNc(2,Xh,1,1,"ng-template",null,15,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.groupPoints&&n.groupPoints.length>0)("ngIfElse",e)}}function eg(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function ng(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA(),t.TgZ(2,"td",7),t._uU(3),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function ig(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t._uU(4),t.qZA(),t.TgZ(5,"td",7),t._uU(6),t.ALo(7,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(8,"td",7),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"td",7),t._uU(13),t.ALo(14,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(15,"td",7),t._uU(16),t.ALo(17,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(18,"td",7),t._uU(19),t.qZA(),t.TgZ(20,"td",7),t._uU(21),t.qZA(),t.TgZ(22,"td",7),t._uU(23),t.ALo(24,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(25,"td",7),t._uU(26),t.ALo(27,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(28,"td",7),t._uU(29),t.qZA(),t.TgZ(30,"td",7),t._uU(31),t.qZA(),t.YNc(32,Uh,2,1,"td",8),t.YNc(33,Fh,2,0,"td",8),t.TgZ(34,"td",7),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.YNc(37,Rh,3,3,"td",8),t.TgZ(38,"td",7),t._uU(39),t.qZA(),t.YNc(40,Yh,4,2,"ng-container",9),t.YNc(41,tg,4,2,"ng-container",9),t.TgZ(42,"td",7),t._uU(43),t.qZA(),t.YNc(44,eg,2,1,"td",10),t.YNc(45,ng,4,2,"ng-template",11),t.qZA()),2&o){const e=s.$implicit,n=t.oxw().$implicit,i=t.oxw();let a,r;t.xp6(2),t.Oqu(e.fullName),t.xp6(2),t.Oqu(null==n.classObj?null:n.classObj.name),t.xp6(2),t.Oqu(t.lcZ(7,22,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(10,24,"lang_gender_female"):1==e.gender?t.lcZ(11,26,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(14,28,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(17,31,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:null==e.allResultObjs?null:e.allResultObjs.length),t.xp6(2),t.Oqu(t.lcZ(24,34,null!==(a=e.startedTest)&&void 0!==a?a:"")),t.xp6(3),t.Oqu(t.lcZ(27,36,null!==(r=e.createdAt)&&void 0!==r?r:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":i.calculationTime(e.startedTest,e.createdAt||"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(36,38,i.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",i.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",i.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}const og=function(){return[]};function ag(o,s){if(1&o&&t.YNc(0,ig,46,40,"tr",12),2&o){const e=s.$implicit,n=t.oxw();let i;t.Q6J("ngForOf",n.checkSortListStudent(null!==(i=null==e.classObj?null:e.classObj.sortType)&&void 0!==i?i:0,e.results||t.DdM(1,og)))}}function sg(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;let n;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(n=e.totalQuestion)&&void 0!==n?n:0)-(null!==(n=e.rightAnswer)&&void 0!==n?n:0)-e.countEssayQuestion:(null!==(n=e.totalQuestion)&&void 0!==n?n:0)-(null!==(n=e.rightAnswer)&&void 0!==n?n:0))}}function rg(o,s){1&o&&(t.TgZ(0,"td",7),t._uU(1,"0"),t.qZA())}function lg(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,n.checkStatusStudent(e)))}}function cg(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function _g(o,s){if(1&o&&(t.ynx(0),t.YNc(1,cg,2,1,"th",10),t.BQk()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.subjectMarkValues)}}function dg(o,s){1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o&&(t.xp6(1),t.Oqu(""))}function ug(o,s){if(1&o&&t.YNc(0,dg,2,1,"th",10),2&o){const e=t.oxw(3);t.Q6J("ngForOf",e.createFakeArr(3))}}function mg(o,s){if(1&o&&(t.ynx(0),t.YNc(1,_g,2,1,"ng-container",13),t.YNc(2,ug,1,1,"ng-template",null,14,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==n.subjectMarkValues?null:n.subjectMarkValues.length)("ngIfElse",e)}}function pg(o,s){if(1&o&&(t.TgZ(0,"th",7),t._uU(1),t.ALo(2,"number"),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function hg(o,s){1&o&&(t.TgZ(0,"th",7),t._uU(1),t.qZA()),2&o&&(t.xp6(1),t.Oqu(""))}function gg(o,s){if(1&o&&(t.ynx(0),t.YNc(1,hg,2,1,"th",10),t.BQk()),2&o){const e=t.oxw(3).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.createFakeArr(n.maxGroupQuestion-e.groupPoints.length))}}function fg(o,s){if(1&o&&(t.ynx(0),t.YNc(1,pg,3,4,"th",10),t.YNc(2,gg,2,1,"ng-container",9),t.BQk()),2&o){const e=t.oxw(2).$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<n.maxGroupQuestion)}}function xg(o,s){1&o&&t._UZ(0,"th",7)}function vg(o,s){if(1&o&&t.YNc(0,xg,1,0,"th",10),2&o){const e=t.oxw(3);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function bg(o,s){if(1&o&&(t.ynx(0),t.YNc(1,fg,3,2,"ng-container",13),t.YNc(2,vg,1,1,"ng-template",null,16,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.groupPoints&&n.groupPoints.length>0)("ngIfElse",e)}}function wg(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function Tg(o,s){if(1&o&&(t.TgZ(0,"td",7),t._uU(1),t.qZA(),t.TgZ(2,"td",7),t._uU(3),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function Cg(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",7),t._uU(8),t.ALo(9,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(10,"td",7),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"td",7),t._uU(15),t.ALo(16,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(17,"td",7),t._uU(18),t.ALo(19,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(20,"td",7),t._uU(21),t.qZA(),t.TgZ(22,"td",7),t._uU(23),t.qZA(),t.TgZ(24,"td",7),t._uU(25),t.ALo(26,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(27,"td",7),t._uU(28),t.ALo(29,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(30,"td",7),t._uU(31),t.qZA(),t.TgZ(32,"td",7),t._uU(33),t.qZA(),t.YNc(34,sg,2,1,"td",8),t.YNc(35,rg,2,0,"td",8),t.TgZ(36,"td",7),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.YNc(39,lg,3,3,"td",8),t.TgZ(40,"td",7),t._uU(41),t.qZA(),t.YNc(42,mg,4,2,"ng-container",9),t.YNc(43,bg,4,2,"ng-container",9),t.TgZ(44,"td",7),t._uU(45),t.qZA(),t.YNc(46,wg,2,1,"td",10),t.YNc(47,Tg,4,2,"ng-template",11),t.qZA()),2&o){const e=s.$implicit,n=t.oxw();let i,a;t.xp6(2),t.Oqu(e.fullName||t.lcZ(3,22,"lang_auto_thi_sinh_thi_offline")+e.resultId),t.xp6(3),t.Oqu(t.lcZ(6,24,"lang_auto_tu_do")),t.xp6(3),t.Oqu(t.lcZ(9,26,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(12,28,"lang_gender_female"):1==e.gender?t.lcZ(13,30,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(16,32,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(19,35,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:null==e.allResultObjs?null:e.allResultObjs.length),t.xp6(2),t.Oqu(t.lcZ(26,38,null!==(i=e.startedTest)&&void 0!==i?i:"")),t.xp6(3),t.Oqu(t.lcZ(29,40,null!==(a=e.createdAt)&&void 0!==a?a:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":n.calculationTime(e.startedTest,e.createdAt||"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(38,42,n.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",n.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",n.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",n.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}let kg=(()=>{class o extends R.Q{exportToExcel(){var e;let n=this.examObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([null!==(e=this.examObj.name)&&void 0!==e?e:"",this.tableType,"-ScoreSheet"])+".xlsx":this.commonService.createFileNameExportFile([this.tableType,"ScoreSheet"])+".xlsx";this.exportExcelService.exportHtmlTableToExcel(this.TABLE,!0,n)}createFakeArr(e){let n=[];for(let i=0;i<e;i++)n.push(i);return n}checkStatusStudent(e){return e.isNotMarked?"lang_auto_chua_cham":e.isOnTest?"lang_auto_dang_thi":e.isNotSubmit?"lang_auto_chua_nop_bai":e.isNotTested?"lang_auto_chua_thi":""}checkTypeTable(){return"lastTime"==this.tableType?"lang_auto_last_time":"firstTime"==this.tableType?"lang_auto_first_time":"highest"==this.tableType?"lang_auto_highest":"allTime"==this.tableType?"lang_auto_allTime":"lang_auto_last_time"}calculationTime(e,n){return this.timeService.calculationTimeExamTested(e,n)}checkSortListStudent(e,n){return this.isSortByMark?this.sortService.sortMarkDESC(this.commonService.myClone(n),this.hasEssayQuestion):this.isSortByTime?this.sortService.sortTimeDESC(this.commonService.myClone(n)):0==e||this.isSortByName?this.sortService.sortFirstNameStudents(this.commonService.myClone(n)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(n),"pos","id")}constructor(e,n,i,a){super(e),this.commonService=e,this.timeService=n,this.sortService=i,this.exportExcelService=a,this.examObj={},this.dataScore=[],this.dataScoreByClass=[],this.exportQuestionObjs=[],this.tableType="lastTime",this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.maxGroupQuestion=0,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.currentDate=new Date}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O),t.Y36(kn.K),t.Y36(zi.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-excel-score-sheet"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ph,5),2&e){let i;t.iGM(i=t.CRH())&&(n.TABLE=i.first)}},inputs:{examObj:"examObj",dataScore:"dataScore",dataScoreByClass:"dataScoreByClass",exportQuestionObjs:"exportQuestionObjs",tableType:"tableType",hasEssayQuestion:"hasEssayQuestion",countEssayQuestion:"countEssayQuestion",maxGroupQuestion:"maxGroupQuestion",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName"},features:[t.qOj],decls:102,vars:88,consts:[["azt-track-service","excel-score-sheet-b3JV23esL",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],["colspan","3"],["colspan","2"],[1,"border-table",2,"width","150px"],[1,"border-table"],["class","border-table",4,"ngIf"],[4,"ngIf"],["class","border-table",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["NoSubjectMarkValues",""],["NoGroupPoints",""],["NoGroupPointsFree",""]],template:function(e,n){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return n.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr")(8,"th",4),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"th",5),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"th",4),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.TgZ(17,"th",5),t._uU(18),t.qZA()(),t.TgZ(19,"tr")(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"tr")(27,"th",3),t._uU(28),t.ALo(29,"mytranslate"),t.ALo(30,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(31,"tr"),t._UZ(32,"th"),t.qZA(),t.TgZ(33,"tr")(34,"th",6),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"th",7),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"th",7),t._uU(41),t.ALo(42,"mytranslate"),t.qZA(),t.TgZ(43,"th",7),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.TgZ(46,"th",7),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"th",7),t._uU(50),t.ALo(51,"mytranslate"),t.qZA(),t.TgZ(52,"th",7),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.TgZ(55,"th",7),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.TgZ(58,"th",7),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.TgZ(61,"th",7),t._uU(62),t.ALo(63,"mytranslate"),t.qZA(),t.TgZ(64,"th",7),t._uU(65),t.ALo(66,"mytranslate"),t.qZA(),t.TgZ(67,"th",7),t._uU(68),t.ALo(69,"mytranslate"),t.qZA(),t.TgZ(70,"th",7),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.TgZ(73,"th",7),t._uU(74),t.ALo(75,"mytranslate"),t.qZA(),t.YNc(76,Lh,3,3,"th",8),t.TgZ(77,"th",7),t._uU(78),t.ALo(79,"mytranslate"),t.qZA(),t.YNc(80,Nh,2,1,"ng-container",9),t.YNc(81,Qh,2,1,"ng-container",9),t.TgZ(82,"th",7),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.YNc(85,Dh,3,4,"th",10),t.TgZ(86,"th",7),t._uU(87),t.ALo(88,"mytranslate"),t.qZA()()(),t.TgZ(89,"tbody"),t.YNc(90,ag,1,2,"ng-template",11),t.YNc(91,Cg,48,44,"tr",12),t._UZ(92,"tr"),t.TgZ(93,"tr"),t._UZ(94,"td")(95,"td")(96,"td")(97,"td"),t.TgZ(98,"td",5),t._uU(99),t.ALo(100,"mytranslate"),t.qZA(),t._UZ(101,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",n.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,36,"lang_testbank_testted_list_subject_exam"),": ",n.examObj.name,""),t.xp6(4),t.hij("",t.lcZ(10,38,"lang_testbank_testted_list_time_exam"),":"),t.xp6(3),t.AsE("",n.examObj.minutes," ",t.lcZ(13,40,"lang_testbank_testted_list_minute"),""),t.xp6(3),t.hij("",t.lcZ(16,42,"lang_testbank_testted_list_total_question"),":"),t.xp6(3),t.Oqu(2==n.examObj.mixQuestion?n.examObj.limitMixQuestion:n.examObj.countQuestion),t.xp6(3),t.hij("",t.lcZ(22,44,"lang_auto_kieu_export"),":"),t.xp6(3),t.Oqu(t.lcZ(25,46,n.checkTypeTable())),t.xp6(4),t.AsE("",t.lcZ(29,48,"lang_testbank_testted_list_time_export"),": ",t.lcZ(30,50,n.currentDate),""),t.xp6(7),t.Oqu(t.lcZ(36,52,"lang_first_and_last_name")),t.xp6(3),t.Oqu(t.lcZ(39,54,"lang_testbank_testted_list_class")),t.xp6(3),t.Oqu(t.lcZ(42,56,"lang_birthday")),t.xp6(3),t.Oqu(t.lcZ(45,58,"lang_gender")),t.xp6(3),t.Oqu(t.lcZ(48,60,"lang_auto_so_bao_danh")),t.xp6(3),t.Oqu(t.lcZ(51,62,"lang_auto_ma_de_thi")),t.xp6(3),t.Oqu(t.lcZ(54,64,"lang_testbank_testted_tested_time_exams")),t.xp6(3),t.Oqu(t.lcZ(57,66,"lang_testbank_testted_list_number_exams")),t.xp6(3),t.Oqu(t.lcZ(60,68,"lang_testbank_testted_list_time_start")),t.xp6(3),t.Oqu(t.lcZ(63,70,"lang_testbank_testted_list_time_end")),t.xp6(3),t.Oqu(t.lcZ(66,72,"lang_testbank_testted_list_time_homework")),t.xp6(3),t.Oqu(t.lcZ(69,74,"lang_testbank_testted_list_number_success")),t.xp6(3),t.Oqu(t.lcZ(72,76,"lang_testbank_testted_list_error")),t.xp6(3),t.Oqu(t.lcZ(75,78,"lang_testbank_testted_list_test_score")),t.xp6(2),t.Q6J("ngIf",n.hasEssayQuestion),t.xp6(2),t.Oqu(t.lcZ(79,80,"lang_testbank_testted_list_total_point")),t.xp6(2),t.Q6J("ngIf",n.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",n.maxGroupQuestion>0),t.xp6(2),t.Oqu(t.lcZ(84,82,"lang_testbank_testted_list_exit_full_screen")),t.xp6(2),t.Q6J("ngForOf",n.exportQuestionObjs),t.xp6(2),t.Oqu(t.lcZ(88,84,"lang_testbank_testted_list_additional_information")),t.xp6(3),t.Q6J("ngForOf",n.dataScoreByClass),t.xp6(1),t.Q6J("ngForOf",n.dataScore),t.xp6(8),t.hij("",t.lcZ(100,86,"lang_testbank_testted_list_teacher_confirmed"),":"))},dependencies:[y.sg,y.O5,y.JJ,tt.bT,tt.t9,tt.q7,tt.tO,tt._I],encapsulation:2}),o})();class Og{constructor(){this.x=0,this.y=0}toBase64String(){return(new Ee).writeCvPoint2u(this).toBase64String()}}class On{constructor(){this.x=0,this.y=0}toBase64String(){return(new Ee).writeCvPoint2f(this).toBase64String()}}class Gi{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new Ee).writeCvRect2f(this).toBase64String()}}class yg{constructor(){this.center=new On,this.filled=!1}toBase64String(){return(new Ee).writeAnswerCircle(this).toBase64String()}}class mi{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Ee).writeTableAnswer(this).toBase64String()}}class zo{constructor(){this.top=new On,this.left=new On,this.bottom=new On,this.right=new On}toBase64String(){return(new Ee).writeResultRect(this).toBase64String()}}class Ag{constructor(){this.id=0,this.region=new Gi}toBase64String(){return(new Ee).writeCropRegion(this).toBase64String()}}class Sg{constructor(){this.existed=!1,this.image=[],this.answer=0,this.answerRegion=new Gi}toBase64String(){return(new Ee).writeHandwrittenRect(this).toBase64String()}}class Zg{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new zo,this.studentId=new mi,this.examId=new mi,this.answerTable=new mi,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.examIdNum=0,this.teacherScore=0,this.cropRegion=[],this.answersHandwritten=[],this.teacherScoreTb=[]}toBase64String(){return(new Ee).writeResultOutput(this).toBase64String()}}class Eg{constructor(){this.imageType=0,this.templateType=0,this.imageWidth=0,this.imageHeight=0,this.imageLength=0,this.numOfQuestion=0}toBase64String(){return(new Ee).writeAnswerSheetInput(this).toBase64String()}}class Jo{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new Ee).writeSmallAnswerCircle(this).toBase64String()}}class yn{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Ee).writeSmallTableAnswer(this).toBase64String()}}class Bo{constructor(){this.studentId=new yn,this.examId=new yn,this.answerTable=new yn}toBase64String(){return(new Ee).writeDrawData(this).toBase64String()}}class Ig{constructor(s){this.bytes=s,this.cursor=0,this.length=s.byteLength}updateCursor(s){if(this.cursor=this.cursor+s,this.cursor>=this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let s=this.bytes[this.cursor];return this.updateCursor(1),s}parseInt(){let s=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(s).getInt32(0)}parseDouble(){let s=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(s).getFloat64(0,!0)}parseString(){let s=new TextDecoder("utf-8"),e=this.cursor,n=this.bytes[this.cursor];for(;0!=n;)this.updateCursor(1),n=this.bytes[this.cursor];let i=this.bytes.slice(e,this.cursor),a=s.decode(i);return this.updateCursor(1),a}parseBool(){let s=this.bytes[this.cursor];return this.updateCursor(1),s>0}parseCvPoint2u(){let s=new Og;return s.x=this.parseUchar(),s.y=this.parseUchar(),s}parseCvPoint2f(){let s=new On;return s.x=this.parseDouble(),s.y=this.parseDouble(),s}parseCvRect2f(){let s=new Gi;return s.x=this.parseDouble(),s.y=this.parseDouble(),s.width=this.parseDouble(),s.height=this.parseDouble(),s}parseAnswerCircle(){let s=new yg;return s.center=this.parseCvPoint2f(),s.filled=this.parseBool(),s}parseTableAnswer(){let s=new mi,e=0;s.rows=this.parseInt(),s.cols=this.parseInt(),s.radius=this.parseInt(),e=this.parseInt();for(let n=0;n<e;n++)s.answers.push(this.parseAnswerCircle());return s}parseResultRect(){let s=new zo;return s.top=this.parseCvPoint2f(),s.left=this.parseCvPoint2f(),s.bottom=this.parseCvPoint2f(),s.right=this.parseCvPoint2f(),s}parseCropRegion(){let s=new Ag;return s.id=this.parseInt(),s.region=this.parseCvRect2f(),s}parseHandwrittenRect(){let s=new Sg,e=0;s.existed=this.parseBool(),e=this.parseInt();for(let n=0;n<e;n++)s.image.push(this.parseUchar());return s.answer=this.parseInt(),s.answerRegion=this.parseCvRect2f(),s}parseResultOutput(){let s=new Zg,e=0;s.type=this.parseInt(),s.errorCode=this.parseInt(),s.paperCorner=this.parseResultRect(),s.studentId=this.parseTableAnswer(),s.examId=this.parseTableAnswer(),s.answerTable=this.parseTableAnswer(),s.imageWidth=this.parseInt(),s.imageHeight=this.parseInt(),s.imageSize=this.parseInt(),s.examIdNum=this.parseInt(),s.teacherScore=this.parseDouble(),e=this.parseInt();for(let n=0;n<e;n++)s.cropRegion.push(this.parseCropRegion());e=this.parseInt();for(let n=0;n<e;n++)s.answersHandwritten.push(this.parseHandwrittenRect());e=this.parseInt();for(let n=0;n<e;n++)s.teacherScoreTb.push(this.parseAnswerCircle());return s}parseAnswerSheetInput(){let s=new Eg;return s.imageType=this.parseInt(),s.templateType=this.parseInt(),s.imageWidth=this.parseInt(),s.imageHeight=this.parseInt(),s.imageLength=this.parseInt(),s.numOfQuestion=this.parseInt(),s}parseSmallAnswerCircle(){let s=new Jo;return s.position=this.parseUchar(),s.x=this.parseUchar(),s.y=this.parseUchar(),s.filledCols=this.parseUchar(),s.rows=this.parseUchar(),s}parseSmallTableAnswer(){let s=new yn,e=0;s.rows=this.parseUchar(),s.cols=this.parseUchar(),s.radius=this.parseUchar(),e=this.parseInt();for(let n=0;n<e;n++)s.answers.push(this.parseSmallAnswerCircle());return s}parseDrawData(){let s=new Bo;return s.studentId=this.parseSmallTableAnswer(),s.examId=this.parseSmallTableAnswer(),s.answerTable=this.parseSmallTableAnswer(),s}}const Xe=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class Ee{constructor(){this.bytes=[]}writeUchar(s){return this.bytes.push(s),this}writeUint8Array(s){for(let e=0;e<s.length;e++)this.bytes.push(s[e]);return this}writeArrayBuffer(s){let e=new Uint8Array(s);return this.writeUint8Array(e),this}writeInt(s){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,s,!1),this.writeArrayBuffer(e),this}writeDouble(s){let e=new ArrayBuffer(8);return new DataView(e).setFloat64(0,s,!0),this.writeArrayBuffer(e),this}writeString(s){let n=(new TextEncoder).encode(s);return this.writeUint8Array(n),this.writeUchar(0),this}writeBool(s){return this.writeUchar(s?1:0),this}toBase64String(){return function Mg(o){let e,s="",n=o.length;for(e=2;e<n;e+=3)s+=Xe[o[e-2]>>2],s+=Xe[(3&o[e-2])<<4|o[e-1]>>4],s+=Xe[(15&o[e-1])<<2|o[e]>>6],s+=Xe[63&o[e]];return e===n+1&&(s+=Xe[o[e-2]>>2],s+=Xe[(3&o[e-2])<<4],s+="=="),e===n&&(s+=Xe[o[e-2]>>2],s+=Xe[(3&o[e-2])<<4|o[e-1]>>4],s+=Xe[(15&o[e-1])<<2],s+="="),s}(new Uint8Array(this.bytes))}writeCvPoint2u(s){return this.writeUchar(s.x),this.writeUchar(s.y),this}writeCvPoint2f(s){return this.writeDouble(s.x),this.writeDouble(s.y),this}writeCvRect2f(s){return this.writeDouble(s.x),this.writeDouble(s.y),this.writeDouble(s.width),this.writeDouble(s.height),this}writeAnswerCircle(s){return this.writeCvPoint2f(s.center),this.writeBool(s.filled),this}writeTableAnswer(s){this.writeInt(s.rows),this.writeInt(s.cols),this.writeInt(s.radius),this.writeInt(s.answers.length);for(let e of s.answers)this.writeAnswerCircle(e);return this}writeResultRect(s){return this.writeCvPoint2f(s.top),this.writeCvPoint2f(s.left),this.writeCvPoint2f(s.bottom),this.writeCvPoint2f(s.right),this}writeCropRegion(s){return this.writeInt(s.id),this.writeCvRect2f(s.region),this}writeHandwrittenRect(s){this.writeBool(s.existed),this.writeInt(s.image.length);for(let e of s.image)this.writeUchar(e);return this.writeInt(s.answer),this.writeCvRect2f(s.answerRegion),this}writeResultOutput(s){this.writeInt(s.type),this.writeInt(s.errorCode),this.writeResultRect(s.paperCorner),this.writeTableAnswer(s.studentId),this.writeTableAnswer(s.examId),this.writeTableAnswer(s.answerTable),this.writeInt(s.imageWidth),this.writeInt(s.imageHeight),this.writeInt(s.imageSize),this.writeInt(s.examIdNum),this.writeDouble(s.teacherScore),this.writeInt(s.cropRegion.length);for(let e of s.cropRegion)this.writeCropRegion(e);this.writeInt(s.answersHandwritten.length);for(let e of s.answersHandwritten)this.writeHandwrittenRect(e);this.writeInt(s.teacherScoreTb.length);for(let e of s.teacherScoreTb)this.writeAnswerCircle(e);return this}writeAnswerSheetInput(s){return this.writeInt(s.imageType),this.writeInt(s.templateType),this.writeInt(s.imageWidth),this.writeInt(s.imageHeight),this.writeInt(s.imageLength),this.writeInt(s.numOfQuestion),this}writeSmallAnswerCircle(s){return this.writeUchar(s.position),this.writeUchar(s.x),this.writeUchar(s.y),this.writeUchar(s.filledCols),this.writeUchar(s.rows),this}writeSmallTableAnswer(s){this.writeUchar(s.rows),this.writeUchar(s.cols),this.writeUchar(s.radius),this.writeInt(s.answers.length);for(let e of s.answers)this.writeSmallAnswerCircle(e);return this}writeDrawData(s){return this.writeSmallTableAnswer(s.studentId),this.writeSmallTableAnswer(s.examId),this.writeSmallTableAnswer(s.answerTable),this}}var An=T(15431);const Pg=["fileInput"],Lg=["fileInputMobile"];function jg(o,s){1&o&&(t.TgZ(0,"p",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_he_thong_dang_tai_cong_cu_doing")))}function Ng(o,s){1&o&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_quet_bai_tu_phieu_scan_doing")))}function qg(o,s){1&o&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_quet_thanh_cong")," "))}function Qg(o,s){1&o&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"span",24),t.qZA()),2&o&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_auto_he_thong_dang_luu_bai_vui_long_khong_thoat_trinh_duyet"),"\xa0"))}function Dg(o,s){1&o&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_thanh_cong")," "))}function Ug(o,s){1&o&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_khong_thanh_cong")," "))}function Fg(o,s){if(1&o&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE("",e.doneFileScan-e.uploadFileScanError.length,"/",e.totalFileScan,"")}}function Rg(o,s){if(1&o&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE("",e.saveSuccessCount,"/",e.totalFileScan,"")}}function zg(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"p",26)(1,"a",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showStudentList())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_danh_sach")," "))}function Jg(o,s){if(1&o&&(t.TgZ(0,"div",18)(1,"p",19),t.YNc(2,Ng,3,3,"span",20),t.YNc(3,qg,3,3,"span",20),t.YNc(4,Qg,4,3,"span",20),t.YNc(5,Dg,3,3,"span",20),t.YNc(6,Ug,3,3,"span",20),t.YNc(7,Fg,2,2,"b",21),t.YNc(8,Rg,2,2,"b",21),t.qZA(),t.YNc(9,zg,4,3,"p",22),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.scanningStatus.isScanning),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isScanDone&&!e.scanningStatus.isSavingDone&&!e.scanningStatus.isSaving&&!e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSaving),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",!e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone)}}function Bg(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",18)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"b",29),t._uU(5),t.qZA(),t._uU(6," file. \xa0"),t.qZA(),t.TgZ(7,"a",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showScanFalseFiles())}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,4,"lang_auto_da_xay_ra_loi_scan_o")," "),t.xp6(3),t.AsE("",e.uploadFileScanError.length,"/",e.totalFileScan," "),t.xp6(3),t.hij(" ",t.lcZ(9,6,"lang_auto_xem_chi_tiet")," ")}}function Hg(o,s){if(1&o&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);let i;t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_ma_de"),": ",n.replaceDigit(null!==(i=e.offlineMixquestionHashId)&&void 0!==i?i:0,!1)," ",t.lcZ(3,6,"lang_auto_-_so_bao_danh"),": ",n.replaceDigit(null!==(i=e.studentCode)&&void 0!==i?i:0,!0)," ")}}function Yg(o,s){if(1&o&&(t.TgZ(0,"div",31)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Hg,4,8,"p",32),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_du_lieu_luu_loi"),":"),t.xp6(2),t.Q6J("ngForOf",e.invalidDataCallMarkObjs)}}function Gg(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectFileClick())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chon_thu_muc_file_scan")," "))}function $g(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"p",34),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Gg,3,3,"button",35),t.TgZ(5,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.selectFileClick(!0))}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(2),t.Q6J("ngIf",!e.isMobile),t.xp6(2),t.hij(" ",t.lcZ(7,5,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function Kg(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",43)(1,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectFileClick())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_chon_thu_muc_file_scan")," "))}const Wg=function(o){return{"pl-0":o}};function Vg(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",38)(1,"p",34),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",39),t.YNc(5,Kg,4,3,"div",40),t.TgZ(6,"div",41)(7,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.selectFileClick(!0))}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(3),t.Q6J("ngIf",!e.isMobile),t.xp6(1),t.Q6J("ngClass",t.VKq(8,Wg,!e.isMobile)),t.xp6(2),t.hij(" ",t.lcZ(9,6,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function Xg(o,s){1&o&&(t.TgZ(0,"mat-icon",50),t._uU(1,"double_arrow"),t.qZA())}function tf(o,s){if(1&o&&(t.TgZ(0,"div",45)(1,"div",46),t._UZ(2,"div",47),t.YNc(3,Xg,2,0,"mat-icon",48),t._UZ(4,"div",49),t.qZA()()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.doneFileScan>0)}}function ef(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function nf(o,s){if(1&o&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13)(3,"div",14),t.qZA()()),2&o){const e=t.oxw().index;t.xp6(2),t.s9C("id","processFileScan"+e),t.xp6(1),t.s9C("id","doneFileScan"+e)}}function of(o,s){if(1&o&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,nf,4,2,"div",10),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2);t.xp6(2),t.AsE("",n+1,".\xa0",t.lcZ(3,3,i.getErrorCode(e.errorMessage?e.errorMessage:"")),""),t.xp6(2),t.Q6J("ngIf",e.img_in||e.img_out)}}function af(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.YNc(6,of,5,5,"div",6),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onNoClick())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"lang_auto_anh_scan_loi")," "),t.xp6(2),t.Q6J("ngForOf",e.data),t.xp6(3),t.hij(" ",t.lcZ(10,5,"lang_auto_dong")," ")}}const $i=".has-bg[_ngcontent-%COMP%]{background:inherit;background-color:#f1f1f1;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dfdfdf;border-radius:4px;box-shadow:none}.btn-custom-file-scan[_ngcontent-%COMP%]{display:block;background:#2361ae;color:#fff;transition:all .5s}.link__color[_ngcontent-%COMP%]{color:#0eafc0!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}.status_saving[_ngcontent-%COMP%]{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:#0000007b}.scan-file-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;transform:translate(-50%,-50%)}.scan-file-body[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;max-height:70vh}@media (max-width: 820px){.btn-custom-file-scan[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 768px){.scan-file-body[_ngcontent-%COMP%]{height:calc(100vh - 250px);position:relative}.scan-file-content[_ngcontent-%COMP%]{transform:none!important;top:0;left:0;height:100%}.arrow_icon[_ngcontent-%COMP%]{margin-left:5px!important;width:100%!important}}";function sf(o,s){1&o&&(t.TgZ(0,"div",0)(1,"p",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_khong_the_tao_de_thi_offline_voi_de_dang_docx")))}function rf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",0)(1,"p",6),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectToCreateOfflineTest())}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}2&o&&(t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_tested_list_no_exam_offline_scan"),"\xa0 "),t.xp6(3),t.Oqu(t.lcZ(6,4,"lang_testbank_test_list_scan_tutorial_click_here")))}const qe=270,lf=["lang_auto_khong_trang_giay_nao_duoc_tim_thay","lang_auto_trang_giay_qua_nho_camera_dat_qua_xa_trang_giay","lang_auto_khong_nhan_dien_duoc_loai_mau_nao_trong_trang_giay","","lang_auto_khong_tim_thay_duoc_bang_dap_an","lang_auto_bang_dap_an_qua_xa_camera","lang_auto_ma_de_loi_sai_cau_truc_bang_viet_tay","lang_auto_danh_sach_anh_tra_ra_bi_thieu","lang_auto_qua_trinh_nhan_dien_ma_de_loi"];let cf=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c,_){super(n),this.fb=e,this.commonService=n,this.offlineExamResultService=i,this.baseApiService=a,this.cdnService=r,this.uploadApiService=l,this.permissionService=c,this.dialog=_,this.openSelectFile=!1,this.examObj={},this.loadedJs=!1,this.hasExamOffline=!1,this.tokenScan="",this.examOfflineMessage="",this.backToLink="",this.saveStudentMarkEmit=new t.vpe,this.showStudentMarkEmit=new t.vpe,this.firstSuccessResultId=new t.vpe,this.form=new m.nJ({}),this.scanningStatus={isSaving:!1,isSavingDone:!1,isScanDone:!1,isScanning:!1,isSavingFail:!1},this.loadingFileJS=!1,this.isSelectedFile=!1,this.firstTimeScan=!0,this.isMobile=!1,this.queueUploadFileScan=[],this.uploadFileScanError=[],this.isProcessingFileScan=!1,this.doneFileScan=0,this.totalFileScan=0,this.queueSaveMarkObj=[],this.listMapStudentCodeAndExamId=[],this.isProcessingSaveMark=!1,this.doneFileScanMarked=0,this.totalFileScanMarked=0,this.saveSuccessCount=0,this.arrDataCallMarkObjs=[],this.invalidDataCallMarkObjs=[],this.countRetryLoadJS=0,this.isSaving=!1,this.moreThanMaxSaved=0,this.selectFileDirectory=d=>(0,ke.mG)(this,void 0,void 0,function*(){let f=d.target.files;try{let D=0;var w=[];for(var k in f)if("length"!=k&&"item"!=k){var S=f[k];S.webkitRelativePath.indexOf("._")<0&&(S.webkitRelativePath.indexOf(".jpg")>0||S.webkitRelativePath.indexOf(".png")>0||S.webkitRelativePath.indexOf(".tiff")>0||S.webkitRelativePath.indexOf(".tif")>0||S.webkitRelativePath.indexOf(".jpeg")>0)?w.push(S):D++}!f||!f.length||D>=f?.length?this.showErrorSnack("lang_auto_thu_muc_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(w.forEach(Q=>{this.getFileLocal(Q)}),this.firstTimeScan=!1)}catch(D){console.log(D)}}),this.selectFile=d=>(0,ke.mG)(this,void 0,void 0,function*(){let f=d.target.files;try{let D=0,Q=!1;var w=[];for(var k in f)if("length"!=k&&"item"!=k){var S=f[k];S.name.indexOf("._")<0&&(S.name.indexOf(".jpg")>0||S.name.indexOf(".png")>0||S.name.indexOf(".tiff")>0||S.name.indexOf(".tif")>0||S.name.indexOf(".jpeg")>0)?w.push(S):((S.name.indexOf(".heic")>0||S.name.indexOf(".heif")>0)&&(Q=!0),D++)}!f||D>=f?.length?this.showErrorSnack(Q?"lang_auto_file_chon_co_heic_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai":"lang_auto_file_chon_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(w.forEach(N=>{this.getFileLocal(N)}),this.firstTimeScan=!1)}catch(D){console.log(D)}}),this.processSaveMarkObj=d=>(0,ke.mG)(this,void 0,void 0,function*(){var p,h,f,w;this.isProcessingSaveMark=!0;try{if(d.page){var k={offlineMixquestionHashId:this.convertStringToNumber(d.ExamId),studentCode:this.convertStringToNumber(d.StudentId),studentCodeLength:d.StudentId?d.StudentId.split(",").length-1:0,offlineMixquestionHashIdLength:d.ExamId?d.ExamId.split(",").length-1:0,images:{url:"",width:d.img_out.naturalWidth<720?720:d.img_out.naturalWidth,height:d.img_out.naturalHeight<1038?1038:d.img_out.naturalHeight},imagesData:{content:this.getScanAnswerContent(d.Answers),pos:this.getScanFilePos(d.page)},templateType:d.page.type,objScan:d};0==d.code&&!this.existStudentCodeAndExamId(null!==(p=k.studentCode)&&void 0!==p?p:0,null!==(h=k.offlineMixquestionHashId)&&void 0!==h?h:0)&&(this.listMapStudentCodeAndExamId.push({studentCode:null!==(f=k.studentCode)&&void 0!==f?f:0,examId:null!==(w=k.offlineMixquestionHashId)&&void 0!==w?w:0}),k.index=this.arrDataCallMarkObjs.length,this.arrDataCallMarkObjs.push(k)),this.doneFileScanMarked++}let S=this.totalFileScan-this.uploadFileScanError.length;this.totalFileScan<=qe&&this.scanningStatus.isScanDone&&this.doneFileScanMarked>=S?(this.scanningStatus.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj()})):this.doneFileScanMarked>=qe?this.isSaving||(this.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj(!0)})):S>qe&&S%qe>0&&this.doneFileScanMarked==S-qe*this.moreThanMaxSaved&&this.moreThanMaxSaved==Math.floor(S/qe)?(this.scanningStatus.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj()})):(this.isSaving||(this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),console.log("processQueueSaveMarkObj",this.totalFileScan+"|"+this.scanningStatus.isScanDone+"|"+this.doneFileScanMarked+"|"+(this.totalFileScan-this.uploadFileScanError.length)+"|"+this.uploadFileScanError.length,this.saveSuccessCount)),this.isProcessingSaveMark=!1}catch(S){throw S}})}selectFileClick(e){var n;this.hasExamOffline?this.permissionService.hasMarkPointPermission("exam",null===(n=this.examObj)||void 0===n?void 0:n.permissionObj)?this.loadedJs?this.fileInput&&(this.doneFileScan=0,this.doneFileScanMarked=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0)):this.loadingFileJs().then(()=>{this.loadingFileJS=!1,this.fileInput&&(this.doneFileScan=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.doneFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0))}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay"):this.examOfflineMessage&&""!=this.examOfflineMessage?this.showErrorSnack(this.examOfflineMessage):this.dialog.open(df,{width:"60vw",restoreFocus:!1,data:{examObj:this.examObj,backToLink:this.backToLink}}).afterClosed().subscribe(a=>{})}getFileLocal(e){var n=new FileReader;n.onload=()=>{if(n.result&&"string"!=typeof n.result){var a=new Uint8Array(n.result);this.totalFileScan++,this.isSelectedFile=!0,this.scanningStatus.isScanning=!0,this.addQueueFileScan(a)}},n.readAsArrayBuffer(e)}addQueueFileScan(e){this.queueUploadFileScan.push(e),this.processQueueFileScan()}processQueueFileScan(){if(!this.isProcessingFileScan&&0!=this.queueUploadFileScan.length&&!this.isSaving){var e=this.queueUploadFileScan.shift();e&&this.processImg(e)}}processImg(e){var n,i;return(0,ke.mG)(this,void 0,void 0,function*(){this.isProcessingFileScan=!0;try{if(null!=typeof imgsdk&&window.hasOwnProperty("imgsdk")){yield imgsdk.init();var a=this.baseApiService.getUserObj(),r=yield imgsdk.processAnswerSheet({src:e,width:720,height:1280,token:this.tokenScan,uid:null===(n=a.id)||void 0===n?void 0:n.toString()});r&&(this.doneFileScan++,r.Result&&(r.page=new Ig(r.Result).parseResultOutput()),console.log("angular Obj",r)),0==this.queueUploadFileScan.length&&(this.scanningStatus.isScanning=!1,this.scanningStatus.isScanDone=!0),(0!=r.code||this.existStudentCodeAndExamId(this.convertStringToNumber(r.StudentId),this.convertStringToNumber(r.ExamId)))&&(0!=r.code?r.errorMessage=null!==(i=lf[r.code-1])&&void 0!==i?i:"process_scan_false":this.existStudentCodeAndExamId(this.convertStringToNumber(r.StudentId),this.convertStringToNumber(r.ExamId))&&(r.errorMessage="exist_exam_id_and_student_code"),r.img_in&&this.uploadFileToCdn(r.img_in,0,!0),this.uploadFileScanError.push(r)),this.addQueueSaveMarkObj(r),this.showOutput(r)}}catch{}this.isProcessingFileScan=!1,this.processQueueFileScan()})}showOutput(e){var n=document.getElementById("processFileScan"),i=document.getElementById("doneFileScan");n&&i&&(n.innerHTML="",i.innerHTML="",e.img_in.width=144,e.img_in.height=207,n.appendChild(e.img_in),e.img_out&&(e.img_out.width=144,e.img_out.height=207,e.img_out.style.marginLeft=this.isMobile?"20px":"30px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle",i.appendChild(e.img_out)))}addQueueSaveMarkObj(e){e&&(this.queueSaveMarkObj.push(e),this.totalFileScanMarked++),this.isSaving||this.processQueueSaveMarkObj()}processQueueSaveMarkObj(){if(!this.isProcessingSaveMark&&0!=this.queueSaveMarkObj.length&&!this.isSaving){var e=this.queueSaveMarkObj.shift();e&&this.processSaveMarkObj(e)}}callSaveMarkObj(e){this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultMarkObjsV2Post(this.removeObjScanToSaveObjs(this.arrDataCallMarkObjs),this.examObj.hashId).subscribe(n=>{var i,a,r,l,c,_,d;if(n&&1==n.success){var p=null!==(a=null===(i=n.data)||void 0===i?void 0:i.studentCodeToSuccessIds)&&void 0!==a?a:{};this.firstSuccessResultId.emit(null===(r=n.data)||void 0===r?void 0:r.firstSuccessResultId),!(null===(l=n.data)||void 0===l)&&l.invalidData&&(null===(c=n.data)||void 0===c?void 0:c.invalidData.length)>0&&(this.invalidDataCallMarkObjs=null===(_=n.data)||void 0===_?void 0:_.invalidData),Object.keys(p).length>0?this.getUrlForImgScan(p).then(h=>{this.updateImgUrlForScan(h,e)}):e||(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len"))}else e||(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack(null!==(d=n.message)&&void 0!==d?d:""))}))}removeObjScanToSaveObjs(e){for(var n=[],i=e.length<qe?e.length:qe,a=0;a<i;a++)n.push({index:e[a].index,studentCode:e[a].studentCode,offlineMixquestionHashId:e[a].offlineMixquestionHashId,studentCodeLength:e[a].studentCodeLength,offlineMixquestionHashIdLength:e[a].offlineMixquestionHashIdLength,images:e[a].images,imagesData:e[a].imagesData,nameImages:e[a].nameImages,templateType:e[a].templateType});return n}getNamePosForStudent(){return new Promise(e=>{var n,i,a,r;if(this.arrDataCallMarkObjs.length>0){var l=this.arrDataCallMarkObjs.length<=qe?this.arrDataCallMarkObjs.length:qe,c=document.createElement("canvas");const f=c.getContext("2d");if(c.width=this.arrDataCallMarkObjs.length<9?250*this.arrDataCallMarkObjs.length:2250,this.arrDataCallMarkObjs.length<9)c.height=50;else if(this.arrDataCallMarkObjs.length<qe){let w=Math.floor(this.arrDataCallMarkObjs.length/9);c.height=50*(w+(this.arrDataCallMarkObjs.length%9>0?1:0))}else c.height=1500;for(var _=0,d=0,p=0;p<l;p++)if(this.arrDataCallMarkObjs[p].objScan.page.cropRegion.length>0){p>0&&p%9==0&&(_++,d=0);var h=50*_;let w=null!==(n=this.arrDataCallMarkObjs[p].objScan.page.cropRegion[0].region.x)&&void 0!==n?n:210,k=null!==(i=this.arrDataCallMarkObjs[p].objScan.page.cropRegion[0].region.y)&&void 0!==i?i:210,S=null!==(a=this.arrDataCallMarkObjs[p].objScan.page.cropRegion[0].region.width)&&void 0!==a?a:250,D=null!==(r=this.arrDataCallMarkObjs[p].objScan.page.cropRegion[0].region.height)&&void 0!==r?r:50;f?.drawImage(this.arrDataCallMarkObjs[p].objScan.img_out,w,k,S,D,250*d,h,250,50),this.arrDataCallMarkObjs[p].nameImages={url:"",width:c.width,height:c.height,position:{x:250*d,y:h,width:250,height:50}},d++}c.toBlob(w=>{let S=(new Date).getTime();var D=this.commonService.getRandomNumber(1e6,9999999);const Q=new File([w],`azo_file_name_scan_${D}_${S}.jpeg`,{type:"image/jpeg"});this.uploadApiService.uploadToCdnForFileScanNameExamOffline(Q).subscribe(N=>{var q,W,X;if(N&&1==N.success)for(var E=0;E<l;E++)this.arrDataCallMarkObjs[E].nameImages={url:null!==(W=null===(q=N.data)||void 0===q?void 0:q.url)&&void 0!==W?W:"",width:c.width,height:c.height,position:null===(X=this.arrDataCallMarkObjs[E].nameImages)||void 0===X?void 0:X.position};e()})},"image/jpeg",.9)}else e()})}getUrlForImgScan(e){return new Promise(n=>{var i=[];for(var a in e)if(e.hasOwnProperty(a)){var r=this.arrDataCallMarkObjs.filter(l=>{var c;return(null===(c=l.index)||void 0===c?void 0:c.toString())==a});r&&r.length>0&&this.uploadFileToCdn(r[0].objScan.img_out,e[a],!1).then(l=>{i.push({id:l.id,images:{url:l.imgUrl,width:r[0].objScan.img_out.naturalWidth<720?720:r[0].objScan.img_out.naturalWidth,height:r[0].objScan.img_out.naturalHeight<1038?1038:r[0].objScan.img_out.naturalHeight}}),i.length==Object.keys(e).length&&n(i)})}})}updateImgUrlForScan(e,n){this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultUpdateImagesPost(e,this.examObj.hashId).subscribe(i=>{var a;i&&1==i.success?(this.saveSuccessCount+=e.length,n?(this.arrDataCallMarkObjs.splice(0,qe),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!1,this.scanningStatus.isSavingDone=!0,this.showSuccessSnack("lang_auto_luu_thanh_cong")),this.saveStudentMarkEmit.emit(!0)):(n&&(this.isSaving=!1,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack(null!==(a=i.message)&&void 0!==a?a:""))}))}uploadFileToCdn(e,n,i){return new Promise(a=>{this.drawImgOutToCanvas(e).then(r=>{var l;r?i?this.uploadApiService.uploadToCdnForFileScanError(r,null!==(l=this.examObj.hashId)&&void 0!==l?l:"").subscribe(c=>{var _,d;a(c&&1==c.success?{id:n,imgUrl:null!==(d=null===(_=c.data)||void 0===_?void 0:_.url)&&void 0!==d?d:""}:{id:n,imgUrl:""})}):this.uploadApiService.uploadToCdnForFileScanExamOffline(r).subscribe(c=>{var _,d;a(c&&1==c.success?{id:n,imgUrl:null!==(d=null===(_=c.data)||void 0===_?void 0:_.url)&&void 0!==d?d:""}:{id:n,imgUrl:""})}):a({id:n,imgUrl:""})})})}drawImgOutToCanvas(e){return new Promise(n=>{var i=document.createElement("canvas");i.width=e.naturalWidth,i.height=e.naturalHeight,i.getContext("2d")?.drawImage(e,0,0,i.width,i.height),i.toBlob(r=>{let c=(new Date).getTime();var _=this.commonService.getRandomNumber(1e6,9999999);const d=new File([r],`azo_file_scan_${_}_${c}.jpeg`,{type:"image/jpeg"});n(d)},"image/jpeg",.9)})}replaceDigit(e,n){var i=e.toString(),a=6;for(n||(a=3);i.length<a;)i="0"+i;return i}convertStringToNumber(e){for(var n=e.split(","),i="",a=0,r=0;r<n.length;r++)""!=n[r]?i+=n[r]:a++;return""!=i&&a<=1?parseInt(i,10):0}getScanFilePos(e){var n={version:"2.0"};return n.resultFilledPos=this.convertScanResult(e),JSON.stringify(n)}convertScanResult(e){let n=new Bo;return n.examId=this.convertTableAnswerToSmallTableAnswer(e.examId),n.studentId=this.convertTableAnswerToSmallTableAnswer(e.studentId),n.answerTable=this.convertTableAnswerToSmallTableAnswer(e.answerTable),n.toBase64String()}convertTableAnswerToSmallTableAnswer(e){let n=new yn;if(n.cols=e.cols,n.rows=e.rows,0==e.cols&&e.answers.length>0)return new yn;n.radius=e.radius,n.answers=[];let i=e.answers;for(var a=0;a<i.length;a++){let c=i[a],_=new Jo;var r=Math.floor(c.center.x),l=Math.floor(c.center.y);_.position=16*Math.floor(r/256)+Math.floor(l/256),_.x=r%256,_.y=l%256,_.filledCols=128*(c.filled?1:0)+a%e.cols,_.rows=Math.floor(a/e.cols),n.answers.push(_)}return n}existStudentCodeAndExamId(e,n){var i=0;if(0!=e&&0!=n)for(var a=0;a<this.listMapStudentCodeAndExamId.length;a++)if(this.listMapStudentCodeAndExamId[a].studentCode==e&&this.listMapStudentCodeAndExamId[a].examId==n){i++;break}return i>0}getScanAnswerContent(e){return e?e.split(","):[]}showScanFalseFiles(){this.dialog.open(_f,{width:"80vw",data:this.uploadFileScanError,restoreFocus:!1}).afterClosed().subscribe(n=>{})}showStudentList(){this.openSelectFile=!1,this.showStudentMarkEmit.emit(!0)}askBeforeCloseWindow(e){return!this.scanningStatus.isSaving||(e.returnValue=!1)}loadingFileJs(){return this.loadingFileJS=!0,new Promise((e,n)=>{var i=[{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(i).then(()=>(0,ke.mG)(this,void 0,void 0,function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&e(!0),n(new Error)):(this.countRetryLoadJS++,this.countRetryLoadJS>3?n(new Error("T\u1ea3i th\u01b0 vi\u1ec7n kh\xf4ng th\xe0nh c\xf4ng")):this.loadingFileJs())},1e3)}))})}ngOnChanges(){this.openSelectFile&&this.selectFileClick()}ngOnInit(){this.form=this.fb.group({fileScanner:new m.p4(""),fileScannerMobile:new m.p4("")}),this.openSelectFile&&this.selectFileClick(),this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.QS),t.Y36(_t.v),t.Y36(xt.$4),t.Y36(Fe._),t.Y36(Dt.U),t.Y36(mn.$),t.Y36(An.$),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-file-scan-offline-exam-new"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Pg,5),t.Gf(Lg,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.fileInput=i.first),t.iGM(i=t.CRH())&&(n.fileInputMobile=i.first)}},hostBindings:function(e,n){1&e&&t.NdJ("beforeunload",function(a){return n.askBeforeCloseWindow(a)},!1,t.Jf7)},inputs:{openSelectFile:"openSelectFile",examObj:"examObj",loadedJs:"loadedJs",hasExamOffline:"hasExamOffline",tokenScan:"tokenScan",examOfflineMessage:"examOfflineMessage",backToLink:"backToLink"},outputs:{saveStudentMarkEmit:"saveStudentMarkEmit",showStudentMarkEmit:"showStudentMarkEmit",firstSuccessResultId:"firstSuccessResultId"},features:[t.qOj,t.TTD],decls:18,vars:9,consts:[[1,"absolute","h-full","w-full","bg-white","dark:bg-darkmode-600","top-0","left-0","z-50"],[1,"scan-file-body"],[1,"scan-file-content"],[3,"formGroup","hidden"],["type","file","formControlName","fileScanner","webkitdirectory","","multiple","",1,"form-control",3,"change"],["fileInput",""],["type","file","formControlName","fileScannerMobile","accept","image/*","multiple","",1,"form-control",3,"change"],["fileInputMobile",""],[1,"mx-auto","px-4"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-5","self-center"],["class","h5",4,"ngIf"],["class","flex items-center",4,"ngIf"],["class","items-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-12 align-self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-right",4,"ngIf"],[1,"h5"],[1,"flex","items-center"],[1,"h6"],["class","mb-1 mr-1","style","font-weight: 400;",4,"ngIf"],["style","font-size: 15px; font-weight: 550;",4,"ngIf"],["class","ml-2",4,"ngIf"],[1,"mb-1","mr-1",2,"font-weight","400"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","15px","font-weight","550"],[1,"ml-2"],["azt-track-service","file-scan-offline-UDkBx5P8HR",1,"link__color","link__hover",3,"click"],[1,"mb-0",2,"font-size","14px","font-weight","400"],[2,"color","#DD0000","font-size","15px"],["azt-track-service","file-scan-offline-Y3xSQzwONg",1,"link__color","link__hover",3,"click"],[1,"items-center"],["class","mb-0","style","font-size: 14px; font-weight: 400",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-7","self-center","text-center"],[1,"mb-1",2,"font-size","14px"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","","class","btn-custom-file-scan","style","text-transform: none; margin-left: auto!important; margin-right: auto!important;",3,"click",4,"ngIf"],["azt-track-service","file-scan-offline-rLjSHvBSxk","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important","margin-top","0.75rem!important",3,"click"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important",3,"click"],[1,"col-span-12","md:col-span-12","align-self-center","text-center"],[1,"flex","flex-col","md:flex-row","mx-auto",2,"justify-content","center"],["class","mt-3 mr-3",4,"ngIf"],[1,"mt-3",3,"ngClass"],["azt-track-service","file-scan-offline-QP5Xn4YbcL",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"mt-3","mr-3"],["azt-track-service","file-scan-offline-rjEiLoTin7",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"col-span-12","md:col-span-7","self-center","text-right"],[1,"inline-flex","w-full","items-center","justify-end"],["id","processFileScan"],["style","vertical-align: middle; margin-left: 30px; color: #2361ae",4,"ngIf"],["id","doneFileScan"],[2,"vertical-align","middle","margin-left","30px","color","#2361ae"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"input",4,5),t.NdJ("change",function(a){return n.selectFileDirectory(a)}),t.qZA(),t.TgZ(6,"input",6,7),t.NdJ("change",function(a){return n.selectFile(a)}),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"div",10),t.YNc(11,jg,3,3,"p",11),t.YNc(12,Jg,10,8,"div",12),t.YNc(13,Bg,10,8,"div",12),t.YNc(14,Yg,5,4,"div",13),t.qZA(),t.YNc(15,$g,8,7,"div",14),t.YNc(16,Vg,10,10,"div",15),t.YNc(17,tf,5,1,"div",16),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.form)("hidden",!0),t.xp6(8),t.Q6J("ngIf",n.loadingFileJS),t.xp6(1),t.Q6J("ngIf",n.isSelectedFile),t.xp6(1),t.Q6J("ngIf",n.uploadFileScanError.length>0),t.xp6(1),t.Q6J("ngIf",n.invalidDataCallMarkObjs.length>0),t.xp6(1),t.Q6J("ngIf",(n.scanningStatus.isSavingDone||n.scanningStatus.isSavingFail)&&!n.scanningStatus.isSaving&&!n.firstTimeScan),t.xp6(1),t.Q6J("ngIf",n.firstTimeScan),t.xp6(1),t.Q6J("ngIf",n.isSelectedFile&&!n.scanningStatus.isSavingDone&&!n.scanningStatus.isSavingFail))},dependencies:[y.mk,y.sg,y.O5,je.eB,Wt.Hw,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,Jt.M,tt.bT],styles:[$i]}),o})(),_f=(()=>{class o extends R.Q{constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data=i,this.isMobile=!1}getErrorCode(e){return"not_found_exam_id"==e?"lang_auto_khong_quet_duoc_ma_de":"not_found_student_code"==e?"lang_auto_khong_quet_duoc_so_bao_danh_hoc_sinh":"exist_exam_id_and_student_code"==e?"lang_auto_ma_de_ma_hoc_sinh_khong_ton_tai_dot":"process_scan_false"==e?"lang_auto_loi_trong_qua_tring_scan_khong_hien_thi_anh_ket_qua":e}processData(){this.data.forEach((e,n)=>{var i=document.getElementById("processFileScan"+n),a=document.getElementById("doneFileScan"+n);i&&a&&(e.img_in.width=.7*e.img_in.naturalWidth,e.img_in.style.height="auto",e.img_in.style.maxWidth="60%",e.img_in.classList.add("img-fluid"),i.appendChild(e.img_in),e.img_out&&(e.img_out.width=.7*e.img_in.naturalWidth,e.img_out.classList.add("img-fluid"),e.img_out.style.marginLeft=this.isMobile?"5px":"15px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle"))})}onNoClick(){this.dialogRef.close(!1)}ngAfterViewInit(){var e=document.getElementById("processFileScan0");document.getElementById("doneFileScan0")&&e&&this.processData()}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["scan-false-dialog-new"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"text-xl","font-medium","items-center","my-2"],["class","mt-2 mx-auto",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-QIrwUMpnlE",1,"btn","w-24","btn-secondary",3,"click"],[1,"mt-2","mx-auto"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"inline-flex","w-full","items-center"],[1,"w-full","border","border-slate-200/60","rounded","mx-auto",3,"id"],[3,"id"]],template:function(e,n){if(1&e&&(t.YNc(0,ef,1,0,"azt-loading-effect",0),t.YNc(1,af,11,7,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",1==n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.sg,y.O5,zt.Q,tt.bT],styles:[$i]}),o})(),df=(()=>{class o extends R.Q{constructor(e,n,i,a){super(e),this.commonService=e,this.permissionService=n,this.dialogRef=i,this.data=a}redirectToCreateOfflineTest(){var e,n,i,a,r;this.permissionService.hasFullPermission("exam",null===(e=this.data.examObj)||void 0===e?void 0:e.permissionObj)?(this.commonService.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!==(n=this.data.examObj)&&void 0!==n&&n.categoryId?null===(i=this.data.examObj)||void 0===i?void 0:i.categoryId:0}/${null===(a=this.data.examObj)||void 0===a?void 0:a.hashId}`,"?backto="+encodeURIComponent(null!==(r=this.data.backToLink)&&void 0!==r?r:"")),this.dialogRef.close(!1)):this.showErrorSnack("lang_auto_ban_khong_co_quyen_tao_bai_thi_offline_cho_de_thi_nay")}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(An.$),t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["no-exam-offline-dialog"]],features:[t.qOj],decls:16,vars:13,consts:[[1,"mt-1","text-center"],[1,"h5"],[1,"mt-2"],["class","mt-1 text-center",4,"ngIf"],["align","end"],["azt-track-service","file-scan-offline-tvKJ1-tcNU","mat-raised-button","","color","basic",3,"click"],[1,"h6",2,"font-size","13px","color","#ACACAC"],["azt-track-service","file-scan-offline-_MOe_cWXcO",1,"link__color","link__hover",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"p",1),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",2)(6,"p"),t._uU(7),t.qZA()(),t.YNc(8,sf,4,3,"div",3),t.ALo(9,"isDocxOnly"),t.YNc(10,rf,7,6,"div",3),t.ALo(11,"isPdfOnly"),t.qZA(),t.TgZ(12,"mat-dialog-actions",4)(13,"button",5),t.NdJ("click",function(){return n.onNoClick()}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()),2&e){let i,a;t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_cham_diem_thi_offline")),t.xp6(4),t.hij(" * ","lang_auto_note_use_case_file_scan_in_exam_offline"," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,7,null!==(i=null==n.data.examObj?null:n.data.examObj.examType)&&void 0!==i?i:0)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,9,null!==(a=null==n.data.examObj?null:n.data.examObj.examType)&&void 0!==a?a:0)),t.xp6(4),t.Oqu(t.lcZ(15,11,"lang_auto_dong"))}},dependencies:[y.O5,je.eB,U.Rb,U.ev,tt.bT,tt.t5,tt.yb],styles:[$i]}),o})(),hi=(()=>{class o extends R.Q{btnCloseDialog(){this.dialogRef.close()}constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data=i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-dialog-warning"]],features:[t.qOj],decls:16,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8),t._UZ(11,"div",9),t.qZA()()(),t.TgZ(12,"div",10)(13,"button",11),t.NdJ("click",function(){return n.btnCloseDialog()}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,3,"lang_auto_canh_bao")," "),t.xp6(3),t.Q6J("innerHtml",n.data.content,t.oJD),t.xp6(3),t.hij(" ",t.lcZ(15,5,"lang_auto_dong")," "))},dependencies:[tt.bT],encapsulation:2}),o})();var Ho=T(24985),gi=T(33776),uf=T(76244),Ki=T(71572);const Un=function(o){return{opacity:o}};function mf(o,s){if(1&o){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"li",34),t.ALo(1,"viewPermission"),t.TgZ(2,"a",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleReturnOfflineShare(i.initData.examObj))}),t.O4$(),t.TgZ(3,"svg",65),t._UZ(4,"path",66)(5,"polyline",22)(6,"path",67)(7,"path",68),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(7,Un,t.xi3(1,2,null==e.initData.examObj?null:e.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(9,5,"lang_auto_tra_ket_qua_thi_offline")," ")}}function pf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",70)(3,"path",71),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function hf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",73)(1,"a",74,4),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.redirectToClassDetail(a))}),t._uU(3),t.qZA()()}if(2&o){const e=s.$implicit,n=t.MAs(2);t.xp6(1),t.s9C("matTooltip",null==e.classObj?null:e.classObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.xp6(2),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function gf(o,s){if(1&o&&(t.ynx(0),t.YNc(1,hf,4,4,"div",72),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function ff(o,s){1&o&&(t.TgZ(0,"div",75)(1,"a",76),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function xf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",77),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToUpdateExam())}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",70)(3,"path",71),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function vf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogExamDetail())}),t.O4$(),t.TgZ(1,"svg",79),t._UZ(2,"path",80)(3,"polyline",22)(4,"line",81)(5,"line",82)(6,"line",83),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xem_chi_tiet")," "))}function bf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",30)(1,"h3",31),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",32)(5,"ul",33)(6,"li",34),t.ALo(7,"deletePermission"),t.TgZ(8,"a",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openDeleteExam())}),t.O4$(),t.TgZ(9,"svg",12),t._UZ(10,"path",36)(11,"path",37)(12,"path",38)(13,"line",39)(14,"line",40),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(17,"li",34),t.ALo(18,"editPermission"),t.TgZ(19,"a",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectToActionOnlOff())}),t.O4$(),t.TgZ(20,"svg",12),t._UZ(21,"path",42)(22,"circle",43),t.qZA(),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(25,"li",34),t.ALo(26,"statisticalPermission"),t.TgZ(27,"a",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectToStatistical())}),t.O4$(),t.TgZ(28,"svg",45),t._UZ(29,"path",46)(30,"path",47),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(33,"li",34),t.ALo(34,"viewPermission"),t.TgZ(35,"a",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openVideoMonitor())}),t.O4$(),t.TgZ(36,"svg",12),t._UZ(37,"circle",49)(38,"circle",50)(39,"path",51)(40,"path",52),t.qZA(),t._uU(41),t.ALo(42,"mytranslate"),t.qZA()(),t.YNc(43,mf,10,9,"li",53),t.qZA()()(),t.kcU(),t.TgZ(44,"div",54)(45,"div",55)(46,"h3",31),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.YNc(49,pf,6,3,"button",56),t.ALo(50,"editPermission"),t.ALo(51,"configPermission"),t.qZA(),t.TgZ(52,"div",57),t.YNc(53,gf,2,1,"ng-container",58),t.YNc(54,ff,4,3,"ng-template",null,59,t.W1O),t.qZA()(),t.TgZ(56,"div",60)(57,"div",55)(58,"h3",31),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.YNc(61,xf,6,3,"button",61),t.ALo(62,"editPermission"),t.qZA(),t.TgZ(63,"div",62),t.YNc(64,vf,9,3,"button",63),t.ALo(65,"viewPermission"),t.qZA()()}if(2&o){const e=t.MAs(55),n=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,17,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(55,Un,t.xi3(7,19,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(9),t.hij(" ",t.lcZ(16,22,"lang_auto_xoa")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(57,Un,t.xi3(18,24,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(24,27,"lang_auto_cai_dat")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(59,Un,t.xi3(26,29,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(32,32,"lang_auto_thong_ke")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(61,Un,t.xi3(34,34,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(42,37,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.Q6J("ngIf",!n.isNotTestedYet),t.xp6(4),t.hij(" ",t.lcZ(48,39,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(50,41,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")||t.xi3(51,44,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==n.initData.examObj?null:n.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(60,47,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(62,49,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(65,52,null==n.initData.examObj?null:n.initData.examObj.permissionObj,"exam"))}}function wf(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",84),t._UZ(2,"polyline",85),t.qZA()())}function Tf(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",84),t._UZ(2,"polyline",86),t.qZA()())}let Cf=(()=>{class o extends R.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}copyLinkToClipboard(){return this.linkExam}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(n=>{this.dialog.open(hi,{data:{isShow:!0,content:n},restoreFocus:!1})})}openDeleteExam(){var e;this.permissionService.hasDeletePermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(gi.h,{data:{obj:this.initData.examObj,type:2,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogExamConfig(e){var n;this.dialog.open(Si.Y,{data:{hashId:null===(n=this.initData.examObj)||void 0===n?void 0:n.hashId},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj=a,this.reloadApi.emit())})}openDialogExamDetail(){var e,n,i;this.permissionService.hasViewPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?(this.examDetailDialog={obj:this.initData.examObj,curCateId:null!==(n=this.initData.examObj)&&void 0!==n&&n.categoryId?null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId:0,isOnLib:0,isShow:!0},this.dialog.open(Ho.l,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:this.examDetailDialog,restoreFocus:!1}).afterClosed().subscribe(l=>{})):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}handleReturnOfflineShare(e){if(e){let n=this.permissionService.hasViewPermission("exam",e.permissionObj);e.examType&&!this.homeworkExamService.isPdfExam(e.examType)?this.showErrorSnack("lang_auto_hien_tinh_nang_tra_ket_qua_thi_offline_chua_ho_tro_de_thi_docx"):n?this.dialog.open(Hi.W,{data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}else this.showErrorSnack("lang_core_invalid_data")}redirectToActionOnlOff(){var e,n,i,a,r,l,c,_,d,p,h;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let w=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,k=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";k&&k.includes("shareType")&&(w=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(k)),this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!==(p=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==p?p:0}/${null===(h=this.initData.examObj)||void 0===h?void 0:h.hashId}`,`?backto=${encodeURIComponent(w)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectConfigExamOnline(){var e,n,i,a,r,l,c,_,d,p,h;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let w=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,k=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";k&&k.includes("shareType")&&(w=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(k)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${null!==(p=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==p?p:0}/${null===(h=this.initData.examObj)||void 0===h?void 0:h.hashId}`,`?backto=${encodeURIComponent(w)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){var e,n,i,a,r,l,c,_,d,p;if(this.permissionService.hasStatisticalPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let f=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,w=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";w&&w.includes("shareType")&&(f=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(w)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${null!==(d=this.initData.examObj)&&void 0!==d&&d.categoryId?this.initData.examObj.categoryId:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.id}`,"?backto="+encodeURIComponent(f))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openVideoMonitor(){var e,n,i,a,r,l;if(3!=(null===(e=this.initData.examObj)||void 0===e?void 0:e.autoMonitor)&&(this.permissionService.hasFullPermission("exam",null===(n=this.initData.examObj)||void 0===n?void 0:n.permissionObj)&&this.permissionService.hasViewPermission("exam",null===(i=this.initData.examObj)||void 0===i?void 0:i.permissionObj)?this.openDialogWaring("lang_auto_chua_bat_giam_sat_moi"):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")),3==(null===(a=this.initData.examObj)||void 0===a?void 0:a.autoMonitor)&&this.permissionService.hasViewPermission("exam",this.initData.examObj.permissionObj)&&this.monitorService.checkValidForSetUpMonitor()){var _=this.baseApiService.getUserObj();if(typeof aztExam<"u"&&aztExam&&(aztExam.ver=this.monitorService.getMNoteVer(),aztExam.showMonitorTeacher)){var d={user:{token:_.rememberToken,userid:_.id,username:_.fullName},config:{domainApi:Te.N.base_api,urlGetPublicForLive:"s3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"s3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:null===(r=this.initData.examObj)||void 0===r?void 0:r.hashId,examid:null===(l=this.initData.examObj)||void 0===l?void 0:l.id,userlist:this.userList,examconfig:this.initData.examObj,firebaseApp:this.fireStoreService,filetypeStr:this.initData.fileTypeStr};aztExam.showMonitorTeacher(d)}}}redirectToClassDetail(e){var n,i,a,r,l,c,_,d;let p=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,h=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";h&&h.includes("shareType")&&(p=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(h)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(d=e.classObj)||void 0===d?void 0:d.id}`,`?backto=${p}`)}toggleFullDescription(){this.checkFullDescription=!this.checkFullDescription}redirectToUpdateExam(){var e,n,i,a,r,l,c,_,d,p;let h=`/admin/testbank/exam-results-list/${null!==(n=null===(e=this.initData.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==n?n:0}/${null===(i=this.initData.examObj)||void 0===i?void 0:i.id}/0`,f=null!==(a=this.commonService.getMyQueryParam("backto"))&&void 0!==a?a:"";f&&f.includes("shareType")&&(h=`/admin/testbank/exam-results-list/${null!==(l=null===(r=this.initData.examObj)||void 0===r?void 0:r.categoryId)&&void 0!==l?l:0}/${null===(c=this.initData.examObj)||void 0===c?void 0:c.id}/0?backto=`+encodeURIComponent(f)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${null!==(d=null===(_=this.initData.examObj)||void 0===_?void 0:_.categoryId)&&void 0!==d?d:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.id}`,`?backto=${encodeURIComponent(h)}`)}constructor(e,n,i,a,r,l,c){super(e),this.commonService=e,this.dialog=n,this.permissionService=i,this.monitorService=a,this.baseApiService=r,this.fireStoreService=l,this.homeworkExamService=c,this.initData={studentsNotInClassResults:[]},this.userList=[],this.isNotTestedYet=!1,this.reloadApi=new t.vpe,this.isShowActions=!0,this.linkExam="",this.nextPage="",this.examDetailDialog={obj:{},curCateId:-1,isOnLib:-1,isShow:!1},this.loadingObj={},this.allQuestionObjs=[],this.dataMixQuestionObjs=[],this.offlineMixQuestionObjs=[],this.isLoadingLib=!1,this.checkFullDescription=!1}ngOnInit(){var e;let n=this.commonService.getCurrentDomain();this.linkExam=`${n}/de-thi/${null===(e=this.initData.examObj)||void 0===e?void 0:e.hashId}`,super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.on),t.Y36(An.$),t.Y36(Uo.M),t.Y36(Fe._),t.Y36(uf.C),t.Y36(Ve.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["menu-online-test"]],inputs:{initData:"initData",userList:"userList",isNotTestedYet:"isNotTestedYet"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:47,vars:31,consts:[[1,"box","p-3",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","flex",2,"min-width","135px"],["azt-track-service","menu-online-test-e8RvVr3HPMz",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-online-test-JuzsQFkbn-n",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-online-test-353h1DUlYNc",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-online-test-gvg0oBjKoz0",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-online-test--xkt2Oho69C",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-online-test-SyHOcHV1qRi",1,"dropdown-item",3,"click"],["cx","12","cy","10","r","8"],["cx","12","cy","10","r","3"],["d","M7 22h10"],["d","M12 22v-4"],[3,"ngStyle",4,"ngIf"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],["azt-track-service","menu-online-test-B-MAROi1YQ-","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-online-test-IOoMXZJczdx","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-2"],["azt-track-service","menu-online-test-WA9SAv4z5tk","class","btn-text-primary font-medium",3,"click",4,"ngIf"],["azt-track-service","menu-online-test-A5ZKlgHQbp",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-online-test-B-MAROi1YQ-",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["class","col-span-6 md:col-span-4 2lg:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-4","2lg:col-span-3"],["azt-track-service","menu-online-test-z2H-5NP7SkD",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-online-test-IOoMXZJczdx",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["azt-track-service","menu-online-test-WA9SAv4z5tk",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.showCopySuccess()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"rect",8)(10,"path",9),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.kcU(),t._UZ(13,"azt-download-qr-code",10),t.qZA()(),t.TgZ(14,"div",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),t.qZA(),t.kcU(),t.TgZ(20,"span",17),t._uU(21),t.ALo(22,"mytranslate"),t.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(24,"div",11),t.O4$(),t.TgZ(25,"svg",12),t._UZ(26,"path",18)(27,"circle",19),t.qZA(),t.kcU(),t.TgZ(28,"span",17),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",11),t.O4$(),t.TgZ(32,"svg",20),t._UZ(33,"path",21)(34,"polyline",22)(35,"path",23),t.qZA(),t.kcU(),t.TgZ(36,"span",17),t._uU(37),t.ALo(38,"mytranslate"),t.ALo(39,"number"),t.qZA()(),t.TgZ(40,"div",24),t._UZ(41,"azt-share",25),t.qZA()(),t.YNc(42,bf,66,63,"ng-template",26),t.TgZ(43,"div",27)(44,"button",28),t.NdJ("click",function(){return n.toggleShowActions()}),t.YNc(45,wf,3,0,"span",29),t.YNc(46,Tf,3,0,"span",29),t.qZA()()()),2&e){const i=t.MAs(4);let a;t.xp6(3),t.s9C("matTooltip",null==n.initData.examObj?null:n.initData.examObj.name),t.s9C("matTooltip",null==n.initData.examObj?null:n.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",null==n.initData.examObj?null:n.initData.examObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",n.copyLinkToClipboard()),t.xp6(4),t.hij(" ",t.lcZ(12,19,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_exam_qrcode_"+(null==n.initData.examObj?null:n.initData.examObj.hashId))("linkUrl",n.copyLinkToClipboard()),t.xp6(8),t.hij(" ",t.lcZ(22,21,"lang_testbank_tested_list_date_create")+": "+t.lcZ(23,23,null==n.initData.examObj?null:n.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(30,25,"lang_auto_nguoi_tao")+": "+(null==n.initData.examCreatorObj?null:n.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(38,27,"lang_testbank_tested_list_number_quizzes")+": "+(n.initData.totalAttended?n.initData.totalAttended:t.lcZ(39,29,0))," "),t.xp6(4),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(a=null==n.initData.examObj?null:n.initData.examObj.id)&&void 0!==a?a:0)("examWithPermissionObj",n.initData.examObj),t.xp6(1),t.Q6J("ngIf",n.isShowActions),t.xp6(3),t.Q6J("ngIf",n.isShowActions),t.xp6(1),t.Q6J("ngIf",!n.isShowActions)}},dependencies:[y.sg,y.O5,y.PC,Tn.i3,Qt.Kd,Ki.o,Ke.Q,ti.I,y.JJ,tt.bT,tt.BU,tt.vL,tt.Pz,tt.El,tt._W,tt.tO],encapsulation:2}),o})();const kf=function(o){return{"btn-primary":o}};function Of(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw();return t.KtG(a.changeViewHashId(i.offlineMixquestionHashId))}),t._uU(2),t.ALo(3,"formatOfflineExamHashIdToNumber"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,kf,n.hashId==e.offlineMixquestionHashId&&"normal"==n.type)),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.offlineMixquestionHashId)," ")}}function yf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw();return t.KtG(a.changeViewHashId(i.offlineMixquestionHashId))}),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.offlineMixquestionHashId)," ")}}function Af(o,s){if(1&o&&t.YNc(0,yf,3,3,"button",12),2&o){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("ngIf",e.offlineMixquestionHashId===n.hashId)}}function Sf(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Of,4,6,"ng-container",9),t.YNc(2,Af,1,1,"ng-template",null,10,t.W1O),t.BQk()),2&o){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf","normal"==n.type)("ngIfElse",e)}}function Zf(o,s){if(1&o&&(t.TgZ(0,"div",17)(1,"button",18),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=s.$implicit,n=s.index;t.xp6(2),t.hij(" ",n+1+"-"+t.lcZ(3,1,e)," ")}}function Ef(o,s){if(1&o&&(t.TgZ(0,"div",15),t.YNc(1,Zf,4,3,"div",16),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.rightAnswers)}}function If(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ef,2,1,"div",14),t.BQk()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngIf",e.offlineMixquestionHashId===n.hashId)}}function Mf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeDialog())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dong")," "))}let Yo=(()=>{class o extends R.Q{closeDialog(){this.dialogRef.close()}changeViewHashId(e){this.hashId=e??1,this.checkTotalQuestion()}checkTotalQuestion(){var e,n;let i=this.offlineExportObjs.length;for(let a=0;a<i;a++){const r=this.offlineExportObjs[a];this.hashId===r.offlineMixquestionHashId&&(this.totalQuestionAnswer=null!==(n=null===(e=r.rightAnswers)||void 0===e?void 0:e.length)&&void 0!==n?n:0)}}ngOnInit(){this.checkTotalQuestion()}constructor(e,n,i){var a;super(e),this.commonService=e,this.dialogRef=n,this.data=i,this.offlineData={},this.offlineExportObjs=[],this.type="",this.hashId=0,this.totalQuestionAnswer=0,i&&(this.offlineData=i.offlineItem,this.offlineExportObjs=i.offlineExportObjs,this.type=i.type,this.hashId=null!==(a=i.offlineItem.hashId)&&void 0!==a?a:0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["preview-offline-exam"]],inputs:{offlineExportObjs:"offlineExportObjs",type:"type",hashId:"hashId"},features:[t.qOj],decls:18,vars:14,consts:[[1,"box","py-4","px-4"],[1,"text-md","font-medium","inline-block","mr-2","mt-2"],[4,"ngFor","ngForOf"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-4","overflow-auto",2,"max-height","50vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"text-md","px-3","mt-3"],[1,"inline-block","ml-1"],[1,"lowercase"],["class","text-right mt-4",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["azt-track-service","preview-offline-exam-Lnr2h-iZa9H",1,"btn","inline-block","border","border-slate-200","dark:border-darkmode-400","mr-2","mt-2","p-1","text-center","w-12",3,"ngClass","click"],["azt-track-service","preview-offline-exam-06Q137OqH7a","class","btn box inline-block border border-slate-200 dark:border-darkmode-400 mr-2 mt-2 p-1 text-center w-12",3,"click",4,"ngIf"],["azt-track-service","preview-offline-exam-06Q137OqH7a",1,"btn","box","inline-block","border","border-slate-200","dark:border-darkmode-400","mr-2","mt-2","p-1","text-center","w-12",3,"click"],["class","grid grid-cols-12 gap-3 p-3",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-3 sm:col-span-2 md:col-span-1",4,"ngFor","ngForOf"],[1,"col-span-3","sm:col-span-2","md:col-span-1"],[1,"btn","btn-secondary","btn-sm","w-full"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-outline-secondary","w-24",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Sf,4,2,"ng-container",2),t.TgZ(5,"div",3)(6,"ng-scrollbar",4)(7,"p",5),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"span",6),t._uU(11),t.TgZ(12,"span",7),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t._uU(15,") "),t.qZA()(),t.YNc(16,If,2,1,"ng-container",2),t.qZA()(),t.YNc(17,Mf,4,3,"div",8),t.qZA()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,8,"lang_auto_ma_de")+": "," "),t.xp6(2),t.Q6J("ngForOf",n.offlineExportObjs),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(2),t.hij(" ",t.lcZ(9,10,"lang_auto_bang_dap_an")," "),t.xp6(3),t.hij(" (",n.totalQuestionAnswer," "),t.xp6(2),t.Oqu(t.lcZ(14,12,"lang_auto_cau")),t.xp6(3),t.Q6J("ngForOf",n.offlineExportObjs),t.xp6(1),t.Q6J("ngIf","dialog"==n.type))},dependencies:[y.mk,y.sg,y.O5,P.KC,tt.bT,tt.q7],encapsulation:2}),o})();function Pf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDeleteExam())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",42)(3,"path",43)(4,"path",44)(5,"line",45)(6,"line",46),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}function Lf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToSettingExamOffline())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",48)(3,"circle",49),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_cai_dat")," "))}function jf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",50),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToStatistical())}),t.O4$(),t.TgZ(1,"svg",51),t._UZ(2,"path",52)(3,"path",53),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_thong_ke")," "))}function Nf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",54),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleReturnOfflineShare(i.initData.examObj))}),t.O4$(),t.TgZ(2,"svg",55),t._UZ(3,"path",56)(4,"polyline",16)(5,"path",57)(6,"path",58),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function qf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",60)(3,"path",61),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function Qf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",63)(1,"a",64),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.redirectToClassDetail(a))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(1),t.s9C("matTooltip",null==e.classObj?null:e.classObj.name),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function Df(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Qf,3,2,"div",62),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function Uf(o,s){1&o&&(t.TgZ(0,"div",65)(1,"a",66),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function Ff(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",67),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToUpdateExam())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",60)(3,"path",61),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function Rf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",69)(1,"button",70),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.openDialogPreview(a))}),t.O4$(),t.TgZ(2,"svg",71),t._UZ(3,"path",72)(4,"polyline",16)(5,"line",73)(6,"line",74)(7,"line",75),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.ALo(10,"formatOfflineExamHashIdToNumber"),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(8),t.AsE(" ",t.lcZ(9,2,"lang_auto_ma_de")," ",t.xi3(10,4,e.hashId,3)," ")}}function zf(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Rf,11,7,"div",68),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.offlineMixQuestionObjs)}}function Jf(o,s){}function Bf(o,s){if(1&o&&(t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",27)(5,"ul",28)(6,"li"),t.YNc(7,Pf,9,3,"a",29),t.ALo(8,"deletePermission"),t.qZA(),t.TgZ(9,"li"),t.YNc(10,Lf,6,3,"a",30),t.ALo(11,"editPermission"),t.qZA(),t.TgZ(12,"li"),t.YNc(13,jf,6,3,"a",31),t.ALo(14,"statisticalPermission"),t.qZA(),t.YNc(15,Nf,9,3,"li",23),t.ALo(16,"viewPermission"),t.qZA()()(),t.TgZ(17,"div",32)(18,"div",2)(19,"h3",26),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.YNc(22,qf,6,3,"button",33),t.ALo(23,"editPermission"),t.ALo(24,"configPermission"),t.qZA(),t.TgZ(25,"div",34),t.YNc(26,Df,2,1,"ng-container",35),t.YNc(27,Uf,4,3,"ng-template",null,36,t.W1O),t.qZA()(),t.TgZ(29,"div",37)(30,"div",2)(31,"h3",26),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.YNc(34,Ff,6,3,"button",38),t.ALo(35,"editPermission"),t.qZA(),t.TgZ(36,"div",39),t.YNc(37,zf,2,1,"ng-container",35),t.YNc(38,Jf,0,0,"ng-template",null,40,t.W1O),t.qZA()()),2&o){const e=t.MAs(28),n=t.MAs(39),i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,13,"lang_auto_menu")," "),t.xp6(5),t.Q6J("ngIf",t.xi3(8,15,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(11,18,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(14,21,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!i.isNotTestedYet&&t.xi3(16,24,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(5),t.hij(" ",t.lcZ(21,27,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(23,29,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")||t.xi3(24,32,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==i.initData.examObj?null:i.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(33,35,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(35,37,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",null==i.initData.offlineMixQuestionObjs?null:i.initData.offlineMixQuestionObjs.length)("ngIfElse",n)}}function Hf(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",76),t._UZ(2,"polyline",77),t.qZA()())}function Yf(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",76),t._UZ(2,"polyline",78),t.qZA()())}function Gf(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-preview-exam",79),t.NdJ("closeDialog",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialogPreviewExam(i))}),t.qZA()}}let $f=(()=>{class o extends R.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}openDialogExamConfig(e){var n;this.dialog.open(Si.Y,{data:{hashId:null===(n=this.initData.examObj)||void 0===n?void 0:n.hashId},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj=a,this.reloadApi.emit())})}openDialogPreview(e){this.dialog.open(Yo,{data:{offlineItem:e,offlineExportObjs:this.offlineExportObjs,type:"dialog"},restoreFocus:!1})}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(n=>{this.dialog.open(hi,{data:{isShow:!0,content:n},restoreFocus:!1})})}closeDialogPreviewExam(e){this.examDetailDialog={obj:{},isShow:!1}}openDeleteExam(){var e;this.permissionService.hasViewPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(gi.h,{data:{obj:this.initData.examObj,type:2,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.commonService.getTranslate("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay").subscribe(i=>{this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")})}closeDeleteExam(e){e?(this.dataDeleteDialog={obj:{},type:0,isShow:!1},this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.dataDeleteDialog={obj:{},type:0,isShow:!1}}handleReturnOfflineShare(e){if(e){let n=this.permissionService.hasViewPermission("exam",e.permissionObj);e.examType&&!this.homeworkExamService.isPdfExam(e.examType)?this.showErrorSnack("lang_auto_hien_tinh_nang_tra_ket_qua_thi_offline_chua_ho_tro_de_thi_docx"):n?this.dialog.open(Hi.W,{data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}else this.showErrorSnack("lang_core_invalid_data")}redirectToSettingExamOffline(){var e,n,i,a,r,l,c,_,d,p,h;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let w=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,k=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";k&&k.includes("shareType")&&(w=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(k)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${null!==(p=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==p?p:0}/${null===(h=this.initData.examObj)||void 0===h?void 0:h.hashId}`,`?backto=${encodeURIComponent(w)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){var e,n,i,a,r,l,c,_,d,p;if(this.permissionService.hasStatisticalPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let f=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,w=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";w&&w.includes("shareType")&&(f=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(w)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${null!==(d=this.initData.examObj)&&void 0!==d&&d.categoryId?this.initData.examObj.categoryId:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.id}`,"?backto="+encodeURIComponent(f))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToClassDetail(e){var n,i,a,r,l,c,_,d;let p=`/admin/testbank/exam-results-list/${null!==(i=null===(n=this.initData.examObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.examObj)||void 0===a?void 0:a.id}/0`,h=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";h&&h.includes("shareType")&&(p=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.examObj)||void 0===_?void 0:_.id}/0?backto=`+encodeURIComponent(h)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(d=e.classObj)||void 0===d?void 0:d.id}`,`?backto=${p}`)}redirectToUpdateExam(){var e,n,i,a,r,l,c,_,d,p;let h=`/admin/testbank/exam-results-list/${null!==(n=null===(e=this.initData.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==n?n:0}/${null===(i=this.initData.examObj)||void 0===i?void 0:i.id}/0`,f=null!==(a=this.commonService.getMyQueryParam("backto"))&&void 0!==a?a:"";f&&f.includes("shareType")&&(h=`/admin/testbank/exam-results-list/${null!==(l=null===(r=this.initData.examObj)||void 0===r?void 0:r.categoryId)&&void 0!==l?l:0}/${null===(c=this.initData.examObj)||void 0===c?void 0:c.id}/0?backto=`+encodeURIComponent(f)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${null!==(d=null===(_=this.initData.examObj)||void 0===_?void 0:_.categoryId)&&void 0!==d?d:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.id}`,`?backto=${encodeURIComponent(h)}`)}getAnswerOffline(e){this.initStatusObj(),this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultForOfflineExamGet(e).subscribe(n=>{var i,a,r;1==n.success?(this.offlineExportObjs=null!==(a=null===(i=n.data)||void 0===i?void 0:i.objs)&&void 0!==a?a:[],this.successStatusObj()):this.errorStatusObj(null!==(r=n.message)&&void 0!==r?r:"",!0)}))}constructor(e,n,i,a,r){super(e),this.commonService=e,this.dialog=n,this.offlineExamExportService=i,this.permissionService=a,this.homeworkExamService=r,this.initData={studentsNotInClassResults:[]},this.isNotTestedYet=!1,this.reloadApi=new t.vpe,this.examDetailDialog={obj:{},curCateId:-1,isOnLib:-1,isShow:!1},this.dataDeleteDialog={obj:{},type:0,isShow:!1},this.linkExam="",this.isShowActions=!0,this.offlineExportObjs=[],this.dataDialogWarning={isShow:!1,content:""}}ngOnInit(){var e,n,i;let a=this.commonService.getCurrentDomain();this.linkExam=`${a}/de-thi/${null===(e=this.initData.examObj)||void 0===e?void 0:e.hashId}`,!(null===(n=this.initData.examObj)||void 0===n)&&n.hashId&&this.getAnswerOffline(null===(i=this.initData.examObj)||void 0===i?void 0:i.hashId),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.on),t.Y36(xt.qr),t.Y36(An.$),t.Y36(Ve.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["menu-offline-test"]],inputs:{initData:"initData",isNotTestedYet:"isNotTestedYet"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:40,vars:26,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",2,"max-width","90%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-offline-test-C7d866E60NA",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"closeDialog",4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],["azt-track-service","menu-offline-test-v0ibVgHaHZp","class","dropdown-item text-danger",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-boVa6dq1W1j","class","dropdown-item",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-C_QDr7XeJG-","class","dropdown-item",3,"click",4,"ngIf"],[1,"azt-document-who","mt-4"],["azt-track-service","menu-offline-test-l07YIWF2M_z","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-list-code","mt-4"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","mt-3"],["noExamOffline",""],["azt-track-service","menu-offline-test-v0ibVgHaHZp",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-offline-test-boVa6dq1W1j",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-offline-test-C_QDr7XeJG-",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-offline-test-yp0Mu41Mr",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-offline-test-l07YIWF2M_z",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["class","col-span-4 2lg:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-4","2lg:col-span-3"],["azt-track-service","menu-offline-test-4CoI06cv-3-",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["class","col-span-6",4,"ngFor","ngForOf"],[1,"col-span-6"],["azt-track-service","menu-offline-test-Md6K9sfq64w",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],[3,"closeDialog"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5),t.O4$(),t.TgZ(7,"svg",6),t._UZ(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),t.qZA(),t.kcU(),t.TgZ(12,"span",11),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(16,"div",5),t.O4$(),t.TgZ(17,"svg",6),t._UZ(18,"path",12)(19,"circle",13),t.qZA(),t.kcU(),t.TgZ(20,"span",11),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",5),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"polyline",16)(27,"path",17),t.qZA(),t.kcU(),t.TgZ(28,"span",11),t._uU(29),t.ALo(30,"mytranslate"),t.ALo(31,"number"),t.qZA()(),t.TgZ(32,"div",18),t._UZ(33,"azt-share",19),t.qZA()(),t.YNc(34,Bf,40,40,"ng-template",20),t.TgZ(35,"div",21)(36,"button",22),t.NdJ("click",function(){return n.toggleShowActions()}),t.YNc(37,Hf,3,0,"span",23),t.YNc(38,Yf,3,0,"span",23),t.qZA()()(),t.YNc(39,Gf,1,0,"azt-preview-exam",24)),2&e){const i=t.MAs(4);let a;t.xp6(3),t.s9C("matTooltip",null==n.initData.examObj?null:n.initData.examObj.name),t.s9C("matTooltip",null==n.initData.examObj?null:n.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",null==n.initData.examObj?null:n.initData.examObj.name," "),t.xp6(8),t.hij(" ",t.lcZ(14,16,"lang_testbank_tested_list_date_create")+": "+t.lcZ(15,18,null==n.initData.examObj?null:n.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(22,20,"lang_auto_nguoi_tao")+": "+(null==n.initData.examCreatorObj?null:n.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(30,22,"lang_testbank_tested_list_number_quizzes")+": "+(n.initData.totalAttended?n.initData.totalAttended:t.lcZ(31,24,0))," "),t.xp6(4),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(a=null==n.initData.examObj?null:n.initData.examObj.id)&&void 0!==a?a:0)("examWithPermissionObj",n.initData.examObj),t.xp6(1),t.Q6J("ngIf",n.isShowActions),t.xp6(3),t.Q6J("ngIf",n.isShowActions),t.xp6(1),t.Q6J("ngIf",!n.isShowActions),t.xp6(1),t.Q6J("ngIf",n.examDetailDialog.isShow)}},dependencies:[y.sg,y.O5,Qt.Kd,Ho.l,Ke.Q,ti.I,y.JJ,tt.bT,tt.BU,tt.vL,tt.Pz,tt.El,tt.q7,tt._W,tt.tO],encapsulation:2}),o})();var Kf=T(49272),Fn=T(64123),Sn=T(13953);const Wf=["student",""];function Vf(o,s){1&o&&(t.TgZ(0,"span",18),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_dang_thi_brackets")," "))}function Xf(o,s){1&o&&(t.TgZ(0,"span",19),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&o&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function t1(o,s){if(1&o&&(t.TgZ(0,"div",14)(1,"span",15),t._uU(2),t.qZA(),t.YNc(3,Vf,3,3,"span",16),t.YNc(4,Xf,4,6,"span",17),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.student.fullName),t.xp6(1),t.Q6J("ngIf",0==e.student.status&&(e.student.isMarked||e.student.isNotMarked)),t.xp6(1),t.Q6J("ngIf",-1==e.student.status&&(e.student.isMarked||e.student.isNotMarked))}}function e1(o,s){if(1&o&&t._UZ(0,"img",20),2&o){const e=t.oxw();t.Q6J("nameImages",e.student.nameImages)}}function n1(o,s){1&o&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_cham")))}function i1(o,s){1&o&&(t.TgZ(0,"span",22),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_thi")))}function o1(o,s){1&o&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&o&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function a1(o,s){1&o&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_thi"),""))}function s1(o,s){1&o&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_point")+": "," "))}function r1(o,s){if(1&o&&(t.TgZ(0,"span",25),t._uU(1),t.qZA()),2&o){const e=t.oxw();let n;t.xp6(1),t.hij(" ",null!==(n=e.student.mark)&&void 0!==n?n:0," ")}}function l1(o,s){if(1&o&&(t.TgZ(0,"div",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function c1(o,s){1&o&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function _1(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTestedTime(e.student.startedTest||void 0,e.student.createdAt||void 0)," ")}}function d1(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTestedTime(e.student.startedTest||void 0)," ")}}function u1(o,s){1&o&&(t.TgZ(0,"p",30),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function m1(o,s){if(1&o&&(t.TgZ(0,"p",31),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);let n;t.xp6(1),t.hij(" ",null!==(n=null==e.student.filesParse?null:e.student.filesParse.length)&&void 0!==n?n:0," ")}}function p1(o,s){if(1&o&&(t.TgZ(0,"div",27),t.YNc(1,u1,3,3,"p",28),t.YNc(2,m1,2,1,"p",29),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}let h1=(()=>{class o extends R.Q{constructor(e,n){super(e),this.commonService=e,this.timeService=n,this.hasEssayQuestion=!1}ngOnInit(){super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["testbank-exam-result-student-exam-result-box","student",""]],inputs:{student:"student",hasEssayQuestion:"hasEssayQuestion"},features:[t.qOj],attrs:Wf,decls:17,vars:13,consts:[["class","azt-student-name flex items-center","style","flex-wrap: wrap;",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-right text-xs",4,"ngIf"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs"],[4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",4,"ngIf"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-black","font-medium"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],["class","text-xs text-slate-500",4,"ngIf"],[1,"mr-auto","text-xs","text-slate-500"],[1,"text-xs","text-slate-500"]],template:function(e,n){if(1&e&&(t.YNc(0,t1,5,3,"div",0),t.YNc(1,e1,1,1,"img",1),t.TgZ(2,"div",2)(3,"div",3),t.YNc(4,n1,3,3,"span",4),t.YNc(5,i1,3,3,"span",5),t.YNc(6,o1,4,6,"span",6),t.YNc(7,a1,3,3,"span",7),t.YNc(8,s1,3,3,"span",7),t.YNc(9,r1,2,1,"span",8),t.qZA(),t.YNc(10,l1,3,3,"div",9),t.qZA(),t.TgZ(11,"div",2),t.YNc(12,c1,3,3,"div",10),t.TgZ(13,"div",11),t.YNc(14,_1,2,1,"span",12),t.YNc(15,d1,2,1,"span",12),t.qZA()(),t.YNc(16,p1,3,2,"div",13)),2&e){let i,a;t.Q6J("ngIf",!n.student.nameImages||(null!==(i=n.student.studentId)&&void 0!==i?i:0)>0),t.xp6(1),t.Q6J("ngIf",n.student.nameImages&&(null!==(a=n.student.studentId)&&void 0!==a?a:0)<=0),t.xp6(3),t.Q6J("ngIf",n.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",n.student.isOnTest),t.xp6(1),t.Q6J("ngIf",n.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",n.student.isNotTested),t.xp6(1),t.Q6J("ngIf",n.student.isMarked),t.xp6(1),t.Q6J("ngIf",n.student.isMarked),t.xp6(1),t.Q6J("ngIf",n.student.isMarked||n.student.isNotMarked),t.xp6(2),t.Q6J("ngIf",!n.student.isNotTested),t.xp6(2),t.Q6J("ngIf",n.student.isMarked||n.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",n.student.isOnTest||n.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",n.hasEssayQuestion)}},dependencies:[y.O5,Qt.Kd,Sn.L,tt.bT],encapsulation:2}),o})();function g1(o,s){if(1&o&&t.GkF(0,10),2&o){t.oxw();const e=t.MAs(14);t.Q6J("ngTemplateOutlet",e)}}function f1(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function x1(o,s){if(1&o&&(t.TgZ(0,"div",13),t.GkF(1,10),t.qZA()),2&o){t.oxw(2);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function v1(o,s){if(1&o&&(t.TgZ(0,"div"),t.GkF(1,10),t.TgZ(2,"div",14)(3,"ng-scrollbar",15)(4,"div",16),t.GkF(5,10),t.qZA()()()()),2&o){t.oxw(2);const e=t.MAs(8),n=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function b1(o,s){if(1&o&&(t.YNc(0,x1,2,1,"div",11),t.YNc(1,v1,6,3,"div",12)),2&o){const e=t.oxw();t.Q6J("ngIf",e.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!e.isNotTestedYet&&e.obj)}}const Go=function(o){return{"col-span-2":o}};function w1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.selectClassroomToShowEvent(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(8,Go,e.isOpenSideNav)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,4,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,6,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")"," ")}}const T1=function(o){return{active:o}};function C1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.selectClassroomToShowEvent(null==i.classObj?null:i.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2).$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(9,Go,n.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(11,T1,(null==n.examResultObjsOfSelectedClassroom.classObj?null:n.examResultObjsOfSelectedClassroom.classObj.id)==(null==e.classObj?null:e.classObj.id))),t.xp6(1),t.Q6J("matTooltip",t.lcZ(3,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,7,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function k1(o,s){if(1&o&&(t.ynx(0),t.YNc(1,C1,6,13,"div",18),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);let i;t.xp6(1),t.Q6J("ngIf",e.indexCounter<n.showNumberClassroom||e.indexCounter<=n.showNumberClassroom&&(null!==(i=n.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==i?i:0)<=n.showNumberClassroom)}}function O1(o,s){if(1&o&&(t.ynx(0),t.YNc(1,k1,2,1,"ng-container",12),t.BQk()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter)}}function y1(o,s){if(1&o&&t.GkF(0,10),2&o){t.oxw(2);const e=t.MAs(10);t.Q6J("ngTemplateOutlet",e)}}function A1(o,s){if(1&o&&(t.TgZ(0,"div",17),t.YNc(1,w1,6,10,"div",18),t.YNc(2,O1,2,1,"ng-container",19),t.YNc(3,y1,1,1,"ng-container",1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!=e.examResultObjsOfSelectedClassroom.indexCounter&&e.examResultObjsOfSelectedClassroom.indexCounter>e.showNumberClassroom),t.xp6(1),t.Q6J("ngForOf",e.examResultObjsByClassroom),t.xp6(1),t.Q6J("ngIf",e.examResultObjsByClassroom.length>e.showNumberClassroom+1)}}function S1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.selectClassroomToShowEvent(null==i.classObj?null:i.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,3,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","left"),t.xp6(2),t.hij(" ",t.lcZ(5,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function Z1(o,s){if(1&o&&(t.ynx(0),t.YNc(1,S1,6,7,"li",12),t.BQk()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);let i;t.xp6(1),t.Q6J("ngIf",e.indexCounter>n.showNumberClassroom||e.indexCounter>=n.showNumberClassroom&&(null!==(i=n.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==i?i:0)>n.showNumberClassroom)}}function E1(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Z1,2,1,"ng-container",12),t.BQk()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter&&(null==n.examResultObjsOfSelectedClassroom.classObj?null:n.examResultObjsOfSelectedClassroom.classObj.id)!=(null==e.classObj?null:e.classObj.id))}}function I1(o,s){if(1&o&&(t.TgZ(0,"div",24)(1,"button",25)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(5,"svg",26),t._UZ(6,"polyline",27),t.qZA()(),t.kcU(),t.TgZ(7,"mat-menu",null,28)(9,"div",29)(10,"ul",30),t.YNc(11,E1,2,1,"ng-container",19),t.qZA()()()()),2&o){const e=t.MAs(8),n=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(2),t.Oqu(t.lcZ(4,3,"lang_auto_xem_them")),t.xp6(8),t.Q6J("ngForOf",n.examResultObjsByClassroom)}}const M1=function(o){return[o]},P1=function(o){return{backto:o}};function L1(o,s){if(1&o&&(t.TgZ(0,"a",42),t.ALo(1,"mylocalize"),t._UZ(2,"testbank-exam-result-student-exam-result-box",43),t.qZA()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("routerLink",t.VKq(6,M1,t.lcZ(1,4,"/admin/testbank/test-review/"+(null==n.obj?null:n.obj.id)+"/"+e.userId+"/"+e.studentId+"/"+e.resultId)))("queryParams",t.VKq(8,P1,n.backToLink)),t.xp6(2),t.Q6J("student",e)("hasEssayQuestion",n.hasEssayQuestion)}}function j1(o,s){if(1&o&&t._UZ(0,"testbank-exam-result-student-exam-result-box",43),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("student",e)("hasEssayQuestion",n.hasEssayQuestion)}}const N1=function(o){return{"lg:col-span-3":o}},q1=function(o){return{"zoom-in":o}};function Q1(o,s){if(1&o&&(t.TgZ(0,"div",35)(1,"div",36)(2,"div",37),t._UZ(3,"azt-create-avatar",38),t.qZA(),t.TgZ(4,"div",39),t.YNc(5,L1,3,10,"a",40),t.YNc(6,j1,1,2,"ng-template",null,41,t.W1O),t.qZA()()()),2&o){const e=s.$implicit,n=t.MAs(7),i=t.oxw(2);let a;t.Q6J("ngClass",t.VKq(7,N1,!i.isOpenSideNav&&!i.isMobile)),t.xp6(1),t.Q6J("ngClass",t.VKq(9,q1,e.resultId)),t.xp6(2),t.Q6J("linkAvatar",null!==(a=null==e?null:e.avatar)&&void 0!==a?a:"")("nameCreateAvatar",e.fullName)("size",40),t.xp6(2),t.Q6J("ngIf",e.resultId)("ngIfElse",n)}}function D1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",46)(1,"azt-paging",47),t.NdJ("SendPage",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectPageEvent(i))}),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("lengthPage",e.totalPage)("paging",e.curPage)}}function U1(o,s){if(1&o&&(t.TgZ(0,"div",44),t.YNc(1,D1,2,2,"div",45),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.totalPage>1)}}function F1(o,s){if(1&o&&(t.TgZ(0,"div",32),t.YNc(1,Q1,8,11,"div",33),t.YNc(2,U1,2,1,"div",34),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",-1==(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.id)?e.examResultObjsByPage:e.examResultObjsOfSelectedClassroom.results),t.xp6(1),t.Q6J("ngIf",-1==(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.id))}}function R1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",52),t._UZ(2,"path",53)(3,"circle",54),t.qZA(),t.kcU(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function z1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",52),t._UZ(2,"line",56)(3,"path",57)(4,"path",58)(5,"path",59),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"lang_auto_huy_cham_file_scan")))}function J1(o,s){if(1&o&&(t.TgZ(0,"p",48),t._uU(1),t.qZA(),t.YNc(2,R1,7,3,"a",49),t.YNc(3,z1,9,3,"a",50)),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.headerTitle," "),t.xp6(1),t.Q6J("ngIf",!e.showFileScan&&!e.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",e.showFileScan)}}function B1(o,s){if(1&o&&(t.TgZ(0,"p",69),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"isOfflineExam"),t.ALo(4,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_note_scan_file_in_student_exam_result")," ",t.lcZ(3,4,null==e.obj?null:e.obj.orcLogId)?".":t.lcZ(4,6,"lang_auto_or_click_copy_btn")," ")}}function H1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",70)(1,"div",71)(2,"a",72),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showSelectFileScan())}),t.O4$(),t.TgZ(3,"svg",73),t._UZ(4,"path",53)(5,"circle",54),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",74)(10,"a",75),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showCopySuccess())}),t.O4$(),t.TgZ(11,"svg",73),t._UZ(12,"circle",76)(13,"circle",77)(14,"circle",78)(15,"line",79)(16,"line",80),t.qZA(),t.kcU(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(7),t.Oqu(t.lcZ(8,3,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan")),t.xp6(3),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(19,5,"lang_auto_copy_link_de_thi"))}}function Y1(o,s){1&o&&t._UZ(0,"div",81)}function G1(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",82),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",73),t._UZ(2,"path",53)(3,"circle",54),t.qZA(),t.kcU(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function $1(o,s){1&o&&(t.TgZ(0,"p",83),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_hoac")))}function K1(o,s){1&o&&(t.TgZ(0,"p",84),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_tai_app_azota_de_cham_bai_bang_camera_cua_dien_thoai_tai_app_tai_day")," "))}function W1(o,s){1&o&&(t.TgZ(0,"div",85)(1,"div",86)(2,"a",87),t._UZ(3,"img",88),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",89),t._UZ(6,"img",90),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/2928664.svg"),t.LSH))}function V1(o,s){1&o&&(t.ynx(0),t.TgZ(1,"p",83),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",91),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",85)(8,"div",92)(9,"p",93)(10,"span",94),t._uU(11,"Google Play"),t.qZA(),t._UZ(12,"azt-download-qr-code",95),t.qZA(),t.TgZ(13,"p",96)(14,"span",94),t._uU(15,"App Store"),t.qZA(),t._UZ(16,"azt-download-qr-code",95),t.qZA()()(),t.BQk()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_hoac")),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_auto_su_dung_ma_qr_de_tai_app_Azota")," "),t.xp6(7),t.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.azt"),t.xp6(4),t.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/ua/app/azota/id1556025594"))}function X1(o,s){if(1&o&&(t.TgZ(0,"div",60)(1,"h3",61),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,B1,5,8,"p",62),t.YNc(5,H1,20,7,"div",63),t.ALo(6,"isOfflineExam"),t.YNc(7,Y1,1,0,"div",64),t.YNc(8,G1,7,3,"ng-template",null,65,t.W1O),t.YNc(10,$1,3,3,"p",66),t.YNc(11,K1,3,3,"p",67),t.YNc(12,W1,8,6,"div",68),t.YNc(13,V1,17,10,"ng-container",12),t.qZA()),2&o){const e=t.MAs(9),n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,9,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!t.lcZ(6,11,null==n.obj?null:n.obj.orcLogId))("ngIfElse",e),t.xp6(2),t.Q6J("ngIf",n.isMobileWebView),t.xp6(3),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobile)}}const t0=function(o){return{"py-2":o}},e0=["*"];let n0=(()=>{class o extends R.Q{copyLinkToClipboard(){var e;return`${this.commonService.getCurrentDomain()}/de-thi/${null===(e=this.obj)||void 0===e?void 0:e.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}showSelectFileScan(){var e,n;this.isMobileWebView?this.mobileWebviewService.sendMarkOfflineExamObj(null!==(n=null===(e=this.obj)||void 0===e?void 0:e.hashId)&&void 0!==n?n:""):(this.showFileScan=!this.showFileScan,this.notTestedOpenFileScan.emit(this.showFileScan))}selectPageEvent(e){var n,i;this.examResultObjsByPage=[],this.curPage=e;let a=100,r=this.examResultObjsByClassroom.find(l=>{var c;return-1==(null===(c=l.classObj)||void 0===c?void 0:c.id)});if(r&&null!==(n=r.results)&&void 0!==n&&n.length){let l=null!==(i=r.results)&&void 0!==i?i:[],c=l.length;if(this.totalPage=Math.ceil(c/a),c>a)for(let _=(e-1)*a;_<e*a;_++)l.length-1>=_&&this.examResultObjsByPage.push(l[_]);else this.examResultObjsByPage=l}}selectClassroomToShowEvent(e){var n;this.browserStorageService.saveSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(n=this.obj)||void 0===n?void 0:n.hashId),(e??-1).toString()),this.initDataForClassroom()}findClassroomIdByExamResultId(e,n){var i,a,r;for(var l of e)for(var c of null!==(i=l.results)&&void 0!==i?i:[])if((null===(a=c.id)||void 0===a?void 0:a.toString())==n.toString()&&null!==(r=l.classObj)&&void 0!==r&&r.id)return l.classObj.id}findClassroomDataByClassroomId(e,n){var i,a;for(var r of e)if((null===(a=null===(i=r.classObj)||void 0===i?void 0:i.id)||void 0===a?void 0:a.toString())==n)return r;return e.length>0?e[0]:void 0}initDataForClassroom(){var e,n,i,a=this.browserStorageService.getSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(e=this.obj)||void 0===e?void 0:e.hashId));if(!a){var r=null===(i=null===(n=this.examResultObjsByClassroom)||void 0===n?void 0:n[0].classObj)||void 0===i?void 0:i.id;a=r?r.toString():"-1"}var l=this.findClassroomDataByClassroomId(this.examResultObjsByClassroom,a);l&&(this.examResultObjsOfSelectedClassroom=l)}ngOnChanges(){var e;if(this.examResultObjsByClassroom.length){if(this.mustShownResultId){var n=this.findClassroomIdByExamResultId(this.examResultObjsByClassroom,this.mustShownResultId);n&&this.browserStorageService.saveSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(e=this.obj)||void 0===e?void 0:e.hashId),n.toString())}this.initDataForClassroom(),this.selectPageEvent(this.curPage)}}ngOnInit(){this.examResultObjsByClassroom.length&&(this.initDataForClassroom(),this.selectPageEvent(this.curPage)),super.ngOnInit()}constructor(e,n,i,a){super(e),this.commonService=e,this.timeService=n,this.browserStorageService=i,this.mobileWebviewService=a,this.isOpenSideNav=!0,this.isMobile=!1,this.backToLink="",this.scanLoading=!1,this.showFileScan=!1,this.mustShownResultId=0,this.headerTitle="",this.notTestedOpenFileScan=new t.vpe,this.obj=void 0,this.examResultObjsByClassroom=[],this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.examResultObjsOfSelectedClassroom={},this.testbankClassroomSelectedStoreKey="exam_results_shown_class_",this.showNumberClassroom=(this.isMobile?1:3)-1,this.examResultObjsByPage=[],this.totalPage=0,this.curPage=1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O),t.Y36(Le.z),t.Y36(ci.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-student-exam-result-new"]],inputs:{isOpenSideNav:"isOpenSideNav",isMobile:"isMobile",backToLink:"backToLink",scanLoading:"scanLoading",showFileScan:"showFileScan",mustShownResultId:"mustShownResultId",headerTitle:"headerTitle",obj:"obj",examResultObjsByClassroom:"examResultObjsByClassroom",isNotTestedYet:"isNotTestedYet",hasEssayQuestion:"hasEssayQuestion"},outputs:{notTestedOpenFileScan:"notTestedOpenFileScan"},features:[t.qOj,t.TTD],ngContentSelectors:e0,decls:17,vars:6,consts:[[1,"flex","items-center"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"box","mt-2","relative",2,"min-height","90vh",3,"ngClass"],[4,"ngIf","ngIfElse"],["noLoading",""],["showClassroomTabTmp",""],["seeMoreTabOnWebTmp",""],["showExamResultInOneClassroom",""],["examResultHeaderTmp",""],["notTestYetTmp",""],[3,"ngTemplateOutlet"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],[1,"scrollable-content","flex","items-center"],[1,"azt-student-list","scrollable-content",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"mt-4","p-2"],[1,"nav","nav-link-tabs","grid","grid-cols-12","grap-3","p-2"],["class","col-span-6 md:col-span-3 nav-item",3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","nav-item",3,"ngClass"],["azt-track-service","student-exam-result-new-MSaafbzaB",1,"active","nav-link","w-full","py-1",3,"click"],[1,"truncate",3,"matTooltip","matTooltipPosition"],["azt-track-service","student-exam-result-new-_LwxxkAKE2",1,"nav-link","w-full","py-1",3,"ngClass","click"],[1,"col-span-3","nav-item"],[1,"nav-link","flex","items-center","w-full","py-1",2,"border","none",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-2"],["points","6 9 12 15 18 9"],["listActiveMenu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","student-exam-result-new-UODUmv0qb5",1,"dropdown-item",3,"click"],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],["class","col-span-12 mt-2",4,"ngIf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"flex","items-center","p-3","rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px","height","100%",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc( 100% - 3.5rem )"],["azt-track-service","student-exam-result-new-wYEwO9arWU","class","w-full",3,"routerLink","queryParams",4,"ngIf","ngIfElse"],["noClickInClass",""],["azt-track-service","student-exam-result-new-wYEwO9arWU",1,"w-full",3,"routerLink","queryParams"],[3,"student","hasEssayQuestion"],[1,"col-span-12","mt-2"],["class","text-left mt-2",4,"ngIf"],[1,"text-left","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"text-md","font-medium","mr-auto"],["azt-track-service","student-exam-result-new-YugzQx7amV","style","height: 43px;font-size: 13px;","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-UfMbOZaVPI","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-YugzQx7amV",1,"btn","btn-pending-soft","btn-sm",2,"height","43px","font-size","13px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],["cx","12","cy","13","r","3"],["azt-track-service","student-exam-result-new-UfMbOZaVPI",1,"btn","btn-pending-soft","btn-sm",3,"click"],["x1","2","y1","2","x2","22","y2","22"],["d","M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],["d","M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],["d","M14.121 15.121A3 3 0 1 1 9.88 10.88"],[1,"text-center","mt-3","mx-auto","p-3",2,"max-width","28rem"],[1,"font-medium","text-lg"],["class","mt-3 mx-auto",4,"ngIf"],["class","flex flex-col md:flex-row mx-auto",4,"ngIf","ngIfElse"],["style","height: 300px;",4,"ngIf"],["OfflineExam",""],["class","h5 mt-2 font-medium",4,"ngIf"],["class","mt-2 ml-auto mr-auto w-4/5",4,"ngIf"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"mt-3","mx-auto"],[1,"flex","flex-col","md:flex-row","mx-auto"],[1,"mt-3","lg:mr-auto"],["azt-track-service","student-exam-result-new-Kn62V1VJ1o",1,"btn","btn-secondary-soft",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],[1,"mt-3","lg:ml-auto"],["azt-track-service","student-exam-result-new-9Vqr3K2yC9",1,"btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[2,"height","300px"],["azt-track-service","student-exam-result-new-xsQoGzCGKe",1,"btn","btn-secondary-soft",3,"click"],[1,"h5","mt-2","font-medium"],[1,"mt-2","ml-auto","mr-auto","w-4/5"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","student-exam-result-new-ZaBTrmdZwn","href","https://play.google.com/store/apps/details?id=azt.azt","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","student-exam-result-new-HVEBsLE8p1","href","https://apps.apple.com/ua/app/azota/id1556025594","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"mt-2","ml-auto","mr-auto","w-80"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(e,n){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,g1,1,1,"ng-container",1),t.qZA(),t.TgZ(2,"div",2),t.Hsn(3),t.YNc(4,f1,1,0,"azt-loading-effect",3),t.YNc(5,b1,2,2,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(7,A1,4,3,"ng-template",null,5,t.W1O),t.YNc(9,I1,12,5,"ng-template",null,6,t.W1O),t.YNc(11,F1,3,2,"ng-template",null,7,t.W1O),t.YNc(13,J1,4,3,"ng-template",null,8,t.W1O),t.YNc(15,X1,14,13,"ng-template",null,9,t.W1O)),2&e){const i=t.MAs(6);t.xp6(1),t.Q6J("ngIf",n.obj),t.xp6(1),t.Q6J("ngClass",t.VKq(4,t0,!n.showFileScan)),t.xp6(2),t.Q6J("ngIf",n.scanLoading)("ngIfElse",i)}},dependencies:[C.rH,y.mk,y.sg,y.O5,y.tP,Tn.i3,Ft.W0,Ft.D8,Qt.Kd,P.KC,zt.Q,ri.L,Fn.g,Ki.o,h1,tt.mp,tt.bT,tt.HU,tt.Jc],encapsulation:2}),o})();function i0(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",26),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.examResultFilterService.totalCustomFilter)}}function o0(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,i0,4,1,"span",25),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_testted_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.examResultFilterService.totalCustomFilter>0)}}let a0=(()=>{class o extends R.Q{changeFilter(){this.examResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.examResultFilterService.filterObj)}clearFilter(){this.examResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.examResultFilterService=n,this.changeFilterEvent=new t.vpe}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Fo))},o.\u0275cmp=t.Xpm({type:o,selectors:[["testbank-exam-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:49,vars:28,consts:[[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-Csh-AtPhLM","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-jvAvKjPSPr","for","isNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-WpYAtInmdW","for","isOnTest",1,"dropdown-item","cursor-pointer",3,"click"],["id","isOnTest","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-5kYvJjf6Vu","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-qExv_PlJpt","for","isNotTested",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotTested","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-ezDcdMX5-k",3,"click"],["azt-track-service","filter-menu-B7m4rnfcVw1",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,n){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,o0,4,4,"span",3),t.qZA(),t.kcU(),t.TgZ(4,"mat-menu",4,5)(6,"div",6)(7,"ul",7)(8,"li")(9,"label",8),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"div",9)(13,"input",10),t.NdJ("change",function(){return n.examResultFilterService.filterObj.isMarked=!n.examResultFilterService.filterObj.isMarked,n.changeFilter()}),t.qZA()()()(),t.TgZ(14,"li")(15,"label",11),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(16),t.ALo(17,"mytranslate"),t.TgZ(18,"div",9)(19,"input",12),t.NdJ("change",function(){return n.examResultFilterService.filterObj.isNotMarked=!n.examResultFilterService.filterObj.isNotMarked,n.changeFilter()}),t.qZA()()()(),t.TgZ(20,"li")(21,"label",13),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(22),t.ALo(23,"mytranslate"),t.TgZ(24,"div",9)(25,"input",14),t.NdJ("change",function(){return n.examResultFilterService.filterObj.isOnTest=!n.examResultFilterService.filterObj.isOnTest,n.changeFilter()}),t.qZA()()()(),t.TgZ(26,"li")(27,"label",15),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(28),t.ALo(29,"mytranslate"),t.TgZ(30,"div",9)(31,"input",16),t.NdJ("change",function(){return n.examResultFilterService.filterObj.isNotSubmit=!n.examResultFilterService.filterObj.isNotSubmit,n.changeFilter()}),t.qZA()()()(),t.TgZ(32,"li")(33,"label",17),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(34),t.ALo(35,"mytranslate"),t.TgZ(36,"div",9)(37,"input",18),t.NdJ("change",function(){return n.examResultFilterService.filterObj.isNotTested=!n.examResultFilterService.filterObj.isNotTested,n.changeFilter()}),t.qZA()()()(),t.TgZ(38,"li"),t._UZ(39,"hr",19),t.qZA(),t.TgZ(40,"li")(41,"div",20)(42,"button",21),t._uU(43),t.ALo(44,"mytranslate"),t.qZA(),t.TgZ(45,"div",22),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(46,"button",23),t.NdJ("click",function(){return n.clearFilter()}),t._uU(47),t.ALo(48,"mytranslate"),t.qZA()()()()()()()),2&e){const i=t.MAs(5);t.Q6J("matMenuTriggerFor",i),t.xp6(3),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(11,14,"lang_testbank_testted_list_show_student_marking")," "),t.xp6(3),t.Q6J("checked",n.examResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(17,16,"lang_testbank_testted_list_student_not_marking")," "),t.xp6(3),t.Q6J("checked",n.examResultFilterService.filterObj.isNotMarked),t.xp6(3),t.hij(" ",t.lcZ(23,18,"lang_testbank_testted_list_show_student_taking_exam")," "),t.xp6(3),t.Q6J("checked",n.examResultFilterService.filterObj.isOnTest),t.xp6(3),t.hij(" ",t.lcZ(29,20,"lang_testbank_testted_list_show_student_not_submit_exam")," "),t.xp6(3),t.Q6J("checked",n.examResultFilterService.filterObj.isNotSubmit),t.xp6(3),t.hij(" ",t.lcZ(35,22,"lang_testbank_testted_list_show_student_not_yet_exam")," "),t.xp6(3),t.Q6J("checked",n.examResultFilterService.filterObj.isNotTested),t.xp6(6),t.Oqu(t.lcZ(44,24,"lang_buttom_close")),t.xp6(4),t.Oqu(t.lcZ(48,26,"lang_buttom_delete"))}},dependencies:[y.O5,Ft.W0,Ft.D8,tt.bT],encapsulation:2}),o})();const s0=["drawer"];function r0(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function l0(o,s){1&o&&t._UZ(0,"status-loading-effect-component")}function c0(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"menu-offline-test",54),t.NdJ("reloadApi",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.reloadApi())}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)}}function _0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"menu-online-test",55),t.NdJ("reloadApi",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.reloadApi())}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)("userList",e.allUserObjsForMonitorModule)}}function d0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",59),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function u0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",61),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function m0(o,s){1&o&&(t.TgZ(0,"div",62)(1,"div",63)(2,"p",64),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function p0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-file-scan-offline-exam-new",67),t.NdJ("saveStudentMarkEmit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.scanMarkObjs(i))})("firstSuccessResultId",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.foundClassOfSuccessScanResult(i))})("showStudentMarkEmit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.closeScanFile(i))}),t.qZA()}if(2&o){const e=t.oxw(3);t.Q6J("backToLink",e.backFromStudentView)("examObj",e.examObj)("loadedJs",e.loadedJs)("tokenScan",e.tokenScanExamOffline)("hasExamOffline",e.hasExamOffline)("examOfflineMessage",e.examOfflineMessage)}}function h0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"app-student-exam-result-new",65),t.NdJ("notTestedOpenFileScan",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openFileScan(i))}),t.YNc(1,p0,1,6,"app-file-scan-offline-exam-new",66),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("backToLink",e.backFromStudentView)("examResultObjsByClassroom",e.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",e.isNotTestedYet)("isOpenSideNav",e.isOpenSideNav)("hasEssayQuestion",e.hasEssayQuestion)("showFileScan",e.showFileScan)("obj",e.examObj)("scanLoading",e.scanLoading)("isMobile",e.isMobile)("headerTitle",e.headerTitle)("mustShownResultId",e.mustShownResultId),t.xp6(1),t.Q6J("ngIf",e.showFileScan)}}const g0=function(o,s){return{"w-85":o,"w-30":s}},f0=function(o){return{"ml-5":o}},x0=function(o){return{"px-0":o}};function v0(o,s){if(1&o){const e=t.EpF();t._UZ(0,"azt-export-docx-loading-box",25),t.YNc(1,l0,1,0,"status-loading-effect-component",8),t.TgZ(2,"div",26)(3,"mat-drawer-container",27)(4,"mat-drawer",28,29),t.NdJ("closedStart",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.changeStatusNav())}),t.TgZ(6,"ng-scrollbar",30),t.YNc(7,c0,2,2,"ng-container",1),t.YNc(8,_0,1,3,"ng-template",null,31,t.W1O),t.qZA()(),t.TgZ(10,"mat-drawer-content")(11,"div",32)(12,"div",33),t.YNc(13,d0,6,3,"button",34),t.YNc(14,u0,6,3,"button",35),t.TgZ(15,"div",36)(16,"div",37)(17,"form",6)(18,"input",38),t.NdJ("keyup.enter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.search())}),t.ALo(19,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(20,"svg",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.search())}),t._UZ(21,"circle",40)(22,"line",41),t.qZA()()(),t.kcU(),t.TgZ(23,"div",42)(24,"testbank-exam-result-filter-menu",43),t.NdJ("changeFilterEvent",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.changeFilterEvent())}),t.qZA()(),t.TgZ(25,"div",44)(26,"button",45),t.O4$(),t.TgZ(27,"svg",46),t._UZ(28,"line",47)(29,"line",48)(30,"line",49),t.qZA()()()()(),t.kcU(),t.TgZ(31,"div",50),t.YNc(32,m0,5,3,"div",51),t.YNc(33,h0,2,12,"ng-template",null,52,t.W1O),t.qZA()(),t._UZ(35,"app-excel-score-sheet",53)(36,"app-excel-score-sheet",53)(37,"app-excel-score-sheet",53)(38,"app-excel-score-sheet",53),t.qZA()()()}if(2&o){const e=t.MAs(9),n=t.MAs(34),i=t.oxw(),a=t.MAs(5);t.Q6J("msg",i.exportResultService.keyLoading)("show",i.exportResultService.isLoading)("percent",i.exportResultService.percent),t.xp6(1),t.Q6J("ngIf",i.exportLoading),t.xp6(2),t.Q6J("hasBackdrop",i.hasBackdrop),t.xp6(1),t.s9C("opened",i.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(66,g0,i.isMobile,!i.isMobile))("mode",i.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("ngIf",i.isOfflineExam)("ngIfElse",e),t.xp6(4),t.Q6J("ngClass",t.VKq(69,f0,!i.isMobile&&i.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!i.isOpenSideNav||i.isMobile),t.xp6(1),t.Q6J("ngIf",i.isOpenSideNav&&!i.isMobile),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.s9C("placeholder",t.lcZ(19,64,"lang_testbank_testted_list_search")),t.xp6(8),t.Q6J("matMenuTriggerFor",a),t.xp6(5),t.Q6J("ngClass",t.VKq(71,x0,i.isMobile||!i.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",0==i.allViewExamResultObjsOfStudentByClassroom.length&&0!=i.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",n),t.xp6(3),t.Q6J("dataScore",i.highestMark)("dataScoreByClass",i.dataExportHighestMark)("maxGroupQuestion",i.maxGroupQuestion)("examObj",i.examObj)("exportQuestionObjs",i.exportQuestionObjs)("tableType","highest")("isSortByMark",i.form.controls.isSortByMarkDesc.value)("isSortByTime",i.form.controls.isSortByTimeDesc.value)("isSortByName",i.form.controls.isSortByNameAsc.value)("hasEssayQuestion",i.hasEssayQuestion)("countEssayQuestion",i.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",i.exportToExcelObjs)("dataScoreByClass",i.dataExportLastTime)("maxGroupQuestion",i.maxGroupQuestion)("examObj",i.examObj)("exportQuestionObjs",i.exportQuestionObjs)("tableType","lastTime")("isSortByMark",i.form.controls.isSortByMarkDesc.value)("isSortByTime",i.form.controls.isSortByTimeDesc.value)("isSortByName",i.form.controls.isSortByNameAsc.value)("hasEssayQuestion",i.hasEssayQuestion)("countEssayQuestion",i.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",i.firstMark)("dataScoreByClass",i.dataExportFirstTime)("maxGroupQuestion",i.maxGroupQuestion)("examObj",i.examObj)("exportQuestionObjs",i.exportQuestionObjs)("tableType","firstTime")("isSortByMark",i.form.controls.isSortByMarkDesc.value)("isSortByTime",i.form.controls.isSortByTimeDesc.value)("isSortByName",i.form.controls.isSortByNameAsc.value)("hasEssayQuestion",i.hasEssayQuestion)("countEssayQuestion",i.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",i.allTimeMark)("dataScoreByClass",i.dataExportAllTime)("maxGroupQuestion",i.maxGroupQuestion)("examObj",i.examObj)("exportQuestionObjs",i.exportQuestionObjs)("tableType","allTime")("isSortByMark",i.form.controls.isSortByMarkDesc.value)("isSortByTime",i.form.controls.isSortByTimeDesc.value)("isSortByName",i.form.controls.isSortByNameAsc.value)("hasEssayQuestion",i.hasEssayQuestion)("countEssayQuestion",i.countEssayQuestion)}}function b0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",68),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToExcel("lastTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_last_exam")," "))}function w0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",73),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToExcel("highest"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_highest_point")," "))}function T0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",74),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToExcel("firstTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_first_time_score")," "))}function C0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",75),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToExcel("allTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_all_exam")," "))}function k0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",76),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToPDF())}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_last")," "))}function O0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",83),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToPDF("highest"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_point_bigger")," "))}function y0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",84),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToPDF("first"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&o&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_fisrt")," "))}let A0=(()=>{class o extends R.Q{openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam");this.isOpenSideNav=!e||"close"!=e}}_viewDataBySortSearchAndFilter(){var e,n;let i=this.commonService.myClone(this.allRawExamResultObjsOfStudentByClassroom);var a=this.examResultFilterService.getDefaultFilterObj();i=this.examResultListSortService._filterExamResultObjsByFilterSettingObjByClassroom(a,i);var r=null===(n=null===(e=this.form.controls.searchContent.value)||void 0===e?void 0:e.toString())||void 0===n?void 0:n.trim();""!=r&&(i=this.examResultListSortService._searchExamResultObjsByFullNameInClassroom(i,r));var l=this.examResultListSortService._getCurrentSortTypeOfSetting();i=this.examResultListSortService._sortExamResultObjsBySettingObjByClassroom(i,this.hasEssayQuestion,l),this.allViewExamResultObjsOfStudentByClassroom=i}search(){this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){var e,n;null===(n=null===(e=this.form.controls)||void 0===e?void 0:e.searchContent)||void 0===n||n.setValue(""),this._viewDataBySortSearchAndFilter()}changeSortEvent(e){let n=!1;"isSortByNameAsc"==e&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),n=!0),"isSortByMarkDesc"==e&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),n=!0),"isSortByTimeDesc"==e&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),n=!0),n?this.examResultListSortService._saveSortTypeOfSetting(e):this.examResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(e){var n=[];return e.forEach(i=>{var a;i.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(a=i.results)&&void 0!==a?a:new Array),this.exportQuestionObjs),i.results=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(i.results),this.hasEssayQuestion),n.push(i)}),n}isNewInfoFieldFormatInExportExcel(e){var n=!1;if(null!=e)for(var i=0;i<e.length;i++)if(e[i].hasOwnProperty("contents")){n=!0;break}return n}parseInfoFieldForStudentObjsInExportExcel(e){var n,i,a,r,l=[];for(let d=0;d<e.length;d++){var c=null!==(i=this.commonService.myParseJson(null!==(n=e[d].infors)&&void 0!==n?n:""))&&void 0!==i?i:[];if(this.isNewInfoFieldFormatInExportExcel(c))if(null!=c){var _=new Array;c.forEach(p=>{p.contents&&1==p.contents.length?_.push({key:p.title,value:p.contents[0]}):p.contents&&p.contents.length>1&&_.push({key:p.title,value:p.contents.join(", ")})}),e[d].inforsParse=_}else e[d].inforsParse=new Array;else e[d].inforsParse=null!==(r=this.commonService.myParseJson(null!==(a=e[d].infors)&&void 0!==a?a:""))&&void 0!==r?r:[];l.push(e[d])}return l}mapQuestionWithAnswerForExportExcel(e,n){var i=[];return e.forEach(a=>{if(""!=a.answers&&null!=a.answers&&"[]"!=a.answers){var r=this.commonService.willDeleteParseJson(a.answers),l=[];n.forEach(c=>{for(var _={QuestionId:c.questionId,Answer:"",index:c.sort},d=0;d<r.length;d++)if(r[d].QuestionId==c.questionId&&r[d].AnswerContent&&r[d].AnswerContent.length>0){_.Answer=r[d].AnswerContent[0].Content;break}l.push(_)}),i.push(Object.assign(Object.assign({},a),{results:l}))}else l=[],n.forEach(_=>{l.push({QuestionId:_.questionId,Answer:"",index:_.sort})}),i.push(Object.assign(Object.assign({},a),{results:l}))}),i}exportToExcel(e){let n="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(i=>{n=i.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,Ze.AX.openLoadingEffect(n),"lastTime"==e?this.subscriptions.add(this.testedListApiService.getTestedLastMark("export_tool",this.examId).subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et,st;Array.isArray(i)||1!=i.success?(this.showErrorSnack(null!==(st=i.message)&&void 0!==st?st:""),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1):(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(at=>{n=at.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ze.AX.changeMsgLoadingEffect(n),this.exportQuestionObjs=null!==(r=null===(a=i.data)||void 0===a?void 0:a.questionObjs)&&void 0!==r?r:[],this.exportToExcelObjs=null!==(c=null===(l=i.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(_=i.data)||void 0===_?void 0:_.maxGroupId)&&void 0!==d?d:0,this.exportToExcelObjs=null!==(h=null===(p=this.form.controls)||void 0===p?void 0:p.sortByMarkDESC)&&void 0!==h&&h.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(w=null===(f=i.data)||void 0===f?void 0:f.studentsNotInClassResults)&&void 0!==w?w:[],this.hasEssayQuestion),null!==(S=null===(k=i.data)||void 0===k?void 0:k.questionObjs)&&void 0!==S?S:[]):null!==(Q=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==Q&&Q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(N=i.data)||void 0===N?void 0:N.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(X=null===(W=i.data)||void 0===W?void 0:W.questionObjs)&&void 0!==X?X:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(J=null===(E=i.data)||void 0===E?void 0:E.studentsNotInClassResults)&&void 0!==J?J:[]),null!==(K=null===(z=i.data)||void 0===z?void 0:z.questionObjs)&&void 0!==K?K:[]),this.exportToExcelObjs=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.exportToExcelObjs),this.hasEssayQuestion),this.dataExportLastTime=this.processDataForExcel(null!==(et=null===(B=i.data)||void 0===B?void 0:B.studentsInClassResults)&&void 0!==et?et:[]),setTimeout(()=>{var at;null===(at=document.getElementById("table_"+e))||void 0===at||at.click(),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1},1e4),this.successStatusObj())})):"highest"==e?this.subscriptions.add(this.testedListApiService.getTestedHighestMark("export_tool",this.examId).subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et,st;1==i.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(at=>{n=at.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ze.AX.changeMsgLoadingEffect(n),this.exportQuestionObjs=null!==(r=null===(a=i.data)||void 0===a?void 0:a.questionObjs)&&void 0!==r?r:[],this.highestMark=null!==(c=null===(l=i.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(_=i.data)||void 0===_?void 0:_.maxGroupId)&&void 0!==d?d:0,this.highestMark=null!==(h=null===(p=this.form.controls)||void 0===p?void 0:p.isSortByMarkDesc)&&void 0!==h&&h.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(w=null===(f=i.data)||void 0===f?void 0:f.studentsNotInClassResults)&&void 0!==w?w:[],this.hasEssayQuestion),null!==(S=null===(k=i.data)||void 0===k?void 0:k.questionObjs)&&void 0!==S?S:[]):null!==(Q=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==Q&&Q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(N=i.data)||void 0===N?void 0:N.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(X=null===(W=i.data)||void 0===W?void 0:W.questionObjs)&&void 0!==X?X:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(J=null===(E=i.data)||void 0===E?void 0:E.studentsNotInClassResults)&&void 0!==J?J:[]),null!==(K=null===(z=i.data)||void 0===z?void 0:z.questionObjs)&&void 0!==K?K:[]),this.highestMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.highestMark),this.hasEssayQuestion),this.dataExportHighestMark=this.processDataForExcel(null!==(et=null===(B=i.data)||void 0===B?void 0:B.studentsInClassResults)&&void 0!==et?et:[]),setTimeout(()=>{var at;null===(at=document.getElementById("table_"+e))||void 0===at||at.click(),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(st=i.message)&&void 0!==st?st:""),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"firstTime"==e?this.subscriptions.add(this.testedListApiService.getTestedFirstMark("export_tool",this.examId).subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et,st;1==i.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(at=>{n=at.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ze.AX.changeMsgLoadingEffect(n),this.exportQuestionObjs=null!==(r=null===(a=i.data)||void 0===a?void 0:a.questionObjs)&&void 0!==r?r:[],this.firstMark=null!==(c=null===(l=i.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(_=i.data)||void 0===_?void 0:_.maxGroupId)&&void 0!==d?d:0,this.firstMark=null!==(h=null===(p=this.form.controls)||void 0===p?void 0:p.isSortByMarkDesc)&&void 0!==h&&h.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(w=null===(f=i.data)||void 0===f?void 0:f.studentsNotInClassResults)&&void 0!==w?w:[],this.hasEssayQuestion),null!==(S=null===(k=i.data)||void 0===k?void 0:k.questionObjs)&&void 0!==S?S:[]):null!==(Q=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==Q&&Q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(N=i.data)||void 0===N?void 0:N.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(X=null===(W=i.data)||void 0===W?void 0:W.questionObjs)&&void 0!==X?X:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(J=null===(E=i.data)||void 0===E?void 0:E.studentsNotInClassResults)&&void 0!==J?J:[]),null!==(K=null===(z=i.data)||void 0===z?void 0:z.questionObjs)&&void 0!==K?K:[]),this.firstMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.firstMark),this.hasEssayQuestion),this.dataExportFirstTime=this.processDataForExcel(null!==(et=null===(B=i.data)||void 0===B?void 0:B.studentsInClassResults)&&void 0!==et?et:[]),setTimeout(()=>{var at;null===(at=document.getElementById("table_"+e))||void 0===at||at.click(),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(st=i.message)&&void 0!==st?st:""),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"allTime"==e&&this.subscriptions.add(this.testedListApiService.getTestedAllResult("export_tool",this.examId).subscribe(i=>{var a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et,st;1==i.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(at=>{n=at.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ze.AX.changeMsgLoadingEffect(n),this.exportQuestionObjs=null!==(r=null===(a=i.data)||void 0===a?void 0:a.questionObjs)&&void 0!==r?r:[],this.allTimeMark=null!==(c=null===(l=i.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(_=i.data)||void 0===_?void 0:_.maxGroupId)&&void 0!==d?d:0,this.allTimeMark=null!==(h=null===(p=this.form.controls)||void 0===p?void 0:p.isSortByMarkDesc)&&void 0!==h&&h.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(w=null===(f=i.data)||void 0===f?void 0:f.studentsNotInClassResults)&&void 0!==w?w:[],this.hasEssayQuestion),null!==(S=null===(k=i.data)||void 0===k?void 0:k.questionObjs)&&void 0!==S?S:[]):null!==(Q=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==Q&&Q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(N=i.data)||void 0===N?void 0:N.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(X=null===(W=i.data)||void 0===W?void 0:W.questionObjs)&&void 0!==X?X:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(J=null===(E=i.data)||void 0===E?void 0:E.studentsNotInClassResults)&&void 0!==J?J:[]),null!==(K=null===(z=i.data)||void 0===z?void 0:z.questionObjs)&&void 0!==K?K:[]),this.allTimeMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.allTimeMark),this.hasEssayQuestion),this.dataExportAllTime=this.processDataForExcel(null!==(et=null===(B=i.data)||void 0===B?void 0:B.studentsInClassResults)&&void 0!==et?et:[]),setTimeout(()=>{var at;null===(at=document.getElementById("table_"+e))||void 0===at||at.click(),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(st=i.message)&&void 0!==st?st:""),Ze.AX.closeLoadingEffect(10),this.exportLoading=!1)}))}exportToPDF(e){var n;this.exportResultService.processClasses(null!==(n=this.examObj.id)&&void 0!==n?n:0,e).then(()=>{}).catch(i=>{this.commonService.snackError("string"==typeof i?i:i.message)})}scanMarkObjs(e){e&&(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData())}closeScanFile(e){e&&(this.showFileScan=!1)}openFileScan(e){this.showFileScan=!(!e||!this.loadedJs)&&e}checkHasExamOffline(e){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(e).subscribe(n=>{var i,a,r,l;1==n.success?null!==(i=n.data)&&void 0!==i&&i.value&&this.homeworkExamService.isPdfExam(null!==(a=this.examObj.examType)&&void 0!==a?a:0)?(this.hasExamOffline=!0,this.tokenScanExamOffline=null===(r=n.data)||void 0===r?void 0:r.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=null!==(l=n.message)&&void 0!==l?l:""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(e){e&&(this.mustShownResultId=e)}parseAllUserObjsForMonitorModule(e,n){let i=this.examResultListSortService._changeExamResultStatusForAllClassroom(e,this.hasEssayQuestion),a=this.examResultListSortService._changeExamResultStatusForOneClassroom(n,this.hasEssayQuestion),r=[];return i.forEach(l=>{l.results&&l.results.length>0&&l.results.forEach(c=>{var d={userid:c.userId,studentid:c.studentId,username:null,studentname:c.fullName,status:c.isOnTest?1:c.isNotMarked?2:c.isMarked?3:0};this.commonService.filterArray(r,d)||r.push(d)})}),a.forEach(l=>{var _={userid:l.userId,studentid:l.studentId,username:l.fullName,studentname:l.fullName,status:l.isOnTest?1:l.isNotMarked?2:l.isMarked?3:0};this.commonService.filterArray(r,_)||r.push(_)}),r}changeHeaderTitle(){var e=0,n=0,i=0,a=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(r=>{var l,c,_,d,p,h;e+=null!==(c=null===(l=r.results)||void 0===l?void 0:l.length)&&void 0!==c?c:0,a+=null!==(d=null===(_=r.results)||void 0===_?void 0:_.length)&&void 0!==d?d:0,n+=null!==(p=r.results)&&void 0!==p&&p.filter(f=>1==f.isOnTest)?r.results.filter(f=>1==f.isOnTest).length:0,i+=null!==(h=r.results)&&void 0!==h&&h.filter(f=>1==f.isNotTested)?r.results.filter(f=>1==f.isNotTested).length:0}),this.totalSubmitted=e-i-n,this.totalStudentByClass=a,this.totalStudents=e,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(r=>{this.headerTitle=r+" ("+this.totalSubmitted+"/"+e+")"})}reloadApi(){this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData()}getData(){this.testedListApiService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(e=>{var n,i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X;if(1==e.success){this.initDataTestedList=null!==(n=e.data)&&void 0!==n?n:{studentsNotInClassResults:[]},this.examObj=null!==(a=null===(i=e.data)||void 0===i?void 0:i.examObj)&&void 0!==a?a:{},this.maxGroupQuestion=null!==(l=null===(r=e.data)||void 0===r?void 0:r.maxGroupId)&&void 0!==l?l:0;let J=null!==(c=this.commonService.getMyQueryParam("backto"))&&void 0!==c?c:"";this.backToLink=J||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj.orcLogId),this.countEssayQuestion=this.examResultListSortService._counterTotalEssayOfQuestionObjs(null!==(d=null===(_=e.data)||void 0===_?void 0:_.questionObjs)&&void 0!==d?d:[]),this.hasEssayQuestion=!!this.countEssayQuestion;var E=[];E=null!==(h=null===(p=e.data)||void 0===p?void 0:p.studentsInClassResults)&&void 0!==h?h:[],!(null===(f=e.data)||void 0===f)&&f.studentsNotInClassResults&&(null===(w=e.data)||void 0===w?void 0:w.studentsNotInClassResults.length)>0&&(E=E.concat({classObj:{id:-1,name:"lang_auto_tu_do",countStudents:e.data.studentsNotInClassResults.length},results:e.data.studentsNotInClassResults})),this.allRawExamResultObjsOfStudentByClassroom=this.examResultListSortService._changeExamResultStatusForAllClassroom(E,this.hasEssayQuestion),this.isNotTestedYet=0==this.allViewExamResultObjsOfStudentByClassroom.length&&0==this.allRawExamResultObjsOfStudentByClassroom.length,this.changeFilterEvent(),this.checkHasExamOffline(null!==(k=this.examObj.hashId)&&void 0!==k?k:""),this.allUserObjsForMonitorModule=this.parseAllUserObjsForMonitorModule(null!==(D=null===(S=e.data)||void 0===S?void 0:S.studentsInClassResults)&&void 0!==D?D:[],null!==(N=null===(Q=e.data)||void 0===Q?void 0:Q.studentsNotInClassResults)&&void 0!==N?N:[]),this.scanLoading=!1,this.successStatusObj()}else if(this.scanLoading=!1,this.isNotTestedYet=!0,e.data&&e.data.errorConfigClassroomPermission)this.examObj=null!==(q=e.data.examObj)&&void 0!==q?q:{},this.stopStatusObj();else{let J=null!==(W=this.commonService.getMyQueryParam("backto"))&&void 0!==W?W:"";this.backToLink=J||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(null!==(X=e.message)&&void 0!==X?X:"")}})}loadingFileJs(){return new Promise((e,n)=>{var i=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(i).then(()=>(0,ke.mG)(this,void 0,void 0,function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&e(!0),n(new Error)):(this.countRetryLoadJS++,this.countRetryLoadJS>3?n(new Error("T\u1ea3i th\u01b0 vi\u1ec7n kh\xf4ng th\xe0nh c\xf4ng")):this.loadingFileJs())},1e3)}))})}ngOnInit(){this.initStatusObj(),this.getStatusSideNav(),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n,i,a;this.form=this.fb.group({searchContent:new m.NI("",m.kI.required),isSortByNameAsc:new m.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByNameAsc")),isSortByMarkDesc:new m.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByMarkDesc")),isSortByTimeDesc:new m.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"))}),this.cateId=null!==(e=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==e?e:0,this.examId=null!==(n=Number(this.activeRoute.snapshot.paramMap.get("id")))&&void 0!==n?n:0,this.resultId=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("result_id")))&&void 0!==i?i:0;let r=null!==(a=this.commonService.getMyQueryParam("backto"))&&void 0!==a?a:"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,r&&r.includes("shareType")&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(r)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.subscriptions.add(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanMarkObjs(!0)})),super.ngOnInit(),this.gaService.gaEvent("teacher_tested_list")}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}constructor(e,n,i,a,r,l,c,_,d,p,h,f,w,k,S,D){super(n),this.fb=e,this.commonService=n,this.sortService=i,this.examFilterService=a,this.testedListApiService=r,this.offlineExamResultService=l,this.homeworkExamService=c,this.globalService=_,this.activeRoute=d,this.monitorService=p,this.cdnService=h,this.exportResultService=f,this.examResultFilterService=w,this.examResultListSortService=k,this.gaService=S,this.mobileWebviewService=D,this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.form=new m.cw({}),this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.examObj={},this.allUserObjsForMonitorModule=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.totalStudentByClass=0,this.headerTitle="",this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.currentDate=new Date,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.QS),t.Y36(_t.v),t.Y36(kn.K),t.Y36(Yi.Y),t.Y36(xn.x),t.Y36(xt.$4),t.Y36(Ve.j),t.Y36(_i.U),t.Y36(C.gz),t.Y36(Uo.M),t.Y36(Dt.U),t.Y36(di.e),t.Y36(Fo),t.Y36(Ih.n),t.Y36(Ro.O),t.Y36(ci.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-exam-result-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(s0,5),2&e){let i;t.iGM(i=t.CRH())&&(n.drawer=i.first)}},features:[t.qOj],decls:62,vars:41,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-0QZproco5xZ","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-4Z_EfTLJxQi","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-w_SF8LQVEoJ","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],["onlineExam",""],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-ebYwc4pDURL","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-W-MbuCFxges","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","exam-result-list--SRq4KozVPk","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","lucide-search","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],[3,"initData","isNotTestedYet","reloadApi"],[3,"initData","isNotTestedYet","userList","reloadApi"],["azt-track-service","exam-result-list-ebYwc4pDURL",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-W-MbuCFxges",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","examResultObjsByClassroom","isNotTestedYet","isOpenSideNav","hasEssayQuestion","showFileScan","obj","scanLoading","isMobile","headerTitle","mustShownResultId","notTestedOpenFileScan"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit",4,"ngIf"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit"],["azt-track-service","exam-result-list-i4C5FY9wmRS",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-R5IoDfDGPjl",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-uu4eRK1bM_Y",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-Z2Yv5PDF0ip",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-lkdrlUeMVIu",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-Y2rW9vySVE4",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-E1ccsRZD8jm",1,"dropdown-item",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,r0,1,0,"azt-loading-effect",1),t.YNc(2,v0,39,73,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),t.YNc(9,b0,8,3,"li",8),t.ALo(10,"viewPermission"),t.YNc(11,w0,8,3,"li",8),t.ALo(12,"viewPermission"),t.YNc(13,T0,8,3,"li",8),t.ALo(14,"viewPermission"),t.YNc(15,C0,8,3,"li",8),t.ALo(16,"viewPermission"),t.YNc(17,k0,10,3,"li",8),t.ALo(18,"viewPermission"),t.YNc(19,O0,10,3,"li",8),t.ALo(20,"viewPermission"),t.YNc(21,y0,10,3,"li",8),t.ALo(22,"viewPermission"),t.TgZ(23,"li")(24,"label",9),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(25,"span",10),t.O4$(),t.TgZ(26,"svg",11),t._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),t.qZA(),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(34,"div",17)(35,"input",18),t.NdJ("change",function(){return n.changeSortEvent("isSortByNameAsc")}),t.qZA()()()(),t.TgZ(36,"li")(37,"label",19),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(38,"span",10),t.O4$(),t.TgZ(39,"svg",11),t._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),t.qZA(),t._uU(45),t.ALo(46,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(47,"div",17)(48,"input",22),t.NdJ("change",function(){return n.changeSortEvent("isSortByMarkDesc")}),t.qZA()()()(),t.TgZ(49,"li")(50,"label",23),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(51,"span",10),t.O4$(),t.TgZ(52,"svg",11),t._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(60,"div",17)(61,"input",24),t.NdJ("change",function(){return n.changeSortEvent("isSortByTimeDesc")}),t.qZA()()()()()()()()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i),t.xp6(6),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(10,14,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(12,17,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(14,20,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(16,23,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(18,26,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(20,29,n.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!n.isMobileWebView&&t.xi3(22,32,n.examObj.permissionObj,"exam")),t.xp6(11),t.hij(" ",t.lcZ(33,35,"lang_testbank_testted_list_sort_name")," "),t.xp6(13),t.hij(" ",t.lcZ(46,37,"lang_testbank_testted_list_sort_point")," "),t.xp6(13),t.hij(" ",t.lcZ(59,39,"lang_testbank_testted_list_sort_time")," ")}},dependencies:[y.mk,y.O5,Ft.W0,Ft.D8,Ne.jA,Ne.kh,Ne.LW,Qt.Kd,P.KC,m._Y,m.Fj,m.Wl,m.JJ,m.JL,m.sg,m.u,zt.Q,Jt.M,ui,Vt._,kg,cf,Cf,$f,Kf.A,n0,a0,tt.bT,tt.Pz],encapsulation:2}),o})();var S0=T(52106);let $o=(()=>{class o{getDefaultFilterObj(){var e,n=this._getInitFilterObj(),i=this.commonService.castJsonToObj(null!==(e=this.browserStorageService.getSimpleStorage(this.localStorageSlug))&&void 0!==e?e:"");return i&&(n=i),n}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var n=0;for(var i in e)!0===e[i]&&(n+=1);return n}_getInitFilterObj(){return{isSubmitted:!1,isNotSubmit:!1,isMarked:!1,mustReSubmit:!1}}constructor(e,n){this.commonService=e,this.browserStorageService=n,this.totalCustomFilter=0,this.localStorageSlug="testbank_homework_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_t.v),t.LFG(Le.z))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Z0(o,s){1&o&&(t.TgZ(0,"div",3),t.O4$(),t.TgZ(1,"svg",4)(2,"g",5)(3,"g",6),t._UZ(4,"circle",7),t.TgZ(5,"path",8),t._UZ(6,"animateTransform",9),t.qZA()()()()())}function E0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",10)(1,"form",11)(2,"div",12)(3,"div",13)(4,"h3",14),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",15),t._UZ(8,"editor",16),t.qZA()()()(),t.TgZ(9,"div",17)(10,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeDialog())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveHomework())}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,5,"lang_auto_noi_dung")," "),t.xp6(3),t.Q6J("init",e.initDataEditor),t.xp6(3),t.hij(" ",t.lcZ(12,7,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(15,9,"lang_auto_luu")," ")}}let I0=(()=>{class o extends R.Q{closeDialog(){this.dialogRef.close()}saveHomework(){if(this.initStatusObj(),this.form.invalid)this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");else{var n=this.commonService.getFormObj(this.form).homeworkDescription;this.uploadImageOfHomeworkService.replaceImageInContent(n).subscribe(i=>{if(null==i.errorMessage){let r={content:this.zipDataService.convertContentGzip(i.content)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(r,this.homeworkHashId).subscribe(l=>{var c;1==l.success?(l.data&&l.data.objs&&this.data.callback(l.data.objs[0]),this.closeDialog(),this.showSuccessSnack("lang_auto_luu_thanh_cong")):this.errorStatusObj(null!==(c=l.message)&&void 0!==c?c:"",!0)}))}else this.showErrorSnack(i.errorMessage),this.stopStatusObj()})}}getHomework(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost([],e).subscribe(n=>{var i,a,r,l;if(1==n.success){this.homeworkObj=null===(i=n.data)||void 0===i?void 0:i.homeworkObj;let c=null!==(a=this.homeworkObj)&&void 0!==a&&a.content?this.zipDataService.decodeContentGzip(null===(r=this.homeworkObj)||void 0===r?void 0:r.content):"";this.form.patchValue({homeworkDescription:c}),this.successStatusObj()}else this.errorStatusObj(null!==(l=n.message)&&void 0!==l?l:"",!0)}))}checkModeUiEditor(){var e;this.initDataEditor="dark"==(""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light")?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}ngOnInit(){this.form=this.formBuilder.group({homeworkDescription:new m.p4("")}),this.checkModeUiEditor(),super.ngOnInit()}ngOnChanges(){this.checkModeUiEditor()}constructor(e,n,i,a,r,l,c,_){super(e),this.commonService=e,this.formBuilder=n,this.zipDataService=i,this.documentConfigService=a,this.browserStorageService=r,this.uploadImageOfHomeworkService=l,this.dialogRef=c,this.data=_,this.form=new m.nJ({}),this.permissionTypes=ze.$,this.homeworkId=0,this.homeworkHashId="",this.homeworkObj=void 0,this.initDataEditor={},this.homeworkHashId=_.hashId,this.getHomework(this.homeworkHashId)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS),t.Y36(fn.D),t.Y36(xt.Cq),t.Y36(Le.z),t.Y36(uo.J),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-config-homework"]],features:[t._Bn([{provide:Re.fM,useClass:Ii.HF,deps:[Ei.Ad,Zi.o8]},{provide:Re.ab,useFactory:Mi.hx,deps:[Ae.O]}]),t.qOj,t.TTD],decls:4,vars:2,consts:[[1,"box"],["class","azt-icon-loading text-center p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"azt-icon-loading","text-center","p-5"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"mx-auto","w-8","h-8"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"setting","p-3"],[3,"formGroup"],["id","document-desc"],[1,"setting-label-textarea"],[1,"text-md","font-medium"],[1,"mt-2"],["formControlName","homeworkDescription","apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"init"],[1,"p-3","text-right"],["azt-track-service","config-homework-dialog-lVvTPghlWFp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","config-homework-dialog-DfiuQtfSx_I",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Z0,7,0,"div",1),t.YNc(2,E0,16,11,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,g.PG,m._Y,m.JJ,m.JL,m.sg,m.u,Jt.M,tt.bT],encapsulation:2}),o})(),M0=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n}handleCloseDialog(){this.dialogRef.close(!1)}handleConfirmDialog(){this.dialogRef.close(!0)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.hV),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["testbank-homework-delete-dialog"]],decls:23,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-Bb7ymz69OiI",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-5Ii165wkYxm",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(12,"div",10)(13,"p",11),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()(),t.TgZ(16,"div",12)(17,"button",13),t.NdJ("click",function(){return n.handleCloseDialog()}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"button",14),t.NdJ("click",function(){return n.handleConfirmDialog()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(10),t.hij(" ",t.lcZ(11,4,"lang_auto_ban_co_chac_chan_muon_xoa")+" ?"," "),t.xp6(4),t.hij(" ",t.lcZ(15,6,"lang_auto_ban_muon_xoa_file")+" "+n.data.name," "),t.xp6(4),t.hij(" ",t.lcZ(19,8,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," "))},dependencies:[tt.bT],encapsulation:2}),o})();function P0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clickToSeeMore())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_see_more")))}function L0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clickToShowShortContent())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_see_short_content")))}let j0=(()=>{class o extends R.Q{constructor(){super(...arguments),this.content="",this.maxLength=500,this.showContent="",this.showSeeMoreButton=!0,this.showShortContentButton=!1}clickToShowShortContent(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}clickToSeeMore(){this.showSeeMoreButton=!1,this.showShortContentButton=!0,this.processSeeMore()}processSeeMore(){let e=this.commonService.removeTagHtml(this.content);e.length>this.maxLength?this.showContent=this.showSeeMoreButton?e.substring(0,this.maxLength)+"...":this.content:(this.showSeeMoreButton=!1,this.showShortContentButton=!1,this.showContent=this.content)}ngOnInit(){this.processSeeMore(),super.ngOnInit()}ngOnChanges(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-see-more"]],inputs:{content:"content",maxLength:"maxLength"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[[3,"innerHTML"],["class","btn-text-primary",3,"click",4,"ngIf"],[1,"btn-text-primary",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"div",0),t.YNc(1,P0,3,3,"a",1),t.YNc(2,L0,3,3,"a",1)),2&e&&(t.Q6J("innerHTML",n.showContent,t.oJD),t.xp6(1),t.Q6J("ngIf",n.showSeeMoreButton&&n.content.length>n.maxLength),t.xp6(1),t.Q6J("ngIf",n.showShortContentButton&&n.content.length>n.maxLength))},dependencies:[y.O5,tt.bT],encapsulation:2}),o})();function N0(o,s){if(1&o&&(t.TgZ(0,"div",11),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"rect",13)(3,"line",14)(4,"line",15)(5,"line",16),t.qZA(),t.kcU(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&o){const e=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_bat_dau")+": "+t.lcZ(9,3,null==e.initData.homeworkObj?null:e.initData.homeworkObj.startDate)," ")}}function q0(o,s){if(1&o&&t._UZ(0,"azt-share",32),2&o){const e=t.oxw();let n;t.Q6J("objectCodeType",2)("objectCode","HOMEWORK")("objectId",null!==(n=e.initData.homeworkObj.id)&&void 0!==n?n:0)("homeworkWithPermissionObj",e.initData.homeworkObj)}}function Q0(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",63)(2,"a",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToClassroomDetail())}),t._uU(3),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(2),t.s9C("matTooltip",e.initData.classroomObj.name),t.xp6(1),t.hij(" ",e.initData.classroomObj.name," ")}}function D0(o,s){1&o&&(t.TgZ(0,"div",63)(1,"a",65),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function U0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openConfigDialog())}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",67)(3,"path",68),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&o&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function F0(o,s){if(1&o&&(t.TgZ(0,"div",69),t._UZ(1,"azt-see-more",70),t.qZA()),2&o){const e=t.oxw(2);let n;t.xp6(1),t.Q6J("content",null!==(n=null==e.initData.homeworkObj?null:e.initData.homeworkObj.content)&&void 0!==n?n:"")("maxLength",200)}}function R0(o,s){1&o&&(t.TgZ(0,"p",71),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_noi_dung")," "))}function z0(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",19),t._UZ(2,"path",73)(3,"polyline",74)(4,"line",75),t.qZA()())}function J0(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",76)(2,"g",77)(3,"g",78),t._UZ(4,"circle",79),t.TgZ(5,"path",80),t._UZ(6,"animateTransform",81),t.qZA()()()()())}function B0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e),t.oxw();const i=t.MAs(51);return t.KtG(i.click())}),t.YNc(1,z0,5,0,"span",31),t.YNc(2,J0,7,0,"span",31),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.loadingUpload),t.xp6(1),t.Q6J("ngIf",e.loadingUpload),t.xp6(1),t.hij(" ",t.lcZ(4,3,"lang_auto_them_file")," ")}}function H0(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",84),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.onShowFile(a,-1))}),t.O4$(),t.TgZ(2,"svg",19),t._UZ(3,"path",85)(4,"polyline",86)(5,"line",87)(6,"line",88)(7,"line",89),t.qZA(),t.kcU(),t.TgZ(8,"span",90),t._uU(9),t.qZA()(),t.TgZ(10,"button",91),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw(3);return t.KtG(r.removeFile(a))}),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",92),t._UZ(13,"line",93)(14,"line",94),t.qZA()(),t.BQk()}if(2&o){const e=s.$implicit;t.xp6(8),t.s9C("matTooltip",e.name),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,3,"lang_auto_xoa"))}}function Y0(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",82),t.YNc(2,H0,15,5,"ng-container",83),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.formHomework.files)}}function G0(o,s){1&o&&(t.TgZ(0,"p",95),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_file_dinh_kem")," "))}const Ko=function(o){return{opacity:o}};function $0(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"h3",34),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",35)(5,"ul",36)(6,"li",37),t.ALo(7,"deletePermission"),t.TgZ(8,"a",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openDeleteHomeworkDialog())}),t.O4$(),t.TgZ(9,"svg",12),t._UZ(10,"path",39)(11,"path",40)(12,"path",41)(13,"line",42)(14,"line",43),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(17,"li",37),t.ALo(18,"editPermission"),t.TgZ(19,"a",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.redirectToSetting())}),t.O4$(),t.TgZ(20,"svg",12),t._UZ(21,"path",45)(22,"circle",46),t.qZA(),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()(),t.kcU(),t.TgZ(25,"div",47)(26,"div",48)(27,"h3",34),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.TgZ(30,"div",49),t.YNc(31,Q0,4,2,"ng-container",50),t.YNc(32,D0,4,3,"ng-template",null,51,t.W1O),t.qZA()(),t.TgZ(34,"div",52)(35,"div",48)(36,"h3",34),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.YNc(39,U0,6,3,"button",53),t.ALo(40,"editPermission"),t.ALo(41,"configPermission"),t.qZA(),t.TgZ(42,"div",54),t.YNc(43,F0,2,2,"div",55),t.YNc(44,R0,3,3,"p",56),t.qZA()(),t.TgZ(45,"div",57)(46,"div",48)(47,"h3",34),t._uU(48),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"input",58,59),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelected(i))}),t.qZA(),t.YNc(52,B0,5,5,"button",60),t.ALo(53,"editPermission"),t.ALo(54,"configPermission"),t.qZA(),t.TgZ(55,"div",61),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.YNc(58,Y0,3,1,"ng-container",50),t.YNc(59,G0,3,3,"ng-template",null,62,t.W1O),t.qZA()}if(2&o){const e=t.MAs(33),n=t.MAs(60),i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,17,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(49,Ko,t.xi3(7,19,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),t.xp6(9),t.hij(" ",t.lcZ(16,22,"lang_auto_xoa")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(51,Ko,t.xi3(18,24,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(24,27,"lang_auto_cai_dat")," "),t.xp6(5),t.hij(" ",t.lcZ(29,29,"lang_auto_giao_cho")," "),t.xp6(3),t.Q6J("ngIf",i.initData.classroomObj)("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(38,31,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(40,33,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"homework")||t.xi3(41,36,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"homework")),t.xp6(4),t.Q6J("ngIf",null==i.initData.homeworkObj?null:i.initData.homeworkObj.content),t.xp6(1),t.Q6J("ngIf",!(null!=i.initData.homeworkObj&&i.initData.homeworkObj.content)),t.xp6(4),t.hij(" ",t.lcZ(49,39,"lang_auto_file_dinh_kem")," "),t.xp6(4),t.Q6J("ngIf",t.xi3(53,41,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"exam")||t.xi3(54,44,null==i.initData.homeworkObj?null:i.initData.homeworkObj.permissionObj,"exam")),t.xp6(4),t.hij(" ",t.lcZ(57,47,"lang_auto_ho_tro_file_dinh_danh_anh_pdf_work_excel_audio_hoac_video")," "),t.xp6(2),t.Q6J("ngIf",null==i.formHomework.files?null:i.formHomework.files.length)("ngIfElse",n)}}function K0(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",96),t._UZ(2,"polyline",97),t.qZA()())}function W0(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",96),t._UZ(2,"polyline",98),t.qZA()())}let V0=(()=>{class o extends R.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong_duong_dan_nop_bai")}copyLinkToClipboard(e){return`${this.commonService.getCurrentDomain()}/bai-tap/${e}`}onFileSelected(e){var n;if(this.permissionService.hasEditPermission("homework",null===(n=this.initData.homeworkObj)||void 0===n?void 0:n.permissionObj)){let r=e.target,l=r.files,c=!!l&&l[0];0!=c&&((0,lt.C0)(c.type)?(0,lt.ml)(c.type)?this.showErrorSnack("lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,lt.hv)(c).then(_=>{this.apiUploadService.uploadToCdnForHomework(_).subscribe(d=>{var p;if(d.type!=H.dt.UploadProgress)if(1==d.success){this.formHomework.files.push(Object.assign({},d.data));let h={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(h,null===(p=this.initData.homeworkObj)||void 0===p?void 0:p.hashId).subscribe(f=>{var w;1==f.success?this.showSuccessSnack("lang_auto_them_file_thanh_cong"):this.errorStatusObj(null!==(w=f.message)&&void 0!==w?w:"",!0),this.loadingUpload=!1})),this.uploadProgress=-1}else this.loadingUpload=!1,this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi[SPLIT_LANG] [SPLIT_LANG]"+d.message)})})):this.showErrorSnack("lang_auto_vui_long_tai_len_file_dinh_dang_anh_pdf_word_excel_audio_hoac_video")),r.files=null}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}removeFile(e){var n;this.dialog.open(M0,{width:"400px",data:null===(n=this.formHomework.files)||void 0===n?void 0:n[e],restoreFocus:!1}).afterClosed().subscribe(a=>{var r,l;if(a){null===(r=this.formHomework.files)||void 0===r||r.splice(e,1);let c={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(c,null===(l=this.initData.homeworkObj)||void 0===l?void 0:l.hashId).subscribe(_=>{var d;1==_.success?this.showSuccessSnack("lang_auto_xoa_file_thanh_cong"):this.errorStatusObj(null!==(d=_.message)&&void 0!==d?d:"",!0),this.loadingUpload=!1}))}})}onShowFile(e,n){let i=Object.assign(Object.assign({},e),{index:n});this.dialog.open(li.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i},restoreFocus:!1})}redirectToClassroomDetail(){var e,n,i,a,r,l,c,_,d,p;let h=`/admin/testbank/homework-results-list/${null!==(n=null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.categoryId)&&void 0!==n?n:0}/${null===(i=this.initData.homeworkObj)||void 0===i?void 0:i.id}/${null===(a=this.initData.homeworkObj)||void 0===a?void 0:a.hashId}`,f=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";f&&f.includes("shareType")&&(h=`/admin/testbank/homework-results-list/${null!==(c=null===(l=this.initData.homeworkObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(_=this.initData.homeworkObj)||void 0===_?void 0:_.id}/${null===(d=this.initData.homeworkObj)||void 0===d?void 0:d.hashId}?backto=`+encodeURIComponent(f)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(p=this.initData.classroomObj)||void 0===p?void 0:p.id}`,`?backto=${h}`)}redirectToSetting(){var e,n,i,a,r,l,c,_,d,p,h,f,w;if(this.permissionService.hasEditPermission("homework",null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.permissionObj)){let S=`/admin/testbank/homework-results-list/${null!==(i=null===(n=this.initData.homeworkObj)||void 0===n?void 0:n.categoryId)&&void 0!==i?i:0}/${null===(a=this.initData.homeworkObj)||void 0===a?void 0:a.id}/${null===(r=this.initData.homeworkObj)||void 0===r?void 0:r.hashId}`,D=null!==(l=this.commonService.getMyQueryParam("backto"))&&void 0!==l?l:"";D&&D.includes("shareType")&&(S=`/admin/testbank/homework-results-list/${null!==(_=null===(c=this.initData.homeworkObj)||void 0===c?void 0:c.categoryId)&&void 0!==_?_:0}/${null===(d=this.initData.homeworkObj)||void 0===d?void 0:d.id}/${null===(p=this.initData.homeworkObj)||void 0===p?void 0:p.hashId}?backto=`+encodeURIComponent(D)),this.myNavigationWithQueryString(`/admin/testbank/config-homework/${null!==(f=null===(h=this.initData.homeworkObj)||void 0===h?void 0:h.categoryId)&&void 0!==f?f:0}/${null===(w=this.initData.homeworkObj)||void 0===w?void 0:w.hashId}`,`?backto=${S}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(n=>{this.dialog.open(hi,{data:{isShow:!0,content:n},restoreFocus:!1})})}openDeleteHomeworkDialog(){var e;this.permissionService.hasFullPermission("homework",null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(gi.h,{data:{obj:this.initData.homeworkObj,type:3,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/1/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openConfigDialog(){var e;this.dialog.open(I0,{width:"850px",data:{callback:this.callbackConfigDialog.bind(this),showConfig:{description:!0},hashId:null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.hashId},restoreFocus:!1})}callbackConfigDialog(e){var n;this.initData.homeworkObj&&(this.initData.homeworkObj.name=e.name,this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(null!==(n=e.content)&&void 0!==n?n:""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}processData(){var e,n,i;this.initData.homeworkObj&&(this.formHomework.files=null!==(n=this.commonService.myParseJson(null!==(e=this.initData.homeworkObj.files)&&void 0!==e?e:""))&&void 0!==n?n:[],this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(null!==(i=this.initData.homeworkObj.content)&&void 0!==i?i:""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}ngOnInit(){this.processData(),super.ngOnInit()}constructor(e,n,i,a,r,l){super(e),this.commonService=e,this.dialog=n,this.apiUploadService=i,this.documentConfigService=a,this.zipDataService=r,this.permissionService=l,this.initData={},this.reloadApi=new t.vpe,this.isShowActions=!0,this.loadingUpload=!1,this.uploadProgress=0,this.formHomework={files:[],content:""}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.on),t.Y36(mn.$),t.Y36(xt.Cq),t.Y36(fn.D),t.Y36(An.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["menu-homework"]],inputs:{initData:"initData"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:47,vars:28,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",2,"max-width","60%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","mt-2","lg:mt-0","flex","items-center"],["azt-track-service","menu-homework-eI2NNVUSUY1",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"ml-1",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["class"," flex items-center mt-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],["d","M21 15.5V6a2 2 0 0 0-2-2H9.5"],["d","M16 2v4"],["d","M3 10h7"],["d","M21 10h-5.5"],["x1","2","y1","2","x2","22","y2","22"],[1,"text-sm","inline-block","ml-1"],[1,"flex","mt-2"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-homework-uD4Lx8Z-l-r",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"objectCodeType","objectCode","objectId","homeworkWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-homework-2OnoCiN1dtn",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-homework--_M1HhvAdpz",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-homework-TNawByu5aUA","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"azt-document-desc"],["id","description_content","class","description text-left",4,"ngIf"],["class","text-md text-center",4,"ngIf"],[1,"azt-document-file","mt-4"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""],["azt-track-service","menu-homework-nZbwE5HD5ts","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"leading-relaxed","text-slate-500","text-xs"],["noFile",""],[1,"col-span-12","md:col-span-6"],["azt-track-service","menu-homework-zV31SFaqVqP",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-homework-TNawByu5aUA",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["id","description_content",1,"description","text-left"],[3,"content","maxLength"],[1,"text-md","text-center"],["azt-track-service","menu-homework-nZbwE5HD5ts",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-4","h-4","lucide","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"app-block-detail","mt-2"],[4,"ngFor","ngForOf"],["azt-track-service","menu-homework-qPLF48TFcWr",1,"btn-text-primary",2,"width","85%",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],[1,"truncate",2,"width","75%","text-align","left",3,"matTooltip"],["azt-track-service","menu-homework-8wcAt-Fpoyn",1,"btn","btn-transparent",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"text-md","text-center","mt-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return n.showCopySuccess()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"rect",8)(10,"path",9),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.kcU(),t._UZ(13,"azt-download-qr-code",10),t.qZA()(),t.TgZ(14,"div",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),t.qZA(),t.kcU(),t.TgZ(20,"span",17),t._uU(21),t.ALo(22,"mytranslate"),t.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(24,N0,10,5,"div",18),t.TgZ(25,"div",11),t.O4$(),t.TgZ(26,"svg",19),t._UZ(27,"path",20)(28,"path",21)(29,"path",22)(30,"path",23)(31,"path",24)(32,"line",25),t.qZA(),t.kcU(),t.TgZ(33,"span",17),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"span",26),t._uU(37),t.ALo(38,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(39,"mytranslate"),t.qZA()(),t.TgZ(40,"div",27),t.YNc(41,q0,1,4,"ng-template",28),t.qZA()(),t.YNc(42,$0,61,53,"ng-template",28),t.TgZ(43,"div",29)(44,"button",30),t.NdJ("click",function(){return n.toggleShowActions()}),t.YNc(45,K0,3,0,"span",31),t.YNc(46,W0,3,0,"span",31),t.qZA()()()),2&e){const i=t.MAs(4);t.xp6(3),t.s9C("matTooltip",null==n.initData.homeworkObj?null:n.initData.homeworkObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",null==n.initData.homeworkObj?null:n.initData.homeworkObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",n.copyLinkToClipboard(null==n.initData.homeworkObj?null:n.initData.homeworkObj.hashId)),t.xp6(4),t.hij(" ",t.lcZ(12,16,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_submit_homework_qrcode_"+(null==n.initData.homeworkObj?null:n.initData.homeworkObj.hashId))("linkUrl",n.copyLinkToClipboard(null==n.initData.homeworkObj?null:n.initData.homeworkObj.hashId)),t.xp6(8),t.hij(" ",t.lcZ(22,18,"lang_testbank_tested_list_date_create")+": "+t.lcZ(23,20,null==n.initData.homeworkObj?null:n.initData.homeworkObj.createdAt)," "),t.xp6(3),t.Q6J("ngIf",null==n.initData.homeworkObj?null:n.initData.homeworkObj.startDate),t.xp6(10),t.hij(" ",t.lcZ(35,22,"lang_auto_han_cuoi")+": "," "),t.xp6(3),t.hij(" ",null!=n.initData.homeworkObj&&n.initData.homeworkObj.deadline?t.lcZ(38,24,null==n.initData.homeworkObj?null:n.initData.homeworkObj.deadline):t.lcZ(39,26,"lang_auto_khong_thoi_han")," "),t.xp6(4),t.Q6J("ngIf",n.initData.homeworkObj&&n.initData.homeworkObj.hasOwnProperty("id")),t.xp6(1),t.Q6J("ngIf",n.isShowActions),t.xp6(3),t.Q6J("ngIf",n.isShowActions),t.xp6(1),t.Q6J("ngIf",!n.isShowActions)}},dependencies:[y.sg,y.O5,y.PC,Tn.i3,Qt.Kd,Ki.o,j0,Ke.Q,ti.I,tt.bT,tt.BU,tt.vL,tt.El,tt.tO],encapsulation:2}),o})();const X0=["TABLE"],tx=function(){return{}};function ex(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA(),t.TgZ(3,"td",4),t._uU(4),t.ALo(5,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(6,"td",7),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"td",4),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"td",4),t._UZ(16,"span",8),t.qZA()()),2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.xp6(1),t.uIk("excelWidth",30)("excelRow",5+n)("excelColumn",0)("excelStyle",i.styleTdNormal),t.xp6(1),t.Oqu(e.fullName),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5+n)("excelColumn",1)("excelStyle",i.styleTdNormal),t.xp6(1),t.Oqu(t.lcZ(5,25,e.birthday)),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5+n)("excelColumn",2)("excelStyle",i.styleTdNormal),t.xp6(1),t.Oqu(0==e.gender?t.lcZ(8,27,"lang_gender_female"):1==e.gender?t.lcZ(9,29,"lang_gender_male"):""),t.xp6(3),t.uIk("excelWidth",15)("excelRow",5+n)("excelColumn",3)("excelStyle",i.styleTdNormal),t.xp6(1),t.Oqu(e.isMarked?i.checkPoint(e.point?e.point:0):e.mustReSubmit?t.lcZ(12,31,"lang_homework_utils_excel_table_export_must_resubmit"):e.isNotSubmit?t.lcZ(13,33,"lang_homework_utils_excel_table_export_not_submit"):t.lcZ(14,35,"lang_homework_utils_excel_table_export_not_point")),t.xp6(4),t.uIk("excelWidth",30)("excelRow",5+n)("excelColumn",4)("excelStyle",i.styleTdNormal),t.xp6(1),t.Q6J("innerHTML",i.getComment(e.answer?e.answer:t.DdM(37,tx)),t.oJD)}}let nx=(()=>{class o extends R.Q{exportToExcel(){var e;let n=this.homeworkObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([null!==(e=this.homeworkObj.name)&&void 0!==e?e:""])+"-ScoreSheet.xlsx":this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx",i=this.exportExcelService.exportHtmlTableToExcelBlob(this.TABLE,!0);Dn.saveAs(i,n)}checkPoint(e){var n,i,a,r,l;let c=null!==(n=this.commonService.myTranslateInstant("lang_auto_dat"))&&void 0!==n?n:"",_=null!==(i=this.commonService.myTranslateInstant("lang_auto_chua_dat"))&&void 0!==i?i:"",d=null!==(a=this.commonService.myTranslateInstant("lang_auto_hoan_thanh"))&&void 0!==a?a:"",p=null!==(r=this.commonService.myTranslateInstant("lang_auto_chua_hoan_thanh"))&&void 0!==r?r:"",h=null!==(l=this.commonService.myTranslateInstant("lang_auto_hoan_thanh_tot"))&&void 0!==l?l:"";switch(e){case 1e3:return c;case 1001:return _;case 2e3:return d;case 2001:return p;case 3e3:return h;default:return e}}getComment(e){var n="";return null!=e&&e.result&&(n=this.commonService.willDeleteParseJson(e.result).comment),n}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.exportExcelService=n,this.studentLists=[],this.homeworkObj={},this.tableType="homework",this.currentDate=new Date,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(zi.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-excel-export"]],viewQuery:function(e,n){if(1&e&&t.Gf(X0,5),2&e){let i;t.iGM(i=t.CRH())&&(n.TABLE=i.first)}},inputs:{studentLists:"studentLists",homeworkObj:"homeworkObj",tableType:"tableType"},features:[t.qOj],decls:44,vars:54,consts:[["azt-track-service","excel-table-export-ZXUlfEPdCW2",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table","azt-excel-cell"],[4,"ngFor","ngForOf"],["colspan","2",1,"border-table","azt-excel-cell"],[1,"azt-excel-cell"],[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return n.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr"),t._UZ(8,"th"),t.qZA(),t.TgZ(9,"tr")(10,"th",3),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(14,"tr"),t._UZ(15,"th"),t.qZA(),t.TgZ(16,"tr")(17,"th",4),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"th",4),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"th",4),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,ex,17,38,"tr",5),t._UZ(34,"tr"),t.TgZ(35,"tr"),t._UZ(36,"td")(37,"td")(38,"td"),t.TgZ(39,"td",6),t._uU(40),t.ALo(41,"mytranslate"),t.qZA(),t._UZ(42,"td")(43,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",n.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,36,"lang_homework_utils_excel_table_export_homework"),": ",n.homeworkObj.name,""),t.xp6(6),t.AsE("",t.lcZ(12,38,"lang_homework_utils_excel_table_export_time_export_result"),": ",t.lcZ(13,40,n.currentDate),""),t.xp6(6),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",0)("excelStyle",n.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(19,42,"lang_first_and_last_name")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",1)("excelStyle",n.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(22,44,"lang_birthday")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",2)("excelStyle",n.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(25,46,"lang_gender")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",3)("excelStyle",n.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(28,48,"lang_point")),t.xp6(2),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",4)("excelStyle",n.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(31,50,"lang_homework_utils_excel_table_export_comment")),t.xp6(3),t.Q6J("ngForOf",n.studentLists),t.xp6(6),t.uIk("excelWidth",15)("excelRow",6+n.studentLists.length)("excelColumn",2)("excelStyle",n.styleThNormal),t.xp6(1),t.hij("",t.lcZ(41,52,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[y.sg,tt.bT,tt._I],encapsulation:2}),o})();var ix=T(37104);const ox=["student",""];function ax(o,s){1&o&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_cham")))}function sx(o,s){1&o&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_nop")))}function rx(o,s){1&o&&(t.TgZ(0,"span",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai"),""))}function lx(o,s){1&o&&(t.TgZ(0,"span",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_point")+": "))}function cx(o,s){if(1&o&&(t.TgZ(0,"span",18),t._UZ(1,"azt-check-mark",19),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("mark",e.student.point)}}function _x(o,s){if(1&o&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function dx(o,s){1&o&&(t.TgZ(0,"p",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function ux(o,s){if(1&o&&(t.TgZ(0,"div",21),t.YNc(1,dx,3,3,"p",22),t.TgZ(2,"p",23),t._uU(3),t.qZA()()),2&o){const e=t.oxw();let n;t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isSubmitted),t.xp6(2),t.hij(" ",null!==(n=null==e.student.answerFileObjs?null:e.student.answerFileObjs.length)&&void 0!==n?n:0," ")}}const mx=function(o){return{"zoom-in":o}};let px=(()=>{class o extends R.Q{constructor(e,n){super(e),this.commonService=e,this.timeService=n}ngOnInit(){super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["testbank-homework-result-student-exam-result-box","student",""]],inputs:{student:"student"},features:[t.qOj],attrs:ox,decls:17,vars:17,consts:[[1,"flex","items-center","p-3","rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name",2,"height","20px"],[1,"font-medium","truncate",2,"max-width","70%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-xs",4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"text-pending"],[1,"text-danger"],[1,"text-slate-500"],[1,"text-black","font-medium"],[3,"mark"],[1,"text-slate-500","text-xs"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"azt-create-avatar",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"span",5,6),t._uU(7),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t.YNc(10,ax,3,3,"span",9),t.YNc(11,sx,3,3,"span",10),t.YNc(12,rx,3,3,"span",11),t.YNc(13,lx,3,3,"span",11),t.YNc(14,cx,2,1,"span",12),t.qZA(),t.YNc(15,_x,3,3,"div",13),t.qZA(),t.YNc(16,ux,4,2,"div",14),t.qZA()()),2&e){const i=t.MAs(6);let a;t.Q6J("ngClass",t.VKq(15,mx,!(n.student.isNotSubmit&&n.student.mustReSubmit))),t.xp6(2),t.Q6J("linkAvatar",null!==(a=n.student.avatar)&&void 0!==a?a:"")("nameCreateAvatar",n.student.fullName)("size",40),t.xp6(3),t.s9C("matTooltip",n.student.fullName),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",n.student.fullName," "),t.xp6(3),t.Q6J("ngIf",n.student.isSubmitted),t.xp6(1),t.Q6J("ngIf",n.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",n.student.mustReSubmit),t.xp6(1),t.Q6J("ngIf",n.student.isMarked),t.xp6(1),t.Q6J("ngIf",n.student.isMarked),t.xp6(1),t.Q6J("ngIf",null!=n.student.createdAt),t.xp6(1),t.Q6J("ngIf",n.student.isMarked||n.student.isSubmitted)}},dependencies:[y.mk,y.O5,Qt.Kd,Fn.g,ix.B,Ke.Q,tt.bT],encapsulation:2}),o})();function hx(o,s){if(1&o&&(t.TgZ(0,"div",4),t.GkF(1,5),t.qZA()),2&o){t.oxw();const e=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}const gx=function(o){return[o]},fx=function(o){return{backto:o}};function xx(o,s){if(1&o&&(t.TgZ(0,"div")(1,"a",14),t.ALo(2,"mylocalize"),t._UZ(3,"testbank-homework-result-student-exam-result-box",15),t.qZA()()),2&o){const e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(5,gx,t.lcZ(2,3,"/admin/homework/switch-mark-exercise/"+e.answer.id+"/"+n.obj.hashId)))("queryParams",t.VKq(7,fx,n.backToLink)),t.xp6(2),t.Q6J("student",e)}}function vx(o,s){if(1&o&&t._UZ(0,"testbank-homework-result-student-exam-result-box",15),2&o){const e=t.oxw().$implicit;t.Q6J("student",e)}}const bx=function(o){return{"lg:col-span-3":o}};function wx(o,s){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,xx,4,9,"div",12),t.YNc(2,vx,1,1,"ng-template",null,13,t.W1O),t.qZA()),2&o){const e=s.$implicit,n=t.MAs(3),i=t.oxw(2);t.Q6J("ngClass",t.VKq(3,bx,!i.isOpenSideNav&&!i.isMobile)),t.xp6(1),t.Q6J("ngIf",e.answer)("ngIfElse",n)}}function Tx(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",6)(2,"ng-scrollbar",7)(3,"div",8)(4,"div",9),t.YNc(5,wx,4,5,"div",10),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("visibility","hover"),t.xp6(3),t.Q6J("ngForOf",e.studentLists)}}function Cx(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"p",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",18),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"a",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showCopySuccess())}),t.O4$(),t.TgZ(10,"svg",20),t._UZ(11,"circle",21)(12,"circle",22)(13,"circle",23)(14,"line",24)(15,"line",25),t.qZA(),t.kcU(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(3),t.lnq("",t.lcZ(6,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',t.lcZ(7,10,"lang_auto_copy_link_bai_tap"),'" ',t.lcZ(8,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),t.xp6(4),t.Q6J("cdkCopyToClipboard",e.copyLinkHomeWorkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(18,14,"lang_auto_copy_link_bai_tap"))}}let kx=(()=>{class o extends R.Q{copyLinkHomeWorkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}constructor(e,n){super(e),this.commonService=e,this.timeService=n,this.isOpenSideNav=!0,this.backToLink="",this.obj={},this.studentLists=[],this.isNotTestedYet=!1,this.isMobile=this.commonService.isMobileOrTable()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-student-homework-result"]],inputs:{isOpenSideNav:"isOpenSideNav",backToLink:"backToLink",obj:"obj",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet"},features:[t.qOj],decls:5,vars:2,consts:[[1,"box","mt-2","relative"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],["isNotTestedYetTmp",""],[1,"scrollable-content","flex","items-center"],[3,"ngTemplateOutlet"],[1,"azt-student-list","scrollable-content",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"mt-4","p-2"],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[4,"ngIf","ngIfElse"],["answerIdNull",""],["azt-track-service","student-homework-result-p_58RoCuYW9",3,"routerLink","queryParams"],[3,"student"],[1,"text-center","mt-5","mx-auto",2,"max-width","28rem"],[1,"text-lg"],[1,"mt-2","mx-auto"],["azt-track-service","student-homework-result-GcOiOvgvvW2",1,"mt-2","btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,hx,2,1,"div",1),t.YNc(2,Tx,6,2,"div",2),t.qZA(),t.YNc(3,Cx,19,16,"ng-template",null,3,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngIf",n.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!n.isNotTestedYet))},dependencies:[C.rH,y.mk,y.sg,y.O5,y.tP,Tn.i3,P.KC,px,tt.mp,tt.bT],encapsulation:2}),o})();function Ox(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",24),t._uU(3),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(e.homeworkResultFilterService.totalCustomFilter)}}function yx(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"span",22),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,Ox,4,1,"span",23),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_testted_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.homeworkResultFilterService.totalCustomFilter>0)}}let Ax=(()=>{class o extends R.Q{changeFilter(){this.homeworkResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.homeworkResultFilterService.filterObj)}clearFilter(){this.homeworkResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.homeworkResultFilterService=n,this.changeFilterEvent=new t.vpe}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36($o))},o.\u0275cmp=t.Xpm({type:o,selectors:[["testbank-homework-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:43,vars:24,consts:[[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-IuO864aLwuv","for","isSubmitted",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isSubmitted","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-up7nJngmzVG","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-UMBRazW55_8","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-ZcOfEctFCTF","for","mustReSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","mustReSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-QejPhqaKsKg",3,"click"],["azt-track-service","filter-menu-e-_PwZJaZjq",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,n){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,yx,4,4,"span",3),t.qZA(),t.kcU(),t.TgZ(4,"mat-menu",4,5)(6,"div",6)(7,"ul",7)(8,"li")(9,"label",8),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"div",9)(13,"input",10),t.NdJ("change",function(){return n.homeworkResultFilterService.filterObj.isSubmitted=!n.homeworkResultFilterService.filterObj.isSubmitted,n.changeFilter()}),t.qZA()()()(),t.TgZ(14,"li")(15,"label",11),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(16),t.ALo(17,"mytranslate"),t.TgZ(18,"div",9)(19,"input",12),t.NdJ("change",function(){return n.homeworkResultFilterService.filterObj.isNotSubmit=!n.homeworkResultFilterService.filterObj.isNotSubmit,n.changeFilter()}),t.qZA()()()(),t.TgZ(20,"li")(21,"label",13),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(22),t.ALo(23,"mytranslate"),t.TgZ(24,"div",9)(25,"input",14),t.NdJ("change",function(){return n.homeworkResultFilterService.filterObj.isMarked=!n.homeworkResultFilterService.filterObj.isMarked,n.changeFilter()}),t.qZA()()()(),t.TgZ(26,"li")(27,"label",15),t.NdJ("click",function(a){return a.stopPropagation()}),t._uU(28),t.ALo(29,"mytranslate"),t.TgZ(30,"div",9)(31,"input",16),t.NdJ("change",function(){return n.homeworkResultFilterService.filterObj.mustReSubmit=!n.homeworkResultFilterService.filterObj.mustReSubmit,n.changeFilter()}),t.qZA()()()(),t.TgZ(32,"li"),t._UZ(33,"hr",17),t.qZA(),t.TgZ(34,"li")(35,"div",18)(36,"button",19),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.TgZ(39,"div",20),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(40,"button",21),t.NdJ("click",function(){return n.clearFilter()}),t._uU(41),t.ALo(42,"mytranslate"),t.qZA()()()()()()()),2&e){const i=t.MAs(5);t.Q6J("matMenuTriggerFor",i),t.xp6(3),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(11,12,"lang_homework_homework_score_list_sort_student_not_marking")," "),t.xp6(3),t.Q6J("checked",n.homeworkResultFilterService.filterObj.isSubmitted),t.xp6(3),t.hij(" ",t.lcZ(17,14,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),t.xp6(3),t.Q6J("checked",n.homeworkResultFilterService.filterObj.isNotSubmit),t.xp6(3),t.hij(" ",t.lcZ(23,16,"lang_homework_homework_score_list_sort_mark")," "),t.xp6(3),t.Q6J("checked",n.homeworkResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(29,18,"lang_homework_homework_score_list_sort_student_resubmit")," "),t.xp6(3),t.Q6J("checked",n.homeworkResultFilterService.filterObj.mustReSubmit),t.xp6(6),t.Oqu(t.lcZ(38,20,"lang_buttom_close")),t.xp6(4),t.Oqu(t.lcZ(42,22,"lang_buttom_delete"))}},dependencies:[y.O5,Ft.W0,Ft.D8,tt.bT],encapsulation:2}),o})();const Sx=["drawer"];function Zx(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Ex(o,s){if(1&o&&(t.TgZ(0,"div",24)(1,"span"),t.O4$(),t.TgZ(2,"svg",25),t._UZ(3,"circle",26)(4,"line",27)(5,"line",28),t.qZA()(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(3);t.xp6(7),t.AsE("",t.lcZ(8,2,"lang_homework_homework_score_list_not_search_data"),"! ",t.lcZ(9,4,"lang_core_not_found_classroom_or_homework"==e.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function Ix(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",48),t._UZ(3,"rect",61)(4,"path",62)(5,"path",63),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function Mx(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",48),t._UZ(3,"rect",61)(4,"path",62)(5,"path",65),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function Px(o,s){1&o&&(t.TgZ(0,"div",66)(1,"div",67)(2,"p",68),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function Lx(o,s){if(1&o&&t._UZ(0,"app-student-homework-result",69),2&o){const e=t.oxw(4);t.Q6J("backToLink",e.backToLink)("studentLists",e.studentHaveSortAndSearchByNameObjs)("isNotTestedYet",0==e.rawStudentObjs.length)("isOpenSideNav",e.isOpenSideNav)("obj",e.homeworkObj)}}const jx=function(o,s){return{"w-85":o,"w-30":s}},Nx=function(o){return{"ml-5":o}},qx=function(o){return{"px-0":o}},Qx=function(o){return[o]};function Dx(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-drawer-container",29)(1,"mat-drawer",30,31),t.NdJ("closedStart",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changeStatusNav())}),t.TgZ(3,"ng-scrollbar",32),t._UZ(4,"menu-homework",33),t.qZA()(),t.TgZ(5,"mat-drawer-content")(6,"div",34)(7,"div",35),t.YNc(8,Ix,6,3,"button",36),t.YNc(9,Mx,6,3,"button",37),t.TgZ(10,"div",38)(11,"div",39)(12,"form",17)(13,"input",40),t.NdJ("keyup.enter",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.search())}),t.ALo(14,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(15,"svg",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.search())}),t._UZ(16,"circle",42)(17,"line",43),t.qZA()()(),t.kcU(),t.TgZ(18,"div",44)(19,"testbank-homework-result-filter-menu",45),t.NdJ("changeFilterEvent",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.changeFilterEvent())}),t.qZA()(),t.TgZ(20,"div",46)(21,"button",47),t.O4$(),t.TgZ(22,"svg",48),t._UZ(23,"line",49)(24,"line",50)(25,"line",51),t.qZA()()()()(),t.kcU(),t.TgZ(26,"div",52)(27,"div",53)(28,"div",54)(29,"p",55),t._uU(30),t.ALo(31,"mytranslate"),t.TgZ(32,"a",56),t.ALo(33,"mylocalize"),t._uU(34),t.ALo(35,"slice"),t.qZA()()()(),t.YNc(36,Px,5,3,"div",57),t.YNc(37,Lx,1,5,"ng-template",null,58,t.W1O),t.qZA()(),t._UZ(39,"app-excel-export",59),t.qZA()()}if(2&o){const e=t.MAs(38),n=t.oxw(3),i=t.MAs(5);t.Q6J("hasBackdrop",n.hasBackdrop),t.xp6(1),t.s9C("opened",n.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(33,jx,n.isMobile,!n.isMobile))("mode",n.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("initData",n.initDataHomework),t.xp6(2),t.Q6J("ngClass",t.VKq(36,Nx,!n.isMobile&&n.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!n.isOpenSideNav||n.isMobile),t.xp6(1),t.Q6J("ngIf",n.isOpenSideNav&&!n.isMobile),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(1),t.s9C("placeholder",t.lcZ(14,23,"lang_homework_homework_score_list_search")),t.xp6(8),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("ngClass",t.VKq(38,qx,n.isMobile||!n.isOpenSideNav)),t.xp6(4),t.hij("",t.lcZ(31,25,"lang_homework_homework_score_list_list_submit_class"),": "),t.xp6(2),t.s9C("matTooltip",n.classroomObj.name),t.Q6J("routerLink",t.VKq(40,Qx,t.lcZ(33,27,"/admin/student/class-details/"+n.classroomId))),t.xp6(2),t.AsE(" ",n.classroomObj.name&&n.classroomObj.name.length>20?t.Dn7(35,29,n.classroomObj.name,0,20)+"..":n.classroomObj.name," (",(null==n.initDataHomework.homeworkObj?null:n.initDataHomework.homeworkObj.count)+"/"+(null==n.initDataHomework.studentObjs?null:n.initDataHomework.studentObjs.length),") "),t.xp6(2),t.Q6J("ngIf",0!=n.rawStudentObjs.length&&0==n.studentHaveSortAndSearchByNameObjs.length)("ngIfElse",e),t.xp6(3),t.Q6J("studentLists",n.studentHaveSortAndSearchByNameObjs)("homeworkObj",n.homeworkObj)("tableType","homework")}}function Ux(o,s){1&o&&t._UZ(0,"div",70)}function Fx(o,s){if(1&o&&(t.TgZ(0,"div"),t._UZ(1,"azt-export-docx-loading-box",19),t.TgZ(2,"div",20),t.YNc(3,Ex,10,6,"div",21),t.YNc(4,Dx,40,42,"mat-drawer-container",22),t.qZA(),t.YNc(5,Ux,1,0,"div",23),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("msg",e.exportResultService.keyLoading)("show",e.exportResultService.isLoading)("percent",e.exportResultService.percent),t.xp6(2),t.Q6J("ngIf",""!=e.errorMessage),t.xp6(1),t.Q6J("ngIf",""==e.errorMessage),t.xp6(1),t.Q6J("ngIf",1==e.isMobile)}}function Rx(o,s){if(1&o&&t.YNc(0,Fx,6,6,"div",7),2&o){const e=t.oxw();t.Q6J("ngIf",e.homeworkObj)}}function zx(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",71),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToExcel("homework"))}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",72),t._UZ(4,"path",73)(5,"polyline",74)(6,"line",75),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_homework_homework_score_list_export_excel")),t.xp6(6),t.hij(" ",t.lcZ(8,4,"lang_homework_homework_score_list_export_excel")," "))}function Jx(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",76),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToPDF())}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",77),t._UZ(4,"path",78)(5,"polyline",79)(6,"line",80)(7,"line",81)(8,"line",82),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&o&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_homework_homework_score_list_export_pdf")),t.xp6(8),t.hij(" ",t.lcZ(10,4,"lang_homework_homework_score_list_export_pdf")," "))}let Bx=(()=>{class o extends R.Q{toggleDrawer(){var e;null===(e=this.drawer)||void 0===e||e.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav(),this.isMobile&&(document.body.style.overflow="auto")}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.isOpenSideNav)}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("homework");this.isOpenSideNav=!e||"close"!=e}else this.isOpenSideNav=!1}exportToExcel(e){setTimeout(()=>{var n;null===(n=document.getElementById("table_"+e))||void 0===n||n.click()},1e3)}exportToPDF(){this.exportResultService.processHomeworks(Number(this.homeworkId),this.homeworkHashId).then(()=>{}).catch(e=>{this.commonService.snackError("string"==typeof e?e:e.message)})}_isSortedByTimeDesc(){return!!this.browserStorageService.getSimpleStorage(this.sortByStorageKey)}_sortStudentObjs(e){var n,i=this._isSortedByTimeDesc(),a=null!==(n=this.classroomObj.sortType)&&void 0!==n?n:0;return i?this.sortService.sortTimeDESC(e):0==a?this.sortService.sortFirstNameStudents(e):this.sortService.sortArrayByMultipleObjectKeyAsc(e,"pos","id")}_searchStudentObjsByName(e,n){var i;n=this.commonService.convertVietnameseToEnglish(n);var a=[];for(let l=0;l<e.length;l++)-1!=this.commonService.convertVietnameseToEnglish(null!==(i=e[l].fullName)&&void 0!==i?i:"").toLowerCase().indexOf(n.toLowerCase())&&a.push(e[l]);return a}_getStudentObjByFilterObj(e,n){return n.isSubmitted||n.isNotSubmit||n.isMarked||n.mustReSubmit?e.filter(a=>n.isSubmitted&&1==a.isSubmitted||n.isNotSubmit&&1==a.isNotSubmit||n.isMarked&&1==a.isMarked||n.mustReSubmit&&1==a.mustReSubmit):e}_viewDataBySortSearchAndFilter(){var e,n,i=this.homeworkResultFilterService.getDefaultFilterObj(),a=this._getStudentObjByFilterObj(this.rawStudentObjs,i),r=null===(n=null===(e=this.form.controls.searchContent.value)||void 0===e?void 0:e.toString())||void 0===n?void 0:n.trim();""!=r&&(a=this._searchStudentObjsByName(a,r)),a=this._sortStudentObjs(a),this.studentHaveSortAndSearchByNameObjs=a}search(){this.homeworkResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}sortByTimeDesc(){this.form.controls.sortByTimeDesc.value?this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,"sort_by_time_desc"):this.browserStorageService.removeSimpleStorage(this.sortByStorageKey),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){var e,n;null===(n=null===(e=this.form.controls)||void 0===e?void 0:e.searchContent)||void 0===n||n.setValue(""),this._viewDataBySortSearchAndFilter()}addStatusToStudentObjs(e){for(var n,i,a=[],r=0;r<e.length;r++)a.push(Object.assign(Object.assign({},e?.[r]),{index:r})),e[r].confirmedAt&&e[r].confirmedAt&&a[r].index==r?a[r].isMarked=!0:null==e[r].answer||e[r].confirmedAt||a[r].index!=r?null==e[r].answer&&null!=e[r].answerHistory&&a[r].index==r?a[r].mustReSubmit=!0:a[r].isNotSubmit=!0:a[r].isSubmitted=!0,a[r].answerFileObjs=this.castJsonToObj(null!==(i=null===(n=e[r].answer)||void 0===n?void 0:n.files)&&void 0!==i?i:"");return a}parseHomeworkData(e){var n=this.castObj(e);return n?.files&&(n.fileObjs=this.commonService.myParseJson(n.files)),this.zipDataService.convertHomeworkObj(n??{}),n}getData(){this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerGetStudentsHomeworkGet(Number(this.homeworkId),this.homeworkHashId).subscribe(e=>{var n,i,a,r,l,c,_,d,p,h,f,w,k;if(1==e.success){this.errorMessage="",this.zipDataService.convertStudentsHomeworkObj(null===(n=e.data)||void 0===n?void 0:n.studentObjs),this.initDataHomework=null!==(i=e.data)&&void 0!==i?i:{},this.rawStudentObjs=this.addStatusToStudentObjs(null!==(r=null===(a=e.data)||void 0===a?void 0:a.studentObjs)&&void 0!==r?r:new Array),this.homeworkObj=this.parseHomeworkData(null!==(c=null===(l=e.data)||void 0===l?void 0:l.homeworkObj)&&void 0!==c?c:{}),this.classroomObj=null!==(d=null===(_=e.data)||void 0===_?void 0:_.classroomObj)&&void 0!==d?d:{},this.classroomId=null!==(p=this.classroomObj.id)&&void 0!==p?p:0,this.categoryId=null!==(f=null===(h=this.homeworkObj)||void 0===h?void 0:h.categoryId)&&void 0!==f?f:0;let S=null!==(w=this.commonService.getMyQueryParam("backto"))&&void 0!==w?w:"";this.backToLink="/admin/testbank/homework-results-list/"+this.categoryId+"/"+this.homeworkId+"/"+this.homeworkHashId,S&&S.includes("shareType")&&(this.backToLink=`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}?backto=`+encodeURIComponent(S)),this.paramBackToLink=S||`/admin/testbank/document-management/1/${this.categoryId}/1`,this.changeFilterEvent(),this.successStatusObj()}else this.errorMessage=null!==(k=e.message)&&void 0!==k?k:"",this.errorStatusObj(this.errorMessage,!0)}))}ngOnInit(){this.getStatusSideNav(),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n,i;this.form=this.fb.group({searchContent:new m.NI("",m.kI.required),sortByTimeDesc:new m.NI(this._isSortedByTimeDesc())}),this.homeworkId=null!==(e=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==e?e:"",this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"",this.categoryId=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==i?i:0,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),this.gaService.gaEvent("teacher_homework_score"),super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto",super.ngOnDestroy()}constructor(e,n,i,a,r,l,c,_,d,p,h,f){super(n),this.dialog=e,this.commonService=n,this.activeRoute=i,this.fb=a,this.answerService=r,this.zipDataService=l,this.sortService=c,this.browserStorageService=_,this.examFilterService=d,this.exportResultService=p,this.homeworkResultFilterService=h,this.gaService=f,this.form=new m.cw({}),this.backToLink="",this.paramBackToLink="",this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classroomId=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.rawStudentObjs=[],this.studentHaveSortAndSearchByNameObjs=[],this.homeworkObj={},this.classroomObj={},this.initDataHomework={},this.errorMessage="",this.sortByStorageKey="homework_list_sort_by"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(_t.v),t.Y36(C.gz),t.Y36(m.QS),t.Y36(S0.P),t.Y36(fn.D),t.Y36(kn.K),t.Y36(Le.z),t.Y36(Yi.Y),t.Y36(di.e),t.Y36($o),t.Y36(Ro.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-homework-result-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(Sx,5),2&e){let i;t.iGM(i=t.CRH())&&(n.drawer=i.first)}},features:[t.qOj],decls:24,vars:9,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","homework-result-list-mTV5aEMDlSD","for","isSortByTimeDESC",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M11 5h10"],["d","M11 9h7"],["d","M11 13h4"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],[3,"formGroup"],["id","isSortByTimeDESC","type","checkbox","formControlName","sortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-homework-result-list","container-fluid"],["class","intro-y col-span-11 alert alert-danger alert-dismissible show flex items-center mb-6",4,"ngIf"],["class","azt-drawer-container mt-5",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"intro-y","col-span-11","alert","alert-danger","alert-dismissible","show","flex","items-center","mb-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","info","data-lucide","info",1,"lucide","w-4","h-4","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],[3,"initData"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","homework-result-list-Ej_zMayVTN_","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","homework-result-list-hYOFjZmUAjh","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","homework-result-list-44epYiQtrQC","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","content-zone","pr-0",3,"ngClass"],[1,"row","mt-2","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"mb-1","h6",2,"font-weight","400","font-size","14px"],["azt-track-service","homework-result-list-Fk1Yij7NXbZ",1,"clickable","link-stu",3,"routerLink","matTooltip"],["class","box-content py-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"studentLists","homeworkObj","tableType"],["azt-track-service","homework-result-list-Ej_zMayVTN_",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","homework-result-list-hYOFjZmUAjh",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","studentLists","isNotTestedYet","isOpenSideNav","obj"],[1,"py-4"],["azt-track-service","homework-result-list-UoAbuGB6VrG",1,"dropdown-item",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","homework-result-list-PxxtOkbgmqm",1,"dropdown-item",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Zx,1,0,"azt-loading-effect",1),t.YNc(2,Rx,1,1,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"ul",6),t.YNc(8,zx,9,6,"li",7),t.YNc(9,Jx,11,6,"li",7),t.TgZ(10,"li")(11,"label",8),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(12,"span",9),t.O4$(),t.TgZ(13,"svg",10),t._UZ(14,"path",11)(15,"path",12)(16,"path",13)(17,"path",14)(18,"path",15),t.qZA(),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(21,"div",16)(22,"form",17)(23,"input",18),t.NdJ("change",function(){return n.sortByTimeDesc()}),t.qZA()()()()()()()()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.paramBackToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i),t.xp6(7),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!n.isMobileWebView),t.xp6(10),t.hij(" ",t.lcZ(20,7,"lang_testbank_testted_list_sort_time")," "),t.xp6(3),t.Q6J("formGroup",n.form)}},dependencies:[C.rH,y.mk,y.O5,Ft.W0,Ft.D8,Ne.jA,Ne.kh,Ne.LW,Qt.Kd,P.KC,m._Y,m.Fj,m.Wl,m.JJ,m.JL,m.sg,m.u,zt.Q,Jt.M,ui,Vt._,V0,nx,kx,Ax,y.OU,tt.mp,tt.bT],encapsulation:2}),o})();function Hx(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Yx(o,s){if(1&o&&(t.TgZ(0,"div",22),t._UZ(1,"print-history-box",23),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("startStudentCode",e.startStudentCode)("examPrintInfoObj",e.examPrintInfoObj)}}const Wo=function(o){return[o]};function Gx(o,s){if(1&o&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7),t.YNc(6,Yx,2,4,"div",8),t.qZA(),t.TgZ(7,"div",9)(8,"div",10)(9,"a",11),t.ALo(10,"mylocalize"),t.O4$(),t.TgZ(11,"svg",12),t._UZ(12,"path",13)(13,"polyline",14)(14,"path",15)(15,"path",16)(16,"path",17)(17,"path",18),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(20,"div",19)(21,"a",20),t.ALo(22,"mylocalize"),t.O4$(),t.TgZ(23,"svg",12),t._UZ(24,"path",21),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()()()),2&o){const e=t.oxw(2);let n,i;t.xp6(3),t.hij(" ",t.lcZ(4,6,"lang_auto_tao_file_thanh_cong")," \u{1f44f} "),t.xp6(3),t.Q6J("ngIf",e.offlineExamObj&&(null==e.offlineExamObj?null:e.offlineExamObj.hashId)),t.xp6(3),t.Q6J("routerLink",t.VKq(16,Wo,t.lcZ(10,8,"/admin/testbank/exam-results-list/"+(null!==(n=e.examObj.categoryId)&&void 0!==n?n:0)+"/"+e.examObj.id+"/0"))),t.xp6(9),t.hij(" ",t.lcZ(19,10,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(18,Wo,t.lcZ(22,12,"/admin/testbank/document-management/0/"+(e.backToLink.includes("shareType")?0:null!==(i=e.examObj.categoryId)&&void 0!==i?i:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(26,14,"lang_auto_ve_trang_quan_ly_file")," ")}}function $x(o,s){if(1&o&&t.YNc(0,Gx,27,20,"div",3),2&o){const e=t.oxw();t.Q6J("ngIf",e.examObj)}}let Kx=(()=>{class o extends R.Q{redirectToDocumentManager(){var e,n;this.myNavigation(`/admin/testbank/document-management/0/${null!==(n=null===(e=this.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==n?n:0}/1`)}redirectToTestResultList(){var e,n,i;this.myNavigation(`/admin/testbank/exam-results-list/${null!==(n=null===(e=this.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==n?n:0}/${null===(i=this.examObj)||void 0===i?void 0:i.id}/0`)}getExamInfo(e,n){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e,n).subscribe(i=>{var a,r,l;1==i.success?(!(null===(a=i.data)||void 0===a)&&a.examObj&&i.data.offlineExamObj&&(this.examObj=i.data.examObj,this.offlineExamObj=i.data.offlineExamObj,this.examPrintInfoObj=null!==(r=i.data.examPrintInfoObj)&&void 0!==r?r:{}),this.successStatusObj()):this.errorStatusObj(null!==(l=i.message)&&void 0!==l?l:"",!0)}))}ngOnInit(){var e,n,i;let a=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",r=null!==(n=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==n?n:"";this.offlineHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"offline_hash_id"))&&void 0!==i?i:"",this.getExamInfo(a,this.offlineHashId);let l=this.commonService.getMyQueryParam("backto");this.backToLink=l??`/admin/testbank/document-management/0/${r}/1`,this.commonService.translateMetaData({title:"lang_cms_download_print_data_title",description:"lang_cms_download_print_data_description",image:""}),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.documentConfigService=n,this.activeRoute=i,this.backToLink="",this.offlineHashId="",this.startStudentCode=1,this.examPrintInfoObj={}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.Cq),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-download-file-print"]],features:[t._Bn([y.uU]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","intro-y action-document mx-auto mt-8","style","max-width: 700px",4,"ngIf"],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],[1,"action-heading","mb-4"],[1,"text-lg","font-medium","mb-1"],[1,"action-offline","mt-5"],["class","box mt-3 p-5",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","download-file-print-KZ0pTIEXewD",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","download-file-print-O-UfiBIC5BM",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mt-3","p-5"],[3,"examObj","offlineExamObj","startStudentCode","examPrintInfoObj"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Hx,1,0,"azt-loading-effect",1),t.YNc(2,$x,1,1,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[C.rH,y.O5,zt.Q,Vt._,So,tt.mp,tt.bT],styles:[".app[_ngcontent-%COMP%]{margin-top:100px}.app-block[_ngcontent-%COMP%]{max-width:750px;margin:0 auto}.app-head[_ngcontent-%COMP%]{text-align:center}.app-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:0}.app-main[_ngcontent-%COMP%]{margin-top:40px}.app-copy[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;width:630px;margin:0 auto}.btn-export[_ngcontent-%COMP%]{transition:all .5s;background:#2361ae}.btn-export[_ngcontent-%COMP%]:hover:enabled{background:#122e50}.app-content[_ngcontent-%COMP%]{border:none;outline:none;background:#fff;border-radius:5px;box-shadow:#00000012 0 0 5px;height:70px;box-sizing:border-box;padding:15px 20px;font-size:18px;color:#2361ae;width:100%;display:flex;align-items:center}.app-content-icon[_ngcontent-%COMP%]{margin-right:15px}.app-main-bottom[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;max-width:630px}.btn-text[_ngcontent-%COMP%]{border:none;text-transform:uppercase;background:transparent;color:#2361ae}.app-footer[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:100px;text-align:center}.app-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#babbbc;font-size:18px}.btn-copy[_ngcontent-%COMP%]{position:absolute;display:flex;background:#2361ae;align-items:center;right:0;height:100%;width:134px;border:none;padding:22px 23px;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;transition:all .5s}.btn-copy[_ngcontent-%COMP%]:hover{background:#184479}.btn-copy[_ngcontent-%COMP%]   .text-copy[_ngcontent-%COMP%]{margin-left:15px;text-transform:initial;font-size:16px}.btn-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px}.truncate[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 768px){.app-copy[_ngcontent-%COMP%]{max-width:630px;width:auto}.btn-copy[_ngcontent-%COMP%]{right:0;width:auto}.app-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:140px}}"]}),o})();var Vo=T(25650);function Wx(o,s){if(1&o&&(t.TgZ(0,"span",18),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&o){const e=t.oxw().index,n=t.oxw();t.s9C("matTooltip",n.data.resultsArr[e].fullName),t.xp6(1),t.Oqu(n.data.resultsArr[e].fullName.length>25?t.Dn7(2,2,n.data.resultsArr[e].fullName,0,25)+"..":n.data.resultsArr[e].fullName)}}function Vx(o,s){if(1&o&&t._UZ(0,"img",19),2&o){const e=t.oxw().index,n=t.oxw();t.Q6J("nameImages",n.data.resultsArr[e].nameImages)}}function Xx(o,s){if(1&o&&(t.TgZ(0,"div",14)(1,"mat-checkbox",15),t._uU(2),t.YNc(3,Wx,3,6,"span",16),t.YNc(4,Vx,1,1,"img",17),t.qZA()()),2&o){const e=s.index,n=t.oxw();t.xp6(1),t.Q6J("checked",n.form.value.exports[e])("formControlName",e),t.xp6(1),t.hij(" ",e+1,". "),t.xp6(1),t.Q6J("ngIf",!n.data.resultsArr[e].nameImages||n.data.resultsArr[e].studentId>0),t.xp6(1),t.Q6J("ngIf",n.data.resultsArr[e].nameImages&&n.data.resultsArr[e].studentId<=0)}}const tv=function(o){return{selects:o}};function nv(o=1){return e=>e.controls.map(i=>i.value).reduce((i,a)=>a?i+a:i,0)>=o?null:{required:!0}}let iv=(()=>{class o{get exportsFormArray(){return this.form.controls.exports}get countSelected(){return this.exportsFormArray.value.filter(e=>!0===e).length}selectAll(){const e=[];this.data.resultsArr.forEach(()=>{e.push(this.isSelectAll.value)}),this.form.controls.exports.setValue(e)}ngOnInit(){this.form=this.fb.group({exports:new m.vC([],nv(1))}),this.data.resultsArr.forEach(()=>{this.exportsFormArray.push(new m.p4(!1))})}constructor(e,n,i){this.dialogRef=e,this.fb=n,this.data=i,this.form=new m.nJ({}),this.isSelectAll=new m.p4}onNoClick(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.hV),t.Y36(m.QS),t.Y36(U.eJ))},o.\u0275cmp=t.Xpm({type:o,selectors:[["what-export-dialog"]],decls:28,vars:28,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center","mb-2"],[1,"text-md","font-medium"],[1,"clickable","flex","items-center",2,"font-weight","500"],["color","primary",1,"example-margin",3,"formControl","change"],["mat-dialog-content","",1,"mt-3"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-3","pl-0","pl-0"],["class","col-span-12 md:col-span-3","formArrayName","exports",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","what-to-export-hneobpWVcC",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","what-to-export-JQOcdFIH68",1,"btn","w-24","btn-danger",3,"disabled","mat-dialog-close"],["formArrayName","exports",1,"col-span-12","md:col-span-3"],["color","primary",1,"mr-2","mb-2",3,"checked","formControlName"],[3,"matTooltip",4,"ngIf"],["appDrawNameImage","","loading","lazy","class","img-name-fluid",3,"nameImages",4,"ngIf"],[3,"matTooltip"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"p")(8,"i"),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"span",5)(13,"mat-checkbox",6),t.NdJ("change",function(){return n.selectAll()}),t._uU(14),t.ALo(15,"mytranslate"),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"div",7)(18,"form",8)(19,"div",9),t.YNc(20,Xx,5,5,"div",10),t.qZA()()(),t.TgZ(21,"div",11)(22,"button",12),t.NdJ("click",function(){return n.onNoClick()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"button",13),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_testbank_what_to_export_select_students_export"),"! "),t.xp6(4),t.lnq("*** ",t.lcZ(10,14,"lang_testbank_what_to_export_note_tutorial")," (",t.lcZ(11,16,"lang_choose"),": ",n.countSelected,")"),t.xp6(4),t.Q6J("formControl",n.isSelectAll),t.xp6(1),t.Oqu(n.isSelectAll.value?t.lcZ(15,18,"lang_remove_all"):t.lcZ(16,20,"lang_select_all")),t.xp6(4),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("ngForOf",n.exportsFormArray.controls),t.xp6(3),t.hij(" ",t.lcZ(24,22,"lang_buttom_cancel_clear")," "),t.xp6(2),t.Q6J("disabled",!n.form.valid)("mat-dialog-close",t.VKq(26,tv,n.exportsFormArray.value)),t.xp6(1),t.hij(" ",t.lcZ(27,24,"lang_buttom_agree")," "))},dependencies:[y.sg,y.O5,To.FC,U.aO,U.Rb,Qt.Kd,m._Y,m.JJ,m.JL,m.oH,m.sg,m.u,m.CE,Jt.M,Sn.L,y.OU,tt.bT],encapsulation:2}),o})();var Xo=T(296),ta=T(16031),Wi=T(20814),ea=T(42193),na=T(32502),ia=T(44454),Rn=T(99568),Vi=T(62e3),ov=T(1643),Zn=T(48229),av=T(69359);function sv(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(null==e.studentObj?null:e.studentObj.fullName)}}function rv(o,s){if(1&o&&(t.TgZ(0,"span"),t._UZ(1,"img",15),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("nameImages",e.studentObj.nameImages)}}function lv(o,s){if(1&o&&(t.TgZ(0,"h3",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();let n;t.xp6(1),t.HOy("",t.lcZ(2,4,"lang_auto_trac_nghiem"),": ",null==e.examResultObj?null:e.examResultObj.trueFalseMark," (",null==e.examResultObj?null:e.examResultObj.rightAnswer,"/",(null!==(n=null==e.examResultObj?null:e.examResultObj.totalQuestion)&&void 0!==n?n:0)-e.countEssayQuestion,")")}}function cv(o,s){if(1&o&&(t.TgZ(0,"h3",11),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tu_luan"),": ",(null==e.examResultObj?null:e.examResultObj.essayMark)+" ("+e.countEssayQuestion+" "+t.lcZ(3,4,"lang_auto_cau_brackets"),"")}}function _v(o,s){if(1&o&&(t.TgZ(0,"h3",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",null==e.iframeEssayResultObj.pages?null:e.iframeEssayResultObj.pages.length,"")}}function dv(o,s){if(1&o&&(t.TgZ(0,"h3",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",e.examTracks.exitFullScreen,"")}}function uv(o,s){if(1&o&&t._UZ(0,"azt-loaded-img",16),2&o){const e=t.oxw();t.Tol("mb-1 "+e.blockItemCropClass),t.Q6J("isRetry",!1)("imgSrc",e.examObj.examHeader)}}function mv(o,s){if(1&o&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2).$implicit;let n;t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_da_cham"),": ",null!==(n=e.essayMarkParsed)&&void 0!==n?n:0," ",t.lcZ(3,6,"lang_auto_diem_toi_da"),": ",null!==(n=e.scorePerQuestion)&&void 0!==n?n:0,") ")}}function pv(o,s){if(1&o&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2).$implicit;let n;t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_diem_toi_da"),": ",null!==(n=e.scorePerQuestion)&&void 0!==n?n:0," ",t.lcZ(3,5,"lang_auto_chua_cham_brackets")," ")}}function hv(o,s){if(1&o&&(t.TgZ(0,"div",19),t.YNc(1,mv,4,8,"div",20),t.YNc(2,pv,4,7,"div",20),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.examResultObj?null:e.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",!(null!=e.examResultObj&&e.examResultObj.confirmedAt))}}const gv=function(o){return{__CANVAS_CROP_ITEM:o}};function fv(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-standalone-question",17),t.NdJ("doneRender",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.doneRender())}),t.ALo(1,"isOneChoiceAnswer"),t.ALo(2,"isFillAnswer"),t.YNc(3,hv,3,2,"div",18),t.ALo(4,"isEssayAnswer"),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.Q6J("answerSizeManager",i.answerSizeManager)("startQuestionIndex",i.examObj.startQuestionIndex)("isDisplayInExportMode",!0)("mathJaxImage",!0)("follower",i.followerRenderQuest)("userAnswersObj",i.userAnswersObj)("question",e)("index",n)("configExam",i.examObj)("expandInfo",i.examObj.expandInfo)("index",n)("displayScreen",4)("disableLazy",!0)("ngClass",t.VKq(21,gv,t.lcZ(1,15,e.answerType)||t.lcZ(2,17,e.answerType))),t.xp6(3),t.Q6J("ngIf",t.lcZ(4,19,e.answerType))}}function xv(o,s){if(1&o&&(t.ynx(0,24),t._UZ(1,"azt-export-essay-template",25),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("blockItemCropClass",e.blockItemCropClass)("blockItemEssayCropClass",e.blockItemEssayCropClass)("result",e.iframeEssayResultObj)}}function vv(o,s){if(1&o&&(t.TgZ(0,"h2"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.Tol("text-center mt-2 "+e.blockItemCropClass),t.xp6(1),t.Oqu(t.lcZ(2,4,"lang_auto_khong_co_anh_bai_lam_tu_luan"))}}function bv(o,s){if(1&o&&(t.YNc(0,xv,2,3,"ng-container",22),t.YNc(1,vv,3,6,"ng-template",null,23,t.W1O)),2&o){const e=t.MAs(2),n=t.oxw();t.Q6J("ngIf",n.iframeEssayResultObj&&n.iframeEssayResultObj.pages&&n.iframeEssayResultObj.pages.length>0)("ngIfElse",e)}}let oa=(()=>{class o extends R.Q{doneRender(){this.countRenderQuestion++,this.countRenderQuestion===this.questionList.length&&(this.answerSizeManager=0,this.commonService.pushSvgOutputMathJax().then(()=>{this.commonService.convertMathJaxContentSVG().then(()=>{this.answerSizeManager=1,this.countRenderQuestion=0})}))}ngOnInit(){this.blockItemCropClass=this.exportPdfUtilsService.blockCropItemClass,this.blockItemEssayCropClass=this.exportPdfUtilsService.blockEssayCropItemClass,this.followerRenderQuest.setNumQuest(this.questionList.length||0),this.countEssayQuestion=this.questionList.filter(e=>this.answerTypeService.isEssayAnswer(e.answerType)).length,super.ngOnInit()}ngOnDestroy(){this.commonService.pushHtmlOutputMathJax().then(()=>{}),super.ngOnDestroy()}constructor(e,n,i){super(n),this.exportPdfUtilsService=e,this.commonService=n,this.answerTypeService=i,this.examResultId=0,this.classroomName="",this.examQuestionObjs=[],this.examObj={},this.studentObj=void 0,this.examResultObj=void 0,this.userAnswersObj={},this.hasEssay=!1,this.hasMultiple=!1,this.isProcessingPdf=!1,this.isProcessingSinglePdf=!1,this.answerSizeManager=0,this.followerRenderQuest=new Rn.G,this.countEssayQuestion=0,this.countRenderQuestion=0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Wi.V),t.Y36(_t.v),t.Y36(Je.T))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-export-template"]],inputs:{examResultId:"examResultId",classroomName:"classroomName",questionList:"questionList",examQuestionObjs:"examQuestionObjs",examObj:"examObj",examTracks:"examTracks",studentObj:"studentObj",examResultObj:"examResultObj",userAnswersObj:"userAnswersObj",iframeEssayResultObj:"iframeEssayResultObj",hasEssay:"hasEssay",hasMultiple:"hasMultiple",isProcessingPdf:"isProcessingPdf",isProcessingSinglePdf:"isProcessingSinglePdf",newFirstInGroupIndexes:"newFirstInGroupIndexes"},features:[t.qOj],decls:29,vars:30,consts:[["id","multipleChoiceWrap",1,"exportPdfMode","exportPdfModeIndex"],["id","multipleChoiceWrapHeader"],["id","mainTitle",1,"text-center","text-xl","font-medium"],[4,"ngIf"],["id","examName",1,"mb-1","text-sm","font-medium"],["id","className",1,"mb-2","text-sm","font-medium"],["id","detailInfo",1,"flex","justify-between"],["id","colLeftInfo"],["class","mb-0 text-sm font-medium",4,"ngIf"],[3,"ngIf"],["id","colRightInfo"],[1,"mb-0","text-sm","font-medium"],["id","copyRight"],["style","display: block;","id","examHeader",3,"isRetry","class","imgSrc",4,"ngIf"],["ngFor","",3,"ngForOf"],["id","nameDrawImage","appDrawNameImage","","loading","lazy","alt","",1,"img-name-fluid",3,"nameImages"],["id","examHeader",2,"display","block",3,"isRetry","imgSrc"],[3,"answerSizeManager","startQuestionIndex","isDisplayInExportMode","mathJaxImage","follower","userAnswersObj","question","index","configExam","expandInfo","displayScreen","disableLazy","ngClass","doneRender"],["questionEssayInfo","","class","py-3 m-1","style","font-weight: 500;",4,"ngIf"],["questionEssayInfo","",1,"py-3","m-1",2,"font-weight","500"],["class","_essayMarkInfo",4,"ngIf"],[1,"_essayMarkInfo"],["style","text-align: center;",4,"ngIf","ngIfElse"],["noSubmit",""],[2,"text-align","center"],[3,"blockItemCropClass","blockItemEssayCropClass","result"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.YNc(6,sv,2,1,"span",3),t.YNc(7,rv,2,1,"span",3),t.qZA()(),t.TgZ(8,"h3",4),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"h3",5),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",6)(15,"div",7),t.YNc(16,lv,3,6,"h3",8),t.YNc(17,cv,4,6,"h3",8),t.YNc(18,_v,3,4,"h3",8),t.YNc(19,dv,3,4,"ng-template",9),t.qZA(),t.TgZ(20,"div",10)(21,"h3",11),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()(),t.TgZ(24,"div",12),t._uU(25,"* * * * *"),t.qZA(),t.YNc(26,uv,1,5,"azt-loaded-img",13),t.YNc(27,fv,5,23,"ng-template",14),t.YNc(28,bv,3,2,"ng-template",9),t.qZA()),2&e){let i,a;t.xp6(1),t.Tol("mb-5 "+n.blockItemCropClass),t.xp6(3),t.hij(" ",t.lcZ(5,22,"lang_auto_thi_sinh"),": "),t.xp6(2),t.Q6J("ngIf",!(null!=n.studentObj&&n.studentObj.nameImages)||(null!==(i=null==n.studentObj?null:n.studentObj.id)&&void 0!==i?i:0)>0),t.xp6(1),t.Q6J("ngIf",n.studentObj&&n.studentObj.nameImages&&(null!==(a=null==n.studentObj?null:n.studentObj.id)&&void 0!==a?a:0)<=0),t.xp6(2),t.AsE("",t.lcZ(10,24,"lang_auto_de_thi"),": ",n.examObj.name,""),t.xp6(3),t.AsE("",t.lcZ(13,26,"lang_auto_lop"),": ",n.classroomName,""),t.xp6(4),t.Q6J("ngIf",n.hasMultiple),t.xp6(1),t.Q6J("ngIf",n.hasEssay),t.xp6(1),t.Q6J("ngIf",n.hasEssay&&n.iframeEssayResultObj),t.xp6(1),t.Q6J("ngIf",n.examTracks&&0!=n.examObj.autoMonitor),t.xp6(3),t.AsE("",t.lcZ(23,28,"lang_auto_ma_bai_lam"),": ",n.examResultId,""),t.xp6(2),t.Tol("mb-3 "+n.blockItemCropClass),t.xp6(2),t.Q6J("ngIf",n.examObj.examHeader),t.xp6(1),t.Q6J("ngForOf",n.questionList),t.xp6(1),t.Q6J("ngIf",n.hasEssay)}},dependencies:[y.mk,y.sg,y.O5,Vi.l,ov.p,Sn.L,Zn.$,av.s,tt.bT,tt.DC,tt.Tf,tt.UG],styles:["#multipleChoiceWrap[_ngcontent-%COMP%]{padding:30px;position:relative;background-color:#fff}#copyRight[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#bebebe}#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px;margin:0 auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:#c9c9c97a;border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}  mjx-container[jax=SVG][display=true]{display:inline-block!important}",".exportPdfMode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\n    max-width: 100%!important;\n  }"]}),o})();function wv(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Tv(o,s){if(1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"h1",7),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",8),t.Hsn(9),t.qZA(),t.Hsn(10,1),t.Hsn(11,2),t.Hsn(12,3),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(6),t.AsE("",t.lcZ(7,2,"lang_testbank_export_tpl_wrap_export")," ",e.exportType,"")}}const Cv=[[["","actionButton",""]],[["","actionButton",""]],[["","statusInfo",""]],[["","templateExport",""]]],kv=["[actionButton]","[actionButton]","[statusInfo]","[templateExport]"];let aa=(()=>{class o{constructor(){this.exportType=""}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["export-tpl-wrap"]],inputs:{isLoading:"isLoading",exportType:"exportType"},ngContentSelectors:kv,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["id","test_review_container",1,"container-fluid","mt-2","pt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px","margin","auto"],["id","mbTestContent"],[1,"text-center","text-lg","font-medium"],[1,"buttons-area","mb-3","text-center"]],template:function(e,n){if(1&e&&(t.F$t(Cv),t.YNc(0,wv,1,0,"azt-loading-effect",0),t.YNc(1,Tv,13,4,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.isLoading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q,tt.bT],encapsulation:2}),o})();function Ov(o,s){if(1&o&&(t.TgZ(0,"mat-radio-button",14),t._uU(1),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("matTooltip",(null==e.classObj?null:e.classObj.name)||"")("checked",(null==e.classObj?null:e.classObj.id)==n.selectedClassroomCtl.value)("value",null==e.classObj?null:e.classObj.id)("color","primary"),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function yv(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ov,2,5,"mat-radio-button",13),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.studentsInClassResults)}}function Av(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-radio-button",15),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("matTooltip",t.lcZ(2,5,"lang_testbank_export_pdf_free"))("color","primary")("value",0)("checked",0==e.selectedClassroomCtl.value),t.xp6(2),t.hij(" ",t.lcZ(4,7,"lang_testbank_export_pdf_free")," ")}}function Sv(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDialog(i.examResultObjs,i.hasEssay))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_buttom_continue")," "))}function Zv(o,s){if(1&o&&(t.TgZ(0,"div",17),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.errorNoResult)}}function Ev(o,s){1&o&&(t.TgZ(0,"mat-icon",20),t._uU(1,"check_circle"),t.qZA())}function Iv(o,s){if(1&o&&(t.TgZ(0,"div",18),t.YNc(1,Ev,2,0,"mat-icon",19),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.countDonePdf==e.curExportArrs.length),t.xp6(1),t.lnq("\xa0 ",e.countDonePdf<e.curExportArrs.length?t.lcZ(3,4,"lang_testbank_export_pdf_repuest"):t.lcZ(4,6,"lang_testbank_export_pdf_complete")," : ",e.countDonePdf," / ",e.curExportArrs.length," ")}}function Mv(o,s){if(1&o&&t._UZ(0,"azt-export-template",21),2&o){const e=t.oxw(2);t.Q6J("examQuestionObjs",e.examQuestionObjs)("examResultId",e.curExamResultId)("questionList",e.questionList)("examObj",e.examObj)("examTracks",e.examTracks)("studentObj",e.studentObj)("classroomName",e.curClassroomName)("examResultObj",e.examResultObj)("userAnswersObj",e.userAnswersObj)("iframeEssayResultObj",e.iframeEssayResultObj)("hasMultiple",e.hasMultiple)("hasEssay",e.hasEssay)("isProcessingPdf",e.isProcessingPdf)("isProcessingSinglePdf",e.isProcessingSinglePdf)}}function Pv(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"export-tpl-wrap",3),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.TgZ(4,"div",4)(5,"div",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-radio-group",6),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleChangeClassExport(i.selectedClassroomCtl.value))}),t.ALo(9,"mytranslate"),t.YNc(10,yv,2,1,"ng-container",7),t.YNc(11,Av,5,9,"ng-container",7),t.qZA(),t._UZ(12,"div",8),t.YNc(13,Sv,3,3,"button",9),t.YNc(14,Zv,2,1,"div",10),t.qZA(),t.YNc(15,Iv,5,8,"div",11),t.YNc(16,Mv,1,14,"azt-export-template",12),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("isLoading",e.isLoading)("exportType","highest"==e.exportType?t.lcZ(1,12,"lang_testbank_export_pdf_follow_max_point"):"first"==e.exportType?t.lcZ(2,14,"lang_testbank_export_pdf_follow_exam_times_fisrt"):t.lcZ(3,16,"lang_testbank_export_pdf_follow_exam_times_last")),t.xp6(6),t.AsE("",t.lcZ(7,18,"lang_testbank_export_pdf_total_student_marking"),": ",e.examResultObjs.length,""),t.xp6(2),t.Q6J("formControl",e.selectedClassroomCtl),t.uIk("aria-label",t.lcZ(9,20,"lang_auto_vui_long_chon_lop")),t.xp6(2),t.Q6J("ngIf",e.studentsInClassResults.length>0),t.xp6(1),t.Q6J("ngIf",e.studentsNotInClassResults.length>0),t.xp6(2),t.Q6J("ngIf",""==e.errorNoResult),t.xp6(1),t.Q6J("ngIf",""!=e.errorNoResult),t.xp6(1),t.Q6J("ngIf",e.isProcessingPdf),t.xp6(1),t.Q6J("ngIf",e.questionList.length>0)}}function Lv(o,s){1&o&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_export_pdf_tutorial")))}function jv(o,s){1&o&&t._UZ(0,"span",26)}function Nv(o,s){if(1&o&&(t.TgZ(0,"div",23),t.YNc(1,jv,1,0,"span",24),t.TgZ(2,"span",25),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.countDonePdf<e.curExportArrs.length),t.xp6(2),t.hij(" ",t.lcZ(4,2,"lang_testbank_export_pdf_by_user_wait_loading")," ")}}let qv=(()=>{class o extends R.Q{get hasEssay(){let e=!1;for(let n=0;n<this.questionList.length;n++)if(this.answerTypeService.isEssayAnswer(this.questionList[n].answerType)){e=!0;break}return e}get hasMultiple(){let e=!1;for(let n=0;n<this.questionList.length;n++)if(this.answerTypeService.isOneChoiceAnswer(this.questionList[n].answerType)){e=!0;break}return e}askBeforeCloseWindow(e){return!this.isProcessingPdf||(e.returnValue=!1)}openDialog(e,n){this.dialog.open(iv,{width:"1100px",data:{resultsArr:e,haveEssay:n},restoreFocus:!1}).afterClosed().subscribe(a=>{if(a){const r=[];for(let l=0;l<a.selects.length;l++)a.selects[l]&&r.push(e[l]);this.zipAll(r)}})}processConvertData(e){var n,i,a,r,l,c,_,d,p,h,f;return(0,ke.mG)(this,void 0,void 0,function*(){this.examResultObj=null===(n=e.data)||void 0===n?void 0:n.examResultObj,this.questionList=null!==(a=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null===(i=e.data)||void 0===i?void 0:i.questionObjs)))&&void 0!==a?a:[],this.questionList.forEach(k=>{k.isRoleTeacher=!0});for(let k=0;k<this.questionList.length;k++)this.questionList[k].indexLabel=k,this.questionList[k].correctAnswer=this.commonService.filterArray(null===(r=e.data)||void 0===r?void 0:r.correctQuestionIds,this.questionList[k].id);this.studentObj&&(this.studentObj=yield this.loadNameImage(this.studentObj)),this.examObj.examHeader&&(this.examObj.examHeader=yield this.exportPdfUtilsService.convertAndRetryToBase64(this.examObj.examHeader)),this.userAnswersObj={};let w=this.castJsonToObj(null!==(_=null===(c=null===(l=e.data)||void 0===l?void 0:l.examResultObj)||void 0===c?void 0:c.answers)&&void 0!==_?_:"");this.exportPdfConvertDataService.convertAnswersArr(w??[],this.userAnswersObj),this.iframeEssayResultObj=null!==(f=this.commonService.castJsonToObj(null!==(h=null===(p=null===(d=e.data)||void 0===d?void 0:d.examResultObj)||void 0===p?void 0:p.result)&&void 0!==h?h:""))&&void 0!==f?f:void 0,this.exportPdfUtilsService.parseEssayMarkResult(this.questionList,this.examResultObj,this.examQuestionObjs)})}loadNameImage(e){var n;return(0,ke.mG)(this,void 0,void 0,function*(){if(e&&e.nameImages&&(null!==(n=e?.id)&&void 0!==n?n:0)<=0){var i=yield this.checkDrawImgNameService.getBase64Url(e.nameImages);return i&&(e.nameImages.url=i),e}return e})}zipAll(e){var n,i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X;return(0,ke.mG)(this,void 0,void 0,function*(){let E=!0;this.isProcessingPdf=!0,document.body.style.overflow="hidden",this.countDonePdf=0,this.curExportArrs=e,this.myZip=new Vo;for(const z of e){this.curExamResultId=z.id,z.fullName&&(this.studentObj={id:z.studentId?z.studentId.toString():"0",parentId:null===(n=z.userId)||void 0===n?void 0:n.toString(),fullName:z.fullName}),z.nameImages&&(this.studentObj={id:z.studentId?z.studentId.toString():"0",parentId:null===(i=z.userId)||void 0===i?void 0:i.toString(),fullName:null!==(a=z.fullName)&&void 0!==a?a:"",nameImages:z.nameImages});const K=yield this.examResultService.apiExamResultGetLastResultGet(this.examObj.id,null===(r=z.userId)||void 0===r?void 0:r.toString(),null===(l=z.studentId)||void 0===l?void 0:l.toString(),z.id).toPromise();this.questionList=null!==(_=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null===(c=K?.data)||void 0===c?void 0:c.questionObjs)))&&void 0!==_?_:[],this.questionList.forEach(et=>{et.isRoleTeacher=!0}),yield this.questionRenderService.parseRenderQuestions(this.questionList),this.iframeEssayResultObj=null!==(f=this.commonService.castJsonToObj(null!==(h=null===(p=null===(d=K?.data)||void 0===d?void 0:d.examResultObj)||void 0===p?void 0:p.result)&&void 0!==h?h:""))&&void 0!==f?f:void 0,this.iframeEssayResultObj&&(this.iframeEssayResultObj.staticTextConfigParse=this.commonService.castJsonToObj(null!==(w=this.iframeEssayResultObj.staticTextConfig)&&void 0!==w?w:""),this.iframeEssayResultObj=yield this.exportPdfConvertDataService.processEssayResultToBase64(this.iframeEssayResultObj)),this.doneConvertUserResults=!0,this.examQuestionObjs=(null===(k=K?.data)||void 0===k?void 0:k.examQuestionObjs)||[],this.examResultObj=null===(S=K?.data)||void 0===S?void 0:S.examResultObj,this.examTracks=null===(D=K?.data)||void 0===D?void 0:D.examTracks,this.userAnswersObj={};let B=this.castJsonToObj(null!==(q=null===(N=null===(Q=K?.data)||void 0===Q?void 0:Q.examResultObj)||void 0===N?void 0:N.answers)&&void 0!==q?q:"");this.exportPdfConvertDataService.convertAnswersArr(B??[],this.userAnswersObj),this.exportPdfUtilsService.parseEssayMarkResult(this.questionList,this.examResultObj,this.examQuestionObjs);try{if(yield this.exportPdfUtilsService.asyncTimeout(5e3),1===e.length)yield this.newPdfExportService.examToPdf("user"),this.isProcessingPdf=!1,document.body.style.overflow="auto",E=!1;else{const et=yield this.newPdfExportService.examToPdf("class");var J=`${this.folderName}/${this.commonService.convertVietnameseToEnglish(z.fullName?z.fullName:null!==(X=null===(W=this.studentObj)||void 0===W?void 0:W.fullName)&&void 0!==X?X:"")}_${z.id}.pdf`;this.myZip.file(J,et)}}catch(et){this.showErrorSnack("lang_auto_co_loi_xay_ra_trong_qua_trinh_tao_file_pdf"),console.log(et)}this.countDonePdf<e.length-1&&this.countDonePdf++}E&&this.finalSaveAll()})}finalSaveAll(){this.myZip.generateAsync({type:"blob"}).then(e=>{var n,i;this.countDonePdf++;let a=this.commonService.createFileNameExportFile([this.curClassroomName,null!==(i=null===(n=this.examObj)||void 0===n?void 0:n.name)&&void 0!==i?i:""])+"_exam_result.zip";(0,Dn.saveAs)(e,a),this.isProcessingPdf=!1,document.body.style.overflow="auto"},e=>{console.log(e)})}handleChangeClassExport(e){var n,i,a,r;if(this.isProcessingPdf=!1,this.errorNoResult="",0==e)this.commonService.getTranslate("lang_auto_tu_do").subscribe(l=>{this.curClassroomName=l}),this.filterTestedAndSelectFirst(this.studentsNotInClassResults);else for(let l=0;l<this.studentsInClassResults.length;l++)if((null===(n=this.studentsInClassResults[l].classObj)||void 0===n?void 0:n.id)==e){this.curClassroomName=null!==(a=null===(i=this.studentsInClassResults[l].classObj)||void 0===i?void 0:i.name)&&void 0!==a?a:"",this.filterTestedAndSelectFirst(null!==(r=this.studentsInClassResults[l].results)&&void 0!==r?r:[]);break}}getTestedUserByClass(){let e;switch(this.exportType){case"highest":e=this.testedListApiService.getTestedHighestMark("export_tool",this.curExamId);break;case"first":e=this.testedListApiService.getTestedFirstMark("export_tool",this.curExamId);break;default:e=this.testedListApiService.getTestedLastMark("export_tool",this.curExamId)}e.subscribe(n=>{var i,a,r,l,c,_,d,p,h,f,w,k,S;1==n.success?(this.studentsInClassResults=null!==(a=null===(i=n.data)||void 0===i?void 0:i.studentsInClassResults)&&void 0!==a?a:[],this.studentsNotInClassResults=null!==(l=null===(r=n.data)||void 0===r?void 0:r.studentsNotInClassResults)&&void 0!==l?l:[],this.examType=null===(_=null===(c=n.data)||void 0===c?void 0:c.examObj)||void 0===_?void 0:_.examType,this.examObj=null!==(p=null===(d=n.data)||void 0===d?void 0:d.examObj)&&void 0!==p?p:this.examObj,this.studentsInClassResults.length>0?(this.selectedClassroomCtl.setValue(null===(h=this.studentsInClassResults[0].classObj)||void 0===h?void 0:h.id),this.curClassroomName=null!==(w=null===(f=this.studentsInClassResults[0].classObj)||void 0===f?void 0:f.name)&&void 0!==w?w:"",this.filterTestedAndSelectFirst(null!==(k=this.studentsInClassResults[0].results)&&void 0!==k?k:[])):(this.selectedClassroomCtl.setValue(0),this.commonService.getTranslate("lang_auto_tu_do").subscribe(D=>{this.curClassroomName=D}),this.filterTestedAndSelectFirst(this.studentsNotInClassResults))):this.showErrorSnack(null!==(S=n.message)&&void 0!==S?S:"")})}filterTestedAndSelectFirst(e){var n,i,a,r,l,c,_;if(e&&0!=e.length){let d;d=this.homeworkExamService.hasEssayInExam(null!==(n=this.examType)&&void 0!==n?n:0)?e.filter(h=>{var f;return h.allResultObjs&&(null===(f=h.allResultObjs)||void 0===f?void 0:f.length)>0&&h.confirmedAt}):e.filter(h=>{var f;return h.allResultObjs&&(null===(f=h.allResultObjs)||void 0===f?void 0:f.length)>0}),this.examResultObjs=[];for(let h=0;h<d.length;h++)this.examResultObjs.push({id:null!==(i=d[h].resultId)&&void 0!==i?i:0,fullName:null!==(a=d[h].fullName)&&void 0!==a?a:"",userId:d[h].userId,studentId:d[h].studentId,nameImage:null!==(r=d[h].nameImage)&&void 0!==r?r:"",nameImages:d[h].nameImages});let p=0;this.studentObj=void 0,this.examResultObjs&&this.examResultObjs.length>0&&(p=this.examResultObjs[0].id,this.studentObj={id:this.examResultObjs[0].studentId?this.examResultObjs[0].studentId.toString():"0",parentId:null===(l=this.examResultObjs[0].userId)||void 0===l?void 0:l.toString(),fullName:this.examResultObjs[0].fullName,nameImages:this.examResultObjs[0].nameImages}),this.curExamResultId=p,0==p?(this.isLoading=!1,this.commonService.getTranslate("lang_auto_chua_co_thi_sinh_du_thi_hoac_chua_co_bai_thi_nao_duoc_cham_diem_vui_long_kiem_tra_lai").subscribe(h=>{this.errorNoResult=h})):this.examResultService.apiExamResultGetLastResultGet(this.examObj.id,null===(c=this.examResultObjs[0].userId)||void 0===c?void 0:c.toString(),null===(_=this.examResultObjs[0].studentId)||void 0===_?void 0:_.toString(),p).subscribe(h=>{var f,w,k,S;1==h.success?(this.examTracks=null===(f=h.data)||void 0===f?void 0:f.examTracks,this.examQuestionObjs=null!==(k=null===(w=h.data)||void 0===w?void 0:w.examQuestionObjs)&&void 0!==k?k:[],this.processConvertData(h),this.exportPdfUtilsService.translateMetaTitle(h),this.errorNoResult="",this.isLoading=!1):(this.isLoading=!1,this.commonService.getTranslate("lang_auto_khong_tim_thay_du_lieu_thi_vui_long_tai_lai_trang").subscribe(D=>{this.errorNoResult=D}),this.showErrorSnack(null!==(S=h.message)&&void 0!==S?S:""))})}else this.curExamResultId=0,this.commonService.getTranslate("lang_auto_chua_co_thi_sinh_du_thi_hoac_chua_co_bai_thi_nao_duoc_cham_diem_vui_long_kiem_tra_lai").subscribe(d=>{this.errorNoResult=d})}ngOnInit(){if(this.isSupportedBrowser=this.exportPdfUtilsService.isSupportedBrowser(),this.isSupportedBrowser){this.isLoading=!0;var e=[{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/html2pdf.bundle.js?v=28092021"),name:"html2pdf.bundle.js"}];this.commonService.loadScriptPromises(e).then(()=>{var n;this.isLoading=!1,this.exportType=null!==(n=this.commonService.getMyQueryParam("export_type"))&&void 0!==n?n:"",this.curExamId=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),this.curUserId=Number(this.activeRoute.snapshot.paramMap.get("user_id")),this.curStudentId=Number(this.activeRoute.snapshot.paramMap.get("student_id")),this.curExamResultId=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.getTestedUserByClass()})}super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p,h,f,w,k){super(n),this.dialog=e,this.commonService=n,this.examResultService=i,this.testedListApiService=a,this.activeRoute=r,this.exportPdfConvertDataService=l,this.newPdfExportService=c,this.cdnService=_,this.exportPdfUtilsService=d,this.checkDrawImgNameService=p,this.answerTypeService=h,this.homeworkExamService=f,this.timeService=w,this.questionRenderService=k,this.folderName="results",this.selectedClassroomCtl=new m.p4(-1),this.curExamResultId=0,this.curExamId=0,this.curUserId=0,this.curStudentId=0,this.curClassroomName="",this.isLoading=!1,this.isProcessingPdf=!1,this.isProcessingSinglePdf=!1,this.countDonePdf=0,this.doneConvertUserResults=!1,this.errorNoResult="",this.curExportArrs=[],this.studentObj=void 0,this.examResultObjs=[],this.examResultObj=void 0,this.questionList=[],this.examQuestionObjs=[],this.userAnswersObj={},this.examTracks=void 0,this.examObj={name:""},this.studentsInClassResults=[],this.studentsNotInClassResults=[],this.myZip=new Vo}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(_t.v),t.Y36(xt.kS),t.Y36(xn.x),t.Y36(C.gz),t.Y36(Xo.S),t.Y36(ta.I),t.Y36(Dt.U),t.Y36(Wi.V),t.Y36(ea.k),t.Y36(Je.T),t.Y36(Ve.j),t.Y36(Ae.O),t.Y36(na.L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["export-pdf-by-class"]],hostBindings:function(e,n){1&e&&t.NdJ("beforeunload",function(a){return n.askBeforeCloseWindow(a)},!1,t.Jf7)},features:[t.qOj],decls:4,vars:3,consts:[[3,"isLoading","exportType",4,"ngIf","ngIfElse"],["notBrowserSupport",""],["class","text-center","style","padding-top: 215px; font-size: 20px; background-color: rgba(0, 0, 0, 0.575); color: #fff; position: fixed; top: 0; right: 0; left: 0; bottom: 0; z-index: 9999999999;",4,"ngIf"],[3,"isLoading","exportType"],["actionButton","",1,"buttons-area","mb-3","text-center"],[1,"mb-2","mt-2","text-md","text-medium"],[1,"grid","grid-cols-12","gap-4",3,"formControl","change"],[4,"ngIf"],[1,"mb-1"],["azt-track-service","export-pdf-by-class-wXv_-emZq","class","btn btn-primary mt-2",3,"click",4,"ngIf"],["class","p-3 my-3 text-danger font-medium",4,"ngIf"],["statusInfo","","class","buttons-area mb-3 text-center",4,"ngIf"],["templateExport","",3,"examQuestionObjs","examResultId","questionList","examObj","examTracks","studentObj","classroomName","examResultObj","userAnswersObj","iframeEssayResultObj","hasMultiple","hasEssay","isProcessingPdf","isProcessingSinglePdf",4,"ngIf"],["class","col-span-3",3,"matTooltip","checked","value","color",4,"ngFor","ngForOf"],[1,"col-span-3",3,"matTooltip","checked","value","color"],[1,"col-span-3",3,"matTooltip","color","value","checked"],["azt-track-service","export-pdf-by-class-wXv_-emZq",1,"btn","btn-primary","mt-2",3,"click"],[1,"p-3","my-3","text-danger","font-medium"],["statusInfo","",1,"buttons-area","mb-3","text-center"],["style","color: green; vertical-align: bottom;",4,"ngIf"],[2,"color","green","vertical-align","bottom"],["templateExport","",3,"examQuestionObjs","examResultId","questionList","examObj","examTracks","studentObj","classroomName","examResultObj","userAnswersObj","iframeEssayResultObj","hasMultiple","hasEssay","isProcessingPdf","isProcessingSinglePdf"],[1,"p-5","text-center","alert","alert-danger",2,"justify-content","center"],[1,"text-center",2,"padding-top","215px","font-size","20px","background-color","rgba(0, 0, 0, 0.575)","color","#fff","position","fixed","top","0","right","0","left","0","bottom","0","z-index","9999999999"],["style","color: #fff; vertical-align: middle;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],[2,"color","#fff","vertical-align","middle"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","#fff","vertical-align","middle"]],template:function(e,n){if(1&e&&(t.YNc(0,Pv,17,22,"export-tpl-wrap",0),t.YNc(1,Lv,3,3,"ng-template",null,1,t.W1O),t.YNc(3,Nv,5,4,"div",2)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.isSupportedBrowser)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.isProcessingPdf)}},dependencies:[y.sg,y.O5,Wt.Hw,ia.OY,ia.vy,Qt.Kd,m.JJ,m.oH,oa,aa,tt.bT],encapsulation:2}),o})();function Qv(o,s){1&o&&t._UZ(0,"span",8)}function Dv(o,s){if(1&o&&t._UZ(0,"azt-export-template",9),2&o){const e=t.oxw(2);t.Q6J("examQuestionObjs",e.examQuestionObjs)("examResultId",e.curExamResultId)("questionList",e.questionList)("examObj",e.examObj)("examTracks",e.examTracks)("studentObj",e.studentObj)("classroomName",e.classroomName)("examResultObj",e.examResultObj)("userAnswersObj",e.userAnswersObj)("iframeEssayResultObj",e.iframeEssayResultObj)("hasMultiple",e.hasMultiple)("hasEssay",e.hasEssay)("isProcessingPdf",e.isProcessingPdf)("isProcessingSinglePdf",e.isProcessingSinglePdf)}}function Uv(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"export-tpl-wrap",3)(1,"div",4)(2,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.exportToPdf())}),t.YNc(3,Qv,1,0,"span",6),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,Dv,1,14,"azt-export-template",7),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("isLoading",e.isLoading),t.xp6(2),t.Q6J("disabled",!e.isDoneAllConvertTasks),t.xp6(1),t.Q6J("ngIf",!e.isDoneAllConvertTasks),t.xp6(1),t.hij(" ",t.lcZ(5,5,"lang_testbank_export_pdf_by_user_download"),""),t.xp6(2),t.Q6J("ngIf",e.questionList.length>0)}}function Fv(o,s){1&o&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_export_pdf_tutorial")))}const Rv=function(o){return{"block-hidden":o}};let zv=(()=>{class o extends R.Q{get pdfPercent(){return this.newPdfExportService.loadPercent}get isDoneAllConvertTasks(){return this.doneConvertUserResults&&this.doneParsingAllQuestionsContent}get hasEssay(){let e=!1;for(let n=0;n<this.questionList.length;n++)if(this.answerTypeService.isEssayAnswer(this.questionList[n].answerType)){e=!0;break}return e}get hasMultiple(){let e=!1;for(let n=0;n<this.questionList.length;n++)if(this.answerTypeService.isOneChoiceAnswer(this.questionList[n].answerType)){e=!0;break}return e}askBeforeCloseWindow(e){return!this.isProcessingSinglePdf||(e.returnValue=!1)}processConvertData(e){var n,i,a,r,l,c,_,d,p,h,f;return(0,ke.mG)(this,void 0,void 0,function*(){this.examResultObj=null===(n=e.data)||void 0===n?void 0:n.examResultObj,this.questionList=null!==(a=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null===(i=e.data)||void 0===i?void 0:i.questionObjs)))&&void 0!==a?a:[],this.questionList.forEach(k=>{k.isRoleTeacher=!0}),this.questionRenderService.parseRenderQuestions(this.questionList).then(this.listenToFinishRenderAll);for(let k=0;k<this.questionList.length;k++)this.questionList[k].indexLabel=k,this.questionList[k].correctAnswer=this.commonService.filterArray(null===(r=e.data)||void 0===r?void 0:r.correctQuestionIds,this.questionList[k].id);this.studentObj&&(this.studentObj=yield this.loadNameImage(this.studentObj)),this.examObj.examHeader&&(this.examObj.examHeader=yield this.exportPdfUtilsService.convertAndRetryToBase64(this.examObj.examHeader)),this.userAnswersObj={};let w=this.castJsonToObj(null!==(_=null===(c=null===(l=e.data)||void 0===l?void 0:l.examResultObj)||void 0===c?void 0:c.answers)&&void 0!==_?_:"");this.exportPdfConvertDataService.convertAnswersArr(w??[],this.userAnswersObj),this.iframeEssayResultObj=null!==(f=this.commonService.castJsonToObj(null!==(h=null===(p=null===(d=e.data)||void 0===d?void 0:d.examResultObj)||void 0===p?void 0:p.result)&&void 0!==h?h:""))&&void 0!==f?f:void 0,this.iframeEssayResultObj&&(this.iframeEssayResultObj=yield this.exportPdfConvertDataService.processEssayResultToBase64(this.iframeEssayResultObj)),this.exportPdfUtilsService.parseEssayMarkResult(this.questionList,this.examResultObj,this.examQuestionObjs),this.doneConvertUserResults=!0})}loadNameImage(e){var n;return(0,ke.mG)(this,void 0,void 0,function*(){if(e&&e.nameImages&&(null!==(n=e?.id)&&void 0!==n?n:0)<=0){var i=yield this.checkDrawImgNameService.getBase64Url(e.nameImages);return i&&(e.nameImages.url=i),e}return e})}exportToPdf(){var e,n;this.isProcessingSinglePdf=!0;let i=this.commonService.createFileNameExportFile([null!==(n=null===(e=this.studentObj)||void 0===e?void 0:e.fullName)&&void 0!==n?n:"Thi Offline",this.curExamResultId.toString()])+"_test_result.pdf";document.body.style.overflow="hidden",setTimeout(()=>{this.newPdfExportService.examToPdf("user",i).then(()=>{this.isProcessingSinglePdf=!1,document.body.style.overflow="auto"}).catch(()=>{this.isProcessingSinglePdf=!1,document.body.style.overflow="auto"})},100)}getAndProcessData(e,n,i,a){this.isLoading=!0,this.examResultService.apiExamResultGetLastResultGet(e,n.toString(),i.toString(),a).subscribe(r=>{var l,c,_,d,p,h,f,w,k,S,D,Q;if(1==r.success){let N="";this.commonService.getTranslate("lang_auto_tu_do").subscribe(q=>{N=q}),this.studentObj=null===(l=r.data)||void 0===l?void 0:l.studentObj,this.classroomName=null!==(c=r.data)&&void 0!==c&&c.classroomObj&&null!==(d=null===(_=r.data)||void 0===_?void 0:_.classroomObj.name)&&void 0!==d?d:N,this.examResultObjs=null!==(h=null===(p=r.data)||void 0===p?void 0:p.historyExamResultObjs)&&void 0!==h?h:[],this.examTracks=null===(f=r.data)||void 0===f?void 0:f.examTracks,this.examObj=null!==(k=null===(w=r.data)||void 0===w?void 0:w.examObj)&&void 0!==k?k:this.examObj,this.examQuestionObjs=null!==(D=null===(S=r.data)||void 0===S?void 0:S.examQuestionObjs)&&void 0!==D?D:[],this.processConvertData(r),this.exportPdfUtilsService.translateMetaTitle(r),this.isLoading=!1}else this.isLoading=!1,this.showErrorSnack(null!==(Q=r.message)&&void 0!==Q?Q:"")})}ngOnInit(){if(this.isSupportedBrowser=this.exportPdfUtilsService.isSupportedBrowser(),this.isSupportedBrowser){this.isLoading=!0;var e=[{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/html2pdf.bundle.js?v=28092021"),name:"html2pdf.bundle.js"}];this.commonService.loadScriptPromises(e).then(()=>{var n;this.isLoading=!1,this.reference=null!==(n=this.commonService.getMyQueryParam("ref"))&&void 0!==n?n:"",this.curExamId=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),this.curUserId=Number(this.activeRoute.snapshot.paramMap.get("user_id")),this.curStudentId=Number(this.activeRoute.snapshot.paramMap.get("student_id")),this.curExamResultId=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.getAndProcessData(this.curExamId,this.curUserId,this.curStudentId,this.curExamResultId)})}super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p){super(e),this.commonService=e,this.activeRoute=n,this.exportPdfConvertDataService=i,this.newPdfExportService=a,this.cdnService=r,this.examResultService=l,this.exportPdfUtilsService=c,this.checkDrawImgNameService=_,this.answerTypeService=d,this.questionRenderService=p,this.reference="",this.curExamResultId=0,this.curExamId=0,this.curUserId=0,this.curStudentId=0,this.isLoading=!1,this.isProcessingPdf=!1,this.isProcessingSinglePdf=!1,this.doneConvertUserResults=!1,this.doneParsingAllQuestionsContent=!1,this.studentObj=void 0,this.examResultObjs=[],this.examResultObj=void 0,this.questionList=[],this.examQuestionObjs=[],this.userAnswersObj={},this.examTracks=void 0,this.examObj={name:""},this.classroomName="",this.listenToFinishRenderAll=h=>{console.log("finish render all question ..."),this.doneParsingAllQuestionsContent=!0}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(Xo.S),t.Y36(ta.I),t.Y36(Dt.U),t.Y36(xt.kS),t.Y36(Wi.V),t.Y36(ea.k),t.Y36(Je.T),t.Y36(na.L))},o.\u0275cmp=t.Xpm({type:o,selectors:[["export-pdf-by-user"]],hostBindings:function(e,n){1&e&&t.NdJ("beforeunload",function(a){return n.askBeforeCloseWindow(a)},!1,t.Jf7)},inputs:{blockItemCropClass:"blockItemCropClass",blockItemEssayCropClass:"blockItemEssayCropClass"},features:[t.qOj],decls:6,vars:9,consts:[[3,"isLoading",4,"ngIf","ngIfElse"],["notBrowserSupport",""],[1,"text-center",2,"padding-top","150px","font-size","20px","background-color","rgba(0, 0, 0, 0.575)","color","#fff","position","fixed","top","0","right","0","left","0","bottom","0","z-index","9999999999",3,"ngClass"],[3,"isLoading"],["actionButton","",1,"buttons-area","mb-3","text-center"],["azt-track-service","export-pdf-by-user-WHhdJl0MyO",1,"btn","btn-primary","mr-2",3,"disabled","click"],["style","color: darkgrey;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["templateExport","",3,"examQuestionObjs","examResultId","questionList","examObj","examTracks","studentObj","classroomName","examResultObj","userAnswersObj","iframeEssayResultObj","hasMultiple","hasEssay","isProcessingPdf","isProcessingSinglePdf",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","darkgrey"],["templateExport","",3,"examQuestionObjs","examResultId","questionList","examObj","examTracks","studentObj","classroomName","examResultObj","userAnswersObj","iframeEssayResultObj","hasMultiple","hasEssay","isProcessingPdf","isProcessingSinglePdf"],[1,"p-5","text-center","alert","alert-danger",2,"justify-content","center"]],template:function(e,n){if(1&e&&(t.YNc(0,Uv,7,7,"export-tpl-wrap",0),t.YNc(1,Fv,3,3,"ng-template",null,1,t.W1O),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.isSupportedBrowser)("ngIfElse",i),t.xp6(3),t.Q6J("ngClass",t.VKq(7,Rv,!n.isProcessingSinglePdf)),t.xp6(1),t.AsE(" [ ",n.pdfPercent,"% ] ",t.lcZ(5,5,"lang_testbank_export_pdf_by_user_wait_loading"),"\n")}},dependencies:[y.mk,y.O5,oa,aa,tt.bT],encapsulation:2}),o})(),Jv=(()=>{class o extends R.Q{redirectToDonate(){this.commonService.myNavigation("/admin/testbank/donate")}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank"]],features:[t.qOj],decls:2,vars:0,consts:[["id","testbank-layout"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[C.lC],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}.btn-donate[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;font-size:14px;color:#3c8dbc;display:flex;justify-content:center;align-items:center;margin-right:15px;transition:all .5s}.btn-donate[_ngcontent-%COMP%]:hover{color:#204e69}.btn-donate[_ngcontent-%COMP%]:hover   .donate-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}.donate-icon[_ngcontent-%COMP%]{margin-right:5px;animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-14px,0) scaleY(1.1) rotate(-15deg)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-7px,0) scaleY(1.05) rotate(15deg)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95) rotate(0)}90%{transform:translate3d(0,-2px,0) scaleY(1.02) rotate(0)}}@media screen and (max-width: 768px){.donate-title[_ngcontent-%COMP%]{display:none}.btn-donate[_ngcontent-%COMP%]{margin-right:0}}"]}),o})();var Bv=T(57851),sa=T(61135),ra=T(56451);class fi{constructor(s,e,n,i,a,r=1,l=!1,c=!1,_,d){this.id=s,this.pr=e,this.type=n,this.shareType=i,this.item=a,this.level=r,this.expandable=l,this.isLoading=c,this.prNode=_,this.isLeaf=d}}let Hv=(()=>{class o{constructor(e,n){this.testMarketQuestionService=e,this.fb=n,this.dataMap=new Map,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.formSchoolInfo=new m.cw({}),this.formSchoolInfo=this.fb.group({schoolLevel:new m.NI("0"),schoolSubject:new m.NI("0")})}initialData(){return new Promise(e=>{this.testMarketQuestionService.apiTestMarketQuestionsSubjectLevelsGet().subscribe(n=>{var i,a,r,l;1==n.success?(this.schoolLevelObjs=null!==(a=null===(i=n.data)||void 0===i?void 0:i.schoolLevelObjs)&&void 0!==a?a:[],this.schoolSubjectObjs=null!==(l=null===(r=n.data)||void 0===r?void 0:r.schoolSubjectObjs)&&void 0!==l?l:[],this.formSchoolInfo.controls.schoolLevel.setValue("12"),this.formSchoolInfo.controls.schoolSubject.setValue("40"),this.apiLeechData(void 0).then(c=>{e(c.map(_=>new fi(_.id,_.pr,_.type,void 0,_.name,0,!_.isLeaf,!1,void 0,_.isLeaf)))}).catch(()=>{e([])})):e([])})})}isExpandable(e){return this.dataMap.has(e)}apiLeechData(e){return new Promise(n=>{const i=[];this.testMarketQuestionService.apiTestMarketQuestionsKnowledgeGet(Number(this.formSchoolInfo.controls.schoolLevel.value),Number(this.formSchoolInfo.controls.schoolSubject.value),e).subscribe(a=>{1===a.success&&a.data&&(a.data.objs||[]).forEach(l=>{var c,_;i.push({pr:e??0,id:null!==(c=l.id)&&void 0!==c?c:0,name:l.name?`${l.name} (${l.approved})`:"",type:"knowledge",isLeaf:null!==(_=l.isLeaf)&&void 0!==_&&_})}),n(i)})})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(xt.Q_),t.LFG(m.qu))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class Yv{get data(){return this.dataChange.value}set data(s){this._treeControl.dataNodes=s,this.dataChange.next(s)}constructor(s,e){this._treeControl=s,this._database=e,this.dataChange=new sa.X([])}connect(s){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,ra.T)(s.viewChange,this.dataChange).pipe((0,qn.U)(()=>this.data))}getNode(s){let e=this.data.filter(n=>n.id==s);return e&&e.length>0?e[0]:null}disconnect(s){}handleTreeControl(s){s.added&&s.added.forEach(e=>this.toggleNode(e,!0)),s.removed&&s.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(s,e){if("knowledge"===s.type){const n=this.data.indexOf(s);if(e)s.isLoading=!0,this._database.apiLeechData(s.id).then(i=>{const a=i.map(r=>new fi(r.id,r.pr,r.type,void 0,r.name,s.level+1,!r.isLeaf,!1,s,r.isLeaf));this.data.splice(n+1,0,...a),this.dataChange.next(this.data),s.isLoading=!1});else{let i=0;for(let a=n+1;a<this.data.length&&this.data[a].level>s.level;a++,i++);this.data.splice(n+1,i),this.dataChange.next(this.data)}}}}let Gv=(()=>{class o{constructor(e){this.documentService=e,this.dataMap=new Map}initialData(){return new Promise(e=>{this.apiLeechData(0).then(n=>{e(n.map(i=>new fi(i.id,i.pr,i.type,i.shareType,i.name,0,"cate"===i.type,i.isLeaf)))})})}isExpandable(e){return this.dataMap.has(e)}apiLeechData(e,n){return new Promise(i=>{const a=[];this.documentService.apiDocumentsGet(e,void 0,n,void 0,void 0,1,1,-1).subscribe(r=>{1===r.success&&r.data&&((r.data.categoryObjs||[]).forEach(_=>{var d,p;a.push({pr:e,id:null!==(d=_.id)&&void 0!==d?d:0,name:null!==(p=_.name)&&void 0!==p?p:"",type:"cate",shareType:_.shareType,isLeaf:!1})}),(r.data.documentObjs||[]).forEach(_=>{var d,p;_.exam&&a.push({pr:e,id:null!==(d=_.exam.id)&&void 0!==d?d:0,name:null!==(p=_.exam.name)&&void 0!==p?p:"",type:"test",shareType:void 0,isLeaf:!0})})),i(a)})})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(xt.Zg))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class $v{get data(){return this.dataChange.value}set data(s){this._treeControl.dataNodes=s,this.dataChange.next(s)}constructor(s,e){this._treeControl=s,this._database=e,this.dataChange=new sa.X([])}connect(s){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,ra.T)(s.viewChange,this.dataChange).pipe((0,qn.U)(()=>this.data))}disconnect(s){}handleTreeControl(s){s.added&&s.added.forEach(e=>this.toggleNode(e,!0)),s.removed&&s.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(s,e){if("cate"===s.type){const n=this.data.indexOf(s);if(e)s.isLoading=!0,this._database.apiLeechData(s.id,s.shareType).then(i=>{const a=i.map(r=>new fi(r.id,r.pr,r.type,r.shareType,r.name,s.level+1,"cate"===r.type,!1,s));this.data.splice(n+1,0,...a),this.dataChange.next(this.data),s.isLoading=!1});else{let i=0;for(let a=n+1;a<this.data.length&&this.data[a].level>s.level;a++,i++);this.data.splice(n+1,i),this.dataChange.next(this.data)}}}}var xi=T(35423);const Kv=["tableMain"],Wv=["popupConfirm"];function Vv(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function Xv(o,s){if(1&o&&(t.TgZ(0,"option",70),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e.id)("selected",e.id==n.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function t2(o,s){if(1&o&&(t.TgZ(0,"option",70),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e.id)("selected",e.id==n.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function e2(o,s){if(1&o&&(t.TgZ(0,"form",63)(1,"label",64),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"select",65)(5,"option",66),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.YNc(8,Xv,3,5,"option",67),t.qZA(),t.TgZ(9,"label",68),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"select",69)(13,"option",66),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.YNc(16,t2,3,5,"option",67),t.qZA()()),2&o){const e=t.oxw(2);t.Q6J("formGroup",e.azotaKnowledgeDatabaseService.formSchoolInfo),t.xp6(2),t.hij(" ",t.lcZ(3,9,"lang_auto_lop_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij("",t.lcZ(7,11,"lang_auto_---chon_khoi"),"---"),t.xp6(2),t.Q6J("ngForOf",e.azotaKnowledgeDatabaseService.schoolLevelObjs),t.xp6(2),t.hij(" ",t.lcZ(11,13,"lang_auto_mon_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij("",t.lcZ(15,15,"lang_auto_---chon_mon"),"---"),t.xp6(2),t.Q6J("ngForOf",e.azotaKnowledgeDatabaseService.schoolSubjectObjs)}}function n2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",71),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.switchContentAction(a))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.name)}}function i2(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",77),t._UZ(2,"path",78),t.qZA()())}function o2(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",79),t._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),t.qZA()())}function a2(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",80)(3,"polyline",81)(4,"line",84)(5,"line",85)(6,"line",86),t.qZA()())}const la=function(o){return{paddingLeft:o,paddingBottom:"10px"}},ca=function(o,s){return{"tb-active":o,"d-none":s}};function s2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",72),t.ALo(1,"compareString"),t._UZ(2,"button",73),t.TgZ(3,"div",74),t.YNc(4,i2,3,0,"span",75),t.YNc(5,o2,5,0,"span",75),t.YNc(6,a2,7,0,"span",75),t.TgZ(7,"span",76),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(a))}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("ngStyle",t.VKq(11,la,15*e.level+"px"))("ngClass",t.WLB(13,ca,n.exitsTables.includes(e.id),!t.xi3(1,6,e.item,n.filterContent))),t.xp6(4),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type),t.xp6(1),t.Q6J("ngIf","knowledge"===e.type&&e.isLeaf),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.item)," ")}}function r2(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",77),t._UZ(2,"path",78),t.qZA()())}function l2(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",91),t._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),t.qZA()())}function c2(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",92)(1,"g",93)(2,"g",94),t._UZ(3,"circle",95),t.TgZ(4,"path",96),t._UZ(5,"animateTransform",97),t.qZA()()()())}function _2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tree-node",72),t.ALo(1,"compareString"),t.TgZ(2,"button",87)(3,"mat-icon",88),t._uU(4),t.qZA()(),t.TgZ(5,"div",74),t.YNc(6,r2,3,0,"span",75),t.YNc(7,l2,5,0,"span",75),t.TgZ(8,"span",89),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(a))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,c2,6,0,"svg",90),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw(2);t.Q6J("ngStyle",t.VKq(14,la,15*e.level+"px"))("ngClass",t.WLB(16,ca,n.exitsTables.includes(e.id),!t.xi3(1,9,e.item,n.filterContent))),t.xp6(2),t.Q6J("disabled",e.isLoading),t.uIk("aria-label","Toggle "+e.item),t.xp6(2),t.hij(" ",n.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(2),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type||"knowledge"===e.type&&e.isLeaf),t.xp6(2),t.hij(" ",t.lcZ(10,12,e.item)," "),t.xp6(2),t.Q6J("ngIf",e.isLoading)}}function d2(o,s){if(1&o&&(t.TgZ(0,"div",98)(1,"div",99)(2,"div",100)(3,"span"),t._UZ(4,"span",101),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",102),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(7),t.Oqu(t.lcZ(8,1,e.logConfig.msg))}}const u2=function(o){return{"has-err":o}};function m2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",3),t.YNc(2,e2,17,17,"form",4),t.qZA(),t.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"form",8),t._UZ(7,"input",9),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"button",10),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"mat-icon"),t._uU(13,"expand_more"),t.qZA()(),t.TgZ(14,"mat-menu",null,11)(16,"div",12)(17,"ng-scrollbar",13)(18,"ul",14)(19,"li")(20,"a",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createNew())}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"li"),t._UZ(24,"hr",16),t.qZA(),t.YNc(25,n2,3,1,"li",17),t.qZA()()()()()(),t.TgZ(26,"div",18)(27,"div",19)(28,"div",20)(29,"ng-scrollbar",13)(30,"mat-tree",21),t.YNc(31,s2,10,16,"mat-tree-node",22),t.YNc(32,_2,12,19,"mat-tree-node",23),t.qZA()()(),t.TgZ(33,"div",24)(34,"input",25),t.NdJ("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.filterContent=i)}),t.ALo(35,"mytranslate"),t.qZA()()(),t.TgZ(36,"div",26)(37,"div",27,28)(39,"table",29)(40,"thead",30)(41,"tr",31)(42,"td",32),t._uU(43),t.ALo(44,"mytranslate"),t.qZA(),t.TgZ(45,"td",32),t._uU(46),t.ALo(47,"mytranslate"),t.qZA(),t.TgZ(48,"td",33),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"td",34),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"td",35),t._uU(55),t.ALo(56,"mytranslate"),t.qZA(),t.TgZ(57,"td",36),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.TgZ(60,"td",32),t._uU(61,"%"),t._UZ(62,"br"),t._uU(63),t.ALo(64,"mytranslate"),t._UZ(65,"br"),t._uU(66),t.ALo(67,"mytranslate"),t.qZA()(),t.TgZ(68,"tr",31)(69,"td",37),t._uU(70),t.ALo(71,"mytranslate"),t.qZA(),t.TgZ(72,"td",37),t._uU(73),t.ALo(74,"mytranslate"),t.qZA(),t.TgZ(75,"td",37),t._uU(76),t.ALo(77,"mytranslate"),t.qZA(),t.TgZ(78,"td",37),t._uU(79),t.ALo(80,"mytranslate"),t.qZA(),t.TgZ(81,"td",37),t._uU(82),t.ALo(83,"mytranslate"),t.qZA(),t.TgZ(84,"td",38),t._uU(85),t.ALo(86,"mytranslate"),t.qZA()(),t.TgZ(87,"tr",31)(88,"td"),t._uU(89),t.ALo(90,"mytranslate"),t.qZA(),t.TgZ(91,"td"),t._uU(92),t.ALo(93,"mytranslate"),t.qZA(),t.TgZ(94,"td"),t._uU(95),t.ALo(96,"mytranslate"),t.qZA(),t.TgZ(97,"td"),t._uU(98),t.ALo(99,"mytranslate"),t.qZA(),t.TgZ(100,"td"),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"td"),t._uU(104),t.ALo(105,"mytranslate"),t.qZA(),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"mytranslate"),t.qZA(),t.TgZ(109,"td"),t._uU(110),t.ALo(111,"mytranslate"),t.qZA(),t.TgZ(112,"td"),t._uU(113),t.ALo(114,"mytranslate"),t.qZA(),t.TgZ(115,"td"),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()()(),t.TgZ(118,"tbody")(119,"tr",39)(120,"td",40),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()()(),t.TgZ(123,"tfoot",30)(124,"tr",41)(125,"td",42),t._uU(126),t.ALo(127,"mytranslate"),t.qZA(),t._UZ(128,"td")(129,"td")(130,"td")(131,"td")(132,"td")(133,"td")(134,"td")(135,"td")(136,"td")(137,"td")(138,"td")(139,"td")(140,"td"),t.qZA()()(),t.TgZ(141,"div",43),t._uU(142),t.ALo(143,"mytranslate"),t._UZ(144,"br"),t._uU(145),t.ALo(146,"mytranslate"),t._UZ(147,"br"),t._uU(148),t.ALo(149,"mytranslate"),t.TgZ(150,"a",44),t._uU(151),t.ALo(152,"mytranslate"),t.qZA(),t._UZ(153,"br"),t._uU(154),t.ALo(155,"mytranslate"),t._UZ(156,"br"),t.qZA(),t.TgZ(157,"div",45)(158,"li",46),t.O4$(),t.TgZ(159,"svg",47),t._UZ(160,"path",48)(161,"path",49)(162,"path",50)(163,"path",51)(164,"path",52)(165,"path",53),t.qZA(),t.kcU(),t.TgZ(166,"span",54),t._uU(167),t.ALo(168,"mytranslate"),t.qZA()(),t.TgZ(169,"li",55),t.O4$(),t.TgZ(170,"svg",56),t._UZ(171,"path",57)(172,"path",49)(173,"path",58)(174,"path",59)(175,"path",60),t.qZA(),t.kcU(),t.TgZ(176,"span",54),t._uU(177),t.ALo(178,"mytranslate"),t.qZA()()()()()(),t._UZ(179,"editor-confirm",null,61),t.YNc(181,d2,9,3,"div",62)}if(2&o){const e=t.MAs(15),n=t.oxw();t.xp6(2),t.Q6J("ngIf","azota"===n.selfRequestData),t.xp6(4),t.Q6J("formGroup",n.matrixTableForm),t.xp6(1),t.s9C("placeholder",t.lcZ(8,50,"lang_auto_nhap_ten_ma_tran")+"..."),t.Q6J("readonly",n.isDisableEditor)("ngClass",t.VKq(124,u2,n.checkName&&(!n.matrixTableForm.controls.blackSelectName.value||0===n.matrixTableForm.controls.blackSelectName.value.trim().length))),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(11,52,"lang_auto_danh_sach_da_tao")," "),t.xp6(7),t.Q6J("visibility","hover"),t.xp6(4),t.hij(" + ",t.lcZ(22,54,"lang_auto_tao_moi")," "),t.xp6(4),t.Q6J("ngForOf",n.banks),t.xp6(4),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("dataSource",n.commonDataSourceProcess)("treeControl",n.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",n.hasChild),t.xp6(2),t.s9C("placeholder",t.lcZ(35,56,"lang_auto_loc_theo_ten")),t.Q6J("ngModel",n.filterContent),t.xp6(9),t.hij(" ",t.lcZ(44,58,"lang_auto_STT")," "),t.xp6(3),t.hij(" ",t.lcZ(47,60,"lang_auto_noi_dung_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(50,62,"lang_auto_don_vi_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(53,64,"lang_auto_cau_trong_de_minh_hoa")," "),t.xp6(3),t.hij(" ",t.lcZ(56,66,"lang_auto_muc_do_nhan_biet")," "),t.xp6(3),t.hij(" ",t.lcZ(59,68,"lang_auto_tong")," "),t.xp6(5),t.hij(" ",t.lcZ(64,70,"lang_auto_tong")," "),t.xp6(3),t.Oqu(t.lcZ(67,72,"lang_auto_diem")),t.xp6(4),t.hij(" ",t.lcZ(71,74,"lang_auto_nhan_biet")," "),t.xp6(3),t.Oqu(t.lcZ(74,76,"lang_auto_thong_hieu")),t.xp6(3),t.Oqu(t.lcZ(77,78,"lang_auto_van_dung")),t.xp6(3),t.Oqu(t.lcZ(80,80,"lang_auto_van_dung_cao")),t.xp6(3),t.Oqu(t.lcZ(83,82,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(86,84,"lang_auto_thoi_gian_phut")),t.xp6(4),t.Oqu(t.lcZ(90,86,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(93,88,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(96,90,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(99,92,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(102,94,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(105,96,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(108,98,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(111,100,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(114,102,"lang_auto_TN")),t.xp6(3),t.Oqu(t.lcZ(117,104,"lang_auto_TL")),t.xp6(5),t.hij(" ",t.lcZ(122,106,"lang_auto_chon_cac_noi_dung_kien_thuc_o_cay_thu_muc_ben_cac_de_them_vao_ma_tran")," "),t.xp6(5),t.hij(" ",t.lcZ(127,108,"lang_auto_tong")," "),t.xp6(16),t.hij(" * ",t.lcZ(143,110,"lang_auto_nhap_tl_vao_sau_so_luong_cau_can_lay_de_chi_lay_cau_tu_luan"),""),t.xp6(3),t.hij(" * ",t.lcZ(146,112,"lang_auto_viet_tat_ch_cau_hoi_tl_tu_luan_dot"),""),t.xp6(3),t.hij(" * ",t.lcZ(149,114,"lang_auto_ban_can_gan_nhan_muc_do_nhan_biet_cho_cac_cau_hoi_trong_dot")," "),t.xp6(3),t.hij(" ",t.lcZ(152,116,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.hij(" * ",t.lcZ(155,118,"lang_auto_nhap_vi_tri_trong_de_note")," "),t.xp6(13),t.Oqu(t.lcZ(168,120,"lang_auto_gop_cac_o_da_chon")),t.xp6(10),t.hij(" ",t.lcZ(178,122,"lang_auto_huy_gop_o_da_chon")," "),t.xp6(4),t.Q6J("ngIf",n.logConfig.status)}}let p2=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c,_,d){super(r),this.userCategoriesDatabase=e,this.azotaKnowledgeDatabaseService=n,this.editorOutputDataService=i,this.activeRoute=a,this.commonService=r,this.examBankService=l,this.questionService=c,this.gzipHelper=_,this.fb=d,this.backToLink="",this.checkName=!1,this.cur_cateId=0,this.cur_bankId=0,this.exitsTables=[],this.banks=[],this.logConfig={},this.filterContent="",this.doneInitView=!1,this.doneGetRequest=!1,this.selfRequestData="user",this.isDisableEditor=!1,this.getLevel=p=>p.level,this.isExpandable=p=>p.expandable,this.hasChild=(p,h)=>h.expandable,this.treeControl=new Bv.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new $v(this.treeControl,e),this.azotaKnowledgeDataSource=new Yv(this.treeControl,n),this.matrixTableForm=this.fb.group({blankSelectId:new m.NI(null),blackSelectName:new m.NI(null)})}switchContentAction(e){var n,i;let a=null!==(n=this.commonService.myTranslateInstant("lang_auto_xac_nhap_thay_the_noi_dung_ma_tran_da_chon"))&&void 0!==n?n:"";null===(i=this.popupConfirm)||void 0===i||i.startConfirm(a).then(r=>{r&&this.switchContent(e)})}switchContent(e){var n;let i=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=i,this.examBankService.apiExamBanksIdGet(null!==(n=e.id)&&void 0!==n?n:0).subscribe(a=>{var r,l,c,_;if(a.success&&a.data){let d=this.gzipHelper.resultContentSupport(null!==(r=a.data.content)&&void 0!==r?r:"");const p=this.commonService.castJsonToObj(d);p&&(this.matrixTableForm.controls.blankSelectId.setValue(a.data.id),this.matrixTableForm.controls.blackSelectName.setValue(a.data.name),this.setStatusDisable(null!==(l=!a.data.editable)&&void 0!==l&&l),null===(c=this.tableEditor)||void 0===c||c.resetAndPushList(p).then(()=>{this.logConfig.status=!1,this.logConfig.msg=void 0}))}else this.errorStatusObj(null!==(_=a.message)&&void 0!==_?_:"",!0),this.logConfig.status=!1,this.logConfig.msg=void 0})}setStatusDisable(e){var n;this.isDisableEditor=e,null===(n=this.tableEditor)||void 0===n||n.setDisable(this.isDisableEditor)}cancelAction(){var e;null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_confirm_destroy_content").then(n=>{n&&location.reload()})}actionRedirect(e){this.logConfig.status=!1,this.logConfig.msg=void 0,this.editorOutputDataService.setMatrixData({matrix:e,response:{id:Number(this.matrixTableForm.controls.blankSelectId.value),name:this.matrixTableForm.controls.blackSelectName.value,type:this.selfRequestData,editable:!this.isDisableEditor}}),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+("azota"===this.selfRequestData?"?self=azota":"")}saveAction(){var e,n;const i=null===(e=this.tableEditor)||void 0===e?void 0:e.getResult();if(null!==(n=this.tableEditor)&&void 0!==n&&n.isErrSum)this.showErrorSnack("lang_auto_vui_long_nhap_tong_%_diem_khong_qua_100%");else if(this.tableEditor&&this.tableEditor.isErrNumPos)this.showErrorSnack("lang_auto_vui_long_nhap_vi_tri_cau_hoi_hop_le");else if("azota"===this.selfRequestData&&this.tableEditor&&this.tableEditor.getSumQuestion()>50)this.showErrorSnack("lang_auto_limit_matrix_bank_question");else if(i&&i.length>0&&this.matrixTableForm.controls.blackSelectName.value&&this.matrixTableForm.controls.blackSelectName.value.length>0)if(this.isDisableEditor)this.actionRedirect(i);else{let a=this.commonService.myTranslateInstant("lang_auto_dang_chuan_bi_cau_hoi_cho_ma_tran_vua_tao");this.logConfig.status=!0,this.logConfig.msg=a,this.matrixTableForm.controls.blankSelectId.value&&Number(this.matrixTableForm.controls.blankSelectId.value)>0?this.examBankService.apiExamBanksIdPut(Number(this.matrixTableForm.controls.blankSelectId.value),{name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(i)),type:this.typeRequestData}).subscribe(r=>{r&&1==r.success?this.actionRedirect(i):this.showErrorSnack("lang_auto_khong_the_thay_doi_ma_tran_de_thi")}):this.examBankService.apiExamBanksPost({name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(i)),type:this.typeRequestData}).subscribe(r=>{r&&1==r.success?this.actionRedirect(i):this.showErrorSnack("lang_auto_khong_the_luu_ma_tran_de_thi")})}else i&&0!==i.length?(this.checkName=!0,this.showErrorSnack("lang_auto_vui_long_nhap_ten_ma_tran_de_thi")):this.showErrorSnack("lang_auto_khong_tim_thay_du_lieu_ma_tran")}initTableEditor(){var e;if(this.tableMain){const n=this.tableMain.nativeElement;this.tableEditor=new Ht(this.commonService,(r,l,c)=>{l?c&&this.showErrorSnack(r):this.showSuccessSnack(r)},this.questionService,n,n.firstElementChild,sn.generate({is_select_cell:!1}),r=>{this.exitsTables=[],r.forEach(l=>{this.exitsTables.push(l.obj.id)})});const a=this.editorOutputDataService.getMatrixData();a&&a.matrix.length>0&&a.response.type===this.selfRequestData&&(this.matrixTableForm.controls.blankSelectId.setValue(a.response.id),this.matrixTableForm.controls.blackSelectName.setValue(a.response.name),this.setStatusDisable(null!==(e=!a.response.editable)&&void 0!==e&&e),this.tableEditor.resetAndPushList(a.matrix)),this.doneInitView=!0,this.checkDataBeforeInitDone()}}checkDataBeforeInitDone(){if(this.doneInitView&&this.doneGetRequest&&this.banks.length>0&&this.matrixTableForm.controls.blackSelectName.value===this.banks[0].name&&(this.matrixTableForm.controls.blankSelectId.setValue(this.banks[0].id),this.matrixTableForm.controls.blackSelectName.setValue(this.banks[0].name)),0!==this.cur_bankId){const e=this.banks.find(n=>n.id===this.cur_bankId);e&&this.switchContent(e)}}createNew(){var e,n;let i=null!==(e=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_moi_ma_tran_de_thi"))&&void 0!==e?e:"";null===(n=this.popupConfirm)||void 0===n||n.startConfirm(i).then(a=>{var r;a&&(this.matrixTableForm.controls.blackSelectName.setValue(null),this.matrixTableForm.controls.blankSelectId.setValue(null),null===(r=this.tableEditor)||void 0===r||r.resetAndPushList([]))})}initData(){let e=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=e,this.commonDataSourceProcess._database.initialData().then(n=>{this.commonDataSourceProcess.data=n,this.examBankService.apiExamBanksGet(this.typeRequestData).subscribe(i=>{var a,r;i.success&&i.data?(this.banks=null!==(a=i.data.banks)&&void 0!==a?a:[],this.logConfig.status=!1,this.logConfig.msg=void 0,this.doneGetRequest=!0,this.checkDataBeforeInitDone()):this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"",!0)})})}ngAfterViewInit(){this.initTableEditor()}ngOnInit(){super.ngOnInit(),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"cat_id","0")),this.selfRequestData=this.commonService.getMyParamOrDefault(this.activeRoute,"mode_name","user"),this.cur_bankId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"matrix_id","0"));let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+this.cur_cateId}),this.initData()}get commonDataSourceProcess(){return"user"===this.selfRequestData?this.userCategoriesDataSource:"azota"===this.selfRequestData?this.azotaKnowledgeDataSource:this.userCategoriesDataSource}get typeRequestData(){return"user"===this.selfRequestData?"matrix":"azota"===this.selfRequestData?"knowledge":"matrix"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Gv),t.Y36(Hv),t.Y36(pn),t.Y36(C.gz),t.Y36(_t.v),t.Y36(xt.SP),t.Y36(xt.aE),t.Y36(rn.n),t.Y36(m.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-mix-bank-template"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Kv,5,t.SBq),t.Gf(Wv,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.tableMain=i.first),t.iGM(i=t.CRH())&&(n.popupConfirm=i.first)}},features:[t.qOj],decls:4,vars:4,consts:[[3,"headerBackTolink","showConfirmButton","handleCancel","handleConfirm"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"header-mix-bank"],["class","header-fx-item",3,"formGroup",4,"ngIf"],[1,"header-fx-item"],[1,"bank-name-block"],[1,"name-block"],[1,"input",3,"formGroup"],["formControlName","blackSelectName","type","text",1,"form-control",3,"readonly","placeholder","ngClass"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["historyMatrix","matMenu"],[1,"dropdown-menu","show","relative","w-56",2,"height","60vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content","mt-0"],["azt-track-service","mix-bank-template-qYcpBwTiaO",1,"dropdown-item","uppercase",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[4,"ngFor","ngForOf"],[1,"main-mix-blank","bg-white","dark:bg-darkmode-400"],[1,"col-tree"],[1,"col-tree-main"],[2,"padding-right","10px",3,"dataSource","treeControl"],[3,"ngStyle","ngClass",4,"matTreeNodeDef"],[3,"ngStyle","ngClass",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"filler-node","bg-white","dark:bg-darkmode-400"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-table"],["id","table_main",1,"table-main"],["tableMain",""],["id","table__element"],[2,"color","#2a3545"],[1,"header-tb"],["rowspan","3"],["rowspan","3","colspan","2"],["rowspan","3","colspan","1"],["colspan","8"],["colspan","3"],["colspan","2"],["rowspan","2"],["id","tr__empty-length",1,"text-center","text-slate-500","dark:text-slate-200"],["colspan","17"],[1,"dis-item-tb"],["colspan","4",1,"text-center"],[1,"ins-info"],["azt-track-service","mix-bank-template-uenTko-_UV","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de","target","_blank",1,"text-primary"],["id","menu__excel_editor",1,"menu-excel"],["id","menu__excel_editor__merge",2,"display","none"],["width","25px","viewBox","0, 0, 2048, 2048","focusable","false"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 m 563 -615 v 1741 h -1741 v -1741 m 103 308 h 717 v -205 h -717 m 717 1536 v -205 h -717 v 205 m 1536 -205 h -717 v 205 h 717 m 0 -1229 h -1536 v 922 h 1536 m 0 -1229 h -717 v 205 h 717 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 154 1792 v -1638 h 1638 v 1638 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 1024 410 h -102 v -205 h 102 m 0 1536 h -102 v -205 h 102 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 1639 h 1536 v -1536 h -1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 410 v 1126 h -1741 v -1126 m 103 1024 h 1536 v -922 h -1536 z",2,"fill","rgba(30, 139, 205, 1)"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 z",2,"fill","rgba(30, 139, 205, 1)"],[1,"menu-content"],["id","menu__excel_editor__un_merge",2,"display","none"],["width","25px","viewBox","0,0,2048,2048","focusable","false"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 512 h 717 v -409 h -717 m 1229 1024 h 307 v -512 h -307 m -103 0 h -307 v 512 h 307 m -819 -512 h -307 v 512 h 307 m 102 0 h 308 v -512 h -308 m 308 1024 v -410 h -717 v 410 m 1536 -410 h -717 v 410 h 717 m 0 -1127 v -409 h -717 v 409 z"],["type","path","d","M 1024 1331 v 410 h -102 v -410 m 0 -614 v -512 h 102 v 512 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 1639 103 h -1536 v 1536 h 1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 614 v 717 h -1741 v -717 m 410 615 v -512 h -307 v 512 m 717 0 v -512 h -308 v 512 m 717 0 v -512 h -307 v 512 m 717 -512 h -307 v 512 h 307 z",2,"fill","rgba(30, 139, 205, 1)"],["popupConfirm",""],["class","loading-mess",4,"ngIf"],[1,"header-fx-item",3,"formGroup"],["for","",1,"mr-2","flex-none",2,"width","55px"],["formControlName","schoolLevel",1,"form-select","form-select-sm"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["for","",1,"ml-2","mr-2","flex-none",2,"width","55px"],["formControlName","schoolSubject",1,"form-select","form-select-sm"],[3,"value","selected"],["azt-track-service","mix-bank-template-8PSLx-wsAL",1,"dropdown-item",3,"click"],[3,"ngStyle","ngClass"],["mat-icon-button","","disabled",""],[1,"title-box"],[4,"ngIf"],["azt-track-service","mix-bank-template-GXuYuFWfNJ",1,"text-matrix-title",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","mix-bank-template-WDmYtt3awe",1,"text-matrix-title",3,"click"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)","class","ml-2 flex-none w-4 h-4",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"ml-2","flex-none","w-4","h-4"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"]],template:function(e,n){if(1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleCancel",function(){return n.cancelAction()})("handleConfirm",function(){return n.saveAction()}),t.YNc(1,Vv,1,0,"azt-loading-effect",1),t.YNc(2,m2,182,126,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink)("showConfirmButton",!0),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.mk,y.sg,y.O5,y.PC,je.eB,Wt.Hw,Ft.W0,Ft.D8,xi.fQ,xi.eu,xi.gi,xi.uo,P.KC,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.On,m.sg,m.u,zt.Q,Jt.M,Ai,ai.Z,tt.bT,tt.ds],styles:['.header-mix-bank[_ngcontent-%COMP%]{padding:5px 20px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .bank-his-matrix[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;justify-content:center;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:10px}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .has-err[_ngcontent-%COMP%]{border:1px solid red!important}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;padding:5px 10px;border-radius:5px;margin-right:15px}.header-mix-bank[_ngcontent-%COMP%]   .header-fx-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-save[_ngcontent-%COMP%]{background-color:#2361ae;line-height:30px;margin-top:5px;text-transform:none}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2e8cff}.btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.btn-cancel[_ngcontent-%COMP%]{background-color:#d0d0d0;line-height:30px;margin-top:5px;text-transform:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#a3a3a3}.btn-cancel.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}  .main-mix-blank{width:100%;height:calc(100vh - 115px);display:flex}  .main-mix-blank .col-tree{position:relative;height:100%;overflow:hidden;width:25%;border-right:1px dotted #7f7f7f}  .main-mix-blank .col-tree-main{overflow:hidden;height:calc(100% - 54px)}  .main-mix-blank .col-tree .filler-node{position:sticky;bottom:0;padding:10px 0 10px 10px;border-top:1px dotted #e0e0e0}  .main-mix-blank .col-tree .filler-node input{width:100%;padding:5px 10px}  .main-mix-blank .col-tree mat-tree-node mat-icon{color:#37474f;width:30px}  .main-mix-blank .col-tree mat-tree-node string{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;cursor:pointer}  .main-mix-blank .col-tree mat-tree-node .icon--folder{color:#ff9800}  .main-mix-blank .col-tree mat-tree-node .icon--article{color:#2196f3}  .main-mix-blank .col-tree .tb-active mat-icon{color:#3f51b5}  .main-mix-blank .col-tree .tb-active span{color:#3f51b5}  .main-mix-blank .col-table{width:75%;margin:20px 0;padding:0 20px;overflow:auto}  .main-mix-blank .table-main{position:relative}  .main-mix-blank .table-main td,   .main-mix-blank .table-main th{box-shadow:1px 1px #000 inset;-webkit-user-select:none;user-select:none}  .main-mix-blank .table-main table{position:relative;border-right:1px solid #000;border-bottom:1px solid #000;width:100%}  .main-mix-blank .table-main table thead{position:sticky;top:0;z-index:2}  .main-mix-blank .table-main table tfoot{position:sticky;bottom:0;box-shadow:0 1px #000 inset}  .main-mix-blank .table-main td{padding:10px}  .main-mix-blank .table-main .note-edit-item-tb:before{position:absolute;z-index:3;width:-moz-fit-content;width:fit-content;display:block;background:#fff59d;padding:5px;border-radius:5px;color:#263238;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}  .main-mix-blank .table-main .note-edit-item-tb:focus-visible:before{content:attr(first-trans) ": " attr(num-tn) "; " attr(last-trans) ": " attr(num-tl) "";white-space:pre-wrap}  .main-mix-blank .table-main .warning-item:after,   .main-mix-blank .table-main .common-warning-item:after{content:"\\e000";position:absolute;font-family:Material Icons;color:#ff9800;font-size:12px;top:0;right:3px;opacity:.5}  .main-mix-blank .table-main .warning-item:hover:after,   .main-mix-blank .table-main .common-warning-item:after{cursor:pointer}  .main-mix-blank .table-main .common-warning-item:after{color:red;font-size:15px;top:2px}  .main-mix-blank .table-main .common-note-item:hover:before{content:attr(common-note-trans);position:absolute;background:#fff59d;z-index:3;color:#000;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));padding:5px;border-radius:5px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;display:block}  .main-mix-blank .table-main .wn-empty:hover:before{content:attr(empty-question-trans);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tn:hover:before{content:attr(over-question-trans-tn);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tl:hover:before{content:attr(over-question-trans-tl);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .edit-item-tb{text-align:center;position:relative}  .main-mix-blank .table-main .edit-item-tb:focus-visible{outline:2px solid #00279d;background-color:#fff;color:#000}  .main-mix-blank .table-main .header-tb{background-color:#c8e6c9;text-align:center;font-weight:600}  .main-mix-blank .table-main .header-tb td:hover{background-color:#c8e6c9}  .main-mix-blank .table-main .dis-item-tb{background-color:#cfd8dc;color:#2a3545}  .main-mix-blank .table-main .dis-item-tb td:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .dis-item-tb:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .text-center{text-align:center}  .main-mix-blank .table-main .no-background{background:#fff!important}  .main-mix-blank .table-main .no-background:hover{background:#fff!important}  .main-mix-blank .table-main table .select{background:#c7e5ff!important}  .main-mix-blank .table-main .menu-excel{display:none;width:-moz-fit-content;width:fit-content;background:#fff;border:1px solid #3f51b5;position:absolute;box-shadow:#00000059 0 5px 15px}  .main-mix-blank .table-main .menu-excel li{padding:10px;list-style:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer}  .main-mix-blank .table-main .menu-excel li:hover{background:rgba(200,230,201,.231372549)}  .main-mix-blank .table-main .menu-excel li svg{margin-right:10px}  .main-mix-blank .table-main .border-err{border:1px solid #f44336!important;outline:1px solid #f44336!important}  .main-mix-blank .table-main .tb-matrix-editor-trash-node{cursor:pointer;width:20px}  .main-mix-blank .table-main .tb-matrix-editor-trash-node:hover{color:#f44336}  .main-mix-blank .table-main thead td{font-weight:400}.header-mix-bank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{text-transform:none}.ins-info[_ngcontent-%COMP%]{padding-top:15px;font-style:italic}@media (max-width: 768px){.bank-name-block[_ngcontent-%COMP%], .name-block[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-bottom:5px}.main-mix-blank[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%!important}.col-tree[_ngcontent-%COMP%]{width:100%!important;height:50vh!important;padding:10px 10px 0;--tw-border-opacity: 1;border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity))}.col-tree[_ngcontent-%COMP%]   .filler-node[_ngcontent-%COMP%]{padding:5px!important}.col-table[_ngcontent-%COMP%]{width:calc(100vw - 20px)!important;padding-bottom:30px}}.text-matrix-title[_ngcontent-%COMP%]{cursor:pointer;text-align:justify}.d-none[_ngcontent-%COMP%]{display:none!important}']}),o})();function h2(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function g2(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"preview-offline-exam",6),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);let n;t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_dap_an_de_thi_offline")," "),t.xp6(3),t.Q6J("offlineExportObjs",e.offlineExportObjs)("type","normal")("hashId",null!==(n=e.offlineExportObjs[0].offlineMixquestionHashId)&&void 0!==n?n:1)}}function f2(o,s){1&o&&(t.TgZ(0,"div",7)(1,"div",8),t.O4$(),t.TgZ(2,"svg",9),t._UZ(3,"path",10)(4,"path",11)(5,"path",12)(6,"path",13)(7,"path",14)(8,"path",15),t.qZA()(),t.kcU(),t.TgZ(9,"div",16),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()),2&o&&(t.xp6(10),t.hij(" ",t.lcZ(11,1,"lang_auto_khong_co_du_lieu_dap_an_de_thi")," "))}function x2(o,s){if(1&o&&(t.TgZ(0,"div",2),t.YNc(1,g2,6,6,"ng-container",0),t.YNc(2,f2,12,3,"ng-template",null,3,t.W1O),t.qZA()),2&o){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.offlineExportObjs.length)("ngIfElse",e)}}let v2=(()=>{class o extends R.Q{getData(){var e;this.initStatusObj();let n=null!==(e=this.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultForOfflineExamGet(n).subscribe(i=>{var a,r,l;1==i.success?(this.offlineExportObjs=null!==(r=null===(a=i.data)||void 0===a?void 0:a.objs)&&void 0!==r?r:[],this.successStatusObj()):this.errorStatusObj(null!==(l=i.message)&&void 0!==l?l:"",!0)}))}changeViewHashId(e){this.indexHashId=e}replace3DigitExamCode(e){for(var n=e.toString();n.length<3;)n="0"+n;return n}ngOnInit(){this.getData(),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.activeRoute=n,this.offlineExamExportService=i,this.offlineExportObjs=[],this.indexHashId=0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(xt.qr))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-offline-answer-list"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-8","mx-auto",2,"max-width","1200px"],["noDataAnswer",""],[1,"font-medium","text-center"],[1,"mt-4"],[3,"offlineExportObjs","type","hashId"],[1,"empty-block","mt-10"],[1,"icon-empty","flex"],["width","87","height","102","viewBox","0 0 87 102","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M66.6719 13.9999L75.9738 81.8427L76.8095 88.649C77.0787 90.8417 75.5194 92.8374 73.3268 93.1066L14.7665 100.297C12.5739 100.566 10.5781 99.0069 10.3089 96.8142L1.29312 23.3867C1.1585 22.2904 1.93813 21.2925 3.03447 21.1579C3.0414 21.157 3.04832 21.1562 3.05526 21.1554L7.91363 20.6104M11.8422 20.1698L16.4292 19.6552Z","fill","white"],["d","M67.9103 13.8302C67.8165 13.1462 67.186 12.6678 66.5021 12.7615C65.8181 12.8553 65.3397 13.4858 65.4335 14.1697L67.9103 13.8302ZM75.9738 81.8427L77.2144 81.6903C77.2137 81.6845 77.213 81.6787 77.2122 81.6729L75.9738 81.8427ZM76.8095 88.649L78.0502 88.4967L76.8095 88.649ZM73.3268 93.1066L73.4791 94.3473L73.3268 93.1066ZM14.7665 100.297L14.9189 101.538L14.7665 100.297ZM10.3089 96.8142L11.5496 96.6619L10.3089 96.8142ZM3.05526 21.1554L3.1946 22.3976L3.05526 21.1554ZM8.05297 21.8527C8.73902 21.7757 9.23279 21.1572 9.15584 20.4711C9.07888 19.7851 8.46034 19.2913 7.77428 19.3682L8.05297 21.8527ZM11.7028 18.9276C11.0168 19.0045 10.523 19.6231 10.5999 20.3091C10.6769 20.9952 11.2954 21.4889 11.9815 21.412L11.7028 18.9276ZM16.5685 20.8974C17.2546 20.8205 17.7484 20.2019 17.6714 19.5159C17.5945 18.8298 16.9759 18.3361 16.2899 18.413L16.5685 20.8974ZM65.4335 14.1697L74.7354 82.0125L77.2122 81.6729L67.9103 13.8302L65.4335 14.1697ZM74.7331 81.995L75.5688 88.8013L78.0502 88.4967L77.2144 81.6903L74.7331 81.995ZM75.5688 88.8013C75.7539 90.3088 74.6819 91.6809 73.1744 91.866L73.4791 94.3473C76.357 93.994 78.4035 91.3745 78.0502 88.4967L75.5688 88.8013ZM73.1744 91.866L14.6142 99.0563L14.9189 101.538L73.4791 94.3473L73.1744 91.866ZM14.6142 99.0563C13.1067 99.2414 11.7347 98.1694 11.5496 96.6619L9.0682 96.9666C9.42156 99.8445 12.041 101.891 14.9189 101.538L14.6142 99.0563ZM11.5496 96.6619L2.5338 23.2344L0.0524334 23.539L9.0682 96.9666L11.5496 96.6619ZM2.5338 23.2344C2.48332 22.8232 2.77568 22.449 3.18681 22.3986L2.88213 19.9172C1.10059 20.1359 -0.166313 21.7575 0.0524334 23.539L2.5338 23.2344ZM3.18681 22.3986C3.1894 22.3982 3.192 22.3979 3.1946 22.3976L2.91592 19.9132C2.90465 19.9145 2.89339 19.9158 2.88213 19.9172L3.18681 22.3986ZM3.1946 22.3976L8.05297 21.8527L7.77428 19.3682L2.91592 19.9132L3.1946 22.3976ZM11.9815 21.412L16.5685 20.8974L16.2899 18.413L11.7028 18.9276L11.9815 21.412Z","fill","#1F64E7"],["fill-rule","evenodd","clip-rule","evenodd","d","M64.14 18.2692L72.5596 79.7529L73.3169 85.9212C73.5609 87.9083 72.1669 89.7146 70.2033 89.9557L17.7613 96.3948C15.7978 96.6359 14.0082 95.2204 13.7642 93.2333L5.61416 26.8568C5.47955 25.7605 6.25918 24.7626 7.35551 24.628L13.8431 23.8314","fill","#E8F0FE"],["d","M23.6719 1.25H69.2286C69.9577 1.25 70.6569 1.5395 71.1726 2.05485L84.6158 15.4898C85.1319 16.0056 85.4219 16.7053 85.4219 17.4349V80C85.4219 81.5188 84.1907 82.75 82.6719 82.75H23.6719C22.1531 82.75 20.9219 81.5188 20.9219 80V4C20.9219 2.48122 22.1531 1.25 23.6719 1.25Z","fill","white","stroke","#1F64E7","stroke-width","2.5"],["d","M69.6719 2.40283V14C69.6719 15.6569 71.015 17 72.6719 17H80.6055","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M31 17H57M31 29H74M31 42H74M31 55H74M31 68H57","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-center","font-medium","mt-4"]],template:function(e,n){if(1&e&&(t.YNc(0,h2,1,0,"azt-loading-effect",0),t.YNc(1,x2,4,2,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q,Yo,tt.bT],encapsulation:2}),o})();var da=T(10731),b2=T(95524),w2=T(74470);const T2=function(o){return{"box-select":o}},C2=function(o){return{active:o}};function k2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"img",3),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.ChooseTemplate(a.id?a.id:0))}),t.ALo(2,"mycdn"),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw();t.Q6J("ngClass",t.VKq(5,T2,n.template_selected_id===e.id)),t.xp6(1),t.s9C("src",t.lcZ(2,3,e.thumb),t.LSH),t.Q6J("ngClass",t.VKq(7,C2,n.template_selected_id===e.id))}}let O2=(()=>{class o extends R.Q{constructor(){super(...arguments),this.templates=[],this.template_selected_id=0,this.change_template=new t.vpe}ChooseTemplate(e){e!==this.template_selected_id&&this.change_template.emit(e)}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-choose-question-form"]],inputs:{templates:"templates",template_selected_id:"template_selected_id"},outputs:{change_template:"change_template"},features:[t.qOj],decls:4,vars:4,consts:[[1,"box-title","bg-slate-900","dark:bg-darkmode-400"],["class","box-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"box-item",3,"ngClass"],["azt-track-service","choose-question-form-Irw33xRlJC","alt","",1,"noChooseTemplate",3,"ngClass","src","click"]],template:function(e,n){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,k2,3,9,"div",1)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,2,"lang_auto_chon_mau_hien_thi_cau_hoi_upper")),t.xp6(2),t.Q6J("ngForOf",n.templates))},dependencies:[y.mk,y.sg,tt.bT,tt.GT],styles:['.box-title[_ngcontent-%COMP%]{text-align:center;font-size:large;padding:10px;border-radius:5px 5px 0 0;background:rgb(var(--color-primary));color:#fff;font-weight:500}.box-item[_ngcontent-%COMP%]{cursor:pointer;margin:10px;position:relative}.box-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.box-select[_ngcontent-%COMP%]:before{content:"";background:rgb(var(--color-primary));width:15px;height:15px;position:absolute;border-radius:50%;top:5px;left:5px}.active[_ngcontent-%COMP%]{border:2px solid rgb(var(--color-primary));box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}']}),o})();var y2=T(24698),A2=T(12623);const S2=["left_element_box"],Z2=["right_element_box"];function E2(o,s){1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._UZ(1,"span",24),t._uU(2,"\xa0"),t.qZA())}function I2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",31),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.redirectShowDetail(a))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function M2(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"div",25)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,27)(10,"div",28)(11,"ul",29),t.YNc(12,I2,5,6,"li",30),t.qZA()()()()),2&o){const e=t.MAs(9),n=t.oxw(3);t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",(null==n.examObj?null:n.examObj.powerpointLinks)&&(null==n.examObj||null==n.examObj.powerpointLinks?null:n.examObj.powerpointLinks.length)," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",null==n.examObj?null:n.examObj.powerpointLinks)}}function P2(o,s){1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._UZ(1,"span",24),t._uU(2,"\xa0"),t.qZA())}function L2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(5);return t.KtG(r.redirectShowDetail(a))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function j2(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"div",41)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,42)(10,"div",28)(11,"ul",29),t.YNc(12,L2,5,6,"li",30),t.qZA()()()()),2&o){const e=t.MAs(9),n=t.oxw().$implicit;t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",null==n.powerpointLinks?null:n.powerpointLinks.length," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",n.powerpointLinks)}}function N2(o,s){if(1&o&&t._UZ(0,"azt-template-one",44),2&o){const e=t.oxw(),i=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",i)("isAnswer",!0)}}function q2(o,s){if(1&o&&t._UZ(0,"azt-template-two",44),2&o){const e=t.oxw(),i=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",i)("isAnswer",!0)}}function Q2(o,s){if(1&o&&t._UZ(0,"azt-template-three",44),2&o){const e=t.oxw(),i=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",i)("isAnswer",!0)}}function D2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"button",36),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw(3);return t.KtG(r.generateLinkAction(a))}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,P2,3,0,"span",18),t.qZA()(),t.YNc(13,j2,13,12,"div",37),t.qZA(),t.kcU(),t.TgZ(14,"div",38)(15,"container-element",39),t.YNc(16,N2,1,3,"azt-template-one",40),t.YNc(17,q2,1,3,"azt-template-two",40),t.YNc(18,Q2,1,3,"azt-template-three",40),t.qZA()()()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);t.xp6(4),t.AsE("",t.lcZ(5,9,"lang_testbank_powerpoint_question")," ",n+1,""),t.xp6(6),t.hij(" ",t.lcZ(11,11,"lang_testbank_powerpoint_copy_link_question")," "),t.xp6(2),t.Q6J("ngIf",e.isLoading&&!0===e.isLoading),t.xp6(1),t.Q6J("ngIf",0!=(null==e.powerpointLinks?null:e.powerpointLinks.length)),t.xp6(2),t.Q6J("ngSwitch",null==i.templateObj?null:i.templateObj.id),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3)}}function U2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9,10)(2,"div",11)(3,"div",12)(4,"div",13),t._uU(5),t.qZA(),t.TgZ(6,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.generateLinkAction())}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,E2,3,0,"span",18),t.qZA()(),t.YNc(13,M2,13,12,"div",19),t.qZA(),t.kcU(),t.TgZ(14,"div")(15,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.redirectToYTB())}),t._UZ(16,"img",21),t.ALo(17,"convertCdnLinkOfGitHub"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"div",22),t.YNc(21,D2,19,13,"div",23),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(5),t.hij(" ",t.lcZ(11,7,"lang_testbank_powerpoint_copy_link_exam")," "),t.xp6(2),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.isLoading)&&!0===(null==e.examObj?null:e.examObj.isLoading)),t.xp6(1),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.powerpointLinks)&&0!=(null==e.examObj||null==e.examObj.powerpointLinks?null:e.examObj.powerpointLinks.length)),t.xp6(3),t.Q6J("src",t.lcZ(17,9,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(19,11,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(3),t.Q6J("ngForOf",e.questionObjs)}}function F2(o,s){if(1&o&&(t.TgZ(0,"div",45)(1,"div",11)(2,"div",12)(3,"div",13),t._uU(4),t.qZA()(),t.TgZ(5,"div",46)(6,"div",47),t._UZ(7,"img",48),t.ALo(8,"convertCdnLinkOfGitHub"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",22)(12,"div",49),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(4),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(3),t.Q6J("src",t.lcZ(8,4,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(10,6,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(4),t.Oqu(t.lcZ(14,8,"lang_testbank_powerpoint_note_toturial"))}}function R2(o,s){1&o&&(t.TgZ(0,"div",45)(1,"div",22)(2,"div",50)(3,"span"),t._UZ(4,"span",24),t._uU(5,"\xa0"),t.qZA(),t.TgZ(6,"span",51),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_testbank_powerpoint_data_sample"),""))}function z2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4,5)(3,"app-choose-question-form",6),t.NdJ("change_template",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.changeTemplate(i))}),t.qZA()(),t.YNc(4,U2,22,13,"div",7),t.YNc(5,F2,15,10,"div",8),t.YNc(6,R2,9,3,"div",8),t.qZA()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("templates",e.templatesObj),t.xp6(1),t.Q6J("ngIf",e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading)}}function J2(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.isShowVideo=!1)}),t.TgZ(1,"div",53)(2,"div",54)(3,"div",55),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",56)(7,"mat-icon",57),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",58),t._UZ(10,"iframe",59),t.qZA()()()}2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"lang_testbank_powerpoint_video_tutorial")))}let B2=(()=>{class o extends R.Q{generateLinkAction(e){var n,i,a;void 0!==e?null===(n=this.questionObjs)||void 0===n||n.forEach(r=>{var l;(null===(l=this.questionObjs)||void 0===l?void 0:l[e].id)===r.id&&(r.isLoading=!0)}):this.examObj=Object.assign(Object.assign({},this.examObj),{isLoading:!0}),this.powerPointLinkService.apiPowerPointLinkGenarateLinkObjPost({examId:void 0!==e?0:this.exam_id,questionId:void 0!==e?null===(i=this.questionObjs)||void 0===i?void 0:i[e].id:0,templateId:null===(a=this.templateObj)||void 0===a?void 0:a.id}).subscribe(r=>{var l,c,_,d,p,h,f,w,k;if(1==r.success){this.showSuccessSnack("lang_auto_copy_link_thanh_cong");const S=document.createElement("textarea");S.value=`${Te.N.base_embed_link}/embed_ppt/?link_id=${null===(c=null===(l=r.data)||void 0===l?void 0:l.obj)||void 0===c?void 0:c.id}&hash_class=${null===(d=null===(_=r.data)||void 0===_?void 0:_.obj)||void 0===d?void 0:d.hashCode}`,S.value=S.value.replace(/(^\w+:|^)\/\//,""),S.setAttribute("readonly",""),S.style.position="absolute",S.style.left="-9999px",document.body.appendChild(S),S.select(),document.execCommand("copy"),document.body.removeChild(S),void 0!==e?(this.mergeLinks(null===(p=this.questionObjs)||void 0===p?void 0:p[e].powerpointLinks,null===(h=r.data)||void 0===h?void 0:h.obj),null===(f=this.questionObjs)||void 0===f||f.forEach(D=>{var Q;(null===(Q=this.questionObjs)||void 0===Q?void 0:Q[e].id)===D.id&&(D.isLoading=!1)})):(this.mergeLinks(null===(w=this.examObj)||void 0===w?void 0:w.powerpointLinks,null===(k=r.data)||void 0===k?void 0:k.obj),this.examObj=Object.assign(Object.assign({},this.examObj),{isLoading:!1}))}else this.commonService.snackError("lang_auto_copy_link_that_bai_he_thong_khong_the_tao_link_cho_noi_dung_nay")})}mergeLinks(e,n){var i;for(let a=0;a<(null!==(i=e?.length)&&void 0!==i?i:0);a++)if(e?.[a].id===n?.id)return;e?.push(n??{})}redirectShowDetail(e){this.commonService.myNavigation(`/powerpoint/embed/${e.id}/${e.hashCode}`)}changeTemplate(e){this.getDataPowerPoint(e)}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}getDataPowerPoint(e){this.powerPointLinkService.apiPowerPointLinkGetObjGet(this.exam_id,e).subscribe(n=>{var i,a,r,l,c,_,d,p;if(1==n.success){if(null!=n.data){this.templatesObj=null===(i=n.data)||void 0===i?void 0:i.templatesObj,this.templateObj=null===(a=n.data)||void 0===a?void 0:a.templateObj,this.examObj=null===(r=n.data)||void 0===r?void 0:r.examObj;let h=this.commonService.castJsonToClassObjs(da.x,JSON.stringify(null===(l=n.data)||void 0===l?void 0:l.questionObjs));this.questionObjs=null!==(c=this.homeworkExamService.changeDataQuestions(h??[]))&&void 0!==c?c:[]}else this.isViewQuestion=!0;this.isSupport=this.homeworkExamService.isLstQuestionTrueFalse(this.questionObjs),this.powerpointExamService.convert(this.questionObjs,null!==(d=null===(_=n.data)||void 0===_?void 0:_.examObj)&&void 0!==d?d:{}),this.isLoading=!0}else this.isViewQuestion=!0,this.showErrorSnack(null!==(p=n.message)&&void 0!==p?p:""),this.isLoading=!0})}addEventElement(){document.addEventListener("scroll",()=>{this.left_element_box&&this.right_element_box&&(window.innerWidth>=1e3?(this.left_element_box.nativeElement.getBoundingClientRect().top<=-10&&(this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.left_element_box.nativeElement.classList.add("content__fixed"),this.right_element_box.nativeElement.classList.add("content__rfixed")),this.right_element_box.nativeElement.getBoundingClientRect().top>=0&&(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.add("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed"))):(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed")))})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_question_powerpoint_title",description:"lang_cms_question_powerpoint_description",image:"lang_cms_test_image"}),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n;this.exam_id=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")),this.cat_id=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"/admin/testbank/document-management/0/"+(null!==(n=this.cat_id)&&void 0!==n?n:0)+"/1"}),this.getDataPowerPoint(),this.addEventElement(),super.ngOnInit()}constructor(e,n,i,a,r){super(i),this.activeRoute=e,this.powerPointLinkService=n,this.commonService=i,this.homeworkExamService=a,this.powerpointExamService=r,this.backToLink="",this.exam_id=0,this.cat_id=0,this.questionObjs=[],this.isLoading=!1,this.isSupport=!1,this.isViewQuestion=!1,this.widthView=0,this.isShowVideo=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.gz),t.Y36(xt.WZ),t.Y36(_t.v),t.Y36(Ve.j),t.Y36(b2.J))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-powerpoint-link"]],viewQuery:function(e,n){if(1&e&&(t.Gf(S2,5),t.Gf(Z2,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.left_element_box=i.first),t.iGM(i=t.CRH())&&(n.right_element_box=i.first)}},features:[t.qOj],decls:4,vars:6,consts:[[3,"headerBackTolink","headerTitle"],["class","azt-ppt-content",4,"ngIf"],["azt-track-service","powerpoint-bN85gjV08DU","class","popup__video",3,"click",4,"ngIf"],[1,"azt-ppt-content"],[1,"left","box"],["left_element_box",""],[3,"templates","change_template"],["class","right box",4,"ngIf"],["class","right",4,"ngIf"],[1,"right","box"],["right_element_box",""],[1,"right__header"],[1,"right__header_lview"],[1,"right__header__exam_title"],["azt-track-service","powerpoint-N-aYwfOOF_",1,"btn","btn-outline-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[4,"ngIf"],["class","right__header_cview ml-2",4,"ngIf"],["azt-track-service","powerpoint-Zd6K5twMof",1,"btn-text-primary","ml-2",3,"click"],["alt","",1,"mr-2",3,"src"],[1,"right__content"],["class","right__content__question_item",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"right__header_cview","ml-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["detailLinksExam","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["azt-track-service","powerpoint-32OdBjI0q1",1,"dropdown-item",3,"click"],[1,"right__content__question_item"],[1,"right__content__question_item__header"],[1,"right__content__question_item__header_lview"],[1,"right__content__question_item__title"],["azt-track-service","powerpoint-UsKaxl1tor",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","right__content__question_item__header_rview",4,"ngIf"],[1,"right__content__question_item__content"],[3,"ngSwitch"],[3,"questionObj","indexQuestion","isAnswer",4,"ngSwitchCase"],[1,"right__content__question_item__header_rview"],["detailLinks","matMenu"],["azt-track-service","powerpoint-MYsWxijcXF",1,"dropdown-item",3,"click"],[3,"questionObj","indexQuestion","isAnswer"],[1,"right"],[1,"right__header_rview"],[1,"right__header__video"],["alt","",3,"src"],[1,"right__content_noti"],[1,"text-center","m-5"],[1,"right__content_loading"],["azt-track-service","powerpoint-bN85gjV08DU",1,"popup__video",3,"click"],[1,"popup__video_box"],[1,"popup__video__header"],[1,"popup__video__header--title"],[1,"popup__video__header--close"],[1,"d-flex"],[1,"popup__video__video"],["width","560","height","315","src","https://www.youtube.com/embed/FpcOtHNGMCQ","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(e,n){1&e&&(t.TgZ(0,"editor-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,z2,7,4,"div",1),t.YNc(3,J2,11,3,"div",2),t.qZA()),2&e&&(t.Q6J("headerBackTolink",n.backToLink)("headerTitle",t.lcZ(1,4,"lang_testbank_powerpoint_header_title")),t.xp6(2),t.Q6J("ngIf",0==n.isViewQuestion),t.xp6(1),t.Q6J("ngIf",n.isShowVideo))},dependencies:[y.sg,y.O5,y.RF,y.n9,Wt.Hw,Ft.W0,Ft.D8,w2.m,O2,y2.j,A2._,ai.Z,tt.bT,tt.Jc,tt.tO],styles:[".azt-ppt-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100vh;justify-content:space-between;padding-top:10px;padding-bottom:40px}.azt-ppt-content__fixed[_ngcontent-%COMP%]{position:fixed;top:0;animation:_ngcontent-%COMP%_dropdownboxelement .5s}.azt-ppt-content__downtoup[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_downtoupboxelement .5s}.azt-ppt-content__rfixed[_ngcontent-%COMP%]{margin-left:380px!important}.azt-ppt-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:350px;height:100%;margin:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin:10px;width:calc(100% - 340px);border-width:1px;border-style:solid;border-radius:5px;padding:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content[_ngcontent-%COMP%]{padding-bottom:80px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_lview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__exam_title[_ngcontent-%COMP%]{max-width:350px;font-weight:700;margin:0 10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]{margin:20px 10px;display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_lview[_ngcontent-%COMP%], .azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_rview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;font-size:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_noti[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin:50px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_loading[_ngcontent-%COMP%]{font-size:20px}.azt-ppt-content__btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-transform:uppercase;padding:6px 15px;border-radius:5px;cursor:pointer}.popup__video[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center}.popup__video__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:10px 10px 0 0}.popup__video__header--title[_ngcontent-%COMP%]{font-size:18px}.popup__video__header--close[_ngcontent-%COMP%]{cursor:pointer}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}@keyframes _ngcontent-%COMP%_dropdownboxelement{0%{top:-10px}50%{top:40px}60%{top:10px}to{top:0}}@keyframes _ngcontent-%COMP%_downtoupboxelement{0%{padding-top:40px}to{padding-top:auto}}@media screen and (max-width: 925px){.content[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:auto!important}.right__header[_ngcontent-%COMP%]{row-gap:10px}.right__header__exam_title[_ngcontent-%COMP%]{max-width:100%!important}.popup__video[_ngcontent-%COMP%]{align-items:flex-start}.popup__video_box[_ngcontent-%COMP%]{width:95%}.popup__video__header[_ngcontent-%COMP%]{margin-top:50px}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 1199px) and (min-width: 926px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 890px) and (min-width: 551px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 550px){.right__content__question_item__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px}.right__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px;align-items:center!important;justify-content:space-between!important;align-content:center!important}.right__header__exam_title[_ngcontent-%COMP%]{max-width:50%!important}}"]}),o})();var H2=function(){function o(){this.data=[],this.susses=!0,this.msg=""}return o.prototype.setError=function(s){return this.data=[],this.susses=!1,this.msg=s,this},o}();function vi(o){var s=new H2;if(0===o.length)return s.setError("Invalid input format");var e=o.replace(/\s/g,"").split(",");return function Y2(o){return/\d\s+\d/.test(o)}(o.replace(/\s+/g," "))?s.setError("Invalid input format"):(e.forEach(function(n){if(n.includes("-")){var i=n.split("-");if(2!==i.length||!Xi(i[0])||!Xi(i[1]))return s.setError("Invalid input format");for(var a=Number(i[0]);a<=Number(i[1]);a++)s.data.includes(a)||s.data.push(a)}else{if(!Xi(n))return s.setError("Invalid input format");s.data.includes(Number(n))||s.data.push(Number(n))}}),s)}function Xi(o){return/^\d+$/.test(o)&&Number(o)>=0}class En{static objectLength(s){return Object.keys(s).length}static removeKeyInObject(s,e){for(var n in s)e.hasOwnProperty(n)&&delete s[n];return s}}var W2=T(92384),V2=T(87878);function X2(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function tb(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_luong_de_dao")," "))}function eb(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_luong_de_phai_lon_hon_0")," "))}function nb(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_luong_de_phai_nho_hon"),"\xa0",e.limitMaxMixQuestionHashId," ")}}function ib(o,s){if(1&o&&(t.TgZ(0,"div",38),t.YNc(1,tb,3,3,"span",24),t.YNc(2,eb,3,3,"span",24),t.YNc(3,nb,3,4,"span",24),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.max)}}function ob(o,s){1&o&&(t.TgZ(0,"div",38)(1,"small",39),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_offline_test_cannot_be_reversed"),". "))}function ab(o,s){1&o&&(t.TgZ(0,"div",38)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_de_thi_qua_120_cau_vui_long_tao_de_con_duoi_120_cau_de_in_de"),". "))}function sb(o,s){if(1&o&&(t.TgZ(0,"div",38)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_offline_test_not_print_exam_have_answer")+" "+e.dataConfigDocument.allowMaxAnswerChoices,". ")}}function rb(o,s){if(1&o&&(t.TgZ(0,"p",43),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_will_create"),"\xa0",e.pagePrintExamCodeWithString," ")}}function lb(o,s){if(1&o&&(t.TgZ(0,"span")(1,"span",44),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",44),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()()),2&o){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid")," "),t.xp6(3),t.HOy(" ",t.lcZ(6,7,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_real"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.countReal," \xa0|\xa0 ",t.lcZ(7,9,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_you"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.countOfCode," ")}}function cb(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_format_invalid")," "))}function _b(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_duplicated_invalid"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds?null:e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds.join(", ")," ")}}function db(o,s){if(1&o&&(t.TgZ(0,"div",38),t.YNc(1,lb,8,11,"span",24),t.YNc(2,cb,3,3,"span",24),t.YNc(3,_b,3,4,"span",24),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.countOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.formatOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomOfflineMixQuestionHashIdInvalid)}}function ub(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"input",40),t.ALo(2,"mytranslate"),t.TgZ(3,"div",41),t.YNc(4,rb,3,4,"p",42),t.qZA(),t.YNc(5,db,4,3,"div",14),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.s9C("placeholder",t.lcZ(2,3,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_placeholder")),t.xp6(3),t.Q6J("ngIf",!e.form.controls.numberExam.errors&&!e.form.controls.inputOfflineMixQuestionHashId.errors&&""!=e.pagePrintExamCodeWithString),t.xp6(1),t.Q6J("ngIf",!e.form.controls.numberExam.errors&&e.form.controls.inputOfflineMixQuestionHashId.errors)}}function mb(o,s){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",45)(4,"div",46)(5,"label",47),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",48),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",49)(12,"div",32),t._UZ(13,"input",50),t.qZA()()()()()()),2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function pb(o,s){1&o&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",45)(4,"div",46)(5,"label",51),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",48),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",49)(12,"div",32),t._UZ(13,"input",52),t.qZA()()()()()()),2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_config_create_exam_multiple_component")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_config_create_exam_multiple_component_description")," "))}function hb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",16)(4,"div",46)(5,"label",53),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",54),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",49)(12,"div",32)(13,"input",55),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeCreateSubTestConfig(i))}),t.qZA()()()()()()()}2&o&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "))}const gb=function(o){return{hidden:o}};function fb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5)(5,"form",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"label",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t._UZ(14,"input",13),t.ALo(15,"mytranslate"),t.YNc(16,ib,4,3,"div",14),t.YNc(17,ob,4,3,"div",14),t.YNc(18,ab,4,3,"div",14),t.YNc(19,sb,4,3,"div",14),t.qZA(),t.TgZ(20,"div",15)(21,"div",16)(22,"div",17)(23,"label",18),t._uU(24),t.ALo(25,"mytranslate"),t.TgZ(26,"span",19),t.ALo(27,"mytranslate"),t._UZ(28,"lucide-icon",20),t.qZA()()(),t.TgZ(29,"div",21)(30,"div",22),t._UZ(31,"input",23),t.qZA()()(),t.YNc(32,ub,6,5,"ng-container",24),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"app-testbank-choose-answersheet",25),t.qZA()(),t.TgZ(35,"div",10),t._UZ(36,"preview-answersheet-dialog",26),t.qZA()(),t.YNc(37,mb,14,6,"div",27),t.YNc(38,pb,14,6,"div",27),t.YNc(39,hb,14,6,"div",27),t.TgZ(40,"div",28)(41,"test-config-online-mix-question",29),t.NdJ("isGroupMixQuestionChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.isGroupMixQuestion=i)})("checkValidateCountQuestionChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.checkValidateCountQuestion=i)})("hasChangeValueLimitQuestion",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.changeLimitQuestionNonGroup(i))})("totalTakeQuestionChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.changeLimitQuestionInGroup(i))}),t.qZA()(),t.TgZ(42,"div",9)(43,"div",10)(44,"div",30)(45,"div",16)(46,"div",17)(47,"label",31),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()(),t.TgZ(50,"div",21)(51,"div",32),t._UZ(52,"input",33),t.qZA()()()(),t.TgZ(53,"div",34),t._UZ(54,"add-info-print",35),t.qZA()()()()(),t.TgZ(55,"div",36)(56,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.savePrintConfigObj())}),t._uU(57),t.ALo(58,"mytranslate"),t.qZA()()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,29,"lang_auto_in_de_co_phieu_tra_loi_trac_nghiem_rieng")," "),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(7),t.hij(" ",t.lcZ(13,31,"lang_auto_so_luong_de_dao")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(15,33,"lang_auto_nhap_so_luong_de_dao")),t.xp6(2),t.Q6J("ngIf",e.form.controls.numberExam.dirty&&e.form.controls.numberExam.errors),t.xp6(1),t.Q6J("ngIf",0===(null==e.dataConfigDocument?null:e.dataConfigDocument.canMixQuestion)&&e.form.controls.numberExam.value>1),t.xp6(1),t.Q6J("ngIf",1===(null==e.dataConfigDocument?null:e.dataConfigDocument.exceedMaxQuestions)),t.xp6(1),t.Q6J("ngIf",e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4),t.xp6(5),t.hij(" ",t.lcZ(25,35,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(27,37,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_tooltip")),t.xp6(6),t.Q6J("ngIf",e.form.controls.allowCustomInputOfflineMixQuestionHashId.value),t.xp6(2),t.Q6J("form",e.form),t.xp6(2),t.Q6J("answersheetTemplate",e.form.controls.answersheetTemplate.value)("amountAnswersheet",e.form.controls.amountAnswersheet.value),t.xp6(1),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",120==e.examObj.countQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value),t.xp6(1),t.Q6J("hidden",e.form.controls.isRandomQuestion.value||!(1==e.form.controls.isCreateSubTest.value&&1==e.form.controls.mixQuestion.value)),t.xp6(1),t.Q6J("fromPrintOffline",!0)("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos),t.xp6(7),t.hij(" ",t.lcZ(49,39,"lang_core_them_thong_tin")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(43,gb,!e.form.controls.addInfoPrint.value)),t.xp6(1),t.Q6J("form",e.form)("examPrintInfoObj",e.examPrintInfoObj),t.xp6(2),t.Q6J("disabled",e.checkValidateCountQuestion&&1==e.form.controls.isCreateSubTest.value||0==e.form.controls.answersheetTemplate.value&&e.form.controls.amountAnswersheet.errors||1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&e.totalTakeQuestion>120||1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&0==e.totalTakeQuestion||void 0!==e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4||e.form.controls.numberExam.errors||e.form.controls.allowCustomInputOfflineMixQuestionHashId.value&&e.form.controls.inputOfflineMixQuestionHashId.errors),t.xp6(1),t.hij(" ",t.lcZ(58,41,"lang_auto_in_de_and_phieu")," ")}}let xb=(()=>{class o extends R.Q{get pagePrintExamCodeWithString(){const e=this.makeExamCodeWithInput();return e?`(${e.map(n=>this.formatAnswersheetService.formatOfflineExamHashIdToNumber(n,3)).join(", ")})`:""}makeExamCodeWithInput(){var e;if(this.form.controls.inputOfflineMixQuestionHashId.errors)return;const n=vi(null!==(e=this.form.controls.inputOfflineMixQuestionHashId.value)&&void 0!==e?e:"");return n.susses?n.data:void 0}getOfflineMixQuestionHashIdsWillCreated(e,n){e=Number(e),n=Number(n);let i=[];if(e>0&&n>0){let a=this.formatAnswersheetService.getOfflineMixQuestionHashIdsFromStart(e,n);for(let r=0;r<a.length;r++)i.push(this.formatAnswersheetService.formatOfflineExamHashIdToNumber(a[r],3))}return i.length>0?"("+i.join(", ")+")":""}getGroupMixInfosSubmit(e){let n={};return e.forEach(i=>{var a;n.hasOwnProperty(i.groupId)||(n[i.groupId]=null!==(a=i.totalQuestion)&&void 0!==a?a:0)}),JSON.stringify({status:this.isGroupMixQuestion?1:0,objs:n})}startCreateOfflineExamData(){var e;this.isLoadingPrintTest=!0;let n=Number(this.form.controls.numberExam.value),a=this.form.controls.answersheetTemplate?Number(this.form.controls.answersheetTemplate.value):0,r=this.makeExamCodeWithInput(),l=null!==(e=this.form.controls.amountAnswersheet.value)&&void 0!==e?e:void 0;this.subscriptions.add(this.offlineExamService.apiOfflineExamCreateExamObjPost({examHashId:this.examObj.hashId,total:n,examTemplate:0,answersheetTemplate:a,totalQuestionOfAnswerSheet:l,customOfflineMixQuestionHashId:r}).subscribe(c=>{var _,d,p,h;if(1===c.success){if(null!==(_=c.data)&&void 0!==_&&_.obj){let f=c.data.obj,k=`/admin/testbank/print-exam-and-ticket/${null!==(d=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==d?d:"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/download-file-print/${null!==(p=this.examObj.categoryId)&&void 0!==p?p:0}/${f.examHashId}/${f.hashId}`,`?backto=${encodeURIComponent(k)}`)}this.successStatusObj(),this.isLoadingPrintTest=!1}else this.errorStatusObj(null!==(h=c.message)&&void 0!==h?h:"",!0),this.isLoadingPrintTest=!1}))}changeCreateSubTestConfig(e){e.target instanceof HTMLInputElement&&(e.target.checked?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable())}changeLimitQuestionNonGroup(e){this.isGroupMixQuestion||this.disableSubjectMarksConfig(e)}changeLimitQuestionInGroup(e){this.totalTakeQuestion=e,this.isGroupMixQuestion&&this.disableSubjectMarksConfig(e)}disableSubjectMarksConfig(e){this.form.controls.isCreateSubTest.value&&120!=e?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable()}savePrintConfigObj(){var e;this.initStatusObj(),this.form.controls.isRandomQuestion.value&&this.form.controls.isCreateSubTest.setValue(!1);let n=this.commonService.getFormObj(this.form);n.limitMixQuestion=n.limitMixQuestion>0?n.limitMixQuestion:0;let i=n.isCreateSubTest?2:2==(null===(e=this.dataConfigDocument.examObj)||void 0===e?void 0:e.mixQuestion)?1:void 0,a=this.getGroupMixInfosSubmit(n.groupInfos);this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost({mixQuestion:i,limitMixQuestion:n.limitMixQuestion,limitQuestionGroups:a,isRandomQuestion:this.enableRandomQuestion?n.isRandomQuestion?1:0:void 0,subjectMarks:n.subjectMarks?1:0},this.examObj.hashId).subscribe(l=>{var c;1==l.success?(this.startCreateOfflineExamData(),this.addInfoPrint()):this.errorStatusObj(null!==(c=l.message)&&void 0!==c?c:"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(n=>{var i,a;1==n.success?(this.dataConfigDocument=null!==(i=n.data)&&void 0!==i?i:{},this.initData(this.dataConfigDocument),this.successStatusObj()):this.errorStatusObj(null!==(a=n.message)&&void 0!==a?a:"",!0)}))}initData(e){var n,i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N;let q=null!==(n=e?.examObj)&&void 0!==n?n:{},W={},X=this.defaultMaxMixQuestionHashId-(null!==(i=e?.totalUsedMixQuestionHashId)&&void 0!==i?i:0);W=null!==(a=this.castObj(q))&&void 0!==a?a:{},W.limitQuestionGroupsParse=this.commonService.myParseJson(null!==(r=q.limitQuestionGroups)&&void 0!==r?r:""),this.obj=W,this.examObj=null!==(l=e.examObj)&&void 0!==l?l:{},this.examPrintInfoObj=null!==(c=e.examPrintInfoObj)&&void 0!==c?c:{},this.enableRandomQuestion=null!==(_=e.enableRandomQuestion)&&void 0!==_&&_,this.examPrintInfoObj.status&&this.form.controls.addInfoPrint.setValue(!0),this.limitMaxMixQuestionHashId=X>this.defaultMaxCreateMixExamOneTime?this.defaultMaxCreateMixExamOneTime:X,this.form.controls.limitMixQuestion.setValue(this.obj.limitMixQuestion),this.form.controls.isCreateSubTest.setValue(2==this.obj.mixQuestion),this.form.controls.numberExam.addValidators(m.kI.max(this.limitMaxMixQuestionHashId)),this.form.controls.answersheetTemplate.setValue(null!==(h=null===(p=null===(d=e.offlineExamObj)||void 0===d?void 0:d.answersheetTemplate)||void 0===p?void 0:p.toString())&&void 0!==h?h:"0"),this.form.controls.amountAnswersheet.setValue(null!==(w=null===(f=e.offlineExamObj)||void 0===f?void 0:f.totalQuestionOfAnswersheet)&&void 0!==w?w:null!==(k=this.obj.countQuestion)&&void 0!==k?k:1),this.form.addValidators(function G2(){return o=>{var s,e=o.get("inputOfflineMixQuestionHashId");if(e&&""!=e.value.trim()){var n=o.get("numberExam");if(!n||""==n.value.toString().trim())return e?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),{identityRevealed:!0};var i=Number(n.value),a=vi(e.value);if(a.susses&&a.data.length!=i)return e?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:i,countReal:a.data.length}),{identityRevealed:!0}}var r=null!==(s=e?.errors)&&void 0!==s?s:{};return r=En.removeKeyInObject(r,{countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),En.objectLength(r)<=0?e?.setErrors(null):e?.setErrors(r),null}}()),this.form.addValidators(function $2(){return o=>{var s,e=o.get("inputOfflineMixQuestionHashId");if(e&&""!=e.value.trim()){var n=vi(e.value);if(!n.susses)return e?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0};if(0===n.data.length||n.data.filter(a=>a<=0).length>0)return e?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0}}var i=null!==(s=e?.errors)&&void 0!==s?s:{};return i=En.removeKeyInObject(i,{formatOfflineMixQuestionHashIdInvalid:!0}),En.objectLength(i)<=0?e?.setErrors(null):e?.setErrors(i),null}}()),this.form.addValidators(function K2(o,s){return e=>{var n,i=e.get("inputOfflineMixQuestionHashId");if(i&&i.value){var a=vi(i.value),l=a.data.filter(function(p){return-1!=s.indexOf(p)});if(a.data.length>0&&l.length>0){for(var c=[],_=0;_<l.length;_++)c.push(o.formatOfflineExamHashIdToNumber(l[_],3));return i?.setErrors({duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:c}),{identityRevealed:!0}}}var d=null!==(n=i?.errors)&&void 0!==n?n:{};return d=En.removeKeyInObject(d,{duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:[]}),En.objectLength(d)<=0?i?.setErrors(null):i?.setErrors(d),null}}(this.formatAnswersheetService,null!==(S=e.offlineMixQuestionHashIdsUsed)&&void 0!==S?S:[])),this.form.controls.schoolName.setValue(null===(D=e.examPrintInfoObj)||void 0===D?void 0:D.schoolName),this.form.controls.subjectName.setValue(null===(Q=e.examPrintInfoObj)||void 0===Q?void 0:Q.subject),this.form.controls.isRandomQuestion.setValue(1==this.obj.isRandomQuestion),this.form.controls.subjectMarks.setValue(!!this.examObj.subjectMarks),120!=this.examObj.countQuestion&&this.form.controls.subjectMarks.disable(),this.hasGroupQuestion=!!e.hasGroupQuestion,this.minLimitMixQuestion=null!==(N=e.minLimitMixQuestion)&&void 0!==N?N:0,this.examGroupInfos=e.examGroupInfos&&e.examGroupInfos.length>0?e.examGroupInfos:this.examGroupInfos}addInfoPrint(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamPrintInfoObjPost({schoolName:this.form.controls.schoolName.value,subject:this.form.controls.subjectName.value,status:this.form.controls.addInfoPrint.value?1:0},this.examHashId).subscribe(n=>{var i;1===n.success||this.errorStatusObj(null!==(i=n.message)&&void 0!==i?i:"")}))}ngOnInit(){var e,n,i;this.form=this.formBuilder.group({numberExam:new m.p4(1,[m.kI.required,m.kI.min(1)]),isCreateSubTest:new m.p4(!1),mixQuestion:new m.p4("1"),groupInfos:new m.vC([]),limitMixQuestion:new m.p4(""),answersheetTemplate:new m.p4("0",[m.kI.required]),amountAnswersheet:new m.p4(1,[m.kI.required,m.kI.min(1),m.kI.max(120)]),allowCustomInputOfflineMixQuestionHashId:new m.p4(!1,[m.kI.required]),inputOfflineMixQuestionHashId:new m.p4(""),addInfoPrint:new m.p4(!1),schoolName:new m.p4(""),subjectName:new m.p4(""),isRandomQuestion:new m.p4(!1),subjectMarks:new m.p4({value:!1,disabled:!1})}),this.examHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";let a=null!==(n=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==n?n:"",r=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"";this.backToLink=r||`/admin/testbank/action-online-offline/${a??0}/${this.examHashId}`,this.getExamInfoByHashId(this.examHashId),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_){super(e),this.commonService=e,this.formBuilder=n,this.offlineExamService=i,this.documentConfigService=a,this.formatAnswersheetService=r,this.activeRoute=l,this.browserStorageService=c,this.dialog=_,this.form=new m.nJ({}),this.examObj={},this.obj={},this.backToLink="",this.dataConfigDocument={},this.isLoadingPrintTest=!1,this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.totalTakeQuestion=0,this.hasGroupQuestion=!1,this.examGroupInfos=[],this.minLimitMixQuestion=0,this.enableRandomQuestion=!1,this.defaultMaxCreateMixExamOneTime=100,this.defaultMaxMixQuestionHashId=999,this.limitMaxMixQuestionHashId=999,this.examHashId="",this.examPrintInfoObj={}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS),t.Y36(xt.lP),t.Y36(xt.Cq),t.Y36(W2.D),t.Y36(C.gz),t.Y36(Le.z),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-print-exam-and-ticket"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[1,"form-label","font-medium"],["type","text","appOnlyNumber","","formControlName","numberExam",1,"form-control",3,"placeholder"],["class","text-xs text-danger fade mt-2",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-10","lg:col-span-5"],["for","allow-input-start-offline-mix-question-hash-id",1,"form-check-label","ml-0","azt-ml-0","mr-2","flex","items-center","font-medium"],[1,"w-4","h-4","ml-2","inline-block",3,"matTooltip"],["name","info"],[1,"col-span-2","lg:col-span-7","flex"],[1,"form-check","form-switch","mb-3","ml-auto"],["id","allow-input-start-offline-mix-question-hash-id","formControlName","allowCustomInputOfflineMixQuestionHashId","type","checkbox",1,"show-code","form-check-input"],[4,"ngIf"],["formArrayName","answersheetTemplate",3,"form"],[3,"answersheetTemplate","amountAnswersheet"],["class","grid grid-cols-12 gap-5",4,"ngIf"],[1,"mt-3",3,"hidden"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"fromPrintOffline","form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange","hasChangeValueLimitQuestion","totalTakeQuestionChange"],[1,"mt-5"],["for","add-info-print",1,"form-label","font-medium"],[1,"form-check","form-switch","ml-auto"],["id","add-info-print","formControlName","addInfoPrint","type","checkbox",1,"show-code","form-check-input","mr-0","ml-3"],[3,"ngClass"],[3,"form","examPrintInfoObj"],[1,"p-3","text-right"],[1,"btn","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","fade","mt-2"],[1,"text-note","text-danger"],["type","text","formControlName","inputOfflineMixQuestionHashId",1,"form-control",3,"placeholder"],[1,"col-span-12","px-0","mt-2"],["class","text-slate-500 text-xs truncate",4,"ngIf"],[1,"text-slate-500","text-xs","truncate"],[1,"block"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","config-matrix-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],["id","config-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3"],["for","subject-marks-question",1,"form-label","font-medium"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3"],["for","create-sub-exam",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],["id","create-sub-exam","formControlName","isCreateSubTest","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,X2,1,0,"azt-loading-effect",1),t.YNc(2,fb,59,45,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.mk,y.O5,Qt.Kd,m._Y,m.Fj,m.Wl,m.JJ,m.JL,m.sg,m.u,m.CE,zt.Q,We.Y,Jt.M,V2.z,Vt._,b.Nh5,Po,Eo,Io,tt.bT],encapsulation:2}),o})();function vb(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function bb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._UZ(4,"input",28),t.TgZ(5,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&o){const e=s.$implicit,n=t.oxw(3);let i;t.xp6(2),t.hij(" ",null==e.classObj?null:e.classObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",n.copyLinkToClipboard(null!==(i=e.linkDocument)&&void 0!==i?i:"")),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function wb(o,s){if(1&o&&(t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.YNc(3,bb,11,6,"div",24),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.homeworkObj.name," "),t.xp6(1),t.Q6J("ngForOf",e.listLinkDocument)}}function Tb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.TgZ(3,"div",32),t._UZ(4,"input",33),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.examObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard(e.linkDocument)),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function Cb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",35)(1,"p",36),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",37)(8,"code",38)(9,"span"),t._uU(10,"<"),t.TgZ(11,"span"),t._uU(12,"iframe"),t.qZA(),t._uU(13,"\xa0 "),t.TgZ(14,"span"),t._uU(15,"width"),t.qZA(),t._uU(16,"="),t.TgZ(17,"span"),t._uU(18,'"100%"'),t.qZA(),t._uU(19,"\xa0 "),t.TgZ(20,"span"),t._uU(21,"height"),t.qZA(),t._uU(22,"="),t.TgZ(23,"span"),t._uU(24,'"900"'),t.qZA(),t._uU(25,"\xa0 "),t.TgZ(26,"span"),t._uU(27,"src"),t.qZA(),t._uU(28,"="),t.TgZ(29,"span"),t._uU(30),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"span"),t._uU(33,"title"),t.qZA(),t._uU(34,"="),t.TgZ(35,"span"),t._uU(36),t.qZA(),t._uU(37,"\xa0 "),t.TgZ(38,"span"),t._uU(39,"frameborder"),t.qZA(),t._uU(40,"="),t.TgZ(41,"span"),t._uU(42,'"0"'),t.qZA(),t._uU(43,"\xa0 "),t.TgZ(44,"span"),t._uU(45,"allow"),t.qZA(),t._uU(46,"="),t.TgZ(47,"span"),t._uU(48,'"accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture"'),t.qZA(),t._uU(49,"\xa0 "),t.TgZ(50,"span"),t._uU(51,"allowfullscreen"),t.qZA(),t._uU(52,">"),t.qZA(),t._uU(53,"\xa0 "),t.TgZ(54,"span"),t._uU(55,"</"),t.TgZ(56,"span"),t._uU(57,"iframe"),t.qZA(),t._uU(58,">"),t.qZA()()(),t.TgZ(59,"div",39)(60,"button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.showCopySuccess())}),t.O4$(),t.TgZ(61,"svg",41),t._UZ(62,"path",42)(63,"polyline",14),t.qZA(),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,6,"lang_testbank_publish_result_had_website"),"? "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_testbank_publish_result_note_tutorial")," "),t.xp6(25),t.hij('"',e.linkDocument,'"'),t.xp6(6),t.hij('"',e.examObj.name,'"'),t.xp6(24),t.Q6J("cdkCopyToClipboard",e.copyLinkToIframe()),t.xp6(4),t.hij(" ",t.lcZ(65,10,"lang_auto_sao_chep_ma_nhung")," ")}}const kb=function(o){return[o]};function Ob(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"p",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,wb,4,2,"div",7),t.YNc(12,Tb,11,6,"div",7),t.YNc(13,Cb,66,12,"div",8),t.TgZ(14,"div",9)(15,"div",10)(16,"a",11),t.ALo(17,"mylocalize"),t.O4$(),t.TgZ(18,"svg",12),t._UZ(19,"path",13)(20,"polyline",14)(21,"path",15)(22,"path",16)(23,"path",17)(24,"path",18),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(27,"div",19)(28,"a",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.backToDocumentManager())}),t.O4$(),t.TgZ(29,"svg",12),t._UZ(30,"path",21),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.hij(" ",1==e.type?e.homeworkObj.isPublished?t.lcZ(4,8,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(5,10,"lang_auto_da_luu_thanh_cong_chua_xuat_ban"):e.examObj.isPublished?t.lcZ(6,12,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(7,14,"lang_auto_da_luu_thanh_cong_chua_xuat_ban")," \u{1f389} "),t.xp6(6),t.hij(" ",t.lcZ(10,16,"lang_auto_copy_link_ben_duoi_va_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai")," "),t.xp6(2),t.Q6J("ngIf",1==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(3),t.Q6J("routerLink",t.VKq(24,kb,t.lcZ(17,18,e.getRouterLinkByType()))),t.xp6(9),t.hij(" ",t.lcZ(26,20,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(32,22,"lang_auto_ve_trang_quan_ly_file")," ")}}let yb=(()=>{class o extends R.Q{constructor(e,n,i){super(e),this.commonService=e,this.documentConfigService=n,this.activeRoute=i,this.backToLink="",this.linkDocument="",this.listLinkDocument=[],this.linkIframeDocument="",this.homeworkObj={},this.successListHomework=[],this.examObj={},this.type=0}createLinkHomeworkObjs(e,n){var i=[];let a=this.commonService.getCurrentDomain();return e.forEach(r=>{var l,c=n.filter(_=>_.id==r.classroomId);if(c&&c.length>0)i.push({classObj:c[0],homeworkObj:r,linkDocument:`${a}/bai-tap/${r.hashId}`});else{let _=null!==(l=this.commonService.myTranslateInstant("lang_auto_tu_do"))&&void 0!==l?l:"";i.push({classObj:{name:_},homeworkObj:r,linkDocument:`${a}/bai-tap/${r.hashId}`})}}),i}getHomeworkInfoByHashId(e){var n=this.commonService.myParseJson(e);this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(n,n?.[0]).subscribe(i=>{var a,r,l,c,_,d,p,h,f;if(1==i.success){this.homeworkObj=null!==(r=null===(a=i.data)||void 0===a?void 0:a.homeworkObj)&&void 0!==r?r:{},this.successListHomework=null!==(c=null===(l=i.data)||void 0===l?void 0:l.successHomeworkObjs)&&void 0!==c?c:[],this.listLinkDocument=this.createLinkHomeworkObjs(null!==(d=null===(_=i.data)||void 0===_?void 0:_.successHomeworkObjs)&&void 0!==d?d:[],null!==(h=null===(p=i.data)||void 0===p?void 0:p.classroomObjs)&&void 0!==h?h:[]);let w=this.commonService.getCurrentDomain();this.linkDocument=`${w}/bai-tap/${this.homeworkObj.hashId}`,this.successStatusObj()}else this.errorStatusObj(null!==(f=i.message)&&void 0!==f?f:"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(n=>{var i,a,r;if(1==n.success){this.examObj=null!==(a=null===(i=n.data)||void 0===i?void 0:i.examObj)&&void 0!==a?a:{};let l=this.commonService.getCurrentDomain();this.linkDocument=`${l}/de-thi/${this.examObj.hashId}`,this.linkIframeDocument=`<iframe width="100%" height="900" src="${this.linkDocument}"  title="${this.examObj.name}" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`,this.successStatusObj()}else this.errorStatusObj(null!==(r=n.message)&&void 0!==r?r:"",!0)}))}copyLinkToClipboard(e){return e}copyLinkToIframe(){return this.linkIframeDocument}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getRouterLinkByType(){var e;return 1==this.type?"/admin/testbank/homework-results-list/"+this.homeworkObj.classroomId+"/"+this.homeworkObj.id+"/"+this.homeworkObj.hashId:"/admin/testbank/exam-results-list/"+(null!==(e=this.examObj.categoryId)&&void 0!==e?e:0)+"/"+this.examObj.id+"/0"}backToDocumentManager(){var e;this.myNavigation(1==this.type?"/admin/testbank/document-management/1/0/1":`/admin/testbank/document-management/0/${this.backToLink.includes("shareType")?0:null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/1`)}ngOnInit(){var e,n;let i=this.commonService.getMyQueryParam("backto"),a=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.type=null!==(n=Number(this.commonService.getMyParam(this.activeRoute,"type")))&&void 0!==n?n:0,1==this.type?this.getHomeworkInfoByHashId(a):this.getExamInfoByHashId(a),this.backToLink=i??"/admin/testbank/document-management/0/0/1",this.commonService.translateMetaData({title:"lang_cms_publish_document_title",description:"lang_cms_publish_document_description",image:""}),super.ngOnInit()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.Cq),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-publish-document"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"text-md","text-center"],["class","box mx-auto mt-5 p-3","style","max-width: 560px",4,"ngIf"],["class","box p-3 text-center mt-5 intro-x mx-auto","style","max-width: 560px;",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","publish-document-WN-MSecHgq",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","publish-document-zSqq-4hFwf",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-md"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","publish-document-pWkyuGbsV",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"azt-copy","relative","mt-5","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","publish-document-OwwIaPHrMx",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"box","p-3","text-center","mt-5","intro-x","mx-auto",2,"max-width","560px"],[1,"tex-md"],[1,"overflow-y-auto","mt-3","rounded-md","text-left","border","border-slate-200","dark:border-darkmode-300","p-3"],[1,"whitespace-nowrap",2,"padding","1rem"],[1,"text-right","mt-3"],["azt-track-service","publish-document--zJK66x3oF",1,"copy-code","btn","py-1","mr-auto","px-2","btn-outline-secondary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","file","data-lucide","file",1,"lucide","lucide-file","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,vb,1,0,"azt-loading-effect",1),t.YNc(2,Ob,33,26,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[C.rH,y.sg,y.O5,Tn.i3,zt.Q,Vt._,tt.mp,tt.bT],encapsulation:2}),o})(),zn=(()=>{class o{constructor(e,n,i){this.globalService=e,this.commonService=n,this.examPageResultService=i}getExamStatisticObjs(e,n,i){return this.globalService.startIntervalFunc(e),this.getExamAndQuestionObjsForStatistic(e,n,i??0)}getExamAndQuestionObjsForStatistic(e,n,i){return new Ri.y(a=>{this.examPageResultService.apiExamPageResultGetObjV2Get(n,i).subscribe(r=>{var l,c,_,d,p,h,f,w,k;if(1==r.success){var S=null!==(c=null===(l=r.data)||void 0===l?void 0:l.serverSecond)&&void 0!==c?c:0,D=null!==(d=null===(_=r.data)||void 0===_?void 0:_.examObj)&&void 0!==d?d:{},Q=null!==(h=null===(p=r.data)||void 0===p?void 0:p.classroomWithAvatarAndStudentObjs)&&void 0!==h?h:new Array,N=null!==(w=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null===(f=r.data)||void 0===f?void 0:f.questionObjs)))&&void 0!==w?w:new Array;this.getAllExamMarksObjsForStatistic(e,[],n,"",q=>{var W,X;if(q.hasOwnProperty("success")&&1==q.success){var E=[],J={};null===(W=q.resultObjs)||void 0===W||W.forEach(z=>{z.examResultObjs&&z.examResultObjs.length>0&&z.examResultObjs.forEach(K=>{var B,et,st;E.push(null!==(B=K.id)&&void 0!==B?B:0),J.hasOwnProperty(null!==(et=K.id)&&void 0!==et?et:0)||(J[null!==(st=K.id)&&void 0!==st?st:0]=K)})}),this.getAllAnswerObjsForStatistic(E,n,z=>{var K,B,et,st;if(z.hasOwnProperty("success")&&1==z.success){var at=[];Q.forEach(rt=>{rt.classroomObj&&at.push(rt.classroomObj)});var mt=[];null===(K=z.resultObjs)||void 0===K||K.forEach(rt=>{if(rt.id&&J.hasOwnProperty(rt.id)){var ht=Object.assign(Object.assign({},J[rt.id]),{correctQuestionIds:rt.correctQuestionIds,wrongQuestionIds:rt.wrongQuestionIds,resultQuestionIds:rt.resultQuestionIds});mt.push(ht)}});var it={examObj:D,classroomObjs:at,classroomObjsWithStudentObjs:Q,questionObjs:N,resultQuestionObjs:mt,resultObjs:null!==(B=q.resultObjs)&&void 0!==B?B:[],curServerTime:S,totalAttended:null===(et=r.data)||void 0===et?void 0:et.totalAttended};N.length>0?(a.next({status:200,success:1,data:it,message:"successful"}),a.complete()):(a.next({status:200,success:0,data:null,message:"lang_core_there_are_no_question_in_exam"}),a.complete())}else a.next({status:z.code,success:0,data:null,message:null!==(st=z.message)&&void 0!==st?st:""}),a.complete()})}else a.next({status:q.code,success:0,data:null,message:null!==(X=q.message)&&void 0!==X?X:""}),a.complete()})}else a.next({status:r.code,success:0,data:null,message:null!==(k=r.message)&&void 0!==k?k:""}),a.complete()})})}getAllExamMarksObjsForStatistic(e,n,i,a,r){this.examPageResultService.apiExamPageResultGetObjsV2Get(i,"statistic",a).subscribe(l=>{var c,_,d;1==l.success?(!(null===(c=l.data)||void 0===c)&&c.objs&&n.push(...l.data.objs),null!==(_=l.data)&&void 0!==_&&_.nextPage?this.globalService.isStopIntervalFunc(e)?r({code:200,resultObjs:n,success:1,message:"successful"}):setTimeout(()=>{var p,h;this.getAllExamMarksObjsForStatistic(e,n,i,null!==(h=null===(p=l.data)||void 0===p?void 0:p.nextPage)&&void 0!==h?h:"",r)},300):r({code:200,resultObjs:n,success:1,message:"successful"})):r({code:l.code,resultObjs:[],success:0,message:null!==(d=l.message)&&void 0!==d?d:""})})}getAllAnswerObjsForStatistic(e,n,i){this.examPageResultService.apiExamPageResultGetQuestionStatisticByExamResultIdsPost({examResultIds:e},n).subscribe(a=>{var r,l;if(1==a.success){var c=[];!(null===(r=a.data)||void 0===r)&&r.objs&&c.push(...a.data.objs),i({code:200,resultObjs:c,success:1,message:"successful"})}else i({code:a.code,resultObjs:void 0,success:0,message:null!==(l=a.message)&&void 0!==l?l:""})})}findExamResultOfStudent(e,n){var i=[];return e.length>1?e.forEach(a=>{a.testStatus&&(a.studentId==n||null==a.studentId)&&i.push(a)}):1==e.length&&(e[0].studentId==n||null==e[0].studentId)&&i.push(e[0]),i}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_i.U),t.LFG(_t.v),t.LFG(xt.DR))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class to extends Be.v{constructor(){super(...arguments),this.countTested=0,this.countTrue=0,this.countNotAnswer=0,this.countAttended=0,this.countFalse=0,this.studentWhoFalse=[],this.studentWhoNotAnswer=[]}}class ua{constructor(){this.listResult=[],this.listQuestions=[]}}var ma=T(60167),eo=T(54729),no=T(98674),io=T(90893);function Ab(o,s){1&o&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),t.xp6(3),t.hij("",t.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function Sb(o,s){1&o&&(t.TgZ(0,"div",6)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}function Zb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.handleChangeClassStatistic(a))}),t.TgZ(1,"button",16),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(1),t.Gre("nav-link w-full py-2 ",n.idClassObj==e.id?"active":""," "),t.xp6(1),t.hij(" ",e.name," ")}}function Eb(o,s){if(1&o&&(t.TgZ(0,"ul",13),t.YNc(1,Zb,3,4,"li",14),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.classroomObjs)}}function Ib(o,s){1&o&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&o&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_cms_common_loading"),"..."))}function Mb(o,s){if(1&o&&(t.TgZ(0,"div",57)(1,"div",58)(2,"div",59)(3,"mat-icon",60),t._uU(4," close "),t.qZA()()(),t.TgZ(5,"div"),t._UZ(6,"azt-standalone-question",61),t.qZA()()),2&o){const e=s.$implicit,n=t.oxw().index,i=t.oxw(3);t.xp6(6),t.Q6J("startQuestionIndex",i.examObj.startQuestionIndex)("expandInfo",i.examObj.expandInfo)("hideQuestionLabel",!0)("follower",i.followerRenderQuest)("isMobile",i.isMobile)("examObj",i.examObj)("question",e)("index",n)}}function Pb(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.Dn7(2,1,t.xi3(3,5,(e.countNotAnswer+e.countFalse)/e.countAttended*100,"1.0-2"),",","."),"%")}}function Lb(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1,"0%"),t.qZA())}function jb(o,s){if(1&o&&t._UZ(0,"img",64),2&o){const e=t.oxw().$implicit;t.Q6J("nameImages",e.nameImages)}}function Nb(o,s){1&o&&(t.TgZ(0,"span",67),t._uU(1," , "),t.qZA())}function qb(o,s){if(1&o&&(t.TgZ(0,"span",65),t._uU(1),t.qZA(),t.YNc(2,Nb,2,0,"span",66)),2&o){const e=t.oxw(),n=e.$implicit,i=e.index,a=t.oxw().$implicit;t.xp6(1),t.Oqu(n.fullName),t.xp6(1),t.Q6J("ngIf",i!=a.studentWhoFalse.length-1)}}function Qb(o,s){if(1&o&&(t.ynx(0),t.YNc(1,jb,1,1,"img",62),t.YNc(2,qb,3,2,"ng-template",null,63,t.W1O),t.BQk()),2&o){const e=s.$implicit,n=t.MAs(3);let i;t.xp6(1),t.Q6J("ngIf",e.nameImages&&(null!==(i=e.studentId)&&void 0!==i?i:0)<=0)("ngIfElse",n)}}function Db(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"span",47),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"div",48)(7,"span",47),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",49),t.NdJ("click",function(i){const r=t.CHM(e).$implicit,l=t.MAs(15),c=t.oxw(3);return t.KtG(c.onContextMenu(i,r,l))}),t.O4$(),t.TgZ(11,"svg",50),t._UZ(12,"path",51)(13,"circle",52),t.qZA()()(),t.kcU(),t.TgZ(14,"context-menu",null,53),t.YNc(16,Mb,7,8,"ng-template",54),t.qZA()(),t.TgZ(17,"td",55),t._uU(18),t.qZA(),t.TgZ(19,"td",55),t._uU(20),t.qZA(),t.TgZ(21,"td",55),t._uU(22),t.qZA(),t.TgZ(23,"td",55),t._uU(24),t.qZA(),t.TgZ(25,"td",55),t._uU(26),t.qZA(),t.TgZ(27,"td",55),t.YNc(28,Pb,4,8,"div",56),t.YNc(29,Lb,2,0,"div",56),t.qZA(),t.TgZ(30,"td",55),t.YNc(31,Qb,4,2,"ng-container",41),t.qZA()()}if(2&o){const e=s.$implicit,n=s.index;t.xp6(4),t.Oqu(n+1),t.xp6(4),t.AsE("",t.lcZ(9,11,"lang_testbank_statistical_question")," ",e.id,""),t.xp6(10),t.Oqu(e.countAttended),t.xp6(2),t.Oqu(e.countTested),t.xp6(2),t.Oqu(e.countNotAnswer),t.xp6(2),t.Oqu(e.countTrue),t.xp6(2),t.Oqu(e.countFalse),t.xp6(2),t.Q6J("ngIf",0!=e.countAttended),t.xp6(1),t.Q6J("ngIf",0==e.countAttended),t.xp6(2),t.Q6J("ngForOf",e.studentWhoFalse)}}function Ub(o,s){1&o&&t._UZ(0,"span",68)}function Fb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"table",21)(2,"thead",22)(3,"tr")(4,"th",23)(5,"div",24),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",25)(9,"div",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortIndexQuestion())}),t._uU(10),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",27),t._UZ(13,"polyline",28)(14,"line",29)(15,"polyline",30)(16,"line",31),t.qZA()()(),t.kcU(),t.TgZ(17,"th",32)(18,"div",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortStudentCountAttended())}),t._uU(19),t.ALo(20,"mytranslate"),t.O4$(),t.TgZ(21,"svg",27),t._UZ(22,"polyline",28)(23,"line",29)(24,"polyline",30)(25,"line",31),t.qZA()()(),t.kcU(),t.TgZ(26,"th",32)(27,"div",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortStudentCountTested())}),t._uU(28),t.ALo(29,"mytranslate"),t.O4$(),t.TgZ(30,"svg",27),t._UZ(31,"polyline",28)(32,"line",29)(33,"polyline",30)(34,"line",31),t.qZA()()(),t.kcU(),t.TgZ(35,"th",32)(36,"div",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortStudentCountNotAnswer())}),t._uU(37),t.ALo(38,"mytranslate"),t.O4$(),t.TgZ(39,"svg",27),t._UZ(40,"polyline",28)(41,"line",29)(42,"polyline",30)(43,"line",31),t.qZA()()(),t.kcU(),t.TgZ(44,"th",32)(45,"div",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortStudentCountTrue())}),t._uU(46),t.ALo(47,"mytranslate"),t.O4$(),t.TgZ(48,"svg",27),t._UZ(49,"polyline",28)(50,"line",29)(51,"polyline",30)(52,"line",31),t.qZA()()(),t.kcU(),t.TgZ(53,"th",32)(54,"div",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortStudentCountFalse())}),t._uU(55),t.ALo(56,"mytranslate"),t.O4$(),t.TgZ(57,"svg",27),t._UZ(58,"polyline",28)(59,"line",29)(60,"polyline",30)(61,"line",31),t.qZA()()(),t.kcU(),t.TgZ(62,"th",38)(63,"div",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.toggleSortFalse())}),t._uU(64),t.ALo(65,"mytranslate"),t.O4$(),t.TgZ(66,"svg",27),t._UZ(67,"polyline",28)(68,"line",29)(69,"polyline",30)(70,"line",31),t.qZA()()(),t.kcU(),t.TgZ(71,"th",40)(72,"span"),t._uU(73),t.ALo(74,"mytranslate"),t.qZA()()()(),t.TgZ(75,"tbody"),t.YNc(76,Db,32,13,"tr",41),t.qZA()(),t.TgZ(77,"div",42)(78,"button",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getListQuestionStatistic(i.page+1,!0))}),t.YNc(79,Ub,1,0,"span",44),t._uU(80),t.ALo(81,"mytranslate"),t.O4$(),t.TgZ(82,"svg",45),t._UZ(83,"polyline",46),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,13,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,15,"lang_testbank_statistical_questions")," "),t.xp6(9),t.hij(" ",t.lcZ(20,17,"lang_testbank_statistical_total_number_exam")," "),t.xp6(9),t.hij(" ",t.lcZ(29,19,"lang_testbank_statistical_number_student_did")," "),t.xp6(9),t.hij(" ",t.lcZ(38,21,"lang_testbank_statistical_number_student_do_not")," "),t.xp6(9),t.hij(" ",t.lcZ(47,23,"lang_testbank_statistical_number_student_right")," "),t.xp6(9),t.hij(" ",t.lcZ(56,25,"lang_testbank_statistical_number_student_wrong")," "),t.xp6(9),t.hij(" ",t.lcZ(65,27,"lang_testbank_statistical_student_not_done")," "),t.xp6(9),t.hij(" ",t.lcZ(74,29,"lang_testbank_statistical_student_who_wrong")," "),t.xp6(3),t.Q6J("ngForOf",e.listQuestion),t.xp6(2),t.Q6J("disabled",e.isLoadMore||e.listQuestion.length>=e.totalQuestion-e.totalEssayQuestion),t.xp6(1),t.Q6J("ngIf",e.isLoadMore),t.xp6(1),t.hij("\xa0 ",t.lcZ(81,31,"lang_auto_xem_them"),"\xa0 ")}}function Rb(o,s){if(1&o&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,Eb,2,1,"ul",9),t.TgZ(3,"div",10),t.YNc(4,Ib,5,3,"div",11),t.YNc(5,Fb,84,33,"div",12),t.qZA()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.classroomObjs&&e.classroomObjs.length>0),t.xp6(2),t.Q6J("ngIf",e.changeClassLoading),t.xp6(1),t.Q6J("ngIf",!e.changeClassLoading)}}let zb=(()=>{class o extends R.Q{onContextMenu(e,n,i){e&&(this.contextMenuService.show.next({anchorElement:e?.target?e.target:void 0,contextMenu:i,event:e,item:n}),e?.preventDefault(),e?.stopPropagation())}countEssayQuestion(){let e=0;return this.questionObjs.forEach(n=>{this.answerTypeService.isEssayAnswer(n.answerType)&&e++}),e}readyData(e,n){this.listQuestion=e,this.examAttended=n,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((i,a)=>i.countAttended>0&&a.countAttended>0?(a.countNotAnswer+a.countFalse)/a.countAttended*100-(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(e,n){var i,a,r;if(n?this.isLoadMore=!0:this.initStatusObj(),this.dataStatistical){let l=this.dataStatistical;if(1==l.success&&l.data){this.examObj=null!==(i=l.data.examObj)&&void 0!==i?i:{};let c=l.data.resultObjs&&l.data.resultObjs.length>0?l.data.resultObjs:new Array,_=this.testedListApiService.mergeStudentWithAvatar(c??[]),d=this.commonService.castJsonToClassObjs(ua,JSON.stringify(l.data.classroomObjs));this.classroomObjs=d??[];let p={};null===(a=l.data.classroomObjsWithStudentObjs)||void 0===a||a.forEach(h=>{var f,w,k,S;h.classroomObj&&h.studentObjs&&(p.hasOwnProperty(null!==(w=null===(f=h.classroomObj)||void 0===f?void 0:f.id)&&void 0!==w?w:0)||(p[null!==(S=null===(k=h.classroomObj)||void 0===k?void 0:k.id)&&void 0!==S?S:0]=h.studentObjs))}),this.form=this.fb.group(this.classroomObjs&&this.classroomObjs.length>0?{curSelectClass:new m.p4(this.classroomObjs[0].id)}:{curSelectClass:new m.p4(-1)}),this.examPageResultService.apiExamPageResultListQuestionsGet(this.examObj.id,e,50).subscribe(h=>{var f,w,k,S,D,Q,N,q,W;if(h.data&&1==h.success){this.totalQuestion=null!==(f=h.data.total)&&void 0!==f?f:0,this.page=e;let X=h.data.objs&&h.data.objs.length>0?h.data.objs:new Array;this.questionObjs.push(...null!==(w=this.commonService.castJsonToClassObjs(to,JSON.stringify(X)))&&void 0!==w?w:[]),this.totalEssayQuestion=this.countEssayQuestion(),this.listResults=null!==(k=l.data)&&void 0!==k&&k.resultQuestionObjs&&(null===(S=l.data)||void 0===S?void 0:S.resultQuestionObjs.length)>0?l.data.resultQuestionObjs:new Array;let E=this.dictionaryService.getDictionaryByGroupFieldTS(this.listResults,"userId"),J=[];for(let et=0;et<this.classroomObjs.length;et++)p.hasOwnProperty(null!==(D=this.classroomObjs[et].id)&&void 0!==D?D:0)&&(this.classroomObjs[et].students=p[null!==(Q=this.classroomObjs[et].id)&&void 0!==Q?Q:0]),null===(N=this.classroomObjs[et].students)||void 0===N||N.forEach(st=>{var at,mt;if(st.parentId&&!this.commonService.filterArray(J,st.parentId)&&J.push(st.parentId),st.parentId&&E.hasOwnProperty(st.parentId)&&!this.commonService.filterArray(this.classroomObjs[et].listResult,E[st.parentId][0])){let it=this.statisticalApiService.findExamResultOfStudent(E[st.parentId],null!==(at=st.id)&&void 0!==at?at:"0");it.length>0&&(null===(mt=this.classroomObjs[et].listResult)||void 0===mt||mt.push(it[it.length-1]))}});let z=!1,B={id:-1,name:null!==(q=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"))&&void 0!==q?q:"",userTested:[],listResult:[],listQuestions:[]};_.forEach(et=>{var st,at,mt,it,rt;if(!this.commonService.filterArray(J,null!==(st=et.parentId)&&void 0!==st?st:"0")){if(et.parentId&&E.hasOwnProperty(null!==(at=et.parentId)&&void 0!==at?at:0)){let ht=this.statisticalApiService.findExamResultOfStudent(E[et.parentId],null!==(mt=et.id)&&void 0!==mt?mt:"0");if(ht.length>0){let ft=ht[ht.length-1];B.listResult.push(ft);let Tt=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");et.fullName=null!==(it=et.fullName)&&void 0!==it?it:Tt+"_"+ft.id,null===(rt=B.userTested)||void 0===rt||rt.push(et)}}z=!0}}),z&&this.classroomObjs.push(B),this.classroomObjs.length>0?this.handleChangeClassStatistic(this.classroomObjs[0]):(this.doneLoadingEmit.emit(!1),this.isCheckData=!0,this.isLoadMore=!1,this.successStatusObj())}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(W=l.message)&&void 0!==W?W:""),this.isLoadMore=!1,this.successStatusObj()})}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(null!==(r=l.message)&&void 0!==r?r:"")}else this.doneLoadingEmit.emit(!1)}handleChangeClassStatistic(e){var n,i,a,r,l,c,_;this.idClassObj=e.id;let d=[],p=0;this.changeClassLoading=!0;for(let h=0;h<this.questionObjs.length;h++)this.questionObjs[h].isRoleTeacher=!0,(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[h].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[h].answerType))&&(this.questionObjs[h].countFalse=0,this.questionObjs[h].countNotAnswer=0,this.questionObjs[h].countTested=0,this.questionObjs[h].countAttended=0,this.questionObjs[h].countTrue=0,this.questionObjs[h].indexQuestion=h,this.questionObjs[h].studentWhoFalse=[],this.questionObjs[h].studentWhoNotAnswer=[]);if(-1==e.id){let h=this.dictionaryService.getDictionaryByGroupFieldTS(e.listResult,"userId");for(let f in h)if(h.hasOwnProperty(f)){p++;let w=null===(n=e.userTested)||void 0===n?void 0:n.filter(k=>k.parentId==h[f][h[f].length-1].userId);for(let k=0;k<this.questionObjs.length;k++)(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[k].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[k].answerType))&&(h[f][0].correctQuestionIds&&this.commonService.filterArray(h[f][0].correctQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countTrue++,this.questionObjs[k].countTested++),h[f][0].wrongQuestionIds&&this.commonService.filterArray(h[f][0].wrongQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countFalse++,this.questionObjs[k].countTested++,w&&w.length>0&&(this.commonService.filterArray(this.questionObjs[k].studentWhoFalse,{studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages})||null===(i=this.questionObjs[k].studentWhoFalse)||void 0===i||i.push({studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages}))),h[f][0].resultQuestionIds&&this.commonService.filterArray(h[f][0].resultQuestionIds,this.questionObjs[k].id)&&this.questionObjs[k].countAttended++,this.commonService.filterArray(h[f][0].resultQuestionIds,this.questionObjs[k].id)&&!this.commonService.filterArray(h[f][0].correctQuestionIds,this.questionObjs[k].id)&&!this.commonService.filterArray(h[f][0].wrongQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countNotAnswer++,w&&w.length>0&&(this.commonService.filterArray(this.questionObjs[k].studentWhoNotAnswer,{studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages})||null===(a=this.questionObjs[k].studentWhoNotAnswer)||void 0===a||a.push({studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages}))))}}else{let h=this.dictionaryService.getDictionaryByGroupFieldTS(null!==(r=e.listResult)&&void 0!==r?r:[],"userId");for(let f in h)if(h.hasOwnProperty(f)){p++;let w=null===(l=e.students)||void 0===l?void 0:l.filter(k=>k.parentId==h[f][0].userId);for(let k=0;k<this.questionObjs.length;k++)(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[k].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[k].answerType))&&(h[f][0].correctQuestionIds&&this.commonService.filterArray(h[f][0].correctQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countTrue++,this.questionObjs[k].countTested++),h[f][0].wrongQuestionIds&&this.commonService.filterArray(h[f][0].wrongQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countFalse++,this.questionObjs[k].countTested++,w&&w.length>0&&(this.commonService.filterArray(this.questionObjs[k].studentWhoFalse,{studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages})||null===(c=this.questionObjs[k].studentWhoFalse)||void 0===c||c.push({studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages}))),h[f][0].resultQuestionIds&&this.commonService.filterArray(h[f][0].resultQuestionIds,this.questionObjs[k].id)&&this.questionObjs[k].countAttended++,this.commonService.filterArray(h[f][0].resultQuestionIds,this.questionObjs[k].id)&&!this.commonService.filterArray(h[f][0].correctQuestionIds,this.questionObjs[k].id)&&!this.commonService.filterArray(h[f][0].wrongQuestionIds,this.questionObjs[k].id)&&(this.questionObjs[k].countNotAnswer++,w&&w.length>0&&(this.commonService.filterArray(this.questionObjs[k].studentWhoNotAnswer,{studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages})||null===(_=this.questionObjs[k].studentWhoNotAnswer)||void 0===_||_.push({studentId:w[0].id,parentId:w[0].parentId,fullName:w[0].fullName,nameImages:w[0].nameImages}))))}}this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(h=>{(this.answerTypeService.isOneChoiceAnswer(h.answerType)||this.answerTypeService.isFillAnswer(h.answerType))&&d.push(h)}),this.readyData(d,p)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((e,n)=>(n.countAttended>0?(n.countNotAnswer+n.countFalse)/n.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((e,n)=>(n.countAttended>0?(n.countNotAnswer+n.countFalse)/n.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((e,n)=>e.countAttended-n.countAttended):this.listQuestion.sort((e,n)=>e.countAttended-n.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((e,n)=>e.countTested-n.countTested):this.listQuestion.sort((e,n)=>e.countTested-n.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((e,n)=>e.countNotAnswer-n.countNotAnswer):this.listQuestion.sort((e,n)=>e.countNotAnswer-n.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((e,n)=>e.countTrue-n.countTrue):this.listQuestion.sort((e,n)=>e.countTrue-n.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((e,n)=>e.countFalse-n.countFalse):this.listQuestion.sort((e,n)=>e.countFalse-n.countFalse).reverse()}isEmptyObj(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic(1)}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic(1),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p,h,f){super(a),this.statisticalApiService=e,this.testedListApiService=n,this.dialog=i,this.commonService=a,this.activeRoute=r,this.contextMenuService=l,this.docxService=c,this.dictionaryService=_,this.customQuestionInterface=d,this.fb=p,this.answerTypeService=h,this.examPageResultService=f,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.idClassObj=-1,this.examId=-1,this.listQuestion=[],this.examObj={},this.isCheckData=!1,this.changeClassLoading=!1,this.examAttended=0,this.isMobile=this.commonService.isMobileOrTable(),this.panelOpenState=!1,this.statusSort=1,this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new Rn.G,this.form=new m.nJ({}),this.classroomObjs=[],this.questionObjs=[],this.listResults=[],this.studentObjs=[],this.userObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1},this.totalQuestion=0,this.totalEssayQuestion=0,this.page=1,this.isLoadMore=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(zn),t.Y36(xn.x),t.Y36(U.on),t.Y36(_t.v),t.Y36(C.gz),t.Y36(u.Lk),t.Y36(eo.x),t.Y36(no.E),t.Y36(io.U),t.Y36(m.QS),t.Y36(Je.T),t.Y36(xt.DR))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list-question"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto"],["class","d-flex justify-content-center",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered",2,"width","max-content"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-kkZu13iI5D",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-xrD2etExg-",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-y6cuGZ-SC8",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-seyRna-GRR",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-LND-UYgzgn",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-kM4o8UGqyP",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-X1HptCCAQA",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","29.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-xwuEU3k_LH","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-1b7d1GbqkQ",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],["popUp",""],["contextMenuItem","","style","position: absolute"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[1,"box"],[1,"grid","grid-cols-12"],[1,"col-span-12","py-1",2,"text-align","end","padding-right","10px","cursor","context-menu"],[2,"color","#333333","vertical-align","middle","font-size","18px","width","18px","height","18px","cursor","pointer"],[2,"margin-bottom","0px",3,"startQuestionIndex","expandInfo","hideQuestionLabel","follower","isMobile","examObj","question","index"],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(e,n){1&e&&(t.YNc(0,Ab,7,6,"div",0),t.YNc(1,Sb,4,3,"div",1),t.YNc(2,Rb,6,3,"div",2)),2&e&&(t.Q6J("ngIf",1==n.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=n.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=n.isCheckData))},dependencies:[y.sg,y.O5,je.eB,Wt.Hw,Sn.L,Zn.$,u.GI,u.n5,y.JJ,tt.bT,tt.AS],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),o})();function Jb(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li",6)(1,"button",23),t.NdJ("click",function(){const a=t.CHM(e).index,r=t.oxw();return t.KtG(r.chooseTapClass(a))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.xp6(1),t.Gre("nav-link w-full py-2 ",i.indexClassInArray==n?"active":"",""),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function Bb(o,s){1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody")(1,"tr")(2,"td",24)(3,"p",25),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&o&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function Hb(o,s){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function Yb(o,s){if(1&o&&(t.TgZ(0,"td",30),t._UZ(1,"img",34),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.nameImage,t.LSH)}}function Gb(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function $b(o,s){1&o&&(t._uU(0),t.ALo(1,"mytranslate")),2&o&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function Kb(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function Wb(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function Vb(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function Xb(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function tw(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function ew(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.YNc(3,Hb,2,1,"td",31),t.YNc(4,Yb,2,1,"td",31),t.TgZ(5,"td",30),t.YNc(6,Gb,3,3,"div",21),t.YNc(7,$b,2,3,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(9,"td",33),t.YNc(10,Kb,3,3,"div",26),t.YNc(11,Wb,3,3,"div",26),t.YNc(12,Vb,3,3,"div",26),t.YNc(13,Xb,3,3,"div",26),t.YNc(14,tw,2,1,"div",26),t.qZA()()),2&o){const e=s.$implicit,n=s.index,i=t.MAs(8);let a,r;t.xp6(2),t.Oqu(n+1),t.xp6(1),t.Q6J("ngIf",!e.nameImage||(null!==(a=e.id)&&void 0!==a?a:0)>0),t.xp6(1),t.Q6J("ngIf",e.nameImage&&(null!==(r=e.id)&&void 0!==r?r:0)<=0),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}const pa=function(){return[]};function nw(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw(3);let n;t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,e.calcAvgClassroomMark(null!==(n=e.statisticObj[e.indexClassInArray].studentsWithMark)&&void 0!==n?n:t.DdM(8,pa)),"1.0-2"),",",".")," ")}}function iw(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody"),t.YNc(1,ew,15,10,"tr",27),t.TgZ(2,"tr",28)(3,"td",29),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",30),t.YNc(7,nw,4,9,"div",26),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",null==e.statisticObj[e.indexClassInArray]?null:e.statisticObj[e.indexClassInArray].studentsWithMark),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.statisticObj.length>0&&e.statisticObj[e.indexClassInArray])}}function ow(o,s){if(1&o&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function aw(o,s){if(1&o&&(t.TgZ(0,"td",30),t._UZ(1,"img",35),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("nameImages",e.nameImages)}}function sw(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function rw(o,s){1&o&&(t._uU(0),t.ALo(1,"mytranslate")),2&o&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function lw(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function cw(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function _w(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function dw(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function uw(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function mw(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.YNc(3,ow,2,1,"td",31),t.YNc(4,aw,2,1,"td",31),t.TgZ(5,"td",30),t.YNc(6,sw,3,3,"div",21),t.YNc(7,rw,2,3,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(9,"td",33),t.YNc(10,lw,3,3,"div",26),t.YNc(11,cw,3,3,"div",26),t.YNc(12,_w,3,3,"div",26),t.YNc(13,dw,3,3,"div",26),t.YNc(14,uw,2,1,"div",26),t.qZA()()),2&o){const e=s.$implicit,n=s.index,i=t.MAs(8);t.xp6(2),t.Oqu(n+1),t.xp6(1),t.Q6J("ngIf",!e.nameImages||!e.nameImages.url),t.xp6(1),t.Q6J("ngIf",e.nameImages&&e.nameImages.url),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}function pw(o,s){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,e.calcAvgClassroomMark(e.freeStudentList||t.DdM(8,pa)),"1.0-2"),",",".")," ")}}function hw(o,s){if(1&o&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody"),t.YNc(1,mw,15,10,"tr",27),t.TgZ(2,"tr",28)(3,"td",29),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",30),t.YNc(7,pw,4,9,"div",26),t.qZA()()()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.freeStudentList),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.freeStudentList.length>0)}}function gw(o,s){if(1&o&&(t.O4$(),t.YNc(0,iw,8,5,"tbody",26),t.YNc(1,hw,8,5,"tbody",26)),2&o){const e=t.oxw();t.Q6J("ngIf",e.indexClassInArray>-1),t.xp6(1),t.Q6J("ngIf",-1==e.indexClassInArray)}}let fw=(()=>{class o extends R.Q{chooseTapClass(e){this.indexClassInArray=e}getDataStatistic(){var e,n,i,a,r,l,c;if(this.initStatusObj(),this.dataStatistical){let N=this.dataStatistical;if(1==N.success&&N.data){this.examObj=null!==(e=N.data.examObj)&&void 0!==e?e:{},this.hasEssayQuestion=this.homeworkExamService.hasEssayInExam(null!==(n=this.examObj.examType)&&void 0!==n?n:0);var _=N.data.classroomObjsWithStudentObjs&&N.data.classroomObjsWithStudentObjs.length>0?N.data.classroomObjsWithStudentObjs:new Array,d=null!==(i=N.data)&&void 0!==i&&i.resultObjs&&(null===(a=N.data)||void 0===a?void 0:a.resultObjs.length)>0?N.data.resultObjs:new Array,p=this.testedListApiService.mergeStudentWithAvatar(d??[]),h=[],f={};p?.forEach(q=>{var W,X,E=null!==(W=q.parentId)&&void 0!==W?W:"0";f.hasOwnProperty(E)||(f[E]=null!==(X=q.examResultObjs)&&void 0!==X?X:[]),h=h.concat(f[E])});var w=this.testedListApiService.filterExamResultOnTest(h,this.examObj,null!==(r=N.data.curServerTime)&&void 0!==r?r:0),k=[],D=[];if(this.homeworkExamService.mustInClassroom(null!==(l=this.examObj.whoAllow)&&void 0!==l?l:0)&&_.length>0){var Q=[];_.forEach(q=>{var W,X=[];null===(W=q.studentObjs)||void 0===W||W.forEach(E=>{var J,z,K,B,et,st,at,mt,it={};Q.push(null!==(J=E.parentId)&&void 0!==J?J:"0");var rt=null!==(z=E.parentId)&&void 0!==z?z:"0";f.hasOwnProperty(rt)&&(Array.isArray(E.examResultObjs)||(E.examResultObjs=[]),E.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(et=null===(K=E.examResultObjs)||void 0===K?void 0:K.concat(null!==(B=f[rt])&&void 0!==B?B:[]))&&void 0!==et?et:[],null!==(st=E.id)&&void 0!==st?st:"0")),E.examResultObjs&&E.examResultObjs.length>0&&(it=E.examResultObjs[E.examResultObjs.length-1]??{});var ft=w.hasOwnProperty(null!==(at=it.userId)&&void 0!==at?at:"0")?w[null!==(mt=it.userId)&&void 0!==mt?mt:"0"]:0,Tt=it.mark?it.mark:0,Ot=it.id&&ft>0?it.id:0,kt=it.startedTest?it.startedTest:null,gt=it.confirmedAt?it.confirmedAt:null,Gt=Object.assign(Object.assign({},E),{mark:Tt,resultId:Ot,startedTest:kt,confirmedAt:gt,status:ft});X.push(Gt)}),k.push({classObj:q.classroomObj,studentsWithMark:X})})}d.forEach(q=>{var W,X,E,J,z,K,B={};if(!this.commonService.filterArray(Q,null!==(W=q.parentId)&&void 0!==W?W:"0")){if(q.examResultObjs&&q.examResultObjs.length>0){var et=this.statisticalApiService.findExamResultOfStudent(q.examResultObjs,null!==(X=q.id)&&void 0!==X?X:"0");B=et[et.length-1]}var at=w.hasOwnProperty(null!==(E=B.userId)&&void 0!==E?E:"0")?w[null!==(J=B.userId)&&void 0!==J?J:"0"]:0,mt=B.mark?B.mark:0,it=B.id&&at>0?B.id:0,rt=B.startedTest?B.startedTest:null,ht=B.confirmedAt?B.confirmedAt:null,ft=Object.assign(Object.assign({},q),{mark:mt,resultId:it,startedTest:rt,confirmedAt:ht,nameImages:null!==(z=q.nameImages)&&void 0!==z?z:{},nameImage:"",status:at});let Tt=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");ft.fullName=null!==(K=ft.fullName)&&void 0!==K?K:Tt+"_"+it,D.push(ft)}}),this.readyData(k,D),this.statisticObjClone=this.commonService.myClone(this.statisticObj)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(c=N.message)&&void 0!==c?c:"")}else this.doneLoadingEmit.emit(!1)}readyData(e,n){var i,a,r,l,c;this.statisticObj=e??new Array,this.freeStudentList=this.checkStatusStudent(this.sortService.sortFirstNameStudents(n));for(let _=0;_<this.freeStudentList.length;_++)this.freeStudentList[_].isMarked||(this.freeStudentList[_].mark=-1);for(let _=0;_<this.statisticObj.length;_++)if(this.statisticObj[_].studentsWithMark=this.statisticObj[_].classObj&&0==(null===(i=this.statisticObj[_].classObj)||void 0===i?void 0:i.sortType)?this.checkStatusStudent(this.sortService.sortFirstNameStudents(null!==(a=this.commonService.myClone(this.statisticObj[_].studentsWithMark))&&void 0!==a?a:[])):this.checkStatusStudent(this.sortService.sortArrayByMultipleObjectKeyAsc(null!==(r=this.commonService.myClone(this.statisticObj[_].studentsWithMark))&&void 0!==r?r:[],"pos","id")),this.statisticObj[_].studentsWithMark)for(let d=0;d<(null!==(c=null===(l=this.statisticObj[_].studentsWithMark)||void 0===l?void 0:l.length)&&void 0!==c?c:0);d++)this.statisticObj[_].studentsWithMark[d].isMarked||(this.statisticObj[_].studentsWithMark[d].mark=-1);this.statisticObj.length||(this.indexClassInArray=-1),this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(e){var n=[];return e.forEach(i=>{this.hasEssayQuestion?i.confirmedAt&&""!=i.confirmedAt&&i.resultId&&i.resultId>0?i.isMarked=!0:i.resultId&&i.resultId>0&&(!i.confirmedAt||""==i.confirmedAt)?i.isNotMarked=!0:i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||0!=i.status?i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||-1!=i.status?null==i.startedTest&&(i.isNotTested=!0):i.isNotSubmit=!0:i.isOnTest=!0:i.resultId&&i.resultId>0?i.isMarked=!0:i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||0!=i.status?i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||-1!=i.status?null==i.startedTest&&(i.isNotTested=!0):i.isNotSubmit=!0:i.isOnTest=!0,n.push(i)}),n}calcAvgClassroomMark(e){var n=0,i=0;return e.forEach(a=>{var r;a.isMarked&&(n++,i+=null!==(r=a.mark)&&void 0!==r?r:0)}),n>0?(i/n).toFixed(2):0}goToStudentList(e){var n,i;let a=`/admin/testbank/statistic/${null!==(n=this.examObj.categoryId)&&void 0!==n?n:0}/${this.examObj.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${null===(i=e.classObj)||void 0===i?void 0:i.id}`,"?backto="+encodeURIComponent(a))}sortFullNameStudent(e){var n,i;this.checkSortObj.fullName=!this.checkSortObj.fullName,-1==e?this.freeStudentList=this.checkSortObj.fullName?this.sortService.sortFirstNameStudents(this.freeStudentList):this.sortService.sortFirstNameStudents(this.freeStudentList).reverse():this.statisticObj[e].studentsWithMark=this.checkSortObj.fullName?this.sortService.sortFirstNameStudents(null!==(n=this.statisticObj[e].studentsWithMark)&&void 0!==n?n:[]):this.sortService.sortFirstNameStudents(null!==(i=this.statisticObj[e].studentsWithMark)&&void 0!==i?i:[]).reverse()}sortStudentByPoint(e){var n,i;this.checkSortObj.point=!this.checkSortObj.point,-1==e?this.freeStudentList=this.checkSortObj.point?this._sortByPoint(this.freeStudentList):this._sortByPoint(this.freeStudentList).reverse():this.statisticObj[e].studentsWithMark=this.checkSortObj.point?this._sortByPoint(null!==(n=this.statisticObj[e].studentsWithMark)&&void 0!==n?n:[]):this._sortByPoint(null!==(i=this.statisticObj[e].studentsWithMark)&&void 0!==i?i:[]).reverse()}_sortByPoint(e){return e.sort((n,i)=>Number(n.mark)-Number(i.mark)),e}isEmptyObj(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}constructor(e,n,i,a,r,l,c){super(i),this.statisticalApiService=e,this.dialog=n,this.commonService=i,this.sortService=a,this.globalService=r,this.testedListApiService=l,this.homeworkExamService=c,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.examObj={},this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:!1,point:!1}}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(zn),t.Y36(U.on),t.Y36(_t.v),t.Y36(kn.K),t.Y36(_i.U),t.Y36(xn.x),t.Y36(Ve.j))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-table-score"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:46,vars:24,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-Pqzc1J0xy-k","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"tab-content","overflow-x-auto","mt-5"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-1KLvUodz_gh",1,"flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["azt-track-service","table-score-ItfC-iAX4HX",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["azt-track-service","table-score-ZNru2_q8UiD","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],[1,"img-fluid",3,"src"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),t.YNc(7,Jb,3,4,"li",5),t.TgZ(8,"li",6)(9,"button",7),t.NdJ("click",function(){return n.chooseTapClass(-1)}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"table",10)(15,"thead",11)(16,"tr")(17,"th",12)(18,"div",13),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"th",12)(22,"div",14),t.NdJ("click",function(){return n.sortFullNameStudent(n.indexClassInArray)}),t._uU(23),t.ALo(24,"mytranslate"),t.O4$(),t.TgZ(25,"svg",15),t._UZ(26,"polyline",16)(27,"line",17)(28,"polyline",18)(29,"line",19),t.qZA()()(),t.kcU(),t.TgZ(30,"th",12)(31,"div",13),t._uU(32),t.ALo(33,"mytranslate"),t.qZA()(),t.TgZ(34,"th",12)(35,"div",20),t.NdJ("click",function(){return n.sortStudentByPoint(n.indexClassInArray)}),t._uU(36),t.ALo(37,"mytranslate"),t.O4$(),t.TgZ(38,"svg",15),t._UZ(39,"polyline",16)(40,"line",17)(41,"polyline",18)(42,"line",19),t.qZA()()()()(),t.YNc(43,Bb,6,3,"tbody",21),t.YNc(44,gw,2,2,"ng-template",null,22,t.W1O),t.qZA()()()()()),2&e){const i=t.MAs(45);t.xp6(2),t.hij(" ",t.lcZ(3,12,"lang_auto_bang_diem")," "),t.xp6(5),t.Q6J("ngForOf",n.statisticObj),t.xp6(2),t.Gre("nav-link w-full py-2 ",-1==n.indexClassInArray?"active":"",""),t.xp6(1),t.hij(" ",t.lcZ(11,14,"lang_auto_tu_do")," "),t.xp6(9),t.hij(" ",t.lcZ(20,16,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(24,18,"lang_first_and_last_name")," "),t.xp6(9),t.hij(" ",t.lcZ(33,20,"lang_birthday")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"lang_point")," "),t.xp6(7),t.Q6J("ngIf",n.indexClassInArray>-1&&n.statisticObj.length>0&&0==(null==n.statisticObj[n.indexClassInArray].studentsWithMark?null:n.statisticObj[n.indexClassInArray].studentsWithMark.length)||-1==n.indexClassInArray&&0==n.freeStudentList.length)("ngIfElse",i)}},dependencies:[y.sg,y.O5,Sn.L,y.JJ,tt.bT,tt.AS,tt._I],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),o})();var pt=T(83321);function xw(o,s){1&o&&(t.O4$(),t.TgZ(0,"svg",19),t._UZ(1,"path",20)(2,"polyline",21)(3,"path",22)(4,"path",23)(5,"path",24)(6,"path",25),t.qZA())}function vw(o,s){1&o&&(t.TgZ(0,"span"),t._UZ(1,"span",26),t._uU(2,"\xa0"),t.qZA())}function bw(o,s){1&o&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_success")))}function ww(o,s){1&o&&(t.TgZ(0,"div",28),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_error")))}let Tw=(()=>{class o extends R.Q{exportExcel(){let e=this.commonService.getFormObj(this.form);if(0==e.statisticalCheck&&0==e.listquestionCheck&&0==e.tablescoreCheck){let n=this.commonService.myTranslateInstant("lang_auto_khong_the_de_trong_tat_ca_cac_lua_chon_dot");alert(n)}else this.loadingDownload=!0,this.isExportSuccess=void 0,this.getData(this.examId).then(n=>{setTimeout(()=>{var i,a,r,l,c,_,d,p;if(1==n){e.statisticalCheck&&this.AddStatisticToSheet(null!==(i=this.Statistic.statisticClass)&&void 0!==i?i:[],null!==(a=this.Statistic.statisticNoClass)&&void 0!==a?a:[]),e.tablescoreCheck&&this.AddTableScoreToSheet(null!==(r=this.TableScore.statisticClass)&&void 0!==r?r:[],null!==(l=this.TableScore.statisticNoClass)&&void 0!==l?l:[]),e.listquestionCheck&&this.AddListQuestionToSheet(null!==(c=this.ListQuest.attended)&&void 0!==c?c:0,null!==(_=this.ListQuest.listQuestions)&&void 0!==_?_:[],null!==(d=this.ListQuest.listClassStatistic)&&void 0!==d?d:[]);try{var h=pt.write(this.wb,{bookType:"xlsx",bookSST:!0,type:"base64"}),f="";null!=this.examObj?(f=this.commonService.createFileNameExportFile(["Thong ke de thi",null!==(p=this.examObj.name)&&void 0!==p?p:""])+".xlsx",pt.writeFile(this.wb,f)):(f=this.commonService.createFileNameExportFile(["Thong ke de thi"])+".xlsx",pt.writeFile(this.wb,f)),this.mobileWebviewService.sendExportExcelBase64(f,h),this.isExportSuccess=!0,this.loadingDownload=!1,this.wb=pt.utils.book_new()}catch(w){console.log(w),this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=pt.utils.book_new()}}else this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=pt.utils.book_new()},0)})}AddStatisticToSheet(e,n){var i,a,r,l,c,_,d;let p=null!==(i=this.commonService.myTranslateInstant("lang_auto_lop"))&&void 0!==i?i:"",h=null!==(a=this.commonService.myTranslateInstant("lang_auto_so_hoc_sinh"))&&void 0!==a?a:"",f=null!==(r=this.commonService.myTranslateInstant("lang_auto_tren_tb"))&&void 0!==r?r:"(>5)",w=null!==(l=this.commonService.myTranslateInstant("lang_auto_dang_ky"))&&void 0!==l?l:"",k=null!==(c=this.commonService.myTranslateInstant("lang_auto_du_thi"))&&void 0!==c?c:"",S=null!==(_=this.commonService.myTranslateInstant("lang_auto_amount"))&&void 0!==_?_:"",Q=1,N=pt.utils.json_to_sheet([{A:p,B:h,C:"",D:"<=1",E:"",F:"<=2",G:"",H:"<=3",I:"",J:"<=4",K:"",L:"<=5",M:"",N:"<=6",O:"",P:"<=7",Q:"",R:"<=8",S:"",T:"<=9",U:"",V:"<=10",W:"",X:f+"(>= 5)",Y:""},{A:"",B:w,C:k,D:S,E:"%",F:S,G:"%",H:S,I:"%",J:S,K:"%",L:S,M:"%",N:S,O:"%",P:S,Q:"%",R:S,S:"%",T:S,U:"%",V:S,W:"%",X:S,Y:"%"}],{skipHeader:!0});const q_e_c=24;for(let B=0;B<=q_e_c;++B)N[pt.utils.encode_cell({c:B,r:0})].s=this.style_header;if(null==e&&null==n){let B=null!==(d=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"))&&void 0!==d?d:"";pt.utils.sheet_add_json(N,[{A:B}],{skipHeader:!0,origin:-1})}else{e?.forEach(it=>{null!=it.classObj&&(pt.utils.sheet_add_json(N,[{A:it.classObj.name,B:it.registerCount,C:it.testedCount,D:it.markPercent[0].count,E:this._decimalPipe.transform(it.markPercent[0].percent,"1.0-2"),F:it.markPercent[1].count,G:this._decimalPipe.transform(it.markPercent[1].percent,"1.0-2"),H:it.markPercent[2].count,I:this._decimalPipe.transform(it.markPercent[2].percent,"1.0-2"),J:it.markPercent[3].count,K:this._decimalPipe.transform(it.markPercent[3].percent,"1.0-2"),L:it.markPercent[4].count,M:this._decimalPipe.transform(it.markPercent[4].percent,"1.0-2"),N:it.markPercent[5].count,O:this._decimalPipe.transform(it.markPercent[5].percent,"1.0-2"),P:it.markPercent[6].count,Q:this._decimalPipe.transform(it.markPercent[6].percent,"1.0-2"),R:it.markPercent[7].count,S:this._decimalPipe.transform(it.markPercent[7].percent,"1.0-2"),T:it.markPercent[8].count,U:this._decimalPipe.transform(it.markPercent[8].percent,"1.0-2"),V:it.markPercent[9].count,W:this._decimalPipe.transform(it.markPercent[9].percent,"1.0-2"),X:it.markPercent[10].count,Y:this._decimalPipe.transform(it.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),Q++)}),n?.forEach(it=>{var rt;if((null!==(rt=it.registerCount)&&void 0!==rt?rt:0)>0){let ht=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do");pt.utils.sheet_add_json(N,[{A:ht,B:it.registerCount,C:it.testedCount,D:it.markPercent[0].count,E:this._decimalPipe.transform(it.markPercent[0].percent,"1.0-2"),F:it.markPercent[1].count,G:this._decimalPipe.transform(it.markPercent[1].percent,"1.0-2"),H:it.markPercent[2].count,I:this._decimalPipe.transform(it.markPercent[2].percent,"1.0-2"),J:it.markPercent[3].count,K:this._decimalPipe.transform(it.markPercent[3].percent,"1.0-2"),L:it.markPercent[4].count,M:this._decimalPipe.transform(it.markPercent[4].percent,"1.0-2"),N:it.markPercent[5].count,O:this._decimalPipe.transform(it.markPercent[5].percent,"1.0-2"),P:it.markPercent[6].count,Q:this._decimalPipe.transform(it.markPercent[6].percent,"1.0-2"),R:it.markPercent[7].count,S:this._decimalPipe.transform(it.markPercent[7].percent,"1.0-2"),T:it.markPercent[8].count,U:this._decimalPipe.transform(it.markPercent[8].percent,"1.0-2"),V:it.markPercent[9].count,W:this._decimalPipe.transform(it.markPercent[9].percent,"1.0-2"),X:it.markPercent[10].count,Y:this._decimalPipe.transform(it.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),Q++}});let B=this.totalPoint(e,n),et=this.totalPercent(e,n),st=this.totalStudentRegister(e,n),at=this.totalStudentTakeExam(e,n),mt=this.commonService.myTranslateInstant("lang_auto_tong_upper");pt.utils.sheet_add_json(N,[{A:mt,B:st,C:at,D:B[0],E:this._decimalPipe.transform(et[0],"1.0-2"),F:B[1],G:this._decimalPipe.transform(et[1],"1.0-2"),H:B[2],I:this._decimalPipe.transform(et[2],"1.0-2"),J:B[3],K:this._decimalPipe.transform(et[3],"1.0-2"),L:B[4],M:this._decimalPipe.transform(et[4],"1.0-2"),N:B[5],O:this._decimalPipe.transform(et[5],"1.0-2"),P:B[6],Q:this._decimalPipe.transform(et[6],"1.0-2"),R:B[7],S:this._decimalPipe.transform(et[7],"1.0-2"),T:B[8],U:this._decimalPipe.transform(et[8],"1.0-2"),V:B[9],W:this._decimalPipe.transform(et[9],"1.0-2"),X:B[10],Y:this._decimalPipe.transform(et[10],"1.0-2")}],{skipHeader:!0,origin:-1}),Q++}N["!cols"]=[{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9}],N["!rows"]=[{hpt:28},{hpt:27}],N["!merges"]=[{s:{r:0,c:1},e:{r:0,c:2}},{s:{r:0,c:3},e:{r:0,c:4}},{s:{r:0,c:5},e:{r:0,c:6}},{s:{r:0,c:7},e:{r:0,c:8}},{s:{r:0,c:9},e:{r:0,c:10}},{s:{r:0,c:11},e:{r:0,c:12}},{s:{r:0,c:13},e:{r:0,c:14}},{s:{r:0,c:15},e:{r:0,c:16}},{s:{r:0,c:17},e:{r:0,c:18}},{s:{r:0,c:19},e:{r:0,c:20}},{s:{r:0,c:21},e:{r:0,c:22}},{s:{r:0,c:23},e:{r:0,c:24}}];let J_s_c=0,J_e_c=24,J_e_r=Q-1,z_s_c=0,z_e_c=24;for(let B=1;B<=J_e_r;++B)for(let et=J_s_c;et<=J_e_c;++et)N[pt.utils.encode_cell({c:et,r:B})].s=this.style_body;for(let B=z_s_c;B<=z_e_c;++B)N[pt.utils.encode_cell({c:B,r:Q})].s=this.style_footer;let K=this.commonService.myTranslateInstant("lang_auto_thong_ke_pho_diem");pt.utils.book_append_sheet(this.wb,N,K&&K?.length>31?K?.substring(0,27)+"...":K)}AddTableScoreToSheet(e,n){var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q;let W=null!==(i=this.commonService.myTranslateInstant("lang_auto_stt"))&&void 0!==i?i:"",X=null!==(a=this.commonService.myTranslateInstant("lang_auto_ho_va_ten"))&&void 0!==a?a:"",E=null!==(r=this.commonService.myTranslateInstant("lang_auto_gioi_tinh"))&&void 0!==r?r:"",J=null!==(l=this.commonService.myTranslateInstant("lang_auto_ngay_sinh"))&&void 0!==l?l:"",z=null!==(c=this.commonService.myTranslateInstant("lang_point"))&&void 0!==c?c:"",K=this.commonService.myTranslateInstant("lang_auto_cau");if(0==e.length&&0==n.length){let it=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_thanh_gia_lam_de"),rt=this.commonService.myTranslateInstant("lang_auto_bang_diem");q=pt.utils.json_to_sheet([{A:it,B:"",C:"",D:"",E:""}],{skipHeader:!0}),pt.utils.book_append_sheet(this.wb,q,rt&&rt?.length>31?rt?.substring(0,27)+"...":rt)}else{var B=[{width:8},{width:22},{width:34},{width:13},{width:13}];for(let rt=0;rt<this.limitQuestions;rt++)B.push({width:13});var et=[{s:{r:0,c:0},e:{r:0,c:4}}],st=0,at=[],mt=[];if(q=pt.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0!=e.length&&e.forEach(rt=>{var ht,ft,Tt,Ot,kt,gt,Gt,bt,ve,tn,dn,Me,Pe,St,be;let He=[{A:null===(ht=rt.classObj)||void 0===ht?void 0:ht.name,B:"",C:"",D:"",E:""},{A:W,B:X,C:J,D:E,E:z}],Yt=5,Qe=0,Zt=0;for(let ge=0;ge<this.limitQuestions;ge++){Yt>=26&&(Yt=0,Qe++);let me="";0==Qe&&0==Zt?me=this.keyColExcelArr[Yt]:(Qe>26&&(Qe=1,Zt++),Zt>0&&(me+=this.keyColExcelArr[Zt-1]),me+=this.keyColExcelArr[Qe-1]+""+this.keyColExcelArr[Yt]),He[0][me]="",He[1][me]=K+" "+(ge+(null!==(ft=this.examObj.startQuestionIndex)&&void 0!==ft?ft:0)<9?"0"+(ge+(null!==(Tt=this.examObj.startQuestionIndex)&&void 0!==Tt?Tt:1)):ge+(null!==(Ot=this.examObj.startQuestionIndex)&&void 0!==Ot?Ot:1)),Yt++}if(at.push(st+=2),et.push({s:{r:st-1,c:0},e:{r:st-1,c:4}}),q=pt.utils.sheet_add_json(q,He,{skipHeader:!0,origin:-1}),0==(null===(kt=rt.studentsWithMark)||void 0===kt?void 0:kt.length)){let me=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),B:"",C:"",D:"",E:""}];et.push({s:{r:st+1,c:0},e:{r:st+1,c:4}}),pt.utils.sheet_add_json(q,me,{skipHeader:!0,origin:-1}),st++}else{let ge=null!==(gt=this.commonService.myTranslateInstant("lang_auto_chua_cham"))&&void 0!==gt?gt:"",me=null!==(Gt=this.commonService.myTranslateInstant("lang_auto_dang_thi"))&&void 0!==Gt?Gt:"",De=null!==(bt=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai"))&&void 0!==bt?bt:"",qt=null!==(ve=this.commonService.myTranslateInstant("lang_auto_chua_thi"))&&void 0!==ve?ve:"",nn=null!==(tn=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh"))&&void 0!==tn?tn:"",Bn=null!==(dn=this.commonService.myTranslateInstant("lang_auto_nam"))&&void 0!==dn?dn:"",Ti=null!==(Me=this.commonService.myTranslateInstant("lang_auto_nu"))&&void 0!==Me?Me:"";null===(Pe=rt.studentsWithMark)||void 0===Pe||Pe.forEach((se,on)=>{var pe,fe;let re,Xt=this.timeService.formatOnlyDateByUserUnit(se.birthday)?this.timeService.formatOnlyDateByUserUnit(se.birthday):void 0;re=se.isNotMarked?ge:se.isOnTest?me:se.isNotSubmit?De:se.isNotTested?qt:null!==(pe=se.mark)&&void 0!==pe?pe:"",st++;let ce=[{A:on+1,B:se.fullName,C:null==se.birthday?nn:`${Xt}`,D:`${1==se.gender?Bn:Ti}`,E:`${re}`}];if(se.answeredQuestions){let oe=5,$t=0,Mt=0;for(let Nt=0;Nt<(null===(fe=se.answeredQuestions)||void 0===fe?void 0:fe.length);Nt++){oe>=26&&(oe=0,$t++);let Lt="";0==$t&&0==Mt?Lt=this.keyColExcelArr[oe]:($t>26&&($t=1,Mt++),Mt>0&&(Lt+=this.keyColExcelArr[Mt-1]),Lt+=this.keyColExcelArr[$t-1]+""+this.keyColExcelArr[oe]),ce[0][Lt]=this.checkAnswerQuestionTableExport(se.answeredQuestions[Nt]),oe++}}pt.utils.sheet_add_json(q,ce,{skipHeader:!0,origin:-1})})}let en=null!==(St=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh"))&&void 0!==St?St:"";pt.utils.sheet_add_json(q,[{A:en,B:"",C:"",D:"",E:this.calcAvgClassroomMark(null!==(be=rt.studentsWithMark)&&void 0!==be?be:[])}],{skipHeader:!0,origin:-1}),mt.push(st+1),et.push({s:{r:(st+=3)-2,c:0},e:{r:st-2,c:3}}),pt.utils.sheet_add_json(q,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}),0!=n.length){let rt=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_da_tham_gia_nhung_chua_chon_lop"),ht=[{A:rt,B:"",C:"",D:"",E:""},{A:W,B:X,C:J,D:E,E:z}],ft=5,Tt=0,Ot=0;for(let kt=0;kt<this.limitQuestions;kt++){ft>=26&&(ft=0,Tt++);let gt="";0==Tt&&0==Ot?gt=this.keyColExcelArr[ft]:(Tt>26&&(Tt=1,Ot++),Ot>0&&(gt+=this.keyColExcelArr[Ot-1]),gt+=this.keyColExcelArr[Tt-1]+""+this.keyColExcelArr[ft]),ht[0][gt]="",ht[1][gt]=K+" "+(kt+(null!==(_=this.examObj.startQuestionIndex)&&void 0!==_?_:0)<9?"0"+(kt+(null!==(d=this.examObj.startQuestionIndex)&&void 0!==d?d:1)):kt+(null!==(p=this.examObj.startQuestionIndex)&&void 0!==p?p:1)),ft++}if(et.push({s:{r:(st+=2)-1,c:0},e:{r:st-1,c:4}}),at.push(st),q=pt.utils.sheet_add_json(q,ht,{skipHeader:!0,origin:-1}),null==n)rt=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),pt.utils.sheet_add_json(q,[{A:rt,B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1});else{let kt=1,gt=null!==(h=this.commonService.myTranslateInstant("lang_auto_chua_cham"))&&void 0!==h?h:"",Gt=null!==(f=this.commonService.myTranslateInstant("lang_auto_dang_thi"))&&void 0!==f?f:"",bt=null!==(w=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai"))&&void 0!==w?w:"",ve=null!==(k=this.commonService.myTranslateInstant("lang_auto_chua_thi"))&&void 0!==k?k:"",tn=null!==(S=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh"))&&void 0!==S?S:"",dn=null!==(D=this.commonService.myTranslateInstant("lang_auto_nam"))&&void 0!==D?D:"",Me=null!==(Q=this.commonService.myTranslateInstant("lang_auto_nu"))&&void 0!==Q?Q:"";Object.keys(n).forEach(St=>{var be,He;let Zt,Yt=n[St],Qe=this.timeService.formatOnlyDateByUserUnit(Yt.birthday)?this.timeService.formatOnlyDateByUserUnit(Yt.birthday):void 0;Zt=Yt.isNotMarked?gt:Yt.isOnTest?Gt:Yt.isNotSubmit?bt:Yt.isNotTested?ve:null!==(be=Yt.mark)&&void 0!==be?be:"";let en=[{A:kt,B:Yt.fullName,C:null==Qe?tn:`${Qe}`,D:`${1==Yt.gender?dn:Me}`,E:Zt}];if(Yt.answeredQuestions){let ge=5,me=0,De=0;for(let qt=0;qt<(null===(He=Yt.answeredQuestions)||void 0===He?void 0:He.length);qt++){ge>=26&&(ge=0,me++);let nn="";0==me&&0==De?nn=this.keyColExcelArr[ge]:(me>26&&(me=1,De++),De>0&&(nn+=this.keyColExcelArr[De-1]),nn+=this.keyColExcelArr[me-1]+""+this.keyColExcelArr[ge]),en[0][nn]=this.checkAnswerQuestionTableExport(Yt.answeredQuestions[qt]),ge++}}pt.utils.sheet_add_json(q,en,{skipHeader:!0,origin:-1}),kt++,st++});let Pe=null!==(N=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh"))&&void 0!==N?N:"";pt.utils.sheet_add_json(q,[{A:Pe,B:"",C:"",D:"",E:this.calcAvgClassroomMark(n)}],{skipHeader:!0,origin:-1}),mt.push(st+1),et.push({s:{r:st+=1,c:0},e:{r:st,c:3}}),pt.utils.sheet_add_json(q,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}}q["!cols"]=B,q["!merges"]=et;for(let rt=0;rt<at.length;rt++){q[pt.utils.encode_cell({c:0,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},q[pt.utils.encode_cell({c:1,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},q[pt.utils.encode_cell({c:2,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},q[pt.utils.encode_cell({c:3,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},q[pt.utils.encode_cell({c:4,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},q[pt.utils.encode_cell({c:0,r:at[rt]})].s=this.style_header,q[pt.utils.encode_cell({c:1,r:at[rt]})].s=this.style_header,q[pt.utils.encode_cell({c:2,r:at[rt]})].s=this.style_header,q[pt.utils.encode_cell({c:3,r:at[rt]})].s=this.style_header,q[pt.utils.encode_cell({c:4,r:at[rt]})].s=this.style_header,q[pt.utils.encode_cell({c:0,r:mt[rt]})].s=this.style_footer,q[pt.utils.encode_cell({c:1,r:mt[rt]})].s=this.style_footer,q[pt.utils.encode_cell({c:2,r:mt[rt]})].s=this.style_footer,q[pt.utils.encode_cell({c:3,r:mt[rt]})].s=this.style_footer,q[pt.utils.encode_cell({c:4,r:mt[rt]})].s=this.style_footer;for(let ft=0;ft<this.limitQuestions;ft++)q[pt.utils.encode_cell({c:4,r:at[rt]-1})]&&(q[pt.utils.encode_cell({c:4,r:at[rt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}}),q[pt.utils.encode_cell({c:5+ft,r:at[rt]})]&&(q[pt.utils.encode_cell({c:5+ft,r:at[rt]})].s=this.style_header),q[pt.utils.encode_cell({c:5+ft,r:mt[rt]})]&&(q[pt.utils.encode_cell({c:5+ft,r:mt[rt]})].s=this.style_footer);let ht={s:{c:0,r:at[rt]+1},e:{c:4+this.limitQuestions,r:mt[rt]}};for(let ft=ht.s.r;ft<=ht.e.r;++ft)for(let Tt=ht.s.c;Tt<=ht.e.c;++Tt)q[pt.utils.encode_cell({c:Tt,r:ft})]&&(q[pt.utils.encode_cell({c:Tt,r:ft})].s=this.style_body)}let it=this.commonService.myTranslateInstant("lang_auto_bang_diem");pt.utils.book_append_sheet(this.wb,q,it&&it?.length>31?it?.substring(0,27)+"...":it)}}AddListQuestionToSheet(e,n,i){var a,r=0,l=[{s:{r:0,c:0},e:{r:0,c:7}}],_=[],d=[];if(a=pt.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0==e){let p=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),h=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export"),f=[{A:p,B:"",C:"",D:"",E:"",F:"",G:"",H:""}];r++,_.push(r),l.push({s:{r:r-1,c:0},e:{r:r-1,c:7}}),a=pt.utils.sheet_add_json(a,f,{skipHeader:!0,origin:-1}),pt.utils.book_append_sheet(this.wb,a,h&&h?.length>31?h?.substring(0,27)+"...":h)}else{let p=this.commonService.myTranslateInstant("lang_auto_cau_hoi"),h=this.commonService.myTranslateInstant("lang_auto_tong_so_hs_du_thi"),f=this.commonService.myTranslateInstant("lang_auto_so_hs_da_lam"),w=this.commonService.myTranslateInstant("lang_auto_so_hs_chua_lam"),k=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_dung"),S=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_sai"),D=this.commonService.myTranslateInstant("lang_auto_ty_le_hoc_sinh_khong_hoan_thanh_cau"),Q=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_lam_sai"),N=this.commonService.myTranslateInstant("lang_auto_thong_ke_theo_cau_hoi"),q=this.commonService.myTranslateInstant("lang_auto_cau");i.length>0&&i.forEach(E=>{var J,z;let K=[{A:E.name,B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:p,B:h,C:f,D:w,E:k,F:S,G:D,H:Q}];if(_.push(r+=2),l.push({s:{r:r-1,c:0},e:{r:r-1,c:7}}),a=pt.utils.sheet_add_json(a,K,{skipHeader:!0,origin:-1}),0==(null===(J=E.listQuestions)||void 0===J?void 0:J.length)){let et=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),B:"",C:"",D:"",E:"",F:"",G:"",H:""}];r++,l.push({s:{r:r+1,c:0},e:{r:r+1,c:7}}),pt.utils.sheet_add_json(a,et,{skipHeader:!0,origin:-1})}else null===(z=E.listQuestions)||void 0===z||z.forEach((B,et)=>{let at=[{A:`${q} ${B.id}`,B:B.countAttended,C:B.countTested,D:B.countNotAnswer,E:B.countTrue,F:B.countFalse,G:0!=B.countAttended?`${((B.countNotAnswer+B.countFalse)/B.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(B.studentWhoFalse).join(", ")}];pt.utils.sheet_add_json(a,at,{skipHeader:!0,origin:-1}),r++});d.push(r),r+=2,pt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""}],{skipHeader:!0,origin:-1})});let W=[{A:N,B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:p,B:h,C:f,D:w,E:k,F:S,G:D,H:Q}];l.push({s:{r:(r+=2)-1,c:0},e:{r:r-1,c:7}}),_.push(r),a=pt.utils.sheet_add_json(a,W,{skipHeader:!0,origin:-1}),n.forEach((E,J)=>{pt.utils.sheet_add_json(a,[{A:`${q} ${E.id}`,B:E.countAttended,C:E.countTested,D:E.countNotAnswer,E:E.countTrue,F:E.countFalse,G:0!=E.countAttended?`${((E.countNotAnswer+E.countFalse)/E.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(E.studentWhoFalse).join(", ")}],{skipHeader:!0,origin:-1}),r++}),d.push(r),pt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""}],{skipHeader:!0,origin:-1}),a["!cols"]=[{wch:15.25},{wch:10.63},{wch:6.25},{wch:8.25},{wch:9},{wch:7.25},{wch:16.75},{wch:60}],a["!merges"]=l;for(let E=0;E<_.length;E++){a[pt.utils.encode_cell({c:0,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:1,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:2,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:3,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:4,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:5,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:6,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:7,r:_[E]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[pt.utils.encode_cell({c:0,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:1,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:2,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:3,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:4,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:5,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:6,r:_[E]})].s=this.style_header,a[pt.utils.encode_cell({c:7,r:_[E]})].s=this.style_header;let J={s:{c:0,r:_[E]+1},e:{c:7,r:d[E]}};for(let z=J.s.r;z<=J.e.r;++z)for(let K=J.s.c;K<=J.e.c;++K)a[pt.utils.encode_cell({c:K,r:z})].s=this.style_body}let X=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export");pt.utils.book_append_sheet(this.wb,a,X&&X?.length>31?X?.substring(0,27)+"...":X)}}getNameStudentWhoFalse(e){var n=[];return e.forEach(i=>{i.fullName&&n.push(i.fullName)}),n}checkStatusStudent(e,n){var i=[];return e.forEach(a=>{n?a.confirmedAt&&""!=a.confirmedAt&&a.resultId&&a.resultId>0?a.isMarked=!0:a.resultId&&a.resultId>0&&(!a.confirmedAt||""==a.confirmedAt)?a.isNotMarked=!0:a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||0!=a.status?a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||-1!=a.status?null==a.startedTest&&(a.isNotTested=!0):a.isNotSubmit=!0:a.isOnTest=!0:a.resultId&&a.resultId>0?a.isMarked=!0:a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||0!=a.status?a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||-1!=a.status?null==a.startedTest&&(a.isNotTested=!0):a.isNotSubmit=!0:a.isOnTest=!0,i.push(a)}),i}totalPercent(e,n){var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et=[0,0,0,0,0,0,0,0,0,0,0,0];let st=0;for(let at=0;at<e.length;at++)e[at]&&(st+=null!==(i=e[at].testedCount)&&void 0!==i?i:0,et[0]+=null!==(a=e[at].markPercent[0].count)&&void 0!==a?a:0,et[1]+=null!==(r=e[at].markPercent[1].count)&&void 0!==r?r:0,et[2]+=null!==(l=e[at].markPercent[2].count)&&void 0!==l?l:0,et[3]+=null!==(c=e[at].markPercent[3].count)&&void 0!==c?c:0,et[4]+=null!==(_=e[at].markPercent[4].count)&&void 0!==_?_:0,et[5]+=null!==(d=e[at].markPercent[5].count)&&void 0!==d?d:0,et[6]+=null!==(p=e[at].markPercent[6].count)&&void 0!==p?p:0,et[7]+=null!==(h=e[at].markPercent[7].count)&&void 0!==h?h:0,et[8]+=null!==(f=e[at].markPercent[8].count)&&void 0!==f?f:0,et[9]+=null!==(w=e[at].markPercent[9].count)&&void 0!==w?w:0,et[10]+=null!==(k=e[at].markPercent[10].count)&&void 0!==k?k:0);for(let at=0;at<n.length;at++)n[at]&&(st+=null!==(S=n[at].testedCount)&&void 0!==S?S:0,et[0]+=null!==(D=n[at].markPercent[0].count)&&void 0!==D?D:0,et[1]+=null!==(Q=n[at].markPercent[1].count)&&void 0!==Q?Q:0,et[2]+=null!==(N=n[at].markPercent[2].count)&&void 0!==N?N:0,et[3]+=null!==(q=n[at].markPercent[3].count)&&void 0!==q?q:0,et[4]+=null!==(W=n[at].markPercent[4].count)&&void 0!==W?W:0,et[5]+=null!==(X=n[at].markPercent[5].count)&&void 0!==X?X:0,et[6]+=null!==(E=n[at].markPercent[6].count)&&void 0!==E?E:0,et[7]+=null!==(J=n[at].markPercent[7].count)&&void 0!==J?J:0,et[8]+=null!==(z=n[at].markPercent[8].count)&&void 0!==z?z:0,et[9]+=null!==(K=n[at].markPercent[9].count)&&void 0!==K?K:0,et[10]+=null!==(B=n[at].markPercent[10].count)&&void 0!==B?B:0);for(let at=0;at<et.length;at++)et[at]=100*et[at]/st;return et}totalPoint(e,n){var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z;let K=[0,0,0,0,0,0,0,0,0,0,0];for(let B=0;B<e.length;B++)K[0]+=null!==(i=e[B].markPercent[0].count)&&void 0!==i?i:0,K[1]+=null!==(a=e[B].markPercent[1].count)&&void 0!==a?a:0,K[2]+=null!==(r=e[B].markPercent[2].count)&&void 0!==r?r:0,K[3]+=null!==(l=e[B].markPercent[3].count)&&void 0!==l?l:0,K[4]+=null!==(c=e[B].markPercent[4].count)&&void 0!==c?c:0,K[5]+=null!==(_=e[B].markPercent[5].count)&&void 0!==_?_:0,K[6]+=null!==(d=e[B].markPercent[6].count)&&void 0!==d?d:0,K[7]+=null!==(p=e[B].markPercent[7].count)&&void 0!==p?p:0,K[8]+=null!==(h=e[B].markPercent[8].count)&&void 0!==h?h:0,K[9]+=null!==(f=e[B].markPercent[9].count)&&void 0!==f?f:0,K[10]+=null!==(w=e[B].markPercent[10].count)&&void 0!==w?w:0;for(let B=0;B<n.length;B++)K[0]+=null!==(k=n[B].markPercent[0].count)&&void 0!==k?k:0,K[1]+=null!==(S=n[B].markPercent[1].count)&&void 0!==S?S:0,K[2]+=null!==(D=n[B].markPercent[2].count)&&void 0!==D?D:0,K[3]+=null!==(Q=n[B].markPercent[3].count)&&void 0!==Q?Q:0,K[4]+=null!==(N=n[B].markPercent[4].count)&&void 0!==N?N:0,K[5]+=null!==(q=n[B].markPercent[5].count)&&void 0!==q?q:0,K[6]+=null!==(W=n[B].markPercent[6].count)&&void 0!==W?W:0,K[7]+=null!==(X=n[B].markPercent[7].count)&&void 0!==X?X:0,K[8]+=null!==(E=n[B].markPercent[8].count)&&void 0!==E?E:0,K[9]+=null!==(J=n[B].markPercent[9].count)&&void 0!==J?J:0,K[10]+=null!==(z=n[B].markPercent[10].count)&&void 0!==z?z:0;return K}totalStudentRegister(e,n){var i,a,r=0;for(let l=0;l<e.length;l++)r+=null!==(i=e[l].registerCount)&&void 0!==i?i:0;for(let l=0;l<n.length;l++)r+=null!==(a=n[l].registerCount)&&void 0!==a?a:0;return r}totalStudentTakeExam(e,n){var i,a,r=0;for(let l=0;l<e.length;l++)r+=null!==(i=e[l].testedCount)&&void 0!==i?i:0;for(let l=0;l<n.length;l++)r+=null!==(a=n[l].testedCount)&&void 0!==a?a:0;return r}calcAvgClassroomMark(e){var n=0,i=0;return e.forEach(a=>{var r;a.isMarked&&(n++,i+=null!==(r=a.mark)&&void 0!==r?r:0)}),n>0?(i/n).toFixed(2):0}convertStatisticalAllQuestion(e){var n,i,a,r,l,c,_,d,p,h,f,w=null!==(n=e.data)&&void 0!==n&&n.questionObjs&&e.data.questionObjs.length>0?e.data.questionObjs:new Array,k=[];k=null!==(i=this.commonService.castJsonToClassObjs(to,JSON.stringify(w)))&&void 0!==i?i:[];var S=null!==(a=e.data)&&void 0!==a&&a.resultQuestionObjs&&(null===(r=e.data)||void 0===r?void 0:r.resultQuestionObjs.length)>0?e.data.resultQuestionObjs:new Array,D=this.dictionaryService.getDictionaryByGroupFieldTS(S,"userId"),Q=[];this.examObj=null!==(c=null===(l=e.data)||void 0===l?void 0:l.examObj)&&void 0!==c?c:{};var N=null!==(_=e.data)&&void 0!==_&&_.resultObjs&&e.data.resultObjs.length>0?e.data.resultObjs:new Array,q={},W=[],X={};null===(p=null===(d=e.data)||void 0===d?void 0:d.classroomObjsWithStudentObjs)||void 0===p||p.forEach(B=>{B.classroomObj&&B.studentObjs&&B.studentObjs.forEach(et=>{var st,at;if(et.parentId){this.commonService.filterArray(W,et.parentId)||W.push(et.parentId);var mt=this.statisticalApiService.findExamResultOfStudent(null!==(st=D[et.parentId])&&void 0!==st?st:[],null!==(at=et.id)&&void 0!==at?at:"0");if(mt.length>0){var it=mt[mt.length-1],rt=et.parentId+"_"+(et.id?et.id:0)+"_"+it.id;q.hasOwnProperty(rt)||(q[rt]=et),X.hasOwnProperty(rt)||(X[rt]=it)}}})}),N.forEach(B=>{var et,st,at,mt;if(B.parentId&&D.hasOwnProperty(null!==(et=B.parentId)&&void 0!==et?et:0)&&!this.commonService.filterArray(W,null!==(st=B.parentId)&&void 0!==st?st:"0")){var it=D[B.parentId][D[B.parentId].length-1];let ht=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");B.fullName=null!==(at=B.fullName)&&void 0!==at?at:ht+"_"+it.id;var rt=B.parentId+"_"+(null!==(mt=B.id)&&void 0!==mt?mt:0)+"_"+it.id;q.hasOwnProperty(rt)||(q[rt]=B),X.hasOwnProperty(rt)||(X[rt]=it)}});for(var E=0;E<k.length;E++)(this.answerTypeService.isOneChoiceAnswer(k[E].answerType)||this.answerTypeService.isFillAnswer(k[E].answerType))&&(k[E].countFalse=0,k[E].countNotAnswer=0,k[E].countTested=0,k[E].countAttended=0,k[E].countTrue=0,k[E].indexQuestion=E,k[E].studentWhoFalse=[],k[E].studentWhoNotAnswer=[]);for(var J in X)if(X.hasOwnProperty(J))for(E=0;E<k.length;E++)if(this.answerTypeService.isOneChoiceAnswer(k[E].answerType)||this.answerTypeService.isFillAnswer(k[E].answerType)){var z=X[J],K=q.hasOwnProperty(J)?q[J]:{};z.correctQuestionIds&&this.commonService.filterArray(z.correctQuestionIds,k[E].id)&&(k[E].countTrue++,k[E].countTested++),z.wrongQuestionIds&&this.commonService.filterArray(z.wrongQuestionIds,k[E].id)&&(k[E].countFalse++,k[E].countTested++,this.commonService.filterArray(k[E].studentWhoFalse,{studentId:K.id,parentId:K.parentId,fullName:K.fullName,nameImages:K.nameImages})||null===(h=k[E].studentWhoFalse)||void 0===h||h.push({studentId:K.id,parentId:K.parentId,fullName:K.fullName,nameImages:K.nameImages})),z.resultQuestionIds&&this.commonService.filterArray(z.resultQuestionIds,k[E].id)&&k[E].countAttended++,this.commonService.filterArray(z.resultQuestionIds,k[E].id)&&!this.commonService.filterArray(z.correctQuestionIds,k[E].id)&&!this.commonService.filterArray(z.wrongQuestionIds,k[E].id)&&(k[E].countNotAnswer++,this.commonService.filterArray(k[E].studentWhoNotAnswer,{studentId:K.id,parentId:K.parentId,fullName:K.fullName,nameImages:K.nameImages})||null===(f=k[E].studentWhoNotAnswer)||void 0===f||f.push({studentId:K.id,parentId:K.parentId,fullName:K.fullName,nameImages:K.nameImages}))}return k.forEach(B=>{(this.answerTypeService.isOneChoiceAnswer(B.answerType)||this.answerTypeService.isFillAnswer(B.answerType))&&Q.push(B)}),Q}getData(e){return(0,ke.mG)(this,void 0,void 0,function*(){return new Promise((n,i)=>{let a=0,r=0,l=this.commonService.getFormObj(this.form);1==l.statisticalCheck&&0==this.statisticalLoaded&&a++,1==l.listquestionCheck&&0==this.listquestionLoaded&&a++,1==l.tablescoreCheck&&0==this.tablescoreLoaded&&a++,0==a&&n(!0),this.statisticalApiService.getExamStatisticObjs("statistic_export_excel",e,1).subscribe(c=>{var _,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et,st,at,mt,it,rt,ht,ft;if(1==l.statisticalCheck&&0==this.statisticalLoaded){if(1==c.success&&c.data){var Tt=c.data.classroomObjsWithStudentObjs&&c.data.classroomObjsWithStudentObjs.length>0?c.data.classroomObjsWithStudentObjs:new Array,Ot=c.data.resultObjs&&c.data.resultObjs.length>0?c.data.resultObjs:new Array,kt=this.testedListApiService.mergeStudentWithAvatar(Ot??[]),gt=[],Gt=[],bt=this.dictionaryService.getDictionaryByFieldTS(kt,"parentId");if(this.examObj=null!==(_=c.data.examObj)&&void 0!==_?_:{},Tt.length>0){var ve=[],tn=[];Tt.forEach(re=>{var ce,oe=[],$t=[],Mt=0;null===(ce=re.studentObjs)||void 0===ce||ce.forEach(te=>{var Ye,Ge,Bt,he,Oe,Kt,Ue;ve.push(null!==(Ye=te.parentId)&&void 0!==Ye?Ye:"0");var $e=null!==(Ge=te.parentId)&&void 0!==Ge?Ge:"0";if(bt.hasOwnProperty($e)&&(Array.isArray(te.examResultObjs)||(te.examResultObjs=[]),te.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Oe=null===(Bt=te.examResultObjs)||void 0===Bt?void 0:Bt.concat(null!==(he=bt[$e].examResultObjs)&&void 0!==he?he:[]))&&void 0!==Oe?Oe:[],null!==(Kt=te.id)&&void 0!==Kt?Kt:"0")),te.examResultObjs&&te.examResultObjs.length>0){var ee=te.examResultObjs[te.examResultObjs.length-1];ee.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(Ue=this.examObj.examType)&&void 0!==Ue?Ue:0)||ee.confirmedAt)&&$t.push(ee)}Mt++});for(var Nt=this.homeworkExamService.countMarks($t),Lt=0;Lt<Nt.length;Lt++)oe.push({key:10==Lt?"Avg":"<="+(Lt+1),count:Nt[Lt],percent:this.homeworkExamService.calcPercent(Nt[Lt],$t.length)});gt.push({classObj:re.classroomObj,registerCount:Mt,testedCount:$t.length>0?$t.length:0,markPercent:oe})});var dn=[],Me=[];kt.forEach(re=>{var ce,oe,$t,Mt;if(!this.commonService.filterArray(ve,null!==(ce=re.parentId)&&void 0!==ce?ce:"0")&&re.examResultObjs&&re.examResultObjs.length>0){var Nt=this.statisticalApiService.findExamResultOfStudent(re.examResultObjs,null!==(oe=re.id)&&void 0!==oe?oe:"0");if(Nt.length>0){var Lt=Nt[Nt.length-1];Lt.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==($t=this.examObj.examType)&&void 0!==$t?$t:0)||Lt.confirmedAt)&&Me.push(Lt),tn.push(null!==(Mt=re.parentId)&&void 0!==Mt?Mt:"0"))}}});for(var Pe=this.homeworkExamService.countMarks(Me),St=0;St<Pe.length;St++)dn.push({key:10==St?"Avg":"<="+(St+1),count:Pe[St],percent:this.homeworkExamService.calcPercent(Pe[St],Me.length)});Me.length>0&&Gt.push({classObj:{},registerCount:tn.length>0?tn.length:0,testedCount:Me.length>0?Me.length:0,markPercent:dn})}else{var He=[],Yt=[],Qe=[];for(kt.forEach(ce=>{var oe,$t,Mt;if(ce.examResultObjs&&ce.examResultObjs.length>0){var Nt=this.statisticalApiService.findExamResultOfStudent(ce.examResultObjs,null!==(oe=ce.id)&&void 0!==oe?oe:"0");if(Nt.length>0){var Lt=Nt[Nt.length-1];Lt.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==($t=this.examObj.examType)&&void 0!==$t?$t:0)||Lt.confirmedAt)&&Yt.push(Lt),Qe.push(null!==(Mt=ce.parentId)&&void 0!==Mt?Mt:"0"))}}}),Pe=this.homeworkExamService.countMarks(Yt),St=0;St<Pe.length;St++)He.push({key:10==St?"Avg":"<="+(St+1),count:Pe[St],percent:this.homeworkExamService.calcPercent(Pe[St],Yt.length)});Yt.length>0&&Gt.push({classObj:{},registerCount:Qe.length>0?Qe.length:0,testedCount:Yt.length>0?Yt.length:0,markPercent:He})}this.Statistic={statisticClass:gt,statisticNoClass:Gt},this.statisticalLoaded=!0}else this.showErrorSnack(null!==(d=c.message)&&void 0!==d?d:"");r++,r==a&&n(!0)}if(1==l.listquestionCheck&&0==this.listquestionLoaded){if(1==c.success&&c.data){Ot=c.data.resultObjs&&c.data.resultObjs.length>0?c.data.resultObjs:new Array,kt=this.testedListApiService.mergeStudentWithAvatar(Ot??[]);var Zt=null!==(p=this.commonService.castJsonToClassObjs(ua,JSON.stringify(c.data.classroomObjs)))&&void 0!==p?p:[],en={};null===(h=c.data.classroomObjsWithStudentObjs)||void 0===h||h.forEach(Mt=>{var Nt,Lt,_e,te;Mt.classroomObj&&Mt.studentObjs&&(en.hasOwnProperty(null!==(Lt=null===(Nt=Mt.classroomObj)||void 0===Nt?void 0:Nt.id)&&void 0!==Lt?Lt:0)||(en[null!==(te=null===(_e=Mt.classroomObj)||void 0===_e?void 0:_e.id)&&void 0!==te?te:0]=Mt.studentObjs))});for(var ge=c.data.questionObjs&&c.data.questionObjs.length>0?c.data.questionObjs:new Array,me=null!==(f=c.data)&&void 0!==f&&f.resultQuestionObjs&&(null===(w=c.data)||void 0===w?void 0:w.resultQuestionObjs.length)>0?c.data.resultQuestionObjs:new Array,De=this.dictionaryService.getDictionaryByGroupFieldTS(me,"userId"),qt=(ve=[],0);qt<Zt.length;qt++)en.hasOwnProperty(null!==(k=Zt[qt].id)&&void 0!==k?k:0)&&(Zt[qt].students=en[null!==(S=Zt[qt].id)&&void 0!==S?S:0]),null===(D=Zt[qt].students)||void 0===D||D.forEach(Mt=>{var Nt,Lt;if(Mt.parentId&&!this.commonService.filterArray(ve,Mt.parentId)&&ve.push(Mt.parentId),Mt.parentId&&De.hasOwnProperty(Mt.parentId)&&!this.commonService.filterArray(Zt[qt].listResult,De[Mt.parentId][0])){var _e=this.statisticalApiService.findExamResultOfStudent(De[Mt.parentId],null!==(Nt=Mt.id)&&void 0!==Nt?Nt:"0");_e.length>0&&(null===(Lt=Zt[qt].listResult)||void 0===Lt||Lt.push(_e[_e.length-1]))}});var nn=!1,Bn={id:-1,name:this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"),userTested:[],listResult:[],listQuestions:[]};kt.forEach(Mt=>{var Nt,Lt,_e,te,Ye;if(!this.commonService.filterArray(ve,null!==(Nt=Mt.parentId)&&void 0!==Nt?Nt:"0")){if(Mt.parentId&&De.hasOwnProperty(null!==(Lt=Mt.parentId)&&void 0!==Lt?Lt:0)){var Ge=this.statisticalApiService.findExamResultOfStudent(De[Mt.parentId],null!==(_e=Mt.id)&&void 0!==_e?_e:"0");if(Ge.length>0){var Bt=Ge[Ge.length-1];Bn.listResult.push(Bt);let he=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");Mt.fullName=null!==(te=Mt.fullName)&&void 0!==te?te:he+"_"+Bt.id,null===(Ye=Bn.userTested)||void 0===Ye||Ye.push(Mt)}}nn=!0}}),nn&&Zt.push(Bn);var Ti=0;for(St=0;St<Zt.length;St++){var se=[];se=null!==(Q=this.commonService.castJsonToClassObjs(to,JSON.stringify(ge)))&&void 0!==Q?Q:[];for(var on=0;on<se.length;on++)(this.answerTypeService.isOneChoiceAnswer(se[on].answerType)||this.answerTypeService.isFillAnswer(se[on].answerType))&&(se[on].indexQuestion=on,Zt[St].listQuestions.push(se[on]));var pe=this.dictionaryService.getDictionaryByGroupFieldTS(null!==(N=Zt[St].listResult)&&void 0!==N?N:[],"userId");for(var fe in pe)if(pe.hasOwnProperty(fe)){Ti++;var Xt=-1==Zt[St].id?null===(q=Zt[St].userTested)||void 0===q?void 0:q.filter(Nt=>Nt.parentId==pe[fe][0].userId):null===(W=Zt[St].students)||void 0===W?void 0:W.filter(Nt=>Nt.parentId==pe[fe][0].userId);for(qt=0;qt<Zt[St].listQuestions.length;qt++)(this.answerTypeService.isOneChoiceAnswer(Zt[St].listQuestions[qt].answerType)||this.answerTypeService.isFillAnswer(Zt[St].listQuestions[qt].answerType))&&(pe[fe][0].correctQuestionIds&&this.commonService.filterArray(pe[fe][0].correctQuestionIds,Zt[St].listQuestions[qt].id)&&(Zt[St].listQuestions[qt].countTrue++,Zt[St].listQuestions[qt].countTested++),pe[fe][0].wrongQuestionIds&&this.commonService.filterArray(pe[fe][0].wrongQuestionIds,Zt[St].listQuestions[qt].id)&&(Zt[St].listQuestions[qt].countFalse++,Zt[St].listQuestions[qt].countTested++,Xt&&Xt.length>0&&(this.commonService.filterArray(Zt[St].listQuestions[qt].studentWhoFalse,{studentId:Xt[0].id,parentId:Xt[0].parentId,fullName:Xt[0].fullName,nameImages:Xt[0].nameImages})||null===(X=Zt[St].listQuestions[qt].studentWhoFalse)||void 0===X||X.push({studentId:Xt[0].id,parentId:Xt[0].parentId,fullName:Xt[0].fullName,nameImages:Xt[0].nameImages}))),pe[fe][0].resultQuestionIds&&this.commonService.filterArray(pe[fe][0].resultQuestionIds,Zt[St].listQuestions[qt].id)&&Zt[St].listQuestions[qt].countAttended++,this.commonService.filterArray(pe[fe][0].resultQuestionIds,Zt[St].listQuestions[qt].id)&&!this.commonService.filterArray(pe[fe][0].correctQuestionIds,Zt[St].listQuestions[qt].id)&&!this.commonService.filterArray(pe[fe][0].wrongQuestionIds,Zt[St].listQuestions[qt].id)&&(Zt[St].listQuestions[qt].countNotAnswer++,Xt&&Xt.length>0&&(this.commonService.filterArray(Zt[St].listQuestions[qt].studentWhoNotAnswer,{studentId:Xt[0].id,parentId:Xt[0].parentId,fullName:Xt[0].fullName,nameImages:Xt[0].nameImages})||null===(E=Zt[St].listQuestions[qt].studentWhoNotAnswer)||void 0===E||E.push({studentId:Xt[0].id,parentId:Xt[0].parentId,fullName:Xt[0].fullName,nameImages:Xt[0].nameImages}))))}}this.ListQuest={attended:Ti,listQuestions:this.convertStatisticalAllQuestion(c),listClassStatistic:Zt},this.listquestionLoaded=!0}else this.showErrorSnack(null!==(J=c.message)&&void 0!==J?J:"");r++,r==a&&n(!0)}if(1==l.tablescoreCheck&&0==this.tablescoreLoaded){if(1==c.success&&c.data){this.examObj=null!==(K=null===(z=c.data)||void 0===z?void 0:z.examObj)&&void 0!==K?K:{},this.limitQuestions=null!==(B=this.examObj.countQuestion)&&void 0!==B?B:0;let re=this.homeworkExamService.hasEssayInExam(null!==(et=this.examObj.examType)&&void 0!==et?et:0),ce=c.data.classroomObjsWithStudentObjs&&c.data.classroomObjsWithStudentObjs.length>0?c.data.classroomObjsWithStudentObjs:new Array,oe=null!==(st=c.data)&&void 0!==st&&st.resultObjs&&(null===(at=c.data)||void 0===at?void 0:at.resultObjs.length)>0?c.data.resultObjs:new Array,$t=this.testedListApiService.mergeStudentWithAvatar(oe??[]),Mt=[],Nt={};$t?.forEach(Bt=>{var he,Oe;let Kt=null!==(he=Bt.parentId)&&void 0!==he?he:"0";Nt.hasOwnProperty(Kt)||(Nt[Kt]=null!==(Oe=Bt.examResultObjs)&&void 0!==Oe?Oe:[]),Mt=Mt.concat(Nt[Kt])});let Lt=this.testedListApiService.filterExamResultOnTest(Mt,this.examObj,null!==(mt=c.data.curServerTime)&&void 0!==mt?mt:0),_e=[],te=[],Ye=[],Ge=[];this.homeworkExamService.mustInClassroom(null!==(it=this.examObj.whoAllow)&&void 0!==it?it:0)&&ce.length>0&&ce.forEach(Bt=>{var he;let Oe=[];null===(he=Bt.studentObjs)||void 0===he||he.forEach(Kt=>{var Ue,$e,ee,Mn,Hn,Pn,Yn,Gn;let we={};Ge.push(null!==(Ue=Kt.parentId)&&void 0!==Ue?Ue:"0");let Ln=null!==($e=Kt.parentId)&&void 0!==$e?$e:"0";Nt.hasOwnProperty(Ln)&&(Array.isArray(Kt.examResultObjs)||(Kt.examResultObjs=[]),Kt.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Hn=null===(ee=Kt.examResultObjs)||void 0===ee?void 0:ee.concat(null!==(Mn=Nt[Ln])&&void 0!==Mn?Mn:[]))&&void 0!==Hn?Hn:[],null!==(Pn=Kt.id)&&void 0!==Pn?Pn:"0")),Kt.examResultObjs&&Kt.examResultObjs.length>0&&(we=Kt.examResultObjs[Kt.examResultObjs.length-1]??{});let Ci=Lt.hasOwnProperty(null!==(Yn=we.userId)&&void 0!==Yn?Yn:"0")?Lt[null!==(Gn=we.userId)&&void 0!==Gn?Gn:"0"]:0,Ta=we.mark?we.mark:0,oO=we.id&&Ci>0?we.id:0,aO=we.startedTest?we.startedTest:null,sO=we.confirmedAt?we.confirmedAt:null,rO=we.answeredQuestions?we.answeredQuestions:[],lO=Object.assign(Object.assign({},Kt),{mark:Ta,resultId:oO,startedTest:aO,confirmedAt:sO,status:Ci,answeredQuestions:rO});Oe.push(lO)}),_e.push({classObj:Bt.classroomObj,studentsWithMark:Oe})}),oe.forEach(Bt=>{var he,Oe,Kt,Ue,$e;let ee={};if(!this.commonService.filterArray(Ge,null!==(he=Bt.parentId)&&void 0!==he?he:"0")){Bt.examResultObjs&&Bt.examResultObjs.length>0&&(ee=Bt.examResultObjs[Bt.examResultObjs.length-1]);let Mn=Lt.hasOwnProperty(null!==(Oe=ee.userId)&&void 0!==Oe?Oe:"0")?Lt[null!==(Kt=ee.userId)&&void 0!==Kt?Kt:"0"]:0,Hn=ee.mark?ee.mark:0,Pn=ee.id&&Mn>0?ee.id:0,Yn=ee.startedTest?ee.startedTest:null,Gn=ee.confirmedAt?ee.confirmedAt:null,we=ee.answeredQuestions?ee.answeredQuestions:[],Ln=Object.assign(Object.assign({},Bt),{mark:Hn,resultId:Pn,startedTest:Yn,confirmedAt:Gn,nameImages:null!==(Ue=Bt.nameImages)&&void 0!==Ue?Ue:{},nameImage:"",status:Mn,answeredQuestions:we}),Ci=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");Ln.fullName=null!==($e=Ln.fullName)&&void 0!==$e?$e:Ci+"_"+Pn,Ye.push(Ln)}}),te=Ye;for(let Bt of _e)Bt.studentsWithMark=this.checkStatusStudent(Bt.classObj&&0==Bt.classObj.sortType?this.sortService.sortFirstNameStudents(null!==(rt=Bt.studentsWithMark)&&void 0!==rt?rt:[]):this.sortService.sortArrayByMultipleObjectKeyAsc(null!==(ht=this.commonService.myClone(Bt.studentsWithMark))&&void 0!==ht?ht:[],"pos","id"),re);this.TableScore={statisticClass:_e,statisticNoClass:this.checkStatusStudent(this.sortService.sortFirstNameStudents(te),re)},this.tablescoreLoaded=!0}else this.showErrorSnack(null!==(ft=c.message)&&void 0!==ft?ft:"");r++,r==a&&n(!0)}})})})}getObjKeyLength(e){return Object.keys(e).length}checkAnswerQuestionTableExport(e){var n;let i="";return i=e.correct&&!e.isEssay?"lang_auto_dung":e.correct&&e.isEssay?"lang_auto_cau_TL":"lang_auto_sai",null!==(n=this.commonService.myTranslateInstant(i))&&void 0!==n?n:""}constructor(e,n,i,a,r,l,c,_,d,p,h,f,w,k){super(a),this.statisticalApiService=e,this.testedListApiService=n,this.dialog=i,this.commonService=a,this.activeRoute=r,this.fb=l,this.sortService=c,this.homeworkExamService=_,this.globalService=d,this._decimalPipe=p,this.dictionaryService=h,this.answerTypeService=f,this.mobileWebviewService=w,this.timeService=k,this.viewType=-1,this.form=new m.nJ({}),this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.examId=-1,this.examObj={},this.limitQuestions=0,this.loadingDownload=!1,this.isExportSuccess=void 0,this.isOnApp=!1,this.style_first={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}},diagonal:{style:"thin",color:{rgb:"ffffffff"}},diagonalDown:!0},alignment:{vertical:"center",horizontal:"left",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"ff3c8dbc"}}},this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0}},this.style_footer={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0},fill:{patternType:"solid",fgColor:{rgb:"ffffffff"}}},this.statisticalLoaded=!1,this.listquestionLoaded=!1,this.tablescoreLoaded=!1,this.wb=pt.utils.book_new(),this.Statistic={},this.ListQuest={},this.TableScore={}}ngOnInit(){this.form=this.fb.group({statisticalCheck:[!0],listquestionCheck:[!0],tablescoreCheck:[!0]}),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.examId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==e?e:0,this.isOnApp=this.isMobileWebView}),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_export_excel1"),this.globalService.stopIntervalFunc("statistic_export_excel2"),this.globalService.stopIntervalFunc("statistic_export_excel3"),super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(zn),t.Y36(xn.x),t.Y36(U.on),t.Y36(_t.v),t.Y36(C.gz),t.Y36(m.QS),t.Y36(kn.K),t.Y36(Ve.j),t.Y36(_i.U),t.Y36(y.JJ),t.Y36(no.E),t.Y36(Je.T),t.Y36(ci.F),t.Y36(Ae.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-export-excel"]],inputs:{viewType:"viewType"},features:[t.qOj],decls:33,vars:20,consts:[[1,"intro-y","flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-y","mt-3"],[3,"formGroup"],[1,"box","p-5"],[1,"text-slate-500","border-b","border-slate-200","flex","mb-2","pb-2"],[1,"form-check","mt-2"],["name","statistical","formControlName","statisticalCheck","id","checkbox-switch-1","type","checkbox",1,"form-check-input"],["for","checkbox-switch-1",1,"form-check-label"],["id","checkbox-switch-2","name","listquestion","formControlName","listquestionCheck","type","checkbox",1,"form-check-input"],["for","checkbox-switch-2",1,"form-check-label"],["id","checkbox-switch-3","name","tablescore","formControlName","tablescoreCheck","type","checkbox","value","",1,"form-check-input"],["for","checkbox-switch-3",1,"form-check-label"],[1,"mt-3"],["azt-track-service","export-excel-_De31aTGuF",1,"btn","btn-outline-primary","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","lucide w-4 h-4 mr-2","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(87, 141, 32);",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(204, 49, 80);",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h3"],["d","M8 17h3"],["d","M14 13h3"],["d","M14 17h3"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-md-8","mt-4",2,"color","rgb(87, 141, 32)"],[1,"col-md-8","mt-4",2,"color","rgb(204, 49, 80)"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",5)(14,"div",6),t._UZ(15,"input",9),t.TgZ(16,"label",10),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6),t._UZ(21,"input",11),t.TgZ(22,"label",12),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()(),t.TgZ(25,"div",13)(26,"button",14),t.NdJ("click",function(){return n.exportExcel()}),t.YNc(27,xw,7,0,"svg",15),t.YNc(28,vw,3,0,"span",16),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.YNc(31,bw,3,3,"div",17),t.YNc(32,ww,3,3,"div",18),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,10,"lang_testbank_statistical_export_data_to_excel")," "),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(6),t.hij(" ",t.lcZ(12,12,"lang_testbank_statistical_score_spectrum_statistics")," "),t.xp6(6),t.hij(" ",t.lcZ(18,14,"lang_testbank_statistical_statistics_right_wrong")," "),t.xp6(6),t.hij(" ",t.lcZ(24,16,"lang_testbank_statistical_transcript")," "),t.xp6(4),t.Q6J("ngIf",1!=n.loadingDownload),t.xp6(1),t.Q6J("ngIf",1==n.loadingDownload),t.xp6(1),t.hij("",t.lcZ(30,18,"lang_testbank_statistical_export_file_excel")," "),t.xp6(2),t.Q6J("ngIf",!n.isOnApp&&!0===n.isExportSuccess),t.xp6(1),t.Q6J("ngIf",!n.isOnApp&&!1===n.isExportSuccess))},dependencies:[y.O5,m._Y,m.Wl,m.JJ,m.JL,m.sg,m.u,Jt.M,tt.bT],styles:["td[_ngcontent-%COMP%]{vertical-align:center!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:unset!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#3c8dbc;color:#fff}hr.solid[_ngcontent-%COMP%]{border-top:1px solid #bbb}input[type=checkbox].export-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;vertical-align:middle}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#252525;padding-top:1rem;padding-bottom:.5rem;padding-right:.5rem}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:19px;height:19px;margin:-2px 10px 0 0;vertical-align:middle;cursor:pointer}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:.5rem}@media only screen and (max-width: 720px){.export-block[_ngcontent-%COMP%]{text-align:center}}"]}),o})();function Cw(o,s){1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&o&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),t.xp6(3),t.hij("",t.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function kw(o,s){if(1&o&&(t.TgZ(0,"div",51),t._UZ(1,"app-export-excel",52),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("viewType",e.viewType)}}function Ow(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.goToStudentList(i))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.classObj.name)}}function yw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function Aw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function Sw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function Zw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function Ew(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function Iw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function Mw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function Pw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function Lw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function jw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function Nw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function qw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function Qw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function Dw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function Uw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function Fw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function Rw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function zw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function Jw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function Bw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function Hw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function Yw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function Gw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function $w(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function Kw(o,s){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,Ow,2,1,"td",53),t.YNc(2,yw,2,1,"td",54),t.YNc(3,Aw,2,1,"td",54),t.YNc(4,Sw,2,1,"td",54),t.YNc(5,Zw,4,8,"td",54),t.YNc(6,Ew,2,1,"td",54),t.YNc(7,Iw,4,8,"td",54),t.YNc(8,Mw,2,1,"td",54),t.YNc(9,Pw,4,8,"td",54),t.YNc(10,Lw,2,1,"td",54),t.YNc(11,jw,4,8,"td",54),t.YNc(12,Nw,2,1,"td",54),t.YNc(13,qw,4,8,"td",54),t.YNc(14,Qw,2,1,"td",54),t.YNc(15,Dw,4,8,"td",54),t.YNc(16,Uw,2,1,"td",54),t.YNc(17,Fw,4,8,"td",54),t.YNc(18,Rw,2,1,"td",54),t.YNc(19,zw,4,8,"td",54),t.YNc(20,Jw,2,1,"td",54),t.YNc(21,Bw,4,8,"td",54),t.YNc(22,Hw,2,1,"td",54),t.YNc(23,Yw,4,8,"td",54),t.YNc(24,Gw,2,1,"td",54),t.YNc(25,$w,4,8,"td",54),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj)}}function Ww(o,s){1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_freelance_contestant")))}function Vw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function Xw(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function tT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function eT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function nT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function iT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function oT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function aT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function sT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function rT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function lT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function cT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function _T(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function dT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function uT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function mT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function pT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function hT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function gT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function fT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function xT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function vT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function bT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function wT(o,s){if(1&o&&(t.TgZ(0,"td",50),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function TT(o,s){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,Ww,3,3,"td",54),t.YNc(2,Vw,2,1,"td",54),t.YNc(3,Xw,2,1,"td",54),t.YNc(4,tT,2,1,"td",54),t.YNc(5,eT,4,8,"td",54),t.YNc(6,nT,2,1,"td",54),t.YNc(7,iT,4,8,"td",54),t.YNc(8,oT,2,1,"td",54),t.YNc(9,aT,4,8,"td",54),t.YNc(10,sT,2,1,"td",54),t.YNc(11,rT,4,8,"td",54),t.YNc(12,lT,2,1,"td",54),t.YNc(13,cT,4,8,"td",54),t.YNc(14,_T,2,1,"td",54),t.YNc(15,dT,4,8,"td",54),t.YNc(16,uT,2,1,"td",54),t.YNc(17,mT,4,8,"td",54),t.YNc(18,pT,2,1,"td",54),t.YNc(19,hT,4,8,"td",54),t.YNc(20,gT,2,1,"td",54),t.YNc(21,fT,4,8,"td",54),t.YNc(22,xT,2,1,"td",54),t.YNc(23,vT,4,8,"td",54),t.YNc(24,bT,2,1,"td",54),t.YNc(25,wT,4,8,"td",54),t.qZA()),2&o){const e=s.$implicit;let n,i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B;t.xp6(1),t.Q6J("ngIf",(null!==(n=e.registerCount)&&void 0!==n?n:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(i=e.registerCount)&&void 0!==i?i:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(a=e.registerCount)&&void 0!==a?a:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(r=e.registerCount)&&void 0!==r?r:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(l=e.registerCount)&&void 0!==l?l:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(c=e.registerCount)&&void 0!==c?c:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(_=e.registerCount)&&void 0!==_?_:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(d=e.registerCount)&&void 0!==d?d:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(p=e.registerCount)&&void 0!==p?p:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(h=e.registerCount)&&void 0!==h?h:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(f=e.registerCount)&&void 0!==f?f:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(w=e.registerCount)&&void 0!==w?w:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(k=e.registerCount)&&void 0!==k?k:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(S=e.registerCount)&&void 0!==S?S:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(D=e.registerCount)&&void 0!==D?D:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(Q=e.registerCount)&&void 0!==Q?Q:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(N=e.registerCount)&&void 0!==N?N:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(q=e.registerCount)&&void 0!==q?q:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(W=e.registerCount)&&void 0!==W?W:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(X=e.registerCount)&&void 0!==X?X:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(E=e.registerCount)&&void 0!==E?E:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(J=e.registerCount)&&void 0!==J?J:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(z=e.registerCount)&&void 0!==z?z:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(K=e.registerCount)&&void 0!==K?K:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(B=e.registerCount)&&void 0!==B?B:0)>0)}}function CT(o,s){if(1&o&&(t.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),t._uU(10),t.qZA(),t.TgZ(11,"div",12)(12,"div",13),t.O4$(),t.TgZ(13,"svg",14),t._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(19,"div",18)(20,"div",19),t._uU(21),t.qZA()()(),t.TgZ(22,"div",12)(23,"div",13),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(31,"div",18)(32,"div",19),t._uU(33),t.qZA(),t.TgZ(34,"div",22),t._uU(35),t.ALo(36,"replace"),t.ALo(37,"number"),t.qZA()()(),t.TgZ(38,"div",12)(39,"div",13),t.O4$(),t.TgZ(40,"svg",14),t._UZ(41,"path",23)(42,"path",24)(43,"path",25),t.qZA(),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(46,"div",18)(47,"div",19),t._uU(48),t.qZA()()()()(),t.TgZ(49,"div",26)(50,"div",27)(51,"p",28),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"div",18)(55,"span",19),t._uU(56),t.ALo(57,"replace"),t.ALo(58,"number"),t.qZA()()(),t.TgZ(59,"div",29)(60,"p",28),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"div",18)(64,"span",19),t._uU(65),t.qZA(),t.TgZ(66,"div",22),t._uU(67),t.ALo(68,"replace"),t.ALo(69,"number"),t.qZA()()(),t.TgZ(70,"div",27)(71,"p",30),t._uU(72),t.ALo(73,"mytranslate"),t.qZA(),t.TgZ(74,"div",18)(75,"span",19),t._uU(76),t.qZA(),t.TgZ(77,"div",31),t._uU(78),t.ALo(79,"replace"),t.ALo(80,"number"),t.qZA()()(),t.TgZ(81,"div",27)(82,"p",30),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.TgZ(85,"div",18)(86,"span",19),t._uU(87),t.qZA(),t.TgZ(88,"div",32),t._uU(89),t.ALo(90,"replace"),t.ALo(91,"number"),t.qZA()()()()()()(),t.YNc(92,kw,2,1,"div",33),t.TgZ(93,"div",2)(94,"div",3)(95,"h3",4),t._uU(96),t.ALo(97,"mytranslate"),t.qZA()(),t.TgZ(98,"div",34)(99,"div",35)(100,"div",36)(101,"div",37),t._UZ(102,"div",38),t.qZA()()()()(),t.TgZ(103,"div",2)(104,"div",3)(105,"h3",4),t._uU(106),t.ALo(107,"mytranslate"),t.qZA()(),t.TgZ(108,"div",39)(109,"div",40)(110,"table",41)(111,"thead",42)(112,"tr")(113,"th",43),t._uU(114),t.ALo(115,"mytranslate"),t.qZA(),t.TgZ(116,"th",44),t._uU(117),t.ALo(118,"mytranslate"),t.qZA(),t.TgZ(119,"th",44),t._uU(120,"<= 1"),t.qZA(),t.TgZ(121,"th",44),t._uU(122,"<= 2"),t.qZA(),t.TgZ(123,"th",44),t._uU(124,"<= 3"),t.qZA(),t.TgZ(125,"th",44),t._uU(126,"<= 4"),t.qZA(),t.TgZ(127,"th",44),t._uU(128,"<= 5"),t.qZA(),t.TgZ(129,"th",44),t._uU(130,"<= 6"),t.qZA(),t.TgZ(131,"th",44),t._uU(132,"<= 7"),t.qZA(),t.TgZ(133,"th",44),t._uU(134,"<= 8"),t.qZA(),t.TgZ(135,"th",44),t._uU(136,"<= 9"),t.qZA(),t.TgZ(137,"th",44),t._uU(138,"<= 10"),t.qZA(),t.TgZ(139,"th",44),t._uU(140),t.ALo(141,"mytranslate"),t.qZA()()(),t.TgZ(142,"tbody",45)(143,"tr"),t._UZ(144,"td"),t.TgZ(145,"td",46),t._uU(146),t.ALo(147,"mytranslate"),t.qZA(),t.TgZ(148,"td",46),t._uU(149),t.ALo(150,"mytranslate"),t.qZA(),t.TgZ(151,"td",47),t._uU(152),t.ALo(153,"mytranslate"),t.qZA(),t.TgZ(154,"td",47),t._uU(155,"%"),t.qZA(),t.TgZ(156,"td",47),t._uU(157),t.ALo(158,"mytranslate"),t.qZA(),t.TgZ(159,"td",47),t._uU(160,"%"),t.qZA(),t.TgZ(161,"td",47),t._uU(162),t.ALo(163,"mytranslate"),t.qZA(),t.TgZ(164,"td",47),t._uU(165,"%"),t.qZA(),t.TgZ(166,"td",47),t._uU(167),t.ALo(168,"mytranslate"),t.qZA(),t.TgZ(169,"td",47),t._uU(170,"%"),t.qZA(),t.TgZ(171,"td",47),t._uU(172),t.ALo(173,"mytranslate"),t.qZA(),t.TgZ(174,"td",47),t._uU(175,"%"),t.qZA(),t.TgZ(176,"td",47),t._uU(177),t.ALo(178,"mytranslate"),t.qZA(),t.TgZ(179,"td",47),t._uU(180,"%"),t.qZA(),t.TgZ(181,"td",47),t._uU(182),t.ALo(183,"mytranslate"),t.qZA(),t.TgZ(184,"td",47),t._uU(185,"%"),t.qZA(),t.TgZ(186,"td",47),t._uU(187),t.ALo(188,"mytranslate"),t.qZA(),t.TgZ(189,"td",47),t._uU(190,"%"),t.qZA(),t.TgZ(191,"td",47),t._uU(192),t.ALo(193,"mytranslate"),t.qZA(),t.TgZ(194,"td",47),t._uU(195,"%"),t.qZA(),t.TgZ(196,"td",47),t._uU(197),t.ALo(198,"mytranslate"),t.qZA(),t.TgZ(199,"td",47),t._uU(200,"%"),t.qZA(),t.TgZ(201,"td",47),t._uU(202),t.ALo(203,"mytranslate"),t.qZA(),t.TgZ(204,"td",47),t._uU(205,"%"),t.qZA()(),t.YNc(206,Kw,26,25,"tr",48),t.YNc(207,TT,26,25,"tr",48),t.TgZ(208,"tr",49)(209,"td",50),t._uU(210),t.ALo(211,"mytranslate"),t.qZA(),t.TgZ(212,"td",50),t._uU(213),t.qZA(),t.TgZ(214,"td",50),t._uU(215),t.qZA(),t.TgZ(216,"td",50),t._uU(217),t.qZA(),t.TgZ(218,"td",50),t._uU(219),t.ALo(220,"replace"),t.ALo(221,"number"),t.qZA(),t.TgZ(222,"td",50),t._uU(223),t.qZA(),t.TgZ(224,"td",50),t._uU(225),t.ALo(226,"replace"),t.ALo(227,"number"),t.qZA(),t.TgZ(228,"td",50),t._uU(229),t.qZA(),t.TgZ(230,"td",50),t._uU(231),t.ALo(232,"replace"),t.ALo(233,"number"),t.qZA(),t.TgZ(234,"td",50),t._uU(235),t.qZA(),t.TgZ(236,"td",50),t._uU(237),t.ALo(238,"replace"),t.ALo(239,"number"),t.qZA(),t.TgZ(240,"td",50),t._uU(241),t.qZA(),t.TgZ(242,"td",50),t._uU(243),t.ALo(244,"replace"),t.ALo(245,"number"),t.qZA(),t.TgZ(246,"td",50),t._uU(247),t.qZA(),t.TgZ(248,"td",50),t._uU(249),t.ALo(250,"replace"),t.ALo(251,"number"),t.qZA(),t.TgZ(252,"td",50),t._uU(253),t.qZA(),t.TgZ(254,"td",50),t._uU(255),t.ALo(256,"replace"),t.ALo(257,"number"),t.qZA(),t.TgZ(258,"td",50),t._uU(259),t.qZA(),t.TgZ(260,"td",50),t._uU(261),t.ALo(262,"replace"),t.ALo(263,"number"),t.qZA(),t.TgZ(264,"td",50),t._uU(265),t.qZA(),t.TgZ(266,"td",50),t._uU(267),t.ALo(268,"replace"),t.ALo(269,"number"),t.qZA(),t.TgZ(270,"td",50),t._uU(271),t.qZA(),t.TgZ(272,"td",50),t._uU(273),t.ALo(274,"replace"),t.ALo(275,"number"),t.qZA(),t.TgZ(276,"td",50),t._uU(277),t.qZA(),t.TgZ(278,"td",50),t._uU(279),t.ALo(280,"replace"),t.ALo(281,"number"),t.qZA()()()()()()()),2&o){const e=t.oxw();let n;t.xp6(3),t.hij(" ",t.lcZ(4,67,"lang_auto_chi_so_co_ban")," "),t.xp6(7),t.hij(" ",e.examObj.name," "),t.xp6(7),t.hij(" ",t.lcZ(18,69,"lang_auto_so_nguoi_dang_ky_thi")," "),t.xp6(4),t.Oqu(e.countStudentRegister),t.xp6(8),t.hij(" ",t.lcZ(30,71,"lang_auto_so_nguoi_thi")," "),t.xp6(4),t.Oqu(e.countStudentRegister-e.countStudentTakeExam),t.xp6(2),t.hij("",null!==(n=t.Dn7(36,73,t.xi3(37,77,(e.countStudentRegister-e.countStudentTakeExam)/e.countStudentRegister*100,"1.0-2"),",","."))&&void 0!==n?n:0,"%"),t.xp6(9),t.hij(" ",t.lcZ(45,80,"lang_auto_tong_luot_lam")," "),t.xp6(4),t.Oqu(e.totalAttended),t.xp6(4),t.hij(" ",t.lcZ(53,82,"lang_auto_diem_trung_binh")," "),t.xp6(4),t.Oqu(t.Dn7(57,84,t.xi3(58,88,e.avgPoint,"1.0-2"),",",".")),t.xp6(5),t.hij(" ",t.lcZ(62,91,"lang_auto_so_hoc_sinh_dat_diem")+" "," <=1 "),t.xp6(4),t.Oqu(e.markPointOne),t.xp6(2),t.hij("",t.Dn7(68,93,t.xi3(69,97,e.markPercentOne?e.markPercentOne:0,"1.0-2"),",","."),"%"),t.xp6(5),t.Oqu(t.lcZ(73,100,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.hij("",t.Dn7(79,102,t.xi3(80,106,e.markPercentAvg?e.markPercentAvg:0,"1.0-2"),",","."),"%"),t.xp6(5),t.hij(" ",t.lcZ(84,109,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),t.xp6(4),t.Oqu(e.highestCountPoint),t.xp6(2),t.hij("",t.Dn7(90,111,t.xi3(91,115,e.highestPercentPoint?e.highestPercentPoint:0,"1.0-2"),",","."),"%"),t.xp6(3),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(4),t.hij(" ",t.lcZ(97,118,"lang_auto_bieu_do_pho_diem")," "),t.xp6(6),t.Q6J("chart",e.chart),t.xp6(4),t.hij(" ",t.lcZ(107,120,"lang_auto_bang_tan_so")," "),t.xp6(8),t.Oqu(t.lcZ(115,122,"lang_testbank_statistical_class")),t.xp6(3),t.Oqu(t.lcZ(118,124,"lang_testbank_statistical_number_student")),t.xp6(23),t.hij("",t.lcZ(141,126,"lang_testbank_statistical_on_tb")," (>= 5)"),t.xp6(6),t.Oqu(t.lcZ(147,128,"lang_buttom_register")),t.xp6(3),t.Oqu(t.lcZ(150,130,"lang_testbank_statistical_join_exam")),t.xp6(3),t.Oqu(t.lcZ(153,132,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(158,134,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(163,136,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(168,138,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(173,140,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(178,142,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(183,144,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(188,146,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(193,148,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(198,150,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(203,152,"lang_auto_amount")),t.xp6(4),t.Q6J("ngForOf",e.statistic),t.xp6(1),t.Q6J("ngForOf",e.freeStudentList),t.xp6(3),t.Oqu(t.lcZ(211,154,"lang_testbank_statistical_total")),t.xp6(3),t.Oqu(e.countStudentRegister),t.xp6(2),t.Oqu(e.countStudentTakeExam),t.xp6(2),t.Oqu(e.markPointOne),t.xp6(2),t.Oqu(t.Dn7(220,156,t.xi3(221,160,e.markPercentOne,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTwo),t.xp6(2),t.Oqu(t.Dn7(226,163,t.xi3(227,167,e.markPercentTwo,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointThree),t.xp6(2),t.Oqu(t.Dn7(232,170,t.xi3(233,174,e.markPercentThree,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFour),t.xp6(2),t.Oqu(t.Dn7(238,177,t.xi3(239,181,e.markPercentFour,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFive),t.xp6(2),t.Oqu(t.Dn7(244,184,t.xi3(245,188,e.markPercentFive,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSix),t.xp6(2),t.Oqu(t.Dn7(250,191,t.xi3(251,195,e.markPercentSix,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSeven),t.xp6(2),t.Oqu(t.Dn7(256,198,t.xi3(257,202,e.markPercentSeven,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointEight),t.xp6(2),t.Oqu(t.Dn7(262,205,t.xi3(263,209,e.markPercentEight,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointNine),t.xp6(2),t.Oqu(t.Dn7(268,212,t.xi3(269,216,e.markPercentNine,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTen),t.xp6(2),t.Oqu(t.Dn7(274,219,t.xi3(275,223,e.markPercentTen,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.Oqu(t.Dn7(280,226,t.xi3(281,230,e.markPercentAvg,"1.0-2"),",","."))}}let kT=(()=>{class o extends R.Q{getDataStatistic(){var e,n,i;if(this.initStatusObj(),this.dataStatistical){let q=this.dataStatistical;if(1==q.success&&q.data){var a=q.data.classroomObjsWithStudentObjs&&q.data.classroomObjsWithStudentObjs.length>0?q.data.classroomObjsWithStudentObjs:new Array,r=q.data.resultObjs&&q.data.resultObjs.length>0?q.data.resultObjs:new Array,l=this.testedListApiService.mergeStudentWithAvatar(r??[]),c=[],_=[],d=this.dictionaryService.getDictionaryByFieldTS(l,"parentId");let W=0,X=0;if(this.examObj=null!==(e=q.data.examObj)&&void 0!==e?e:{},this.totalAttended=null!==(n=q.data.totalAttended)&&void 0!==n?n:0,a.length>0){var p=[],h=[];a.forEach(J=>{var z,K=[],B=[],et=0;null===(z=J.studentObjs)||void 0===z||z.forEach(it=>{var rt,ht,ft,Tt,Ot,kt,gt;p.push(null!==(rt=it.parentId)&&void 0!==rt?rt:"0");var Gt=null!==(ht=it.parentId)&&void 0!==ht?ht:"0";if(d.hasOwnProperty(Gt)&&(Array.isArray(it.examResultObjs)||(it.examResultObjs=[]),it.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Ot=null===(ft=it.examResultObjs)||void 0===ft?void 0:ft.concat(null!==(Tt=d[Gt].examResultObjs)&&void 0!==Tt?Tt:[]))&&void 0!==Ot?Ot:[],null!==(kt=it.id)&&void 0!==kt?kt:"0")),it.examResultObjs&&it.examResultObjs.length>0){var bt=it.examResultObjs[it.examResultObjs.length-1];bt.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(gt=this.examObj.examType)&&void 0!==gt?gt:0)||bt.confirmedAt)&&(B.push(bt),null!=bt.mark&&(W+=bt.mark))}et++});for(var st=this.homeworkExamService.countMarks(B),at=0;at<st.length;at++)K.push({key:10==at?"Avg":"<="+(at+1),count:st[at],percent:this.homeworkExamService.calcPercent(st[at],B.length)});X+=B.length,c.push({classObj:J.classroomObj,registerCount:et,testedCount:B.length>0?B.length:0,markPercent:K})});var f=[],w=[];let E=0;l.forEach(J=>{var z,K,B,et;if(!this.commonService.filterArray(p,null!==(z=J.parentId)&&void 0!==z?z:"0")&&J.examResultObjs&&J.examResultObjs.length>0){var st=this.statisticalApiService.findExamResultOfStudent(J.examResultObjs,null!==(K=J.id)&&void 0!==K?K:"0");if(st.length>0){var at=st[st.length-1];E++,at.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==(B=this.examObj.examType)&&void 0!==B?B:0)||at.confirmedAt)&&(w.push(at),null!=at.mark&&(W+=at.mark)),h.push(null!==(et=J.parentId)&&void 0!==et?et:"0"))}}});for(var k=this.homeworkExamService.countMarks(w),S=0;S<k.length;S++)f.push({key:10==S?"Avg":"<="+(S+1),count:k[S],percent:this.homeworkExamService.calcPercent(k[S],w.length)});_.push({classObj:{},registerCount:E,testedCount:w.length>0?w.length:0,markPercent:f}),X+=w.length,this.avgPoint=W/X,this.readyData(c,_)}else{var Q=[],N=[];let E=0;for(l.forEach(z=>{var K,B;if(z.examResultObjs&&z.examResultObjs.length>0){var et=this.statisticalApiService.findExamResultOfStudent(z.examResultObjs,null!==(K=z.id)&&void 0!==K?K:"0");if(et.length>0){var st=et[et.length-1];E++,st.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(B=this.examObj.examType)&&void 0!==B?B:0)||st.confirmedAt)&&(N.push(st),null!=st.mark&&(W+=st.mark))}}}),k=this.homeworkExamService.countMarks(N),S=0;S<k.length;S++)Q.push({key:10==S?"Avg":"<="+(S+1),count:k[S],percent:this.homeworkExamService.calcPercent(k[S],N.length)});_.push({classObj:{},registerCount:E,testedCount:N.length>0?N.length:0,markPercent:Q}),X=N.length,this.avgPoint=W/X,this.readyData(c,_)}}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(i=q.message)&&void 0!==i?i:"")}else this.doneLoadingEmit.emit(!1)}readyData(e,n){this.statistic=e,this.freeStudentList=n,this.totalStudentRegister(this.statistic,this.freeStudentList),this.totalStudentTakeExam(this.statistic,this.freeStudentList),this.totalPercent(this.statistic,this.freeStudentList),this.totalPoint(this.statistic,this.freeStudentList),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}createChart(){var e,n;let i=null!==(e=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi"))&&void 0!==e?e:"",a=null!==(n=this.commonService.myTranslateInstant("lang_auto_so_luong"))&&void 0!==n?n:"",l=new x.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:i+"_"+this.examObj.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["<= 1","<= 2","<= 3","<= 4","<= 5","<= 6","<= 7","<= 8","<= 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:a,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=l}totalPercent(e,n){var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K,B,et=0,st=0,at=0,mt=0,it=0,rt=0,ht=0,ft=0,Tt=0,Ot=0,kt=0,gt=0;for(let bt=0;bt<e.length;bt++)e[bt]&&(gt+=null!==(i=e[bt].testedCount)&&void 0!==i?i:0,et+=null!==(a=e[bt].markPercent[0].count)&&void 0!==a?a:0,st+=null!==(r=e[bt].markPercent[1].count)&&void 0!==r?r:0,at+=null!==(l=e[bt].markPercent[2].count)&&void 0!==l?l:0,mt+=null!==(c=e[bt].markPercent[3].count)&&void 0!==c?c:0,it+=null!==(_=e[bt].markPercent[4].count)&&void 0!==_?_:0,rt+=null!==(d=e[bt].markPercent[5].count)&&void 0!==d?d:0,ht+=null!==(p=e[bt].markPercent[6].count)&&void 0!==p?p:0,ft+=null!==(h=e[bt].markPercent[7].count)&&void 0!==h?h:0,Tt+=null!==(f=e[bt].markPercent[8].count)&&void 0!==f?f:0,Ot+=null!==(w=e[bt].markPercent[9].count)&&void 0!==w?w:0,kt+=null!==(k=e[bt].markPercent[10].count)&&void 0!==k?k:0);for(let bt=0;bt<n.length;bt++)n[bt]&&(gt+=null!==(S=n[bt].testedCount)&&void 0!==S?S:0,et+=null!==(D=n[bt].markPercent[0].count)&&void 0!==D?D:0,st+=null!==(Q=n[bt].markPercent[1].count)&&void 0!==Q?Q:0,at+=null!==(N=n[bt].markPercent[2].count)&&void 0!==N?N:0,mt+=null!==(q=n[bt].markPercent[3].count)&&void 0!==q?q:0,it+=null!==(W=n[bt].markPercent[4].count)&&void 0!==W?W:0,rt+=null!==(X=n[bt].markPercent[5].count)&&void 0!==X?X:0,ht+=null!==(E=n[bt].markPercent[6].count)&&void 0!==E?E:0,ft+=null!==(J=n[bt].markPercent[7].count)&&void 0!==J?J:0,Tt+=null!==(z=n[bt].markPercent[8].count)&&void 0!==z?z:0,Ot+=null!==(K=n[bt].markPercent[9].count)&&void 0!==K?K:0,kt+=null!==(B=n[bt].markPercent[10].count)&&void 0!==B?B:0);this.markPercentOne=100*et/gt,this.markPercentTwo=100*st/gt,this.markPercentThree=100*at/gt,this.markPercentFour=100*mt/gt,this.markPercentFive=100*it/gt,this.markPercentSix=100*rt/gt,this.markPercentSeven=100*ht/gt,this.markPercentEight=100*ft/gt,this.markPercentNine=100*Tt/gt,this.markPercentTen=100*Ot/gt,this.markPercentAvg=100*kt/gt;let Gt=[this.markPercentOne,this.markPercentTwo,this.markPercentThree,this.markPercentFour,this.markPercentFive,this.markPercentSix,this.markPercentSeven,this.markPercentEight,this.markPercentNine,this.markPercentTen];for(let bt=0;bt<Gt.length;++bt)this.highestPercentPoint<Gt[bt]&&(this.highestPercentPoint=Gt[bt])}totalPoint(e,n){var i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J,z,K=0,B=0,et=0,st=0,at=0,mt=0,it=0,rt=0,ht=0,ft=0,Tt=0;for(let gt=0;gt<e.length;gt++)e[gt]&&(K+=null!==(i=e[gt].markPercent[0].count)&&void 0!==i?i:0,B+=null!==(a=e[gt].markPercent[1].count)&&void 0!==a?a:0,et+=null!==(r=e[gt].markPercent[2].count)&&void 0!==r?r:0,st+=null!==(l=e[gt].markPercent[3].count)&&void 0!==l?l:0,at+=null!==(c=e[gt].markPercent[4].count)&&void 0!==c?c:0,mt+=null!==(_=e[gt].markPercent[5].count)&&void 0!==_?_:0,it+=null!==(d=e[gt].markPercent[6].count)&&void 0!==d?d:0,rt+=null!==(p=e[gt].markPercent[7].count)&&void 0!==p?p:0,ht+=null!==(h=e[gt].markPercent[8].count)&&void 0!==h?h:0,ft+=null!==(f=e[gt].markPercent[9].count)&&void 0!==f?f:0,Tt+=null!==(w=e[gt].markPercent[10].count)&&void 0!==w?w:0);for(let gt=0;gt<n.length;gt++)n[gt]&&(K+=null!==(k=n[gt].markPercent[0].count)&&void 0!==k?k:0,B+=null!==(S=n[gt].markPercent[1].count)&&void 0!==S?S:0,et+=null!==(D=n[gt].markPercent[2].count)&&void 0!==D?D:0,st+=null!==(Q=n[gt].markPercent[3].count)&&void 0!==Q?Q:0,at+=null!==(N=n[gt].markPercent[4].count)&&void 0!==N?N:0,mt+=null!==(q=n[gt].markPercent[5].count)&&void 0!==q?q:0,it+=null!==(W=n[gt].markPercent[6].count)&&void 0!==W?W:0,rt+=null!==(X=n[gt].markPercent[7].count)&&void 0!==X?X:0,ht+=null!==(E=n[gt].markPercent[8].count)&&void 0!==E?E:0,ft+=null!==(J=n[gt].markPercent[9].count)&&void 0!==J?J:0,Tt+=null!==(z=n[gt].markPercent[10].count)&&void 0!==z?z:0);this.markPointOne=K,this.markPointTwo=B,this.markPointThree=et,this.markPointFour=st,this.markPointFive=at,this.markPointSix=mt,this.markPointSeven=it,this.markPointEight=rt,this.markPointNine=ht,this.markPointTen=ft,this.markPointAvg=Tt;let Ot=[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen],kt=0;for(let gt=0;gt<Ot.length;++gt)kt<Ot[gt]&&(kt=Ot[gt],this.highestCountPoint=gt+1)}totalStudentRegister(e,n){var i,a,r=0;for(let l=0;l<e.length;l++)r+=null!==(i=e[l].registerCount)&&void 0!==i?i:0;for(let l=0;l<n.length;l++)r+=null!==(a=n[l].registerCount)&&void 0!==a?a:0;this.countStudentRegister=r}totalStudentTakeExam(e,n){var i,a,r=0;for(let l=0;l<e.length;l++)r+=null!==(i=e[l].testedCount)&&void 0!==i?i:0;for(let l=0;l<n.length;l++)r+=null!==(a=n[l].testedCount)&&void 0!==a?a:0;this.countStudentTakeExam=r}goToStudentList(e){var n,i;let a=`/admin/testbank/statistic/${null!==(n=this.examObj.categoryId)&&void 0!==n?n:0}/${this.examObj.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${null===(i=e.classObj)||void 0===i?void 0:i.id}`,"?backto="+encodeURIComponent(a))}isEmptyObj(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}constructor(e,n,i,a,r,l){super(i),this.dialog=e,this.statisticalApiService=n,this.commonService=i,this.homeworkExamService=a,this.dictionaryService=r,this.testedListApiService=l,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.chart=new x.kL,this.examId=-1,this.statistic=[],this.examObj={},this.totalAttended=0,this.avgPoint=0,this.highestCountPoint=0,this.highestPercentPoint=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(zn),t.Y36(_t.v),t.Y36(Ve.j),t.Y36(no.E),t.Y36(xn.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-statistical-point"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],["class","col-span-12 lg:col-span-8 xl:col-span-4",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],["azt-track-service","statistical-point-H1Y1HbVLKAS","style","padding: 9.5px !important",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-H1Y1HbVLKAS",2,"padding","9.5px !important",3,"click"]],template:function(e,n){if(1&e&&(t.YNc(0,Cw,8,6,"div",0),t.YNc(1,CT,282,233,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statistic&&0==n.statistic.length&&n.freeStudentList&&0==n.freeStudentList.length)("ngIfElse",i)}},dependencies:[y.sg,y.O5,x.Dm,Tw,y.JJ,tt.bT,tt.AS],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),o})();const OT=["drawer"];function yT(o,s){1&o&&t._UZ(0,"azt-loading-effect")}const AT=function(o){return{hidden:o}};let ST=(()=>{class o extends R.Q{getDataStatistical(){this.initStatusObj(),this.statisticalApiService.getExamStatisticObjs("statistic",this.examId,1).subscribe(e=>{var n;1==e.success&&e.data?this.dataForStatistical=e:(this.showErrorSnack(null!==(n=e.message)&&void 0!==n?n:""),this.stopStatusObj())})}doneLoadingFunc(e){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){var e,n,i;this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let a=null!==(e=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==e?e:"",r=null!==(n=this.commonService.getMyParam(this.activeRoute,"id"))&&void 0!==n?n:"";this.backToLink=this.commonService.getMyQueryParam("backto")?null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"":`/admin/testbank/exam-results-list/${a}/${r}/0`,(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var c;this.examId=null!==(c=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==c?c:0,this.getDataStatistical()}),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.statisticalApiService=n,this.activeRoute=i,this.isListQuestion=!0,this.isStatistical=!1,this.isTabScore=!0,this.isExportExcel=!0,this.viewType=1,this.backToLink="",this.examId=0,this.examObj={},this.doneLoadCount=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.dataForStatistical={}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(zn),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-statistical"]],viewQuery:function(e,n){if(1&e&&t.Gf(OT,5),2&e){let i;t.iGM(i=t.CRH())&&(n.drawer=i.first)}},features:[t.qOj],decls:9,vars:15,consts:[[3,"headerTitle","headerBackTolink"],[1,"statistical","mx-auto","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"]],template:function(e,n){1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1),t.YNc(3,yT,1,0,"azt-loading-effect",2),t.TgZ(4,"div",3)(5,"app-statistical-point",4),t.NdJ("doneLoadingEmit",function(a){return n.doneLoadingFunc(a)}),t.qZA(),t.TgZ(6,"app-list-question",5),t.NdJ("doneLoadingEmit",function(a){return n.doneLoadingFunc(a)}),t.qZA(),t.TgZ(7,"app-table-score",5),t.NdJ("doneLoadingEmit",function(a){return n.doneLoadingFunc(a)}),t.qZA()(),t._UZ(8,"azt-scroll-to-top-bottom",6),t.qZA()()),2&e&&(t.Q6J("headerTitle",t.lcZ(1,11,"lang_testbank_statistical_header_title"))("headerBackTolink",n.backToLink),t.xp6(3),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngClass",t.VKq(13,AT,n.statusObj.loading)),t.xp6(1),t.Q6J("viewType",n.viewType)("dataStatistical",n.dataForStatistical),t.xp6(1),t.Q6J("viewType",n.viewType)("dataStatistical",n.dataForStatistical),t.xp6(1),t.Q6J("viewType",n.viewType)("dataStatistical",n.dataForStatistical),t.xp6(1),t.Q6J("isScrollToTop",!0))},dependencies:[y.mk,y.O5,zt.Q,ma.M,Vt._,zb,fw,kT,tt.bT],encapsulation:2}),o})();var In=T(59729);class ZT{process(s){let e=["(^c\xe2u\\s*\\d{1,4}[^0-9])","(^ca\u0302u\\s*\\d{1,4}[^0-9])","(^c\xa9u\\s*\\d{1,4}[^0-9])","(^ca\u201au\\s*\\d{1,4}[^0-9])","(^b\xe0i\\s*\\d{1,4}[^0-9])","(^ba\u0300i\\s*\\d{1,4}[^0-9])","(^cau\\s*\\d{1,4}[^0-9])","(^bai\\s*\\d{1,4}[^0-9])","(^question\\s*\\d{1,4}[^0-9])","(^questions\\s*\\d{1,4}[^0-9])","(^\\[\\d{1,4}\\][^0-9])","(^\\d+\\s*\\(nb\\))","(^\\d+\\s*\\(th\\))","(^\\d+\\s*\\(vd\\))","(^\\d+\\s*\\(vdc\\))","(^c\xe2u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u0302u\\s*\\d{1,4}[\\s\\.:]*$)","(^c\xa9u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u201au\\s*\\d{1,4}[\\s\\.:]*$)","(^b\xe0i\\s*\\d{1,4}[\\s\\.:]*$)","(^ba\u0300i\\s*\\d{1,4}[\\s\\.:]*$)","(^cau\\s*\\d{1,4}[\\s\\.:]*$)","(^bai\\s*\\d{1,4}[\\s\\.:]*$)","(^questions\\s*\\d{1,4}[\\s\\.:]*$)","(^question\\s*\\d{1,4}[\\s\\.:]*$)"],n=["(^(\\d+\\s*\\.)\\s*[\\.0-9])","(^(\\d+\\s*\\.)\\s*\\(\\s*\\d+\\s*\\))","(^(\\d+\\s*\\.)\\s*[^\\s]\\s*[^\\s0-9])","(^\\d+\\s*\\.\\s*$)"],i=["(H\u01af\u1edaNG\\s*D\u1eaaN)","(\u01af\u1edaNG\\s*D\u1eaaN\\s*GI\u1ea2I\\s*CHI)","(GI\u1ea2I\\s*TH\xcdCH\\s*CHI\\s*TI\u1ebeT)","(H\u01b0\u1edbng\\s*d\u1eabn\\s*gi\u1ea3i)","(L\u1eddi\\s*gi\u1ea3i)","(L\u1edcI\\s*GI\u1ea2I)","(GI\u1ea2I\\s*CHI\\s*TI\u1ebeT)","(HD:)","(GLOSSARY)"],a=0,r=[],l=[];for(let _ of s){let d=this.do(_,e,n);null!=d?(r.push({idx:a,val:G.Utils.capitalizeFirstLetter(d.olabel)}),l.push("q")):(d=this.match(_,i),null!=d&&l.push("h")),a++}if(l.join("-").startsWith("q-h-q-h")){let _=1;for(let d of r)s[d.idx]=s[d.idx].replace(d.val,d.val.replace(/\d+/g,_+"")),_++}}do(s,e,n){let i=this.matchPos(s,e,n);if(i.value){let a=null;for(let p=i.value.length-1;p>=0;p--)if(i.value[p]){a=i.value[p];break}if(null==a)return null;let r=s.replace(/\|/g,"").toLowerCase().indexOf(a),l=r,c="",_=s.toLowerCase();for((a.endsWith("(")||a.endsWith("["))&&(a=a.substring(0,a.length-1));l<_.length&&("|"!=_[l]&&(c+=_[l]),l++,c!=a););return{pos:[r,l],olabel:a}}return null}matchPos(s,e,n){let i=s.replace(/\|/g,"").toLowerCase().trim(),a=e.join("|"),r=i.matchAll(a).next();return r.value||(a=n.join("|"),r=i.matchAll(a).next()),r}match(s,e){let n=s.replace(/\|/g,"").trim().match(e.join("|"));return null!=n&&n.length>0?{pos:[0,0],olabel:""}:null}}let ET=(()=>{class o{constructor(e,n,i,a,r,l,c,_,d,p){this.editorCommonService=e,this.commonService=n,this.cdnService=i,this.infoService=a,this.questionService=r,this.examCategoryService=l,this.apiUploadService=c,this.userService=_,this.questionSaveService=d,this.examService=p,this.saveParts=[],this.cropPdfParams="",this.configRenderService=new Ct.B,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.loadingManager=new Map,this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g}init(){return new Promise((e,n)=>{this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(i=>{this.cropPdfParams=i.CROPPDF_PARAMS,e()})}).catch(i=>{n(i)})})}hasStyleAns(e,n,i){if(!n)return"";let a=i.filter(r=>r.lineIdx==n.lineIdx&&r.s<=n.b&&r.e>=n.b);for(let r of a)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(e,n,i){var a;for(let r=n.length-1;r>=0;r--){let l=n[r],c=i.filter(_=>_.lineIdx==l.lineIdx&&_.e>=l.s);for(let _=c.length-1;_>=0;_--){let d=c[_].s>=l.s?c[_].s:l.s,p=c[_].e<=(null!==(a=l.e)&&void 0!==a?a:9999999)?c[_].e:l.e,h=c[_].style.replaceAll("!hl","");if(d<p&&""!=h){let f=e[l.lineIdx],w=f.substring(d,p);""!=w.trim()&&(e[l.lineIdx]=f.substring(0,d)+"["+h+":$"+w+"$]"+f.substring(p))}}}}processUnderlineAns(e){let n=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,i=0,a=[];for(let r of e){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&i>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),_=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let d=e[i-1].match(n);if(d&&l.length==d.length){for(let h of d)e[i-1]=e[i-1].replace(h,h.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==_?"*":""}${l.substring(0,1)}:`).replace("$]","]")),a[a.length-1]=e[i-1],l=l.substring(1),_++;i++;continue}}}a.push(r),i++}return a}processStyle(e){var n;let i=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],l=0;for(let k of e){if(a.test(e[l].replaceAll(i,"$1"))&&(e[l]=e[l].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),k=e[l]),k){let Q,S=k.matchAll(i),D=0;for(;;){let N=S.next();if(N.done)break;let q=N.value[0],W=q.indexOf(":"),X=q.substring(1,W),J=N.value.index-D,z=J+N.value[1].length;Q&&J==Q.e&&Q.style==X?Q.e=z:(Q={lineIdx:l,s:J,e:z,style:X},r.push(Q)),D+=W+4}e[l]=k.replaceAll(i,"$1")}l++}const c=new G.ExamIntellisense(this.cropPdfParams);c.setLines(e);let _=c.parse(),d=[],p=new Map,h=0;for(let k of _){h++;for(let S of k.parts)d.push(S);for(let S of k.answers){let D=this.hasStyleAns(e,S.parts[0],r);""!=D&&p.set(`${k.label}-${k.group}-${S.label}-${h}`,D);for(let Q of S.parts)d.push(Q)}}for(let k of _)if(k.help)for(let S of k.help)d.push(S);this.applyStyle(e,d,r),c.setLines(e),_=null!==(n=c.parse())&&void 0!==n?n:[];let f=[];h=0;for(let k of _){h++;let S=new Map;if(!(k.answers.filter(D=>D.isCorrect).length>0)){for(let D of k.answers){let Q=p.get(`${k.label}-${k.group}-${D.label}-${h}`);Q&&""!=Q&&S.set(Q,S.has(Q)?void 0:D.parts[0])}for(let D of S)if(D[1]){f.push(D[1]);break}}}for(let k=f.length-1;k>=0;k--){let S=f[k];e[S.lineIdx]=e[S.lineIdx].substring(0,S.b)+"*"+e[S.lineIdx].substring(S.b)}return e=this.processUnderlineAns(e),_.length>0?e.slice(_[0].parts[0].lineIdx):e}processMath(e,n){let i=0;for(let a of e){let r=a.matchAll(this.MATH_PAT);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],d=n.get(l.value[1]);d&&(d.lineIdx=i+1,d.startCol=l.value.index+1,d.endCol=d.startCol+c.length)}i++}}getLoadedIds(e){return e.filter(n=>n.id&&n.id>0).map(n=>{var i;return null!==(i=n.id)&&void 0!==i?i:0})}getIncludeIds(e,n){return[]}renderStr(e,n,i,a,r,l,c,_,d=!0){let p=d?a.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):a,h=[new It,new ae(this.cdnService),new Ut,new ie,new jt,new de,new un(n),new an,new ye.$(this.cdnService,this.commonService,this.configRenderService,l),new ne(this.cdnService,this.commonService,c,this.apiCallbackCache,this.aztEditor,_,this.getIncludeIds(e),this.apiDataCache,this.matrixLoadedData)];"link"==r&&(h=[new ye.$(this.cdnService,this.commonService,this.configRenderService,l)]),"help"==r&&h.pop();for(const f of h)f.setLoadingManager(this.loadingManager),p=f.render(p,i,this.questionService);return p}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:e};let a=e.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let _=a.next();if(_.done)break;r=_.value[0],l=_.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}fillImg(e,n,i,a){let r=new RegExp("<div id='"+i+"'[^>]+></div>","g"),l=e[n];l.renderedStr=l.renderedStr.replace(r,a??"");for(let c of l.answers)c.renderedStr=c.renderedStr.replace(r,a??"");l.helpRenderedStr&&(l.helpRenderedStr=l.helpRenderedStr.replace(r,a??""))}fillError(e,n,i){e[n].err=`<span style='color:red'>${i}</span>`}renderQuest(e,n,i,a,r){return new Promise(l=>{var c;let _=3;a.answers.length>0&&(_=1),0==a.answers.length&&a.strAns&&(_=4);let d=(D,Q)=>{console.log("nvanh fill image ",e.length,D,Q),this.fillImg(e,r,D,Q)},p=D=>{console.log("nvanh fill quest ",r,D)},h=D=>{this.fillError(e,r,D)},f=a.parts.map(D=>{var Q;return null!==(Q=D.text)&&void 0!==Q?Q:""}).join("<br>").trim(),w=this.parseExtra(f);""!=w.val&&(f=f.substring(0,w.idx)+f.substring(w.idx+w.val.length));let k=a.help?a.help.map(D=>{var Q;return null!==(Q=D.text)&&void 0!==Q?Q:""}).join("<br>").trim():void 0,S={renderedStr:this.renderStr(e,n,i,f,"full",d,p,h),quest:a,type:_,strAns:a.strAns?a.strAns.split(/[\/\|]/).map(D=>D.trim()):void 0,label:this.upperFirst(null!==(c=a.olabel)&&void 0!==c?c:""),helpRenderedStr:k?this.renderStr(e,n,i,k,"full",d,p,h):void 0,answers:a.answers.map(D=>{let Q=D.parts.map(N=>{var q;return null!==(q=N.text)&&void 0!==q?q:""}).join("<br>").trim();return{renderedStr:this.renderStr(e,n,i,Q,"full",d,p,h),ans:D}})};if(S.renderedStr.startsWith("Loading...|")){let D=S.renderedStr.split("|");if(D[1].indexOf(",")<0){let Q=+D[1];Q>0&&(S.id=Q)}S.renderedStr=D[0]}e[r]=S,l(S)})}getLstQuestWithFile(e,n){return new Promise((i,a)=>{const r=new vt(this.editorCommonService,this.commonService),l=[],c=new Map,_=[],d=[];let p=1;r.handleFileSelect(e,h=>{for(let N of h.data)if("img"==N.type)l.push({id:N.key,link:N.value,cssStyle:N.cssStyle}),N.cssStyle&&N.cssStyle.split(";").length>2&&_.push([`^\\[img:\\$${N.key}\\$\\]`,`[img:$${N.key}$]\n`]);else if("mathml"==N.type){let q=+N.key.split("_")[1];c.set(N.key,{id:q,str:N.value,raw:N.docx,lineIdx:0,startCol:0,endCol:0}),q>p&&(p=q)}p++;for(let N of h.lines){if(0==N.length)continue;let q="";q=Array.isArray(N[0])&&Array.isArray(N[N.length-1])&&Array.isArray(N[Math.floor(N.length/2)])?"[* "+N.map(X=>X.map(E=>E.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":N.join("");for(let X of _)q=q.replaceAll(new RegExp(X[0],"g"),X[1]);let W=q.split("\n");for(let X of W)d.push(X)}(new ut).process(d);let w=this.processStyle(d);this.processMath(w,c),(new ZT).process(w);const S=new G.ExamIntellisense(this.cropPdfParams);S.setLines(w);let D=S.parse();const Q=new ct.Q(2);for(let N=0;N<D.length;N++)Q.addTask(this,this.renderQuest,[n,c,l,D[N],N]);Q.start().then(N=>{setTimeout(()=>{i({lstQuest:n,mathMap:c,images:l})},10*l.length)})})})}createFolder(e,n){return new Promise((i,a)=>{this.examCategoryService.apiExamCategorySaveObjPost({name:e,parentId:n}).subscribe(l=>{var c;1==l.success?i(null!==(c=l.data)&&void 0!==c?c:{}):a(new Error(l.message))})})}convertPartItem(e){var n,i;return 0===e.length?"":/^\[@((.)+)\]/g.test(null!==(n=e[0].text)&&void 0!==n?n:"")?e[0].lineIdx+"_____"+(null===(i=e[0].text)||void 0===i?void 0:i.split("]=>")[0])+"]":""}convertQuestion(e,n,i,a,r,l){return new Promise((c,_)=>{var d,p,h,f;const w=[];a.answers.forEach(Q=>{w.push({key:Q.ans.label,content:Q.renderedStr})});let k=a.answers.find(Q=>!0===Q.ans.isCorrect);const D={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(r+1),answerType:a.type,categoryId:0,questionContent:a.renderedStr,questionText:a.renderedStr,answerConfig:JSON.stringify(w),groupId:l,answerResult:k?JSON.stringify([k.ans.label]):a.strAns&&(null===(d=a.strAns)||void 0===d?void 0:d.length)>0?JSON.stringify(a.strAns):void 0,totalQuestion:e.length,version:"4",isFixAns:a.quest.isFixAns?1:0,isImage:1,answerMedia:a.helpRenderedStr,mediaMeta:JSON.stringify(n),groupType:n?.isFixGroup?"1":void 0,tags:a.tag&&a.tag.length?a.tag.map(Q=>{var N;return null!==(N=Q.code)&&void 0!==N?N:""}):[],__path:this.convertPartItem(a.quest.parts)};null===(h=null===(p=i.exam)||void 0===p?void 0:p.questionObj.listQuestions)||void 0===h||h.push(D),null===(f=i.exam)||void 0===f||f.rootQuests.push(a),a.audio&&(0,lt.F0)(a.audio.type)?a.attachments&&"[]"!==a.attachments?(D.attachments=a.attachments,c()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(a.audio).subscribe(Q=>{Q.type!=H.dt.UploadProgress&&(1==Q.success?D.attachments=JSON.stringify([Q.data]):_(new Error("lang_auto_upload_file_audio_that_bai")),c())}):c()})}generateFileAzt(e){var n,i;let a=null!==(i=null===(n=this.aztEditor)||void 0===n?void 0:n._editor.getValue().trim())&&void 0!==i?i:"";if(""!=a){let r=[],l=[];for(let d of e.mathMap)r.push(d);let _=JSON.stringify({text:a,imgs:e.images,maths:r,infos:l});return new Blob([_],{type:"text/plain"})}return null}saveCdn(e,n){return new Promise(i=>{var a;if(null!==(a=n.exam)&&void 0!==a&&a.examObj){let r=new Date,l=`user-${this.userService.getUserObj().id}-de-azota-${r.getDate()}${r.getMonth()+1}${r.getFullYear()}-${r.getTime()}.azt`;const c=this.generateFileAzt(e);if(c){const _=new File([c],l,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(_).subscribe(d=>{var p,h;d.type!=H.dt.UploadProgress&&(1==d.success&&d.data&&!(null===(p=n.exam)||void 0===p)&&p.examObj&&(n.exam.examObj.cdnEditorFile=null!==(h=d.data.url)&&void 0!==h?h:""),i())})}else i()}else i()})}makeExpandInfoObj(e){var n,i;const r=e.map(l=>{var c;return null===(c=l.quest.olabel)||void 0===c?void 0:c.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")}).filter(l=>l&&l.length>0);return r.length>0?{label:(l=null!==(n=r[0])&&void 0!==n?n:null!==(i=this.commonService.myTranslateInstant("lang_auto_cau"))&&void 0!==i?i:"",l.charAt(0).toUpperCase()+l.slice(1))}:{};var l}uploadFileProcess(e,n){return new Promise(i=>{e?this.apiUploadService.uploadToCdnProgressForTestbankDocx(e).subscribe(a=>{var r,l;a.type!=H.dt.UploadProgress&&(1==a.success&&n.exam&&(n.exam.examObj.cdnExamFile=null!==(l=null===(r=a.data)||void 0===r?void 0:r.url)&&void 0!==l?l:""),i())}):i()})}saveQuestionObjs(e,n,i){return new Promise(a=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:n}).subscribe(r=>{var l,c,_;if(e.exam&&1===r.success&&null!==(l=r.data)&&void 0!==l&&l.objs){const d=[];r.data.objs.forEach((p,h)=>{var f;const w=null===(f=e.exam)||void 0===f?void 0:f.examConfig.find(S=>S.name==p.name);if(d.push({id:p.id,name:p.name,groupId:p.groupId,scorePerQuestion:w?.point||1,totalQuestion:1,sort:h+i}),n[h]){const S=n[h];S.__path&&S.__path.length>0?this.saveParts.includes(S.__path)||this.saveParts.push(S.__path):this.saveParts.push(`[@Q${p.id}: C\xe2u ${h+i+1}]`)}}),a({indexSaved:(null===(_=null===(c=r.data)||void 0===c?void 0:c.objs)||void 0===_?void 0:_.length)+i,examConfigs:d})}else a({indexSaved:i,examConfigs:[]})})})}processSaveQuestions(e,n,i,a,r){var l,c,_,d,p;if(null!==(l=n.exam)&&void 0!==l&&l.questionObj&&null!==(c=n.exam)&&void 0!==c&&c.questionObj.listQuestions){var h=null===(_=n.exam)||void 0===_?void 0:_.questionObj.listQuestions.length;let f=i+100>h?h:i+100,w=null!==(p=null===(d=n.exam)||void 0===d?void 0:d.questionObj.listQuestions.slice(i,f))&&void 0!==p?p:[];w.length>0?this.saveQuestionObjs(n,w,a).then(k=>{if(k.examConfigs&&k.examConfigs.length>0){let S=r.concat(k.examConfigs);this.processSaveQuestions(e,n,f,k.indexSaved,S)}}):this.saveExamObj(e,n,r)}}saveExamObj(e,n,i){var a;if(n.exam){let r=!1;this.saveParts=this.saveParts.map(d=>{const p=d.split("_____");return-1!==d.indexOf("ng\u1eabu nhi\xean")&&(r=!0),1===p.length?p[0]:p[1]});let l=Object.assign(Object.assign({},this.formSubjectAndClassroom),{generalTitle:null===(a=n.exam)||void 0===a?void 0:a.examObj.name,generalDescription:""}),c=this.userService.getUserObj(),_=JSON.stringify({type:"exam",id:0,user:c.id});n.exam.examObj.scoringMethod="1",n.exam.examObj.name=l.generalTitle,n.exam.examObj.examConfigs=JSON.stringify(i),n.exam.examObj.description=l.generalDescription,n.exam.examObj.editorStatus=2,n.exam.examObj.metadata=JSON.stringify(this.saveParts),n.exam.examObj.isRandomExam=r,n.exam.examObj.schoolLevelId=l.schoolLevel,n.exam.examObj.schoolSubjectId=l.schoolSubject,this.examService.apiExamSaveObjPost(n.exam.examObj,_).subscribe(d=>{e()})}}saveExam(e,n,i){return new Promise(a=>{var r;if(e.result){const l=new ct.Q(10,{function:(w,k)=>{i.pushMsg(`D\u1eef li\u1ec7u: ${Math.floor(w/k*100)}%`)}}),c={},d=null!==(r=(e.result.lstQuest[0].quest.isGroup?e.result.lstQuest[1]:e.result.lstQuest[0]).quest.label)&&void 0!==r?r:1;let p,h=[],f=!0;c.exam={examObj:{categoryId:n,name:e.file.name,startQuestionIndex:d},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},l.addTask(this,this.uploadFileProcess,[e.file,c]),e.result.lstQuest.forEach((w,k)=>{var S,D;if(w.quest.isGroup)p=w,f=!1;else{f||(f=!0,h.push(k-(h.length+1)));const N={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(k-h.length+1),point:1};null===(S=c.exam)||void 0===S||S.examConfig.push(N),l.addTask(this,this.convertQuestion,[null===(D=e.result)||void 0===D?void 0:D.lstQuest,p,c,w,k-h.length,h.length])}}),l.addTask(this,this.saveCdn,[e.result,c]),c.exam.examObj.firstInGroupIndexes=JSON.stringify(h),c.exam.examObj.expandInfoObj=this.makeExpandInfoObj(e.result.lstQuest),l.start().then(()=>{var w,k,S,D;i.pushMsg("\u0110ang l\u01b0u ..."),console.log("nvanh save ",c);const Q=null!==(k=null===(w=c.exam)||void 0===w?void 0:w.questionObj.listQuestions)&&void 0!==k?k:[];this.questionSaveService.convertQuestions(Q,null!==(D=null===(S=c.exam)||void 0===S?void 0:S.rootQuests)&&void 0!==D?D:[],(N,q="",W)=>{i.remove(),a()}).then(()=>{this.saveParts=[],this.processSaveQuestions(()=>{i.remove(),a()},c,0,0,[])})})}else a()})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG($n),t.LFG(_t.v),t.LFG(Dt.U),t.LFG(xt.CM),t.LFG(xt.aE),t.LFG(xt.F1),t.LFG(mn.$),t.LFG(hn.K),t.LFG(Oi),t.LFG(xt.Oe))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),IT=(()=>{class o{reset(){this.logger=new In.O}cancel(){return new Promise(e=>{this.treeDataFolders.pushActionCancel(0).then(()=>{this.logger.remove(),e()})})}init(e,n){return new Promise(i=>{this.logger=new In.O(!0,this.commonService.myTranslateInstant("lang_loading_data")),this.treeDataFolders=new bi,this.treeDataFolders.parentId=e,this.treeDataFolders.pushActionCancel(1),this.treeDataFolders.pushActionRunner(!0),this.syncQuestionTestBankService.formSubjectAndClassroom=n,this.syncQuestionTestBankService.init().then(()=>{i()})})}push(e){this.treeDataFolders.push(e)}start(){var e;this.logger.pushMsg(null!==(e=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu"))&&void 0!==e?e:"");const n=new ct.Q(1);this.treeDataFolders.pushTaskDocument(n,this.syncQuestionTestBankService,this.logger),n.start().then(i=>{this.logger.remove()})}constructor(e,n){this.syncQuestionTestBankService=e,this.commonService=n,this.logger=new In.O,this.treeDataFolders=new bi}get keyLoading(){return this.logger.lines}get isLoading(){var e;return null!==(e=this.logger.run)&&void 0!==e&&e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(ET),t.LFG(_t.v))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class bi{push(s){const e=s.webkitRelativePath.split("/"),n=e.shift();if(""===this.name&&(this.name=n??"root"),1===e.length)return void this.documents.push({file:s});e.pop();let i=this;e.forEach(a=>{i=this.getOrCreateObject(a,i)}),i.documents.push({file:s})}pushTaskDocument(s,e,n){s.addTask(this,this.syncFolderAction,[e,n],this.name),this.documents.forEach(i=>{s.addTask(this,this.processDocument,[i,e,n],i.file.name)}),this.children.forEach(i=>{i.pushTaskDocument(s,e,n)})}syncActionDocument(s,e,n){return new Promise(i=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(n.file.name)))if(n.result&&n.result.lstQuest.filter(a=>a.answers.length>2).length>0){const a=new In.O(!0,"\u0110ang l\u01b0u \u0111\u1ec1 thi "+n.file.name);e.pushChild(a),s.saveExam(n,this.folderId,a).then(()=>{this.saveName(this.makeName(n.file.name)),a.remove(),i()})}else i();else i()})}syncFolderAction(s,e){return new Promise(n=>{if(1===this.getStatusAction()&&this.checkName(this.makeName()))if(-1===this.folderId){const i=new In.O(!0,"\u0110ang t\u1ea1o th\u01b0 m\u1ee5c "+this.name);e.pushChild(i),-1!==this.parentId?s.createFolder(this.name,this.parentId).then(a=>{var r,l;this.folderId=null!==(l=null===(r=a.obj)||void 0===r?void 0:r.id)&&void 0!==l?l:-1,this.children.forEach(c=>{c.parentId=this.folderId}),this.saveName(this.makeName()),this.saveFolderId(this.makeName(),this.folderId),i.remove(),n()}).catch(()=>{this.folderId=-1,i.remove(),n()}):(i.remove(),n())}else n();else 1===this.getStatusAction()&&(this.folderId=this.getFolderId(this.makeName()),this.children.forEach(i=>{i.parentId=this.folderId})),n()})}processDocument(s,e,n){return new Promise((i,a)=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(s.file.name))){const r=new In.O(!0,"\u0110ang x\u1eed l\xfd t\u1ec7p tin "+s.file.name);n.pushChild(r),e.getLstQuestWithFile(s.file,[]).then(c=>{s.result=c,c.lstQuest.filter(_=>_.answers.length>2).length>0&&(r.pushMsg("\u0110ang l\u01b0u \u0111\u1ec1 thi "+s.file.name),this.syncActionDocument(e,n,s).then(()=>{r.remove(),i()}))})}else i()})}getOrCreateObject(s,e){let n=e.children.find(i=>i.name===s);return n||(n=new bi(s),n.parentName=e.parentName+"/"+e.name,e.children.push(n)),n}saveName(s){const e=this.makeObjSave();e.save_names.push(s),this.setObjSave(e)}saveFolderId(s,e){const n=this.makeObjSave();n.folder_save.push({name:s,value:e}),this.setObjSave(n)}checkName(s){return!this.makeObjSave().save_names.includes(s)}makeName(s){return s?this.parentName+"_"+this.name+"_"+s:this.parentName+"_"+this.name}getFolderId(s){var e,n;return null!==(n=null===(e=this.makeObjSave().folder_save.find(a=>a.name===s))||void 0===e?void 0:e.value)&&void 0!==n?n:0}pushActionCancel(s){return new Promise(e=>{const n=this.makeObjSave();if(n.status=s,this.setObjSave(n),0===s){const i=setInterval(()=>{this.makeObjSave().isRun||(clearInterval(i),e())},100)}else e()})}pushActionRunner(s){const e=this.makeObjSave();e.isRun=s,this.setObjSave(e)}getStatusAction(){const s=this.makeObjSave().status;return 0===s&&this.pushActionRunner(!1),s}makeObjSave(){const s=window.localStorage.getItem(this.LOCAL_STORAGE_KEY);return s?JSON.parse(s):new MT}setObjSave(s){window.localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(s))}constructor(s){this.parentName="",this.parentId=-1,this.folderId=-1,this.name="",this.documents=[],this.children=[],this.LOCAL_STORAGE_KEY="NVANH_TOOL_SYNC_ACTION",s&&(this.name=s)}}class MT{constructor(){this.status=1,this.save_names=[],this.folder_save=[],this.isRun=!0}}const PT=["drawer"];function LT(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.handleCancelSync())}),t._uU(1,"Hu\u1ef7"),t.qZA()}}function jT(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",38),t._UZ(3,"rect",39)(4,"path",40)(5,"path",41),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function NT(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",38),t._UZ(3,"rect",39)(4,"path",40)(5,"path",43),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}const qT=function(o){return{"ml-5":o}};function QT(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,jT,6,3,"button",20),t.YNc(3,NT,6,3,"button",21),t.qZA(),t._UZ(4,"config-level-subject",22),t.TgZ(5,"div",10)(6,"p",23),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",24)(10,"div",25)(11,"div",26)(12,"input",27,28),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.handleEventChangeFolder(i))}),t.qZA(),t.TgZ(14,"div",29)(15,"div",30)(16,"div")(17,"span",14),t._UZ(18,"lucide-icon",31),t.qZA(),t.TgZ(19,"span",32),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()(),t.TgZ(22,"div",33)(23,"span",34),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",33)(27,"a",35),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(13);return t.KtG(i.click())}),t.TgZ(28,"span",14),t._UZ(29,"lucide-icon",36),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()()()()}if(2&o){const e=t.oxw();t.Q6J("ngClass",t.VKq(19,qT,!e.isMobile&&e.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!e.isOpenSideNav||e.isMobile),t.xp6(1),t.Q6J("ngIf",e.isOpenSideNav&&!e.isMobile),t.xp6(1),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("examSchoolLogObj",e.examSchoolLogObj),t.xp6(3),t.hij(" ",t.lcZ(8,11,"lang_core_auto_tool_sync_chon_thu_muc")," "),t.xp6(13),t.hij(" ",t.lcZ(21,13,"lang_core_auto_tool_sync_keo_tha")," "),t.xp6(4),t.hij(" ",t.lcZ(25,15,"lang_core_auto_tool_sync_hoac")," "),t.xp6(7),t.Oqu(t.lcZ(32,17,"lang_core_auto_tool_sync_chon_thu_muc_can_sync"))}}const DT=function(o,s){return{"w-85":o,"w-30":s}};let UT=(()=>{class o extends R.Q{constructor(e,n,i,a,r,l,c){super(n),this.examFilterService=e,this.commonService=n,this.syncTestbankService=i,this.activeRoute=a,this.documentConfigService=r,this.userService=l,this.formBuilder=c,this.backToLink="/admin/dashboard",this.aztConfigCropParam="",this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.isLoadForm=!1,this.form=new m.nJ({}),this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={}}ngOnInit(){super.ngOnInit(),this.userService.isTestMarketAdminRole()?(this.form=this.formBuilder.group({generalDescription:new m.p4(""),schoolLevel:new m.p4(0,[m.kI.required]),schoolSubject:new m.p4(0,[m.kI.required])}),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var n,i,a,r,l,c,_;1==e.success?(this.examSchoolLogObj=null!==(i=null===(n=e.data)||void 0===n?void 0:n.examSchoolLogObj)&&void 0!==i?i:{},this.schoolLevelObjs=null!==(r=null===(a=e.data)||void 0===a?void 0:a.schoolLevelObjs)&&void 0!==r?r:[],this.schoolSubjectObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.schoolSubjectObjs)&&void 0!==c?c:[],this.isLoadForm=!0):this.errorStatusObj(null!==(_=e.message)&&void 0!==_?_:"")}))):this.commonService.myNavigation("/admin/dashboard")}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam_sync_folder",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam_sync_folder")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam_sync_folder");this.isOpenSideNav=!e||"close"!=e}}mainProcessFiles(e){var n;const i=null!==(n=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==n?n:0,a=this.form.getRawValue();this.syncTestbankService.init(i,a).then(()=>{e.forEach(r=>{(0,lt.D_)(r.type)&&r.name.includes("docx")&&this.syncTestbankService.push(r)}),this.syncTestbankService.start()})}handleEventChangeFolder(e){e.target.files&&this.mainProcessFiles([...e.target.files]),e.target.value=""}handleCancelSync(){this.syncTestbankService.cancel().then(()=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Yi.Y),t.Y36(_t.v),t.Y36(IT),t.Y36(C.gz),t.Y36(xt.Cq),t.Y36(hn.K),t.Y36(m.QS))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-sync-folder"]],viewQuery:function(e,n){if(1&e&&t.Gf(PT,5),2&e){let i;t.iGM(i=t.CRH())&&(n.drawer=i.first)}},features:[t.qOj],decls:22,vars:22,consts:[[3,"headerBackTolink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],["azt-track-service","sync-folder-I_srCKgqJ","class","cancel","style","\n\t\t    z-index: 999999999999;\n\t\t\tposition: fixed;\n\t\t\tpadding: 5px 20px;\n\t\t\tborder-radius: 5px;\n\t\t\tborder: 1px solid #cfd8dc;\n\t\t\tbackground: #eceff1;\n\t\t\ttop: 50px;\n\t\t\tleft: 50%;\n\t\t\tcursor: pointer;\n\t\t",3,"click",4,"ngIf"],[3,"msg","show","percent"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"height","80vh"],[1,"document-info"],[1,"flex","items-center"],["matTooltip","\u0110\u1ed3ng b\u1ed9 th\u01b0 m\u1ee5c",1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-md","mt-2"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["class","azt-drawer-content",3,"ngClass",4,"ngIf"],["azt-track-service","sync-folder-I_srCKgqJ",1,"cancel",2,"z-index","999999999999","position","fixed","padding","5px 20px","border-radius","5px","border","1px solid #cfd8dc","background","#eceff1","top","50px","left","50%","cursor","pointer",3,"click"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","sync-folder-SS5UgcvZq","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","sync-folder-q_c8tTVOYm","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[3,"form","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj"],[1,"text-md","font-medium","mr-auto","ng-star-inserted"],[1,"box","mt-2","relative","py-2",2,"height","62vh"],[1,"h-100","flex","items-center","justify-center",2,"height","100%"],[1,"text-center"],["type","file","webkitdirectory","",2,"display","none",3,"change"],["folderInputDirectory",""],["appDragDrop","",1,"xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[1,"flex","items-center","justify-center","text-center","cursor-pointer","relative",2,"width","400px","height","200px"],["name","folder-input"],[1,"text-primary","mr-1"],[1,"mt-3","lg:mr-auto"],[1,"text-md"],["azt-track-service","sync-folder-AgaqXySbDm",1,"btn","btn-secondary-soft",3,"click"],["name","folder-up"],["azt-track-service","sync-folder-SS5UgcvZq",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","sync-folder-q_c8tTVOYm",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.NdJ("contextmenu",function(){return!1}),t.YNc(2,LT,2,0,"div",2),t._UZ(3,"azt-export-docx-loading-box",3),t.TgZ(4,"mat-drawer-container",4)(5,"mat-drawer",5,6),t.NdJ("closedStart",function(){return n.changeStatusNav()}),t.TgZ(7,"ng-scrollbar",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"h3",11,12),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",13)(16,"span",14),t._UZ(17,"lucide-icon",15),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()(),t.TgZ(20,"mat-drawer-content"),t.YNc(21,QT,33,21,"div",16),t.qZA()()()()),2&e){const i=t.MAs(12);t.Q6J("headerBackTolink",n.backToLink),t.xp6(2),t.Q6J("ngIf",n.syncTestbankService.isLoading),t.xp6(1),t.Q6J("msg",n.syncTestbankService.keyLoading)("show",n.syncTestbankService.isLoading)("percent",0),t.xp6(1),t.Q6J("hasBackdrop",n.hasBackdrop),t.xp6(1),t.s9C("opened",n.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(19,DT,n.isMobile,!n.isMobile))("mode",n.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(4),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(14,15,"lang_core_auto_tool_sync_huong_dan_dong_bo")," "),t.xp6(5),t.hij(" ",t.lcZ(19,17,"lang_core_auto_tool_sync_huong_dan_dong_bo_description")," "),t.xp6(3),t.Q6J("ngIf",n.isLoadForm)}},dependencies:[y.mk,y.O5,Ne.jA,Ne.kh,Ne.LW,Qt.Kd,P.KC,qo.N,Ke.Q,ui,Vt._,b.Nh5,Nn,tt.bT],encapsulation:2}),o})();var FT=T(67755),RT=T(73828);function zT(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function JT(o,s){if(1&o&&(t.TgZ(0,"div",3),t._UZ(1,"azt-test-result-tracking",4),t.qZA()),2&o){const e=t.oxw();let n;t.xp6(1),t.Q6J("startQuestionIndex",null!==(n=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==n?n:1)("dataResultObjs",e.dataResultObjs)("dataScrollObjs",e.dataScrollObjs)}}let BT=(()=>{class o extends R.Q{getData(e,n,i,a){this.initStatusObj(),this.subscriptions.add(this.examResultTrackService.apiExamResultTrackGetObjGet(e,n,i,a).subscribe(r=>{var l,c,_,d,p,h,f,w,k;if(1==r.success){this.examObj=null===(l=r.data)||void 0===l?void 0:l.examObj;var S=this.castJsonToObj(this.zipDataService.decodeContentGzip(null!==(d=null===(_=null===(c=r?.data)||void 0===c?void 0:c.examResultTrackObj)||void 0===_?void 0:_.trackData)&&void 0!==d?d:""));S&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(S)),this.backToLink="/admin/testbank/exam-results-list/"+(null!==(h=null===(p=r.data)||void 0===p?void 0:p.examObj)&&void 0!==h&&h.categoryId?r.data.examObj.categoryId:0)+"/"+(null===(w=null===(f=r.data)||void 0===f?void 0:f.examObj)||void 0===w?void 0:w.id)+"/0",this.successStatusObj()}else this.errorStatusObj(null!==(k=r.message)&&void 0!==k?k:"",!0)}))}ngOnInit(){var e,n,i;this.commonService.translateMetaData({title:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let a=Number(this.activeRoute.snapshot.paramMap.get("exam_id"));var r=null!==(e=this.activeRoute.snapshot.paramMap.get("result_id"))&&void 0!==e?e:"0";let l=parseInt(r,10),c=null!==(n=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==n?n:"",_=null!==(i=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==i?i:"";this.getData(a,c,_,l),super.ngOnInit()}constructor(e,n,i,a,r){super(n),this.activeRoute=e,this.commonService=n,this.examResultTrackService=i,this.zipDataService=a,this.sAztTestResultTrackingService=r,this.dataResultObjs=[],this.dataScrollObjs=[],this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C.gz),t.Y36(_t.v),t.Y36(xt.UR),t.Y36(fn.D),t.Y36(FT.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-test-result-tracking"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","mt-3","mb-5"],[3,"startQuestionIndex","dataResultObjs","dataScrollObjs"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,zT,1,0,"azt-loading-effect",1),t.YNc(2,JT,2,3,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q,RT.$,Vt._]}),o})();var HT=T(82805),ga=T(41752),YT=T(28304),GT=T(43977),wi=T(83026);function $T(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"span",9),t._uU(2),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",null==e.studentObj?null:e.studentObj.fullName),t.xp6(1),t.Oqu(null==e.studentObj?null:e.studentObj.fullName)}}const KT=function(){return{}};function WT(o,s){if(1&o&&t._UZ(0,"img",10),2&o){const e=t.oxw();t.Q6J("nameImages",(null==e.studentObj?null:e.studentObj.nameImages)||t.DdM(1,KT))}}function VT(o,s){if(1&o&&(t.TgZ(0,"div",11),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA(),t.kcU(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"anonymousPhone"),t.qZA()()),2&o){const e=t.oxw();t.xp6(4),t.AsE("",t.lcZ(5,2,"lang_auto_dien_thoai"),": ",e.studentObj?t.lcZ(6,4,e.studentObj.phone):""," ")}}function XT(o,s){if(1&o&&(t.TgZ(0,"div",14),t.O4$(),t.TgZ(1,"svg",15),t._UZ(2,"rect",16)(3,"line",17)(4,"line",18)(5,"line",19)(6,"path",20)(7,"path",21)(8,"path",22)(9,"path",23)(10,"path",24)(11,"path",25),t.qZA(),t.kcU(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"formatOnlyDateByUserUnitPipe"),t.qZA()()),2&o){const e=t.oxw();t.xp6(13),t.AsE("",t.lcZ(14,2,"lang_auto_ngay_sinh"),": ",t.lcZ(15,4,null==e.studentObj?null:e.studentObj.birthday),"")}}let tC=(()=>{class o extends R.Q{returnTooltip(){var e,n,i,a;return null==(null===(e=this.studentObj)||void 0===e?void 0:e.parentPhone)?"ID: "+(null===(n=this.studentObj)||void 0===n?void 0:n.parentId)+" - Phone: "+this.userService.anonymousPhone(null!==(a=null===(i=this.studentObj)||void 0===i?void 0:i.phone)&&void 0!==a?a:""):"ID: "+this.studentObj.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.userService=n}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(hn.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-basic-info-box"]],inputs:{studentObj:"studentObj"},features:[t.qOj],decls:10,vars:8,consts:[[1,"flex","flex-1","items-center","justify-start"],[1,"w-20","h-20","flex-none","image-fit","relative"],[2,"cursor","pointer",3,"nameCreateAvatar","matTooltip","size","linkAvatar"],[1,"ml-5","w-full"],[1,"font-medium","text-md"],[4,"ngIf","ngIfElse"],["noStudentName",""],["class","flex items-center text-xs mt-1",4,"ngIf"],["class","flex items-center mt-1 text-xs",4,"ngIf"],[1,"truncate","sm:whitespace-normal",2,"max-width","72%",3,"matTooltip"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"max-width","95%!important",3,"nameImages"],[1,"flex","items-center","text-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-3","h-3","mr-2"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"flex","items-center","mt-1","text-xs"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["d","M8 14h.01"],["d","M12 14h.01"],["d","M16 14h.01"],["d","M8 18h.01"],["d","M12 18h.01"],["d","M16 18h.01"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"azt-create-avatar",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,$T,3,2,"ng-container",5),t.YNc(6,WT,1,2,"ng-template",null,6,t.W1O),t.qZA(),t.YNc(8,VT,7,6,"div",7),t.YNc(9,XT,16,6,"div",8),t.qZA()()),2&e){const i=t.MAs(7);let a;t.xp6(2),t.s9C("matTooltip",n.returnTooltip()),t.Q6J("nameCreateAvatar",null==n.studentObj?null:n.studentObj.fullName)("size",80)("linkAvatar",null==n.studentObj?null:n.studentObj.avatar),t.xp6(3),t.Q6J("ngIf",!(null!=n.studentObj&&n.studentObj.nameImages)||(null!==(a=null==n.studentObj?null:n.studentObj.id)&&void 0!==a?a:0)>0)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.studentObj&&10==(null==n.studentObj.phone?null:n.studentObj.phone.length)),t.xp6(1),t.Q6J("ngIf",null==n.studentObj?null:n.studentObj.birthday)}},dependencies:[y.O5,Qt.Kd,Fn.g,Sn.L,tt.bT,tt.C5,tt._I],encapsulation:2}),o})();var eC=T(40486);function nC(o,s){if(1&o&&(t.TgZ(0,"div",5)(1,"button",6),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"span",7),t._uU(5),t.qZA()()()),2&o){const e=t.oxw(),n=t.MAs(2);t.xp6(1),t.Q6J("matMenuTriggerFor",n),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_xem_cac_lan_thi_")," "),t.xp6(3),t.hij("(",e.historyExamResultObjs.length,")")}}function iC(o,s){1&o&&(t.TgZ(0,"li"),t._UZ(1,"hr",13),t.qZA())}const oC=function(o){return{"bg-slate-100 dark:bg-darkmode-300":o}};function aC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.getAndProcessAnswers(a.id))}),t.TgZ(2,"div",9)(3,"div",10),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",11),t._uU(8),t.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(10,"formatOnlyTimeByUserUnitPipe"),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()(),t.YNc(14,iC,2,0,"li",12)}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(20,oC,e.id===i.examResultIdParam)),t.xp6(3),t.HOy(" ",t.lcZ(5,10,"lang_auto_lan")," ",i.historyExamResultObjs.length-n," [",t.lcZ(6,12,"lang_auto_diem")," ",e.mark,"] "),t.xp6(4),t.AsE("",t.lcZ(9,14,e.startedTest)," - ",t.lcZ(10,16,e.createdAt),""),t.xp6(4),t.AsE("",t.lcZ(13,18,"lang_auto_thoi_gian_lam_bai"),": ",i.calculateTime(e.startedTest,e.createdAt),""),t.xp6(2),t.Q6J("ngIf",n!=i.historyExamResultObjs.length-1)}}let sC=(()=>{class o extends R.Q{getAndProcessAnswers(e){var n=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+e)+"?backto="+encodeURIComponent(this.backToLink);window.location.href=n.toString()}calculateTime(e,n){return this.timeService.calculationTestedTime(e,n)}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.timeService=n,this.historyExamResultObjs=[],this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Ae.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank-test-review-exam-result-history"]],inputs:{historyExamResultObjs:"historyExamResultObjs",backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam"},features:[t.qOj],decls:6,vars:2,consts:[["class","history-exam mt-3",4,"ngIf"],["menuTimeTest","matMenu"],[1,"dropdown-menu","show","w-72","relative",2,"overflow-y","auto"],[1,"dropdown-content",2,"margin-top","0"],["ngFor","",3,"ngForOf"],[1,"history-exam","mt-3"],[1,"btn","btn-outline-secondary","block","w-full",3,"matMenuTriggerFor"],[1,"ml-2"],["azt-track-service","exam-result-history-6Kv3ed2IY6",1,"dropdown-item",3,"ngClass","click"],[1,"once-tested"],[1,"font-medium"],[1,"text-xs","text-slate-600","dark:text-slate-300","mt-1"],[4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"]],template:function(e,n){1&e&&(t.YNc(0,nC,6,5,"div",0),t.TgZ(1,"mat-menu",null,1)(3,"div",2)(4,"ul",3),t.YNc(5,aC,15,22,"ng-template",4),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.historyExamResultObjs),t.xp6(5),t.Q6J("ngForOf",n.historyExamResultObjs))},dependencies:[y.mk,y.sg,y.O5,Ft.W0,Ft.D8,tt.bT,tt.tO,tt.t2],encapsulation:2}),o})();var rC=T(20038);let lC=(()=>{class o extends R.Q{hasNext(){var e=-1;if(this.testedUserObjs){for(var n=0;n<this.testedUserObjs.length;n++)if(this.testedUserObjs[n].userId==this.userIdParam&&this.testedUserObjs[n].studentId==this.studentIdParam){e=n;break}return e<this.testedUserObjs.length-1}return!1}hasPrev(){var e=-1;if(this.testedUserObjs){for(var n=0;n<this.testedUserObjs.length;n++)if(this.testedUserObjs[n].userId==this.userIdParam&&this.testedUserObjs[n].studentId==this.studentIdParam){e=n;break}return e>0}return!1}handleNavigate(e){var n,i,a,r,l,c,_=-1;if(this.testedUserObjs){for(var d=0;d<this.testedUserObjs.length;d++)if(this.testedUserObjs[d].userId==this.userIdParam&&this.testedUserObjs[d].studentId==this.studentIdParam){_=d,console.log("found data");break}if("next"==e){if(_>=0&&_<=this.testedUserObjs.length-2){var p=null===(n=this.testedUserObjs[_+1].userId)||void 0===n?void 0:n.toString(),h=null===(i=this.testedUserObjs[_+1].studentId)||void 0===i?void 0:i.toString(),f=null===(a=this.testedUserObjs[_+1].resultId)||void 0===a?void 0:a.toString(),w=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+p+"/"+h+"/"+(f??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=w.toString()}}else _>0&&_<=this.testedUserObjs.length-1&&(p=null===(r=this.testedUserObjs[_-1].userId)||void 0===r?void 0:r.toString(),h=null===(l=this.testedUserObjs[_-1].studentId)||void 0===l?void 0:l.toString(),f=null===(c=this.testedUserObjs[_-1].resultId)||void 0===c?void 0:c.toString(),w=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+p+"/"+h+"/"+(f??0))+"?backto="+encodeURIComponent(this.backToLink),window.location.href=w.toString())}}ngOnInit(){super.ngOnInit(),(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n,i,a;this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=null!==(n=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==n?n:void 0,this.studentIdParam=null!==(i=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==i?i:void 0,this.examIdParam=null!==(a=this.activeRoute.snapshot.paramMap.get("exam_id"))&&void 0!==a?a:void 0})}constructor(e,n){super(e),this.commonService=e,this.activeRoute=n,this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank-test-review-show-next-back-button"]],inputs:{testedUserObjs:"testedUserObjs"},features:[t.qOj],decls:9,vars:8,consts:[[1,"p-3"],["azt-track-service","show-next-back-box-_0g3eIKk5Q",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["points","15 18 9 12 15 6"],["azt-track-service","show-next-back-box-gLJelBC71K",1,"btn","btn-sm","btn-secondary-soft",3,"disabled","matTooltip","click"],["points","9 18 15 12 9 6"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.handleNavigate("prev")}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"polyline",3),t.qZA()(),t.kcU(),t.TgZ(5,"button",4),t.NdJ("click",function(){return n.handleNavigate("next")}),t.ALo(6,"mytranslate"),t.O4$(),t.TgZ(7,"svg",2),t._UZ(8,"polyline",5),t.qZA()()()),2&e&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_auto_hoc_sinh_truoc_do")),t.Q6J("disabled",!n.hasPrev()),t.xp6(4),t.s9C("matTooltip",t.lcZ(6,6,"lang_auto_hoc_sinh_tiep_theo")),t.Q6J("disabled",!n.hasNext()))},dependencies:[Qt.Kd,tt.bT],encapsulation:2}),o})(),cC=(()=>{class o extends R.Q{clickExportPdf(){var e,n,i;this.essayQuestionObjs.length>0&&(null===(e=this.examResultObj)||void 0===e||!e.confirmedAt)?this.showErrorSnack("lang_auto_ban_chi_co_the_tai_file_pdf_khi_cham_xong_tu_luan"):this.exportResultService.processUser(Number(null!==(n=this.examIdParam)&&void 0!==n?n:0),Number(null!==(i=this.examResultIdParam)&&void 0!==i?i:0),this.userIdParam,this.studentIdParam).then(()=>{}).catch(a=>{this.commonService.snackError("string"==typeof a?a:a.message)})}redirectToTestedList(){this.commonService.myNavigation("/admin/testbank/exam-results-list/"+(this.examObj?this.examObj.categoryId:0)+"/"+this.examIdParam+"/0")}ngOnInit(){super.ngOnInit()}constructor(e,n){super(e),this.commonService=e,this.exportResultService=n,this.essayQuestionObjs=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(di.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank-test-review-export-pdf-menu"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",examObj:"examObj",examResultObj:"examResultObj",essayQuestionObjs:"essayQuestionObjs"},features:[t.qOj],decls:29,vars:7,consts:[[1,"menu","ml-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","export-pdf-menu-box-55F1itGQin",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","export-pdf-menu-box-LA2X4vBtnx",1,"dropdown-item",3,"click"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 11h4"],["d","M12 16h4"],["d","M8 11h.01"],["d","M8 16h.01"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.O4$(),t.TgZ(2,"svg",2),t._UZ(3,"line",3)(4,"line",4)(5,"line",5),t.qZA()()(),t.kcU(),t.TgZ(6,"mat-menu",6,7)(8,"div",8)(9,"ul",9)(10,"li")(11,"a",10),t.NdJ("click",function(){return n.clickExportPdf()}),t.O4$(),t.TgZ(12,"svg",11),t._UZ(13,"path",12)(14,"polyline",13)(15,"line",14),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(18,"li")(19,"a",15),t.NdJ("click",function(){return n.redirectToTestedList()}),t.O4$(),t.TgZ(20,"svg",11),t._UZ(21,"rect",16)(22,"path",17)(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21),t.qZA(),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()),2&e){const i=t.MAs(7);t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(15),t.hij(" ",t.lcZ(17,3,"lang_auto_tai_bai_lam_duoi_dang_pdf")," "),t.xp6(11),t.hij(" ",t.lcZ(28,5,"lang_auto_danh_sach_da_thi")," ")}},dependencies:[Ft.W0,Ft.D8,tt.bT],encapsulation:2}),o})();function _C(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_trac_nghiem")))}function dC(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_tu_luan")))}function uC(o,s){if(1&o&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,e.data.createdAt)," ")}}function mC(o,s){if(1&o&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,e.data.createdAt)," ")}}function pC(o,s){1&o&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",13)(2,"g",14)(3,"g",15),t._UZ(4,"circle",16),t.TgZ(5,"path",17),t._UZ(6,"animateTransform",18),t.qZA()()()()())}let fa=(()=>{class o extends R.Q{btnCloseDialog(e){this.dialogRef.close(e)}constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data=i}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-confirm-history"]],features:[t.qOj],decls:23,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center"],[2,"font-weight","450","font-size","14px"],[4,"ngIf"],["style","font-weight: 450; font-size: 15px; color: #ff0024",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"text-right","my-3","p-3"],["azt-track-service","dialog-confirm-action-0FalsTWUHN",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","dialog-confirm-action-weCfaxHnGJ",1,"btn","w-32","btn-primary",3,"disabled","click"],[2,"font-weight","450","font-size","15px","color","#ff0024"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t.YNc(5,_C,3,3,"span",5),t.YNc(6,dC,3,3,"span",5),t.YNc(7,uC,4,7,"span",6),t.YNc(8,mC,4,7,"span",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",7)(12,"p",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return n.btnCloseDialog(void 0)}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return n.btnCloseDialog(n.data)}),t.YNc(20,pC,7,0,"span",5),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",10!=n.data.type),t.xp6(1),t.Q6J("ngIf",10==n.data.type),t.xp6(1),t.Q6J("ngIf",10!=n.data.type),t.xp6(1),t.Q6J("ngIf",10==n.data.type),t.xp6(1),t.hij(" ",t.lcZ(10,10,"lang_auto_lam_ket_qua_phuc_khao_cho_hoc_sinh_nay")," "),t.xp6(4),t.hij(" ",t.lcZ(14,12,"lang_auto_de_tra_loi_cau_hoi_tu_luan_ban_co_the_lam_truc_tiep_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(18,14,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(22,16,"lang_cms_common_confirm_btn")," "))},dependencies:[y.O5,tt.bT,tt.tO],encapsulation:2}),o})();function hC(o,s){1&o&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function gC(o,s){1&o&&t._UZ(0,"th")}function fC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"span")(1,"span",17),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(5);return t.KtG(r.onShowFile(a))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit;t.xp6(2),t.Oqu(e.name)}}function xC(o,s){if(1&o&&(t.ynx(0),t.YNc(1,fC,3,1,"span",13),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.fileObjs)}}function vC(o,s){1&o&&(t._uU(0),t.ALo(1,"mytranslate")),2&o&&t.hij(" ",t.lcZ(1,1,"lang_auto_khong_co_file")," ")}function bC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=i.$implicit,r=i.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(a,r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.fileObjs&&e.fileObjs.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function wC(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,xC,2,1,"ng-container",15),t.YNc(9,vC,2,3,"ng-template",null,16,t.W1O),t.qZA(),t.YNc(11,bC,4,4,"td",12),t.qZA(),t.BQk()),2&o){const e=s.$implicit,n=s.index,i=t.MAs(10),a=t.oxw(3);t.xp6(3),t.Oqu(n+1),t.xp6(2),t.Oqu(t.lcZ(6,5,e.createdAt)),t.xp6(3),t.Q6J("ngIf",null==e.fileObjs?null:e.fileObjs.length)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",!a.isFrontEnd)}}function TC(o,s){if(1&o&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"File"),t.qZA(),t.YNc(10,gC,1,0,"th",12),t.qZA(),t.YNc(11,wC,12,7,"ng-container",13),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,6,"lang_auto_thoi_gian")),t.xp6(4),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function CC(o,s){1&o&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function kC(o,s){1&o&&(t.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"span",23),t._uU(4,"Loading..."),t.qZA()()()())}function OC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function yC(o,s){if(1&o&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,TC,12,8,"table",6),t.YNc(4,CC,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,kC,5,0,"div",9),t.YNc(8,OC,5,4,"div",10),t.qZA()()),2&o){const e=t.MAs(5),n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",n.isLoadMore),t.xp6(1),t.Q6J("ngIf",!n.isLoadMore)}}let AC=(()=>{class o extends R.Q{btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptFileObjGet(e.examId,this.data.resultObj.id,e.userId,e.id).subscribe(n=>{var i;1==n.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_file_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(null!==(i=n.message)&&void 0!==i?i:"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,n){var i,a,r,l;let c={isShow:!0,index:n+1,type:10,createdAt:null!==(i=e.createdAt)&&void 0!==i?i:0,examId:null!==(a=e.examId)&&void 0!==a?a:0,userId:null!==(r=e.userId)&&void 0!==r?r:0,id:null!==(l=e.id)&&void 0!==l?l:0};this.dialog.open(fa,{data:c,restoreFocus:!1}).afterClosed().subscribe(d=>{d&&this.confirmData(d)})}onShowFile(e){let n=Object.assign(Object.assign({},e),{index:-1});this.dialog.open(li.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:n},restoreFocus:!1})}convertFileObjs(e){for(var n=[],i=0;i<e.length;i++){var a=this.castObj(e[i]);a?.files&&(a.fileObjs=this.castJsonToObj(a.files)),n.push(e[i])}return n}getNextPage(){this.getObjs(this.curPage)}getObjs(e){var n;""==e&&this.initStatusObj(),this.isLoadMore=!0,this.examResultHistoryLogService.apiExamResultHistoryLogGetFileObjsGet(this.data.examObj.id,this.data.resultObj.id,null===(n=this.data.resultObj.userId)||void 0===n?void 0:n.toString(),e).subscribe(i=>{var a,r,l,c,_;1==i.success?(this.isLoadMore=!1,this.curPage=null!==(r=null===(a=i.data)||void 0===a?void 0:a.nextPage)&&void 0!==r?r:"",!(null===(l=i.data)||void 0===l)&&l.objs&&i.data.objs.length>0&&(this.objs=this.objs.concat(this.convertFileObjs(i.data.objs))),!(null===(c=i.data)||void 0===c)&&c.nextPage||(this.disableBtn=!0),this.successStatusObj()):(this.isLoadMore=!1,this.errorStatusObj(null!==(_=i.message)&&void 0!==_?_:"",!0))})}ngOnInit(){this.getObjs(""),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.examResultHistoryLogService=n,this.dialog=i,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.dataPreviewFile=new t.vpe,this.form=new m.nJ({}),this.IAztTestbankMarkEssayDialogConfirmData={type:0,isShow:!1},this.objs=[],this.isLoadMore=!1,this.curPage="",this.offset=0,this.disableBtn=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.ml),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-result-history-essay"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog",dataPreviewFile:"dataPreviewFile"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],[4,"ngIf","ngIfElse"],["noFiles",""],["azt-track-service","essay-qvqBong5nt",1,"preview-file",3,"click"],["azt-track-service","essay-CT8RATAJF6",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","essay-TB1XoFOuoU","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,n){if(1&e&&(t.YNc(0,hC,2,0,"div",0),t.YNc(1,yC,9,4,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.sg,y.O5,je.eB,Wt.Hw,Qt.Kd,zt.Q,tt.bT,tt.tO],encapsulation:2}),o})();function SC(o,s){1&o&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function ZC(o,s){1&o&&t._UZ(0,"th")}function EC(o,s){1&o&&(t.TgZ(0,"span"),t._uU(1,"\xa0|\xa0"),t.qZA())}function IC(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,EC,2,0,"span",12),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2),a=i.index,r=i.$implicit,l=t.oxw(2).$implicit;let c;t.xp6(1),t.hij(" ",e.content+(a!=(null!==(c=null==l.dataObj.answers?null:l.dataObj.answers.length)&&void 0!==c?c:0)-1&&n==r.answerContent.length-1?", ":"")," "),t.xp6(1),t.Q6J("ngIf",n!=r.answerContent.length-1)}}function MC(o,s){if(1&o&&(t.TgZ(0,"span")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,IC,3,2,"span",13),t.qZA()),2&o){const e=t.oxw(),n=e.index,i=e.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_auto_cau")," ",n+1,":\xa0"),t.xp6(2),t.Q6J("ngForOf",i.answerContent)}}function PC(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,MC,5,5,"span",12),t.qZA()),2&o){const e=s.$implicit;t.xp6(1),t.Q6J("ngIf",e.answerContent.length>0)}}function LC(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,PC,2,1,"span",13),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.dataObj.answers)}}function jC(o,s){1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_chon_dap_an")))}function NC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"td")(1,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=i.$implicit,r=i.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(a,r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function qC(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,LC,2,1,"div",12),t.YNc(9,jC,3,3,"div",12),t.qZA(),t.YNc(10,NC,4,4,"td",12),t.qZA(),t.BQk()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);t.xp6(3),t.Oqu(n+1),t.xp6(2),t.Oqu(t.lcZ(6,5,1e3*(e.secondTime?e.secondTime:0))),t.xp6(3),t.Q6J("ngIf",null==e.dataObj||null==e.dataObj.answers?null:e.dataObj.answers.length),t.xp6(1),t.Q6J("ngIf",!(null!=e.dataObj&&null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Q6J("ngIf",!i.isFrontEnd)}}function QC(o,s){if(1&o&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,ZC,1,0,"th",12),t.qZA(),t.YNc(12,qC,11,7,"ng-container",13),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,7,"lang_auto_thoi_gian")),t.xp6(3),t.Oqu(t.lcZ(10,9,"lang_auto_dap_an_chon")),t.xp6(2),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function DC(o,s){1&o&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function UC(o,s){1&o&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Loading..."),t.qZA()()()())}function FC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function RC(o,s){if(1&o&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,QC,13,11,"table",6),t.YNc(4,DC,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,UC,5,0,"div",9),t.YNc(8,FC,5,4,"div",10),t.qZA()()),2&o){const e=t.MAs(5),n=t.oxw();t.xp6(3),t.Q6J("ngIf",n.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",n.isLoadMore),t.xp6(1),t.Q6J("ngIf",!n.isLoadMore)}}let zC=(()=>{class o extends R.Q{convertGzipResultObjs(e){for(var n,i,a=[],r=0;r<e.length;r++){var l=this.castObj(e[r]);if(l){var c=this.zipDataService.decodeContentGzip(null!==(n=l?.datas)&&void 0!==n?n:"");l.dataObj=null!==(i=this.castJsonToObj(c))&&void 0!==i?i:{},a.push(l)}}return a}convertRawToMixForAnswerObjs(e){for(var n,i=0;i<e.length;i++){var a=null===(n=e[i].dataObj)||void 0===n?void 0:n.answers;if(a){for(var r=0;r<a.length;r++)a[r].answerContent.length&&(a[r].answerContent[0].content=this.findAlphaOfAnswerContent(a[r].answerContent[0].content,a[r].questionId));e[i].dataObj.answers=a}}return e}findAlphaOfAnswerContent(e,n){var i,a,r,l;let c="";for(let d=0;d<this.questionObjs.length;d++)if(this.questionObjs[d].id==n){if(this.questionAnswerConfigService.isTrueFalseQuestion(null!==(i=this.questionObjs[d].answerType)&&void 0!==i?i:0)){var _=null===(a=this.questionObjs[d].answerConfigParse)||void 0===a?void 0:a.filter(p=>p.key==e&&p.questionId==n);_&&_.length>0&&(c=null!==(l=null!==(r=_[0].alpha)&&void 0!==r?r:_[0].key)&&void 0!==l?l:"");break}c=e}return c}getQuestionData(e,n){this.examResultHistoryLogService.apiExamResultHistoryLogGetAllExamQuestionObjsGet(e,this.data.resultObj.id).subscribe(i=>{var a,r;if(1==i.success){let l=this.commonService.castJsonToClassObjs(da.x,JSON.stringify(null===(a=i.data)||void 0===a?void 0:a.objs));this.questionObjs=this.questionAnswerConfigService.changeQuestionContent(l??[],!0),n(!0)}else this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"",!0),n(!1)})}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptResultObjGet(e.examId,this.data.resultObj.id,e.userId,e.id).subscribe(n=>{var i;1==n.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_du_lieu_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(null!==(i=n.message)&&void 0!==i?i:"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,n){var i,a,r,l;let c={isShow:!0,index:n+1,type:11,createdAt:null!==(i=e.secondTime)&&void 0!==i?i:0,examId:null!==(a=e.examId)&&void 0!==a?a:0,userId:null!==(r=e.userId)&&void 0!==r?r:0,id:null!==(l=e.id)&&void 0!==l?l:0};this.dialog.open(fa,{data:c,restoreFocus:!1}).afterClosed().subscribe(d=>{d&&this.confirmData(d)})}getNextPage(){this.getObjs(this.curPage)}getObjs(e){var n;""==e&&this.initStatusObj(),this.isLoadMore=!0,this.getQuestionData(null!==(n=this.data.examObj.id)&&void 0!==n?n:0,i=>{var a;i?this.examResultHistoryLogService.apiExamResultHistoryLogGetResultObjsGet(this.data.examObj.id,this.data.resultObj.id,null===(a=this.data.resultObj.userId)||void 0===a?void 0:a.toString(),this.curPage).subscribe(r=>{var l,c,_,d,p;if(1==r.success){if(null!==(l=r.data)&&void 0!==l&&l.objs&&r.data.objs.length>0){var h=this.convertGzipResultObjs(r.data.objs);h=this.convertRawToMixForAnswerObjs(h),this.objs=this.objs.concat(h)}this.curPage=null!==(_=null===(c=r.data)||void 0===c?void 0:c.nextPage)&&void 0!==_?_:"",!(null===(d=r.data)||void 0===d)&&d.nextPage||(this.disableBtn=!0),this.isLoadMore=!1,this.successStatusObj()}else this.isLoadMore=!1,this.errorStatusObj(null!==(p=r.message)&&void 0!==p?p:"",!0)}):(this.stopStatusObj(),this.isLoadMore=!0)})}ngOnInit(){this.getObjs(this.curPage),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(e,n,i,a,r){super(e),this.commonService=e,this.examResultHistoryLogService=n,this.zipDataService=i,this.questionAnswerConfigService=a,this.dialog=r,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.form=new m.nJ({}),this.objs=[],this.curPage="",this.offset=0,this.disableBtn=!1,this.questionObjs=[],this.isLoadMore=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.ml),t.Y36(fn.D),t.Y36(io.U),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-result-history-truefalse"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],["azt-track-service","truefalse-XnX_QRUEsZ0",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","truefalse-RDGSarfASfG","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,n){if(1&e&&(t.YNc(0,SC,2,0,"div",0),t.YNc(1,RC,9,4,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.sg,y.O5,je.eB,Wt.Hw,Qt.Kd,zt.Q,tt.bT,tt.ZN],encapsulation:2}),o})();function JC(o,s){if(1&o&&(t.TgZ(0,"div",9)(1,"span",10),t._UZ(2,"azt-create-avatar",11),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.qZA(),t._uU(5,"\xa0-\xa0 "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("linkAvatar",e.data.studentObj.avatar)("nameCreateAvatar",e.data.studentObj.fullName)("size",30),t.xp6(2),t.hij(" ",e.data.studentObj.fullName,""),t.xp6(3),t.Oqu(t.lcZ(8,5,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi"))}}function BC(o,s){1&o&&(t.TgZ(0,"div",9)(1,"span",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi")))}function HC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-truefalse",15),t.NdJ("closeDialog",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.btnCloseDialog(i))}),t.qZA()()()}if(2&o){const e=t.oxw();t.s9C("label",t.lcZ(1,3,"lang_auto_du_lieu_bai_lam")),t.xp6(3),t.Q6J("data",e.data)("isFrontEnd",e.isFrontEnd)}}function YC(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-essay",16),t.NdJ("closeDialog",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.btnCloseDialog(i))})("dataPreviewFile",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.btnCloseDialog(i))}),t.qZA()()()}if(2&o){const e=t.oxw(2);t.s9C("label",t.lcZ(1,3,"lang_auto_file_bai_lam")),t.xp6(3),t.Q6J("isFrontEnd",e.isFrontEnd)("data",e.data)}}function GC(o,s){if(1&o&&(t.ynx(0),t.YNc(1,YC,4,5,"mat-tab",4),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.data.resultObj.files||""==e.data.resultObj.files||"[]"==e.data.resultObj.files)}}let $C=(()=>{class o extends R.Q{btnCloseDialog(e){this.dialogRef.close(e)}constructor(e,n,i){super(e),this.commonService=e,this.dialogRef=n,this.data={examObj:{},resultObj:{},studentObj:{}},this.isFrontEnd=!1,this.data=i.dataHistory,this.isFrontEnd=i.isFrontEnd}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(U.hV,8),t.Y36(U.eJ,8))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-result-history"]],features:[t.qOj],decls:13,vars:10,consts:[[1,"box"],[1,"px-5","pt-5"],["class","flex items-center",4,"ngIf"],["mat-align-tabs","start","dynamicHeight","",1,"mt-3",2,"height","60vh",3,"selectedIndex"],[3,"label",4,"ngIf"],[4,"ngIf"],["align","end"],[1,"text-right","p-3"],["azt-track-service","result-history-mkCSltAT1",1,"btn","w-24","btn","btn-secondary",3,"click"],[1,"flex","items-center"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3"],[1,"text-danger"],[3,"label"],[2,"width","100%",3,"data","isFrontEnd","closeDialog"],[2,"width","100%",3,"isFrontEnd","data","closeDialog","dataPreviewFile"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,JC,9,7,"div",2),t.YNc(3,BC,4,3,"div",2),t.TgZ(4,"mat-tab-group",3),t.YNc(5,HC,4,5,"mat-tab",4),t.YNc(6,GC,2,1,"ng-container",5),t.ALo(7,"hasEssayInExam"),t.qZA()(),t.TgZ(8,"mat-dialog-actions",6)(9,"div",7)(10,"button",8),t.NdJ("click",function(){return n.btnCloseDialog(!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()()),2&e){let i;t.xp6(2),t.Q6J("ngIf",!n.isFrontEnd),t.xp6(1),t.Q6J("ngIf",n.isFrontEnd),t.xp6(1),t.Q6J("selectedIndex",0),t.xp6(1),t.Q6J("ngIf","[]"==n.data.resultObj.answers),t.xp6(1),t.Q6J("ngIf",t.lcZ(7,6,null!==(i=null==n.data.examObj?null:n.data.examObj.examType)&&void 0!==i?i:0)),t.xp6(5),t.hij(" ",t.lcZ(12,8,"lang_auto_dong")," ")}},dependencies:[y.O5,U.ev,wi.SK,wi.R7,Fn.g,AC,zC,Di.O,tt.bT,tt.kK],encapsulation:2}),o})();var KC=T(9310);function WC(o,s){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA()()),2&o){const e=s.$implicit,n=s.index;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_combine_exam_component")+(n+1),":\xa0"),t.xp6(3),t.hij("",e,"/10")}}function VC(o,s){if(1&o&&(t.ynx(0),t.YNc(1,WC,5,4,"div",11),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.examResultObj?null:e.examResultObj.subjectMarkValues)}}function XC(o,s){if(1&o&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.lnq("(",e.examResultObj.rightAnswer,"/",e.examResultObj.totalQuestion-e.essayQuestionObjs.length,"\xa0",t.lcZ(2,3,"lang_auto_cau_brackets"),"")}}function t3(o,s){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.YNc(4,XC,3,5,"span",13),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,3,"lang_auto_trac_nghiem"),": ",null!=e.examResultObj.trueFalseMark?e.examResultObj.trueFalseMark:t.lcZ(3,5,"lang_auto_chua_co_diem")," "),t.xp6(3),t.Q6J("ngIf",null!=(null==e.examResultObj?null:e.examResultObj.rightAnswer))}}function e3(o,s){if(1&o&&t.YNc(0,t3,5,7,"div",10),2&o){const e=t.oxw();t.Q6J("ngIf",e.trueFalseChoiceQuestionObjs.length>0&&e.examResultObj&&e.examResultObj.totalQuestion)}}function n3(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_tu_luan"),": ",null==e.examResultObj?null:e.examResultObj.essayMark," (",e.essayQuestionObjs.length," ",t.lcZ(3,6,"lang_auto_cau_brackets")," ")}}function i3(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"span",16),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,4,"lang_auto_tu_luan"),": "),t.xp6(3),t.Oqu(t.lcZ(5,6,"lang_auto_chua_cham")),t.xp6(2),t.AsE(" (",e.essayQuestionObjs.length," ",t.lcZ(7,8,"lang_auto_cau_brackets")," ")}}function o3(o,s){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,n3,4,8,"span",15),t.YNc(2,i3,8,10,"span",15),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.examResultObj?null:e.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",!(null!=e.examResultObj&&e.examResultObj.confirmedAt))}}function a3(o,s){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",e.files.length," ")}}function s3(o,s){if(1&o&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",e.examTracks.exitFullScreen," ")}}function r3(o,s){if(1&o&&(t.TgZ(0,"div",12)(1,"span",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"azt-create-avatar",18),t.ALo(5,"mytranslate"),t.qZA()),2&o){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_auto_giao_vien_cham"),": "),t.xp6(2),t.s9C("matTooltip",t.lcZ(5,7,"lang_auto_giao_vien_cham")+": "+(null==e.markedByObj?null:e.markedByObj.fullName)),t.Q6J("nameCreateAvatar",null==e.markedByObj?null:e.markedByObj.fullName)("size",25)("linkAvatar",null==e.markedByObj?null:e.markedByObj.avatar)}}function l3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clickResultTrack())}),t.O4$(),t.TgZ(4,"svg",20),t._UZ(5,"path",21)(6,"polyline",22)(7,"circle",23)(8,"path",24),t.qZA()()()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function c3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showResultInfors())}),t.O4$(),t.TgZ(4,"svg",26),t._UZ(5,"circle",27)(6,"path",28)(7,"path",29)(8,"path",30),t.qZA()()()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_show_infos_test_submit"),": "))}function _3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openResultHistoryReview())}),t.O4$(),t.TgZ(4,"svg",32),t._UZ(5,"path",33)(6,"path",34)(7,"path",35),t.qZA()()()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_phuc_khao"),": "))}let d3=(()=>{class o extends R.Q{get checkHasType1Question(){var e,n,i;let a=!1;for(let r=0;r<(null!==(n=null===(e=this.questionObjs)||void 0===e?void 0:e.length)&&void 0!==n?n:0);r++)if(this.answerTypeService.isOneChoiceAnswer(null===(i=this.questionObjs)||void 0===i?void 0:i[r].answerType)){a=!0;break}return a}checkShowIconHistory(){var e,n,i,a;let r=!1;return this.historyExamResultObjs&&this.historyExamResultObjs.length>0&&(r=!0),this.homeworkExamService.isOnlyTrueFalse(null!==(n=null===(e=this.examObj)||void 0===e?void 0:e.examType)&&void 0!==n?n:0)?!(!r||!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj)):!(!r||""!=(null===(i=this.examResultObj)||void 0===i?void 0:i.files)&&null!=(null===(a=this.examResultObj)||void 0===a?void 0:a.files)&&!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj))}openResultHistoryReview(){this.dialog.open($C,{data:{dataHistory:{examObj:this.examObj,resultObj:this.examResultObj,studentObj:this.studentObj},isFrontEnd:!1},restoreFocus:!1})}showResultInfors(){this.dialog.open(KC.p,{width:"500px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){const e=this.commonService.getLocalRouter("/admin/testbank/test-result-tracking")+"/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+this.examResultIdParam;window.open(e,"_blank")}ngOnInit(){super.ngOnInit()}constructor(e,n,i,a){super(e),this.commonService=e,this.answerTypeService=n,this.homeworkExamService=i,this.dialog=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.historyExamResultObjs=[],this.resultInfos=[]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(Je.T),t.Y36(Ve.j),t.Y36(U.on))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-testbank-test-review-show-detail-info-for-teacher"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos"},features:[t.qOj],decls:24,vars:16,consts:[[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"font-medium","flex","items-center"],[1,"mr-3"],[1,"text-lg"],[4,"ngIf","ngIfElse"],["showNormalMark",""],["class","flex items-center mt-2",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],[1,"mr-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],["azt-track-service","show-detail-info-box-for-teacher--xrnTJmA5SE",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],["points","14 2 14 8 20 8"],["cx","8","cy","16","r","6"],["d","M9.5 17.5 8 16.25V14"],["azt-track-service","show-detail-info-box-for-teacher-setZE9eOS5A",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["cx","12","cy","12","r","10"],["d","M17 12h.01"],["d","M12 12h.01"],["d","M7 12h.01"],["azt-track-service","show-detail-info-box-for-teacher-IF9N08gpe_f",1,"btn-text-primary","ml-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 3v5h5"],["d","M3.05 13A9 9 0 1 0 6 5.3L3 8"],["d","M12 7v5l4 2"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"span",6),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"span",7),t._uU(13),t.qZA()(),t.YNc(14,VC,2,1,"ng-container",8),t.YNc(15,e3,1,1,"ng-template",null,9,t.W1O),t.YNc(17,o3,3,2,"div",10),t.YNc(18,a3,3,4,"div",10),t.YNc(19,s3,3,4,"div",10),t.YNc(20,r3,6,9,"div",10),t.YNc(21,l3,9,3,"div",10),t.YNc(22,c3,9,3,"div",10),t.YNc(23,_3,8,3,"div",10),t.qZA()()),2&e){const i=t.MAs(16);let a;t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_auto_thong_tin_chi_tiet")," "),t.xp6(5),t.hij("",t.lcZ(11,14,"lang_auto_diem_cuoi"),": "),t.xp6(3),t.Oqu((null==n.examResultObj?null:n.examResultObj.mark)+(null!=n.examResultObj&&null!=n.examResultObj.examResultStatisticObj&&null!=n.examResultObj.examResultStatisticObj.examQuestionStatisticObj&&n.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark?"/"+(null==n.examResultObj||null==n.examResultObj.examResultStatisticObj||null==n.examResultObj.examResultStatisticObj.examQuestionStatisticObj?null:n.examResultObj.examResultStatisticObj.examQuestionStatisticObj.totalMark):"")),t.xp6(1),t.Q6J("ngIf",(null==n.examObj?null:n.examObj.subjectMarks)&&(null==n.examResultObj||null==n.examResultObj.subjectMarkValues?null:n.examResultObj.subjectMarkValues.length))("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",n.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",n.examTracks&&0!=(null==n.examObj?null:n.examObj.autoMonitor)),t.xp6(1),t.Q6J("ngIf",null==n.examResultObj?null:n.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",n.checkHasType1Question&&n.trueFalseChoiceQuestionObjs.length>0&&(null==n.examResultObj?null:n.examResultObj.totalQuestion)),t.xp6(1),t.Q6J("ngIf",n.resultInfos.length),t.xp6(1),t.Q6J("ngIf",n.checkShowIconHistory()&&(null!==(a=null==n.examResultObj?null:n.examResultObj.userId)&&void 0!==a?a:0)>0)}},dependencies:[y.sg,y.O5,Qt.Kd,Fn.g,tt.bT],encapsulation:2}),o})();var u3=T(12205);const m3=["drawer"];function p3(o,s){1&o&&(t.TgZ(0,"div",5),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function h3(o,s){1&o&&(t.TgZ(0,"div")(1,"div",30),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_thi_sinh_chua_thi_lan_nao")," "))}function g3(o,s){if(1&o&&t._UZ(0,"app-testbank-show-offline-result",33),2&o){const e=t.oxw(3);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixquestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixquestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}const oo=function(){return[]};function f3(o,s){if(1&o&&(t._UZ(0,"app-testbank-test-review-show-detail-info-for-teacher",31),t.YNc(1,g3,1,9,"app-testbank-show-offline-result",25),t._UZ(2,"app-testbank-test-review-exam-result-history",32)),2&o){const e=t.oxw(2);let n,i;t.Q6J("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("studentObj",e.studentObj)("examObj",e.examObj)("examResultObj",e.examResultObj)("markedByObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.markedByObj)("questionObjs",e.questionObjs)("essayQuestionObjs",e.essayQuestionObjs)("trueFalseChoiceQuestionObjs",e.trueFalseChoiceQuestionObjs)("files",e.files)("historyExamResultObjs",null!==(n=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==n?n:t.DdM(22,oo))("examTracks",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.examTracks)("resultInfos",e.resultInfos),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("historyExamResultObjs",null!==(i=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==i?i:t.DdM(23,oo))("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)}}function x3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",35),t._UZ(3,"rect",36)(4,"path",37)(5,"path",38),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function v3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",35),t._UZ(3,"rect",36)(4,"path",37)(5,"path",40),t.qZA()()}2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function b3(o,s){if(1&o&&t._UZ(0,"app-testbank-show-offline-result",33),2&o){const e=t.oxw(2);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixquestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixquestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}function w3(o,s){if(1&o&&t._UZ(0,"azt-loaded-img",49),2&o){const e=t.oxw(3);t.Q6J("imgSrc",null==e.examObj?null:e.examObj.examHeader)}}function T3(o,s){if(1&o&&(t.TgZ(0,"div",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_dung")," ",null==e.examResultObj?null:e.examResultObj.rightAnswer,".")}}function C3(o,s){if(1&o&&(t.TgZ(0,"div",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_sai")," ",((null==e.examResultObj?null:e.examResultObj.totalQuestion)||0)-e.essayQuestionObjs.length-((null==e.examResultObj?null:e.examResultObj.rightAnswer)||0),".")}}const k3=function(o,s){return{correct:o,incorrect:s}};function O3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-standalone-question",51),t.NdJ("statusResult",function(i){const r=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.setClassStatusResult(i,r))}),t.qZA()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);let a;t.Q6J("startQuestionIndex",null==i.examObj?null:i.examObj.startQuestionIndex)("expandInfo",null==i.examObj?null:i.examObj.expandInfo)("follower",i.followerRenderQuest)("ngClass",t.WLB(15,k3,null==e?null:e.correctAnswer,!e.correctAnswer))("userAnswersObj",i.userAnswersObj)("question",e)("index",n)("place","multiple_choice")("configExam",i.examObj)("index",n)("cur_result",i.examResultIdParam)("newFirstInGroupIndexes",t.DdM(18,oo))("showButtonCommentToTeacher",!0)("allowAskQuestion",null!==(a=null==i.initDataResult||null==i.initDataResult.data?null:i.initDataResult.data.allowAskQuestion)&&void 0!==a?a:0)("displayScreen",i.displayScreen)}}function y3(o,s){if(1&o&&(t.TgZ(0,"mat-tab",41),t.ALo(1,"mytranslate"),t.TgZ(2,"div",42)(3,"div",43)(4,"ng-scrollbar",44)(5,"div",45),t.YNc(6,w3,1,1,"azt-loaded-img",46),t.YNc(7,T3,3,4,"div",47),t.YNc(8,C3,3,4,"div",47),t.YNc(9,O3,1,19,"ng-template",48),t.qZA()()()()()),2&o){const e=t.oxw(2);t.s9C("label",t.lcZ(1,10,"lang_auto_trac_nghiem")),t.xp6(2),t.Tol(e.viewOption),t.xp6(2),t.Q6J("visibility","hover")("disabled",e.isMobile),t.xp6(2),t.Q6J("ngIf",null==e.examObj?null:e.examObj.examHeader),t.xp6(1),t.Q6J("ngIf","viewRight"==e.viewOption),t.xp6(1),t.Q6J("ngIf","viewWrong"==e.viewOption),t.xp6(1),t.Q6J("ngForOf",e.questionObjs)}}function A3(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"azt-mark-essay-new",57),t.NdJ("saveResultEvent",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.saveResultEvent(i))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(4);let n;t.xp6(1),t.Q6J("displayScreen",e.displayScreen)("resultID",null!==(n=e.examResultIdParam)&&void 0!==n?n:0)("files",e.files)("questions",e.essayQuestionObjs)("userAnswersObj",e.userAnswersObj)("iframeSrc",e.iframeSrc)("examQuestionObjs",e.examQuestionObjs)("examResultObj",e.examResultObj)("configExam",e.examObj)("iframeViewMode","edit")("examObj",e.examObj)("isBackEnd",!0)("hasLoadedData",e.hasLoadedData)}}function S3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-mark-essay",57),t.NdJ("saveResultEvent",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.saveResultEvent(i))}),t.qZA()}if(2&o){const e=t.oxw(4);let n;t.Q6J("displayScreen",e.displayScreen)("resultID",null!==(n=e.examResultIdParam)&&void 0!==n?n:0)("files",e.files)("questions",e.essayQuestionObjs)("userAnswersObj",e.userAnswersObj)("iframeSrc",e.iframeSrc)("examQuestionObjs",e.examQuestionObjs)("examResultObj",e.examResultObj)("configExam",e.examObj)("iframeViewMode","edit")("examObj",e.examObj)("isBackEnd",!0)("hasLoadedData",e.hasLoadedData)}}function Z3(o,s){if(1&o&&(t.TgZ(0,"div",54)(1,"div",55),t.YNc(2,A3,2,13,"ng-container",13),t.YNc(3,S3,1,13,"ng-template",null,56,t.W1O),t.qZA()()),2&o){const e=t.MAs(4),n=t.oxw(3);t.xp6(2),t.Q6J("ngIf",n.checkMarkNote)("ngIfElse",e)}}function E3(o,s){if(1&o&&(t.TgZ(0,"mat-tab",52),t.ALo(1,"mytranslate"),t.YNc(2,Z3,5,2,"div",53),t.qZA()),2&o){const e=t.oxw(2);t.s9C("label",t.lcZ(1,2,"lang_auto_tu_luan")),t.xp6(2),t.Q6J("ngIf",1==e.curSelectedTab)}}const I3=function(o,s){return{"w-85":o,"w-25":s}},M3=function(o){return{"ml-5":o}};function P3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-drawer-container",6)(1,"mat-drawer",7,8),t.NdJ("closedStart",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.changeStatusNav())}),t.TgZ(3,"div",9)(4,"div",10),t._UZ(5,"azt-basic-info-box",11),t.qZA(),t.TgZ(6,"div",12),t.YNc(7,h3,4,3,"div",13),t.YNc(8,f3,3,24,"ng-template",null,14,t.W1O),t.qZA(),t._UZ(10,"app-testbank-test-review-show-next-back-button",15),t.qZA()(),t.TgZ(11,"mat-drawer-content")(12,"div",16)(13,"div",17)(14,"div",18),t.YNc(15,x3,6,3,"button",19),t.YNc(16,v3,6,3,"button",20),t.TgZ(17,"div",21),t._uU(18),t.qZA(),t.TgZ(19,"div",22),t.GkF(20,23),t._UZ(21,"app-testbank-test-review-export-pdf-menu",24),t.qZA()(),t.YNc(22,b3,1,9,"app-testbank-show-offline-result",25),t.TgZ(23,"div",26)(24,"mat-tab-group",27),t.NdJ("selectedTabChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onTabChanged(i))})("selectedIndexChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.curSelectedTab=i)}),t.YNc(25,y3,10,12,"mat-tab",28),t.YNc(26,E3,3,4,"mat-tab",29),t.qZA()()()()()()}if(2&o){const e=t.MAs(9),n=t.oxw(),i=t.MAs(6);t.Q6J("hasBackdrop",n.hasBackdrop),t.xp6(1),t.s9C("opened",n.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(25,I3,n.isMobile,!n.isMobile))("mode",n.mode),t.xp6(4),t.Q6J("studentObj",n.studentObj),t.xp6(2),t.Q6J("ngIf",0===(null==n.initDataResult||null==n.initDataResult.data||null==n.initDataResult.data.historyExamResultObjs?null:n.initDataResult.data.historyExamResultObjs.length))("ngIfElse",e),t.xp6(3),t.Q6J("testedUserObjs",n.testedUserObjs),t.xp6(2),t.Q6J("ngClass",t.VKq(28,M3,!n.isMobile&&n.isOpenSideNav)),t.xp6(3),t.Q6J("ngIf",!n.isOpenSideNav||n.isMobile),t.xp6(1),t.Q6J("ngIf",n.isOpenSideNav&&!n.isMobile),t.xp6(1),t.s9C("matTooltip",null==n.examObj?null:n.examObj.name),t.xp6(1),t.hij(" ",null==n.examObj?null:n.examObj.name," "),t.xp6(2),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("examResultIdParam",n.examResultIdParam)("userIdParam",n.userIdParam)("studentIdParam",n.studentIdParam)("examIdParam",n.examIdParam)("examObj",n.examObj)("examResultObj",n.examResultObj)("essayQuestionObjs",n.essayQuestionObjs),t.xp6(1),t.Q6J("ngIf",n.isMobileWebView),t.xp6(2),t.Q6J("selectedIndex",n.curSelectedTab),t.xp6(1),t.Q6J("ngIf",n.trueFalseChoiceQuestionObjs.length>0),t.xp6(1),t.Q6J("ngIf",n.essayQuestionObjs.length>0)}}function L3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.O4$(),t.TgZ(2,"svg",60),t._UZ(3,"polygon",61),t.qZA(),t.kcU(),t.TgZ(4,"span",62),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()(),t.TgZ(7,"mat-menu",63,64)(9,"div",65)(10,"ul",66)(11,"li")(12,"label",67),t._uU(13),t.ALo(14,"mytranslate"),t.TgZ(15,"div",68)(16,"input",69),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChangeViewOption("viewRight"))})("click",function(i){return i.stopPropagation()}),t.qZA()()()(),t.TgZ(17,"li")(18,"label",70),t._uU(19),t.ALo(20,"mytranslate"),t.TgZ(21,"div",68)(22,"input",71),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onChangeViewOption("viewWrong"))})("click",function(i){return i.stopPropagation()}),t.qZA()()()()()()()}if(2&o){const e=t.MAs(8),n=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.hij(" ",t.lcZ(6,6,"lang_testbank_testted_list_sort")," "),t.xp6(8),t.hij(" ",t.lcZ(14,8,"lang_auto_cau_dung")," "),t.xp6(3),t.Q6J("checked","viewRight"==n.viewOption),t.xp6(3),t.hij(" ",t.lcZ(20,10,"lang_auto_cau_sai")," "),t.xp6(3),t.Q6J("checked","viewWrong"==n.viewOption)}}let j3=(()=>{class o extends R.Q{onResize(e){e.target.innerWidth<980?(this.isMobile=!0,this.mode="over",this.hasBackdrop=!0):(this.isMobile=!1,this.mode="side",this.hasBackdrop=!1)}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}onChangeViewOption(e){this.viewOption=this.viewOption==e?"viewAll":e}onTabChanged(e){this.matTabGroupIndex=e.index}setClassStatusResult(e,n){(0,HT.H)(100).subscribe(()=>n.isStatusResult=e)}saveResultEvent(e){e&&this.examResultService.apiExamResultGetLastExamResultByIdGet(Number(this.examIdParam),this.userIdParam,this.studentIdParam,this.examResultIdParam).subscribe(n=>{var i,a,r,l,c,_,d,p;1==n.success?(this.examResultObj=null===(i=n?.data)||void 0===i?void 0:i.examResultObj,null!==(r=null===(a=this.initDataResult)||void 0===a?void 0:a.data)&&void 0!==r&&r.markedByObj&&(this.initDataResult.data.markedByObj.fullName=null===(c=null===(l=n.data)||void 0===l?void 0:l.markedByObj)||void 0===c?void 0:c.fullName,this.initDataResult.data.markedByObj.avatar=null===(d=null===(_=n.data)||void 0===_?void 0:_.markedByObj)||void 0===d?void 0:d.avatar)):this.errorStatusObj(null!==(p=n.message)&&void 0!==p?p:"",!0)})}processConvertData(e){var n,i,a,r,l,c,_,d,p,h,f,w,k,S,D,Q,N;if(e.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObj(e.data,this.testedUserObjs,this.studentObj),this.examQuestionObjs=e.data.examQuestionObjs,this.examObj=null===(n=e?.data)||void 0===n?void 0:n.examObj,this.examResultObj=null===(i=e?.data)||void 0===i?void 0:i.examResultObj,this.files=null!==(l=this.commonService.myParseJson(null!==(r=null===(a=this.examResultObj)||void 0===a?void 0:a.files)&&void 0!==r?r:""))&&void 0!==l?l:[],this.resultInfos=null!==(d=this.commonService.willDeleteParseJson(null!==(_=null===(c=this.examResultObj)||void 0===c?void 0:c.infors)&&void 0!==_?_:""))&&void 0!==d?d:[];const q=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null!==(p=e.data.questionObjs)&&void 0!==p?p:[]));this.followerRenderQuest.setNumQuest(q?.length||0),this.questionObjs=q,null===(h=this.questionObjs)||void 0===h||h.forEach(E=>{var J;E.correctAnswer=this.commonService.filterArray(null===(J=e?.data)||void 0===J?void 0:J.correctQuestionIds,E.id),E.isRoleTeacher=!0}),this.docxService.replaceCanvasBackgroundTS(null!==(f=this.questionObjs)&&void 0!==f?f:[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),this.userAnswersObj=this.testReviewService.convertAnswersArr(null!==(S=this.castJsonToObj(null!==(k=null===(w=e.data.examResultObj)||void 0===w?void 0:w.answers)&&void 0!==k?k:""))&&void 0!==S?S:[]),this.hasLoadedData=!0;const W=parseInt(this.iframeSrc.split("?")[1].split("=")[1]),X=1e6;if(null!==(D=this.examResultObj)&&void 0!==D&&D.result){const E=this.castJsonToObj(null!==(N=null===(Q=this.examResultObj)||void 0===Q?void 0:Q.result)&&void 0!==N?N:"");this.checkMarkNote=!(!E||!E.urlDataMark)}else this.checkMarkNote=W>X}}ngOnInit(){var e;this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"",(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var n,i,a,r,l;this.backToLink=null!==(n=this.commonService.getMyQueryParam("backto"))&&void 0!==n?n:"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=null!==(i=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==i?i:void 0,this.studentIdParam=null!==(a=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==a?a:void 0,this.examIdParam=null!==(r=this.activeRoute.snapshot.paramMap.get("exam_id"))&&void 0!==r?r:void 0,this.processConvertData(null!==(l=this.initDataResult)&&void 0!==l?l:{})}),this.answerBoxService.switchEssayTabMessage.subscribe(n=>{n&&(this.curSelectedTab=1,setTimeout(()=>{window.scroll(0,0)},0))}),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d){super(e),this.commonService=e,this.activeRoute=n,this.docxService=i,this.envService=a,this.testReviewService=r,this.examResultService=l,this.answerTypeService=c,this.answerBoxService=_,this.exportResultService=d,this.displayScreen=3,this.curSelectedTab=0,this.backToLink="",this.examResultIdParam=0,this.viewOption="viewAll",this.matTabGroupIndex=0,this.drawer=void 0,this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.followerRenderQuest=new Rn.G,this.iframeSrc="",this.hasLoadedData=!1,this.checkMarkNote=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(eo.x),t.Y36(ga.D),t.Y36(YT.l),t.Y36(xt.kS),t.Y36(Je.T),t.Y36(GT.g),t.Y36(di.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-test-review-for-teacher"]],viewQuery:function(e,n){if(1&e&&t.Gf(m3,5),2&e){let i;t.iGM(i=t.CRH())&&(n.drawer=i.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs",displayScreen:"displayScreen"},features:[t.qOj],decls:7,vars:5,consts:[[1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],["hasResult",""],[3,"msg","show","percent"],["ShowCorrectIncorrectFilterTpl",""],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"box"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"relative",3,"studentObj"],[1,"p-3","sm:pb-0"],[4,"ngIf","ngIfElse"],["allReadyTested",""],[3,"testedUserObjs"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","examResultObj","essayQuestionObjs"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","offlineMarkObj","offlineMixquestionObj","isDeletableExamResultObj",4,"ngIf"],[1,"box","flex-1"],[3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"flex","justify-center"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","files","historyExamResultObjs","examTracks","resultInfos"],[3,"historyExamResultObjs","backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","offlineMarkObj","offlineMixquestionObj","isDeletableExamResultObj"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"label"],["id","multipleChoiceWrap"],[1,"azt-student-list","scrollable-content"],["pointerEventsMethod","scrollbar",2,"height","calc(100vh - 166px)","width","100%",3,"visibility","disabled"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","px-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"px-2","font-bold"],[3,"startQuestionIndex","expandInfo","follower","ngClass","userAnswersObj","question","index","place","configExam","cur_result","newFirstInGroupIndexes","showButtonCommentToTeacher","allowAskQuestion","displayScreen","statusResult"],["id","tabEssay",3,"label"],["id","markEssay",4,"ngIf"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],["isFrameMark",""],[3,"displayScreen","resultID","files","questions","userAnswersObj","iframeSrc","examQuestionObjs","examResultObj","configExam","iframeViewMode","examObj","isBackEnd","hasLoadedData","saveResultEvent"],[1,"filter"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"azt-hidden","md:block"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-teacher-Pz5-Lg4oM39","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-teacher-l9jNq9CQL6R","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("resize",function(a){return n.onResize(a)},!1,t.Jf7),t.YNc(1,p3,3,3,"div",1),t.YNc(2,P3,27,30,"ng-template",null,2,t.W1O),t.qZA(),t._UZ(4,"azt-export-docx-loading-box",3),t.YNc(5,L3,23,12,"ng-template",null,4,t.W1O)),2&e){const i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=n.initDataResult&&null!=n.initDataResult.data&&n.initDataResult.data.examResultObj||null!=n.initDataResult&&null!=n.initDataResult.data&&n.initDataResult.data.historyExamResultObjs))("ngIfElse",i),t.xp6(3),t.Q6J("msg",n.exportResultService.keyLoading)("show",n.exportResultService.isLoading)("percent",n.exportResultService.percent)}},dependencies:[y.mk,y.sg,y.O5,y.tP,Ft.W0,Ft.D8,Ne.jA,Ne.kh,Ne.LW,wi.SK,wi.R7,Qt.Kd,P.KC,tC,Vi.l,eC.s,Zn.$,ui,sC,rC.i,lC,cC,d3,u3.P,tt.bT],encapsulation:2}),o})();function N3(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function q3(o,s){if(1&o&&t._UZ(0,"azt-test-review-for-teacher",3),2&o){const e=t.oxw();t.Q6J("initDataResult",e.initDataLastResultExam)("testedUserObjs",e.testedUserObjs)("displayScreen",4)}}let Q3=(()=>{class o extends R.Q{openResultHistoryReview(e){this.examResultHistoryDialog=e}closeResultHistoryReview(e){e&&location.reload(),this.examResultHistoryDialog=void 0}onShowFile(e){this.isShowPreviewFile=!0,this.previewFile=e}onFileClose(){this.isShowPreviewFile=!1,this.previewFile=void 0}getAndProcessData(){var e,n;this.initStatusObj();let i=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),a=null!==(e=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==e?e:"",r=null!==(n=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==n?n:"",l=Number(this.activeRoute.snapshot.paramMap.get("result_id"));this.getTestedUsers(()=>{setTimeout(()=>{this.examResultService.apiExamResultGetLastResultGet(i,a,r,l).subscribe(c=>{var _,d,p,h,f,w;1==c.success?(this.initDataLastResultExam=c,this.headerTitle=null!==(p=null===(d=null===(_=c?.data)||void 0===_?void 0:_.examObj)||void 0===d?void 0:d.name)&&void 0!==p?p:"",this.translateMetaTitle(null===(f=null===(h=c.data)||void 0===h?void 0:h.examObj)||void 0===f?void 0:f.name),this.successStatusObj()):this.errorStatusObj(null!==(w=c.message)&&void 0!==w?w:"",!0)})},100)})}getTestedUsers(e){let n=Number(this.activeRoute.snapshot.paramMap.get("result_id")),i=Number(this.activeRoute.snapshot.paramMap.get("exam_id"));var a=this.browserStorageService.getSimpleStorage(n+"_azt_setting_sort_desc_tested_by_time"),r=this.browserStorageService.getSimpleStorage(n+"_azt_setting_sort_tested_by_name"),l=this.browserStorageService.getSimpleStorage(n+"_azt_setting_sort_desc_tested_by_mark");this.testedListApiService.getTestedUserObjs("test_review",i,!0).subscribe(c=>{var _,d,p,h,f,w,k,S,D,Q,N,q,W,X,E,J;if(1==c.success){let z=[],K=[];a&&"true"==a?(z=this.sortService.sortTimeDESC(null!==(d=null===(_=c?.data)||void 0===_?void 0:_.studentsNotInClassResults)&&void 0!==d?d:[]),K=this.sortService.sortTimeStudentsInClass(null!==(h=null===(p=c?.data)||void 0===p?void 0:p.studentsInClassResults)&&void 0!==h?h:[],1),this.testedUserObjs=this.progressUserObjsList(z,K)):r&&"true"==r?(z=this.sortService.sortFirstNameStudents(null!==(w=null===(f=c?.data)||void 0===f?void 0:f.studentsNotInClassResults)&&void 0!==w?w:[]),K=this.sortService.sortFirstNameStudentsInClass(null!==(S=null===(k=c?.data)||void 0===k?void 0:k.studentsInClassResults)&&void 0!==S?S:[]),this.testedUserObjs=this.progressUserObjsList(z,K)):l&&"true"==l?(z=this.sortService.sortMarkDESC(null!==(Q=null===(D=c?.data)||void 0===D?void 0:D.studentsNotInClassResults)&&void 0!==Q?Q:[],!0),K=this.sortService.sortMarkStudentsInClass(null!==(q=null===(N=c?.data)||void 0===N?void 0:N.studentsInClassResults)&&void 0!==q?q:[],1,!0),this.testedUserObjs=this.progressUserObjsList(z,K)):this.testedUserObjs=this.progressUserObjsList(null!==(X=null===(W=c?.data)||void 0===W?void 0:W.studentsNotInClassResults)&&void 0!==X?X:[],null!==(J=null===(E=c?.data)||void 0===E?void 0:E.studentsInClassResults)&&void 0!==J?J:[])}e()})}progressUserObjsList(e,n){var i=[];return e.length>0&&e.forEach(a=>{a.resultId&&a.resultId>0&&i.push(a)}),n.forEach(a=>{var r;null===(r=a?.results)||void 0===r||r.forEach(l=>{l.resultId&&l.resultId>0&&i.push(l)})}),i}translateMetaTitle(e){this.commonService.getTranslate("lang_auto_cham_de_thi").subscribe(n=>{this.commonService.translateMetaData({title:n+" "+e,description:n+e,image:"lang_cms_test_image"})})}ngOnInit(){var e,n,i,a,r,l;let c=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),_=this.commonService.getMyQueryParam("backto"),d="/admin/testbank/exam-results-list/"+(null!==(i=null===(n=null===(e=this.initDataLastResultExam)||void 0===e?void 0:e.data)||void 0===n?void 0:n.examObj)&&void 0!==i&&i.categoryId?null===(l=null===(r=null===(a=this.initDataLastResultExam)||void 0===a?void 0:a.data)||void 0===r?void 0:r.examObj)||void 0===l?void 0:l.categoryId:0)+"/"+c+"/0";this.backToLink=_||d,this.getAndProcessData(),super.ngOnInit()}constructor(e,n,i,a,r,l){super(e),this.commonService=e,this.activeRoute=n,this.browserStorageService=i,this.examResultService=a,this.sortService=r,this.testedListApiService=l,this.headerTitle="",this.examResultHistoryDialog=void 0,this.isShowPreviewFile=!1,this.backToLink=""}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(C.gz),t.Y36(Le.z),t.Y36(xt.kS),t.Y36(kn.K),t.Y36(xn.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-test-review"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"initDataResult","testedUserObjs","displayScreen"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,N3,1,0,"azt-loading-effect",1),t.YNc(2,q3,1,3,"ng-template",null,2,t.W1O),t.qZA()),2&e){const i=t.MAs(3);t.Q6J("headerBackTolink",n.backToLink),t.xp6(1),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[y.O5,zt.Q,j3,Vt._],encapsulation:2}),o})();var D3=T(11481);function U3(o,s){1&o&&(t.TgZ(0,"div",2)(1,"div",3)(2,"span",4),t._uU(3,"Loading..."),t.qZA()()())}function F3(o,s){if(1&o&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.fileOption.name)}}function R3(o,s){if(1&o&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.fileNameCustom)}}function z3(o,s){if(1&o&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.HOy("",t.lcZ(2,4,"lang_auto_dung_luong"),": ",e.fileMb," ",t.lcZ(3,6,"lang_auto_mb_|_loai")," : ",e.fileOption.mimes,"")}}function J3(o,s){1&o&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function B3(o,s){if(1&o&&(t.TgZ(0,"a",22)(1,"mat-icon",16),t._uU(2,"save_alt"),t.qZA()()),2&o){const e=t.oxw(2);t.uIk("href",e.rootLink,t.LSH)("download",e.fileOption.name)}}function H3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",28)(2,"audio",29)(3,"source",30),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA(),t._uU(4," Your browser does not support the audio element. "),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.Q6J("src",e.cdnLink,t.LSH),t.uIk("type",null==e.fileOption?null:e.fileOption.mimes)}}function Y3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",31)(2,"video",32)(3,"source",30),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA(),t.TgZ(4,"p",33),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.s9C("poster",e.videoThumbUrl,t.LSH),t.xp6(1),t.Q6J("src",e.cdnLink,t.LSH),t.uIk("type",null==e.fileOption?null:e.fileOption.mimes),t.xp6(2),t.Oqu(t.lcZ(6,4,"lang_auto_ban_dang_su_dung_trinh_duyet_khong_ho_tro_xem_video_truc_tuyen"))}}function G3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"iframe",34),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.cdnLink,t.uOi)}}function $3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",31)(2,"img",35),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.uIk("src",e.cdnLink,t.LSH)}}function K3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",36)(2,"iframe",37),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.Q6J("src",e.cdnLink,t.uOi)}}function W3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",38)(2,"pdf-viewer",39),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.onLoad())}),t.qZA()()()}if(2&o){const e=t.oxw(3);t.xp6(2),t.Q6J("src",e.cdnLink)("show-all",!0)}}function V3(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",23)(2,"div",24),t.YNc(3,H3,5,2,"div",25),t.YNc(4,Y3,7,6,"div",25),t.YNc(5,G3,2,1,"div",25),t.YNc(6,$3,3,1,"div",25),t.YNc(7,K3,3,1,"div",25),t.YNc(8,W3,3,2,"div",25),t._UZ(9,"div",26),t.qZA(),t._UZ(10,"div",27),t.qZA(),t.BQk()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf","audio"===e.typeFile),t.xp6(1),t.Q6J("ngIf","video"===e.typeFile),t.xp6(1),t.Q6J("ngIf","vimeo"===e.typeFile),t.xp6(1),t.Q6J("ngIf","image"===e.typeFile),t.xp6(1),t.Q6J("ngIf","officeapps"===e.typeFile),t.xp6(1),t.Q6J("ngIf","pdf"===e.typeFile)}}function X3(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",24)(2,"div",40)(3,"img",41),t.NdJ("load",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onLoad())}),t.qZA()()()()}if(2&o){const e=t.oxw(2);t.xp6(3),t.uIk("src",e.linkUrl,t.LSH)}}function t6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t._UZ(4,"div",9),t.qZA(),t.YNc(5,F3,2,1,"div",10),t.YNc(6,R3,2,1,"div",10),t.YNc(7,z3,4,8,"div",11),t.YNc(8,J3,3,3,"div",11),t.qZA(),t.TgZ(9,"div",12)(10,"span",13),t.YNc(11,B3,3,2,"a",14),t.qZA(),t.TgZ(12,"span",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.btnClosePreview())}),t.TgZ(13,"mat-icon",16),t._uU(14,"close"),t.qZA()()()(),t.TgZ(15,"div",17),t.YNc(16,V3,11,6,"ng-container",18),t.YNc(17,X3,4,1,"ng-template",null,19,t.W1O),t.qZA()()}if(2&o){const e=t.MAs(18),n=t.oxw();t.xp6(5),t.Q6J("ngIf",null!=n.fileOption),t.xp6(1),t.Q6J("ngIf",null==n.fileOption),t.xp6(1),t.Q6J("ngIf",null!=n.fileOption),t.xp6(1),t.Q6J("ngIf",null==n.fileOption),t.xp6(3),t.Q6J("ngIf",null!=n.fileOption),t.xp6(5),t.Q6J("ngIf",0==n.typePreview)("ngIfElse",e)}}let e6=(()=>{class o extends R.Q{onLoad(){this.stopStatusObj()}initData(){var e,n,i,a,r;if(0==this.typePreview){let l=null!==(e=this.fileOption)&&void 0!==e&&e.size?Number(this.fileOption.size):0,c=null!==(n=this.fileOption)&&void 0!==n&&n.mimes?this.fileOption.mimes:"";if(this.cdnLink=this.cdnService.getMyCdn(null!==(a=null===(i=this.fileOption)||void 0===i?void 0:i.url)&&void 0!==a?a:""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(l),this.typeFile=(0,lt.Z9)(c),"string"==typeof this.cdnLink&&(this.isVimeoLink=this.cdnLink.includes("https://player.vimeo.com/")||this.cdnLink.includes("https://mega.nz")),this.isVimeoLink&&(this.typeFile="vimeo"),"string"==typeof this.cdnLink&&""!=this.cdnLink)switch(this.typeFile){case"pdf":this.cdnLink=this.cdnLink;break;case"officeapps":this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.envService.getLinkEmbedDocument(this.cdnLink));break;default:this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.cdnLink)}}else this.linkUrl=this.cdnService.getMyCdn(null!==(r=this.linkUrl)&&void 0!==r?r:"");setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.closePreview.emit()}getFileMB(e){return e&&e>0?(e/=1048576).toFixed(2):0}reloadFrame(e){let n=document.getElementById(e);n&&n.parentNode&&n.parentNode.replaceChild(n.cloneNode(),n)}ngOnInit(){document.body.classList.add("overflow-hidden"),setTimeout(()=>{this.initData()},0),this.videoThumbUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/video-thumb.png"),this.initStatusObj(),super.ngOnInit()}constructor(e,n,i,a){super(e),this.commonService=e,this.dom=n,this.cdnService=i,this.envService=a,this.typePreview=0,this.fileNameCustom="",this.closePreview=new t.vpe,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.isVimeoLink=!1}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(D3.H7),t.Y36(Dt.U),t.Y36(ga.D))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-preview-media"]],inputs:{fileOption:"fileOption",typePreview:"typePreview",fileNameCustom:"fileNameCustom",linkUrl:"linkUrl"},outputs:{closePreview:"closePreview"},features:[t.qOj],decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"loading-block"],["role","status",1,"spinner-border","text-secondary",2,"width","5rem","height","5rem"],[1,"sr-only"],[1,"file-preview"],[1,"file-preview__header","flx","flx-sp-btw"],[1,"file-preview__header-left"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-image","url('https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/documents.png')","background-size","cover"],["class","file-preview__header__title",4,"ngIf"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"file-preview__controls-container"],["azt-track-service","preview-media-rf73f2TV3G","class","clickable download","target","_blank",4,"ngIf"],["azt-track-service","preview-media-l05RPS6FbP",1,"file-preview__buttons-container",3,"click"],[2,"color","rgb(53, 53, 53)","cursor","pointer"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"file-preview__header__title"],[1,"file-preview__header__send-time"],["azt-track-service","preview-media-rf73f2TV3G","target","_blank",1,"clickable","download"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[4,"ngIf"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],["controls",""],[3,"src","load"],[1,"pl-2","pr-2","mt-3"],["id","my-video","playsinline","playsinline","controls","","preload","auto","data-setup","{}",1,"video-js",2,"max-height","calc(100vh - 80px)","width","100%","padding-bottom","1rem",3,"poster"],[1,"vjs-no-js"],["frameborder","0","allowfullscreen","",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],[1,"pl-2","pr-2","mp-0"],["frameborder","0",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],[1,"pl-2","pr-2","mt-3","block-img"],["alt","Responsive image",1,"img-fluid","image-preview",3,"load"]],template:function(e,n){1&e&&(t.YNc(0,U3,4,0,"div",0),t.YNc(1,t6,19,7,"div",1)),2&e&&(t.Q6J("ngIf",n.statusObj.loading),t.xp6(1),t.Q6J("ngIf",(null!=n.fileOption||""!=n.linkUrl)&&!n.statusObj.loading))},dependencies:[y.O5,Wt.Hw,O.rQ,tt.bT],styles:[".file-preview[_ngcontent-%COMP%]{background:#ECF0F5;position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0}.block-img[_ngcontent-%COMP%]{background:#a3a3a3;width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#ecf0f5}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed;background:#ECF0F5}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;background:#fff;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;color:#fff;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#e5efff}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;color:#222;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{color:#fff;margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.file-preview__buttons-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;position:relative}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),o})(),n6=(()=>{class o extends R.Q{ngOnInit(){var e;this.form=this.fb.group({labelQuestion:new m.p4(null!==(e=this.expandInfoParse.label)&&void 0!==e?e:"C\xe2u")}),super.ngOnInit()}saveConfig(){this.closeDialog.emit(this.form.controls.labelQuestion.value&&this.form.controls.labelQuestion.value.length>0?{label:this.form.controls.labelQuestion.value}:{label:void 0})}constructor(e,n){super(e),this.commonService=e,this.fb=n,this.expandInfoParse={},this.closeDialog=new t.vpe,this.form=new m.nJ({})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(m.QS))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-expand-info"]],inputs:{expandInfoParse:"expandInfoParse"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:31,vars:14,consts:[[1,"label-info_bg"],[1,"label-info","p-4"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal",3,"formGroup"],[1,"row","mt-3"],[1,"col-md-12"],[1,"col-md-12","mt-2"],["formControlName","labelQuestion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","C\xe2u"],["value","Question"],["value","B\xe0i"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-echJ9MnECDy",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-FNP5lMszlU9",1,"btn","w-24","btn-primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",5)(10,"form",7)(11,"div",8)(12,"div",9)(13,"p"),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.TgZ(16,"div",10)(17,"select",11)(18,"option",12),t._uU(19,"C\xe2u"),t.qZA(),t.TgZ(20,"option",13),t._uU(21,"Question"),t.qZA(),t.TgZ(22,"option",14),t._uU(23,"B\xe0i"),t.qZA()()()()()(),t.TgZ(24,"div",15)(25,"button",16),t.NdJ("click",function(){return n.closeDialog.emit()}),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return n.saveConfig()}),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()()()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,6,"lang_core_exam_config_question_label")),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu(t.lcZ(15,8,"lang_core_exam_config_question_label_description")),t.xp6(12),t.hij(" ",t.lcZ(27,10,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",n.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(30,12,"lang_auto_luu")," "))},dependencies:[m._Y,m.YN,m.Kr,m.EJ,m.JJ,m.JL,m.sg,m.u,Jt.M,tt.bT],styles:[".label-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.label-info[_ngcontent-%COMP%]{max-width:400px;border-radius:.375rem;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),o})();function i6(o,s){1&o&&t._UZ(0,"azt-loading-effect")}function o6(o,s){1&o&&(t.TgZ(0,"div",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_testted_list_teacher_confirmed")," "))}function a6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-expand-info",33),t.NdJ("closeDialog",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.closeDialogConfigExpandInfo(i))}),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("expandInfoParse",e.expandInfoParse)}}function s6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"azt-split-point",34),t.NdJ("closeDialog",function(){t.CHM(e);const i=t.oxw(4);return t.KtG(i.closeDialogSpitPoint())})("setPoint",function(i){t.CHM(e);const a=t.oxw(4);return t.KtG(a.setPointTest(i))}),t.qZA()}if(2&o){const e=t.oxw(4);t.Q6J("data",e.dataSpitPoint)}}function r6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.showAllResultQuestion())}),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openExamInfoDialog())}),t.ALo(8,"mytranslate"),t.TgZ(9,"mat-icon"),t._uU(10,"info"),t.qZA()()(),t.TgZ(11,"div",28)(12,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openDialogConfigExpandInfo())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.openDialogSpitPoint())}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.YNc(18,a6,1,1,"azt-expand-info",31),t.YNc(19,s6,1,1,"azt-split-point",32),t.qZA()()}if(2&o){const e=t.oxw(3);t.xp6(3),t.AsE(" ",0==e.defaultShowResultMedia?t.lcZ(4,7,"lang_testbank_update_exam_show"):t.lcZ(5,9,"lang_testbank_update_exam_hide")," ",t.lcZ(6,11,"lang_testbank_update_exam_explain")," "),t.xp6(4),t.s9C("matTooltip",t.lcZ(8,13,"lang_auto_chi_tiet_de_thi")),t.xp6(6),t.Oqu(t.lcZ(14,15,"lang_core_exam_config_question_label")),t.xp6(3),t.Oqu(t.lcZ(17,17,"lang_testbank_update_exam_split_points")),t.xp6(2),t.Q6J("ngIf",null==e.dataConfigExpandInfo?null:e.dataConfigExpandInfo.isShow),t.xp6(1),t.Q6J("ngIf",null==e.dataSpitPoint?null:e.dataSpitPoint.isShow)}}function l6(o,s){1&o&&(t.TgZ(0,"span",41),t._uU(1,",\xa0"),t.qZA())}function c6(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",39),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(5);let l;return t.KtG(r.goToQuestionAll(null!==(l=a.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,l6,2,0,"span",40),t.BQk()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(5);let a;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(a=e.index)&&void 0!==a?a:0)+1,""),t.xp6(2),t.Q6J("ngIf",n<i.invalidTypeQuestionConfig.length-1)}}function _6(o,s){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",37),t.YNc(4,c6,6,8,"ng-container",38),t.qZA(),t.BQk()),2&o){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function d6(o,s){if(1&o&&(t.TgZ(0,"div",35)(1,"mat-icon",36),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,_6,5,4,"ng-container",3),t.qZA()),2&o){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function u6(o,s){1&o&&(t.TgZ(0,"span",45),t._uU(1,"|"),t.qZA())}function m6(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",43),t.NdJ("click",function(i){const r=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.onShowFile(i,r,-1))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,u6,2,0,"span",44),t.BQk()}if(2&o){const e=s.index,n=t.oxw(4);t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_testbank_update_exam_image")," ",e+1,""),t.xp6(2),t.Q6J("ngIf",e<n.cropperData.length-1)}}function p6(o,s){if(1&o&&(t.TgZ(0,"div",42),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,m6,5,5,"ng-container",38),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),t.xp6(2),t.Q6J("ngForOf",e.cropperData)}}function h6(o,s){if(1&o&&t._UZ(0,"azt-loaded-img",46),2&o){const e=t.oxw(3);t.Q6J("imgSrc",e.examObj.examHeader)}}function g6(o,s){1&o&&(t.TgZ(0,"div",72),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",73),t._UZ(3,"line",74)(4,"path",75),t.qZA()()),2&o&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function f6(o,s){1&o&&(t.TgZ(0,"div",71),t._uU(1,"|"),t.qZA())}function x6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",76)(1,"div",77)(2,"mat-chip-list")(3,"mat-chip",78),t.NdJ("removed",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(3);return t.KtG(a.setTag(i))}),t._uU(4),t.ALo(5,"mytranslate"),t.TgZ(6,"button",79)(7,"mat-icon",80),t._uU(8,"cancel"),t.qZA()()()()()()}if(2&o){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,1,"azt_lang_tag_"+e.tags[0].code)," ")}}function v6(o,s){1&o&&(t.TgZ(0,"div",71),t._uU(1,"|"),t.qZA())}function b6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"a",91),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.setTag(r,a))}),t._uU(2),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw(6);let i;t.xp6(2),t.hij(" ",null!==(i=e[n.commonService.getCurrentLang()+"Name"])&&void 0!==i?i:e.enName," ")}}function w6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",81)(1,"button",82),t.O4$(),t.TgZ(2,"svg",67),t._UZ(3,"path",83)(4,"path",84)(5,"path",85),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"mat-menu",null,86)(11,"div",87)(12,"ul",88),t.YNc(13,b6,3,1,"li",38),t.TgZ(14,"li"),t._UZ(15,"hr",89),t.qZA(),t.TgZ(16,"li")(17,"button",90),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,a=t.oxw(3);return t.KtG(a.applyTagAll(i))}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()()()}if(2&o){const e=t.MAs(10),n=t.oxw(2).$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(6),t.Oqu(t.lcZ(8,5,"lang_teacher_set_tags")),t.xp6(6),t.Q6J("ngForOf",i.questionTags),t.xp6(4),t.Q6J("disabled",!n.tags),t.xp6(1),t.hij(" ",t.lcZ(19,7,"lang_teacher_apply_all_tags")," ")}}function T6(o,s){1&o&&(t.TgZ(0,"div",71),t._uU(1,"|"),t.qZA())}function C6(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.YNc(1,g6,5,3,"div",61),t.YNc(2,f6,2,0,"div",62),t.TgZ(3,"div",63),t.YNc(4,x6,9,3,"div",64),t.qZA(),t.YNc(5,v6,2,0,"div",62),t.YNc(6,w6,20,9,"div",65),t.YNc(7,T6,2,0,"div",62),t.TgZ(8,"div",66),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.editQuestion(i))}),t.TgZ(9,"span"),t.O4$(),t.TgZ(10,"svg",67),t._UZ(11,"path",68)(12,"polyline",69)(13,"path",70),t.qZA(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(16,"div",71),t._uU(17,"|"),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(2),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",n.questionTags.length>0),t.xp6(1),t.Q6J("ngIf",n.questionTags.length>0),t.xp6(7),t.hij(" ",t.lcZ(15,7,"lang_teacher_edit_content_exam"),"")}}function k6(o,s){1&o&&(t.TgZ(0,"div",92),t.ALo(1,"mytranslate"),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()),2&o&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),t.xp6(3),t.Oqu(t.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function O6(o,s){if(1&o&&(t.TgZ(0,"div",95),t._UZ(1,"img",96),t.ALo(2,"mycdn"),t.qZA()),2&o){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("src",t.lcZ(2,1,e.answerMedia),t.LSH)}}function y6(o,s){if(1&o&&(t.TgZ(0,"div",95)(1,"div",97),t._UZ(2,"span",98),t.qZA()()),2&o){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("innerHtml",e.answerMedia,t.oJD)}}function A6(o,s){if(1&o&&(t.TgZ(0,"div",93),t.YNc(1,O6,3,3,"div",94),t.YNc(2,y6,3,1,"div",94),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==e.isImage),t.xp6(1),t.Q6J("ngIf",0==e.isImage)}}const S6=function(o){return{"d-none":o}},Z6=function(o){return{"error-border":o}};function E6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",47)(1,"div",48)(2,"div",49)(3,"div",50),t._UZ(4,"div",51)(5,"div",52),t.TgZ(6,"div",53),t.YNc(7,C6,18,9,"ng-container",3),t.ALo(8,"isOfflineExam"),t.TgZ(9,"div",54)(10,"span",55),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"input",56),t.NdJ("input",function(i){const r=t.CHM(e).$implicit,l=t.oxw(3);let c;return t.KtG(l.setScore(i,null!==(c=r.id)&&void 0!==c?c:0))}),t.qZA()()()(),t.TgZ(14,"div",57)(15,"azt-standalone-question",58),t.NdJ("showResultQuestionEmit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showResultQuestion(i))})("setAnswerType4UpdateEmit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.setAnswerType4(i))})("removeAnswerType4Emit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.removeAnswerType4(i))})("setAnswerOnUpdateEmit",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.setAnswer(i))}),t.YNc(16,k6,5,6,"div",59),t.qZA()()(),t.YNc(17,A6,3,2,"div",60),t.qZA()()}if(2&o){const e=s.$implicit,n=s.index,i=t.oxw(3);let a;t.xp6(2),t.s9C("id","question_"+n),t.xp6(5),t.Q6J("ngIf",!t.lcZ(8,17,null==i.examObj?null:i.examObj.orcLogId)),t.xp6(3),t.Q6J("ngClass",t.VKq(21,S6,i.isMobile)),t.xp6(1),t.hij("",t.lcZ(12,19,"lang_testbank_update_exam_point"),":"),t.xp6(2),t.s9C("value",i.isDivinePointForQuestion?i.parseNumberFixed(null!==(a=e.scorePerQuestion)&&void 0!==a?a:0,8):e.scorePerQuestion),t.Q6J("ngClass",t.VKq(23,Z6,null==e.scorePerQuestion||e.scorePerQuestion<0))("decimal",!0),t.xp6(2),t.Q6J("startQuestionIndex",i.examObj.startQuestionIndex)("expandInfo",i.examObj.expandInfo)("follower",i.followerRenderQuest)("displayScreen",8)("isMobile",i.isMobile)("examObj",i.examObj)("question",e)("index",n),t.xp6(1),t.Q6J("ngIf",(null==e.groupInfo?null:e.groupInfo.isFirstInGroup)&&(null==e.groupInfo?null:e.groupInfo.isFixGroup)),t.xp6(1),t.Q6J("ngIf",e.showResultMedia)}}function I6(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"div",6)(3,"div",7),t._UZ(4,"input",8),t.qZA(),t.TgZ(5,"div",9)(6,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.goBack())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",11),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.handleSubmitSaveExam())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",12)(13,"div",13)(14,"div",14),t.YNc(15,o6,3,3,"div",15),t.YNc(16,r6,20,19,"div",16),t.YNc(17,d6,6,4,"div",17),t.YNc(18,p6,4,4,"div",18),t.TgZ(19,"div",19),t.YNc(20,h6,1,1,"azt-loaded-img",20),t.YNc(21,E6,18,25,"div",21),t.qZA()()()(),t._UZ(22,"azt-scroll-to-top-bottom",22),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(4),t.Q6J("formControl",e.nameExamInp),t.xp6(3),t.Oqu(t.lcZ(8,11,"lang_buttom_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(11,13,"lang_buttom_save")),t.xp6(5),t.Q6J("ngIf",0===e.questionObjs.length),t.xp6(1),t.Q6J("ngIf",e.questionObjs.length>0),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",e.cropperData&&e.cropperData.length>0),t.xp6(2),t.Q6J("ngIf",e.examObj.examHeader),t.xp6(1),t.Q6J("ngForOf",e.questionObjs),t.xp6(1),t.Q6J("isScrollToTop",!0)}}function M6(o,s){1&o&&(t.TgZ(0,"div",99)(1,"span",100),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"! "))}function P6(o,s){if(1&o&&(t.YNc(0,I6,23,15,"ng-container",1),t.ALo(1,"editPermission"),t.YNc(2,M6,4,3,"ng-template",null,4,t.W1O)),2&o){const e=t.MAs(3),n=t.oxw();t.Q6J("ngIf",t.xi3(1,2,n.examObj.permissionObj,"exam"))("ngIfElse",e)}}function L6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"azt-preview-media",101),t.NdJ("closePreview",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onFileClose())}),t.ALo(2,"mytranslate"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("linkUrl",e.previewFile)("typePreview",1)("fileNameCustom",t.lcZ(2,3,"lang_auto_du_lieu_cat_de"))}}function j6(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",102),t.NdJ("closeDialog",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.closeDialogExamInfo())}),t.qZA()()}if(2&o){const e=t.oxw();let n;t.xp6(1),t.Q6J("startIndexQuestion",null!==(n=e.examObj.startQuestionIndex)&&void 0!==n?n:1)("data",e.dataExamInfo)}}const q6=[{path:"",component:Jv,canActivate:[Oc.v],children:[{path:"create-new-document/:cat_id",component:lh},{path:"azota-editor/:cat_id",component:yi},{path:"azota-editor/:cat_id/:quest_id",component:yi},{path:"mix-bank-template/:cat_id/:mode_name/:matrix_id",component:p2},{path:"sync-folder/:cat_id",component:UT},{path:"document-management/:type/:cat_id/:page",component:po.Vn},{path:"action-online-offline/:cat_id/:hash_id",component:du},{path:"print-exam-and-ticket/:cat_id/:hash_id",component:xb},{path:"config-exam-offline/:cat_id/:hash_id",component:Gu},{path:"config-exam-online/:cat_id/:hash_id",component:mp},{path:"config-homework/:cat_id/:hash_id",component:Lo},{path:"config-homework/:cat_id",component:Lo},{path:"download-file-print/:cat_id/:hash_id/:offline_hash_id",component:Kx},{path:"exam-results-list/:cat_id/:id/:result_id",component:A0},{path:"publish-document/:type/:cat_id/:hash_id",component:yb},{path:"all-documents-in-class/:classroom_id/:page",component:Eh},{path:"homework-results-list/:cat_id/:id/:hash_id",component:Bx},{path:"create-file-pdf-ver2/:cat_id",component:cd},{path:"create-exam-by-excel/:cat_id",component:Up},{path:"create-exam-by-hand/:cat_id",component:ah},{path:"test-review/:exam_id/:user_id/:student_id/:result_id",component:Q3},{path:"test-result-tracking/:exam_id/:user_id/:student_id/:result_id",component:BT},{path:"statistic/:cat_id/:id",component:ST},{path:"update-exam/:cat_id/:id",component:(()=>{class o extends R.Q{onWindowScroll(){let e=document.getElementById("np-name-root");window.pageYOffset>30?e?.classList.add("fixToolBar"):e?.classList.remove("fixToolBar")}scrollDown(){let e=document.getElementById("azt-layout");console.log(e),e.scrollIntoView()}editQuestion(e){var n,i;if(this.examObj.editable){let a=`/admin/testbank/update-exam/${null!=this.cur_cateId?this.cur_cateId:0}/${this.examId}`+(this.backToLink.includes("shareType")?"?backto="+encodeURIComponent(this.backToLink):"");window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+"/"+e.id+"?backto="+encodeURIComponent(a)+"&r="+((null!==(n=e.rawIndex)&&void 0!==n?n:0)+(null!==(i=this.examObj.startQuestionIndex)&&void 0!==i?i:1)-1)+(this.expandInfoParse.label?"&defaultQuestLabel="+this.expandInfoParse.label:"")}else this.openDialogWaring("lang_auto_not_edit_content_question")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(n=>{this.dialog.open(hi,{data:{isShow:!0,content:n},restoreFocus:!1})})}setTag(e,n){e.tags=n?[n]:[]}applyTagAll(e){for(let i=this.questionObjs.indexOf(e)+1;i<this.questionObjs.length;i++)this.questionObjs[i].tags=e.tags}openDialogConfigExpandInfo(){this.dataConfigExpandInfo?this.dataConfigExpandInfo.isShow=!0:this.dataConfigExpandInfo={isShow:!0}}closeDialogConfigExpandInfo(e){void 0!==e&&(this.expandInfoParse=e,this.handleSubmitSaveExam()),this.dataConfigExpandInfo&&(this.dataConfigExpandInfo.isShow=!1)}openDialogSpitPoint(){if(this.dataSpitPoint){let e=this.trueFalseCounter(this.questionObjs),n=this.fillAnswerCounter(this.questionObjs),i=this.questionObjs.length-e-n,a={multipleQuestion:e,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:n,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:i,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.dataSpitPoint={isShow:!0,obj:a}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}get invalidTypeQuestionConfig(){return this.questionObjs.filter(e=>{var n,i;return null==e.scorePerQuestion||e.scorePerQuestion<0||!isFinite(null!==(n=e.scorePerQuestion)&&void 0!==n?n:0)||!(null!==(i=e.answerResult)&&void 0!==i&&i.length)&&this.answerTypeService.isFillAnswer(e.answerType)})}goToQuestionAll(e,n=150){document.getElementById("question_"+e).scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let e=window.pageYOffset||document.documentElement.scrollLeft,n=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(e,n)}}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=void 0}onShowFile(e,n,i){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=n}goBack(){this.commonService.myNavigation(this.backToLink)}showAllResultQuestion(){this.viewQuestions.forEach(e=>{e.isShowExplain=!this.defaultShowResultMedia}),this.defaultShowResultMedia=!this.defaultShowResultMedia}showResultQuestion(e){this.viewQuestions.forEach(n=>{n.id==e&&(n.isShowExplain=!n.isShowExplain)})}convertData(e){for(var n=[],i=0;i<e.length;i++)e[i].content&&n.push(e[i].content);return JSON.stringify(n)}keepAnswerResult(e){for(var n,i=[],a=0;a<e.length;a++)i.push({id:e[a].id,answerResult:JSON.stringify(e[a].answerResult),scorePerQuestion:e[a].scorePerQuestion,tags:null===(n=e[a].tags)||void 0===n?void 0:n.map(r=>{var l;return null!==(l=r.code)&&void 0!==l?l:""})});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.permissionService.hasEditPermission("exam",this.examObj.permissionObj)){let e=!1,n=0;this.questionObjs.forEach(i=>{var a;3!=i.answerType&&0==(null===(a=i.answerResult)||void 0===a?void 0:a.length)&&(i.errorValidateQuestion=!0,e=!0,document.getElementById("question_"+n)?.scrollIntoView()),n++}),this.newAnswerList.length>0?this.newAnswerList.forEach(i=>{var a,r,l=this.questionObjs.filter(c=>c.id==i.id);null!=l&&l.length>0&&!this.answerTypeService.isFillAnswer(l[0].answerType)&&i.answerResultParse&&i.answerResultParse.length>0&&(i.answerResult=this.convertData(null!==(a=i.answerResultParse)&&void 0!==a?a:[]),i.tags=null===(r=l[0].tags)||void 0===r?void 0:r.map(c=>{var _;return null!==(_=c.code)&&void 0!==_?_:""}))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),e?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.initStatusObj(),this.subscriptions.add(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(a=>{var r;1==a.success?(this.newAnswerList=new Array,this.getData(),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(null!==(r=a.message)&&void 0!==r?r:"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(e){var n,i,a,r=this.newAnswerList.filter(d=>d.id==e.idQuestion);if(null!=e.index&&1==e.type){var l={id:e.idQuestion,answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score};if(r&&r.length>0)for(var c=0;c<this.newAnswerList.length;c++)this.newAnswerList[c].id==l.id&&(null===(n=this.newAnswerList[c].answerResultParse)||void 0===n||n.push(null!==(a=null===(i=l.answerResultParse)||void 0===i?void 0:i[0])&&void 0!==a?a:{}),this.newAnswerList[c].answerResult=JSON.stringify(this.newAnswerList[c].answerResultParse));else l.answerResult=JSON.stringify(l.answerResultParse),this.newAnswerList.push(l);this.changeStatusAnswer(l,e.index,!0,e.isImage)}else if(null!=e.index&&2==e.type){var _={id:e.idQuestion,answerResult:JSON.stringify([{index:e.index,content:e.isImage?e.event.content:e.event.key}]),answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score};if(r&&r.length>0)for(c=0;c<this.newAnswerList.length;c++)this.newAnswerList[c].id==_.id&&(this.newAnswerList[c].answerResult=_.answerResult,this.newAnswerList[c].answerResultParse=_.answerResultParse);else this.newAnswerList.push(_);this.changeStatusAnswer(_,e.index,!1,e.isImage)}}setAnswerType4(e){const n=(e.event.value||"").trim();if(n){var i=this.newAnswerList.filter(a=>a.id==e.questionId);this.questionObjs.forEach(a=>{var r;if(a.id==e.questionId){n.split("|").forEach(_=>{var d;null===(d=a.answerResult)||void 0===d||d.push(_.trim())}),a.onChanges=!0;var l={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion,tags:null===(r=a.tags)||void 0===r?void 0:r.map(_=>{var d;return null!==(d=_.code)&&void 0!==d?d:""})};null!=i&&i.length>0?this.newAnswerList.forEach(_=>{_.id==e.questionId&&(_.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(l)}})}this.questionObjs.forEach(a=>{var r;a.errorValidateQuestion=3!=a.answerType&&0==(null===(r=a.answerResult)||void 0===r?void 0:r.length)}),e.event.input.value=""}removeAnswerType4(e){var n=this.newAnswerList.filter(i=>i.id==e.questionId);this.questionObjs.forEach(i=>{var a,r,l,c;if(i.id==e.questionId){var _=null!==(r=null===(a=i.answerResult)||void 0===a?void 0:a.indexOf(e.answerObj))&&void 0!==r?r:0;if(_>=0){null===(l=i.answerResult)||void 0===l||l.splice(_,1);var d={id:i.id,answerResult:JSON.stringify(i.answerResult),scorePerQuestion:i.scorePerQuestion,tags:null===(c=i.tags)||void 0===c?void 0:c.map(p=>{var h;return null!==(h=p.code)&&void 0!==h?h:""})};null!=n&&n.length>0?this.newAnswerList.forEach(p=>{p.id==e.questionId&&(p.answerResult=JSON.stringify(i.answerResult))}):this.newAnswerList.push(d)}}})}changeStatusAnswer(e,n,i,a){i||this.questionObjs.forEach(r=>{if(r.id==e.id&&r.answers&&r.answers.length>0){for(var l=0;l<r.answers.length;l++)r.answers[l].isTrue=!1;r.answers[n].isTrue=!0}})}setPointTest(e){let n=Number(e.multiplePoint)/this.countTrueFalseQuestion,i=Number(e.fillPoint)/this.countFillAnswerQuestion,a=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(a=Number(e.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let r=0;r<this.questionObjs.length;r++){let l=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(n,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(n,8)),l=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(a,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(a,8)),l=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(i,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(i,8)),l=!0;break}}if(!l){let c={id:this.questionObjs[r].id,answerResult:JSON.stringify(this.questionObjs[r].answerResult),scorePerQuestion:this.questionObjs[r].scorePerQuestion};this.newAnswerList.push(c)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong"),this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointQuestion(){var e=this.commonService.getFormObj(this.form);if(e.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var n=e.maxScore/e.totalQuestion;this.questionObjs.forEach(i=>{if(this.answerTypeService.isOneChoiceAnswer(i.answerType)||this.answerTypeService.isFillAnswer(i.answerType)){i.scorePerQuestion=n;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==i.id){this.newAnswerList[a].scorePerQuestion=n;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(e,n){var i,a;for(let l=0;l<this.questionObjs.length;l++){let c=isNaN(parseFloat(e.target.value))?void 0:parseFloat(e.target.value);if(this.questionObjs[l]&&this.questionObjs[l].id==n&&(this.questionObjs[l].scorePerQuestion=c,this.newAnswerList.length>0)){let _=!1;for(var r=0;r<this.newAnswerList.length;r++)if(this.newAnswerList[r].id==this.questionObjs[l].id){this.newAnswerList[r].scorePerQuestion=c,_=!0;break}if(!_){let d=Array.isArray(this.questionObjs[l].answerResult)&&null!==(i=this.questionObjs[l].answerResult)&&void 0!==i&&i.length?null===(a=this.questionObjs[l].answerResult)||void 0===a?void 0:a[0]:"";this.newAnswerList.push({id:this.questionObjs[l].id,answerResult:JSON.stringify(this.questionObjs[l].answerResult),answerResultParse:[{content:d}],scorePerQuestion:parseFloat(e.target.value)})}}}}trueFalseCounter(e){var n=0;return e.forEach(i=>{this.answerTypeService.isOneChoiceAnswer(i.answerType)&&n++}),n}fillAnswerCounter(e){var n=0;return e.forEach(i=>{this.answerTypeService.isFillAnswer(i.answerType)&&n++}),n}maxPointCounter(e){var n=0;return e.forEach(i=>{var a;this.answerTypeService.isOneChoiceAnswer(i.answerType)&&(n+=null!==(a=i.scorePerQuestion)&&void 0!==a?a:0)}),this.parseNumberFixed(n,4)}maxPointFillAnswerCounter(e){var n=0;return e.forEach(i=>{var a;this.answerTypeService.isFillAnswer(i.answerType)&&(n+=null!==(a=i.scorePerQuestion)&&void 0!==a?a:0)}),this.parseNumberFixed(n,4)}essayPointCounter(e){var n=0;return e.forEach(i=>{var a;!this.answerTypeService.isOneChoiceAnswer(i.answerType)&&!this.answerTypeService.isFillAnswer(i.answerType)&&(n+=null!==(a=i.scorePerQuestion)&&void 0!==a?a:0)}),n.toString()}parseNumberFixed(e,n){let i=Number(parseFloat(e.toString()).toFixed(n));return isNaN(i)?"0":parseFloat(e.toString()).toFixed(n)}convertErrsResultQuestions(){for(let e=0;e<this.questionObjs.length;e++)null===this.questionObjs[e].answerResult&&(this.questionObjs[e].answerResult=[])}changeAnswerResultStatus(e){var n=[];let i=0;return e.forEach(a=>{var r;if(a.index=i,a.isRoleTeacher=!0,i++,a.answers&&a.answerResult)for(let l=0;l<a.answers.length;l++)a.answers[l].questionId=a.id,a.answers[l].checked=!1,a.answers[l].isTrue=!!this.checkAnswerResult(null!==(r=a.answers[l].key)&&void 0!==r?r:"",a.answerResult);n.push(a)}),n}checkAnswerResult(e,n){var i=!1;for(var a in n){if(n[a]==e){i=!0;break}i=!1}return i}getQuestionCanFeedback(){let e=[];this.questionObjs.forEach(n=>{n.id&&!this.commonService.filterArray(e,n.id)&&e.push(n.id)}),this.subscriptions.add(this.testMarketQuestionService.apiTestMarketQuestionsFeedbacksQuestionsGet(this.examId,e.join(",")).subscribe(n=>{var i,a,r,l,c;if(1==n.success&&null!==(a=null===(i=n.data)||void 0===i?void 0:i.objs)&&void 0!==a&&a.length){let _=null!==(l=null===(r=n.data)||void 0===r?void 0:r.objs)&&void 0!==l?l:[];for(let d=0;d<this.questionObjs.length;d++)_.forEach(p=>{this.questionObjs[d].id==p.questionId&&(this.questionObjs[d].enableFeedback=p.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(null!==(c=n.message)&&void 0!==c?c:"",!0)}))}getData(){this.initStatusObj(),this.subscriptions.add(this.examService.apiExamGetQuestionsIdGet(this.examId).subscribe(e=>{var n,i,a,r,l,c,_,d,p,h,f;if(1==e.success){this.examObj=null!==(i=null===(n=e.data)||void 0===n?void 0:n.examObj)&&void 0!==i?i:{},this.expandInfoParse=null!==(r=this.commonService.castJsonToObj(null!==(a=this.examObj.expandInfo)&&void 0!==a?a:"{}"))&&void 0!==r?r:{},this.firstInGroupIndexes=null!==(c=this.commonService.myParseJson(null!==(l=this.examObj.firstInGroupIndexes)&&void 0!==l?l:""))&&void 0!==c?c:[],this.nameExamInp.setValue(null!==(_=this.examObj.name)&&void 0!==_?_:"");let w=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify(null===(d=e.data)||void 0===d?void 0:d.questionObjs));const k=this.changeAnswerResultStatus(w??[]);this.followerRenderQuest.setNumQuest(k.length),this.questionObjs=k,this.cropperData=null!==(h=this.commonService.myParseJson(null!==(p=this.examObj.labelsUrl)&&void 0!==p?p:""))&&void 0!==h?h:[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.trueFalseCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=this.fb.group({maxScore:new m.p4(this.maxPointCounter(this.questionObjs),[m.kI.required]),totalQuestion:new m.p4(this.trueFalseCounter(this.questionObjs),[m.kI.required])}),this.questionService.apiQuestionGetTagsGet().subscribe(S=>{var D;1==S.success&&S.data&&(this.questionTags=null!==(D=S.data.objs)&&void 0!==D?D:[])})}else this.showErrorSnack(null!==(f=e.message)&&void 0!==f?f:"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}ngOnInit(){(0,$.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,n;this.cur_cateId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,this.examId=null!==(n=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==n?n:0;var i=this.commonService.getMyQueryParam("backto");this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()}),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,n,i,a,r,l,c,_,d,p,h){super(i),this.dialog=e,this.fb=n,this.commonService=i,this.questionService=a,this.examService=r,this.activeRoute=l,this.questionInterfaceService=c,this.permissionService=_,this.docxService=d,this.answerTypeService=p,this.testMarketQuestionService=h,this.questionTags=[],this.form=new m.nJ({}),this.questionObjs=[],this.followerRenderQuest=new Rn.G,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.examObj={},this.firstInGroupIndexes=[],this.nameExamInp=new m.p4("",[wn._.noWhiteSpace]),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[Bi.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.isShowPreviewFile=!1,this.dataSpitPoint={isShow:!1},this.dataExamInfo={isShow:!1},this.expandInfoParse={}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(U.on),t.Y36(m.QS),t.Y36(_t.v),t.Y36(xt.aE),t.Y36(xt.Oe),t.Y36(C.gz),t.Y36(io.U),t.Y36(An.$),t.Y36(eo.x),t.Y36(Je.T),t.Y36(xt.Q_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-update-exam"]],viewQuery:function(e,n){if(1&e&&t.Gf(Zn.$,5),2&e){let i;t.iGM(i=t.CRH())&&(n.viewQuestions=i)}},hostBindings:function(e,n){1&e&&t.NdJ("scroll",function(a){return n.onWindowScroll(a)},!1,t.Jf7)},features:[t.qOj],decls:7,vars:8,consts:[[3,"headerTitle","headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"grid","grid-cols-12","gap-5",2,"width","100%","margin","20px auto"],[1,"mb-1","lg:col-span-8","sm:col-span-6","col-span-12"],["type","text",1,"inputMobile","form-control",3,"formControl"],[1,"text-center","h-9","flex","col-span-12","lg:col-span-4","sm:col-span-6"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-3",3,"click"],[1,"btn","btn-save",3,"disabled","click"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","grid grid-cols-12 gap-1 items-center","style","justify-content: space-between",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"box-questions","mt-3"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","box-questions-item mb-2","style","position: relative",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[1,"box-control","text-center"],[1,"grid","grid-cols-12","gap-1","items-center",2,"justify-content","space-between"],[1,"box-control","text-left","col-span-12","md:col-span-6"],["azt-track-service","update-exam-7Rsn956k43","mat-button","",1,"btn","btn-show",3,"click"],["azt-track-service","update-exam-RjxFPV1tds","mat-button","",1,"btn-detail",2,"margin-left","10px",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6","flex","justify-btn-block"],["azt-track-service","update-exam-4zmWzk9Yc","mat-button","",1,"btn","btn-set-quest-label",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr","mat-button","",1,"btn","btn-set-score",3,"click"],[3,"expandInfoParse","closeDialog",4,"ngIf"],[3,"data","closeDialog","setPoint",4,"ngIf"],[3,"expandInfoParse","closeDialog"],[3,"data","closeDialog","setPoint"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"box-questions-item","mb-2",2,"position","relative"],[1,"w-100"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0",2,"box-shadow","none"],[1,"mb-0","relative","overflow-hidden",3,"startQuestionIndex","expandInfo","follower","displayScreen","isMobile","examObj","question","index","showResultQuestionEmit","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],["class","fix-group",3,"matTooltip",4,"ngIf"],["class","card question-card","style","box-shadow: none",4,"ngIf"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-1"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"edit-question-header-dr"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,"fix-group",3,"matTooltip"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"linkUrl","typePreview","fileNameCustom","closePreview"],[3,"startIndexQuestion","data","closeDialog"]],template:function(e,n){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,i6,1,0,"azt-loading-effect",1),t.YNc(3,P6,4,5,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(5,L6,3,5,"div",3),t.YNc(6,j6,2,2,"div",3)),2&e){const i=t.MAs(4);t.Q6J("headerTitle",t.lcZ(1,6,"lang_testbank_update_exam_exam"))("headerBackTolink",n.backToLink),t.xp6(2),t.Q6J("ngIf",n.statusObj.loading)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",n.isShowPreviewFile),t.xp6(1),t.Q6J("ngIf",n.dataExamInfo.isShow)}},dependencies:[y.mk,y.sg,y.O5,je.eB,Ce.ir,Ce.lw,Ce.Y6,Wt.Hw,Ft.W0,Ft.D8,Qt.Kd,m.Fj,m.JJ,m.oH,Vi.l,zt.Q,e6,We.Y,Co,ko,Zn.$,ma.M,n6,Vt._,tt.bT,tt.GT,tt.BU,tt.HU],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding:5px 20px;width:100%;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid #000;padding:5px 20px;font-size:small;text-align:center;width:100%;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.question-offline-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:15px}.question-offline-answer[_ngcontent-%COMP%]{max-width:300px;padding:10px;display:flex;justify-content:space-between;font-weight:500}.question-offline-answer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.listda[_ngcontent-%COMP%]{margin-top:30px;padding-left:20px}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.listli[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block}.listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;cursor:pointer}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.show_explain[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-block:auto}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}.image_group[_ngcontent-%COMP%]{position:relative}.image_group[_ngcontent-%COMP%]   .mixGroupLabel[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-35px;left:-45px;background-color:#ff000094;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px;display:block}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.box-questions[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.box-questions[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-questions[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:10px;justify-content:flex-start}}"]}),o})()},{path:"export-pdf-by-user/:exam_id/:user_id/:student_id/:result_id",component:zv},{path:"export-pdf-by-class/:exam_id/:user_id/:student_id/:result_id",component:qv},{path:"create-website",component:bh},{path:"create-website-result",component:dh},{path:"powerpoint/:cat_id/:exam_id",component:B2},{path:"config-share-offline-result/:cat_id/:hash_id",component:pp},{path:"offline-answer-list/:cat_id/:hash_id",component:v2},{path:"matrix-list/:cate/:page",component:Iu}]}];let Q6=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[C.Bz.forChild(q6),C.Bz,Xn.fQ]}),o})();class D6 extends Be.v{constructor(){super(...arguments),this.isSelected=!1,this.isShow=!0}}var xa=T(33502);const U6=["colItem"],F6=["resizeBarH"],R6=["aztColResizable",""];function z6(o,s){1&o&&(t.TgZ(0,"div",6)(1,"div",2),t.Hsn(2,1),t.qZA()())}const J6=[[["","colLeftContent",""]],[["","colRightContent",""]]],B6=function(o){return{width:o}},H6=["[colLeftContent]","[colRightContent]"];let Y6=(()=>{class o extends R.Q{handleMouseDown(e){this.colItem&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.colItem.nativeElement.getBoundingClientRect().width,this.resizeBarH&&this.resizeBarH.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}ngOnInit(){super.ngOnInit()}constructor(e){super(e),this.commonService=e,this.hasColRight=!1,this.width=0,this.x=0,this.y=0,this.leftWidth=0,this.handleMouseUp=n=>{var i,a,r;this.resizeBarH&&this.resizeBarH.nativeElement.classList.remove("hover"),null===(i=this.resizeBarH)||void 0===i||i.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),null===(a=this.colItem)||void 0===a||a.nativeElement.style.removeProperty("user-select"),null===(r=this.colItem)||void 0===r||r.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=n=>{if(this.colItem){let i=this.colItem.nativeElement;i.style.width=`${this.leftWidth+(n.clientX-this.x)}px`,document.body.style.cursor="col-resize",i.style.userSelect="none",i.style.pointerEvents="none"}}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["","aztColResizable",""]],viewQuery:function(e,n){if(1&e&&(t.Gf(U6,5),t.Gf(F6,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.colItem=i.first),t.iGM(i=t.CRH())&&(n.resizeBarH=i.first)}},inputs:{hasColRight:"hasColRight",width:"width"},features:[t.qOj],attrs:R6,ngContentSelectors:H6,decls:7,vars:4,consts:[[1,"col-item","border-r","border-slate-400","dark:border-darkmode-400",3,"ngStyle"],["colItem",""],[1,"col-content"],[1,"resize-bar","resize-bar-h",3,"mousedown"],["resizeBarH",""],["class","col-right",4,"ngIf"],[1,"col-right"]],template:function(e,n){1&e&&(t.F$t(J6),t.TgZ(0,"div",0,1)(2,"div",2),t.Hsn(3),t.qZA(),t.TgZ(4,"div",3,4),t.NdJ("mousedown",function(a){return n.handleMouseDown(a)}),t.qZA()(),t.YNc(6,z6,3,0,"div",5)),2&e&&(t.Q6J("ngStyle",t.VKq(2,B6,n.hasColRight?"60%":n.width?n.width+"px":"100%")),t.xp6(6),t.Q6J("ngIf",n.hasColRight))},dependencies:[y.O5,y.PC],styles:[".col-item[_ngcontent-%COMP%]{min-width:150px;min-height:150px;height:100%;position:relative}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;background-color:transparent}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}.col-item[_ngcontent-%COMP%]   .resize-bar.hover[_ngcontent-%COMP%]{background-color:#2262ae}.col-item[_ngcontent-%COMP%]   .resize-bar.resize-bar-h[_ngcontent-%COMP%]{width:3px;right:0;top:0;bottom:0}.col-right[_ngcontent-%COMP%]{flex:auto}.col-content[_ngcontent-%COMP%]{height:100%;padding:15px;overflow-y:auto;overflow-x:hidden}"]}),o})();function G6(o,s){if(1&o&&(t.ynx(0),t._UZ(1,"azt-standalone-question",3),t.BQk()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2);t.xp6(1),t.Q6J("follower",i.followerRenderQuest)("question",e)("index",n)("displayScreen",9)("configExam",i.exam)("expandInfo",null==i.exam?null:i.exam.expandInfo)("startQuestionIndex",null==i.exam?null:i.exam.startQuestionIndex)("hidden",!e.isShow)}}function $6(o,s){if(1&o&&(t.TgZ(0,"div",1),t.YNc(1,G6,2,8,"ng-container",2),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.questionList)}}let K6=(()=>{class o extends R.Q{getTagsOfQuestion(e){var n;let i=[];return null===(n=e.tags)||void 0===n||n.forEach(a=>{a.code&&i.push(a.code)}),i}getFilterTagValue(e){let n=[];return e.forEach(i=>{i.hasOwnProperty("key")&&i.key&&n.push(i.key)}),n}getFilterTypeValue(e){let n=[];return e.forEach(i=>{i.hasOwnProperty("key")&&i.key&&("TN"==i.key?n.push(1):"TL"==i.key?n.push(3):"\u0110T"==i.key&&n.push(4))}),n}checkValidTagQuestion(e,n){let i=!1;return e.forEach(a=>{this.commonService.filterArray(n,a)&&(i=!0)}),i}ngOnChanges(){let e=this.getFilterTagValue(this.filterTag),n=this.getFilterTypeValue(this.filterType);for(let i=0;i<this.questionList.length;i++){let a=this.getTagsOfQuestion(this.questionList[i]);this.questionList[i].isShow=e.length>0&&!n.length?!!this.checkValidTagQuestion(a,e):n.length>0&&!e.length?!!this.commonService.filterArray(n,this.questionList[i].answerType):!(e.length>0&&n.length>0)||!!this.checkValidTagQuestion(a,e)&&!!this.commonService.filterArray(n,this.questionList[i].answerType)}}ngOnInit(){this.subscriptions.add(this.store.select(xa.Y).subscribe(e=>{this.state=e})),this.followerRenderQuest.setNumQuest(this.questionList.length);for(let e=0;e<this.questionList.length;e++)this.questionList[e].isRoleTeacher=!0;super.ngOnInit()}constructor(e,n,i){super(i),this.fb=e,this.store=n,this.commonService=i,this.questionList=[],this.filterTag=[],this.filterType=[],this.followerRenderQuest=new Rn.G}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.QS),t.Y36(ki.yh),t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-preview-list-question"]],inputs:{exam:"exam",questionList:"questionList",filterTag:"filterTag",filterType:"filterType"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["id","boxContentQuestion",4,"ngIf"],["id","boxContentQuestion"],[4,"ngFor","ngForOf"],[3,"follower","question","index","displayScreen","configExam","expandInfo","startQuestionIndex","hidden"]],template:function(e,n){1&e&&t.YNc(0,$6,2,1,"div",0),2&e&&t.Q6J("ngIf",n.questionList.length>0)},dependencies:[y.sg,y.O5,Zn.$],styles:['.used[_ngcontent-%COMP%]{position:relative}.used[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:100%;position:absolute;z-index:3;background-color:#44444429;left:0;top:0}.image_group[_ngcontent-%COMP%]{border:1px solid #ccc}.image_group.selected-group[_ngcontent-%COMP%]{border:1px solid green;outline:3px solid rgba(0,193,0,.321)}.hidden[_ngcontent-%COMP%]{display:none!important}.image_group[_ngcontent-%COMP%], .image_question[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}']}),o})();var W6=T(77579),va=T(82722);let V6=(()=>{class o{isEmptyObj(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}filterObjInArrObjs(e,n){if(0==e.length||!n||this.isEmptyObj(n))return!1;let i=!1;for(let a=0;a<e.length;a++)if(e[a].key==n.key&&e[a].value==n.value){i=!0;break}return i}constructor(e){this.commonService=e}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_t.v))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const X6=["searchDropdownInput"],tk=["multiAllOption"];function ek(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(2),t.lnq(" ",t.lcZ(3,3,"lang_auto_tat_ca"),"\xa0",e.options.length," ",t.lcZ(4,5,"lang_auto_duoc_chon")," ")}}function nk(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(4);t.xp6(1),t.AsE(" ",e.value," ",i.selected.length>1&&n<i.selected.length-1?", ":""," ")}}function ik(o,s){if(1&o&&(t.ynx(0),t.YNc(1,nk,2,2,"span",7),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.selected)}}function ok(o,s){if(1&o&&(t.TgZ(0,"mat-select-trigger"),t.YNc(1,ek,5,7,"ng-container",4),t.YNc(2,ik,2,1,"ng-container",4),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.multiAllOption?null:e.multiAllOption.selected)||(null==e.selected?null:e.selected.length)===(null==e.options?null:e.options.length)),t.xp6(1),t.Q6J("ngIf",!(null!=e.multiAllOption&&e.multiAllOption.selected)&&(null==e.selected?null:e.selected.length)!==(null==e.options?null:e.options.length))}}function ak(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",13),t.NdJ("click",function(i){t.CHM(e);const a=t.oxw(3);return t.KtG(a.clear(i))}),t._uU(1,"clear "),t.qZA()}}function sk(o,s){if(1&o&&(t.TgZ(0,"div",8),t._UZ(1,"lucide-icon",9)(2,"input",10,11),t.YNc(4,ak,2,0,"mat-icon",12),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("placeholder",e.searchPlaceholder),t.xp6(2),t.Q6J("ngIf",e.showClearButton)}}function rk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",14,15),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(2);return t.KtG(a.toggleMultiAll(i))})("keyup.enter",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(2);return t.KtG(a.toggleMultiAll(i))})("keyup.space",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(2);return t.KtG(a.toggleMultiAll(i))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("value",e.options),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_tat_ca")," ")}}function lk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",18,19),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))})("keyup.enter",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))})("keyup.space",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))}),t._uU(2),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e),t.xp6(2),t.hij(" ",n.displayValue(e)," ")}}function ck(o,s){1&o&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_no_result_found")," "))}function _k(o,s){if(1&o&&(t.ynx(0),t.YNc(1,lk,3,2,"mat-option",16),t.ALo(2,"async"),t.YNc(3,ck,3,3,"span",17),t.ALo(4,"async"),t.BQk()),2&o){const e=t.oxw(2);let n;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.filteredOptions$)),t.xp6(2),t.Q6J("ngIf",!e.showAllOption&&0===(null==(n=t.lcZ(4,4,e.filteredOptions$))?null:n.length))}}function dk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",22,19),t.NdJ("click",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))})("keyup.enter",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))})("keyup.space",function(){t.CHM(e);const i=t.MAs(1),a=t.oxw(3);return t.KtG(a.recalculateCheckedBoxes(i))}),t._uU(2),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("value",e),t.xp6(2),t.hij(" ",n.displayValue(e)," ")}}function uk(o,s){if(1&o&&(t.ynx(0),t.YNc(1,dk,3,2,"mat-option",21),t.BQk()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.options)}}const ba=function(o){return{inactive:o}},mk=function(o,s){return["new-select-design-panel",o,s]};function pk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"form",1)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-select",3),t.NdJ("selectionChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.onSelectionChange(i))})("openedChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.openedChange(i))}),t.YNc(5,ok,3,2,"mat-select-trigger",4),t.YNc(6,sk,5,2,"div",5),t.YNc(7,rk,4,4,"mat-option",6),t.ALo(8,"async"),t.YNc(9,_k,5,6,"ng-container",4),t.YNc(10,uk,2,1,"ng-container",4),t.qZA()()()}if(2&o){const e=t.oxw();let n;t.Q6J("formGroup",e.selectSearchForm)("ngClass",t.VKq(17,ba,e.disableSelectSearch)),t.xp6(2),t.hij(" ",e.label," "),t.xp6(1),t.Q6J("ngClass",t.VKq(19,ba,e.disableSelectSearch)),t.xp6(1),t.s9C("multiple",e.multiple),t.Q6J("ngClass",e.selected.length>0?"custom-selected-text":"")("panelClass",t.WLB(21,mk,e.panelClass,e.scrollClass))("disableOptionCentering",!0)("disabled",e.disableSelectSearch)("placeholder",e.selected.length>0?e.selected.length+" selected":e.selectPlaceholder),t.xp6(1),t.Q6J("ngIf",e.multiple),t.xp6(1),t.Q6J("ngIf",e.showSearch),t.xp6(1),t.Q6J("ngIf",e.multiple&&e.options.length>1&&0!==(null==(n=t.lcZ(8,15,e.filteredOptions$))?null:n.length)),t.xp6(2),t.Q6J("ngIf",e.showSearch),t.xp6(1),t.Q6J("ngIf",!e.showSearch)}}let hk=(()=>{class o{constructor(e,n,i){this._formBuilder=e,this._cd=n,this.testFinderService=i,this._destroy$=new W6.x,this.selectedEvent=new t.vpe,this.formValidEvent=new t.vpe,this.maxNumOptionsBeforeSearch=5,this.selected=[],this.selectPlaceholder="Select One",this.disableSelectSearch=!1,this.searchPlaceholder="Search",this.defaultOptionIndex=0,this.panelClass="",this.setInitialValue=!0,this.scrollClass="",this.multiple=!1,this.selectSearchForm=new m.cw({}),this._filteredListLength=0}ngOnInit(){var e,n;(null===(e=this.options)||void 0===e?void 0:e.length)>this.maxNumOptionsBeforeSearch&&(this.showSearch=!0,this.scrollClass="scroll"),this._setUpFormControls(this.selected,this.setInitialValue,this.multiple),this.showSearch&&(this.filteredOptions$=null===(n=this.selectSearchForm.get("SearchControl"))||void 0===n?void 0:n.valueChanges.pipe((0,qi.O)(""),(0,qn.U)(i=>(this.showClearButton=this._showClearButton(i),this._filter(i))),(0,va.R)(this._destroy$))),this.selectSearchForm.statusChanges.pipe((0,va.R)(this._destroy$)).subscribe(i=>{"VALID"===i&&this.formValidEvent.emit(!0),"INVALID"===i&&this.formValidEvent.emit(!1)})}ngAfterViewChecked(){this._cd&&!this._cd.destroyed&&this._cd.detectChanges()}ngOnDestroy(){this._destroy$.next(void 0),this._destroy$.complete()}onSelectionChange(e){console.log("onSelectionChange $event --\x3e",e)}clear(e){var n,i;e.stopPropagation(),this._filteredList=this.options,this._setSelectValue(this.selected),null===(n=this.selectSearchForm.get("SearchControl"))||void 0===n||n.setValue(""),null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i||i.reset(),this.showClearButton=!1}openedChange(e){var n,i,a,r,l,c,_,d,p;!e&&0===this._filteredListLength&&!this.multiple&&(null===(n=this.selectSearchForm.get("SearchControl"))||void 0===n||n.setValue(""),null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i||i.reset(),this._setSelectValue(this.selected)),!e&&this._filteredListLength>0&&!this.multiple&&this._setSelectValue(this._filteredList[0]),e&&(!(null===(l=null===(r=null===(a=this.searchDropdownInput)||void 0===a?void 0:a.nativeElement)||void 0===r?void 0:r.value)||void 0===l)&&l.toLowerCase().includes("all")&&(null===(c=this.selectSearchForm.get("SearchControl"))||void 0===c||c.setValue(""),null===(_=this.selectSearchForm.get("SearchControl"))||void 0===_||_.reset(),this.searchDropdownInput.nativeElement.value=""),null===(p=null===(d=this.searchDropdownInput)||void 0===d?void 0:d.nativeElement)||void 0===p||p.focus())}displayValue(e){return e.value}toggleMultiAll(e){this._setSelectValue(e.selected?this.options:[])}recalculateCheckedBoxes(e){this._setSelectValue(this.multiple?e.selected?[e.value,...this.selected]:this._removeOptionFromSelected(e.value,this.selected):e.value)}_removeOptionFromSelected(e,n){return n.filter(i=>e!==i)}_setUpFormControls(e,n,i){this.selectSearchForm=this._formBuilder.group({SelectControl:[this._setInitialValue(e,n,i)],SearchControl:[""]})}_isOptionAll(e){return!!e&&this.displayValue(e).toLowerCase().includes("all")}_setInitialValue(e,n,i){return e?(this.selected=e,this.selected):e||!n||i||0!==this.defaultOptionIndex&&!this.defaultOptionIndex?[]:(this.testFinderService.filterObjInArrObjs(this.selected,this.options[this.defaultOptionIndex])&&this.selected.push(this.options[this.defaultOptionIndex]),this.selected)}_setSelectValue(e){var n,i;this.testFinderService.filterObjInArrObjs(this.selected,e)||(this.selected=e,null===(n=this.selectSearchForm.get("SelectControl"))||void 0===n||n.setValue(e),this.selectedEvent.emit(this.selected),this.multiple&&(this.selected.length===this.options.length?this.multiAllOption.select():this.multiAllOption.deselect()),!this.multiple&&!this._isOptionAll(e)&&(null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i||i.setValue(this.displayValue(e))))}_filter(e){return!e||e?.toLowerCase().includes("all")?this.options:(this._filterValue=e.toLowerCase(),this._filteredList=this.options.filter(n=>{var i;return-1!==this.displayValue(n).toLowerCase().indexOf(null!==(i=this._filterValue)&&void 0!==i?i:"")}),this._filteredListLength=this._filteredList.length,this._filteredList)}_showClearButton(e){return e.length>0}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.qu),t.Y36(t.sBO),t.Y36(V6))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-select-search-dropdown"]],viewQuery:function(e,n){if(1&e&&(t.Gf(X6,5),t.Gf(tk,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.searchDropdownInput=i.first),t.iGM(i=t.CRH())&&(n.multiAllOption=i.first)}},inputs:{label:"label",options:"options",selected:"selected",selectPlaceholder:"selectPlaceholder",extractValue:"extractValue",disableSelectSearch:"disableSelectSearch",searchPlaceholder:"searchPlaceholder",defaultOptionIndex:"defaultOptionIndex",panelClass:"panelClass",tooltipMessage:"tooltipMessage",setInitialValue:"setInitialValue",multiple:"multiple"},outputs:{selectedEvent:"selectedEvent",formValidEvent:"formValidEvent"},decls:1,vars:1,consts:[["class","new-select-design",3,"formGroup","ngClass",4,"ngIf"],[1,"new-select-design",3,"formGroup","ngClass"],["appearance","outline",3,"ngClass"],["formControlName","SelectControl",3,"ngClass","panelClass","disableOptionCentering","disabled","multiple","placeholder","selectionChange","openedChange"],[4,"ngIf"],["class","search-option",4,"ngIf"],[3,"value","click","keyup.enter","keyup.space",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"search-option"],["name","search",2,"height","21px!important","width","21px!important","margin-right","2px"],["tabindex","0","type","text","matInput","","formControlName","SearchControl","autocomplete","off",1,"search-input",3,"placeholder"],["searchDropdownInput",""],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","class","clear-icon","aria-label","Clear",3,"click",4,"ngIf"],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","aria-label","Clear",1,"clear-icon",3,"click"],[3,"value","click","keyup.enter","keyup.space"],["multiAllOption",""],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space"],["matOption",""],[1,"no-results"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space"]],template:function(e,n){1&e&&t.YNc(0,pk,11,24,"form",0),2&e&&t.Q6J("ngIf",!!n.options&&n.options.length>0)},dependencies:[y.mk,y.sg,y.O5,bn.CK,Wt.Hw,xe.v_,xe.$V,xe.nX,Kn.k0,jn.x8,jn.Cb,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,Jt.M,b.Nh5,y.Ov,tt.bT],styles:[".search-input[_ngcontent-%COMP%]{border:none!important;outline:none!important}.new-select-design[_ngcontent-%COMP%]{padding:0!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:700;color:#63738a}input[_ngcontent-%COMP%]{font-size:16px}.se-search[_ngcontent-%COMP%]{color:#008cff;font-size:22px}ngk-icon[_ngcontent-%COMP%]{cursor:pointer;fill:#0000008a}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:#000!important}.no-results[_ngcontent-%COMP%]{display:block;line-height:1;font-size:14px;margin:1rem;text-align:center}.search-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:15px 10px}.search-option[_ngcontent-%COMP%]   .ngk-search-icon[_ngcontent-%COMP%], .search-option[_ngcontent-%COMP%]   .se-search[_ngcontent-%COMP%]{margin-right:10px;margin-left:-16px}.search-option[_ngcontent-%COMP%]   .ngk-clear-icon[_ngcontent-%COMP%]{align-self:flex-end;margin-right:-16px}mat-error[_ngcontent-%COMP%]{color:#d6312b;margin-top:5px;font-size:16px}.custom-selected-text[_ngcontent-%COMP%]  .mat-select-placeholder{color:#000!important;opacity:1!important}"]}),o})();function gk(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function fk(o,s){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function xk(o,s){1&o&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const wa=function(o,s){return{selected:o,last:s}};function vk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw(2);let c;return t.KtG(l.handleClickFolder(null!==(c=a.id)&&void 0!==c?c:0,r,a.name||"Th\u01b0 m\u1ee5c "+a.id,l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==a.id&&1==l.state.itemSelecteds[r].type,a.shareType))}),t.O4$(),t.TgZ(1,"svg",19),t._UZ(2,"path",20),t.qZA(),t.kcU(),t.TgZ(3,"span",21),t.YNc(4,gk,3,3,"span",2),t.YNc(5,fk,2,1,"span",2),t.qZA(),t.YNc(6,xk,3,3,"span",22),t._UZ(7,"mat-spinner",23),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(2).index,i=t.oxw(2);t.Q6J("ngClass",t.WLB(7,wa,i.state.itemSelecteds.length>0&&i.state.itemSelecteds[n]&&i.state.itemSelecteds[n].id==e.id&&1==i.state.itemSelecteds[n].type,i.state.itemSelecteds.length>0&&n==i.state.itemSelecteds.length-1&&i.state.itemSelecteds[n].id==e.id&&1==i.state.itemSelecteds[n].type)),t.xp6(3),t.Q6J("title",e.name),t.xp6(1),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id),t.xp6(1),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function bk(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw(2);return t.KtG(l.handleClickFile(a,r,a.name||"T\xean \u0111\u1ec1 thi",l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==(null==a.exam?null:a.exam.id)&&2==l.state.itemSelecteds[r].type))}),t.TgZ(2,"div",26),t.O4$(),t.TgZ(3,"svg",27),t._UZ(4,"path",28),t.qZA()(),t.kcU(),t.TgZ(5,"span",21),t._uU(6),t.qZA(),t._UZ(7,"mat-spinner",23),t.qZA(),t.BQk()}if(2&o){const e=s.$implicit,n=t.oxw(2).index,i=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(5,wa,i.state.itemSelecteds.length>0&&i.state.itemSelecteds[n]&&i.state.itemSelecteds[n].id==(null==e.exam?null:e.exam.id)&&2==i.state.itemSelecteds[n].type,i.state.itemSelecteds.length>0&&n==i.state.itemSelecteds.length-1&&i.state.itemSelecteds[n].id==(null==e.exam?null:e.exam.id)&&2==i.state.itemSelecteds[n].type)),t.xp6(4),t.Q6J("title",(null==e.exam?null:e.exam.name)||(null==e.homework?null:e.homework.className)||""),t.xp6(1),t.hij(" ",(null==e.exam?null:e.exam.name)||(null==e.homework?null:e.homework.className)||""," "),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function wk(o,s){if(1&o&&(t.TgZ(0,"div",15)(1,"div",16),t.YNc(2,vk,8,10,"div",17),t.YNc(3,bk,8,8,"ng-container",10),t.qZA()()),2&o){const e=t.oxw(),n=e.last,i=e.$implicit,a=t.oxw(2);t.Q6J("width",300)("id",!a.state.showPreview&&n?"col-last":""),t.xp6(2),t.Q6J("ngForOf",i.categoryObjs),t.xp6(1),t.Q6J("ngForOf",i.documentObjs)}}function Tk(o,s){if(1&o&&(t.TgZ(0,"div",29)(1,"div",16)(2,"div",30),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&o){const e=t.oxw(3);t.Q6J("id",e.state.showPreview?"":"col-last")("width",300),t.xp6(3),t.Oqu(t.lcZ(4,3,"lang_auto_thu_muc_trong"))}}function Ck(o,s){if(1&o&&(t.ynx(0),t.YNc(1,wk,4,4,"div",13),t.YNc(2,Tk,5,5,"ng-template",null,14,t.W1O),t.BQk()),2&o){const e=s.$implicit,n=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.categoryObjs.length>0||e.documentObjs.length>0)("ngIfElse",n)}}function kk(o,s){if(1&o&&(t.TgZ(0,"div",29)(1,"div",16)(2,"div",31),t._uU(3),t.qZA()()()),2&o){const e=t.oxw(2);t.Q6J("id",e.state.showPreview?"":"col-last")("width",300),t.xp6(3),t.Oqu("[ERROR] "+e.state.error)}}function Ok(o,s){if(1&o&&(t.TgZ(0,"div",32)(1,"div",33),t._UZ(2,"azt-preview-list-question",34),t.qZA()()),2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("exam",e.exam)("questionList",e.questionList)("filterTag",e.questionTag)("filterType",e.questionType)}}function yk(o,s){if(1&o&&(t.ynx(0),t.YNc(1,Ck,4,2,"ng-container",10),t.YNc(2,kk,4,3,"div",11),t.YNc(3,Ok,3,4,"div",12),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.state.dataLevels),t.xp6(1),t.Q6J("ngIf",e.state.error),t.xp6(1),t.Q6J("ngIf",e.state.showPreview)}}function Ak(o,s){if(1&o&&(t._uU(0),t.ALo(1,"mytranslate"),t.TgZ(2,"b"),t._uU(3),t.qZA()),2&o){const e=t.oxw();t.hij(" ",t.lcZ(1,2,"lang_auto_so_cau_da_chon"),":\xa0"),t.xp6(3),t.Oqu(e.calSelectings)}}function Sk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"span",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.tongleTooltip())}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.tooltipRandom)}}function Zk(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",35),t.YNc(1,Sk,2,1,"span",36),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",37),t.NdJ("focus",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.showTooltip=!0)})("keyup.enter",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.handlePressEnter(i))})("ngModelChange",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.random=i)}),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showTooltip&&e.state.itemSelecteds.length>0),t.xp6(2),t.Oqu(t.lcZ(4,3,"lang_auto_nhap_so_cau_can_lay")),t.xp6(2),t.Q6J("ngModel",e.random)}}const Ek=function(o){return{loading:o}};let Ik=(()=>{class o extends R.Q{changeTypeQuestion(e){this.questionType=e}changeTagQuestion(e){this.questionTag=e}onKeydownHandler(e){"Escape"==e.key&&this.closeTestFinder.emit(void 0)}handlePressEnter(e){0==this.state.itemSelecteds.length||this.state.loading||this.handleClickChon()}handleClickFolder(e,n,i,a=!1,r){this.showTooltip=!0,!this.state.loading&&(a||(this.store.dispatch(ot.nm()),this.store.dispatch(ot.m_({item:{type:1,id:e,level:n,name:i,shareType:r}}))))}get tooltipRandom(){let e="",n="",i="",a="",r="";return this.commonService.getTranslate("lang_auto_lay_ngau_nhien_so_cau_hoi_o").subscribe(l=>{e=l}),this.commonService.getTranslate("lang_auto_nhom_thuong").subscribe(l=>{n=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_thu_muc_thuong").subscribe(l=>{i=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_de_thi_thuong").subscribe(l=>{a=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_dang_chon").subscribe(l=>{r=l}),e+" "+(void 0!==this.state.chosenGroup?n:0==this.state.itemSelecteds.length||1==this.state.itemSelecteds[this.state.itemSelecteds.length-1].type?i:a)+" "+r}handleClickFile(e,n,i,a=!1,r){var l;if(this.showTooltip=!0,!this.state.loading&&!a&&e.exam){this.loadingPreview=!0;let c=null!==(l=e.exam.id)&&void 0!==l?l:0;this.store.dispatch(ot.m_({item:{type:2,id:c,level:n,name:i,shareType:r}})),this.fectchPreview(c)}}fectchPreview(e){this.examService.apiExamGetQuestionsIdGet(e).subscribe(n=>{var i,a,r,l;if(n.success){this.exam=null===(i=n.data)||void 0===i?void 0:i.examObj;let c=null!==(r=this.commonService.castJsonToClassObjs(Be.v,JSON.stringify((null===(a=n.data)||void 0===a?void 0:a.questionObjs)||[])))&&void 0!==r?r:[];this.questionList=null!==(l=this.commonService.castJsonToClassObjs(D6,JSON.stringify(c)))&&void 0!==l?l:[],this.loadingPreview=!1}else this.loadingPreview=!1})}handleClickCancel(){this.closeTestFinder.emit(void 0)}handleGetAllQuestionStringCode(){this.calSelectings<1&&this.random<1&&this.state.chosenGroup&&this.questionList.forEach(e=>{var n;(null===(n=e.groupInfo)||void 0===n?void 0:n.groupId)==this.state.chosenGroup&&(e.isSelected=!0)}),this.calSelectings<1&&this.random<1&&!this.state.chosenGroup&&this.questionList.forEach(e=>{e.isSelected=!0})}handleClickChon(){var e,n;this.handleGetAllQuestionStringCode();let i="",a="",r="",l="",c="";if(this.commonService.getTranslate("lang_auto_nhom").subscribe(h=>{i=h}),this.commonService.getTranslate("lang_auto_cau_thuong").subscribe(h=>{a=h}),this.commonService.getTranslate("lang_auto_lay_tieu_de").subscribe(h=>{r=h}),this.commonService.getTranslate("lang_auto_lay_ngau_nhien").subscribe(h=>{l=h}),this.commonService.getTranslate("lang_auto_lay_toan_bo").subscribe(h=>{c=h}),this.calSelectings>0){this.store.dispatch(ot.qY({questions:this.questionList}));let h=[],f=0;for(let w=0;w<this.state.usedQuestionLocations.length;w++){const k=this.state.usedQuestionLocations[w];let S=[],D=0;for(let Q=0;Q<k.length;Q++){const N=k[Q];let q=null!==(e=this.commonService.myTranslateInstant(this.cleanName(N.name)))&&void 0!==e?e:this.cleanName(N.name);if(1==N.type&&S.push(`[@C${N.id}:${(N.shareType&&"user"===N.shareType?`:${N.shareType}-`:null)??""}${q}]`),2==N.type&&S.push(`[@T${N.id}:${q}]`),3==N.type){let X=this.questionList.filter(E=>{var J,z;return(null===(J=E.groupInfo)||void 0===J?void 0:J.groupId)&&(null===(z=E.groupInfo)||void 0===z?void 0:z.groupId)==parseInt(q)}).length;X&&S.push(`[@G${q}:${X}-${i} ${q}]`),D=parseInt(q)}4==N.type&&S.push(`[@Q${N.id}:${q.replace("[PDFv2] ","")}]`)}if(0!=D&&D!=f){let Q=[...S];Q[Q.length-1]=`[${r}]`,h.push(Q.join(".")),f=D}h.push(S.join("."))}return void this.closeTestFinder.emit(h)}const _=this.state.itemSelecteds;let d=[];for(let h=0;h<_.length;h++){const f=_[h];let w=null!==(n=this.commonService.myTranslateInstant(this.cleanName(f.name)))&&void 0!==n?n:this.cleanName(f.name);1==f.type&&d.push(`[@C${f.id}:${(f.shareType&&"user"===f.shareType?`:${f.shareType}-`:null)??""}${w}]`),2==f.type&&d.push(`[@T${f.id}:${w}]`)}if(this.questionType.length>0&&this.questionType.forEach(h=>{d.push(`[@F:${h.key}]`)}),this.questionTag.length>0&&this.questionTag.forEach(h=>{d.push(`[@F:${h.key}]`)}),this.state.chosenGroup){let h=this.questionList.filter(f=>{var w;return(null===(w=f.groupInfo)||void 0===w?void 0:w.groupId)==this.state.chosenGroup}).length;if(d.push(`[@G${this.state.chosenGroup}:${h}-${i} ${this.state.chosenGroup}]`),this.random>0)d.push(`[${l} ${this.random} ${a}]`);else{let f=this.questionList.filter(w=>{var k;return(null===(k=w.groupInfo)||void 0===k?void 0:k.groupId)==this.state.chosenGroup}).length;d.push(`[${c} ${f} ${a}]`)}}else if(this.random>0)d.push(`[${l} ${this.random} ${a}]`);else{if(!(this.questionList.length>0))return void this.showErrorSnack("lang_auto_ban_can_nhap_so_luong_it_nhat_1_cau");d.push(`[${c} ${this.questionList.length} ${a}]`)}let p=this.replaceFilterCodeStr(d);this.closeTestFinder.emit([p])}replaceFilterCodeStr(e){let n="";return e.forEach((i,a)=>{a<e.length-1?i.includes("[@F:")?n+=i+",":n+=i+".":n.includes("[@F:")?(n=n.substring(0,n.lastIndexOf(",")),n+="."+i):n+=i}),n}get calSelectings(){return this.questionList.filter(e=>e.isSelected).length}cleanName(e){let n=e;return n=n.replaceAll(/[\[\],\.\-]+/g,""),n}tongleTooltip(){this.showTooltip=!this.showTooltip}ngAfterViewInit(){if(this.state.itemSelecteds.length>0){let e=this.state.itemSelecteds[this.state.itemSelecteds.length-1];2==e.type&&this.fectchPreview(e.id)}}ngOnInit(){this.store.dispatch(ot.WR({isFirstTime:this.isFirstTime})),this.store.dispatch(ot.AL()),this.subscriptions.add(this.store.select(xa.Y).subscribe(e=>{this.state=e,this.usedIds=this.state.usedQuestions.map(n=>n.id||0)})),super.ngOnInit()}constructor(e,n,i){super(e),this.commonService=e,this.store=n,this.examService=i,this.closeTestFinder=new t.vpe,this.isFirstTime=!1,this.form=new m.nJ({}),this.random=0,this.usedIds=[],this.showTooltip=!0,this.questionList=[],this.loadingPreview=!1,this.questionType=[],this.questionTag=[],this.questionTypeList=[{key:"TN",value:"Tr\u1eafc nghi\u1ec7m"},{key:"TL",value:"T\u1ef1 lu\u1eadn"},{key:"\u0110T",value:"\u0110i\u1ec1n t\u1eeb"}],this.questionTagList=[{key:"NB",value:"Nh\u1eadn bi\u1ebft"},{key:"TH",value:"Th\xf4ng hi\u1ec3u"},{key:"VD",value:"V\u1eadn d\u1ee5ng"},{key:"VDC",value:"V\u1eadn d\u1ee5ng cao"}]}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(ki.yh),t.Y36(xt.Oe))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-test-finder"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(a){return n.onKeydownHandler(a)},!1,t.evT)},inputs:{isFirstTime:"isFirstTime"},outputs:{closeTestFinder:"closeTestFinder"},features:[t.qOj],decls:23,vars:35,consts:[["azt-track-service","test-finder-De2lZomoHz6",1,"close-button","clickable",3,"matTooltip","click"],["id","grid-parent",1,"grid-parent",3,"ngClass"],[4,"ngIf"],["id","examSaveBtns",1,"bg-slate-200","dark:bg-darkmode-400"],[1,"left","test-finder",3,"formGroup"],[2,"margin-left","3px",3,"selectPlaceholder","searchPlaceholder","options","selected","multiple","selectedEvent"],[1,"right"],["manualSelect",""],["class","random",4,"ngIf","ngIfElse"],["azt-track-service","test-finder-cpsVY9x_hjE",1,"btn","btn-primary","w-24","ml-3",3,"disabled","click"],[4,"ngFor","ngForOf"],["aztColResizable","",3,"id","width",4,"ngIf"],["class","preview-pane","id","col-last",4,"ngIf"],["aztColResizable","",3,"width","id",4,"ngIf","ngIfElse"],["emptyCol",""],["aztColResizable","",3,"width","id"],["colLeftContent",""],["class","doc-item doc-item-cate clickable mb-2",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"doc-item","doc-item-cate","clickable","mb-2",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"cat-name",3,"title"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["color","accent",3,"strokeWidth","diameter"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],[1,"doc-item","doc-item-file","clickable","mb-2",3,"ngClass","click"],[1,"file-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-pending"],["d","M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708z"],["aztColResizable","",3,"id","width"],[1,"text-center","alert","alert-info"],[1,"text-center","alert","alert-danger"],["id","col-last",1,"preview-pane"],[1,"preview-content"],[3,"exam","questionList","filterTag","filterType"],[1,"random"],["class","qv_tooltip",3,"click",4,"ngIf"],["type","text","appOnlyNumber","","name","random","id","random",1,"form-control",3,"ngModel","focus","keyup.enter","ngModelChange"],[1,"qv_tooltip",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"mat-icon",0),t.NdJ("click",function(){return n.handleClickCancel()}),t.ALo(1,"mytranslate"),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,yk,4,3,"ng-container",2),t.qZA(),t.TgZ(5,"div",3)(6,"form",4)(7,"b"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(a){return n.changeTagQuestion(a)}),t.ALo(11,"mytranslate"),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(a){return n.changeTypeQuestion(a)}),t.ALo(14,"mytranslate"),t.ALo(15,"mytranslate"),t.qZA()(),t.TgZ(16,"div",6),t.YNc(17,Ak,4,4,"ng-template",null,7,t.W1O),t.YNc(19,Zk,6,5,"div",8),t.TgZ(20,"button",9),t.NdJ("click",function(){return n.handleClickChon()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e){const i=t.MAs(18);t.s9C("matTooltip",t.lcZ(1,19,"lang_auto_dong")),t.xp6(3),t.Q6J("ngClass",t.VKq(33,Ek,n.state.loading)),t.xp6(1),t.Q6J("ngIf",n.state.dataLevels.length>0),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(2),t.hij("",t.lcZ(9,21,"lang_testbank_testted_list_sort"),": "),t.xp6(2),t.Q6J("selectPlaceholder",t.lcZ(11,23,"lang_auto_select_tag"))("searchPlaceholder",t.lcZ(12,25,"lang_auto_search_tag"))("options",n.questionTagList)("selected",n.questionTag)("multiple",!0),t.xp6(3),t.Q6J("selectPlaceholder",t.lcZ(14,27,"lang_auto_select_type"))("searchPlaceholder",t.lcZ(15,29,"lang_auto_search_type"))("options",n.questionTypeList)("selected",n.questionType)("multiple",!0),t.xp6(6),t.Q6J("ngIf",0==n.calSelectings)("ngIfElse",i),t.xp6(1),t.Q6J("disabled",0==n.state.itemSelecteds.length||n.state.loading),t.xp6(1),t.Oqu(t.lcZ(22,31,"lang_auto_chon"))}},dependencies:[y.mk,y.sg,y.O5,Wt.Hw,Qi.sN,Qt.Kd,m._Y,m.Fj,m.JJ,m.JL,m.On,m.sg,Y6,We.Y,K6,hk,tt.bT],styles:['.close-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;color:#9c9c9c;z-index:10}.close-button[_ngcontent-%COMP%]:hover{color:#747474;cursor:pointer}.grid-parent[_ngcontent-%COMP%]{min-width:300;width:100%;min-height:150px;height:100%;display:flex;flex-wrap:nowrap;overflow-y:auto;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:orange;margin-right:5px;width:40px;height:40px;min-width:40px;font-size:40px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:5px;padding:5px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{width:40px;min-width:40px;margin-right:5px;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .examTableIconObj[_ngcontent-%COMP%]{position:absolute;top:3px;left:5px;width:20px;background-image:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/titlePublishExam.png);background-position:top;background-size:cover;overflow:hidden;height:20px}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]{background-color:#7497c2}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{color:#fff}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected.last[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]{flex:1;min-width:800px;padding:15px;overflow-y:auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{width:100%;max-width:700px;height:100%;margin:0 auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .question-item[_ngcontent-%COMP%]{border:1px solid rgb(231,231,231)}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:50px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:15px;flex:auto;display:flex;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:right;align-items:center;padding-right:15px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:1px solid #eeeeee;margin-left:5px;padding:5px;width:100px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]{display:flex;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#18a2b8;margin-right:.25rem}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin-left:5px;width:auto!important}mat-spinner[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 570px){#examSaveBtns[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;padding-top:5px;padding-bottom:5px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:block;margin-bottom:5px;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex:none}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px!important}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-right:30px;padding-left:30px}}.qv_tooltip[_ngcontent-%COMP%]{bottom:47px;right:110px;display:flex;font-size:11px;justify-content:space-between;position:absolute;z-index:999;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:29px;left:298px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}']}),o})();var Mk=T(63064),Pk=T(79036),Lk=T(96442),ao=T(86642),jk=T(99050),Nk=T(25721),qk=T(58349);function Qk(o,s){1&o&&(t.TgZ(0,"div"),t.Hsn(1),t.qZA())}const Dk=["*"];let Uk=(()=>{class o extends R.Q{checkPermissionCallApi(){this.subscriptions.add(this.testMarketQuestionService.apiTestMarketQuestionsPermissionGet(this.applyType).subscribe(e=>{var n,i,a;1==e.success?(this.hasPermission=null!==(i=null===(n=e.data)||void 0===n?void 0:n.obj)&&void 0!==i&&i,this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"")}))}ngOnInit(){this.checkPermissionCallApi()}constructor(e,n){super(e),this.commonService=e,this.testMarketQuestionService=n,this.applyType="",this.hasPermission=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v),t.Y36(xt.Q_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-permission-checking"]],inputs:{applyType:"applyType"},features:[t.qOj],ngContentSelectors:Dk,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,Qk,2,0,"div",0)),2&e&&t.Q6J("ngIf",n.hasPermission)},dependencies:[y.O5],encapsulation:2}),o})();var Fk=T(61896),Rk=T(54968);const zk=["editorContainer"];let Jk=(()=>{class o{initMonacoAction(){return new Promise(e=>{const n="assets/monaco-editor/min/vs";"object"!=typeof window.monaco?(this.loaderScript.type="text/javascript",this.loaderScript.setAttribute("async","false"),this.loaderScript.src=`${n}/loader.js`,this.loaderScript.addEventListener("load",()=>{window.require.config({paths:{vs:`${n}`}}),window.require(["vs/editor/editor.main"],()=>{e()})}),document.body.appendChild(this.loaderScript)):e()})}ngAfterViewInit(){this.initMonacoAction().then(()=>{this.initMonaco()})}constructor(e,n,i,a,r){this.cdnService=e,this.documentService=n,this.examService=i,this.infoService=a,this.commonService=r,this.loaderScript=document.createElement("script"),this.config="",this.onInit=new t.vpe,this.returnImageMap=new t.vpe}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0),this.loaderScript.parentNode&&this.loaderScript.parentNode.removeChild(this.loaderScript)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Dt.U),t.Y36(xt.Zg),t.Y36(xt.Oe),t.Y36(xt.CM),t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(e,n){if(1&e&&t.Gf(zk,7),2&e){let i;t.iGM(i=t.CRH())&&(n._editorContainer=i.first)}},inputs:{config:"config"},outputs:{onInit:"onInit",returnImageMap:"returnImageMap"},decls:0,vars:0,template:function(e,n){},encapsulation:2}),o})();class Jn{constructor(s){this.name=s}}class Bk extends Jn{run(s){let e=s.getModel(),n=s.getSelection(),i={startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn},a=e.getValueInRange(i);s.executeEdits("",[{range:i,text:`<code>${a}</code>`}]),s.setPosition({lineNumber:n.endLineNumber,column:n.startColumn+7+a.length})}}class Hk extends Jn{run(s){let e=s.getPosition(),i="________";s.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:i}]),s.setPosition({lineNumber:e.lineNumber,column:e.column+i.length})}}class Yk extends Jn{run(s){let e=s.getModel(),n=s.getSelection(),i={startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn},a=e.getValueInRange(i);s.executeEdits("",[{range:i,text:`\\( ${a} \\)`}]),s.setPosition({lineNumber:n.endLineNumber,column:n.startColumn+3+a.length})}}class so extends Jn{constructor(s,e){super(s),this.tag=e}run(s){let e=s.getModel(),n=s.getSelection(),i={startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn},a=e.getValueInRange(i),r=a;a.indexOf(`!${this.tag}`)>=0?(r=r.replaceAll(`!${this.tag}`,""),r=r.replaceAll(/\[:\$(([^\$]|\$[^\]])+)\$\]/g,"$1")):r=a.startsWith("[!")?`[!${this.tag}`+a.substring(1):`[!${this.tag}:$${a}$]`,s.executeEdits("",[{range:i,text:r}])}}class Gk extends Jn{run(s){let e=s.getSelection(),n=s.getModel(),i={startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,startColumn:e.startColumn,endColumn:e.endColumn},a=n.getValueInRange(i);/^\[\*?[A-H]:[^\]]+\]$/.test(a)?(a=a.substring(a.indexOf(":")+1,a.length-2),s.executeEdits("",[{range:i,text:a}])):s.executeEdits("",[{range:i,text:`[A:${a}]`}])}}class $k{constructor(){this.placeHolderRemoved=!1,this.decorations=[],this.parseChange=!0,this.hasError=!1}setIntellisense(s){this.azotaIntel=s}setSingleMode(s){var e;null===(e=this.azotaIntel)||void 0===e||e.setSingleMode(s)}setLang(s){var e;this.lang=s,null===(e=this.azotaIntel)||void 0===e||e.setLang(s)}registerPlugin(s,e){this._editor&&this._editor.addAction({id:s.name,label:s.name,keybindings:[this.monaco.KeyMod.CtrlCmd|e],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(n){s.run(n)}})}getCurLine(){return this._editor.getPosition().lineNumber}getCurLineText(){let s=this._editor.getPosition().lineNumber;return this._editor.getModel().getLineContent(s)}getLineText(s){return this._editor.getModel().getLineContent(s)}getCurQuest(){if(this.azotaIntel){let s=this.getCurLine()-1;return this.azotaIntel.getCurPos(s,50)[0]}}goToLine(s){this._editor.focus(),this._editor.setPosition({lineNumber:s,column:0}),this._editor.revealLineNearTop(s+1)}setPosition(s,e){let n={lineNumber:s,column:e};this._editor.focus(),this._editor.setPosition(n),this._editor.revealPositionNearTop(n)}insertDetails(s,e){let n=this.getLineText(s),a=[],r=n.replaceAll(/\s+/g," ").split("].[");r.splice(r.length-1);let l=r.join("].[")+"]";for(const c of e)a.push(l+`.[@Q${c}]`);if(a.length>0){let c=a.join("\n");this._editor.executeEdits("",[{range:{startLineNumber:s,endLineNumber:s,startColumn:0,endColumn:n.length+2},text:c}]),this._editor.setSelection({startLineNumber:s,endLineNumber:s,startColumn:0,endColumn:0})}}setError(s){this.hasError=s.length>0;let e=[],n=this._editor.getModel();for(const i of s){let a=i.split("|"),r=+a[0],l=a[1],c=n.getLineContent(r);e.push({startLineNumber:r,endLineNumber:r,startColumn:0,endColumn:c.length+1,message:l})}this.monaco.editor.setModelMarkers(n,"",e)}init(s,e,n,i){var a,r,l,c,_,d,p,h,f,w,k,S,D,Q;n&&this.setLang(n);let N=this;this.monaco=s;let q="azota",W=s.languages.getLanguages().filter(it=>it.id==q),X=W&&W.length>0;X||(s.languages.register({id:q}),s.languages.setMonarchTokensProvider(q,{operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^\s*C\xe2u\s*\d+/,"question-label"],[/^\s*Question\s*\d+/,"question-label"],[/\s+\*?[A-Ha-h][\.\)]/,"answer-label"],[/^\s*\*?[A-Ha-h][\.\)]/,"answer-label"],[/\[[^\]]+\]/,"expression"],[/^\s*L\u1eddi gi\u1ea3i\s*$/,"token"],[/^\s*GLOSSARY\s*$/,"token"],[/^\s*B\u1ea2NG \u0110\xc1P \xc1N\s*$/,"token"],[/^\s*B\u1ea3ng \u0111\xe1p \xe1n\s*$/,"token"],[/^\s*\-+H\u1ebeT\-+\s*$/,"token"],[/^\s*H\u01b0\u1edbng d\u1eabn gi\u1ea3i\s*$/,"token"],[/^\s*H\u01af\u1edaNG D\u1eaaN GI\u1ea2I\s*$/,"token"],[/^\s*Ch\u1ecdn\s*[A-Ha-h]\s*$/,"choose"],[/^\s*Answer keys\s*$/,"token"],[/^\s*ANSWER KEYS\s*$/,"token"],[/^\s*Answer key\s*$/,"token"],[/^\s*ANSWER KEY\s*$/,"token"],[/^\s*Answer Section\s*$/,"token"],[/^\s*\-+THE END\-+\s*$/,"token"],[/^\s*\-+END\-+\s*$/,"token"],[/^\s*Instructions\s*$/,"token"],[/^\s*INSTRUCTIONS\s*$/,"token"],[/^\s*Choose\s*[A-Ha-h]\s*$/,"choose"],[/^[IVX]+\s*[\.:].*$/,"section"],[/^Section+\s*[\dA-K]+[\.:].*$/,"section"],[/^Part+\s*[\dA-KVX]+[\.:].*$/,"section"],[/^Ph\u1ea7n+\s*[\dA-KVX]+[\.:].*$/,"section"],[/\\[a-z][a-z0-9]+/,"latex"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}}));let E="dark"==localStorage.getItem("mode_ui");s.editor.defineTheme("azotaTheme",{base:E?"vs-dark":"vs",inherit:!0,rules:[{token:"question-label",foreground:E?"569cd6":"3437eb",fontStyle:"bold"},{token:"answer-label",foreground:E?"FF6464":"ff0000",fontStyle:"bold"},{token:"expression",foreground:"ab2428"},{token:"operator",foreground:"ab2428"},{token:"latex",foreground:"3437eb"},{token:"keyword",foreground:"2504da"},{token:"keyword.predefined",foreground:"2504da"},{token:"token",foreground:"8f4106",fontStyle:"bold"},{token:"choose",foreground:"000000",fontStyle:"bold"},{token:"section",foreground:"000000",fontStyle:"bold"}],colors:{"editor.foreground":E?"#d4d4d4":"#000000","editor.background":E?"#25304C":"#ffffff"}}),X||(s.languages.setLanguageConfiguration(q,{brackets:[["{","}"],["[","]"],["(",")"],["\\(","\\)"],["[*","*]"]]}),s.languages.registerCompletionItemProvider(q,{triggerCharacters:["@",".",","],provideCompletionItems:function(it,rt){return(0,ke.mG)(this,void 0,void 0,function*(){if(!N.azotaIntel)return{suggestions:[]};let ht=it.getWordUntilPosition(rt),ft=it.getLineContent(rt.lineNumber);return{suggestions:(yield N.azotaIntel.getSuggestions(rt.lineNumber-1,rt.column-1,ht.word,ft)).map(Ot=>{let Gt,ve,kt=Ot.split("|"),gt=s.languages.CompletionItemKind.Text,bt=kt[0];if(kt.length>2){switch(kt[2]){case"file":gt=s.languages.CompletionItemKind.File,bt="2"+kt[0];break;case"folder":gt=s.languages.CompletionItemKind.Folder,bt="1"+kt[0];break;case"class":gt=s.languages.CompletionItemKind.Class,bt="3"+kt[3];break;case"function":gt=s.languages.CompletionItemKind.Function,bt="3"+kt[3];break;case"snippet":gt=s.languages.CompletionItemKind.Module,Gt=s.languages.CompletionItemInsertTextRule.InsertAsSnippet,bt="0"}ve={id:"editor.action.triggerSuggest",title:""}}return{label:kt[0],kind:gt,insertText:kt[1],insertTextRules:Gt,sortText:bt,command:ve,documentation:{supportHtml:!0,value:kt[4]}}})}})}}));let z=s.editor.create(e,{theme:"azotaTheme",language:q,wordBasedSuggestions:!1,minimap:{enabled:!1},overviewRulerLanes:0,wordWrap:"on",tabSize:4,readOnly:i}),K=z.getModel();z.onMouseDown(function(it){N.onChangePosCalback&&it.target.position&&N.onChangePosCalback(it.target.position.lineNumber,it.target.position.column),z.focus()});let B={domNode:null,getId:function(){return"my.content.widget"},getDomNode:function(){var it,rt;return this.domNode||this.domNode||(this.domNode=document.createElement("div"),this.domNode.innerHTML=null!==(rt=null===(it=N.lang)||void 0===it?void 0:it.myTranslateInstant("azt_lang_enter_at_to_choose_from_bank"))&&void 0!==rt?rt:"Nh\u1eadp @ \u0111\u1ec3 ch\xe8n t\u1eeb ng\xe2n h\xe0ng",this.domNode.style.color="grey",this.domNode.style.width="250px"),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:2},preference:[s.editor.ContentWidgetPositionPreference.BELOW]}}};z.addContentWidget(B),K.onDidChangeContent(it=>{let ht=K.getValue().replaceAll("\r","").split("\n");this.placeHolderRemoved||(z.removeContentWidget(B),this.placeHolderRemoved=!0);let ft=it.changes[0].range.startLineNumber,Tt=ft<=ht.length?K.getLineContent(ft):"";Tt.startsWith("@[@")&&this.runEditAction([it.changes[0].range.startLineNumber-1+"|0|3|[@"],z,!1),Tt.endsWith(".,")&&this.runEditAction([`${it.changes[0].range.startLineNumber-1}|${Tt.length-2}|${Tt.length}|,`],z,!1),this.azotaIntel&&this.parseChange?this.azotaIntel.onChange({startLineNumber:it.changes[0].range.startLineNumber,endLineNumber:it.changes[0].range.endLineNumber,startColumn:it.changes[0].range.startColumn,endColumn:it.changes[0].range.endColumn,text:it.changes[0].text},N,this.onChangeCalback):this.parseChange&&this.onChangeCalback&&this.onChangeCalback(ht,null)});let et=z.addCommand(0,function(it,rt,ht){if(N.onInsertDetailsCb){let ft=ht.replaceAll(/\s+/g," ").trim();N.onInsertDetailsCb(ft,rt)}},""),st=z.addCommand(0,function(it,rt,ht){if(N.onRefreshCalback){let ft=ht.replaceAll(/\s+/g," ").trim();N.onRefreshCalback(ft,rt)}},""),at=z.addCommand(0,function(it,rt,ht){if(N.onInsertQuestTextCb){let ft=ht.replaceAll(/\s+/g," ").trim();N.onInsertQuestTextCb(ft,rt)}},""),mt=new Map;return i||(mt.set("insertDirectQuest",et),mt.set("insertQuestText",at)),mt.set("randomAgain",st),X||s.languages.registerCodeLensProvider(q,{provideCodeLenses:function(it,rt){let ht=it.getValue().split("\n");return N.azotaIntel?{lenses:N.azotaIntel.getCodeLens(ht).map(Tt=>{let Ot=Tt.split("|"),kt=+Ot[0]+1;return{range:{startLineNumber:kt,startColumn:1,endLineNumber:kt,endColumn:1},id:Ot[1],command:{id:mt.get(Ot[1]),title:Ot[2],arguments:[kt,Ot[4]],tooltip:Ot[3]}}}),dispose:()=>{}}:{lenses:[],dispose:()=>{}}}}),z.onKeyUp(it=>{if(it.keyCode==s.KeyCode.Enter&&N.runCommand("enter",z),it.keyCode==s.KeyCode.Tab){let rt=z.getPosition(),ht=K.getLineContent(rt.lineNumber);rt.column>ht.length&&N.runCommand("tab",z)}}),z.onKeyDown(it=>{if(it.keyCode==s.KeyCode.Backspace){let rt=z.getSelection();if(rt.startLineNumber!=rt.endLineNumber||rt.startColumn!=rt.endColumn)return;let ht=z.getPosition(),Tt=K.getValueInRange({startLineNumber:ht.lineNumber,endLineNumber:ht.lineNumber,startColumn:ht.column-1,endColumn:ht.column}),Ot={startLineNumber:ht.lineNumber,endLineNumber:ht.lineNumber,startColumn:0,endColumn:ht.column};if("]"==Tt){let bt=K.getValueInRange(Ot).lastIndexOf("[")+2;return Ot.startColumn=bt,void z.executeEdits("",[{range:Ot,text:""}])}let kt=K.getLineContent(ht.lineNumber).trim(),gt=[/^C\xe2u\s\d+[\.:]$/,/^Question\s\d+[\.:]$/,/^[A-H]\.$/];if(ht.column>kt.length){let Gt=!1;for(const bt of gt)if(bt.test(kt)){Gt=!0;break}if(Gt)return void z.executeEdits("",[{range:Ot,text:"\n"}])}}}),z.onDidPaste(it=>{this.pastePosition=it}),s.languages.registerHoverProvider("azota",{provideHover:function(it,rt){if(N.onHoverCalback){let ht=N.onHoverCalback(rt.lineNumber,rt.column,it.getLineContent(rt.lineNumber));return ht?{range:new s.Range(ht.lineIdx,ht.s,ht.lineIdx,ht.e),contents:[{supportHtml:!0,value:ht.text}]}:void 0}}}),this._editor=z,z.addCommand(s.KeyMod.CtrlCmd|s.KeyCode.Enter,function(){}),this.registerPlugin(new Hk(null!==(r=null===(a=this.lang)||void 0===a?void 0:a.myTranslateInstant("azt_lang_menu_fill_blank"))&&void 0!==r?r:"\u0110i\u1ec1n v\xe0o ch\u1ed7 tr\u1ed1ng"),s.KeyCode.Period),this.registerPlugin(new Gk(null!==(c=null===(l=this.lang)||void 0===l?void 0:l.myTranslateInstant("azt_lang_menu_find_mistake"))&&void 0!==c?c:"\u0110\xe1p \xe1n t\xecm l\u1ed7i sai"),s.KeyCode.KeyD),this.registerPlugin(new Yk(null!==(d=null===(_=this.lang)||void 0===_?void 0:_.myTranslateInstant("azt_lang_menu_enter_latex"))&&void 0!==d?d:"Nh\u1eadp latex"),s.KeyCode.KeyL),this.registerPlugin(new so(null!==(h=null===(p=this.lang)||void 0===p?void 0:p.myTranslateInstant("azt_lang_menu_italic"))&&void 0!==h?h:"In nghi\xeang","i"),s.KeyCode.KeyI),this.registerPlugin(new so(null!==(w=null===(f=this.lang)||void 0===f?void 0:f.myTranslateInstant("azt_lang_menu_bold"))&&void 0!==w?w:"In \u0111\u1eadm","b"),s.KeyCode.KeyB),this.registerPlugin(new so(null!==(S=null===(k=this.lang)||void 0===k?void 0:k.myTranslateInstant("azt_lang_menu_underline"))&&void 0!==S?S:"G\u1ea1ch ch\xe2n","u"),s.KeyCode.KeyU),this.registerPlugin(new Bk(null!==(Q=null===(D=this.lang)||void 0===D?void 0:D.myTranslateInstant("azt_lang_menu_enter_code"))&&void 0!==Q?Q:"Hi\u1ec3n th\u1ecb d\u1ea1ng code block"),s.KeyCode.KeyF),setTimeout(()=>{this._editor.focus()},200),z}setHoverCalback(s){this.onHoverCalback=s}onChange(s){this.onChangeCalback=s}onChangePosition(s){this.onChangePosCalback=s}onRefreshInclude(s){this.onRefreshCalback=s}onInsertDetails(s){this.onInsertDetailsCb=s}onInsertQuestText(s){this.onInsertQuestTextCb=s}updateLine(s,e,n,i){this._editor.executeEdits("",[{range:{startLineNumber:s,endLineNumber:s,startColumn:e,endColumn:n},text:i}])}insertLine(s){let e=this._editor.getPosition(),i=this._editor.getModel().getLineContent(e.lineNumber),a=i+"\n"+s;this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:0,endColumn:i.length+1},text:a.trim()}]);let l=e.lineNumber+a.split("\n").length;this._editor.setSelection({startLineNumber:l,endLineNumber:l,startColumn:0,endColumn:0}),this._editor.focus()}removeLines(s,e){let n=this.parseChange;this.parseChange=!1;for(let i=s.length-1;i>=0;i--){let a=s[i],r={startLineNumber:a+1,endLineNumber:a+2,startColumn:0,endColumn:0};0==i&&e&&(this.parseChange=!0),this._editor.executeEdits("",[{range:r,text:""}])}this.parseChange=n}removeText(s,e,n,i){let a={startLineNumber:s,endLineNumber:s,startColumn:e,endColumn:n},r=this.parseChange;this.parseChange=i,this._editor.executeEdits("",[{range:a,text:""}]),this.parseChange=r}getCurPos(){return this._editor.getPosition()}insertAtCurPos(s){let e=this._editor.getPosition();this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:s.trim()}]);let i=e.lineNumber,a=e.column+s.length;return this._editor.setSelection({startLineNumber:i,endLineNumber:i,startColumn:a,endColumn:a}),this._editor.focus(),{lineIdx:i,startCol:e.column,endCol:a}}runEditAction(s,e,n,i){this.parseChange=!1;let a="",r=0;for(const l of s){let c=l.split("|"),_=+c[0]+1,h=c[3],f={startLineNumber:_,endLineNumber:_,startColumn:+c[1]+1,endColumn:+c[2]+1};if(r==s.length-1&&n&&!i&&(this.parseChange=!0),r==s.length-1&&i&&(h+="|"),e.executeEdits("",[{range:f,text:h}]),r==s.length-1&&i){this.parseChange=n??!1,f.startColumn=f.startColumn+h.length-1,f.endColumn=f.startColumn+1;let w=h.split("\n");w.length>1&&(f.startLineNumber=_+w.length-1,f.endLineNumber=f.startLineNumber,f.startColumn=w[w.length-1].length,f.endColumn=f.startColumn+1),e.executeEdits("",[{range:f,text:""}])}a=h,r++}return this.parseChange=!0,a}runCommand(s,e){var n;let i=e.getPosition(),a=null===(n=this.azotaIntel)||void 0===n?void 0:n.getAutofillValue(i.lineNumber-1,i.column-1,s);if(!a||0==a.length)return;let r=this.runEditAction(a,e,!0,!0),c=e.getModel().getLineCount(),_=r.split("\n").length,p={lineNumber:i.lineNumber+(i.lineNumber+_-1==c&&"enter"==s?_:0),column:("enter"==s?0:i.column)+r.length};e.setPosition(p),this.onChangePosCalback&&this.onChangePosCalback(p.lineNumber,p.column)}zeroPad(s,e){return s=s||2,(new Array(s).join("0")+e).slice(-1*s)}}class Kk{constructor(s,e){this.examIntel=new G.ExamIntellisense(s),this.examIntel.setApiService(e),this.apiService=e}setSingleMode(s){this.examIntel.setSingleMode(s)}setLang(s){this.lang=s}getSuggestions(s,e,n,i){return new Promise(a=>{this.examIntel.getSuggestions(s,e,n,i).then(r=>{a(this.translate(r))})})}getAutofillValue(s,e,n){return this.translate(this.examIntel.getAutofillValue(s,e,n))}getCurPos(s,e){return this.examIntel.getCurPos(s,e)}getCodeLens(s){let e=[],n=0;for(const d of s)/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(d.trim())?(e.push(`${n}|insertDirectQuest|azt_lang_editor_insert_direct|azt_lang_editor_insert_direct_desc|${d.trim()}`),e.push(`${n}|randomAgain|azt_lang_editor_random_again|azt_lang_editor_random_again_desc|${d.trim()}`)):/\[@Q\d+:[^\]]*\]$/.test(d.trim())&&e.push(`${n}|insertQuestText|azt_lang_editor_insert_quest_text|azt_lang_editor_insert_quest_text_desc|${d.trim()}`),n++;return this.translate(e)}getApiService(){return this.apiService}onChange(s,e,n){if(1!=s.text.length||"\n"==s.text)this.notiChange(e,n);else{let i=e._editor.getValue().replaceAll("\r",""),a=i.split("\n"),r=200;i.length>1e5&&(r=200*i.length/1e5),this.examIntel.setLines(a),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.notiChange(e,n)},r)}}onMobileChange(s,e){let n=s.split("\n"),i=400;s.length>1e5&&(i=400*s.length/1e5),this.examIntel.setLines(n),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{let a=this.examIntel.parse();e&&e(n,a)},i)}translate(s){var e,n;let i=[];for(let a of s)i.push(null!==(n=null===(e=this.lang)||void 0===e?void 0:e.translateString(a))&&void 0!==n?n:a);return i}notiChange(s,e){let n=s._editor.getValue().replaceAll("\r",""),i=n.split("\n");this.examIntel.setLines(i);let a=this.examIntel.parse(),r=this.examIntel.getEditHint();r&&s.runEditAction(r,s._editor),s.parseChange=!0,r.length>0&&(n=s._editor.getValue(),i=n.split("\n"),this.examIntel.setLines(i),a=this.examIntel.parse()),e&&e(i,a)}}let Wk=(()=>{class o extends Jk{constructor(){super(...arguments),this.onStartProcessFile=new t.vpe,this.onSwitchFilePdf=new t.vpe}setupDropFile(){const e=jQuery("#frame_monaco_editor");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault(),n.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",n=>{this.onStartProcessFile.emit(n.originalEvent.dataTransfer.files[0])})}initMonaco(){let e=new $k;this.editorApiService&&(e.setIntellisense(new Kk(this.config,this.editorApiService)),this._editor=e.init(monaco,this._editorContainer.nativeElement,this.commonService,this.readOnly),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,Rk.R)(window,"resize").subscribe(()=>this._editor.layout()),this.setupDropFile(),this.onInit.emit({azotaEditor:e}))}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["azt-monaco-editor"]],inputs:{editorApiService:"editorApiService",readOnly:"readOnly"},outputs:{onStartProcessFile:"onStartProcessFile",onSwitchFilePdf:"onSwitchFilePdf"},features:[t._Bn([{provide:m.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}]),t.qOj],decls:4,vars:0,consts:[["id","frame_monaco_editor"],[1,"editor-container"],["editorContainer",""],[1,"file-drop-background"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1,2)(3,"div",3),t.qZA())},styles:["[_nghost-%COMP%]{display:block}.editor-container[_ngcontent-%COMP%]{width:100%;height:100%}#frame_monaco_editor[_ngcontent-%COMP%]{height:100%;position:relative}.file-drop-background[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000029;justify-content:center;align-items:center;color:#fff}"]}),o})();var Vk=T(64341);function Xk(o,s){1&o&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_dan_tai_thu_vien")," "))}let tO=(()=>{class o extends R.Q{ngOnInit(){this.isLoadLibs=!1,this.isMobile=this.commonService.isMobileOrTable(),this.commonService.loadScriptPromises([]).then(()=>{this.isLoadLibs=!0,this.mathEditor=com.wiris.jsEditor.JsEditor.newInstance({language:"en"}),this.mathEditor.insertInto(document.getElementById("math_control")),this.chemEditor=com.wiris.jsEditor.JsEditor.newInstance({language:"en",toolbar:'<toolbar ref="chemistry"/>'}),this.chemEditor.insertInto(document.getElementById("chem_control")),this.inp&&(this.mathEditor.setMathML(this.inp.str),this.chemEditor.setMathML(this.inp.str),this.focus())})}actionClose(){this.onClose.emit()}actionInsert(){this.inp&&(this.inp.str="math"==this.type?this.mathEditor.getMathML():this.chemEditor.getMathML(),this.mathEditor.setMathML('<math xmlns="http://www.w3.org/1998/Math/MathML"/>'),this.onInsertLatex.emit(this.inp))}changeType(e){this.type!=e&&("math"==this.type?this.chemEditor.setMathML(this.mathEditor.getMathML()):this.mathEditor.setMathML(this.chemEditor.getMathML()),this.type=e)}focus(){"math"==this.type?this.mathEditor.focus():this.chemEditor.focus()}constructor(e){super(e),this.commonService=e,this.onClose=new t.vpe,this.onInsertLatex=new t.vpe,this.type="math",this.isLoadLibs=!1,this.isMobile=!1}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_t.v))},o.\u0275cmp=t.Xpm({type:o,selectors:[["mathtype-editor"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsertLatex:"onInsertLatex"},features:[t.qOj],decls:27,vars:18,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body"],["azt-track-service","mathTypeEditor-TGaC_p-ZLfr",1,"btn-text-primary",3,"click"],["azt-track-service","mathTypeEditor-nYze54WDihK",1,"btn-text-primary",3,"click"],["class","dialog-loading",4,"ngIf"],["id","math_control",1,"dialog-content",2,"height","300px",3,"hidden"],["id","chem_control",1,"dialog-content",2,"height","300px",3,"hidden"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","mathTypeEditor-QurJasjSBOm",1,"btn","btn-primary","w-24",3,"click"],[1,"dialog-loading"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return n.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"a",6),t.NdJ("click",function(){return n.changeType("math")}),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t._uU(14," | "),t.TgZ(15,"a",7),t.NdJ("click",function(){return n.changeType("chem")}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.YNc(18,Xk,3,3,"div",8),t._UZ(19,"div",9)(20,"div",10),t.qZA(),t.TgZ(21,"div",11),t._UZ(22,"div",12),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){return n.actionInsert()}),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog",n.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,10,"lang_auto_soan_thao_cong_thuc")," "),t.xp6(7),t.hij(" ",t.lcZ(13,12,"lang_auto_toan")," "),t.xp6(4),t.hij(" ",t.lcZ(17,14,"lang_auto_hoa")," "),t.xp6(2),t.Q6J("ngIf",!n.isLoadLibs),t.xp6(1),t.Q6J("hidden","math"!=n.type),t.xp6(1),t.Q6J("hidden","chem"!=n.type),t.xp6(5),t.hij(" ",t.lcZ(26,16,"lang_auto_chen")," "))},dependencies:[y.O5,Wt.Hw,tt.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}"]}),o})(),eO=(()=>{class o extends R.Q{constructor(){super(...arguments),this.id_content="",this.onDropFile=new t.vpe}onFileSelected(e){let a=e.target.files,r=!!a&&a[0];0!=r&&this.onDropFile.emit(r)}setupDropFile(){const e=jQuery("#frame_inp_editor_"+this.id_content);e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(n){n.preventDefault(),n.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",n=>{this.onDropFile.emit(n.originalEvent.dataTransfer.files[0])})}ngAfterViewInit(){this.setupDropFile()}}return o.\u0275fac=function(){let s;return function(n){return(s||(s=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["question-dropper"]],inputs:{id_content:"id_content"},outputs:{onDropFile:"onDropFile"},features:[t.qOj],decls:13,vars:7,consts:[["azt-track-service","question-dropper-qkcT8PYGlf",1,"editor-drop-file",3,"id","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending","mx-auto"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"link"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""]],template:function(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){t.CHM(i);const r=t.MAs(12);return t.KtG(r.click())}),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2)(3,"path",3)(4,"path",4),t.qZA(),t.kcU(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"span",5),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"input",6,7),t.NdJ("change",function(r){return n.onFileSelected(r)}),t.qZA()}2&e&&(t.MGl("id","frame_inp_editor_",n.id_content,""),t.xp6(6),t.hij("",t.lcZ(7,3,"lang_auto_keo_tha_fiel_vao_day_hoc_bam_vao")," "),t.xp6(3),t.Oqu(t.lcZ(10,5,"lang_auto_chon_file")+" ..."))},dependencies:[tt.bT],styles:[".editor-drop-file[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border:1px dotted #2462ae;padding:20px;border-radius:5px;-webkit-user-select:none;user-select:none}.editor-drop-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.editor-drop-file[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#2462ae}.is-dragover[_ngcontent-%COMP%]{background-color:#2462ae6a}"]}),o})();var nO=T(1256);let iO=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[y.JJ],imports:[C.Bz,y.ez,I.j,P.kb,g.Z_,Q6,m.u5,m.UX,U.yj,L.Z,O.xC,A.QG,x.SD,Z.h,j.W,vs,M.d,b.qyJ.pick(b.ciZ),u.vI.forRoot()]}),o})();t.B6R(po.Vn,function(){return[C.rH,y.mk,y.sg,y.O5,Ft.W0,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,zt.Q,ri.L,Jt.M,ji,Uk,Vt._,pc,Xs]},function(){return[y.JJ,Xn.lO,tt.bT]}),t.B6R(Pk.A,function(){return[y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,Jt.M]},function(){return[tt.bT]}),t.B6R(Mk.b,function(){return[y.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,Jt.M]},function(){return[tt.bT]}),t.B6R(gi.h,function(){return[y.O5]},function(){return[tt.bT]}),t.B6R(Si.Y,function(){return[y.mk,y.O5,P.KC,m._Y,m.Fj,m._,m.JJ,m.JL,m.sg,m.u,m.CE,Jt.M,Wn.o,Vn.g]},function(){return[tt.bT]}),t.B6R(Lk.L,function(){return[Wt.Hw]},function(){return[tt.bT]}),t.B6R(ni.D,function(){return[U.aO]},function(){return[tt.bT]}),t.B6R(ao.o,function(){return[y.O5]},function(){return[tt.bT]}),t.B6R(jk.b,function(){return[y.O5,Wt.Hw,ao.o]},function(){return[tt.bT]}),t.B6R(Nk.h,function(){return[y.mk,y.sg,y.O5,je.eB,Wt.Hw,ao.o,qk._]},function(){return[tt.bT]}),t.B6R(fo.P,function(){return[y.sg,y.O5,Ce.ir,Ce.lw,Ce.IP,Ce.Y6,U.aO,Wt.Hw,xe.v_,xe.$V]},function(){return[tt.bT]}),t.B6R(yi,function(){return[y.mk,y.sg,y.O5,y.PC,Wt.Hw,Ft.W0,Ft.D8,Qt.Kd,Fk.C,Wk,Vk.V,tO,eO,_o.X,Ai,co,ai.Z,kc,mo,Ik]},function(){return[tt.bT,tt.QA,tt.Ev]}),t.B6R(hc.J,function(){return[y.O5,nO.eI]},function(){return[tt.bT]})},25631:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>QuestHeaderComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94650),src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55330),src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51442),src_app_core_services_common_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(50690),src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(15043);const _c0=["markInput"],_c1=["inpAudioUpload"];function QuestHeaderComponent_div_3_common_tooltip_9_Template(nt,F){1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"common-tooltip")(1,"em")(2,"mark"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3,"Ctr + Enter"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,1,"lang_auto_de_tu_dong_nhap_diem_cho_cac_cau_con_lai_trong_nhom_bang_dot")," "))}const _c2=function(nt){return{hide:nt}};function QuestHeaderComponent_div_3_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",20)(1,"div",21)(2,"span",22),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.showMarkInput())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(4,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"div",23)(7,"input",24,25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("keyup",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.checkKeyup(m))})("focus",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.enableTooltip())})("focusout",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.disableTooltip())})("ngModelChange",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.q.point=m)}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,QuestHeaderComponent_div_3_common_tooltip_9_Template,6,3,"common-tooltip",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(10,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(12,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()}if(2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();let y;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(13,_c2,T.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",T.q.point&&+T.q.point>0?T.q.point+" "+_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(4,7,"lang_auto_diem"):_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,9,"lang_auto_nhap_diem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(15,_c2,!T.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("size",(null==T.q.point||null==(y=T.q.point.toString())?null:y.length)||2)("ngModel",T.q.point),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.isTooltipPoint),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(12,11,"lang_auto_diem")," ")}}function QuestHeaderComponent_div_4_div_1_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",31),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(4);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.click())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(1,"svg",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(2,"path",33),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3," Audio "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_2_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span",41),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.removeAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"[X]"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_3_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span",42),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(T.audioName)}}function QuestHeaderComponent_div_4_div_2_span_4_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(T.audioName)}}function QuestHeaderComponent_div_4_div_2_mat_icon_5_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",43),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.loadAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2,"cached"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}2&nt&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"lang_auto_tai_lai_audio"))}function QuestHeaderComponent_div_4_div_2_mat_icon_6_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",44),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.stopAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"pause "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_mat_icon_7_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",45),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.playAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1," play_circle"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_i_8_Template(nt,F){1&nt&&_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",46)}function QuestHeaderComponent_div_4_div_2_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",6)(1,"span",34),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_4_div_2_span_2_Template,2,0,"span",35),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_4_div_2_span_3_Template,2,1,"span",36),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_4_div_2_span_4_Template,2,1,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(5,QuestHeaderComponent_div_4_div_2_mat_icon_5_Template,3,3,"mat-icon",37),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_4_div_2_mat_icon_6_Template,2,0,"mat-icon",38),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(7,QuestHeaderComponent_div_4_div_2_mat_icon_7_Template,2,0,"mat-icon",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(8,QuestHeaderComponent_div_4_div_2_i_8_Template,1,0,"i",40),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let y;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matTooltip",T.audioName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=T.q.quest.parts[0].text&&null!=(y=T.q.quest.parts[0].text.trim())&&y.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isLoadFalseAudio&&T.isLoadedAudio&&T.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isLoadFalseAudio&&T.isLoadedAudio&&!T.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isLoadedAudio)}}function QuestHeaderComponent_div_4_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(1,QuestHeaderComponent_div_4_div_1_Template,4,0,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_4_div_2_Template,9,8,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"input",29,30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("input",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.selectFileAudio(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();let y;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(T.isHasAudio||null!=T.q.quest.parts[0].text&&null!=(y=T.q.quest.parts[0].text.trim())&&y.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.isHasAudio)}}function QuestHeaderComponent_div_5_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",47)(1,"div",6)(2,"mat-select",48)(3,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(9,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(11,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()),2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngModel",T.q.type)("disabled",!0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,8,"lang_testbank_create_exam_width_file_docx_essay")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,10,"lang_auto_trac_nghiem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(11,12,"lang_auto_dien_tu")," ")}}function QuestHeaderComponent_div_6_button_6_Template(nt,F){1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",52)(1,"mat-icon",53),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2,"cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()())}function QuestHeaderComponent_div_6_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",47)(1,"div",6)(2,"mat-chip-list")(3,"mat-chip",50),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("removed",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.setTag())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_6_button_6_Template,3,0,"button",51),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()}if(2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(),y=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);let m;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",y),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,3,"azt_lang_tag_"+T.q.tag[0].code)," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=T.q.quest.parts[0].text&&null!=(m=T.q.quest.parts[0].text.trim())&&m.startsWith("[@")))}}function QuestHeaderComponent_button_9_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",54),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",55)(4,"path",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&nt){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",T)}}function QuestHeaderComponent_button_10_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",57),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.changeQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",58)(4,"path",59)(5,"path",60)(6,"path",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}2&nt&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"lang_auto_doi_cau_khac"))}function QuestHeaderComponent_li_20_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",62),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.setFixAns())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",63),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"line",64)(4,"path",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(9,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}if(2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AsE("",T.q.quest.isFixAns?_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,2,"lang_auto_bo_co_dinh"):_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,4,"lang_auto_co_dinh")," ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(9,6,"lang_auto_dap_an"),"")}}function QuestHeaderComponent_li_21_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",66),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.copyContent(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"rect",68)(4,"path",69),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,1,"lang_auto_copy_noi_dung")," "))}function QuestHeaderComponent_li_22_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",70),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.cut(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"circle",71)(4,"circle",72)(5,"line",73)(6,"line",74)(7,"line",75),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(10,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(10,1,"lang_auto_cat")," "))}function QuestHeaderComponent_li_23_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",76),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(m){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(U.del(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",77)(4,"path",78)(5,"path",79),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,1,"lang_auto_xoa")," "))}function QuestHeaderComponent_li_24_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",80),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",63),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",81)(4,"path",82)(5,"path",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()),2&nt){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",T),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,2,"lang_auto_gan_nhan")," ")}}function QuestHeaderComponent_div_27_li_2_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",85),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){const U=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T).$implicit,C=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(C.setTag(U))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&nt){const T=F.$implicit,y=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let m;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",null!==(m=T[y.commonService.getCurrentLang()+"Name"])&&void 0!==m?m:T.enName," ")}}function QuestHeaderComponent_div_27_li_3_Template(nt,F){1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(1,"hr",86),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA())}function QuestHeaderComponent_div_27_li_4_Template(nt,F){if(1&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"button",87),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(T);const m=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let U;return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(m.applyTagAll(null!==(U=m.q.tag)&&void 0!==U?U:[]))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",!T.q.tag),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,2,"lang_auto_ap_dung_cho_cac_cau_con_lai")," ")}}function QuestHeaderComponent_div_27_Template(nt,F){if(1&nt&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",15)(1,"ul",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_27_li_2_Template,3,1,"li",84),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_27_li_3_Template,2,0,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_27_li_4_Template,4,4,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&nt){const T=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngForOf",T.questionTags),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit)}}let QuestHeaderComponent=(()=>{class QuestHeaderComponent extends src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(nt,F){super(nt),this.commonService=nt,this.cdnService=F,this.notOnlyQuestEdit=!0,this.showType=!0,this.questionTags=[],this.onLabelClick=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onHotKeyPointSync=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onApplyAllTag=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onError=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onCopy=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onCut=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onDel=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onChangeQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onExtraInfo=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.isHasAudio=!1,this.isLoadedAudio=!1,this.isLoadFalseAudio=!1,this.audioName="",this.audioMime="",this.audioUrl="",this.isTooltipPoint=!1,this.isPlayingAudio=!1,this.showPointInput=!1,this.isMobile=!1,this.q={label:"",quest:{label:0,answers:[],parts:[]},answers:[],renderedStr:""}}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable();let nt=this.commonService.willDeleteParseJson(this.q.attachments||"[]");this.q.audio?(this.isHasAudio=!0,this.audioName=this.q.audio.name,this.isLoadedAudio=!0,this.isLoadFalseAudio=!1):nt.forEach(F=>{(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(F.mimes||"")&&(this.isHasAudio=!0,this.audioUrl=F.url||"",this.audioName=F.name||"",this.audioMime=F.mimes||""),this.audioUrl&&this.loadAudio()})}loadAudio(){this.isLoadedAudio=!1,fetch(this.cdnService.getRawCdnLink(this.audioUrl)).then(nt=>{if(!nt.ok)throw new Error("Something went wrong");nt.blob().then(F=>{this.q.audio=new File([F],this.audioName,{type:this.audioMime}),this.isLoadedAudio=!0,this.isLoadFalseAudio=!1})}).catch(()=>{this.isLoadedAudio=!0,this.isLoadFalseAudio=!0;let nt=this.commonService.myTranslateInstant("lang_auto_khong_the_tai_tep_audio_cho"),F=this.commonService.myTranslateInstant("lang_auto_vui_long_thu_lai");this.showErrorSnack(`${nt} ${this.q.label} ${F}`)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}changeQuest(){this.onChangeQuest.emit(this.q)}removeAudio(){this.q.attachments=void 0,this.stopAudio(),this.q.audio=void 0,this.isHasAudio=!1,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio}),this.inpAudioUpload&&(this.inpAudioUpload.nativeElement.value=null)}selectFileAudio(nt){var F,T;(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(nt.target.files[0].type)?(this.stopAudio(),this.q.audio=nt.target.files[0],this.audioName=null!==(T=null===(F=this.q.audio)||void 0===F?void 0:F.name)&&void 0!==T?T:"",this.isLoadedAudio=!0,this.isLoadFalseAudio=!1,this.isHasAudio=!0,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio})):this.showErrorSnack("lang_auto_file_dinh_kem_phai_la_mot_audio")}showMarkInput(){this.showPointInput=!0,setTimeout(()=>{var nt;null===(nt=this.markInput)||void 0===nt||nt.nativeElement.focus()},50)}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.showPointInput&&this.onExtraInfo.emit({q:this.q,type:"point",data:this.q.point}),this.isTooltipPoint=!1,this.showPointInput=!1}setFixAns(){this.q.quest.isFixAns=!this.q.quest.isFixAns,this.onExtraInfo.emit({q:this.q,type:"fix",data:this.q.quest.isFixAns})}setTag(nt){this.q.tag=nt?[nt]:[],this.onExtraInfo.emit({q:this.q,type:"tag",data:this.q.tag})}applyTagAll(nt){this.onApplyAllTag.emit(nt)}copyContent(nt){this.onCopy.emit(this.q)}cut(nt){this.onCut.emit(this.q)}del(nt){this.onDel.emit(this.q)}getTagName(nt){return nt.toUpperCase().split(" ").map(F=>{var T;return null!==(T=F[0])&&void 0!==T?T:""}).join("")}checkKeyup(ev){var _a;if("Enter"==ev.code){let v=null===(_a=this.markInput)||void 0===_a?void 0:_a.nativeElement.value;if(!/^[\d\.\+\-\*\/\s\(\)]+$/.test(v)){let nt=this.commonService.myTranslateInstant("lang_auto_du_lieu_diem_ban_nhap_khong_hop_le_dot");return void this.onError.emit(nt)}if(v=eval(v),this.q.point=Math.round(100*v)/100,ev.ctrlKey)this.isTooltipPoint=!1,this.showPointInput=!1,this.onHotKeyPointSync.emit(this.q.point);else{window.focus();let nt=document.activeElement;nt&&nt.blur()}}}isPlayAudio(){var nt;return!(!window.playMedia||window.playMedia.id!==(null===(nt=this.q)||void 0===nt?void 0:nt.quest.label)||!window.playMedia.played)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0,this.isPlayingAudio=!1)}playAudio(){var nt;window.playMedia&&window.playMedia.pause(),this.q.audio&&(window.playMedia=new Audio(URL.createObjectURL(this.q.audio)),window.playMedia.id=null===(nt=this.q)||void 0===nt?void 0:nt.quest.label,window.playMedia.play(),this.isPlayingAudio=!0)}labelClick(){var nt;this.onLabelClick.emit(null===(nt=this.q)||void 0===nt?void 0:nt.quest.parts)}}return QuestHeaderComponent.\u0275fac=function nt(F){return new(F||QuestHeaderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(src_app_core_services_common_service__WEBPACK_IMPORTED_MODULE_2__.v),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_3__.U))},QuestHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Xpm({type:QuestHeaderComponent,selectors:[["app-quest-header"]],viewQuery:function nt(F,T){if(1&F&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Gf(_c1,5)),2&F){let y;_angular_core__WEBPACK_IMPORTED_MODULE_4__.iGM(y=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CRH())&&(T.markInput=y.first),_angular_core__WEBPACK_IMPORTED_MODULE_4__.iGM(y=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CRH())&&(T.inpAudioUpload=y.first)}},inputs:{q:"q",notOnlyQuestEdit:"notOnlyQuestEdit",showType:"showType",questionTags:"questionTags"},outputs:{onLabelClick:"onLabelClick",onHotKeyPointSync:"onHotKeyPointSync",onApplyAllTag:"onApplyAllTag",onError:"onError",onCopy:"onCopy",onCut:"onCut",onDel:"onDel",onChangeQuest:"onChangeQuest",onExtraInfo:"onExtraInfo"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_4__.qOj],decls:28,vars:14,consts:[[1,"box-service-question"],["azt-track-service","quest-header-7xvJmr2fh",1,"box-service-question-name",3,"click"],["class","box-service-inp-point",4,"ngIf"],["class","box-service-attach-files cursor-pointer",4,"ngIf"],["class","box-service-type",4,"ngIf"],[1,"box-service-type",2,"padding-right","0px","padding-left","0px"],[1,"first-text"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip",4,"ngIf"],["azt-track-service","quest-header-6bPT_kB0nD","mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",2,"width","20px",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngIf"],["tags","matMenu"],["class","dropdown-menu show relative w-56",4,"ngIf"],[1,"box-service-inp-point"],[1,"first-text","cursor-pointer"],["azt-track-service","quest-header-1hL1VYrnNh",3,"ngClass","click"],[1,"inp-point",3,"ngClass"],[3,"size","ngModel","keyup","focus","focusout","ngModelChange"],["markInput",""],[1,"box-service-attach-files","cursor-pointer"],["azt-track-service","quest-header-i7a1qGxHBu","class","first-text","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","first-text",4,"ngIf"],["type","file","accept","audio/ogg;audio/mpeg;audio/wav",1,"hide",3,"input"],["inpAudioUpload",""],["azt-track-service","quest-header-i7a1qGxHBu",1,"first-text",2,"white-space","nowrap",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"],[1,"name-audio",3,"matTooltip"],["azt-track-service","quest-header-bBZd9Ohvof","class","delete",3,"click",4,"ngIf"],["style","\n            color: #9e9e9e;\n            text-decoration: line-through;",4,"ngIf"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click",4,"ngIf"],["azt-track-service","quest-header-SjZKht1L9l",3,"click",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["azt-track-service","quest-header-bBZd9Ohvof",1,"delete",3,"click"],[2,"color","#9e9e9e","text-decoration","line-through"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click"],["azt-track-service","quest-header-SjZKht1L9l",3,"click"],[1,"fa","fa-spinner","fa-spin"],[1,"box-service-type"],[3,"ngModel","disabled"],[3,"value"],[1,"tag-chip",3,"matMenuTriggerFor","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"font-size","15px"],["mat-icon-button","",3,"matMenuTriggerFor","matTooltip"],["d","M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],["d","M7 7h.01"],["azt-track-service","quest-header-6bPT_kB0nD","mat-icon-button","",3,"matTooltip","click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","quest-header-NheQ3Js3Ya",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-5","lucide","mr-2"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["azt-track-service","quest-header-gKmo4Y1J7u",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","quest-header-Y1KbHn_mie",1,"dropdown-item",3,"click"],["cx","6","cy","6","r","3"],["cx","6","cy","18","r","3"],["x1","20","y1","4","x2","8.12","y2","15.88"],["x1","14.47","y1","14.48","x2","20","y2","20"],["x1","8.12","y1","8.12","x2","12","y2","12"],["azt-track-service","quest-header-84pgUW5VoW",1,"dropdown-item",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["mat-menu-item","",1,"dropdown-item",3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[4,"ngFor","ngForOf"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","quest-header-RiQa-w8Jwo",1,"dropdown-item","w-full",3,"disabled","click"]],template:function nt(F,T){if(1&F&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){return T.labelClick()}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_3_Template,13,17,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_4_Template,5,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(5,QuestHeaderComponent_div_5_Template,12,14,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_6_Template,7,5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(7,"div",5)(8,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,QuestHeaderComponent_button_9_Template,5,4,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(10,QuestHeaderComponent_button_10_Template,7,3,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(11,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(12,"svg",10),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(13,"circle",11)(14,"circle",12)(15,"circle",13),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(16,"mat-menu",null,14)(18,"div",15)(19,"ul",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(20,QuestHeaderComponent_li_20_Template,10,8,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(21,QuestHeaderComponent_li_21_Template,8,3,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(22,QuestHeaderComponent_li_22_Template,11,3,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(23,QuestHeaderComponent_li_23_Template,9,3,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(24,QuestHeaderComponent_li_24_Template,9,4,"li",17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(25,"mat-menu",null,18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(27,QuestHeaderComponent_div_27_Template,5,3,"div",19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()),2&F){const y=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(17);let m,U,C;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(T.q.label),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isMobile),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.isMobile&&T.showType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.q.tag&&T.q.tag.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!T.q.tag||0==T.q.tag.length),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.q.changeable),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",y),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",1===T.q.type&&!(null!=T.q.quest.parts[0].text&&null!=(m=T.q.quest.parts[0].text.trim())&&m.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",T.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=T.q.quest.parts[0].text&&null!=(U=T.q.quest.parts[0].text.trim())&&U.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=T.q.quest.parts[0].text&&null!=(C=T.q.quest.parts[0].text.trim())&&C.startsWith("[@")))}},styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.box-service-pin-ans[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}.delete[_ngcontent-%COMP%]{color:red}  .mat-select-arrow-wrapper{margin-left:5px}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.name-audio[_ngcontent-%COMP%]{max-width:100px;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1}.name-audio[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding-right:5px}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}"]}),QuestHeaderComponent})()}}]);