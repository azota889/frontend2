"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[441],{10731:(at,L,m)=>{m.d(L,{x:()=>A});class A{constructor(){this.answerConfigParse=[],this.questionContentParse=[],this.answerLabelsMockup={}}}},63382:(at,L,m)=>{m.d(L,{X:()=>Z});var A=m(5e3),p=m(35018);let Z=(()=>{class T{constructor(N){this.commonService=N}isInIframe(){try{return window.self!==window.top}catch(N){return!0}}sendMessageToParentIframe(N){try{window.parent.postMessage(N,"*")}catch(q){}}sendMessageToIFrame(N,q){const Q=document.getElementById(N),F=Q?Q.contentWindow:null;null!=F&&F.postMessage(q,"*")}}return T.\u0275fac=function(N){return new(N||T)(A.LFG(p.v))},T.\u0275prov=A.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})()},92982:(at,L,m)=>{m.r(L),m.d(L,{HomeworkModule:()=>co});var A=m(69808),p=m(93075),Z=m(48966),T=m(74202),z=m(51908),N=m(1737),q=m(44841),Q=m(47470),F=m(75658),wt=m(49088),kt=m(8785),xt=m(37389),Ot=m(6834),R=m(70024),$=m(40520),yt=m(53170),rt=m(90508),lt=m(36053),jt=m(30502),Ct=m(96551),St=m(60703),ct=m(85053),H=m(55330),At=m(61447),Mt=m(41303),K=m(51442),t=m(5e3),J=m(35018),Zt=m(57521),X=m(74693),tt=m(12813),G=m(2366),dt=m(72491),Tt=m(88386),Pt=m(34782),It=m(79001),Dt=m(50136),et=m(47423),ot=m(67322),Nt=m(98833),nt=m(87238),Y=m(91350),W=m(49692),Ht=m(16883),Jt=m(73727),it=m(20371),I=m(1033);function Lt(i,r){1&i&&t._UZ(0,"azt-loading-effect")}function Ut(i,r){1&i&&(t.TgZ(0,"div",93),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function Et(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function qt(i,r){1&i&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function Yt(i,r){1&i&&(t.TgZ(0,"div",94),t.O4$(),t.TgZ(1,"svg",95)(2,"g",96)(3,"g",97),t._UZ(4,"circle",98),t.TgZ(5,"path",99),t._UZ(6,"animateTransform",100),t.qZA()()()()())}function Bt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",101)(1,"button",102),t.NdJ("click",function(){const s=t.CHM(e).index,a=t.oxw(2);return t.KtG(!!a.formHomework.files&&a.formHomework.files.splice(s,1))}),t.O4$(),t.TgZ(2,"svg",27),t._UZ(3,"line",103)(4,"line",104),t.qZA()(),t.kcU(),t.TgZ(5,"a",105),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.onShowFile(s,-1))}),t.TgZ(6,"span",106),t._uU(7),t.qZA()()()}if(2&i){const e=r.$implicit;t.xp6(6),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function zt(i,r){1&i&&(t.TgZ(0,"div",109),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function Qt(i,r){if(1&i&&(t.TgZ(0,"div",107),t.YNc(1,zt,3,3,"div",108),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidatorWithoutWhoAllow)}}const mt=function(){return{standalone:!0}},Ft=function(i){return{suppressScrollX:!0,suppressScrollY:i}};function Rt(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",12),t._UZ(15,"input",13),t.qZA(),t.YNc(16,Ut,3,3,"div",14),t.qZA()(),t.TgZ(17,"div",15)(18,"div",16)(19,"label",17),t._uU(20),t.ALo(21,"mytranslate"),t.O4$(),t.TgZ(22,"svg",18),t.ALo(23,"mytranslate"),t._UZ(24,"circle",19)(25,"line",20)(26,"line",21),t.qZA()()(),t.kcU(),t.TgZ(27,"div",16)(28,"div",22)(29,"div",23)(30,"mat-form-field",24)(31,"input",25),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(42);return t.KtG(n.open())}),t.ALo(32,"mytranslate"),t.qZA(),t.TgZ(33,"button",26),t.NdJ("click",function(n){return t.CHM(e),t.MAs(42).open(),t.KtG(n.stopPropagation())}),t.O4$(),t.TgZ(34,"svg",27),t._UZ(35,"path",28)(36,"path",29)(37,"path",30)(38,"path",31)(39,"path",32)(40,"path",33),t.qZA()(),t.kcU(),t.TgZ(41,"ngx-mat-datetime-picker",null,34),t.YNc(43,Et,2,0,"ng-template"),t.qZA()()(),t.TgZ(44,"div",23)(45,"mat-form-field",24)(46,"input",35),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(57);return t.KtG(n.open())}),t.ALo(47,"mytranslate"),t.qZA(),t.TgZ(48,"button",26),t.NdJ("click",function(n){return t.CHM(e),t.MAs(57).open(),t.KtG(n.stopPropagation())}),t.O4$(),t.TgZ(49,"svg",27),t._UZ(50,"path",28)(51,"path",29)(52,"path",30)(53,"path",31)(54,"path",32)(55,"path",33),t.qZA()(),t.kcU(),t.TgZ(56,"ngx-mat-datetime-picker",null,36),t.YNc(58,qt,2,0,"ng-template"),t.qZA()()(),t.TgZ(59,"div",37)(60,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearTime())}),t.O4$(),t.TgZ(61,"svg",39),t._UZ(62,"path",40)(63,"path",41)(64,"path",42)(65,"path",43),t.qZA(),t._uU(66),t.ALo(67,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(68,"div",44)(69,"div",45),t._uU(70),t.ALo(71,"mytranslate"),t.qZA()()()(),t.TgZ(72,"div",46)(73,"div",10)(74,"h3",47),t._uU(75),t.ALo(76,"mytranslate"),t.qZA()(),t.TgZ(77,"div",48)(78,"div",49)(79,"input",50,51),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.onFileSelected(n))}),t.qZA(),t.TgZ(81,"a",52),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(80);return t.KtG(n.click())}),t.O4$(),t.TgZ(82,"svg",53),t._UZ(83,"line",54)(84,"line",55),t.qZA(),t.kcU(),t.TgZ(85,"span"),t._uU(86),t.ALo(87,"mytranslate"),t.qZA()(),t.YNc(88,Yt,7,0,"div",56),t.TgZ(89,"div",57),t._uU(90),t.ALo(91,"mytranslate"),t.qZA(),t.YNc(92,Bt,8,2,"div",58),t.qZA(),t.TgZ(93,"editor",59),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.formHomework.content=n)}),t.qZA()()(),t.TgZ(94,"div",60)(95,"div",61)(96,"label",62),t._uU(97),t.ALo(98,"mytranslate"),t.qZA()(),t.TgZ(99,"div",63)(100,"div",64)(101,"div",65),t._UZ(102,"input",66),t.TgZ(103,"label",67),t._uU(104),t.ALo(105,"mytranslate"),t.qZA()(),t.TgZ(106,"div",68),t._UZ(107,"input",69),t.TgZ(108,"label",70),t._uU(109),t.ALo(110,"mytranslate"),t.qZA()()()()(),t.TgZ(111,"div",71)(112,"div",61)(113,"label",62),t._uU(114),t.ALo(115,"mytranslate"),t.qZA()(),t.TgZ(116,"div",63)(117,"div",64)(118,"div",65),t._UZ(119,"input",72),t.TgZ(120,"label",73),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()(),t.TgZ(123,"div",68),t._UZ(124,"input",74),t.TgZ(125,"label",75),t._uU(126),t.ALo(127,"mytranslate"),t.qZA()()()()(),t.TgZ(128,"div",76)(129,"div",77)(130,"div",78),t._uU(131),t.ALo(132,"mytranslate"),t.qZA()(),t.TgZ(133,"div",79)(134,"div",80)(135,"div",81)(136,"h3",82),t._uU(137),t.ALo(138,"mytranslate"),t.qZA(),t.TgZ(139,"div",83),t._UZ(140,"azt-list-classroom-checkall",84),t.qZA()(),t.TgZ(141,"div",85)(142,"perfect-scrollbar",86),t.ALo(143,"isMobileOrTable"),t._UZ(144,"azt-list-classroom-checkbox",87),t.qZA()()()(),t.YNc(145,Qt,2,1,"div",88),t.qZA()(),t.TgZ(146,"div",89)(147,"div",90)(148,"button",91),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveHomework(0))}),t._uU(149),t.ALo(150,"mytranslate"),t.qZA(),t.TgZ(151,"button",92),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveHomework(1))}),t._uU(152),t.ALo(153,"mytranslate"),t.qZA()()()()()()()}if(2&i){const e=t.MAs(42),o=t.MAs(57),n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(4),t.hij(" ",t.lcZ(6,43,"lang_auto_tao_bai_tap_moi")," "),t.xp6(6),t.hij(" ",t.lcZ(12,45,"lang_auto_ten")," "),t.xp6(5),t.Q6J("ngIf",n.form.controls.homeworkName.errors),t.xp6(4),t.hij(" ",t.lcZ(21,47,"lang_testbank_test_config_time_assigne_homework")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(23,49,"lang_homework_add_home_work_startDate_introduce")),t.xp6(9),t.s9C("placeholder",t.lcZ(32,51,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(15),t.s9C("placeholder",t.lcZ(47,53,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",o),t.xp6(20),t.hij(" ",t.lcZ(67,55,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(71,57,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(5),t.hij(" ",t.lcZ(76,59,"lang_auto_noi_dung")," "),t.xp6(4),t.Q6J("ngModelOptions",t.DdM(87,mt)),t.xp6(7),t.Oqu(t.lcZ(87,61,"lang_homework_add_home_work_add_file_homework")),t.xp6(2),t.Q6J("ngIf",n.loadingUpload),t.xp6(2),t.Oqu(t.lcZ(91,63,"lang_cms_add_homework_input_file")),t.xp6(2),t.Q6J("ngForOf",n.formHomework.files),t.xp6(1),t.Q6J("ngModel",n.formHomework.content)("ngModelOptions",t.DdM(88,mt))("init",n.initDataEditor),t.xp6(4),t.hij(" ",t.lcZ(98,65,"lang_auto_cho_xem_ket_qua")," "),t.xp6(7),t.hij(" ",t.lcZ(105,67,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(110,69,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(115,71,"lang_auto_dang_nhap_de_nop_bai")," "),t.xp6(7),t.hij(" ",t.lcZ(122,73,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(127,75,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(132,77,"lang_auto_giao_cho_lop")," "),t.xp6(6),t.hij(" ",t.lcZ(138,79,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",n.form)("objs",n.classroomObjs)("permissionName",n.permissionTypes.homework),t.xp6(2),t.Q6J("config",t.VKq(89,Ft,t.lcZ(143,81,"")))("scrollIndicators",!0),t.xp6(2),t.Q6J("form",n.form)("objs",n.classroomObjs)("homeworkObj",void 0)("permissionName",n.permissionTypes.homework),t.xp6(1),t.Q6J("ngIf",n.form.controls.classroomIds.errors),t.xp6(3),t.Q6J("disabled",n.form.invalid||n.checkDeadLineValid(n.form.controls.homeworkStartDate.value,n.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(150,83,"lang_auto_luu_nhap")," "),t.xp6(2),t.Q6J("disabled",n.form.invalid||n.checkDeadLineValid(n.form.controls.homeworkStartDate.value,n.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(153,85,"lang_auto_xuat_ban")," ")}}let Gt=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l,c,h,w,b,u,f,k){super(n),this.dialog=e,this.activeRoute=o,this.commonService=n,this.fb=s,this.homeworkService=a,this.classroomService=l,this.apiUploadService=c,this.zipdataService=h,this.timeService=w,this.userService=b,this.browserStorageService=u,this.sEAztClassroomCheckboxService=f,this.uploadImageOfHomeworkService=k,this.form=new p.nJ({}),this.permissionTypes=ct.$,this.formHomework={files:[],content:""},this.classroomObjs=[],this.prevData="",this.cateId="",this.listIds="",this.backToLink="",this.uploadProgress=-1,this.loadingUpload=!1,this.homeWorkContent="",this.initDataEditor={}}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}checkDeadLineValid(e,o){return""!=e&&""!=o?this.timeService.getDiffFromTwoDate(o,e):0}onFileSelected(e){let n=e.target,s=n.files,a=!!s&&s[0];0!=a&&((0,K.C0)(a.type)?(0,K.ml)(a.type)?this.showErrorSnack("lang_auto_file_gap_loi: "+a.name+"lang_auto__kieu: "+a.type+"lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,K.hv)(a).then(l=>{this.apiUploadService.uploadToCdnForHomework(l).subscribe(c=>{var h;c.type!=$.dt.UploadProgress&&(1==c.success?(this.formHomework.files&&!Array.isArray(this.formHomework.files)&&(this.formHomework.files=[]),null===(h=this.formHomework.files)||void 0===h||h.push(Object.assign({},c.data)),this.loadingUpload=!1,this.uploadProgress=-1):(this.loadingUpload=!1,this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi[SPLIT_LANG] [SPLIT_LANG]"+c.message)))})})):this.showErrorSnack("lang_cms_add_homework_not_support_file_upload")),n.files=null}onShowFile(e,o){let n=Object.assign(Object.assign({},e),{index:o});this.dialog.open(jt.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:n}})}saveHomework(e){var o;this.initStatusObj(),this.homeWorkContent=null!==(o=this.formHomework.content)&&void 0!==o?o:"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(n=>{null==n.errorMessage?(this.homeWorkContent=n.content,this.callApiToSaveHomework(e)):(this.showErrorSnack(n.errorMessage),this.stopStatusObj())})}callApiToSaveHomework(e){let o=this.commonService.getFormObj(this.form);o.homeworkStartDate=""===o.homeworkStartDate||null===o.homeworkStartDate?null:(0,A.p6)(o.homeworkStartDate,"yyyy-MM-ddTHH:mm:00","en_vn"),o.homeworkDeadline=""===o.homeworkDeadline||null===o.homeworkDeadline?null:(0,A.p6)(o.homeworkDeadline,"yyyy-MM-ddTHH:mm:00","en_vn"),o.mustVerified=1!=o.mustVerified?0:1,o.whenShowAnswer=1!=o.whenShowAnswer?0:1,this.homeWorkContent=this.zipdataService.convertContentGzip(this.homeWorkContent);let n=this.userService.getUserObj(),s=JSON.stringify({type:"homework",id:0,user:n.id}),a=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,ct.$.homework);const l=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,a,o.classroomIds);let c={name:o.homeworkName,content:this.homeWorkContent,startDate:o.homeworkStartDate,deadline:o.homeworkDeadline,testbankExams:"",files:JSON.stringify(this.formHomework.files),mustVerified:o.mustVerified,whenShowAnswer:o.whenShowAnswer,isPublished:e,categoryId:this.cateId?Number(this.cateId):void 0,classroomIds:l};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(c,s).subscribe(h=>{var w,b,u,f,k;if(1==h.success){if(e){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);let j=[];if(null!==(w=h.data)&&void 0!==w&&w.objs)for(let S=0;S<h.data.objs.length;S++)j.push(null===(b=h.data)||void 0===b?void 0:b.objs[S].hashId);this.listIds=JSON.stringify(j);let C=`/admin/homework/add-new-homework/${null!==(u=this.cateId)&&void 0!==u?u:0}?backto=`+this.backToLink;this.commonService.myNavigationWithQueryString("/admin/testbank/publish-document/1/"+(null!==(f=this.cateId)&&void 0!==f?f:0)+"/"+this.listIds,"?backto="+encodeURIComponent(C))}else this.commonService.myNavigation(this.backToLink?this.backToLink:"/admin/testbank/document-management/1/0/1"),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(null!==(k=h.message)&&void 0!==k?k:"",!0)}))}getHomework(){this.subscriptions.add(this.homeworkService.apiHomeworkGetObjGet("add_new").subscribe(e=>{var o,n,s;1==e.success?(this.classroomObjs=null!==(n=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.classroomObjs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"",!0)}))}checkModeUiEditor(e){this.initDataEditor="dark"==e?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}ngOnChanges(){var e;let o=""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light";this.checkModeUiEditor(o)}ngOnInit(){var e;this.initStatusObj();let o=""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light";this.checkModeUiEditor(o),(0,lt.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var n,s;this.backToLink=null!==(n=this.commonService.getMyQueryParam("backto"))&&void 0!==n?n:"",this.cateId=null!==(s=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==s?s:"",this.getHomework()}),this.form=this.fb.group({homeworkName:new p.p4("",[p.kI.required,p.kI.maxLength(180),Mt._.noWhiteSpace]),homeworkStartDate:new p.p4(""),homeworkDeadline:new p.p4(""),mustVerified:new p.p4("0"),whenShowAnswer:new p.p4("0"),classroomIds:this.fb.array([]),whoAllow:new p.p4("2")},{validators:[At.c.checkboxValidatorWithoutWhoAllow]}),this.form.valueChanges.subscribe(n=>{let s=JSON.stringify(n);s!=this.prevData&&(this.prevData=s,this.form.patchValue(n))}),this.commonService.translateMetaData({title:"lang_cms_homework_add_exercise_title",description:"lang_cms_homework_add_exercise_description",image:"lang_cms_test_image"})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.uw),t.Y36(T.gz),t.Y36(J.v),t.Y36(p.QS),t.Y36(Zt.L),t.Y36(X.um),t.Y36(tt.$),t.Y36(G.n),t.Y36(dt.O),t.Y36(Tt.K),t.Y36(Pt.z),t.Y36(It.L),t.Y36(Dt.J))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-home-work"]],features:[t._Bn([{provide:R.fM,useClass:St.HF,deps:[rt.Ad,yt.o8]},{provide:R.ab,useValue:Ct.O}]),t.qOj,t.TTD],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text","placeholder","Nh\u1eadp t\xean...",1,"form-control"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["mat-icon-button","","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],["startTime",""],["matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["endTime",""],[1,"col-span-6","md:col-span-2"],[1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],[1,"grid","grid-cols-12","mt-4"],[1,"text-md","font-medium"],[1,"col-span-12","lg:col-span-12","mt-3"],[1,"col-md-12"],["type","file","name","fileHomework",2,"display","none",3,"ngModelOptions","change"],["formChoseFile",""],[1,"btn","btn-sm","btn-primary-soft",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["class","flex justify-center my-2",4,"ngIf"],[1,"text-slate-600","text-xs","mt-2","mb-2"],["class","flex items-center mt-3 mb-3",4,"ngFor","ngForOf"],["apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"ngModel","ngModelOptions","init","ngModelChange"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified","value","0",1,"form-check-input"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified","value","1",1,"form-check-input"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","mt-4","intro-y"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],[3,"config","scrollIndicators"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"my-5"],[1,"text-right"],[1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"],[1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"flex","justify-center","my-2"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-6","h-6"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"flex","items-center","mt-3","mb-3"],[1,"text-slate-600","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[3,"click"],[1,"text-slate-600",3,"title"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"]],template:function(e,o){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Lt,1,0,"azt-loading-effect",1),t.YNc(2,Rt,154,91,"ng-template",null,2,t.W1O),t.qZA()),2&e){const n=t.MAs(3);t.Q6J("headerBackTolink","/admin/testbank/document-management/1/0/1"),t.xp6(1),t.Q6J("ngIf",1==o.statusObj.loading)("ngIfElse",n)}},dependencies:[A.sg,A.O5,q.Vv,et.lW,ot.KE,ot.R9,Nt.Nt,nt.gM,R.AB,R.g2,z.PG,p._Y,p.Fj,p._,p.JJ,p.JL,p.On,p.sg,p.u,p.CE,Y.Q,W.M,Ht.o,Jt.g,it._,I.bT,I.bd],encapsulation:2}),i})();var B=m(24096),Wt=m(43767),U=m(25245),Vt=m(74107),$t=m(63910);function Kt(i,r){if(1&i&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&i){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function Xt(i,r){1&i&&t._UZ(0,"azt-loading-effect")}function te(i,r){1&i&&(t.TgZ(0,"div",18)(1,"span",19),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&i&&(t.xp6(2),t.hij("",t.lcZ(3,1,"lang_homework_content_store_not_found_search"),"!"))}function ee(i,r){1&i&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_content_store_free")))}function oe(i,r){if(1&i&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"number"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e.amount)," Azo")}}function ne(i,r){1&i&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_content_store_bought")))}function ie(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.downloadFrontFileContent(n.id?n.id:0))}),t.TgZ(1,"mat-icon",37),t._uU(2,"save_alt"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_homework_content_store_download")," "))}function se(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.openBuyContentDialog(n,s.userObj&&s.userObj.amount?s.userObj.amount:0))}),t.TgZ(1,"mat-icon",37),t._uU(2,"shopping_cart"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_buttom_buy")," "))}function ae(i,r){if(1&i&&(t.TgZ(0,"div",22)(1,"div",23),t._UZ(2,"img",24),t.ALo(3,"mycdn"),t.TgZ(4,"div",25)(5,"p",26),t._uU(6),t.qZA(),t.TgZ(7,"div",27),t.YNc(8,ee,3,3,"div",28),t.YNc(9,oe,3,3,"div",29),t.YNc(10,ne,3,3,"div",30),t.YNc(11,ie,5,3,"a",31),t.YNc(12,se,5,3,"a",32),t.qZA()()()()),2&i){const e=r.$implicit;t.xp6(2),t.s9C("src",t.lcZ(3,7,e.thumb),t.LSH),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",0==e.amount),t.xp6(1),t.Q6J("ngIf",0!=e.amount&&-1!=e.amount),t.xp6(1),t.Q6J("ngIf",-1==e.amount),t.xp6(1),t.Q6J("ngIf",0==e.amount||-1==e.amount),t.xp6(1),t.Q6J("ngIf",(e&&e.amount?e.amount:0)>0)}}function re(i,r){if(1&i&&(t.TgZ(0,"div",20),t.YNc(1,ae,13,9,"div",21),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.objs)}}function le(i,r){if(1&i&&(t.YNc(0,te,4,3,"div",16),t.YNc(1,re,2,1,"ng-template",null,17,t.W1O)),2&i){const e=t.MAs(2),o=t.oxw();t.Q6J("ngIf",o.isNullData)("ngIfElse",e)}}function ce(i,r){if(1&i&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p")(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"span",14),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"span",15),t._uU(11),t.ALo(12,"number"),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"lang_homework_content_store_definitely_want_to_buy")),t.xp6(4),t.hij(" ",e.content.name,""),t.xp6(2),t.hij(" ",t.lcZ(9,7,"lang_homework_content_store_with_price")," "),t.xp6(3),t.hij("",t.lcZ(12,9,e.content.amount)," Azo"),t.xp6(2),t.hij(" ",t.lcZ(14,11,"lang_homework_content_store_not"),"?")}}function de(i,r){if(1&i&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p")(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"span",14),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"span",15),t._uU(11),t.ALo(12,"number"),t.qZA()()()),2&i){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_homework_content_store_not_enough_azo")),t.xp6(4),t.hij(" ",e.content.name,""),t.xp6(2),t.hij(" ",t.lcZ(9,6,"lang_homework_content_store_with_price")," "),t.xp6(3),t.hij("",t.lcZ(12,8,e.content.amount)," Azo")}}function me(i,r){1&i&&(t.TgZ(0,"div",4)(1,"span",16),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_homework_content_store_please"),"!"))}function he(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.buyContent())}),t.TgZ(1,"mat-icon",18),t._uU(2,"shopping_cart"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_buttom_buy")," "))}function ue(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.gotoPack())}),t.TgZ(1,"mat-icon",18),t._uU(2,"account_balance_wallet"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&i&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_homework_content_store_recharge")," "))}let ge=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l){super(o),this.activeRoute=e,this.commonService=o,this.userInfoService=n,this.frontFileContentService=s,this.formBuilder=a,this.dialog=l,this.options={path:"https://assets8.lottiefiles.com/packages/lf20_eebdoe5f.json"},this.isNullData=!1,this.form=new p.nJ({}),this.subscriptions=new B.w,this.objs=[],this.categories=[],this.userObj={},this.selectedValue=""}getData(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(e=>{var o,n,s;1==e.success?(this.objs=null!==(n=null===(o=e.data)||void 0===o?void 0:o.objs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"")}))}getInfo(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoInfoGet().subscribe(e=>{var o,n;1==e.success?(this.userObj=null!==(o=e.data)&&void 0!==o?o:{},this.successStatusObj()):this.errorStatusObj(null!==(n=e.message)&&void 0!==n?n:"")}))}getCategories(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetCategoriesObjsGet().subscribe(e=>{var o,n,s;1==e.success?(this.categories=null!==(n=null===(o=e.data)||void 0===o?void 0:o.objs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"")}))}openBuyContentDialog(e,o){this.openDialog(!(e.amount&&e.amount>o),e,o)}openDialog(e,o,n){this.dialog.open(_e,{width:"380px",panelClass:"buyContentDialogBox",data:{status:e,content:o,userAmount:n}}).afterClosed().subscribe(a=>{})}selectValue(e){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(void 0,e).subscribe(o=>{var n,s,a,l,c;1==o.success?(null===(n=o.data)||void 0===n?void 0:n.objs)&&(null===(s=o.data)||void 0===s?void 0:s.objs.length)>0?(this.isNullData=!1,this.objs=null!==(l=null===(a=o.data)||void 0===a?void 0:a.objs)&&void 0!==l?l:new Array,this.successStatusObj()):(this.isNullData=!0,this.stopStatusObj()):this.errorStatusObj(null!==(c=o.message)&&void 0!==c?c:"")}))}onSearch(){var e=this.commonService.getFormObj(this.form);this.initStatusObj(),""==e.searchContent?(this.isNullData=!1,this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(o=>{var n,s,a;1==o.success?(this.objs=null!==(s=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==s?s:new Array,this.successStatusObj()):this.errorStatusObj(null!==(a=o.message)&&void 0!==a?a:"")}))):this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(e.searchContent).subscribe(o=>{var n,s,a,l,c;1==o.success?((null===(n=o.data)||void 0===n?void 0:n.objs)&&0==(null===(s=o.data)||void 0===s?void 0:s.objs.length)?this.isNullData=!0:this.objs=null!==(l=null===(a=o.data)||void 0===a?void 0:a.objs)&&void 0!==l?l:new Array,this.successStatusObj()):this.errorStatusObj(null!==(c=o.message)&&void 0!==c?c:"")}))}downloadFrontFileContent(e){this.frontFileContentService.apiFrontFileContentGetFileLinkGet(e).subscribe(o=>{var n,s;if(1==o.success){var a=document.createElement("a");document.body.appendChild(a),a.href=null!==(s=null===(n=o.data)||void 0===n?void 0:n.link)&&void 0!==s?s:"",a.click()}else this.showErrorSnack("lang_cms_content_store_download_fail")})}ngOnInit(){(0,lt.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([e,o])=>{this.getData(),this.getInfo(),this.getCategories()}),this.form=this.formBuilder.group({searchContent:new p.p4("",p.kI.required)}),this.commonService.translateMetaData({title:"lang_cms_homework_content_store_title",description:"lang_cms_homework_content_store_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngOnDestroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.gz),t.Y36(J.v),t.Y36(X.$C),t.Y36(Wt.c),t.Y36(p.QS),t.Y36(Z.uw))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-store"]],features:[t.qOj],decls:21,vars:14,consts:[[3,"headerTitle","headerBackTolink"],[1,"container-fluid","component-wrap","W1200","m-auto","mt-3","pb-mb-80","pb-4"],[3,"formGroup"],[1,"flex",2,"justify-content","space-between"],[2,"width","60%","margin-top","5px"],[1,"search-bar","form-group"],[1,"input-group-append"],["type","text","formControlName","searchContent",1,"form-control",3,"placeholder","keyup.enter"],["id","basic-addon2",1,"btn","btn-primary",3,"click"],[1,"content-store-select",2,"width","38%"],["appearance","fill"],["name","category",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"value"],["class","text-center mt-3 mb-3",4,"ngIf","ngIfElse"],["HasData",""],[1,"text-center","mt-3","mb-3"],[1,"h3"],[1,"grid","grid-cols-12","gap-5","mt-2"],["class","box col-span-12 md:col-span-4 sm:col-span-6 mb-2","style","margin: auto;",4,"ngFor","ngForOf"],[1,"box","col-span-12","md:col-span-4","sm:col-span-6","mb-2",2,"margin","auto"],[1,"card"],["alt","thumbnail",1,"card-img-top",2,"width","80vw",3,"src"],[1,"card-body"],[1,"truncate","p-2","card-text"],[1,"actionZone","p-2"],["class","azo-price text-warning",4,"ngIf"],["class","azo-price text-danger",4,"ngIf"],["class","azo-price ",4,"ngIf"],["class","actionBtn clickable",3,"click",4,"ngIf"],["class","actionBtn","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"azo-price","text-warning"],[1,"azo-price","text-danger"],[1,"azo-price"],[1,"actionBtn","clickable",3,"click"],[2,"vertical-align","sub"],[1,"actionBtn",2,"cursor","pointer",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("keyup.enter",function(){return o.onSearch()}),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return o.onSearch()}),t.TgZ(11,"mat-icon"),t._uU(12,"search"),t.qZA()()()()(),t.TgZ(13,"div",9)(14,"mat-form-field",10)(15,"mat-select",11),t.NdJ("selectionChange",function(s){return o.selectValue(s.value)}),t.ALo(16,"mytranslate"),t.YNc(17,Kt,2,2,"mat-option",12),t.qZA()()()()(),t.YNc(18,Xt,1,0,"azt-loading-effect",13),t.YNc(19,le,3,2,"ng-template",null,14,t.W1O),t.qZA()()),2&e){const n=t.MAs(20);t.Q6J("headerTitle",t.lcZ(1,8,"lang_homework_content_store_content_bank"))("headerBackTolink","/admin/dashboard"),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(5),t.s9C("placeholder",t.lcZ(9,10,"lang_homework_content_store_search")),t.xp6(7),t.s9C("placeholder",t.lcZ(16,12,"lang_homework_content_store_all")),t.xp6(2),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",n)}},dependencies:[A.sg,A.O5,rt.ey,U.Hw,ot.KE,Vt.gD,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Y.Q,W.M,it._,A.JJ,I.bT,I.GT],styles:[".dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;border-radius:5px}.input-group-append[_ngcontent-%COMP%]{display:flex}.border-test[_ngcontent-%COMP%]{border:1px solid red;min-height:50px}.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:500;font-size:1.2rem}.content-store-select[_ngcontent-%COMP%]{margin-top:5px}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:245px!important}.content-header[_ngcontent-%COMP%]{background:inherit;background-color:#0089a7;padding:20px 0}.user_amount[_ngcontent-%COMP%]{background:inherit;background-color:#009cbe;border:none;border-radius:5px;padding:10px;box-shadow:none}.user_amount[_ngcontent-%COMP%]:hover{text-decoration:none}.mat-card-avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;flex-shrink:0;object-fit:cover}@media (max-width: 992px){.dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;margin-top:-15px;margin-left:-15px;margin-right:-15px;border-radius:0}}.actionZone[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  .mat-form-field-underline{position:initial!important}@media (max-width: 768px){.card-text[_ngcontent-%COMP%]{display:block!important;max-width:120px}.header-col-center[_ngcontent-%COMP%]{text-align:center!important;display:block!important}.header-col-center[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;margin-bottom:10px!important;text-align:center!important;display:inline-flex!important}.user_amount[_ngcontent-%COMP%]{margin-left:0!important;margin-bottom:10px!important}.content-header[_ngcontent-%COMP%]{padding:20px 0 0}}"]}),i})(),_e=(()=>{class i extends H.Q{constructor(e,o,n,s){super(n),this.dialogRef=e,this.paymentService=o,this.commonService=n,this.data=s,this.subscriptions=new B.w,this.content={}}getData(){this.initStatusObj(),this.data.content?(this.content=this.data.content,this.successStatusObj()):this.errorStatusObj("lang_auto_khong_tai_duoc_du_lieu")}buyContent(){this.initStatusObj(),this.subscriptions.add(this.paymentService.apiPaymentBuyFileContentByAzoPost(this.content.id).subscribe(e=>{var o;1==e.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_ban_da_mua_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3)):(this.errorStatusObj(null!==(o=e.message)&&void 0!==o?o:"",!0),this.showErrorSnack("lang_auto_thanh_toan_khong_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3))}))}gotoPack(){this.onNoClick(),this.commonService.myNavigation("/payment/azo-pack")}ngOnInit(){this.getData(),super.ngOnInit()}onNoClick(){this.dialogRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngOnDestroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36($t.t),t.Y36(J.v),t.Y36(Z.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["buy-content-dialog"]],features:[t.qOj],decls:21,vars:16,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"h5"],["class","text-left","style","border: 1px dashed red; padding: 10px 5px; border-radius: 5px;",4,"ngIf"],["class","text-center",4,"ngIf"],["mat-dialog-actions","",1,"float-right"],[1,"azt-block-button"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger"],[1,"h5","mt-1"],[1,"text-danger"],[1,"h6","mt-2","mb-1"],[1,"btn","btn-primary",3,"click"],[2,"font-size","23px","vertical-align","sub"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"..."),t.qZA()()()(),t.TgZ(5,"div",0)(6,"div",4)(7,"p",5),t._uU(8),t.ALo(9,"mytranslate"),t.ALo(10,"number"),t.qZA()(),t.YNc(11,ce,15,13,"div",6),t.YNc(12,de,13,10,"div",6),t.YNc(13,me,4,3,"div",7),t.qZA(),t.TgZ(14,"div",8)(15,"div",9),t.YNc(16,he,5,3,"button",10),t.YNc(17,ue,5,3,"button",10),t.qZA(),t.TgZ(18,"button",11),t.NdJ("click",function(){return o.onNoClick()}),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()()),2&e&&(t.Q6J("hidden",!o.statusObj.loading),t.xp6(5),t.Q6J("hidden",o.statusObj.loading),t.xp6(3),t.AsE("",t.lcZ(9,10,"lang_homework_content_store_having")," ",t.lcZ(10,12,o.data.userAmount)," Azo"),t.xp6(3),t.Q6J("ngIf",o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(3),t.Q6J("ngIf",o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(2),t.Oqu(t.lcZ(20,14,"lang_buttom_cancel")))},dependencies:[A.O5,Z.H8,U.Hw,A.JJ,I.bT],encapsulation:2}),i})();var pe=m(70655),fe=m(94327),ht=m(25650),V=m(37234),ve=m(296),be=m(16031),we=m(20814),st=m(15043),ke=m(35191),xe=m(1643),ut=m(37104),Oe=m(77446);function ye(i,r){1&i&&t._UZ(0,"azt-loading-effect")}function je(i,r){1&i&&t._UZ(0,"span",31)}function Ce(i,r){if(1&i&&(t.TgZ(0,"div",11),t.YNc(1,je,1,0,"span",30),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.countDonePdf<((null==e.curExportArr?null:e.curExportArr.length)||-1)),t.xp6(1),t.lnq(" ",t.lcZ(3,4,"lang_homework_export_homework_request"),"",e.countDonePdf," / ",null==e.curExportArr?null:e.curExportArr.length," ")}}function Se(i,r){if(1&i&&(t.TgZ(0,"div",11)(1,"mat-icon",32),t._uU(2," check_circle "),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&i){const e=t.oxw(4);let o;t.xp6(3),t.lnq(" ",t.lcZ(4,3,"lang_homework_export_homework_complete")," ",e.countDonePdf," / ",null!==(o=null==e.curExportArr?null:e.curExportArr.length)&&void 0!==o?o:0," ")}}const Ae=function(){return{fontFamily:"font_chu_dam"}};function Me(i,r){if(1&i&&(t.TgZ(0,"div",33)(1,"span",34),t._UZ(2,"azt-check-mark",35),t.qZA(),t.TgZ(3,"span",28),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&i){const e=t.oxw(4);t.Q6J("ngClass",e.curAnswer.resultParse.hideMark?"":"display")("hidden",e.curAnswer.resultParse.hideMark),t.xp6(1),t.Q6J("ngStyle",t.DdM(7,Ae)),t.xp6(1),t.Q6J("mark",e.curAnswer.resultParse.point),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_point"))}}const Ze=function(i){return{"font-family":i}};function Te(i,r){if(1&i&&t._UZ(0,"p",36),2&i){const e=t.oxw(4);t.Q6J("ngStyle",t.VKq(2,Ze,null!=e.curAnswer.resultParse&&null!=e.curAnswer.resultParse.staticTextConfigParse&&e.curAnswer.resultParse.staticTextConfigParse.txtCommentFont?null==e.curAnswer.resultParse||null==e.curAnswer.resultParse.staticTextConfigParse?null:e.curAnswer.resultParse.staticTextConfigParse.txtCommentFont:"font_chu_dep"))("innerHtml",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.comment,t.oJD)}}function Pe(i,r){if(1&i&&(t.ynx(0),t._UZ(1,"img",39),t.BQk()),2&i){const e=r.$implicit,o=r.index,n=t.oxw(5);t.xp6(1),t.s9C("id","imgEmoji_"+o),t.s9C("src",n.isBase64ImageToExport?e:n.linkCdnGitHub+e,t.LSH)}}function Ie(i,r){if(1&i&&(t.TgZ(0,"div",37),t.YNc(1,Pe,2,2,"ng-container",38),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.commentEmoji)}}const De=function(){return{}};function Ne(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"h1",10),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",11),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"div",11)(12,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.openDialog(n.submitedStudents))}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.YNc(15,Ce,4,6,"div",13),t.YNc(16,Se,5,5,"div",13),t.TgZ(17,"div",14)(18,"div",15)(19,"h2",16)(20,"span"),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",17)(24,"div",18)(25,"h3",19),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"h3",19),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",20)(32,"h3",19),t._uU(33),t.ALo(34,"mytranslate"),t.qZA()()(),t.TgZ(35,"div",21)(36,"div",22),t.YNc(37,Me,6,8,"div",23),t.TgZ(38,"div",24)(39,"div",25),t.YNc(40,Te,1,4,"p",26),t.YNc(41,Ie,2,1,"div",27),t.qZA(),t.TgZ(42,"span",28),t._uU(43),t.ALo(44,"mytranslate"),t.qZA()()()()(),t._UZ(45,"br")(46,"azt-export-essay-template",29),t.ALo(47,"mytranslate"),t.qZA()()()()()()}if(2&i){const e=t.oxw(3);let o;t.xp6(6),t.Oqu(t.lcZ(7,21,"lang_homework_export_homework_export_pdf")),t.xp6(3),t.AsE(" ",t.lcZ(10,23,"lang_homework_export_homework_number_student_dotted"),": ",e.submitedStudents.length," "),t.xp6(3),t.Q6J("disabled",e.loadingExportBtn),t.xp6(1),t.hij(" ",t.lcZ(14,25,"lang_homework_export_homework_continue")," "),t.xp6(2),t.Q6J("ngIf",e.isProcessingPdf),t.xp6(1),t.Q6J("ngIf",((null==e.curExportArr?null:e.curExportArr.length)||-1)>0&&e.countDonePdf===(null!==(o=null==e.curExportArr?null:e.curExportArr.length)&&void 0!==o?o:0)),t.xp6(5),t.AsE("",t.lcZ(22,27,"lang_first_and_last_name"),": ",e.curAnswer.fullName,""),t.xp6(5),t.AsE("",t.lcZ(27,29,"lang_homework_export_homework_class"),": ",null==e.data.classroomObj?null:e.data.classroomObj.name,""),t.xp6(3),t.AsE("",t.lcZ(30,31,"lang_homework_export_homework_home_work"),": ",null==e.data.homeworkObj?null:e.data.homeworkObj.name,""),t.xp6(4),t.AsE("",t.lcZ(34,33,"lang_homework_export_homework_code"),": ",e.curAnswer.id,""),t.xp6(4),t.Q6J("ngIf",e.curAnswer.resultParse),t.xp6(3),t.Q6J("ngIf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.comment),t.xp6(1),t.Q6J("ngIf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.commentEmoji),t.xp6(2),t.Oqu(t.lcZ(44,35,"lang_homework_export_homework_comment_of_teacher")),t.xp6(3),t.Q6J("title",t.lcZ(47,37,"lang_homework_export_homework_assignment"))("result",e.curAnswer.resultParse||t.DdM(39,De))}}function He(i,r){1&i&&(t.TgZ(0,"div",40)(1,"div",41),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_homework_export_homework_request_marking")))}function Je(i,r){if(1&i&&(t.YNc(0,Ne,48,40,"div",3),t.YNc(1,He,4,3,"ng-template",null,4,t.W1O)),2&i){const e=t.MAs(2),o=t.oxw(2);t.Q6J("ngIf",o.submitedStudents.length>0)("ngIfElse",e)}}function Le(i,r){if(1&i&&(t.ynx(0),t.YNc(1,ye,1,0,"azt-loading-effect",0),t.YNc(2,Je,3,2,"ng-template",null,2,t.W1O),t.BQk()),2&i){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",e)}}function Ue(i,r){1&i&&(t.TgZ(0,"div",42),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_export_homework_request_browser")))}function Ee(i,r){if(1&i&&(t.TgZ(0,"mat-checkbox",12),t._uU(1),t.qZA()),2&i){const e=r.index,o=t.oxw();t.Q6J("checked",o.form.value.exports[e])("formControlName",e),t.xp6(1),t.AsE(" ",e+1,". ",o.data.resultsArr[e].fullName," ")}}const qe=function(i){return{selects:i}};let Ye=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l,c,h,w,b,u,f){super(s),this.cdr=e,this.answerService=o,this.dialog=n,this.commonService=s,this.activeRoute=a,this.exportPdfConvertDataService=l,this.newPdfExportService=c,this.exportPdfUtilsService=h,this.zipdataService=w,this.cdnService=b,this.timeService=u,this.homeworkExamService=f,this.folderName="results",this.homeworkHashId="",this.homeworkId="",this.countDonePdf=0,this.isProcessingPdf=!1,this.data={},this.curAnswer={},this.submitedStudents=[],this.myZip=new ht,this.linkCdnGitHub="https://azota889.github.io/storage_public/mnote/",this.isBase64ImageToExport=!1,this.loadingExportBtn=!1}askBeforeCloseWindow(e){return!this.isProcessingPdf||(e.returnValue=!1)}openDialog(e){this.dialog.open(Be,{width:"1100px",data:{resultsArr:e}}).afterClosed().subscribe(n=>{if(n){const s=[];for(let a=0;a<n.selects.length;a++)n.selects[a]&&s.push(e[a]);this.zipAll(s)}})}finalSaveAll(){this.myZip.generateAsync({type:"blob"}).then(e=>{var o,n,s,a;this.countDonePdf++;let l=this.commonService.createFileNameExportFile([null!==(n=null===(o=this.data.classroomObj)||void 0===o?void 0:o.name)&&void 0!==n?n:"",null!==(a=null===(s=this.data.homeworkObj)||void 0===s?void 0:s.name)&&void 0!==a?a:""])+"_homework_result.zip";(0,fe.saveAs)(e,l),console.log("after save"),this.isProcessingPdf=!1,this.cdr.detectChanges()},e=>{console.log(e)})}zipAll(e){var o,n,s,a,l,c;return(0,pe.mG)(this,void 0,void 0,function*(){this.isProcessingPdf=!0,this.loadingExportBtn=!0,document.body.style.overflow="hidden",this.countDonePdf=0,this.curExportArr=e,this.myZip=new ht;for(const b of e){const u=yield this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null===(o=b.answer)||void 0===o?void 0:o.id).toPromise();if(1==u.success){this.zipdataService.convertSubmittedAnswersObj(null===(n=u.data)||void 0===n?void 0:n.answerObj);var h=this.homeworkExamService.parserHomeworkIframeResult(null===(s=u.data)||void 0===s?void 0:s.answerObj);this.curAnswer=h||{},this.curAnswer.fullName=null!==(l=this.commonService.convertVietnameseToEnglish(null!==(a=b.fullName)&&void 0!==a?a:""))&&void 0!==l?l:"",this.curAnswer.resultParse=this.curAnswer.resultParse?yield this.exportPdfConvertDataService.processEssayResultToBase64(this.curAnswer.resultParse):this.curAnswer.resultParse,this.isBase64ImageToExport=!0;try{yield this.exportPdfUtilsService.asyncTimeout(3e3);var w=this.timeService.getCurrentSecond();console.log("Start export for "+this.curAnswer.fullName+": 0 seconds");const f=yield this.newPdfExportService.homeworkToPdf();console.log("End export: "+(this.timeService.getCurrentSecond()-w)+" seconds"),this.myZip.file(`${this.folderName}/${this.commonService.convertVietnameseToEnglish(this.curAnswer.fullName)}_${this.curAnswer.id}.pdf`,f)}catch(f){console.log(f)}this.countDonePdf<e.length-1&&this.countDonePdf++}else this.errorStatusObj(null!==(c=u.message)&&void 0!==c?c:"",!0)}this.finalSaveAll(),document.body.style.overflow="auto",setTimeout(()=>{this.loadingExportBtn=!1},2e3)})}getData(){this.homeworkId?this.answerService.apiAnswerGetStudentsHomeworkGet(parseInt(this.homeworkId,10),this.homeworkHashId).subscribe(e=>{var o,n,s,a,l,c,h,w;1==e.success?(this.zipdataService.convertStudentsHomeworkObj(null===(o=e.data)||void 0===o?void 0:o.studentObjs),this.data=null!==(n=e.data)&&void 0!==n?n:{},this.submitedStudents=e.data&&Array.isArray(null===(s=e.data)||void 0===s?void 0:s.studentObjs)?null===(a=e.data)||void 0===a?void 0:a.studentObjs.filter(b=>b.confirmedAt):new Array,this.submitedStudents.length>0?this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null!==(h=null===(c=null===(l=this.submitedStudents[0])||void 0===l?void 0:l.answer)||void 0===c?void 0:c.id)&&void 0!==h?h:0).subscribe(b=>{var u,f,k;if(1==b.success){this.zipdataService.convertSubmittedAnswersObj(null===(u=b.data)||void 0===u?void 0:u.answerObj);var j=this.homeworkExamService.parserHomeworkIframeResult(null===(f=b.data)||void 0===f?void 0:f.answerObj),C=this.commonService.myClone(j);console.log(C),this.curAnswer=j||{},this.curAnswer.fullName=this.submitedStudents[0].fullName,this.successStatusObj()}else this.errorStatusObj(null!==(k=e.message)&&void 0!==k?k:"",!0)}):this.stopStatusObj()):this.errorStatusObj(null!==(w=e.message)&&void 0!==w?w:"",!0)}):(this.stopStatusObj(),this.showErrorSnack("lang_cms_export_homework_cannot_get_data"))}ngOnInit(){var e,o;if(this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.isSupportedBrowswer=this.exportPdfUtilsService.isSupportedBrowswer(),this.homeworkId=null!==(o=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==o?o:"",this.isSupportedBrowswer){this.initStatusObj();var n=[{source:this.cdnService.convertLinkCdn("azota_assets/js/html2pdf.bundle.js?v=28092021"),name:"html2pdf.bundle.js"}];this.commonService.loadScriptPromises(n).then(()=>{this.commonService.translateMetaData({title:"lang_cms_export_homework_title",description:"lang_cms_export_homework_description",image:"lang_cms_test_image"}),this.getData()})}super.ngOnInit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(V.P),t.Y36(Z.uw),t.Y36(J.v),t.Y36(T.gz),t.Y36(ve.S),t.Y36(be.I),t.Y36(we.V),t.Y36(G.n),t.Y36(st.U),t.Y36(dt.O),t.Y36(ke.j))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-export-homework"]],hostBindings:function(e,o){1&e&&t.NdJ("beforeunload",function(s){return o.askBeforeCloseWindow(s)},!1,t.Jf7)},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notBrowserSupport",""],["doneLoading",""],["id","test_review_container","class","container-fluid mt-2",4,"ngIf","ngIfElse"],["noSubmit",""],["id","test_review_container",1,"container-fluid","mt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px!important","margin","0 auto"],["id","mbTestContent"],[1,"text-center","font-bold","mb-2",2,"font-size","18px"],[1,"buttons-area","mb-3","text-center"],[1,"btn","btn-primary",3,"disabled","click"],["class","buttons-area mb-3 text-center",4,"ngIf"],["id","multipleChoiceWrap",1,"exportPdfModeIndex",2,"padding","30px"],["id","multipleChoiceWrapHeader"],["id","mainTitle",1,"mb-1","text-center","font-bold",2,"font-size","18px"],["id","detailInfo",1,"flex",2,"justify-content","space-between","font-size","16px"],["id","colLeftInfo"],[1,"mb-0"],["id","colRightInfo"],["id","teacherMessage",2,"padding-top","3rem"],[1,"contentNote"],["class","box-point",3,"ngClass","hidden",4,"ngIf"],[1,"box-msg"],[1,"note"],[3,"ngStyle","innerHtml",4,"ngIf"],["class","box-emoji",4,"ngIf"],[1,"cap"],[3,"title","result"],["style","color: darkgrey;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","darkgrey"],[2,"color","green","vertical-align","bottom"],[1,"box-point",3,"ngClass","hidden"],[1,"point",3,"ngStyle"],[3,"mark"],[3,"ngStyle","innerHtml"],[1,"box-emoji"],[4,"ngFor","ngForOf"],["alt","icon-emoji",1,"comment-emoji","img-fluid","mr-2",3,"id","src"],[2,"padding","50px"],[1,"alert","alert-info"],[1,"p-5","text-center","alert","alert-danger"]],template:function(e,o){if(1&e&&(t.YNc(0,Le,4,2,"ng-container",0),t.YNc(1,Ue,3,3,"ng-template",null,1,t.W1O)),2&e){const n=t.MAs(2);t.Q6J("ngIf",o.isSupportedBrowswer)("ngIfElse",n)}},dependencies:[A.mk,A.sg,A.O5,A.PC,U.Hw,Y.Q,xe.p,ut.B,I.bT],styles:["#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrapHeader[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}#unsupportFallback[_ngcontent-%COMP%]{width:750px;height:350px;border:1px solid grey;border-radius:3px;display:flex;align-items:center;justify-content:center}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]{display:flex}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{position:absolute;top:-30px;font-family:font_chu_dep;font-weight:700;font-size:25px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]{width:200px;min-width:200px;min-height:200px;border:2px solid #333;border-right:none;position:relative;display:flex;align-items:center;justify-content:center;padding:15px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]   span.point[_ngcontent-%COMP%]{color:red;font-size:60px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]{border:2px solid #333;padding:15px;position:relative;flex:auto;min-height:200px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{width:100%;height:100%;border:none;color:red;font-size:24px;line-height:1.5}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{left:300px}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px;margin:0 auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:#c9c9c97a;border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}.buttons-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:none!important}.box-emoji[_ngcontent-%COMP%]{margin-top:5px;padding:5px;width:88px;display:flex}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}"]}),i})(),Be=(()=>{class i extends H.Q{constructor(e,o,n,s){super(o),this.dialogRef=e,this.commonService=o,this.fb=n,this.data=s,this.form=new p.nJ({}),this.isSelectAll=new p.p4(!1)}get exportsFormArray(){return this.form.controls.exports}get countSelected(){return this.exportsFormArray.value.filter(e=>!0===e).length}selectAll(){const e=[];this.data.resultsArr.forEach(()=>{e.push(this.isSelectAll.value)}),this.form.controls.exports.setValue(e)}ngOnInit(){this.form=this.fb.group({exports:new p.vC([],ze(1))}),this.data.resultsArr.forEach(()=>{this.exportsFormArray.push(new p.p4(!1))}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36(J.v),t.Y36(p.QS),t.Y36(Z.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["what-export-dialog"]],features:[t.qOj],decls:28,vars:28,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto","text-center"],[1,"clickable","d-flex","align-items-center",2,"font-weight","500"],["color","primary",1,"example-margin",3,"formControl","change"],[3,"formGroup"],["formArrayName","exports","ngFor","",3,"ngForOf"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"disabled","mat-dialog-close"],["color","primary",1,"mr-2","mb-2",3,"checked","formControlName"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",3)(9,"p")(10,"i"),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"span",5)(15,"mat-checkbox",6),t.NdJ("change",function(){return o.selectAll()}),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"form",7),t.YNc(20,Ee,2,4,"ng-template",8),t.qZA()(),t.TgZ(21,"div",9)(22,"button",10),t.NdJ("click",function(){return o.onNoClick()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"button",11),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.hij("",t.lcZ(6,12,"lang_homework_export_homework_select_students_export_pdf"),"!"),t.xp6(6),t.lnq("*** ",t.lcZ(12,14,"lang_homework_export_homework_tutorial")," (",t.lcZ(13,16,"lang_homework_export_homework_choose"),": ",o.countSelected,")"),t.xp6(4),t.Q6J("formControl",o.isSelectAll),t.xp6(1),t.Oqu(o.isSelectAll.value?t.lcZ(17,18,"lang_homework_export_homework_clear_select_all"):t.lcZ(18,20,"lang_homework_export_homework_select_all")),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("ngForOf",o.exportsFormArray.controls),t.xp6(3),t.hij("",t.lcZ(24,22,"lang_buttom_cancel_clear")," "),t.xp6(2),t.Q6J("disabled",!o.form.valid)("mat-dialog-close",t.VKq(26,qe,o.exportsFormArray.value)),t.xp6(1),t.hij("",t.lcZ(27,24,"lang_buttom_agree")," "))},dependencies:[A.sg,Oe.oG,Z.ZT,p._Y,p.JJ,p.JL,p.oH,p.sg,p.u,p.CE,W.M,I.bT],encapsulation:2}),i})();function ze(i=1){return e=>e.controls.map(n=>n.value).reduce((n,s)=>s?n+s:n,0)>=i?null:{required:!0}}let gt=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l){super(a),this.dialogRef=e,this.answerService=o,this.activeRoute=n,this.fb=s,this.commonService=a,this.data=l,this.subscriptions=new B.w,this.form=new p.nJ({}),this.result=!1,this.homeworkHashId=""}getData(){this.initStatusObj(),this.data.status?this.successStatusObj():this.stopStatusObj()}cleanResult(){var e=this.commonService.getFormObj(this.form),o={homeworkHashId:this.data.itemHomework.hashId,id:this.data.ans_id,resendNote:e.reason};this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerResendAnswerPost(o).subscribe(n=>{var s;1==n.success?(this.showSuccessSnack("lang_cms_send_request_success"),this.result=!0,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.data.redirect&&this.commonService.myNavigation("/admin/testbank/homework-results-list/"+this.data.classID+"/"+this.data.itemHomework.id+"/"+this.homeworkHashId),this.successStatusObj()):(this.showErrorSnack("lang_cms_send_request_error"),this.result=!1,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.errorStatusObj(null!==(s=n.message)&&void 0!==s?s:""))}))}ngOnInit(){var e;this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.getData(),this.form=this.fb.group({reason:new p.p4("",p.kI.required)}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}onSubmit(e){this.dialogRef.close(e)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36(X.P6),t.Y36(T.gz),t.Y36(p.QS),t.Y36(J.v),t.Y36(Z.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["clean-result-dialog"]],features:[t.qOj],decls:43,vars:32,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto","text-center"],[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"intro-y",3,"hidden"],["enctype","multipart/form-data",1,"form-horizontal","text-center",3,"formGroup"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger","text-center"],[1,"h5","mb-1"],[1,"text-danger"],[1,"h5","text-danger","mt-1","mb-1"],["type","text","id","reason","formControlName","reason",1,"form-control","mt-2"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"span",8),t._uU(12,"..."),t.qZA()()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"p",12),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"p",13),t._uU(20),t.ALo(21,"mytranslate"),t.TgZ(22,"span",14),t._uU(23),t.qZA(),t._uU(24),t.ALo(25,"mytranslate"),t.TgZ(26,"span",14),t._uU(27),t.ALo(28,"date"),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t._UZ(31,"hr"),t.TgZ(32,"p",15),t._uU(33),t.ALo(34,"mytranslate"),t.qZA(),t._UZ(35,"input",16),t.qZA()()(),t.TgZ(36,"div",17)(37,"button",18),t.NdJ("click",function(){return o.onNoClick()}),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"button",19),t.NdJ("click",function(){return o.cleanResult()}),t._uU(41),t.ALo(42,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,13,"lang_homework_mark_exercise_utils_request_resubmit")),t.xp6(3),t.Q6J("hidden",!o.statusObj.loading),t.xp6(5),t.Q6J("hidden",o.statusObj.loading),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(3),t.hij("(*) ",t.lcZ(18,15,"lang_homework_mark_exercise_utils_note"),":"),t.xp6(3),t.hij("",t.lcZ(21,17,"lang_homework_mark_exercise_utils_request")," "),t.xp6(3),t.hij(" ",o.data.name," "),t.xp6(1),t.hij(" ",t.lcZ(25,19,"lang_homework_mark_exercise_utils_in_homework"),"\xa0"),t.xp6(3),t.Oqu(t.xi3(28,21,o.data.deadline?o.data.deadline:o.data.itemHomework.createdAt,"dd/MM/yyyy")),t.xp6(2),t.hij("\xa0",t.lcZ(30,24,"lang_homework_mark_exercise_utils_will_be_deleted"),"!"),t.xp6(4),t.Oqu(t.lcZ(34,26,"lang_homework_mark_exercise_utils_coment_request_resubmit")),t.xp6(5),t.hij(" ",t.lcZ(39,28,"lang_buttom_cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(42,30,"lang_buttom_confirm")," "))},dependencies:[p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,W.M,A.uU,I.bT],encapsulation:2}),i})(),_t=(()=>{class i extends H.Q{constructor(e,o,n,s){super(n),this.dialogRef=e,this.answerService=o,this.commonService=n,this.data=s,this.success=!1}ngOnInit(){this.success=this.data.status}checkNextAns(){this.dialogRef.close(),this.answerService.apiAnswerGetNextObjByHomeworkGet(this.data.homeworkHashId).subscribe(e=>{var o,n;0!=e.success?(this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+(null===(n=null===(o=e.data)||void 0===o?void 0:o.obj)||void 0===n?void 0:n.id)+"/"+this.data.homeworkHashId,"?backto="+encodeURIComponent(this.data.backToLink)),setTimeout(()=>{document.location.reload()},500)):this.commonService.myNavigation("/admin/testbank/homework-results-list/"+this.data.classID+"/"+this.data.homeWorkID+"/"+this.data.homeworkHashId)})}onNoClick(){this.dialogRef.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.so),t.Y36(V.P),t.Y36(J.v),t.Y36(Z.WI))},i.\u0275cmp=t.Xpm({type:i,selectors:[["notice-dialog"]],features:[t.qOj],decls:22,vars:10,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"mr-1",2,"color","green"],[2,"color","red","font-size","120%","font-weight","500"],[3,"mark"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4)(5,"mat-icon",5),t._uU(6,"check_circle"),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"div",3),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"span",6),t._UZ(14,"azt-check-mark",7),t.qZA()(),t._UZ(15,"br"),t.TgZ(16,"div",8)(17,"button",9),t.NdJ("click",function(){return o.onNoClick()}),t._uU(18,"Ok"),t.qZA(),t.TgZ(19,"button",10),t.NdJ("click",function(){return o.checkNextAns()}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,4,"lang_homework_mark_exercise_utils_mark_success"),""),t.xp6(4),t.hij(" ",t.lcZ(12,6,"lang_homework_mark_exercise_utils_assignment_marking")," "),t.xp6(3),t.Q6J("mark",o.data.score),t.xp6(6),t.Oqu(t.lcZ(21,8,"lang_homework_mark_exercise_utils_mark_continue")))},dependencies:[U.Hw,ut.B,I.bT],styles:["#ok[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}#next[_ngcontent-%COMP%]:hover{background-color:#1e579d!important}"]}),i})();var pt=m(43147),ft=m(15431),vt=m(41752),E=m(92181),bt=m(64123);function Qe(i,r){if(1&i&&(t.TgZ(0,"button",14),t.ALo(1,"mytranslate"),t.TgZ(2,"mat-icon"),t._uU(3,"history"),t.qZA()()),2&i){t.oxw();const e=t.MAs(9);t.s9C("matTooltip",t.lcZ(1,2,"lang_homework_mark_exercise_history_submit")),t.Q6J("matMenuTriggerFor",e)}}function Fe(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.getDataHistory(s.id?s.id.toString():""))}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"date"),t.qZA()(),t.BQk()}if(2&i){const e=r.$implicit,o=r.index;t.xp6(3),t.lnq("",t.lcZ(4,3,"lang_homework_mark_exercise_times")," ",o+1," - ",t.xi3(5,5,e.createdAt,"dd/MM/yyyy HH:mm:ss"),"")}}function Re(i,r){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"azt-create-avatar",16),t.ALo(2,"mytranslate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hYB("matTooltip","",t.lcZ(2,5,"lang_homework_mark_exercise_teacher_mark")," ",": "+e.markedByObj.fullName,""),t.Q6J("nameCreateAvatar",e.markedByObj.fullName)("size",25)("linkAvatar",e.markedByObj.avatar)}}function Ge(i,r){if(1&i&&(t.TgZ(0,"h4",15),t.YNc(1,Re,3,7,"span",12),t._uU(2),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isMarked),t.xp6(1),t.AsE(" ",e.studentObj.fullName,", ",e.classroomObj.name," ")}}function We(i,r){1&i&&(t._UZ(0,"azt-loading-effect",17),t.ALo(1,"mytranslate")),2&i&&t.Q6J("customText",t.lcZ(1,1,"lang_homework_mark_exercise_loading_data_mark"))}function Ve(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",18)(2,"div",19)(3,"div",20),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,e.errorMessage))}}function $e(i,r){if(1&i&&(t.TgZ(0,"div",21),t._UZ(1,"iframe",22),t.ALo(2,"safe"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.iframeSrc),t.uOi)}}let Ke=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l,c,h,w,b){super(s),this.activeRoute=e,this.answerService=o,this.baseApiService=n,this.commonService=s,this.permissionService=a,this.dialog=l,this.cdnService=c,this.zipdataService=h,this.envService=w,this.apiUploadService=b,this.subscriptions=new B.w,this.result={},this.answerId=0,this.homeworkID="",this.historyId="",this.iframeSrc="",this.isMarked=!1,this.jsonData={},this.errorMessage="",this.files=[],this.classID="",this.homeworkObj={},this.studentName="",this.markedByObj={},this.studentObj={},this.classroomObj={},this.score=0,this.mnoteJsonData={},this.pagesCount=0,this.backToLink="",this.hasSendDataToIframe=!1,this.hasLoadedData=!1,this.historyAnswerObjs=[],this.countLoad=1,this.homeworkHashId="",this.useNewDashboard=!1,this.handleIframe=u=>{var f;"MNoteJson"==u.data.cmd&&(this.initStatusObj(),this.mnoteJsonData=u.data.data,this.uploadAll(null!==(f=this.mnoteJsonData.pages)&&void 0!==f?f:[],u.data.data.point)),"MNoteReSubmit"==u.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==u.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,""==this.historyId?this.sendDataToIframe():this.sendDataToIframeHistory()):this.hasSendDataToIframe=!1)}}onPopState(e){this.goBack()}uploadDrawBase64ToCDN(e,o,n){let s=this.baseApiService.dataURItoBlob(e);this.apiUploadService.commonUploadForMarkResult(s,`essay_note_${o}_${this.answerId}.png`,"image/png",1e4).subscribe(a=>{var l,c;a.type!=$.dt.UploadProgress&&(1==a.success?(!(null===(l=this.mnoteJsonData.pages)||void 0===l)&&l[o]&&(this.mnoteJsonData.pages[o].draw=null===(c=a.data)||void 0===c?void 0:c.url),this.pagesCount--,0==this.pagesCount&&this.remark(this.answerId,n,this.mnoteJsonData)):(this.showErrorSnack("lang_cms_cannot_save_data_marked"),this.stopStatusObj()))})}uploadAll(e,o){this.pagesCount=0;for(let n=0;n<e.length;n++)e[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(this.answerId,o,this.mnoteJsonData);else for(let n=0;n<e.length;n++)e[n].draw&&this.uploadDrawBase64ToCDN(e[n].draw,n,o)}reloadPage(){location.reload()}sendDataToIframe(){var e,o,n,s,a,l,c,h,w,b,u,f,k,j,C;const S=document.getElementById("mNote"),O=S?S.contentWindow:null;if(null!==O){let d=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let g=this.commonService.willDeleteParseJson(null!==(o=d.result)&&void 0!==o?o:"");if(null!=g){let x=null!==(s=null===(n=g.pages)||void 0===n?void 0:n.length)&&void 0!==s?s:0;for(let P=0;P<x;P++)!(null===(a=null==g?void 0:g.pages)||void 0===a)&&a[P].backgroundImage&&(g.pages[P].backgroundImage=this.cdnService.getMyCdn(null!==(l=g.pages[P].backgroundImage)&&void 0!==l?l:"")),null!==(c=g.pages)&&void 0!==c&&c[P].draw&&(g.pages[P].draw=this.cdnService.getMyCdn(g.pages[P].draw));g=JSON.stringify(g),d.result=g}let y=this.commonService.willDeleteParseJson(null!==(h=d.files)&&void 0!==h?h:"");if(null!=y){for(let x=0;x<y.length;x++)y[x].url&&(y[x].url=this.cdnService.getMyCdn(y[x].url)),y[x].thumb&&(y[x].thumb=this.cdnService.getMyCdn(y[x].thumb));y=JSON.stringify(y),d.files=y}}let _=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},v=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},D=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},M=this.commonService.myParseJson(null!==(w=d.result)&&void 0!==w?w:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let g=0;g<(null!==(u=null===(b=this.jsonData.pages)||void 0===b?void 0:b.length)&&void 0!==u?u:0);g++)!(null===(f=this.jsonData.pages)||void 0===f)&&f[g].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[g].backgroundImage=this.cdnService.getMyCdn(null!==(k=this.jsonData.pages[g].backgroundImage)&&void 0!==k?k:"")),null!==(j=this.jsonData.pages)&&void 0!==j&&j[g].hasOwnProperty("draw")&&(this.jsonData.pages[g].draw=this.cdnService.getMyCdn(null!==(C=this.jsonData.pages[g].draw)&&void 0!==C?C:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=d,this.jsonData.student_obj=_,this.jsonData.classroom_obj=v,this.jsonData.homework_obj=D,M&&M.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=M.hideMark),O.postMessage(this.jsonData,"*");else{let g=[];this.files.forEach(x=>{g.push({backgroundImage:x.url})});let y={cmd:"initMNote",mode:"edit",pages:g,answer_obj:d,student_obj:_,classroom_obj:v,homework_obj:D};M&&M.hasOwnProperty("hideMark")&&(y.hideMark=M.hideMark),O.postMessage(y,"*")}}}sendDataToIframeHistory(){var e,o,n,s,a,l,c,h,w,b;const u=document.getElementById("mNote");u&&1==this.countLoad&&(u.src+="");const f=u?u.contentWindow:null;if(null!==f){let k=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let d=this.commonService.willDeleteParseJson(null!==(o=k.result)&&void 0!==o?o:"");if(null!=d){for(let v=0;v<d.pages.length;v++)d.pages[v].backgroundImage&&(d.pages[v].backgroundImage=this.cdnService.getMyCdn(d.pages[v].backgroundImage)),d.pages[v].draw&&(d.pages[v].draw=this.cdnService.getMyCdn(d.pages[v].draw));d=JSON.stringify(d),k.result=d}let _=this.commonService.willDeleteParseJson(null!==(n=k.files)&&void 0!==n?n:"");if(null!=_){for(let v=0;v<_.length;v++)_[v].url&&(_[v].url=this.cdnService.getMyCdn(_[v].url)),_[v].thumb&&(_[v].thumb=this.cdnService.getMyCdn(_[v].thumb));_=JSON.stringify(_),k.files=_}}let j=this.studentObj,C=this.classroomObj,S=this.homeworkObj,O=this.commonService.willDeleteParseJson(null!==(s=k.result)&&void 0!==s?s:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let d=0;d<(null!==(l=null===(a=this.jsonData.pages)||void 0===a?void 0:a.length)&&void 0!==l?l:0);d++)!(null===(c=this.jsonData.pages)||void 0===c)&&c[d].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[d].backgroundImage=this.cdnService.getMyCdn(null!==(h=this.jsonData.pages[d].backgroundImage)&&void 0!==h?h:"")),null!==(w=this.jsonData.pages)&&void 0!==w&&w[d].hasOwnProperty("draw")&&(this.jsonData.pages[d].draw=this.cdnService.getMyCdn(null!==(b=this.jsonData.pages[d].draw)&&void 0!==b?b:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=k,this.jsonData.student_obj=j,this.jsonData.classroom_obj=C,this.jsonData.homework_obj=S,O&&O.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=O.hideMark),f.postMessage(this.jsonData,"*");else{let d=[];this.files.forEach(v=>{d.push({backgroundImage:v.url})});let _={cmd:"initMNote",mode:"view",pages:d,answer_obj:k,student_obj:j,classroom_obj:C,homework_obj:S};O&&O.hasOwnProperty("hideMark")&&(_.hideMark=O.hideMark),f.postMessage(_,"*")}}}getHistoryObjs(e){this.initStatusObj(),this.answerService.apiAnswerGetHistoryObjsGet(this.homeworkHashId,e).subscribe(o=>{var n,s,a;1==o.success?this.historyAnswerObjs=null!==(s=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==s?s:new Array:this.errorMessage=null!==(a=o.message)&&void 0!==a?a:"",this.stopStatusObj()})}getDataHistory(e){this.historyId=e,this.errorMessage="",this.countLoad=1,this.answerService.apiAnswerGetHistoryObjGet(this.homeworkHashId,this.answerId,parseInt(e,10)).subscribe(o=>{var n,s,a,l,c,h,w,b,u,f,k,j,C,S,O,d;if(1==o.success){if(this.zipdataService.convertSubmittedAnswersHistoryObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),this.result=null!==(s=o.data)&&void 0!==s?s:{},this.markedByObj=null!==(l=null===(a=o.data)||void 0===a?void 0:a.markedByObj)&&void 0!==l?l:{},this.score=null!==(w=null===(h=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===h?void 0:h.point)&&void 0!==w?w:0,this.files=null!==(k=this.commonService.myParseJson(null!==(f=null===(u=null===(b=o.data)||void 0===b?void 0:b.answerObj)||void 0===u?void 0:u.files)&&void 0!==f?f:""))&&void 0!==k?k:[],null!=this.files)for(let _=0;_<this.files.length;_++)this.files[_].url=this.cdnService.getMyCdn(null!==(C=null===(j=this.files)||void 0===j?void 0:j[_].url)&&void 0!==C?C:""),this.files[_].thumb=this.cdnService.getMyCdn(null!==(O=null===(S=this.files)||void 0===S?void 0:S[_].thumb)&&void 0!==O?O:"");this.handleJsonData(),this.hasLoadedData=!0,1==this.countLoad&&(this.hasSendDataToIframe=!1),0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframeHistory()),this.successStatusObj(),this.countLoad++}else this.errorMessage=null!==(d=o.message)&&void 0!==d?d:"",this.stopStatusObj()})}handleJsonData(){var e,o,n,s,a,l,c;if(this.jsonData={},null!==(o=null===(e=this.result)||void 0===e?void 0:e.answerObj)&&void 0!==o&&o.confirmedAt||null!==(s=null===(n=this.result)||void 0===n?void 0:n.answerObj)&&void 0!==s&&s.result||(this.isMarked=!1),null!==(a=this.result.answerObj)&&void 0!==a&&a.confirmedAt){this.isMarked=!0;var h=this.commonService.myParseJson(null!==(c=null===(l=this.result.answerObj)||void 0===l?void 0:l.result)&&void 0!==c?c:"");h&&(this.jsonData=h,null==this.jsonData&&(this.isMarked=!1))}}getData(e){this.initStatusObj(),this.errorMessage="",this.answerId=e,this.answerService.apiAnswerGetObjGet(this.homeworkHashId,e).subscribe(o=>{var n,s,a,l,c,h,w,b,u,f,k,j,C,S,O,d,_,v,D,M,g,y;if(1==o.success)if(this.zipdataService.convertSubmittedAnswersObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),(null===(s=o.data)||void 0===s?void 0:s.hasOwnProperty("studentObj"))&&null!=(null===(a=o.data)||void 0===a?void 0:a.studentObj)){if(this.result=o.data,this.markedByObj=null!==(l=o.data.markedByObj)&&void 0!==l?l:{},this.score=null!==(w=null===(h=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===h?void 0:h.point)&&void 0!==w?w:0,this.homeworkID=null!==(u=null===(b=o.data.homeworkObj)||void 0===b?void 0:b.id)&&void 0!==u?u:0,this.classID=null!==(k=null===(f=o.data.classroomObj)||void 0===f?void 0:f.id)&&void 0!==k?k:0,this.files=null!==(S=this.commonService.myParseJson(null!==(C=null===(j=o.data.answerObj)||void 0===j?void 0:j.files)&&void 0!==C?C:""))&&void 0!==S?S:[],this.studentObj=o.data.studentObj,this.classroomObj=null!==(O=o.data.classroomObj)&&void 0!==O?O:{},null!=this.files)for(let x=0;x<this.files.length;x++)this.files[x].url=this.cdnService.getMyCdn(null!==(_=null===(d=this.files)||void 0===d?void 0:d[x].url)&&void 0!==_?_:""),this.files[x].thumb=this.cdnService.getMyCdn(null!==(D=null===(v=this.files)||void 0===v?void 0:v[x].thumb)&&void 0!==D?D:"");this.homeworkObj=null!==(M=o.data.homeworkObj)&&void 0!==M?M:{},this.studentName=null!==(g=o.data.studentObj.fullName)&&void 0!==g?g:"",this.handleJsonData(),this.hasLoadedData=!0,0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframe()),this.successStatusObj()}else this.errorMessage="lang_core_not_found_student",this.stopStatusObj();else this.errorMessage=null!==(y=o.message)&&void 0!==y?y:"",this.stopStatusObj()})}openDialog(e,o){this.dialog.open(_t,{width:"280px",autoFocus:!1,data:{score:o,status:e,homeWorkID:this.homeworkID,homeworkHashId:this.homeworkHashId,classID:this.classID,backToLink:this.backToLink}}).afterClosed().subscribe(s=>{})}handleOpenReSubmit(){var e;this.openDialogReSubmit(!0,null!==(e=this.homeworkObj.deadline)&&void 0!==e?e:void 0,this.homeworkObj,this.answerId,this.studentName)}openDialogReSubmit(e,o,n,s,a){this.dialog.open(gt,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:e,deadline:o,itemHomework:n,ans_id:s,name:a,redirect:!0,classID:this.classID}}).afterClosed().subscribe(c=>{})}remark(e,o,n){let s=JSON.stringify({type:"homework",id:this.homeworkObj.id,user:this.homeworkObj.tenantId});if(""==this.historyId)if(1==this.permissionService.hasMarkPointPermission("homework",this.homeworkObj.permissionObj)){let a={id:e,comment:n.comment,hideMark:n.hideMark?1:0,point:o?parseFloat(o.replace(",",".")):0,result:this.zipdataService.convertContentGzip(JSON.stringify(n)),homeworkHashId:this.homeworkHashId};this.answerService.apiAnswerSaveResultPost(a,s).subscribe(l=>{var c,h;1==l.success?(this.openDialog(!0,null===(h=null===(c=l.data)||void 0===c?void 0:c.obj)||void 0===h?void 0:h.point),this.successStatusObj()):(this.stopStatusObj(),this.showErrorSnack("lang_cms_mark_fail"))})}else this.showErrorSnack("lang_cms_no_permission_on_homework"),this.stopStatusObj();else this.stopStatusObj(),this.showErrorSnack("lang_cms_cannot_remark_student_history_result")}goBack(){var e;this.backToLink?this.backToLink.includes("shareType")?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation(this.backToLink):this.commonService.myNavigation(this.useNewDashboard?"/admin/testbank/homework-results-list/"+(null!==(e=this.homeworkObj.categoryId)&&void 0!==e?e:"0")+"/"+this.homeworkID+"/"+this.homeworkObj.hashId:"/admin/testbank/homework-results-list/"+this.classID+"/"+this.homeworkID+"/"+this.homeworkObj.hashId)}ngOnInit(){var e,o,n;this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"";const s=this.commonService.getMyParam(this.activeRoute,"id")?Number(this.commonService.getMyParam(this.activeRoute,"id")):0,a=null!==(o=this.commonService.getMyParam(this.activeRoute,"historyId"))&&void 0!==o?o:"";this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"";let l=this.commonService.getMyQueryParam("backto");this.backToLink=l?l.includes("shareType")?decodeURIComponent(l):l:"",console.log(this.backToLink),this.getData(s),this.getHistoryObjs(s),a&&this.getDataHistory(a),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.goBack(),window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.gz),t.Y36(V.P),t.Y36(pt._),t.Y36(J.v),t.Y36(ft.$),t.Y36(Z.uw),t.Y36(st.U),t.Y36(G.n),t.Y36(vt.D),t.Y36(tt.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mark-exercise-new"]],hostBindings:function(e,o){1&e&&t.NdJ("popstate",function(s){return o.onPopState(s)},!1,t.Jf7)},features:[t.qOj],decls:20,vars:14,consts:[[3,"headerBackTolink"],["id","markContainer",1,"maxW1000"],["id","titleRow"],[1,"block-left"],["mat-button","",3,"title","click"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngFor","ngForOf"],["class","studentInfo","style","padding-right: 10px; color: #fff",4,"ngIf"],[3,"customText",4,"ngIf"],[3,"hidden"],[4,"ngIf"],["class","card-box listPhotos",4,"ngIf"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor"],[1,"studentInfo",2,"padding-right","10px","color","#fff"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[3,"customText"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-icon",4),t.NdJ("click",function(){return o.goBack()}),t.ALo(5,"mytranslate"),t._uU(6,"keyboard_arrow_left"),t.qZA(),t.YNc(7,Qe,4,4,"button",5),t.TgZ(8,"mat-menu",null,6)(10,"button",7),t.NdJ("click",function(){return o.reloadPage()}),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.YNc(14,Fe,6,8,"ng-container",8),t.qZA()(),t.YNc(15,Ge,3,3,"h4",9),t.qZA(),t.YNc(16,We,2,3,"azt-loading-effect",10),t.TgZ(17,"div",11),t.YNc(18,Ve,6,3,"div",12),t.YNc(19,$e,3,3,"div",13),t.qZA()()()),2&e&&(t.Q6J("headerBackTolink",o.backToLink),t.xp6(4),t.s9C("title",t.lcZ(5,10,"lang_buttom_back")),t.xp6(3),t.Q6J("ngIf",null!=o.historyAnswerObjs&&o.historyAnswerObjs.length>0),t.xp6(5),t.Oqu(t.lcZ(13,12,"lang_homework_mark_exercise_last")),t.xp6(2),t.Q6J("ngForOf",o.historyAnswerObjs),t.xp6(1),t.Q6J("ngIf",o.classroomObj),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading),t.xp6(1),t.Q6J("hidden",o.statusObj.loading),t.xp6(1),t.Q6J("ngIf",""!=o.errorMessage),t.xp6(1),t.Q6J("ngIf",""==o.errorMessage))},dependencies:[A.sg,A.O5,et.lW,U.Hw,E.VK,E.OP,E.p6,nt.gM,Y.Q,bt.t,it._,A.uU,I.bT,I.yl],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}  .studentInfo img{display:inline-flex!important}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;position:relative;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}.block-left[_ngcontent-%COMP%]{display:flex;align-items:center}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),i})();function Xe(i,r){if(1&i&&(t.TgZ(0,"button",13),t.ALo(1,"mytranslate"),t.TgZ(2,"mat-icon"),t._uU(3,"history"),t.qZA()()),2&i){t.oxw();const e=t.MAs(8);t.s9C("matTooltip",t.lcZ(1,2,"lang_homework_mark_exercise_history_submit")),t.Q6J("matMenuTriggerFor",e)}}function to(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",6),t.NdJ("click",function(){const s=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.getDataHistory(s.id?s.id.toString():""))}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"date"),t.qZA()(),t.BQk()}if(2&i){const e=r.$implicit,o=r.index;t.xp6(3),t.lnq("",t.lcZ(4,3,"lang_homework_mark_exercise_times")," ",o+1," - ",t.xi3(5,5,e.createdAt,"dd/MM/yyyy HH:mm:ss"),"")}}function eo(i,r){if(1&i&&(t.TgZ(0,"span"),t._UZ(1,"azt-create-avatar",15),t.ALo(2,"mytranslate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hYB("matTooltip","",t.lcZ(2,5,"lang_homework_mark_exercise_teacher_mark")," ",": "+e.markedByObj.fullName,""),t.Q6J("nameCreateAvatar",e.markedByObj.fullName)("size",25)("linkAvatar",e.markedByObj.avatar)}}function oo(i,r){if(1&i&&(t.TgZ(0,"h4",14),t.YNc(1,eo,3,7,"span",11),t._uU(2),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isMarked),t.xp6(1),t.AsE(" ",e.studentObj.fullName,", ",e.classroomObj.name," ")}}function no(i,r){1&i&&(t._UZ(0,"azt-loading-effect",16),t.ALo(1,"mytranslate")),2&i&&t.Q6J("customText",t.lcZ(1,1,"lang_homework_mark_exercise_loading_data_mark"))}function io(i,r){if(1&i&&(t.TgZ(0,"div")(1,"div",17)(2,"div",18)(3,"div",19),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&i){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,e.errorMessage))}}function so(i,r){if(1&i&&(t.TgZ(0,"div",20),t._UZ(1,"iframe",21),t.ALo(2,"safe"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.iframeSrc),t.uOi)}}let ao=(()=>{class i extends H.Q{constructor(e,o,n,s,a,l,c,h,w,b){super(s),this.activeRoute=e,this.answerService=o,this.baseApiService=n,this.commonService=s,this.permissionService=a,this.dialog=l,this.cdnService=c,this.zipdataService=h,this.envService=w,this.apiUploadService=b,this.subscriptions=new B.w,this.result={},this.answerId=0,this.homeworkID="",this.historyId="",this.iframeSrc="",this.isMarked=!1,this.jsonData={},this.errorMessage="",this.files=[],this.classID="",this.homeworkObj={},this.studentName="",this.markedByObj={},this.studentObj={},this.classroomObj={},this.score=0,this.mnoteJsonData={},this.pagesCount=0,this.backToLink="",this.hasSendDataToIframe=!1,this.hasLoadedData=!1,this.historyAnswerObjs=[],this.countLoad=1,this.homeworkHashId="",this.useNewDashboard=!1,this.handleIframe=u=>{var f;"MNoteJson"==u.data.cmd&&(this.initStatusObj(),this.mnoteJsonData=u.data.data,this.uploadAll(null!==(f=this.mnoteJsonData.pages)&&void 0!==f?f:[],u.data.data.point)),"MNoteReSubmit"==u.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==u.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,""==this.historyId?this.sendDataToIframe():this.sendDataToIframeHistory()):this.hasSendDataToIframe=!1)}}onPopState(e){this.goBack()}uploadDrawBase64ToCDN(e,o,n){let s=this.baseApiService.dataURItoBlob(e);this.apiUploadService.commonUploadForMarkResult(s,`essay_note_${o}_${this.answerId}.png`,"image/png",1e4).subscribe(a=>{var l,c;a.type!=$.dt.UploadProgress&&(1==a.success?(!(null===(l=this.mnoteJsonData.pages)||void 0===l)&&l[o]&&(this.mnoteJsonData.pages[o].draw=null===(c=a.data)||void 0===c?void 0:c.url),this.pagesCount--,0==this.pagesCount&&this.remark(this.answerId,n,this.mnoteJsonData)):(this.showErrorSnack("lang_cms_cannot_save_data_marked"),this.stopStatusObj()))})}uploadAll(e,o){this.pagesCount=0;for(let n=0;n<e.length;n++)e[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(this.answerId,o,this.mnoteJsonData);else for(let n=0;n<e.length;n++)e[n].draw&&this.uploadDrawBase64ToCDN(e[n].draw,n,o)}reloadPage(){location.reload()}sendDataToIframe(){var e,o,n,s,a,l,c,h,w,b,u,f,k,j,C;const S=document.getElementById("mNote"),O=S?S.contentWindow:null;if(null!==O){let d=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let g=this.commonService.willDeleteParseJson(null!==(o=d.result)&&void 0!==o?o:"");if(null!=g){let x=null!==(s=null===(n=g.pages)||void 0===n?void 0:n.length)&&void 0!==s?s:0;for(let P=0;P<x;P++)!(null===(a=null==g?void 0:g.pages)||void 0===a)&&a[P].backgroundImage&&(g.pages[P].backgroundImage=this.cdnService.getMyCdn(null!==(l=g.pages[P].backgroundImage)&&void 0!==l?l:"")),null!==(c=g.pages)&&void 0!==c&&c[P].draw&&(g.pages[P].draw=this.cdnService.getMyCdn(g.pages[P].draw));g=JSON.stringify(g),d.result=g}let y=this.commonService.willDeleteParseJson(null!==(h=d.files)&&void 0!==h?h:"");if(null!=y){for(let x=0;x<y.length;x++)y[x].url&&(y[x].url=this.cdnService.getMyCdn(y[x].url)),y[x].thumb&&(y[x].thumb=this.cdnService.getMyCdn(y[x].thumb));y=JSON.stringify(y),d.files=y}}let _=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},v=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},D=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},M=this.commonService.myParseJson(null!==(w=d.result)&&void 0!==w?w:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let g=0;g<(null!==(u=null===(b=this.jsonData.pages)||void 0===b?void 0:b.length)&&void 0!==u?u:0);g++)!(null===(f=this.jsonData.pages)||void 0===f)&&f[g].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[g].backgroundImage=this.cdnService.getMyCdn(null!==(k=this.jsonData.pages[g].backgroundImage)&&void 0!==k?k:"")),null!==(j=this.jsonData.pages)&&void 0!==j&&j[g].hasOwnProperty("draw")&&(this.jsonData.pages[g].draw=this.cdnService.getMyCdn(null!==(C=this.jsonData.pages[g].draw)&&void 0!==C?C:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=d,this.jsonData.student_obj=_,this.jsonData.classroom_obj=v,this.jsonData.homework_obj=D,M&&M.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=M.hideMark),O.postMessage(this.jsonData,"*");else{let g=[];this.files.forEach(x=>{g.push({backgroundImage:x.url})});let y={cmd:"initMNote",mode:"edit",pages:g,answer_obj:d,student_obj:_,classroom_obj:v,homework_obj:D};M&&M.hasOwnProperty("hideMark")&&(y.hideMark=M.hideMark),O.postMessage(y,"*")}}}sendDataToIframeHistory(){var e,o,n,s,a,l,c,h,w,b;const u=document.getElementById("mNote");u&&1==this.countLoad&&(u.src+="");const f=u?u.contentWindow:null;if(null!==f){let k=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let d=this.commonService.willDeleteParseJson(null!==(o=k.result)&&void 0!==o?o:"");if(null!=d){for(let v=0;v<d.pages.length;v++)d.pages[v].backgroundImage&&(d.pages[v].backgroundImage=this.cdnService.getMyCdn(d.pages[v].backgroundImage)),d.pages[v].draw&&(d.pages[v].draw=this.cdnService.getMyCdn(d.pages[v].draw));d=JSON.stringify(d),k.result=d}let _=this.commonService.willDeleteParseJson(null!==(n=k.files)&&void 0!==n?n:"");if(null!=_){for(let v=0;v<_.length;v++)_[v].url&&(_[v].url=this.cdnService.getMyCdn(_[v].url)),_[v].thumb&&(_[v].thumb=this.cdnService.getMyCdn(_[v].thumb));_=JSON.stringify(_),k.files=_}}let j=this.studentObj,C=this.classroomObj,S=this.homeworkObj,O=this.commonService.willDeleteParseJson(null!==(s=k.result)&&void 0!==s?s:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let d=0;d<(null!==(l=null===(a=this.jsonData.pages)||void 0===a?void 0:a.length)&&void 0!==l?l:0);d++)!(null===(c=this.jsonData.pages)||void 0===c)&&c[d].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[d].backgroundImage=this.cdnService.getMyCdn(null!==(h=this.jsonData.pages[d].backgroundImage)&&void 0!==h?h:"")),null!==(w=this.jsonData.pages)&&void 0!==w&&w[d].hasOwnProperty("draw")&&(this.jsonData.pages[d].draw=this.cdnService.getMyCdn(null!==(b=this.jsonData.pages[d].draw)&&void 0!==b?b:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=k,this.jsonData.student_obj=j,this.jsonData.classroom_obj=C,this.jsonData.homework_obj=S,O&&O.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=O.hideMark),f.postMessage(this.jsonData,"*");else{let d=[];this.files.forEach(v=>{d.push({backgroundImage:v.url})});let _={cmd:"initMNote",mode:"view",pages:d,answer_obj:k,student_obj:j,classroom_obj:C,homework_obj:S};O&&O.hasOwnProperty("hideMark")&&(_.hideMark=O.hideMark),f.postMessage(_,"*")}}}getHistoryObjs(e){this.initStatusObj(),this.answerService.apiAnswerGetHistoryObjsGet(this.homeworkHashId,e).subscribe(o=>{var n,s,a;1==o.success?this.historyAnswerObjs=null!==(s=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==s?s:new Array:this.errorMessage=null!==(a=o.message)&&void 0!==a?a:"",this.stopStatusObj()})}getDataHistory(e){this.historyId=e,this.errorMessage="",this.countLoad=1,this.answerService.apiAnswerGetHistoryObjGet(this.homeworkHashId,this.answerId,parseInt(e,10)).subscribe(o=>{var n,s,a,l,c,h,w,b,u,f,k,j,C,S,O,d;if(1==o.success){if(this.zipdataService.convertSubmittedAnswersHistoryObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),this.result=null!==(s=o.data)&&void 0!==s?s:{},this.markedByObj=null!==(l=null===(a=o.data)||void 0===a?void 0:a.markedByObj)&&void 0!==l?l:{},this.score=null!==(w=null===(h=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===h?void 0:h.point)&&void 0!==w?w:0,this.files=null!==(k=this.commonService.myParseJson(null!==(f=null===(u=null===(b=o.data)||void 0===b?void 0:b.answerObj)||void 0===u?void 0:u.files)&&void 0!==f?f:""))&&void 0!==k?k:[],null!=this.files)for(let _=0;_<this.files.length;_++)this.files[_].url=this.cdnService.getMyCdn(null!==(C=null===(j=this.files)||void 0===j?void 0:j[_].url)&&void 0!==C?C:""),this.files[_].thumb=this.cdnService.getMyCdn(null!==(O=null===(S=this.files)||void 0===S?void 0:S[_].thumb)&&void 0!==O?O:"");this.handleJsonData(),this.hasLoadedData=!0,1==this.countLoad&&(this.hasSendDataToIframe=!1),0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframeHistory()),this.successStatusObj(),this.countLoad++}else this.errorMessage=null!==(d=o.message)&&void 0!==d?d:"",this.stopStatusObj()})}handleJsonData(){var e,o,n,s,a,l,c;if(this.jsonData={},null!==(o=null===(e=this.result)||void 0===e?void 0:e.answerObj)&&void 0!==o&&o.confirmedAt||null!==(s=null===(n=this.result)||void 0===n?void 0:n.answerObj)&&void 0!==s&&s.result||(this.isMarked=!1),null!==(a=this.result.answerObj)&&void 0!==a&&a.confirmedAt){this.isMarked=!0;var h=this.commonService.myParseJson(null!==(c=null===(l=this.result.answerObj)||void 0===l?void 0:l.result)&&void 0!==c?c:"");h&&(this.jsonData=h,null==this.jsonData&&(this.isMarked=!1))}}getData(e){this.initStatusObj(),this.errorMessage="",this.answerId=e,this.answerService.apiAnswerGetObjGet(this.homeworkHashId,e).subscribe(o=>{var n,s,a,l,c,h,w,b,u,f,k,j,C,S,O,d,_,v,D,M,g,y;if(1==o.success)if(this.zipdataService.convertSubmittedAnswersObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),(null===(s=o.data)||void 0===s?void 0:s.hasOwnProperty("studentObj"))&&null!=(null===(a=o.data)||void 0===a?void 0:a.studentObj)){if(this.result=o.data,this.markedByObj=null!==(l=o.data.markedByObj)&&void 0!==l?l:{},this.score=null!==(w=null===(h=null===(c=o.data)||void 0===c?void 0:c.answerObj)||void 0===h?void 0:h.point)&&void 0!==w?w:0,this.homeworkID=null!==(u=null===(b=o.data.homeworkObj)||void 0===b?void 0:b.id)&&void 0!==u?u:0,this.classID=null!==(k=null===(f=o.data.classroomObj)||void 0===f?void 0:f.id)&&void 0!==k?k:0,this.files=null!==(S=this.commonService.myParseJson(null!==(C=null===(j=o.data.answerObj)||void 0===j?void 0:j.files)&&void 0!==C?C:""))&&void 0!==S?S:[],this.studentObj=o.data.studentObj,this.classroomObj=null!==(O=o.data.classroomObj)&&void 0!==O?O:{},null!=this.files)for(let x=0;x<this.files.length;x++)this.files[x].url=this.cdnService.getMyCdn(null!==(_=null===(d=this.files)||void 0===d?void 0:d[x].url)&&void 0!==_?_:""),this.files[x].thumb=this.cdnService.getMyCdn(null!==(D=null===(v=this.files)||void 0===v?void 0:v[x].thumb)&&void 0!==D?D:"");this.homeworkObj=null!==(M=o.data.homeworkObj)&&void 0!==M?M:{},this.studentName=null!==(g=o.data.studentObj.fullName)&&void 0!==g?g:"",this.handleJsonData(),this.hasLoadedData=!0,0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframe()),this.successStatusObj()}else this.errorMessage="lang_core_not_found_student",this.stopStatusObj();else this.errorMessage=null!==(y=o.message)&&void 0!==y?y:"",this.stopStatusObj()})}openDialog(e,o){this.dialog.open(_t,{width:"280px",autoFocus:!1,data:{score:o,status:e,homeWorkID:this.homeworkID,homeworkHashId:this.homeworkHashId,classID:this.classID,backToLink:this.backToLink}}).afterClosed().subscribe(s=>{})}handleOpenReSubmit(){var e;this.openDialogReSubmit(!0,null!==(e=this.homeworkObj.deadline)&&void 0!==e?e:void 0,this.homeworkObj,this.answerId,this.studentName)}openDialogReSubmit(e,o,n,s,a){this.dialog.open(gt,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:e,deadline:o,itemHomework:n,ans_id:s,name:a,redirect:!0,classID:this.classID}}).afterClosed().subscribe(c=>{})}remark(e,o,n){let s=JSON.stringify({type:"homework",id:this.homeworkObj.id,user:this.homeworkObj.tenantId});if(""==this.historyId)if(1==this.permissionService.hasMarkPointPermission("homework",this.homeworkObj.permissionObj)){let a={id:e,comment:n.comment,hideMark:n.hideMark?1:0,point:o?parseFloat(o.replace(",",".")):0,result:this.zipdataService.convertContentGzip(JSON.stringify(n)),homeworkHashId:this.homeworkHashId};this.answerService.apiAnswerSaveResultPost(a,s).subscribe(l=>{var c,h;1==l.success?(this.openDialog(!0,null===(h=null===(c=l.data)||void 0===c?void 0:c.obj)||void 0===h?void 0:h.point),this.successStatusObj()):(this.stopStatusObj(),this.showErrorSnack("lang_cms_mark_fail"))})}else this.showErrorSnack("lang_cms_no_permission_on_homework"),this.stopStatusObj();else this.stopStatusObj(),this.showErrorSnack("lang_cms_cannot_remark_student_history_result")}goBack(){var e;this.backToLink?this.backToLink.includes("shareType")?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation(this.backToLink):this.commonService.myNavigation(this.useNewDashboard?"/admin/testbank/homework-results-list/"+(null!==(e=this.homeworkObj.categoryId)&&void 0!==e?e:"0")+"/"+this.homeworkID+"/"+this.homeworkObj.hashId:"/admin/testbank/homework-results-list/"+this.classID+"/"+this.homeworkID+"/"+this.homeworkObj.hashId);let o=document.body,n=document.getElementById("azota-app-html");null==n||n.classList.remove("overflow-hidden"),null==n||n.classList.remove("height-100"),o.classList.remove("overflow-hidden"),o.classList.remove("height-100")}ngOnInit(){var e,o,n;let s=document.body,a=document.getElementById("azota-app-html");null==a||a.classList.add("overflow-hidden"),null==a||a.classList.add("height-100"),s.classList.add("overflow-hidden"),s.classList.add("height-100"),this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"";const l=this.commonService.getMyParam(this.activeRoute,"id")?Number(this.commonService.getMyParam(this.activeRoute,"id")):0,c=null!==(o=this.commonService.getMyParam(this.activeRoute,"historyId"))&&void 0!==o?o:"";this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"";let h=this.commonService.getMyQueryParam("backto");this.backToLink=h?h.includes("shareType")?decodeURIComponent(h):h:"",console.log(this.backToLink),this.getData(l),this.getHistoryObjs(l),c&&this.getDataHistory(c),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.goBack(),window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(T.gz),t.Y36(V.P),t.Y36(pt._),t.Y36(J.v),t.Y36(ft.$),t.Y36(Z.uw),t.Y36(st.U),t.Y36(G.n),t.Y36(vt.D),t.Y36(tt.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-mark-exericse"]],hostBindings:function(e,o){1&e&&t.NdJ("popstate",function(s){return o.onPopState(s)},!1,t.Jf7)},features:[t.qOj],decls:19,vars:13,consts:[["id","markContainer",1,"maxW1000"],["id","titleRow"],[1,"block-left"],["mat-button","",3,"title","click"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngFor","ngForOf"],["class","studentInfo","style","padding-right: 10px; color: #fff",4,"ngIf"],[3,"customText",4,"ngIf"],[3,"hidden"],[4,"ngIf"],["class","card-box listPhotos",4,"ngIf"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor"],[1,"studentInfo",2,"padding-right","10px","color","#fff"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[3,"customText"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),t.NdJ("click",function(){return o.goBack()}),t.ALo(4,"mytranslate"),t._uU(5,"keyboard_arrow_left"),t.qZA(),t.YNc(6,Xe,4,4,"button",4),t.TgZ(7,"mat-menu",null,5)(9,"button",6),t.NdJ("click",function(){return o.reloadPage()}),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.YNc(13,to,6,8,"ng-container",7),t.qZA()(),t.YNc(14,oo,3,3,"h4",8),t.qZA(),t.YNc(15,no,2,3,"azt-loading-effect",9),t.TgZ(16,"div",10),t.YNc(17,io,6,3,"div",11),t.YNc(18,so,3,3,"div",12),t.qZA()()),2&e&&(t.xp6(3),t.s9C("title",t.lcZ(4,9,"lang_buttom_back")),t.xp6(3),t.Q6J("ngIf",null!=o.historyAnswerObjs&&o.historyAnswerObjs.length>0),t.xp6(5),t.Oqu(t.lcZ(12,11,"lang_homework_mark_exercise_last")),t.xp6(2),t.Q6J("ngForOf",o.historyAnswerObjs),t.xp6(1),t.Q6J("ngIf",o.classroomObj),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading),t.xp6(1),t.Q6J("hidden",o.statusObj.loading),t.xp6(1),t.Q6J("ngIf",""!=o.errorMessage),t.xp6(1),t.Q6J("ngIf",""==o.errorMessage))},dependencies:[A.sg,A.O5,et.lW,U.Hw,E.VK,E.OP,E.p6,nt.gM,Y.Q,bt.t,A.uU,I.bT,I.yl],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}  .studentInfo img{display:inline-flex!important}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;position:relative;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}.block-left[_ngcontent-%COMP%]{display:flex;align-items:center}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),i})();const ro=[{path:"",component:(()=>{class i extends H.Q{constructor(e){super(e),this.commonService=e}ngOnInit(){super.ngOnInit()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(J.v))},i.\u0275cmp=t.Xpm({type:i,selectors:[["homework-master-page"]],features:[t.qOj],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[T.lC],encapsulation:2}),i})(),canActivate:[Ot.v],children:[{path:"add-new-homework/:cat_id",component:Gt},{path:"mark-exercise/:id/:hash_id",component:ao},{path:"mark-exercise-new/:id/:hash_id",component:Ke},{path:"export-homework/:class_id/:id/:hash_id",component:Ye},{path:"content-store",component:ge}]}];let lo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[T.Bz.forChild(ro),T.Bz,xt.fQ]}),i})(),co=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[q.Xd,T.Bz,A.ez,wt.j,z.Z_,lo,p.u5,p.UX,Z.Is,F.Z,N.xC,Q.W,kt.t]}),i})()}}]);