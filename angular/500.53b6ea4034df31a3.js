"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[500],{91404:(p,d,i)=>{i.d(d,{W:()=>c,l:()=>e});var m=i(7468);class e{constructor(u,t,n,a){this.type=u,this.data=t,this.message=n,this.questionNumber=a}}class c{initService(){const u=new m.$(this.cdnService,this.commonService,this.configRenderService,(t,n)=>{this.callbackPushImage&&this.caller&&this.callbackPushImage.call(this.caller,t,n)},t=>{this.callbackFall&&this.caller&&this.callbackFall.call(this.caller,t)});u.isCropImage=this.configRenderService.getIsCropImage(),this.services.push(u)}render(u,t){return this.services.forEach(n=>{u=n.render(u??"",[],void 0,t)}),u??""}constructor(u,t,n,a){this.cdnService=u,this.commonService=t,this.configRenderService=n,this.callbackFall=a,this.services=[],this.initService()}}},89493:(p,d,i)=>{i.d(d,{O:()=>t});var m=i(39621),e=i(65879),c=i(34380),r=i(91190);const u=function(){return{convertHTMLEntities:!1}};let t=(()=>{class n extends m.Q{}return n.\u0275fac=function(){let a;return function(s){return(a||(a=e.n5z(n)))(s||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-dynamic-hook"]],inputs:{content:"content"},features:[e.qOj],decls:2,vars:5,consts:[[3,"content","options"]],template:function(h,s){1&h&&(e._UZ(0,"ngx-dynamic-hooks",0),e.ALo(1,"replaceHookMedia")),2&h&&e.Q6J("content",e.lcZ(1,2,s.content))("options",e.DdM(4,u))},dependencies:[c.wC,r.EA],encapsulation:2}),n})()},5647:(p,d,i)=>{i.d(d,{l:()=>l});var m=i(39621),e=i(65879),c=i(96814),r=i(16007),u=i(91190);function t(o,g){if(1&o&&(e.O4$(),e.kcU(),e._UZ(0,"mat-progress-bar",10)),2&o){const _=e.oxw();e.Q6J("value",_.progress_value)}}function n(o,g){if(1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&o){const _=e.oxw();e.xp6(1),e.Oqu(_.getMsg())}}function a(o,g){if(1&o){const _=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"a",13),e.NdJ("click",function(){e.CHM(_);const f=e.oxw();return e.KtG(f.isShowErrorsBox=!f.isShowErrorsBox)}),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()()}if(2&o){const _=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_da_xay_ra_loi_trong_qua_trinh_trao_doi_du_lieu_")," "),e.xp6(3),e.hij(" ",_.isShowErrorsBox?e.lcZ(5,4,"lang_auto_an_chi_tiet"):e.lcZ(6,6,"lang_auto_xem_chi_tiet")," ")}}function h(o,g){if(1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&o){const _=e.oxw();e.xp6(1),e.hij(" ",_.LogErrorsRequest," ")}}function s(o,g){if(1&o&&(e.O4$(),e.kcU(),e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&o){const _=e.oxw();e.xp6(1),e.Oqu(_.customText?_.customText:e.lcZ(2,1,"lang_auto_dang_tai_du_lieu")+"...")}}let l=(()=>{class o extends m.Q{constructor(){super(...arguments),this.progress_value=-1,this.LogErrorsRequest=!1,this.customText="",this.isShowErrorsBox=!1}getMsg(){let _="";return 100==this.progress_value||0==this.progress_value?(_=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly")??"",`${_} ...`):(_=this.commonService.myTranslateInstant("lang_auto_dang_tai_tep_tin_len_he_thong")??"",`${_}... ${this.progress_value} %`)}}return o.\u0275fac=function(){let g;return function(v){return(g||(g=e.n5z(o)))(v||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["azt-loading-effect"]],inputs:{progress_value:"progress_value",LogErrorsRequest:"LogErrorsRequest",customText:"customText"},features:[e.qOj],decls:12,vars:5,consts:[[1,"box-loading","h-full"],[1,"text-center","py-4"],["version","1.1","id","jobing-j-drawit","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 109 92.9",0,"xml","space","preserve",1,"w-12","mx-auto",2,"enable-background","new 0 0 109 92.9"],["d","M90.8,52c3.5,6.2,7.1,11.7,9.8,17.7c4.4,9.7-2.9,20.7-13.8,20.9c-11.8,0.2-23.7,0.2-35.5,0 c-11-0.1-17.6-12.2-12-21.7c0.4-0.8,1.8-1.4,2.7-1.4c9.9-0.1,19.7-0.1,29.6-0.1c9.8,0,15.9-4.6,18.7-14C90.4,53.2,90.5,52.9,90.8,52 z",1,"azt-svg-loading","jobing-j"],["d","M39.6,90.3c-6.8,0-13.8,0.8-20.5-0.2c-9.7-1.4-15-12.8-10.3-21.3c5.9-10.9,12.1-21.6,18.5-32.2 c5.5-9,18.6-8.7,24.2,0.2c0.7,1.1,0.8,1.9,0.1,3.1C46.7,48.3,42,57,36.8,65.3c-5.3,8.4-3.8,18.8,2.5,24.6 C39.5,89.9,39.5,90.2,39.6,90.3z",1,"azt-svg-loading","jobing-j"],["d","M32.5,27.3c3.3-5.7,6.1-11,9.4-16c5.9-9.1,19.4-9.2,25.1,0c6.5,10.4,12.6,21,18.3,31.7 c4.8,9-1.5,19.9-11.5,20.7c-1.6,0.1-2.6-0.2-3.5-1.8c-4.8-8.6-9.8-17.1-14.7-25.6c-4.7-8.3-12.5-11.6-21.7-9.2 C33.6,27.1,33.3,27.1,32.5,27.3z",1,"azt-svg-loading","jobing-j"],["style","margin-bottom: 30px; border-radius: 5px","mode","buffer",3,"value",4,"ngIf"],["class","note text-center font-weight-bold",4,"ngIf","ngIfElse"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["notLoading",""],["mode","buffer",2,"margin-bottom","30px","border-radius","5px",3,"value"],[1,"note","text-center","font-weight-bold"],["role","alert",1,"alert","alert-danger","mt-3"],["azt-track-service","loading-effect-5TYv52U-wgq","href","javscript:void(0)",3,"click"],[1,"note","text-center","font-medium"]],template:function(_,v){if(1&_&&(e.TgZ(0,"div",0)(1,"div",1),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"path",3)(4,"path",4)(5,"path",5),e.qZA()(),e.YNc(6,t,1,1,"mat-progress-bar",6),e.YNc(7,n,2,1,"div",7),e.YNc(8,a,7,8,"div",8),e.YNc(9,h,2,1,"div",8),e.YNc(10,s,3,3,"ng-template",null,9,e.W1O),e.qZA()),2&_){const f=e.MAs(11);e.xp6(6),e.Q6J("ngIf",-1!=v.progress_value),e.xp6(1),e.Q6J("ngIf",-1!=v.progress_value)("ngIfElse",f),e.xp6(1),e.Q6J("ngIf",!1!==v.LogErrorsRequest),e.xp6(1),e.Q6J("ngIf",v.isShowErrorsBox)}},dependencies:[c.O5,r.pW,u.JV],encapsulation:2}),o})()},7468:(p,d,i)=>{i.d(d,{$:()=>u});var m=i(60723),e=i(23353),c=i(91404),r=i(92381);class u extends r.N{constructor(n,a,h,s,l){super(),this.cdnService=n,this.commonService=a,this.configRenderService=h,this.callBack=s,this.callbackFall=l}render(n,a,h,s){if(n.indexOf("@[]")<0)return s&&s(),n;let _,l=/@\[\]\{[^@]+\}@\[\]/g,o=n,g=new Map;for(;null!==(_=l.exec(n));){let v=_[0],f=v.split("@[]")[1],E=this.commonService.willDeleteParseJson(f),C=E.link,x=m.G.generateIdRequired(10);o=o.replace(v,`<div id='${x}' class='img-docx skeleton-box-loading' style='width: ${E.data.width*this.ratioImage}px;height: ${E.data.height*this.ratioImage}px'></div>`),g.has(C)?g.get(C)?.push({id:x,data:E.data}):g.set(C,[{id:x,data:E.data}])}return this.startLoadImage(g).then(()=>{s&&s()}).catch(v=>{this.callbackFall&&this.callbackFall(v)}),o}startLoadImage(n){return new Promise((a,h)=>{var s=0;n.size>0?n.forEach((l,o)=>{this.loadImage(o,this.cdnService).then(g=>{if(this.processImageQuestion(g,l,h),this.loadingManager.delete(g.id),this.callBack)for(let _ of l)this.callBack(_.id,_.renderStr);++s===n.size&&a()}).catch(()=>{const g=o.split("/");var _=this.commonService.myTranslateInstant("lang_testbank_render_cant_download_the_image")??"";h(new c.l("LOAD_IMAGE",[g[g.length-1]],_))})}):a()})}processImageQuestion(n,a,h){a.forEach(s=>{try{const l=document.createElement("canvas");s.data.width=-1===s.data.width?n.width:s.data.width,s.data.height=-1===s.data.height?n.height:s.data.height,l.width=s.data.width,l.height=s.data.height,l.getContext("2d")?.drawImage(n,s.data.x,s.data.y,s.data.width,s.data.height,0,0,l.width,l.height);let g=this.isCropImage?e.rj.cropCanvas(l):l;g=this.isCanvasEmpty(g)?l:g,s.renderStr=`<img id='${s.id}' class='img-docx' alt='error...' src='${g.toDataURL()}' style='width: ${g.width*this.ratioImage}px;height: auto'>`}catch{const o=n.src;return void h(new c.l("CROP_IMAGE",[o[o.length-1]],"Kh\xf4ng c\u1eaft \u0111\u01b0\u1ee3c n\u1ed9i dung trong h\xecnh \u1ea3nh"))}})}isCanvasEmpty(n){const a=document.createElement("canvas");return a.width=n.width,a.height=n.height,n.toDataURL()===a.toDataURL()}}},92381:(p,d,i)=>{i.d(d,{N:()=>r});var m=i(60723),e=i(23353),c=i(10548);class r{constructor(){this.isCropImage=!0,this.loadingManager=new Map,this.ratioImage=.65}setCallback(t){}setApiCache(t){}setLoadingManager(t){this.loadingManager=t}loadImage(t,n){return new Promise((a,h)=>{let s=m.G.generateIdRequired(10);this.loadingManager.set(s,t),(0,c.dr)(t,n).then(l=>{a(l),this.loadingManager.delete(s)}).catch(()=>{this.loadingManager.delete(s),h(new Error)})})}loadImageToBase64(t,n){return new Promise((a,h)=>{const s=new Image;s.crossOrigin="anonymous",s.setAttribute("count","1");let l=m.G.generateIdRequired(10);this.loadingManager.set(l,t),s.onload=()=>{const o=document.createElement("canvas");o.width=s.width,o.height=s.height,o.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height);const _=this.isCropImage?e.rj.cropCanvas(o):o;let v=`<img id='${l}' class='img-docx' alt='error...' src='${_.toDataURL()}' style='width: ${_.width*this.ratioImage}px;height: auto'>`;a(v),this.loadingManager.delete(l)},s.onerror=()=>{this.loadingManager.delete(l);const o=s.getAttribute("count");o&&1==Number(o)?(s.src=n.getMyCdn(t),s.setAttribute("count","2")):o&&Number(o)<5?(s.setAttribute("count",o+1),s.src=n.getRawCdnLink(t)+"?t="+(new Date).getTime()):h(new Error)},s.src=n.getRawCdnLink(t)})}}},60723:(p,d)=>{d.G=void 0,d.G=class m{static generateIdRequired(c){let r="";for(let n=0;n<c;n++)r+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+r}}},65097:(p,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PartsParser=void 0;const m=i(49288),e=i(90957),c=i(39963),r=i(15647),u=i(42292),t=i(58446);class n{constructor(h){this.__idCssElement="qv_style_element",this.baseConfigEventListener=[],this.imgMaps=[],this.services=new Array;const s=this.__pushServices([new e.FirstPartService(this.baseConfigEventListener),new m.ImagePartService(this.baseConfigEventListener),new u.DocxImagePartService(this.baseConfigEventListener),new r.LibrariesPartService(this.baseConfigEventListener,h),new c.FindAnsPartService(this.baseConfigEventListener),new t.LatexPartService(this.baseConfigEventListener)]);this.__pushCss(s)}__pushCss(h){if(!document.getElementById(this.__idCssElement)&&document.head){const l=document.createElement("style");l.id=this.__idCssElement,l.innerHTML=h.replace(/  /g," ").replace(/\n/g," ").replace(/\t/g," "),document.head.appendChild(l)}}__pushServices(h){let s="";return h.forEach(l=>{l.outCss().forEach(g=>{s+=`.${g.className} { ${g.content} } \n`}),this.services.push(l)}),s}start(h){const s=document.createElement("div");return h.forEach(l=>{const o=document.createElement("p");o.classList.add("qv_line"),this.services.forEach(g=>{g.pushImages(this.imgMaps),l=g.parse(l)}),o.innerHTML=l.text||"",s.appendChild(o)}),0===s.innerText.indexOf(n.IgnoreChar)?s.innerText.replace(n.IgnoreChar,""):s.outerHTML}register(h){this.imgMaps=h}configEventListener(h){h.forEach(s=>{-1===this.baseConfigEventListener.findIndex(l=>l.eventName===s.eventName)&&this.baseConfigEventListener.push(s)})}doneRenderQuestions(){this.services.forEach(h=>{h.onEndAll()})}}d.PartsParser=n,n.IgnoreChar="{!ignore}"},94235:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseCaller=void 0,d.BaseCaller=class i{getQuestion(e,c,r,u,t,n){return new Promise(a=>{a([])})}}},20926:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BeautyImageCrop=void 0;class i{static getRGB(e,c,r,u){return{red:u[4*(r.width*c+e)],green:u[4*(r.width*c+e)+1],blue:u[4*(r.width*c+e)+2],opacity:u[4*(r.width*c+e)+3]}}static isEmpty(e){return 255==e.red&&255==e.green&&255==e.blue||0===e.opacity}static scanX(e,c,r){for(var u=e?1:-1,t=e?0:c.width-1;e?t<c.width:t>-1;t+=u)for(var n=0;n<c.height;n++)if(!i.isEmpty(i.getRGB(t,n,c,r.data)))return t;return 0}static scanY(e,c,r){for(var u=e?1:-1,t=e?0:c.height-1;e?t<c.height:t>-1;t+=u)for(var n=0;n<c.width;n++)if(!i.isEmpty(i.getRGB(n,t,c,r.data)))return t;return 0}static cropImage(e,c,r){const t=e.canvas,n=document.createElement("canvas"),a=n.getContext("2d");var h=i.scanY(!0,t,c)-5,s=i.scanY(!1,t,c)+5,l=i.scanX(!0,t,c)-5,o=i.scanX(!1,t,c)+5;r&&(r.top||(s=0),r.bottom||(s=t.height),r.left||r.right?(r.left||(s=0),r.right||(s=t.width)):o=t.width+l);var g=o-l,_=s-h;return n.width=g,n.height=_,a?.drawImage(t,l,h,g,_,0,0,g,_),n}static removeBg(e){const c=document.createElement("canvas"),r=c.getContext("2d");if(r){c.width=e.width,c.height=e.height,r.drawImage(e,0,0);for(var u=r.getImageData(0,0,c.width,c.height),t=u.data,n=0;n<t.length;n+=4)t[n]>=185&&t[n+1]>=185&&t[n+2]>=185&&(t[n+3]=0);r.putImageData(u,0,0)}return c}static cropCanvas(e,c){const r=e.getContext("2d");if(r){var u=r.getImageData(0,0,e.width,e.height);return i.cropImage(r,u,c)}return e}}d.BeautyImageCrop=i},23353:(p,d,i)=>{d.rj=void 0;i(94235);const c=i(20926);Object.defineProperty(d,"rj",{enumerable:!0,get:function(){return c.BeautyImageCrop}});i(65097)},42292:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DocxImagePartService=void 0;class i{constructor(e){this.pattern_check=/@\[\]{"link":"[^"]+","data":{[^}]+}}@\[\]/i,this.images=[],this.indexImageLink=[],this.style=document.createElement("style"),this.baseConfigEventListener=e,document.head.appendChild(this.style)}parse(e){let u,c=0,r=e.text||"";for(;null!==(u=this.pattern_check.exec(r));){try{var t=JSON.parse(u[0].split("@[]")[1]);t.data={x:Math.floor(t.data.x),y:Math.floor(t.data.y),width:Math.floor(t.data.width),height:Math.floor(t.data.height)},this.indexImageLink.push(t.link),r=r.replace(this.pattern_check,`<div class="background_question_${this.indexImageLink.length-1}"><img width="1024" height="1024" src="${t.link}"></div>`),this.style.textContent+=`.background_question_${this.indexImageLink.length-1} {margin: 0 3px; width: ${t.data.width}px; height: ${t.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${this.indexImageLink.length-1} img { margin-top: -${t.data.y}px; margin-left: -${t.data.x}px;}`}catch{r=r.replace(this.pattern_check,"")}c++>1e4&&(r="")}return Object.assign(Object.assign({},e),{text:r})}outCss(){return[]}pushImages(e){this.images=e}onEndAll(){}}d.DocxImagePartService=i,i.NAME_SERVICE="image_part:"},39963:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FindAnsPartService=void 0,d.FindAnsPartService=class i{constructor(e){this.pattern_check=/\[[ABCDEFGHI]:[^\]]+\]/i,this.images=[],this.baseConfigEventListener=e}parse(e){let u,c=0,r=e.text||"";for(;null!==(u=this.pattern_check.exec(r));){const t=u[0].replace("[","").replace("]",""),n=t.substring(0,1),a=document.createElement("span");a.classList.add("qv_string_eng_ans"),a.innerHTML=n;const h=t.substring(2),s=document.createElement("span");s.classList.add("qv_string_eng"),s.innerHTML=h,s.appendChild(a),r=r.replace(this.pattern_check,s.outerHTML),c++>1e4&&(r="")}return Object.assign(Object.assign({},e),{text:r})}outCss(){return[{className:"qv_string_eng",content:"\n                    cursor: pointer;\n                    padding: 0 5px;\n                    font-weight: bold;\n                    text-decoration: underline;\n                    position: relative;\n                    height: 40px;\n                    display: inline-block;\n                "},{className:"qv_string_eng_ans",content:"\n                    position: absolute;\n                    top: 20px;\n                    left: 45%;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}},90957:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FirstPartService=void 0,d.FirstPartService=class i{constructor(e){this.images=[],this.baseConfigEventListener=e}parse(e){return Object.assign({},e)}outCss(){return[{className:"qv_line",content:"\n                    margin: 0 !important;\n                "},{className:"qv_qts_image",content:"\n                    width: 100%;\n                "},{className:"qv_ats_image",content:"\n                    width: 60%;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}},49288:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ImagePartService=void 0;class i{constructor(e){this.pattern_check=/\[!img:[afhci]+[\dABCDEFGHI]+\]/i,this.images=[],this.baseConfigEventListener=e}parse(e){let u,c=0,r=e.text||"";for(;null!==(u=this.pattern_check.exec(r));){const t=u[0].replace("[!img:","").replace("]",""),n=this.images.find(a=>a.id===t);if(n){const a=document.createElement("img");a.crossOrigin="anonymous",a.classList.add(0===t.indexOf("af")?"qv_full_a_img":0===t.indexOf("f")?"qv_full_img":"qv_img"),a.src=n.link,r=r.replace(this.pattern_check,a.outerHTML)}else{const a=document.createElement("span");a.innerHTML="(Th\xeam h\xecnh \u1ea3nh)",a.classList.add("qv_none_image"),r=r.replace(this.pattern_check,a.outerHTML)}c++>1e4&&(r="")}return Object.assign(Object.assign({},e),{text:r})}outCss(){return[{className:"qv_full_a_img",content:"\n                    cursor: pointer;\n                    width: 60%\n                "},{className:"qv_full_img",content:"\n                    cursor: pointer;\n                    width: 100%\n                "},{className:"qv_img",content:"\n                    cursor: pointer;\n                    height: 25px;\n                "},{className:"qv_none_image",content:"\n                    display: inline-block;\n                    color: #2262ae;\n                    cursor: pointer;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}d.ImagePartService=i,i.NAME_SERVICE="image_part:"},58446:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LatexPartService=void 0;class i{constructor(e){this.images=[],this.baseConfigEventListener=e}parse(e){let c=e.text||"";return Object.assign(Object.assign({},e),{text:c})}outCss(){return[]}pushImages(e){this.images=e}onEndAll(){}}d.LatexPartService=i,i.NAME_SERVICE="latex:"},15647:(p,d,i)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LibrariesHelper=d.LibrariesPartService=void 0;const m=i(65097);class e{constructor(t,n){this.pattern_check=/^(\[@[CTG]\d+:[^\]]+\]\.)+((\[@Q\d+:[^\]]+\])|(\[[^@:]+\]))$/i,this.pattern_content=/\[(.*?)\]/i,this.images=[],this.baseConfigEventListener=[],this.baseConfigEventListener=t,this.cacheProcess=new r(n,this.baseConfigEventListener)}parse(t){let n=0,a=t.text||"";if(this.pattern_check.test(a)){let h=[];for(;null!==this.pattern_content.exec(a);){const o=this.pattern_content.exec(a);if(!o)break;h.push(o[1]),a=a.substring(0,o.index)+a.substring(o.index+o[0].length)}const s=c.convertStringToTypeObject(h),l={numberQuestion:1,path:s[0],useCache:!0};"Random"===s[0].type?("G"===s[1].type?(l.groupId=s[1].id,l.examId=s[2].id):(l.catId="C"===s[1].type?s[1].id:void 0,l.examId="T"===s[1].type?s[1].id:void 0,l.questionId="Q"===s[1].type?s[1].id:void 0),l.numberQuestion=s[0].id):l.questionId=s[0].id,a=m.PartsParser.IgnoreChar+this.cacheProcess.pushCaller(l),n++>1e4&&(a="")}return Object.assign(Object.assign({},t),{text:a})}outCss(){return[]}pushImages(t){this.images=t}onEndAll(){this.cacheProcess.startCaller()}}d.LibrariesPartService=e,e.NAME_SERVICE="libraries_part:";class c{static convertStringToTypeObject(t){const n=[];return t.forEach(a=>{let h=a.substring(1,2),s=Number(c.pattern_number.exec(a)),l="";if(c.char_types.includes(h)){let o=a.indexOf(":");-1!==o&&(l=a.substring(o))}else h="Random";n.push({name:l,id:s,type:h,content:a})}),n.reverse()}}d.LibrariesHelper=c,c.pattern_number=/\d+/i,c.char_types="CTGQH";class r{constructor(t,n){this.eventDoneKey=e.NAME_SERVICE+"done",this.cacheObjs=[],this.baseCaller=t,this.baseConfigEventListener=n}pushEventValue(){const t=this.baseConfigEventListener.filter(a=>0===a.eventName.indexOf(this.eventDoneKey));let n=[];t.forEach(a=>{const h=this.cacheObjs.filter(l=>"done"===l.step);a.func.call(a.caller,h)&&n.push(a.eventName)}),n.forEach(a=>{const h=this.baseConfigEventListener.findIndex(s=>s.eventName===a);-1!==h&&this.baseConfigEventListener.splice(h,1)})}pushCaller(t){const n=t.catId+"_"+t.examId+"_"+t.groupId+"_"+t.questionId+"_"+t.numberQuestion;var a=this.cacheObjs.find(h=>h.key===n);return a||this.cacheObjs.push(a={key:n,value:[],step:"init",pars:t,count:0}),a.count++,n+"_"+a?.count}startCaller(){this.cacheObjs.forEach(t=>{t.count=0,"init"===t.step?(t.step="call",this.baseCaller.getQuestion(t.pars.numberQuestion,t.pars.useCache,t.pars.catId,t.pars.examId,t.pars.questionId,t.pars.groupId).then(n=>{t.step="done",t.value=n,this.pushEventValue()})):"done"===t.step&&this.pushEventValue()})}}}}]);