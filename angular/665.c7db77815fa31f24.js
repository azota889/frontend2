(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[665],{58343:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Utils=q.CONST=void 0;class S{static load(j){let T=JSON.parse(j);Object.assign(this,T)}}q.CONST=S,S.RENDER_SCALE=2,S.LINE_SMALL_HEIGHT=7*S.RENDER_SCALE,S.SPLIT_MARGIN=3*S.RENDER_SCALE,S.INTERSEC_MARGIN=20*S.RENDER_SCALE,S.LINE_MAGIN=2*S.RENDER_SCALE,S.MARGIN_LEFT=2*S.RENDER_SCALE,S.ENABLE_IMAGE_PROCESS=!0,S.STEP_SIZE=2,S.CROP_FULL_WIDTH=!0,S.OVERLAP=.5,S.QUESTION_PATTERN=[],S.QUESTION_PATTERN2=[],S.BREAK_LINE_PATTERN=[],S.SECTION_PATTERN_LOWER=[],S.SECTION_PATTERN_NORMAL=[],S.KICK_PATTERN=[],S.TVCN_CHAR=[],S.HET_PATTERN=[],S.DAPAN_PATTERN=[],S.HUONGDAN_PATTERN=[],S.MULTIPLE_ANS_PATTERN=[],S.DRAW_RESULT="",S.SKIP_CHAR=[],S.FOOTER_PATTERN=[],S.HELP_ANS_PATTERN=[],q.Utils=class M{static capitalizeFirstLetter(j){return j.charAt(0).toUpperCase()+j.slice(1)}static tagLang(j){let T=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return T.has(j)?T.get(j):j}static parseInclude(j){var T;let u=j.split("=>"),g=u.length>1?u[1]:-1,x=u[0];x=x.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let R,w=x.split("."),E=[],k=[],A=[],C=[],P=[],D=[],Q=[],U=[],J=[],H=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),ne=[];for(let W=w.length-1;W>=0;W--){let xe=w[W].trim();if(/^\d*$/.test(xe)){R=+xe;continue}let Ce=xe.split(",");for(let fe of Ce){let be=fe.split(":"),he=be[0],Te=null!==(T=be[1])&&void 0!==T?T:"";if(/^G[\-\d]+$/.test(he.trim()))E.push(+he.trim().substring(1));else if(/^Q[\-\d]+$/.test(he.trim()))A.push(+he.trim().substring(1)),U.push(Te),ne.push({type:"QUEST",id:+he.trim().substring(1)});else if(/^C[\-\d]+$/.test(he.trim())){let me=+he.trim().substring(1);C.push(me),D.push(Te),ne.push({type:""!=Te?"SHARE":"CATEGORY",id:me})}else if(/^K[\-\d]+$/.test(he.trim())){let me=+he.trim().substring(1);C.push(me),D.push(Te),ne.push({type:""!=Te?"SHARE":"KNOWLEDGE",id:me})}else if(/^T[\-\d]+$/.test(he.trim()))k.push(+he.trim().substring(1)),Q.push(Te),ne.push({type:"EXAM",id:+he.trim().substring(1),groupIds:E});else if(/^F:/.test(fe.trim())){let me=fe.trim().substring(2);J.push(H.has(me)?H.get(me):me)}}if(ne.length>0){if(J.length>0){let fe=["TL","TN","\u0110T","ES","MC","FB"];for(let be of ne)be.tags=J.filter(he=>fe.indexOf(he)<0),be.answerTypes=J.filter(he=>fe.indexOf(he)>=0).map(he=>"TL"==he||"ES"==he?3:"TN"==he||"MC"==he?1:4)}break}}return A.length>0&&(R=A.length),P.push(...D),P.push(...Q),P.push(...U),{paths:ne,shareTypes:P,catId:C,examId:k,tag:J,groupId:E,questId:A,getNum:R,idx:g}}static getNumberFromStr(j){let T=j.match(/(\d+)/);return T?T[0]:""}static removeAccents(j){let T=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const u of T){let g=new RegExp("["+u.substring(1)+"]","g");j=j.replace(g,u[0])}return j}static zeroPad(j,T){return j=j||2,(new Array(j).join("0")+T).slice(-1*j)}}},95970:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ExamParser=void 0;const M=S(58343),p=S(25873),j=S(64984),T=S(96570),u=S(89094),g=S(75271),_=S(52734),h=S(50023),m=S(65378),b=S(88178),x=S(8377),w=S(9165),E=S(42637);q.ExamParser=class k{constructor(C){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",M.CONST.load(C)}setLang(C){this.lang=C,this.DEF_QUEST_NAME="vi"==C?"c\xe2u ":"question "}parse(C,P,D){var Q,U,R,J,H,ne,ee,W,xe,Ce;let fe=this.findItems(C,D);P&&console.log("items",fe);let be=new Map,he=[],Te=null,me=0,se="main",_e=0,de=0,Ae=[],Se=!0,Oe=new Map;for(let $e=0;$e<fe.length;$e++){let qe=fe[$e],it=$e==fe.length-1?void 0:fe[$e+1],He=this.getPartInfo(C,qe,it);if(this.loadText(C,He),qe.type==m.SectionParser.TYPE_NAME&&"main"==se&&(me++,he.push({label:me,parts:He,answers:[],isGroup:!0})),qe.type==h.QuestionParser.TYPE_NAME){if(it&&it.type==p.AnswerParser.TYPE_NAME&&it.pos[2]>0){let ut;for(let yt=$e+1;yt<fe.length;yt++)if(fe[yt].type!=p.AnswerParser.TYPE_NAME){ut=fe[yt];break}He=this.getPartInfo(C,qe,ut),this.loadText(C,He)}let We=qe.label?+qe.label:0,Be=be.get(We);Be&&"main"!=se?(Be.help=He,Te=Be):"main"==se&&(Be={label:We,olabel:qe.olabel,answers:[],parts:He},me>0&&(Be.group=me),be.set(We,Be),he.push(Be),Te=Be)}if(qe.type==p.AnswerParser.TYPE_NAME&&Te){let We=!1;if(1==He.length){let xt=C[He[0].lineIdx].replace(/\|/g,"").trim().match(M.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=xt&&xt.length>0&&(We=!0)}let Be=""==qe.olabel;qe.pos[2]>0&&(He=[He[0]],He[0].e=qe.pos[2],this.loadText(C,He),Be=!0);let ut={label:null!==(Q=qe.label)&&void 0!==Q?Q:"",isCorrect:"*"==qe.extInfo,parts:Be?[He[0]]:He,isInline:Be,olabel:qe.olabel};Te.answers.push(ut),Te.isFixAns=Be||We}if(qe.type==_.IncludeParser.TYPE_NAME)if(qe.label&&/\.\d*$/.test(qe.label)){let We=qe.label.split("."),Be=+We[We.length-1],ut=null!==(U=He[0].text)&&void 0!==U?U:"",yt=null!==(R=Oe.get(ut))&&void 0!==R?R:-1;if(yt++,Oe.set(ut,yt),0==Be){me++;let St=ut+"=>"+yt+"-0",Kt=[];Kt.push(...He),Kt[0]={lineIdx:He[0].lineIdx,s:0,b:0,text:St},he.push({label:me,parts:Kt,answers:[],isGroup:!0});continue}let e=Te?Te.label:0,xt=0;for(let St=0;St<Be;St++){xt++;let Kt=ut+"=>"+yt+"-"+St,Ut=[];Ut.push(...He),Ut[0]={lineIdx:He[0].lineIdx,s:0,b:0,text:Kt};let Nn={label:e+xt,olabel:Te?null===(J=Te.olabel)||void 0===J?void 0:J.replace(/\d+/,e+xt+""):this.DEF_QUEST_NAME+(e+xt)+".",answers:[],parts:Ut};be.set(Nn.label,Nn),he.push(Nn),Te=Nn}}else if(qe.label&&/\.Q\d+(,Q\d+)*$/.test(qe.label)){let Be=qe.label.split(".").pop(),ut=null!==(H=Be?.split(",").length)&&void 0!==H?H:0;for(let yt=0;yt<ut;yt++){let e={lineIdx:He[0].lineIdx,s:0,b:0,text:He[0].text+"=>0-"+yt},xt=Te?Te.label:0,St={label:xt+1,olabel:Te?null===(ne=Te.olabel)||void 0===ne?void 0:ne.replace(/\d+/,xt+1+""):this.DEF_QUEST_NAME+(xt+1)+".",answers:[],parts:[e]};be.set(St.label,St),he.push(St),Te=St}}qe.type==g.HuongDanParser.TYPE_NAME&&Te&&(He.splice(0,1),it&&it.type==h.QuestionParser.TYPE_NAME&&it.label&&!be.has(+it.label)||!it||it.type==m.SectionParser.TYPE_NAME?"main"==se&&(Te.help=He):"main"==se&&(se="info",_e=null!==(ee=qe.lineIdx)&&void 0!==ee?ee:0),_e>0&&0==de&&(de=null!==(W=qe.lineIdx)&&void 0!==W?W:0)),(qe.type==u.HetParser.TYPE_NAME||qe.type==T.DapAnParser.TYPE_NAME)&&(se="info",_e=null!==(xe=qe.lineIdx)&&void 0!==xe?xe:0),qe.type==j.DapAnChiTietParser.TYPE_NAME&&Se&&Ae.push(qe),qe.type!=j.DapAnChiTietParser.TYPE_NAME&&Ae.length>0&&(Se=!1)}let Ye=new j.DapAnChiTietParser,pt=Ye.getAnsMC(C,Ae),ft=new Map;if(_e>0){let $e=de>0?C.slice(_e,de):C.slice(_e);ft=Ye.getAnsStr($e)}for(const $e of he){if($e.isGroup)continue;let qe=pt.get($e.label),it=ft.get($e.label),He=null;if($e.help&&(He=Ye.getAnsFromHelp($e.help,C)),$e.answers.length>0){let We=$e.answers.filter(Be=>Be.isCorrect);for(let Be=1;Be<We.length;Be++)We[Be].isCorrect=!1;if(0==We.length){let Be=null!==(Ce=qe??He)&&void 0!==Ce?Ce:it?it[0]:"";for(const ut of $e.answers)if(ut.label==Be){ut.isCorrect=!0;break}}}else $e.strAns=it}return P&&console.log("lstQuest",he),he}cleanRes(C){for(const P of C){for(let D=P.parts.length-1;D>=0;D--)""==P.parts[D].text&&P.parts.splice(D,1);for(const D of P.answers)for(let Q=D.parts.length-1;Q>=0;Q--)""==D.parts[Q].text&&D.parts.splice(Q,1);if(P.help)for(let D=P.help.length-1;D>=0;D--)""==P.help[D].text&&P.help.splice(D,1)}}getPartInfo(C,P,D){var Q,U;let R=null!==(Q=P.lineIdx)&&void 0!==Q?Q:0,J=null!==(U=D?.lineIdx)&&void 0!==U?U:C.length-1;if(R==J)return D?[{lineIdx:R,b:P.pos[0],s:P.pos[1],e:D?.pos[0]}]:[{lineIdx:R,b:P.pos[0],s:P.pos[1]}];{let H=[];H.push({lineIdx:R,b:P.pos[0],s:P.pos[1]});for(let ne=R+1;ne<J;ne++)H.push({lineIdx:ne,b:0,s:0});if(D){let ne=D?.pos[0];""!=C[J].substring(0,ne).replace(/\|/g,"").trim()&&H.push({lineIdx:J,b:0,s:0,e:ne})}else H.push({lineIdx:J,b:0,s:0});return H}}loadText(C,P){for(const D of P)D.text=C[D.lineIdx].substring(D.s,D.e)}findItems(C,P){let D=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];P&&(D=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let Q=[new w.RemoveRule,new b.ModifyAnsRule,new E.SameKindRule,new x.RemoveDupRule],U=[{parser:new j.DapAnChiTietParser,also:[2]},{parser:new m.SectionParser,from:[0],to:[1],also:[3]},{parser:new h.QuestionParser,from:[0],to:[1],also:[3]},{parser:new p.AnswerParser},{parser:new u.HetParser,to:[2]},{parser:new T.DapAnParser,to:[2],also:[6]},{parser:new g.HuongDanParser},{parser:new _.IncludeParser,from:[0],to:[1]}],R=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],J=R[0],H=[],ne=0;for(const xe of C)if(""!=xe){for(const Ce of J.expect){let fe=U[Ce],be=fe.parser.parse(xe);if(be.length>0){if(be.forEach(he=>he.lineIdx=ne),H.push(...be),fe.parser.TYPE==g.HuongDanParser.TYPE_NAME){let he=H.filter(se=>se.type==h.QuestionParser.TYPE_NAME).length,Te=H.filter(se=>se.type==g.HuongDanParser.TYPE_NAME).length,me=H.filter(se=>se.type==T.DapAnParser.TYPE_NAME).length;if(J.name==R[1].name&&he>1&&0==Te){J=R[2];let se=R[2].expect.indexOf(6);se>=0&&R[2].expect.splice(se,1)}else if(J.name==R[2].name){me>0&&U[0].parser.off();let se=R[2].expect.indexOf(6);se>=0&&R[2].expect.splice(se,1)}}if(fe.to){let he=0;for(const Te of fe.to)(fe.from&&R[fe.from[he]]==J||!fe.from)&&(J=R[Te])}if(fe.also)for(const he of fe.also){let me=H[H.length-1].pos[1],se=U[he].parser.parse(xe.substring(me));se.length>0&&(se.forEach(_e=>{_e.lineIdx=ne;for(let de=0;de<_e.pos.length;de++)_e.pos[de]=_e.pos[de]+me}),H.push(...se))}break}}ne++}else ne++;let ee=[];for(const xe of D)for(const Ce of Q){let fe=Ce.load(xe);if(fe){ee.push(fe);break}}let W=0;for(;W<H.length;){for(const xe of ee){let Ce=H.length;if(xe.run(H,W)){let fe=Ce-H.length;fe>0&&(W-=fe+1);break}}W++}return H}}},37562:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.EditorApiService=void 0,q.EditorApiService=class S{}},99230:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ExamIntellisense=void 0;const M=S(95970),p=S(38469),j=S(50437),T=S(97525),u=S(30091),g=S(42167),_=S(36801);q.ExamIntellisense=class h{constructor(b){this.conf=b,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new M.ExamParser(b),this.apiService=null}setSingleMode(b){this.singleMode=b}setLines(b){this._lines=b}setApiService(b){this.apiService=b}parse(){return this._lstQuest=this.exParser.parse(this._lines,!0,!0),this._lstQuest}getAutofillValue(b,x,w){var E;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[b].trim()))return[];let A=[],C=this.getCurPos(b,x),P=C[0],D=C[1],Q=C[2],U=this._lines[b>0?b-1:0];if(P&&P.parts.length>0&&null!==(E=P.parts[0].text)&&void 0!==E&&E.trim().startsWith("[@"),U.startsWith("[@")||""==U.trim())return[];if(D&&P){let R="ABCDEFGHIJKLMN",J=R.indexOf(D.label),H=R[J+1]+D.olabel+" ",ne=D.label+D.olabel+" ";if(!this.singleMode&&this._lines[D.parts[0].lineIdx].trim()==ne.trim()&&D.parts[0].lineIdx!=b){let ee=P.parts[0],xe=this._lines[ee.lineIdx].substring(ee.b,ee.s).replace(/\d+/,P.label+1+"")+" ";return A.push(`${D.parts[0].lineIdx}|0|${ne.length}|`),A.push(`${b}|${x}|${x}|${xe}`),A}if(D.label<"D"&&("enter"!=w||b>0&&""!=this._lines[b-1].trim()&&D.parts[0].lineIdx!=b))return A.push(`${b}|${x}|${x}|${H}`),A;if(!this.singleMode&&D.label>="D"&&D.parts[0].lineIdx!=b&&"enter"==w&&b==this._lines.length-1){let ee=P.parts[0],xe=this._lines[ee.lineIdx].substring(ee.b,ee.s).replace(/\d+/,P.label+1+"")+" ";return A.push(`${b}|${x}|${x}|\n${xe}`),A}}if(!D&&!Q&&P&&"enter"==w&&""==this._lines[b].trim()&&b>0&&""!=this._lines[b-1].trim()){let R=P.parts[0],J=this._lines[R.lineIdx].substring(R.s).trim();if(this.singleMode||""!=J)if(0==P.answers.length)A.push(`${b}|${x}|${x}|A. `);else if(!this.singleMode){let H=P.parts[0],ee=this._lines[H.lineIdx].substring(H.b,H.s).replace(/\d+/,P.label+1+"")+" ";A.push(`${b}|${x}|${x}|${ee}`)}return A}return A}getSuggestions(b,x,w,E){return new Promise(k=>{var A,C;let P=null!==(A=E?.substring(0,x))&&void 0!==A?A:"",D=this.singleMode?[new p.AnsSugg,new T.EndSugg,new j.ChooseSugg]:[new u.IncludeSugg(this.apiService,k),new g.QuestSugg,new p.AnsSugg,new _.SectionSugg,new T.EndSugg,new j.ChooseSugg],Q=[],U=this.getCurPos(b,x),R=U[0],J=U[1],ee=R?{type:U[2]?"h":J?"a":"q",quest:R,ansLabel:J?J.label:void 0,secLabel:R.group?null===(C=this._lstQuest.filter(W=>W.isGroup).pop())||void 0===C?void 0:C.parts[0].text:void 0,lineIdx:b,col:x}:void 0;for(let W of D){let xe=W.run(P,w,ee);if(1==xe.length&&"-1"==xe[0])return;Q.push(...xe)}k(Q)})}getEditHint(){let x=0,w=[],E=!1;for(const k of this._lstQuest){if(k.isGroup)continue;let A="",C="A".charCodeAt(0)-1,P=!1;for(const D of k.answers){if(""==D.olabel)break;if(A+=D.label,!P&&!"ABCDEFGHIJKLMN".startsWith(A)&&(P=!0),C++,P){let Q=D.parts[0],U="*"==this._lines[Q.lineIdx].substring(Q.b,Q.b+1)?1:0;w.push(`${Q.lineIdx}|${Q.b+U}|${Q.b+U+1}|${String.fromCharCode(C)}`)}}if(!E&&k.label-x<=0&&x>0&&(E=!0),E){let D=k.parts[0],U=this._lines[D.lineIdx].substring(D.b,D.s).replace(/\d+/,x+1+"");w.push(`${D.lineIdx}|${D.b}|${D.s}|${U}`),x++}else x=k.label}return w}getCurPos(b,x){var w,E;let k=!1,A=null,C=null,P=!1,D=!1;for(const Q of this._lstQuest)if(!Q.isGroup){for(const U of Q.parts)if(U.lineIdx==b){k=!0,A=Q,C=null,Q.parts.length>0&&null!==(w=Q.parts[0].text)&&void 0!==w&&w.trim().startsWith("[@")&&(D=!0,k=!1);break}if(D&&Q.parts.length>0&&(null===(E=Q.parts[0].text)||void 0===E||!E.trim().startsWith("[@")))break;for(const U of Q.answers)for(const R of U.parts)if(R.lineIdx==b&&R.s<=x&&(!R.e||R.e>=x)){k=!0,A=Q,C=U;break}if(k)break;if(Q.help)for(const U of Q.help)if(U.lineIdx==b&&U.s<=x&&(!U.e||U.e>=x)){k=!0,A=Q,C=null,P=!0;break}if(k)break}return[A,C,P]}}},38469:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.AnsSugg=void 0;const M=S(99934);q.AnsSugg=class p extends M.Sugg{run(T,u,g){if(!g||"h"==g.type||/^\[?\s*@/.test(T))return[];let _=g.ansLabel?String.fromCharCode(g.ansLabel.charCodeAt(0)+1)+".":"A.";return[_+"|"+_+" "]}}},50437:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ChooseSugg=void 0;const M=S(99934);q.ChooseSugg=class p extends M.Sugg{run(T,u,g){if(T!=u||!g)return[];let _=[];if("h"==g.type&&g.quest)for(let h of g.quest.answers)_.push(`azt_lang_sugg_choose ${h.label}|azt_lang_sugg_choose ${h.label}`);return _}}},97525:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.EndSugg=void 0;const M=S(99934);q.EndSugg=class p extends M.Sugg{run(T,u){return T!=u?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},30091:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IncludeSugg=void 0;const M=S(58343),p=S(99934);q.IncludeSugg=class j extends p.Sugg{constructor(u,g){super(),this.apiService=u,this.resolve=g}run(u){let g=u;if(g.startsWith("@[")&&(g=g.substring(1)),/^\[?\s*@/.test(g)&&null!=this.apiService){let _=g.replace("]..","].").split("].").map(D=>D.replace("]","").replace("[","").replace("@","").trim()),h=_[_.length-1],m=0,b=!0,x="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",w="azt_lang_sugg_get_all|[ALL]|snippet",E=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],k="",A="",P=g.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let D=P.next();if(D.done)break;A="user_"+D.value[1]}if(_.length>1){h.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(h)&&(k=h.substring(0,1),h="");let D=_[_.length-2];if(D.startsWith("F:"))return this.resolve([x]),["-1"];if(D.indexOf(",")>=0){let Q=[];return""==k&&Q.push(x),Q.push(...E),this.resolve(Q),["-1"]}if(h.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(h))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(D))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(D)&&(m=+D.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(D)&&(A="user")),/^T[\-\d]+:/.test(D)&&(m=+D.split(":")[0].trim().substring(1),b=!1),/^G[\-\d]+:/.test(D)){let Q=D.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${g}[azt_lang_sugg_get_all ${Q} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+g+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(D)||/^Q[\-\d]+:/.test(h))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(D)||/^Q[\-\d]+:/.test(h))return this.resolve([]),["-1"]}if(b)return"F"==k?(this.resolve(E),["-1"]):(this.apiService.searchRes(A,m).then(D=>{let Q="";-1==m&&(Q=":user-"),(0==m||-1==m)&&(x="");let U=D.map(R=>{let J=R.name;return J=J.replaceAll(/[\[\],\.\-]+/g,""),`${J}|[@${("cat"==R.type?"C":"T")+R.id}:${Q}${J}].|${"cat"==R.type?"folder":"file"}`});""!=x&&""==k&&(U.push(x),U.push(...E)),this.resolve(U)}),["-1"]);if(g.endsWith(".")||g.endsWith(",")){let D=Math.abs(m);return this.apiService.getQuestion(D).then(Q=>{let U=Q.map(H=>{let ne=("group"==H.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+H.label,ee=("group"==H.type?"G":"Q")+H.id,W="group"==H.type?".":"",xe=H.content,Ce="group"==H.type?"class":"function",fe="group"==H.type?Q.filter(me=>me.groupId==H.id).length+"-":"",be="group"!=H.type&&H.groupId?"G"+M.Utils.zeroPad(3,H.groupId):"G000";return"group"==H.type&&(be="G"+M.Utils.zeroPad(3,H.id)),{name:ne,code:ee,groupQnum:fe,posfix:W,icon:Ce,sort:`${be}-${"group"==H.type?"G"+M.Utils.zeroPad(3,H.id):"Q"+M.Utils.zeroPad(10,H.id)}`,doc:xe}});U.sort((H,ne)=>H.sort>ne.sort?1:-1);let R=U.map(H=>`${H.name}|[@${H.code}:${H.groupQnum}${H.name}]${H.posfix}|${H.icon}|${H.sort}|${H.doc}`),J=[];if(""!=x){""==k&&(J.push(x),J.push(...E));let H=w.split("|");H[1]=U.map((ne,ee)=>(0==ee?"":g)+`[@${ne.code}:${ne.groupQnum}${ne.name}]`+(ne.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),J.push(H.join("|"))}J.push(...R),"F"==k&&(J=E),this.resolve(J)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},42167:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QuestSugg=void 0;const M=S(58343),p=S(99934);q.QuestSugg=class j extends p.Sugg{run(u,g,_){var h;if(u!=g)return[];if(!_)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let m=null!==(h=_.quest.olabel)&&void 0!==h?h:"azt_lang_sugg_question_cc 1.",b=+M.Utils.getNumberFromStr(m),x=m.replace(/\d+/,b+1+"");return x=_.quest.olabel?M.Utils.capitalizeFirstLetter(x):x,[M.Utils.removeAccents(x)+"|"+x+" ",x+"|"+x+" "]}}},36801:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SectionSugg=q.toArabic=q.isRoman=q.toRoman=q.BaseNumbers=q.RomanNumber=void 0;const M=S(58343),p=S(99934);class j{constructor(m,b){this.baseUnits=0,this.thousands=0,this.num=m,this.str=b}}function T(h){let m,b;if(h<=0||h>3999)return"";{m=0;let x="";for(h=Math.floor(h);h>0;)b=q.BaseNumbers[m],0===Math.floor(h/b.num)?++m:(x+=b.str,h-=b.num);return x}}function u(h){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(h)}function g(h){let m=h.toUpperCase();if(!u(m))return null;let b=0,x=0;for(;m.length>0&&x<q.BaseNumbers.length;){const w=q.BaseNumbers[x];m.startsWith(w.str)?(b+=w.num,m=m.substring(w.str.length)):x++}return m.length>0?null:b}q.RomanNumber=j,q.BaseNumbers=[new j(1e3,"M"),new j(900,"CM"),new j(500,"D"),new j(400,"CD"),new j(100,"C"),new j(90,"XC"),new j(50,"L"),new j(40,"XL"),new j(10,"X"),new j(9,"IX"),new j(5,"V"),new j(4,"IV"),new j(1,"I")],q.toRoman=T,q.isRoman=u,q.toArabic=g,q.SectionSugg=class _ extends p.Sugg{run(m,b,x){var w,E;if(m!=b)return[];if(!x)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==x.type||!x.secLabel)return[];let k="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(x.secLabel.toLowerCase())){let A=x.secLabel.split("."),C=+M.Utils.getNumberFromStr(A[0]);k=A[0].replace(/\d+/,C+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(x.secLabel.toLowerCase())){let C=x.secLabel.split(".")[0].split(" "),D=T((null!==(w=g(C.pop()))&&void 0!==w?w:0)+1);C.push(D),k=C.join(" ")+"."}else/^[ivx]+\./.test(x.secLabel.toLowerCase())&&(k=T((null!==(E=g(x.secLabel.split(".")[0]))&&void 0!==E?E:0)+1)+".");return[M.Utils.removeAccents(k)+"|"+k+" ",k+"|"+k+" "]}}},99934:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Sugg=void 0,q.Sugg=class S{constructor(){this.lang="vi"}setLang(p){this.lang=p}}},80581:function(ce,q,S){"use strict";var M=this&&this.__createBinding||(Object.create?function(j,T,u,g){void 0===g&&(g=u);var _=Object.getOwnPropertyDescriptor(T,u);(!_||("get"in _?!T.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return T[u]}}),Object.defineProperty(j,g,_)}:function(j,T,u,g){void 0===g&&(g=u),j[g]=T[u]}),p=this&&this.__exportStar||function(j,T){for(var u in j)"default"!==u&&!Object.prototype.hasOwnProperty.call(T,u)&&M(T,j,u)};Object.defineProperty(q,"__esModule",{value:!0}),p(S(99230),q),p(S(37562),q),p(S(95970),q),p(S(5181),q),p(S(58343),q)},44103:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.CanvasUtil=void 0;const M=S(58343);class p{static drawPoint(T,u,g){null!=T&&(T.fillStyle=u,T.beginPath(),T.arc(g.left,g.top,5,0,2*Math.PI),T.fill())}static drawBox(T,u,g,_){null!=T&&(_?(T.fillStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.fill()):(T.strokeStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.stroke()))}static drawBox2(T,u,g,_,h){null!=T&&(T.strokeStyle=u,T.beginPath(),T.rect(h[4],h[5],g,_),T.stroke())}static drawLine(T,u,g,_){null!=T&&(T.strokeStyle=u,T.beginPath(),T.moveTo(g,_),T.lineTo(T.canvas.width-10,_),T.stroke())}static drawText(T,u,g,_){null!=T&&(T.font="11px Arial",T.fillStyle=u,T.fillText(_,g[4],g[5]))}static isLineIntersec(T,u){let g=T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height,_=u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height,h=T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN,m=u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN,b=this.isSameLine(T,u);return(g||_)&&(h||m)&&!b}static isLineVIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN)&&Math.abs(u.transform[4]-T.transform[4])>M.CONST.INTERSEC_MARGIN/2}static isSameLine(T,u){return Math.abs(T.transform[5]+T.height-(u.transform[5]+u.height))<=M.CONST.LINE_MAGIN}static isObjIntersec(T,u){return T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height}static isObjFullIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width)}static isFirstLineOfPage(T,u){return!(T<0||T>=u.length||0!=T&&u[T-1].pageIndex==u[T].pageIndex)}static isLastLineOfPage(T,u){return!(T<0||T>=u.length||T!=u.length-1&&u[T+1].pageIndex==u[T].pageIndex)}static getTopLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5],E=0,k=3*b;if(!p.isFirstLineOfPage(u,g)){let C=p.isSameLine(g[u-1],_);p.isLineIntersec(g[u-1],_)?(w=g[u-1].transform[5]+g[u-1].height,E=g[u-1].transform[5],g[u-1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E-=2*M.CONST.MARGIN_LEFT:E+=g[u-1].height*x,b=1,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u-2>=0?g[u-2].transform[5]+g[u-2].height*x:g[u-1].transform[5]+g[u-1].height*x,C&&p.isFirstLineOfPage(u-1,g)&&(E=0))}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w>E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w+=k),w-=b}}return[_.transform[5],1]}static arrContains(T,u){for(const g of u)if(g==T)return!0;return!1}static getBottomLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5]+_.height,E=9999,k=3*b;if(!p.isLastLineOfPage(u,g)){let C=p.isSameLine(g[u+1],_);p.isLineIntersec(g[u+1],_)?(w=g[u+1].transform[5],E=g[u+1].transform[5]+g[u+1].height,g[u+1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E+=2*M.CONST.MARGIN_LEFT:E-=g[u+1].height*x,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u+2<g.length?g[u+2].transform[5]+g[u+2].height-g[u+2].height*x:g[u+1].transform[5]+g[u+1].height-g[u+1].height*x,C&&p.isLastLineOfPage(u+1,g)&&(E=9999));let P=g[u+1].top;if(P&&w>=P&&!C)return[P,0]}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w<E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w-=k),w+=b}}return[_.transform[5]+_.height,1]}static hasColor(T,u,g,_,h){let m=Math.round(u),b=Math.round(m+_),x=Math.round(g),w=Math.round(x+h);for(let P=x;P<w;P++)for(let D=m;D<b;D++){let Q=4*(P*T.width+D);if((T.data[Q]+T.data[Q+1]+T.data[Q+2])/3<150)return!0}return!1}static calIndexPos2(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0;for(const R of T){P=this.isObjIntersec(T[0],R),E=R.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=R.str.trim()||k!=R.transform[5]?1:0),C=E+2*M.CONST.MARGIN_LEFT>=w;let J=R.transform[4]+R.width;if(P&&(w=J),J>x&&P&&(x=J),b+=R.str.length,b>_&&C&&P){R.transform.forEach(W=>{m.push(W)}),m[3]=R.height,m[2]=A,m[1]=R.str.length-b+_;let H=R.str.substr(0,R.str.length-b+_+1);if(H.length==R.str.length){m[4]=m[4]+R.width;break}var Q=u[R.fontName].fontFamily,U=Math.hypot(R.transform[2],R.transform[3]);g.font=`${U}px ${Q}`;let ne=g.measureText(H).width,ee=g.measureText(R.str).width;m[4]=m[4]+R.width*ne/ee;break}P&&(k=R.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static calIndexPos(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0,D="";for(const J of T){P=this.isObjIntersec(T[0],J),E=J.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?1:0,D+=(E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?"|":"")+J.str),C=E+2*M.CONST.MARGIN_LEFT>=w;let H=J.transform[4]+J.width;if(P&&(w=H),H>x&&P&&(x=H),b+=J.str.length,b>_&&C&&P){let ne=J.str.substr(0,J.str.length-b+_);var U=u[J.fontName].fontFamily,R=Math.hypot(J.transform[2],J.transform[3]);g.font=`${R}px ${U}`;let ee=g.measureText(ne).width,W=g.measureText(J.str).width;J.transform.forEach(xe=>{m.push(xe)}),m[4]=m[4]+J.width*ee/W,m[3]=J.height,m[2]=A,m[1]=J.str.length-b+_;break}P&&(k=J.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static getTextBottom(T,u,g,_){let h=Math.atan2(T[1],T[0]);u.vertical&&(h+=Math.PI/2);const m=Math.hypot(T[2],T[3]),b=m*p.getAscent(u.fontFamily,g,_);let x=T[5],w=0;w=0===h?b:b*Math.cos(h);let E=0*w;return x=T[5]-w-E,[x,m+E]}static getAscent(T,u,g){const m=g.get(T);if(m)return m;u.save(),u.font=`30px ${T}`;const b=u.measureText("");let x=b.fontBoundingBoxAscent,w=Math.abs(b.fontBoundingBoxDescent);if(x){u.restore();const k=x/(x+w);return g.set(T,k),k}u.strokeStyle="red",u.clearRect(0,0,30,30),u.strokeText("g",0,0);let E=u.getImageData(0,0,30,30).data;w=0;for(let k=E.length-1-3;k>=0;k-=4)if(E[k]>0){w=Math.ceil(k/4/30);break}u.clearRect(0,0,30,30),u.strokeText("A",0,30),E=u.getImageData(0,0,30,30).data,x=0;for(let k=0,A=E.length;k<A;k+=4)if(E[k]>0){x=30-Math.floor(k/4/30);break}if(u.restore(),x){const k=x/(x+w);return g.set(T,k),k}return g.set(T,.8),.8}static getMaxLineRight(T,u){let g=0;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4]+_.width;h>g&&(g=h)}return g}static getMinLineLeft(T,u){let g=99999;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4];h<g&&(g=h)}return g}}q.CanvasUtil=p},85492:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PdfUtils=void 0;const M=S(58343),p=S(44103);class j{constructor(){let u=document.createElement("canvas");this.tempCanvas=u.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(u,g){let h={url:URL.createObjectURL(u),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const m=pdfjsLib.getDocument(h);let b=[],x=this;m.promise.then(function(w){x.optionalContentConfigPromise=w.getOptionalContentConfig();let E=w._pdfInfo.numPages;for(let k=1;k<=E;k++)w.getPage(k).then(A=>{b.push(A),b.length==E&&(b=b.sort((C,P)=>C._pageIndex>P._pageIndex?1:-1),g(b))})},function(w){console.error(w)})}getImages(u,g){let _=[];if("function"!=typeof u.objs.getAll)return _;let h=u.objs.getAll(),m=Object.keys(h);for(const b of m)h[b].data.pageIndex=g,_.push(h[b].data);return _}isImageObj(u){return-999==u.transform[0]&&"img"==u.str}getLines(u,g,_,h){let m=h.scale,b=u.items.length;for(let A=0;A<b;A++){let C=u.items[A];this.isImageObj(C)||(C.transform=j.transform(h.transform,C.transform),C.width=C.width*m),C.transform[4]+C.width>_.canvas.width&&(C.width=_.canvas.width-C.transform[4]-20);let P=this.isImageObj(C)?[C.transform[5],C.height]:p.CanvasUtil.getTextBottom(C.transform,u.styles[C.fontName],this.tempCanvas,this.ascentCache);C.height=P[1];let D=Math.ceil(P[0]);C.transform[5]=D}u.items.sort((A,C)=>1e6*Math.floor(A.transform[5])-A.transform[4]<1e6*Math.floor(C.transform[5])-C.transform[4]?-1:1);let E,x=[],w=0;this.imageCache[g]?E=this.imageCache[g]:(E=_.getImageData(0,0,_.canvas.width,_.canvas.height),this.imageCache[g]=E);let k={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let A=0;A<b;A++){let C=u.items[A];if(this.isImageObj(C))for(let D=0;D<b;D++){let Q=u.items[D];if(!this.isImageObj(Q)&&A!=D&&p.CanvasUtil.isObjIntersec(C,Q)&&""!=Q.str.trim()&&!/^[\sA-K\.\|]+$/g.test(Q.str)){C.str="";break}}if(p.CanvasUtil.arrContains(C.str.trim(),M.CONST.SKIP_CHAR))continue;let P=Math.floor(C.transform[5]+C.height);0!=w?w-P>=-M.CONST.LINE_MAGIN?this.addTxtToLine(k,C):0!=k.textObjs.length&&(x.push(k),k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height)):(k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height))}x.push(k);for(const A of x)this.calculateSize(A);this.findAndMergeAnsQuestBlock(x,"ans"),this.findAndMergeAnsQuestBlock(x,"quest"),this.findAndMergeBlock(x),this.mergeIntersecLine(x),this.mergeSmallLine(x,E);for(const A of x)this.calculateSize(A);return x}mergeIntersecLine(u){let g=0;for(;g<u.length;){let _=u[g];g++,g<u.length&&p.CanvasUtil.isLineVIntersec(_,u[g])&&(this.mergeLine(_,u[g]),u.splice(g,1),g--)}}findAndSplitQuestAnsLine(u,g,_){let h=0,m=[],b=M.CONST.BREAK_LINE_PATTERN.join("|");for(const x of u){x.top=void 0,x.bottom=void 0;let w=x.strLine.replace(/\|/g,"").trim().match(b);if(null!=w&&w.length>0){let E=/[\s\|\.]+[B\u0412][\s\|]*\./g,k=x.strLine.trim().toUpperCase().match(E);if(null!=k&&k.length>0){let A=w[0].toUpperCase().indexOf("A");m.push({lineIndex:h,strIndex:A})}}h++}for(let x=m.length-1;x>=0;x--){let w=m[x].lineIndex;this.splitLine(w,g[u[w].pageIndex],_[u[w].pageIndex],m[x].strIndex,u)}}mergeSmallLine(u,g){let _=0,h=1.2*M.CONST.LINE_SMALL_HEIGHT;for(;_<u.length;){let m=u[_];if(!m||!this.isSmallLine(m)){_++;continue}_-1>=0&&!u[_-1].bottom&&(u[_-1].bottom=p.CanvasUtil.getBottomLine(g,_-1,u)[0]),_+1<u.length&&!u[_+1].top&&(u[_+1].top=p.CanvasUtil.getTopLine(g,_+1,u)[0]);let b=_-1<0?-9999:this.getLineTop(m)-this.getLineBot(u[_-1]),x=_+1>=u.length?-9999:this.getLineTop(u[_+1])-this.getLineBot(m),w=_-1>=0&&u[_-1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_-1].transform[4]+u[_-1].width,E=_+1<u.length&&u[_+1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_+1].transform[4]+u[_+1].width;if(0==_&&x<=h&&E){this.mergeLine(u[_+1],m),u.splice(_,1),_--;continue}if(_==u.length-1&&b<=h&&w){this.mergeLine(u[_-1],m),u.splice(_,1),_--;continue}let k=-1;b>x&&E&&x<=h?k=_+1:b<=x&&w&&b<=h?k=_-1:b<=x&&E&&x<=h?k=_+1:b>x&&w&&b<=h&&(k=_-1),k>=0?(this.mergeLine(u[k],m),u.splice(_,1),_--):_++}}isSmallLine(u){return u.height<M.CONST.LINE_SMALL_HEIGHT}mergeLine(u,g){for(const _ of g.textObjs)this.addTxtToLine(u,_)}findAndMergeAnsQuestBlock(u,g){let h=0;for(;h<u.length;){if("ans"==g&&this.isAnsLine(u[h])||"quest"==g&&this.isQuestLine(u[h])){let b=h,x=-1,w=1,E=[];for(;w<=10;){if(b=h+x*w,b<0){x=1,w=1;continue}if(b>=u.length)break;let k=this.isAnsLine(u[b]),A=k||this.isQuestLine(u[b]),C="ans"==g&&k&&p.CanvasUtil.isSameLine(u[h],u[b]),P=!A&&p.CanvasUtil.isLineIntersec(u[h],u[b])&&u[b].transform[4]>u[h].transform[4];if((C||P)&&E.push(b),w++,A&&1==x)break;(w>10||A)&&-1==x&&(x=1,w=1)}E.sort((k,A)=>k<A?1:-1);for(const k of E)for(const A of u[k].textObjs)this.addTxtToLine(u[h],A);for(const k of E)u.splice(k,1),k<h&&h--}h++}}findAndMergeBlock(u){let g=0;for(;g<u.length;){if(this.isAnsLine(u[g])||this.isQuestLine(u[g])){g++;continue}let h=g+1;for(;h<u.length&&u[g].pageIndex==u[h].pageIndex;){let m=this.isAnsLine(u[h])||this.isQuestLine(u[h]);if(p.CanvasUtil.isLineIntersec(u[g],u[h])&&!m||p.CanvasUtil.isSameLine(u[g],u[h])){for(const b of u[h].textObjs)this.addTxtToLine(u[g],b);u.splice(h,1),h=g}h++}g++}}isAnsLine(u){let _=u.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=_&&_.length>0}isQuestLine(u){let g=M.CONST.QUESTION_PATTERN.join("|"),_=u.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=_&&_.length>0}encodeLines(u,g){let _="",h=0;for(const m of g){if(m.height<M.CONST.LINE_SMALL_HEIGHT){h-1>=0&&!g[h-1].bottom&&(g[h-1].bottom=p.CanvasUtil.getBottomLine(u,h-1,g)[0]),h+1<g.length&&!g[h+1].top&&(g[h+1].top=p.CanvasUtil.getTopLine(u,h+1,g)[0]);let b=h-1<0?-9999:this.getLineTop(m)-this.getLineBot(g[h-1]),x=h+1>=g.length?-9999:this.getLineTop(g[h+1])-this.getLineBot(m),w=h-1>=0&&g[h-1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h-1].transform[4]+g[h-1].width,E=h+1<g.length&&g[h+1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h+1].transform[4]+g[h+1].width,k=1.2*M.CONST.LINE_SMALL_HEIGHT;Math.abs(b)>=k&&Math.abs(x)>=k?_+="L":_+=-9999==b?"3":-9999==x?"4":b>x&&E?"2":b<=x&&w?"1":b<=x&&E?"2":b>x&&w?"1":"L"}else _+="L";h++}return _}getLineTop(u){return u.top?u.top:u.transform[5]}getLineBot(u){return u.bottom?u.bottom:u.transform[5]+u.height}splitLine(u,g,_,h,m){let b=m[u],x=p.CanvasUtil.calIndexPos(b.textObjs,g,_,h,!0),w=this.newLine(b.textObjs[0],b.pageIndex),E=x[2],k=x[1],A=b.textObjs[E],C=A.transform,P={str:A.str.substr(0,k),width:x[4]-C[4],height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],C[4],C[5]]},D={str:A.str.substr(k),width:A.width-P.width,height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],x[4],C[5]]},Q=b.textObjs;b.textObjs=[],w.textObjs=[];for(let U=0;U<Q.length;U++)U<E?this.addTxtToLine(b,Q[U]):U>E?this.addTxtToLine(w,Q[U]):(this.addTxtToLine(b,P),this.addTxtToLine(w,D));return this.calculateSize(b),this.calculateSize(w),u==m.length-1?m.push(w):m.splice(u+1,0,w),w}findAndMergeSmallLine(u,g,_){let h=0,m=u.matchAll(_),b=[];for(;;){let x=m.next();if(x.done)break;let w=x.value[0],E=x.value.index,k=0,A=[];for(let C=0;C<w.length;C++)"L"==w[C]?k=E+C:A.push(E+C);for(const C of A){for(const P of g[C].textObjs)this.addTxtToLine(g[k],P);g[k].top=void 0,g[k].bottom=void 0,b.push(C)}h++}b.sort((x,w)=>x<w?1:-1);for(const x of b)g.splice(x,1);return h}newLine(u,g){let _={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return _.transform[4]=u.transform[4],_.transform[5]=u.transform[5],_.height=u.height,_.width=u.width,_.txtLength=u.str.length,_.textObjs.push(u),_}addTxtToLine(u,g){g.transform[4]<u.transform[4]&&(u.transform[4]=g.transform[4]),g.transform[5]<u.transform[5]&&(u.transform[5]=g.transform[5]),g.transform[5]+g.height>u.transform[5]+u.height&&(u.height=g.transform[5]+g.height-u.transform[5]),g.transform[4]+g.width>u.transform[4]+u.width&&(u.width=g.transform[4]+g.width-u.transform[4]),u.txtLength+=g.str.length,u.textObjs.push(g);let _=u.transform[4]+u.width,h=u.height;for(const m of u.textObjs)m.transform[4]+m.width>_&&(_=m.transform[4]+m.width),m.transform[5]+m.height>u.transform[5]+h&&(h=m.transform[5]+m.height-u.transform[5]);u.width=_-u.transform[4],u.height=h}static transform(u,g){return pdfjsLib.Util.transform(u,g)}render(u,g,_,h){var m;let b=this,x=u.length;for(let w=0;w<x;w++){let E=document.createElement("div");E.className="pdf-page",E.id="page-"+w,null===(m=document.getElementById(g))||void 0===m||m.appendChild(E),b.renderPage(u[w],_,h)}}calculateSize(u){if(0==u.textObjs.length)return;u.textObjs.sort((A,C)=>1e6*Math.floor(A.transform[4])+A.transform[5]>1e6*Math.floor(C.transform[4])+C.transform[5]?1:-1),u.strLine="";let g=0,_=0,h=0,m=0,b=9999,x=0,w=9999;for(const A of u.textObjs){let C=p.CanvasUtil.isObjIntersec(u.textObjs[0],A);h=A.transform[4];let P=h-_>M.CONST.SPLIT_MARGIN&&""!=A.str.trim()||m!=A.transform[5]?"|":"";u.strLine+=P+A.str,h<w&&(w=h);let D=A.transform[4]+A.width;C&&(_=D),D>g&&C&&(g=D),C&&(m=A.transform[5]),A.transform[5]<b&&(b=A.transform[5]),A.transform[5]+A.height>x&&(x=A.transform[5]+A.height)}u.transform[4]=w,u.transform[5]=b,u.width=g-w,u.height=x-b,u.transform[0]=b,u.transform[1]=x;let E=M.CONST.TVCN_CHAR,k=u.strLine;for(const A of E)k=k.replace(new RegExp(A[0],"g"),A[1]);u.strLine=k}renderPage(u,g,_){let h=u._pageIndex,m=u.getViewport({scale:g}),b=.8*m.width,x=document.createElement("canvas"),w=document.getElementById("page-"+h);w?.appendChild(x),x.id="canvas"+h;let E=x.getContext("2d",{alpha:!1});x.height=m.height,x.width=m.width,x.style.height=m.height*b/m.width+"px",x.style.width=b+"px",w&&(w.style.width=x.style.width,w.style.height=x.style.height);const A={canvasContext:E,transform:[1,0,0,1,0,0],viewport:m,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};u.render(A).promise.then(function(){_&&_(E,u._pageIndex,m)})}}q.PdfUtils=j},5181:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Process=void 0;const M=S(58343),p=S(95970),j=S(31617),T=S(44103),u=S(85492);q.Process=class g{constructor(h){var m,b;this.config=h,M.CONST.load(h);let x=JSON.parse(h);M.CONST.LINE_SMALL_HEIGHT=x.LINE_SMALL_HEIGHT*M.CONST.RENDER_SCALE,M.CONST.SPLIT_MARGIN=x.SPLIT_MARGIN*M.CONST.RENDER_SCALE,M.CONST.INTERSEC_MARGIN=x.INTERSEC_MARGIN*M.CONST.RENDER_SCALE,M.CONST.LINE_MAGIN=x.LINE_MAGIN*M.CONST.RENDER_SCALE,M.CONST.MARGIN_LEFT=x.MARGIN_LEFT*M.CONST.RENDER_SCALE,M.CONST.FOOTER_PATTERN=null!==(m=x.FOOTER_PATTERN)&&void 0!==m?m:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],M.CONST.HELP_ANS_PATTERN=null!==(b=x.HELP_ANS_PATTERN)&&void 0!==b?b:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(h){this.updateStatusCallback=h}setOncompleteCallback(h){this.onCompleteCallback=h}getOverview(h){let m=h.filter(C=>C.isGroup).length,b=h.filter(C=>!C.isGroup).length,x=h.filter(C=>C.answers.length>0).length,w=h.filter(C=>!C.isGroup&&0==C.answers.length).length,E=h.filter(C=>C.answers.length>4),k=E.length+"|"+E.map(C=>C.num).join(",");return E=h.filter(C=>C.answers.length<4&&C.answers.length>0),{groupNum:m+"",questNum:b+"",tnNum:x+"",tlNum:w+"",tnGt4:k,tnLt4:E.length+"|"+E.map(C=>C.num).join(",")}}parsePdf(h){let m=new u.PdfUtils;m.loadPdf(h,b=>{const x=b.length;let w=[],E=[],k=document.createElement("div");k.id="hiddenWrapper",k.style.width="1px",k.style.height="1px",k.style.overflow="hidden",k.style.opacity="0",k.style.zIndex="-9999",k.style.position="fixed",k.style.top="0",k.style.left="0",document.body.appendChild(k);let A=document.createElement("div"),C="canvasWrapper";A.id=C,k.appendChild(A);const P=(new Date).getTime();let D=[];m.render(b,C,M.CONST.RENDER_SCALE,(Q,U,R)=>{if(null!=Q&&(w[U]=Q,E[U]=R),D.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${D.length}/${x}`),D.length==x){const J=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(J-P)/1e3+" secs"),this.startAnalyze(w,E,b)}})})}imgToTextObj(h,m){return{str:"img",fontName:m,width:h.paintWidth,height:h.paintHeight,transform:[-999,0,0,0,-h.left,-h.top-h.paintHeight]}}startAnalyze(h,m,b){const x=b.length;let w=[],E=[],k=[],A=new u.PdfUtils;const C=(new Date).getTime();for(let P=0;P<x;P++){const D=P;let Q=A.getImages(b[P],D);b[P].getTextContent().then(U=>{for(const J of Q)U.items.push(this.imgToTextObj(J,U.items.length>0?U.items[0].fontName:""));let R=A.getLines(U,D,h[D],m[D]);if(E=E.concat(R),k[D]=U.styles,w.push(1),w.length==x){E.sort((fe,be)=>1e7*fe.pageIndex+(fe.transform.length>0?fe.transform[5]:0)-(1e7*be.pageIndex+(be.transform.length>0?be.transform[5]:0))),A.findAndSplitQuestAnsLine(E,k,h);let J=new j.FooterParser,H=0;for(const fe of E){if((E.length-1==H||H+1<E.length-1&&fe.pageIndex!=E[H+1].pageIndex)&&(fe.isLastLine=!0),fe.isLastLine&&J.parse(fe.strLine).length>0){fe.isFooter=!0;let be=T.CanvasUtil.getBottomLine(A.imageCache[E[H-1].pageIndex],H-1,E);fe.top=be[0]+M.CONST.MARGIN_LEFT}H++}let ne=new p.ExamParser(this.config),ee=E.map(fe=>fe.strLine),W=ne.parse(ee),xe=this.getQuestionInfo(W,E,k,h,A.imageCache);const Ce=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(Ce-C)/1e3+" secs"),this.showOnCanvas(xe,h,M.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(xe,h)}})}}getPosInfo(h,m,b,x,w,E,k,A,C){if(!b.top){let Q=T.CanvasUtil.getTopLine(w,E,x);b.top=Q[0],b.isIntersec=Q[1]}if(!b.bottom){let Q=T.CanvasUtil.getBottomLine(w,E,x);b.bottom=Q[0],b.isIntersec=Q[1]}return{str:"",pageIndex:b.pageIndex,lineIndex:E,transform:"a"==h?T.CanvasUtil.calIndexPos2(b.textObjs,A,k,C?C-1:0):b.transform,startLeft:m>=0?T.CanvasUtil.calIndexPos2(b.textObjs,A,k,m-1):void 0,type:h}}getQuestionInfo(h,m,b,x,w){let E=[];for(const k of h){let A=k.parts[0].lineIdx,C=m[A],P=this.getPosInfo("q",k.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]),D=null;if(A=k.parts[k.parts.length-1].lineIdx,k.answers.length>0){let Q=k.answers[k.answers.length-1];Q.parts.length>0&&(A=Q.parts[Q.parts.length-1].lineIdx)}if(A+=1,A<m.length&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex])),k.isGroup)E.push({num:k.label,answers:[],remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),isGroup:!0,text:k.parts.map(Q=>m[Q.lineIdx])});else{let Q={num:k.label,answers:[],remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),group:k.group,strAns:k.strAns,isFixAns:k.isFixAns,text:k.parts.map(R=>m[R.lineIdx])};E.push(Q);let U=0;for(const R of k.answers){let J={pageIndex:Q.remove.pageIndex,top:Q.remove.top-1,left:Q.remove.left-1,width:1,heigh:1};if(R.parts.length>0){if(A=R.parts[0].lineIdx,C=m[A],1==C.isIntersec&&(Q.isFixAns=!0),R.parts.length>1&&(Q.isFixAns=!0),P=this.getPosInfo("a",R.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex],R.parts[0].b),D=null,U<k.answers.length-1){let ee=k.answers[U+1];A=ee.parts[0].lineIdx,C=m[A],D=this.getPosInfo("a",ee.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex],ee.parts[0].b)}else A=R.parts[R.parts.length-1].lineIdx+1,A<m.length-1&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]));let H=this.getAnsRemoveBox(P,m),ne={label:R.label,remove:H,isCorrect:R.isCorrect,positions:R.isInline?[H]:this.getAnsBoxes(P,m,D,x[C.pageIndex].canvas.height)};Q.answers.push(ne)}else Q.answers.push({label:R.label,remove:J,isCorrect:R.isCorrect,positions:[J]});U++}k.help&&k.help.length>0&&(A=k.help[0].lineIdx,C=m[A],P=this.getPosInfo("q",k.help[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]),D=null,A=k.help[k.help.length-1].lineIdx+1,A<m.length&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex])),Q.help={num:k.label,remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),text:k.help.map(R=>m[R.lineIdx])})}}return E}showHidden(){let h=document.getElementById("hiddenWrapper");h&&(h.style.opacity="1",h.style.width="",h.style.height="",h.style.overflow="",h.style.position="")}showOnCanvas(h,m,b){const x=(new Date).getTime(),w=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(b.indexOf("quest")>=0)for(const k of h){for(const A of k.positions)T.CanvasUtil.drawBox(m[A.pageIndex],k.isGroup?"black":"red",A);T.CanvasUtil.drawBox(m[k.remove.pageIndex],"yellow",k.remove);for(const A of k.answers){for(const C of A.positions)T.CanvasUtil.drawBox(m[C.pageIndex],w.get(A.label)+"",C,!0);T.CanvasUtil.drawBox(m[A.remove.pageIndex],"yellow",A.remove),A.isCorrect&&T.CanvasUtil.drawPoint(m[A.positions[0].pageIndex],"green",A.positions[0])}if(k.help){for(const A of k.help.positions)T.CanvasUtil.drawBox(m[A.pageIndex],"orange",A);k.help.remove&&T.CanvasUtil.drawBox(m[k.help.remove.pageIndex],"yellow",k.help.remove)}}const E=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(E-x)/1e3+" secs")}getAnsRemoveBox(h,m){let b=h.startLeft?h.startLeft[5]-2:m[h.lineIndex].top,x=h.transform[4]-M.CONST.MARGIN_LEFT,w=h.startLeft?h.startLeft[5]+h.startLeft[3]:m[h.lineIndex].bottom;return{pageIndex:h.pageIndex,top:b||20,left:x,heigh:w&&b?w-b:0,width:(h.startLeft?h.startLeft[4]:0)-x}}getAnsBoxes(h,m,b,x){const w=x,E=M.CONST.MARGIN_LEFT;let k=[],A=m[h.lineIndex].top,C=m[h.lineIndex].bottom;if(!A||!C)return[];let D=C,Q=h.transform[4]-E,U=b&&h.lineIndex==b.lineIndex?b.transform[4]-E:m[h.lineIndex].transform[4]+m[h.lineIndex].width+E;if(k.push({pageIndex:h.pageIndex,top:A,left:Q,width:U-Q,heigh:C-A}),b&&b.lineIndex==h.lineIndex)return k;A=C,C=w,U=0;let R=h.pageIndex,J=0;for(J=h.lineIndex+1;J<m.length;J++){if(C==w&&T.CanvasUtil.isLastLineOfPage(J,m)){let ne=m[J].isFooter?m[J-1]:m[J];C=ne.transform[5]+ne.height+20}let H=m[J].top;if(J>h.lineIndex+1&&!m[J-1].isFooter){let ne=m[J-1].transform[4]+m[J-1].width+E;ne>U&&(U=ne);let ee=m[J-1].transform[4]-E;ee<Q&&(Q=ee)}if(m[J].isFooter&&H)J-h.lineIndex>1?(C=m[J-1].transform[5]+m[J-1].height+M.CONST.LINE_MAGIN,Q=m[h.lineIndex+1].transform[4]-E):C=m[h.lineIndex].bottom;else if(m[J].pageIndex>R&&(C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&J-h.lineIndex>1&&k.push({pageIndex:R,top:A,left:Q,width:U-Q,heigh:C-A}),A=20,D=A),R=m[J].pageIndex,H){C=H;break}}if(J>=m.length&&(J=m.length-1),J-h.lineIndex>1&&m[J-1].transform[5]>D&&!T.CanvasUtil.isFirstLineOfPage(J,m)){let H=20==A?m[J].transform[4]:m[h.lineIndex+1].transform[4];if(20!=A)for(let ne=h.lineIndex+2;ne<=J;ne++)m[ne].transform[4]<H&&(H=m[ne].transform[4]);C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&k.push({pageIndex:R,top:A,left:H,width:U-H,heigh:C-A})}b&&"a"==b.type&&b.transform[4]>m[b.lineIndex].transform[4]+10*M.CONST.RENDER_SCALE&&(U=b.transform[4]-E,A=m[b.lineIndex].top,Q=m[b.lineIndex].transform[4]-E,C=m[b.lineIndex].bottom,A&&C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&k.push({pageIndex:R,top:A,left:Q,width:U-Q,heigh:C-A}));for(let H=k.length-1;H>=1;H--)k[H].left-(k[H-1].left+k[H-1].width)>=20*M.CONST.RENDER_SCALE&&k.splice(H,1);return k}getQuestRemoveBox(h,m){let b=h.startLeft?h.startLeft[5]:m[h.lineIndex].top,x=h.transform[4]-M.CONST.MARGIN_LEFT,w=h.startLeft?h.startLeft[5]+h.startLeft[3]:m[h.lineIndex].bottom;return{pageIndex:h.pageIndex,top:b||20,left:x,heigh:w&&b?w-b:0,width:(h.startLeft?h.startLeft[4]:0)-x}}getQuestBoxes(h,m,b,x){let w=x;for(let J=h.lineIndex;J<m.length;J++)if(T.CanvasUtil.isLastLineOfPage(J,m)){let H=m[J].isFooter?m[J-1]:m[J];w=H.transform[5]+H.height+20;break}let E=[],k=h.pageIndex,A=b?b.lineIndex:m.length-1,C=m[h.lineIndex].transform[4]-M.CONST.MARGIN_LEFT,P=m[h.lineIndex].top;if(!P)return[];let D=M.CONST.CROP_FULL_WIDTH?T.CanvasUtil.getMaxLineRight(-1,m)+2*M.CONST.MARGIN_LEFT:m[h.lineIndex].transform[4]+m[h.lineIndex].width+2*M.CONST.MARGIN_LEFT,Q=w,U=k,R=h.lineIndex+1;for(;R<=A;R++){let J=m[R].top;if(R==m.length-1&&!b&&(J=m[R].bottom),!M.CONST.CROP_FULL_WIDTH){let ne=m[R-1].transform[4]+m[R-1].width+2*M.CONST.MARGIN_LEFT;ne>D&&(D=ne)}let H=m[R-1].transform[4]-M.CONST.MARGIN_LEFT;H<C&&(C=H),m[R].isFooter&&J?Q=J:(m[R].pageIndex>U&&(m[R-1].isFooter||(Q=w),E.push({pageIndex:U,top:P,left:C,width:D-C,heigh:Q-P}),P=20,C=T.CanvasUtil.getMinLineLeft(m[R].pageIndex,m)-M.CONST.MARGIN_LEFT),U=m[R].pageIndex,J&&(Q=J))}if(R-=1,!b&&T.CanvasUtil.isLastLineOfPage(R,m)){let J=m[R].isFooter?m[R-1]:m[R];Q=J.transform[5]+J.height+20}return T.CanvasUtil.isFirstLineOfPage(R,m)||E.push({pageIndex:U,top:P,left:C,width:D-C,heigh:Q-P}),E}}},25873:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.AnswerParser=void 0;const M=S(74047);class p extends M.Parser{constructor(T){super(),null!=T&&(this.isOn=T),this.TYPE=p.TYPE_NAME}do(T){let u=[],g="|"+T,_=/([\s\|\.\]]+\*?[A-H][\s\|]*[\.\)])/g,h=this.matchPos(g,_,!1);0==h.length&&(h=this.matchPos(g,_,!0));let m=!1;0==h.length&&/^\|?\s*\*?[A-H\s\|]+$/g.test(g)&&(m=!0,h=this.matchPos(g,/\*?[A-H]/g,!1));let b=!1;if(0==h.length&&(m=!0,b=!0,h=this.matchPos(g,/\[\*?[A-H]:[^\]]+\]/g,!1)),h.length>0)for(const x of h){let w=x.index+x.value.length-1,E=-9999,k=x.value.replace(/\*?[\sA-H\|]/g,"");b&&(E=x.index+x.value.length-2,x.index=x.index+1,w=x.index+1+(x.value.startsWith("[*")?1:0),k=".");let A={type:this.TYPE,pos:[x.index-1,w,E]},C=T.substring(A.pos[0]);!m&&!/^\|?\s*\*?[A-Himg\s\|\.]+$/g.test(g)&&C.trim()==x.value.trim()||(A.label=T.substring(A.pos[0],A.pos[0]+1),"*"==A.label&&(A.label=T.substring(A.pos[0]+1,A.pos[0]+2),A.extInfo="*"),A.olabel=k,A.score=1,""==T.substring(0,A.pos[0]).replace(/[\s\|]/g,"")&&(A.score=2),u.push(A))}return u}matchPos(T,u,g){let _=g?T.toUpperCase():T,h=/[\s\|\.\]]/,m=_.matchAll(u),b=[];for(;;){let x=m.next();if(x.done)break;let w=0;for(let k=x.value.index;k<_.length&&h.test(_[k]);k++)w++;let E=x.value[0].substr(w,1);"A"==E&&!_.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("A")||"*A"==E&&!_.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("*A")||b.push({value:x.value[0].substr(w),index:x.value.index+w})}return b}}q.AnswerParser=p,p.TYPE_NAME="answer"},64984:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnChiTietParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),this.TYPE=j.TYPE_NAME,null!=u&&(this.isOn=u)}do(u){let _=this.cleanLine(u);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(_)&&_.length>=2?[{type:j.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(u){let g=[/\|/g,/[\s\.\-:,;!\[\]@\*\$\(\)]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],_=u;_=_.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),_=_.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const h of g)_=_.replaceAll(h,"");return _=_.replaceAll("\\n"," "),_}getAnsMC(u,g){var _;let h=[];for(const E of g)h.push(u[null!==(_=E.lineIdx)&&void 0!==_?_:0]);let m=h.join(""),b=this.cleanLine(m),x=this.getResultMC(b.toUpperCase()),w=new Map;for(const E of x)w.set(E.num,E.str);return w}getAnsStr(u){let g=u.join("\n");g=g.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),g=g.replaceAll(/\[![!iucsbp]+:!!\]/g,""),g=g.replaceAll("[*","").replaceAll("*]","");let _=this.getResultStr(g),h=new Map;for(const m of _)h.set(m.num,m.str);return h}getAnsFromHelp(u,g){let _=[];for(const m of u){let b=g[m.lineIdx];b=b.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),b=b.replaceAll(/\[![!iucsbp]+:!!\]/g,""),_.push(b)}let h=0;for(const m of _){let b=m.trim().match(M.CONST.HELP_ANS_PATTERN.join("|"));if(null!=b)for(const x of b)if(null!=x&&1==x.length)return u.splice(h,1),x;h++}return""}getResultStr(u){let g=[],_=u.replace(/\n/g,"\n"),h=M.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),m=_.matchAll(new RegExp(h,"ig"));for(;;){let k=m.next();if(k.done)break;let A=k.value[0],C=M.Utils.getNumberFromStr(A);_=_.replace(A,C+".")}let E,x=_.matchAll(/\d+[.-][^|]/g),w=-1;for(;;){let k=x.next();if(k.done)break;if(-1==w)w=k.value.index,E=k;else{let A=_.substr(w,k.value.index-w);g.push(this.toAns(A,E)),w=k.value.index,E=k}}if(w>=0&&E){let k=_.substr(w);g.push(this.toAns(k,E))}return g}toAns(u,g){let _=g.value[0].length-1;return{num:+g.value[0].substr(0,_-1),str:u.substring(_).replace(/\s+/g," ").trim()}}getResultMC(u){let g=[],_="",h=[],m=!1;for(let b=0;b<u.length;b++){let x=u.charCodeAt(b),w=x>=65&&x<=72;if(w&&""==_)return[];w!=m&&(h.push(_),_=""),m=w,_+=u[b]}""!=_&&h.push(_);for(let b=1;b<h.length;b+=2){let x=0,w=Math.floor(h[b-1].length/h[b].length),E=+h[b-1].substring(x,w),k=E;for(let A=0;A<h[b].length;A++){if(A>=h[b-1].length)return[];if(E=+h[b-1].substring(x,x+w),E!=k)return[];g.push({num:E,str:h[b][A]}),x+=w,k=E+1,w=k.toString().length}}return g}}q.DapAnChiTietParser=j,j.TYPE_NAME="chitietdapan"},96570:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.DAPAN_PATTERN)}static getAnsFromHelp(u){for(const g of u){let _=g.replace(/\|/g,"").trim().match(M.CONST.HELP_ANS_PATTERN.join("|"));if(null!=_)for(const h of _)if(null!=h&&1==h.length)return h}return""}}q.DapAnParser=j,j.TYPE_NAME="dapan"},31617:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.FooterParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.FOOTER_PATTERN)}}q.FooterParser=j,j.TYPE_NAME="footer"},89094:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HetParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.HET_PATTERN)}}q.HetParser=j,j.TYPE_NAME="end"},75271:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HuongDanParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.HUONGDAN_PATTERN)}}q.HuongDanParser=j,j.TYPE_NAME="huongdan"},52734:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IncludeParser=void 0;const M=S(74047);class p extends M.Parser{constructor(T){super(),null!=T&&(this.isOn=T),this.TYPE=p.TYPE_NAME}do(T){let u=T.replace(/\|/g,"").trim(),_=/\[@([CTQG]\d+):[^\]]*\]/g,h=/\[@(F:[^\]]*)\]/g,m=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,b=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(u)){let x=u;return x=x.replaceAll(_,"$1").replaceAll(h,"$1").replaceAll(m,"$1").replaceAll(b,""),[{type:this.TYPE,pos:[0,0],label:"@@."+x}]}return[]}}q.IncludeParser=p,p.TYPE_NAME="include"},74047:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Parser=void 0,q.Parser=class S{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(p){return this.isOn?this.do(p):[]}match(p,j){let T=p.replace(/\|/g,"").trim().match(j.join("|"));return null!=T&&T.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},50023:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QuestionParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){let g=this.matchPos(u);if(g.value){let _=null;for(let E=g.value.length-1;E>=0;E--)if(g.value[E]){_=g.value[E];break}if(null==_)return[];let h=u.replace(/\|/g,"").toLowerCase().indexOf(_),m=h,b="",x=u.toLowerCase();for((_.endsWith("(")||_.endsWith("["))&&(_=_.substring(0,_.length-1));m<x.length&&("|"!=x[m]&&(b+=x[m]),m++,b!=_););let w={type:this.TYPE,pos:[h,m]};return w.label=this.getNumberFromStr(u.substring(w.pos[0],w.pos[1])),w.olabel=_,[w]}return[]}matchPos(u){let g=u.replace(/\|/g,"").toLowerCase().trim(),_=M.CONST.QUESTION_PATTERN.join("|"),h=g.matchAll(_).next();return h.value||(_=M.CONST.QUESTION_PATTERN2.join("|"),h=g.matchAll(_).next()),h}getNumberFromStr(u){let g=u.match(/(\d+)/);return g?g[0]:""}}q.QuestionParser=j,j.TYPE_NAME="question"},65378:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SectionParser=void 0;const M=S(58343),p=S(74047);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){let g=u.replace(/\|/g,"");g=g.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let _=g.toLowerCase().trim().match(M.CONST.SECTION_PATTERN_LOWER.join("|")),h=null!=_&&_.length>0;return h||(_=g.trim().match(M.CONST.SECTION_PATTERN_NORMAL.join("|")),h=null!=_&&_.length>0),h&&_?[{type:this.TYPE,pos:[0,0],label:g}]:[]}}q.SectionParser=j,j.TYPE_NAME="section"},88178:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ModifyAnsRule=void 0;const M=S(24672);class p extends M.Rule{constructor(T){super(T??"","modify:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)&&this.checkVal(T,u)){for(const _ of this.data){let h=_.split(":"),m=u-+h[0],b=T[m].label;T[m].label=h[1],T[m].err=b+" -> "+h[1]}return!0}return!1}}q.ModifyAnsRule=p},8377:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.RemoveDupRule=void 0;const M=S(24672);class p extends M.Rule{constructor(T){super(T??"","rmdup:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){var g,_;if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)){let m=null!==(g=T[u].score)&&void 0!==g?g:0,b=null!==(_=T[u-1].score)&&void 0!==_?_:0;if(T[u].label==T[u-1].label)return T.splice(m>b?u-1:u,1),!0}return!1}}q.RemoveDupRule=p},9165:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.RemoveRule=void 0;const M=S(24672);class p extends M.Rule{constructor(T){super(T??"","remove:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)&&this.checkVal(T,u)){for(const _ of this.data)T.splice(u-+_,1);return!0}return!1}}q.RemoveRule=p},24672:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Rule=void 0,q.Rule=class S{constructor(p,j){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=j,!p.startsWith(this.TYPE))return;let u=p.substring(this.TYPE.length).split("=>"),g=u[0].split(":");this.pattern=g[0].trim(),this.valPattern=g.length>1?g[1].trim():"",this.data=u[1].split(",").map(_=>_.trim())}checkVal(p,j){var T;if(""==this.valPattern)return!0;let g=[];for(let h=Math.ceil(this.pattern.length/2);h>0;h--)g.push(null===(T=p[j-h+1].label)||void 0===T?void 0:T.trim());let _=g.join("-");return new RegExp(this.valPattern).test(_)}getStack(p,j){let T="",u=j-10>=0?j-10:0;for(;u<=j;u++)T+="-"+p[u].type[0];return T}}},42637:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SameKindRule=void 0;const M=S(58343),p=S(96570),j=S(89094),T=S(75271),u=S(24672);class g extends u.Rule{constructor(h){super(h??"","same:")}load(h){let m=new g(h);return""!=m.pattern?m:null}run(h,m){var b,x,w;if(""==this.pattern)return!1;let E=h[m];if(E.type[0]!=this.pattern)return!1;let k=[],A=[],C="";for(let P=0;P<m;P++){let D=h[P];(D.type==j.HetParser.TYPE_NAME||D.type==p.DapAnParser.TYPE_NAME)&&(C="da"),D.type==T.HuongDanParser.TYPE_NAME&&"da"==C&&(C="hd")}if("da"==C)return!1;for(let P=m-1;P>=0;P--){let D=h[P];if(D.type==j.HetParser.TYPE_NAME||D.type==p.DapAnParser.TYPE_NAME||"hd"==C&&D.type==T.HuongDanParser.TYPE_NAME||(D.type[0]==this.pattern&&D.olabel&&(k.push(D.olabel),A.push(D.label)),2==k.length))break}if(k.length>=1){let P=k[0],D=2==k.length?k[1]:P,Q=null!==(b=E.olabel)&&void 0!==b?b:"";if("a"==this.pattern&&(""==P&&(P="."),""==D&&(D="."),""==Q&&(Q=".")),""==this.valPattern){if(P==D&&Q!=P)return h.splice(m,1),!0}else{let U=this.valPattern.split(",");for(const R of U){let J=R.trim(),ne=new RegExp(M.CONST[J].join("|"));if(ne.test(P)&&ne.test(D)&&!ne.test(Q)&&+(null!==(x=A[0])&&void 0!==x?x:"0")+1!=+(null!==(w=E.label)&&void 0!==w?w:"0"))return h.splice(m,1),!0}}}return!1}}q.SameKindRule=g},87377:(ce,q,S)=>{"use strict";S.d(q,{_:()=>g});var M=S(19347),p=S(39621),j=S(65879),T=S(30251),u=S(11964);let g=(()=>{class _ extends p.Q{btnCloseDialog(){this.dialogRef.close()}constructor(m,b){super(),this.dialogRef=m,this.data=b}}return _.\u0275fac=function(m){return new(m||_)(j.Y36(M.so,8),j.Y36(M.WI,8))},_.\u0275cmp=j.Xpm({type:_,selectors:[["azt-dialog-warning"]],features:[j.qOj],decls:17,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","p-3","pb-0"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"]],template:function(m,b){1&m&&(j.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),j.O4$(),j.TgZ(4,"svg",4),j._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),j.qZA(),j._uU(8),j.ALo(9,"mytranslate"),j.qZA(),j.kcU(),j.TgZ(10,"div",8)(11,"azt-mat-dialog-content",9),j._UZ(12,"div",10),j.qZA()()()(),j.TgZ(13,"div",11)(14,"button",12),j.NdJ("click",function(){return b.btnCloseDialog()}),j._uU(15),j.ALo(16,"mytranslate"),j.qZA()()()),2&m&&(j.xp6(8),j.hij(" ",j.lcZ(9,4,"lang_auto_canh_bao")," "),j.xp6(3),j.Q6J("defaultHeight",60),j.xp6(1),j.Q6J("innerHtml",b.data.content,j.oJD),j.xp6(3),j.hij(" ",j.lcZ(16,6,"lang_auto_dong")," "))},dependencies:[T.O,u.bT],encapsulation:2}),_})()},86294:(ce,q,S)=>{"use strict";S.d(q,{o:()=>w});var M=S(37398),p=S(39621),j=S(65879),T=S(32839),u=S(87384),g=S(69862),_=S(96814),h=S(11964);function m(E,k){if(1&E){const A=j.EpF();j.ynx(0),j.TgZ(1,"a",2),j.NdJ("click",function(){j.CHM(A);const P=j.oxw();return j.KtG(P.shareFileToFlutter())}),j.TgZ(2,"span"),j._uU(3),j.ALo(4,"mytranslate"),j.qZA(),j.Hsn(5),j.qZA(),j.BQk()}if(2&E){const A=j.oxw();j.xp6(1),j.Akn(A.style),j.Tol(A.classStyle),j.s9C("target",A.target),j.xp6(2),j.Oqu(j.lcZ(4,7,A.fileDescription))}}function b(E,k){if(1&E&&(j.TgZ(0,"a",3)(1,"span"),j._uU(2),j.ALo(3,"mytranslate"),j.qZA(),j.Hsn(4,1),j.qZA()),2&E){const A=j.oxw();j.Akn(A.style),j.Tol(A.classStyle),j.s9C("href",A.dataUrl,j.LSH),j.s9C("target",A.target),j.s9C("download",A.fileName),j.xp6(2),j.Oqu(j.lcZ(3,9,A.fileDescription))}}const x=["*","*"];let w=(()=>{class E extends p.Q{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,M.U)(A=>A))}shareFileToFlutter(){this.downloadFile().subscribe(A=>{this.shareFileFlutterService.shareFileWithBlob(A,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(A,C,P){super(),this.shareFileFlutterService=A,this.commonService=C,this.http=P,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return E.\u0275fac=function(A){return new(A||E)(j.Y36(T.g),j.Y36(u.v),j.Y36(g.eN))},E.\u0275cmp=j.Xpm({type:E,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},features:[j.qOj],ngContentSelectors:x,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["NormalWeb",""],[3,"target","click"],[3,"href","target","download"]],template:function(A,C){if(1&A&&(j.F$t(x),j.YNc(0,m,6,9,"ng-container",0),j.YNc(1,b,5,11,"ng-template",null,1,j.W1O)),2&A){const P=j.MAs(2);j.Q6J("ngIf",C.isMobileWebView)("ngIfElse",P)}},dependencies:[_.O5,h.bT],encapsulation:2}),E})()},80665:(ce,q,S)=>{"use strict";S.r(q),S.d(q,{TestbankModule:()=>nj});var M=S(96814),p=S(56223),j=S(19347),T=S(75187),u=S(39106),g=S(42753),_=S(70798),h=S(37722),m=S(21494),b=S(25391),x=S(90654),w=S(84906),E=S(49962),k=S(23348),A=S(11222),C=S(69862),P=S(22299),D=S(69623),Q=S(52572),U=S(3760);function R(n,o,t=8,i=[]){if(o<=1)return i.push(n),i;let a=i.push(parseFloat((n/o).toPrecision(t)));return R(n-i[a-1],o-1,t,i)}var J=S(10548),H=S(73e3);class ne extends D.EditorApiService{constructor(o,t,i,a,s){super(),this.questionHelper=o,this.apiUploadService=t,this.documentService=i,this.examService=a,this.questionService=s,this.treeData=[],this.treeQuestion=[],this.saveTreeData=[],this.saveTreeQuestion=[],this.saveTreeResponse=[]}loadData(o,t){return console.log("search",o,t),new Promise(i=>{this.saveTreeData.includes(t)?i():(this.saveTreeData.push(t),this.documentService.apiDocumentsGet(t,void 0,""!=o?o:void 0,"exam_online",void 0,void 0,void 0,1,1,-1).subscribe(a=>{1===a.success&&a.data&&((a.data.categoryObjs||[]).forEach(l=>{this.treeData.push({id:l.id||0,name:l.name||"",type:"cat",pr:t})}),(a.data.documentObjs||[]).forEach(l=>{l.exam&&this.treeData.push({id:l.exam.id||0,name:l.exam.name||"",type:"test",pr:t})})),i()}))})}getTotalQuest(o){return this.treeQuestion.filter(t=>t.pr===o&&"quest"===t.type).length}loadQuestion(o){return new Promise(t=>{this.saveTreeQuestion.includes(o)?t():(this.saveTreeQuestion.push(o),this.examService.apiExamGetExamWithQuestionObjsIdGet(o).subscribe(i=>{if(1===i.success&&i.data){let s=[];(i.data.questionObjs||[]).forEach(r=>{this.treeQuestion.push({id:r.id||0,label:(r.rawIndex??0)+1,content:this.questionHelper.renderContent(r),groupId:r.groupId,type:"quest",pr:o}),s.includes(r.groupId||0)||s.push(r.groupId||0)}),s.length>1&&s.forEach(r=>{this.treeQuestion.push({id:r,label:r,content:"Nh\xf3m "+(r+1),type:"group",pr:o})}),t()}}))})}searchRes(o,t){return new Promise(i=>{this.loadData(o,t).then(()=>{i(this.treeData.filter(a=>a.pr===t))})})}getQuestion(o){return new Promise(t=>{this.loadQuestion(o).then(()=>{t(this.treeQuestion.filter(i=>i.pr===o))})})}convertQuestionInfo(o){return{id:o.id||0,label:Number(o.label)||0,content:"C\xe2u"+o.label,type:"quest"}}apiQuestionsGet(o,t,i,a,s,r){return new Promise(l=>{const c=i+"_"+a+"_"+r+"_"+s+"_"+o,d=this.saveTreeResponse.find(f=>f.key===c);d&&t?l(d.questions):this.questionService.apiQuestionsGet(i+"",a+"",r+"","",void 0,s+"","",void 0,void 0,void 0,o).subscribe(f=>{if(1===f.success&&f.data&&f.data.questions&&f.data.questions.length>0){const y=this.saveTreeResponse.findIndex(O=>O.key===c);return-1===y?this.saveTreeResponse.push({key:c,questions:f.data.questions}):this.saveTreeResponse[y].questions=f.data.questions,void l(f.data.questions)}l([])})})}randomQuestToFull(o,t,i,a,s,r){return new Promise(l=>{this.apiQuestionsGet(o,t,i,a,s,r).then(c=>{l(c)})})}randomQuest(o,t,i,a,s,r){return new Promise(l=>{this.apiQuestionsGet(o,t,i,a,s,r).then(c=>{l(c.map(d=>this.convertQuestionInfo(d)))})})}uploadToCdnForHomework(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnForHomework(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForExamQuestionContent(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionResult(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionResult(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionAttachment(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankPdf(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankPdf(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankDocx(o){return new Promise((t,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankDocx(o).subscribe(a=>{1==a.success&&a.data?t(JSON.stringify(a.data)):i(new Error("Not upload file"))})})}}var ee=S(86670),W=S(39621),xe=S(88043),Ce=S(20553);class fe{static loadImageToBase64(o,t){return new Promise((i,a)=>{const s=new Image;s.crossOrigin="anonymous",s.setAttribute("count","1"),s.onload=()=>{const r=document.createElement("canvas");r.width=s.width,r.height=s.height,r.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,r.width,r.height);let d=r.toDataURL();i(d)},s.onerror=()=>{const r=s.getAttribute("count");r&&1==Number(r)?(s.src=t.getMyCdn(o),s.setAttribute("count","2")):r&&Number(r)<5?(s.setAttribute("count",r+1),s.src=t.getRawCdnLink(o)+"?t="+(new Date).getTime()):a(new Error)},s.src=t.getRawCdnLink(o)})}}class be{constructor(o,t){this.editorOutputDataService=o,this.commonService=t,this.typeMatrix="user",this.startIndex=0,this.backToLink="",this.title="",this.editor={show:!0},this.examSave={},this.homeworkSave={},this.mathEditor={},this.similarQuest={},this.showErrorsQuests={},this.showInfomationQuests={},this.imageEditor={},this.logConfig={},this.heightContent=600,this.inputMoveToQuestion=!1,this.inputMoveToQuestionValue="1",this.inputMoveToQuestionTooltip=!1}showEditor(){this.disAll(),this.reSetBackToLink(),this.editor.show=!0}showHomework(){this.disAll(),this.backToLink="",this.title=this.commonService.myTranslateInstant("lang_cms_config_homework_title")??"",this.homeworkSave.show=!0}showExam(){this.disAll(),this.title=this.commonService.myTranslateInstant("lang_auto_cau_hinh_de_thi")??"",this.backToLink="",this.examSave.show=!0}disAll(){this.title="",this.examSave.show=!1,this.homeworkSave.show=!1,this.editor.show=!1}reSetBackToLink(){this.title=this.commonService.myTranslateInstant("lang_auto_cong_cu_soan_thao_noi_dung")??"",this.backToLink=this.sourceBackToLink?this.sourceBackToLink:"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0)}getBackLink(){return this.matrix&&this.matrix.matrix.length>0?(this.editorOutputDataService.setMatrixData(this.matrix,!0),`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/${this.typeMatrix}/0`):this.backToLink}}class he{constructor(o,t){this.editorCommonService=o,this.commonService=t,this.wmf=new WMFConverter}readFileInputEventAsArrayBuffer(o,t){var i=new FileReader;i.onload=function(a){t(a.target.result)},i.readAsArrayBuffer(o)}handleFileSelect(o,t,i){let a=this,s=(c,d)=>{if(i){let f=this.commonService.myTranslateInstant("lang_auto_cong_thuc");i(c,d,f)}},l=new U.Q(30,{function:i?(c,d)=>{if(i){let f=this.commonService.myTranslateInstant("lang_auto_image");i(c,d,f)}}:()=>{}});this.readFileInputEventAsArrayBuffer(o,function(c){azotaDocx.readDocx(c,s).then(function(d){for(let f of d.data)"img"==f.type&&("image/x-wmf"==f.contentType||"image/x-emf"==f.contentType?l.addTask(a,a.convert,[f]):f.value="data:"+f.contentType+";base64, "+f.value,!f.cssStyle&&f.height&&f.width&&"EMU"==f.measureUnit)&&(f.cssStyle=`width:${+f.width/12700}pt;height:${+f.height/12700}pt;margin-top:0px;`);l.start().then(()=>{let f=new Map,y=0;for(let O of d.data)"img"==O.type&&O.cropInfo&&f.set(y,1),y++;if(t&&0==f.size)t(d);else{y=0;for(let O of d.data){if("img"==O.type&&O.cropInfo){const N=y,I=document.createElement("img");I.src=O.value,I.onload=()=>{a.cropImage(O,I),f.delete(N),0==f.size&&t&&t(d)},I.onerror=()=>{f.delete(N),0==f.size&&t&&t(d)}}y++}}})})})}convert(o){return new Promise(t=>{if("image/x-wmf"==o.contentType)o.value=this.wmf.toPNG("data:"+o.contentType+";base64, "+o.value),t();else{let r=new ToContext2D(0,1),l=this.decodeBase64(o.value);try{FromEMF.Parse(l,r)}catch{}var i=this.scaleCanvas(r.canvas,200,200);o.value=i.toDataURL(),t()}})}decodeBase64(o){return Uint8Array.from(atob(o),function(t){return t.charCodeAt(0)})}scaleCanvas(o,t,i){let a=document.createElement("canvas");return a.width=t,a.height=i,a.getContext("2d")?.drawImage(o,0,0,o.width,o.height,0,0,t,i),a}cropImage(o,t){if(!o.cropInfo)return;let i=o.cropInfo.left?+o.cropInfo.left:0,a=o.cropInfo.top?+o.cropInfo.top:0,s=o.cropInfo.right?+o.cropInfo.right:0,r=o.cropInfo.bottom?+o.cropInfo.bottom:0;if(i+a+s+r==0)return;let l=t.width,c=t.height,d=i*l/1e5,f=a*c/1e5,N=l-s*l/1e5-d,I=c-r*c/1e5-f;const z=document.createElement("canvas");z.width=N,z.height=I,z.getContext("2d")?.drawImage(t,d,f,N,I,0,0,N,I),o.value=z.toDataURL()}}class Te{parse(o){let t=["NB_SOCH","TH_SOCH","VD_SOCH","VDC_SOCH","DIEM"],i=[],a=[],s=[];for(let N of o){s=[];for(let I of N.content){if("POS"==I.indexName&&""!=I.value){let K=I.value.trim();K=K.replaceAll("C",""),s=K.split(",")}if(I.isMerge||""==I.value.trim()||t.indexOf(I.indexName)<0)continue;let z=o.filter(K=>K.obj.id==I.id).map(K=>({id:K.obj.id,type:K.obj.type[0].toUpperCase(),name:K.obj.item,shareType:this.getShareType(K.obj)})),$=I.value;$=$.replace(/\d+/g,"").trim();let Y=[I.indexName.split("_")[0]];""!=$?Y.push(...$.split(",").map(K=>K.trim())):Y.push("TN","DT");let V=D.Utils.getNumberFromStr(I.value),te={value:V,tag:Y,items:[...z],point:0,pos:s.splice(0,V)};for(let K of I.mergeId){let X=o.filter(ye=>ye.index==K).map(ye=>({id:ye.obj.id,type:ye.obj.type[0].toUpperCase(),name:ye.obj.item,shareType:this.getShareType(ye.obj)}));te.items.push(...X)}"DIEM"==te.tag[0]?a.push(te):i.push(te)}}for(let N of a){let I=0;for(let z of i)N.items.filter(Y=>z.items.filter(V=>V.id==Y.id).length>0).length>0&&(I+=+z.value);I>0&&(N.point=Math.round(+N.value/10*100/I)/100);for(let z of i)N.items.filter(Y=>z.items.filter(V=>V.id==Y.id).length>0).length>0&&(z.point=N.point)}let r=[],l=[],c=new Map,d=["NB","TH","VD","VDC"];i.sort((N,I)=>d.indexOf(N.tag[0])-d.indexOf(I.tag[0]));let f=1,y=0;for(let N of i)y+=+N.value;for(let N of i){let I=[],z=N.items.map(te=>`[@${te.type}${te.id}:${"user"==te.shareType?`:${te.shareType}-`:""}${te.name}]`).join(",")+".";I.push(z);let $=N.tag.map(te=>`[@F:azt_lang_tag_${te}]`).join(",");I.push(`${$}.`),I.push("[azt_lang_sugg_random $__d_value__$ azt_lang_sugg_question]");let Y=I.join(""),V=+N.value;for(let te=0;te<V;te++)c.set(Y+"=>"+te,{d:N.point});for(let te=0;te<V;te++){let K={txt:Y.replace("$__d_value__$","1"),idx:N.pos[te]?+N.pos[te].trim():f};N.pos[te]&&K.idx<=y?r.push(K):l.push(K),f++}}r=r.sort((N,I)=>N.idx-I.idx),l=l.sort((N,I)=>N.idx-I.idx);let O=[];for(let N=1;N<=y;N++)r.length>0&&r[0].idx==N?O.push(r.splice(0,1)[0]):l.length>0&&O.push(l.splice(0,1)[0]);return r.length>0&&O.push(...r),l.length>0&&O.push(...l),{text:O.map(N=>N.txt).join("\n"),extra:c}}getShareType(o){let t=o.prNode?.prNode,i="",a=[];for(o.prNode&&a.push(o.prNode.id);t;)i=`[@C${t.id}:-].`+i,a.push(t.id),t=t.prNode;let s="";return 1==a.length&&-1==a[0]&&(s="user"),a.length>1&&-1==a[a.length-1]&&(s="user_"+a[a.length-2]),s}}class me{process(o){let t=/^\s*#(\d)\s*\[[A-Z0-9\-\[\]\$!:b]+\]/g,i=["NB","TH","VD","VDC"],a=0,s=!1,r=1;for(let l of o){let d=l.matchAll(t).next();if(!d.done){let y=+d.value[1]-1;y<i.length&&(o[a]=l.replace(d.value[0],`C\xe2u ${r++}. (${i[y]})`)),s=!0}s&&"GY"==l.trim()&&(o[a]="L\u1eddi gi\u1ea3i"),a++}}}var se=S(8720),_e=S(92381);class de extends _e.N{constructor(){super(...arguments),this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}render(o,t,i){if(o.trim().startsWith("[@"))return o;let a=o,s=this.chemBase.join("|"),r=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?(${s})+\\d*(${s}|\\d+|\\(|\\))*(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|$)`,"g"),l=a.matchAll(r),c=[];for(;;){let f=l.next();if(f.done)break;let y=0==f.value.index?f.value[0]:f.value[0].substring(1);y.replace("(","").replace(")","").length<=1||c.push({s:0==f.value.index?0:f.value.index+1,len:y.length,val:this.autoFormat(y)})}if(c.sort((f,y)=>f.s>y.s?-1:1),c.filter(f=>/\d+/.test(f.val)).length>0)for(let f of c)a=a.substring(0,f.s)+"\\("+f.val+"\\)"+a.substring(f.s+f.len);return a}autoFormat(o){return o.replaceAll(/([^\(])(\d+)/g,"$1_{$2}")}}class Ae extends _e.N{render(o,t,i){return o}revert(o){let t=o;return[["sub",/<sub>([^><]+)<\/sub>/g],["sup",/<sup>([^><]+)<\/sup>/g]].forEach(a=>{t=t.replace(a[1],(s,r)=>`[!${a[0]}:$${r}$]`)}),t}}var Se=S(60723);class Oe extends _e.N{constructor(o){super(),this.cdnService=o}render(o,t,i){if(o.indexOf("[img:")<0)return o;let s=o,r=s.matchAll(/\[img:\$[a-zA-Z0-9_]+\$\]/g);for(;;){let l=r.next();if(l.done)break;let c=l.value[0];const d=c.replace("[img:$","").replace("$]","");if(t){const f=t.find(y=>y.id===d);if(f){const y=document.createElement("img");y.id=d,y.classList.add(0===d.indexOf("af")?"qv_full_a_img":0===d.indexOf("f")?"qv_full_img":"qv_img"),y.crossOrigin="anonymous",y.style.cssText=f.cssStyle??"";let O=Se.G.generateIdRequired(10),N=this.cdnService.getRawCdnLink(f.link);this.loadingManager.set(O,N),y.onload=()=>{this.loadingManager.delete(O)},y.onerror=()=>{this.loadingManager.delete(O)},y.src=N,s=s.replace(c,y.outerHTML)}}}return s}}var Ye=S(7468),pt=S(8897),ft=S(23353);class $e extends _e.N{constructor(o,t,i,a,s,r,l,c,d,f){super(),this.cdnService=o,this.commonService=t,this.callBack=i,this.apiCallbackCache=a,this.editor=s,this.onError=r,this.loadedQuestIds=l,this.apiDataCache=c,this.matrixData=d,this.discoveryService=f,this.getOne=!1,this.trans={err_empty_quest:""},this.trans.err_empty_quest=this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_cau_hoi_tu_ngan_hang")??""}getSimilar(o,t,i){let a={text:o,maxRate:.99},s=Se.G.generateIdRequired(10);return this.loadingManager.set(s,o),this.discoveryService?.apiDiscoveryQuestionsInfoPost(a).subscribe(r=>{let l=[];1===r.success&&r.data&&r.data.objs&&r.data.objs.length>0&&(l=r.data.objs),this.apiCallbackCache=new Map;let c=0;for(let d of l){let f={i:c,call:this.callBack,err:this.onError};c++;let y=this.apiCallbackCache.get(s);y?y.push(f):this.apiCallbackCache.set(s,[f])}0==l.length&&this.onError&&this.onError("NO_DATA"),setTimeout(()=>{this.processApiResponse(l,s,!1)},400),this.loadingManager.delete(s)}),"Loading...|0"}render(o,t,i){let a=o.split("<br>")[0].trim(),s=a.split("=>"),r=s.length>1?+s[1].split("-")[1]:0,l=s.length>1?+s[1].split("-")[0]:0;if(!this.callBack||!/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])+$/.test(s[0].trim())&&!/^\[@Q[\-\d]+:[^\]]+\](\s*,\s*\[@Q[\-\d]+:[^\]]+\])*$/.test(s[0].trim()))return o;let f=s[0]+"=>"+l,y=pt.Utils.parseInclude(a);if(this.apiDataCache){let Y=this.apiDataCache.get(a);if(Y&&this.callBack)return setTimeout(()=>{Y&&this.callBack&&this.callBack(Y)},50),"Loading...|"+y.questId.join(",")}if(this.apiCallbackCache){let $={i:r,call:this.callBack,err:this.onError},Y=this.apiCallbackCache.get(f);if(Y)return Y.push($),"Loading...|"+y.questId.join(",");this.apiCallbackCache.set(f,[$])}let O=this.loadedQuestIds&&0==y.questId.length?this.loadedQuestIds:[],N=!1;0==y.getNum&&y.groupId.length>0&&(N=!0,y.getNum=1,O=y.questId.length>0?O:[]),this.getOne&&y.getNum&&y.getNum>1&&(y.getNum=1);let I=Se.G.generateIdRequired(10),z=this.matrixData?.filter($=>$.key==f)[0];if(z)setTimeout(()=>{this.processApiResponse(z?.questions??[],f,N)},400);else{this.loadingManager.set(I,a);let $={exceptQuestionIds:O,matrix:[]};$.matrix?.push({number:y.getNum,key:f,paths:y.paths.map(te=>({type:te.type,id:te.id,groupIds:te.groupIds,tags:te.tags,answerTypes:te.answerTypes}))});let V=$.matrix?.filter(te=>te.paths?.filter(K=>"KNOWLEDGE"==K.type).length??!1).length?i?.apiQuestionsMatrixGlobalPost($):i?.apiQuestionsMatrixPost($);V&&V.subscribe(te=>{let K=[];1===te.success&&te.data&&te.data[0]&&te.data[0].questions&&te.data[0].questions.length>0&&(K=te.data[0].questions),setTimeout(()=>{this.processApiResponse(K,f,N)},400),this.loadingManager.delete(I)})}return"Loading...|"+y.questId}setGetOne(o){this.getOne=o}processApiResponse(o,t,i){let a=o??[],s=this.apiCallbackCache?.get(t);if(s)for(const r of s){let l=this.getOne?0:r.i;if(a.length<=l){r.err&&r.err(this.trans.err_empty_quest);continue}let c=a[l];const d=this.commonService.willDeleteParseJson(c.content??"[]"),f={type:"bank",sourceId:c.id};if(d&&d.length>0&&d[0].vMetaEditor&&(f.heightLabel=d[0].vMetaEditor.heightLabel),i){let N=this.commonService.willDeleteParseJson(c.content||"[]"),I="",z={renderedStr:I,label:"",quest:{label:0,isGroup:!0,parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,meta:f};if(1==c.isImage&&N[0].groupUrl){let $=Se.G.generateIdRequired(10);this.loadingManager.set($,N[0].groupUrl),this.loadImage(N[0].groupUrl,this.cdnService).then(Y=>{const V=document.createElement("canvas");V.width=Y.width,V.height=Y.height,V.getContext("2d")?.drawImage(Y,0,0,Y.width,Y.height);const te=document.createElement("img");te.src=V.toDataURL(),te.classList.add("qv_img-group-content"),z.renderedStr=te.outerHTML,r.call(z),this.loadingManager.delete($)}).catch(Y=>{z.renderedStr="Load image error",r.call(z),this.loadingManager.delete($)})}else I=N[0].groupContent??"",z.renderedStr=I,r.call(z);this.apiDataCache&&this.apiDataCache.set(t+"-"+r.i,z);continue}let y=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],O="text";if(1===c.isImage&&(O=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":O),"image"===O){let N=this.commonService.willDeleteParseJson(c.content||""),I=N[0].metaData,z={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:I&&I.answers?I.answers.map(Y=>({label:Y.label,isCorrect:-1!==c.answerResult?.indexOf(Y.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(Y=>({label:Y,isCorrect:-1!==c.answerResult?.indexOf(Y),parts:[]}))},strAns:y.length>0?y:void 0,answers:[],v:I?"pdf-2-0":"pdf-1-0",id:c.id,meta:f};z.originCorrectAns=z.quest.answers.find(Y=>Y.isCorrect)?.label,c.tags&&(z.tag=c.tags.map(Y=>({id:Y.id,code:Y.code,viName:Y.viName,enName:Y.enName})));let $=Se.G.generateIdRequired(10);this.loadingManager.set($,N[0].url),this.loadImage(N[0].url,this.cdnService).then(Y=>{this.processImageQuestion(Y,N,z),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(V=>{z.helpRenderedStr=V,r.call(z)}):r.call(z),this.apiDataCache&&this.apiDataCache.set(t+"-"+r.i,z),this.loadingManager.delete($)}).catch(Y=>{z.renderedStr="Load image error",r.call(z),this.loadingManager.delete($)})}else{let N=this.commonService.willDeleteParseJson(c.content||"[]"),I=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),z={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:I?I.map($=>({label:$.key,isCorrect:-1!==c.answerResult?.indexOf($.key),parts:[]})):[]},strAns:y.length>0?y:void 0,answers:[],v:"docx",id:c.id,meta:f};z.originCorrectAns=z.quest.answers.find($=>$.isCorrect)?.label,N.length>0&&(z.renderedStr=N[0].content),c.answerMedia&&(z.helpRenderedStr=c.answerMedia),c.tags&&(z.tag=c.tags.map($=>({id:$.id,code:$.code,viName:$.viName,enName:$.enName}))),z.answers=z.quest.answers.map(($,Y)=>({renderedStr:I[Y].content,ans:$})),this.apiDataCache&&this.apiDataCache.set(t+"-"+r.i,z),r.call(z)}}this.apiCallbackCache?.delete(t)}processApiResponseReturnData(o,t,i,a){return new Promise((s,r)=>{let c=(o??[])[0];const d=this.commonService.willDeleteParseJson(c.content??"[]"),f={type:"bank",sourceId:c.id};if(d&&d.length>0&&d[0].vMetaEditor&&(f.heightLabel=d[0].vMetaEditor.heightLabel),i){let N=this.commonService.willDeleteParseJson(c.content||"[]"),I="",z={renderedStr:I,label:"",quest:{label:0,isGroup:!0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,meta:f};if(1==c.isImage&&N[0].groupUrl){let $=Se.G.generateIdRequired(10);this.loadingManager.set($,N[0].groupUrl),this.loadImage(N[0].groupUrl,this.cdnService).then(Y=>{const V=document.createElement("canvas");V.width=Y.width,V.height=Y.height,V.getContext("2d")?.drawImage(Y,0,0,Y.width,Y.height);const te=document.createElement("img");te.src=V.toDataURL(),te.classList.add("qv_img-group-content"),z.renderedStr=te.outerHTML,s(z)}).catch(Y=>{z.renderedStr="Load image error",s(z)})}else I=N[0].groupContent??"",z.renderedStr=I,s(z)}let y=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],O="text";if(1===c.isImage&&(O=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":O),"image"===O){let N=this.commonService.willDeleteParseJson(c.content||""),I=N[0].metaData,z={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:I&&I.answers?I.answers.map(Y=>({label:Y.label,isCorrect:-1!==c.answerResult?.indexOf(Y.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(Y=>({label:Y,isCorrect:-1!==c.answerResult?.indexOf(Y),parts:[]}))},strAns:y.length>0?y:void 0,answers:[],v:I?"pdf-2-0":"pdf-1-0",id:c.id,meta:f};z.originCorrectAns=z.quest.answers.find(Y=>Y.isCorrect)?.label,c.tags&&(z.tag=c.tags.map(Y=>({id:Y.id,code:Y.code,viName:Y.viName,enName:Y.enName})));let $=Se.G.generateIdRequired(10);this.loadingManager.set($,N[0].url),this.loadImage(N[0].url,this.cdnService).then(Y=>{this.processImageQuestion(Y,N,z),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(V=>{z.helpRenderedStr=V,s(z)}):s(z),this.loadingManager.delete($)}).catch(Y=>{z.renderedStr="Load image error",this.loadingManager.delete($)})}else{let N=this.commonService.willDeleteParseJson(c.content||"[]"),I=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),z={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",label:0,parts:[],answers:I?I.map($=>({label:$.key,isCorrect:-1!==c.answerResult?.indexOf($.key),parts:[]})):[]},strAns:y.length>0?y:void 0,answers:[],v:"docx",id:c.id,meta:f};z.originCorrectAns=z.quest.answers.find($=>$.isCorrect)?.label,N.length>0&&(z.renderedStr=N[0]),c.answerMedia&&(z.helpRenderedStr=c.answerMedia),c.tags&&(z.tag=c.tags.map($=>({id:$.id,code:$.code,viName:$.viName,enName:$.enName}))),z.answers=z.quest.answers.map(($,Y)=>({renderedStr:I[Y].content,ans:$})),s(z)}})}setCallback(o){this.callBack=o}setApiCache(o){this.apiCallbackCache=o}processImageQuestion(o,t,i){const a=t[0].metaData;if(a){const s={x:0,y:0,w:a.question.width,h:a.question.height};let r=a.question.height;a.answers&&a.answers.forEach((c,d)=>{let f="";if(1!==c.width||1!==c.height){const y=this.cropImageWithPos({x:c.x,y:c.y,w:c.width,h:c.height},{x:c.remove.x,y:c.remove.y,w:c.remove.width,h:c.remove.height},o);y.classList.add("qv_ats_image"),r>c.y&&(s.h=c.y,r=c.y),f=y.outerHTML}i.answers.push({renderedStr:f,ans:i.quest.answers[d]})}),s.h<5&&(s.h=1,s.h=1);const l=this.cropImageWithPos(s,{x:a.question.remove.x,y:a.question.remove.y,w:a.question.remove.width,h:a.question.remove.height},o,!0);l.classList.add("qv_qts_image"),i.renderedStr=l.outerHTML,i.meta&&(i.meta.heightLabel=this.calculateHeightLabel(o,a.question.remove))}else i.renderedStr=o.outerHTML}cropImageWithPos(o,t,i,a,s){const r=document.createElement("canvas");r.width=o.w,r.height=o.h;const l=r.getContext("2d"),c=document.createElement("img");l?.drawImage(i,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l&&(l.fillStyle="#fff"),l?.fillRect(t.x-o.x,t.y-o.y,t.w,t.h);const f=ft.rj.cropCanvas(r,void 0);return s?f:(c.src=f.toDataURL(),c.style.width=f.width*this.ratioImage+"px",c)}calculateHeightLabel(o,t){return this.cropImageWithPos({x:t.x,y:t.y,w:t.width,h:t.height},{x:0,y:0,w:0,h:0},o,!1,!0).height}}class qe extends _e.N{constructor(o){super(),this.mathMap=o}render(o,t,i){let a=o,r=a.matchAll(/\[!m:\$(([^\]]|[^\$]\])+)\$\]/g);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],d=l.value[1],f=this.mathMap.get(d),y="";const O=document.createElement("span");O.classList.add("tex2jax_process"),O.classList.add("azt-mathml"),O.id=d,f&&(O.innerHTML=f.str,f.raw&&O.setAttribute("data-azt-math-raw",f.raw)),y=O.outerHTML,a=a.replace(c,y)}return a}}class it extends _e.N{render(o,t,i){let a=this.bypassChild(o);return a=a.replaceAll(/\\\)\s*\\\(/g,""),a}bypassChild(o,t="\\(",i="\\)"){if(t.length!==i.length)return"";const a=[];let s=0;for(;;){let c=o.indexOf(t,s);if(-1===c)break;a.push("s_"+c),s=c+1}for(s=0;;){let c=o.indexOf(i,s);if(-1===c)break;a.push("e_"+c),s=c+1}a.sort(function(c,d){return parseInt(c.substr(2))-parseInt(d.substring(2))});let r=[];const l=[];return a.forEach(c=>{if("s"===c.substring(0,1))r.push(parseInt(c.substring(2)));else if(1==r.length)r=[];else{let d=r.pop();if(d){let f=parseInt(c.substring(2));l.push(d),l.push(f)}}}),l.sort(function(c,d){return c-d}).reverse().forEach(c=>{o=o.substring(0,c)+o.substring(c+t.length)}),o}}class He extends _e.N{trimWithBr(o){for(o=o.trim();/^<br>|<br>$/.test(o);)o=o.replace(/^<br>|<br>$/,"").trim();return o}render(o){let t=o,i=t.split("<br>"),a=0,s=/\[![!aibucsbphl]+:!!\]/;for(let c of i){if(s.test(c)){let f=c.split(":!!]")[0].split("["),y=f[f.length-1].split(":")[0];i[a]=c.startsWith("[*")?"[* ["+y+":$"+c.replace(s,"$]").substring(2):"["+y+":$"+c.replace(s,"$]")}a++}t=i.join("<br>"),t=t.replaceAll(/\[![!aibucsbphl]+:\$\$\]/g,"");let l=t.matchAll(/\[![!aibucsbphl]+:\$(([^\$]|\$[^\]])+)\$\]/g);for(;;){let c=l.next();if(c.done)break;let d=c.value[0],f=c.value[1],y=d.split(":")[0].split("!");y.shift(),y.filter(O=>"a"==O).length>0&&(f=f.toUpperCase());for(let O=y.length-1;O>=0;O--){let N=y[O];f="hl"==N?f:`<${N}>${f}</${N}>`}t=t.replace(d,f)}return this.trimWithBr(t)}}class We extends _e.N{render(o,t,i){let a=o,s=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let r of s)a=a.replaceAll(r[0],r[1]);return a}}class Be extends _e.N{render(o,t,i){let s=o.split("<br>"),r=[],l=[];for(let c of s)if(c.trim().startsWith("[*")&&c.trim().endsWith("*]")){let d=c.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");d=d.replaceAll("|","</td><td>"),l.push(d)}else l.length>0&&(r.push('<table class="q-table">'+l.join("")+"</table>"),l=[]),r.push(c.replaceAll("\\n","<br>"));return l.length>0&&r.push('<table class="q-table">'+l.join("")+"</table>"),r.join("<br>")}}class ut extends _e.N{render(o,t,i){let a=o,r=a.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let d=r.next();if(d.done)break;let f=d.value[0],O=f.substring(1,f.length-1).split(":");2==O[0].length&&(O[0]=O[0].substring(1)),a=a.replace(f,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${O[1]} <span style='position: absolute;top: 20px;left: 45%;'>${O[0]}</span></span>`)}return a}revert(o,t){let i=o;return i=i.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),i=i.replace("["+t+":","[*"+t+":"),i}}let yt=(()=>{class n{}return n.EXAM_FULL=["Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. (VDC) T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\n------H\u1ebeT------\nB\u1ea2NG \u0110\xc1P \xc1N\n1A 2B 3C\nH\u01b0\u1edbng d\u1eabn gi\u1ea3i\nC\xe2u 1 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nC\xe2u 2 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nC\xe2u 3 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nC\xe2u 4 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1.(VD) Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nCh\u1ecdn C\n\nC\xe2u 2.(NB) N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nCh\u1ecdn A\n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nCh\u1ecdn C\n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\n\nQuestion 5. The apple ___ the table.\n\nANSWER KEYS\n1b 2d 3a 4b\n5. on | On | ON","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c."],n.EXAM_FULL_EN=["Question 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Part 1. Answer from 1 - 2\nQuestion 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nPart 2. Answer from 2 - 4\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\nANSWER KEYS\n1b 2d 3a 4b","Question 1.I used to __________ in Germany when I was 7.\n*A. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \n*B. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \n*C. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \n*D. to clean\n------THE END------\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4"],n})();var e=S(65879),xt=S(8415);let St=(()=>{class n{constructor(t){this.cdnService=t}renderContent(t){const i=JSON.parse(t.questionContent||"{}");if("image"==(t.isImage&&i[0].url?"image":"text"))return`<img width="700" src="${this.cdnService.getRawCdnLink(i[0].url)}">`;{const s=/@\[\][^@\[\]]+@\[\]/g;let r=`<p>${i[0].content.replace(s,"[h\xecnh]")}</p>`;return JSON.parse(t.answerConfig||"[]").forEach(c=>{r+=`<p><b>${c.key}.</b>${c.content.replace(s,"[h\xecnh]")}</p>`}),r}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(xt.U))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Kt=(()=>{class n{static generate(t){const i=n._DEFAULT;if(void 0!==t)for(const a in i)Object.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}}return n._DEFAULT={is_select_cell:!0,is_select_row:!0},n})();class Ut{constructor(o,t,i,a,s,r,l){this.commonService=o,this.noteAction=t,this.questionService=i,this.callbackOnChange=l,this.name="table_matrix",this.class_active="select",this.first_matrix=null,this.last_matrix=null,this.max_row=0,this.max_col=0,this.menuElement=null,this.list=[],this.menuMode=[],this.lstNode=[],this.isErrSum=!1,this.statusDisable=!1,this.table__main=a,this.table__element=s,this.option=r,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1,this.list=[],this.startAddEvent(),this.setupMenuMode(),window.addEventListener("mouseup",()=>{this.endCheck()})}get isErrNumPos(){return this.lstNode.filter(o=>o.content.filter(t=>t.isErr).length>0).length>0}setDisable(o){this.statusDisable=o,this.reBuild()}pushNode(o){return o={...o},new Promise(t=>{if(this.statusDisable)t();else{const i=this.pushTrElement(o);i&&this.reqCheck(i).then(()=>{t()})}})}getResult(){return this.lstNode.length>0?this.lstNode.map(o=>(o.content=o.content.map(t=>({...t,value:"POS"===t.indexName?t.value.replace("&nbsp;","").trim().toUpperCase():this.getResultOfString(t.value)})),o)):[]}resetAndPushList(o){return new Promise(t=>{this.lstNode=o.map(a=>{if("knowledge"===a.obj.type&&a.obj.item.endsWith(")")&&(a.obj.item=a.obj.item.substring(0,a.obj.item.lastIndexOf("(")),a.obj.prNode&&a.obj.prNode.item.endsWith(")")&&(a.obj.prNode.item=a.obj.prNode.item.substring(0,a.obj.prNode.item.lastIndexOf("(")))),a.content.length!==this.colName().length){const s=this.colName();let r=a.content.map(l=>l.indexName);s.forEach((l,c)=>{r.includes(l)||a.content.unshift(this.createEmptyContentWithName(c,a.content[0].id))}),a.content=a.content.map(l=>({...l,index:this.colNameToIndex(l.indexName)}))}return a.content=a.content.map(s=>(s.totalTL=0,s.totalTN=0,s.tempTotalTL=0,s.tempTotalTN=0,s)),a});const i=new U.Q(2);this.lstNode.forEach(a=>{i.addTask(this,this.reqCheck,[a])}),i.start().then(()=>{this.lstNode.forEach(a=>{a.content.forEach(s=>{s.mergeId.length>0&&(s.tempTotalTL=s.totalTL,s.tempTotalTN=s.totalTN,s.mergeId.forEach(r=>{const l=this.lstNode.findIndex(c=>c.index===r);-1!==l&&this.lstNode[l].content[s.index]&&(s.totalTL+=this.lstNode[l].content[s.index].totalTL,s.totalTN+=this.lstNode[l].content[s.index].totalTN)}))})}),this.reBuild(),t()})})}getSumQuestion(){let o=0;return this.lstNode.forEach(t=>{const i=this.sumParamOfColName(t.content,"SOCH_TL"),a=this.sumParamOfColName(t.content,"SOCH_TN");o+=i+a}),o}sumParamOfColName(o,t){const i={SOCH_TN:0,SOCH_TL:0,TGP:0};return o.forEach(a=>{a.indexName.indexOf("SOCH")>0&&(-1!==a.value.toUpperCase().indexOf("TL")?i.SOCH_TL+=Ut.selectNumberOfString(a.value)??0:i.SOCH_TN+=Ut.selectNumberOfString(a.value)??0),a.indexName.indexOf("TGP")>0&&(i.TGP+=Ut.selectNumberOfString(a.value)??0)}),i[t]}reqCheck(o){return new Promise(t=>{let i,a,s;"test"===o.obj.type&&(a=o.obj.id.toString(),o.obj.shareType=o.obj.prNode?o.obj.prNode.shareType:void 0),"cate"===o.obj.type&&(i=o.obj.id.toString(),"-1"===i&&(o.obj.shareType="user")),"knowledge"===o.obj.type&&(s=o.obj.id.toString());let r=this.commonService.myTranslateInstant("lang_auto_don_vi")??"",l=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_hoi_duoc_gan_nhan");this.questionService.apiQuestionsSummarizeTagsTypesGet(i,a,void 0,void 0,o.obj.shareType,s).subscribe(c=>{o.disLoading=!0,1===c.success&&c.data?0===c.data.reduce((f,y)=>f+(y.total??0),0)?(o.obj.item=this.commonService.myTranslateInstant(o.obj.item)??"",this.noteAction(r+': "'+o.obj.item+'":'+l,!0),o.content.forEach(f=>{f.disabled=!0})):o.content.forEach(f=>{const y=c.data?.map(I=>({answerType:I.answerType,tags:I.tags?.filter(z=>z.code==f.indexName.split("_")[0])})),O=y?.find(I=>3===I.answerType),N=y?.find(I=>1===I.answerType||4===I.answerType);f.totalTL=O?.tags?.reduce((I,z)=>I+(z.total??0),0)??0,f.totalTN=N?.tags?.reduce((I,z)=>I+(z.total??0),0)??0}):(this.noteAction(r+': "'+o.obj.item+'":'+l,!0),o.content.forEach(d=>{d.disabled=!0})),this.reBuild(),t()})})}getResultOfString(o){o=o.replace("&nbsp;","").trim().toUpperCase();let t=!1;const i=Ut.selectNumberOfString(o);return i?(["TN","TL"].forEach(a=>{-1!==o.indexOf(a)&&(t=!0,o=i.toString()+a)}),t?o:i.toString()):""}pushChangeEvent(){this.callbackOnChange&&this.callbackOnChange(this.lstNode)}startAddEvent(){if(this.getMatrixTable(),this.statusDisable)return;const o=c=>{this.startCheck(c)},t=c=>(c.preventDefault(),this.startRightCheck(c),!1),i=c=>{this.flag&&(c.preventDefault(),this.moveCheck(c.target))},a=c=>{this.validateInput(c)},s=c=>{this.checkHotKey(c)},r=c=>{this.checkHotKeyEnd(c)};for(let c=0;c<this.max_row;c++)for(let d=0;d<this.max_col;d++){const f=this.getElWithMatrix(d,c);f&&f.classList.contains("edit-item-tb")&&(f.setAttribute("row_index",c.toString()),f.setAttribute("col_index",d.toString()),f.addEventListener("mousedown",o),f.addEventListener("contextmenu",t,!1),f.addEventListener("mouseover",i),f.addEventListener("input",a),f.addEventListener("keydown",s),f.addEventListener("keyup",r))}const l=document.getElementsByClassName("tb-matrix-editor-trash-node");for(let c=0;c<l.length;c++){const d=l[c];d.addEventListener("click",()=>{const f=this.getNodeWithElement(d);if(f){if(f.isMergeCate){const y=this.getRootMerge(f,"Cate");y&&y.numMergeCate--}else if(f.numMergeCate>1){const y=this.lstNode[this.lstNode.indexOf(f)+1];y&&(y.isMergeCate=!1,y.numMergeCate=f.numMergeCate-1)}f.content.forEach(y=>{if(y.isMerge){const O=this.findContentRootOfMerge(y,f.index);O&&O.mergeId.splice(O.mergeId.indexOf(f.index),1)}else if(y.mergeId.length>0){const O=this.findContentNextMerge(y);O&&(y.mergeId.splice(0,1),O.isMerge=!1,O.mergeId=y.mergeId)}}),this.lstNode.splice(this.lstNode.indexOf(f),1)}this.reBuild()})}}findContentRootOfMerge(o,t){let i;return this.lstNode.forEach(a=>{a.content.forEach(s=>{s.index==o.index&&s.mergeId.includes(t)&&(i=s)})}),i}findContentNextMerge(o){const t=this.lstNode.find(i=>i.index==o.mergeId[0]);if(t&&t.content[o.index])return t.content[o.index]}checkHotKeyEnd(o){return 16===o.keyCode&&(o.preventDefault(),this.list.length>1&&this.openMenu("select")),!1}checkHotKey(o){const t=(s,r)=>{if(this.flag_shift&&r){const l=this.getElWithMatrix(s.cell,s.row);l&&(0===this.list.length&&this.checkList(o.target),this.checkList(l))}else this.removeAllList(),this.focusMatrix(s);return!1},i=0===this.list.length?o.target:this.list[this.list.length-1],a=this.getMatrixEl(i);return 40===o.keyCode?(o.preventDefault(),t({...a,row:a.row+1},this.option.is_select_row)):38===o.keyCode?(o.preventDefault(),t({...a,row:a.row-i.rowSpan},this.option.is_select_row)):37===o.keyCode?(o.preventDefault(),t({row:a.row-i.rowSpan+1,cell:a.cell-1},this.option.is_select_cell)):39===o.keyCode?(o.preventDefault(),t({row:a.row-i.rowSpan+1,cell:a.cell+1},this.option.is_select_cell)):13===o.keyCode?(o.preventDefault(),this.flag_un_merge?(this.startUnMergeAction(),!1):this.flag_merge?(this.startMergeAction(),!1):this.flag_shift?(this.startRightCheck(o),!1):t({...a,row:a.row+1},this.option.is_select_row)):(16===o.keyCode&&(o.preventDefault(),this.flag_shift=!0),!1)}focusMatrix(o){const t=this.getElWithMatrix(o.cell,o.row);t&&t.focus()}startRightCheck(o){const t=o.target;t.rowSpan>1&&(this.flag_right=!0,this.flag=!1,this.list=[t],this.openMenu("right"),this.flag_un_merge=!0)}startCheck(o){this.removeAllList(),this.flag=!0,this.checkList(o.target)}moveCheck(o){this.toggleCursor(!0),this.checkList(o)}endCheck(){this.flag_right||(this.toggleCursor(!1),this.flag=!1,this.stepMenu()||this.removeAllList())}checkList(o){0===this.list.length?this.first_matrix=this.getMatrixEl(o):this.last_matrix=this.getMatrixEl(o),this.getList(),this.loopList(),this.flag_merge=!0}removeAllList(){this.closeMenu(),this.removeSelectList(),this.first_matrix=null,this.last_matrix=null,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1}getMatrixEl(o){return{cell:Number(o.getAttribute("col_index")),row:Number(o.getAttribute("row_index"))}}getMatrixTable(){this.table__element.innerHTML=this.table__element.innerHTML,this.max_row=this.table__element.rows.length,this.max_col=16}getList(){if(this.removeSelectList(),this.first_matrix&&this.last_matrix){let o=0,t=0,i=0,a=0;this.first_matrix.cell<this.last_matrix.cell?(o=this.first_matrix.cell,t=this.last_matrix.cell):(o=this.last_matrix.cell,t=this.first_matrix.cell),this.first_matrix.row<this.last_matrix.row?(i=this.first_matrix.row,a=this.last_matrix.row):(i=this.last_matrix.row,a=this.first_matrix.row);for(let s=o;s<=t;s++)for(let r=i;r<=a;r++){let l=!1;this.option.is_select_cell&&this.option.is_select_row?l=!0:this.option.is_select_row?o===t&&(l=!0):i===a&&(l=!0),l?this.pushList(this.getElWithMatrix(s,r)):this.endCheck()}}else this.first_matrix&&this.pushList(this.getElWithMatrix(this.first_matrix.cell,this.first_matrix.row))}loopList(){this.list.forEach(o=>{o.classList.add(this.class_active)})}getElWithMatrix(o,t){var a,s,r,l,c,d,f,i=[];for(f=0;f<this.table__element.rows.length;f++)for(a=this.table__element.rows[f],d=0;d<a.cells.length;d++){for(s=a.cells[d],r=d;i[f]&&i[f][r];++r);for(l=r;l<r+s.colSpan;++l)for(c=f;c<f+s.rowSpan;++c)i[c]||(i[c]=[]),i[c][l]=!0;if(r<=o&&o<r+s.colSpan&&f<=t&&t<f+s.rowSpan)return s}}pushList(o){o&&this.list.push(o)}removeSelectList(){this.list.forEach(o=>{o.classList.remove(this.class_active)}),this.list=[]}toggleCursor(o){document.body.style.cursor=o?"crosshair":"auto"}setupMenuMode(){this.menuMode.push({id:"__merge",mode:"select",action:this.startMergeAction}),this.menuMode.push({id:"__un_merge",mode:"right",action:this.startUnMergeAction})}generateMenu(o){this.menuElement||(this.menuElement=document.getElementById("menu__excel_editor"),this.menuMode.forEach(t=>{const i=document.getElementById(this.menuElement?.id+t.id);i&&i.addEventListener("click",a=>{t.action.call(this)})})),this.menuMode.forEach(t=>{const i=document.getElementById(this.menuElement?.id+t.id);i&&(i.style.display=t.mode===o?"flex":"none")})}stepMenu(){return this.list.length>1&&(this.openMenu("select"),!0)}openMenu(o){if(this.list.length>0){this.generateMenu(o);const t=this.getPosWithParent(this.list[this.list.length-1]);this.menuElement&&(this.menuElement.style.top=t.top+Math.floor(t.height/2)+"px",this.menuElement.style.left=t.left+Math.floor(t.width/2)+"px",this.menuElement.style.display="block")}}closeMenu(){this.menuElement&&(this.menuElement.style.display="none")}getPosWithParent(o){const t=this.table__main.getBoundingClientRect(),i=o.getBoundingClientRect();return{top:i.top-t.top,left:i.left-t.left,width:i.width,height:i.height}}startMergeAction(){let o;var t,i;for(let s=0;s<this.list.length;s++){const r=this.list[s];if(r){const l=this.getNodeWithElement(r);if(l){const c=this.getContentOfNodeWithElement(r,l);c&&(0===s?(o=this.getMatrixEl(r),i=l,(t=c).tempTotalTL=t.totalTL,t.tempTotalTN=t.totalTN):r.parentElement&&t&&(t.mergeId.push(l.index),c.isMerge=!0,c.value=""))}}}let a=[];if(i&&t&&t.mergeId.length>0){const s=[i];t.mergeId.forEach(r=>{const l=this.getNodeWithIndex(r);l&&s.push(l)}),a=this.getLstNodeParent(s)}if(t&&a.length>0)for(let s=0;s<this.list.length;s++){const r=this.list[s];if(r){const l=this.getNodeWithElement(r);if(l&&a.filter(c=>c.obj.id===l.obj.id).length>0){const c=this.getContentOfNodeWithElement(r,l);c&&0!==s&&(t.totalTL+=c.totalTL,t.totalTN+=c.totalTN)}}}this.reBuild(),o&&this.focusMatrix(o)}startUnMergeAction(){const o=this.list[0],t=this.getMatrixEl(o),i=this.getNodeWithElement(o);if(i){const a=this.getContentOfNodeWithElement(o,i);a&&(a.totalTL=a.tempTotalTL,a.totalTN=a.tempTotalTN,a.mergeId.forEach(s=>{const r=this.lstNode.find(l=>l.index==s);if(r){const l=r.content[a.index];l&&(l.isMerge=!1)}}),a.mergeId=[])}this.reBuild(),this.focusMatrix(t)}getCellOfCNode(o,t){for(let i=0;i<this.table__element.rows.length;i++){const a=this.table__element.rows[i];if(a.getAttribute("data-index")===o.index)for(let s=0;s<a.cells.length;s++){const r=a.cells[s];if(r.getAttribute("data-index")===t.index.toString())return r}}}getNodeWithElement(o){if(o.parentElement&&"TR"==o.parentElement.tagName.toUpperCase()){const t=o.parentElement.getAttribute("data-index");if(t){const i=t;return this.lstNode.find(a=>a.index===i)}}}getNodeWithIndex(o){return this.lstNode.find(t=>t.index===o)}isChildWithMatrix(o,t){if(o.obj.prNode)for(var i=this.commonService.myClone(o.obj.prNode);i;){if(t.includes(i.id))return!0;i=i.prNode}return!1}getLstNodeParent(o){const t=[],i=[];return o.forEach(a=>{t.push(a.obj.id)}),o.forEach(a=>{this.isChildWithMatrix(a,t)||0===i.filter(s=>s.obj.id===a.obj.id).length&&i.push(a)}),i}getContentOfNodeWithElement(o,t){const i=o.getAttribute("data-index");if(i&&i?.length>0)return t.content[parseInt(i)]}selectNumberWithElement(o){return Ut.selectNumberOfString(o.innerText)}static selectNumberOfString(o){var t=o.replace(/([0-9]+)T/g,"$1");if(!isNaN(Number(t)))return Number(t);var i=o.replace(/([0-9]+)TL/g,"$1");if(!isNaN(Number(i)))return Number(i);var a=o.replace(/([0-9]+)TN/g,"$1");if(!isNaN(Number(a)))return Number(a);var s=o.replace(/([0-9]+)%/g,"$1");return isNaN(Number(s))?void 0:Number(s)}validateInput(o){const t=o.target,a=this.getNodeWithElement(t)?.content.find(l=>l.indexName===t.getAttribute("data-name"));if(0===(t.getAttribute("data-name")??"").indexOf("POS")&&(t.classList.remove("border-err"),t.classList.remove("common-warning-item")),0==t.innerText.length)return a&&0===(t.getAttribute("data-name")??"").indexOf("POS")&&(a.isErr=!1),void this.pushValueWithElement(t);if(t.innerText=t.innerText.replace(/(\r\n|\n|\r)/gm,"").trim().toUpperCase(),-1!==(t.getAttribute("data-name")??"").indexOf("_SOCH")&&(null==this.selectNumberWithElement(t)||t.innerText.includes(".")||t.innerText.includes(","))&&(t.innerHTML="&nbsp;",this.snackErrElement(t)),-1!==(t.getAttribute("data-name")??"").indexOf("_TGP")&&isNaN(Number(t.innerText))&&(t.innerText.includes(".")||t.innerText.includes(","))&&(t.innerHTML="&nbsp;",this.snackErrElement(t)),0===(t.getAttribute("data-name")??"").indexOf("DIEM")){let l=t.innerText.replace("%","");isNaN(Number(l))?(t.innerHTML="&nbsp;",this.snackErrElement(t)):t.innerText=l}if(0===(t.getAttribute("data-name")??"").indexOf("POS")){const l=Number(t.getAttribute("data-total-input-number"));this.getNoteValidatePos(l,t.innerText,a).isErr&&(this.snackErrElement(t,!1),t.classList.add("common-warning-item"))}""==t.innerText&&(t.innerHTML="&nbsp;");const s=window.getSelection(),r=document.createRange();s.removeAllRanges(),r.selectNodeContents(t),r.collapse(!1),s.addRange(r),t.focus(),this.pushValueWithElement(t)}pushValueWithElement(o){const t=this.getNodeWithElement(o);if(t){const i=this.getContentOfNodeWithElement(o,t);i&&(i.value=o.innerText+("DIEM"===i.indexName?"%":""),this.isNodeWarning(i)?o.classList.add(...this.getWarMsg(i).split(" ")):o.classList.remove("warning-item","wn-empty","wn-over-tn","wn-over-tl"))}this.sumAll()}sumAll(){let o=" ".repeat(this.colName().length).split("").map(()=>0);this.lstNode.forEach(s=>{s.content.forEach(r=>{if(["SOCH_TN","SOCH_TL","TGP"].includes(r.indexName)){r.value=this.sumParamOfColName(s.content,r.indexName).toString();const l=this.getCellOfCNode(s,r);l&&(l.innerText=r.value)}void 0!==o[r.index]&&!r.isMerge&&0!==r.index&&(o[r.index]+=Ut.selectNumberOfString(r.value)??0)})});var t="";o.forEach((s,r)=>{r===o.length-1?(this.isErrSum=Number(s)>100,t+=`<td class="text-center">${s>0?s.toString()+"%":""}</td>`):t+=0===r?'<td class="text-center"></td>':`<td class="text-center">${s>0?s.toString():""}</td>`});const a=`<tr class="dis-item-tb"><td colspan="4" class="text-center">${this.commonService.myTranslateInstant("lang_auto_tong")}</td>${t}</tr>`;this.table__element.tFoot&&(this.table__element.tFoot.innerHTML=a),this.lstNode.forEach(s=>{s.content.forEach(r=>{if("POS"===r.indexName){let l=this.countTotalNumQuestRow(s);const c=document.getElementById(`total_input_number_${r.index}${r.id}`);if(c){c.classList.remove("border-err"),c.classList.remove("common-warning-item"),c.setAttribute("data-total-input-number",l.toString());let d=this.getNoteValidatePos(l,r.value,r);c.setAttribute("common-note-trans",d.str),d.isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}}})})}indexToColName(o){return this.colName()[o]??""}colNameToIndex(o){return this.colName().findIndex(t=>t===o)}colName(){return["POS","NB_SOCH","NB_TGP","TH_SOCH","TH_TGP","VD_SOCH","VD_TGP","VDC_SOCH","VDC_TGP","SOCH_TN","SOCH_TL","TGP","DIEM"]}snackErrElement(o,t=!0){let i=this.commonService.myTranslateInstant("lang_auto_du_lieu_nhap_vao_khong_hop_le")??"";this.noteAction(i,!0),o.classList.add("border-err"),t&&setTimeout(()=>{o.classList.remove("border-err")},1200)}hiddenNoteEmpty(){if(0===this.lstNode.length){let o=this.commonService.myTranslateInstant("lang_auto_matrix_content_text");this.table__element.tBodies[0].innerHTML=`<tr class="text-center"><td colspan="16">${o}</td></tr>`}}getRootMerge(o,t){let i=this.lstNode.findIndex(a=>a.index===o.index);for(let a=i;a>=0;a--)if(!this.lstNode[a]["isMerge"+t])return this.lstNode[a];return o}createEmptyContentWithName(o,t){return{totalTL:0,totalTN:0,tempTotalTL:0,tempTotalTN:0,indexName:this.indexToColName(o),index:o,id:t,value:"&nbsp;",mergeId:[],isErr:!1}}pushTrElement(o){var t=!1;if(this.lstNode.length>0){const a=this.lstNode[this.lstNode.length-1];if(a.obj.id===o.id)return;const s=this.getRootMerge(a,"Cate");(t=a.obj.prNode?.id===o.prNode?.id)&&s.numMergeCate++}const i={numMergeCate:1,isMergeCate:t,index:this.generateIdRequired(10),obj:o,content:" ".repeat(this.colName().length).split("").map((a,s)=>this.createEmptyContentWithName(s,o.id))};return this.lstNode.push(i),this.reBuild(),i}getNoteValidatePos(o,t,i){let a={str:this.commonService.myTranslateInstant("lang_auto_validate_empty")??"",isErr:!1};const s=this.commonService.myTranslateInstant("lang_auto_khong_qua")??"",r=this.commonService.myTranslateInstant("lang_auto_du")??"",l=t.replace("&nbsp;","").trim().toUpperCase();if(0===l.length)return i&&(i.isErr=!1),a;let c=l.split(",").map(d=>d.trim());if(!/^[C0-9,]+$/g.test(l)||l.includes(",,")||l.includes("CC")||c.length!==c.filter(d=>""!==d&&0!==Number(d)).length)return a.isErr=!0,i&&(i.isErr=!0),a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"",a;if(!a.isErr){if(0===c.length)return i&&(i.isErr=!1),a;c.forEach(d=>{a.isErr=!/C([0-9]+)$/.test(d)&&!/([0-9]+)$/.test(d),a.isErr&&(a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"")})}if(!a.isErr){const d=[];c.forEach(y=>{const O=Number(y.replace("C",""));d.includes(O)&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??""),d.push(O)});let f=!1;this.lstNode.map(y=>y.content.find(O=>"POS"===O.indexName&&O.id!==i?.id)?.value.split(",").filter(O=>"&nbsp;"!==O).map(O=>Number(O.replace("C","")))).forEach(y=>{y&&y.forEach(O=>{d.includes(O)&&(f=!0)})}),f&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??"")}return a.isErr||(a.isErr=c.length!==o,a.isErr&&(a.str=(this.commonService.myTranslateInstant("lang_auto_validate_number")??"").replace("${2}",c.length.toString()).replace("${3}",c.length>o?s:r).replace("${1}",o.toString()))),i&&(i.isErr=c.length!==o),a}reBuild(){this.removeAllList();var o="";this.lstNode.forEach((t,i)=>{var a="";a+=`<td class="dis-item-tb text-center">${i+1}</td>`,!t.isMergeCate&&t.obj.prNode&&(t.obj.prNode.item=this.commonService.myTranslateInstant(t.obj.prNode.item)??"",a+=`<td rowSpan="${t.numMergeCate}" class="dis-item-tb text-center">${t.obj.prNode.item??""}</td>`),t.obj.item=this.commonService.myTranslateInstant(t.obj.item)??"",a+=`<td class="dis-item-tb text-center" colSpan="${t.obj.prNode?1:2}">${t.obj.item}</td>`,a+='<td class="dis-item-tb text-center tb-matrix-editor-trash-node"><i class="fa fa-trash"></i></td>',t.content.forEach(s=>{if(["SOCH_TN","SOCH_TL","TGP"].includes(s.indexName))a+=`<td data-index="${s.index}" class="dis-item-tb text-center">${s.value}</td>`;else if("POS"===s.indexName){let r=this.countTotalNumQuestRow(t),l=this.getNoteValidatePos(r,s.value,s);a+=`<td id="total_input_number_${s.index}${s.id}" data-total-input-number="${r}" col-name="${this.getNameCol(s.indexName)}" data-name="${s.indexName}" data-index="${s.index}" class="${this.isNoteEditTable(s)?"note-edit-item-tb":""} ${this.getWarMsg(s)} edit-item-tb text-center common-note-item" common-note-trans="${l.str}" ${this.statusDisable?"":'contenteditable="true"'} ${s.mergeId.length>0?'rowSpan="'+(s.mergeId.length+1)+'"':""}>${s.value}</td>`}else if(!s.isMerge)if(t.disLoading){let r=this.commonService.myTranslateInstant("lang_auto_hien_co_trac_nghiem")??"",l=this.commonService.myTranslateInstant("lang_auto_tu_luan")??"",c=this.commonService.myTranslateInstant("lang_auto_khong_co_cau_hoi_nao")??"",d=this.commonService.myTranslateInstant("lang_auto_khong_du_cau_hoi")??"",f=d+" "+this.commonService.myTranslateInstant("lang_auto_cau_TL")?.toLowerCase(),y=d+" "+this.commonService.myTranslateInstant("lang_auto_trac_nghiem")?.toLowerCase();a+=`<td col-name="${this.getNameCol(s.indexName)}" num-tl="${s.totalTL??0}" num-tn="${s.totalTN??0}" data-name="${s.indexName}" first-trans="${r}" last-trans="${l}" over-question-trans-tl="${f}" over-question-trans-tn="${y}" empty-question-trans="${c}" data-index="${s.index}" class="${this.isNoteEditTable(s)?"note-edit-item-tb":""} ${this.getWarMsg(s)} edit-item-tb text-center ${s.value&&(s.value.includes(".")||s.value.includes(","))?"border-err":""}" ${this.statusDisable?"":'contenteditable="true"'} ${s.mergeId.length>0?'rowSpan="'+(s.mergeId.length+1)+'"':""}>${s.value}</td>`}else a+=`<td data-name="${s.indexName}" data-index="${s.index}" class="text-center" ${s.mergeId.length>0?'rowSpan="'+(s.mergeId.length+1)+'"':""}><i class="fa fa-spinner fa-spin"></i></td>`}),o+=`<tr data-index="${t.index}">${a}</tr>`}),this.table__element.tBodies[0].innerHTML=o,this.sumAll(),this.startAddEvent(),this.hiddenNoteEmpty(),this.pushChangeEvent()}countTotalNumQuestRow(o){let t=0;return o.content.filter(i=>["SOCH_TN","SOCH_TL"].includes(i.indexName)).forEach(i=>{t+=Number(i.value??"0")}),t}isNodeWarning(o){let t=!o.value.includes("TL");const i=Ut.selectNumberOfString(o.value)??0;return this.isNoteEditTable(o)&&(0===o.totalTL&&0===o.totalTN||t&&i>o.totalTN||!t&&i>o.totalTL||!o.totalTL&&!o.totalTN)}getWarMsg(o){let t=!o.value.includes("TL");const i=Ut.selectNumberOfString(o.value)??0;if(this.isNoteEditTable(o)){if(0===o.totalTL&&0===o.totalTN||!o.totalTL&&!o.totalTN)return"warning-item wn-empty";if(t&&i>o.totalTN)return"warning-item wn-over-tn";if(!t&&i>o.totalTL)return"warning-item wn-over-tl"}return""}isNoteEditTable(o){return o.indexName.includes("SOCH")&&o.indexName.indexOf("SOCH")>0}getNameCol(o){let t=this.commonService.myTranslateInstant("lang_auto_nhan_biet")??"",i=this.commonService.myTranslateInstant("lang_auto_thong_hieu")??"",a=this.commonService.myTranslateInstant("lang_auto_van_dung")??"",s=this.commonService.myTranslateInstant("lang_auto_van_dung_cao")??"";return 0===o.indexOf("NB")?t:0===o.indexOf("TH")?i:0===o.indexOf("VDC")?a:0===o.indexOf("VD")?s:""}generateIdRequired(o){let t="";for(let s=0;s<o;s++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+t}}var Nn=S(14845),Jn=S(51026),Rt=S(87384);let Ao=(()=>{class n{constructor(t,i,a){this.baseApiService=t,this.gzipHelper=i,this.commonService=a,this.apiLink=Ce.N.print_api+"/convert_img"}convertAction(t){return new Promise((i,a)=>{this.baseApiService.commonHttp(this.apiLink,{"Content-Type":"application/json"},t).subscribe(s=>{s&&s.success?i({id:t.id,base64:s.data}):a(new Error("No load image out"))})})}convertImageService(t){return new Promise((i,a)=>{const s=new U.Q(10);t.forEach(r=>{s.addTask(this,this.convertAction,[r])}),s.start().then(r=>{0==r.errs.length?i(r.datas):a(new Error("L\u1ed7i convert"))})})}pushRankToMatrixBeauty(t,i,a){let s=t.ranks.find(r=>r.name===i);s?s.numQuest+=a:t.ranks.push({name:i,numQuest:a})}makeBeautyMatrixObj(t){const i={id:t.id,name:t.name??"",numberQuest:0,ranks:[],knowledge:[]};let a=this.gzipHelper.resultContentSupport(t.content??"");const s=this.commonService.castJsonToObj(a);return s&&s.forEach(r=>{const l=r.content.find(N=>"NB_SOCH"===N.indexName);l&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_NB")??"NB",Ut.selectNumberOfString(l.value)??0);const c=r.content.find(N=>"TH_SOCH"===N.indexName);c&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_TH")??"TH",Ut.selectNumberOfString(c.value)??0);const d=r.content.find(N=>"VD_SOCH"===N.indexName);d&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VD")??"VD",Ut.selectNumberOfString(d.value)??0);const f=r.content.find(N=>"VDC_SOCH"===N.indexName);f&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VDC")??"VDC",Ut.selectNumberOfString(f.value)??0);const y=r.content.find(N=>"SOCH_TN"===N.indexName),O=r.content.find(N=>"SOCH_TL"===N.indexName);y&&O&&(isNaN(Number(y.value))||(i.numberQuest+=Number(y.value)),isNaN(Number(O.value))||(i.numberQuest+=Number(O.value))),r.obj.item.endsWith(")")&&(r.obj.item=r.obj.item.substring(0,r.obj.item.lastIndexOf("("))),i.knowledge.push(r.obj.item)}),i}getBeautyMatrixObjs(t){let i=[];return t.forEach(a=>{i.push(this.makeBeautyMatrixObj(a))}),i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Nn._),e.LFG(Jn.n),e.LFG(Rt.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ln=S(50503),si=S(20054),Ve=S(71284),fn=S(13423),da=S(1914),we=S(31518);let De=(()=>{class n{constructor(t,i){this.browserStorageService=t,this.commonService=i,this.data={}}setMode(t){this.browserStorageService.saveSimpleStorage("__editor:mode_open",t)}getMode(){var t=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),t}setFileProcess(t){this.file=t}getFirstFile(){let t=this.file;return this.file=void 0,t}setOutputData(t){this.data=t}getOutputData(){return this.data}redirectToConfig(t){this.data.homework&&t.showHomework(),(this.data.exam||this.data.examOffline)&&t.showExam()}setMatrixData(t,i){i?this.matrix=t:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(t))}getMatrixData(){var t=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),t?this.commonService.castJsonToObj(t):this.matrix}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(we.z),e.LFG(Rt.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Qe=S(63934);let Ge=(()=>{class n{constructor(t,i){this.commonService=t,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new U.Q(50,{function:(a,s)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(a,s)}}),this.taskUploadImage=new U.Q(3,{function:(a,s)=>{this.callbackUploadImage&&this.callbackUploadImage(a,s)}})}convertQuestions(t,i,a){return new Promise(s=>{this.reset(),t.forEach(r=>{const l=this.commonService.willDeleteParseJson(r.answerConfig||"[]");r.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(r,"questionContent"),r.questionText?.includes("<img ")&&this.replaceImageCdnInContent(r,"questionText"),r.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(r,"answerMedia"),r.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(r,"mediaMeta"),l.forEach(c=>{c.content.includes("<img ")&&this.replaceImageCdnInContent(c,"content")}),this.actionRunAfterConvert.push(()=>{r.answerConfig=JSON.stringify(l)})}),this.imageMaps.forEach(r=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[r])}),this.taskConvertBase64ToCanvas.start().then(r=>{if(r.errs.length>0)a(r.errs,void 0);else{let c=0;const d=[],f=()=>{const y=document.createElement("canvas");y.width=this.sizeDefaultCanvas,y.height=this.sizeDefaultCanvas;const O=y.getContext("2d");O&&(O.fillStyle="white",O.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),d.push({cdn:"",cX:0,cY:0,canvas:y,imgs:[]})};f(),r.datas.forEach((y,O)=>{var N=d[d.length-1];N.cX+y.canvas.width+4>this.sizeDefaultCanvas?(N.cX=4,N.cY+=c+4,c=0):N.cX+=4,N.cY+y.canvas.height>this.sizeDefaultCanvas&&(f(),N=d[d.length-1]);var I=N.canvas.getContext("2d");N.imgs.push({x:N.cX,y:N.cY,width:y.canvas.width,height:y.canvas.height,index:O}),I?.drawImage(y.canvas,0,0,y.canvas.width,y.canvas.height,N.cX,N.cY,y.canvas.width,y.canvas.height),N.cX+=y.canvas.width,c=c<y.canvas.height?y.canvas.height:c}),d[0].imgs.length>0&&d.forEach(y=>{this.taskUploadImage.addTask(this,this.startUploadFile,[y])}),this.taskUploadImage.start().then(y=>{if(y.errs.length>0)a(r.errs,void 0);else{let O=!0;y.datas.forEach(N=>{N.imgs.forEach(I=>{const z=r.datas[I.index];if(z){const $={link:N.cdn,data:{x:I.x,y:I.y,width:I.width,height:I.height}};z.objs.forEach(Y=>{if(Y[z.path])if(this.commonService.isJson(Y[z.path])){const te=this.commonService.willDeleteParseJson(Y[z.path]);Object.prototype.hasOwnProperty.call(te,"renderedStr")?(te.renderedStr=te.renderedStr.replace(z.base,`@[]${JSON.stringify($)}@[]`),Y[z.path]=JSON.stringify(te)):Y[z.path]=Y[z.path].replace(z.base,`@[]${JSON.stringify($)}@[]`)}else Y[z.path]=Y[z.path].replace(z.base,`@[]${JSON.stringify($)}@[]`);else O=!1})}})}),O?(this.actionRunAfterConvert.forEach(N=>{N()}),t.forEach((N,I)=>{let z=this.commonService.willDeleteParseJson(N.mediaMeta||"{}"),$=i[I];const Y={id:0,name:N.name,extension:"text",content:N.questionContent,groupContent:z.renderedStr,metaData:{isFixAns:Number(N.isFixAns),forcedFixAns:!1,groupType:N.groupType?Number(N.groupType):void 0}};$&&(Y.vMetaEditor=$.meta),N.questionContent=JSON.stringify([Y])}),s()):a(r.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(t,i){var a=t[i];if(this.commonService.isJson(t[i])){const l=this.commonService.willDeleteParseJson(t[i]);Object.prototype.hasOwnProperty.call(l,"renderedStr")&&(a=l.renderedStr)}let s=a.matchAll(this.pattern_image);for(;;){let l=s.next();if(l.done)break;let c=l.value[0];var r=this.imageMaps.findIndex(d=>d.base===c&&d.path===i);-1===r?this.imageMaps.push({base:c,cdn:"",data:null,objs:[t],path:i,canvas:document.createElement("canvas")}):this.imageMaps[r].objs.push(t)}}startConvertCanvas(t){return new Promise((i,a)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{let l=1;if(s.width>this.sizeDefaultCanvas&&(l=this.sizeDefaultCanvas/s.width),s.height>this.sizeDefaultCanvas){let d=this.sizeDefaultCanvas/s.height;d<l&&(l=d)}t.canvas.width=s.width*l,t.canvas.height=s.height*l,t.canvas.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,t.canvas.width,t.canvas.height),i(t)},s.onerror=()=>{t.canvas.width=1,t.canvas.height=1;const l=t.canvas.getContext("2d");l&&(l.fillStyle="white",l.fillRect(0,0,1,1)),i(t)};let r=this.pattern_base64.exec(t.base);null!=r?s.src=r[0]:a(new Error("l\u1ed7i regex"))})}startUploadFile(t){return new Promise((i,a)=>{const s=this.dataURLtoFile(t.canvas.toDataURL("image/png",1));(0,J.hv)(s).then(r=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(r).subscribe(l=>{l.type!=C.dt.UploadProgress&&(1==l.success&&l.data?i({...t,cdn:l.data.url||""}):a(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))))})})})}dataURLtoFile(t){let i=this.getFileName(t);for(var a=t.split(","),s=a[0].match(/:(.*?);/),r=atob(a[1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);return new File([c],i,{type:s&&s.length>0?s[1]:"png"})}getFileName(t){var i=t.split("").reverse().join(""),a=i.indexOf(";"),s=i.indexOf("/",a);return i.substring(a,s).split("").reverse().join("")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(Ln.$))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var lt=S(11453);const gt=["popupConfirm"],$t=["mobileEditor"],xn=["popupOnlyImageEditor"];function Pi(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.conf.showInfomationQuests.show=!0)}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"circle",31)(3,"line",32)(4,"line",33),e.qZA(),e.kcU(),e.TgZ(5,"span",34),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"lang_auto_thong_tin_de_thi")))}function ki(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.conf.showErrorsQuests.show=!0)}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"path",36)(3,"path",37)(4,"path",38)(5,"path",39),e.qZA(),e.kcU(),e.TgZ(6,"span",34),e._uU(7),e.ALo(8,"replace"),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(7),e.Oqu(e.Dn7(8,1,e.lcZ(9,5,"lang_auto_co_n_loi_khong_the_luu"),"_n_",t.errs.length.toString()))}}const zi=function(n){return{height40:n}};function ma(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"div",41)(2,"span",42),e._UZ(3,"lucide-icon",43),e.qZA(),e.TgZ(4,"span",34),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"input",44),e.NdJ("ngModelChange",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.conf.inputMoveToQuestionValue=a)})("keyup.enter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleGotoQuestionView())})("focus",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSetStatusTooltipQuestionView(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSetStatusTooltipQuestionView(!1))}),e.qZA(),e.TgZ(8,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleGotoQuestionView())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(9,zi,!t.conf.inputMoveToQuestion)),e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_testbank_create_exam_width_file_pdf_go_to")),e.xp6(2),e.Q6J("ngModel",t.conf.inputMoveToQuestionValue)("min",1),e.xp6(2),e.Oqu(e.lcZ(10,7,"lang_auto_den"))}}function Ft(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"div",24),e.TgZ(2,"div",25),e.YNc(3,Pi,8,3,"div",26),e.YNc(4,ki,10,7,"div",27),e.YNc(5,ma,11,11,"div",28),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.lstQuest.length>0&&0==t.editQuestId),e.xp6(1),e.Q6J("ngIf",t.errs.length>0),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId)}}function tt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",55)(2,"button",56),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw(4);return e.KtG(!!r.attachFiles&&r.attachFiles.splice(s,1))}),e.TgZ(3,"mat-icon",57),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"span",58),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.onShowFile(s,-1))}),e.TgZ(6,"span",59),e._uU(7),e.qZA()()()()}if(2&n){const t=o.$implicit;e.xp6(6),e.Q6J("title",t.name),e.xp6(1),e.Oqu(t.name)}}function _t(n,o){if(1&n&&(e.TgZ(0,"div",52)(1,"div",53),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,tt,8,2,"div",54),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_danh_sach_file_dinh_kem")+":"," "),e.xp6(2),e.Q6J("ngForOf",t.attachFiles)}}function Et(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",60)(1,"question-dropper",61),e.NdJ("onDropFile",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.onDropFile(a))}),e.qZA()()}}function Jt(n,o){if(1&n&&(e.TgZ(0,"div",46)(1,"div",47)(2,"div",48),e._UZ(3,"div",49),e.ALo(4,"safeContentQuestion"),e.ALo(5,"async"),e.ALo(6,"mathJaxContent"),e.YNc(7,_t,5,4,"div",50),e.YNc(8,Et,2,0,"div",51),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("innerHTML",e.lcZ(4,3,e.lcZ(5,5,e.lcZ(6,7,t.text))),e.oJD),e.xp6(4),e.Q6J("ngIf",t.attachFiles.length>0),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId)}}function Un(n,o){if(1&n&&(e.TgZ(0,"mat-icon",73),e.ALo(1,"mytranslate"),e.ALo(2,"mytranslate"),e._uU(3," push_pin"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.s9C("matTooltip",t.isFixGroup?e.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):e.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function Ro(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",74)(1,"span",75),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.setFixGroup(a))}),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,"tieu_de_nhom")),e.xp6(3),e.AsE(" ",t.isFixGroup?e.lcZ(6,5,"lang_auto_bo_co_dinh"):e.lcZ(7,7,"lang_auto_co_dinh")," ",e.lcZ(8,9,"lang_auto_cau_trong_nhom"),"")}}function Ha(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",77)(1,"app-quest-header",78),e.NdJ("onChangeQuest",function(a){e.CHM(t);const s=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.onChangeQuest(a,s))})("onRandomQuest",function(){e.CHM(t);const a=e.oxw(2).index,s=e.oxw(2);return e.KtG(s.onRandomOne(a))})("onApplyAllTag",function(a){e.CHM(t);const s=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.onApplyAllTag(a,s))})("onError",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.commonService.snackError(a))})("onLabelClick",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.editorFocus(a))})("onHotKeyPointSync",function(a){e.CHM(t);const s=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.setPointBelow(a,s))})("onExtraInfo",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.setExtra(a))})("onCut",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.onCut(a))})("onDel",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.onDel(a))})("onCopy",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.onCopy(a))}),e.qZA()()}if(2&n){const t=e.oxw(2),i=t.$implicit,a=t.index,s=e.oxw(2);e.xp6(1),e.Q6J("q",i)("notOnlyQuestEdit",!s.editQuestId)("index",a)("questionTags",s.questionTags)}}function Ti(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function Oo(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Ti,2,1,"span",82),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isCorrect)}}function lo(n,o){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Oo,2,1,"span",54),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an_dung")+":"),e.xp6(2),e.Q6J("ngForOf",t.quest.answers)}}function Ka(n,o){if(1&n&&(e.TgZ(0,"span",88),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function rc(n,o){if(1&n&&(e.TgZ(0,"div",85)(1,"span",86),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Ka,2,1,"span",87),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an")+":"),e.xp6(2),e.Q6J("ngForOf",t.strAns)}}function vr(n,o){1&n&&(e.TgZ(0,"span",93),e._UZ(1,"div",94)(2,"div",95),e.qZA())}const yr=function(n){return{"an-true":n}};function _a(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",89),e.YNc(1,vr,3,0,"span",90),e.TgZ(2,"div",91),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4).$implicit,l=e.oxw(2);return e.KtG(l.setCorrectAns(r,s.ans))}),e.ALo(3,"mytranslate"),e._uU(4),e.qZA(),e.TgZ(5,"div",92),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(6);return e.KtG(r.editorFocus(s.ans.parts))}),e.ALo(6,"safeContentQuestion"),e.ALo(7,"async"),e.ALo(8,"mathJaxContent"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(6);e.xp6(1),e.Q6J("ngIf",t.ans.isCorrect),e.xp6(1),e.s9C("matTooltip",i.showTooltip?e.lcZ(3,7,"lang_auto_cick_de_chon_lam_dap_an_dung"):void 0),e.Q6J("matTooltipPosition","right")("ngClass",e.VKq(15,yr,t.ans.isCorrect)),e.xp6(2),e.hij(" ",t.ans.label," "),e.xp6(1),e.Q6J("innerHTML",e.lcZ(6,9,e.lcZ(7,11,e.lcZ(8,13,t.renderedStr))),e.oJD)("ngClass",e.VKq(17,yr,t.ans.isCorrect))}}function wr(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,lo,5,4,"div",82),e.YNc(2,rc,5,4,"div",83),e.YNc(3,_a,9,19,"div",84),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.Gre("box-ans quest-ans-ver-",t.v,""),e.xp6(1),e.Q6J("ngIf","pdf-1-0"==t.v),e.xp6(1),e.Q6J("ngIf",4==t.type&&t.strAns),e.xp6(1),e.Q6J("ngForOf",t.answers)}}const pa=function(n){return{"padding-mobile":n}};function lc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",98),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw(2);return e.KtG(s.editorFocus(a.quest.help))}),e.ALo(6,"safeContentQuestion"),e.ALo(7,"async"),e.ALo(8,"mathJaxContent"),e.qZA()()}if(2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);e.Gre("box-help quest-help-ver-",t.v,""),e.Q6J("ngClass",e.VKq(14,pa,i.isMobile)),e.xp6(3),e.Oqu(e.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(6,8,e.lcZ(7,10,e.lcZ(8,12,t.helpRenderedStr))),e.oJD)}}function cc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",79)(1,"div",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.editorFocus(a.quest.parts))}),e.ALo(2,"safeContentQuestion"),e.ALo(3,"async"),e.ALo(4,"mathJaxContent"),e.ALo(5,"removeBracket"),e.qZA(),e.YNc(6,wr,4,6,"div",22),e.YNc(7,lc,9,16,"div",81),e.qZA()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Gre("tex2jax_process box-content quest-ver-",t.v,""),e.Q6J("innerHTML",e.lcZ(2,6,e.lcZ(3,8,e.lcZ(4,10,e.lcZ(5,12,t.renderedStr)))),e.oJD),e.xp6(5),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.helpRenderedStr)}}function Cr(n,o){if(1&n&&(e._UZ(0,"div",99),e.ALo(1,"safeContentQuestion")),2&n){const t=e.oxw(2).$implicit;e.Q6J("innerHTML",e.lcZ(1,1,t.err),e.oJD)}}function uc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",100)(1,"button",101),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.showFeedbackQuestionDialog(a))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",102),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_bao_loi")))}function dc(n,o){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,Un,4,5,"mat-icon",65),e._UZ(2,"div",66),e.ALo(3,"safeContentQuestion"),e.YNc(4,Ro,9,11,"div",67),e.YNc(5,Ha,2,4,"div",68),e.TgZ(6,"div",69)(7,"div"),e.YNc(8,cc,8,14,"div",70),e.YNc(9,Cr,2,3,"div",71),e.qZA()(),e.YNc(10,uc,4,3,"div",72),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isFixGroup||t.quest.isFixAns),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,7,i.errorQuestionView.makeErr(t,i.lstQuest)),e.oJD),e.xp6(2),e.Q6J("ngIf",t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(3),e.Q6J("ngIf",!t.err),e.xp6(1),e.Q6J("ngIf",t.err),e.xp6(1),e.Q6J("ngIf",t.id&&"azota"==i.type)}}function mc(n,o){1&n&&e._UZ(0,"div",103)}const kr=function(n){return{height:n}};function _c(n,o){if(1&n&&(e.TgZ(0,"div",62),e.YNc(1,dc,11,9,"div",63),e.YNc(2,mc,1,0,"div",64),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.hYB("id","quest",t.quest.isGroup?"-g":"","-",t.quest.label,""),e.Q6J("ngStyle",e.VKq(6,kr,a.lstQuest.length<a.maxQuestEnableLazy?"auto":t.lazyQuestView&&t.lazyQuestView.curHeight?t.lazyQuestView.curHeight:"200px")),e.uIk("data-idx-quest",i),e.xp6(1),e.Q6J("ngIf",a.lstQuest.length<a.maxQuestEnableLazy||(null==t.lazyQuestView?null:t.lazyQuestView.show)),e.xp6(1),e.Q6J("ngIf",!(a.lstQuest.length<a.maxQuestEnableLazy||null!=t.lazyQuestView&&t.lazyQuestView.show))}}function Tr(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",113),e.NdJ("click",function(){e.CHM(t),e.oxw(3);const a=e.MAs(6);return e.KtG(a.click())}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"path",114)(3,"polyline",115)(4,"line",116),e.qZA(),e.kcU(),e.TgZ(5,"span",34),e._uU(6,"Upload File"),e.qZA()()}}function pc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",117),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openLibrary())}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"line",118)(3,"line",119),e.qZA(),e.kcU(),e.TgZ(4,"span",34),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_chon_tu_ngan_hang")," "))}function hc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",120),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openMathEditor())}),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"path",121),e.qZA(),e.kcU(),e.TgZ(3,"span",34),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_chen_cong_thuc")," "))}function gc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",122),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.togglePromptCreateExam())}),e.TgZ(1,"span",123),e._UZ(2,"img",124),e.ALo(3,"convertRawLinkOfGitHub"),e.qZA(),e.TgZ(4,"span"),e._uU(5," AzotaAI "),e.qZA()()}2&n&&(e.xp6(2),e.Q6J("src",e.lcZ(3,1,"azota_assets/images/azotaAI.png"),e.LSH))}function fc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",140),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.format())}),e.O4$(),e.TgZ(2,"svg",135),e._UZ(3,"rect",141)(4,"rect",142)(5,"path",143),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_format")," "))}function xc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",134),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.saveLocal())}),e.O4$(),e.TgZ(2,"svg",30),e._UZ(3,"path",114)(4,"polyline",144)(5,"line",145),e.qZA(),e.kcU(),e.TgZ(6,"span",34),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_luu_ve_may")," "))}function bc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",125)(1,"button",126),e.O4$(),e.TgZ(2,"svg",127),e._UZ(3,"circle",128)(4,"circle",129)(5,"circle",130),e.qZA()(),e.kcU(),e.TgZ(6,"mat-menu",null,131)(8,"div",132)(9,"ul",133)(10,"li")(11,"a",134),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.randomAllAgain())}),e.O4$(),e.TgZ(12,"svg",135),e._UZ(13,"path",136)(14,"path",137)(15,"path",138)(16,"path",139),e.qZA(),e.kcU(),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()(),e.YNc(20,fc,9,3,"li",82),e.YNc(21,xc,9,3,"li",82),e.qZA()()()()}if(2&n){const t=e.MAs(7),i=e.oxw(3);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(17),e.hij(" ",e.lcZ(19,4,"lang_auto_lay_ngau_nhien_lai_toan_bo")," "),e.xp6(2),e.Q6J("ngIf","user"==i.type),e.xp6(1),e.Q6J("ngIf",0==i.editQuestId)}}function vc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",146)(1,"div",147),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"a",148),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(1,a.commonService.getCurrentLang()))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7," | "),e.TgZ(8,"a",149),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(2,a.commonService.getCurrentLang()))}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e._uU(11," | "),e.TgZ(12,"a",150),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(3,a.commonService.getCurrentLang()))}),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"mytranslate"),e.qZA(),e._uU(16," | "),e.TgZ(17,"a",151),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(4,a.commonService.getCurrentLang()))}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_auto_noi_dung_mau")+": "," "),e.xp6(3),e.Oqu(e.lcZ(6,7,"lang_auto_mau")+" 1"),e.xp6(4),e.Oqu(e.lcZ(10,9,"lang_auto_mau")+" 2"),e.xp6(4),e.Oqu(e.lcZ(14,11,"lang_auto_mau")+" 3 ("+e.lcZ(15,13,"lang_core_there_is_fill_in_the_blank")+")"),e.xp6(5),e.Oqu(e.lcZ(19,15,"lang_auto_mau")+" 4"))}function yc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",152)(1,"azt-ai-chatbox",153),e.NdJ("close",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.closeDialogPromptCreateExam(a))})("createQuestion",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.aiCreateQuestion(a))}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("questList",t.lstQuest)}}const wc=function(n){return{height:n}};function Cc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",104)(2,"div",24),e.YNc(3,Tr,7,0,"div",105),e.YNc(4,pc,7,3,"div",106),e.YNc(5,hc,6,3,"div",107),e.YNc(6,gc,6,3,"div",108),e.YNc(7,bc,22,6,"div",109),e.qZA()(),e.TgZ(8,"azt-monaco-editor",110),e.NdJ("onStartProcessFile",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.processFile(a))})("onInit",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onEditorInitComplete(a))}),e.qZA(),e.YNc(9,vc,20,17,"div",111),e.YNc(10,yc,2,1,"div",112),e.qZA()}if(2&n){const t=e.oxw(2);e.Gre("relative col-editor tex2jax_ignore ",t.isMobile?"azt-order-1":"",""),e.xp6(3),e.Q6J("ngIf","user"==t.type),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId&&"user"==t.type),e.xp6(1),e.Q6J("ngIf","user"==t.type),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId&&"user"==t.type&&t.willShowAIBox),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId),e.xp6(1),e.Akn(e.VKq(15,wc,t.conf.heightContent+"px")),e.Q6J("config",t.aztLangConfig)("readOnly","azota"==t.type)("editorApiService",t.editorApiService),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId),e.xp6(1),e.Q6J("ngIf",t.showPromptCreateExam)}}function kc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,Ft,6,3,"div",17),e.TgZ(3,"div",18),e.NdJ("scroll",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onScrollQuest())}),e.YNc(4,Jt,9,9,"div",19),e.YNc(5,_c,3,8,"div",20),e._UZ(6,"div",21),e.qZA()(),e.YNc(7,Cc,11,17,"div",22),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Gre("col-questions box bg-slate-100 dark:bg-darkmode-400 rounded-none ",t.isMobile?"azt-order-2":"",""),e.xp6(1),e.Q6J("ngIf",t.lstQuest.length>0),e.xp6(2),e.Q6J("ngIf",""!=t.text||t.attachFiles.length>0),e.xp6(1),e.Q6J("ngForOf",t.lstQuest),e.xp6(2),e.Q6J("ngIf",""!=t.aztLangConfig)}}function Tc(n,o){if(1&n&&(e.TgZ(0,"div",154)(1,"div",155)(2,"div",156)(3,"span"),e._UZ(4,"span",157),e._uU(5,"\xa0"),e.qZA()(),e.TgZ(6,"div",158),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.Oqu(e.lcZ(8,1,t.conf.logConfig.msg))}}function ri(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",159)(1,"app-test-finder",160),e.NdJ("closeTestFinder",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.closeLibrary(a))}),e.qZA()()}if(2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("isFirstTime",null!==(i=t.conf.isFirstTime)&&void 0!==i&&i)}}function Ac(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mathtype-editor",161),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.mathEditor.show=!1)})("onInsertLatex",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onInsertLatex(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("inp",t.conf.mathEditor.latex)}}function Ar(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"similar-quest",162),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.similarQuest.show=!1)})("onInsert",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.replaceQuest(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("inp",t.lstQuestSimilar)}}function Or(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"show-errors-quests",163),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showErrorsQuests.show=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("lstErrors",t.errs)}}function ha(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"show-info-quests",164),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showInfomationQuests.show=!1)})("onNextQuestion",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onInfoQuestionNexQuestion(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("lstQuest",t.lstQuest)}}function Ts(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"only-image-editor",165),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.imageEditor.show=!1)})("onPushImage",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onPushImageAction(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("el_target",t.conf.imageEditor.el)}}function Ji(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",166)(1,"main-config-homework",167),e.NdJ("onBack",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showEditor())}),e.qZA()()}}function Oc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",168)(1,"app-info-general",167),e.NdJ("onBack",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showEditor())}),e.qZA()()}}const Bo=function(n){return{hidden:n}};class fi{constructor(o){this.commonService=o,this.check=!1}makeErr(o,t,i){const a=this.isFullNoPoint(t);if(!this.check)return;if(!o.quest.isGroup&&(!o.point||o.point<=0)&&!a){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_diem_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?r:`<span class="quest-err">${r} ${l}</span>`}let s=o.answers.filter(r=>r.ans.isCorrect).length>0;if(1==o.type&&!s){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?r:`<span class="quest-err">${r} ${l}</span>`}}makeFirstErr(o){this.check=!0;for(const t of o)if(void 0!==this.makeErr(t,o,void 0))return t}isFullNoPoint(o){return o.filter(t=>!t.point).length===o.length}}let ni=(()=>{class n extends W.Q{handleGotoQuestionView(){this.revealQuest(this.conf.inputMoveToQuestionValue)||this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}onInfoQuestionNexQuestion(t){this.conf.showInfomationQuests.show=!1,this.conf.inputMoveToQuestionValue=t.toString(),this.handleGotoQuestionView()}handleSetStatusTooltipQuestionView(t){this.conf.inputMoveToQuestionTooltip=t}handleFileDrop(t){""!==this.text?this.onDropFile(t[0]):this.processFile(t[0])}convertPartItem(t){return 0===t.length?"":/^\[@((.)+)\]/g.test(t[0].text??"")?t[0].lineIdx+"_____"+t[0].text?.split("]=>")[0]+"]":""}convertQuestion(t,i,a,s,r){return new Promise(l=>{const c=[];a.answers.forEach(O=>{c.push({key:O.ans.label,content:O.renderedStr})});let d=a.answers.find(O=>!0===O.ans.isCorrect);const y={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(s+1),answerType:a.type,categoryId:0,questionContent:a.renderedStr,questionText:a.renderedStr,answerConfig:JSON.stringify(c),groupId:r,answerResult:d?JSON.stringify([d.ans.label]):a.strAns&&a.strAns?.length>0?JSON.stringify(a.strAns):void 0,totalQuestion:this.lstQuest.length,version:"4",isFixAns:a.quest.isFixAns?1:0,isImage:1,answerMedia:a.helpRenderedStr,mediaMeta:JSON.stringify(t),metadata:JSON.stringify(a?.meta),groupType:t?.isFixGroup?"1":void 0,tags:a.tag&&a.tag.length?a.tag.map(O=>O.code??""):[],__path:this.convertPartItem(a.quest.parts)};i.exam?.questionObj.listQuestions?.push(y),i.exam?.rootQuests.push(a),a.audio&&(0,J.F0)(a.audio.type)?a.attachments&&"[]"!==a.attachments?(y.attachments=a.attachments,l()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(a.audio).subscribe(O=>{O.type!=C.dt.UploadProgress&&(1==O.success?y.attachments=JSON.stringify([O.data]):this.showErrorSnack("lang_auto_upload_file_audio_that_bai"),l())}):l()})}uploadAttHomeworkFile(t,i,a){return new Promise(s=>{this.apiUploadService.uploadToCdnForHomework(a).subscribe(r=>{1==r.success&&r.data&&(i.push(r.data),i.length===this.attachFiles.length&&t.homework&&(t.homework.files=JSON.stringify(i)),s())})})}uploadFileProcess(t){return new Promise(i=>{this.saveFileProcess?this.apiUploadService.uploadToCdnProgressForTestbankDocx(this.saveFileProcess).subscribe(a=>{a.type!=C.dt.UploadProgress&&(1==a.success&&t.exam&&(t.exam.examObj.cdnExamFile=a.data?.url??""),i())}):i()})}saveAction(){if(this.errs.length>0)this.conf.showErrorsQuests.show=!0;else{if(this.lstQuest.length>0){const t=this.errorQuestionView.makeFirstErr(this.lstQuest);if(null!=t)return this.commonService.snackError(this.errorQuestionView.makeErr(t,this.lstQuest,!0)||""),void this.revealQuest(t.quest.label+"")}this.loadingManager.size>0?this.popupConfirm?.startConfirm("lang_auto_msg_confirm_watting_loading").then(t=>{t&&(this.stopAudio(),this.save())}):(this.stopAudio(),this.save())}}parseAzt(t){let i=this;var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=s=>{let l=JSON.parse(a.result??"");if(!l.text)return i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0);i.images=l.imgs,i.mathMap=new Map;for(let c of l.maths)i.mathMap.set(c[0],c[1]);i.extraMap=new Map;for(let c of l.infos)i.extraMap.set(c[0],c[1]);i.aztEditor?._editor.setValue(l.text),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},a.onerror=s=>{i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}}saveCdn(t){return new Promise(i=>{if(t.exam?.examObj){let a=new Date,s=`user-${this.userService.getUserObj().id}-de-azota-${a.getDate()}${a.getMonth()+1}${a.getFullYear()}-${a.getTime()}.azt`;const r=this.generateFileAzt();if(r){const l=new File([r],s,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(l).subscribe(c=>{c.type!=C.dt.UploadProgress&&(1==c.success&&c.data&&t.exam?.examObj&&(t.exam.examObj.cdnEditorFile=c.data.url??""),i())})}else i()}else i()})}saveLocal(){let t=new Date,i=`de-azota-${t.getDate()}${t.getMonth()+1}${t.getFullYear()}-${t.getTime()}.azt`;const a=this.generateFileAzt();if(a)if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(a,i);else{const s=window.document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}generateFileAzt(){let t=this.aztEditor?._editor.getValue().trim()??"";if(""!=t){let i=[],a=[];for(let l of this.mathMap)i.push(l);for(let l of this.extraMap)a.push(l);let r=JSON.stringify({text:t,imgs:this.images,maths:i,infos:a});return new Blob([r],{type:"text/plain"})}return null}makeExpandInfoObj(){const i=this.lstQuest.map(a=>a.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(a=>a&&a.length>0);return i.length>0?{label:(a=i[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",a.charAt(0).toUpperCase()+a.slice(1))}:{};var a}save(){if(this.lstQuest.length>0||""!==this.text){let t=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu");this.conf.logConfig.msg=t,this.conf.logConfig.status=!0;const i=new U.Q(10,{function:(s,r)=>{this.conf.logConfig.msg=`${t} ${Math.floor(s/r*100)}%`}}),a={};if(this.lstQuest.length>0){this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_chuan_bi_du_lieu_de_thi";const r=(this.lstQuest[0].quest.isGroup?this.lstQuest[1]:this.lstQuest[0]).quest.label??1;let l,c=[],d=!0;a.exam={examObj:{categoryId:Number(this.conf.cur_cateId),name:this.title.value,startQuestionIndex:r},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},i.addTask(this,this.uploadFileProcess,[a]);const f=this.errorQuestionView.isFullNoPoint(this.lstQuest);let O=R(10,this.lstQuest.filter(N=>!N.quest.isGroup).length);this.lstQuest.forEach((N,I)=>{if(N.quest.isGroup)l=N,d=!1;else{d||(d=!0,c.push(I-(c.length+1)));const $={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(I-c.length+1),point:f?O[I-c.length]??1:N.point??1};a.exam?.examConfig.push($),i.addTask(this,this.convertQuestion,[l,a,N,I-c.length,c.length])}}),0==this.editQuestId&&i.addTask(this,this.saveCdn,[a]),a.exam.examObj.firstInGroupIndexes=JSON.stringify(c),a.exam.examObj.expandInfoObj=this.makeExpandInfoObj()}else if(a.homework={name:this.title.value,content:this.text,deadline:void 0,files:void 0,mustVerified:void 0,whenShowAnswer:void 0,categoryId:void 0,classroomIds:void 0},this.attachFiles.length>0){const s=[];this.attachFiles.forEach(r=>{i.addTask(this,this.uploadAttHomeworkFile,[a,s,r])})}i.start().then(()=>{if(this.editQuestId){let s={exceptQuestionIds:[],matrix:[]};s.matrix?.push({paths:[{type:"QUEST",id:this.editQuestId}],number:1,key:`[@${this.editQuestId}:Question]=>0`}),this.questionService.apiQuestionsMatrixPost(s).subscribe(r=>{if(1==r.success&&r.data&&r.data.length>0&&r.data[0].questions&&1===r.data[0].questions.length){const l=r.data[0].questions[0];if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){let c=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de")??"";this.questionSaveService.convertQuestions(a.exam.questionObj.listQuestions,a.exam.rootQuests,(d,f=c)=>{this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.showErrorSnack(f)}).then(()=>{if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){const f=a.exam.questionObj.listQuestions[0],y=this.commonService.myParseJson(f.questionContent??""),O=this.commonService.myParseJson(l.content??"");if(!(y&&y[0]&&O&&O[0]))return this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,void this.showErrorSnack(r.message??"");Object.prototype.hasOwnProperty.call(O[0],"groupContent")&&(y[0].groupContent=O[0].groupContent),Object.prototype.hasOwnProperty.call(O[0],"groupUrl")&&(y[0].groupContent=`@[]{"link":"${O[0].groupUrl}","data":${JSON.stringify({x:0,y:0,width:-1,height:-1})}}@[]`),Object.prototype.hasOwnProperty.call(O[0],"name")&&(y[0].name=O[0].name),Object.prototype.hasOwnProperty.call(O[0],"id")&&(y[0].id=O[0].id),Object.prototype.hasOwnProperty.call(l,"groupId")&&(f.groupId=l.groupId),Object.prototype.hasOwnProperty.call(l,"groupType")&&(f.groupType=l.groupType),f.questionContent=JSON.stringify(y),delete f.__path,this.questionService.apiQuestionsIdPut(this.editQuestId,{id:f.id??0,groupId:f.groupId??0,name:f.name,metadata:f.metadata,isImage:f.isImage,questionContent:f.questionContent,answerMedia:f.answerMedia,questionText:f.questionText,answerType:f.answerType??1,answerConfig:f.answerConfig,coordinates:f.coordinates,answerResult:f.answerResult,tags:f.tags,mediaId:f.mediaId??0,mediaMeta:f.mediaMeta,attachments:f.attachments,version:f.version,isFixAns:f.isFixAns??0,groupType:f.groupType}).subscribe(N=>{if(this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,1==N.success){this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong");let I=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(I)}else this.showErrorSnack(N.message??"")})}})}}else this.showErrorSnack(r.message??"")})}else this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.editorOutputDataService.setOutputData(a),this.editorOutputDataService.redirectToConfig(this.conf)})}else this.showErrorSnack("lang_auto_khong_tim_thay_noi_dung_can_luu")}lengthRealQuest(){return this.lstQuest.filter(t=>!t.quest.isGroup).length}cancelAction(){this.popupConfirm?.startConfirm("lang_auto_confirm_destroy_content").then(t=>{t&&location.reload()})}openLibrary(){this.conf.startLibrary=!0}switchFilePdfProcess(t){this.editorOutputDataService.setFileProcess(t),this.commonService.myNavigationWithQueryString("/admin/testbank/create-file-pdf-ver2/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}switchFileXlsxProcess(t){this.editorOutputDataService.setFileProcess(t),this.commonService.myNavigationWithQueryString("/admin/testbank/create-exam-by-excel/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}clearData(){this.images=[],this.editedImages=new Map,this.lstQuest=[],this.text="",this.attachFiles=[],this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.editorParsedData=void 0,this.curQuest=void 0,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.matrixLoadedData=void 0}processFile(t){if(this.editQuestId>0&&!(0,J.Or)(t.type))return void this.showErrorSnack("lang_chi_co_the_tai_file_anh_vui_long_dam_bao_tai_dung_dinh_dang_anh");this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_cho_xu_ly_file";let i=t.name.split(".").pop();return"docx"==i?.trim().toLowerCase()?(this.clearData(),this.title=new p.p4(t.name),void this.parseDocx(t)):"azt"==i?.trim().toLowerCase()?(this.clearData(),this.title=new p.p4(t.name),void this.parseAzt(t)):(0,J.Or)(t.type)?(this.insertImgFromFile(t),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0)):void this.fileParser.start(t).then(a=>{"pdf"===a.type?this.switchFilePdfProcess(t):"docx"===a.type?(this.title=new p.p4(t.name),this.images=[],a.data.maps.forEach(s=>{this.images.push(s)}),this.aztEditor&&this.aztEditor._editor.setValue(a.data.str.join("\n"))):"xlsx"===a.type?this.switchFileXlsxProcess(t):(this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0)}).catch(()=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0})}attachImg(t){let i=this.commonService.myTranslateInstant("lang_auto_nhap_noi_dung");this.aztEditor?._editor.setValue(i),this.onDropFile(t),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}openFile(t){this.processFile(t.target.files[0]),t.target.value=null}parseDocx(t){new he(this.editorCommonService,this.commonService).handleFileSelect(t,a=>{this.saveFileProcess=t,this.images=[],this.mathMap.clear();let s=[];for(let y of a.data)if("img"==y.type)this.images.push({id:y.key,link:y.value,cssStyle:y.cssStyle}),y.cssStyle&&y.cssStyle.split(";").length>2&&s.push([`^\\[img:\\$${y.key}\\$\\]`,`[img:$${y.key}$]\n`]);else if("mathml"==y.type){let O=+y.key.split("_")[1];this.mathMap.set(y.key,{id:O,str:y.value,raw:y.docx,lineIdx:0,startCol:0,endCol:0}),O>this.curMathId&&(this.curMathId=O)}this.curMathId++;let r=[],l=-1;for(let y of a.lines){if(l++,0==y.length)continue;let O="";if(Array.isArray(y[0])&&Array.isArray(y[y.length-1])&&Array.isArray(y[Math.floor(y.length/2)])){let I=a.data.filter($=>$.position==l&&"table"==$.type)[0];O=I&&I.borderLeftSize>0||r.length>0&&r[r.length-1].startsWith("[*")?"[* "+y.map($=>$.map(Y=>Y.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":y.map($=>$.map(Y=>Y.join("").replaceAll("\n","\\n")).join("\\n")).join(" \t ")}else O=y.join("");for(let I of s)O=O.replaceAll(new RegExp(I[0],"g"),I[1]);let N=O.split("\n");for(let I of N)r.push(I)}(new me).process(r);let d=this.processStyle(r);this.processMath(d),this.lstQuest=[],this.curQuest=void 0,this.aztEditor?.setPosition(1,0);let f=d.join("\n");this.aztEditor?._editor.setValue(f),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},(a,s,r)=>{let l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly");this.conf.logConfig.msg=`${l} ${r}...(${a}/${s})`})}format(){let i=(this.aztEditor?._editor.getValue()??"").split("\n"),a=i.length,s=i.length>0?i[i.length-1].length:0,r=this.aztEditor?.azotaIntel?.examIntel;r?.setLines(i);let l=r?.parse()??[],c=[],d=[],f=[],y=-999;for(let O of l){if(O.isGroup){let V=O.parts.map(te=>te.text??"").join("\n");c.push(V);continue}-999==y&&(y=O.label-1),O.label-y>1&&(O.olabel=O.olabel?.replace(O.label+"",y+1+""),O.label=y+1);let N=D.Utils.capitalizeFirstLetter(O.olabel??O.label+"")+" ",I=N+O.parts.map(V=>V.text??"").join("\n"),z=0==O.answers.length||O.answers[0].isInline?void 0:O.answers.map(V=>(V.isCorrect?"   *":"    ")+V.label+". "+V.parts.map(te=>te.text??"").join("\n").trim()).join("\n"),$=O.help?N+O.help.map(V=>V.text??"").join("\n"):void 0,Y=O.strAns?N+O.strAns:void 0;c.push(I),z&&c.push(z),$&&d.push($),Y&&f.push(Y),y++}if(c.length>0){(f.length>0||d.length>0)&&c.push("----------------------"+this.commonService.myTranslateInstant("azt_lang_sugg_the_end")+"----------------------"),f.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_ans_table")),c.push(...f)),d.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_instruction")),c.push(...d));let O=c.join("\n"),N={startLineNumber:0,endLineNumber:a+100,startColumn:0,endColumn:s+100};this.aztEditor?._editor.executeEdits("",[{range:N,text:O}])}}processMath(t){let i=0;for(let a of t){let s=a.matchAll(this.MATH_PAT);for(;;){let r=s.next();if(r.done)break;let l=r.value[0],d=this.mathMap.get(r.value[1]);d&&(d.lineIdx=i+1,d.startCol=r.value.index+1,d.endCol=d.startCol+l.length)}i++}}processStyle(t){let i=/\[![!aibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,s=[],r=0;for(let I of t){a.test(t[r].replaceAll(i,"$1"))&&(t[r]=t[r].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),I=t[r]);let Y,z=I.matchAll(i),$=0;for(;;){let V=z.next();if(V.done)break;let te=V.value[0],K=te.indexOf(":"),X=te.substring(1,K),ae=V.value.index-$,oe=ae+V.value[1].length;Y&&ae==Y.e&&Y.style==X?Y.e=oe:(Y={lineIdx:r,s:ae,e:oe,style:X},s.push(Y)),$+=K+4}t[r]=I.replaceAll(i,"$1"),r++}let l=this.aztEditor?.azotaIntel?.examIntel;l?.setLines(t);let c=l?.parse()??[],d=[],f=new Map,y=0;for(let I of c){y++;for(let z of I.parts)d.push(z);for(let z of I.answers){let $=this.hasStyleAns(t,z.parts[0],s);""!=$&&f.set(`${I.label}-${I.group}-${z.label}-${y}`,$);for(let Y of z.parts)d.push(Y)}}for(let I of c)if(I.help)for(let z of I.help)d.push(z);this.applyStyle(t,d,s),l?.setLines(t),c=l?.parse()??[];let O=[];y=0;for(let I of c){y++;let z=new Map;if(!(I.answers.filter($=>$.isCorrect).length>0)){for(let $ of I.answers){let Y=f.get(`${I.label}-${I.group}-${$.label}-${y}`);Y&&""!=Y&&z.set(Y,z.has(Y)?void 0:$.parts[0])}for(let $ of z)if($[1]){O.push($[1]);break}}}for(let I=O.length-1;I>=0;I--){let z=O[I];t[z.lineIdx]=t[z.lineIdx].substring(0,z.b)+"*"+t[z.lineIdx].substring(z.b)}return t=this.processUnderlineAns(t),c.length>0?t.slice(c[0].parts[0].lineIdx):t}processUnderlineAns(t){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,s=[];for(let r of t){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&a>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),d=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let f=t[a-1].match(i);if(f&&l.length==f.length){for(let O of f)t[a-1]=t[a-1].replace(O,O.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==d?"*":""}${l.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=t[a-1],l=l.substring(1),d++;a++;continue}}}s.push(r),a++}return s}hasStyleAns(t,i,a){if(!i)return"";let s=a.filter(r=>r.lineIdx==i.lineIdx&&r.s<=i.b&&r.e>=i.b);for(let r of s)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(t,i,a){for(let s=i.length-1;s>=0;s--){let r=i[s],l=a.filter(c=>c.lineIdx==r.lineIdx&&c.e>=r.s);for(let c=l.length-1;c>=0;c--){let d=l[c].s>=r.s?l[c].s:r.s,f=l[c].e<=(r.e??9999999)?l[c].e:r.e,y=l[c].style.replaceAll("!hl","");if(d<f&&""!=y){let O=t[r.lineIdx],N=O.substring(d,f);""!=N.trim()&&(t[r.lineIdx]=O.substring(0,d)+"["+y+":$"+N+"$]"+O.substring(f))}}}}setCorrectAns(t,i){let a=[],s=0,r=0;this.editorFocus(i.parts);for(let l of t.answers){let c=l.ans.parts[0];if(!c)continue;let d=this.aztEditor?.getLineText(c.lineIdx+1);c.lineIdx!=r&&(s=0,r=c.lineIdx);let f=d.substring(c.b,c.b+1);"*"==f&&(a.push(`${c.lineIdx}|${c.b+s}|${c.b+s+1}|`),s--),l.ans.label==i.label&&"*"!=f&&(a.push(`${c.lineIdx}|${c.b+s}|${c.b+s}|*`),s++)}this.aztEditor?.runEditAction(a,this.aztEditor._editor,!0),this.showTooltip=!1}closeLibrary(t){this.conf.startLibrary=!1,this.conf.isFirstTime||(this.conf.isFirstTime=!0),t&&this.aztEditor&&this.aztEditor.insertLine(t.join("\n"))}parseTag(t){let a=t.trim(),r=a.matchAll(/^(\[!info:\d+\]\s*)?(\[[iubhl!]+:\$\s*)?[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g).next();return r.done?["",a]:(a=a.replace(/[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g," "),[r.value[3],a])}trimBr(t){return t.replaceAll("<br>","").trim()}parseExtra(t){if(t.startsWith("[@"))return{val:"",idx:0,id:this.trimBr(t)};let s=t.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let d=s.next();if(d.done)break;r=d.value[0],l=d.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}setExtra(t,i=!0){let a=t.q.quest.parts[0],s=this.parseExtra(a.text??"");"0"==s.id&&(s.id=this.curExtraId+"",this.curExtraId++);let r=this.extraMap.get(s.id);if(r||(r={d:t.q.point,audio:t.q.audio,file:void 0,fix:t.q.quest.isFixAns,tag:t.q.tag,replaceIdx:-1},this.extraMap.set(s.id,r)),"point"==t.type&&(r.d=t.data&&t.data>0?t.data:void 0),"audio"==t.type&&(r.audio=t.q.audio?t.q.audio:void 0,r.file=void 0),"fix"==t.type&&(r.fix=t.data?"fix":void 0),"tag"==t.type&&(r.tag=t.data),"replace"==t.type&&(r.replaceIdx=t.data),+s.id>0){let l=`[!info:${s.id}]`,c=a.s+s.idx,d=a.s+s.idx+s.val.length;t.q.quest.isGroup&&""==s.val&&(c=a.s+(a.text?.length??0)+10,d=c),this.aztEditor?.runEditAction([`${a.lineIdx}|${c}|${d}|${l}`],this.aztEditor._editor,i)}return i&&this.aztEditor?.setPosition(a.lineIdx+1,0),s.id}setFixGroup(t){t.isFixGroup=!t.isFixGroup,this.setExtra({q:t,type:"fix",data:t.isFixGroup})}randomAllAgain(){this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),this.renderCache.clear(),this.lastMatrixHash="";let t=this.aztEditor?._editor.getValue().split("\n");this.onEditorChangeValue(t,this.editorParsedData??[])}reRender(){this.editorParsedData&&(this.lstQuest=this.editorParsedData.map((t,i)=>this.renderQuest(t,i)),this.text="")}onApplyAllTag(t,i){this.lstQuest.forEach((a,s)=>{s<=i||a.quest.isGroup||(a.tag=t,this.setExtra({type:"tag",data:t,q:this.lstQuest[s]},s==this.lstQuest.length-1))})}showHover(t,i,a){if(this.lstQuest)for(let s of this.lstQuest){let r=a;if(s.quest.parts[0].lineIdx==t-1&&/\[!info:\d+\]/.test(a)){let l=this.parseExtra(a),c="";if("0"!=l.id){let y=this.extraMap.get(l.id);y&&y.replaceIdx>=0&&(c=this.commonService.myTranslateInstant("lang_core_replace")+": "+y.replaceIdx)}let d=r.indexOf("[")+1,f=r.indexOf("]")+1;if(d<=i&&i<=f){let y=[],O=this.commonService.myTranslateInstant("lang_auto_diem"),N=this.commonService.myTranslateInstant("lang_auto_audio_file"),I=this.commonService.myTranslateInstant("lang_auto_file_dinh_kem"),z=this.commonService.myTranslateInstant("lang_auto_nhan"),$=this.commonService.myTranslateInstant("lang_auto_co_dinh");return s.point&&y.push(`${s.point} ${O}`),s.audio&&y.push(N+": "+s.audio.name),s.attachments&&y.push(I+": "+s.attachments),s.tag&&s.tag.length>0&&y.push(z+": "+s.tag.map(Y=>Y[this.commonService.getCurrentLang()+"Name"]).join(",")),(s.isFixGroup||s.quest.isFixAns)&&y.push($),""!=c&&y.push(c),{lineIdx:t,s:d,e:f,text:y.join(", ")}}}}}onEditorChangeValue(t,i){clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.onEditorChangeValueExec(t,i)},400)}onEditorChangeValueExec(t,i){if(i&&i.length>0){this.errs=[],this.aztEditor?.setError([]),this.editorParsedData=i;let a=this.lstQuest.map((s,r)=>s.lazyQuestView&&s.lazyQuestView.show?{i:r,v:s.lazyQuestView}:{i:-1,v:void 0}).filter(s=>s.i>=0);this.lstQuest=[],this.loadMatrixQuest(this.editorParsedData).then(s=>{this.matrixLoadedData=s,this.lstQuest=i.map((l,c)=>this.renderQuest(l,c));for(let l of a){if(l.i>=this.lstQuest.length)break;this.lstQuest[l.i].lazyQuestView=l.v}i.forEach((l,c)=>{let d=l.answers.find(f=>f.isCorrect)?.label;if(d||(d=this.lstQuest[c].originCorrectAns),d||(d=""),"similar"!=this.lstQuest[c].v)for(let f of this.lstQuest[c].answers)f.ans.isCorrect=f.ans.label==d}),this.text="",setTimeout(()=>{this.revealCurrentQuest()},200),this.validate();let r=this.aztEditor?._editor.getValue().split("\n");this.processMath(r)})}else this.lstQuest=[],this.text=this.renderText(t.join("<br>"))}loadMatrixQuest(t){return new Promise((i,a)=>{let s={exceptQuestionIds:[],matrix:[]},r=new Map;for(let c of t)if(c.parts[0].text?.startsWith("[@")){let d=c.parts[0].text.split("=>"),f=d[0]+"=>"+d[1].split("-")[0];if(r.has(f))continue;r.set(f,!0);let y=D.Utils.parseInclude(c.parts[0].text);s.matrix?.push({number:y.getNum,key:f,paths:y.paths.map(O=>({type:O.type,id:O.id,groupIds:O.groupIds,tags:O.tags,answerTypes:O.answerTypes}))})}let l=s.matrix?.map(c=>c.key).join(":")??"";l!=this.lastMatrixHash?(this.lastMatrixHash=l,this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),(s.matrix?.filter(f=>f.paths?.filter(y=>"KNOWLEDGE"==y.type).length??!1).length?this.questionService.apiQuestionsMatrixGlobalPost(s):this.questionService.apiQuestionsMatrixPost(s)).subscribe(f=>{i(1===f.success&&f.data?f.data:[])})):i(this.matrixLoadedData?this.matrixLoadedData:[])})}onMobileEditorChange(t){this.mobileEditorContent=t.lines.join("\n"),this.onEditorChangeValue(t.lines,t.data)}onEditorInitComplete(t){if(setTimeout(()=>{const s=!!this.commonService.getMyQueryParam("showAI");this.showPromptCreateExam=s},500),this.aztEditor=t.azotaEditor,this.aztEditor.setLang(this.commonService),this.aztEditor.setHoverCalback((s,r,l)=>this.showHover(s,r,l)),this.aztEditor.onChange((s,r)=>{if(this.editQuestId>0&&r.length>0){this.enableEdit=r.length>1,this.enableEdit&&this.showErrorSnack("lang_auto_khong_the_them_cau_hoi_moi");let l=this.conf.startIndex+1;(r=[r[0]])[0].olabel=r[0].olabel?.replace(r[0].label+"",l+""),r[0].label=l}this.onEditorChangeValue(s,r)}),this.aztEditor.onRefreshInclude((s,r)=>{if(this.timeOutDelayStatus.refresh){const l=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",l.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let l=0;this.matrixLoadedData=[];let c=this.lstQuest.filter(d=>d.quest.parts[0].text?.startsWith(s)&&d.quest.parts[0].lineIdx==r-1).map(d=>d.id??0);for(let d of this.lstQuest){if(d.quest.parts[0].lineIdx==r-1){const f=d.quest.parts[0].text??"",y=l;let O=z=>{this.fillQuest(y,z)},N=z=>{this.fillError(y,z)};this.setExtra({q:this.lstQuest[y],type:"replace",data:-1});let I=new $e(this.cdnService,this.commonService,O,this.apiCallbackCache,this.aztEditor,N,this.getIncludeIds(c),this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(f),I.render(f,this.images,this.questionService)}l++}setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}),this.aztEditor.onInsertQuestText((s,r)=>{let l=this.lstQuest.filter(c=>c.quest.parts[0].lineIdx==r-1)[0];if(l){let c=this.getQuestText(l);this.aztEditor?.setPosition(r,0),this.aztEditor?.removeText(r,0,999999,!1),this.aztEditor?.insertAtCurPos(c)}}),this.aztEditor.onInsertDetails((s,r)=>{let l=this.lstQuest.filter(I=>I.quest.parts[0].lineIdx==r-1);if(0==l.length)return;for(let I=0;I<l.length;I++)this.apiDataCache.delete(s+"=>"+I);let c=this.commonService.myTranslateInstant("lang_auto_cau"),d=l.map(I=>`${I.id}: ${c} ${I.quest.label}`),y=(l[0].quest.parts[0].text??"").split("=>")[0],O=l[0].quest.parts[0].text?.split("=>")[1],N=l[l.length-1].quest.parts[0].text?.split("=>")[1];if(O&&N){let I=+O,z=+N,$=y.split("].["),Y=$[$.length-1],V=+D.Utils.getNumberFromStr(Y),te=z-I+1;$[$.length-1]=Y.replace(" "+V+" "," "+(V-te)+" ");let X=$.join("].[");for(let ye=z+1;ye<V;ye++){let ae=this.apiDataCache.get(y+"=>"+ye);ae&&this.apiDataCache.set(X+"=>"+(ye-te),ae)}for(let ye=0;ye<I;ye++){let ae=this.apiDataCache.get(y+"=>"+ye);ae&&this.apiDataCache.set(X+"=>"+ye,ae)}}this.aztEditor?.insertDetails(r,d)}),this.aztEditor.onChangePosition((s,r)=>{this.revealCurrentQuest();let l=this.aztEditor?.getCurLineText(),d=l.matchAll(/\[(!m|img):\$([^\$\]]+)\$\]/g);for(;;){let f=d.next();if(f.done)break;let y=f.value[2];if(f.value.index+1<r&&r<f.value.index+f.value[0].length)if(f.value[0].startsWith("[!m:")){let N=this.mathMap.get(y);if(N){this.openMathEditor(N);break}}else this.actionEditImage(document.getElementById(y))}}),window.addEventListener("paste",s=>{if((this.aztEditor?._editor).hasTextFocus()){let l=s.clipboardData.getData("text/html")+"",c=s.clipboardData.files[0],f=l.matchAll(/<img [^>]*src="([^"]+)"/g);if(c&&c.type.startsWith("image"))return void this.insertImgFromFile(c);for(;;){let y=f.next();if(y.done)break;this.insertImgFromLink(y.value[1])}}}),this.editQuestId>0){this.aztEditor.setSingleMode(!0);let s=this.commonService.myTranslateInstant("lang_auto_cau_hoi");this.aztEditor._editor.setValue(`[@Q${this.editQuestId}:${s}]`)}const i=this.editorOutputDataService.getFirstFile(),a=this.editorOutputDataService.getMatrixData();i?this.processFile(i):a&&this.processMatrixData(a)}insertImgFromBase64(t){let i=0;for(let a of this.images){let s=+a.id.split("_")[1];s>i&&(i=s)}i++,this.images.push({id:"img_"+i,link:t}),this.aztEditor?.insertAtCurPos(`[img:$img_${i}$]`)}insertImgFromLink(t){fe.loadImageToBase64(t,this.cdnService).then(i=>{this.insertImgFromBase64(i)})}insertImgFromFile(t){let i=new FileReader;i.onload=()=>{this.insertImgFromBase64(i.result+"")},i.readAsDataURL(t)}processMatrixData(t){let i=new Te;this.conf.matrix=t;let a=i.parse(t.matrix);this.extraMap=a.extra,this.aztEditor?._editor.setValue(this.commonService.translateString(a.text))}revealCurrentQuest(){if(this.isMobile)return;let t=this.aztEditor?.getCurQuest();t?(this.revealQuest((t.isGroup?"g-":"")+t.label,t.isGroup?"end":"start"),this.curQuest=t):this.revealQuest("1")}revealQuest(t,i){let a=document.getElementById("quest-"+t);return!!a&&(a.scrollIntoView({behavior:"auto",block:i??"start"}),this.onScrollQuest(),!0)}onScrollQuest(){clearTimeout(this.scrollId),this.scrollId=setTimeout(()=>{this.checkElementQuestionLazy()},100)}onRandomOne(t){if(this.timeOutDelayStatus.refresh){const i=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",i.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[];let i=this.lstQuest.map(f=>f.id??0),a=this.lstQuest[t];const s=a.quest.parts[0].text??"",r=this.apiDataCache.get(s);let d=new $e(this.cdnService,this.commonService,f=>{this.fillQuest(t,f)},this.apiCallbackCache,this.aztEditor,f=>{this.showErrorSnack(f),r&&this.apiDataCache.set(s,r)},i,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(s),this.setExtra({q:a,type:"replace",data:-1}),d.setGetOne(!0),d.render(s,this.images,this.questionService),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}onChangeQuest(t,i){if(this.timeOutDelayStatus.refresh){const a=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",a.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let a=this.lstQuest[i],s=a.renderedStr,r=a.answers.findIndex(l=>l.ans.isCorrect);if(-1!=r){let l=a.answers.map(c=>c.renderedStr);s+="\n"+this.commonService.getCorrectAnsTxt(l,r)}s=this.commonService.parseQuestionContent(s),this.openSimilarSearch(s,i),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}setPointBelow(t,i){for(let a=i;a<this.lstQuest.length;a++)this.lstQuest[a].quest.isGroup||(this.lstQuest[a].point=t,this.setExtra({type:"point",data:t,q:this.lstQuest[a]},a==this.lstQuest.length-1))}editorFocus(t){t&&t.length>0&&this.aztEditor?.goToLine(t[0].lineIdx+1)}onCopy(t,i){let a=this;i||(i="Copy");let s=r=>{let l=D.Utils.capitalizeFirstLetter(t.quest.olabel??"");navigator.clipboard.writeText(a.getQuestText(t));let c=this.commonService.myTranslateInstant("lang_auto_noi_dung"),d=this.commonService.myTranslateInstant("lang_auto_thanh_cong");a.showSuccessSnack(`${i} ${c} ${l} ${d}`)};document.addEventListener("copy",s),document.execCommand("copy"),document.removeEventListener("copy",s)}onCut(t){let i=this.commonService.myTranslateInstant("lang_auto_cat");this.onCopy(t,i),this.onDel(t,i)}onDel(t,i){let a=[],s=D.Utils.capitalizeFirstLetter(t.quest.olabel??""),r=this.commonService.myTranslateInstant("lang_auto_xoa");if(i||(i=r),(t.quest.parts[0].text?.indexOf(".[L\u1ea5y ng\u1eabu nhi\xean")??-1)>0||(t.quest.parts[0].text?.indexOf(".[Random")??-1)>0){let l=this.commonService.myTranslateInstant("lang_auto_nam_trong_nhom_lay_ngau_nhien"),c=this.commonService.myTranslateInstant("lang_auto_khong_thanh_cong");return this.showErrorSnack(`${s} ${l}, ${i} ${c}`),-1}a.push(...t.quest.parts.map(l=>l.lineIdx));for(let l of t.quest.answers)a.push(...l.parts.map(c=>c.lineIdx));return t.quest.help&&a.push(...t.quest.help.map(l=>l.lineIdx)),a=a.filter((l,c,d)=>d.indexOf(l)===c),this.aztEditor?.removeLines(a,!0),a[0]}getQuestText(t,i=!0){let a=D.Utils.capitalizeFirstLetter(t.quest.olabel??"");this.defaultQuestionLabel&&(a=D.Utils.capitalizeFirstLetter(this.defaultQuestionLabel).trim()+" "+t.quest.label+".");let s=this.curExtraId;i&&(this.curExtraId++,this.extraMap.set(s+"",{d:t.point,audio:t.audio,file:t.attachments,fix:t.quest.isFixAns,tag:t.tag}));let l=[`${a}${i?`[!info:${s}]`:""} ${this.formatContent(t.renderedStr)}`],c="";if(t.renderedStr.indexOf('class="qv_string_eng_ans"')<0)for(let O of t.answers)l.push((O.ans.isCorrect?"*":"")+O.ans.label+". "+this.formatContent(O.renderedStr));else c=t.answers.filter(O=>O.ans.isCorrect)[0].ans.label;if(t.quest.strAns){let O=this.commonService.myTranslateInstant("azt_lang_sugg_ans_table_upper")??"";l.push(`${O}\n${t.quest.label}. ${t.quest.strAns}`)}if(t.helpRenderedStr){let O=this.commonService.myTranslateInstant("lang_auto_loi_giai")??"";l.push(O),l.push(this.formatContent(t.helpRenderedStr))}let f=(new ut).revert(l.join("\n"),c);return f=(new Ae).revert(f),f}formatContent(t){t=t.replaceAll("&lt;","<");let a=document.createElement("div");a.innerHTML=t;let s=a.getElementsByClassName("azt-mathml"),r=a.getElementsByTagName("img");for(let c=s.length-1;c>=0;c--){let d=s[c];if(!d)continue;let f=this.curMathId;this.mathMap.set("mathtype_"+this.curMathId,{id:f,str:d.innerHTML,lineIdx:0,startCol:0,endCol:0}),this.curMathId++;let O=document.createTextNode(`[!m:$mathtype_${f}$]`);a.replaceChild(O,d)}for(let c=r.length-1;c>=0;c--){let d=r[c];if(!d)continue;let f=this.images.length>0?Math.max(...this.images.map(O=>+O.id.split("_")[1]))+1:1;this.images.push({id:"img_"+f,link:d.src,cssStyle:d.style.cssText});let y=document.createTextNode(`[img:$img_${f}$]`);a.replaceChild(y,d)}return a.innerHTML.replaceAll("<br>","\n")}upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}validate(){let t=new Map,i=0;this.errs=this.errs.filter(a=>a.indexOf("Tr\xf9ng c\xe2u h\u1ecfi")<0),this.aztEditor?.setError(this.errs);for(let a of this.lstQuest)"Tr\xf9ng c\xe2u h\u1ecfi"==a.err&&(a.err=void 0),a.id&&(t.has(a.id)&&this.fillError(i,"Tr\xf9ng c\xe2u h\u1ecfi"),t.set(a.id,1),i++)}fillError(t,i){this.lstQuest[t].err=`<span style='color:red'>${i}</span>`;let s=this.lstQuest[t].quest.parts[0].lineIdx+1+"|"+i;-1==this.errs.indexOf(s)&&this.errs.push(s),this.aztEditor?.setError(this.errs)}fillImg(t,i,a,s,r=!1){let l=new RegExp("<div id='"+i+"'[^>]+></div>","g"),c=r&&this.lstQuestSimilar?this.lstQuestSimilar[t]:this.lstQuest[t];c.renderedStr=c.renderedStr.replace(l,a??"");for(let d of c.answers)d.renderedStr=d.renderedStr.replace(l,a??"");if(c.helpRenderedStr&&(c.helpRenderedStr=c.helpRenderedStr.replace(l,a??"")),s)for(let d of s){let f=this.renderCache.get(d);f&&this.renderCache.set(d,f.replace(l,a??""))}if(this.editQuestId>0){let d=this.getQuestText(c);d.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(d)}}loadSimilar(t,i){if(t){let a=l=>{this.fillQuest(i,l,!0)},s=l=>{"NO_DATA"==l?this.lstQuestSimilar=[]:this.showErrorSnack(l)};this.lstQuestSimilar=void 0,new $e(this.cdnService,this.commonService,a,void 0,void 0,s,[],void 0,void 0,this.discoveryService).getSimilar(t,this.images,this.questionService)}}fillQuest(t,i,a=!1){let s=this.commonService.myClone(i),r=this.lstQuest[t],l=0;if(a&&(this.lstQuestSimilar||(this.lstQuestSimilar=[]),this.lstQuestSimilar.push(s),l=this.lstQuestSimilar.length-1),r){s.label=r.label,s.point=r.point,s.lazyQuestView=r.lazyQuestView,s.isFixGroup=r.isFixGroup;let c=r.quest.isFixAns||s.quest.isFixAns;if(this.editorParsedData){let O=s.quest.strAns;if(s.quest=this.editorParsedData[t],s.quest.strAns=O,!a){let N=s.originCorrectAns??"";for(let I of s.quest.answers)if(I.isCorrect){N=I.label;break}for(let I of s.answers)I.ans.isCorrect=I.ans.label==N}}s.quest.strAns?s.strAns=s.quest.strAns.split(/[\|]/).map(O=>O.trim()):s.strAns&&(s.quest.strAns=s.strAns.join("|"));let d=[];d.push(s.renderedStr),d.push(...s.answers.map(O=>O.renderedStr)),d.push(s.helpRenderedStr);let f=(O,N)=>{this.fillImg(a?l:t,O,N,d,a)};s.renderedStr=this.renderStr(s.renderedStr,"link",f,void 0,void 0,!1);for(const O of s.answers)O.renderedStr=this.renderStr(O.renderedStr,"link",f,void 0,void 0,!1);s.helpRenderedStr&&(s.helpRenderedStr=this.renderStr(s.helpRenderedStr,"link",f,void 0,void 0,!1));let y=3;if(s.answers.length>0&&(y=1),0==s.answers.length&&s.quest.strAns&&(y=4),s.type=y,c&&(s.quest.isFixAns=c),s.changeable=/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(s.quest.parts[0].text?.split("=>")[0]??""),a||(this.lstQuest[t]=s),this.editQuestId>0){let O=this.getQuestText(s);O.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(O)}this.fillQuestCache.set(t+"-"+s.quest.parts[0].text,s),a||this.validate()}}renderText(t){let i=t;return i=this.renderStr(i,"help",(s,r)=>{let l=new RegExp("<div id='"+s+"'[^>]+></div>","g");i=i.replace(l,r??"")}),i}getLoadedIds(){return this.lstQuest.filter(t=>t.id&&t.id>0).map(t=>t.id??0)}getIncludeIds(t){let a=this.aztEditor?._editor.getValue(),r=a.matchAll(/\[@Q(\d+):[^\]]*\]/g),l=[];for(;;){let d=r.next();if(d.done)break;l.push(+d.value[1])}let c=this.getLoadedIds();return l.push(-1),l.push(...c),l.filter(d=>(t??[]).indexOf(d)<0)}renderStr(t,i,a,s,r,l=!0){let c=this.renderCache.get(t);if(c&&!c.startsWith("Loading...|"))return c;let d=l?t.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("&lt;code>","<code>").replaceAll("&lt;/code>","</code>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):t,f=[new de,new Oe(this.cdnService),new ut,new He,new We,new Be,new qe(this.mathMap),new it,new Ye.$(this.cdnService,this.commonService,this.configRenderService,a),new $e(this.cdnService,this.commonService,s,this.apiCallbackCache,this.aztEditor,r,this.getIncludeIds(),this.apiDataCache,this.matrixLoadedData)];"link"==i&&(f=[new Ye.$(this.cdnService,this.commonService,this.configRenderService,a)]),"help"==i&&f.pop();for(const y of f)y.setLoadingManager(this.loadingManager),d=y.render(d,this.images,this.questionService);return this.renderCache.set(t,d),d}renderQuest(t,i){let a=3;t.answers.length>0&&(a=1),0==t.answers.length&&t.strAns&&(a=4);let s=(I,z)=>{this.fillImg(i,I,z)},r=I=>{this.fillQuest(i,I)},l=I=>{this.fillError(i,I)},c=t.parts.map(I=>I.text??"").join("<br>").trim(),d=this.parseTag(c);""!=d[0]?c=d[1]:t.help&&t.help.length>0&&(d=this.parseTag(t.help[0].text??""));let f=this.parseExtra(c);if("0"!=f.id){let I=this.extraMap.get(f.id);if(I&&I.replaceIdx>=0)return this.lstQuestReplace[I.replaceIdx]}""!=f.val&&(c=c.substring(0,f.idx)+c.substring(f.idx+f.val.length));let y=t.help?t.help.map(I=>I.text??"").join("<br>").trim():void 0,O=this.lstQuest[i],N={renderedStr:this.renderStr(c,"full",s,r,l),quest:t,type:a,tag:""==d[0]?void 0:[{id:0,code:D.Utils.tagLang(d[0])}],lazyQuestView:O?O.lazyQuestView:void 0,strAns:t.strAns?t.strAns.split(/[\|]/).map(I=>I.trim()):void 0,label:this.upperFirst(t.olabel??""),helpRenderedStr:y?this.renderStr(y,"full",s,r,l):void 0,answers:t.answers.map(I=>{let z=I.parts.map($=>$.text??"").join("<br>").trim();return{renderedStr:this.renderStr(z,"full",s,r,l),ans:I}})};if(N.renderedStr.startsWith("Loading...|")){let I=N.renderedStr.split("|");if(I[1].indexOf(",")<0){let $=+I[1];$>0&&(N.id=$)}N.renderedStr=I[0];let z=this.fillQuestCache.get(i+"-"+t.parts[0].text);z&&(N=z)}if("0"!=f.id){let I=this.extraMap.get(f.id);I&&(N.point=I.d,N.audio=I.audio,N.attachments=I.file,N.isFixGroup=N.quest.isGroup&&I.fix,N.tag=I.tag,N.quest.isFixAns||(N.quest.isFixAns=!N.quest.isGroup&&I.fix))}return this.editableEventObj.addCount(),N}openSimilarSearch(t,i){this.conf.similarQuest.show=!0,this.conf.similarQuest.txt=t,this.conf.similarQuest.idx=i,this.loadSimilar(t,i)}openMathEditor(t){if(!t){let i=this.aztEditor?.getCurPos();t={id:this.curMathId,str:'<math xmlns="http://www.w3.org/1998/Math/MathML"/>',lineIdx:i.lineNumber,startCol:i.column,endCol:i.column}}this.conf.mathEditor.show=!0,this.conf.mathEditor.latex=t}onInsertLatex(t){if(this.conf.mathEditor.show=!1,this.aztEditor){let i="mathtype_"+this.curMathId,a=`[!m:$${i}$]`;this.mathMap.set(i,{id:this.curMathId,str:"\\("+t.str+"\\)",lineIdx:t.lineIdx,startCol:t.startCol,endCol:t.startCol+a.length}),this.aztEditor.removeText(t.lineIdx,t.startCol,t.endCol,!1),this.aztEditor.insertAtCurPos(a),this.curMathId++}}replaceQuest(t){let i=this.conf.similarQuest.idx??0;this.conf.similarQuest.show=!1;let a=this.setExtra({q:this.lstQuest[i],type:"replace",data:this.lstQuestReplace.length});this.lstQuest[i]=t,t.quest.parts[0].text=(+a>0&&!t.quest.parts[0].text?.startsWith("[!info:")?`[!info:${a}] `:"")+t.quest.parts[0].text,this.lstQuestReplace.push(t)}loadExample(t,i){let a="vi"==i?yt.EXAM_FULL:yt.EXAM_FULL_EN;this.aztEditor&&""!=this.aztEditor._editor.getValue().trim()?this.popupConfirm?.startConfirm("lang_auto_azt_edtor_confirm_chang_content").then(s=>{s&&this.aztEditor?._editor.setValue(a[t-1])}):this.aztEditor&&this.aztEditor?._editor.setValue(a[t-1])}onShowFile(t,i){}onDropFile(t){(0,J.C0)(t.type)?(0,J.ml)(t.type)?this.showErrorSnack("lang_auto_chua_ho_tro_dinh_dang_video_vui_long_thu_lai"):(0,J.hv)(t).then(i=>{this.attachFiles.push(i)}):this.showErrorSnack("lang_auto_pleas_upload_file_support")}setupEvent(){this.mapEventElement.push({eventName:"click",className:"img-docx",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_qts_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img-group-content",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_ats_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"azt-mathml",action:this.actionEditMathMl,caller:this})}actionEditImage(t){if(t&&this.images.filter(i=>i.id==t.id).length>0){this.conf.imageEditor.show=!0,this.conf.imageEditor.el=t;let i=this.aztEditor?._editor.getValue().split("\n"),a=0,s=0;for(let r of i)if(a++,s=r.indexOf(`[img:$${t.id}$]`),s>=0)break;setTimeout(()=>{this.aztEditor?.setPosition(a,s+1)},100)}}actionEditMathMl(t){let i=t.id;const a=this.mathMap.get(i);a&&this.aztEditor?._editor.getValue().indexOf(`[!m:$${i}$]`)>=0&&setTimeout(()=>{this.aztEditor?.setPosition(a.lineIdx,a.startCol+1),this.openMathEditor(a)},100)}onPushImageAction(t){if(this.conf.imageEditor.show=!1,t.element&&t.element.id&&this.aztEditor){let i=this.images.filter(c=>c.id==t.element?.id)[0];if(!i)return;let s="img_"+(this.images.length>0?Math.max(...this.images.map(c=>+c.id.split("_")[1]))+1:1),r=`[img:$${s}$]`;this.images.push({id:s,link:t.output,cssStyle:i?.cssStyle});let l=this.aztEditor?.getCurPos();this.aztEditor.removeText(l.lineNumber,l.column,l.column+i.id.length+8,!1),this.aztEditor.insertAtCurPos(r)}}checkElementQuestionLazy(){if(this.lstQuest.length>=this.maxQuestEnableLazy){let t=document.getElementsByClassName("question-content");for(let i=0;i<t.length;i++){const a=t[i],s=null!==a.getAttribute("start_loading")&&"true"===a.getAttribute("start_loading"),r=a.getAttribute("data-idx-quest"),l=this.lstQuest[Number(r)];l&&(l.lazyQuestView||(l.lazyQuestView={show:!1}),s&&null!==r?l.lazyQuestView.show||(l.lazyQuestView.show=!0,l.lazyQuestView.curHeight="auto"):(l.lazyQuestView.curHeight=a.getBoundingClientRect().height+"px",l.lazyQuestView.show=!1))}}}checkTypeActionService(){const t=document.getElementById("list-quest-panel");t&&this.mapEventElement.forEach(i=>{const a=t.getElementsByClassName(i.className);for(let s=0;s<a.length;s++){const r=a[s];r.getAttribute("event_"+i.eventName+"_target")||(r.setAttribute("event_"+i.eventName+"_target","true"),r.addEventListener(i.eventName,()=>{i.action.call(i.caller,r)}))}})}showFeedbackQuestionDialog(t){this.dialog.open(H.V,{width:"750px",data:{questionObj:t,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{})}onResize(t){this.conf.isCalculatorHeight=!1,this.actionResize()}actionResize(){const t=document.getElementById("toolbar__editor");t&&(this.conf.heightContent=window.innerHeight-t.getBoundingClientRect().height-104,this.isMobile&&(this.conf.heightContent=this.conf.heightContent/2),this.conf.isCalculatorHeight=!0)}ngOnInit(){super.ngOnInit(),this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_tai_thu_vien",this.isMobile=this.commonService.isMobileOrTable(),this.maxQuestEnableLazy=this.isMobile?1e4:this.maxQuestEnableLazy,(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.conf.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.editQuestId=+(this.commonService.getMyParam(this.activeRoute,"quest_id")??"0"),this.type=this.commonService.getMyQueryParamOrDefault("self","user"),this.defaultQuestionLabel=this.commonService.getMyQueryParam("defaultQuestLabel"),this.conf.typeMatrix=this.type,this.conf.sourceBackToLink=this.commonService.getMyQueryParam("backto"),this.conf.startIndex=Number(this.commonService.getMyQueryParam("r")??"0"),this.conf.reSetBackToLink()}),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS,EDITOR_TEMPLATE").subscribe(t=>{this.aztLangConfig=t.CROPPDF_PARAMS,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.questionService.apiQuestionGetTagsGet().subscribe(i=>{i.success&&i.data?this.questionTags=i.data.objs??[]:this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.fileParser.loadConf(this.aztLangConfig),this.fileParser.init(),this.conf.isConfigInit=!0,"bank"==this.editorOutputDataService.getMode()&&this.openLibrary(),setTimeout(()=>{this.actionResize(),this.setupDropFile()},100)})}).catch(()=>{this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai")})})}ngDoCheck(){this.checkTypeActionService()}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0)}setupDropFile(){const t=window.jQuery("#list-quest-panel");t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.handleFileDrop(i.originalEvent.dataTransfer.files)})}togglePromptCreateExam(){this.showPromptCreateExam=!this.showPromptCreateExam}closeDialogPromptCreateExam(t){this.showPromptCreateExam=!t}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio(),this.store.dispatch(xe.qs())}aiCreateQuestion(t){const i=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(t));this.questionRenderService.parseRenderQuestions(i??[],a=>{},this.configRenderService).then(a=>{let s=[];a.forEach((l,c)=>{var d=[];l.tags.forEach(N=>{d.push({id:N.id,questionId:0,code:N.code??"",viName:N.viName??"",enName:N.enName??""})});let f=[{id:l.id,tenantId:l.tenantId,examId:l.examId,categoryId:l.categoryId,metadata:l.metadata,label:(this.lstQuest.length+c).toString(),content:JSON.stringify([l.content]),answerResult:JSON.stringify(l.answerResult),groupId:l.groupId,isImage:l.isImage,answerType:l.answerType,answerConfig:JSON.stringify(l.answers),answerMedia:l.help,isFixAns:l.isFixAns?1:0,groupType:l.groupType,tags:d,paths:l.paths,attachments:JSON.stringify(l.attachments),version:l.version}];s.push({key:`[@${l.id}:C\xe2u h\u1ecfi]=>0`,questions:f})}),this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[],this.matrixLoadedData=s;let r=this.aztEditor?._editor.getValue().trim()+"\n";this.matrixLoadedData.forEach((l,c)=>{let d=this.lstQuest.map(z=>z.id??0);const f=l.key??"",y=this.apiDataCache.get(f);let I=new $e(this.cdnService,this.commonService,z=>{this.fillQuest(c,z)},this.apiCallbackCache,this.aztEditor,z=>{this.showErrorSnack(z),y&&this.apiDataCache.set(f,y)},d,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(f),I.render(f,this.images,this.questionService),l.questions&&I.processApiResponseReturnData(l.questions,l.key??"",!1,this.lstQuest.filter(z=>!z.quest.isGroup).length+c+1).then(z=>{r+="\n"+this.getQuestText(z)+"\n",this.aztEditor?._editor.setValue(r)})})}).catch(()=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong")})}constructor(t,i,a,s,r,l,c,d,f,y,O,N,I,z,$,Y){super(),this.questionHelper=t,this.editorCommonService=i,this.apiUploadService=a,this.infoService=s,this.documentService=r,this.examService=l,this.cdnService=c,this.activeRoute=d,this.store=f,this.questionRenderService=y,this.editorOutputDataService=O,this.userService=N,this.questionSaveService=I,this.questionService=z,this.discoveryService=$,this.dialog=Y,this.images=[],this.editedImages=new Map,this.errorQuestionView=new fi(this.commonService),this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g,this.title=new p.p4,this.lstQuest=[],this.lstQuestReplace=[],this.text="",this.attachFiles=[],this.aztLangConfig="",this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.showTooltip=!0,this.questionTags=[],this.mapEventElement=[],this.configRenderService=new se.B,this.maxQuestEnableLazy=20,this.isMobile=!1,this.lastMatrixHash="",this.editQuestId=0,this.editableEventObj={isChange:!1,count:0,addCount:function(){this.count++,this.count>2&&(this.isChange=!0)}},this.type="user",this.timeOutDelayStatus={refresh:!1,timeRefresh:0,limitRefresh:2},this.lstSimilar=[],this.enableEdit=!1,this.showPromptCreateExam=!1,this.willShowAIBox=!Ce.N.production||Ce.N.isProdAzotaVn,this.conf=new be(this.editorOutputDataService,this.commonService),this.editorApiService=new ne(t,a,r,l,z),this.fileParser=new P.uD,this.setupEvent();let V=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.questionSaveService.callbackBase64ToCanvas=(te,K)=>{this.conf.logConfig.msg=`${V} ${Math.floor(te/K*100*.7)}%`},this.questionSaveService.callbackUploadImage=(te,K)=>{this.conf.logConfig.msg=`${V} ${Math.floor(te/K*100*.3)+70}%`}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(St),e.Y36(Ao),e.Y36(Ln.$),e.Y36(si.CM),e.Y36(Ve.Zg),e.Y36(Ve.Oe),e.Y36(xt.U),e.Y36(T.gz),e.Y36(fn.yh),e.Y36(da.L),e.Y36(De),e.Y36(Qe.K),e.Y36(Ge),e.Y36(Ve.aE),e.Y36(lt.F),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-azota-editor"]],viewQuery:function(t,i){if(1&t&&(e.Gf(gt,5),e.Gf($t,5),e.Gf(xn,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.popupConfirm=a.first),e.iGM(a=e.CRH())&&(i.mobileEditor=a.first),e.iGM(a=e.CRH())&&(i.popupOnlyImageEditor=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(s){return i.onResize(s)},!1,e.Jf7)},features:[e.qOj],decls:16,vars:21,consts:[[3,"headerBackToLink","reloadBacktoLink","checkBackDialog","disableConfirmBtn","confirmTitle","showInput","examName","showConfirmButton","handleBackDialog","handleCancel","handleConfirm"],[1,"main__editor",3,"ngClass"],["class","app-editor",4,"ngIf"],["class","loading-mess",4,"ngIf"],["id","testFinderMask",4,"ngIf"],["type","file",1,"azt-hidden",3,"change"],["fileOpenProcess",""],["popupConfirm",""],[3,"inp","onClose","onInsertLatex",4,"ngIf"],[3,"inp","onClose","onInsert",4,"ngIf"],[3,"lstErrors","onClose",4,"ngIf"],[3,"lstQuest","onClose","onNextQuestion",4,"ngIf"],[3,"el_target","onClose","onPushImage",4,"ngIf"],["class","main__homework-save",4,"ngIf"],["class","main__exam-save",4,"ngIf"],[1,"app-editor"],["id","list-quest-panel"],["class","toolbar-editor box rounded-none","id","toolbar__question",4,"ngIf"],[1,"main-content",3,"scroll"],["class","question-content",4,"ngIf"],["class","question-content","load_effect_lazy","",3,"id","ngStyle",4,"ngFor","ngForOf"],[2,"height","250px"],[3,"class",4,"ngIf"],["id","toolbar__question",1,"toolbar-editor","box","rounded-none"],[1,"toolbar-left"],[1,"toolbar-right"],["azt-track-service","azota-editor-CH8a9F4wc","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-UuiDzppsVL","class","toolbar-btn color-danger",3,"click",4,"ngIf"],["class","toolbar-btn",3,"ngClass",4,"ngIf"],["azt-track-service","azota-editor-CH8a9F4wc",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["cx","12","cy","12","r","10"],["x1","12","x2","12","y1","16","y2","12"],["x1","12","x2","12.01","y1","8","y2","8"],[1,"azt-hidden","md:block"],["azt-track-service","azota-editor-UuiDzppsVL",1,"toolbar-btn","color-danger",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M14 2v6h6"],["d","m3 12.5 5 5"],["d","m8 12.5-5 5"],[1,"toolbar-btn",3,"ngClass"],[1,"toolbar-btn-input-mode"],[1,"w-5","h-5","inline-block","mr-2"],["name","arrow-up-down"],["type","number","appOnlyNumber","",3,"ngModel","min","ngModelChange","keyup.enter","focus","focusout"],["azt-track-service","azota-editor-EMOtdhqulZ",1,"btn","btn-goto","btn-primary",3,"click"],[1,"question-content"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],[1,"box-service-content"],[1,"mb-5","tex2jax_process","homework-content",3,"innerHTML"],["class","box-show-files",4,"ngIf"],["class","box-input-file",4,"ngIf"],[1,"box-show-files"],[1,"box-line"],[4,"ngFor","ngForOf"],[1,"box-file"],["azt-track-service","azota-editor-VmAdzC0JVjO",1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],["azt-track-service","azota-editor-YPQZFq3W5pa",3,"click"],[1,"line-file",3,"title"],[1,"box-input-file"],[3,"onDropFile"],["load_effect_lazy","",1,"question-content",3,"id","ngStyle"],["class","box-service box border border-slate-400 dark:border-darkmode-400",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["reportQTakeTest","","class","feedback-btn",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],["azt-track-service","azota-editor-t2MSjyyGi8_",1,"link-option",3,"click"],[1,"box-service-header","w-full"],[3,"q","notOnlyQuestEdit","index","questionTags","onChangeQuest","onRandomQuest","onApplyAllTag","onError","onLabelClick","onHotKeyPointSync","onExtraInfo","onCut","onDel","onCopy"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"innerHTML","click"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"matTooltipPosition","matTooltip","ngClass","click"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"innerHTML","ngClass","click"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"innerHTML","click"],[1,"exam-box",3,"innerHTML"],["reportQTakeTest","",1,"feedback-btn"],["azt-track-service","azota-editor-QmBorNGdB","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],[1,"skeleton-box-loading","h-100","w-100"],["id","toolbar__editor",1,"toolbar-editor","box","rounded-none"],["azt-track-service","azota-editor-PYOwtUkbiHX","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-RriKBPZhZhL","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-SevIBYRKYxI","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-Tse343hGe","class","toolbar-btn",3,"click",4,"ngIf"],["class","toolbar-btn",4,"ngIf"],[3,"config","readOnly","editorApiService","onStartProcessFile","onInit"],["class","footer-editor",4,"ngIf"],["class","ai-chatbox",4,"ngIf"],["azt-track-service","azota-editor-PYOwtUkbiHX",1,"toolbar-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["azt-track-service","azota-editor-RriKBPZhZhL",1,"toolbar-btn",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","azota-editor-SevIBYRKYxI",1,"toolbar-btn",3,"click"],["d","M18 7V4H6l6 8-6 8h12v-3"],["azt-track-service","azota-editor-Tse343hGe",1,"toolbar-btn",3,"click"],[1,"w-6","h-5","inline-block","mr-1"],[1,"w-full","h-full","inline-block",3,"src"],[1,"toolbar-btn"],[1,"btn-transpanrent",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","w-64","relative"],[1,"dropdown-content"],["azt-track-service","azota-editor-a3UJXgWi4cK",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","azota-editor-55CS__ezSf3",1,"dropdown-item",3,"click"],["x","6","y","14","width","9","height","6","rx","2"],["x","6","y","4","width","16","height","6","rx","2"],["d","M2 2v20"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"footer-editor"],[1,"footer-item"],["azt-track-service","azota-editor-bC2YM9_C3mx",1,"text-primary",3,"click"],["azt-track-service","azota-editor-ENvq0_KzaKp",1,"text-primary",3,"click"],["azt-track-service","azota-editor-lHk43akYxBc",1,"text-primary",3,"click"],["azt-track-service","azota-editor-zb38B_roeqf",1,"text-primary",3,"click"],[1,"ai-chatbox"],[3,"questList","close","createQuestion"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"],["id","testFinderMask"],[1,"box","border","border-slate-400","dark:border-darkmode-400",3,"isFirstTime","closeTestFinder"],[3,"inp","onClose","onInsertLatex"],[3,"inp","onClose","onInsert"],[3,"lstErrors","onClose"],[3,"lstQuest","onClose","onNextQuestion"],[3,"el_target","onClose","onPushImage"],[1,"main__homework-save"],[3,"onBack"],[1,"main__exam-save"]],template:function(t,i){1&t&&(e.TgZ(0,"editor-layout",0),e.NdJ("handleBackDialog",function(){return i.conf.showEditor()})("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),e.TgZ(1,"div",1),e.YNc(2,kc,8,7,"div",2),e.qZA(),e.YNc(3,Tc,9,3,"div",3),e.YNc(4,ri,2,1,"div",4),e.TgZ(5,"input",5,6),e.NdJ("change",function(s){return i.openFile(s)}),e.qZA(),e._UZ(7,"editor-confirm",null,7),e.YNc(9,Ac,1,1,"mathtype-editor",8),e.YNc(10,Ar,1,1,"similar-quest",9),e.YNc(11,Or,1,1,"show-errors-quests",10),e.YNc(12,ha,1,1,"show-info-quests",11),e.YNc(13,Ts,1,1,"only-image-editor",12),e.YNc(14,Ji,2,0,"div",13),e.YNc(15,Oc,2,0,"div",14),e.qZA()),2&t&&(e.Q6J("headerBackToLink",i.conf.getBackLink())("reloadBacktoLink",i.conf.editor.show)("checkBackDialog",!i.conf.editor.show)("disableConfirmBtn",i.editQuestId>0&&!i.editableEventObj.isChange||i.enableEdit||i.loadingManager.size>0)("confirmTitle",0==i.editQuestId?"lang_auto_tiep_tuc":"lang_buttom_save")("showInput",i.conf.editor.show&&!i.editQuestId)("examName",i.title)("showConfirmButton",i.conf.editor.show),e.xp6(1),e.Q6J("ngClass",e.VKq(19,Bo,!i.conf.editor.show)),e.xp6(1),e.Q6J("ngIf",i.conf.isConfigInit),e.xp6(1),e.Q6J("ngIf",i.conf.logConfig.status),e.xp6(1),e.Q6J("ngIf",i.conf.startLibrary),e.xp6(5),e.Q6J("ngIf",i.conf.mathEditor.show),e.xp6(1),e.Q6J("ngIf",i.conf.similarQuest.show),e.xp6(1),e.Q6J("ngIf",i.conf.showErrorsQuests.show),e.xp6(1),e.Q6J("ngIf",i.conf.showInfomationQuests.show),e.xp6(1),e.Q6J("ngIf",i.conf.imageEditor.show),e.xp6(1),e.Q6J("ngIf",i.conf.homeworkSave.show),e.xp6(1),e.Q6J("ngIf",i.conf.examSave.show))},styles:['#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{position:relative;padding:10px;font-size:13px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-mode-normal[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;width:60px;margin-left:10px;font-size:smaller;border-radius:5px}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.toolbar-btn[_ngcontent-%COMP%]   .btn-goto[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{height:30px;margin-left:5px}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0;padding:5px 20px}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.col-questions[_ngcontent-%COMP%]   .toolbar-editor[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:#1b1f230a 0 1px,#ffffff40 0 1px inset}.col-questions[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{height:100%;overflow:auto}.question-content[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:5px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .quest-err{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .quest-err:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .height40{height:40px!important}.hover-none[_ngcontent-%COMP%]:hover{background-color:transparent!important}.ai-chatbox[_ngcontent-%COMP%]{position:absolute;top:50px;left:50%;transform:translate(-50%);width:85%}']}),n})(),Sc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[M.ez,k.j,p.u5,p.UX,E.Z,g.Z_,x.kb,h.qyJ.pick(h.ciZ),w.W]}),n})();var Tn=S(29023),ga=S(73445),ji=S(23680),So=S(16019),$a=S(88620),Zn=S(35187),Mt=S(35318),zo=S(217),Ai=S(5961),Hi=S(90467),Ki=S(79107),Jo=S(71069),$i=S(58222),As=S(2032),Kn=S(64170),Zt=S(92596),jt=S(5647),Bt=S(775),Ho=S(10463),fa=S(74438),re=S(11964);function Ec(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Os(n,o){1&n&&(e.TgZ(0,"div",71),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function Ss(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function Ko(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function Sr(n,o){1&n&&(e.TgZ(0,"div",72),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Mc(n,o){1&n&&(e.TgZ(0,"div",85),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function Ic(n,o){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,Mc,3,3,"div",84),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.checkboxValidator)}}const Ya=function(n){return{"h-56-important":n}};function Eo(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",73)(2,"div",74)(3,"div",75)(4,"h3",76),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",77),e._UZ(8,"azt-list-classroom-checkall",78),e.qZA()(),e.TgZ(9,"div",79)(10,"ng-scrollbar",80),e._UZ(11,"azt-list-classroom-checkbox",81),e.qZA()()()(),e.YNc(12,Ic,2,1,"div",82),e.BQk()),2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_auto_danh_sach_cac_lop")," "),e.xp6(3),e.Q6J("form",t.form)("objs",t.classroomObjs)("permissionName",t.permissionTypes.homework),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(14,Ya,t.isMobileWebView)),e.xp6(1),e.Q6J("form",t.form)("objs",t.classroomObjs)("homeworkObj",t.homeworkObj)("permissionName",t.permissionTypes.homework),e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors)}}function Mo(n,o){if(1&n&&(e.TgZ(0,"div",86)(1,"div",87)(2,"span",88),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"span",89),e._uU(6),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_da_giao_bai_tap_cho_lop")+": "," "),e.xp6(3),e.hij(" ",null==t.classroomObj?null:t.classroomObj.name," ")}}function Io(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveNewOrConfigHomework(0))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid||t.checkDeadLineValid(t.form.controls.homeworkStartDate.value,t.form.controls.homeworkDeadline.value)<=0),e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_luu_nhap")," ")}}function Wt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"h3",6),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",9)(14,"div",11),e._UZ(15,"input",12),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,Os,3,3,"div",13),e.qZA()(),e.TgZ(18,"div",14)(19,"div",15)(20,"label",16),e._uU(21),e.ALo(22,"mytranslate"),e.O4$(),e.TgZ(23,"svg",17),e.ALo(24,"mytranslate"),e._UZ(25,"circle",18)(26,"line",19)(27,"line",20),e.qZA()()(),e.kcU(),e.TgZ(28,"div",15)(29,"div",21)(30,"div",22)(31,"mat-form-field",23)(32,"input",24),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(43);return e.KtG(a.open())}),e.ALo(33,"mytranslate"),e.qZA(),e.TgZ(34,"button",25),e.NdJ("click",function(a){return e.CHM(t),e.MAs(43).open(),e.KtG(a.stopPropagation())}),e.O4$(),e.TgZ(35,"svg",26),e._UZ(36,"path",27)(37,"path",28)(38,"path",29)(39,"path",30)(40,"path",31)(41,"path",32),e.qZA()(),e.kcU(),e.TgZ(42,"ngx-mat-datetime-picker",null,33),e.YNc(44,Ss,2,0,"ng-template"),e.qZA()()(),e.TgZ(45,"div",22)(46,"mat-form-field",23)(47,"input",34),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(58);return e.KtG(a.open())}),e.ALo(48,"mytranslate"),e.qZA(),e.TgZ(49,"button",35),e.NdJ("click",function(a){return e.CHM(t),e.MAs(58).open(),e.KtG(a.stopPropagation())}),e.O4$(),e.TgZ(50,"svg",26),e._UZ(51,"path",27)(52,"path",28)(53,"path",29)(54,"path",30)(55,"path",31)(56,"path",32),e.qZA()(),e.kcU(),e.TgZ(57,"ngx-mat-datetime-picker",null,36),e.YNc(59,Ko,2,0,"ng-template"),e.qZA()()(),e.TgZ(60,"div",37)(61,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearTime())}),e.O4$(),e.TgZ(62,"svg",39),e._UZ(63,"path",40)(64,"path",41)(65,"path",42)(66,"path",43),e.qZA(),e._uU(67),e.ALo(68,"mytranslate"),e.qZA()()(),e.kcU(),e.TgZ(69,"div",44)(70,"div",45),e._uU(71),e.ALo(72,"mytranslate"),e.qZA(),e.YNc(73,Sr,3,3,"div",46),e.qZA()()(),e.TgZ(74,"div",47)(75,"div",48)(76,"label",49),e._uU(77),e.ALo(78,"mytranslate"),e.qZA()(),e.TgZ(79,"div",50)(80,"div",51)(81,"div",52),e._UZ(82,"input",53),e.TgZ(83,"label",54),e._uU(84),e.ALo(85,"mytranslate"),e.qZA()(),e.TgZ(86,"div",55),e._UZ(87,"input",56),e.TgZ(88,"label",57),e._uU(89),e.ALo(90,"mytranslate"),e.qZA()()()()(),e.TgZ(91,"div",58)(92,"div",48)(93,"label",49),e._uU(94),e.ALo(95,"mytranslate"),e.qZA()(),e.TgZ(96,"div",50)(97,"div",51)(98,"div",52),e._UZ(99,"input",59),e.TgZ(100,"label",60),e._uU(101),e.ALo(102,"mytranslate"),e.qZA()(),e.TgZ(103,"div",55),e._UZ(104,"input",61),e.TgZ(105,"label",62),e._uU(106),e.ALo(107,"mytranslate"),e.qZA()()()()(),e.TgZ(108,"div",63)(109,"div",64)(110,"div",65),e._uU(111),e.ALo(112,"mytranslate"),e.qZA()(),e.YNc(113,Eo,13,16,"ng-container",0),e.YNc(114,Mo,7,4,"ng-template",null,66,e.W1O),e.qZA()(),e.TgZ(116,"div",67)(117,"div",68),e.YNc(118,Io,3,4,"button",69),e.TgZ(119,"button",70),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveNewOrConfigHomework(1))}),e._uU(120),e.ALo(121,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.MAs(43),i=e.MAs(58),a=e.MAs(115),s=e.oxw();e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(4),e.hij(" ",e.lcZ(6,26,"lang_auto_cau_hinh_chung")," "),e.xp6(6),e.hij(" ",e.lcZ(12,28,"lang_auto_ten")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(16,30,"lang_auto_nhap_ten")+" ..."),e.xp6(2),e.Q6J("ngIf",s.form.controls.homeworkName.errors),e.xp6(4),e.hij(" ",e.lcZ(22,32,"lang_testbank_test_config_time_assigne_homework")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(24,34,"lang_homework_add_home_work_startDate_introduce")),e.xp6(9),e.s9C("placeholder",e.lcZ(33,36,"lang_auto_tu")),e.Q6J("ngxMatDatetimePicker",t),e.xp6(15),e.s9C("placeholder",e.lcZ(48,38,"lang_auto_den")),e.Q6J("ngxMatDatetimePicker",i),e.xp6(20),e.hij(" ",e.lcZ(68,40,"lang_auto_dat_lai")," "),e.xp6(4),e.hij(" ",e.lcZ(72,42,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),e.xp6(2),e.Q6J("ngIf",s.calculatorTimeValidate(s.form.controls.homeworkDeadline.value,s.form.controls.homeworkStartDate.value)<=0),e.xp6(4),e.hij(" ",e.lcZ(78,44,"lang_auto_cho_xem_ket_qua")," "),e.xp6(7),e.hij(" ",e.lcZ(85,46,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(90,48,"lang_auto_co")," "),e.xp6(5),e.hij(" ",e.lcZ(95,50,"lang_auto_dang_nhap_de_nop_bai")," "),e.xp6(7),e.hij(" ",e.lcZ(102,52,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(107,54,"lang_auto_co")," "),e.xp6(5),e.hij(" ",e.lcZ(112,56,"lang_auto_giao_cho_lop")," "),e.xp6(2),e.Q6J("ngIf","2"==s.form.controls.whoAllow.value)("ngIfElse",a),e.xp6(5),e.Q6J("ngIf",1!=(null==s.homeworkObj?null:s.homeworkObj.isPublished)),e.xp6(1),e.Q6J("disabled",s.form.invalid||s.checkDeadLineValid(s.form.controls.homeworkStartDate.value,s.form.controls.homeworkDeadline.value)<=0),e.xp6(1),e.hij(" ",e.lcZ(121,58,"lang_auto_xuat_ban")," ")}}let bn=(()=>{class n extends W.Q{redirectBackTo(){this.onBack.emit()}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}clearTimeStart(){this.form.controls.homeworkStartDate.setValue("")}calculatorTimeValidate(t,i){return""!=t&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(t,i):1}checkDeadLineValid(t,i){return""!=t&&""!=i?this.timeService.getDiffFromTwoDateWithZeroSecond(i,t):1}saveNewOrConfigHomework(t){this.isUpdate?this.updateHomework(t):(this.initStatusObj(),this.homeWorkContent=this.createHomeworkEditorData.homework?.content??"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(i=>{null==i.errorMessage?(this.homeWorkContent=i.content,this.createHomework(t)):(this.showErrorSnack(i.errorMessage),this.stopStatusObj())}))}updateHomework(t){let i=this.commonService.getFormObj(this.form);i.homeworkStartDate=""===i.homeworkStartDate||null===i.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate),i.homeworkDeadline=""===i.homeworkDeadline||null===i.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline);var a=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.homework);const s=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,a,i.classroomIds);this.initStatusObj();let r={name:i.homeworkName,startDate:i.homeworkStartDate,deadline:i.homeworkDeadline,mustVerified:i.mustVerified,whenShowAnswer:parseInt(i.whenShowAnswer),enableUpdateDeadLine:1,classroomIds:2==i.whoAllow?s:void 0,isPublished:t||(null!=this.homeworkObj?this.homeworkObj.isPublished:0)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,r).subscribe(l=>{if(1==l.success){let f=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";var c=[];if(l.data?.objs)for(var d=0;d<l.data.objs.length;d++)c.push(l.data?.objs[d].hashId);let y=`/admin/testbank/config-homework/${f??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${f??0}/${JSON.stringify(c)}`,`?backto=${y}`),this.successStatusObj(r.isPublished?"lang_auto_xuat_ban_thanh_cong":"lang_auto_luu_thanh_cong_chua_xuat_ban",!0)}else this.errorStatusObj(l.message??"",!0)}))}createHomework(t){let i=this.commonService.getFormObj(this.form);i.homeworkStartDate=""===i.homeworkStartDate||null===i.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate),i.homeworkDeadline=""===i.homeworkDeadline||null===i.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline),this.homeWorkContent=this.zipDataService.convertContentGzip(this.homeWorkContent);var a=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.homework);const s=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,a,i.classroomIds);if(this.form.invalid)this.showErrorSnack(s.length<=0?"lang_auto_please_select_classroom":"lang_auto_vui_long_nhap_day_du_thong_tin");else{this.initStatusObj();let r=this.userService.getUserObj(),l=JSON.stringify({type:"homework",id:this.homeworkId,user:r.id}),c={name:i.homeworkName,content:this.homeWorkContent,files:this.createHomeworkEditorData.homework?.files??"",startDate:i.homeworkStartDate,deadline:i.homeworkDeadline,mustVerified:i.mustVerified,whenShowAnswer:parseInt(i.whenShowAnswer),classroomIds:s,isPublished:t,categoryId:this.commonService.getMyParam(this.activeRoute,"cat_id")?Number(this.commonService.getMyParam(this.activeRoute,"cat_id")):0};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(l,c).subscribe(d=>{if(1==d.success){let O=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";if(c.isPublished){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);var f=[];if(d.data?.objs)for(var y=0;y<d.data.objs.length;y++)f.push(d.data?.objs[y].hashId);let N=`/admin/testbank/config-homework/${O??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${O??0}/${JSON.stringify(f)}`,`?backto=${N}`)}else this.myNavigationWithQueryString("/admin/testbank/document-management/1/0/1",`?backto=/admin/testbank/config-homework/${O??0}/${this.homeworkHashId}`),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(d.message??"",!0)}))}}getHomework(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(t,[]).subscribe(i=>{if(1==i.success){this.classroomObjs=i?.data?.classroomObjs??new Array,this.homeworkObj=i?.data?.homeworkObj;let a=this.homeworkObj?.classroomId??0;if(a){for(let r=0;r<this.classroomObjs.length;r++)if(this.classroomObjs[r].id==a){this.classroomObj=this.classroomObjs[r];break}}else this.classroomObj=this.classroomObjs.length>0?this.classroomObjs[0]:void 0;this.createHomeworkEditorData=this.isUpdate?this.createHomeworkEditorData:this.editorOutputDataService.getOutputData(),this.form.patchValue({homeworkName:this.createHomeworkEditorData.homework?.name??this.homeworkObj?.name??"",homeworkStartDate:null!=this.homeworkObj?.startDate?this.homeworkObj?.startDate:"",homeworkDeadline:null!=this.homeworkObj?.deadline?this.homeworkObj?.deadline:"",mustVerified:1==this.homeworkObj?.mustVerified?"1":"0",whenShowAnswer:1==this.homeworkObj?.whenShowAnswer?"1":"0",whoAllow:i.data?.hasStudentAnswers&&this.isUpdate?"1":"2"}),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.homeworkHashId?(this.isUpdate=!0,this.getHomework(this.homeworkHashId)):(this.isUpdate=!1,this.getHomework("add_new")),this.form=this.formBuilder.group({homeworkName:new p.p4("",[p.kI.required,Ai._.noWhiteSpace]),homeworkStartDate:new p.p4(""),homeworkDeadline:new p.p4(""),mustVerified:new p.p4("0"),whoAllow:new p.p4(this.isUpdate?"1":"2"),whenShowAnswer:new p.p4("1"),classroomIds:this.formBuilder.array([])},{validators:[zo.h.classroomCheckBoxValidator]})}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f,y){super(),this.formBuilder=t,this.activeRoute=i,this.timeService=a,this.documentConfigService=s,this.editorOutputDataService=r,this.homeworkService=l,this.userService=c,this.sEAztClassroomCheckboxService=d,this.uploadImageOfHomeworkService=f,this.zipDataService=y,this.onBack=new e.vpe,this.form=new p.nJ({}),this.permissionTypes=Zn.y,this.homeworkId=0,this.homeworkHashId="",this.classroomObjs=[],this.isUpdate=!1,this.homeWorkContent="",this.createHomeworkEditorData={}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(Mt.O),e.Y36(Ve.Cq),e.Y36(De),e.Y36(Hi.Lk),e.Y36(Qe.K),e.Y36(Ki.L),e.Y36(Jo.J),e.Y36($i.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["main-config-homework"]],outputs:{onBack:"onBack"},features:[e._Bn([{provide:Tn.fM,useClass:So.WG,deps:[ji.Ad,ga.o8]},{provide:Tn.ab,useFactory:$a.hx,deps:[Mt.O]}]),e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","main-config-7OYF4TAsq1","matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-wVzabbXyPl2","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],["startTime",""],["azt-track-service","main-config-mBwAoax2xyu","matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-L6psEhMGCUO","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","main-config-_41QHswfgPw",1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified","value","0",1,"form-check-input"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified","value","1",1,"form-check-input"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],["elseAllowed",""],[1,"my-5"],[1,"text-right"],["azt-track-service","main-config-xaAyYXPj2ZT","class","btn btn-pending w-24 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","main-config-3CEX8CXtLDk",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"col-span-12","mt-4","intro-y"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],[1,"col-span-12","mt-4"],[1,"bg-slate-100","dark:bg-darkmode-600","rounded-md","p-3"],[1,"text-md"],[1,"text-md","font-medium"],["azt-track-service","main-config-xaAyYXPj2ZT",1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,Ec,1,0,"azt-loading-effect",0),e.YNc(1,Wt,122,60,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.O5,As.Nt,Kn.KE,Kn.R9,Zt.gM,Tn.rZ,Tn.T$,x.KC,p._Y,p.Fj,p._,p.JJ,p.JL,p.sg,p.u,p.CE,jt.Q,Bt.M,Ho.o,fa.g,re.bT],encapsulation:2}),n})();var Lc=S(32955),Lo=S(25679),Yi=S(77848);let co=(()=>{class n{transform(t,i){if(!t)return"";const a=t.find(r=>r.id==i);return a?a.key??"":""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"aztFindSchoolSubjectById",type:n,pure:!0}),n})();function Zc(n,o){if(1&n&&(e.TgZ(0,"option",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("value",t.id)("selected",t.id==i.form.controls.schoolLevel.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.key)," ")}}function Gi(n,o){1&n&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Wi(n,o){if(1&n&&(e.TgZ(0,"option",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("value",t.id)("selected",t.id==i.form.controls.schoolSubject.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.key)," ")}}function Pc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.ALo(7,"aztFindSchoolSubjectById"),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.ALo(10,"aztFindSchoolSubjectById"),e.qZA(),e.TgZ(11,"a",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeSubjectIdByPredict())}),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_please_double_check_the_subject_for_accuracy")+". "+e.lcZ(5,4,"lang_testbank_the_system_recognizes_your_subject_as_a_subject")+" "+e.lcZ(6,6,e.xi3(7,8,t.schoolSubjectObjs,t.predictSchoolSubjectId))+", "+e.lcZ(8,11,"lang_testbank_you_are_choosing_subject")+" "+e.lcZ(9,13,e.xi3(10,15,t.schoolSubjectObjs,t.form.controls.schoolSubject.value))+". "," "),e.xp6(9),e.Oqu(e.lcZ(13,18,"lang_testbank_click_here_to_change_it_to_the_correct_one")+".")}}function jc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"select",6),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.filterSchoolSubject(a.form.controls.schoolLevel.value))}),e.TgZ(9,"option",7),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.YNc(12,Zc,3,5,"option",8),e.qZA(),e.YNc(13,Gi,3,3,"div",9),e.qZA(),e.TgZ(14,"div",3)(15,"div",4)(16,"label",10),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"select",11)(20,"option",7),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.YNc(23,Wi,3,5,"option",8),e.qZA()(),e.YNc(24,Pc,14,20,"div",12),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(5),e.hij(" ",e.lcZ(7,12,"lang_auto_khoi_hoc")," "),e.xp6(3),e.Q6J("selected",0==t.form.controls.schoolLevel.value),e.xp6(1),e.hij("",e.lcZ(11,14,"lang_auto_---chon_khoi"),"---"),e.xp6(2),e.Q6J("ngForOf",t.schoolLevelObjs),e.xp6(1),e.Q6J("ngIf",0==(null==t.form||null==t.form.controls||null==t.form.controls.schoolLevel?null:t.form.controls.schoolLevel.value)||0==(null==t.form||null==t.form.controls||null==t.form.controls.schoolSubject?null:t.form.controls.schoolSubject.value)||!t.isSubjectIdInList),e.xp6(4),e.hij(" ",e.lcZ(18,16,"lang_auto_mon_hoc")," "),e.xp6(2),e.uIk("disabled",0==t.form.controls.schoolLevel.value?"":null),e.xp6(1),e.Q6J("selected",0==t.form.controls.schoolSubject.value),e.xp6(1),e.hij("",e.lcZ(22,18,"lang_auto_---chon_mon"),"---"),e.xp6(2),e.Q6J("ngForOf",t.subjectSelectedList),e.xp6(1),e.Q6J("ngIf",-1!=t.predictSchoolSubjectId&&t.showPredictSchoolSubject&&!t.checkPredictSchoolSubject&&0!=(null==t.form||null==t.form.controls||null==t.form.controls.schoolSubject?null:t.form.controls.schoolSubject.value)&&!t.statusObj.loading)}}let Ga=(()=>{class n extends W.Q{constructor(t){super(),this.aiService=t,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.formControlName="",this.typeView=0,this.questionContents=[],this.showPredictSchoolSubject=!1,this.sendLogPredictSubject=new e.vpe,this.idSubjectInLevel=new e.vpe,this.subjectSelectedList=[],this.targetExamGroupObjs=[],this.checkPredictSchoolSubject=!1,this.predictSchoolSubjectId=-1,this.predictLogRequestObj={predictSchoolSubjectId:0,acceptPredictStatus:0,predictByTotalQuestion:0},this.isSubjectIdInList=!0}filterSchoolSubject(t){this.filterSubject(t??1)}changeSubjectIdByPredict(){const t=this.schoolSubjectObjs.find(s=>s.id==this.predictSchoolSubjectId),i=this.form?.controls.schoolLevel.value;let a=0;t&&t.from&&t.to&&(Number(i)>=t.from||Number(i)<=t.to?(a=this.getSubjectIdFilter(this.subjectSelectedList),this.form?.controls.schoolSubject.setValue(a)):(this.form?.controls.schoolLevel.setValue(t.from),this.filterSchoolSubject(this.form?.controls.schoolLevel.value),a=this.getSubjectIdFilter(this.subjectSelectedList),this.form?.controls.schoolSubject.setValue(a)),this.predictLogRequestObj.acceptPredictStatus=1,this.sendLogPredictSubject.emit(this.predictLogRequestObj))}predictSchoolSubjectByQuestionContent(){this.initStatusObj(),this.subscriptions.add(this.aiService.apiAiPredictSubjectPost({questionContents:this.questionContents}).subscribe(i=>{1===i.success?(this.predictSchoolSubjectId=i.data?.schoolSubjectId??0,this.predictSchoolSubjectId&&(this.checkPredictSchoolSubject=this.checkPredictSubject(),this.predictLogRequestObj={predictSchoolSubjectId:this.predictSchoolSubjectId,acceptPredictStatus:-1!=this.predictSchoolSubjectId&&this.showPredictSchoolSubject&&!this.checkPredictSchoolSubject?0:2,predictByTotalQuestion:this.questionContents.length},this.sendLogPredictSubject.emit(this.predictLogRequestObj)),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}getArrayIdSubject(){const t=this.getKeySubjectById(this.predictSchoolSubjectId,this.schoolSubjectObjs);return this.convertSubjectList(this.schoolSubjectObjs)[t]}getSubjectIdFilter(t){const i=this.getArrayIdSubject();let a=0;for(let s=0;s<t.length;s++){const r=t[s];if(r.id&&i.includes(r.id)){a=r.id;break}}return a}filterSubject(t){let i=this.commonService.myClone(this.schoolSubjectObjs);this.subjectSelectedList=i.filter(r=>!(r.from&&r.to&&t)||t>=r.from&&t<=r.to);let a=this.form?.get("schoolSubject")?.value,s=this.subjectSelectedList.filter(r=>r.id==a);(!s||!s.length)&&this.form?.controls.schoolSubject.setValue(0)}checkPredictSubject(){const t=this.getArrayIdSubject(),i=Number(this.form?.controls.schoolSubject.value)??0;return t?.includes(i)}convertSubjectList(t){const i={};return t.forEach(a=>{a.key&&(i[a.key]||(i[a.key]=[]),i[a.key].push(a.id))}),i}getKeySubjectById(t,i){const a=i.find(r=>r.id==t);return a?a.key??"":""}renderData(){0==this.typeView?this.examSchoolLogObj?.id?(this.filterSchoolSubject(this.examSchoolLogObj?.lastSchoolLevelId??0??this.schoolLevelObjs[0].id),this.form?.controls.schoolLevel.setValue(this.examSchoolLogObj?.lastSchoolLevelId),this.form?.controls.schoolSubject.setValue(this.examSchoolLogObj?.lastSchoolSubjectId)):this.filterSchoolSubject(0):this.filterSchoolSubject(this.form?.controls.schoolLevel.value)}checkSubjectIdInLevel(){if(!this.form)return!1;const t=this.form.controls.schoolSubject.value;for(let i=0;i<this.subjectSelectedList.length;i++)if(this.subjectSelectedList[i].id==t)return!0;return!1}ngOnChanges(){(this.schoolLevelObjs||this.subjectSelectedList)&&this.renderData()}ngOnInit(){this.renderData(),this.showPredictSchoolSubject&&this.predictSchoolSubjectByQuestionContent(),this.isSubjectIdInList=this.checkSubjectIdInLevel(),this.idSubjectInLevel.emit(this.isSubjectIdInList),this.form?.controls.schoolSubject?.valueChanges.subscribe(()=>{this.predictSchoolSubjectId&&(this.checkPredictSchoolSubject=this.checkPredictSubject(),this.predictLogRequestObj.acceptPredictStatus=-1!=this.predictSchoolSubjectId&&this.showPredictSchoolSubject&&!this.checkPredictSchoolSubject?0:2,this.sendLogPredictSubject.emit(this.predictLogRequestObj)),this.isSubjectIdInList=this.checkSubjectIdInLevel(),this.idSubjectInLevel.emit(this.isSubjectIdInList)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yi.p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-level-subject"]],inputs:{form:"form",schoolLevelObjs:"schoolLevelObjs",schoolSubjectObjs:"schoolSubjectObjs",examSchoolLogObj:"examSchoolLogObj",formControlName:"formControlName",typeView:"typeView",questionContents:"questionContents",showPredictSchoolSubject:"showPredictSchoolSubject"},outputs:{sendLogPredictSubject:"sendLogPredictSubject",idSubjectInLevel:"idSubjectInLevel"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["id","schoolLevel","formControlName","schoolLevel",1,"form-select",3,"change"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","text-xs mt-2 text-danger",4,"ngIf"],["for","schoolSubject",1,"form-label","flex","items-center"],["id","schoolSubject","formControlName","schoolSubject",1,"form-select"],["class","col-span-12","style","margin-top: -12px;",4,"ngIf"],[3,"value","selected"],[1,"text-xs","mt-2","text-danger"],[1,"col-span-12",2,"margin-top","-12px"],[1,"text-xs","text-pending","font-medium"],[1,"btn-text-primary","font-medium",3,"click"]],template:function(t,i){1&t&&e.YNc(0,jc,25,20,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[M.sg,M.O5,p._Y,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT,co],encapsulation:2}),n})();function Er(n,o){if(1&n&&(e.TgZ(0,"option",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.code)," ")}}function Mr(n,o){if(1&n&&(e.TgZ(0,"optgroup",11),e.ALo(1,"mytranslate"),e.YNc(2,Er,3,4,"option",12),e.qZA()),2&n){const t=o.$implicit;e.s9C("label",e.lcZ(1,2,t.groupName)),e.xp6(2),e.Q6J("ngForOf",t.purposeListInGroup)}}function Ir(n,o){1&n&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_choose_purpose_exam")," "))}function Dc(n,o){1&n&&(e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_purpose_create_exam")," "))}function Nc(n,o){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"label",15),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",16),e._UZ(6,"input",17),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,Dc,3,3,"div",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_enter_create_exam_target")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(7,5,"lang_testbank_enter_create_exam_target")+" ..."),e.xp6(2),e.Q6J("ngIf",(4==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value)||8==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value)||12==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value))&&""===(null==t.form.controls.purposeNote||null==t.form.controls.purposeNote.value?null:t.form.controls.purposeNote.value.trim()))}}function Qc(n,o){if(1&n&&(e.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"select",6)(9,"option",7),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.YNc(12,Mr,3,4,"optgroup",8),e.qZA(),e.YNc(13,Ir,3,3,"div",9),e.qZA(),e.YNc(14,Nc,9,7,"div",10),e.qZA()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(5),e.hij(" ",e.lcZ(7,7,"lang_testbank_target_exam")," "),e.xp6(3),e.Q6J("selected",0==t.form.controls.purposeExam.value),e.xp6(1),e.hij("---",e.lcZ(11,9,"lang_testbank_choose_purpose"),"---"),e.xp6(2),e.Q6J("ngForOf",t.targetExamGroupObjs),e.xp6(1),e.Q6J("ngIf",0==t.form.controls.purposeExam.value),e.xp6(1),e.Q6J("ngIf",4==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value)||8==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value)||12==(null==t.form.controls.purposeExam?null:t.form.controls.purposeExam.value))}}let Lr=(()=>{class n extends W.Q{constructor(){super(),this.purposeList=[],this.targetExamGroupObjs=[]}convertPurposeList(){this.targetExamGroupObjs=[],this.purposeList.forEach(t=>{const{semester:i}=t;let a=this.targetExamGroupObjs.find(s=>s.semester===i);a||(a={semester:i,groupName:this.getGroupNamePurpose(t.semester??1),purposeListInGroup:[]},this.targetExamGroupObjs.push(a)),a.purposeListInGroup?.push(t)})}getGroupNamePurpose(t){switch(t){case 1:default:return"lang_testbank_semester_one";case 2:return"lang_testbank_semester_two";case 3:return"lang_testbank_another_purpose"}}ngOnInit(){this.convertPurposeList()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-purpose-exam"]],inputs:{form:"form",purposeList:"purposeList"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["id","azt-config-purpose-exam",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"font-medium"],[1,"form-label","flex","items-center"],["formControlName","purposeExam",1,"form-select"],["value","0","disabled","",3,"selected"],[3,"label",4,"ngFor","ngForOf"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","col-span-12",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-2","text-danger","text-xs"],["for","enter_target_create_exam",1,"form-label","flex","items-center"],[1,"setting-input"],["id","enter_target_create_exam","formControlName","purposeNote","type","text",1,"form-control",3,"placeholder"]],template:function(t,i){1&t&&e.YNc(0,Qc,15,11,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[M.sg,M.O5,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],encapsulation:2}),n})();function qc(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Fc(n,o){1&n&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function Uc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10)(14,"div",12),e._UZ(15,"input",13),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,Fc,3,3,"div",14),e.qZA()(),e.TgZ(18,"div",15)(19,"config-level-subject",16),e.NdJ("sendLogPredictSubject",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.getLogPredictSubject(a))})("idSubjectInLevel",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.checkSubjectIdInList(a))}),e.qZA()(),e.TgZ(20,"div",17),e._UZ(21,"config-purpose-exam",18),e.qZA(),e.TgZ(22,"div",19)(23,"div",10)(24,"label",20),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()(),e.TgZ(27,"div",10)(28,"div",12),e._UZ(29,"textarea",21),e.ALo(30,"mytranslate"),e.qZA()()()(),e.TgZ(31,"div",22)(32,"div",23)(33,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleDestroy())}),e._uU(34),e.ALo(35,"mytranslate"),e.qZA(),e.TgZ(36,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSubmitData())}),e._uU(37),e.ALo(38,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.hij(" ",e.lcZ(6,18,"lang_auto_cau_hinh_chung")," "),e.xp6(6),e.hij(" ",e.lcZ(12,20,"lang_auto_ten")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(16,22,"lang_auto_nhap_ten")+" ..."),e.xp6(2),e.Q6J("ngIf",t.form.controls.generalTitle.errors),e.xp6(2),e.Q6J("form",t.form)("questionContents",t.questionContent)("showPredictSchoolSubject",!0)("schoolLevelObjs",t.schoolLevelObjs)("schoolSubjectObjs",t.schoolSubjectObjs)("examSchoolLogObj",t.examSchoolLogObj),e.xp6(2),e.Q6J("purposeList",t.listPurposeObjs)("form",t.form),e.xp6(4),e.hij(" ",e.lcZ(26,24,"lang_auto_mo_ta")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(30,26,"lang_auto_nhap_ten")+" ..."),e.xp6(5),e.hij(" ",e.lcZ(35,28,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid||0==t.form.controls.schoolLevel.value||0==t.form.controls.schoolSubject.value||(4==t.form.controls.purposeExam.value||8==t.form.controls.purposeExam.value||12==t.form.controls.purposeExam.value)&&""===(null==t.form.controls.purposeNote.value?null:t.form.controls.purposeNote.value.trim())||!t.isSubjectIdInList),e.xp6(1),e.hij(" ",e.lcZ(38,30,"lang_auto_luu")," ")}}function Rc(n,o){if(1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"span"),e._UZ(4,"span",30),e._uU(5,"\xa0"),e.qZA(),e.TgZ(6,"div",31),e._uU(7),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(7),e.Oqu(t.logConfig.msg)}}let Pr=(()=>{class n extends W.Q{constructor(t,i,a,s,r,l,c,d,f,y){super(),this.formBuilder=t,this.editorOutputDataService=i,this.activeRoute=a,this.questionService=s,this.examService=r,this.userService=l,this.questionSaveService=c,this.documentConfigService=d,this.partQuestionSearchTextService=f,this.dataAztMathRawHelper=y,this.onBack=new e.vpe,this.logConfig={},this.cur_cateId=0,this.backToLink="",this.form=new p.nJ({}),this.dataSave={},this.newListUrls=[],this.base64ContentCount=0,this.countProcess=0,this.actionRunAfterConvert=[],this.saveParts=[],this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.questionContent=[],this.listPurposeObjs=[],this.isSubjectIdInList=!0,this.predictLogRequestObj={predictSchoolSubjectId:0,acceptPredictStatus:0,predictByTotalQuestion:0},this.questionSaveService.callbackBase64ToCanvas=(O,N)=>{let I=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${I} ${Math.floor(O/N*100*.7)}%`},this.questionSaveService.callbackUploadImage=(O,N)=>{let I=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${I} ${Math.floor(O/N*100*.3)+70}%`}}ngOnInit(){this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.dataSave=this.editorOutputDataService.getOutputData(),this.questionContent=[],this.dataSave.exam?.questionObj.listQuestions?.forEach((a,s)=>{s<25&&this.questionContent.push(this.partQuestionSearchTextService.partQuestionSearchTextByQuestionForm(a))}),this.GetSubjectAndLevel(),this.form=this.formBuilder.group({generalTitle:new p.p4(this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??"",[p.kI.required,Ai._.noWhiteSpace]),generalDescription:new p.p4(""),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required]),purposeExam:new p.p4(0,[p.kI.required,p.kI.min(1)]),purposeNote:new p.p4("")}),super.ngOnInit()}processSaveQuestions(t,i,a){if(this.dataSave.exam?.questionObj&&this.dataSave.exam?.questionObj.listQuestions){var s=this.dataSave.exam?.questionObj.listQuestions.length;let r=t+100>s?s:t+100,l=this.dataSave.exam?.questionObj.listQuestions.slice(t,r)??[],c=[];for(const d of l)c.push({categoryId:d.categoryId,groupId:d.groupId,name:d.name??"none",metadata:d.metadata,isImage:d.isImage,questionContent:d.questionContent,answerMedia:d.answerMedia,questionText:d.questionText,answerType:d.answerType,answerConfig:d.answerConfig,coordinates:d.coordinates,answerResult:d.answerResult,totalQuestion:d.totalQuestion,tags:d.tags??[],mediaId:d.mediaId,mediaMeta:d.mediaMeta,attachments:d.attachments,version:d.version,isFixAns:d.isFixAns,groupType:d.groupType,__path:d.__path});c.length>0?this.saveQuestionObjs(c,i).then(d=>{if(d.examConfigs&&d.examConfigs.length>0){let f=a.concat(d.examConfigs);this.processSaveQuestions(r,d.indexSaved,f)}else this.countProcess=0,this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai")}):this.saveExamObj(a)}}saveExamObj(t){if(this.dataSave.exam){let a=!1;this.saveParts=this.saveParts.map(c=>{const d=c.split("_____");return-1!==c.toLocaleLowerCase().indexOf(this.commonService.myTranslateInstant("lang_auto_ngau_nhien")??"ng\u1eabu nhi\xean")&&(a=!0),1===d.length?d[0]:d[1]});let s=this.commonService.getFormObj(this.form),r=this.userService.getUserObj(),l=JSON.stringify({type:"exam",id:0,user:r.id});if(0==s.purposeExam)return void this.showErrorSnack("lang_testbank_please_choose_purpose_exam");this.dataSave.exam.examObj.scoringMethod="1",this.dataSave.exam.examObj.name=s.generalTitle,this.dataSave.exam.examObj.examConfigs=JSON.stringify(t),this.dataSave.exam.examObj.description=s.generalDescription,this.dataSave.exam.examObj.editorStatus=2,this.dataSave.exam.examObj.metadata=JSON.stringify(this.saveParts),this.dataSave.exam.examObj.isRandomExam=a,this.dataSave.exam.examObj.schoolLevelId=s.schoolLevel,this.dataSave.exam.examObj.schoolSubjectId=s.schoolSubject,this.dataSave.exam.examObj.purposeId=s.purposeExam,this.dataSave.exam.examObj.purposeNote=s.purposeNote,this.examService.apiExamSaveObjPost({id:this.dataSave.exam.examObj.id??0,categoryId:this.dataSave.exam.examObj.categoryId,scoringMethod:this.dataSave.exam.examObj.scoringMethod,name:this.dataSave.exam.examObj.name??"",description:this.dataSave.exam.examObj.description,examConfigs:this.dataSave.exam.examObj.examConfigs,suggestions:this.dataSave.exam.examObj.suggestions,labelsUrl:this.dataSave.exam.examObj.labelsUrl,abcdLabelPos:this.dataSave.exam.examObj.abcdLabelPos,questionLabelMap:this.dataSave.exam.examObj.questionLabelMap,firstInGroupIndexes:this.dataSave.exam.examObj.firstInGroupIndexes,totalExam:this.dataSave.exam.examObj.totalExam??0,cdnExamFile:this.dataSave.exam.examObj.cdnExamFile,cdnEditorFile:this.dataSave.exam.examObj.cdnEditorFile,trackEdit:this.dataSave.exam.examObj.trackEdit,examHeader:this.dataSave.exam.examObj.examHeader,expandInfoObj:this.dataSave.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:this.dataSave.exam.examObj.editorStatus,startQuestionIndex:this.dataSave.exam.examObj.startQuestionIndex,metadata:this.dataSave.exam.examObj.metadata,isRandomExam:this.dataSave.exam.examObj.isRandomExam,schoolLevelId:this.dataSave.exam.examObj.schoolLevelId,schoolSubjectId:this.dataSave.exam.examObj.schoolSubjectId,purposeId:this.dataSave.exam.examObj.purposeId,purposeNote:this.dataSave.exam.examObj.purposeNote,predictLogRequestObj:this.predictLogRequestObj},l).subscribe(c=>{if(this.logConfig.status=!1,this.logConfig.msg=void 0,1===c.success){const d=c.data?.obj;this.backToLink=`/admin/testbank/azota-editor/${null!=this.cur_cateId?this.cur_cateId:0}`,window.location=this.commonService.getLocalRouter(`/admin/testbank/action-online-offline/${null!=this.cur_cateId?this.cur_cateId:0}/${d?.hashId}?backto=${this.backToLink}&isNewDocument=1`)}})}}convertSaveQuestion(t){return new Promise((i,a)=>{const s=new U.Q(3);t.forEach(r=>{s.addTask(this.dataAztMathRawHelper,this.dataAztMathRawHelper.encodeQuestion,[r])}),s.start().then(r=>{0===r.errs.length?i(r.datas):a(r.errs[0])})})}saveQuestionObjs(t,i){return new Promise(a=>{this.convertSaveQuestion(t).then(s=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:s}).subscribe(r=>{if(this.dataSave.exam&&1===r.success&&r.data?.objs){const l=[];r.data.objs.forEach((c,d)=>{const f=this.dataSave.exam?.examConfig.find(O=>O.name==c.name);if(l.push({id:c.id,name:c.name,groupId:c.groupId,scorePerQuestion:f?.point||1,totalQuestion:1,sort:d+i}),s[d]){const O=s[d];if(O.__path&&O.__path.length>0){const N=O.__path.split("=>")[0].trim();this.saveParts.includes(N)||this.saveParts.push(N)}else this.saveParts.push(`[@Q${c.id}: C\xe2u ${d+i+1}]`)}}),a({indexSaved:r.data?.objs?.length+i,examConfigs:l})}else a({indexSaved:i,examConfigs:[]})})}).catch(()=>{a({indexSaved:i,examConfigs:[]})})})}startMainProcessSave(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestions(0,0,[])}handleSubmitData(){if(this.logConfig.status)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.logConfig.status=!0,this.logConfig.msg=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi")??"",this.countProcess=0,this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){const t=this.dataSave.exam.questionObj.listQuestions;let i=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionSaveService.convertQuestions(t,this.dataSave.exam.rootQuests,(a,s=i,r)=>{this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack(s),r&&this.stopStatusObj()}).then(()=>{this.startMainProcessSave()})}}handleDestroy(){this.onBack.emit()}GetSubjectAndLevel(){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(t=>{1==t.success?(this.examSchoolLogObj=t.data?.examSchoolLogObj,this.schoolLevelObjs=t.data?.schoolLevelObjs??[],this.schoolSubjectObjs=t.data?.schoolSubjectObjs??[],this.getListPurposeExam()):this.errorStatusObj(t.message??"")}))}getListPurposeExam(){this.initStatusObj(),this.subscriptions.add(this.examService.apiExamListExamPurposesGet().subscribe(t=>{1===t.success?(this.listPurposeObjs=t.data?.objs??[],this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}getLogPredictSubject(t){this.predictLogRequestObj=t}checkSubjectIdInList(t){this.isSubjectIdInList=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(De),e.Y36(T.gz),e.Y36(Ve.aE),e.Y36(Ve.Oe),e.Y36(Qe.K),e.Y36(Ge),e.Y36(Ve.Cq),e.Y36(Lc.p),e.Y36(Lo.n))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-info-general"]],outputs:{onBack:"onBack"},features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","generalTitle","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","questionContents","showPredictSchoolSubject","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj","sendLogPredictSubject","idSubjectInLevel"],[1,"mt-2"],[3,"purposeList","form"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","generalDescription",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"mt-5"],[1,"text-right"],["azt-track-service","info-general-j9RyDEucWp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","info-general-ZAzZ6aTX1b",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"mt-2","text-danger","text-xs","fade"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(t,i){if(1&t&&(e.YNc(0,qc,1,0,"azt-loading-effect",0),e.YNc(1,Uc,39,32,"ng-template",null,1,e.W1O),e.YNc(3,Rc,8,1,"div",2)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.logConfig.status)}},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,jt.Q,Bt.M,Ga,Lr,re.bT],encapsulation:2}),n})();var xa=S(82481),Bc=S(29921),$n=S(49671),Zo=S(6990),zc=S(62180),Jc=S(9315),Es=S(27921),Po=S(37398);let ba=(()=>{class n{constructor(t){this.data=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-content-example-dialog"]],decls:21,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["mat-dialog-close","",1,"btn","w-24","btn-outline-secondary","mr-2"],["azt-track-service","confirm-dialog-PXYIKWeh7vE","cdkFocusInitial","",1,"btn","w-24","btn-primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(10,"div",8)(11,"p",9),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()(),e.TgZ(14,"div",10)(15,"button",11),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"button",12),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(8),e.hij(" ",e.lcZ(9,5,i.data.title)," "),e.xp6(4),e.hij(" ",e.lcZ(13,7,i.data.msg)," "),e.xp6(4),e.hij(" ",e.lcZ(17,9,"lang_auto_dong")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(20,11,"lang_auto_xac_nhan")," "))},dependencies:[j.ZT,re.bT],encapsulation:2}),n})();var va=S(36028),Oi=S(22557),vn=S(30617);function Hc(n,o){1&n&&(e.TgZ(0,"mat-icon",15),e._uU(1,"cancel"),e.qZA())}function jr(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip-row",13),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.remove(s))}),e._uU(1),e.YNc(2,Hc,2,0,"mat-icon",14),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("removable",i.removable),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",i.removable)}}let Dr=(()=>{class n extends W.Q{add(t){const i=(t.value||"").trim();i&&i.split("|").forEach(s=>{this.data.answers.push(s.trim())}),t.input.value=""}remove(t){const i=this.data.answers.indexOf(t);i>=0&&this.data.answers.splice(i,1)}notification(){this.showSuccessSnack("lang_auto_cap_nhap_dap_an_thanh_cong")}constructor(t,i){super(),this.data=t,this.commonService=i,this.separatorKeysCodes=[va.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.WI),e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-answer-question"]],features:[e.qOj],decls:28,vars:27,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],[1,"info"],["appearance","outline",1,"example-chip-list",2,"margin-top","10px"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"text-right","mt-3"],["azt-track-service","dialog-answer-question-SsxKRDN6kND",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","dialog-answer-question-1MY4eREqFzD","cdkFocusInitial","","color","warn",1,"btn","w-24","btn-primary",3,"mat-dialog-close","click"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"span",5),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"mat-form-field",6)(12,"mat-label"),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"mat-chip-grid",null,7),e.ALo(17,"mytranslate"),e.YNc(18,jr,3,3,"mat-chip-row",8),e.TgZ(19,"input",9),e.NdJ("matChipInputTokenEnd",function(s){return i.add(s)}),e.ALo(20,"mytranslate"),e.qZA()()()(),e.TgZ(21,"div",10)(22,"button",11),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"button",12),e.NdJ("click",function(){return i.notification()}),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(16);e.xp6(5),e.hij(" ",e.lcZ(6,13,"lang_auto_cai_dat_cau_tra_loi_cho_cau_hoi_dien_tu")," "),e.xp6(4),e.hij(" ",e.lcZ(10,15,"lang_auto_answer_question_desc_dot")," "),e.xp6(4),e.Oqu(e.lcZ(14,17,"lang_auto_danh_sach_dap_an_duoc_cong_nhan")),e.xp6(2),e.uIk("aria-label",e.lcZ(17,19,"lang_auto_dap_an_duoc_cong_nhan")),e.xp6(3),e.Q6J("ngForOf",i.data.answers),e.xp6(1),e.s9C("placeholder",e.lcZ(20,21,"lang_auto_them_dap_an_duoc_cong_nhan")+" ..."),e.Q6J("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(24,23,"lang_auto_huy")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(27,25,"lang_auto_luu")," ")}},dependencies:[M.sg,M.O5,Oi.RA,Oi.oH,Oi.qH,Oi.z3,j.ZT,vn.Hw,Kn.KE,Kn.hX,re.bT],encapsulation:2}),n})();const Nr={a:"rgb(0, 0, 255, 0.2)",b:"rgb(255, 165, 0, 0.2)",c:"rgb(0, 128, 0, 0.2)",d:"rgb(128, 0, 128, 0.2)",e:"rgb(255, 255, 0, 0.2)",f:"rgb(0, 0, 255, 0.2)",g:"rgb(0, 128, 0, 0.2)",h:"rgb(128, 0, 128, 0.2)"},Qr={A:"B",B:"C",C:"D",D:"E",E:"F",F:"G",G:"H"},li=100;let Ms=(()=>{class n{getErrorQtns(t){var i=[];for(let a=0;a<t.length;a++)!t[a].isGroup&&0==t[a].answers.length&&(t[a].strAns&&void 0!==t[a].strAns||i.push(t[a].num));return i}sumHighTo(t,i){let a=0,s=i.filter(r=>!r.inactive);for(let r=0;r<t;r++)a+=Math.round(s[r].heigh);return a}maxWidthTo(t,i){let a=[],s=i.filter(r=>!r.inactive);for(let r=0;r<t;r++)a.push(s[r].width);return Math.round(Math.max(...a))}constructor(t,i){this.commonService=t,this.http=i,this.fillColor=(a,s,r,l,c,d)=>{s.fillStyle=a,s.fillRect(Math.round(r),Math.round(l),Math.round(c),Math.round(d))},this.drawRect=(a,s,r,l,c,d)=>{s.beginPath(),s.lineWidth=1,s.strokeStyle=a,s.rect(Math.round(r),Math.round(l),Math.round(c),Math.round(d)),s.stroke()},this.getSingleImgData=(a,s)=>{if(a.inactive){let r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(r),new Error(r)}try{let r=document.createElement("canvas");return r.width=0==a.width?2:Math.round(a.width),r.height=0==a.heigh?2:Math.round(a.heigh),r.getContext("2d")?.drawImage(s[a.pageIndex].canvas,Math.round(a.left),Math.round(a.top),r.width,r.height,0,0,r.width,r.height),r.toDataURL("image/png")}catch(r){return console.log(r),"https://via.placeholder.com/300"}},this.getScatteredImgData=(a,s)=>{const r=a.filter(c=>!c.inactive);if(a.filter(c=>c.inactive).length==a.length){let c=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(c),new Error(c)}try{let c=document.createElement("canvas"),d=r.map(O=>O.width);c.width=Math.round(Math.max(...d));let f=0;for(let O=0;O<r.length;O++)f+=r[O].heigh;c.height=Math.round(f);let y=c.getContext("2d");for(let O=0;O<r.length;O++)y?.drawImage(s[r[O].pageIndex].canvas,Math.round(r[O].left),Math.round(r[O].top),Math.round(r[O].width),Math.round(r[O].heigh),0,0==O?0:this.sumHighTo(O,r),Math.round(r[O].width),Math.round(r[O].heigh));return c.toDataURL("image/png")}catch(c){return console.log(c),"https://via.placeholder.com/300"}}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var $c=S(56375),$o=S(46825),Fr=S(68749),Ur=S(55344),Va=S(24630),Di=S(32296),Yc=S(75986),uo=S(55940);let Gc=(()=>{class n{constructor(t){this.ref=t}onInput(t){if(""!=t.target.value){let i=t.target.selectionStart,a=t.target.selectionEnd;if(t.target.value=t.target.value.replace(/[^\d.,]/g,""),""==t.target.value&&(t.target.value="0"),t.target.value.includes(",")&&(t.target.value=t.target.value.replace(",",".")),t.target.setSelectionRange(i,a),t.preventDefault(),!this.lastValue||this.lastValue&&t.target.value.length>0&&this.lastValue!==t.target.value){this.lastValue=this.ref.nativeElement.value=t.target.value;const s=document.createEvent("HTMLEvents");s.initEvent("input",!1,!0),t.target.dispatchEvent(s)}}else t.target.value=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","appReplaceCommas",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(s){return i.onInput(s)})}}),n})();var Vi=S(81373);const Rr=["myDialogSplitPoint"];function Wc(n,o){if(1&n&&(e.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",23),e._UZ(8,"input",24),e.qZA()()(),e.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",23),e._UZ(16,"input",26),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,4,"lang_auto_tong_diem_trac_nghiem")),e.xp6(3),e.Q6J("decimal",!0),e.xp6(5),e.Oqu(e.lcZ(14,6,"lang_auto_so_cau_trac_nghiem")),e.xp6(3),e.Q6J("value",null==t.data||null==t.data.obj?null:t.data.obj.multipleQuestion)}}function Vc(n,o){if(1&n&&(e.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",27),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",23),e._UZ(8,"input",28),e.qZA()()(),e.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",23),e._UZ(16,"input",26),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,4,"lang_auto_tong_diem_dien_tu")),e.xp6(3),e.Q6J("decimal",!0),e.xp6(5),e.Oqu(e.lcZ(14,6,"lang_auto_so_cau_dien_tu")),e.xp6(3),e.Q6J("value",null==t.data||null==t.data.obj?null:t.data.obj.fillQuestion)}}function Xc(n,o){if(1&n&&(e.TgZ(0,"div",29)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",23),e._UZ(8,"input",30),e.qZA()()(),e.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",23),e._UZ(16,"input",31),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,4,"lang_auto_tong_diem_tu_luan")),e.xp6(3),e.Q6J("decimal",!0),e.xp6(5),e.Oqu(e.lcZ(14,6,"lang_auto_so_cau_tu_luan")),e.xp6(3),e.Q6J("value",null==t.data||null==t.data.obj?null:t.data.obj.essayQuestion)}}function L(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onGlobalClick(a))}),e.TgZ(1,"div",5,6)(3,"div",7)(4,"h2",8),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",7)(8,"div",9)(9,"div",10)(10,"div",11)(11,"p",12),e._uU(12),e.ALo(13,"mytranslate"),e.ALo(14,"number"),e.ALo(15,"numberFloat"),e.ALo(16,"numberFloat"),e.ALo(17,"numberFloat"),e.qZA()()(),e.TgZ(18,"form",13),e.YNc(19,Wc,17,8,"div",14),e.YNc(20,Vc,17,8,"div",14),e.YNc(21,Xc,17,8,"div",15),e.qZA()()(),e.TgZ(22,"div",16)(23,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.btnCloseDialog(!1))}),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.setPointData())}),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,10,"lang_auto_chia_diem")),e.xp6(7),e.AsE("",e.lcZ(13,12,"lang_auto_tong_diem"),": ",e.xi3(14,14,e.lcZ(15,17,t.form.controls.multiplePoint.value)+e.lcZ(16,19,t.form.controls.fillPoint.value)+e.lcZ(17,21,t.form.controls.essayPoint.value),"1.0-2"),""),e.xp6(6),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",null==t.data||null==t.data.obj?null:t.data.obj.multipleQuestion),e.xp6(1),e.Q6J("ngIf",null==t.data||null==t.data.obj?null:t.data.obj.fillQuestion),e.xp6(1),e.Q6J("ngIf",null==t.data||null==t.data.obj?null:t.data.obj.essayQuestion),e.xp6(3),e.hij(" ",e.lcZ(25,23,"lang_auto_dong")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(28,25,"lang_auto_chia")," ")}}let Z=(()=>{class n extends W.Q{onKeydownHandler(t){this.closeDialog.emit()}onGlobalClick(t){this.myDialog?.nativeElement.contains(t.target)||this.closeDialog.emit()}btnCloseDialog(t){t?this.closeDialog.emit(t):this.closeDialog.emit()}changeMultipPoint(t){this.multiplePoint=t.target.value}changeEssayPoint(t){this.essayPoint=t.target.value}changeFillPoint(t){this.fillPoint=t.target.value}setPointData(){let t=this.commonService.getFormObj(this.form),i=Number(t.multiplePoint),a=Number(t.essayPoint),s=Number(t.fillPoint);isNaN(i)&&(i=0),isNaN(a)&&(a=0),isNaN(s)&&(s=0);let r={multiplePoint:i.toString(),essayPoint:a.toString(),fillPoint:s.toString()};this.setPoint.emit(r)}ngOnInit(){this.form=this.fb.group(this.data?.obj?.essayQuestion?{multiplePoint:new p.p4(10,[p.kI.required,p.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new p.p4(0,[p.kI.required,p.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),fillPoint:new p.p4(0,[p.kI.required,p.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}:{multiplePoint:new p.p4(10,[p.kI.required,p.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new p.p4(0),fillPoint:new p.p4(0,[p.kI.required,p.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}),this.form.patchValue({multiplePoint:this.data?.obj?.multiplePoint,essayPoint:this.data?.obj?.essayPoint,fillPoint:this.data?.obj?.fillPoint}),super.ngOnInit()}constructor(t){super(),this.fb=t,this.closeDialog=new e.vpe,this.setPoint=new e.vpe,this.form=new p.nJ({}),this.essayPoint="",this.multiplePoint="",this.fillPoint=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-split-point"]],viewQuery:function(t,i){if(1&t&&e.Gf(Rr,5),2&t){let a;e.iGM(a=e.CRH())&&(i.myDialog=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.escape",function(s){return i.onKeydownHandler(s)},!1,e.evT)},inputs:{data:"data"},outputs:{closeDialog:"closeDialog",setPoint:"setPoint"},features:[e.qOj],decls:4,vars:1,consts:[[1,"school-info_bg"],[1,"school-info","p-4",2,"border-radius","0.375rem"],[1,"modal-dialog","modal-lg"],["azt-track-service","azt-split-point-riLhb0Qv5Oo","class","modal-content",3,"click",4,"ngIf"],["azt-track-service","azt-split-point-riLhb0Qv5Oo",1,"modal-content",3,"click"],[1,"modal-body"],["myDialogSplitPoint",""],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"block-body"],[1,"row","mt-2"],[1,"col-md-12"],["for","total-point",1,"mr-2"],[1,"form-horizontal",3,"formGroup"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-dWuy_TsMB",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-gBtzvDfAHf",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"row"],[1,"flex","mt-2",2,"justify-content","space-between"],[1,"col-9"],["for","multiple-point"],[1,"col-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","multiplePoint",1,"input-point",3,"decimal"],["for",""],["type","number","readonly","",1,"input-point",3,"value"],["for","fill-point"],["type","text","appOnlyNumber","","id","fill-point","formControlName","fillPoint",1,"input-point",3,"decimal"],[1,"row","mt-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","essayPoint",1,"input-point",3,"decimal"],["type","text","readonly","",1,"input-point",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,L,29,27,"div",3),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",null==i.data?null:i.data.isShow))},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Vi.Y,Bt.M,M.JJ,re.bT,re.Hb],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:800px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();const F=["myDialogExamInfo"];function B(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_tong_so_cau_trac_nghiem")),e.xp6(3),e.Oqu(null==t.examInfo.listMultiple?null:t.examInfo.listMultiple.length),e.xp6(2),e.Oqu(null==t.examInfo.listMultiple?null:t.examInfo.listMultiple.join(", "))}}function G(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_tong_so_cau_tu_luan")),e.xp6(3),e.Oqu(null==t.examInfo.listEssay?null:t.examInfo.listEssay.length),e.xp6(2),e.Oqu(null==t.examInfo.listEssay?null:t.examInfo.listEssay.join(", "))}}function ie(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_cau_trac_nghiem_dien_tu")),e.xp6(3),e.Oqu(null==t.examInfo.listFill?null:t.examInfo.listFill.length),e.xp6(2),e.Oqu(null==t.examInfo.listFill?null:t.examInfo.listFill.join(", "))}}function le(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_cau_trac_nghiem_co_"+t.key+"_dap_an")),e.xp6(3),e.Oqu(t.value.length),e.xp6(2),e.Oqu(t.value.join(", "))}}function ge(n,o){if(1&n&&(e.ynx(0),e.YNc(1,le,8,5,"tr",10),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.value?null:t.value.length)}}function ke(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onGlobalClick(a))}),e.TgZ(1,"div",2,3)(3,"div")(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"p",7),e._uU(10),e.ALo(11,"mytranslate"),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",8)(16,"table",9)(17,"tr")(18,"th"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"mytranslate"),e.qZA(),e.TgZ(24,"th"),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()(),e.YNc(27,B,8,5,"tr",10),e.YNc(28,G,8,5,"tr",10),e.YNc(29,ie,8,5,"tr",10),e.YNc(30,ge,2,1,"ng-container",11),e.ALo(31,"keyvalue"),e.qZA()(),e.TgZ(32,"div",12)(33,"div",13)(34,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.btnCloseDialog(!1))}),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,12,"lang_auto_chi_tiet_de_thi")),e.xp6(5),e.hij(" ",e.lcZ(11,14,"lang_auto_tong_so_cau_cua_de")," : "),e.xp6(3),e.AsE("",t.examInfo.totalQuestion," ",e.lcZ(14,16,"lang_auto_cau"),""),e.xp6(6),e.Oqu(e.lcZ(20,18,"lang_auto_thong_tin")),e.xp6(3),e.Oqu(e.lcZ(23,20,"lang_auto_so_cau")),e.xp6(3),e.Oqu(e.lcZ(26,22,"lang_auto_danh_sach_cac_cau")),e.xp6(2),e.Q6J("ngIf",null==t.examInfo.listMultiple?null:t.examInfo.listMultiple.length),e.xp6(1),e.Q6J("ngIf",null==t.examInfo.listEssay?null:t.examInfo.listEssay.length),e.xp6(1),e.Q6J("ngIf",null==t.examInfo.listFill?null:t.examInfo.listFill.length),e.xp6(1),e.Q6J("ngForOf",e.lcZ(31,24,t.examInfo.listQuestionWithTotalAnswer)),e.xp6(5),e.Oqu(e.lcZ(36,26,"lang_auto_dong"))}}let Ie=(()=>{class n extends W.Q{constructor(t){super(),this.answerTypeService=t,this.startIndexQuestion=1,this.data={},this.type="edit",this.closeDialog=new e.vpe,this.questionObjs=[],this.examInfo={}}onKeydownHandler(t){this.closeDialog.emit()}onGlobalClick(t){this.myDialog?.nativeElement.contains(t.target)||this.closeDialog.emit()}btnCloseDialog(t){this.closeDialog.emit(t)}initData(){this.questionObjs=this.data.obj??[],this.filterQuestion()}filterQuestion(){if(this.examInfo.listEssay=[],this.examInfo.listMultiple=[],this.examInfo.listFill=[],this.examInfo.listQuestionWithTotalAnswer={},"edit"==this.type){let t=0;this.questionObjs.forEach(i=>{t++,this.answerTypeService.isEssayAnswer(i.answerType)?null!=i.rawIndex&&this.examInfo.listEssay?.push(i.rawIndex+this.startIndexQuestion):null!=i.rawIndex&&!this.answerTypeService.isFillAnswer(i.answerType)&&this.examInfo.listMultiple?.push(i.rawIndex+this.startIndexQuestion),this.answerTypeService.isFillAnswer(i.answerType)&&null!=i.rawIndex&&this.examInfo.listFill?.push(i.rawIndex+this.startIndexQuestion),(this.answerTypeService.isOneChoiceAnswer(i.answerType)||this.answerTypeService.isMultipleChoiceAnswer(i.answerType))&&i.answers&&null!=i.rawIndex&&this.countTotalAnswerOfQuestion(i.answers.length,i.rawIndex+this.startIndexQuestion)}),this.examInfo.totalQuestion=t}if("createPDF"==this.type){let t=0;this.questionObjs.forEach(i=>{1==i.tempData.isSelect&&(t++,this.answerTypeService.isEssayAnswer(i.tempData.answerType)?null!=i.index&&this.examInfo.listEssay?.push(i.index+this.startIndexQuestion):null!=i.index&&!this.answerTypeService.isFillAnswer(i.tempData.answerType)&&this.examInfo.listMultiple?.push(i.index+this.startIndexQuestion),this.answerTypeService.isFillAnswer(i.tempData.answerType)&&null!=i.index&&this.examInfo.listFill?.push(i.index+this.startIndexQuestion),(this.answerTypeService.isOneChoiceAnswer(i.tempData.answerType)||this.answerTypeService.isMultipleChoiceAnswer(i.tempData.answerType))&&i.answers&&null!=i.index&&this.countTotalAnswerOfQuestion(i.answers.length,i.index+this.startIndexQuestion))}),this.examInfo.totalQuestion=t}if("createDocx"==this.type){let t=0;this.questionObjs.forEach(i=>{t++,this.answerTypeService.isEssayAnswer(i.typeQuestion)?null!=i.numberQuestion&&this.examInfo.listEssay?.push(i.numberQuestion):null!=i.numberQuestion&&!this.answerTypeService.isFillAnswer(i.typeQuestion)&&this.examInfo.listMultiple?.push(i.numberQuestion),this.answerTypeService.isFillAnswer(i.typeQuestion)&&null!=i.numberQuestion&&this.examInfo.listFill?.push(i.numberQuestion),(this.answerTypeService.isOneChoiceAnswer(i.typeQuestion)||this.answerTypeService.isMultipleChoiceAnswer(i.typeQuestion))&&i.answers&&null!=i.numberQuestion&&this.countTotalAnswerOfQuestion(i.answers.length,i.numberQuestion)}),this.examInfo.totalQuestion=t}}countTotalAnswerOfQuestion(t,i){this.examInfo.listQuestionWithTotalAnswer&&(this.examInfo.listQuestionWithTotalAnswer?.hasOwnProperty(t)||(this.examInfo.listQuestionWithTotalAnswer[t]=[]),this.examInfo.listQuestionWithTotalAnswer[t].push(i))}ngOnInit(){this.initData(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36($o.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-exam-info"]],viewQuery:function(t,i){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(i.myDialog=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.escape",function(s){return i.onKeydownHandler(s)},!1,e.evT)},inputs:{startIndexQuestion:"startIndexQuestion",data:"data",type:"type"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:1,vars:1,consts:[["azt-track-service","azt-exam-info-HVPPdz9Jrco","class","school-info_bg",3,"click",4,"ngIf"],["azt-track-service","azt-exam-info-HVPPdz9Jrco",1,"school-info_bg",3,"click"],[1,"school-info","box","px-4","py-4"],["myDialogExamInfo",""],[1,"text-base","font-medium","mr-auto"],[1,"intro"],[1,"block-main"],[1,"text-right","mb-2"],[1,"table-responsive","table-height"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","mt-3",2,"justify-content","flex-end"],[1,"azt-block-button"],["azt-track-service","azt-exam-info-MSBs6dcNIww",1,"btn","btn-secondary",3,"click"]],template:function(t,i){1&t&&e.YNc(0,ke,37,28,"div",0),2&t&&e.Q6J("ngIf",null==i.data?null:i.data.isShow)},dependencies:[M.sg,M.O5,M.Nd,re.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:600px;width:950px;margin-left:auto;margin-right:auto}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.block-text[_ngcontent-%COMP%]{margin-bottom:15px}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.btn-icon[_ngcontent-%COMP%]{background:transparent;color:#333;border:none;display:flex;align-items:center;text-transform:inherit;padding:0;transition:all .3s}.btn-icon[_ngcontent-%COMP%]:hover{color:#2361ae}.block-show[_ngcontent-%COMP%]{background:#f4f5f7;border-radius:5px;margin-top:5px;padding:10px;max-width:100%;height:0;transition:opacity .3s;overflow:hidden;opacity:0;visibility:hidden;display:none}.show-active[_ngcontent-%COMP%]{display:block;height:auto;overflow:auto;opacity:1;visibility:visible}.table-height[_ngcontent-%COMP%]{height:350px;overflow:auto}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();var ze=S(86294),Ue=S(61625);function Ne(n,o){1&n&&(e.TgZ(0,"div",10),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cropper_edit_explain_error"),"\n"))}function nt(n,o){1&n&&e._UZ(0,"azt-loading-effect")}let et=(()=>{class n{constructor(t,i,a){this.commonService=t,this.activeRoute=i,this.dialog=a,this.headerPosition={},this.listQuestion=[],this.listCanvas=[],this.applyEdit=new e.vpe,this.listOriginalQuestion=[],this.originalHeaderPostion={},this.loadingAssets=!1,this.isApplying=!1}addHeaderPiece(){let t=document.createElement("div");t.setAttribute("class","box-crop-info header-piece"),t.dataInfo=this.headerPosition,t.style.width=this.headerPosition.width+"px",t.style.height=this.headerPosition.heigh+"px",t.style.left=this.headerPosition.left+"px",t.style.top=this.headerPosition.top+"px";let i=this.headerPosition.pageIndex;document.getElementById("canvas_edit_page_"+i)?.appendChild(t),this.addInteractiveElement(t)}processInfo(){this.addHeaderPiece();for(let t=0;t<this.listQuestion.length;t++){for(let r=0;r<this.listQuestion[t].positions.length;r++){const l=this.listQuestion[t].positions[r];let c=document.createElement("div");if(c.setAttribute("class",`box-crop-info question-piece question-piece-of-${t}`),l.inactive&&c.classList.add("inactive"),c.dataInfo=l,c.style.width=l.width+"px",c.style.height=l.heigh+"px",c.style.left=l.left+"px",c.style.top=l.top+"px",0==r){let y=document.createElement("div");if(y.setAttribute("class",`question-stt question-stt-${t} clickable`),y.textContent=`#${t+1}`,c.appendChild(y),!this.listQuestion[t].isGroup){let O=document.createElement("div");O.setAttribute("class",`question-ans-add question-ans-add-${t} clickable`),O.textContent="+",O.addEventListener("click",()=>{const N=this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].label;let I=document.createElement("div");I.setAttribute("class",`answer-append box-crop-info answer-piece answer-piece-${Qr[N].toLowerCase()}`);let z=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");I.setAttribute("tittle",z);let $={...this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0],left:this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0].left+this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0].width};I.style.width=$.width+"px",I.style.height=$.heigh+"px",I.style.top=$.top+"px",I.style.left=$.left+"px",I.style.backgroundColor=Nr[Qr[N].toLowerCase()],I.dataInfo=$;let Y=document.getElementById("canvas_edit_page_"+$.pageIndex);Y?.appendChild(I),this.addInteractiveElement(I);let V=document.createElement("div");V.setAttribute("class","box-crop-info answer-label"),V.setAttribute("tittle",z);let te={...this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].remove,left:$.left,top:$.top};V.style.width=te.width+"px",V.style.height=te.heigh+"px",V.style.top=te.top+"px",V.style.left=te.left+"px",V.dataInfo=te,Y?.appendChild(V),this.addInteractiveElement(V)}),c.appendChild(O)}}let d=l.pageIndex;document.getElementById("canvas_edit_page_"+d)?.appendChild(c),this.addInteractiveElement(c)}let i=document.createElement("div");i.setAttribute("class","box-crop-info question-label"),i.dataInfo=this.listQuestion[t].remove,i.style.width=this.listQuestion[t].remove.width+"px",i.style.height=this.listQuestion[t].remove.heigh+"px",i.style.left=this.listQuestion[t].remove.left+"px",i.style.top=this.listQuestion[t].remove.top+"px",this.listQuestion[t].answers.forEach(r=>{r.positions.forEach(f=>{let y=document.createElement("div");y.setAttribute("class",`box-crop-info ${!0===f.inactive?"inactive":""} answer-piece answer-piece-${r.label.toLowerCase()}`);let O=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");y.setAttribute("tittle",O),y.inactive&&y.classList.add("inactive"),y.dataInfo=f,y.style.width=f.width+"px",y.style.height=f.heigh+"px",y.style.left=f.left+"px",y.style.top=f.top+"px",y.style.backgroundColor=Nr[r.label.toLowerCase()];let N=f.pageIndex;document.getElementById("canvas_edit_page_"+N)?.appendChild(y),this.addInteractiveElement(y)});let l=document.createElement("div");l.setAttribute("class","box-crop-info answer-label"),l.dataInfo=r.remove,l.style.width=r.remove.width+"px",l.style.height=r.remove.heigh+"px",l.style.left=r.remove.left+"px",l.style.top=r.remove.top+"px";let c=r.remove.pageIndex;document.getElementById("canvas_edit_page_"+c)?.appendChild(l),this.addInteractiveElement(l)});let a=this.listQuestion[t].remove.pageIndex;document.getElementById("canvas_edit_page_"+a)?.appendChild(i),this.addInteractiveElement(i)}}processRender(){for(let t=0;t<this.listCanvas.length;t++){const i=this.listCanvas[t];let a=document.createElement("div");a.setAttribute("id","canvas_edit_page_"+t),a.classList.add("mb-3"),a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.position="relative",a.style.margin="0 auto",a.style.boxShadow="3px 2px 3px 2px #ccc";let s=document.createElement("canvas"),r=document.createElement("span");r.textContent=`Page ${t+1} of ${this.listCanvas.length}`,r.style.position="absolute",r.style.bottom="10px",r.style.right="10px",r.style.fontSize="12px",r.style.color="#ccc",s.width=i.width,s.height=i.height,a.appendChild(s),a.appendChild(r),s.getContext("2d")?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height),document.getElementById("boxEdit")?.appendChild(a);let c=document.getElementById("tipsTrick");c&&(c.style.width=i.width+"px")}}dragMoveListener(t){let i=t.target,a=(parseFloat(i.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(i.getAttribute("data-y"))||0)+t.dy;i.style.top=s+"px",i.style.left=a+"px",i.setAttribute("data-x",a),i.setAttribute("data-y",s),i.dataInfo.left=parseInt(i.style.left),i.dataInfo.top=parseInt(i.style.top)}get invalidPositionsData(){let t=!1;for(let i=0;i<this.listQuestion.length;i++){if(this.listQuestion[i].remove.inactive){t=!0;break}if(this.listQuestion[i].positions.length==this.listQuestion[i].positions.filter(l=>l.inactive).length){t=!0;break}for(let l=0;l<this.listQuestion[i].answers.length;l++)if(this.listQuestion[i].answers[l].positions.length==this.listQuestion[i].answers[l].positions.filter(f=>f.inactive).length){t=!0;break}}return t}addInteractiveElement(t){t.setAttribute("data-x",parseInt(t.style.left)),t.setAttribute("data-y",parseInt(t.style.top)),interact(t).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(i){var a=i.target,s=parseFloat(a.getAttribute("data-x"))||0,r=parseFloat(a.getAttribute("data-y"))||0;a.style.width=i.rect.width+"px",a.style.height=i.rect.height+"px",s+=i.deltaRect.left,a.style.top=(r+=i.deltaRect.top)+"px",a.style.left=s+"px",a.setAttribute("data-x",s),a.setAttribute("data-y",r),a.dataInfo.width=parseInt(a.style.width),a.dataInfo.heigh=parseInt(a.style.height),a.dataInfo.left=parseInt(a.style.left),a.dataInfo.top=parseInt(a.style.top)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:10}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}).on("doubletap",function(i){i.currentTarget.dataInfo.inactive?(i.currentTarget.dataInfo.inactive=!1,i.currentTarget.classList.remove("inactive")):(i.currentTarget.dataInfo.inactive=!0,i.currentTarget.classList.add("inactive")),console.log(i.currentTarget.dataInfo),i.preventDefault()})}handleApply(){this.isApplying=!0,setTimeout(()=>{this.applyEdit.emit({headerPos:this.headerPosition,listQuestion:this.listQuestion})},2e3)}handleCancel(){confirm("Nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb m\u1ea5t, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn?")&&this.applyEdit.emit("")}ngOnInit(){this.listQuestion.length>0&&(this.listOriginalQuestion=Zo.cloneDeep(this.listQuestion),this.originalHeaderPostion=Zo.cloneDeep(this.headerPosition)),this.processRender(),this.processInfo(),this.loadingAssets=!0}ngAfterViewInit(){window.dragMoveListener=this.dragMoveListener}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v),e.Y36(T.gz),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cropper-edit"]],inputs:{headerPosition:"headerPosition",listQuestion:"listQuestion",listCanvas:"listCanvas",examHeader:"examHeader"},outputs:{applyEdit:"applyEdit"},decls:19,vars:18,consts:[["style","position: fixed; top: 5px; left: 5px; right: 5px; font-size: 20px; z-index: 9999;","class","alert alert-danger p-2 text-center",4,"ngIf"],["id","mainEditArea",3,"hidden"],["id","buttonArea"],[1,"bb-holder","p-3"],["azt-track-service","cropper-edit-eys6rwcK5W","id","buttonApplys",1,"btn","btn-primary","mr-2",3,"disabled","click"],["azt-track-service","cropper-edit-zfl8meDVvX","id","buttonCancels",1,"btn","btn-secondary",3,"click"],["id","tipsTrick",1,"alert","box","p-2","mt-2","text-center",2,"margin-left","auto","margin-right","auto"],[2,"font-weight","500"],["id","boxEdit"],[4,"ngIf"],[1,"alert","alert-danger","p-2","text-center",2,"position","fixed","top","5px","left","5px","right","5px","font-size","20px","z-index","9999"]],template:function(t,i){1&t&&(e.YNc(0,Ne,3,3,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.handleApply()}),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return i.handleCancel()}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",6)(12,"b",7),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e._UZ(17,"div",8),e.qZA(),e.YNc(18,nt,1,0,"azt-loading-effect",9)),2&t&&(e.Q6J("ngIf",i.invalidPositionsData),e.xp6(1),e.Q6J("hidden",!i.loadingAssets),e.xp6(3),e.Q6J("disabled",i.isApplying),e.xp6(1),e.hij(" ",i.isApplying?e.lcZ(6,8,"lang_testbank_create_exam_width_file_pdf_cropper_edit_loading_apply"):e.lcZ(7,10,"lang_testbank_create_exam_width_file_pdf_cropper_edit_apply")," "),e.xp6(4),e.Oqu(e.lcZ(10,12,"lang_buttom_cancel")),e.xp6(4),e.hij("",e.lcZ(14,14,"lang_testbank_create_exam_width_file_pdf_cropper_edit_tips"),": "),e.xp6(2),e.hij("",e.lcZ(16,16,"lang_testbank_create_exam_width_file_pdf_cropper_edit_note_tip")," "),e.xp6(3),e.Q6J("ngIf",!i.loadingAssets))},dependencies:[M.O5,jt.Q,re.bT],styles:["#mainEditArea[_ngcontent-%COMP%]{width:1200px;margin:0 auto}#mainEditArea[_ngcontent-%COMP%]   #buttonArea[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),n})();var bt=S(30251);const an=["hiddenInput"],Dt=["iframePdf"],Vt=["resizeBar"],Xt=["boxLeftFile"],ot=["parentResize"],Xe=["maskLayer"],wt=function(n){return{color:n}};function Yn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"div"),e._uU(2,"Trang "),e.TgZ(3,"input",50),e.NdJ("keyup.enter",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.handleEnterPage(a))})("ngModelChange",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.currentPage=a)}),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("prev"))}),e.ALo(6,"mytranslate"),e._uU(7,"chevron_left"),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"mat-icon",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("next"))}),e.ALo(11,"mytranslate"),e._uU(12,"chevron_right"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.currentPage),e.xp6(1),e.hij(" / ",t.totalPage,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(6,8,"lang_auto_trang_truoc")),e.Q6J("ngStyle",e.VKq(12,wt,t.topLazyLoad?"inherit":"#595959")),e.xp6(4),e.AsE("",t.startChunkIndex+1,"-",t.startChunkIndex+t.lazyLoadSize>t.questionList.length-1?t.questionList.length:t.startChunkIndex+t.lazyLoadSize,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(11,10,"lang_auto_trang_sau")),e.Q6J("ngStyle",e.VKq(14,wt,t.bottomLazyLoad?"inherit":"#595959"))}}function Gn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showAllHelp())}),e.ALo(1,"mytranslate"),e._uU(2," help "),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_show_view_all_explain"))}function jo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showAllHelp())}),e.ALo(1,"mytranslate"),e._uU(2," help_outlined "),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_hide_view_all_explain"))}function xi(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",55),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.handleClickOption(s.index))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t.index+i.startQuestion),e.xp6(1),e.hij(" ",t.index+i.startQuestion," ")}}function mo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"mat-checkbox",33),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,Yn,13,16,"div",34),e.TgZ(7,"div")(8,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDialogSpitPoint())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",36),e.YNc(12,Gn,3,3,"mat-icon",37),e.YNc(13,jo,3,3,"mat-icon",38),e.TgZ(14,"mat-icon",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openExamInfoDialog())}),e.ALo(15,"mytranslate"),e._uU(16,"info_outline"),e.qZA()(),e.TgZ(17,"div",40)(18,"span"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"form",41)(22,"input",42),e.NdJ("keyup.enter",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handleEnterQuestion(a))}),e.qZA(),e.TgZ(23,"mat-autocomplete",43,44),e.YNc(25,xi,2,2,"mat-option",45),e.ALo(26,"async"),e.qZA()()(),e._UZ(27,"input",46,47),e.TgZ(29,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editting=!0)}),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()}if(2&n){const t=e.MAs(24),i=e.oxw(2);e.xp6(2),e.MGl("matTooltip","",e.lcZ(3,13,"lang_testbank_create_exam_width_file_pdf_note_tutorial_Proofreading"),"."),e.Q6J("formControl",i.debuggingMode),e.xp6(2),e.Oqu(e.lcZ(5,15,"lang_testbank_create_exam_width_file_pdf_Proofreading")),e.xp6(2),e.Q6J("ngIf",i.questionList.length>i.limitLazyLoad),e.xp6(3),e.Oqu(e.lcZ(10,17,"lang_split_points")),e.xp6(3),e.Q6J("ngIf",!i.isShowAllHelp),e.xp6(1),e.Q6J("ngIf",i.isShowAllHelp),e.xp6(1),e.s9C("matTooltip",e.lcZ(15,19,"lang_auto_chi_tiet_de_thi")),e.xp6(5),e.hij("",e.lcZ(20,21,"lang_testbank_create_exam_width_file_pdf_go_to"),": "),e.xp6(3),e.Q6J("formControl",i.myControl)("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",e.lcZ(26,23,i.filteredOptions)),e.xp6(5),e.Oqu(e.lcZ(31,25,"lang_buttom_edit"))}}function Xi(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(2),e.hij("",t,"\xa0")}}function Yo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",56)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",58),e.YNc(6,Xi,3,1,"ng-container",59),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.TgZ(9,"div",60)(10,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showNote=!1)}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_unrecognizable_one")," "),e.xp6(3),e.Q6J("ngForOf",t.errorQuestions),e.xp6(1),e.hij(" ",e.lcZ(8,6,"lang_testbank_create_exam_width_file_pdf_unrecognizable_twe"),". "),e.xp6(4),e.Oqu(e.lcZ(12,8,"lang_testbank_create_exam_width_file_pdf_understood"))}}function ya(n,o){1&n&&(e.TgZ(0,"span",65),e._uU(1,",\xa0"),e.qZA())}function Go(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"b",63),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4);let l;return e.KtG(r.goToQuestionAll(null!==(l=s.index)&&void 0!==l?l:0))}),e.ALo(2,"mytranslate"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,ya,2,0,"span",64),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(4);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),e.xp6(2),e.AsE("",e.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",t.question.label,""),e.xp6(2),e.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function Wo(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"div",58),e.YNc(4,Go,6,8,"ng-container",59),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),e.xp6(3),e.Q6J("ngForOf",t.invalidTypeQuestionConfig)}}function wa(n,o){if(1&n&&(e.TgZ(0,"div",62)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,Wo,5,4,"ng-container",3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),e.xp6(2),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0)}}function eu(n,o){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.BQk()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cont_save"),"."))}function Up(n,o){if(1&n&&(e.TgZ(0,"div",62)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e.YNc(3,eu,3,3,"ng-container",3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.nameExamInp.value||""==t.nameExamInp.value.trim())}}function Rp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"div",67)(2,"div")(3,"mat-icon",68),e._uU(4,"cloud_upload"),e.qZA()(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div")(9,"azt-download-link-item",69),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.isMobileWebView?"":a.stopPropagation())}),e.ALo(10,"convertCdnLinkOfGitHubWithLocale"),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div")(13,"azt-download-link-item",69),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.isMobileWebView?"":a.stopPropagation())}),e.ALo(14,"convertCdnLinkOfGitHubWithLocale"),e.ALo(15,"mytranslate"),e.qZA()()()()}2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,11,"lang_tutorial_upload_file_exam")),e.xp6(3),e.Akn("color: #5c5c5c"),e.Q6J("dataUrl",e.lcZ(10,13,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",e.lcZ(11,15,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_click_vao_day_de_download_de_mau"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(14,17,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",e.lcZ(15,19,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_de_mau_azota_pdf"))}function Bp(n,o){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_exam_header_not_select")))}function zp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",74),e.YNc(1,Bp,3,3,"div",75),e.TgZ(2,"mat-icon",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.useHeader=!a.useHeader)}),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e._uU(5,"clear"),e.qZA(),e._UZ(6,"img",77),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.useHeader),e.xp6(1),e.Q6J("matTooltip",t.useHeader?e.lcZ(3,3,"lang_auto_xoa"):e.lcZ(4,5,"lang_auto_bo_xoa")),e.xp6(4),e.Q6J("src",t.examHeader,e.LSH)}}function Jp(n,o){1&n&&(e.TgZ(0,"div",103)(1,"mat-icon",57),e._uU(2,"error"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_cau_hoi_nay_khong_co_noi_dung_cac_dap_an_abcd_nen_dot")+"!"," "))}function Hp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",111),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.toggleRemoveAllGroup(a.group))}),e.ALo(1,"mytranslate"),e._uU(2,"clear"),e.qZA()}2&n&&e.Q6J("matTooltip",e.lcZ(1,1,"lang_auto_xoa_toan_bo_cau_hoi_trong_nhom"))}function Kp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",112),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw(3);return e.KtG(s.toggleRemoveAllGroup(a.group))}),e.ALo(1,"mytranslate"),e._uU(2,"clear"),e.qZA()}2&n&&e.Q6J("matTooltip",e.lcZ(1,1,"lang_auto_bo_xoa_toan_bo_cau_hoi_trong_nhom"))}function $p(n,o){1&n&&e._UZ(0,"div",78)}function Yp(n,o){1&n&&(e.TgZ(0,"div",113),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),e.xp6(2),e.Oqu(e.lcZ(3,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function Gp(n,o){1&n&&(e.TgZ(0,"div",114),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_mix"),"?"))}function Wp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",104),e.YNc(1,Hp,3,3,"mat-icon",105),e.YNc(2,Kp,3,3,"mat-icon",106),e.YNc(3,$p,1,0,"div",75),e.TgZ(4,"div",107),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.toggleMixInGroup(a.group))}),e.YNc(5,Yp,4,6,"div",108),e.YNc(6,Gp,3,3,"div",109),e._UZ(7,"img",110),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2),i=t.index,a=t.$implicit,s=e.oxw(3);e.Q6J("hidden",!s.firstInGroupIndexes.includes(i)),e.xp6(1),e.Q6J("ngIf",s.atLeastOneUse(a.group)),e.xp6(1),e.Q6J("ngIf",!s.atLeastOneUse(a.group)),e.xp6(1),e.Q6J("ngIf",!s.atLeastOneUse(a.group)),e.xp6(1),e.Gre("mb-2 img-group image_group_",a.group,""),e.xp6(1),e.Q6J("ngIf",a.groupType),e.xp6(1),e.Q6J("ngIf",!a.groupType),e.xp6(1),e.s9C("matTooltip",a.groupType?e.lcZ(8,11,"lang_testbank_create_exam_width_file_pdf_click_mix_question"):e.lcZ(9,13,"lang_testbank_create_exam_width_file_pdf_click_pin_question")),e.s9C("src",a.groupUrl,e.LSH)}}function Vp(n,o){1&n&&(e.TgZ(0,"div",78),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_question_not_select")))}const tu=function(n,o){return{"width.%":n,"height.%":o}};function Xp(n,o){if(1&n&&(e.TgZ(0,"div",122)(1,"div",123),e._UZ(2,"img",124)(3,"img",117),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.xp6(2),e.Q6J("ngStyle",e.WLB(4,tu,t.remove.width/i.question.width*100,t.remove.height/i.question.height*100))("src",t.remove.url,e.LSH),e.xp6(1),e.Q6J("ngStyle",e.WLB(7,tu,t.width/i.question.width*100,t.height/i.question.height*100))("src",t.url,e.LSH)}}function eh(n,o){if(1&n&&(e.TgZ(0,"div",115)(1,"div",116),e._UZ(2,"img",117),e.qZA(),e.TgZ(3,"div",118),e._UZ(4,"img",119),e.qZA(),e.TgZ(5,"div",120),e.YNc(6,Xp,4,10,"div",121),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngStyle",e.WLB(6,tu,t.question.remove.width/t.question.width*100,t.question.remove.height/t.question.height*100))("src",t.question.remove.url,e.LSH),e.xp6(2),e.Q6J("width",t.question.width)("height",t.question.height)("src",t.question.url,e.LSH),e.xp6(2),e.Q6J("ngForOf",t.answers)}}function th(n,o){1&n&&e._UZ(0,"div",78)}function nh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",127),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3).$implicit,l=e.oxw(3);return e.KtG(l.changeAnswerResult(r,s.label))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.Q6J("ngClass",i.tempData.answerResult.includes(t.label)?"btn-ans-result":""),e.xp6(1),e.Oqu(t.label)}}function ih(n,o){if(1&n&&(e.TgZ(0,"div",125)(1,"span",95),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,nh,2,2,"span",126),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"lang_testbank_create_exam_width_file_pdf_answer"),": "),e.xp6(2),e.Q6J("ngForOf",t.answers)}}function oh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",128)(1,"span",129),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,s=e.oxw(3);return e.KtG(s.setupFillAnswersQuestion(a))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_create_exam_width_file_pdf_enter_add_answer")," "))}function ah(n,o){1&n&&(e.TgZ(0,"b"),e._uU(1,"\u25b2"),e.qZA())}function sh(n,o){1&n&&(e.TgZ(0,"mat-icon",99),e.ALo(1,"mytranslate"),e._uU(2,"shuffle"),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_keep_stable_answer"))}function rh(n,o){1&n&&(e.TgZ(0,"mat-icon",99),e.ALo(1,"mytranslate"),e._uU(2,"shuffle_on"),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_tutorial_click_mix_question"))}function lh(n,o){1&n&&(e.ynx(0),e._uU(1,"\xa0|\xa0"),e.BQk())}function ch(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.YNc(3,lh,2,0,"ng-container",3),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(4).$implicit;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",i<a.tempData.answerResult.length-1)}}function uh(n,o){if(1&n&&(e.TgZ(0,"div",132),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,ch,4,2,"ng-container",59),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_list_answer"),": "),e.xp6(2),e.Q6J("ngForOf",t.tempData.answerResult)}}function dh(n,o){1&n&&(e.TgZ(0,"div",133)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_answer")," "))}function mh(n,o){1&n&&(e.TgZ(0,"div",133)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_point")," "))}function _h(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"a",134),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_not_identification_answer"),". "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_xem_huong_dan")," "))}function ph(n,o){1&n&&(e.TgZ(0,"div",133)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_note_quizzes")," "))}function hh(n,o){1&n&&(e.TgZ(0,"div",133)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_enter_max_point")," "))}function gh(n,o){1&n&&(e.TgZ(0,"div",133)(1,"mat-icon",57),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_select_answer")," "))}function fh(n,o){if(1&n&&(e.TgZ(0,"div",137),e._UZ(1,"img",138),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(1),e.Q6J("src",t.help.url,e.LSH)}}function xh(n,o){1&n&&(e.TgZ(0,"div",139),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_data_explain")))}function bh(n,o){if(1&n&&(e.ynx(0),e.YNc(1,fh,2,1,"div",135),e.YNc(2,xh,3,3,"ng-template",null,136,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",i.help.url)("ngIfElse",t)}}function vh(n,o){if(1&n&&(e.ynx(0),e.YNc(1,uh,4,4,"div",130),e.ALo(2,"isFillAnswer"),e.YNc(3,dh,5,3,"div",131),e.ALo(4,"isFillAnswer"),e.YNc(5,mh,5,3,"div",131),e.YNc(6,_h,8,6,"div",130),e.YNc(7,ph,5,3,"div",131),e.ALo(8,"isOneChoiceAnswer"),e.YNc(9,hh,5,3,"div",131),e.YNc(10,gh,5,3,"div",131),e.ALo(11,"isOneChoiceAnswer"),e.YNc(12,bh,4,2,"ng-container",3),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.tempData.answerResult.length>0&&e.lcZ(2,8,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",0==t.tempData.answerResult.length&&e.lcZ(4,10,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",!t.tempData.point&&!i.isFullNoPoint),e.xp6(1),e.Q6J("ngIf",t.answers.length>0&&1==t.answers[0].width&&1==t.answers[0].height),e.xp6(1),e.Q6J("ngIf",t.answers.length<2&&e.lcZ(8,12,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",t.tempData.point<0),e.xp6(1),e.Q6J("ngIf",0==t.tempData.answerResult.length&&e.lcZ(11,14,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",t.tempData.isShowHelp)}}function yh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",144),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).index,s=e.oxw(3);return e.KtG(s.clickUploadFile(a))}),e.TgZ(1,"div",128)(2,"mat-icon",68),e._uU(3,"cloud_upload"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"lang_testbank_create_exam_width_file_pdf_attach_file_audio")),e.xp6(3),e.hij("",e.lcZ(9,4,"lang_testbank_create_exam_width_file_docx_click_choose_audio"),"."))}function wh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",147)(1,"audio",148),e._UZ(2,"source",149),e.ALo(3,"mycdn"),e._uU(4," Your browser does not support the audio element. "),e.qZA(),e.TgZ(5,"span",150),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4).$implicit;return e.KtG(a.tempData.questionMedia=[])}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.url),e.LSH),e.xp6(4),e.hij(" ",e.lcZ(7,4,"lang_auto_xoa")," ")}}function Ch(n,o){if(1&n&&(e.TgZ(0,"div",145),e.YNc(1,wh,8,6,"div",146),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngForOf",t.tempData.questionMedia)}}function kh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",140)(1,"input",141),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.uploadFileQuestion(s,a))}),e.qZA(),e.YNc(2,yh,10,6,"div",142),e.YNc(3,Ch,2,1,"div",143),e.qZA()}if(2&n){const t=e.oxw(2),i=t.index,a=t.$implicit;e.xp6(1),e.Q6J("id","inputFileQuestion_"+i),e.xp6(1),e.Q6J("ngIf",0===a.tempData.questionMedia.length),e.xp6(1),e.Q6J("ngIf",a.tempData.questionMedia.length>0)}}function Th(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",81),e.YNc(1,Jp,5,3,"div",82),e.ALo(2,"isOneChoiceAnswer"),e.YNc(3,Wp,10,15,"div",83),e.TgZ(4,"div",84)(5,"mat-icon",85),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,s=e.oxw(3);return e.KtG(s.changeSelectTempData(a))}),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e._uU(8,"clear"),e.qZA(),e.YNc(9,Vp,3,3,"div",75),e.YNc(10,eh,7,9,"div",86),e.qZA(),e.TgZ(11,"div",87)(12,"div",88),e.YNc(13,th,1,0,"div",75),e.TgZ(14,"div",89)(15,"span",90),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"select",91),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.changeTypeQuestion(s,a))}),e.TgZ(19,"option",92),e.ALo(20,"isOneChoiceAnswer"),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"option",92),e.ALo(24,"isFillAnswer"),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"option",92),e.ALo(28,"isEssayAnswer"),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()(),e.YNc(31,ih,5,4,"div",93),e.ALo(32,"isOneChoiceAnswer"),e.YNc(33,oh,4,3,"div",94),e.ALo(34,"isFillAnswer"),e.TgZ(35,"div",89)(36,"span",95),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.TgZ(39,"input",96),e.NdJ("input",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.changeQuestionPoint(s,a))}),e.qZA()(),e.TgZ(40,"mat-icon",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.toggleViewHelp(a))}),e.ALo(41,"mytranslate"),e.ALo(42,"mytranslate"),e._uU(43),e.qZA(),e.TgZ(44,"span",98),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.tempData.isShowAttach=!a.tempData.isShowAttach)}),e.TgZ(45,"mat-icon",99),e.ALo(46,"mytranslate"),e._uU(47,"attachment"),e.qZA(),e.YNc(48,ah,2,0,"b",3),e.qZA(),e.TgZ(49,"span",100),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.toogleMixAns(a))}),e.YNc(50,sh,3,3,"mat-icon",101),e.YNc(51,rh,3,3,"mat-icon",101),e.qZA()()(),e.YNc(52,vh,13,16,"ng-container",3),e.YNc(53,kh,4,3,"div",102),e.qZA()}if(2&n){const t=e.oxw(),i=t.index,a=t.$implicit,s=e.oxw(3);e.uIk("id","box-questions-item-"+i),e.xp6(1),e.Q6J("ngIf",0==a.answers.length&&e.lcZ(2,31,a.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",a.groupUrl),e.xp6(2),e.Q6J("matTooltip",a.tempData.isSelect?e.lcZ(6,33,"lang_auto_xoa"):e.lcZ(7,35,"lang_auto_bo_xoa")),e.xp6(4),e.Q6J("ngIf",!a.tempData.isSelect),e.xp6(1),e.Q6J("ngIf",s.debuggingMode.value),e.xp6(2),e.Q6J("ngClass","")("ngClass","border-result"),e.xp6(1),e.Q6J("ngIf",!a.tempData.isSelect),e.xp6(3),e.Oqu(e.lcZ(17,37,"lang_testbank_create_exam_width_file_pdf_question")+" "+a.question.label),e.xp6(3),e.Q6J("value",1)("selected",e.lcZ(20,39,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(22,41,"lang_testbank_create_exam_width_file_pdf_select_answer")),e.xp6(2),e.Q6J("value",4)("selected",e.lcZ(24,43,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(26,45,"lang_testbank_create_exam_width_file_pdf_enter_blank")),e.xp6(2),e.Q6J("value",3)("selected",e.lcZ(28,47,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(30,49,"lang_testbank_create_exam_width_file_docx_essay")),e.xp6(2),e.Q6J("ngIf",e.lcZ(32,51,a.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",e.lcZ(34,53,a.tempData.answerType)),e.xp6(4),e.hij("",e.lcZ(38,55,"lang_point"),": "),e.xp6(2),e.Q6J("value",a.tempData.point.toString().length>8?a.tempData.point.toFixed(8):a.tempData.point),e.xp6(1),e.s9C("matTooltip",a.tempData.isShowHelp?e.lcZ(41,57,"lang_testbank_create_exam_width_file_pdf_hide_view_explain"):e.lcZ(42,59,"lang_testbank_create_exam_width_file_pdf_show_view_explain")),e.xp6(3),e.hij(" ",a.tempData.isShowHelp?"help":"help_outlined"," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(46,61,"lang_testbank_create_exam_width_file_pdf_attach_file_question")),e.xp6(3),e.Q6J("ngIf",a.tempData.isShowAttach),e.xp6(2),e.Q6J("ngIf",1==a.isFixAns),e.xp6(1),e.Q6J("ngIf",0==a.isFixAns),e.xp6(1),e.Q6J("ngIf",a.tempData.isSelect),e.xp6(1),e.Q6J("ngIf",!0===a.tempData.isShowAttach)}}function Ah(n,o){if(1&n&&(e.TgZ(0,"div",79),e.YNc(1,Th,54,63,"div",80),e.qZA()),2&n){const t=o.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i.questionList.length<=i.limitLazyLoad||t>=i.startChunkIndex&&t<i.startChunkIndex+i.lazyLoadSize)}}function Oh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",151)(1,"div"),e._uU(2,"Trang "),e.TgZ(3,"input",50),e.NdJ("keyup.enter",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.handleEnterPage(a))})("ngModelChange",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.currentPage=a)}),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("prev"))}),e.ALo(6,"mytranslate"),e._uU(7,"chevron_left"),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"mat-icon",153),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("next"))}),e.ALo(11,"mytranslate"),e._uU(12,"chevron_right"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.currentPage),e.xp6(1),e.hij(" / ",t.totalPage,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(6,8,"lang_auto_trang_truoc")),e.Q6J("ngStyle",e.VKq(12,wt,t.topLazyLoad?"inherit":"#595959")),e.xp6(4),e.AsE("",t.startChunkIndex+1,"-",t.startChunkIndex+t.lazyLoadSize>t.questionList.length-1?t.questionList.length:t.startChunkIndex+t.lazyLoadSize,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(11,10,"lang_auto_trang_sau")),e.Q6J("ngStyle",e.VKq(14,wt,t.bottomLazyLoad?"inherit":"#595959"))}}function Sh(n,o){if(1&n&&(e.TgZ(0,"div",70),e.YNc(1,zp,7,7,"div",71),e.YNc(2,Ah,2,1,"div",72),e.YNc(3,Oh,13,16,"div",73),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.examHeader),e.xp6(1),e.Q6J("ngForOf",t.questionList),e.xp6(1),e.Q6J("ngIf",t.questionList.length>t.limitLazyLoad)}}function Eh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",154),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e._uU(4),e.ALo(5,"mytranslate"),e._UZ(6,"br"),e.TgZ(7,"mat-icon",155),e._uU(8,"report"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"span",156),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetBoxExamQuestions("tryOther"))}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_testbank_create_exam_width_file_pdf_not_analysis_exam"),". "),e.xp6(3),e.hij(" ",e.lcZ(5,5,"lang_testbank_create_exam_width_file_pdf_contact_admin"),". "),e.xp6(7),e.Oqu(e.lcZ(12,7,"lang_testbank_create_exam_width_file_pdf_create_exam")))}function Mh(n,o){if(1&n&&(e.TgZ(0,"div",162)(1,"span",163),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t)}}function Ih(n,o){if(1&n&&(e.TgZ(0,"div",157)(1,"div",158)(2,"div",159),e._UZ(3,"mat-spinner",160),e.qZA(),e.YNc(4,Mh,3,1,"div",161),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("strokeWidth",2)("diameter",30),e.xp6(1),e.Q6J("ngForOf",t.arrStatusFileExam)}}function Lh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",164)(1,"app-cropper-edit",165),e.NdJ("applyEdit",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.applyEditEvent(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("listQuestion",t.rootQuestionInfo)("headerPosition",t.rootHeaderPosition)("listCanvas",t.rootCanvases)}}const Zh=function(n){return{width:n}};function Ph(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"editor-layout",5),e.NdJ("handleConfirm",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.rxjsHandleSaveExam())})("handleCancel",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetBoxExamQuestions())}),e.TgZ(2,"div",6)(3,"div",7)(4,"div",8,9)(6,"div",10,11),e._UZ(8,"input",12),e.YNc(9,mo,32,27,"div",13),e.YNc(10,Yo,13,10,"div",14),e.YNc(11,wa,6,4,"div",15),e.YNc(12,Up,4,1,"div",15),e.TgZ(13,"div",16),e.YNc(14,Rp,16,21,"div",17),e._UZ(15,"div",18)(16,"div",19),e.YNc(17,Sh,4,3,"div",20),e.YNc(18,Eh,13,9,"div",21),e.qZA()(),e.TgZ(19,"div",22,23),e.NdJ("mousedown",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleMouseDown(a))}),e.qZA(),e.TgZ(21,"div",24,25),e._UZ(23,"div",26,27)(25,"iframe",28),e.ALo(26,"safe"),e.qZA()()(),e.YNc(27,Ih,5,3,"div",29),e.qZA()()(),e.YNc(28,Lh,2,3,"ng-template",30)}if(2&n){const t=e.oxw();e.Q6J("hidden",t.editting),e.xp6(1),e.Q6J("headerBackToLink",t.backToLink)("showInput",!0)("showConfirmButton",!0)("examName",t.nameExamInp),e.xp6(5),e.Q6J("ngStyle",e.VKq(19,Zh,t.notShowSourceFile?"100%":"calc(60% - 5px)")),e.xp6(3),e.Q6J("ngIf",t.questionList.length>0),e.xp6(1),e.Q6J("ngIf",t.errorQuestions.length>0&&t.showNote),e.xp6(1),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Q6J("ngIf",!t.nameExamInp.value||""==t.nameExamInp.value.trim()),e.xp6(2),e.Q6J("ngIf",!t.doneAllProccessTasks),e.xp6(3),e.Q6J("ngIf",t.questionList.length>0&&t.cropperDone),e.xp6(1),e.Q6J("ngIf",t.errAnalyzingPdf),e.xp6(3),e.Q6J("hidden",t.notShowSourceFile),e.xp6(4),e.Q6J("src",e.lcZ(26,17,t.examFileUrl),e.uOi),e.xp6(2),e.Q6J("ngIf",t.isShowLoadingFileExam),e.xp6(1),e.Q6J("ngIf",t.editting)}}function jh(n,o){if(1&n&&(e.TgZ(0,"div",166),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_your_current_browser")," ",""+t.currentBrowserInUsed,". ",e.lcZ(3,5,"lang_auto_no_support_browser"),"\n")}}function Dh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-split-point",167),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogSpitPoint())})("setPoint",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.setPointTest(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("data",t.dataSpitPoint)}}function Nh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-exam-info",168),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogExamInfo())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("startIndexQuestion",t.startQuestion)("data",t.dataExamInfo)("type","createPDF")}}const Is="exam_questions";let Qh=(()=>{class n extends W.Q{constructor(t,i,a,s,r,l,c,d,f,y,O,N,I,z,$){super(),this.cropperService=t,this.activeRoute=i,this.dialog=a,this.questionService=s,this.apiUploadService=r,this.userService=l,this.infoService=c,this.examService=d,this.configService=f,this.cdnService=y,this.answerTypeService=O,this.redirectService=N,this.editorOutputDataService=I,this.browserStorageService=z,this.deviceDetectorService=$,this.x=0,this.y=0,this.leftWidth=0,this.cropperDone=!1,this.startChunkIndex=0,this.currentPage=1,this.editting=!1,this.errAnalyzingPdf=!1,this.categoriesIdParram=+this.commonService.getMyParam(this.activeRoute,"cat_id"),this.examFileUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/file_placeholder.jpg"),this.version="v2.0",this.cur_cateId=0,this.backToLink="",this.nameExamInp=new p.p4(""+Date.now()),this.totalPoint=new p.p4(10),this.isChangePoint=!1,this.isMixture=!1,this.confirmTotalQuestionChange=!1,this.examConfigs=[],this.newQuestionArrSave=[],this.isChangeQuestionPoint=!1,this.isShowLoadingFileExam=!1,this.arrStatusFileExam=[],this.isShowAllHelp=!1,this.curGotoIndex=new p.p4(0),this.showNote=!0,this.debuggingMode=new p.p4(!0),this.message=[],this.errorQuestions=[],this.doneAllProccessTasks=!1,this.notShowSourceFile=!0,this.questionList=[],this.questionConfigList=[],this.rootQuestionInfo=[],this.rootCanvases=[],this.clonedCtxForCreate=[],this.labelHolderSize={width:3500,height:3500},this.labelsBase64s=[],this.labelsUrls=[],this.resultUploadBase64Labels=[],this.abcdLabelPos={},this.questionLabelMap=[],this.maxQuestionLabelHeight=0,this.examHeader="",this.useHeader=!0,this.selects=[],this.nextIndex=0,this.countGroup=0,this.groupImages={},this.groupLengths=[],this.firstInGroupIndexes=[],this.totalInGroupTracking=0,this.countSaveQuestion=0,this.cropPdfConfigParam="",this.countClickApplyEdit=0,this.dataSpitPoint={isShow:!1},this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.multiplePoint=10,this.essayPoint=0,this.fillPoint=0,this.dataExamInfo={isShow:!1},this.startQuestion=1,this.handleMouseUp=Y=>{this.maskLayer&&(this.maskLayer.nativeElement.style.width="0px"),this.resizeBar&&this.resizeBar.nativeElement.classList.remove("hover"),this.resizeBar?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.iframePdf?.nativeElement.style.removeProperty("user-select"),this.iframePdf?.nativeElement.style.removeProperty("pointer-events"),this.boxLeftFile?.nativeElement.style.removeProperty("user-select"),this.boxLeftFile?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=Y=>{if(this.parentResize&&this.iframePdf&&this.boxLeftFile){let V=this.iframePdf.nativeElement,te=this.boxLeftFile.nativeElement;const X=100*(this.leftWidth+(Y.clientX-this.x))/this.parentResize.nativeElement.getBoundingClientRect().width;te.style.width=`${X}%`,document.body.style.cursor="col-resize",V.style.userSelect="none",V.style.pointerEvents="none",te.style.userSelect="none",te.style.pointerEvents="none"}},this.myControl=new p.p4(this.startQuestion),this.handleSaveAllExam=()=>{let Y=this.commonService.myTranslateInstant("lang_auto_luu_xong_tat_ca_cau_hoi_vao_he_thong")??"",V=this.commonService.myTranslateInstant("lang_auto_dang_luu_thong_tin_de_thi")??"";this.arrStatusFileExam=[Y,`${V} ...`];let te=this.userService.getUserObj(),K=JSON.stringify({type:"exam",id:0,user:te.id});var X={id:0,categoryId:this.categoriesIdParram,scoringMethod:"1",name:this.nameExamInp.value,examConfigs:JSON.stringify(this.examConfigs),suggestions:JSON.stringify([]),labelsUrl:JSON.stringify(this.labelsUrls),abcdLabelPos:JSON.stringify(this.abcdLabelPos),questionLabelMap:JSON.stringify(this.questionLabelMap),firstInGroupIndexes:JSON.stringify(this.firstInGroupIndexes),totalExam:1,cdnExamFile:this.examFileUrl,trackEdit:this.countClickApplyEdit>0?JSON.stringify({countClickApplyEdit:this.countClickApplyEdit}):"",examHeader:this.examHeader,cutData:this.rootQuestionInfo,editorStatus:4,startQuestionIndex:this.questionList.length>0&&this.questionList[0].question.label>0?this.questionList[0].question.label:1};this.examService.apiExamSaveObjPost(X,K).subscribe(ye=>{if(1==ye.success){let ae=this.commonService.myTranslateInstant("lang_auto_luu_de_thi_thanh_cong_dang_chuyen_huong")??"";this.arrStatusFileExam=[`${ae} ...`],setTimeout(()=>{jQuery("html").css("overflow","auto");let oe=`/admin/testbank/document-management/0/${this.categoriesIdParram}/1`;this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+ye.data?.obj?.hashId,"?backto="+encodeURIComponent(oe))},1500)}else this.showErrorSnack("lang_auto_tao_de_thi_khong_thanh_cong_vui_long_thu_lai"),this.isShowLoadingFileExam=!1})}}get isSupportedBrowser(){let t=this.commonService.getBrowserType().toString();return!(!["chrome","firefox"].includes(t.split(" ")[0].toLowerCase())||parseInt(t.split(" ")[1])<75)}get currentBrowserInUsed(){let t="",i=this.commonService.myTranslateInstant("lang_auto_version");return this.deviceDetectorService.browser&&(t=this.deviceDetectorService.browser+i+this.deviceDetectorService.browser_version),t}atLeastOneUse(t){return this.questionList.filter(i=>i.group===t&&i.tempData.isSelect).length>0}changePage(t){"prev"==t&&(this.topLazyLoad?(this.startChunkIndex-=li,this.currentPage--):(this.startChunkIndex=0,this.currentPage=1)),"next"==t&&this.bottomLazyLoad&&(this.startChunkIndex+=li,this.currentPage++)}handleMouseDown(t){this.boxLeftFile&&(this.x=t.clientX,this.y=t.clientY,this.leftWidth=this.boxLeftFile.nativeElement.getBoundingClientRect().width,this.maskLayer&&(this.maskLayer.nativeElement.style.width="100%"),this.resizeBar&&this.resizeBar.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}_filter(t){return this.questionList}handleEnterQuestion(t){let i=t.target,a=parseInt(i.value);(a<1||a>this.questionList.length)&&(a=1,this.myControl.setValue(this.startQuestion)),this.questionList.length<=500?this.goToQuestionAll(a-1):1==a?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)):(this.currentPage=Math.ceil(a/li),this.startChunkIndex=(this.currentPage-1)*li,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)),i.blur(),this.hiddenInput&&this.hiddenInput.nativeElement.click()}handleEnterPage(t){let i=t.target,a=parseInt(i.value);a<1||a>this.totalPage?(this.startChunkIndex=0,this.currentPage=1):(this.startChunkIndex=(a-1)*li,this.currentPage=a),i.blur()}handleClickOption(t){if(t>=this.startChunkIndex&&t<this.startChunkIndex+li)this.goToQuestionAll(t);else{let i=t+1;1==i?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)):(this.currentPage=Math.ceil(i/li),this.startChunkIndex=(this.currentPage-1)*li,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3))}}get totalPage(){return Math.ceil(this.questionList.length/this.lazyLoadSize)}get topLazyLoad(){return this.questionList.length>500&&this.startChunkIndex-li>=0}get bottomLazyLoad(){return this.questionList.length>500&&this.startChunkIndex+li<=this.questionList.length-1}get placeholderLink(){return this.cdnService.convertCdnLinkOfGitHub("azota_assets/svgs/Img2_dat-01.svg")}get lazyLoadSize(){return li}get limitLazyLoad(){return 500}openManualDialog(t){this.dialog.open(qh,{width:"1000px",data:{fromButton:t},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.browserStorageService.saveStorage("_DONT_SHOW_MANUAL","OK")})}startProcessFile(t){this.nameExamInp.setValue(t.name),this.uploadFilePdf(t),this.processPdf(t)}ngOnInit(){this.isSupportedBrowser&&((0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id");var t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(i=>{this.cropPdfConfigParam=i.CROPPDF_PARAMS,this.loadingFileJs().then(a=>{if(a){const s=this.editorOutputDataService.getFirstFile();s?this.startProcessFile(s):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)),this.listeningDropFileExam()}})})}),this.filteredOptions=this.myControl.valueChanges.pipe((0,Es.O)(""),(0,Po.U)(t=>this._filter(t||""))))}ngOnDestroy(){jQuery("#hiddenWrapper").remove()}get totalNumberQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&!this.answerTypeService.isEssayAnswer(t.tempData.answerType)).length}get totalTrueFalseQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&this.answerTypeService.isOneChoiceAnswer(t.tempData.answerType)).length}get totalFillQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&this.answerTypeService.isFillAnswer(t.tempData.answerType)).length}get invalidTypeQuestionConfig(){return this.questionList.filter(t=>t.tempData.isSelect&&(t.tempData.point<0||!isFinite(t.tempData.point)||0==t.tempData.answerResult.length&&this.answerTypeService.isFillAnswer(t.tempData.answerType)||0==t.tempData.answerResult.length&&this.answerTypeService.isOneChoiceAnswer(t.tempData.answerType)||t.answers.length<2&&this.answerTypeService.isOneChoiceAnswer(t.tempData.answerType))||!t.tempData.point&&!this.isFullNoPoint)}get isFullNoPoint(){return this.questionList.filter(t=>!t.tempData.point).length===this.questionList.length}changeQuestionPoint(t,i){for(let a=0;a<this.questionList.length;a++)this.questionList[a].question.label===t.question.label&&(this.questionList[a].tempData.point=Number(i.target.value))}changeAnswerResult(t,i){t.tempData.answerResult=[i]}changeTypeQuestion(t,i){t.tempData.answerType=Number(i.target.value),4==Number(i.target.value)&&(t.tempData.answerResult=[])}uploadFileQuestion(t,i){var a=i.target.files[0];let s=this.commonService.myTranslateInstant("lang_auto_dang_tai_len_tep_tin_dinh_kem_cho_cau_hoi");if(!0===(0,J.Wg)(a.type))this.arrStatusFileExam=[`${s}  (0%)`],this.isShowLoadingFileExam=!0,this.apiUploadService.uploadToCdnProgressForExamQuestionContent(a).subscribe(r=>{if(r.type!=C.dt.UploadProgress)if(1==r.success){t.tempData.questionMedia.push(r.data);let l=this.commonService.myTranslateInstant("lang_auto_tai_len_thanh_cong")??"";this.arrStatusFileExam=[l],this.isShowLoadingFileExam=!1}else this.showErrorSnack("lang_auto_upload_that_bai");else if(r.loaded&&r.total){let l=Math.round(r.loaded/r.total*100);this.arrStatusFileExam=[`${s} (${l}%)`]}});else{let r=this.commonService.myTranslateInstant("lang_auto_chi_duoc_dinh_kem_tep_tin_mp_3_hoac_wav")??"";this.showErrorSnack(r)}}uploadFilePdf(t){this.apiUploadService.uploadToCdnProgressForTestbankPdf(t).subscribe(i=>{i.type!=C.dt.UploadProgress&&(1==i.success?(this.examFileUrl=i.data?.url??"",this.notShowSourceFile=!1):this.showErrorSnack("lang_auto_upload_that_bai"))})}clickUploadFile(t){jQuery(`#inputFileQuestion_${t}`).trigger("click")}changeIsSelect(t,i){t.tempData.isSelect=i}setupFillAnswersQuestion(t){var i=this.questionList[t];const a=[...i.tempData.answerResult];this.dialog.open(Dr,{width:"50%",data:{answers:i.tempData.answerResult},restoreFocus:!1}).afterClosed().subscribe(r=>{!1===r&&(i.tempData.answerResult=a)})}listeningDropFileExam(){var t=this,i=jQuery("#box-left-file-drop");i.on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(){i.addClass("is-dragover")}).on("dragleave dragend drop",function(){i.removeClass("is-dragover")}).on("drop",function(a){t.nameExamInp.setValue(a.originalEvent.dataTransfer.files[0].name),t.uploadFilePdf(a.originalEvent.dataTransfer.files[0]),t.processPdf(a.originalEvent.dataTransfer.files[0])}),jQuery("#box-left-file-input").change(()=>{t.nameExamInp.setValue(jQuery("#box-left-file-input").get(0).files[0].name),t.uploadFilePdf(jQuery("#box-left-file-input").get(0).files[0]),t.processPdf(jQuery("#box-left-file-input").get(0).files[0])}),jQuery(i).click(()=>{jQuery("#box-left-file-input").trigger("click")})}processPdf(t){let i=this.commonService.myTranslateInstant("lang_auto_dang_tien_hanh_phan_tich");window.startLoading=()=>{this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0},this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0,jQuery("#box-left-file-drop").hide();var s=new zc.Process(this.cropPdfConfigParam);s.setUpdateStatusCallback(c=>{c.startsWith("Rendering")?0==this.message.length?this.message.push(c):this.message[this.message.length-1]=c:this.message.push(c)}),s.setOncompleteCallback((c,d)=>{c.length>0?(this.startQuestion=c[0].num,this.myControl.setValue(this.startQuestion),this.labelHolderSize.width=2*d[0].canvas.width,this.rootQuestionInfo=c,this.rootCanvases=d.map(f=>f.canvas),this.rootHeaderPosition={pageIndex:0,top:1,left:c[0].positions[0].left,width:c[0].positions[0].left+c[0].positions[0].width<d[0].canvas.width?c[0].positions[0].width:d[0].canvas.width-c[0].positions[0].left,heigh:c[0].positions[0].top-1},s.showHidden(),this.errorQuestions=this.cropperService.getErrorQtns(c),this.processData()):(this.errAnalyzingPdf=!0,this.isShowLoadingFileExam=!1)}),s.parsePdf(t)}applyEditEvent(t){if(this.questionConfigList=Zo.cloneDeep(this.questionList),t){this.countClickApplyEdit++,this.rootQuestionInfo=t.listQuestion,this.rootHeaderPosition=t.headerPos,this.processData();for(let i=0;i<this.questionList.length;i++)this.questionList[i].isFixAns=this.questionConfigList[i].isFixAns,this.questionList[i].groupType=this.questionConfigList[i].groupType,this.questionList[i].tempData.point=this.questionConfigList[i].tempData.point,this.questionList[i].tempData.answerType=this.questionConfigList[i].tempData.answerType,this.questionList[i].tempData.answerResult=this.questionConfigList[i].tempData.answerResult,this.questionList[i].tempData.isSelect=this.questionConfigList[i].tempData.isSelect,this.questionList[i].tempData.isShowHelp=this.questionConfigList[i].tempData.isShowHelp,this.questionList[i].tempData.isShowAttach=this.questionConfigList[i].tempData.isShowAttach,this.questionList[i].tempData.questionMedia=this.questionConfigList[i].tempData.questionMedia;this.editting=!1,this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong")}else this.editting=!1}cloneCanvas(){let t=this.rootCanvases;for(let i=0;i<t.length;i++){const a=t[i];let s=document.createElement("canvas");s.width=a.width,s.height=a.height;let r=document.createElement("canvas");r.width=a.width,r.height=a.height;let l=s.getContext("2d");l?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height);let c=r.getContext("2d");c?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height),l&&c&&this.clonedCtxForCreate.push(c)}}processData(){this.questionList=[],this.abcdLabelPos={},this.groupImages={},this.totalInGroupTracking=0,this.questionLabelMap=[],this.groupLengths=[],this.countGroup=0,this.labelsUrls=[],this.labelsBase64s=[],this.firstInGroupIndexes=[],this.clonedCtxForCreate=[],this.cloneCanvas();const t=this.clonedCtxForCreate[0].canvas.width;this.rootQuestionInfo.forEach(ae=>{ae.positions.forEach(oe=>{oe.width+oe.left>t&&(oe.width=t-oe.left)})});let i=this.rootQuestionInfo,a=this.clonedCtxForCreate;i.forEach(ae=>{ae.remove.heigh=Math.round(ae.remove.heigh),ae.remove.width=Math.round(ae.remove.width),ae.remove.top=Math.round(ae.remove.top),ae.remove.left=Math.round(ae.remove.left),ae.positions.forEach(oe=>{oe.heigh=Math.round(oe.heigh),oe.width=Math.round(oe.width),oe.top=Math.round(oe.top),oe.left=Math.round(oe.left)}),ae.help&&(ae.help.remove&&(ae.help.remove.heigh=Math.round(ae.help.remove.heigh),ae.help.remove.width=Math.round(ae.help.remove.width),ae.help.remove.left=Math.round(ae.help.remove.left),ae.help.remove.top=Math.round(ae.help.remove.top)),ae.help.positions.forEach(oe=>{oe.heigh=Math.round(oe.heigh),oe.width=Math.round(oe.width),oe.top=Math.round(oe.top),oe.left=Math.round(oe.left)})),ae.answers.length>0&&ae.answers.forEach(oe=>{oe.remove.heigh=Math.round(oe.remove.heigh),oe.remove.width=Math.round(oe.remove.width),oe.remove.top=Math.round(oe.remove.top),oe.remove.left=Math.round(oe.remove.left),oe.positions.forEach(pe=>{pe.heigh=Math.round(pe.heigh),pe.width=Math.round(pe.width),pe.top=Math.round(pe.top),pe.left=Math.round(pe.left)})})});let s=document.createElement("canvas");s.width=this.labelHolderSize.width,s.height=this.labelHolderSize.height;let r=s.getContext("2d"),l=0,c=r;const d=()=>{r&&(this.labelsBase64s[l]=r.canvas.toDataURL("image/png"),l++,r.clearRect(0,0,r.canvas.width,r.canvas.height)),y.left=0,y.top=0};let f=0,y={left:0,top:0,locate:0};const O=ae=>{y.left=0,y.top+=ae};let N=[];const I=ae=>{let oe=!0;for(let pe=0;pe<ae.length;pe++)if(1==ae[pe].remove.width||1==ae[pe].remove.heigh){oe=!1;break}return oe};i.forEach(ae=>{N.push(ae.answers.length)});for(let ae=0;ae<i.length;ae++)if(I(i[ae].answers)&&i[ae].answers.length==Math.max(...N)){i[ae].answers.forEach(oe=>{c?.drawImage(a[oe.remove.pageIndex].canvas,oe.remove.left,oe.remove.top,oe.remove.width,oe.remove.heigh,y.left,y.top,oe.remove.width,oe.remove.heigh),this.abcdLabelPos[oe.label]={left:y.left,top:y.top},y.left=y.left+oe.remove.width+5});break}this.examHeader=this.cropperService.getSingleImgData(this.rootHeaderPosition,a);for(let ae=0;ae<i.length;ae++){let oe={isFixAns:i[ae].isFixAns?1:0,forcedFixAns:!!i[ae].isFixAns,groupType:0,original:"",debugView:"",group:i[ae].group,groupUrl:this.groupImages[`image_group_${i[ae].group}`]?this.groupImages[`image_group_${i[ae].group}`]:"",question:{label:i[ae].num,posit:{top:0,left:0,locate:0},url:"",urlExcludeLabelOnly:"",width:1,height:1,remove:{x:1,y:1,width:1,height:1,url:this.cropperService.getSingleImgData(i[ae].remove,a),left:0,top:0}},answers:[],help:{num:i[ae].num,url:""},tempData:{sort:ae,point:0,answerType:1,answerConfig:{},answerResult:[],isShowAttach:!1,questionMedia:[],isSelect:!0,isShowHelp:!1},rootIndex:ae},pe=i[ae].positions;if(oe.original=this.cropperService.getScatteredImgData(pe,a),i[ae].isGroup){this.groupLengths.push(this.totalInGroupTracking),this.totalInGroupTracking=0,this.countGroup++,oe.isGroup=!0;var z=this.cropperService.getScatteredImgData(i[ae].positions,a);this.groupImages[`image_group_${i[ae].num}`]=z}else{f++,this.totalInGroupTracking++,c&&0!=f&&y.left+i[ae].remove.width>c.canvas.width?(y.left=0,y.top=y.top+this.maxQuestionLabelHeight+5,this.maxQuestionLabelHeight=0,c&&y.top+i[ae].remove.heigh>c.canvas.height&&d(),c?.drawImage(a[i[ae].remove.pageIndex].canvas,i[ae].remove.left,i[ae].remove.top,i[ae].remove.width,i[ae].remove.heigh,y.left,y.top,i[ae].remove.width,i[ae].remove.heigh),oe.question.remove.left=y.left,oe.question.remove.top=y.top,this.questionLabelMap.push({locate:l,left:y.left,top:y.top,width:i[ae].remove.width,height:i[ae].remove.heigh}),y.left=y.left+i[ae].remove.width+5):(c&&y.top+i[ae].remove.heigh>c.canvas.height&&d(),c?.drawImage(a[i[ae].remove.pageIndex].canvas,i[ae].remove.left,i[ae].remove.top,i[ae].remove.width,i[ae].remove.heigh,y.left,y.top,i[ae].remove.width,i[ae].remove.heigh),oe.question.remove.left=y.left,oe.question.remove.top=y.top,this.questionLabelMap.push({locate:l,left:y.left,top:y.top,width:i[ae].remove.width,height:i[ae].remove.heigh}),y.left=y.left+i[ae].remove.width+5,i[ae].remove.heigh>this.maxQuestionLabelHeight&&(this.maxQuestionLabelHeight=i[ae].remove.heigh)),this.cropperService.fillColor("#ffffff",a[i[ae].remove.pageIndex],i[ae].remove.left,i[ae].remove.top,i[ae].remove.width,i[ae].remove.heigh),oe.question.urlExcludeLabelOnly=1==pe.length?this.cropperService.getSingleImgData(pe[0],a):this.cropperService.getScatteredImgData(pe,a),oe.question.remove.x=i[ae].remove.left-pe[0].left,oe.question.remove.y=i[ae].remove.top-pe[0].top,oe.question.remove.width=i[ae].remove.width,oe.question.remove.height=i[ae].remove.heigh,i[ae].answers.length>0?i[ae].answers.forEach(Le=>{let st={label:Le.label,posit:{left:0,top:0,locate:0},url:"",x:Le.positions[0].left-pe[0].left,y:Le.positions[0].top-pe[0].top,width:1,height:1,remove:{x:Le.remove.left-pe[0].left,y:Le.remove.top-pe[0].top,xAns:Le.remove.left-Le.positions[0].left,yAns:Le.remove.top-Le.positions[0].top,width:Le.remove.width,height:Le.remove.heigh,url:this.cropperService.getSingleImgData(Le.remove,a),left:0,top:0}};if(pe.length>1&&pe[0].pageIndex!==Le.remove.pageIndex&&(st.remove.y=Le.remove.top-pe[1].top+pe[0].heigh),this.cropperService.fillColor("#ffffff",a[Le.remove.pageIndex],Le.remove.left,Le.remove.top,Le.remove.width,Le.remove.heigh),pe.length>1)for(let rt=0;rt<pe.length;rt++)if(pe[rt].pageIndex==Le.positions[0].pageIndex){st.y=0==rt?Le.positions[0].top-pe[rt].top:Le.positions[0].top-pe[rt].top+pe[0].heigh;break}if(Le.isCorrect&&(oe.tempData.answerResult=[Le.label]),1==Le.positions.length)st.url=this.cropperService.getSingleImgData(Le.positions[0],a),st.width=Le.positions[0].width,st.height=Le.positions[0].heigh;else{st.url=this.cropperService.getScatteredImgData(Le.positions,a);let rt=Le.positions.filter(sn=>!sn.inactive);st.width=this.cropperService.maxWidthTo(rt.length,Le.positions),st.height=this.cropperService.sumHighTo(rt.length,Le.positions)}oe.answers.push(st),Le.positions.forEach(rt=>{this.cropperService.fillColor("#ffffff",a[rt.pageIndex],rt.left,rt.top,rt.width,rt.heigh)})}):i[ae].strAns&&void 0!==i[ae].strAns?(oe.tempData.answerType=4,oe.tempData.answerResult.push(i[ae].strAns||"")):oe.tempData.answerType=3;let je=i[ae].help;if(je&&(je.remove&&this.cropperService.fillColor("#ffffff",a[je.remove.pageIndex],je.remove.left,je.remove.top,je.remove.width,je.remove.heigh),je.positions&&je.positions.length>0&&(oe.help.url=this.cropperService.getScatteredImgData(je.positions,a))),1==pe.length)oe.question.url=this.cropperService.getSingleImgData(pe[0],a),oe.question.width=pe[0].width,oe.question.height=pe[0].heigh;else{oe.question.url=this.cropperService.getScatteredImgData(pe,a);let Le=pe.filter(st=>!st.inactive);oe.question.width=this.cropperService.maxWidthTo(Le.length,pe),oe.question.height=this.cropperService.sumHighTo(Le.length,pe)}this.questionList.push(oe)}}for(let ae=0;ae<this.questionList.length;ae++)this.questionList[ae].tempData.point=this.totalNumberQuestion?Number(this.totalPoint.value/this.totalNumberQuestion):0,this.questionList[ae].index=ae;let $=0;for(let ae=0;ae<this.groupLengths.length;ae++)this.firstInGroupIndexes.push($+this.groupLengths[ae]),$+=this.groupLengths[ae];const Y=()=>{let ae=0,oe=[];for(let pe=0;pe<this.questionList.length;pe++)if(this.questionList[pe].answers.length>0)for(let je=0;je<this.questionList[pe].answers.length;je++){let Le=new Image;Le.crossOrigin="anonymous",Le.setAttribute("indexMap",pe.toString()),Le.setAttribute("ansIndexMap",je.toString()),oe.push(Le),Le.onload=()=>{if(ae++,ae==oe.length){let st=[],rt=[],sn=0;for(let ve=0;ve<oe.length;ve++){const Nt=oe[ve];sn+=Nt.width+5,sn<=this.labelHolderSize.width?rt.push(Nt):(st.push(rt),rt=[],rt.push(Nt),sn=Nt.width),ve==oe.length-1&&st.push(rt)}for(let ve=0;ve<st.length;ve++){const Nt=st[ve];let At=Nt.map(Qt=>Qt.height),rn=Math.max(...At);for(let Qt=0;Qt<Nt.length;Qt++){const Ot=Nt[Qt];c&&y.top+Ot.height>c?.canvas.height&&d(),c?.drawImage(Ot,y.left,y.top);let mt=parseInt(Ot?.getAttribute("indexMap")),vt=parseInt(Ot?.getAttribute("ansIndexMap"));this.questionList[mt].answers[vt].posit.left=y.left,this.questionList[mt].answers[vt].posit.top=y.top,this.questionList[mt].answers[vt].posit.locate=l,y.left+=Ot.width+5,Qt==Nt.length-1&&ve==st.length-1&&(this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"))}O(rn+5)}}},Le.src=this.questionList[pe].answers[je].url}};let V=this.questionList.filter(ae=>!this.answerTypeService.isOneChoiceAnswer(ae.tempData.answerType)).length;y.left=0,y.top+=this.questionList[this.questionList.length-1].question.remove.height+5;let te=[];for(let ae=0;ae<this.questionList.length;ae++)te.push(ae);let K=[];K=Zo.shuffle(te);let X=0,ye=[];K.forEach(ae=>{let oe=new Image;oe.crossOrigin="anonymous",oe.setAttribute("indexMap",ae.toString()),ye.push(oe),oe.onload=()=>{if(X++,X==K.length){let pe=Zo.chunk(ye,2);for(let je=0;je<pe.length;je++){const Le=pe[je];let st=Le.map(sn=>sn.height),rt=Math.max(...st);for(let sn=0;sn<Le.length;sn++){const ve=Le[sn];c&&y.top+ve.height>c?.canvas.height&&d(),c?.drawImage(ve,y.left,y.top);let Nt=parseInt(ve?.getAttribute("indexMap"));this.questionList[Nt].question.posit.left=y.left,this.questionList[Nt].question.posit.top=y.top,this.questionList[Nt].question.posit.locate=l,y.left+=ve.width+5}O(rt+5)}V==this.questionList.length?this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"):Y()}},oe.src=this.questionList[ae].question.url}),this.completeCropper()}completeCropper(){this.isShowLoadingFileExam=!1,this.cropperDone=!0,jQuery("#hiddenWrapper").remove();try{this.browserStorageService.getStorage("_DONT_SHOW_MANUAL")||setTimeout(()=>{this.openManualDialog(!1)},2e3)}catch(t){console.log(t)}}toggleViewHelp(t){t.tempData.isShowHelp=!t.tempData.isShowHelp}toogleMixAns(t){t.forcedFixAns?this.commonService.snackError("lang_auto_cau_hoi_nay_phai_co_dinh_dap_an_ban_khong_the_thay_doi"):t.isFixAns=0==t.isFixAns?1:0}toggleMixInGroup(t){for(let i=0;i<this.questionList.length;i++)this.questionList[i].group&&this.questionList[i].group==t&&(1==this.questionList[i].groupType?(this.questionList[i].groupType=0,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_se_bi_dao_thu_tu_khi_de_thi_bi_dao")):(this.questionList[i].groupType=1,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_van_giu_nguyen_thu_tukhi_de_thi_bi_dao")))}toggleRemoveAllGroup(t){let i=this.questionList.filter(a=>a.group&&a.group==t);i.filter(a=>a.tempData.isSelect).length>0?i.forEach(a=>{a.tempData.isSelect=!1,this.changePointWhenDeleteQuestion(a.index??0)}):i.forEach(a=>{a.tempData.isSelect=!0,this.changePointWhenDeleteQuestion(a.index??0)})}loadingFileJs(){let t=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_cong_cu");this.arrStatusFileExam=[`${t} ...`],this.isShowLoadingFileExam=!0;let i=this.configService.getConfig("dynamicJsVersion");return new Promise(a=>{var s=[{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.js?ver=${i}`),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.worker.js?ver=${i}`),name:"pdf-js-v2-pdf.worker.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"}];this.commonService.loadScriptPromises(s).then(r=>{r?(a(!0),this.isShowLoadingFileExam=!1):a(!1)})})}setHeightFullScreen(){var s=jQuery(window).height()-(jQuery("#bxControl").height()+jQuery("#header-app-component").height()+10);jQuery(".box-file-content").height(s)}resetBoxExamQuestions(t){let i=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_lai_de_thi")??"",a=this.commonService.myTranslateInstant("lang_auto_hanh_dong_khong_the_hoan_tac")??"";this.confirmDialog(i,a,"400px",()=>{this.commonService.myNavigation("/admin/testbank/create-new-document/"+this.cur_cateId)})}confirmDialog(t,i,a,s){this.dialog.open(ba,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&s()})}handleSaveQuestionError(t){console.log(t),this.isShowLoadingFileExam=!1,this.showErrorSnack("lang_auto_tao_de_khong_thanh_cong_vui_long_thu_lai")}showAllHelp(){this.isShowAllHelp=!this.isShowAllHelp,this.questionList.forEach(t=>{t.tempData.isShowHelp=this.isShowAllHelp})}goToQuestionAll(t,i=150){var a=document.getElementById("box-questions-item-"+t),s=document.getElementById("box-questions-viewer");s&&a&&s.scrollTo({top:Number(a.offsetTop-i)})}rxjsHandleSaveExam(){if(this.isShowLoadingFileExam)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.invalidTypeQuestionConfig.length>0||!this.nameExamInp.value||""==this.nameExamInp.value.trim())this.commonService.snackError("lang_testbank_create_exam_width_file_pdf_cant_save_check_err");else{if(this.isFullNoPoint){const r=R(10,this.questionList.length);this.questionList.forEach((l,c)=>{l.tempData.point=r[c]})}this.isShowLoadingFileExam=!0;let i,t=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");if(this.selects=this.questionList.filter(r=>r.tempData.isSelect),this.arrStatusFileExam=[`${t}: 0/${this.selects.length}`],!Zo.isEmpty(this.groupImages)){let r={};for(const l in this.groupImages)r[l]=this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Is,this.groupImages[l]);i=(0,Jc.D)(r)}const a=()=>{this.rxjsConstructQuestionInfo()},s=()=>{this.uploadParallelLabelsImage(0,5,r=>{r.success?(this.labelsUrls=r.urls,i?i.subscribe(l=>{var c="",d={};for(var f in l){var y=l[f];1==y.success?d[f]=y.data??"":c=y.message??"Unkown error"}""==c?(this.groupImages=d,a()):this.handleSaveQuestionError(c)}):a()):this.handleSaveQuestionError(r.message)})};this.useHeader&&this.examHeader?this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Is,this.examHeader).subscribe(r=>{1==r.success?(this.examHeader=r.data??"",s()):this.handleSaveQuestionError(r.message)}):(this.examHeader="",s())}}rxjsConstructQuestionInfo(){this.rxJsCallSaveParallelQuestion(0,5,this.selects,t=>{t&&this.rxJsCallApiSaveQuestions(i=>{i&&this.handleSaveAllExam()})})}rxJsCallApiSaveQuestions(t){if(this.newQuestionArrSave.length<=this.limitLazyLoad){var i={listQuestions:this.newQuestionArrSave.sort((a,s)=>a.sortByIndex-s.sortByIndex)};this.questionService.apiQuestionSaveObjsV2Post(i).subscribe(a=>{1==a.success&&(a.data?.objs?.length??0)>0?(a.data?.objs?.forEach((s,r)=>{this.examConfigs.push({id:s.id,name:s.name,groupId:s.groupId,scorePerQuestion:this.selects[r].tempData.point,totalQuestion:1,sort:r})}),t(!0)):(this.handleSaveQuestionError(a.message),t(!1))})}else this.saveVeryLongListQuestions(this.newQuestionArrSave,t)}saveVeryLongListQuestions(t,i){var a=this;return(0,$n.Z)(function*(){a.newQuestionArrSave.sort((l,c)=>l.sortByIndex-c.sortByIndex);var s=Zo.chunk(a.newQuestionArrSave,li);let r=0;try{for(const l of s){let c=yield a.questionService.apiQuestionSaveObjsV2Post({listQuestions:l}).toPromise();if(!(1==c?.success&&(c?.data?.objs?.length??0)>0))throw c?.message;c.data?.objs?.forEach((d,f)=>{let y=li*r+f;a.examConfigs.push({id:d.id,name:d.name,groupId:d.groupId,scorePerQuestion:a.selects[y].tempData.point,totalQuestion:1,sort:y})}),r++}i(!0)}catch(l){a.handleSaveQuestionError(l),i(!1)}})()}rxJsCallSaveParallelQuestion(t,i,a,s){for(var r=[],l=0;l<i;l++)(c=t+l)<this.selects.length&&r.push(this.selects[c]);for(var d=0,f=r.length,y=0;y<r.length;y++){var c;this.rxjsProcessSaveOneQuestion(r[y],c=t+y,I=>{I?(d+=1)===f&&this.rxJsCallSaveParallelQuestion(t+f,i,a,s):s(!1)})}f<=0&&s(!0)}uploadParallelLabelsImage(t,i,a){for(var s=[],r=0;r<i;r++)(l=t+r)<this.labelsBase64s.length&&s.push(this.labelsBase64s[l]);for(var c=s.length,d=0,f=0;f<s.length;f++){var l;this.uploadOneLabelsImage(s[f],l=t+f,N=>{N.success?(this.resultUploadBase64Labels.push({index:N.index,url:N.url}),(d+=1)===c&&this.uploadParallelLabelsImage(t+c,i,a)):a({success:!1,message:"Fail to upload labels image to cdn"})})}c<=0&&(this.resultUploadBase64Labels.sort((O,N)=>O.index-N.index),a({success:!0,urls:this.resultUploadBase64Labels.map(O=>O.url)}))}uploadOneLabelsImage(t,i,a){this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Is,t??"").subscribe(s=>{a(s.success?{success:!0,index:i,url:s.data??""}:{success:!1})})}rxjsProcessSaveOneQuestion(t,i,a){let s=t;this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Is,s.original).subscribe(r=>{1==r.success?(s.original=r.data??"",this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Is,s.help.url).subscribe(l=>{if(1==l.success){s.help.url=l.data??"";let d=this.answerTypeService.isOneChoiceAnswer(t.tempData.answerType)?t.answers.map(O=>({key:O.label,content:JSON.stringify({...O,label:null,url:null,x:null,y:null,isCorrect:null,remove:null})})):t.tempData.answerConfig,f="";t.answers.length>0&&(f=t.answers.map(O=>({...O,url:null,remove:{...O.remove,url:null}})));let y={name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${t.question.label}`,version:"2",isFixAns:t.isFixAns,groupType:t.groupType.toString(),answerConfig:JSON.stringify(d),answerResult:JSON.stringify(t.tempData.answerResult),answerType:t.tempData.answerType,questionText:"",metaData:"",answerMedia:t.help.url,questionMedia:"",attachments:JSON.stringify(t.tempData.questionMedia),questionContent:JSON.stringify(new Array({$id:0,id:0,name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${t.question.label}`,path:t.original,extension:"png",pimes:null,url:t.original,groupUrl:t.group?this.groupImages[`image_group_${t.group}`]:"",firstInGroupIndexes:null,abcdLabelPos:null,questionLabelMap:null,metaData:{...t,question:{...t.question,url:null,urlExcludeLabelOnly:this.answerTypeService.isOneChoiceAnswer(t.tempData.answerType)?null:t.question.urlExcludeLabelOnly,remove:{...t.question.remove,url:null}},answers:f,tempData:null,original:null,debugView:null,isGroup:null,help:null,group:null,groupUrl:null,groupType:null}})),questionTags:JSON.stringify(new Array),tags:[],categoryId:0,groupId:t.group,coordinates:"{}",totalQuestion:1,sortByIndex:i};var c=this.newQuestionArrSave.filter(O=>O.name==y.name);if(!c||0==c.length){this.newQuestionArrSave.push(y),this.countSaveQuestion++;let O=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");this.arrStatusFileExam=[`${O}: ${this.countSaveQuestion}/${this.selects.length}`]}a(!0)}else this.handleSaveQuestionError(l.message),a(!1)})):(this.handleSaveQuestionError(r.message),a(!1))})}openDialogSpitPoint(){let t=0,i=0,a=0,s=0,r=0,l=0;for(let c=0;c<this.questionList.length;c++)this.questionList[c].tempData.isSelect&&(this.answerTypeService.isOneChoiceAnswer(this.questionList[c].tempData.answerType)?(t++,i+=this.questionList[c].tempData.point):this.answerTypeService.isFillAnswer(this.questionList[c].tempData.answerType)?(r++,l+=this.questionList[c].tempData.point):(a++,s+=this.questionList[c].tempData.point));if(this.countTrueFalseQuestion=t,this.countFillAnswerQuestion=r,this.dataSpitPoint){let c={multipleQuestion:t,multiplePoint:i.toFixed(4),essayQuestion:a,essayPoint:s.toFixed(4),fillQuestion:r,fillPoint:l.toFixed(4)};this.dataSpitPoint={isShow:!0,obj:c}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointTest(t){this.multiplePoint=t.multiplePoint??0,this.essayPoint=t.essayPoint??0,this.fillPoint=t.fillPoint??0;let i=Number(this.parseNumberFixed(Number(t.multiplePoint)/this.totalTrueFalseQuestion,8)),a=Number(this.parseNumberFixed(Number(t.fillPoint)/this.totalFillQuestion,8)),s=0,r=this.questionList.filter(l=>l.tempData.isSelect).length;r-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(s=Number(t.essayPoint)/(r-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData.answerType)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData.answerType)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:s.toString().length>8?Number(this.parseNumberFixed(s,8)):s);this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1),this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}parseNumberFixed(t,i){let a=Number(parseFloat(t.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(t.toString()).toFixed(i)}changeSelectTempData(t){this.questionList[t].tempData.isSelect=!this.questionList[t].tempData.isSelect,this.changePointWhenDeleteQuestion(t)}changePointWhenDeleteQuestion(t){let i=Number(this.multiplePoint)/this.totalTrueFalseQuestion,a=Number(this.fillPoint)/this.totalFillQuestion,s=0,r=this.questionList.filter(l=>l.tempData.isSelect).length;0==this.essayPoint&&(this.essayPoint=(r-this.totalTrueFalseQuestion-this.totalFillQuestion)*this.questionList[t].tempData.point),r-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(s=Number(this.essayPoint)/(r-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData.answerType)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData.answerType)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:s.toString().length>8?Number(this.parseNumberFixed(s,8)):s)}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionList}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ms),e.Y36(T.gz),e.Y36(j.uw),e.Y36(Ve.aE),e.Y36(Ln.$),e.Y36(Qe.K),e.Y36(si.CM),e.Y36(Ve.Oe),e.Y36($c.E),e.Y36(xt.U),e.Y36($o.T),e.Y36(Fr.V),e.Y36(De),e.Y36(we.z),e.Y36(Ur.x0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cropper"]],viewQuery:function(t,i){if(1&t&&(e.Gf(an,5),e.Gf(Dt,5),e.Gf(Vt,5),e.Gf(Xt,5),e.Gf(ot,5),e.Gf(Xe,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.hiddenInput=a.first),e.iGM(a=e.CRH())&&(i.iframePdf=a.first),e.iGM(a=e.CRH())&&(i.resizeBar=a.first),e.iGM(a=e.CRH())&&(i.boxLeftFile=a.first),e.iGM(a=e.CRH())&&(i.parentResize=a.first),e.iGM(a=e.CRH())&&(i.maskLayer=a.first)}},features:[e.qOj],decls:5,vars:4,consts:[["browserSupported",""],["class","alert alert-danger alert-danger-note p-5","style","font-size: 18px",4,"ngIf","ngIfElse"],[3,"data","closeDialog","setPoint",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[3,"headerBackToLink","showInput","showConfirmButton","examName","handleConfirm","handleCancel"],["id","box-create-action"],[1,"container-fluid","mt-3"],[1,"flex","w-full"],["parentResize",""],["id","box-left-file",3,"ngStyle"],["boxLeftFile",""],["id","box-left-file-input","type","file","accept","application/pdf",1,"azt-hidden"],["class","flex justify-between items-center dt-header",4,"ngIf"],["class","p-2 mt-2 mb-2 text-center alert alert-info",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center alert-danger-note",4,"ngIf"],[1,"box-file-content"],["id","box-left-file-drop","class","box-file-content-file_drop",4,"ngIf"],["id","box-left-file-pdf",1,"box-file-content--viewer",2,"display","none"],["id","box-left-file-canvas",1,"box-file-content--viewer",2,"display","none"],["class","box-questions","id","box-questions-viewer","style","width: 100%",4,"ngIf"],["style","width: 100%","class","m-3 pt-5 p-3 alert text-center text-danger",4,"ngIf"],["id","resizeBar",3,"mousedown"],["resizeBar",""],["id","iframePdf",3,"hidden"],["iframePdf",""],[1,"maskLayer"],["maskLayer",""],["frameBorder","0","scrolling","auto","height","100%","width","100%",3,"src"],["class","box-file-content-file_preview--blur_status","style","\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100vh;\n            background: #2632386b;\n            color: white;\n            z-index: 999;\n          ",4,"ngIf"],[3,"ngIf"],[1,"flex","justify-between","items-center","dt-header"],[1,"box-control"],["color","primary",1,"example-margin",3,"matTooltip","color","formControl"],["class","pagination",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-yF9GeAl2MK",1,"btnTotal",3,"click"],[1,"flex"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8xKwGSyZ8J",1,"clickable","ml-3",3,"matTooltip","click"],[1,"flex","justify-between","items-center"],[1,"form-enter-question","ml-1"],["id","inputQuestionNum","type","number",2,"padding","0",3,"formControl","matAutocomplete","keyup.enter"],["id","cropperFilterQuestion"],["auto","matAutocomplete"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click",4,"ngFor","ngForOf"],["type","hidden"],["hiddenInput",""],["azt-track-service","create-exam-with-file-pdf-E8H8iTfHP6","id","btnEdits","mat-raised-button","",3,"click"],[1,"pagination"],["type","number","name","inputPage","id","",3,"ngModel","keyup.enter","ngModelChange"],["azt-track-service","create-exam-with-file-pdf-j3HtJoLN74",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-i02GVPZfkg",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click"],[1,"p-2","mt-2","mb-2","text-center","alert","alert-info"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],[1,"text-right","mt-1"],["azt-track-service","create-exam-with-file-pdf-8zeZ9XDtb_",1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-iQvwZJTrjj",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-left-file-drop",1,"box-file-content-file_drop"],[1,"box-file-content-file_drop--input"],[1,"box-file-content-file_drop--input-icon"],["id","download-link-item",3,"dataUrl","target","fileName","fileDescription","click"],["id","box-questions-viewer",1,"box-questions",2,"width","100%"],["id","examHeader","class","mb-4","style","padding: 15px; padding-top: 0",4,"ngIf"],["class","box-questions-item",4,"ngFor","ngForOf"],["class","pagination mb-5",4,"ngIf"],["id","examHeader",1,"mb-4",2,"padding","15px","padding-top","0"],["class","remove-layer",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf--HD0um3BB54",1,"clear-icon",3,"matTooltip","click"],["alt","",2,"width","100%",3,"src"],[1,"remove-layer"],[1,"box-questions-item"],["class","w-100 question-wrapper",4,"ngIf"],[1,"w-100","question-wrapper"],["class","alert alert-danger alert-danger-note","style","margin-bottom: -2px",4,"ngIf"],["class","box-questions-item__img group pt-4 mb-2",3,"hidden",4,"ngIf"],[1,"box-questions-item__img"],["azt-track-service","create-exam-with-file-pdf-n9OHfjQzIw6",1,"clear-icon",3,"matTooltip","click"],["class","cr-question-pieces",4,"ngIf"],[1,"box-questions-item__control"],[1,"box-questions-item__control_flex","position-relative","bg-slate-300","dark:bg-darkmode-400",3,"ngClass"],[1,"flex","items-center"],[2,"font-size","16px","margin-right","10px"],[1,"form-select","form-select-sm",2,"width","110px",3,"change"],[3,"value","selected"],["class","text-center flex items-center",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"font-size","16px"],["appReplaceCommas","","type","text",1,"form-control","inp",3,"value","input"],["azt-track-service","create-exam-with-file-pdf-6YL1FMa2jmG",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-bnQZ8KjeH-4",1,"attch-icon","clickable","flex",3,"click"],[1,"box-file-content-file_drop--input-icon",3,"matTooltip"],["azt-track-service","create-exam-with-file-pdf-4SNs7lyxp-f",1,"clickable","flex",3,"click"],["class","box-file-content-file_drop--input-icon",3,"matTooltip",4,"ngIf"],["style","margin-top: -5px; margin-bottom: 5px; border-radius: 5px",4,"ngIf"],[1,"alert","alert-danger","alert-danger-note",2,"margin-bottom","-2px"],[1,"box-questions-item__img","group","pt-4","mb-2",3,"hidden"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-9FChZOhg2jy",3,"click"],["class","mixInGroup",3,"matTooltip",4,"ngIf"],["class","mixInGroupNotif",4,"ngIf"],["loading","lazy","clickable","","alt","",3,"matTooltip","src"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb",1,"clear-icon",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI",1,"clear-icon",3,"matTooltip","click"],[1,"mixInGroup",3,"matTooltip"],[1,"mixInGroupNotif"],[1,"cr-question-pieces"],[1,"cr-question-label","mb-2"],["loading","lazy","alt","",3,"ngStyle","src"],[1,"cr-question","mb-2"],["loading","lazy","alt","",2,"width","100%","height","auto",3,"width","height","src"],[1,"cr-answers"],["class","cr-aswr",4,"ngFor","ngForOf"],[1,"cr-aswr"],[1,"mb-2"],["loading","lazy","alt","",2,"margin-right","10px","margin-bottom","5px",3,"ngStyle","src"],[1,"text-center","flex","items-center"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd","class","btn btn-ans",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd",1,"btn","btn-ans",3,"ngClass","click"],[1,"text-center"],["azt-track-service","create-exam-with-file-pdf-KOgDIAa3KdB",1,"btnAttQuestion",3,"click"],["class","box p-2 mt-2",4,"ngIf"],["class","alert alert-danger alert-danger-note",4,"ngIf"],[1,"box","p-2","mt-2"],[1,"alert","alert-danger","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-AlAR7KqulJm","href","https://docs.azota.vn/docs/trung-tam-tro-giup/tao-de-thi/tao-de-thi-khi-cau-hoi-khong-co-dap-an-de-chon/","target","_blank"],["style","margin-bottom: 50px; opacity: 0.8","class","box-questions-item__img_result",4,"ngIf","ngIfElse"],["noHelp",""],[1,"box-questions-item__img_result",2,"margin-bottom","50px","opacity","0.8"],[3,"src"],[2,"color","rgb(219, 219, 219)","padding","8px 20px"],[2,"margin-top","-5px","margin-bottom","5px","border-radius","5px"],["type","file","name","",1,"azt-hidden",3,"id","change"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4","class","dropFileAttachQuestion",3,"click",4,"ngIf"],["class","dropFileAttachQuestion bg-white",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4",1,"dropFileAttachQuestion",3,"click"],[1,"dropFileAttachQuestion","bg-white"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["controls",""],["type","audio/mpeg",3,"src"],["azt-track-service","create-exam-with-file-pdf-IopYkUBesXC",2,"margin-left","10px","background","#f06292","color","white","padding","0 10px","border-radius","5px","font-size","10px",3,"click"],[1,"pagination","mb-5"],["azt-track-service","create-exam-with-file-pdf-g_6T5-6RWqm",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-lPIlOAl7wnQ",1,"clickable",3,"ngStyle","matTooltip","click"],[1,"m-3","pt-5","p-3","alert","text-center","text-danger",2,"width","100%"],[2,"font-size","50px","width","50px","height","50px"],["azt-track-service","create-exam-with-file-pdf-RPU348FbyDo",1,"btn","btn-primary",3,"click"],[1,"box-file-content-file_preview--blur_status",2,"position","fixed","top","0","left","0","width","100%","height","100vh","background","#2632386b","color","white","z-index","999"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[2,"display","flex","justify-content","center","margin-top","5rem"],["color","accent",3,"strokeWidth","diameter"],["class","span-status","style","font-size: 20px; margin-top: 30px;",4,"ngFor","ngForOf"],[1,"span-status",2,"font-size","20px","margin-top","30px"],[2,"background","#607d8b","padding","10px","border-radius","5px"],[1,"content","relative",2,"border-radius","0"],[3,"listQuestion","headerPosition","listCanvas","applyEdit"],[1,"alert","alert-danger","alert-danger-note","p-5",2,"font-size","18px"],[3,"data","closeDialog","setPoint"],[3,"startIndexQuestion","data","type","closeDialog"]],template:function(t,i){if(1&t&&(e.YNc(0,Ph,29,21,"ng-template",null,0,e.W1O),e.YNc(2,jh,4,7,"div",1),e.YNc(3,Dh,1,1,"azt-split-point",2),e.YNc(4,Nh,2,3,"div",3)),2&t){const a=e.MAs(1);e.xp6(2),e.Q6J("ngIf",!i.isSupportedBrowser)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",null==i.dataSpitPoint?null:i.dataSpitPoint.isShow),e.xp6(1),e.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[M.mk,M.sg,M.O5,M.PC,Va.XC,ji.ey,Va.ZL,Di.lW,Yc.oG,vn.Hw,uo.Ou,Zt.gM,p._Y,p.YN,p.Kr,p.Fj,p.wV,p.JJ,p.JL,p.On,p.F,p.oH,Gc,Z,Ie,ze.o,Ue.Z,et,M.Ov,re.bT,re.GT,re.yl,re.y,re.DC,re.Tf,re.UG],styles:[".span-status[_ngcontent-%COMP%]{font-size:18px;color:#fff}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%;background:rgba(0,0,0,.5882352941);height:100%;padding-top:20%}mat-icon.clear-icon[_ngcontent-%COMP%]{font-size:15px;color:#999;position:absolute;right:5px;z-index:10;top:5px;height:unset;width:unset}mat-icon.clear-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.remove-layer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:8;background-color:#000000d1;display:flex;justify-content:center;align-items:center;color:#fff;font-size:1em}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#examHeader[_ngcontent-%COMP%]{background:#fff;border-radius:7px;overflow:hidden;position:relative}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;margin-top:-15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;box-shadow:none;height:calc(100vh - 110px);display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;overflow-x:hidden;background:#323639;padding:4px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{margin-bottom:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{position:relative;padding:10px;border-radius:5px 5px 0 0;overflow:hidden;background-color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img.group[_ngcontent-%COMP%]{border-radius:5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default;border:1px solid #c0c0c0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:0 0 5px 5px;border:1px solid #414548}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:0 0 5px 5px;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:30px;width:30px;border-radius:50%;margin-left:5px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;background-color:#f39c12;padding:15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:70px;text-align:center;border:none;height:25px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{border:none;height:25px;background-color:#e0e0e0;border-radius:5px;background-position:right 0rem center!important;color:#000;padding:0 5px;padding-right:20px!important;font-size:revert!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:55%;left:170px;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:85%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .btnAttQuestion[_ngcontent-%COMP%]{background:#f59c12;height:25px;display:flex;align-items:center;padding:0 10px;border-radius:3px;cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]{display:flex;height:88px;background:#ececec;justify-content:center;align-items:center;border-bottom:1px solid #44beb5;cursor:pointer;border-radius:5px 5px 0 0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{height:40px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:80px;background:white;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:3px;margin-left:5px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{text-align:center}.isShowHelp[_ngcontent-%COMP%]{display:block!important}.question-wrapper[_ngcontent-%COMP%]{position:relative}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;z-index:10;color:#fff!important;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.img-group[_ngcontent-%COMP%]{position:relative}.img-group[_ngcontent-%COMP%]   .mixInGroupNotif[_ngcontent-%COMP%]{display:none}.img-group[_ngcontent-%COMP%]:hover   .mixInGroupNotif[_ngcontent-%COMP%]{display:block;background-color:#d63031}.mixInGroup[_ngcontent-%COMP%], .mixInGroupNotif[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-30px;left:-46px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.dt-header[_ngcontent-%COMP%]{background:#323639;color:#fff;padding:12px}#examNameInput[_ngcontent-%COMP%]{position:absolute;width:110%;left:-10%;top:-18px;border:1px solid #e0e0e0;border-radius:3px;padding:0 5px;height:36px}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:absolute;z-index:9;width:50%;right:-50%;top:-18px}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}#examSaveBtns[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#box-manual[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;position:absolute;z-index:9;width:50%;right:100%;top:-16px}#box-manual[_ngcontent-%COMP%]   #buttonHD[_ngcontent-%COMP%]{color:#2361ae;border:none}.error-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}#btnEdits[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.pagination[_ngcontent-%COMP%]{min-width:130px;display:flex;align-items:center;justify-content:space-between;max-width:230px;color:#fff}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:25px;text-align:center;border:none;background-color:#414548;color:#fff}.pagination.mb-5[_ngcontent-%COMP%]{margin:0 auto}.alert-danger-note[_ngcontent-%COMP%]{display:revert!important;border:1px solid transparent!important;border-radius:.25rem!important;color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important}#inputQuestionNum[_ngcontent-%COMP%]{height:22px;width:100%;text-align:center;border:none;margin-left:5px;min-width:30px;max-width:50px;border-radius:3px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#resizeBar[_ngcontent-%COMP%]{width:5px;transition:background-color .5s}#resizeBar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}#resizeBar.hover[_ngcontent-%COMP%]{background-color:#2262ae}#iframePdf[_ngcontent-%COMP%]{position:relative;flex:auto}#iframePdf[_ngcontent-%COMP%]   .maskLayer[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}span.attch-icon[_ngcontent-%COMP%]{position:relative}span.attch-icon[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-12px;left:50%;margin-left:-7px;color:#ececec}"]}),n})(),qh=(()=>{class n{ngOnInit(){}constructor(t,i){this.dialogRef=t,this.data=i,this.isNotShowAgain=new p.p4}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["user-manual"]],decls:41,vars:32,consts:[[1,"box","p-5"],[2,"min-height","55vh"],[1,"text-center","mb-2"],[1,"font-medium","text-lg"],[1,"mt-2"],[2,"list-style","inherit","margin","inherit","padding","auto"],["src","assets/images/pdf-debug-v2.png","alt","",1,"mb-2",2,"max-width","100%"],[1,"mb-0"],["align","end"],[1,"flex","items-center","w-full",2,"justify-content","space-between"],[1,"form-check"],["id","is-not-show-again","type","checkbox",1,"form-check-input",3,"formControl"],["for","is-not-show-again",1,"form-check-label"],["azt-track-service","create-exam-with-file-pdf-WfkRk3L46OB",1,"btn","btn-primary","w-24",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"azt-mat-dialog-content")(2,"div",1)(3,"div",2)(4,"span",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",4)(8,"p"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"ul",5)(15,"li"),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"li"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"li"),e._uU(22),e.ALo(23,"mytranslate"),e.qZA()(),e._UZ(24,"img",6),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.TgZ(28,"p",7),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()()(),e.TgZ(31,"mat-dialog-actions",8)(32,"div",9)(33,"div",10),e._UZ(34,"input",11),e.TgZ(35,"label",12),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.TgZ(38,"button",13),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_testbank_create_exam_width_file_pdf_tutorial_pdf")," "),e.xp6(4),e.hij("",e.lcZ(10,14,"lang_testbank_create_exam_width_file_pdf_note_one"),"."),e.xp6(3),e.hij("",e.lcZ(13,16,"lang_testbank_create_exam_width_file_pdf_note_two"),":"),e.xp6(4),e.Oqu(e.lcZ(17,18,"lang_testbank_create_exam_width_file_pdf_label_question")),e.xp6(3),e.Oqu(e.lcZ(20,20,"lang_testbank_create_exam_width_file_pdf_lable_answer")),e.xp6(3),e.Oqu(e.lcZ(23,22,"lang_testbank_create_exam_width_file_pdf_content_area")),e.xp6(4),e.hij("",e.lcZ(27,24,"lang_testbank_create_exam_width_file_pdf_note_three")," "),e.xp6(3),e.hij("",e.lcZ(30,26,"lang_testbank_create_exam_width_file_pdf_note_four"),"."),e.xp6(5),e.Q6J("formControl",i.isNotShowAgain),e.xp6(2),e.hij(" ",e.lcZ(37,28,"lang_testbank_create_exam_width_file_pdf_not_view")," "),e.xp6(2),e.Q6J("mat-dialog-close",i.isNotShowAgain.value),e.xp6(1),e.Oqu(e.lcZ(40,30,"lang_buttom_close")))},dependencies:[j.ZT,j.H8,p.Wl,p.JJ,p.oH,bt.O,re.bT],encapsulation:2}),n})();var pn=S(33066),_o=S(60013),Vo=S(32839),Ls=S(52630),Rn=S(41719),bi=S(65592);class Br{constructor(o,t){this.shareFileFlutterService=o,this.http=t,this.linkDataFile=""}initPdfData(o){return this.linkDataFile=o,this}createAnswerSheet(){return new bi.y(o=>{o.next({success:1,message:"success"}),o.complete()})}exportPdf(o){this.linkDataFile.includes("https:")?this.downloadFile().subscribe(t=>{this.shareFileFlutterService.shareFileWithBlob(t,o)}):this.shareFileFlutterService.shareFileWithBase64(this.linkDataFile,o)}downloadFile(){return this.http.get(this.linkDataFile,{responseType:"blob"}).pipe((0,Po.U)(o=>o))}}let Ud=(()=>{class n{constructor(t,i,a){this.cdnService=t,this.shareFileFlutterService=i,this.http=a}createAnswerSheet(){return new bi.y(t=>{this.creator?this.creator.createAnswerSheet().subscribe(i=>{1===i.success?(t.next({success:1,message:"successful"}),t.complete()):(t.next({success:0,message:i.message}),t.complete())}):(t.next({success:0,message:"Not find creator"}),t.complete())})}createAzotaAnswerSheet_A4(t){const i=new Br(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answersheet_mau_a4__${t&&t<=120?parseInt(t.toString(),10):120}.pdf`)),this}createA4AnswerSheet_35hh(t){const i=new Br(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v3/answer_sheet_a4_${t&&t<=50?parseInt(t.toString(),10):50}hh.pdf`)),this}createA5AnswerSheetFullA4_50(t){const i=new Br(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a5/answer_sheet_a5_${t&&t<=50?parseInt(t.toString(),10):50}_full.pdf`)),this}createA6AnswerSheetFullA4_20(t){const i=new Br(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a6_20/answer_sheet_a6_20_${t&&t<=20?parseInt(t.toString(),10):20}_full_a4.pdf`)),this}exportPdf(t){this.creator&&this.creator.exportPdf(t+".pdf")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(xt.U),e.LFG(Vo.g),e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nu=S(96790),zr=S(11530);const Fh=["table"];function Uh(n,o){if(1&n&&(e.TgZ(0,"td",6),e._uU(1),e.ALo(2,"formatOfflineExamHashIdToNumber"),e.qZA()),2&n){const t=o.$implicit,i=o.index;e.uIk("excelRow",1)("excelColumn",i+1),e.xp6(1),e.hij(" ",e.lcZ(2,3,null==t?null:t.offlineMixQuestionHashId)," ")}}function Rh(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.offlineQuestionObjs[i].answer)," ")}}function Bh(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_essay_question")," "))}function zh(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Rh,3,3,"span",7),e.YNc(2,Bh,3,3,"span",7),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t.offlineQuestionObjs&&null!=t.offlineQuestionObjs[i]&&t.offlineQuestionObjs[i].isEssay)),e.xp6(1),e.Q6J("ngIf",null==t.offlineQuestionObjs||null==t.offlineQuestionObjs[i]?null:t.offlineQuestionObjs[i].isEssay)}}function Jh(n,o){if(1&n&&(e.TgZ(0,"td",6),e.YNc(1,zh,3,2,"span",7),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw().$implicit;let s;e.uIk("excelRow",a+2)("excelColumn",i+1),e.xp6(1),e.Q6J("ngIf",(null!==(s=null==t.offlineQuestionObjs?null:t.offlineQuestionObjs.length)&&void 0!==s?s:0)>a)}}const Rd=function(){return[]};function Hh(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",3),e._uU(2),e.qZA(),e.YNc(3,Jh,2,3,"td",4),e.qZA()),2&n){const t=o.$implicit,i=e.oxw();let a;e.xp6(1),e.uIk("excelRow",t+2)("excelColumn",0),e.xp6(1),e.hij(" ",t+i.startQuestionIndex," "),e.xp6(1),e.Q6J("ngForOf",null!==(a=null==i.obj?null:i.obj.offlineMixQuestionObjs)&&void 0!==a?a:e.DdM(4,Rd))}}let Jr=(()=>{class n extends W.Q{calculateMaxQuestion(){let t=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(i=>{t<(i.offlineQuestionObjs?.length??0)&&(t=i.offlineQuestionObjs?.length??0)}),t}ngOnChanges(){this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.exportExcelService=t,this.startQuestionIndex=1,this.exportDataDone=new e.vpe,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(zr.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(t,i){if(1&t&&e.Gf(Fh,5),2&t){let a;e.iGM(a=e.CRH())&&(i.table=a.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},features:[e.qOj,e.TTD],decls:14,vars:16,consts:[[1,"table","table-bordered",2,"display","none"],["table",""],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(t,i){if(1&t&&(e.TgZ(0,"table",0,1)(2,"tbody")(3,"tr")(4,"td",2),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"td",3),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()(),e.TgZ(10,"tr"),e.YNc(11,Uh,3,5,"td",4),e.qZA(),e.YNc(12,Hh,4,5,"tr",5),e.ALo(13,"createEmptyArray"),e.qZA()()),2&t){let a;e.xp6(4),e.uIk("excelRow",0)("excelColumn",0),e.xp6(1),e.hij(" ",e.lcZ(6,9,"lang_testbank_answersheet_question_title")," "),e.xp6(2),e.uIk("colspan",i.totalExamCode)("excelRow",0)("excelColumn",1),e.xp6(1),e.hij(" ",e.lcZ(9,11,"lang_auto_ma_de_thi")," "),e.xp6(3),e.Q6J("ngForOf",null!==(a=null==i.obj?null:i.obj.offlineMixQuestionObjs)&&void 0!==a?a:e.DdM(15,Rd)),e.xp6(1),e.Q6J("ngForOf",e.lcZ(13,13,i.maxQuestionIndex))}},dependencies:[M.sg,M.O5,re.bT,re.q7,re.Pr],encapsulation:2}),n})();var Xo=S(10134),Kh=S(99442),iu=S(79430),$h=S(43583);function Yh(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function Gh(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span")(1,"span",13),e._uU(2),e.qZA(),e.YNc(3,Yh,2,0,"span",10),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(2),e.hij(' "',t.classroom.name,'" '),e.xp6(1),e.Q6J("ngIf",a.classroomErrorObjs.length>1&&i!==a.classroomErrorObjs.length-1)}}function Wh(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",14),e._UZ(4,"polyline",15),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_xem_chi_tiet_loi")," "))}function Vh(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",14),e._UZ(4,"polyline",16),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_an_xem_chi_tiet_loi")," "))}function Xh(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function eg(n,o){if(1&n&&(e.TgZ(0,"span",28)(1,"span",13),e._uU(2),e.qZA(),e.YNc(3,Xh,2,0,"span",10),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2).$implicit;e.xp6(2),e.hij(' "',t,'" '),e.xp6(1),e.Q6J("ngIf",a.duplicatedStudentCodes&&a.duplicatedStudentCodes.length>1&&i!==a.duplicatedStudentCodes.length-1)}}function tg(n,o){if(1&n&&(e.TgZ(0,"div",26)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,eg,4,2,"span",27),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ","- "+e.lcZ(3,2,"lang_auto_so_bao_danh_bi_trung")+": ",""),e.xp6(2),e.Q6J("ngForOf",t.duplicatedStudentCodes)}}function ng(n,o){1&n&&(e.TgZ(0,"div",26),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","- "+e.lcZ(2,1,"lang_auto_hoc_sinh_khong_co_so_bao_danh")," "))}function ig(n,o){if(1&n&&(e.TgZ(0,"div",23)(1,"div",17)(2,"div",24)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"span",13),e._uU(7),e.qZA()(),e.YNc(8,tg,5,4,"div",25),e.YNc(9,ng,3,3,"div",25),e.qZA()()),2&n){const t=o.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,4,"lang_auto_cac_loi_so_bao_danh_trong_lop")+" "," "),e.xp6(3),e.hij(" ",'"'+t.classroom.name+'": '," "),e.xp6(1),e.Q6J("ngIf",t.isDuplicatedStudentCode),e.xp6(1),e.Q6J("ngIf",t.isMissingStudentCode)}}function og(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",29),e._UZ(2,"path",30)(3,"path",31)(4,"path",32),e.qZA()())}function ag(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",33)(2,"g",34)(3,"g",35),e._UZ(4,"circle",36),e.TgZ(5,"path",37),e._UZ(6,"animateTransform",38),e.qZA()()()()())}function sg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e.YNc(2,ig,10,6,"div",19),e.qZA(),e.TgZ(3,"div",20)(4,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getStudentListByClassroomIds(a.classroomIds))}),e.YNc(5,og,5,0,"span",10),e.YNc(6,ag,7,0,"span",10),e.TgZ(7,"span",22),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.classroomErrorObjs),e.xp6(3),e.Q6J("ngIf",!t.loadingExport),e.xp6(1),e.Q6J("ngIf",t.loadingExport),e.xp6(2),e.hij(" ",e.lcZ(9,4,"lang_auto_tai_danh_sach_hoc_sinh_loi")," ")}}function rg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-student-list",39),e.NdJ("exportDataDone",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.exportStudentListDone(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("objs",t.exportStudentObjs)("type",1)}}let lg=(()=>{class n extends W.Q{constructor(t,i){super(),this.shareFileFlutterService=t,this.studentProfileV2Service=i,this.classroomErrorObjs=[],this.classroomIds="",this.examId=0,this.checkPostParam=!1,this.showExpandError=!1,this.loadingExport=!1}getStudentListByClassroomIds(t){this.loadingExport=!0,this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(t,this.checkPostParam?void 0:this.examId).subscribe(i=>{if(1===i.success){this.exportStudentObjs=i.data;let a=this.exportStudentObjs?.length??0;if(this.exportStudentObjs){let s=[],r=[];this.exportStudentObjs.forEach((l,c,d)=>{s.find(f=>f.identificationNumber===l.identificationNumber)?r.push(l):s.push(l)});for(let l=0;l<a;l++)if(this.exportStudentObjs[l].identificationNumber)for(let c=0;c<r.length;c++)this.exportStudentObjs&&this.exportStudentObjs[l].identificationNumber===r[c].identificationNumber&&(this.exportStudentObjs[l].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[l].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let s=0;s<a;s++)if(this.exportStudentObjs[s].identificationNumber)for(let r=s+1;r<a;r++)this.exportStudentObjs&&this.exportStudentObjs[s].identificationNumber===this.exportStudentObjs[r].identificationNumber&&(this.exportStudentObjs[s].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[s].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(i.message??"");this.loadingExport=!1}))}exportStudentListDone(t){let i=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(t,i)}toggleExpandErrors(){this.showExpandError=!this.showExpandError}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.g),e.Y36(iu.LU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-errors-identification"]],inputs:{classroomErrorObjs:"classroomErrorObjs",classroomIds:"classroomIds",examId:"examId",checkPostParam:"checkPostParam"},features:[e.qOj],decls:18,vars:11,consts:[[1,"azt-error-block"],[1,"flex","text-pending"],[1,"text-lg"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-triangle","data-lucide","alert-triangle",1,"lucide","lucide-alert-triangle","w-6","h-6","mr-2","flex-none"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[4,"ngFor","ngForOf"],[1,"mt-2","error-detail"],["azt-track-service","azt-errors-identification-ZElYECOq3mc",1,"btn-text-primary","font-medium",3,"click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["points","6 9 12 15 18 9"],["points","18 15 12 9 6 15"],[1,"mt-2"],[1,"alert","alert-outline-danger","show"],["class","text-md",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","azt-errors-identification-85xomF_be8D",1,"btn-text-primary","font-medium",3,"click"],[1,"text-primary"],[1,"text-md"],[1,"az-error-title"],["class","mt-1 text-xs",4,"ngIf"],[1,"mt-1","text-xs"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m8 17 4 4 4-4"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-5","h-5","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"objs","type","exportDataDone"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"line",5)(6,"line",6),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.YNc(9,Gh,4,2,"span",7),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.toggleExpandErrors()}),e.YNc(14,Wh,5,3,"span",10),e.YNc(15,Vh,5,3,"span",10),e.qZA(),e.YNc(16,sg,10,6,"div",11),e.qZA()(),e.YNc(17,rg,1,2,"azt-export-excel-for-student-list",12)),2&t&&(e.xp6(7),e.hij(" ",e.lcZ(8,7,"lang_auto_so_bao_danh_cua_hoc_sinh_trong_lop")," "),e.xp6(2),e.Q6J("ngForOf",i.classroomErrorObjs),e.xp6(1),e.hij(" ",e.lcZ(11,9,"lang_auto_dang_bi_trung_hoac_bi_thieu")," "),e.xp6(4),e.Q6J("ngIf",!i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.exportStudentObjs))},dependencies:[M.sg,M.O5,$h.s,re.bT],encapsulation:2}),n})();function cg(n,o){1&n&&(e.TgZ(0,"div",2),e.O4$(),e.TgZ(1,"svg",3)(2,"g",4)(3,"g",5),e._UZ(4,"circle",6),e.TgZ(5,"path",7),e._UZ(6,"animateTransform",8),e.qZA()()()()())}function ug(n,o){1&n&&(e.TgZ(0,"p",16),e.O4$(),e.TgZ(1,"svg",17),e._UZ(2,"path",18)(3,"polyline",19)(4,"path",20)(5,"rect",21)(6,"path",22),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()),2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_file_danh_sach_so_bao_danh")," "))}function dg(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),e._UZ(4,"circle",6),e.TgZ(5,"path",7),e._UZ(6,"animateTransform",8),e.qZA()()()()())}function mg(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",29),e._UZ(1,"path",30)(2,"polyline",31)(3,"line",32),e.qZA())}function _g(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",23),e._UZ(1,"input",24),e.TgZ(2,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.printStudentCode())}),e.YNc(3,dg,7,0,"span",26),e.YNc(4,mg,4,0,"ng-template",null,27,e.W1O),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=e.MAs(5),i=e.oxw(3);e.xp6(1),e.s9C("value",i.createExportStudentCodeName(!1)),e.xp6(2),e.Q6J("ngIf",i.isLoadingPrintCodeStudent)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_tai_ve")," ")}}const pg=function(n){return{"text-left":n}};function hg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.clickNumbering())}),e.O4$(),e.TgZ(2,"svg",29),e._UZ(3,"path",35)(4,"path",36)(5,"path",37)(6,"path",38),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(4,pg,1==t.styleView)),e.xp6(7),e.hij(" ",e.lcZ(8,2,"lang_auto_danh_lai_sbd")," ")}}function gg(n,o){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,ug,9,3,"p",13),e.YNc(2,_g,8,6,"div",14),e.YNc(3,hg,9,6,"div",15),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.checkNumbering),e.xp6(1),e.Q6J("ngIf",!t.checkNumbering),e.xp6(1),e.Q6J("ngIf",!t.checkNumbering)}}function fg(n,o){1&n&&(e.TgZ(0,"div",45),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_ban_chua_chon_lop_vui_long_chon_lop_de_in_so_bao_danh")," "))}function xg(n,o){1&n&&(e.TgZ(0,"div",57),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function bg(n,o){if(1&n&&(e.TgZ(0,"div",55),e.YNc(1,xg,3,3,"div",56),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.checkboxValidator)}}function vg(n,o){if(1&n&&(e.TgZ(0,"div",46)(1,"div",47)(2,"h3",48),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",49),e._UZ(6,"azt-list-classroom-checkall",50),e.qZA()(),e.TgZ(7,"div",51)(8,"div",52)(9,"ng-scrollbar",53),e._UZ(10,"azt-list-classroom-checkbox",54),e.qZA()(),e.YNc(11,bg,2,1,"div",41),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,10,"lang_auto_danh_so_bao_danh")," "),e.xp6(3),e.Q6J("form",t.form)("objs",t.classroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(3),e.Q6J("visibility","hover"),e.xp6(1),e.Q6J("form",t.form)("objs",t.classroomObjs)("examClassroomObjs",t.examClassroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors)}}function yg(n,o){if(1&n&&(e.TgZ(0,"div",55)(1,"div",57),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,1,t.msgErrorTwo)," ")}}function wg(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),e._UZ(4,"circle",6),e.TgZ(5,"path",7),e._UZ(6,"animateTransform",8),e.qZA()()()()())}function Cg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",58)(1,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.destroyConfig())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",60),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.savePrintExam())}),e.YNc(5,wg,7,0,"span",61),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid||!t.validFormIdentify),e.xp6(1),e.Q6J("ngIf",t.loadingConfig),e.xp6(1),e.hij(" ",e.lcZ(7,6,"lang_auto_tiep_tuc")," ")}}function kg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",62),e._UZ(1,"azt-errors-identification",63),e.TgZ(2,"div",64),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65)(6,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.backToChooseClassroom())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",67),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openAutomaticIdentification())}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("classroomErrorObjs",t.classroomErrorObjs)("classroomIds",t.classroomIds)("examId",null!==(i=null==t.examObj?null:t.examObj.id)&&void 0!==i?i:0)("checkPostParam",t.checkPostParam),e.xp6(2),e.hij(" ",e.lcZ(4,7,"lang_auto_vui_long_click_vao_sua_sbd_dot")," "),e.xp6(4),e.hij(" ",e.lcZ(8,9,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(11,11,"lang_auto_sua_sbd")," ")}}function Tg(n,o){if(1&n&&(e.YNc(0,fg,3,3,"div",39),e.YNc(1,vg,12,12,"div",40),e.YNc(2,yg,4,3,"div",41),e.TgZ(3,"div",42),e.YNc(4,Cg,8,8,"div",43),e.YNc(5,kg,12,13,"div",44),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngIf",""!==t.msgError&&t.form.controls.classroomIds.errors&&0===t.classroomErrorObjs.length),e.xp6(1),e.Q6J("ngIf",0===t.classroomErrorObjs.length),e.xp6(1),e.Q6J("ngIf","lang_core_class_has_no_student"===t.msgErrorTwo&&0===t.classroomErrorObjs.length),e.xp6(2),e.Q6J("ngIf",0===t.classroomErrorObjs.length),e.xp6(1),e.Q6J("ngIf",t.classroomErrorObjs.length>0)}}function Ag(n,o){if(1&n&&(e.TgZ(0,"form",9)(1,"div",10),e.YNc(2,gg,4,3,"div",11),e.YNc(3,Tg,6,5,"ng-template",null,12,e.W1O),e.qZA()()),2&n){const t=e.MAs(4),i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngIf",!i.checkNumbering)("ngIfElse",t)}}let Bd=(()=>{class n extends W.Q{createExportStudentCodeName(t){var i=this.printAnswersheetService.exportFileNameOfStudentCode(1,this.examObj?.name??"",this.examObj?.hashId??"");return t&&(i=this.commonService.replaceAll(i,"_","-")??""),i}clickNumbering(){this.checkNumbering=!0}showInputAdvanceSetting(){this.showAdvanceSetting=!this.showAdvanceSetting}backToChooseClassroom(){this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}destroyConfig(){this.checkNumbering=!1,this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}savePrintExam(){this.loadingConfig=!0,this.classroomErrorObjs=[];let t=this.commonService.getFormObj(this.form);var i=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.exam);const a=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,i,t.classroomIds);0===a.length&&this.examClassroomObjs.forEach(r=>{r.classroomId&&a.push(r.classroomId)}),this.classroomIds=a.toString(),this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:a,examHashId:this.hashId??""}).subscribe(r=>{if(1==r.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(this.hashId??""),this.msgErrorTwo="";else{let l=r?.data?.classrooms??[];for(let c=0;c<l.length;c++){const d=l[c];(d.isDuplicatedStudentCode||d.isMissingStudentCode)&&this.classroomErrorObjs.push(d)}this.loadingConfig=!1,this.msgErrorTwo=r.message??""}this.checkPostParam=!0})}printStudentCode(){this.isLoadingPrintCodeStudent=!0,this.subscriptions.add(this.offlineStudentCodeService.apiOfflineStudentCodeCreateStudentCodesGet(this.hashId).subscribe(t=>{if(1==t.success)this.printAnswersheetService.printStudentCode(this.examObj,t?.data?.objs??[]),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!1,this.msgError="",this.classroomErrorObjs=[];else{let i=t?.data?.examClassroomConfig?.classrooms??[],a=[];for(let s=0;s<i.length;s++){const r=i[s];(r.isDuplicatedStudentCode||r.isMissingStudentCode)&&this.classroomErrorObjs.push(r),a.push(r.classroom?.id)}this.classroomIds=a.toString(),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!0,this.msgError=t.message??""}this.checkPostParam=!1}))}calcMaxIndexInput(){let t=this.commonService.getFormObj(this.form);var i=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.exam);const a=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,i,t.classroomIds);let s=999999;return this.classroomObjs.forEach(r=>{this.commonService.filterArray(a,r.id)&&(s-=r.countStudents??0)}),s}checkValidFormIdentify(t){this.validFormIdentify=t.target instanceof HTMLInputElement&&Number(t.target.value)<=this.calcMaxIndexInput()}getExamDataByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{1==i.success?null!=i.data&&(this.examObj=i.data.examObj,this.classroomObjs=i.data.classroomObjs??new Array,this.examClassroomObjs=i.data.examClassroomObjs??[],this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}openAutomaticIdentification(){let t=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.exam),i=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,t,this.form.controls.classroomIds.value);0===i.length&&this.examClassroomObjs.forEach(a=>{a.classroomId&&i.push(a.classroomId)}),this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(i.toString()).subscribe(a=>{1===a.success&&(this.totalStudent=a.data?.length??0,this.dialog.open(Kh.p,{data:{type:2,listCheckBox:i,totalStudent:this.totalStudent},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(r=>{r&&this.savePrintExam()}))}))}ngOnInit(){this.hashId&&this.getExamDataByHashId(this.hashId),this.form=this.formBuilder.group({classroomIds:this.formBuilder.array([]),startIdentifyIndex:new p.p4(this.startStudentCode,[p.kI.min(1),p.kI.max(999999),p.kI.pattern(/^[0-9]*$/)]),whoAllow:new p.p4(2)},{validators:[zo.h.classroomCheckBoxValidator]}),super.ngOnInit()}constructor(t,i,a,s,r,l,c){super(),this.documentConfigService=t,this.formBuilder=i,this.dialog=a,this.offlineStudentCodeService=s,this.printAnswersheetService=r,this.sEAztClassroomCheckboxService=l,this.studentProfileV2Service=c,this.form=new p.nJ({}),this.hashId="",this.styleView=0,this.checkStudentCode=!1,this.startStudentCode=1,this.examObj=void 0,this.permissionTypes=Zn.y,this.checkNumbering=!1,this.checkDownloadSBD=!1,this.classroomObjs=[],this.examClassroomObjs=[],this.isLoadingPrintCodeStudent=!1,this.loadingConfig=!1,this.showAdvanceSetting=!1,this.validFormIdentify=!0,this.classroomErrorObjs=[],this.classroomIds="",this.msgError="",this.msgErrorTwo="",this.totalStudent=0,this.checkPostParam=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.Cq),e.Y36(p.qu),e.Y36(j.uw),e.Y36(Rn.MH),e.Y36(Ls.Y),e.Y36(Ki.L),e.Y36(iu.LU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["numbering-identification"]],inputs:{hashId:"hashId",styleView:"styleView",checkStudentCode:"checkStudentCode",startStudentCode:"startStudentCode"},features:[e.qOj],decls:3,vars:2,consts:[["class","w-full flex",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-full","flex"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-8","h-8","mx-auto"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"formGroup"],[1,"app"],["class","app",4,"ngIf","ngIfElse"],["numbering",""],["class","font-medium flex items-center intro-x",4,"ngIf"],["class","relative mt-2 intro-x",4,"ngIf"],["class","mt-3",3,"ngClass",4,"ngIf"],[1,"font-medium","flex","items-center","intro-x"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","text-success"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["points","14 2 14 8 20 8"],["d","M10 12h2v6"],["x","2","y","12","width","4","height","6"],["d","M10 18h4"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","numbering-identification-mO_7BlXNpZ8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[4,"ngIf","ngIfElse"],["donePrintCodeLoading",""],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"mt-3",3,"ngClass"],["azt-track-service","numbering-identification-GfouPhXkxs2",1,"btn","btn-outline-secondary",3,"click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["class","text-danger font-medium mb-4",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","w-full p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-2","justify-between","numbering-identification"],["class","col-span-12 items-center text-right mt-3",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],[1,"text-danger","font-medium","mb-4"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"main-numbering"],[2,"height","250px"],["pointerEventsMethod","scrollbar",3,"visibility"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName"],[1,"w-full","p-2"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"col-span-12","items-center","text-right","mt-3"],["azt-track-service","numbering-identification-EaHzWOF-ZYD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-422NanET_rP",1,"btn","btn-primary-soft",3,"disabled","click"],[4,"ngIf"],[1,"col-span-12","mt-3"],[3,"classroomErrorObjs","classroomIds","examId","checkPostParam"],[1,"mt-3","font-medium"],[1,"mt-3"],["azt-track-service","numbering-identification-yx-KGOCvWTN",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-_Mu1PflxZjE",1,"btn","btn-primary",3,"click"]],template:function(t,i){if(1&t&&(e.YNc(0,cg,7,0,"div",0),e.YNc(1,Ag,5,3,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.O5,x.KC,p._Y,p.JL,p.sg,p.CE,Ho.o,fa.g,lg,re.bT],encapsulation:2}),n})(),Og=(()=>{class n extends W.Q{btnCloseDialog(){this.dialogRef.close()}loadImage(){this.loading=!1}ngOnInit(){super.ngOnInit()}constructor(t,i,a){super(),this.dialog=t,this.dialogRef=i,this.data=a,this.loading=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(j.so,8),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["notice-print-a4-paper-dialog"]],features:[e.qOj],decls:25,vars:15,consts:[[1,"box",2,"max-width","650px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex"],[1,"inline-block","w-6","h-6","mr-2","text-pending","flex-none",2,"margin-top","4px"],["name","alert-octagon"],[1,"mb-0","h5"],[1,"p-3"],[1,"font-medium","mb-2"],[1,"text-center","mt-3"],[1,"flex","items-center",2,"max-height","50vh",3,"hidden"],[1,"w-10","h-10","mx-auto"],[3,"type"],[2,"max-height","50vh",3,"hidden"],["alt","",1,"h-auto","mx-auto",3,"src","load"],[1,"p-3","text-right"],["azt-track-service","notice-a4-dialog-ObwBAVC1Evd",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),e._UZ(5,"lucide-icon",5),e.qZA(),e.TgZ(6,"p",6),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"azt-mat-dialog-content")(10,"div",7)(11,"p",8),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11),e._UZ(17,"azt-loading-ui",12),e.qZA()(),e.TgZ(18,"div",13)(19,"img",14),e.NdJ("load",function(){return i.loadImage()}),e.ALo(20,"convertCdnLinkOfGitHubWithLocale"),e.qZA()()()()()(),e.TgZ(21,"div",15)(22,"button",16),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,7,"lang_auto_vui_long_cau_hinh_in_theo_mau_A4_nhu_huong_dan_duoi_day")),e.xp6(5),e.hij(" ",e.lcZ(13,9,"lang_core_after_printing_the_answer_sheet_please_check_that")," "),e.xp6(3),e.Q6J("hidden",!i.loading),e.xp6(2),e.Q6J("type","oval"),e.xp6(1),e.Q6J("hidden",i.loading),e.xp6(1),e.Q6J("src",e.lcZ(20,11,"azota_assets/medias_[LANG]/a4_template_answer_sheet.png"),e.LSH),e.xp6(4),e.hij(" ",e.lcZ(24,13,"lang_auto_dong")," "))},dependencies:[bt.O,Xo.J,h.Nh5,re.bT,re.y],encapsulation:2}),n})(),zd=(()=>{class n extends W.Q{showDialog(){this.dialog.open(Og,{data:{},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}constructor(t,i){super(),this.dialog=t,this.commonService=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["notice-print-a4-paper-box"]],features:[e.qOj],decls:3,vars:3,consts:[["azt-track-service","notice-a4-box-8TXulZreMgV",1,"btn-text-primary","ml-2","font-medium",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.showDialog()}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&t&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"lang_testbank_print_a4_notice"),")"))},dependencies:[re.bT],encapsulation:2}),n})();function Sg(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Eg(n,o){1&n&&(e.TgZ(0,"span",30),e._UZ(1,"azt-loading-ui",31),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function Mg(n,o){1&n&&(e.TgZ(0,"span",32),e._UZ(1,"lucide-icon",33),e.qZA())}function Ig(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.printPdfExam(!1,a.offlineExamObj.hashId,""))}),e.YNc(1,Eg,2,1,"span",28),e.YNc(2,Mg,2,0,"ng-template",null,29,e.W1O),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}if(2&n){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_tai_ve")," ")}}function Lg(n,o){1&n&&(e.TgZ(0,"span",34),e._UZ(1,"azt-loading-ui",31),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function Zg(n,o){1&n&&(e.TgZ(0,"span",32),e._UZ(1,"lucide-icon",33),e.qZA())}function Pg(n,o){1&n&&(e.TgZ(0,"span",34),e._UZ(1,"azt-loading-ui",31),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function jg(n,o){1&n&&(e.TgZ(0,"span",32),e._UZ(1,"lucide-icon",33),e.qZA())}function Dg(n,o){1&n&&(e.TgZ(0,"span",30),e._UZ(1,"azt-loading-ui",31),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function Ng(n,o){1&n&&(e.TgZ(0,"span",32),e._UZ(1,"lucide-icon",33),e.qZA())}function Qg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.printPdfExam(!0,a.offlineExamObj.hashId,""))}),e.YNc(1,Dg,2,1,"span",28),e.YNc(2,Ng,2,0,"ng-template",null,29,e.W1O),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}if(2&n){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_tai_ve")," ")}}function qg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",36),e.NdJ("exportDataDone",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw(2);let i;e.Q6J("startQuestionIndex",null!==(i=t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}function Fg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),e._UZ(5,"lucide-icon",7),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e._UZ(8,"div",8),e.qZA(),e.TgZ(9,"div",9),e._UZ(10,"input",10),e.YNc(11,Ig,6,5,"button",11),e.qZA()(),e.TgZ(12,"div",12)(13,"p",13)(14,"span",14),e._UZ(15,"lucide-icon",15),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e._UZ(18,"notice-print-a4-paper-box"),e.qZA(),e.TgZ(19,"div",9),e._UZ(20,"input",10),e.TgZ(21,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printExamAnswersheet(a.offlineExamObj.hashId))}),e.YNc(22,Lg,2,1,"span",17),e.YNc(23,Zg,2,0,"ng-template",null,18,e.W1O),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()(),e.TgZ(27,"div",12)(28,"p",13)(29,"span",19),e._UZ(30,"lucide-icon",20),e.qZA(),e._uU(31),e.ALo(32,"mytranslate"),e.qZA(),e.TgZ(33,"div",9),e._UZ(34,"input",10),e.TgZ(35,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportExcelForAnswerSheet())}),e.YNc(36,Pg,2,1,"span",17),e.YNc(37,jg,2,0,"ng-template",null,22,e.W1O),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()(),e.TgZ(41,"div",3)(42,"div",4)(43,"div",5)(44,"span",6),e._UZ(45,"lucide-icon",7),e.qZA(),e._uU(46),e.ALo(47,"mytranslate"),e.qZA()(),e.TgZ(48,"div",9),e._UZ(49,"input",10),e.YNc(50,Qg,6,5,"button",23),e.qZA()(),e.TgZ(51,"div",12)(52,"div",24),e._UZ(53,"numbering-identification",25),e.ALo(54,"mustInClassroom"),e.qZA()()(),e.YNc(55,qg,1,2,"azt-export-excel-for-answersheet",26)}if(2&n){const t=e.MAs(24),i=e.MAs(38),a=e.oxw();let s;e.xp6(6),e.hij(" ",e.lcZ(7,20,"lang_auto_file_de_thi")," "),e.xp6(4),e.s9C("value",a.createNameExam("exam",!0)),e.xp6(1),e.Q6J("ngIf",0==a.showFormAddInformation),e.xp6(5),e.hij(" ",e.lcZ(17,22,"lang_auto_file_phieu_tra_loi")," "),e.xp6(4),e.s9C("value",a.createNameExam("answersheet",!0)),e.xp6(2),e.Q6J("ngIf",a.loadingObj.downloadAnswerSheet)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(26,24,"lang_auto_tai_ve")," "),e.xp6(6),e.hij(" ",e.lcZ(32,26,"lang_auto_file_answer_list")," "),e.xp6(3),e.s9C("value",a.createNameExam("answerexcel",!0)),e.xp6(2),e.Q6J("ngIf",a.isLoadingPrintAnswer)("ngIfElse",i),e.xp6(3),e.hij(" ",e.lcZ(40,28,"lang_auto_tai_ve")," "),e.xp6(7),e.hij(" ",e.lcZ(47,30,"lang_auto_file_de_thi_kem_dap_an")," "),e.xp6(3),e.s9C("value",a.createNameExam("answerdocx",!0)),e.xp6(1),e.Q6J("ngIf",0==a.showFormAddInformation),e.xp6(3),e.Q6J("hashId",a.examObj.hashId)("checkStudentCode",e.lcZ(54,32,null!==(s=a.examObj.whoAllow)&&void 0!==s?s:0))("startStudentCode",a.startStudentCode),e.xp6(2),e.Q6J("ngIf",null!=a.exportExcelData)}}let Jd=(()=>{class n extends W.Q{closeChangeInformation(t){this.showFormAddInformation=!1,t&&this.printPdfExam(!1,this.offlineExamObj.hashId,"")}createNameExam(t,i){var a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):"answerexcel"==t||"answerdocx"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var s=".docx";return s="answersheet"==t&&7!=this.offlineExamObj.answersheetTemplate?".pdf":s,a+("answerexcel"==t?".xlsx":s)}printExamAnswersheet(t){this.loadingObj.downloadAnswerSheet=!0,this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this?.examObj?.hashId??"",t??"","").subscribe(i=>{if(1===i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const s=a;let r=i.data?.offlineExamObj?.answersheetTemplate??0,l=i?.data?.offlineExamObj?.totalQuestionOfAnswersheet??void 0;this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,r,s,0,i.data?.maxOfflineMixQuestionHashId,l);let c=this.createNameExam("answersheet",!1);this.answerSheetHelper.createAnswerSheet().subscribe(d=>{1==d.success?this.answerSheetHelper.exportPdf(c):this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1})}else this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1}else this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1}))}getTotalQuestionInMixQuestionObjs(t,i){if(t.length>0){let a=0;return t.forEach(s=>{let r=this.zipDataService.decodeContentGzip(s?.mixDatas??""),l=this.castJsonToObj(r);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}printPdfExam(t,i,a){_o.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??""),this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionListMixExamQuestionsGet(this.examObj.hashId,i).subscribe(s=>{if(1===s.success)if(_o.G.changeMsgLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??""),s.data?.offlineExamMixQuestions){let r={nameSchool:"",nameSubject:""};this.examPrintInfoObj?.status&&(r={nameSchool:this.examPrintInfoObj?.schoolName??"",nameSubject:this.examPrintInfoObj?.subject??""});let l=this.tableAnswerDownload.value?2:0;if(1==s.data?.offlineExamMixQuestions.length){let c=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(s.data?.offlineExamMixQuestions[0].mixQuestions??[]))??[];this.exportDocxService.downloadExam(t,s.data.exam??{},s.data?.offlineExam,s.data?.offlineExamMixQuestions[0],c,r,l,d=>_o.G.closeLoadingEffect(d),d=>{_o.G.changeMsgLoadingEffect(d)},void 0,!0).then().catch(d=>{this.showErrorSnack(d.message)})}else this.exportDocxService.downloadExamObjs(t,s.data.exam??{},s.data?.offlineExam,s.data?.offlineExamMixQuestions,r,l,c=>_o.G.closeLoadingEffect(c),c=>{_o.G.changeMsgLoadingEffect(c)},void 0,!0).then().catch(c=>{this.showErrorSnack(c.message)})}else _o.G.closeLoadingEffect(10),this.showErrorSnack("lang_auto_khong_co_du_lieu_dao_de");else this.errorStatusObj(s.message??"",!0),_o.G.closeLoadingEffect(10)}))}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i),this.isLoadingPrintAnswer=!1}ngOnInit(){var t=[{source:this.cdnService.convertCdnLinkOfGitHub("almo/opencv.js"),name:"opencv_crop_white.js"}];this.commonService.loadScriptPromises(t).then(()=>{this.isLoadingLib=!1}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f,y,O,N,I){super(),this.shareFileFlutterService=t,this.activeRoute=i,this.fb=a,this.dialog=s,this.printAnswersheetService=r,this.offlineMixQuestionService=l,this.answerSheetHelper=c,this.zipDataService=d,this.cdnService=f,this.exportDocxService=y,this.offlineExamExportService=O,this.exportExcelService=N,this.browserStorageService=I,this.startStudentCode=1,this.loadingObj={},this.isLoadingLib=!0,this.isLoadingPrintAnswer=!1,this.showFormAddInformation=!1,this.tableAnswerDownload=new p.NI(!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.g),e.Y36(T.gz),e.Y36(p.QS),e.Y36(j.uw),e.Y36(Ls.Y),e.Y36(Rn.fs),e.Y36(Ud),e.Y36($i.D),e.Y36(xt.U),e.Y36(nu.m),e.Y36(Rn.qr),e.Y36(zr.O),e.Y36(we.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["print-history-box"]],inputs:{examObj:"examObj",offlineExamObj:"offlineExamObj",startStudentCode:"startStudentCode",examPrintInfoObj:"examPrintInfoObj"},features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"action-history"],[1,"action-file","mt-4"],[1,"font-medium","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto","flex","items-center"],[1,"inline-block","w-4","h-4","text-pending","mr-2"],["name","file-check"],[1,"form-check","mt-1","md:mt-0"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-031D9RFdQh","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-danger"],["name","file-spreadsheet"],["azt-track-service","print_history-XPpw6jKuAiS",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneAnswerSheetLoading",""],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["doneLoadingPrintAnswer",""],["azt-track-service","print_history-yYG9YXhT8","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"intro-x"],[3,"hashId","checkStudentCode","startStudentCode"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],["azt-track-service","print_history-031D9RFdQh",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 text-white mr-2",4,"ngIf","ngIfElse"],["doneExamLoading",""],[1,"w-4","h-4","text-white","mr-2"],[3,"type"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[1,"w-4","h-4","mr-2","text-white"],["azt-track-service","print_history-yYG9YXhT8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){if(1&t&&(e.YNc(0,Sg,1,0,"azt-loading-effect",0),e.YNc(1,Fg,56,34,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isLoadingLib&&null!=i.examObj&&null!=i.offlineExamObj)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,Jr,Xo.J,h.Nh5,Bd,zd,re.bT,re.Bm],encapsulation:2}),n})();function Ug(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Rg(n,o){1&n&&(e.TgZ(0,"div",33)(1,"h3",34),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",35),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_tao_de_thanh_cong")," \u{1f44f} "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"lang_auto_vui_long_chon_cac_hinh_thuc_ben_duoi")," "))}function Bg(n,o){if(1&n&&e._UZ(0,"print-history-box",38),2&n){const t=e.oxw(3);e.Q6J("examObj",t.examObj)("offlineExamObj",t.offlineExamObj)("examPrintInfoObj",t.examPrintInfoObj)("startStudentCode",t.startStudentCode)}}function zg(n,o){if(1&n&&(e.TgZ(0,"div",11)(1,"h3",36),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Bg,1,4,"print-history-box",37),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_du_lieu_gan_nhat")," "),e.xp6(2),e.Q6J("ngIf",t.examObj&&t.offlineExamObj)}}function Jg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"h3",6),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",7)(5,"span",8),e._UZ(6,"lucide-icon",9),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.TgZ(9,"a",40),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",11)(13,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectPowerpoint())}),e.TgZ(14,"span",13),e._UZ(15,"lucide-icon",42),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"p",15),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_auto_chen_vao_powerpoint")," "),e.xp6(5),e.hij(" ",e.lcZ(8,7,"lang_auto_chen_noi_dung_cau_hoi_vao_slide_powerpoint_hoc_sinh_co_the_tuong_tac_dot")," "),e.xp6(3),e.Oqu(e.lcZ(11,9,"lang_auto_xem_huong_dan_tai_day")),e.xp6(6),e.hij(" ",e.lcZ(17,11,"lang_auto_chen_vao_powerpoint")," "),e.xp6(3),e.hij(" ",e.lcZ(20,13,"lang_auto_comment_powerpoint_guild")," "))}function Hg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.YNc(1,Rg,7,6,"div",4),e.TgZ(2,"div",5)(3,"h3",6),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",7)(7,"span",8),e._UZ(8,"lucide-icon",9),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.TgZ(11,"a",10),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"div",11)(15,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectConfigTestOnline())}),e.TgZ(16,"span",13),e._UZ(17,"lucide-icon",14),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"p",15),e._uU(21),e.ALo(22,"mytranslate"),e.TgZ(23,"a",16),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"h3",6),e._uU(28),e.ALo(29,"mytranslate"),e.qZA(),e.TgZ(30,"div",7)(31,"span",8),e._UZ(32,"lucide-icon",9),e.qZA(),e._uU(33),e.ALo(34,"mytranslate"),e.TgZ(35,"a",18),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.TgZ(38,"div",11)(39,"div",19)(40,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDialogExamPrintTicket())}),e.TgZ(41,"span",13),e._UZ(42,"lucide-icon",21),e.qZA(),e.TgZ(43,"span",22),e._uU(44),e.ALo(45,"mytranslate"),e.ALo(46,"mytranslate"),e.qZA()(),e.TgZ(47,"p",15),e._uU(48),e.ALo(49,"mytranslate"),e.qZA()()(),e.YNc(50,zg,5,4,"div",23),e.qZA(),e.YNc(51,Jg,21,15,"div",24),e.ALo(52,"fullPermission"),e.TgZ(53,"div",25)(54,"div",26)(55,"a",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getRouterLinkToExamResult())}),e.TgZ(56,"span",28),e._UZ(57,"lucide-icon",29),e.qZA(),e._uU(58),e.ALo(59,"mytranslate"),e.qZA()(),e.TgZ(60,"div",30)(61,"a",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToDocumentManager())}),e.TgZ(62,"span",28),e._UZ(63,"lucide-icon",32),e.qZA(),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNewDocument),e.xp6(3),e.hij(" ",e.lcZ(5,17,"lang_auto_online")," "),e.xp6(5),e.hij(" ",e.lcZ(10,19,"lang_auto_copy_link_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai_online_ho_tro_ca_trac_nghiem_va_tu_luan")," "),e.xp6(3),e.Oqu(e.lcZ(13,21,"lang_auto_tim_hieu_them")),e.xp6(6),e.hij(" ",e.lcZ(19,23,"lang_auto_cai_dat_lam_bai_online")," "),e.xp6(3),e.hij(" ",e.lcZ(22,25,"lang_auto_thiet_lap_thoi_gian_lam_bai_giam_sat_tu_dong_tao_de_con_cho_phep_xem_diem_doing_xuat_ban_de_tao_link_gui_cho_hoc_sinh_lam_bai_va_nop_bai")," "),e.xp6(3),e.Oqu(e.lcZ(25,27,"lang_auto_tim_hieu_them")),e.xp6(4),e.hij(" ",e.lcZ(29,29,"lang_auto_offline")," "),e.xp6(5),e.hij(" ",e.lcZ(34,31,"lang_auto_in_de_cho_hoc_sinh_lam_tren_giay_scan_hoac_chup_anh_bai_lam_cua_hoc_sinh_va_upload_len_azota_de_cham_tu_dong_hoc_sinh_cung_co_the_tu_chup_lai_bai_lam_cua_minh_va_nop_tren_azota")," "),e.xp6(3),e.Oqu(e.lcZ(37,33,"lang_auto_tim_hieu_them")),e.xp6(8),e.AsE("",e.lcZ(45,35,"lang_auto_in_de_upper")," ",e.lcZ(46,37,"lang_auto_-_co_phieu_tra_loi_trac_nghiem_rieng"),""),e.xp6(4),e.hij(" ",e.lcZ(49,39,"lang_auto_xuat_file_pdf_chua_cac_de_thi_da_duoc_dao_thu_tu_cau_hoi_va_dap_an_tu_de_goc_kem_theo_mot_file_pdf_chua_mau_phieu_tra_loi_trac_nghiem_theo_mau_tuy_chon")," "),e.xp6(2),e.Q6J("ngIf",null==t.offlineExamObj?null:t.offlineExamObj.hashId),e.xp6(1),e.Q6J("ngIf",e.xi3(52,41,null==t.examObj?null:t.examObj.permissionObj,"exam")),e.xp6(7),e.hij(" ",e.lcZ(59,44,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(6),e.hij(" ",e.lcZ(65,46,"lang_auto_ve_trang_quan_ly_file")," ")}}let Kg=(()=>{class n extends W.Q{redirectConfigTestOnline(){let t=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,`?backto=${t}`)}openDialogExamPrintTicket(){let t=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/print-exam-and-ticket/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,`?backto=${t}`)}redirectPowerpoint(){let t=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/powerpoint/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${t}`)}getRouterLinkToExamResult(){let t=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",t?"?"+t:"")}getBackData(t,i){let a="";if(t.includes("backto")){let s=t.substring(t.lastIndexOf("backto"));a=s.includes("shareType")&&i?s.substring(s.lastIndexOf("data")):s}else a=t.includes("shareType")&&i?t.substring(t.lastIndexOf("data")):"backto="+t;return a}backToDocumentManager(){let t=this.getBackData(this.backToLink,!0);var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.myNavigationWithQueryString(`/admin/testbank/document-management/0/${i}/1`,t?"?"+decodeURIComponent(t):"")}getExamInfoByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,i.data&&i.data?.examObj&&(this.examObj=i.data.examObj,this.offlineExamObj=i.data.offlineExamObj,this.examPrintInfoObj=i.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(t,i,a){super(),this.activeRoute=t,this.dialog=i,this.documentConfigService=a,this.backToLink="",this.paramBackToLink="",this.returnToLink="",this.examHashId="",this.isNewDocument=!1,this.startStudentCode=1}ngOnInit(){let t=this.commonService.getMyQueryParam("isNewDocument")??"";this.isNewDocument="1"==t.toString();var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.paramBackToLink=this.commonService.getMyQueryParam("backto")??"",this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.paramBackToLink?this.paramBackToLink:`/admin/testbank/document-management/0/${i??0}/1`,this.returnToLink=`/admin/testbank/action-online-offline/${i??0}/${this.examHashId}?backto=`+this.paramBackToLink,this.getExamInfoByHashId(this.examHashId),this.commonService.translateMetaData({title:"lang_cms_action_online_offline_title",description:"lang_cms_action_online_offline_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(j.uw),e.Y36(Ve.Cq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-action-online-offline"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],["class","action-heading mb-4",4,"ngIf"],[1,"action-online"],[1,"text-md","uppercase","font-medium"],[1,"text-md","mt-1"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["azt-track-service","action-online-offline-9sByNv80IwU","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"box","mt-3","p-5"],["azt-track-service","action-online-offline-Ow1f0tm7-at",1,"btn","btn-outline-primary",3,"click"],[1,"w-5","h-5","mr-2"],["name","cog"],[1,"text-xs","mt-2","text-slate-500"],["azt-track-service","action-online-offline-McQDzOjO9G-","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"action-offline","mt-8"],["azt-track-service","action-online-offline-yRjklKAot9b","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-offline/gioi-thieu-tinh-nang-thi-offline/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"azt-offline-print"],["azt-track-service","action-online-offline-IIO1TsHmgjr",1,"btn","btn-outline-primary",3,"click"],["name","printer"],[1,"mr-1"],["class","box mt-3 p-5",4,"ngIf"],["class","action-online mt-8",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","action-online-offline-ftSDs5DiFWa",1,"btn","btn-outline-primary","btn-transparent",3,"click"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","action-online-offline-A6xAK9qc23J",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["name","folder"],[1,"action-heading","mb-4"],[1,"text-md","font-medium","mb-1"],[1,"text-md"],[1,"text-md","font-medium","flex","items-center"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode",4,"ngIf"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode"],[1,"action-online","mt-8"],["azt-track-service","action-online-offline-gcTAKBJcf3U","href","https://www.youtube.com/watch?v=FpcOtHNGMCQ&ab_channel=Azota","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],["azt-track-service","action-online-offline-sbrNKGia_Tt",1,"btn","btn-outline-primary",3,"click"],["name","sidebar"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,Ug,1,0,"azt-loading-effect",1),e.YNc(2,Hg,66,48,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,pn._,h.Nh5,Jd,re.bT,re.Gf],encapsulation:2}),n})(),$g=(()=>{class n extends W.Q{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(t,i){super(),this.dialogRef=t,this.data=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-dialog-danger"]],features:[e.qOj],decls:14,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"w-6","h-6","mr-2","text-danger","inline-block","flex-none"],["name","trash-2"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),e._UZ(5,"lucide-icon",5),e.qZA(),e._UZ(6,"span",6),e.qZA()()(),e.TgZ(7,"div",7)(8,"button",8),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return i.confirmDialog()}),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("innerHtml",i.data.content,e.oJD),e.xp6(3),e.hij(" ",e.lcZ(10,3,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(13,5,"lang_auto_xac_nhan")," "))},dependencies:[h.Nh5,re.bT],encapsulation:2}),n})(),ci=(()=>{class n{static openLoadingEffect(t){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=t,i.style.display="flex")}static closeLoadingEffect(t){return new Promise(i=>{setTimeout(()=>{var a=document.getElementById(this.idComponent),s=document.getElementById(this.idStatusContent);null!==a&&null!==s&&(a.style.display="none",s.innerText=""),i(!0)},t)})}static changeMsgLoadingEffect(t){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=t)}ngOnInit(){}constructor(){this.idComponent="status-loading-effect-component",this.idStatusContent="status-loading-effect-component-content"}}return n.idComponent="status-loading-effect-component",n.idStatusContent="status-loading-effect-component-content",n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["status-loading-effect-component"]],decls:7,vars:3,consts:[[1,"loading-effect",2,"display","none","position","fixed","display","flex","width","100vw","height","100%","background","#000000c7","color","#ffffff","font-size","20px","font-weight","lighter","justify-content","center","align-items","center","cursor","progress","z-index","1001","top","0","left","0",3,"id"],[1,"text-center","loading-effect-frame",2,"height","85%","overflow-x","auto"],[1,"flex","justify-center","mt-5"],[1,"w-6","h-6"],[3,"type"],[1,"span-status",2,"margin-top","10px","position","relative","animation","animatefadeIn 0.3s"],[3,"id"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"azt-loading-ui",4),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"span",6),e.qZA()()()),2&t&&(e.Q6J("id",i.idComponent),e.xp6(4),e.Q6J("type","oval"),e.xp6(2),e.Q6J("id",i.idStatusContent))},dependencies:[Xo.J],encapsulation:2}),n})();S(77424);var Ca=S(74104);function vf(n,o){1&n&&(e.TgZ(0,"div",17)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function yf(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13)(2,"label",14),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",13),e._UZ(6,"input",15),e.ALo(7,"mytranslate"),e.YNc(8,vf,4,3,"div",16),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_ten_de")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(7,5,"lang_auto_nhap_ten_de")+" ..."),e.xp6(2),e.Q6J("ngIf",t.form.controls.nameExam.errors)}}function wf(n,o){1&n&&(e.TgZ(0,"div",19)(1,"span",20),e._UZ(2,"azt-loading-ui",21),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("type","oval"))}function Cf(n,o){if(1&n&&(e.ynx(0),e.YNc(1,wf,3,1,"div",18),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.type!==t.typeScreenCreateExamOffline.edit)}}function kf(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"config-level-subject",24),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("form",t.form)("schoolLevelObjs",t.schoolLevelObjs)("schoolSubjectObjs",t.schoolSubjectObjs)("typeView",1)}}function Tf(n,o){if(1&n&&e.YNc(0,kf,2,4,"div",22),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.type!==t.typeScreenCreateExamOffline.edit)}}function Af(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"div",26),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",27)(5,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addItemCodeExam())}),e.TgZ(6,"span",29),e._UZ(7,"lucide-icon",30),e.qZA(),e.TgZ(8,"span",31),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_core_danh_sach_ma_de")," "),e.xp6(7),e.Oqu(e.lcZ(10,4,"lang_auto_them_ma_de")))}function Of(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_khong_qua_120_cau")," "))}function Sf(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Ef(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_hoi")," "))}function Mf(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,Of,3,3,"span",57),e.YNc(2,Sf,3,3,"span",57),e.YNc(3,Ef,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.max),e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.min),e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.required)}}function If(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_diem_trac_nghiem")," "))}function Lf(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Zf(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,If,3,3,"span",57),e.YNc(2,Lf,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionMultiple.errors.required),e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionMultiple.errors.min||0===t.controls.scoreQuestionMultiple.value)}}function Pf(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")," "))}function jf(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan")," "))}function Df(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,Pf,3,3,"span",57),e.YNc(2,jf,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionEssay.errors.max),e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionEssay.errors.required)}}function Nf(n,o){1&n&&(e.TgZ(0,"div",56)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_core_enter_essay_score_greater_than_zero")," "))}function Qf(n,o){1&n&&(e.TgZ(0,"div",58)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_core_missing_essay_question")," "))}const Zs=function(n){return{width:n}};function qf(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",67),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2).index,l=e.oxw().index,c=e.oxw(2),d=c.index,f=c.$implicit,y=e.oxw(3);return e.KtG(y.chooseAnswerQuestion(d,r+l*f.controls.colTotalItem.value,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("disabled",!0)("ngStyle",e.VKq(6,Zs,"TL"!=t?"35px":"80px"))("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ","TL"!=t?t:e.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function Ff(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qf,4,8,"ng-container",66),e.BQk()),2&n){const t=e.oxw(7);e.xp6(1),e.Q6J("ngForOf",t.configAnswerData)}}function Uf(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",67),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2).index,l=e.oxw().index,c=e.oxw(2),d=c.index,f=c.$implicit,y=e.oxw(3);return e.KtG(y.chooseAnswerQuestion(d,r+l*f.controls.colTotalItem.value,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("disabled","TL"===t)("ngStyle",e.VKq(6,Zs,"TL"!=t?"35px":"80px"))("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ","TL"!=t?t:e.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function Rf(n,o){if(1&n&&e.YNc(0,Uf,4,8,"ng-container",66),2&n){const t=e.oxw(7);e.Q6J("ngForOf",t.configAnswerData)}}function Bf(n,o){if(1&n&&(e.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()(),e.YNc(7,Ff,2,1,"ng-container",5),e.YNc(8,Rf,1,1,"ng-template",null,65,e.W1O),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(9),s=e.oxw().index,r=e.oxw(2).$implicit;e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.AsE(" ",e.lcZ(5,5,"lang_auto_cau")+" "+(i+1+s*r.controls.colTotalItem.value)+" "," ","("+t.value.point+" "+e.lcZ(6,7,"lang_auto_diem")+")"," "),e.xp6(3),e.Q6J("ngIf",t.controls.isEssay.value)("ngIfElse",a)}}function zf(n,o){if(1&n&&(e.TgZ(0,"div",59),e.YNc(1,Bf,10,9,"div",60),e.qZA()),2&n){const t=o.index,i=e.oxw(2).$implicit;let a;e.xp6(1),e.Q6J("ngForOf",null==(a=i.get("answerList"))?null:a.controls.slice(t*i.controls.colTotalItem.value,t*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function Jf(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h3",39)(5,"span",40),e._uU(6),e.ALo(7,"mytranslate"),e.ALo(8,"formatOfflineExamHashIdToNumber"),e.qZA()()()(),e.TgZ(9,"div",41)(10,"div",42)(11,"div",13)(12,"div",12)(13,"div",13)(14,"label",43),e._uU(15),e.ALo(16,"mytranslate"),e.ALo(17,"mytranslate"),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"div",13)(20,"input",44),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(),s=a.$implicit,r=a.index,l=e.oxw(3);return e.KtG(l.updateCountQuestion(s,r))}),e.ALo(21,"mytranslate"),e.qZA(),e.YNc(22,Mf,4,3,"div",45),e.qZA()()()(),e.TgZ(23,"div",46)(24,"div",47)(25,"div",12)(26,"div",13)(27,"label",48),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"div",13)(31,"input",49),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.updateScoreQuestion(a))}),e.ALo(32,"mytranslate"),e.qZA(),e.YNc(33,Zf,3,2,"div",45),e.qZA()()(),e.TgZ(34,"div",47)(35,"div",12)(36,"div",13)(37,"label",50),e._uU(38),e.ALo(39,"mytranslate"),e.qZA()(),e.TgZ(40,"div",13)(41,"input",51),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.updateScoreQuestion(a))}),e.ALo(42,"mytranslate"),e.qZA(),e.YNc(43,Df,3,2,"div",45),e.YNc(44,Nf,4,3,"div",45),e.YNc(45,Qf,4,3,"div",52),e.qZA()()()()(),e.TgZ(46,"div",41)(47,"div",53)(48,"h3",54),e._uU(49),e.ALo(50,"mytranslate"),e.qZA(),e.TgZ(51,"div",12),e.YNc(52,zf,2,1,"div",55),e.qZA()()()()()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(3);let r,l;e.Q6J("formGroup",i),e.xp6(6),e.hij(" ",e.lcZ(7,20,"lang_auto_ma_de")+": "+e.lcZ(8,22,i.controls.codeExam.value)," "),e.xp6(9),e.lnq(" ",e.lcZ(16,24,"lang_core_total_question")," ","("+e.lcZ(17,26,"lang_core_count_multiple_question")+": "+i.controls.totalQuestionMultiple.value+", "," ",e.lcZ(18,28,"lang_core_count_essay_question")+": "+i.controls.totalQuestionEssay.value+") "," "),e.xp6(5),e.s9C("placeholder",e.lcZ(21,30,"lang_auto_nhap_so_cau")+" ..."),e.Q6J("readonly",s.type===s.typeScreenCreateExamOffline.edit),e.xp6(2),e.Q6J("ngIf",(i.controls.totalQuestion.dirty||i.controls.totalQuestion.touched)&&i.controls.totalQuestion.errors),e.xp6(6),e.hij(" ",e.lcZ(29,32,"lang_auto_tong_diem_trac_nghiem")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(32,34,"lang_auto_nhap_so_diem")+" ..."),e.Q6J("decimal",!0),e.xp6(2),e.Q6J("ngIf",(i.controls.scoreQuestionMultiple.dirty||i.controls.scoreQuestionMultiple.touched)&&i.controls.scoreQuestionMultiple.errors||0!==a&&i.controls.scoreQuestionMultiple.errors),e.xp6(5),e.hij(" ",e.lcZ(39,36,"lang_auto_tong_diem_tu_luan")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(42,38,"lang_auto_nhap_so_diem")+" ..."),e.Q6J("decimal",!0),e.xp6(2),e.Q6J("ngIf",(i.controls.scoreQuestionEssay.dirty||i.controls.scoreQuestionEssay.touched)&&i.controls.scoreQuestionEssay.errors),e.xp6(1),e.Q6J("ngIf",0==i.controls.scoreQuestionEssay.value&&0!=i.controls.totalQuestionEssay.value&&!i.controls.scoreQuestionEssay.errors),e.xp6(1),e.Q6J("ngIf",0==i.controls.totalQuestionEssay.value&&0!=i.controls.scoreQuestionEssay.value&&!i.controls.scoreQuestionEssay.errors),e.xp6(4),e.Oqu(e.lcZ(50,40,"lang_auto_bang_dap_an")),e.xp6(3),e.Q6J("ngForOf",null==(r=i.get("answerList"))?null:r.controls.slice(0,(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value%1==0?(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value:(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value+1))}}function Hf(n,o){if(1&n&&(e.TgZ(0,"div",33),e.YNc(1,Jf,53,42,"div",34),e.qZA()),2&n){const t=o.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i.selected.value===t)}}function Kf(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Hf,2,1,"div",32),e.BQk()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngForOf",null==(i=t.form.get("codeExamList"))?null:i.controls)}}const $f=function(n){return{"text-danger":n}};function Yf(n,o){if(1&n&&(e.TgZ(0,"span",71),e.ALo(1,"numberFloat"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(3);e.Q6J("ngClass",e.VKq(6,$f,(i.invalid||i.controls.checkDuplicateError.value&&s.codeExamDuplicateList.includes(e.lcZ(1,2,i.controls.codeExam.value)))&&s.selected.value!==a)),e.xp6(2),e.hij(" ",""!=i.controls.codeExam.value?i.controls.codeExam.value:e.lcZ(3,4,"lang_core_chua_nhap_ma_de")," ")}}function Gf(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_dau_du_dap_an_cau_hoi")," "))}function Wf(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(5).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_nhap_thieu_dap_an_tu_cau")+" "+(null==t.controls||null==t.controls.emptyAnswer||null==t.controls.emptyAnswer.value?null:t.controls.emptyAnswer.value.split(", ")[0])+" "+e.lcZ(3,3,"lang_core_den_cau")+" "+t.controls.emptyAnswer.value.split(", ")[t.controls.emptyAnswer.value.split(", ").length-1]," ")}}function Vf(n,o){if(1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n){const t=e.oxw(5).$implicit;e.hij(" ",e.lcZ(1,1,"lang_core_nhung_cau_chua_nhap_dap_an")+": "+t.controls.emptyAnswer.value," ")}}function Xf(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Wf,4,5,"span",5),e.YNc(2,Vf,2,3,"ng-template",null,81,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(4).$implicit;e.xp6(1),e.Q6J("ngIf",(null==i.controls||null==i.controls.emptyAnswer||null==i.controls.emptyAnswer.value?null:i.controls.emptyAnswer.value.split(", ").length)>10)("ngIfElse",t)}}function e1(n,o){if(1&n&&(e.TgZ(0,"div",80),e.YNc(1,Gf,3,3,"span",57),e.YNc(2,Xf,4,2,"span",57),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf","emptyAll"===(null==t.controls||null==t.controls.emptyAnswer?null:t.controls.emptyAnswer.value)),e.xp6(1),e.Q6J("ngIf","emptyAll"!==(null==t.controls||null==t.controls.emptyAnswer?null:t.controls.emptyAnswer.value)&&"success"!==(null==t.controls||null==t.controls.emptyAnswer?null:t.controls.emptyAnswer.value))}}function t1(n,o){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,e1,3,2,"div",79),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",null==t.controls||null==t.controls.emptyAnswer?null:t.controls.emptyAnswer.value)}}function n1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ma_de")," "))}function i1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_ma_de_phai_la_so_tu_1"),"",e.lcZ(3,4,"lang_auto_-999_va_toi_da_3_ky_tu")," "))}function o1(n,o){if(1&n&&(e.TgZ(0,"div",17),e.YNc(1,n1,3,3,"span",57),e.YNc(2,i1,4,6,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.codeExam.errors.required),e.xp6(1),e.Q6J("ngIf",t.controls.codeExam.errors.min||t.controls.codeExam.errors.max||t.controls.codeExam.errors.maxlength)}}function a1(n,o){1&n&&(e.TgZ(0,"div",17)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_vui_long_khong_nhap_trung_ma_de")," "))}function s1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,s=e.oxw(3);return e.KtG(s.removeItemCodeExam(a))}),e.TgZ(1,"span",29),e._UZ(2,"lucide-icon",83),e.qZA()()}if(2&n){const t=e.oxw(2).index,i=e.oxw(3);let a;e.Q6J("disabled",0===t&&1===(null==(a=i.form.get("codeExamList"))?null:a.controls.length))}}function r1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_khong_qua_120_cau")," "))}function l1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function c1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_hoi")," "))}function u1(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,r1,3,3,"span",57),e.YNc(2,l1,3,3,"span",57),e.YNc(3,c1,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.max),e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.min),e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.errors.required)}}function d1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_diem_trac_nghiem")," "))}function m1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function _1(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,d1,3,3,"span",57),e.YNc(2,m1,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionMultiple.errors.required),e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionMultiple.errors.min)}}function p1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")," "))}function h1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan")," "))}function g1(n,o){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,p1,3,3,"span",57),e.YNc(2,h1,3,3,"span",57),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionEssay.errors.max),e.xp6(1),e.Q6J("ngIf",t.controls.scoreQuestionEssay.errors.required)}}function f1(n,o){1&n&&(e.TgZ(0,"div",56)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_core_enter_essay_score_greater_than_zero")," "))}function x1(n,o){1&n&&(e.TgZ(0,"div",58)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_core_missing_essay_question")," "))}function b1(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",67),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3).index,l=e.oxw().index,c=e.oxw(2),d=c.index,f=c.$implicit,y=e.oxw(3);return e.KtG(y.chooseAnswerQuestion(d,r+l*f.controls.colTotalItem.value,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.Q6J("disabled",!0)("ngStyle",e.VKq(6,Zs,"TL"!=t?"35px":"80px"))("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ","TL"!=t?t:e.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function v1(n,o){if(1&n&&(e.ynx(0),e.YNc(1,b1,4,8,"ng-container",66),e.BQk()),2&n){const t=e.oxw(8);e.xp6(1),e.Q6J("ngForOf",t.configAnswerData)}}function y1(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",67),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3).index,l=e.oxw().index,c=e.oxw(2),d=c.index,f=c.$implicit,y=e.oxw(3);return e.KtG(y.chooseAnswerQuestion(d,r+l*f.controls.colTotalItem.value,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.Q6J("disabled","TL"===t)("ngStyle",e.VKq(6,Zs,"TL"!=t?"35px":"80px"))("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ","TL"!=t?t:e.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function w1(n,o){if(1&n&&e.YNc(0,y1,4,8,"ng-container",66),2&n){const t=e.oxw(8);e.Q6J("ngForOf",t.configAnswerData)}}function C1(n,o){if(1&n&&(e.ynx(0),e.YNc(1,v1,2,1,"ng-container",5),e.YNc(2,w1,1,1,"ng-template",null,65,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.controls.isEssay.value)("ngIfElse",t)}}function k1(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",85),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2).index,l=e.oxw().index,c=e.oxw(2),d=c.index,f=c.$implicit,y=e.oxw(3);return e.KtG(y.chooseAnswerQuestion(d,r+l*f.controls.colTotalItem.value,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngStyle",e.VKq(5,Zs,"TL"!=t?"35px":"80px"))("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ","TL"!=t?t:e.lcZ(3,3,"lang_offline_question_type_essay")," ")}}function T1(n,o){if(1&n&&e.YNc(0,k1,4,7,"ng-container",66),2&n){const t=e.oxw(7);e.Q6J("ngForOf",t.configAnswerData)}}function A1(n,o){if(1&n&&(e.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()(),e.YNc(7,C1,4,2,"ng-container",5),e.YNc(8,T1,1,1,"ng-template",null,84,e.W1O),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(9),s=e.oxw().index,r=e.oxw(2).$implicit,l=e.oxw(3);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.AsE(" ",e.lcZ(5,5,"lang_auto_cau")+" "+(i+1+s*r.controls.colTotalItem.value)+" "," ","("+t.value.point+" "+e.lcZ(6,7,"lang_auto_diem")+")"," "),e.xp6(3),e.Q6J("ngIf",l.type===l.typeScreenCreateExamOffline.add&&(null==r||null==r.controls||null==r.controls.isUpdate?null:r.controls.isUpdate.value))("ngIfElse",a)}}function O1(n,o){if(1&n&&(e.TgZ(0,"div",59),e.YNc(1,A1,10,9,"div",60),e.qZA()),2&n){const t=o.index,i=e.oxw(2).$implicit;let a;e.xp6(1),e.Q6J("ngForOf",null==(a=i.get("answerList"))?null:a.controls.slice(t*i.controls.colTotalItem.value,t*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function S1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",72),e.YNc(1,t1,2,1,"div",73),e.TgZ(2,"div",36)(3,"div",74)(4,"div",38)(5,"h3",39)(6,"span",75),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"input",76),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.checkDuplicateCode(a))}),e.ALo(10,"mytranslate"),e.qZA()(),e.YNc(11,o1,3,2,"div",16),e.YNc(12,a1,4,3,"div",16),e.ALo(13,"numberFloat"),e.qZA(),e.TgZ(14,"div",39),e.YNc(15,s1,3,1,"button",77),e.qZA()(),e.TgZ(16,"div",41)(17,"div",42)(18,"div",13)(19,"div",12)(20,"div",13)(21,"label",43),e._uU(22),e.ALo(23,"mytranslate"),e.ALo(24,"mytranslate"),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",13)(27,"input",44),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(),s=a.$implicit,r=a.index,l=e.oxw(3);return e.KtG(l.updateCountQuestion(s,r))}),e.ALo(28,"mytranslate"),e.qZA(),e.YNc(29,u1,4,3,"div",45),e.qZA()()()(),e.TgZ(30,"div",46)(31,"div",47)(32,"div",12)(33,"div",13)(34,"label",48),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()(),e.TgZ(37,"div",13)(38,"input",49),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.updateScoreQuestion(a))}),e.ALo(39,"mytranslate"),e.qZA(),e.YNc(40,_1,3,2,"div",45),e.qZA()()(),e.TgZ(41,"div",47)(42,"div",12)(43,"div",13)(44,"label",50),e._uU(45),e.ALo(46,"mytranslate"),e.qZA()(),e.TgZ(47,"div",13)(48,"input",51),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.updateScoreQuestion(a))}),e.ALo(49,"mytranslate"),e.qZA(),e.YNc(50,g1,3,2,"div",45),e.YNc(51,f1,4,3,"div",45),e.YNc(52,x1,4,3,"div",52),e.qZA()()()()(),e.TgZ(53,"div",41)(54,"div",53)(55,"h3",54),e._uU(56),e.ALo(57,"mytranslate"),e.qZA(),e.TgZ(58,"div",12),e.YNc(59,O1,2,1,"div",55),e.qZA()()()()()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(3);let r,l;e.Q6J("formGroup",i),e.xp6(1),e.Q6J("ngIf",i.invalid),e.xp6(6),e.hij(" ",e.lcZ(8,27,"lang_auto_ma_de")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(10,29,"lang_auto_nhap_ma_de")+"..."),e.Q6J("readonly",s.type===s.typeScreenCreateExamOffline.add&&(null==i||null==i.controls||null==i.controls.isUpdate?null:i.controls.isUpdate.value))("maxlength",3),e.xp6(2),e.Q6J("ngIf",i.controls.codeExam.errors&&(i.controls.codeExam.touched||i.controls.codeExam.dirty)),e.xp6(1),e.Q6J("ngIf",i.controls.checkDuplicateError.value&&s.codeExamDuplicateList.includes(e.lcZ(13,31,i.controls.codeExam.value))),e.xp6(3),e.Q6J("ngIf",!(s.type===s.typeScreenCreateExamOffline.add&&null!=i&&null!=i.controls&&null!=i.controls.isUpdate&&i.controls.isUpdate.value)),e.xp6(7),e.lnq(" ",e.lcZ(23,33,"lang_core_total_question")," ","("+e.lcZ(24,35,"lang_core_count_multiple_question")+": "+i.controls.totalQuestionMultiple.value+", "," ",e.lcZ(25,37,"lang_core_count_essay_question")+": "+i.controls.totalQuestionEssay.value+") "," "),e.xp6(5),e.s9C("placeholder",e.lcZ(28,39,"lang_auto_nhap_so_cau")+" ..."),e.Q6J("readonly",s.type===s.typeScreenCreateExamOffline.add&&(null==i||null==i.controls||null==i.controls.isUpdate?null:i.controls.isUpdate.value)),e.xp6(2),e.Q6J("ngIf",(i.controls.totalQuestion.dirty||i.controls.totalQuestion.touched)&&i.controls.totalQuestion.errors),e.xp6(6),e.hij(" ",e.lcZ(36,41,"lang_auto_tong_diem_trac_nghiem")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(39,43,"lang_auto_nhap_so_diem")+" ..."),e.Q6J("decimal",!0),e.xp6(2),e.Q6J("ngIf",(i.controls.scoreQuestionMultiple.dirty||i.controls.scoreQuestionMultiple.touched)&&i.controls.scoreQuestionMultiple.errors||0!==a&&i.controls.scoreQuestionMultiple.errors),e.xp6(5),e.hij(" ",e.lcZ(46,45,"lang_auto_tong_diem_tu_luan")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(49,47,"lang_auto_nhap_so_diem")+" ..."),e.Q6J("decimal",!0),e.xp6(2),e.Q6J("ngIf",(i.controls.scoreQuestionEssay.dirty||i.controls.scoreQuestionEssay.touched)&&i.controls.scoreQuestionEssay.errors||s.type===s.typeScreenCreateExamOffline.excel&&i.controls.scoreQuestionEssay.errors),e.xp6(1),e.Q6J("ngIf",0==i.controls.scoreQuestionEssay.value&&0!=i.controls.totalQuestionEssay.value&&!i.controls.scoreQuestionEssay.errors),e.xp6(1),e.Q6J("ngIf",0==i.controls.totalQuestionEssay.value&&0!=i.controls.scoreQuestionEssay.value&&!i.controls.scoreQuestionEssay.errors),e.xp6(4),e.Oqu(e.lcZ(57,49,"lang_auto_bang_dap_an")),e.xp6(3),e.Q6J("ngForOf",null==(r=i.get("answerList"))?null:r.controls.slice(0,(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value%1==0?(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value:(null==(l=i.get("answerList"))?null:l.controls.length)/i.controls.colTotalItem.value+1))}}function E1(n,o){if(1&n&&(e.TgZ(0,"mat-tab",33),e.YNc(1,Yf,4,8,"ng-template",69),e.YNc(2,S1,60,51,"div",70),e.qZA()),2&n){const t=o.index,i=e.oxw(3);e.xp6(2),e.Q6J("ngIf",i.selected.value===t)}}function M1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab-group",68),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selected.setValue(a))}),e.YNc(1,E1,3,1,"mat-tab",32),e.qZA()}if(2&n){const t=e.oxw(2);let i;e.Q6J("selectedIndex",t.selected.value),e.xp6(1),e.Q6J("ngForOf",null==(i=t.form.get("codeExamList"))?null:i.controls)}}const I1=function(n,o){return{"mt-3":n,"mt-10":o}},L1=function(n){return{"px-4 py-4":n}};function Z1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"form",3),e.YNc(3,yf,9,7,"div",4),e.YNc(4,Cf,2,1,"ng-container",5),e.YNc(5,Tf,1,1,"ng-template",null,6,e.W1O),e.YNc(7,Af,11,6,"div",7),e.YNc(8,Kf,2,1,"ng-container",5),e.YNc(9,M1,2,2,"ng-template",null,8,e.W1O),e.qZA()(),e.TgZ(11,"div",9)(12,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetCreateExam())}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSaveQuestionAndExam())}),e._uU(16),e.ALo(17,"mytranslate"),e.ALo(18,"mytranslate"),e.qZA()()()}if(2&n){const t=e.MAs(6),i=e.MAs(10),a=e.oxw();let s;e.Q6J("ngClass",e.WLB(18,I1,!a.isMobileWebView,a.isMobileWebView)),e.xp6(1),e.Q6J("ngClass",e.VKq(21,L1,a.type!==a.typeScreenCreateExamOffline.edit)),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("ngIf",a.type!==a.typeScreenCreateExamOffline.edit),e.xp6(1),e.Q6J("ngIf",a.loadingSubjectLevel)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",a.type!==a.typeScreenCreateExamOffline.edit),e.xp6(1),e.Q6J("ngIf",a.type===a.typeScreenCreateExamOffline.edit)("ngIfElse",i),e.xp6(5),e.hij(" ",e.lcZ(14,12,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",a.form.invalid||!a.form.controls.schoolSubject.value||!a.form.controls.schoolLevel.value||0===(null==(s=a.form.get("codeExamList"))?null:s.controls.length)),e.xp6(1),e.hij(" ",a.type===a.typeScreenCreateExamOffline.edit||a.type===a.typeScreenCreateExamOffline.add?e.lcZ(17,14,"lang_auto_cap_nhat"):e.lcZ(18,16,"lang_auto_luu")," ")}}const ka="TL";let Kr=(()=>{class n extends W.Q{constructor(t,i,a,s){super(),this.documentConfigService=t,this.dialog=i,this.formBuilder=a,this.activeRoute=s,this.type=po.create,this.handleSaveData=new e.vpe,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.codeExamDuplicateList=[],this.oldAnswerList=[],this.configAnswerData=["A","B","C","D",ka],this.typeScreenCreateExamOffline=po,this.selected=new p.p4(0),this.loadingSubjectLevel=!1,this.infoCodeExamLast={totalQuestion:10,totalQuestionMultiple:10,scoreQuestionMultiple:10,totalQuestionEssay:0,scoreQuestionEssay:0}}getGradeAndSubjectObj(){this.loadingSubjectLevel=!0,this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(t=>{if(1==t.success){this.schoolLevelObjs=t.data?.schoolLevelObjs??[],this.schoolSubjectObjs=t.data?.schoolSubjectObjs??[];let i=t.data?.examSchoolLogObj?.lastSchoolLevelId??null,a=t.data?.examSchoolLogObj?.lastSchoolSubjectId??null;this.form?.patchValue({schoolLevel:i??0,schoolSubject:a??0}),this.successStatusObj()}else this.errorStatusObj(t.message??"");this.loadingSubjectLevel=!1}))}checkDuplicateCode(t){let a=(this.form?.get("codeExamList")).controls.map(r=>Number(r.controls.codeExam.value)?Number(r.controls.codeExam.value):"");a=a.filter(r=>""!==r);let s=a.some((r,l)=>a.indexOf(r)!=l);this.codeExamDuplicateList=a.filter((r,l)=>a.indexOf(r)!==l),t.controls.checkDuplicateError.setValue(s)}chooseAnswerQuestion(t,i,a){const r=(this.form?.get("codeExamList")).controls[t],l=r.get("answerList");l.controls[i].controls.answer.setValue(a),l.controls[i].controls.isEssay.setValue(a==ka),this.oldAnswerList[t]=l.value,this.getTypeQuestionCodeExam(r),this.getEmptyAnswerCodeExam(r),this.fillPointInAnswerList(r),this.getInfoCodeExamLast()}addItemCodeExam(){const t=this.form?.get("codeExamList");t.push(this.createItemCodeExam()),this.createAnswerList(t.controls.length-1),this.selected.setValue(t.controls.length-1)}createItemCodeExam(){return this.formBuilder.group({codeExam:new p.p4("",[p.kI.required,p.kI.min(1),p.kI.max(999),p.kI.maxLength(3),Ai._.noWhiteSpace]),totalQuestion:new p.p4(10,[p.kI.required,p.kI.min(1),p.kI.max(120)]),totalQuestionMultiple:new p.p4(10),scoreQuestionMultiple:new p.p4(10,[p.kI.required,p.kI.min(1e-8)]),totalQuestionEssay:new p.p4(0),scoreQuestionEssay:new p.p4(0,[p.kI.required,p.kI.max(9.99)]),colTotalItem:new p.p4(3),answerList:this.formBuilder.array([]),emptyAnswer:new p.p4("emptyAll"),checkDuplicateError:new p.p4(!1)})}createAnswerList(t){if(!this.form)return;const i=this.form.get("codeExamList"),a=i.controls[t];a.controls.totalQuestion.setValue(this.infoCodeExamLast.totalQuestion),a.controls.totalQuestionMultiple.setValue(this.infoCodeExamLast.totalQuestionMultiple),a.controls.totalQuestionEssay.setValue(this.infoCodeExamLast.totalQuestionEssay),a.controls.scoreQuestionMultiple.setValue(this.infoCodeExamLast.scoreQuestionMultiple),a.controls.scoreQuestionEssay.setValue(this.infoCodeExamLast.scoreQuestionEssay);const s=Number(a.controls.totalQuestion.value),r=i.controls[i.length-1].get("answerList");if(s<=120){a.controls.colTotalItem.setValue(Math.ceil(s/3));for(let c=0;c<s;c++)r.push(this.createItemAnswer(!1));let l=this.oldAnswerList.length-1;if(this.oldAnswerList.length&&this.oldAnswerList[l]){let c=this.oldAnswerList[l].length;for(let d=0;d<c;d++){let f={isEssay:this.oldAnswerList[l][d].isEssay,answer:this.oldAnswerList[l][d].answer,point:this.oldAnswerList[l][d].point};r.value[d]=f,r.controls[d]&&this.oldAnswerList[l][d].isEssay&&r.controls[d].setValue(f)}}this.fillPointInAnswerList(a)}}createItemAnswer(t){return this.formBuilder.group({answer:new p.p4(t?"TL":"",[p.kI.required]),point:new p.p4(0,[p.kI.required]),isEssay:new p.p4(t)})}updateScoreQuestion(t){this.getInfoCodeExamLast(),this.fillPointInAnswerList(t)}updateCountQuestion(t,i){const a=t.controls.answerList,s=Number(t.controls.totalQuestion.value);if(this.resetAnswerList(a),s<=120){t.controls.colTotalItem.setValue(Math.ceil(s/3));for(let r=0;r<s;r++)a.push(this.createItemAnswer(!1));if(this.oldAnswerList.length&&this.oldAnswerList[i]){let r=this.oldAnswerList?.[i].length??0;for(let l=0;l<r;l++)a.value[l]=this.oldAnswerList?.[i][l]??"",a.controls[l]&&a.controls[l].setValue(this.oldAnswerList?.[i][l]??"")}this.getTypeQuestionCodeExam(t),this.getEmptyAnswerCodeExam(t),this.fillPointInAnswerList(t),this.getInfoCodeExamLast()}}resetAnswerList(t){for(;0!==t.length;)t.removeAt(0)}resetCreateExam(){let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","480px",()=>{const i=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`;this.myNavigation(i)})}removeItemCodeExam(t){const i=this.form?.get("codeExamList");let a=i.controls[t],s=`${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_so_ma_de")} <b>${a.controls.codeExam.value}</b>`;this.dialog.open($g,{data:{content:s},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&(i.removeAt(t),this.oldAnswerList.splice(t,1),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}deleteAnswerQuestion(t,i){const a=this.form?.get("codeExamList"),s=a.controls[i],r=a.controls[t].get("answerList");r.removeAt(i),a.controls[t].get("totalQuestionMultiple").setValue(r.controls.length),this.fillPointInAnswerList(s)}confirmDialog(t,i,a,s){this.dialog.open(ba,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&s()})}handleSaveQuestionAndExam(){if(this.form?.invalid)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");let t=this.processDataQuestion(),i=[],a=!1;if(t.length&&t.forEach(s=>{let r=!0;s.offlineQuestionObjs.forEach(l=>{if(0==l.scorePerQuestion){let c=this.commonService.myTranslateInstant("lang_core_score_per_question_greater_than_zero")+": "+s.offlineMixQuestionHashId;return this.showErrorSnack(c),void(a=!0)}l.answer!==ka&&(r=!1)}),r&&i.push(s.offlineMixQuestionHashId)}),i.length>0){let l=`${this.commonService.myTranslateInstant("lang_core_exam_require_mcq")} (${this.commonService.myTranslateInstant("lang_auto_ma_de")}: ${i.join(", ")})`;this.showErrorSnack(l)}else!a&&0===i.length&&this.handleSaveData.emit(t)}processDataQuestion(){let t=[];return(this.form?.get("codeExamList")).controls.forEach(a=>{const s=a;let r={offlineMixQuestionHashId:Number(s.controls.codeExam.value),offlineQuestionObjs:[],isUpdate:s.controls?.isUpdate?.value??void 0,offlineMixQuestionId:s.controls?.offlineMixQuestionId?.value??void 0};r.offlineMixQuestionHashId=Number(s.controls.codeExam.value);let l=[];s.get("answerList").controls.forEach((d,f)=>{const y=d;l.push({questionId:y?.controls?.questionId?.value??void 0,answer:y.controls.answer.value,scorePerQuestion:y.controls.point.value,isEssay:y.controls.answer.value===ka})}),r.offlineQuestionObjs=l,t.push(r)}),t}processDataExamOffline(){if(!this.form||!this.dataExamOffline)return;const t=this.form.get("codeExamList");this.form.controls.nameExam.setValue(this.dataExamOffline.name),this.dataExamOffline.updateOfflineMixQuestionObjs?.forEach((i,a)=>{if(t.push(this.formBuilder.group({codeExam:new p.p4(i.offlineMixQuestionHashId,[p.kI.required,p.kI.min(1),p.kI.max(999),p.kI.maxLength(3)]),totalQuestion:new p.p4(0,[p.kI.required,p.kI.min(1),p.kI.max(120)]),totalQuestionMultiple:new p.p4(0),scoreQuestionMultiple:new p.p4(0,[p.kI.required,p.kI.min(.01)]),totalQuestionEssay:new p.p4(0),scoreQuestionEssay:new p.p4(0,[p.kI.required,p.kI.max(9.99)]),colTotalItem:new p.p4(3),answerList:this.formBuilder.array([]),isUpdate:new p.p4(!0),offlineMixQuestionId:new p.p4(i.offlineMixQuestionId),emptyAnswer:new p.p4("success"),checkDuplicateError:new p.p4(!1)})),i.offlineQuestionObjs&&i.offlineQuestionObjs.length){let s=this.formBuilder.array([]),r=t.controls[a],l=i.offlineQuestionObjs?.length,c=0,d=0,f=0,y=0;r.controls.colTotalItem.setValue(Math.ceil(l/3)),r.controls.totalQuestion.setValue(l),this.infoCodeExamLast.totalQuestion=l,i.offlineQuestionObjs?.forEach((I,z)=>{I.isEssay?(c+=1,d+=Number(I.scorePerQuestion)):(f+=1,y+=Number(I.scorePerQuestion)),s.push(this.formBuilder.group({questionId:new p.p4(I.questionId),answer:new p.p4(I.isEssay?ka:I.answer,[p.kI.required]),point:new p.p4(I.scorePerQuestion,[p.kI.required]),isEssay:new p.p4(I.isEssay)}))});let O=Math.round(100*y)/100,N=Math.round(100*d)/100;s.controls.forEach((I,z)=>{r.controls.answerList.push(I)}),r.controls.totalQuestionMultiple.setValue(f),r.controls.scoreQuestionMultiple.setValue(O),this.infoCodeExamLast.totalQuestionMultiple=f,this.infoCodeExamLast.scoreQuestionMultiple=y,r.controls.totalQuestionEssay.setValue(c),r.controls.scoreQuestionEssay.setValue(N),this.infoCodeExamLast.totalQuestionEssay=c,this.infoCodeExamLast.scoreQuestionEssay=d}}),t.controls.forEach((i,a)=>{const s=i;this.getTypeQuestionCodeExam(s),this.oldAnswerList[a]=s.controls.answerList.value})}processDataOfflineExamByExcel(){if(!this.form||!this.dataExamOfflineByExcel)return;const t=this.form.get("codeExamList");this.dataExamOfflineByExcel.excelOfflineMixQuestionObjs?.forEach((i,a)=>{if(t.push(this.formBuilder.group({codeExam:new p.p4(i.offlineMixQuestionHashId,[p.kI.required,p.kI.min(1),p.kI.max(999),p.kI.maxLength(3)]),totalQuestion:new p.p4(0,[p.kI.required,p.kI.min(1),p.kI.max(120)]),totalQuestionMultiple:new p.p4(0),scoreQuestionMultiple:new p.p4(0,[p.kI.required,p.kI.min(.01)]),totalQuestionEssay:new p.p4(0),scoreQuestionEssay:new p.p4(0,[p.kI.required,p.kI.max(9.99)]),colTotalItem:new p.p4(3),answerList:this.formBuilder.array([]),emptyAnswer:new p.p4("success"),checkDuplicateError:new p.p4(!1)})),i.excelOfflineQuestionObjs&&i.excelOfflineQuestionObjs.length){let s=this.formBuilder.array([]),r=t.controls[a],l=i.excelOfflineQuestionObjs?.length,c=0,d=0,f=0,y=0;r.controls.colTotalItem.setValue(Math.ceil(l/3)),r.controls.totalQuestion.setValue(l),this.infoCodeExamLast.totalQuestion=l,i.excelOfflineQuestionObjs?.forEach(I=>{I.scorePerQuestion=I.scorePerQuestion??this.form?.controls.scoreQuestionMultiple.value/this.form?.controls.totalQuestionMultiple.value,I.isEssay?(c+=1,d+=Number(I.scorePerQuestion)):(f+=1,y+=Number(I.scorePerQuestion)),s.push(this.formBuilder.group({answer:new p.p4(I.isEssay?ka:I.answer,[p.kI.required]),point:new p.p4(I.scorePerQuestion,[p.kI.required]),isEssay:new p.p4(I.isEssay)}))});let O=Math.round(100*y)/100,N=Math.round(100*d)/100;s.controls.forEach((I,z)=>{r.controls.answerList.push(I)}),r.controls.totalQuestionMultiple.setValue(f),r.controls.scoreQuestionMultiple.setValue(O),this.infoCodeExamLast.totalQuestionMultiple=f,this.infoCodeExamLast.scoreQuestionMultiple=y,r.controls.totalQuestionEssay.setValue(c),r.controls.scoreQuestionEssay.setValue(N),this.infoCodeExamLast.totalQuestionEssay=c,this.infoCodeExamLast.scoreQuestionEssay=d}}),t.controls.forEach((i,a)=>{const s=i;this.getEmptyAnswerCodeExam(s),this.oldAnswerList[a]=s.controls.answerList.value})}getInfoCodeExamLast(){if(!this.form)return;const t=this.form.get("codeExamList"),i=t.controls[t.controls.length-1];this.infoCodeExamLast={totalQuestion:Number(i.controls.totalQuestion.value),totalQuestionMultiple:Number(i.controls.totalQuestionMultiple.value),totalQuestionEssay:Number(i.controls.totalQuestionEssay.value),scoreQuestionMultiple:Number(i.controls.scoreQuestionMultiple.value),scoreQuestionEssay:Number(i.controls.scoreQuestionEssay.value)}}fillPointInAnswerList(t){let i=Number(t.controls.totalQuestionEssay.value),a=Number(t.controls.totalQuestionMultiple.value);const s=t.controls.answerList;let r=t.controls.scoreQuestionEssay.value/i,l=t.controls.scoreQuestionMultiple.value/a;l=this.commonService.parseNumberFixed(l,8),r=this.commonService.parseNumberFixed(r,8),s.controls.forEach(c=>{const d=c;d.controls.isEssay.value?void 0!==r&&d.controls.point.setValue(r):void 0!==l&&d.controls.point.setValue(l)})}getTypeQuestionCodeExam(t){t.controls.totalQuestionMultiple.setValue(0),t.controls.totalQuestionEssay.setValue(0);let i=0,a=0;t.get("answerList").controls.forEach(r=>{r.controls.answer.value===ka?i++:a++}),t.controls.totalQuestionEssay.setValue(i),t.controls.totalQuestionMultiple.setValue(a)}getEmptyAnswerCodeExam(t){t.controls.emptyAnswer.setValue("");const i=t.get("answerList");let a=[];if(i.controls.forEach((s,r)=>{""===s.controls.answer.value&&a.push(r+1)}),0===a.length)t.controls.emptyAnswer.setValue("success");else{let s=a.join(", ");t.controls.emptyAnswer.setValue(s)}}ngOnInit(){switch(super.ngOnInit(),this.type){case po.create:this.addItemCodeExam();break;case po.edit:this.processDataExamOffline();break;case po.excel:this.processDataOfflineExamByExcel();break;case po.add:this.processDataExamOffline()}this.getGradeAndSubjectObj()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.Cq),e.Y36(j.uw),e.Y36(p.QS),e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ui-create-offline-exam"]],inputs:{form:"form",type:"type",dataExamOffline:"dataExamOffline",dataExamOfflineByExcel:"dataExamOfflineByExcel"},outputs:{handleSaveData:"handleSaveData"},features:[e.qOj],decls:1,vars:1,consts:[["class","box",3,"ngClass",4,"ngIf"],[1,"box",3,"ngClass"],[1,"border-b","border-slate-200","dark:border-darkmode-400",3,"ngClass"],[3,"formGroup"],["class","grid grid-cols-12",4,"ngIf"],[4,"ngIf","ngIfElse"],["doneLoadingSubjectLevel",""],["class","mt-5 mb-3 flex items-center",4,"ngIf"],["createTemplate",""],[1,"p-3","text-right"],["azt-track-service","create-exam-by-hand-tlbe3XqUg",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-exam-by-hand-VV_VzsR7QrJ",1,"btn","btn-primary","w-24",3,"disabled","click"],[1,"grid","grid-cols-12"],[1,"col-span-12"],["for","document-name",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","document-name","formControlName","nameExam","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],[1,"mt-2","text-xs","font-medium","text-danger"],["class","mt-4 flex items-center","style","height: 66px",4,"ngIf"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[3,"type"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],[1,"mt-5","mb-3","flex","items-center"],[1,"font-medium","text-lg","mr-auto"],[1,"ml-2"],["azt-track-service","create-exam-by-hand-5qKruBeS5Vi",1,"btn","btn-success","text-white",3,"click"],[1,"w-4","h-4","inline-block"],["name","plus"],[1,"text-white"],["formArrayName","codeExamList","class","tab-title",4,"ngFor","ngForOf"],["formArrayName","codeExamList",1,"tab-title"],["class","mt-5",3,"formGroup",4,"ngIf"],[1,"mt-5",3,"formGroup"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex","items-center"],[1,"font-medium"],[1,"p-3"],[1,"grid","grid-cols-12","gap-5"],["for","quesion-multiple-count",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-multiple-count","appOnlyNumber","","formControlName","totalQuestion","type","text",1,"form-control",3,"readonly","placeholder","input"],["class","text-xs font-medium text-danger mt-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-5","mt-3"],[1,"col-span-12","md:col-span-6"],["for","quesion-multiple-score",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-multiple-score","appOnlyNumber","","formControlName","scoreQuestionMultiple","type","text",1,"form-control",3,"decimal","placeholder","input"],["for","quesion-essay-score",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-essay-score","appOnlyNumber","","formControlName","scoreQuestionEssay","type","text",1,"form-control",3,"decimal","placeholder","input"],["class","text-xs font-medium text-pending mt-2",4,"ngIf"],[1,"mt-0"],[1,"text-md","font-medium"],["class","col-span-12 lg:col-span-4","formArrayName","answerList",4,"ngFor","ngForOf"],[1,"text-xs","font-medium","text-danger","mt-2"],[4,"ngIf"],[1,"text-xs","font-medium","text-pending","mt-2"],["formArrayName","answerList",1,"col-span-12","lg:col-span-4"],["class","app-item mt-2",4,"ngFor","ngForOf"],[1,"app-item","mt-2"],[1,"answer-item","mb-6","mt-1",3,"formGroup"],[1,"flex","items-center","mb-2"],[1,"block-title","mr-2"],["isMultiple",""],[4,"ngFor","ngForOf"],["azt-track-service","create-exam-by-hand-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px",3,"disabled","ngStyle","ngClass","click"],[3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["class","mt-3",3,"formGroup",4,"ngIf"],[3,"ngClass"],[1,"mt-3",3,"formGroup"],["class","error-code-exam mt-2 mb-3",4,"ngIf"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"hidden","sm:block"],["type","text","appOnlyNumber","","formControlName","codeExam",1,"form-control","form-control-sm","w-20","sm:ml-2",2,"width","7rem","text-align","center",3,"readonly","maxlength","placeholder","input"],["azt-track-service","create-exam-by-hand-ZLcxiYuHZw9","class","btn btn-sm btn-outline-danger",3,"disabled","click",4,"ngIf"],[1,"error-code-exam","mt-2","mb-3"],["class","text-xs font-medium text-danger",4,"ngIf"],[1,"text-xs","font-medium","text-danger"],["showIndexQuestion",""],["azt-track-service","create-exam-by-hand-ZLcxiYuHZw9",1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],["name","trash-2"],["createView",""],["azt-track-service","create-exam-by-hand-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px",3,"ngStyle","ngClass","click"]],template:function(t,i){1&t&&e.YNc(0,Z1,19,23,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[M.mk,M.sg,M.O5,M.PC,Ca.uD,Ca.uX,Ca.SP,p._Y,p.Fj,p.JJ,p.JL,p.nD,p.sg,p.u,p.CE,Vi.Y,Bt.M,Xo.J,h.Nh5,Ga,re.bT,re.Hb,re.q7],encapsulation:2}),n})();var po=function(n){return n[n.create=0]="create",n[n.edit=1]="edit",n[n.excel=2]="excel",n[n.add=3]="add",n}(po||{});function P1(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function j1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"ui-create-offline-exam",5),e.NdJ("handleSaveData",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleUpdateQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_core_update_exam_offline")," "),e.xp6(2),e.Q6J("form",t.form)("type",t.type)("dataExamOffline",t.dataExamOffline)}}let D1=(()=>{class n extends W.Q{constructor(t,i,a,s,r){super(),this.httpClient=t,this.formBuilder=i,this.activeRoute=a,this.offlineExamMixQuestionV2Service=s,this.offlineExamCreatorV2Service=r,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.form=new p.nJ({}),this.backToLink="",this.prevData="",this.type=po.add,this.form=i.group({nameExam:new p.p4("",[p.kI.required,Ai._.noWhiteSpace]),codeExamList:i.array([]),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required])})}handleUpdateQuestionAndExam(t){let i=[],a=[],s=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";t.forEach((l,c)=>{l.isUpdate?i.push({offlineMixQuestionId:l.offlineMixQuestionId,offlineQuestionObjs:l.offlineQuestionObjs}):a.push({offlineMixQuestionHashId:l.offlineMixQuestionHashId,offlineQuestionObjs:l.offlineQuestionObjs})}),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:s,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a}).subscribe(l=>{if(1===l.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const c=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(c)}else this.errorStatusObj(l.message??"",!0)}))}getData(){this.initStatusObj();let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateGet(t).subscribe(i=>{if(1===i.success){const a=i.data?.updateOfflineExamRequest;a&&(this.dataExamOffline.updateOfflineMixQuestionObjs=a.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=a.schoolLevelId,this.dataExamOffline.examHashId=t,this.dataExamOffline.schoolSubjectId=a.schoolSubjectId,this.dataExamOffline.name=a.name),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){super.ngOnInit();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline",description:"lang_core_update_exam_offline",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(i=>{let a=JSON.stringify(i);a!=this.prevData&&(this.prevData=a,this.form.patchValue(i))}),this.getData()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.eN),e.Y36(p.QS),e.Y36(T.gz),e.Y36(Rn.Sr),e.Y36(Rn.Jt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["add-code-exam-offline"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,P1,1,0,"azt-loading-effect",1),e.YNc(2,j1,5,6,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,pn._,Kr,re.bT],encapsulation:2}),n})();var Ps=S(70723),au=S(12889);function N1(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Q1(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"img",4),e.NdJ("load",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.answersheetImageLoaded())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("src",t.curAnswersheetImage,e.LSH)}}let Yd=(()=>{class n extends W.Q{getAnswersheetImageUrl(t){switch(t.toString()){case"11":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v5/answersheet_mau_a4__${0!=this.amountTemplateOriginalA4&&this.amountTemplateOriginalA4<=120?parseInt(this.amountTemplateOriginalA4.toString(),10):120}.svg`);case"12":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v5/answer_sheet_a5/answer_sheet_a5_${0!=this.amountTemplateA5&&this.amountTemplateA5<=50?parseInt(this.amountTemplateA5.toString(),10):50}_full.svg`);case"13":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v3/answer_sheet_a4_${0!=this.amountTemplateEssayA4&&this.amountTemplateEssayA4<=50?parseInt(this.amountTemplateEssayA4.toString(),10):50}hh-01.svg`);case"14":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v5/answer_sheet_a6_20/answer_sheet_a6_20_${0!=this.amountTemplateA6&&this.amountTemplateA6<=20?parseInt(this.amountTemplateA6.toString(),10):20}_full_a4.svg`)}return""}previewAnswersheetImage(){let a={name:"",mimes:"image/jpeg",url:this.getAnswersheetImageUrl(this.answersheetTemplate),index:0};this.dialog.open(au.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:a,viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})}answersheetImageLoaded(){this.previewAnswersheetImageLoading=!1}initImageUrls(){this.previewAnswersheetImageLoading=!0,this.curAnswersheetImage=this.getAnswersheetImageUrl(this.answersheetTemplate)}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}constructor(t,i){super(),this.dialog=t,this.cdnService=i,this.answersheetTemplate=11,this.amountTemplateOriginalA4=120,this.amountTemplateA5=50,this.amountTemplateA6=20,this.amountTemplateEssayA4=50,this.curAnswersheetImage="",this.previewAnswersheetImageLoading=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(xt.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["preview-answer-sheet-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate",amountTemplateOriginalA4:"amountTemplateOriginalA4",amountTemplateA5:"amountTemplateA5",amountTemplateA6:"amountTemplateA6",amountTemplateEssayA4:"amountTemplateEssayA4"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"flex","mx-auto",2,"width","75%","max-height","100%"],["azt-track-service","preivew-answersheet-dialog--hf6Yx84YB",1,"w-full","flex-none","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400",2,"height","100%",3,"click"],[4,"ngIf","ngIfElse"],["doneLoading",""],[2,"height","auto",3,"src","load"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.previewAnswersheetImage()}),e.YNc(2,N1,1,0,"azt-loading-effect",2),e.YNc(3,Q1,1,1,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q],encapsulation:2}),n})();function q1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function F1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function U1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 120"," "))}function R1(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,q1,3,3,"span",0),e.YNc(2,F1,3,3,"span",0),e.YNc(3,U1,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.max)}}function B1(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"label",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",18),e.YNc(5,R1,4,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_cau")," "),e.xp6(3),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors&&(t.form.controls.amountTemplateOriginalA4.dirty||t.form.controls.amountTemplateOriginalA4.touched))}}function z1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function J1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function H1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 50"," "))}function K1(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,z1,3,3,"span",0),e.YNc(2,J1,3,3,"span",0),e.YNc(3,H1,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.max)}}function $1(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"label",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",21),e.YNc(5,K1,4,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_cau")," "),e.xp6(3),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors&&(t.form.controls.amountTemplateA5.dirty||t.form.controls.amountTemplateA5.touched))}}function Y1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function G1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function W1(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 20"," "))}function V1(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,Y1,3,3,"span",0),e.YNc(2,G1,3,3,"span",0),e.YNc(3,W1,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.max)}}function X1(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"label",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",22),e.YNc(5,V1,4,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_cau")," "),e.xp6(3),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors&&(t.form.controls.amountTemplateA6.dirty||t.form.controls.amountTemplateA6.touched))}}function e0(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function t0(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function n0(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 50"," "))}function i0(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,e0,3,3,"span",0),e.YNc(2,t0,3,3,"span",0),e.YNc(3,n0,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.max)}}function o0(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"label",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",23),e.YNc(5,i0,4,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_cau")," "),e.xp6(3),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors&&(t.form.controls.amountTemplateEssayA4.dirty||t.form.controls.amountTemplateEssayA4.touched))}}function a0(n,o){if(1&n&&(e.TgZ(0,"div")(1,"form",1)(2,"div",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.YNc(15,B1,6,4,"div",9),e.TgZ(16,"div",6),e._UZ(17,"input",10),e.TgZ(18,"label",11),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()(),e.YNc(21,$1,6,4,"div",9),e.TgZ(22,"div",6),e._UZ(23,"input",12),e.TgZ(24,"label",13),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()(),e.YNc(27,X1,6,4,"div",9),e.TgZ(28,"div",6),e._UZ(29,"input",14),e.TgZ(30,"label",15),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()(),e.YNc(33,o0,6,4,"div",9),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(2),e.hij(" ",e.lcZ(4,11,"lang_auto_chon_mau_phieu_tra_loi")," "),e.xp6(4),e.hij(" ",e.lcZ(8,13,"lang_auto_mau_co_sbd_ma_de")," "),e.xp6(6),e.hij(" ",e.lcZ(14,15,"lang_auto_answersheet_mau_a4_azota")," "),e.xp6(2),e.Q6J("ngIf",11==t.form.controls.answersheetTemplate.value),e.xp6(4),e.hij(" ",e.lcZ(20,17,"lang_auto_answersheet_mau_a5_full_a4_50")," "),e.xp6(2),e.Q6J("ngIf",12==t.form.controls.answersheetTemplate.value),e.xp6(4),e.hij(" ",e.lcZ(26,19,"lang_auto_answersheet_mau_a6_full_a4_20")," "),e.xp6(2),e.Q6J("ngIf",14==t.form.controls.answersheetTemplate.value),e.xp6(4),e.hij(" ",e.lcZ(32,21,"lang_auto_answersheet_mau_a4_35hh")," "),e.xp6(2),e.Q6J("ngIf",13==t.form.controls.answersheetTemplate.value)}}let Gd=(()=>{class n extends W.Q{constructor(){super(...arguments),this.formControlName=""}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-choose-answer-sheet"]],inputs:{form:"form",formControlName:"formControlName"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form-label","font-medium"],[1,"mt-2"],[1,"text-md"],[1,"border","p-2","border-slate-200","dark:border-darkmode-400","rounded","mt-2"],[1,"form-check","mt-2"],["id","sample-1","type","radio","value","11","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-1",1,"form-check-label"],["class","mt-2 mb-4",4,"ngIf"],["id","sample-5","type","radio","value","12","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-5",1,"form-check-label"],["id","sample-4","type","radio","value","14","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-4",1,"form-check-label"],["id","sample-write","type","radio","value","13","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-write",1,"form-check-label"],[1,"mt-2","mb-4"],["for","input-sample-0",1,"form-label","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountTemplateOriginalA4",1,"form-control"],["class","mt-2 text-danger text-xs font-medium",4,"ngIf"],[1,"mt-2","text-danger","text-xs","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountTemplateA5",1,"form-control"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountTemplateA6",1,"form-control"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountTemplateEssayA4",1,"form-control"]],template:function(t,i){1&t&&e.YNc(0,a0,34,23,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[M.O5,p._Y,p.Fj,p._,p.JJ,p.JL,p.sg,p.u,Vi.Y,Bt.M,re.bT],encapsulation:2}),n})();function s0(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function r0(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",52)(1,"g",53)(2,"g",54),e._UZ(3,"circle",55),e.TgZ(4,"path",56),e._UZ(5,"animateTransform",57),e.qZA()()()())}function l0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",58),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.changeConfigSubjectMark(a))}),e.qZA()}}function c0(n,o){if(1&n&&(e.TgZ(0,"div",42)(1,"div",43)(2,"div",44)(3,"label",45),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",46)(7,"div"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"div",47),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",48)(14,"div",49),e.YNc(15,r0,6,0,"svg",50),e.YNc(16,l0,1,0,"input",51),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_config_create_exam_multiple_component")," "),e.xp6(4),e.hij(" ",e.lcZ(9,7,"lang_config_create_exam_multiple_component_description_120"),""),e.xp6(3),e.hij(" ",e.lcZ(12,9,"lang_config_create_exam_multiple_component_description_80"),""),e.xp6(4),e.Q6J("ngIf",t.loadingSaveConfigMultiple),e.xp6(1),e.Q6J("ngIf",!t.loadingSaveConfigMultiple)}}function u0(n,o){1&n&&(e.TgZ(0,"div",68)(1,"div",69)(2,"a",70),e._UZ(3,"img",71),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",72),e._UZ(6,"img",73),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"azota_assets/images/2928664.svg"),e.LSH))}function d0(n,o){1&n&&(e.TgZ(0,"p",64),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function m0(n,o){1&n&&(e.TgZ(0,"div",68)(1,"div",74)(2,"p",75)(3,"span",76),e._uU(4,"Google Play"),e.qZA(),e._UZ(5,"azt-download-qr-code",77),e.qZA(),e.TgZ(6,"p",78)(7,"span",76),e._uU(8,"App Store"),e.qZA(),e._UZ(9,"azt-download-qr-code",77),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function _0(n,o){if(1&n&&(e.TgZ(0,"div",59)(1,"div",60)(2,"span",61),e._uU(3," * "),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",62)(7,"div",63)(8,"p",64),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,u0,8,6,"div",65),e.qZA(),e.TgZ(12,"div",66),e.YNc(13,d0,3,3,"p",67),e.YNc(14,m0,10,4,"div",65),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),e.xp6(5),e.hij(" ",e.lcZ(10,7,"lang_core_tai_app_tai_day")," "),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView)}}function p0(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",79),e._UZ(2,"path",80)(3,"polyline",81)(4,"line",82),e.qZA()())}function h0(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",83)(2,"g",53)(3,"g",54),e._UZ(4,"circle",55),e.TgZ(5,"path",56),e._UZ(6,"animateTransform",57),e.qZA()()()()())}function g0(n,o){1&n&&(e.TgZ(0,"span",84),e._UZ(1,"azt-loading-ui",85),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function f0(n,o){1&n&&(e.TgZ(0,"span",86),e._UZ(1,"lucide-icon",87),e.qZA())}const Wd=function(n){return[n]};function x0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),e._uU(3),e.ALo(4,"mytranslate"),e._UZ(5,"notice-print-a4-paper-box"),e.qZA(),e.TgZ(6,"div",7)(7,"form",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),e._UZ(13,"app-testbank-choose-answer-sheet",14),e.qZA(),e.YNc(14,c0,17,11,"div",15),e.qZA(),e.TgZ(15,"div",12),e._UZ(16,"preview-answer-sheet-dialog",16),e.qZA()()(),e.YNc(17,_0,15,9,"div",17),e.qZA(),e.TgZ(18,"div",18)(19,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printExamAnswersheet(null==a.dataConfigDocument||null==a.dataConfigDocument.offlineExamObj?null:a.dataConfigDocument.offlineExamObj.hashId))}),e.YNc(20,p0,5,0,"span",20),e.YNc(21,h0,7,0,"span",20),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()()()(),e.TgZ(25,"div",21)(26,"h3",6),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"div",22)(30,"div",23)(31,"div",24)(32,"p",25)(33,"span",26),e._UZ(34,"lucide-icon",27),e.qZA(),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"div",28),e._UZ(38,"input",29),e.TgZ(39,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportExcelForAnswerSheet())}),e.YNc(40,g0,2,1,"span",31),e.YNc(41,f0,2,0,"ng-template",null,32,e.W1O),e._uU(43),e.ALo(44,"mytranslate"),e.qZA()()()()()(),e.TgZ(45,"div",21)(46,"h3",6),e._uU(47),e.ALo(48,"mytranslate"),e.qZA(),e.TgZ(49,"div",22)(50,"div",23),e._UZ(51,"numbering-identification",33),e.ALo(52,"mustInClassroom"),e.qZA()()(),e.TgZ(53,"div",34)(54,"div",35)(55,"a",36),e.ALo(56,"navigationLocalize"),e.TgZ(57,"span",37),e._UZ(58,"lucide-icon",38),e.qZA(),e._uU(59),e.ALo(60,"mytranslate"),e.qZA()(),e.TgZ(61,"div",39)(62,"a",40),e.ALo(63,"navigationLocalize"),e.TgZ(64,"span",37),e._UZ(65,"lucide-icon",41),e.qZA(),e._uU(66),e.ALo(67,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.MAs(42),i=e.oxw();let a,s,r;e.xp6(3),e.hij(" ",e.lcZ(4,29,"lang_auto_in_phieu_tra_loi")," "),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("form",i.form),e.xp6(1),e.Q6J("ngIf",i.canUseSubjectMark),e.xp6(2),e.Q6J("answersheetTemplate",i.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",i.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",i.form.controls.amountTemplateA5.value)("amountTemplateA6",i.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",i.form.controls.amountTemplateEssayA4.value),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(2),e.Q6J("disabled",11==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateOriginalA4.errors||12==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateA5.errors||14==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateA6.errors||13==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateEssayA4.errors),e.xp6(1),e.Q6J("ngIf",!i.isLoadingPrintTicket),e.xp6(1),e.Q6J("ngIf",i.isLoadingPrintTicket),e.xp6(2),e.Oqu(e.lcZ(24,31,"lang_auto_tai_phieu_tra_loi")),e.xp6(4),e.hij(" ",e.lcZ(28,33,"lang_auto_dap_an_de_thi_offline")," "),e.xp6(8),e.hij(" ",e.lcZ(36,35,"lang_auto_file_answer_list")," "),e.xp6(3),e.s9C("value",i.createNameExam("answerexcel",!0)),e.xp6(2),e.Q6J("ngIf",i.isLoadingPrintAnswer)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(44,37,"lang_auto_tai_ve")," "),e.xp6(4),e.hij(" ",e.lcZ(48,39,"lang_auto_danh_so_bao_danh")," "),e.xp6(4),e.Q6J("hashId",null==i.dataConfigDocument||null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.hashId)("checkStudentCode",e.lcZ(52,41,null!==(a=null==i.dataConfigDocument||null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.whoAllow)&&void 0!==a?a:0))("styleView",1)("startStudentCode",i.startStudentCode),e.xp6(4),e.Q6J("routerLink",e.VKq(51,Wd,e.lcZ(56,43,"/admin/testbank/exam-results-list/"+(null!==(s=null==i.examObj?null:i.examObj.categoryId)&&void 0!==s?s:0)+"/"+(null==i.examObj?null:i.examObj.id)+"/0"))),e.xp6(4),e.hij(" ",e.lcZ(60,45,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(3),e.Q6J("routerLink",e.VKq(53,Wd,e.lcZ(63,47,"/admin/testbank/document-management/0/"+(null!==(r=null==i.examObj?null:i.examObj.categoryId)&&void 0!==r?r:0)+"/1"))),e.xp6(4),e.hij(" ",e.lcZ(67,49,"lang_auto_ve_trang_quan_ly_file")," ")}}function b0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",88),e.NdJ("exportDataDone",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}let v0=(()=>{class n extends W.Q{saveConfig(){return new Promise(t=>{let a={subjectMarks:this.commonService.getFormObj(this.form).subjectMarks?1:0,isSaveConfig:0,enableViewAnswerResultMinMark:!1};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(s=>{t(1==s.success)}))})}printExamAnswersheet(t){this.isLoadingPrintTicket=!0,this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this.dataConfigDocument?.examObj?.hashId??"",t??"","").subscribe(i=>{if(1===i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const s=a;let r=this.form.controls.answersheetTemplate.value??0,l=this.getAmountAnswerSheetByTemplate(r);this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,r,s,0,i.data?.maxOfflineMixQuestionHashId,l);let c=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.dataConfigDocument?.examObj?.name??"",i.data?.offlineExamObj?.hashId??"");this.answerSheetHelper.createAnswerSheet().subscribe(d=>{1==d.success?this.saveConfig().then(f=>{f?this.answerSheetHelper.exportPdf(c):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0),this.isLoadingPrintTicket=!1})}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}))}getAmountAnswerSheetByTemplate(t){switch(Number(t)){case 11:default:return this.form.controls.amountTemplateOriginalA4.value;case 12:return this.form.controls.amountTemplateA5.value;case 14:return this.form.controls.amountTemplateA6.value;case 13:return this.form.controls.amountTemplateEssayA4.value}}getTotalQuestionInMixQuestionObjs(t,i){if(t.length>0){let a=0;return t.forEach(s=>{let r=this.zipDataService.decodeContentGzip(s?.mixDatas??""),l=this.castJsonToObj(r);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}getExamInfoByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.examObj=this.dataConfigDocument?.examObj,this.form.controls.subjectMarks.setValue(!!this.dataConfigDocument?.examObj?.subjectMarks),this.canUseSubjectMark||this.form.controls.subjectMarks.disable(),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)})),this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??""}createNameExam(t,i){var a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",this.examHashId??""):"answerexcel"==t||"answerdocx"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",this.examHashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"",this.examHashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var s=".docx";return s="answersheet"==t&&7!=this.form.controls.answersheetTemplate.value?".pdf":s,a+("answerexcel"==t?".xlsx":s)}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i),this.isLoadingPrintAnswer=!1}changeConfigSubjectMark(t){if(t.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.commonService.getFormObj(this.form),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0,enableViewAnswerResultMinMark:!1};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(s=>{1==s.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(s.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}ngOnInit(){this.form=this.formBuilder.group({answersheetTemplate:new p.p4("11",[p.kI.required]),amountTemplateOriginalA4:new p.p4(120,[p.kI.required,p.kI.min(1),p.kI.max(120)]),amountTemplateA5:new p.p4(50,[p.kI.required,p.kI.min(1),p.kI.max(50)]),amountTemplateA6:new p.p4(20,[p.kI.required,p.kI.min(1),p.kI.max(20)]),amountTemplateEssayA4:new p.p4(50,[p.kI.required,p.kI.min(1),p.kI.max(50)]),subjectMarks:new p.p4({value:!1,disabled:!1})}),this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let t=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,i=this.commonService.getMyQueryParam("backto")??"";this.backLink=i||"/admin/testbank/document-management/0/"+(t??0)+"/1",this.examHashId&&this.getExamInfoByHashId(this.examHashId)}constructor(t,i,a,s,r,l,c,d,f,y){super(),this.offlineMixQuestionService=t,this.shareFileFlutterService=i,this.zipDataService=a,this.formBuilder=s,this.answerSheetHelper=r,this.printAnswersheetService=l,this.documentConfigService=c,this.activeRoute=d,this.dialog=f,this.offlineExamExportService=y,this.form=new p.nJ({}),this.backLink="",this.isLoadingPrintTicket=!1,this.examHashId="",this.startStudentCode=1,this.canUseSubjectMark=!1,this.isLoadingPrintAnswer=!1,this.loadingSaveConfigMultiple=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rn.fs),e.Y36(Vo.g),e.Y36($i.D),e.Y36(p.QS),e.Y36(Ud),e.Y36(Ls.Y),e.Y36(Ve.Cq),e.Y36(T.gz),e.Y36(j.uw),e.Y36(Rn.qr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-exam-offline"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],["formArrayName","answersheetTemplate",3,"form"],["class","mt-3",4,"ngIf"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","config-exam-offline--sdRHbNg8Am",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"setting-block","mt-5"],[1,"box","mt-2","p-5"],[1,"mt-2","intro-y"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneLoadingPrintAnswer",""],[3,"hashId","checkStudentCode","styleView","startStudentCode"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","config-exam-offline-XpfN8mirJ",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","config-exam-offline-o5dAdXmYKG",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["name","folder"],[1,"mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],[1,"form-check","form-switch","ml-auto"],["class","show-code ml-auto form-check-input w-5 h-5","width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"show-code","ml-auto","form-check-input","w-5","h-5"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"block"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","config-exam-offline-hLHiZDnMwY","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","config-exam-offline-hD7OkoGz62","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],[1,"w-4","h-4","mr-2","text-white"],[3,"type"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,s0,1,0,"azt-loading-effect",1),e.YNc(2,x0,68,55,"ng-template",null,2,e.W1O),e.YNc(4,b0,1,2,"azt-export-excel-for-answersheet",3),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",null!=i.exportExcelData)}},dependencies:[T.rH,M.O5,p._Y,p.Wl,p.JJ,p.JL,p.sg,p.u,p.CE,jt.Q,Ps.o,Bt.M,Jr,Xo.J,pn._,h.Nh5,Bd,Yd,Gd,zd,re.MR,re.bT,re.Jc,re.Bm],encapsulation:2}),n})();class js{static customDateTimeValidator(o){const t=o.get("startTime"),i=o.get("endTime");return null!==t&&null!==i&&""!=t.value&&""!=i.value&&null!==t.value&&null!==i.value&&js.calculationHomeworkTimeWithZeroSecond(t.value,i.value)<=0?(i?.setErrors({customDateTimeValidator:!0}),{identityRevealed:!0}):(i?.setErrors(null),null)}static calculationHomeworkTimeWithZeroSecond(o,t){let i=new Date(o),a=new Date(1e3*js.getSecondOfDateWithZeroSecond(i)),s=t?new Date(t):new Date,r=new Date(1e3*js.getSecondOfDateWithZeroSecond(s));return a.getTime()-r.getTime()>0?Math.floor((a.getTime()-r.getTime())/1e3):-1}static getSecondOfDateWithZeroSecond(o){var t=o.getSeconds();return Math.floor(o.getTime()/1e3)-t}}class su{static studentCheckBoxValidator(o){const t=o.get("whoAllow"),i=o.get("studentIds");return t&&i?3==t?.value&&su.countCheckBox(i.value)<1?(i?.setErrors({checkboxValidator:!0}),{identityRevealed:!0}):(i?.setErrors(null),null):null}static countCheckBox(o){for(var t=0,i=0;i<o.length;i++)o[i].listStudents?.length&&o[i].listStudents?.forEach(a=>{a.choose&&(t+=1)});return t}}var Vd=S(51488);const y0=["tagInput"];function w0(n,o){1&n&&(e.TgZ(0,"mat-icon",12),e._uU(1,"cancel"),e.qZA())}function C0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip-row",10),e.NdJ("removed",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.removeTagName(s))}),e._uU(1),e.YNc(2,w0,2,0,"mat-icon",11),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("removable",!0),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",!0)}}function k0(n,o){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let T0=(()=>{class n extends W.Q{addTagName(t){const i=t.input,a=t.value;(a||"").trim()&&this.tagNames.push(a.trim()),i&&(i.value=""),this.tagNameCtrl.setValue(null)}removeTagName(t){const i=this.tagNames.indexOf(t);i>=0&&this.tagNames.splice(i,1)}selectedTagName(t){this.tagNames.push(t.option.viewValue),this.tagInput&&(this.tagInput.nativeElement.value=""),this.tagNameCtrl.setValue(null)}_filterTagName(t){const i=t.toLowerCase();return this.allTagNames.filter(a=>0===a.toLowerCase().indexOf(i))}ngOnInit(){super.ngOnInit(),this.filteredTags=this.tagNameCtrl.valueChanges.pipe((0,Es.O)(null),(0,Po.U)(t=>t?this._filterTagName(t):this.allTagNames.slice()))}constructor(t){super(),this.commonService=t,this.form=new p.nJ({}),this.allTagNames=[],this.tagNames=[],this.tagNamesChange=new e.vpe,this.separatorKeysCodes=[va.K5,va.OC]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online-tag"]],viewQuery:function(t,i){if(1&t&&e.Gf(y0,5),2&t){let a;e.iGM(a=e.CRH())&&(i.tagInput=a.first)}},inputs:{form:"form",tagNameCtrl:"tagNameCtrl",allTagNames:"allTagNames",tagNames:"tagNames"},outputs:{tagNamesChange:"tagNamesChange"},features:[e.qOj],decls:11,vars:9,consts:[[3,"formGroup"],["appearance","outline",1,"my-chip-list"],["aria-label"," 'lang_cms_utils_choose_tag_name' | mytranslate "],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-chip-grid",2,3),e.YNc(4,C0,3,3,"mat-chip-row",4),e.TgZ(5,"input",5,6),e.NdJ("matChipInputTokenEnd",function(s){return i.addTagName(s)}),e.qZA()(),e.TgZ(7,"mat-autocomplete",7,8),e.NdJ("optionSelected",function(s){return i.selectedTagName(s)}),e.YNc(9,k0,2,2,"mat-option",9),e.ALo(10,"async"),e.qZA()()()),2&t){const a=e.MAs(3),s=e.MAs(8);e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("ngForOf",i.tagNames),e.xp6(1),e.Q6J("formControl",i.tagNameCtrl)("matAutocomplete",s)("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),e.xp6(4),e.Q6J("ngForOf",e.lcZ(10,7,i.filteredTags))}},dependencies:[M.sg,M.O5,Va.XC,ji.ey,Va.ZL,Oi.RA,Oi.oH,Oi.qH,Oi.z3,vn.Hw,Kn.KE,p._Y,p.Fj,p.JJ,p.JL,p.oH,p.sg,M.Ov],encapsulation:2}),n})();var $r=S(98525);function A0(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij("",t+1,".")}}function O0(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"input",57),e.qZA())}function S0(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"input",58),e.qZA())}function E0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50),e.YNc(2,A0,2,1,"span",38),e.YNc(3,O0,2,0,"span",38),e.YNc(4,S0,2,0,"span",38),e.TgZ(5,"span",51)(6,"input",52),e.NdJ("change",function(a){const r=e.CHM(t).index,l=e.oxw(2).index,c=e.oxw();return e.KtG(c.changeInfoContent(a,l,r))}),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"a",53),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw(2).index,l=e.oxw();return e.KtG(l.removeContent(r,s))}),e.O4$(),e.TgZ(9,"svg",54),e._UZ(10,"line",55)(11,"line",56),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",3==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type),e.xp6(1),e.Q6J("ngIf",1==i.type),e.xp6(2),e.s9C("placeholder",""==t?e.lcZ(7,5,"lang_testbank_test_config_request_enter_name"):""),e.s9C("value",""!=t&&null!=t?t:"")}}function M0(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",40),e._UZ(2,"rect",59)(3,"line",60)(4,"line",61),e.qZA()())}function I0(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",40),e._UZ(2,"circle",62)(3,"line",60)(4,"line",61),e.qZA()())}function L0(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",40),e._UZ(2,"circle",62)(3,"line",60)(4,"line",61),e.qZA()())}function Z0(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",34),e.YNc(1,E0,12,7,"div",35),e.TgZ(2,"div",36)(3,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,s=e.oxw();return e.KtG(s.addMoreContent(a))}),e.YNc(4,M0,5,0,"span",38),e.YNc(5,I0,5,0,"span",38),e.YNc(6,L0,5,0,"span",38),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,s=e.oxw();return e.KtG(s.addFastContent(a))}),e.O4$(),e.TgZ(10,"svg",40),e._UZ(11,"line",9)(12,"line",10),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(15,"div",41)(16,"div",42)(17,"div",43)(18,"textarea",44),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw().index,r=e.oxw();return e.KtG(r.changeDataFastContent(a,s))}),e.qZA()(),e.TgZ(19,"div",45),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"div",46)(23,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.closeDialogFastContent())}),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,s=e.oxw();return e.KtG(s.changeInfoFastContent(s.infoContentFast[a],a))}),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.contents),e.xp6(3),e.Q6J("ngIf",1==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type),e.xp6(1),e.Q6J("ngIf",3==i.type),e.xp6(1),e.hij(" ",e.lcZ(8,10,"lang_testbank_test_config_more_options")," "),e.xp6(6),e.hij(" ",e.lcZ(14,12,"lang_testbank_test_config_quick_add")," "),e.xp6(2),e.Q6J("ngClass",s.checkDialogFastContent[a]?"":"hidden"),e.xp6(5),e.hij(" * ",e.lcZ(21,14,"lang_testbank_test_config_note")," "),e.xp6(4),e.hij(" ",e.lcZ(25,16,"lang_buttom_cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(28,18,"lang_buttom_confirm")," ")}}const P0=function(n){return{"mb-5":n}},j0=function(n){return{"border-danger":n}};function D0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"input",17),e.NdJ("change",function(a){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.changeInfoTitle(a,r))}),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"mat-form-field",19)(12,"mat-select",20),e.NdJ("selectionChange",function(a){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.changeTypeField(a,r))}),e.TgZ(13,"mat-option",21),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"mat-option",22),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"mat-option",23),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"mat-option",24),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()(),e.TgZ(25,"div",25)(26,"button",26),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw();return e.KtG(r.removeFields(s))}),e.ALo(27,"mytranslate"),e.O4$(),e.TgZ(28,"svg",27),e._UZ(29,"path",28)(30,"path",29)(31,"path",30)(32,"line",31)(33,"line",32),e.qZA()()()(),e.YNc(34,Z0,29,20,"div",33),e.qZA()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(32,P0,i!==a.infoFields.length-1)),e.xp6(4),e.AsE(" ",e.lcZ(6,16,"lang_testbank_test_config_information")," ",i+1," "),e.xp6(2),e.s9C("placeholder",t.error?e.lcZ(8,18,"lang_testbank_test_config_request_enter_name"):e.lcZ(9,20,"lang_testbank_test_config_enter_Information_you_want_student_enter")),e.Q6J("ngClass",e.VKq(34,j0,t.error))("readonly",0===i)("value",t.title),e.xp6(5),e.s9C("value",t.type),e.Q6J("disabled",0===i),e.xp6(2),e.hij(" ",e.lcZ(15,22,"lang_testbank_test_config_reply_short"),""),e.xp6(3),e.hij("",e.lcZ(18,24,"lang_testbank_test_config_Checkbox")," "),e.xp6(3),e.Oqu(e.lcZ(21,26,"lang_testbank_test_config_quiz")),e.xp6(3),e.hij(" ",e.lcZ(24,28,"lang_testbank_test_config_drop_down_menu"),""),e.xp6(3),e.s9C("matTooltip",e.lcZ(27,30,"lang_testbank_test_config_delete_information")),e.Q6J("disabled",0===i),e.xp6(8),e.Q6J("ngIf",0!=t.type)}}function N0(n,o){1&n&&(e.TgZ(0,"div",63),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_config_exam_info_student_error")," "))}let Q0=(()=>{class n extends W.Q{removeFields(t){this.infoFields.splice(t,1)}addNewFields(t){let i="";this.commonService.myTranslate(["lang_auto_thong_tin"]).subscribe(s=>{i=s.lang_auto_thong_tin}),this.infoFields.push({type:0,title:i+" "+((this.infoFields?this.infoFields.length:0)+1),contents:[]})}changeTypeField(t,i){this.infoFields[i].type!=t.value&&(this.infoFields[i].type=Number(t.value),this.infoFields[i].error=!1,this.checkValidInfo.emit())}changeInfoTitle(t,i){t.target.value&&""==t.target.value?(this.formInfoInvalid=!0,this.infoFields[i].error=!0,this.infoFields[i].title=t.target.value):(this.formInfoInvalid=!1,this.infoFields[i].error=!1,this.infoFields[i].title=t.target.value)}changeInfoContent(t,i,a){t.target.value&&""!=t.target.value?(this.infoFields[i].contents[a]=t.target.value,this.formInfoInvalid=!1):(this.infoFields[i].contents[a]=t.target.value,this.formInfoInvalid=!0)}removeContent(t,i){this.infoFields[t].contents?.splice(i,1),this.checkValidInfo.emit()}addMoreContent(t,i){let a="";this.commonService.myTranslate(["lang_auto_tuy_chon"]).subscribe(r=>{a=r.lang_auto_tuy_chon});let s=this.infoFields[t].contents?this.infoFields[t].contents.length:0;this.infoFields[t].contents&&Array.isArray(this.infoFields[t].contents)||(this.infoFields[t].contents=new Array),this.infoFields[t].contents.push(a+" "+(s+1)),this.checkValidInfo.emit()}addFastContent(t){this.indexContent=t,this.checkDialogFastContent[this.indexContent]=!0}changeDataFastContent(t,i){t.target.value&&(this.infoContentFast[i]=t.target.value,t.target.value="")}closeDialogFastContent(){this.checkDialogFastContent[this.indexContent]=!1}changeInfoFastContent(t,i){if(""!=t){let a=t.split("\n");a=a.map(s=>s.trim()),a=a.filter(s=>""!=s),this.infoFields[i].contents||(this.infoFields[i].contents=new Array),this.infoFields[i].contents=this.infoFields[i].contents.concat(a)}this.checkDialogFastContent[i]=!1}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.commonService=t,this.infoFields=[],this.formInfoInvalid=!1,this.infoFieldsChange=new e.vpe,this.formInfoInvalidChange=new e.vpe,this.checkValidInfo=new e.vpe,this.infoContentFast=[],this.indexContent=0,this.checkDialogFastContent=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online-student-info"]],inputs:{infoFields:"infoFields",formInfoInvalid:"formInfoInvalid"},outputs:{infoFieldsChange:"infoFieldsChange",formInfoInvalidChange:"formInfoInvalidChange",checkValidInfo:"checkValidInfo"},features:[e.qOj],decls:18,vars:11,consts:[[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"p-5"],["class","info-field",4,"ngFor","ngForOf"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-3"],["azt-track-service","config-student-info-FlktZt6AJN",1,"btn","btn-primary","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"inline-block","ml-3","leading-relaxed","text-slate-500","text-xs"],[1,"info-field"],[1,"grid","grid-cols-12","gap-5",3,"ngClass"],[1,"col-span-12","md:col-span-7"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text",1,"form-control",3,"ngClass","readonly","placeholder","value","change"],[1,"col-span-8","md:col-span-3"],["appearance","outline"],[3,"value","disabled","selectionChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"col-span-4","md:col-span-2","text-right"],["azt-track-service","config-student-info-DEsxAq2B3",1,"btn","btn-secondary",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["class","info-content",4,"ngIf"],[1,"info-content"],["class","py-2",4,"ngFor","ngForOf"],[1,"py-2","flex","mb-3"],["azt-track-service","config-student-info-NVQjKt97Fu",1,"btn","btn-secondary","btn-sm","mr-2",3,"click"],[4,"ngIf"],["azt-track-service","config-student-info-OcHEB-Morx",1,"btn","btn-secondary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],[1,"azt-fast-content",3,"ngClass"],[1,"azt-fast","p-4"],[1,"dialog-content"],["rows","4",1,"form-control",3,"change"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"text-right","my-4"],["azt-track-service","config-student-info-8-eIbBQm3W",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["azt-track-service","config-student-info-2A5hJbaAWL",1,"btn","btn-primary","btn-sm",3,"click"],[1,"py-2"],[1,"flex","items-center"],[1,"w-full","mx-2"],["type","text",1,"form-control",2,"border","none","box-shadow","none",3,"placeholder","value","change"],["azt-track-service","config-student-info-QGYSvwSMLT",1,"btn","btn-primary","rounded-full",2,"padding","2px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["type","radio","disabled","",1,"form-check-input","cursor-default"],["type","checkbox","disabled","",1,"form-check-input","cursor-default"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["cx","12","cy","12","r","10"],[1,"text-xs","text-danger","mt-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,D0,35,36,"div",4),e.YNc(7,N0,3,3,"div",5),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return i.addNewFields("")}),e.O4$(),e.TgZ(10,"svg",8),e._UZ(11,"line",9)(12,"line",10),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(15,"span",11),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,5,"lang_testbank_test_config_configuration")," "),e.xp6(3),e.Q6J("ngForOf",i.infoFields),e.xp6(1),e.Q6J("ngIf",i.formInfoInvalid),e.xp6(6),e.hij(" ",e.lcZ(14,7,"lang_testbank_test_config_add_information")," "),e.xp6(3),e.hij(" *",e.lcZ(17,9,"lang_testbank_test_config_click_add_infomation"),". "))},dependencies:[M.mk,M.sg,M.O5,ji.ey,Kn.KE,$r.gD,Zt.gM,re.bT],encapsulation:2}),n})();var Xd=S(65364),Xa=S(94913),eo=S(94281),em=S(82898),en=S(77988),Ta=S(27222);function q0(n,o){1&n&&(e.TgZ(0,"div",25)(1,"div",26)(2,"span",27),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function F0(n,o){if(1&n&&e._UZ(0,"azt-standalone-question",29),2&n){const t=e.oxw(2),i=t.$implicit,a=t.index,s=e.oxw(2);e.Q6J("follower",s.followerRenderQuest)("displayScreen",1)("question",i)("index",a)("startQuestionIndex",s.examObj.startQuestionIndex)("expandInfo",s.examObj.expandInfo)}}function U0(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,F0,1,6,"azt-standalone-question",28),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.examObj)}}function R0(n,o){if(1&n&&(e.ynx(0),e.YNc(1,U0,2,1,"div",0),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.groupId===i.data.groupId||(null==t.groupInfo?null:t.groupInfo.groupId)===i.data.groupId)}}function B0(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),e._UZ(5,"div",14),e.qZA(),e.TgZ(6,"div",15)(7,"a",16)(8,"span",17),e._UZ(9,"lucide-icon",18),e.qZA()()()(),e.TgZ(10,"azt-mat-dialog-content",19),e.YNc(11,q0,5,3,"div",20),e.TgZ(12,"div",21),e._UZ(13,"div",22),e.YNc(14,R0,2,1,"ng-container",23),e._UZ(15,"div",24),e.qZA()()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.statusObj.loading),e.xp6(3),e.Q6J("ngForOf",t.questionList)}}function z0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",30),e.NdJ("exportDataDone",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}let J0=(()=>{class n extends W.Q{closeChangeInformation(t){this.showFormAddInformation=!1,t&&setTimeout(()=>{this.downloadExam()},100)}getEmitDataForm(t){t&&(this.printAddInfo=t)}onResize(){let t=document.getElementById("block__view--pdf");this.widthBlockPdf=t?.offsetHeight,this.widthBlockPdf=this.widthBlockPdf/2}btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(){let t=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"";_o.G.openLoadingEffect(`${t}...`);let i={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""},a=this.printAddInfo.templateType??0;this.data.obj&&(this.data.obj.hideGroupQuestion=0,this.exportDocxService.downloadExam(!1,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,i,a,void 0,void 0,void 0,!0).catch(s=>{this.showErrorSnack(s.message)}))}html2pdfAction(t){try{Xd().set({pagebreak:{mode:"avoid-all"}}).from(t).save("azota_save_"+this.commonService.convertVietnameseToEnglish(this.data?.obj?.name??"")+".pdf")}catch{}}getData(t){this.initStatusObj(),this.permissionService.hasViewPermission("exam",t?.permissionObj)?this.examService.apiExamGetQuestionsIdGet(t?.id??0).subscribe(i=>{const a=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(a.length),this.addRoleQuestion(a),this.cloneQuestionList=this.commonService.myClone(a),this.questionList=a,this.examObj=i.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(t){for(let i=0;i<t.length;i++)t[i].isRoleTeacher=!0}downloadExamAnswer(){this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(t=>{if(1===t.success){let i=t.data?.obj;i?.offlineMixQuestionObjs&&i.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(i))}else this.errorStatusObj(t.message??"")}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i)}createNameExam(t,i){let a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",""):"answerexcel"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");let s=".docx";return s="answersheet"==t?".pdf":s,s="answerexcel"==t?".xlsx":s,a+s}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),window.addEventListener("resize",()=>{this.isResizeEvent=!1;let t=this,i=setTimeout(()=>{t.isResizeEvent=!0},250);clearTimeout(i)}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f,y){super(),this.shareFileFlutterService=t,this.fb=i,this.baseApiService=a,this.permissionService=s,this.exportDocxService=r,this.examService=l,this.offlineExamExportService=c,this.printAnswersheetService=d,this.dialogRef=f,this.data=y,this.closeDialog=new e.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new Xa.G,this.isResizeEvent=!0,this.showFormAddInformation=!1,this.printAddInfo={},this.getBase64FromUrl=function(){var O=(0,$n.Z)(function*(N){const z=yield(yield fetch(N)).blob();return new Promise($=>{const Y=new FileReader;Y.readAsDataURL(z),Y.onloadend=()=>{$(Y.result)}})});return function(N){return O.apply(this,arguments)}}()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.g),e.Y36(p.QS),e.Y36(Nn._),e.Y36(eo.$),e.Y36(nu.m),e.Y36(em.O),e.Y36(Rn.qr),e.Y36(Ls.Y),e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-group-exam"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.onResize()},!1,e.Jf7)},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:19,vars:11,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"flex","justify-center","items-center","h-40"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"follower","displayScreen","question","index","startQuestionIndex","expandInfo",4,"ngIf"],[3,"follower","displayScreen","question","index","startQuestionIndex","expandInfo"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){1&t&&(e.YNc(0,B0,16,2,"ng-container",0),e.ALo(1,"viewPermission"),e.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),e.NdJ("click",function(){return i.downloadExam()}),e.TgZ(8,"span",5),e._UZ(9,"lucide-icon",6),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"li")(13,"a",7),e.NdJ("click",function(){return i.downloadExamAnswer()}),e.TgZ(14,"span",5),e._UZ(15,"lucide-icon",8),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()(),e.YNc(18,z0,1,2,"azt-export-excel-for-answersheet",9)),2&t&&(e.Q6J("ngIf",e.xi3(1,4,null==i.data||null==i.data.obj?null:i.data.obj.permissionObj,"exam")),e.xp6(10),e.hij(" ",e.lcZ(11,7,"lang_auto_tai_xuong_de_thi")," "),e.xp6(6),e.hij(" ",e.lcZ(17,9,"lang_auto_tai_xuong_dap_an_de_thi")," "),e.xp6(2),e.Q6J("ngIf",null!=i.exportExcelData))},dependencies:[M.sg,M.O5,j.ZT,en.VK,h.Nh5,Ta.O,bt.O,Jr,re.bT,re.Pz],encapsulation:2}),n})();const tm=function(n){return{paddingCustomQuestion:n}};function H0(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,tm,1==t.form.controls.isCreateSubTest.value&&t.isGroupMixQuestion&&t.examGroupInfos.length>1)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_luong_cau")," ")}}const K0=function(n){return{"is-invalid":n}};function $0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.validWhenChangeLimitMixquestionValue())}),e.qZA()(),e.TgZ(5,"div",19)(6,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changesMixQuestionGroupType())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngClass",e.VKq(5,K0,t.formControlLimitMixQuestion.invalid||t.checkValidateCountQuestion)),e.xp6(2),e.Q6J("disabled",t.examGroupInfos.length<=1),e.xp6(1),e.hij(" ",e.lcZ(8,3,"lang_testbank_test_config_get_with_group")," ")}}const nm=function(n){return{"border-danger":n}};function Y0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",48),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.validateWhenChangeGroupValue(a.controls.groupId))})("keydown",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.triggerCtrlEnter(a,s.controls.groupId))}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(1,nm,!t.valid||!i.totalTakeQuestion))}}function G0(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",49),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.validateWhenChangeGroupValue(a.controls.groupId))}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(1,nm,!t.valid||!i.totalTakeQuestion))}}function W0(n,o){1&n&&e._UZ(0,"input",50)}function V0(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score")," "))}function X0(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function ex(n,o){1&n&&(e.TgZ(0,"div",52),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_the_number_of_sentences_in_the_group_equal_to_0_points_will_not_be_counted")," "))}function tx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32),e.ynx(1,1),e.TgZ(2,"div",33)(3,"p",34),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.previewGroupExam(s.controls.groupId.value))}),e.TgZ(8,"span",36),e.ALo(9,"mytranslate"),e._UZ(10,"lucide-icon",37),e.qZA()()(),e.TgZ(11,"div",38),e.YNc(12,Y0,1,3,"input",39),e.YNc(13,G0,1,3,"input",40),e.YNc(14,W0,1,0,"input",41),e.TgZ(15,"div",42)(16,"div",43),e.ALo(17,"mytranslate"),e._UZ(18,"label",44),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"input",45),e.NdJ("input",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.validateWhenChangeGroupValue(s.controls.groupId))}),e.qZA()()(),e.YNc(22,V0,3,3,"div",46),e.YNc(23,X0,3,3,"div",46),e.ALo(24,"numberFloat"),e.YNc(25,ex,3,3,"div",47),e.ALo(26,"numberFloat"),e.BQk(),e.qZA()}if(2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.HOy(" ",e.lcZ(5,20,"lang_testbank_test_config_group")," ",i+1," (",t.controls.maxQuestion.value," ",e.lcZ(6,22,"lang_testbank_test_config_question"),") "),e.xp6(4),e.s9C("matTooltip",e.lcZ(9,24,"lang_auto_xem_chi_tiet")),e.Q6J("matTooltipShowDelay",1e3),e.xp6(4),e.Q6J("ngIf",1!=t.controls.isFixed.value),e.xp6(1),e.Q6J("ngIf",1!=t.controls.isFixed.value),e.xp6(1),e.Q6J("ngIf",1==t.controls.isFixed.value),e.xp6(2),e.s9C("matTooltip",e.lcZ(17,26,"lang_core_enter_total_group_score")),e.Q6J("matTooltipShowDelay",1e3)("matTooltipDisabled",0!==i),e.xp6(2),e.s9C("for","total_group_score_"+(i+1)),e.xp6(1),e.hij(" ",e.lcZ(20,28,"lang_auto_Diem")," "),e.xp6(2),e.s9C("id","total_group_score_"+(i+1)),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.controls.totalQuestion.value>0&&""==t.controls.totalGroupScore.value&&0!==t.controls.totalGroupScore.value),e.xp6(1),e.Q6J("ngIf",""!==t.controls.totalGroupScore.value&&t.controls.totalQuestion.value>0&&(0===t.controls.totalGroupScore.value||"0"===t.controls.totalGroupScore.value||0===e.lcZ(24,30,t.controls.totalGroupScore.value))),e.xp6(2),e.Q6J("ngIf",0==t.controls.totalQuestion.value&&e.lcZ(26,32,t.controls.totalGroupScore.value)>0)}}function nx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",24),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",25)(12,"a",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changesMixQuestionGroupType())}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()(),e.TgZ(15,"div",27)(16,"ng-scrollbar",28)(17,"div",29),e.ynx(18,30),e.YNc(19,tx,27,34,"div",31),e.BQk(),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,9,"lang_auto_so_luong_cau_hoi_can_lay")," "),e.xp6(3),e.lnq("(",t.totalTakeQuestion,"/",t.obj.countQuestion," ",e.lcZ(7,11,"lang_auto_cau_brackets"),""),e.xp6(3),e.hij(" ",e.lcZ(10,13,"lang_testbank_total_score_entered")+": "+t.totalPoint," "),e.xp6(4),e.hij(" ",e.lcZ(14,15,"lang_testbank_test_config_cancel_get_with_group")," "),e.xp6(3),e.Q6J("visibility","hover")("autoHeightDisabled",!1),e.xp6(3),e.Q6J("ngForOf",t.formArrayGroupInfos.controls)}}function ix(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function ox(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function ax(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e._UZ(4,"br"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_vui_long_nhap_nho_hon_tong_so_cau")," (",t.obj.countQuestion," ",e.lcZ(3,5,"lang_auto_cau_brackets")," ")}}function sx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_nho_hon_hoac_bang_120")," "))}function rx(n,o){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,ix,4,3,"span",54),e.YNc(2,ox,4,3,"span",54),e.YNc(3,ax,5,7,"span",54),e.YNc(4,sx,4,3,"span",54),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngIf",""==t.form.controls.limitMixQuestion.value),e.xp6(1),e.Q6J("ngIf",""!=t.form.controls.limitMixQuestion.value&&t.form.controls.limitMixQuestion.value<=0),e.xp6(1),e.Q6J("ngIf",t.form.controls.limitMixQuestion.value>(null!==(i=t.obj.countQuestion)&&void 0!==i?i:0)),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline&&t.form.controls.limitMixQuestion.value<t.totalTakeQuestion&&t.form.controls.limitMixQuestion.value>120)}}function lx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_nhap_qua_so_cau_toi_da_trong_nhom")," "))}function cx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_lon_hon_0")," "))}function ux(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cac_cau_cua_cac_nhom_lon_hon_tong_so_cau")," "))}function dx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_nho_nhon_hoac_bang_120")," "))}function mx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function _x(n,o){if(1&n&&(e.TgZ(0,"div",53),e.YNc(1,lx,4,3,"span",54),e.YNc(2,cx,4,3,"span",54),e.YNc(3,ux,4,3,"span",54),e.YNc(4,dx,3,3,"span",54),e.YNc(5,mx,4,3,"span",54),e.qZA()),2&n){const t=e.oxw(2);let i,a,s;e.xp6(1),e.Q6J("ngIf",t.totalTakeQuestion&&!(t.totalTakeQuestion>(null!==(i=t.obj.countQuestion)&&void 0!==i?i:0))),e.xp6(1),e.Q6J("ngIf",!t.totalTakeQuestion),e.xp6(1),e.Q6J("ngIf",t.totalTakeQuestion>(null!==(a=t.obj.countQuestion)&&void 0!==a?a:0)),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline&&t.totalTakeQuestion<(null!==(s=t.obj.countQuestion)&&void 0!==s?s:0)&&(null!==(s=t.obj.countQuestion)&&void 0!==s?s:0)>120),e.xp6(1),e.Q6J("ngIf",t.checkEmpty)}}function px(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.gL8(" ",e.lcZ(2,6,"lang_testbank_test_config_enter_bigger_number_question_permanent")," (",t.minLimitMixQuestion," ",e.lcZ(3,8,"lang_testbank_test_config_question"),"), ",e.lcZ(4,10,"lang_testbank_test_config_less_number_question_upload")," (",t.obj.countQuestion," ",e.lcZ(5,12,"lang_testbank_test_config_question"),") ")}}function hx(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.HOy(" ",e.lcZ(2,4,"lang_testbank_test_config_enter_repuest_bigger_0"),", ",e.lcZ(3,6,"lang_testbank_test_config_less_number_question_upload")," (",t.obj.countQuestion," ",e.lcZ(4,8,"lang_testbank_test_config_question"),") ")}}function gx(n,o){if(1&n&&(e.TgZ(0,"span",58),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_testbank_test_config_validate_number_question_enter")," (",t.obj.countQuestion," ",e.lcZ(3,5,"lang_testbank_test_config_question"),"). ")}}function fx(n,o){if(1&n&&(e.TgZ(0,"div",55),e.YNc(1,px,6,14,"span",54),e.YNc(2,hx,5,10,"span",54),e.YNc(3,gx,4,7,"span",56),e.TgZ(4,"a",57),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","1"==t.form.controls.mixQuestion.value&&t.minLimitMixQuestion>1&&!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf","1"==t.form.controls.mixQuestion.value&&1==t.minLimitMixQuestion&&!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf","1"==t.form.controls.mixQuestion.value&&t.isGroupMixQuestion),e.xp6(2),e.hij(" ",". "+e.lcZ(6,4,"lang_auto_tim_hieu_them")," ")}}function xx(n,o){1&n&&(e.TgZ(0,"div",59)(1,"p",60),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.TgZ(5,"a",61),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(2),e.AsE(" ",e.lcZ(3,3,"lang_auto_de_con_duoc_tao_tu_mot_luong_cau_hoi_duoc_lay_ngau_nhien_trong_de_goc_vi_du_de_goc_co_1000_cau_hoi")," ",e.lcZ(4,5,"lang_auto_ban_co_the_chi_in_40_cau_ngau_nhien_trong_1000_cau_hoi_do")," "),e.xp6(4),e.hij(" ",e.lcZ(7,7,"lang_auto_tim_hieu_them")," "))}function bx(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,tm,1==t.form.controls.isCreateSubTest.value&&t.isGroupMixQuestion&&t.examGroupInfos.length>1)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_testbank_enter_the_total_score_for_subtopics")," ")}}function vx(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_total_score")," "))}function yx(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_total_score_greater_than_0")," "))}function wx(n,o){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",62),e._UZ(4,"input",63),e.YNc(5,vx,3,3,"div",46),e.YNc(6,yx,3,3,"div",46),e.ALo(7,"numberFloat"),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",""==t.form.controls.totalPointQuestionNoGroup.value&&0!==t.form.controls.totalPointQuestionNoGroup.value),e.xp6(1),e.Q6J("ngIf",(0===t.form.controls.totalPointQuestionNoGroup.value||"0"===t.form.controls.totalPointQuestionNoGroup.value||0===e.lcZ(7,3,t.form.controls.totalPointQuestionNoGroup.value))&&""!==t.form.controls.totalPointQuestionNoGroup.value)}}const Cx=function(n,o){return{"md:col-span-9 setting-form-input-default-style":n,"col-md-12 setting-form-input-with-no-left-column":o}},kx=function(n,o){return{"md:col-span-9 setting-form-input-default-style mt-4":n,"col-span-12 mt-2 setting-form-input-with-no-left-column":o}};function Tx(n,o){if(1&n&&(e.ynx(0,1),e.TgZ(1,"div",2),e.YNc(2,H0,4,6,"div",3),e.TgZ(3,"div",4)(4,"div",5),e.YNc(5,$0,9,7,"div",6),e.YNc(6,nx,20,17,"div",7),e.YNc(7,rx,5,4,"div",8),e.YNc(8,_x,6,5,"div",8),e.YNc(9,fx,7,6,"div",9),e.YNc(10,xx,8,9,"div",10),e.qZA()(),e.YNc(11,bx,4,6,"div",3),e.TgZ(12,"div",11),e.YNc(13,wx,8,5,"div",6),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",!t.fromPrintOffline),e.xp6(1),e.Q6J("ngClass",e.WLB(12,Cx,!t.fromPrintOffline,t.fromPrintOffline)),e.xp6(2),e.Q6J("ngIf",!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",t.isGroupMixQuestion&&t.examGroupInfos.length>1),e.xp6(1),e.Q6J("ngIf",t.checkValidateCountQuestion&&!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",t.checkValidateCountQuestion&&t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",!t.fromPrintOffline),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline),e.xp6(1),e.Q6J("ngIf",!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngClass",e.WLB(15,kx,!t.fromPrintOffline,t.fromPrintOffline)),e.xp6(1),e.Q6J("ngIf",!t.isGroupMixQuestion)}}let im=(()=>{class n extends W.Q{emitDataToparent(){this.isGroupMixQuestionChange.emit(this.isGroupMixQuestion),this.checkValidateCountQuestionChange.emit(this.checkValidateCountQuestion),this.totalTakeQuestionChange.emit(this.totalTakeQuestion)}changeIsGroupMixQuestion(t){this.isGroupMixQuestion=t,this.emitDataToparent()}changeCheckValidateCountQuestion(t){this.checkValidateCountQuestion=t,this.emitDataToparent()}changeTotalTakeQuestion(t){this.totalTakeQuestion=t}changesMixQuestionGroupType(){this.changeIsGroupMixQuestion(!this.isGroupMixQuestion),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue()}setFormQuestion(t,i){let a=this.commonService.getFormObj(this.formArrayGroupInfos),s=this._getGroupMixquestionValue(t),r=this._countNullMixquestionValue();if(null!=s){if(this.commonService.isMobileOrTable())for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=t&&r>0&&(a[l].totalQuestion=Number(s>a[l].maxQuestion?a[l].maxQuestion:s));else for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=t&&i&&(a[l].totalQuestion=Number(s>a[l].maxQuestion?a[l].maxQuestion:s));this.formArrayGroupInfos.setValue(a),this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup()}this.isGroupMixQuestion&&this._validGroupMixquestionValue()}validateWhenChangeGroupValue(t){setTimeout(()=>{this.setFormQuestion(t.value,!1)},1500),this.isGroupMixQuestion&&this._validGroupMixquestionValue()}_validGroupMixquestionValue(){let t=this._countNullMixquestionValue();if(this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup(),this.checkEmpty=!1,t)return this.changeCheckValidateCountQuestion(!0),this.checkEmpty=!0,!1;if(this.isGroupMixQuestion){let i=this.commonService.getFormObj(this.formArrayGroupInfos);for(let a=0;a<i.length;a++)if(i[a].totalQuestion>i[a].maxQuestion)return this.changeCheckValidateCountQuestion(!0),!1}return this.totalTakeQuestion>(this.obj.countQuestion??0)||this.fromPrintOffline&&this.totalTakeQuestion>120||this.totalTakeQuestion<1||this.totalTakeQuestion<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):!(this.totalTakeQuestion>=this.minLimitMixQuestion&&this.totalTakeQuestion<=(this.obj.countQuestion??0)&&(this.changeCheckValidateCountQuestion(!1),1))}validWhenChangeLimitMixquestionValue(){var t=this.form.controls.limitMixQuestion.value;return null!=t?(this.hasChangeValueLimitQuestion.emit(t),Number.isInteger(Number(t))?t>(this.obj.countQuestion??0)||this.fromPrintOffline&&t>120||t<1||t<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):(t>=this.minLimitMixQuestion&&t<=(this.obj.countQuestion??0)&&this.changeCheckValidateCountQuestion(!1),!0):(this.changeCheckValidateCountQuestion(!0),!1)):(this.changeCheckValidateCountQuestion(!0),!1)}resetFormQuestionGroup(){let t=this.commonService.getFormObj(this.formArrayGroupInfos);for(let i=0;i<t.length;i++)0===t[i].isFixed&&(t[i].totalQuestion=null);this.changeCheckValidateCountQuestion(!0),this.formArrayGroupInfos.setValue(t)}triggerCtrlEnter(t,i){t.ctrlKey&&"Enter"===t.code&&(this.setFormQuestion(i.value,!0),t.preventDefault())}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.isTooltipPoint=!1}_createMixGroupFormArray(t){this.formArrayGroupInfos.clear(),t.forEach(i=>{let a=new p.cw({groupId:new p.p4(i.groupId),isFixed:new p.p4(i.isFixed),totalQuestion:new p.p4(i.limitQuestion,[p.kI.min(0),p.kI.max(i.totalQuestion??0)]),maxQuestion:new p.p4(i.totalQuestion),totalGroupScore:new p.p4(i.totalGroupScore??"",[p.kI.min(0)]),error:new p.p4(!1)});this.formArrayGroupInfos?.push(a),this.totalTakeQuestion+=Number(i.limitQuestion)??0})}_convertExamGroupInfos(t,i,a,s){let r=[],l=0,c=[];return s?.objs&&(c=Object.keys(s?.objs).map(function(d){return s?.objs[d]})),t.forEach((d,f)=>{let y=0;for(let O=l;O<l+c?.[f];O++)y+=s?.marks[O]??0;l+=c?.[f]??0,y=Math.round(100*y)/100,a?r.push({...d,limitQuestion:d.totalQuestion,totalGroupScore:y}):i&&i.hasOwnProperty(d.groupId??-1)&&r.push({...d,limitQuestion:i[d.groupId??-1],totalGroupScore:y})}),r}_getGroupMixquestionValue(t){let i=this.commonService.getFormObj(this.formArrayGroupInfos),a=null;for(let s=0;s<i.length;s++)i[s].groupId==t&&(a=i[s].totalQuestion);return a}_countNullMixquestionValue(){let t=this.commonService.getFormObj(this.formArrayGroupInfos),i=0;for(let a=0;a<t.length;a++)null==t[a].totalQuestion&&i++;return i}_countTotalQuestionInMixGroup(){let t=this.commonService.getFormObj(this.formArrayGroupInfos);var i=0;for(let a=0;a<t.length;a++)t[a].totalQuestion&&t[a].totalQuestion>0&&(i+=Number(t[a].totalQuestion));return i}_countTotalPointInMixGroup(){let t=this.commonService.getFormObj(this.formArrayGroupInfos);var i=0;for(let a=0;a<t.length;a++)t[a].totalGroupScore&&t[a].totalGroupScore>0&&(i+=Number(t[a].totalGroupScore));return i}_checkNullData(){return this.form&&(this.formArrayGroupInfos=this.form?.get(this.formArrayGroupInfosName),this.formControlLimitMixQuestion=this.form?.get(this.formControlLimitMixQuestionName)),!!(this.form&&this.formArrayGroupInfos&&this.formControlLimitMixQuestion&&null!=this.obj&&null!=this.minLimitMixQuestion&&null!=this.examGroupInfos&&null!=this.isGroupMixQuestion&&null!=this.checkValidateCountQuestion)}_initGroupData(){this.examGroupInfos.length>0&&(1==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!0),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,this.obj.mixQuestionGroupInfoWithMarkObj))):null!=this.obj.limitQuestionGroups&&0==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!1),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,void 0))):this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,{},!0,void 0)),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue())}previewGroupExam(t){let i={obj:{...this.obj,attended:0},curCateId:this.obj.categoryId??0,isOnLib:0,isShow:!0,showDelete:!1,groupId:t};this.dialog.open(J0,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.isNotNullData=this._checkNullData(),this.isNotNullData&&this._initGroupData()}constructor(t){super(),this.dialog=t,this.fromPrintOffline=!1,this.formArrayGroupInfosName="",this.formControlLimitMixQuestionName="",this.isGroupMixQuestion=!1,this.isGroupMixQuestionChange=new e.vpe,this.checkValidateCountQuestion=!1,this.checkValidateCountQuestionChange=new e.vpe,this.totalTakeQuestion=0,this.totalTakeQuestionChange=new e.vpe,this.hasChangeValueLimitQuestion=new e.vpe,this.isNotNullData=!1,this.isTooltipPoint=!1,this.totalPoint=0,this.checkEmpty=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online-mix-question"]],inputs:{fromPrintOffline:"fromPrintOffline",form:"form",formArrayGroupInfosName:"formArrayGroupInfosName",formControlLimitMixQuestionName:"formControlLimitMixQuestionName",obj:"obj",minLimitMixQuestion:"minLimitMixQuestion",examGroupInfos:"examGroupInfos"},outputs:{isGroupMixQuestionChange:"isGroupMixQuestionChange",checkValidateCountQuestionChange:"checkValidateCountQuestionChange",totalTakeQuestionChange:"totalTakeQuestionChange",hasChangeValueLimitQuestion:"hasChangeValueLimitQuestion"},features:[e.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","exam-get-mix-question",1,"grid","grid-cols-12","grap-5"],["class","col-span-12 md:col-span-3",3,"ngClass",4,"ngIf"],[1,"col-span-12","mt-2",3,"ngClass"],[1,"setting-block-create-sub","w-100"],["class","setting-block-mix-v1",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","col-span-12 mt-2 text-xs text-danger fade",4,"ngIf"],["class","col-span-12 leading-relaxed text-slate-500 text-xs px-0 mt-1",4,"ngIf"],["class","col-span-12 px-0 mt-2",4,"ngIf"],[3,"ngClass"],[1,"col-span-12","md:col-span-3",3,"ngClass"],[1,"font-medium","mt-5"],[1,"setting-block-mix-v1"],[1,"not-group"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","md:col-span-8","lg:col-span-9"],["type","text","appOnlyNumber","","formControlName","limitMixQuestion",1,"form-control",3,"ngClass","input"],[1,"col-span-6","md:col-span-4","lg:col-span-3"],["azt-track-service","config-mix-question-__RjMpaOvxg",1,"btn","btn-secondary","px-1","w-full",3,"disabled","click"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto"],[1,"mt-1"],[1,"flex"],["azt-track-service","config-mix-question-Bo6mIaGCJ9M",1,"btn","btn-sm","btn-outline-danger","mt-2","md:mt-0",3,"click"],[1,"mix_question_list"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"grid","grid-cols-12","gap-5","mb-5","p-3"],["formArrayName","groupInfos"],["class","col-span-12 md:col-span-6 lg:col-span-4 mt-1 shadow rounded-md p-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","mt-1","shadow","rounded-md","p-1"],[1,"flex","items-center","mb-1"],[1,"pb-0","text-left",2,"font-size","13.5px"],[1,"btn","btn-outline-secondary","btn-sm","btn-transparent","ml-2","p-0",3,"click"],[1,"w-5","h-5","inline-block",3,"matTooltip","matTooltipShowDelay"],["name","eye"],[1,"flex","items-center"],["class","azt-hidden md:block form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input","keydown",4,"ngIf"],["class","block md:hidden form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input",4,"ngIf"],["style"," width: 50%;","type","text","class","form-control","readonly","","formControlName","totalQuestion",4,"ngIf"],[1,"input-group","ml-2"],[1,"input-group-text",3,"matTooltip","matTooltipShowDelay","matTooltipDisabled"],[3,"for"],["type","text","appOnlyNumber","","formControlName","totalGroupScore",1,"form-control",3,"id","decimal","input"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","mt-2 text-pending text-xs",4,"ngIf"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"azt-hidden","md:block","form-control",2,"width","50%",3,"ngClass","input","keydown"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"block","md:hidden","form-control",2,"width","50%",3,"ngClass","input"],["type","text","readonly","","formControlName","totalQuestion",1,"form-control",2,"width","50%"],[1,"mt-2","text-danger","text-xs"],[1,"mt-2","text-pending","text-xs"],[1,"col-span-12","mt-2","text-xs","text-danger","fade"],[4,"ngIf"],[1,"col-span-12","leading-relaxed","text-slate-500","text-xs","px-0","mt-1"],["class","clearfix pt-1 text-left",4,"ngIf"],["href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"clearfix","pt-1","text-left"],[1,"col-span-12","px-0","mt-2"],[1,"text-slate-500","text-xs"],["azt-track-service","config-mix-question-bbIjXerrNkY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"col-span-12"],["type","text","appOnlyNumber","","formControlName","totalPointQuestionNoGroup",1,"form-control",3,"decimal"]],template:function(t,i){1&t&&e.YNc(0,Tx,14,18,"ng-container",0),2&t&&e.Q6J("ngIf",i.isNotNullData)},dependencies:[M.mk,M.sg,M.O5,Zt.gM,x.KC,p.Fj,p.JJ,p.JL,p.sg,p.u,p.CE,Vi.Y,Bt.M,h.Nh5,re.bT,re.Hb],encapsulation:2}),n})();function Ax(n,o){1&n&&(e.TgZ(0,"span",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_share")," "))}function Ox(n,o){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.BQk()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_remove_all")," "))}function Sx(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_select_all")," ")}function Ex(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"div",14)(2,"input",15),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);let r;return e.KtG(s.selectAllStudentOfClass(null==(r=a.get("classroomId"))?null:r.value))}),e.qZA(),e.TgZ(3,"label",16),e.YNc(4,Ox,3,3,"ng-container",11),e.YNc(5,Sx,2,3,"ng-template",null,17,e.W1O),e.qZA()()()}if(2&n){const t=e.MAs(6),i=e.oxw(2).$implicit;let a;e.xp6(2),e.Q6J("checked",null==(a=i.get("selectAll"))?null:a.value),e.xp6(2),e.Q6J("ngIf",i.get("selectAll").value)("ngIfElse",t)}}function Mx(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",18),e._UZ(2,"azt-loading-ui",19),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Q6J("type","oval"))}function Ix(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",21)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_core_class_has_no_student")," "))}function Lx(n,o){if(1&n&&(e.TgZ(0,"div",25)(1,"div",26),e._UZ(2,"input",27),e.TgZ(3,"label",28),e.ALo(4,"mytranslate"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()),2&n){const t=o.$implicit;let i,a,s,r;e.xp6(1),e.Q6J("formGroup",t),e.xp6(1),e.s9C("id","azt-checkbox-student-"+(null==(i=t.get("id"))?null:i.value)),e.xp6(1),e.s9C("for","azt-checkbox-student-"+(null==(a=t.get("id"))?null:a.value)),e.Q6J("matTooltip",e.lcZ(4,5,null==(s=t.get("name"))?null:s.value)),e.xp6(2),e.Oqu(e.lcZ(6,7,null==(r=t.get("name"))?null:r.value))}}function Zx(n,o){if(1&n&&(e.TgZ(0,"div",23),e.YNc(1,Lx,7,9,"div",24),e.qZA()),2&n){const t=e.oxw(4).$implicit;let i;e.xp6(1),e.Q6J("ngForOf",null==(i=t.get("listStudents"))?null:i.controls)}}function Px(n,o){if(1&n&&e.YNc(0,Zx,2,1,"div",22),2&n){const t=e.oxw(3).$implicit;let i;e.Q6J("ngIf",(null==(i=t.get("show"))?null:i.value)&&(null==(i=t.get("listStudents"))?null:i.controls.length))}}function jx(n,o){if(1&n&&(e.YNc(0,Ix,5,3,"ng-container",11),e.YNc(1,Px,1,1,"ng-template",null,20,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw(2).$implicit;let a;e.Q6J("ngIf",(null==(a=i.get("show"))?null:a.value)&&!(null!=(a=i.get("listStudents"))&&a.controls.length))("ngIfElse",t)}}function Dx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);let r;return e.KtG(s.showListStudentOfClassroom(null==(r=a.get("classroomId"))?null:r.value))}),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.YNc(6,Ax,3,3,"span",9),e.ALo(7,"fullPermission"),e._UZ(8,"lucide-icon",10),e.qZA(),e.YNc(9,Ex,7,3,"span",0),e.qZA(),e.YNc(10,Mx,3,1,"ng-container",11),e.YNc(11,jx,3,2,"ng-template",null,12,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(12),i=e.oxw().$implicit;let a,s,r,l,c;e.Q6J("formGroup",i),e.xp6(5),e.hij(" ",null==(a=i.get("classroomName"))?null:a.value," "),e.xp6(1),e.Q6J("ngIf",!e.xi3(7,7,null==(s=i.get("permissionObjs"))?null:s.value,"classroom")),e.xp6(2),e.s9C("name",null!=(r=i.get("show"))&&r.value?"chevron-up":"chevron-down"),e.xp6(1),e.Q6J("ngIf",(null==(l=i.get("show"))?null:l.value)&&(null==(l=i.get("listStudents"))?null:l.controls.length)),e.xp6(1),e.Q6J("ngIf",null==(c=i.get("loadingStudents"))?null:c.value)("ngIfElse",t)}}function Nx(n,o){if(1&n&&(e.ynx(0,3),e.YNc(1,Dx,13,10,"div",4),e.ALo(2,"createPermission"),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("ngIf",null!=(null==(a=t.get("permissionObjs"))?null:a.value)&&e.xi3(2,1,null==(a=t.get("permissionObjs"))?null:a.value,i.listPermissionTypes[i.permissionName]))}}function Qx(n,o){if(1&n&&(e.TgZ(0,"div")(1,"form",1),e.YNc(2,Nx,3,4,"ng-container",2),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngForOf",null==(i=t.form.get("studentIds"))?null:i.controls)}}let qx=(()=>{class n extends W.Q{changeCheckboxEventLocal(t){}initClassroomCheckbox(){this.formArray.clear();for(let a=0;a<this.objs.length;a++){let s=this.fb.group({classroomId:new p.NI(this.objs[a].id),classroomName:new p.NI(this.objs[a].name),permissionObjs:new p.NI(this.objs[a].permissionObj),listStudents:new p.Oe([]),show:new p.NI(!1),loadingStudents:new p.NI(!1),selectAll:new p.NI(!1)});this.formArray.push(s)}let t=[],i=[];if(this.examStudentObjs.length)for(let a=0;a<this.examStudentObjs.length;a++){let s=this.examStudentObjs[a].classroomId,r=this.examStudentObjs[a].studentId;s&&!this.commonService.filterArray(i,s)&&i.push(s),r&&!this.commonService.filterArray(t,r)&&t.push(r)}if(i)for(let a=0;a<i.length;a++)this.showListStudentOfClassroom(i[a],t);else this.objs.length&&this.objs[0].id&&this.showListStudentOfClassroom(this.objs[0].id)}addStudentToFormArr(t,i,a){this.formArray.controls.forEach(s=>{s instanceof p.cw&&s.controls.classroomId.value==i&&(t.forEach(r=>{let l=this.fb.group({id:new p.NI(r.id),name:new p.NI(r.fullName),choose:new p.NI(!!this.commonService.filterArray(a,r.id))});s.controls.listStudents.push(l)}),s.controls.loadingStudents.setValue(!1))},this.formArray.controls)}getStudentListByClass(t){return new bi.y(i=>{this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(t).subscribe(a=>{1==a.success?(i.next(a.data?.studentObjs),i.complete()):(i.next([]),i.complete())}))})}showListStudentOfClassroom(t,i){this.formArray.controls.forEach(a=>{a instanceof p.cw&&a.controls.classroomId.value==t&&(a.controls.show.value?a.controls.show.setValue(!1):(a.controls.listStudents instanceof p.Oe&&!a.controls.listStudents.length&&(a.controls.loadingStudents.setValue(!0),this.getStudentListByClass(t).subscribe(s=>{s.length?this.addStudentToFormArr(s,t,i??[]):a.controls.loadingStudents.setValue(!1)})),a.controls.show.setValue(!0)))},this.formArray.controls)}selectAllStudentOfClass(t){this.formArray.controls.forEach(i=>{if(i instanceof p.cw&&i.controls.classroomId.value==t&&i.controls.listStudents instanceof p.Oe&&i.controls.listStudents.length)if(0==i.controls.selectAll.value){for(let a=0;a<i.controls.listStudents.controls.length;a++)i.controls.listStudents.controls[a].get("choose")?.setValue(!0);i.controls.selectAll.setValue(!0)}else{for(let a=0;a<i.controls.listStudents.controls.length;a++)i.controls.listStudents.controls[a].get("choose")?.setValue(!1);i.controls.selectAll.setValue(!1)}},this.formArray.controls)}ngOnInit(){super.ngOnInit();for(var t=0;t<this.objs.length;t++)this.objs[t].name=this.commonService.myTranslateInstant(this.objs[t].name)??"";this.formArray=this.form?.get(this.formArrayName),this.formArray&&this.initClassroomCheckbox()}constructor(t,i){super(),this.fb=t,this.studentProfileV2Service=i,this.changeCheckboxEvent=new e.vpe,this.formArrayName="",this.objs=[],this.examStudentObjs=[],this.permissionName=Zn.y.exam,this.listPermissionTypes=Zn.y,this.loadingStudentList=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(iu.LU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-student-checkbox"]],inputs:{form:"form",formArrayName:"formArrayName",objs:"objs",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["formArrayName","studentIds",4,"ngFor","ngForOf"],["formArrayName","studentIds"],["class","p-1",3,"formGroup",4,"ngIf"],[1,"p-1",3,"formGroup"],[1,"border","border-slate-200","p-2","align-center",2,"border-radius","5px"],[1,"flex","justify-between"],[1,"flex",2,"vertical-align","middle","cursor","pointer",3,"click"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"w-4","h-4","flex-none",2,"width","20px !important","height","20px !important",3,"name"],[4,"ngIf","ngIfElse"],["doneLoadStudents",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"form-check"],["id","checkbox-all","type","checkbox",1,"form-check-input",3,"checked","change"],["for","checkbox-all",1,"form-check-label"],["elseTemplate",""],[1,"w-full","text-center","h-6"],[3,"type"],["hasStudents",""],[1,"w-full","text-center"],["class","grid grid-cols-12 gap-3 p-3","formArrayName","listStudents",4,"ngIf"],["formArrayName","listStudents",1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4"],[1,"azt-checkbox-item",3,"formGroup"],["type","checkbox","formControlName","choose",1,"form-check-input",3,"id"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","for"]],template:function(t,i){1&t&&e.YNc(0,Qx,3,2,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[M.sg,M.O5,Zt.gM,p._Y,p.Wl,p.JJ,p.JL,p.sg,p.u,p.CE,Bt.M,Xo.J,h.Nh5,re.bT,re.Gf,re.rm],encapsulation:2}),n})();function Fx(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Ux(n,o){1&n&&(e.TgZ(0,"div",84),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_thoi_gian")," "))}function Rx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function Bx(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"OK"),e.qZA())}function zx(n,o){1&n&&(e.TgZ(0,"div",85),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Jx(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_lua_chon_nay_cho_phep_nhung_hoc_sinh_khong_dang_ky_dang_nhap_tai_khoang_van_co_the_tham_gia_thi")," "))}function Hx(n,o){1&n&&(e.TgZ(0,"div",89),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function Kx(n,o){if(1&n&&(e.TgZ(0,"div",87),e.YNc(1,Hx,3,3,"div",88),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.checkboxValidator)}}function $x(n,o){1&n&&(e.TgZ(0,"div",89),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_student")," "))}function Yx(n,o){if(1&n&&(e.TgZ(0,"div",87),e.YNc(1,$x,3,3,"div",88),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.studentIds.errors.checkboxValidator)}}function Gx(n,o){1&n&&(e.TgZ(0,"div",90)(1,"div",46)(2,"label",91),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92)(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",93)(10,"div",17),e._UZ(11,"input",94),e.ALo(12,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_test_config_limit_listing_audio")," "),e.xp6(4),e.Oqu(e.lcZ(8,5,"lang_testbank_test_config_empty_if_not_limit_listen")),e.xp6(4),e.MGl("placeholder"," ",e.lcZ(12,7,"lang_auto_nhap_so_luot_nghe")+" ...",""))}function Wx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",117)(1,"test-config-online-student-info",118),e.NdJ("infoFieldsChange",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.infoFields=a)})("formInfoInvalidChange",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.formInfoInvalid=a)})("checkValidInfo",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.checkValidInfoField())}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("infoFields",t.infoFields)("formInfoInvalid",t.formInfoInvalid)}}function Vx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",95)(1,"div",96)(2,"div",97)(3,"label",98),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",99)(7,"div",17),e._UZ(8,"input",100),e.TgZ(9,"div",19),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()(),e.TgZ(12,"div",101)(13,"div",46)(14,"label",102),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"div",93)(18,"div",17),e._UZ(19,"input",103),e.ALo(20,"mytranslate"),e.qZA()()(),e.TgZ(21,"div",104)(22,"div",46)(23,"label",44),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",93)(27,"div",47)(28,"div",105),e._UZ(29,"input",106),e.TgZ(30,"label",107),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()(),e.TgZ(33,"div",108),e._UZ(34,"input",109),e.TgZ(35,"label",110),e._uU(36),e.ALo(37,"mytranslate"),e.TgZ(38,"span",15),e.ALo(39,"mytranslate"),e._UZ(40,"lucide-icon",16),e.qZA()()(),e.TgZ(41,"div",54),e._UZ(42,"input",111),e.TgZ(43,"label",112),e._uU(44),e.ALo(45,"mytranslate"),e.TgZ(46,"span",15),e.ALo(47,"mytranslate"),e._UZ(48,"lucide-icon",16),e.qZA()()()()()(),e.TgZ(49,"div",101)(50,"div",97)(51,"label",113),e._uU(52),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"div",92),e._uU(55),e.ALo(56,"mytranslate"),e.qZA()(),e.TgZ(57,"div",99)(58,"div",114)(59,"input",115),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeEnterInfoControl())}),e.qZA()()(),e.YNc(60,Wx,2,2,"div",116),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,13,"lang_testbank_tested_list_number_quizzes")," "),e.xp6(6),e.hij(" *",e.lcZ(11,15,"lang_testbank_config_take_test_count_des")," "),e.xp6(5),e.hij(" ",e.lcZ(16,17,"lang_testbank_test_config_password_exam")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(20,19,"lang_auto_nhap_mat_khau")+" ..."),e.xp6(5),e.hij(" ",e.lcZ(25,21,"lang_testbank_test_config_automatic_monitoring")," "),e.xp6(7),e.hij(" ",e.lcZ(32,23,"lang_testbank_test_config_off")," "),e.xp6(5),e.hij(" ",e.lcZ(37,25,"lang_auto_giam_sat_thoat_man_hinh")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(39,27,"lang_auto_azota_se_ghi_lai_cac_lan_hoc_sinh_thoat_dot")),e.xp6(6),e.hij(" ",e.lcZ(45,29,"lang_auto_giam_sat_nang_cao")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(47,31,"lang_auto_thuong_su_dung_cho_cac_ky_thi_doi_hoi_bao_mat_cao_hoc_sinh_can_dot")),e.xp6(6),e.hij(" ",e.lcZ(53,33,"lang_testbank_test_config_verify_profile_student")," "),e.xp6(3),e.hij(" ",e.lcZ(56,35,"lang_auto_khi_hoc_sinh_vao_lam_bai_se_phai_khai_bao_them_cac_thong_tin_dot")," "),e.xp6(5),e.Q6J("ngIf",1==t.form.controls.enterInfo.value)}}function Xx(n,o){1&n&&(e.TgZ(0,"div",101)(1,"div",97)(2,"label",124),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",99)(9,"div",122),e._UZ(10,"input",125),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function eb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",101)(1,"div",97)(2,"label",126),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"a",127),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",99)(12,"div",47)(13,"div",122)(14,"input",128),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.disableCheckValidateCountQuestion())}),e.qZA()()()()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_dao_cau_hoi_va_dap_an")," "),e.xp6(3),e.hij(" ",e.lcZ(7,5,"lang_auto_system_auto_mix_question_by_group")," "),e.xp6(3),e.hij(" ",e.lcZ(10,7,"lang_auto_tim_hieu_them")," "))}function tb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"test-config-online-mix-question",134),e.NdJ("isGroupMixQuestionChange",function(a){e.CHM(t);const s=e.oxw(5);return e.KtG(s.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){e.CHM(t);const s=e.oxw(5);return e.KtG(s.checkValidateCountQuestion=a)}),e.qZA()}if(2&n){const t=e.oxw(5);e.Q6J("form",t.form)("obj",t.obj)("minLimitMixQuestion",t.minLimitMixQuestion)("examGroupInfos",t.examGroupInfos)}}function nb(n,o){if(1&n&&(e.TgZ(0,"div",132),e.YNc(1,tb,1,4,"test-config-online-mix-question",133),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.obj)}}function ib(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",101)(1,"div",97)(2,"label",129),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",99)(9,"div",122)(10,"input",130),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.disableCheckValidateCountQuestion())}),e.qZA()()(),e.YNc(11,nb,2,1,"div",131),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_auto_tao_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(7,6,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "),e.xp6(4),e.Q6J("disabled",0==t.form.controls.mixQuestion.value),e.xp6(1),e.Q6J("ngIf",1==t.form.controls.isCreateSubTest.value&&1==t.form.controls.mixQuestion.value)}}function ob(n,o){if(1&n&&(e.TgZ(0,"div",104)(1,"div",97)(2,"label",135),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",99)(9,"div",122),e._UZ(10,"input",136),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_co_dinh_cau_hoi_trong_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(7,5,"lang_auto_khi_bat_chuc_nang_nay_he_thong_se_tu_dong_dao_cac_cau_hoi_dot")," "),e.xp6(4),e.Q6J("disabled",!t.form.controls.isCreateSubTest.value)}}function ab(n,o){if(1&n&&(e.TgZ(0,"div",95),e.YNc(1,Xx,11,6,"div",119),e.YNc(2,eb,15,9,"div",119),e.YNc(3,ib,12,8,"div",119),e.YNc(4,ob,11,7,"div",120),e.TgZ(5,"div",101)(6,"div",97)(7,"label",121),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"div",92),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",99)(14,"div",122),e._UZ(15,"input",123),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&t.enableRandomQuestion||!t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&0!=t.form.controls.mixQuestion.value),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&0!=t.form.controls.mixQuestion.value&&t.form.controls.isCreateSubTest.value),e.xp6(4),e.hij(" ",e.lcZ(9,6,"lang_auto_an_cau_hoi_nhom")," "),e.xp6(3),e.hij(" ",e.lcZ(12,8,"lang_auto_he_thong_se_an_di_phan_tieu_de_cua_moi_nhom_cau_hoi_co_trong_de_thi")," ")}}function sb(n,o){1&n&&(e.TgZ(0,"span",157),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function rb(n,o){if(1&n&&(e.TgZ(0,"span",157),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",t.calculateTime(t.form.controls.endTime.value,t.form.controls.minutes.value)," ")}}function lb(n,o){1&n&&(e.TgZ(0,"span",157),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function cb(n,o){if(1&n&&(e.TgZ(0,"span",157),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",t.calculateTime(t.form.controls.endTime.value,t.form.controls.minutes.value)," ")}}function ub(n,o){1&n&&(e.TgZ(0,"div",101)(1,"div",46)(2,"label",158),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",93)(6,"div",17),e._UZ(7,"input",159),e.ALo(8,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_config_point_reached_to_show_answer")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(8,4,"lang_auto_nhap_so_diem")))}function db(n,o){if(1&n&&(e.TgZ(0,"div",95)(1,"div",137)(2,"div",46)(3,"label",44),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",92),e.YNc(7,sb,3,3,"span",138),e.YNc(8,rb,3,4,"span",138),e.qZA()(),e.TgZ(9,"div",93)(10,"div",47)(11,"div",105),e._UZ(12,"input",139),e.TgZ(13,"label",140),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.TgZ(16,"div",108),e._UZ(17,"input",141),e.TgZ(18,"label",142),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()(),e.TgZ(21,"div",54),e._UZ(22,"input",143),e.TgZ(23,"label",144),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()()()()(),e.TgZ(26,"div",145)(27,"div",97)(28,"label",146),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",99)(32,"div",114),e._UZ(33,"input",147),e.qZA()()(),e.TgZ(34,"div",148)(35,"div",46)(36,"label",44),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.TgZ(39,"div",92),e.YNc(40,lb,3,3,"span",138),e.YNc(41,cb,3,4,"span",138),e.qZA()(),e.TgZ(42,"div",93)(43,"div",47)(44,"div",105),e._UZ(45,"input",149),e.TgZ(46,"label",150),e._uU(47),e.ALo(48,"mytranslate"),e.qZA()(),e.TgZ(49,"div",108),e._UZ(50,"input",151),e.TgZ(51,"label",152),e._uU(52),e.ALo(53,"mytranslate"),e.qZA()(),e.TgZ(54,"div",108),e._UZ(55,"input",153),e.TgZ(56,"label",154),e._uU(57),e.ALo(58,"mytranslate"),e.qZA()(),e.TgZ(59,"div",54),e._UZ(60,"input",155),e.TgZ(61,"label",156),e._uU(62),e.ALo(63,"mytranslate"),e.qZA()()()()(),e.YNc(64,ub,9,6,"div",119),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,15,"lang_auto_cho_xem_diem")," "),e.xp6(3),e.Q6J("ngIf",1==t.form.controls.whenShowResult.value&&(!t.form.controls.endTime.value||t.form.controls.minutes.value<=0)),e.xp6(1),e.Q6J("ngIf",1==t.form.controls.whenShowResult.value&&t.form.controls.endTime.value&&t.form.controls.minutes.value>0),e.xp6(6),e.hij(" ",e.lcZ(15,17,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(20,19,"lang_auto_khi_lam_bai_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(25,21,"lang_auto_khi_tat_ca_thi_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(30,23,"lang_testbank_config_only_show_true_or_wrong")," "),e.xp6(8),e.hij(" ",e.lcZ(38,25,"lang_auto_cho_xem_dap_an")," "),e.xp6(3),e.Q6J("ngIf",1==t.form.controls.whenShowAnswer.value&&(!t.form.controls.endTime.value||t.form.controls.minutes.value<=0)),e.xp6(1),e.Q6J("ngIf",1==t.form.controls.whenShowAnswer.value&&t.form.controls.endTime.value&&t.form.controls.minutes.value>0),e.xp6(6),e.hij(" ",e.lcZ(48,27,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(53,29,"lang_auto_khi_lam_bai_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(58,31,"lang_auto_khi_tat_ca_thi_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(63,33,"lang_testbank_config_show_exam_when_reach_custom_point")," "),e.xp6(2),e.Q6J("ngIf",3==t.form.controls.whenShowAnswer.value)}}function mb(n,o){1&n&&(e.TgZ(0,"div",101)(1,"div",97)(2,"label",162),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",92),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",99)(9,"div",114),e._UZ(10,"input",163),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_config_must_true_to_next_question")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_testbank_config_must_true_to_next_question_des")," "))}function _b(n,o){1&n&&(e.TgZ(0,"div",101)(1,"div",46)(2,"label",44),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",93)(6,"div",47)(7,"div",105),e._UZ(8,"input",164),e.TgZ(9,"label",165),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",108),e._UZ(13,"input",166),e.TgZ(14,"label",167),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()()()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_config_show_result_right_after_answer_question")," "),e.xp6(7),e.hij(" ",e.lcZ(11,5,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(16,7,"lang_auto_co")," "))}function pb(n,o){if(1&n&&(e.TgZ(0,"div",95)(1,"div",101)(2,"div",97)(3,"label",160),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",99)(7,"div",114),e._UZ(8,"input",161),e.qZA()()(),e.YNc(9,mb,11,6,"div",119),e.YNc(10,_b,17,9,"div",119),e.qZA()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,3,"lang_testbank_config_allow_each_question")," "),e.xp6(5),e.Q6J("ngIf",t.form.controls.allowTestingEachQuestion.value),e.xp6(1),e.Q6J("ngIf",t.form.controls.allowTestingEachQuestion.value)}}function hb(n,o){1&n&&(e.TgZ(0,"span",28),e._UZ(1,"azt-loading-ui",169),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}function gb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",168),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.savePublishExam(0))}),e.YNc(1,hb,2,1,"span",83),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.checkValidateCountQuestion||t.formInfoInvalid||t.form.controls.classroomIds.errors||t.form.controls.studentIds.errors||0==t.form.controls.schoolLevel.value||0==t.form.controls.schoolSubject.value),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(3,3,"lang_auto_luu_nhap")," ")}}function fb(n,o){1&n&&(e.TgZ(0,"span",28),e._UZ(1,"azt-loading-ui",169),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","oval"))}const om=function(n){return{"h-56-important":n}};function xb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6)(4,"div",7)(5,"h3",8),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",9),e._UZ(9,"config-level-subject",10),e.TgZ(10,"div",11),e._UZ(11,"config-purpose-exam",12),e.qZA(),e.TgZ(12,"div",13)(13,"div",5)(14,"label",14),e._uU(15),e.ALo(16,"mytranslate"),e.TgZ(17,"span",15),e.ALo(18,"mytranslate"),e._UZ(19,"lucide-icon",16),e.qZA()()(),e.TgZ(20,"div",5)(21,"div",17),e._UZ(22,"input",18),e.ALo(23,"mytranslate"),e.TgZ(24,"div",19),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.YNc(27,Ux,3,3,"div",20),e.qZA()()(),e.TgZ(28,"div",21)(29,"div",5)(30,"label",22),e._uU(31),e.ALo(32,"mytranslate"),e.TgZ(33,"span",15),e.ALo(34,"mytranslate"),e._UZ(35,"lucide-icon",16),e.qZA()()(),e.TgZ(36,"div",5)(37,"div",23)(38,"div",24)(39,"mat-form-field",25)(40,"input",26),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(46);return e.KtG(a.open())}),e.ALo(41,"mytranslate"),e.qZA(),e.TgZ(42,"button",27),e.NdJ("click",function(a){return e.CHM(t),e.MAs(46).open(),e.KtG(a.stopPropagation())}),e.TgZ(43,"span",28),e._UZ(44,"lucide-icon",29),e.qZA()(),e.TgZ(45,"ngx-mat-datetime-picker",null,30),e.YNc(47,Rx,2,0,"ng-template"),e.qZA()()(),e.TgZ(48,"div",24)(49,"mat-form-field",25)(50,"input",31),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(56);return e.KtG(a.open())}),e.ALo(51,"mytranslate"),e.qZA(),e.TgZ(52,"button",32),e.NdJ("click",function(a){return e.CHM(t),e.MAs(56).open(),e.KtG(a.stopPropagation())}),e.TgZ(53,"span",28),e._UZ(54,"lucide-icon",29),e.qZA()(),e.TgZ(55,"ngx-mat-datetime-picker",null,33),e.YNc(57,Bx,2,0,"ng-template"),e.qZA()()(),e.TgZ(58,"div",34)(59,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearTime())}),e.TgZ(60,"span",36),e._UZ(61,"lucide-icon",37),e.qZA(),e._uU(62),e.ALo(63,"mytranslate"),e.qZA()()(),e.TgZ(64,"div",38)(65,"div",39),e._uU(66),e.ALo(67,"mytranslate"),e.qZA(),e.TgZ(68,"div",40),e._uU(69),e.ALo(70,"mytranslate"),e.qZA(),e.YNc(71,zx,3,3,"div",41),e.qZA()()(),e.TgZ(72,"div",42)(73,"div",43)(74,"label",44),e._uU(75),e.ALo(76,"mytranslate"),e.qZA(),e.YNc(77,Jx,3,3,"div",45),e.qZA(),e.TgZ(78,"div",46)(79,"div",47)(80,"div",48)(81,"input",49),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllCheckBox(0))}),e.qZA(),e.TgZ(82,"label",50),e._uU(83),e.ALo(84,"mytranslate"),e.qZA()(),e.TgZ(85,"div",51)(86,"input",52),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllCheckBox(2))}),e.qZA(),e.TgZ(87,"label",53),e._uU(88),e.ALo(89,"mytranslate"),e.qZA()(),e.TgZ(90,"div",54)(91,"input",55),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllCheckBox(3))}),e.qZA(),e.TgZ(92,"label",56),e._uU(93),e.ALo(94,"mytranslate"),e.qZA()()()(),e.TgZ(95,"div",57)(96,"div",58)(97,"div",59)(98,"h3",60),e._uU(99),e.ALo(100,"mytranslate"),e.qZA(),e.TgZ(101,"div",61),e._UZ(102,"azt-list-classroom-checkall",62),e.qZA()(),e.TgZ(103,"div",63)(104,"ng-scrollbar",64)(105,"azt-list-classroom-checkbox",65),e.NdJ("objsChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.classroomObjs=a)}),e.qZA()()()()(),e.YNc(106,Kx,2,1,"div",66),e.TgZ(107,"div",57)(108,"div",58)(109,"div",59)(110,"h3",60),e._uU(111),e.ALo(112,"mytranslate"),e.qZA()(),e.TgZ(113,"div",63)(114,"ng-scrollbar",64),e._UZ(115,"list-student-checkbox",67),e.qZA()()()(),e.YNc(116,Yx,2,1,"div",66),e.qZA(),e.TgZ(117,"div",68)(118,"div",69)(119,"label",70),e._uU(120),e.ALo(121,"mytranslate"),e.qZA()(),e.TgZ(122,"div",71)(123,"test-config-online-tag",72),e.NdJ("tagNamesChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.tagNames=a)}),e.qZA()()(),e.YNc(124,Gx,13,9,"div",73),e.qZA()(),e.TgZ(125,"div",74)(126,"h3",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleSecuritySetting())}),e.TgZ(127,"span",76),e._uU(128),e.ALo(129,"mytranslate"),e.qZA(),e.TgZ(130,"span",77),e._UZ(131,"lucide-icon",78),e.qZA()(),e.YNc(132,Vx,61,37,"div",79),e.qZA(),e.TgZ(133,"div",74)(134,"h3",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.toggleShuffleSetting())}),e.TgZ(135,"span",76),e._uU(136),e.ALo(137,"mytranslate"),e.qZA(),e.TgZ(138,"span",77),e._UZ(139,"lucide-icon",78),e.qZA()(),e.YNc(140,ab,16,10,"div",79),e.qZA(),e.TgZ(141,"div",74)(142,"h3",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.togglePointAndAnswerSetting())}),e.TgZ(143,"span",76),e._uU(144),e.ALo(145,"mytranslate"),e.qZA(),e.TgZ(146,"span",77),e._UZ(147,"lucide-icon",78),e.qZA()(),e.YNc(148,db,65,35,"div",79),e.qZA(),e.TgZ(149,"div",74)(150,"h3",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.togglePracticeSetting())}),e.TgZ(151,"span",76),e._uU(152),e.ALo(153,"mytranslate"),e.qZA(),e.TgZ(154,"span",77),e._UZ(155,"lucide-icon",78),e.qZA()(),e.YNc(156,pb,11,5,"div",79),e.qZA(),e.TgZ(157,"div",80),e.YNc(158,gb,4,5,"button",81),e.TgZ(159,"button",82),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savePublishExam(1))}),e.YNc(160,fb,2,1,"span",83),e._uU(161),e.ALo(162,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.MAs(46),i=e.MAs(56),a=e.oxw();e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(3),e.hij(" ",e.lcZ(7,74,"lang_auto_cau_hinh_chung")," "),e.xp6(3),e.Q6J("form",a.form)("schoolLevelObjs",a.schoolLevelObjs)("schoolSubjectObjs",a.schoolSubjectObjs)("typeView",1),e.xp6(2),e.Q6J("form",a.form)("purposeList",a.listPurposeObjs),e.xp6(4),e.hij(" ",e.lcZ(16,76,"lang_testbank_test_config_time_test_minutes")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(18,78,"lang_auto_thoi_gian_lam_bai_cua_hoc_sinh")),e.xp6(5),e.s9C("placeholder",e.lcZ(23,80,"lang_auto_nhap_thoi_gian")+" ..."),e.xp6(3),e.hij(" ",e.lcZ(26,82,"lang_testbank_test_config_enter_0_unlimited_time")," "),e.xp6(2),e.Q6J("ngIf",a.form.controls.minutes.errors),e.xp6(4),e.hij(" ",e.lcZ(32,84,"lang_testbank_test_config_time_assign_exam")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(34,86,"lang_auto_hoc_sinh_lam_bai_online_chi_duoc_lam_bai_vao_thoi_gian_giao_de")),e.xp6(7),e.s9C("placeholder",e.lcZ(41,88,"lang_auto_tu")),e.Q6J("ngxMatDatetimePicker",t),e.xp6(10),e.s9C("placeholder",e.lcZ(51,90,"lang_auto_den")),e.Q6J("ngxMatDatetimePicker",i),e.xp6(12),e.hij(" ",e.lcZ(63,92,"lang_auto_dat_lai")," "),e.xp6(4),e.hij(" ",e.lcZ(67,94,"lang_testbank_test_config_tutorial_time_assigne_exam"),". "),e.xp6(3),e.hij(" ",e.lcZ(70,96,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),e.xp6(2),e.Q6J("ngIf",a.calculatorTimeValidate(a.form.controls.endTime.value,a.form.controls.startTime.value)<=0),e.xp6(4),e.hij(" ",e.lcZ(76,98,"lang_testbank_test_config_who_tested")," "),e.xp6(2),e.Q6J("ngIf",0==a.form.controls.whoAllow.value),e.xp6(6),e.hij(" ",e.lcZ(84,100,"lang_testbank_test_config_all_people")," "),e.xp6(5),e.hij(" ",e.lcZ(89,102,"lang_testbank_test_config_assigne_class")," "),e.xp6(5),e.hij(" ",e.lcZ(94,104,"lang_testbank_test_config_assigne_student")," "),e.xp6(2),e.Q6J("hidden",2!=a.form.controls.whoAllow.value),e.xp6(4),e.hij(" ",e.lcZ(100,106,"lang_auto_danh_sach_cac_lop")," "),e.xp6(3),e.Q6J("form",a.form)("objs",a.classroomObjs)("permissionName",a.permissionTypes.exam),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(122,om,a.isMobileWebView)),e.xp6(1),e.Q6J("form",a.form)("objs",a.classroomObjs)("examClassroomObjs",a.examClassroomObjs)("permissionName",a.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",2==a.form.controls.whoAllow.value&&a.form.controls.classroomIds.errors),e.xp6(1),e.Q6J("hidden",3!=a.form.controls.whoAllow.value),e.xp6(4),e.hij(" ",e.lcZ(112,108,"lang_test_config_student_list")," "),e.xp6(3),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(124,om,a.isMobileWebView)),e.xp6(1),e.Q6J("form",a.form)("formArrayName","studentIds")("objs",a.classroomObjs)("examStudentObjs",a.examStudents)("permissionName",a.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",3==a.form.controls.whoAllow.value&&a.form.controls.studentIds.errors),e.xp6(4),e.hij(" ",e.lcZ(121,110,"lang_testbank_test_config_add_tag")," "),e.xp6(3),e.Q6J("form",a.form)("tagNameCtrl",a.tagNameCtrl)("tagNames",a.tagNames)("allTagNames",a.allTagNames),e.xp6(1),e.Q6J("ngIf",a.isHasAudio),e.xp6(4),e.hij(" ",e.lcZ(129,112,"lang_testbank_config_security_setting")," "),e.xp6(3),e.s9C("name",a.showSecuritySetting?"chevron-up":"chevron-down"),e.xp6(1),e.Q6J("ngIf",a.showSecuritySetting),e.xp6(4),e.hij(" ",e.lcZ(137,114,"lang_testbank_test_config_mix_question_and_answer")," "),e.xp6(3),e.s9C("name",a.showShuffleSetting?"chevron-up":"chevron-down"),e.xp6(1),e.Q6J("ngIf",a.showShuffleSetting),e.xp6(4),e.hij(" ",e.lcZ(145,116,"lang_testbank_config_show_point_and_answer_setting")," "),e.xp6(3),e.s9C("name",a.showPointAndAnswerSetting?"chevron-up":"chevron-down"),e.xp6(1),e.Q6J("ngIf",a.showPointAndAnswerSetting),e.xp6(4),e.hij(" ",e.lcZ(153,118,"lang_testbank_config_practice_setting")," "),e.xp6(3),e.s9C("name",a.showPracticeSetting?"chevron-up":"chevron-down"),e.xp6(1),e.Q6J("ngIf",a.showPracticeSetting),e.xp6(2),e.Q6J("ngIf",0==(null==a.obj?null:a.obj.isPublished)),e.xp6(1),e.Q6J("disabled",a.checkValidateCountQuestion||a.formInfoInvalid||a.form.controls.classroomIds.errors||a.form.controls.studentIds.errors||0==a.form.controls.schoolLevel.value||0==a.form.controls.schoolSubject.value),e.xp6(1),e.Q6J("ngIf",a.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(162,120,"lang_auto_xuat_ban")," ")}}let bb=(()=>{class n extends W.Q{changModeView(t){this.modeView=t,document.getElementById(t)?.scrollIntoView({behavior:"smooth"})}getGroupMixInfosSubmit(t){let i={},a=[];return t.forEach(r=>{if(!i.hasOwnProperty(r.groupId)){i[r.groupId]=r.totalQuestion??0;let l=[],c=Number(r.totalGroupScore)/Number(r.totalQuestion);for(let d=0;d<r.totalQuestion;d++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(t,i){let a=Number(i)/Number(t),s=new Array(Number(t)).fill(a);return{limitMixQuestion:Number(t),marks:s}}clearTime(){this.form.controls.startTime.setValue(""),this.form.controls.endTime.setValue("")}calculateTime(t,i){let a=new Date(t).getTime()+60*i*1e3;return this.timeService.formatFullDateTimeByUserUnit(a)}calculatorTimeValidate(t,i){return""!=t&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(t,i):1}checkInfosField(t){let i="",a="",s="";if(this.commonService.myTranslate(["lang_auto_ho_va_ten"]).subscribe(r=>{i=r.lang_auto_ho_va_ten}),this.commonService.myTranslate(["lang_auto_lop"]).subscribe(r=>{a=r.lang_auto_lop}),this.commonService.myTranslate(["lang_auto_truong"]).subscribe(r=>{s=r.lang_auto_truong}),null==t||""==t)this.infoFields.push({type:0,title:i,contents:[]}),this.infoFields.push({type:0,title:a,contents:[]}),this.infoFields.push({type:0,title:s,contents:[]});else{let r=this.commonService.myParseJson(t);this.infoFields=r??[]}}checkValidInfoField(){for(let t=0;t<this.infoFields.length;t++)if(0!=this.infoFields[t].type){if(!(this.infoFields[t].contents&&this.infoFields[t].contents.length>0)){this.formInfoInvalid=!0,this.infoFields[t].error=!0;break}{let i=this.infoFields[t].contents.filter(a=>""==a);if(i&&i.length>0){this.formInfoInvalid=!0,this.infoFields[t].error=!0;break}this.formInfoInvalid=!1}}else this.formInfoInvalid=!1}changeEnterInfoControl(){this.form.controls.enterInfo.value?this.checkValidInfoField():this.formInfoInvalid=!1}clearAllCheckBox(t){2==t?this.isSelectClassroom=!0:3==t||(this.isSelectClassroom=!1)}toggleSecuritySetting(){this.showSecuritySetting=!this.showSecuritySetting,this.saveToggleSetting()}toggleShuffleSetting(){this.showShuffleSetting=!this.showShuffleSetting,this.saveToggleSetting()}togglePointAndAnswerSetting(){this.showPointAndAnswerSetting=!this.showPointAndAnswerSetting,this.saveToggleSetting()}togglePracticeSetting(){this.showPracticeSetting=!this.showPracticeSetting,this.saveToggleSetting()}saveToggleSetting(){let t={showSecuritySetting:this.showSecuritySetting,showShuffleSetting:this.showShuffleSetting,showPointAndAnswerSetting:this.showPointAndAnswerSetting,showPracticeSetting:this.showPracticeSetting};this.browserStorageService.saveSimpleStorage("config_toggle_setting_"+this.obj?.hashId,this.commonService.serializeJson(t))}redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}disableCheckValidateCountQuestion(){this.form.controls.mixQuestion.value||(this.form.controls.isCreateSubTest.setValue(!1),this.checkValidateCountQuestion=!1)}savePublishExam(t){let i=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.form.controls.isRandomQuestion.value&&(this.form.controls.mixQuestion.setValue(!1),this.form.controls.isCreateSubTest.setValue(!1));let a=this.commonService.getFormObj(this.form);const s=this.tagNameCtrl.value;if(s?.trim()&&this.tagNames.push(s.trim()),this.calculatorTimeValidate(a.endTime,a.startTime)<0)return void this.showErrorSnack("lang_testbank_test_config_end_time_bigger_time_star");if(("1"==a.whenShowAnswer||"1"==a.whenShowResult)&&(!a.endTime||a.minutes<=0))return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian_giao_de_va_thoi_gian_lam_bai_khi_chon_khi_tat_ca_thi_xong");if(""==a.minutes||null==a.minutes)return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian");if(0==a.purposeExam)return void this.showErrorSnack("lang_testbank_please_choose_purpose_exam");if((4==a.purposeExam||8==a.purposeExam||12==a.purposeExam)&&""===a.purposeNote?.trim())return void this.showErrorSnack("lang_testbank_please_enter_purpose_create_exam");a.startTime=""===a.startTime||null===a.startTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.startTime),a.endTime=""===a.endTime||null===a.endTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.endTime),a.isTakeTestOnce=a.isTakeTestOnce,a.limitAudio=a.limitAudio>0?a.limitAudio:0,a.mixQuestion=a.mixQuestion?1:0,a.limitMixQuestion=a.limitMixQuestion>0?a.limitMixQuestion:0,a.enterInfo=1!=a.enterInfo?0:1;let r=this.getGroupMixInfosSubmit(a.groupInfos),l=this.getMixInfoSubmit(a.limitMixQuestion,a.totalPointQuestionNoGroup),c=a.isCreateSubTest&&1==a.mixQuestion?2:a.mixQuestion;if(1==a.enterInfo?this.checkValidInfoField():this.formInfoInvalid=!1,a.isCreateSubTest||(this.checkValidateCountQuestion=!1),this.formInfoInvalid||this.checkValidateCountQuestion)return void this.showErrorSnack("lang_auto_loi_hay_chac_chan_ban_da_dien_du_thong_tin");if(this.form.controls.classroomIds.errors)return void this.showErrorSnack("lang_auto_please_select_classroom");var d=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.exam);const f=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,d,a.classroomIds);if(a.isCreateSubTest&&this.isGroupMixQuestion){let I=!1;if(this.form.controls.groupInfos.controls.forEach(z=>{const $=z;return null==$.controls?.totalQuestion?.value||""===$.controls?.totalQuestion?.value?(this.showErrorSnack("lang_core_not_valid_mix_group_question"),void(I=!0)):null==$.controls?.totalGroupScore?.value||""===$.controls?.totalGroupScore?.value||0==Number($.controls?.totalGroupScore?.value)&&Number($.controls?.totalQuestion?.value)>0?(this.showErrorSnack("lang_testbank_please_enter_all_correct_information"),void(I=!0)):void 0}),I)return}if(a.isCreateSubTest&&!this.isGroupMixQuestion&&(0==a.totalPointQuestionNoGroup||""==a.totalPointQuestionNoGroup))return void this.showErrorSnack("lang_testbank_please_enter_all_correct_information");let y=[];3==a.whoAllow&&a.studentIds&&a.studentIds.length?a.studentIds.forEach(I=>{let z={classroomId:I.classroomId??0,assignStudentIds:[]};I.listStudents?.forEach($=>{$.id&&$.choose&&z.assignStudentIds?.push($.id)}),z.assignStudentIds?.length&&y?.push(z)}):y=void 0,this.initStatusObj();let O={minutes:a.minutes,password:a.password,startTime:a.startTime,endTime:a.endTime,whenShowAnswer:a.whenShowAnswer,whenShowResult:a.whenShowResult,onlyDisplayCorrectOrWrongQuestion:a.onlyTrueWrong?1:0,viewAnswerResultMinMark:a.viewAnswerResultMinMark,whoAllow:a.whoAllow,isPublished:t??void 0,autoMonitor:a.autoMonitor,limitAudio:a.limitAudio,tags:this.tagNames,isTakeTestOnce:a.isTakeTestOnce,mixQuestion:c,fixMixQuestion:a.fixMixQuestion?1:0,mixQuestionNotInGroupInfoWithMarkObj:l,isRandomQuestion:this.enableRandomQuestion?a.isRandomQuestion?1:0:void 0,enterInfo:a.enterInfo,classroomIds:f,infoFieldsV2:JSON.stringify(this.infoFields),price:a.price,isSaveConfig:1,hideGroupQuestion:a.hideGroupQuestion?1:0,mixQuestionGroupInfoWithMarkObj:r,schoolLevelId:Number(a.schoolLevel),schoolSubjectId:Number(a.schoolSubject),purposeId:Number(a.purposeExam),purposeNote:a.purposeNote,allowTestingEachQuestion:a.allowTestingEachQuestion?1:0,mustCorrectToMoveOn:a.mustCorrectToMoveOn?1:0,showQuestionHelp:Number(a.showQuestionHelp),assignStudents:y,enableViewAnswerResultMinMark:!1};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,O).subscribe(N=>{if(1==N.success){if(t){let I=`/admin/testbank/config-exam-online/${i??0}/${this.obj?.hashId}?backto=`+encodeURIComponent(this.backToLink);this.commonService.myNavigationWithQueryString(`/admin/testbank/publish-document/0/${i??0}/${this.obj?.hashId}`,"?backto="+encodeURIComponent(I))}else{let I=this.backToLink.includes("shareType");this.commonService.myNavigation(`/admin/testbank/document-management/0/${I?0:i??0}/1`)}this.successStatusObj()}else this.errorStatusObj(N.message??"",!0)}))}getExamDataByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{if(1==i.success){if(null!=i.data){let a=i.data?.examObj??{},s=this.castObj(a);s&&(s.limitQuestionGroupsParse=this.commonService.myParseJson(a.limitQuestionGroups??""),this.obj=s),this.hasGroupQuestion=!!i.data?.hasGroupQuestion,this.minLimitMixQuestion=i.data.minLimitMixQuestion??0,this.examGroupInfos=i.data.examGroupInfos&&i.data.examGroupInfos.length>0?i.data.examGroupInfos:this.examGroupInfos,this.enableRandomQuestion=i.data.enableRandomQuestion??!1;let r=i.data.examObj?.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((I,z)=>I+z,0);if(r=Math.round(100*(r??1))/100,this.classroomObjs=i.data.classroomObjs??new Array,this.examStudents=i.data.examStudents??new Array,this.examClassroomObjs=i.data.examClassroomObjs??[],this.listPurposeObjs=i.data.listPurposeObjs??[],i.data.examTagObjs)for(let I=0;I<i.data.examTagObjs.length;I++)this.tagNames.push(i.data.examTagObjs[I].name??"");if(i.data.allTagObjs)for(let I=0;I<i.data.allTagObjs.length;I++)this.allTagNames.push(i.data.allTagObjs[I].name??"");this.schoolLevelObjs=i.data.schoolLevelObjs??[],this.schoolSubjectObjs=i.data.schoolSubjectObjs??[];let l=this.obj?.schoolLevelId?this.obj?.schoolLevelId:i.data.examSchoolLogObj?.lastSchoolLevelId??0,c=this.obj?.schoolSubjectId?this.obj?.schoolSubjectId:i.data.examSchoolLogObj?.lastSchoolSubjectId??0;this.hashId=this.obj?.hashId??"",this.isHasAudio=i.data.isHasAudio??0;let d=2==this.obj?.mixQuestion,f=1==this.obj?.mixQuestion||2==this.obj?.mixQuestion;this.isSelectClassroom="2"==String(this.obj?.whoAllow),this.form.patchValue({schoolLevel:l,schoolSubject:c,purposeExam:i.data.purposeId??0,purposeNote:i.data.purposeNote??"",isTakeTestOnce:this.obj?.isTakeTestOnce,password:this.obj?.password,price:null!=this.obj?.price?Number(this.obj?.price):0,autoMonitor:String(this.obj?.autoMonitor),minutes:this.obj?.minutes,startTime:null!=this.obj?.startTime?this.obj.startTime:"",endTime:null!=this.obj?.endTime?this.obj.endTime:"",whenShowAnswer:String(this.obj?.whenShowAnswer),whenShowResult:String(this.obj?.whenShowResult),onlyTrueWrong:!!i.data.onlyDisplayCorrectOrWrongQuestion,viewAnswerResultMinMark:i.data.viewAnswerResultMinMark,whoAllow:String(this.obj?.whoAllow),mixQuestion:f,isRandomQuestion:1===this.obj?.isRandomQuestion,isCreateSubTest:d,limitMixQuestion:this.obj?.limitMixQuestion,totalPointQuestionNoGroup:r,fixMixQuestion:1==this.obj?.fixMixQuestion,hideGroupQuestion:1==this.obj?.hideGroupQuestion,limitAudio:null!=this.obj?.limitAudio?Number(this.obj?.limitAudio):0,enterInfo:0!=this.obj?.enterInfo,allowTestingEachQuestion:i.data.allowTestingEachQuestion,mustCorrectToMoveOn:i.data.mustCorrectToMoveOn,showQuestionHelp:i.data.showQuestionHelp});let N=this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("config_toggle_setting_"+this.obj?.hashId)??"");N&&(this.showSecuritySetting=N.showSecuritySetting,this.showShuffleSetting=N.showShuffleSetting,this.showPointAndAnswerSetting=N.showPointAndAnswerSetting,this.showPracticeSetting=N.showPracticeSetting),this.checkInfosField(this.obj?.infoFieldsV2??""),this.successStatusObj()}}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){this.form=this.formBuilder.group({schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required]),purposeExam:new p.p4(0,[p.kI.required]),purposeNote:new p.p4(""),minutes:[60,[p.kI.required,p.kI.min(0)]],startTime:new p.p4(""),endTime:new p.p4("",[p.kI.required]),isTakeTestOnce:new p.p4("0",[p.kI.min(0)]),autoMonitor:new p.p4("0"),password:new p.p4(""),whenShowAnswer:new p.p4("0"),whenShowResult:new p.p4("0"),onlyTrueWrong:new p.p4(!1),viewAnswerResultMinMark:new p.p4("0",[p.kI.min(0)]),whoAllow:new p.p4("0"),classroomIds:this.formBuilder.array([]),studentIds:new p.vC([]),mixQuestion:new p.p4(!1),isCreateSubTest:new p.p4(!1),limitMixQuestion:new p.p4("",[p.kI.required]),totalPointQuestionNoGroup:new p.p4(10,[p.kI.required]),groupInfos:new p.vC([]),fixMixQuestion:new p.p4(!1),isRandomQuestion:new p.p4(!1),enterInfo:new p.p4(!1),price:new p.p4(0,[p.kI.min(0)]),limitAudio:new p.p4(0,[p.kI.min(0)]),hideGroupQuestion:new p.p4("0"),allowTestingEachQuestion:new p.p4(!1),mustCorrectToMoveOn:new p.p4(!1),showQuestionHelp:new p.p4("0")},{validators:[js.customDateTimeValidator,zo.h.classroomCheckBoxValidator,su.studentCheckBoxValidator]}),this.form.valueChanges.subscribe(s=>{let r=JSON.stringify(s);r!=this.prevData&&(this.prevData=r,this.form.patchValue(s))}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_test_config_online_description",image:""});let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",a=this.commonService.getMyQueryParam("backto")??"";this.backToLink=a||`/admin/testbank/document-management/0/${t}/1`,this.getExamDataByHashId(i),super.ngOnInit()}constructor(t,i,a,s,r,l){super(),this.formBuilder=t,this.activeRoute=i,this.timeService=a,this.documentConfigService=s,this.sEAztClassroomCheckboxService=r,this.browserStorageService=l,this.form=new p.nJ({}),this.permissionTypes=Zn.y,this.backToLink="",this.hashId="",this.prevData="",this.isSelectClassroom=!1,this.showSecuritySetting=!0,this.showShuffleSetting=!0,this.showPointAndAnswerSetting=!0,this.showPracticeSetting=!0,this.tagNameCtrl=new p.p4,this.tagNames=[],this.allTagNames=[],this.classroomObjs=[],this.examClassroomObjs=[],this.examStudents=[],this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.hasGroupQuestion=!1,this.minLimitMixQuestion=0,this.examGroupInfos=[],this.enableRandomQuestion=!1,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.infoFields=[],this.formInfoInvalid=!1,this.isHasAudio=0,this.modeView="general",this.listPurposeObjs=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(Mt.O),e.Y36(Vd.C),e.Y36(Ki.L),e.Y36(we.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online"]],features:[e._Bn([{provide:Tn.fM,useClass:So.WG,deps:[ji.Ad,ga.o8]},{provide:Tn.ab,useFactory:$a.hx,deps:[Mt.O]}]),e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto",2,"max-width","1150px"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12"],[3,"formGroup"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],["id","general",1,"box","p-5","mt-3"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],[1,"config-purpose-exam","mt-3"],[3,"form","purposeList"],["id","azt-config-time-minutes",1,"grid","grid-cols-12","mt-4"],["for","document-time-minutes",1,"form-label","font-medium","flex","items-center"],[1,"w-4","h-4","inline-block","ml-2",3,"matTooltip"],["name","info"],[1,"setting-input"],["id","document-time-minutes","appOnlyNumber","","formControlName","minutes","type","text",1,"form-control",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1"],["class","text-xs text-danger mt-1",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],["for","regular-form-1",1,"form-label","font-medium","flex","items-center"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","config-exam-online-zpjNTbf42S","matInput","","formControlName","startTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-WIIkPQrzu5","matSuffix","",2,"font-size","18px",3,"click"],[1,"w-4","h-4","inline-block"],["name","calendar-clock"],["startTime",""],["azt-track-service","config-exam-online-NFd3Eq4Vq9","matInput","","formControlName","endTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-2LQ7XbEP9P","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","config-exam-online-ceMErvp9Ni",1,"btn","btn-outline-secondary","w-full",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","timer-reset"],[1,"text-xs","mt-2"],[1,"text-slate-500"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"form-label","font-medium","flex","items-center"],["class","leading-relaxed text-slate-500 text-xs mt-2",4,"ngIf"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio","value","0",1,"form-check-input",3,"change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mr-10","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio","value","2",1,"form-check-input",3,"change"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio","value","3",1,"form-check-input",3,"change"],["for","config-who-student",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[3,"form","formArrayName","objs","examStudentObjs","permissionName"],["id","tag-block",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3"],[1,"form-label","mt-2","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[2,"width","100%",3,"form","tagNameCtrl","tagNames","allTagNames","tagNamesChange"],["class","grid grid-cols-12 mt-4","id","exam-audio",4,"ngIf"],[1,"setting-advanced","mt-5"],[1,"text-md","flex","items-center","font-medium","mr-2","cursor-pointer",3,"click"],[1,"uppercase"],[1,"w-4","h-4","inline-block","ml-2"],[3,"name"],["class","box p-5 mt-3","id","advanced",4,"ngIf"],[1,"text-right","mt-5"],["azt-track-service","config-exam-online-w_k87Co86T","class","btn w-24 btn-pending mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","config-exam-online-IJPSsthNNv",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"text-danger","mt-1"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],["id","exam-audio",1,"grid","grid-cols-12","mt-4"],["for","config-audio",1,"form-label","mt-2","mb-0","font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],[1,"col-span-12","lg:col-span-7"],["type","text","id","config-audio","appOnlyNumber","","formControlName","limitAudio",1,"form-control",3,"placeholder"],["id","advanced",1,"box","p-5","mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-5"],["for","config-once-test",1,"form-label","font-medium","flex","items-center"],[1,"col-span-2","lg:col-span-7"],["id","config-once-test","appOnlyNumber","","formControlName","isTakeTestOnce","type","text",1,"form-control"],[1,"grid","grid-cols-12","mt-4"],["for","config-password",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","config-password","formControlName","password","type","text","autocapitalize","none",1,"form-control",3,"placeholder"],[1,"grid","grid-cols-12","mt-5"],[1,"form-check","mr-8"],["id","automatic-off","type","radio","formControlName","autoMonitor","value","0",1,"form-check-input"],["for","automatic-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","automatic-exit-monitor","type","radio","formControlName","autoMonitor","value","1",1,"form-check-input"],["for","automatic-exit-monitor",1,"form-check-label","flex","items-center"],["id","automatic-advanced","type","radio","formControlName","autoMonitor","value","3",1,"form-check-input"],["for","automatic-advanced",1,"form-check-label","flex","items-center"],["for","config-verify-student",1,"form-label","font-medium","flex","items-center"],[1,"setting-input","form-switch","ml-"],["id","config-verify-student","formControlName","enterInfo","type","checkbox",1,"show-code","form-check-input",3,"change"],["class","intro-y col-span-12 mt-5",4,"ngIf"],[1,"intro-y","col-span-12","mt-5"],[3,"infoFields","formInfoInvalid","infoFieldsChange","formInfoInvalidChange","checkValidInfo"],["class","grid grid-cols-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-5",4,"ngIf"],["for","config-hide-group-header",1,"form-label","font-medium","flex","items-center"],[1,"setting-input","form-switch"],["id","config-hide-group-header","formControlName","hideGroupQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-random-matrix-question",1,"form-label","font-medium","flex","items-center"],["id","config-random-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-mix-question",1,"form-label","mb-0","font-medium","flex","items-center"],["azt-track-service","config-exam-online-vrhIU4hchP","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/dao-cau-hoi-va-dap-an/","target","_blank",1,"text-primary","font-medium"],["id","config-mix-question","formControlName","mixQuestion","type","checkbox",1,"show-code","form-check-input",3,"change"],["for","config-create-sub",1,"form-label","font-medium","flex","items-center"],["id","config-create-sub","formControlName","isCreateSubTest","type","checkbox",1,"show-code","form-check-input",3,"disabled","change"],["class","col-span-12 mt-4 intro-y",4,"ngIf"],[1,"col-span-12","mt-4","intro-y"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange",4,"ngIf"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange"],["for","config-fix-mix",1,"form-label","font-medium","flex","items-center"],["id","config-fix-mix","formControlName","fixMixQuestion","type","checkbox",1,"show-code","form-check-input",3,"disabled"],["id","whenShowResult-block",1,"grid","grid-cols-12","mt-4"],["class","clearfix pt-1",4,"ngIf"],["id","whenShowResult-off","type","radio","formControlName","whenShowResult","value","2",1,"form-check-input"],["for","whenShowResult-off",1,"form-check-label"],["id","whenShowResult-tested","type","radio","formControlName","whenShowResult","value","0",1,"form-check-input"],["for","whenShowResult-tested",1,"form-check-label","flex","items-center"],["id","whenShowResult-advanced","type","radio","formControlName","whenShowResult","value","1",1,"form-check-input"],["for","whenShowResult-advanced",1,"form-check-label","flex","items-center"],["id","onlyShowTrueWrong-block",1,"grid","grid-cols-12","mt-4"],["for","only-show-true-wrong",1,"form-label","font-medium","flex","items-center"],["id","only-show-true-wrong","formControlName","onlyTrueWrong","type","checkbox",1,"show-code","form-check-input"],["id","whenShowAnswer-block",1,"grid","grid-cols-12","mt-4"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","2",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-advanced",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced-2","type","radio","formControlName","whenShowAnswer","value","3",1,"form-check-input"],["for","whenShowAnswer-advanced-2",1,"form-check-label","flex","items-center"],[1,"clearfix","pt-1"],["for","show-answer-reached-point",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","show-answer-reached-point","appOnlyNumber","","formControlName","viewAnswerResultMinMark","type","text",1,"form-control",3,"placeholder"],["for","allow-each-question",1,"form-label","font-medium","flex","items-center"],["id","allow-each-question","formControlName","allowTestingEachQuestion","type","checkbox",1,"show-code","form-check-input"],["for","must-correct-to-move-on",1,"form-label","font-medium","flex","items-center"],["id","must-correct-to-move-on","formControlName","mustCorrectToMoveOn","type","checkbox",1,"show-code","form-check-input"],["id","must-correct-to-move-on-off","type","radio","formControlName","showQuestionHelp","value","0",1,"form-check-input"],["for","must-correct-to-move-on-off",1,"form-check-label"],["id","must-correct-to-move-on","type","radio","formControlName","showQuestionHelp","value","1",1,"form-check-input"],["for","must-correct-to-move-on",1,"form-check-label","flex","items-center"],["azt-track-service","config-exam-online-w_k87Co86T",1,"btn","w-24","btn-pending","mr-2",3,"disabled","click"],[3,"type"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,Fx,1,0,"azt-loading-effect",1),e.YNc(2,xb,163,126,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.O5,As.Nt,Kn.KE,Kn.R9,Zt.gM,Tn.rZ,Tn.T$,x.KC,p._Y,p.Fj,p.Wl,p._,p.JJ,p.JL,p.sg,p.u,p.CE,jt.Q,Vi.Y,Bt.M,Ho.o,fa.g,Xo.J,pn._,h.Nh5,T0,Q0,im,Ga,Lr,qx,re.bT],encapsulation:2}),n})(),am=(()=>{class n extends W.Q{redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"";let i=this.commonService.getMyQueryParam("backto");this.backToLink=i??`/admin/testbank/document-management/1/${t??0}/1`}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(t){super(),this.activeRoute=t,this.backToLink="",this.homeworkHashId=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-homework"]],features:[e.qOj],decls:2,vars:1,consts:[[3,"headerBackToLink"],[3,"onBack"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"main-config-homework",1),e.NdJ("onBack",function(){return i.redirectBackTo()}),e.qZA()()),2&t&&e.Q6J("headerBackToLink",i.backToLink)},dependencies:[pn._,bn]}),n})();var ea=S(70342),sm=S(87466);function vb(n,o){1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"span",10),e._uU(3,"Loading..."),e.qZA()()())}function yb(n,o){1&n&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*** ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class"),""))}function wb(n,o){if(1&n&&(e.TgZ(0,"div",30),e.YNc(1,yb,3,3,"div",31),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow)}}function Cb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"span",34),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showCopySuccess())}),e.TgZ(5,"div",36),e._UZ(6,"lucide-icon",37),e.qZA(),e._uU(7," Copy link "),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_copy_link_gui_cho_hoc_sinh")),e.xp6(2),e.Q6J("cdkCopyToClipboard",t.copyLinkToClipboard())("disabled",2==t.form.controls.chooseOption.value&&(null==t.form.controls.classroomIds.errors?null:t.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow))}}function kb(n,o){1&n&&(e.TgZ(0,"div",38)(1,"p",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}const Tb=function(n){return{"h-56-important":n}};function Ab(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15)(2,"mat-radio-group",16),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeStatusOfflineShare(void 0))}),e.TgZ(3,"mat-radio-button",17),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"mat-radio-button",18),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"mat-radio-button",19),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()(),e.TgZ(12,"div",20)(13,"div",21)(14,"azt-list-classroom-checkall",22),e.NdJ("changeCheckboxEvent",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeStatusOfflineShare(a))}),e.qZA()(),e.TgZ(15,"div",23)(16,"ng-scrollbar",24)(17,"azt-list-classroom-checkbox",25),e.NdJ("changeCheckboxEvent",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeStatusOfflineShare(a))}),e.qZA()()()(),e.YNc(18,wb,2,1,"div",26),e.TgZ(19,"div",27),e.YNc(20,Cb,8,5,"div",28),e.qZA(),e.YNc(21,kb,4,3,"div",29),e.ALo(22,"fullPermission"),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("checked",0==t.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(5,20,"lang_auto_khong")),e.xp6(2),e.Q6J("checked",1==t.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(8,22,"lang_auto_tat_ca_cac_lop")),e.xp6(2),e.Q6J("checked",2==t.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(11,24,"lang_auto_tuy_chon_theo_lop")),e.xp6(2),e.Q6J("hidden",2!=t.form.controls.chooseOption.value),e.xp6(2),e.Q6J("form",t.form)("objs",t.classroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(29,Tb,t.isMobileWebView)),e.xp6(1),e.Q6J("form",t.form)("objs",t.classroomObjs)("shareClassroomIds",t.shareClassroomIds)("permissionName",t.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors&&2==t.form.controls.chooseOption.value),e.xp6(2),e.Q6J("ngIf",0!=t.form.controls.chooseOption.value),e.xp6(1),e.Q6J("ngIf",!e.xi3(22,26,null==t.examWithPermissionObj?null:t.examWithPermissionObj.permissionObj,"exam"))}}function Ob(n,o){1&n&&(e.TgZ(0,"div",41)(1,"p",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function Sb(n,o){if(1&n&&(e.YNc(0,Ob,4,3,"div",40),e.ALo(1,"fullPermission")),2&n){const t=e.oxw(2);e.Q6J("ngIf",!e.xi3(1,1,null==t.examWithPermissionObj?null:t.examWithPermissionObj.permissionObj,"exam"))}}function Eb(n,o){if(1&n&&(e.TgZ(0,"form",11)(1,"div",12),e.YNc(2,Ab,23,31,"ng-container",13),e.ALo(3,"fullPermission"),e.YNc(4,Sb,2,4,"ng-template",null,14,e.W1O),e.qZA()()),2&n){const t=e.MAs(5),i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngIf",e.xi3(3,3,null==i.examWithPermissionObj?null:i.examWithPermissionObj.permissionObj,"exam"))("ngIfElse",t)}}function Mb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",42)(1,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.btnCloseDialog(!1))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dong")," "))}let Yr=(()=>{class n extends W.Q{btnCloseDialog(t){this.dialogRef.close(t)}copyLinkToClipboard(){let t=this.commonService.getCurrentDomain();return this.linkCopy=`${t}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.subscriptions.add(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(t=>{1==t.success?(this.offlineCode=t.data?.shareHashId??"",this.classroomObjs=t.data?.classroomObjs??[],this.shareClassroomIds=t.data?.shareClassroomIds??[],this.examWithPermissionObj=t.data?.examObj,this.form.controls.chooseOption.setValue(t.data?.showOfflineResult),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}changeStatusOfflineShare(t){if(2==this.form.controls.chooseOption.value&&this.form.controls.classroomIds.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let i=this.form.controls.chooseOption.value;var a=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.homework);a.push(0);const s=2!=i?[]:this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,a,this.form.controls.classroomIds.value);this.subscriptions.add(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:i,classroomIds:s}).subscribe(l=>{1==l.success?this.offlineCode=l.data?.shareHashId??"":this.errorStatusObj(l.message??"",!0)}))}ngOnInit(){this.getCodeOfflineShare(),this.form=this.formBuilder.group({chooseOption:new p.p4(0),classroomIds:this.formBuilder.array([])},{validators:[zo.h.classroomCheckBoxValidatorWithoutWhoAllow]}),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.offlineShareService=t,this.formBuilder=i,this.dialogRef=a,this.sEAztClassroomCheckboxService=r,this.examHashId="",this.useDialog=!1,this.form=new p.nJ({}),this.permissionTypes=Zn.y,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomObjs=[],this.shareClassroomIds=[],this.examHashId=s?s.examHashId:this.examHashId,this.useDialog=s?s.useDialog:this.useDialog}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rn.kN),e.Y36(p.QS),e.Y36(j.so,8),e.Y36(j.WI,8),e.Y36(Ki.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},features:[e.qOj],decls:12,vars:6,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],["class","d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["doneLoading",""],["class","text-right mt-3",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[3,"formGroup"],[1,"block-body"],[4,"ngIf","ngIfElse"],["noFullPermission",""],[1,"input-toggle"],["color","primary","formControlName","chooseOption",2,"flex-direction","column",3,"change"],["value","0",3,"checked"],["value","1",1,"mt-1",3,"checked"],["value","2",1,"mt-1",3,"checked"],[1,"block-main-classroom",3,"hidden"],[1,"classroom_check_all"],["formArrayName","classroomIds",3,"form","objs","permissionName","changeCheckboxEvent"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","shareClassroomIds","permissionName","changeCheckboxEvent"],["class","col-12 pl-0 pt-3",4,"ngIf"],[1,"block-main","mt-2"],["class","block-copy",4,"ngIf"],["class","block-else",4,"ngIf"],[1,"col-12","pl-0","pt-3"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"block-copy"],[1,"title-copy","mr-2"],["azt-track-service","azt-offline-share-6FNwLsA2D",1,"btn","btn-primary",3,"cdkCopyToClipboard","disabled","click"],[1,"w-4","h-4","mr-2"],["name","copy"],[1,"block-else"],[1,"note"],["class","block-else text-center",4,"ngIf"],[1,"block-else","text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3),e.YNc(8,vb,4,0,"div",5),e.YNc(9,Eb,6,6,"ng-template",null,6,e.W1O),e.qZA(),e.YNc(11,Mb,4,3,"div",7),e.qZA()()()),2&t){const a=e.MAs(10);e.xp6(5),e.Oqu(e.lcZ(6,4,"lang_auto_tra_ket_qua_thi_offline")),e.xp6(3),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.useDialog)}},dependencies:[M.mk,M.O5,ea.i3,sm.VQ,sm.U0,p._Y,p.JJ,p.JL,p.sg,p.u,p.CE,x.KC,h.Nh5,Bt.M,Ho.o,fa.g,re.bT,re.Gf],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;width:500px;min-height:180px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:rgba(211,211,211,.58)}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}.classroom-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})(),Ib=(()=>{class n extends W.Q{constructor(t){super(),this.activeRoute=t,this.linkCopy="",this.offlineCode="",this.hasOfflineExam=!1,this.checkValueInput=!1,this.form=new p.nJ({}),this.classroomObjs=[],this.isCheckAll=!1,this.shareClassroomIds=[],this.classIdsNotPermission=[],this.hashId="",this.cateId=""}ngOnInit(){this.hashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"0",super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-share-offline-result"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"examHashId","useDialog"]],template:function(t,i){1&t&&e._UZ(0,"azt-offline-share",0),2&t&&e.Q6J("examHashId",i.hashId)("useDialog",!1)},dependencies:[Yr],styles:[".school-info_bg[_ngcontent-%COMP%]{background:#fff;height:100vh}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:#16236c}"]}),n})();function Lb(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Zb(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5," - "),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_auto_ma_de_loi"),": "),e.xp6(3),e.Oqu(t.rawOfflineMixQuestionHashId),e.xp6(3),e.hij(" ",e.lcZ(8,5,t.error)," ")}}function Pb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"p",10),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",11)(8,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showErrorBlock=!1)}),e.ALo(9,"mytranslate"),e.TgZ(10,"span",13),e._UZ(11,"lucide-icon",14),e.qZA()()()(),e.TgZ(12,"div",15),e.YNc(13,Zb,9,7,"p",16),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.lnq("",e.lcZ(5,5,"lang_testbank_there_is")," ",t.excelErrorObjs.length," ",e.lcZ(6,7,"lang_testbank_error_in_the_excel_file"),""),e.xp6(4),e.s9C("matTooltip",e.lcZ(9,9,"lang_auto_dong")),e.xp6(5),e.Q6J("ngForOf",t.excelErrorObjs)}}function jb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Pb,14,11,"div",5),e.TgZ(5,"ui-create-offline-exam",6),e.NdJ("handleSaveData",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleSaveQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_cms_create_exam_by_excel_title")," "),e.xp6(2),e.Q6J("ngIf",t.excelErrorObjs.length>0&&t.showErrorBlock),e.xp6(1),e.Q6J("form",t.form)("type",t.type)("dataExamOfflineByExcel",t.dataExamOfflineExcel)}}let Db=(()=>{class n extends W.Q{onFileSelected(t){this.file=t?t[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)?this.processFile():(this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}processFile(){this.initStatusObj();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.subscriptions.add(this.offlineExamParserV2Service.apiOfflineExamParserV2ParserExcelV2PostForm(t,this.file).subscribe(i=>{1==i.success?(this.dataExamOfflineExcel.excelOfflineMixQuestionObjs=i.data?.excelOfflineMixQuestionObjs??[],this.dataExamOfflineExcel.orcLogId=i.data?.orcLogId??-1,this.excelErrorObjs=i.data?.errors??[],this.successStatusObj()):(this.errorStatusObj(i.message??"",!0),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}))}handleSaveQuestionAndExam(t){let a={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,orcLogId:-6,offlineMixQuestionObjs:t};this.initStatusObj(),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(a).subscribe(s=>{1===s.success?(this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong"),window.location=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`)):this.errorStatusObj(s.message??"")}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;var t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+(null!=this.categoryId?this.categoryId:0),this.commonService.translateMetaData({title:"lang_cms_create_exam_by_excel_title",description:"lang_cms_create_exam_by_excel_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(a=>{let s=JSON.stringify(a);s!=this.prevData&&(this.prevData=s,this.form.patchValue(a))});const i=this.editorOutputDataService.getFirstFile();i?this.onFileSelected([i]):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}constructor(t,i,a,s,r,l){super(),this.editorOutputDataService=t,this.activeRoute=i,this.formBuilder=a,this.offlineExamParserV2Service=s,this.offlineExamCreatorV2Service=r,this.redirectService=l,this.backToLink="",this.form=new p.nJ({}),this.prevData="",this.categoryId=0,this.type=po.excel,this.excelErrorObjs=[],this.showErrorBlock=!0,this.dataExamOfflineExcel={name:"",schoolLevelId:1,schoolSubjectId:1,orcLogId:-1,offlineMixQuestionObjs:[],excelOfflineMixQuestionObjs:[],errors:[]},this.form=this.formBuilder.group({nameExam:new p.p4("",[p.kI.required,Ai._.noWhiteSpace]),codeExamList:a.array([]),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required])})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(De),e.Y36(T.gz),e.Y36(p.QS),e.Y36(Rn.Xe),e.Y36(Rn.Jt),e.Y36(Fr.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-by-excel"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-lg","font-medium"],["class","col-md-12 mb-4 mt-2",4,"ngIf"],[3,"form","type","dataExamOfflineByExcel","handleSaveData"],[1,"col-md-12","mb-4","mt-2"],[1,"alert","alert-outline-danger","show","mb-2"],[1,"flex","items-center"],[1,"font-medium","text-lg"],[1,"ml-auto"],["azt-track-service","create-exam-by-excel-HGchE1J84tS",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,Lb,1,0,"azt-loading-effect",1),e.YNc(2,jb,6,7,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,Zt.gM,jt.Q,pn._,h.Nh5,Kr,re.bT],encapsulation:2}),n})(),Nb=(()=>{class n extends W.Q{constructor(t,i,a){super(),this.activeRoute=t,this.formBuilder=i,this.offlineExamCreatorV2Service=a,this.backToLink="",this.form=new p.nJ({}),this.prevData="",this.categoryId=0,this.form=this.formBuilder.group({nameExam:new p.p4("",[p.kI.required,Ai._.noWhiteSpace]),codeExamList:i.array([]),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required])})}handleSaveQuestionAndExam(t){const a={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,orcLogId:-5,offlineMixQuestionObjs:t};this.initStatusObj(),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(a).subscribe(s=>{1===s.success?(this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong"),this.myNavigation(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`)):this.errorStatusObj(s.message??"")}))}ngOnInit(){this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${this.categoryId}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(t=>{let i=JSON.stringify(t);i!=this.prevData&&(this.prevData=i,this.form.patchValue(t))}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(p.QS),e.Y36(Rn.Jt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["create-by-hand"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"headerBackToLink"],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","handleSaveData"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"ui-create-offline-exam",3),e.NdJ("handleSaveData",function(s){return i.handleSaveQuestionAndExam(s)}),e.qZA()()()),2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_nhap_tay_dap_an")," "),e.xp6(2),e.Q6J("form",i.form))},dependencies:[pn._,Kr,re.bT],encapsulation:2}),n})(),Qb=(()=>{class n{constructor(){this.fileDrop=new e.vpe,this.preventBodyDrop=!0,this.active=!1}onDrop(t){t.preventDefault(),this.active=!1;const{dataTransfer:i}=t;if(i?.items){const a=[];for(let s=0;s<i.items.length;s++)"file"===i.items[s].kind&&i.items[s].getAsFile()&&a.push(i.items[s].getAsFile());i.items.clear(),Array.isArray(a)&&this.fileDrop.emit(this.removeNullFile(a))}else{const a=i?.files;i?.clearData(),a&&this.fileDrop.emit(Array.from(a))}}removeNullFile(t){for(var i=[],a=0;a<t.length;a++)t[a]&&i.push(t[a]);return i}onDragOver(t){t.stopPropagation(),t.preventDefault(),this.active=!0}onDragLeave(t){this.active=!1}onBodyDragOver(t){this.preventBodyDrop&&(t.preventDefault(),t.stopPropagation())}onBodyDrop(t){this.preventBodyDrop&&t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("drop",function(s){return i.onDrop(s)})("dragover",function(s){return i.onDragOver(s)})("dragleave",function(s){return i.onDragLeave(s)})("dragover",function(s){return i.onBodyDragOver(s)},!1,e.pYS)("drop",function(s){return i.onBodyDrop(s)},!1,e.pYS),2&t&&e.ekj("drop-zone-active",i.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),n})();function qb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.beforeOpenEditorShowAI())}),e.TgZ(2,"div",51),e._UZ(3,"img",52),e.qZA(),e.TgZ(4,"div",38)(5,"div",39),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()(),e.TgZ(8,"div",40)(9,"span"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"a",41),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,3,"lang_testbank_create_custom_exam_with_azota_ai")," "),e.xp6(4),e.hij("",e.lcZ(11,5,"lang_testbank_use_ai_technology_for_births_for_automated_on_demand_exams"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(14,7,"lang_auto_tim_hieu_them")))}function Fb(n,o){1&n&&e._UZ(0,"div",53)}let Ub=(()=>{class n extends W.Q{redirectToMixBank(){this.commonService.myNavigation(`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/user/0`)}redirectToCreateExamOfflineByHand(){this.commonService.myNavigation("/admin/testbank/create-exam-by-hand/"+(null!=this.cur_cateId?this.cur_cateId:0))}redirectToBack(){this.commonService.myNavigation("/testbank")}saveAndSwitch(t){this.editorOutputDataService.setFileProcess(t),this.commonService.myNavigation("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}startParser(t){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(i=>{this.msgLoading=i}),this.saveAndSwitch(t)}changeFileAction(t){if(this.file=void 0,null!==t)for(let i in t)"length"!=i&&"item"!=i&&(console.log("haiau",t[i].name),(0,J.D_)(t[i].type)||(0,J._4)(t[i].type)||(0,J.Or)(t[i].type)||t[i].name.toLowerCase().endsWith(".azt")?(0,J.EO)(t[i].size)<=200?(this.file=t[i],this.isChooseFile=!0):this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb"):this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"));this.file&&(this.getFileIcon(),this.startParser(this.file))}onDrop(t){try{this.changeFileAction(t)}catch(i){alert(i)}}getFileIcon(){const t=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];this.file&&((0,J.D_)(this.file.type??"")&&!t.includes(this.file.type??"")?this.fileIcon="azota_assets/images/word-icon.png":(0,J._4)(this.file.type??"")?this.fileIcon="azota_assets/images/pdf-icon.png":(0,J.Or)(this.file.type??"")?this.fileIcon="azota_assets/images/jpg-icon.png":this.file.type&&t.includes(this.file.type)&&(this.fileIcon="azota_assets/images/excel.png")),this.fileIcon="azota_assets/images/documents.png"}beforeOpenEditor(t="editor"){this.editorOutputDataService.setMode(t),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}beforeOpenEditorShowAI(t="editor"){this.editorOutputDataService.setMode(t),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0)+"?showAI=1")}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"));let t=this.commonService.getMyQueryParam("backto")??"";this.backToLink=t||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.form=this.fb.group({file:new p.p4("",p.kI.required)})}),this.commonService.translateMetaData({title:"lang_cms_test_create_new_title",description:"lang_cms_test_create_new_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a){super(),this.fb=t,this.activeRoute=i,this.editorOutputDataService=a,this.cur_cateId=0,this.backToLink="",this.isChooseFile=!1,this.form=new p.nJ({}),this.isFollowLibParser=!1,this.fileParser=new P.uD,this.isInitConf=!1,this.fileIcon="",this.msgLoading="",this.willShowAIBox=!Ce.N.production||Ce.N.isProdAzotaVn,this.selectFile=s=>{let c=s.target.files;try{this.changeFileAction(c)}catch(d){alert(d)}}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(De))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-new-document"]],features:[e.qOj],decls:115,vars:91,consts:[[3,"headerBackToLink"],[1,"intro-y","flex","items-center","mt-3"],[1,"text-lg","font-medium","mr-auto"],[1,"intro-y","chat","grid","grid-cols-12","gap-5","mt-3","create-new-document-main"],[1,"intro-y","col-span-12","lg:col-span-8"],[3,"formGroup","hidden"],["type","file","id","box-left-file-input","formControlName","file",1,"form-control","file-input",3,"change"],["fileSelect",""],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5",3,"appDropZone","click"],[1,"h-full","flex","items-center"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-16","h-16","text-primary"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-FxdEQuAx7G","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-cPk0ISITQT","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["role","alert",1,"alert","alert-secondary-soft","mt-3","p-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-circle","data-lucide","alert-circle",1,"lucide","lucide-alert-circle","w-6","h-6","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"col-span-12","lg:col-span-4"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane"],[1,"pr-1"],["class","block-azt mb-5",4,"ngIf"],[1,"block-azt","mb-5"],["azt-track-service","create-new-document-eWSFP-ZUFW",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-pending"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"text-center"],[1,"font-medium","text-lg"],[1,"text-slate-500","text-xs","mt-2"],["azt-track-service","create-new-document-ZQ2mrymJc","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tu-soan-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-KJvjOB4efQ",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-success"],["d","M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"],["azt-track-service","create-new-document-MC5alRfKcY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-PDK9L9LPGj",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-warning"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["class","loading",4,"ngIf"],["azt-track-service","create-new-document-xS3E2vP1e",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-9","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["src","https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/images/azotaAI.png",1,"w-full","h-full","inline-block"],[1,"loading"]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"form",5)(8,"input",6,7),e.NdJ("change",function(r){return i.selectFile(r)}),e.qZA()(),e.TgZ(10,"div",8),e.NdJ("appDropZone",function(r){return i.onDrop(r)})("click",function(){e.CHM(a);const r=e.MAs(9);return e.KtG(r.click())}),e.TgZ(11,"div",9)(12,"div",10)(13,"div",11),e.O4$(),e.TgZ(14,"svg",12),e._UZ(15,"path",13)(16,"path",14),e.qZA()(),e.kcU(),e.TgZ(17,"div",15)(18,"div",16),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"div",17),e._uU(22),e.ALo(23,"mytranslate"),e._UZ(24,"br"),e._uU(25),e.ALo(26,"mytranslate"),e.TgZ(27,"b"),e._uU(28),e.ALo(29,"mytranslate"),e.qZA(),e._uU(30,", "),e.TgZ(31,"b"),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e._uU(34),e.ALo(35,"mytranslate"),e.TgZ(36,"b"),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e._uU(39),e.ALo(40,"mytranslate"),e.TgZ(41,"a",18),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(42),e.ALo(43,"mytranslate"),e.qZA(),e.TgZ(44,"div",19)(45,"azt-download-link-item",20),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(46,"convertCdnLinkOfGitHubWithLocale"),e.ALo(47,"mytranslate"),e.qZA(),e._uU(48,"\xa0|\xa0 "),e.TgZ(49,"azt-download-link-item",21),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(50,"convertRawLinkOfGitHubWithLocale"),e.ALo(51,"mytranslate"),e.qZA(),e._uU(52,"\xa0|\xa0 "),e.TgZ(53,"azt-download-link-item",22),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(54,"convertRawLinkOfGitHubWithLocale"),e.ALo(55,"mytranslate"),e.qZA()()()(),e.TgZ(56,"div",23),e.O4$(),e.TgZ(57,"svg",24),e._UZ(58,"circle",25)(59,"line",26)(60,"line",27),e.qZA(),e._uU(61),e.ALo(62,"mytranslate"),e.kcU(),e.TgZ(63,"b"),e._uU(64,".docx"),e.qZA(),e._uU(65,". "),e.qZA()()()()(),e.TgZ(66,"div",28)(67,"div",29)(68,"div",30),e.YNc(69,qb,15,9,"div",31),e.ALo(70,"async"),e.ALo(71,"allowFeatureForUser"),e.TgZ(72,"div",32)(73,"div",33),e.NdJ("click",function(){return i.beforeOpenEditor()}),e.TgZ(74,"div",34),e.O4$(),e.TgZ(75,"svg",35),e._UZ(76,"path",36)(77,"path",37),e.qZA()(),e.kcU(),e.TgZ(78,"div",38)(79,"div",39),e._uU(80),e.ALo(81,"mytranslate"),e.qZA()()(),e.TgZ(82,"div",40)(83,"span"),e._uU(84),e.ALo(85,"mytranslate"),e.qZA(),e.TgZ(86,"a",41),e._uU(87),e.ALo(88,"mytranslate"),e.qZA()()(),e.TgZ(89,"div",32)(90,"div",42),e.NdJ("click",function(){return i.redirectToMixBank()}),e.TgZ(91,"div",34),e.O4$(),e.TgZ(92,"svg",43),e._UZ(93,"path",44),e.qZA()(),e.kcU(),e.TgZ(94,"div",38)(95,"div",39),e._uU(96),e.ALo(97,"mytranslate"),e.qZA()()(),e.TgZ(98,"div",40)(99,"span"),e._uU(100),e.ALo(101,"mytranslate"),e.qZA(),e.TgZ(102,"a",45),e._uU(103),e.ALo(104,"mytranslate"),e.qZA()()(),e.TgZ(105,"div",32)(106,"div",46),e.NdJ("click",function(){return i.redirectToCreateExamOfflineByHand()}),e.TgZ(107,"div",34),e.O4$(),e.TgZ(108,"svg",47),e._UZ(109,"path",48),e.qZA()(),e.kcU(),e.TgZ(110,"div",38)(111,"div",39),e._uU(112),e.ALo(113,"mytranslate"),e.qZA()()()()()()()(),e.YNc(114,Fb,1,0,"div",49),e.qZA()}2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(3),e.hij(" ",e.lcZ(4,38,"lang_auto_tao_de_moi")," "),e.xp6(4),e.Q6J("formGroup",i.form)("hidden",!0),e.xp6(12),e.Oqu(e.lcZ(20,40,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),e.xp6(3),e.hij(" ",e.lcZ(23,42,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),e.xp6(3),e.hij("",e.lcZ(26,44,"lang_auto_can_upload")," "),e.xp6(3),e.Oqu(e.lcZ(29,46,"lang_auto_bai_tap")),e.xp6(4),e.Oqu(e.lcZ(33,48,"lang_auto_de_thi")),e.xp6(2),e.hij(" ",e.lcZ(35,50,"lang_auto_hoac")," "),e.xp6(3),e.Oqu(e.lcZ(38,52,"lang_auto_bang_dap_an")),e.xp6(2),e.hij(" ",e.lcZ(40,54,"lang_auto_de_cham_offline"),". "),e.xp6(3),e.hij(" ",e.lcZ(43,56,"lang_auto_tim_hieu_them")," "),e.xp6(3),e.Q6J("dataUrl",e.lcZ(46,58,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_blank")("fileName",e.lcZ(47,60,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_pdf_model")("classStyle","text-primary"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(50,62,"azota_assets/medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",e.lcZ(51,64,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(54,66,"azota_assets/medias_[LANG]/de_mau_azota_excel_v2_3.xlsx?raw=true"))("target","_self")("fileName",e.lcZ(55,68,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_excel_model")("classStyle","text-primary"),e.xp6(8),e.hij(" ",e.lcZ(62,70,"lang_auto_azota_best_support_file_type")+" "," "),e.xp6(8),e.Q6J("ngIf",i.willShowAIBox||e.lcZ(70,72,e.xi3(71,74,"","allowCreateExamByAI"))),e.xp6(11),e.hij(" ",e.lcZ(81,77,"lang_auto_tu_soan_de_tren_azota")," "),e.xp6(4),e.hij("",e.lcZ(85,79,"lang_auto_su_dung_trinh_soan_thao_de_cua_azota_chinh_sua_tu_cac_mau_co_san_hoac_copy_and_paste_tu_cac_nguon_khac_nhau"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(88,81,"lang_auto_tim_hieu_them")),e.xp6(9),e.hij(" ",e.lcZ(97,83,"lang_auto_tao_ma_tran_de_thi")," "),e.xp6(4),e.hij("",e.lcZ(101,85,"lang_auto_azota_se_sinh_ngau_nhien_de_moi_tu_cac_chuyen_de_so_luong_cau_trong_moi_chuyen_de_cac_muc_do_kho_de_ma_nguoi_dung_lua_chon"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(104,87,"lang_auto_tim_hieu_them")),e.xp6(9),e.hij(" ",e.lcZ(113,89,"lang_auto_nhap_tay_dap_an")," "),e.xp6(2),e.Q6J("ngIf",i.isFollowLibParser))},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Bt.M,ze.o,pn._,Qb,M.Ov,re.bT,re.y,re.Rh,re.GL],encapsulation:2}),n})();var rm=S(47394);function Rb(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Bb(n,o){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",7)(6,"h3",8),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",9),e._UZ(10,"input",10),e.TgZ(11,"a",11),e.O4$(),e.TgZ(12,"svg",12),e._UZ(13,"path",13)(14,"polyline",14)(15,"line",15),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,5,"lang_testbank_create_wibsite_result_header_title")," \u{1f389} "),e.xp6(4),e.hij(" ",e.lcZ(8,7,"lang_testbank_create_wibsite_result_address")," "),e.xp6(3),e.s9C("value",t.linkExerciseExist),e.xp6(1),e.Q6J("href",t.linkExerciseExist,e.LSH),e.xp6(5),e.hij(" ",e.lcZ(17,9,"lang_testbank_create_wibsite_result_Access")," ")}}let zb=(()=>{class n extends W.Q{getExamDataById(){this.status_obj={loading:!0,error:!1},this.subscriptions.add(this.examService.apiExamGetWebsiteInfoGet().subscribe(t=>{1==t.success?(this.obj=t.data?.obj,this.linkExerciseExist=`${t.data?.obj?.value}`,this.status_obj={loading:!1,error:!1}):(this.showErrorSnack(t.message??""),this.status_obj={loading:!1,error:!0})}))}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getExamDataById(),this.backToLink="/admin/testbank/create-website"}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_result_title",description:"lang_cms_test_create_website_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i){super(),this.activeRoute=t,this.examService=i,this.subscriptions=new rm.w0,this.status_obj={loading:!1,error:!1},this.linkExerciseExist="",this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Ve.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-website-result"]],features:[e.qOj],decls:6,vars:6,consts:[[3,"headerTitle","headerBackToLink"],[1,"py-5","mt-8"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],[1,"azt-copy","relative","mt-3","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","create-website-result-F_Qjh-7fxPs","target","_blank",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.ALo(1,"mytranslate"),e.TgZ(2,"div",1),e.YNc(3,Rb,1,0,"azt-loading-effect",2),e.YNc(4,Bb,18,11,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(5);e.Q6J("headerTitle",e.lcZ(1,4,"lang_testbank_create_wibsite_result_header_title"))("headerBackToLink",i.backToLink),e.xp6(3),e.Q6J("ngIf",i.status_obj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,pn._,re.bT],styles:[".content-box[_ngcontent-%COMP%]{border-width:0px;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dcdcdc;border-radius:4px;box-shadow:none}.click-to-href[_ngcontent-%COMP%], .click-to-href[_ngcontent-%COMP%]:hover{color:#5f5f5f!important}@media only screen and (max-width: 992px){.box[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 768px){.box[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 576px){.box[_ngcontent-%COMP%]{width:90%}}@media only screen and (max-width: 380px){.box[_ngcontent-%COMP%]{width:95%}}"]}),n})();var Jb=S(98108);function Hb(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Kb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleRunScriptIframe())}),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"path",53)(3,"path",54),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_buttom_edit")," "))}function $b(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleCancelEdit())}),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"path",56)(3,"polyline",57)(4,"line",58)(5,"line",59),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_buttom_cancel")," "))}function Yb(n,o){1&n&&(e.TgZ(0,"div",60),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"circle",61)(3,"line",62)(4,"line",63),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()),2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function Gb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",64),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleRunScriptIframe())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_edit")))}function Wb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleCancelEdit())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_cancel")))}function Vb(n,o){1&n&&(e.TgZ(0,"div",66),e.O4$(),e.TgZ(1,"svg",32),e._UZ(2,"circle",61)(3,"line",62)(4,"line",63),e.qZA(),e.kcU(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(6),e.hij("",e.lcZ(7,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function Xb(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",9)(9,"h3",10)(10,"button",11),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"mat-menu",null,12)(15,"div",13)(16,"div",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleClickTemplate("templateExample"))}),e.TgZ(17,"div",15),e._UZ(18,"img",16),e.ALo(19,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(20,"h4"),e._uU(21,"Landing Teacher"),e.qZA()()()()()()(),e.TgZ(22,"div",17)(23,"div",18)(24,"div",19)(25,"button",20),e.O4$(),e.TgZ(26,"svg",21),e._UZ(27,"line",22)(28,"line",23)(29,"line",24),e.qZA()(),e.kcU(),e.TgZ(30,"mat-menu",null,25)(32,"div",26)(33,"ul",27)(34,"li"),e.YNc(35,Kb,6,3,"button",28),e.qZA(),e.TgZ(36,"li"),e.YNc(37,$b,8,3,"button",29),e.qZA(),e.TgZ(38,"li"),e._UZ(39,"hr",30),e.qZA(),e.TgZ(40,"li")(41,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSaveTemplate())}),e.O4$(),e.TgZ(42,"svg",32),e._UZ(43,"path",33)(44,"polyline",34)(45,"polyline",35),e.qZA(),e._uU(46),e.ALo(47,"mytranslate"),e.qZA()()()()()()(),e.kcU(),e.TgZ(48,"div",36)(49,"div",37),e.YNc(50,Yb,7,3,"div",38),e.YNc(51,Gb,3,3,"a",39),e.TgZ(52,"a",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSaveTemplate())}),e._uU(53),e.ALo(54,"mytranslate"),e.qZA(),e.YNc(55,Wb,3,3,"a",41),e.qZA()()(),e.TgZ(56,"div",42),e.YNc(57,Vb,8,3,"div",43),e.qZA()(),e.TgZ(58,"div",44)(59,"div",45)(60,"div",46)(61,"div",47)(62,"div",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleClickTemplate("templateExample"))}),e.TgZ(63,"div",15),e._UZ(64,"img",16),e.ALo(65,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(66,"h4"),e._uU(67,"Landing Teacher"),e.qZA()()()()(),e.TgZ(68,"div",49)(69,"div",50),e._UZ(70,"iframe",51),e.ALo(71,"safe"),e.qZA()()()()}if(2&n){const t=e.MAs(14),i=e.MAs(31),a=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,21,"lang_testbank_create_wibsite_Sampling")),e.xp6(4),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(12,23,"lang_testbank_create_wibsite_Sampling")," "),e.xp6(5),e.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),e.xp6(2),e.Q6J("src",e.lcZ(19,25,"azota_assets/templates/templateExample/template_2_feature.png"),e.LSH),e.xp6(7),e.Q6J("matMenuTriggerFor",i),e.xp6(10),e.Q6J("ngIf",!a.isEditable),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(9),e.hij(" ",e.lcZ(47,27,"lang_buttom_save")," "),e.xp6(4),e.Q6J("ngIf",a.isEditable),e.xp6(1),e.Q6J("ngIf",!a.isEditable),e.xp6(2),e.Oqu(e.lcZ(54,29,"lang_buttom_save")),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(5),e.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),e.xp6(2),e.Q6J("src",e.lcZ(65,31,"azota_assets/templates/templateExample/template_2_feature.png"),e.LSH),e.xp6(6),e.Q6J("src",e.lcZ(71,33,a.iframeSrc),e.uOi)}}let e2=(()=>{class n extends W.Q{handleClickTemplate(t){this.iframeSrc="/assets/templates/"+t+"/index.html",this.templateName=t}handleCancelEdit(){this.isEditable=!1,window.location.reload()}handleRunScriptIframe(){this.isEditable=!0;const t=document.getElementById("template-iframe"),i=t?t.contentWindow:null;i&&i.eval(`\n        // *** INSERT THE SCRIPT TAG TO HEAD ***\n        // ---------------------------------------\n        var scriptExist=document.getElementById('ladi');\n        if(!scriptExist){console.log('Script Exist');\n        var script=document.createElement('script');\n        var att=document.createAttribute('src');\n        var attId=document.createAttribute('id');\n        att.value='${this.cdnService.convertCdnLinkOfGitHub("azota_assets/templates/common/ladipage.v4.js")}';\n        attId.value='ladi'; script.setAttributeNode(att);\n        script.setAttributeNode(attId);\n\n        document.head.appendChild(script);}\n        `)}getWebsiteUrl(){this.initStatusObj(),this.subscriptions.add(this.userSettingService.apiUserSettingGetMyDomainGet().subscribe(t=>{1==t.success?(t.data?.obj&&t.data?.obj.value?(this.websiteUrl=t.data.obj.value,this.websiteUrl=this.websiteUrl):this.websiteUrl=this.commonService.getLocalRouter(this.commonService.getHostUrl()+"/en/test/category/"+this.userService.getUserObj().id+"/0/1"),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}handleSaveTemplate(){const t=document.getElementById("template-iframe"),i=t?t.contentWindow:null;if(i){i.eval("\n        // *** REMOVE LADI JS SCRIPT TAG ***\n        // ---------------------------------\n        const myScript = document.getElementById('ladi');\n        if(myScript){myScript.remove();}\n\n        // *** REMOVE INPUT FILE TAG  ***\n        // ------------------------------\n        var inputFiles = document.querySelectorAll('.tpl-input-file');\n        inputFiles.forEach(input=>{jQuery(input).unwrap(); input.remove();});\n\n        // *** REMOVE demo test iframe  ***\n        var demoTestIMG = document.getElementById('demo_test_iframe');\n        if(demoTestIMG){demoTestIMG.remove();}\n        \n        // *** CHANGE ALL CONTENTEDITABLE TO FALSE ***\n        // -------------------------------------------\n        var editables=document.querySelectorAll('[contentEditable=true]');\n        editables.forEach(e=>{e.setAttribute('contentEditable','false');});\n        "),this.isLoading=!0;var a=i.document.body.outerHTML;this.apiUploadService.commonUploadLadiPageFile(a,this.templateName,a.length).subscribe(s=>{s.type!=C.dt.UploadProgress&&(1==s.success&&s?.data?.url?this.userSettingService.apiUserSettingSaveMyDomainPost({path:s?.data?.url}).subscribe(r=>{1==r.success?this.commonService.myNavigation("/admin/testbank/create-website-result"):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong"))}):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong")))})}}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink="/admin/dashboard",this.getWebsiteUrl()}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_title",description:"lang_cms_test_create_website_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.userSettingService=t,this.cdnService=i,this.activeRoute=a,this.userService=s,this.apiUploadService=r,this.subscriptions=new rm.w0,this.isLoading=!1,this.isEditable=!1,this.templateName="templateExample",this.iframeSrc="/assets/templates/"+this.templateName+"/index.html",this.websiteUrl="",this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Jb.fi),e.Y36(xt.U),e.Y36(T.gz),e.Y36(Qe.K),e.Y36(Ln.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-website"]],features:[e.qOj],decls:5,vars:6,consts:[[3,"headerTitle","headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-builder","container-fluid","mt-3","pb-mb-80"],[1,"grid","grid-cols-12","gap-3","button-row","justify-between","mb-4"],[1,"col-span-4",2,"align-self","center"],[1,"button-bar","mb-0"],[1,"azt-hidden","lg:block"],[1,"text-md","font-medium",2,"padding-top","10px","padding-left","10px"],[1,"block","xl:hidden"],[1,"text-md","font-medium"],[1,"btn","btn-secondary",3,"matMenuTriggerFor"],["choose","matMenu"],[1,"box","dialog-landing"],["azt-track-service","create-website-m7o0z0tNGZ",3,"click"],[1,"tpl-avatar"],["alt","",3,"src"],[1,"col-span-8","pt-0","pb-0","text-right","w-full"],[1,"flex","justify-end","sm:hidden"],[1,"button-bar","flex","justify-end"],[1,"btn","btn-outline-secondary",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["reorder","matMenu"],[1,"dropdown-menu","w-56","show","relative","p-3"],[1,"dropdown-content"],["azt-track-service","create-website-KcLlwJbhLJ","class","dropdown-item w-full",3,"click",4,"ngIf"],["azt-track-service","create-website-hPK4dUWUNk","class","dropdown-item w-full",3,"click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","create-website-kAw_1A0pwF",1,"dropdown-item","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"azt-hidden","sm:block"],[1,"button-bar","justify-end"],["class","alert alert-info mr-3 mb-0 items-center flex p-2",4,"ngIf"],["azt-track-service","create-website-5leCyaUy9M","class","btn btn-secondary mr-2 w-20",3,"click",4,"ngIf"],["azt-track-service","create-website-JeQ8h6dSA5",1,"btn","btn-primary","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU","class","btn btn-secondary ml-2 w-20",3,"click",4,"ngIf"],[1,"col-span-12","block","sm:hidden"],["class","alert alert-info mr-1 mb-0 items-center flex text-left p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","content-row"],[1,"col-span-2","hidden","lg:block"],[1,"list-template"],[1,"wrap-layer"],["azt-track-service","create-website-bnKcSD98XWU",3,"click"],[1,"col","col-span-12","sm:col-span-12","md:col-span-10"],[1,"wrap-layer","w-full"],["id","template-iframe","frameborder","0",2,"width","100%","height","100%",3,"src"],["azt-track-service","create-website-KcLlwJbhLJ",1,"dropdown-item","w-full",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","create-website-hPK4dUWUNk",1,"dropdown-item","w-full",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","9.5","y1","12.5","x2","14.5","y2","17.5"],["x1","14.5","y1","12.5","x2","9.5","y2","17.5"],[1,"alert","alert-info","mr-3","mb-0","items-center","flex","p-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","create-website-5leCyaUy9M",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU",1,"btn","btn-secondary","ml-2","w-20",3,"click"],[1,"alert","alert-info","mr-1","mb-0","items-center","flex","text-left","p-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.ALo(1,"mytranslate"),e.YNc(2,Hb,1,0,"azt-loading-effect",1),e.YNc(3,Xb,72,35,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(4);e.Q6J("headerTitle",e.lcZ(1,4,"lang_testbank_create_wibsite_header_title"))("headerBackToLink","/admin/dashboard"),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,en.VK,en.p6,jt.Q,pn._,re.bT,re.yl,re.Jc],styles:[".container-builder[_ngcontent-%COMP%]{height:calc(100vh - 72px);overflow:hidden;display:flex;flex-direction:column}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;height:38px;display:flex;justify-content:center;align-items:center}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{background:white;padding:15px;flex:auto;border:1px solid #ececec;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   #template-iframe[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:15px;border:1px solid #ccc;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]{padding-right:0}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{overflow-y:auto}.container-builder[_ngcontent-%COMP%]   .list-template[_ngcontent-%COMP%]{height:100%}.button-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.button-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:auto;margin-bottom:0;text-align:center}.template-item[_ngcontent-%COMP%]:hover{cursor:pointer}.template-item[_ngcontent-%COMP%]:hover   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]{width:100%;height:0;padding-top:66.6666666667%;position:relative;overflow:hidden}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:auto;width:100%;top:0;left:0;transition:all .5s}.template-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-top:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999999;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#414141}.dialog-landing[_ngcontent-%COMP%]{width:280px;padding:20px}"]}),n})();var lm=S(99312),Ds=function(n){return n[n.ADD_FOLDER=0]="ADD_FOLDER",n[n.EDIT_FOLDER=1]="EDIT_FOLDER",n}(Ds||{}),t2=S(40962),n2=S(11922),Gr=S(9853);let Wr=(()=>{class n{constructor(t){this.el=t,this.enterKey=new e.vpe}onKeyDown(t){"Enter"===t.key&&!t.shiftKey&&(t.preventDefault(),this.enterKey.emit())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","enterKey",""]],hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(s){return i.onKeyDown(s)})},outputs:{enterKey:"enterKey"}}),n})();function i2(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function o2(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function a2(n,o){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,i2,3,3,"span",13),e.YNc(2,o2,3,3,"span",13),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.maxLength),e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.noWhiteSpace)}}function s2(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",14)(1,"g",15)(2,"g",16)(3,"circle",17),e._UZ(4,"animate",18),e.qZA(),e.TgZ(5,"circle",19),e._UZ(6,"animate",20),e.qZA(),e.TgZ(7,"circle",21),e._UZ(8,"animate",22),e.qZA(),e.TgZ(9,"circle",23),e._UZ(10,"animate",24),e.qZA(),e.TgZ(11,"circle",25),e._UZ(12,"animate",26),e.qZA(),e.TgZ(13,"circle",27),e._UZ(14,"animate",28),e.qZA(),e.TgZ(15,"circle",29),e._UZ(16,"animate",30),e.qZA(),e.TgZ(17,"circle",31),e._UZ(18,"animate",32),e.qZA()()()())}let r2=(()=>{class n extends W.Q{confirmAction(){var t=this.commonService.getFormObj(this.form);this.initStatusObj(),this.form.valid&&1==this.data.type&&this.subscriptions.add(this.examCategoryService.apiExamCategorySaveObjPost({name:t.folderName,parentId:this.data.categoryId??0}).subscribe(a=>{1==a.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_create_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(a.message??"",!0))}))}btnCloseDialog(t){this.dialogRef.close(t||!1)}ngOnInit(){this.form=this.fb.group({folderName:new p.p4("",[p.kI.required,p.kI.maxLength(255),Ai._.noWhiteSpace])}),super.ngOnInit()}constructor(t,i,a,s){super(),this.fb=t,this.examCategoryService=i,this.dialogRef=a,this.data=s,this.form=new p.nJ({})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(Ve.F1),e.Y36(j.so,8),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-folder"]],features:[e.qOj],decls:19,vars:16,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-2"],["type","text","formControlName","folderName",1,"form-control",3,"placeholder","enterKey"],["class","text-danger text-xs fade mt-2",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-folder-dialog-o4xZcHZdWw",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-folder-dialog-mbrsr9XCgZ",1,"btn","w-24","btn-primary",3,"disabled","click"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg","class","w-4 h-4 ml-2",4,"ngIf"],[1,"text-danger","text-xs","fade","mt-2"],[4,"ngIf"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","ml-2"],["fill","none","fill-rule","evenodd"],["transform","translate(2 1)","stroke","white","stroke-width","1.5"],["cx","42.601","cy","11.462","r","5","fill-opacity","1","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","1;0;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","49.063","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;1;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","42.601","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;1;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","49.125","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;1;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;1;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","4.938","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;1;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","11.462","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;1;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","5","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;0;1","calcMode","linear","repeatCount","indefinite"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",5)(8,"input",6),e.NdJ("enterKey",function(){return i.confirmAction()}),e.ALo(9,"mytranslate"),e.qZA(),e.YNc(10,a2,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",8)(12,"button",9),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.confirmAction()}),e.YNc(16,s2,19,0,"svg",11),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.hij(" ",e.lcZ(6,8,"lang_cms_utils_create_folder")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(9,10,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(14,12,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||i.form.invalid),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(18,14,"lang_auto_luu")," "))},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Bt.M,Wr,re.bT],encapsulation:2}),n})();function l2(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function c2(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function u2(n,o){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,l2,3,3,"div",11),e.YNc(2,c2,3,3,"div",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.maxlength),e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.noWhiteSpace)}}function d2(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",13)(2,"g",14)(3,"g",15),e._UZ(4,"circle",16),e.TgZ(5,"path",17),e._UZ(6,"animateTransform",18),e.qZA()()()()())}let m2=(()=>{class n extends W.Q{confirmAction(){var t=this.commonService.getFormObj(this.form);this.initStatusObj(),this.form.valid&&1==this.data.type&&this.subscriptions.add(this.examCategoryService.apiExamCategoryUpdateObjPost({id:this.data.obj?.id,name:t.folderName,parentId:0}).subscribe(a=>{1==a.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_update_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(a.message??"",!0))}))}btnCloseDialog(t){this.dialogRef.close(t)}ngOnInit(){this.data.obj&&(this.form=this.fb.group({folderName:new p.p4(this.data.obj.name,[p.kI.required,Ai._.noWhiteSpace])})),super.ngOnInit()}constructor(t,i,a,s){super(),this.fb=t,this.examCategoryService=i,this.dialogRef=a,this.data=s,this.form=new p.nJ({}),this.typeString="",this.type=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(Ve.F1),e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-folder"]],features:[e.qOj],decls:20,vars:16,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal","text-center",3,"formGroup"],["type","text","formControlName","folderName",1,"form-control","mt-2",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],[1,"text-right","mt-3"],["azt-track-service","update-folder-dialog--iPi41TKU",1,"btn","w-20","btn-secondary","mr-2",3,"click"],["azt-track-service","update-folder-dialog-84k7o8Ic_c",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"alert","alert-danger"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"form",5),e._UZ(9,"input",6),e.ALo(10,"mytranslate"),e.YNc(11,u2,3,2,"div",7),e.qZA()(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return i.confirmAction()}),e.YNc(17,d2,7,0,"span",11),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,8,"lang_cms_utils_update_folder")),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(1),e.s9C("placeholder",e.lcZ(10,10,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(15,12,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||i.form.invalid),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(19,14,"lang_cms_common_confirm_btn")," "))},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],encapsulation:2}),n})(),_2=(()=>{class n{doExamCategoryAction(t,i){switch(i){case Ds.ADD_FOLDER:return this.showAddFolderDialog(t);case Ds.EDIT_FOLDER:return this.showEditFolderDialog(t)}}showAddFolderDialog(t){return new bi.y(i=>{this.dialog.open(r2,{width:"600px",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{categoryId:t.categoryId,type:1,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())})})}showEditFolderDialog(t){return new bi.y(i=>{t.examCategoryObj?this.dialog.open(m2,{data:{obj:t.examCategoryObj,categoryId:0,type:1,isShow:!0},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(r=>{r?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())}):(i.next({reloadData:!1}),i.complete())})}constructor(t){this.dialog=t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(j.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Vr=S(89880),Xr=S(74736);function p2(n,o){1&n&&(e.TgZ(0,"div"),e.Hsn(1),e.qZA())}const h2=["*"];let g2=(()=>{class n extends W.Q{checkPermissionCallApi(){this.subscriptions.add(this.testMarketQuestionService.apiTestMarketQuestionsPermissionGet(this.applyType).subscribe(t=>{1==t.success?(this.hasPermission=t.data?.obj??!1,this.successStatusObj()):this.errorStatusObj(t.message??"")}))}ngOnInit(){this.checkPermissionCallApi()}constructor(t){super(),this.testMarketQuestionService=t,this.applyType="",this.hasPermission=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Xr.Q_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-permission-checking"]],inputs:{applyType:"applyType"},features:[e.qOj],ngContentSelectors:h2,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,p2,2,0,"div",0)),2&t&&e.Q6J("ngIf",i.hasPermission)},dependencies:[M.O5],encapsulation:2}),n})();var ho=S(7544);function f2(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",12),e._UZ(1,"path",13)(2,"polyline",14)(3,"line",15)(4,"line",16)(5,"line",17),e.qZA())}function x2(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",12),e._UZ(1,"path",13)(2,"polyline",14),e.qZA())}function b2(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,f2,6,0,"svg",11),e.YNc(2,x2,3,0,"svg",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1==(null==t.dataObj.homework?null:t.dataObj.homework.isPublished)),e.xp6(1),e.Q6J("ngIf",1!=(null==t.dataObj.homework?null:t.dataObj.homework.isPublished))}}function v2(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",20),e.ALo(1,"mytranslate"),e._UZ(2,"path",13)(3,"polyline",14)(4,"path",21),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function y2(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",22),e.ALo(1,"mytranslate"),e._UZ(2,"path",13)(3,"polyline",14),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function w2(n,o){if(1&n&&(e.YNc(0,v2,5,3,"svg",18),e.YNc(1,y2,4,3,"svg",19)),2&n){const t=e.oxw();e.Q6J("ngIf",1==(null==t.dataObj.exam?null:t.dataObj.exam.isPublished)),e.xp6(1),e.Q6J("ngIf",1!=(null==t.dataObj.exam?null:t.dataObj.exam.isPublished))}}function C2(n,o){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_thoi_gian_nop_bai"),": ",t.dataObj.deadline?e.lcZ(3,4,t.dataObj.deadline):e.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function k2(n,o){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_thoi_gian_lam_bai"),": ",null!=t.dataObj.exam&&t.dataObj.exam.minutes?(null==t.dataObj.exam?null:t.dataObj.exam.minutes)+" "+e.lcZ(3,4,"lang_auto_phut"):e.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function T2(n,o){if(1&n&&(e.TgZ(0,"span",23),e.ALo(1,"mytranslate"),e._uU(2),e.TgZ(3,"span",24),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.s9C("matTooltip",e.lcZ(1,3,"lang_auto_luot_lam")),e.xp6(2),e.hij(" ",t.dataObj.submitted+" "," "),e.xp6(2),e.Oqu(e.lcZ(5,5,"lang_auto_luot_lam"))}}function A2(n,o){if(1&n&&(e.TgZ(0,"span",23),e.ALo(1,"mytranslate"),e._uU(2),e.TgZ(3,"span",24),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.s9C("matTooltip",e.lcZ(1,3,"lang_auto_da_nop")),e.xp6(2),e.hij(" ",t.dataObj.submitted+"/"+t.dataObj.total+" "," "),e.xp6(2),e.Oqu(e.lcZ(5,5,"lang_auto_da_nop"))}}const O2=function(n){return{"bg-slate-100 dark:bg-darkmode-400":n}};let ru=(()=>{class n extends W.Q{ngOnInit(){super.ngOnInit()}constructor(t){super(),this.commonService=t,this.dataObj={},this.showByClass=!1,this.viewType=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-file-item"]],inputs:{dataObj:"dataObj",showByClass:"showByClass",viewType:"viewType"},features:[e.qOj],decls:19,vars:19,consts:[[1,"box","p-2","flex","items-center","zoom-in",3,"ngClass"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],[4,"ngIf","ngIfElse"],["ExamIcon",""],[1,"ml-4","mr-auto","w-2/3"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium"],[3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-primary","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-primary"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["class","w-10 h-10 text-pending lucide","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","text-pending","lucide",3,"matTooltip"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-pending",3,"matTooltip"],[3,"matTooltip"],[1,"azt-hidden"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,b2,3,2,"div",2),e.YNc(3,w2,2,2,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4)(6,"div",5,6),e._uU(8),e.qZA(),e.TgZ(9,"div",7)(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.YNc(14,C2,5,8,"div",8),e.YNc(15,k2,5,8,"div",8),e.qZA(),e.TgZ(16,"div",9),e.YNc(17,T2,6,7,"span",10),e.YNc(18,A2,6,7,"span",10),e.qZA()()),2&t){const a=e.MAs(4),s=e.MAs(7);e.Q6J("ngClass",e.VKq(17,O2,"classroom"==i.viewType)),e.xp6(2),e.Q6J("ngIf","homework"==i.dataObj.type)("ngIfElse",a),e.xp6(4),e.s9C("matTooltip",i.dataObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.xp6(2),e.hij(" ",i.dataObj.name," "),e.xp6(3),e.AsE("",e.lcZ(12,13,"lang_auto_ngay_tao"),": ",e.lcZ(13,15,i.dataObj.createdAt),""),e.xp6(3),e.Q6J("ngIf","homework"==i.dataObj.type),e.xp6(1),e.Q6J("ngIf","exam"==i.dataObj.type),e.xp6(2),e.Q6J("ngIf","exam"==i.dataObj.type),e.xp6(1),e.Q6J("ngIf","homework"==i.dataObj.type)}},dependencies:[M.mk,M.O5,Zt.gM,ho.Q,re.bT,re.tO],encapsulation:2}),n})();const S2=function(n){return[n]},E2=function(n){return{backto:n}};function M2(n,o){if(1&n&&(e.TgZ(0,"div",5)(1,"a",6),e.ALo(2,"localize"),e._UZ(3,"azt-file-item",7),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("routerLink",e.lcZ(2,3,e.VKq(5,S2,"/admin/testbank/exam-results-list/"+(null!==(a=null==t.exam?null:t.exam.categoryId)&&void 0!==a?a:0)+"/"+(null==t.exam?null:t.exam.id)+"/0")))("queryParams",e.VKq(7,E2,"/admin/testbank/document-management/0/"+i.categoryId+"/1")),e.xp6(2),e.Q6J("dataObj",t)}}function I2(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,M2,4,9,"div",4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_duoc_de_xuat")," "),e.xp6(3),e.Q6J("ngForOf",t.recommendExamObjs)}}let L2=(()=>{class n extends W.Q{ngOnInit(){}constructor(t){super(),this.commonService=t,this.recommendExamObjs=[],this.categoryId=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-recommend-list"]],inputs:{recommendExamObjs:"recommendExamObjs",categoryId:"categoryId"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"flex","items-center","h-10","mt-5"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"grid","grid-cols-12","gap-6","mt-5"],["class","col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3 intro-y",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","xl:col-span-3","intro-y"],["azt-track-service","document-management-UHo7sIsZSVk",3,"routerLink","queryParams"],[3,"dataObj"]],template:function(t,i){1&t&&e.YNc(0,I2,7,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.recommendExamObjs.length>0)},dependencies:[T.rH,M.sg,M.O5,ru,xa.lO,re.bT],encapsulation:2}),n})();var vi=function(n){return n.COPY="copy",n.CUT="cut",n.DELETE="delete",n}(vi||{}),Qn=function(n){return n[n.EXAM_CATEGORY=0]="EXAM_CATEGORY",n[n.EXAM=1]="EXAM",n}(Qn||{}),es=function(n){return n[n.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",n[n.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",n[n.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",n[n.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",n}(es||{}),ta=function(n){return n[n.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",n[n.CONFIG_EXAM=1]="CONFIG_EXAM",n[n.EDIT_EXAM=2]="EDIT_EXAM",n[n.POWER_POINT=3]="POWER_POINT",n[n.STATISTIC=4]="STATISTIC",n[n.TESTED_LIST=5]="TESTED_LIST",n}(ta||{}),ts=function(n){return n[n.BY_NAME=0]="BY_NAME",n[n.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",n[n.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",n[n.BY_ATTENDED=3]="BY_ATTENDED",n}(ts||{});let cm=(()=>{class n{constructor(){this.clipboardObjs=[]}setActionToClipboard(t,i,a,s){var r={id:t,name:s,type:i,action:a};this.clipboardObjs.filter(c=>c.id==r.id&&c.type==r.type).length>0?this.clipboardObjs.forEach(c=>{c.id==r.id&&c.type==r.type&&(c.action=r.action)}):this.clipboardObjs.push(r)}hasInClipboard(t,i){return this.clipboardObjs.filter(s=>s.id==t&&s.type==i).length>0}hasCopyFolderActionInClipboard(){var t=!1;return this.clipboardObjs.forEach(i=>{i.type==Qn.EXAM_CATEGORY&&i.action==vi.COPY&&(t=!0)}),t}getActionOfDocumentObj(t,i){var a=this.clipboardObjs.filter(s=>s.id==t&&s.type==i);if(a&&a.length>0)return a[0].action}removeDocumentInClipboard(t,i){for(var a=0;a<this.clipboardObjs.length;a++)this.clipboardObjs[a].id==t&&this.clipboardObjs[a].type==i&&this.clipboardObjs.splice(a,1)}isPasteToSelfFolder(t){var i=!1;return this.clipboardObjs.forEach(a=>{a.id==t&&a.type==Qn.EXAM_CATEGORY&&a.action==vi.COPY&&(i=!0)}),i}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z2=S(16007);function P2(n,o){if(1&n&&e._UZ(0,"mat-progress-bar",8),2&n){const t=e.oxw();e.Q6J("value",100*(t.totalDocumentObjs>0?t.totalSavedObjs/t.totalDocumentObjs:0))("bufferValue",100)}}let j2=(()=>{class n extends W.Q{askBeforeCloseWindow(t){return!this.onProcessCopy||(t.returnValue=!1)}confirmDialog(t,i,a,s){this.dialog.open(ba,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{s(!0===l)})}onNoClick(){this.stopProcess=!0,this.confirmDialog("lang_auto_huy_copy","lang_auto_ban_co_chac_chan_muon_huy_tien_trinh_copy_khong","400px",t=>{t?this.closeDialog(!0):(this.stopProcess=!1,this.closeDialog(!1))})}closeDialog(t){t&&(this.onProcessCopy=!1,this.dialogRef.close(t))}getDocumentToCopy(){this.stopProcess=!1,this.onProcessCopy=!0,this.totalSavedObjs=0,this.totalDocumentObjs=0;let t=this.clipboardService.getCurrentClipBoard();var i=[],a=[];t.forEach(s=>{s.action==vi.COPY&&(s.type==Qn.EXAM_CATEGORY?i.push({fromCategoryId:s.id??0,fromCategoryName:s.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:this.data.copyToCateId??0,toNewCategoryId:void 0}):a.push(s))}),a.length>0&&i.push({fromCategoryId:0,fromCategoryName:"",fromCategoryObjs:[],fromDocumentObjs:a,parentOfNewCategoryId:0,toNewCategoryId:this.data.copyToCateId??0}),i.length>0?this._copyChildCategoryObjs(!0,this.commonService.myClone(i),0,{},s=>{s?(this.showErrorSnack(s),this.closeDialog(!1)):this._copyChildCategoryObjs(!1,this.commonService.myClone(i),0,{},r=>{r?(this.showErrorSnack(r),this.closeDialog(!1)):this.closeDialog(!0)})}):this.closeDialog(!1)}_copyOneCategoryObj(t,i,a,s){if(null==i.toNewCategoryId)t?(i.toNewCategoryId=0,this._copyOneCategoryObj(t,i,a,s)):this._createNewFolderOnNewCate(i,(l,c)=>{c?s(this.commonService.translateToKeyParam(c," "+i.fromCategoryName)):(a[l]=1,i.toNewCategoryId=l,this._copyOneCategoryObj(t,i,a,s))});else if(null==i.fromCategoryObjs)this._getDocumentOfChildFolder(a,i,(l,c,d)=>{d?s(this.commonService.translateToKeyParam(d," "+i.fromCategoryName)):(i.fromCategoryObjs=l,i.fromDocumentObjs=c,this._copyOneCategoryObj(t,i,a,s))});else if(i.fromDocumentObjs&&i.fromDocumentObjs.length>0)if(t)this.totalDocumentObjs+=i.fromDocumentObjs?.length??0,i.fromDocumentObjs=[],this._copyOneCategoryObj(t,i,a,s);else{var r=[];i.fromDocumentObjs.forEach(l=>{r.push({id:l.id,type:l.type,action:l.action})}),this._callSaveCopyDocument(i.toNewCategoryId,r,0,10,l=>{i.fromDocumentObjs=[],this._copyOneCategoryObj(t,i,a,s)})}else i.fromCategoryObjs.length>0?this._copyChildCategoryObjs(t,i.fromCategoryObjs,0,a,s):s(void 0)}_copyChildCategoryObjs(t,i,a=0,s,r){this.onProcessCopy&&i.length>a?this._copyOneCategoryObj(t,i[a],s,l=>{l?r(l):setTimeout(()=>{this._copyChildCategoryObjs(t,i,a+1,s,r)},100)}):r(void 0)}_getDocumentOfChildFolder(t,i,a){var s=function(r,l){let c=r?.categoryObjs??[],d=r?.documentObjs??[],f=[],y=[];c.forEach(O=>{t.hasOwnProperty(O.id??0)||f.push({fromCategoryId:O.id??0,fromCategoryName:O.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:i.toNewCategoryId??0,toNewCategoryId:void 0})}),d.forEach(O=>{O.exam&&y.push({id:O.exam.id??0,name:O.exam.name??"",type:Qn.EXAM,action:vi.COPY})}),l(f,y,void 0)};this.cacheApiResponseByCategoryIds.hasOwnProperty(i.fromCategoryId)?s(this.cacheApiResponseByCategoryIds[i.fromCategoryId],a):this.documentService.apiDocumentsGet(i.fromCategoryId,void 0,void 0,void 0,void 0,void 0,void 0,1,1,-1).subscribe(r=>{r&&1==r.success?(this.cacheApiResponseByCategoryIds[i.fromCategoryId]=r.data,s(r.data,a)):a([],[],r.message??"lang_cms_error_to_get_folder_data")})}_createNewFolderOnNewCate(t,i){this.subscriptions.add(this.examCategoryService.apiExamCategorySaveObjPost({name:t.fromCategoryName,parentId:t.parentOfNewCategoryId}).subscribe(s=>{1==s.success?i(s.data?.obj?.id??0,s.data?.obj?.id?void 0:"lang_cms_error_to_create_folder"):i(0,s.message)}))}_callSaveCopyDocument(t,i,a,s=10,r){if(this.stopProcess)this.onProcessCopy?setTimeout(()=>{this._callSaveCopyDocument(t,i,a,s,r)},100):r(void 0);else if(this.onProcessCopy){var l=i.slice(a,a+s);l.length>0?this.subscriptions.add(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(t,{copyOrCutObjs:l}).subscribe(c=>{c&&1==c.success?(a+=l.length,this.totalSavedObjs+=l.length,setTimeout(()=>{this._callSaveCopyDocument(t,i,a,s,r)},100)):r(c.message)})):r(void 0)}else r(void 0)}ngOnInit(){this.getDocumentToCopy(),this.dialogRef.backdropClick().subscribe(t=>{this.onNoClick()})}constructor(t,i,a,s,r,l){super(),this.examCategoryService=t,this.clipboardService=i,this.documentService=a,this.dialog=s,this.dialogRef=r,this.data=l,this.onProcessCopy=!0,this.stopProcess=!1,this.totalSavedObjs=0,this.totalDocumentObjs=0,this.cacheApiResponseByCategoryIds={}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.F1),e.Y36(cm),e.Y36(Ve.Zg),e.Y36(j.uw),e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["copy-folder-dialog"]],hostBindings:function(t,i){1&t&&e.NdJ("beforeunload",function(s){return i.askBeforeCloseWindow(s)},!1,e.Jf7)},features:[e.qOj],decls:13,vars:10,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-3"],["mode","determinate",3,"value","bufferValue",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","copy-folder-dialog-IxIj_JqXunF",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["mode","determinate",3,"value","bufferValue"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.YNc(8,P2,1,2,"mat-progress-bar",5),e.qZA()()(),e.TgZ(9,"div",6)(10,"button",7),e.NdJ("click",function(){return i.onNoClick()}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(4),e.AsE(" ",e.lcZ(5,4,"lang_auto_he_thong_dang_copy_du_lieu"),"",e.lcZ(6,6,"lang_auto__vui_long_khong_tai_lai_trang")," "),e.xp6(4),e.Q6J("ngIf",i.onProcessCopy),e.xp6(3),e.hij(" ",e.lcZ(12,8,"lang_auto_huy")," "))},dependencies:[M.O5,Z2.pW,re.bT],styles:[".btn-hover[_ngcontent-%COMP%]:hover{background-color:#cbc8c8}"]}),n})();function D2(n,o){if(1&n&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4,":\xa0"),e.TgZ(5,"span",10),e._uU(6),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_thu_muc")),e.xp6(4),e.Oqu(t.folderNames)}}function N2(n,o){if(1&n&&(e.TgZ(0,"div",19)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4,":\xa0"),e.TgZ(5,"span",10),e._uU(6),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_only_de_thi")),e.xp6(4),e.Oqu(t.examNames)}}let Q2=(()=>{class n{onNoClick(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}constructor(t,i){this.dialogRef=t,this.data=i,this.enumDocumentType=Qn,this.folderNames="",this.examNames="",this.folderNames=i.clipboardObjs.filter(a=>a.type==Qn.EXAM_CATEGORY).map(a=>a.name).join(", "),this.examNames=i.clipboardObjs.filter(a=>a.type==Qn.EXAM).map(a=>a.name).join(", ")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["multiple-delete-confirm"]],decls:38,vars:25,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center","mb-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"font-medium"],[3,"defaultHeight"],[1,"p-2"],["class","text-slate-500 dark:text-slate-400 mb-2",4,"ngIf"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[2,"text-transform","lowercase"],[1,"p-3","text-right"],["azt-track-service","multiple-delete-dialog-NgJ73bNleKj",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","multiple-delete-dialog-zU2F66X2jAh",1,"btn","w-24","btn-danger",3,"click"],[1,"text-slate-500","dark:text-slate-400","mb-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e.kcU(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"span",10),e._uU(14),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"azt-mat-dialog-content",11)(18,"div",12),e.YNc(19,D2,7,4,"div",13),e.YNc(20,N2,7,4,"div",13),e.TgZ(21,"p",14)(22,"span"),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"span",15),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.TgZ(28,"span"),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()()()()(),e.TgZ(31,"div",16)(32,"button",17),e.NdJ("click",function(){return i.onNoClick()}),e._uU(33),e.ALo(34,"mytranslate"),e.qZA(),e.TgZ(35,"button",18),e.NdJ("click",function(){return i.onAccept()}),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(11),e.hij(" ",e.lcZ(12,11,"lang_auto_ban_co_chac_chan_muon_xoa"),"\xa0"),e.xp6(3),e.Oqu(i.data.clipboardObjs.length),e.xp6(1),e.hij("\xa0",e.lcZ(16,13,"lang_auto_tai_lieu_vua_chon")," "),e.xp6(2),e.Q6J("defaultHeight",70),e.xp6(2),e.Q6J("ngIf",""!=i.folderNames),e.xp6(1),e.Q6J("ngIf",""!=i.examNames),e.xp6(3),e.Oqu(e.lcZ(24,15,"lang_auto_khi_xac_nhan")+", "),e.xp6(3),e.hij("",e.lcZ(27,17,"lang_auto_tai_lieu"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(30,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),e.xp6(4),e.hij(" ",e.lcZ(34,21,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(37,23,"lang_cms_common_confirm_btn")," "))},dependencies:[M.O5,bt.O,re.bT],encapsulation:2}),n})();var lu=S(51969);function q2(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.ALo(1,"mytranslate"),e.TgZ(2,"span",5),e._UZ(3,"lucide-icon",30),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.s9C("matTooltip",e.lcZ(1,3,"lang_auto_copy_link_de_thi")),e.Q6J("cdkCopyToClipboard",t.copyLinkExam()),e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_auto_copy_link"))}}function F2(n,o){1&n&&(e.TgZ(0,"div",31)(1,"div",32)(2,"span",33),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function U2(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",34),2&n){const t=e.oxw(2);e.Q6J("imgSrc",null==t.data.obj?null:t.data.obj.examHeader)}}function R2(n,o){if(1&n&&e._UZ(0,"azt-standalone-question",36),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(2);e.Q6J("follower",s.followerRenderQuest)("displayScreen",1)("question",i)("index",a)("startQuestionIndex",s.examObj.startQuestionIndex)("expandInfo",s.examObj.expandInfo)}}function B2(n,o){if(1&n&&(e.ynx(0),e.YNc(1,R2,1,6,"azt-standalone-question",35),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.examObj)}}function z2(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"a",15),e.ALo(7,"mytranslate"),e.TgZ(8,"span",16),e._UZ(9,"lucide-icon",17),e.qZA()(),e.YNc(10,q2,7,7,"a",18),e.qZA()(),e.TgZ(11,"div",19)(12,"a",20)(13,"span",16),e._UZ(14,"lucide-icon",21),e.qZA()()()(),e.TgZ(15,"azt-mat-dialog-content",22),e.YNc(16,F2,5,3,"div",23),e.TgZ(17,"div",24),e._UZ(18,"div",25),e.YNc(19,U2,1,1,"azt-loaded-img",26),e.YNc(20,B2,2,1,"ng-container",27),e._UZ(21,"div",28),e.qZA()()()(),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(3);e.xp6(6),e.s9C("matTooltip",e.lcZ(7,6,"lang_auto_tai_ve")),e.Q6J("matMenuTriggerFor",i),e.xp6(4),e.Q6J("ngIf",0==(null==t.data?null:t.data.isOnLib)),e.xp6(6),e.Q6J("ngIf",t.statusObj.loading),e.xp6(3),e.Q6J("ngIf",null==t.data||null==t.data.obj?null:t.data.obj.examHeader),e.xp6(1),e.Q6J("ngForOf",t.questionList)}}function J2(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",37),e.NdJ("exportDataDone",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}let cu=(()=>{class n extends W.Q{closeChangeInformation(t){this.showFormAddInformation=!1,t&&setTimeout(()=>{this.downloadExam()},100)}getEmitDataForm(t){t&&(this.printAddInfo=t)}onResize(){let t=document.getElementById("block__view--pdf");this.widthBlockPdf=t?.offsetHeight,this.widthBlockPdf=this.widthBlockPdf/2}btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(){let t=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"";_o.G.openLoadingEffect(`${t}...`);let i={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""},a=this.printAddInfo.templateType??0;this.data.obj&&(this.data.obj.hideGroupQuestion=0,this.exportDocxService.downloadExam(!1,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,i,a,void 0,void 0,void 0,!0).catch(s=>{this.showErrorSnack(s.message)}))}html2pdfAction(t){try{Xd().set({pagebreak:{mode:"avoid-all"}}).from(t).save("azota_save_"+this.commonService.convertVietnameseToEnglish(this.data?.obj?.name??"")+".pdf")}catch{}}getData(t){this.initStatusObj(),this.permissionService.hasViewPermission("exam",t?.permissionObj)?this.examService.apiExamGetQuestionsIdGet(t?.id??0).subscribe(i=>{const a=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(a.length),this.addRoleQuestion(a),this.cloneQuestionList=this.commonService.myClone(a),this.questionList=a,this.examObj=i.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(t){for(let i=0;i<t.length;i++)t[i].isRoleTeacher=!0}downloadExamAnswer(){this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(t=>{if(1===t.success){let i=t.data?.obj;i?.offlineMixQuestionObjs&&i.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(i))}else this.errorStatusObj(t.message??"")}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i)}createNameExam(t,i){let a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",""):"answerexcel"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");let s=".docx";return s="answersheet"==t?".pdf":s,s="answerexcel"==t?".xlsx":s,a+s}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),window.addEventListener("resize",()=>{this.isResizeEvent=!1;let t=this,i=setTimeout(()=>{t.isResizeEvent=!0},250);clearTimeout(i)}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f){super(),this.shareFileFlutterService=t,this.baseApiService=i,this.permissionService=a,this.exportDocxService=s,this.examService=r,this.offlineExamExportService=l,this.printAnswersheetService=c,this.dialogRef=d,this.data=f,this.closeDialog=new e.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new Xa.G,this.isResizeEvent=!0,this.showFormAddInformation=!1,this.printAddInfo={},this.getBase64FromUrl=function(){var y=(0,$n.Z)(function*(O){const I=yield(yield fetch(O)).blob();return new Promise(z=>{const $=new FileReader;$.readAsDataURL(I),$.onloadend=()=>{z($.result)}})});return function(O){return y.apply(this,arguments)}}()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.g),e.Y36(Nn._),e.Y36(eo.$),e.Y36(nu.m),e.Y36(em.O),e.Y36(Rn.qr),e.Y36(Ls.Y),e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-exam"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(){return i.onResize()},!1,e.Jf7)},outputs:{closeDialog:"closeDialog"},features:[e.qOj,e.TTD],decls:19,vars:11,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],[1,"w-4","h-4","flex-none"],["name","download"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["name","x"],[1,"mt-3"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2",2,"height","calc(100vh - 250px)"],[1,"pt-3"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","cdkCopyToClipboard","click"],["name","copy"],[1,"flex","justify-center","items-center","h-40"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"follower","displayScreen","question","index","startQuestionIndex","expandInfo",4,"ngIf"],[3,"follower","displayScreen","question","index","startQuestionIndex","expandInfo"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){1&t&&(e.YNc(0,z2,22,8,"ng-container",0),e.ALo(1,"viewPermission"),e.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),e.NdJ("click",function(){return i.downloadExam()}),e.TgZ(8,"span",5),e._UZ(9,"lucide-icon",6),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"li")(13,"a",7),e.NdJ("click",function(){return i.downloadExamAnswer()}),e.TgZ(14,"span",5),e._UZ(15,"lucide-icon",8),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()(),e.YNc(18,J2,1,2,"azt-export-excel-for-answersheet",9)),2&t&&(e.Q6J("ngIf",e.xi3(1,4,null==i.data||null==i.data.obj?null:i.data.obj.permissionObj,"exam")),e.xp6(10),e.hij(" ",e.lcZ(11,7,"lang_auto_tai_xuong_de_thi")," "),e.xp6(6),e.hij(" ",e.lcZ(17,9,"lang_auto_tai_xuong_dap_an_de_thi")," "),e.xp6(2),e.Q6J("ngIf",null!=i.exportExcelData))},dependencies:[M.sg,M.O5,ea.i3,j.ZT,en.VK,en.p6,Zt.gM,h.Nh5,lu.l,Ta.O,bt.O,Jr,re.bT,re.Pz],encapsulation:2}),n})();function H2(n,o){1&n&&(e.TgZ(0,"div",5),e.O4$(),e.TgZ(1,"svg",6)(2,"g",7)(3,"g",8),e._UZ(4,"circle",9),e.TgZ(5,"path",10),e._UZ(6,"animateTransform",11),e.qZA()()()()())}function K2(n,o){1&n&&(e.TgZ(0,"div",40),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function $2(n,o){if(1&n&&(e.TgZ(0,"div",38),e.YNc(1,K2,3,3,"div",39),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors.checkboxValidator)}}const Y2=function(n){return{"h-56-important":n}};function G2(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"form",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",18)(9,"div",19)(10,"div",20)(11,"input",21),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllCheckBox(0))}),e.qZA(),e.TgZ(12,"label",22),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",23)(16,"input",24),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearAllCheckBox(2))}),e.qZA(),e.TgZ(17,"label",25),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()(),e.TgZ(20,"div",26)(21,"div",27)(22,"div",28)(23,"div",29),e._UZ(24,"azt-list-classroom-checkall",30),e.qZA()(),e.TgZ(25,"div",31)(26,"ng-scrollbar",32)(27,"azt-list-classroom-checkbox",33),e.NdJ("objsChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.classroomObjs=a)}),e.qZA()()()()(),e.YNc(28,$2,2,1,"div",34),e.qZA()()()(),e.TgZ(29,"div",35)(30,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(31),e.ALo(32,"mytranslate"),e.qZA(),e.TgZ(33,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savePublishExam("save"))}),e._uU(34),e.ALo(35,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(5),e.hij(" ",e.lcZ(7,19,"lang_testbank_test_config_who_tested")," "),e.xp6(7),e.hij(" ",e.lcZ(14,21,"lang_testbank_test_config_all_people")," "),e.xp6(5),e.hij(" ",e.lcZ(19,23,"lang_testbank_test_config_assigne_class")," "),e.xp6(2),e.Q6J("hidden",2!=t.form.controls.whoAllow.value),e.xp6(4),e.Q6J("form",t.form)("objs",t.classroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(29,Y2,t.isMobileWebView)),e.xp6(1),e.Q6J("form",t.form)("objs",t.classroomObjs)("examClassroomObjs",t.examClassroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",t.form.controls.classroomIds.errors),e.xp6(3),e.hij(" ",e.lcZ(32,25,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",1==t.form.controls.whoAllow.value&&t.form.invalid||2==t.form.controls.whoAllow.value&&!t.hasClassroomIdChecked),e.xp6(1),e.hij(" ",e.lcZ(35,27,"lang_auto_luu")," ")}}let uu=(()=>{class n extends W.Q{clearAllCheckBox(t){1==t?this.isSelectClassroom=!1:2==t&&(this.isSelectClassroom=!0)}closeDialog(t){this.dialogRef.close(t)}get hasClassroomIdChecked(){var t=this.commonService.getFormObj(this.form);let i=!1;for(let a=0;a<t.classroomIds.length;a++)if(t.classroomIds[a]){i=!0;break}return i}savePublishExam(t){if(1==this.form.controls.whoAllow.value&&this.form.invalid||2==this.form.controls.whoAllow.value&&!this.hasClassroomIdChecked)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");this.initStatusObj();let i="publish"===t?1:void 0;var a=this.commonService.getFormObj(this.form),s=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zn.y.exam);const r=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,s,a.classroomIds);let l={whoAllow:a.whoAllow,isPublished:i??void 0,classroomIds:r,isSaveConfig:0,enableViewAnswerResultMinMark:!1};var c=this.permissionService.hasEditPermission("exam",this.obj?.permissionObj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,l):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,l);this.subscriptions.add(c.subscribe(d=>{1==d.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(d.data?.obj)):this.errorStatusObj(d.message??"",!0)}))}getExamDataByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomGet(t).subscribe(i=>{if(1==i.success){if(null!=i.data){var s,a=i.data?.examObj;if(!(s=this.castObj(a)))return;s.limitQuestionGroupsParse=this.commonService.myParseJson(a.limitQuestionGroups??""),this.obj=s,this.hashId=this.obj.hashId??"",this.classroomObjs=i.data.classroomObjs??new Array,this.examClassroomObjs=i.data.examClassroomObjs??[],this.form.patchValue({whoAllow:String(this.obj.whoAllow)}),this.isSelectClassroom="2"==String(this.obj.whoAllow),this.successStatusObj()}}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){this.form=this.formBuilder.group({whoAllow:new p.p4("0"),classroomIds:this.formBuilder.array([])},{validators:[zo.h.classroomCheckBoxValidator]}),this.form.valueChanges.subscribe(t=>{let i=JSON.stringify(t);i!=this.prevData&&(this.prevData=i,this.form.patchValue(t))}),this.getExamDataByHashId(this.hashId),super.ngOnInit()}constructor(t,i,a,s,r,l){super(),this.formBuilder=t,this.documentConfigService=i,this.permissionService=a,this.dialogRef=s,this.data=r,this.sEAztClassroomCheckboxService=l,this.form=new p.nJ({}),this.permissionTypes=Zn.y,this.checkDialogFastContent=[],this.prevData="",this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.hashId=r.hashId}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(Vd.C),e.Y36(eo.$),e.Y36(j.so,8),e.Y36(j.WI,8),e.Y36(Ki.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-online-exam-dialog"]],features:[e._Bn([{provide:Tn.fM,useClass:So.WG,deps:[ji.Ad,ga.o8]},{provide:Tn.ab,useFactory:$a.hx,deps:[Mt.O]}]),e.qOj],decls:6,vars:2,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"loading","flex","items-center","justify-center"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-8","h-8"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio","value","0",1,"form-check-input",3,"change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio","value","2",1,"form-check-input",3,"change"],["for","config-who-class",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,H2,7,0,"div",3),e.YNc(4,G2,36,31,"ng-template",null,4,e.W1O),e.qZA()()()),2&t){const a=e.MAs(5);e.xp6(3),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.O5,x.KC,p._Y,p.Fj,p._,p.JJ,p.JL,p.sg,p.u,p.CE,Bt.M,Ho.o,fa.g,re.bT],styles:["input[_ngcontent-%COMP%]::placeholder{color:#b2b2b2!important}.test-config[_ngcontent-%COMP%]{width:620px}.loading[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.setting-title[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:5px;font-size:14px;color:#2262ae}.setting-block[_ngcontent-%COMP%]{background:#fff}.setting-item[_ngcontent-%COMP%]{margin-bottom:15px}.setting-input[_ngcontent-%COMP%]{height:100%;border-left:0px;border-top-left-radius:0;border-bottom-left-radius:0}.setting-label[_ngcontent-%COMP%]{padding:15px;align-self:center;line-height:1.5;color:#495057;background-color:#e9ecef;border:1px solid #ced4da;border-bottom-left-radius:5px;border-top-left-radius:5px}.setting-form-input[_ngcontent-%COMP%]{padding:8.3px 15px;line-height:1.5;font-size:1rem;color:#495057;background-color:#fff;border:1px solid #ced4da;border-bottom-right-radius:.25rem;border-top-right-radius:.25rem}.setting-field-time[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:3px;text-align:center;padding:0}.p-custom[_ngcontent-%COMP%]{padding:12.8px 15px}.setting-advanced[_ngcontent-%COMP%]{margin-top:20px}.setting-head[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center}.setting-label-textarea[_ngcontent-%COMP%]{align-self:initial;display:flex;justify-content:center;align-items:center}.setting-textarea[_ngcontent-%COMP%]{height:120px}.picker-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:16px;height:0;font-size:16px;right:0}.btn-transparent[_ngcontent-%COMP%]{display:flex;align-items:center;border:none;background:transparent}.btn-transparent[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:20px;color:#2262ae}.more-link[_ngcontent-%COMP%]{color:#2262ae;transition:all .5s}.more-link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#103767}.label-custom[_ngcontent-%COMP%]{padding:45px 15px}  .mat-checkbox-layout{margin-bottom:0}small[_ngcontent-%COMP%]{color:#0006}.box-input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;height:24px;border-radius:3px;padding-left:5px;width:60px}.full-width[_ngcontent-%COMP%]{width:100%;max-width:100%}.w-92[_ngcontent-%COMP%]{width:92%!important}.w-9325[_ngcontent-%COMP%]{width:93.25%!important}.info_field[_ngcontent-%COMP%]{margin:8px 0}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;padding:5px 8px}.custom-input[_ngcontent-%COMP%], .custom-input-btn[_ngcontent-%COMP%]{border:none;width:100%;padding:5px;margin-left:5px}.border-auto[_ngcontent-%COMP%]{border:1px solid #dc3545}.custom-input[_ngcontent-%COMP%]:hover{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.custom-input[_ngcontent-%COMP%]:focus{outline-width:1px}.form-custom[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}@media only screen and (max-width: 1196px){  .mat-radio-label-content{white-space:normal}}@media only screen and (max-width: 350px){.test-config__box--grid[_ngcontent-%COMP%]{display:grid}}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.word-wrap[_ngcontent-%COMP%]{word-break:break-word}.school-info_bg[_ngcontent-%COMP%]{width:100%}.note[_ngcontent-%COMP%]{font-style:italic;font-size:13px;font-weight:600}.dialog-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-align:center}.infor_box[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin:8px 0}.no_select[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.custom-mix-question-height[_ngcontent-%COMP%]{height:160px}.custom-invalid-mix-form[_ngcontent-%COMP%]{border-color:#dc3545}.custom-mix-group-question[_ngcontent-%COMP%]{background-color:#e9ecef;padding-left:0!important;padding-right:0!important;margin-left:0!important;margin-right:0!important;padding-bottom:0!important;border:1px solid #ced4da;border-radius:.25rem}.test-config__formMixQuestion[_ngcontent-%COMP%]{border:none;border-left:1px solid #ced4da}.no-border[_ngcontent-%COMP%]{border:none}.btn-offline[_ngcontent-%COMP%]{background:#ec9b00;color:#fff;transition:all .5s}.btn-offline[_ngcontent-%COMP%]:hover{background:#c8860b}.custom-select[_ngcontent-%COMP%]{height:100%;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.custom-select-md[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem}.btn-width[_ngcontent-%COMP%]{width:140px}.classroom_list[_ngcontent-%COMP%]{height:220px;white-space:nowrap;padding-left:2px;overflow:hidden}.badge-info[_ngcontent-%COMP%]{color:#fff;background-color:#2361ae}.setting-block-mix[_ngcontent-%COMP%]{height:180px;overflow:hidden;padding-bottom:40px}.hiddenTooltip[_ngcontent-%COMP%]{position:absolute;visibility:hidden;left:140px;width:0;top:3em}  .mat-checkbox-layout .mat-checkbox-label{font-weight:400}.px-15[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}.flex-around[_ngcontent-%COMP%]{justify-content:space-around}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center;padding-right:0}.setting-block-mix-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:20px}.py-azt-4[_ngcontent-%COMP%]{padding:30px 15px}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}.block-icon[_ngcontent-%COMP%]{right:20px}}@media screen and (max-width: 768px){.setting-label[_ngcontent-%COMP%]{color:#495057;background-color:transparent;border:none;padding:0;font-weight:500;text-align:left;margin-bottom:10px}.classroom_list[_ngcontent-%COMP%]{white-space:pre-wrap;padding-left:2px;overflow:auto}.setting-form-input[_ngcontent-%COMP%]{padding:10px 15px;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.setting-input[_ngcontent-%COMP%]{border-radius:.25rem;border:1px solid #ced4da;min-height:65px}.btn-azt-block[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.px-15[_ngcontent-%COMP%]{padding-right:0}.flex-around[_ngcontent-%COMP%]{justify-content:flex-start}.mt-md-10[_ngcontent-%COMP%]{margin-top:10px}.setting-block-mix[_ngcontent-%COMP%]{height:auto}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center}.setting-field-time[_ngcontent-%COMP%]{margin-top:10px}.paddingCustom[_ngcontent-%COMP%]{padding:0!important}.setting-block-mix-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.py-azt-4[_ngcontent-%COMP%]{padding:0}.setting-label-textarea[_ngcontent-%COMP%]{justify-content:flex-start}.test-config[_ngcontent-%COMP%]{width:auto}}"]}),n})(),W2=(()=>{class n{doExamAction(t,i){switch(i){case es.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(t);case es.SHOW_EXAM_DETAIL:this.showExamDetailDialog(t);break;case es.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(t);break;case es.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(t){return new bi.y(i=>{this.dialog.open(uu,{width:"750px",data:{hashId:t.examObj.hashId},restoreFocus:!1}).afterClosed().subscribe(s=>{s?(i.next({reloadData:!0}),i.complete()):(i.next(void 0),i.complete())})})}showExamDetailDialog(t){let i={obj:{...t.examObj,countQuestion:0,showFrontend:1},curCateId:t.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.dialog.open(cu,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1}).afterClosed().subscribe(s=>{})}showOfflineShareDialog(t){this.dialog.open(Yr,{width:"600px",data:{examHashId:t.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new bi.y(t=>{t.next(void 0),t.complete()})}constructor(t,i,a){this.commonService=t,this.dialog=i,this.examService=a}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(j.uw),e.LFG(Ve.Oe))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V2=(()=>{class n{sortExamByColumn(t,i,a){return i==ts.BY_NAME?this.sortExamByName(t,a):i==ts.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(t,a):i==ts.BY_UPDATED_DATE?this.sortExamByDateUpdated(t,a):i==ts.BY_ATTENDED?this.sortExamByAttended(t,a):this.sortExamByName(t,a)}sortExamByName(t,i){var a=[...t.rootCategoryObjs??[]],s=[...t.rootDocumentObjs??[]];return 1==i?{categoryObjs:this._sortCateByName(a),documentObjs:this._sortDocumentByName(s)}:{categoryObjs:this._sortCateByName(a).reverse(),documentObjs:this._sortDocumentByName(s).reverse()}}sortExamByPublishStatus(t,i){var a=[...t.rootDocumentObjs??[]];return 1==i?{categoryObjs:t.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(a,a?.length)}:{categoryObjs:t.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(a,a?.length).reverse()}}sortExamByDateUpdated(t,i){var a=this.commonService.castObj(t.rootCategoryObjs),s=this.commonService.castObj(t.rootDocumentObjs);return 1==i?{categoryObjs:this._sortCateByDateUpdateExam(a??[]),documentObjs:this._sortDocumentByUpdateTime(s??[])}:{categoryObjs:this._sortCateByDateUpdateExam(a??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(s??[]).reverse()}}sortExamByAttended(t,i){var a=this.commonService.castObj(t.rootDocumentObjs);return 1==i?{categoryObjs:t.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(a??[])}:{categoryObjs:t.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(a??[]).reverse()}}_sortCateByName(t){return t?.sort((i,a)=>(i.name?.trim()??"").localeCompare(a.name?.trim()??""))??[]}_sortDocumentByName(t){return t?.sort((i,a)=>(i.name?.trim()??"").localeCompare(a.name?.trim()??""))??[]}_sortDocumentByPublish(t,i){let a=[],s=[];for(let r=0;r<(i??0);r++)0==t?.[r].isPublished&&a.push(t[r]),1==t?.[r].isPublished&&s.push(t[r]);return a.concat(s)}_sortCateByDateUpdateExam(t){return t.sort((i,a)=>Number(new Date(i.updatedAt??""))-Number(new Date(a.updatedAt??""))),t}_sortDocumentByUpdateTime(t){return t?.sort((i,a)=>Number(new Date(i.updatedAt??""))-Number(new Date(a.updatedAt??"")))}_sortDocumentByAttended(t){return t?.sort((i,a)=>Number(i.attended)-Number(a.attended))}constructor(t){this.commonService=t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Aa=S(67854);let X2=(()=>{class n{redirectByAction(t,i){switch(i){case ta.OFFLINE_CONFIG:this.goToOfflineConfigPage(t);break;case ta.CONFIG_EXAM:this.goToConfigExamPage(t);break;case ta.EDIT_EXAM:this.goToEditExamPage(t);break;case ta.POWER_POINT:this.goToPowerPointPage(t);break;case ta.STATISTIC:this.goToStatisticPage(t);break;case ta.TESTED_LIST:this.goToTestedListPage(t)}}goToOfflineConfigPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i))}goToConfigExamPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.homeworkExamService.isOfflineExam(t.examObj.orcLogId)?this.commonService.myNavigationWithQueryString("/admin/testbank/config-exam-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i)):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i))}goToEditExamPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString((t.examObj.orcLogId??0)<0?"/admin/testbank/add-code-exam-offline/"+t.categoryId+"/"+t.examObj.hashId:"/admin/testbank/update-exam/"+t.categoryId+"/"+t.examObj.id,"?backto="+encodeURIComponent(i))}goToPowerPointPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/powerpoint/"+t.categoryId+"/"+t.examObj.id,"?backto="+encodeURIComponent(i))}goToStatisticPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${t.examObj.categoryId?t.examObj.categoryId:0}/${t.examObj.id}`,"?backto="+encodeURIComponent(i))}goToTestedListPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+t.categoryId+"/"+t.examObj.id+"/0","?backto="+encodeURIComponent(i))}constructor(t,i){this.commonService=t,this.homeworkExamService=i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(Aa.j))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var el=S(2969);const du=function(n){return{active:n}},tv=function(n){return{clickable:n}},mu=function(n){return{"truncate-bread":n}};function nv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",36)(1,"a",37),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.backToParentCategoryEvent(s))}),e.TgZ(2,"span",38,39),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw();e.Q6J("ngClass",e.VKq(11,du,t.id==a.currentCategoryId)),e.xp6(1),e.Q6J("ngClass",e.VKq(13,tv,t.id!=a.currentCategoryId)),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,7,t.name)),e.Q6J("ngClass",e.VKq(15,mu,t.id!=a.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(4),e.Oqu(e.lcZ(7,9,t.name))}}const iv=function(n){return{"w-full":n}};function ov(n,o){if(1&n&&(e.TgZ(0,"span",53),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(5,iv,t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.AsE("",e.lcZ(2,3,"lang_auto_da_chon")," ",t.totalCheckboxSelected,"")}}function av(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.acceptCutAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"polyline",55)(3,"polyline",56)(4,"polyline",57)(5,"polyline",58)(6,"line",59)(7,"line",60),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_auto_cut")," "))}function sv(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),e.O4$(),e.TgZ(1,"svg",62),e._UZ(2,"rect",63)(3,"path",64),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_paste")," "))}function rv(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.acceptDeleteAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"path",66)(3,"path",67)(4,"path",68)(5,"line",69)(6,"line",70),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xoa")," "))}const lv=function(n){return{"justify-between":n}};function cv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40),e.YNc(1,ov,3,7,"span",41),e.TgZ(2,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.acceptCopyAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(3,"svg",19),e._UZ(4,"rect",43)(5,"path",44),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,av,10,3,"button",45),e.YNc(9,sv,6,3,"button",46),e.YNc(10,rv,9,3,"button",47),e.kcU(),e.TgZ(11,"button",48),e.O4$(),e.TgZ(12,"svg",49),e._UZ(13,"circle",50)(14,"circle",51)(15,"circle",52),e.qZA()()()}if(2&n){const t=e.oxw(),i=e.MAs(18);e.Q6J("ngClass",e.VKq(9,lv,t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",t.totalCheckboxSelected>0),e.xp6(5),e.hij(" ",e.lcZ(7,7,"lang_auto_copy")," "),e.xp6(2),e.Q6J("ngIf",!t.shareType||"owner"==t.shareType),e.xp6(1),e.Q6J("ngIf",t.hasCopyOrCutInClipboard()&&t.checkCurrentCatePastePermission()),e.xp6(1),e.Q6J("ngIf",!t.shareType||"owner"==t.shareType),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}}function uv(n,o){1&n&&(e.TgZ(0,"div",71)(1,"div",72),e.O4$(),e.TgZ(2,"svg",73),e._UZ(3,"path",74)(4,"path",75)(5,"path",76)(6,"path",77),e.qZA(),e.kcU(),e.TgZ(7,"p",78),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(8),e.hij("",e.lcZ(9,1,"lang_not_found_search"),"!"))}function dv(n,o){if(1&n&&(e.ynx(0),e.GkF(1,79),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(16),a=e.MAs(14);e.xp6(1),e.Q6J("ngTemplateOutlet",t.isShowSearchResult?i:a)}}function mv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",98),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectOrUnselectAllDocumentObjs())}),e.qZA()}}function _v(n,o){1&n&&e._UZ(0,"input",99),2&n&&e.Q6J("disabled",!0)}const go=function(n){return{"text-primary stroke-width-2.5":n}};function pv(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",100)(1,"div",101),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_ATTENDED,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e.TgZ(2,"span",102),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",88),e.O4$(),e.TgZ(6,"svg",89),e._UZ(7,"polyline",90),e.qZA(),e.TgZ(8,"svg",91),e._UZ(9,"polyline",92),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_number_attended")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,go,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_ATTENDED)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,go,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_ATTENDED))}}function hv(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",100)(1,"div",103)(2,"div",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_PUBLISH_STATUS,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",88),e.O4$(),e.TgZ(6,"svg",89),e._UZ(7,"polyline",90),e.qZA(),e.TgZ(8,"svg",91),e._UZ(9,"polyline",92),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_status")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,go,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_PUBLISH_STATUS)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,go,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_PUBLISH_STATUS))}}function gv(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",100)(1,"div",105),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_folder_and_file_delivery_for")," "))}function fv(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",100)(1,"div",106),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_UPDATED_DATE,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e.TgZ(2,"div",107),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",88),e.O4$(),e.TgZ(6,"svg",89),e._UZ(7,"polyline",90),e.qZA(),e.TgZ(8,"svg",91),e._UZ(9,"polyline",92),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_time_update")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,go,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_UPDATED_DATE)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,go,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_UPDATED_DATE))}}function xv(n,o){1&n&&(e.ynx(0),e._UZ(1,"input",125),e.BQk())}function bv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",80)(1,"input",130),e.NdJ("ngChange",function(){e.CHM(t);const a=e.oxw(6);return e.KtG(a.removeValueOfFormInClipboard())}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("formGroup",t)}}function vv(n,o){if(1&n&&(e.ynx(0),e.YNc(1,bv,2,1,"span",129),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}const um=function(n){return[n]};function yv(n,o){if(1&n&&(e.TgZ(0,"span",128),e.YNc(1,vv,2,1,"ng-container",96),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.VKq(1,um,i.getClipboardFormGroupByExamCategory(t)))}}function wv(n,o){1&n&&e._UZ(0,"input",125)}function Cv(n,o){if(1&n&&(e.YNc(0,yv,2,3,"span",126),e.ALo(1,"fullPermission"),e.YNc(2,wv,1,0,"ng-template",null,127,e.W1O)),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.Q6J("ngIf",-1!=i.id&&e.xi3(1,2,i.permissionObj,"exam"))("ngIfElse",t)}}function kv(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",131)(2,"g",132),e._UZ(3,"path",133)(4,"path",134)(5,"path",135)(6,"path",136),e.qZA()(),e.BQk())}function Tv(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",138),e.ALo(2,"mytranslate"),e._UZ(3,"path",139)(4,"path",140)(5,"path",141),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function Av(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",142),e._UZ(1,"path",143),e.qZA())}function Ov(n,o){if(1&n&&(e.YNc(0,Tv,6,3,"span",114),e.YNc(1,Av,2,0,"ng-template",null,137,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw().$implicit;e.Q6J("ngIf",i.shared)("ngIfElse",t)}}function Sv(n,o){1&n&&(e.TgZ(0,"span",144),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_de_chung_azota")," "))}function Ev(n,o){1&n&&(e.TgZ(0,"span",145),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}function Mv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",146),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2),l=e.MAs(38);return e.KtG(r.onContextMenu(a,s,l))}),e.O4$(),e.TgZ(1,"svg",147),e._UZ(2,"circle",50)(3,"circle",51)(4,"circle",52),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",!t.id||t.id<0||"user"==t.shareType)}}function Iv(n,o){1&n&&(e.TgZ(0,"div",148),e._UZ(1,"div",149),e.qZA())}function Lv(n,o){1&n&&(e.TgZ(0,"div",148),e._UZ(1,"div",103),e.qZA())}function Zv(n,o){1&n&&(e.TgZ(0,"div",148),e._UZ(1,"div",150),e.qZA())}function Pv(n,o){if(1&n&&(e.TgZ(0,"div",151)(1,"div",152)(2,"span",153),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),e.xp6(2),e.hij("",e.lcZ(6,4,t.updatedAt)," ")}}const dm=function(n){return{opacity:n}},ns=function(n,o){return{"col-span-4":n,"col-span-12":o}},mm=function(n,o){return{"w-60":n,"w-52":o}};function jv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",108)(1,"div",109)(2,"div",110)(3,"div",111)(4,"div",112)(5,"div",113),e.YNc(6,xv,2,0,"ng-container",114),e.YNc(7,Cv,4,5,"ng-template",null,115,e.W1O),e.qZA(),e.TgZ(9,"div",116),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.handleOpenFolder(s))}),e.TgZ(10,"div",117),e.YNc(11,kv,7,0,"ng-container",114),e.YNc(12,Ov,3,2,"ng-template",null,118,e.W1O),e.qZA(),e.TgZ(14,"div",119,39),e.ALo(16,"mytranslate"),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.YNc(20,Sv,3,3,"span",120),e.YNc(21,Ev,3,3,"span",121),e.qZA()(),e.YNc(22,Mv,5,1,"button",122),e.qZA(),e.YNc(23,Iv,2,0,"div",123),e.YNc(24,Lv,2,0,"div",123),e.YNc(25,Zv,2,0,"div",123),e.YNc(26,Pv,7,6,"div",124),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(8),a=e.MAs(13),s=e.MAs(15),r=e.oxw(2),l=e.MAs(51),c=e.MAs(38);e.s9C("id","folder_"+t.id),e.Q6J("ngStyle",e.VKq(28,dm,r.isSelectedExamCategoryInClipboard(t)?"0.6":"1"))("contextMenu",!t.id||t.id<0||"user"==t.shareType?l:c)("contextMenuValue",t),e.xp6(3),e.Q6J("ngClass",e.WLB(30,ns,!r.isMobileWebView,r.isMobileWebView)),e.xp6(3),e.Q6J("ngIf",1==t.isGlobalAzota)("ngIfElse",i),e.xp6(3),e.Q6J("ngClass",e.WLB(33,mm,-1==t.id,-1!=t.id)),e.xp6(2),e.Q6J("ngIf",1==t.isGlobalAzota)("ngIfElse",a),e.xp6(3),e.s9C("matTooltip",e.lcZ(16,24,t.name)),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.xp6(3),e.Tol(r.isMobileWebView&&-1!=t.id?"azt-wv-item-name":""),e.xp6(1),e.Oqu(e.lcZ(19,26,t.name)),e.xp6(2),e.Q6J("ngIf",-1!=t.id&&1==t.isGlobalAzota),e.xp6(1),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",r.isMobileDevice&&-1!=t.id),e.xp6(1),e.Q6J("ngIf",!r.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!r.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!r.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!r.isMobileWebView&&-1!=t.id)}}function Dv(n,o){if(1&n){const t=e.EpF();e.ynx(0,80),e.TgZ(1,"input",167),e.NdJ("ngChange",function(){e.CHM(t);const a=e.oxw(6);return e.KtG(a.removeValueOfFormInClipboard())}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.Q6J("formGroup",t)}}function Nv(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Dv,2,1,"ng-container",129),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}function Qv(n,o){if(1&n&&(e.TgZ(0,"span",128),e.YNc(1,Nv,2,1,"ng-container",96),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.VKq(1,um,i.getClipboardFormGroupByExam(t.exam)))}}function qv(n,o){1&n&&e._UZ(0,"input",168),2&n&&e.Q6J("disabled",!0)}function Fv(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",169),e.ALo(1,"mytranslate"),e._UZ(2,"path",170)(3,"polyline",171)(4,"path",172),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function Uv(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",169),e.ALo(1,"mytranslate"),e._UZ(2,"path",170)(3,"polyline",171),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function Rv(n,o){if(1&n&&(e.TgZ(0,"span",173),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",t.exam.attended," ")}}function Bv(n,o){1&n&&(e.TgZ(0,"div",174),e.O4$(),e.TgZ(1,"svg",175),e.ALo(2,"mytranslate"),e._UZ(3,"path",176)(4,"path",177)(5,"path",178),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function zv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",179),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2).$implicit,r=e.oxw(2),l=e.MAs(41);return e.KtG(r.onContextMenu(a,s.exam,l))}),e.O4$(),e.TgZ(1,"svg",147),e._UZ(2,"circle",50)(3,"circle",51)(4,"circle",52),e.qZA()()}}function Jv(n,o){if(1&n&&(e.TgZ(0,"div",151)(1,"div",180)(2,"span",181)(3,"span",182),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e._uU(6),e.qZA()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij("",e.lcZ(5,2,"lang_testbank_folder_and_file_number_attended"),":\xa0"),e.xp6(2),e.hij("",t.exam.attended," ")}}function Hv(n,o){if(1&n&&(e.TgZ(0,"div",151)(1,"div",112)(2,"span",183)(3,"span")(4,"span",182),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(5),e.hij("",e.lcZ(6,2,"lang_testbank_folder_and_file_status"),":\xa0"),e.xp6(2),e.Oqu(1==t.exam.isPublished?e.lcZ(8,4,"lang_testbank_folder_and_file_published"):e.lcZ(9,6,"lang_testbank_folder_and_file_Unpublished"))}}function Kv(n,o){if(1&n&&(e.TgZ(0,"span",187,39),e._uU(2),e.ALo(3,"slice"),e.qZA()),2&n){const t=e.MAs(1),i=e.oxw(3).$implicit,a=e.oxw(2);e.Q6J("matTooltip",a.getClassroomName(i.exam.classrooms).join(", "))("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.Oqu(a.getClassroomName(i.exam.classrooms).join(", ").length>100?e.Dn7(3,4,a.getClassroomName(i.exam.classrooms).join(", "),0,100)+"..":a.getClassroomName(i.exam.classrooms).join(", "))}}function $v(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_tat_ca_moi_nguoi")))}function Yv(n,o){if(1&n&&(e.TgZ(0,"div",184)(1,"div",185)(2,"span",182),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"span",183),e.YNc(6,Kv,4,8,"span",186),e.YNc(7,$v,3,3,"span",10),e.qZA()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.hij("",e.lcZ(4,3,"lang_testbank_folder_and_file_delivery_for"),":\xa0"),e.xp6(3),e.Q6J("ngIf",t.exam.classrooms&&t.exam.classrooms.length>0),e.xp6(1),e.Q6J("ngIf",!t.exam.classrooms||0==t.exam.classrooms.length)}}function Gv(n,o){if(1&n&&(e.TgZ(0,"div",151)(1,"div",152)(2,"span",153),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),e.xp6(2),e.hij("",e.lcZ(6,4,t.exam.updatedAt)," ")}}function Wv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",155)(1,"div",156)(2,"div",157)(3,"div",111)(4,"div",112)(5,"div",113),e.YNc(6,Qv,2,3,"span",126),e.ALo(7,"fullPermission"),e.ALo(8,"copyPermission"),e.YNc(9,qv,1,1,"ng-template",null,158,e.W1O),e.qZA(),e.TgZ(11,"div",159),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.redirectByDocumentAction(a.exam,s.enumDocumentRedirectType.TESTED_LIST))}),e.TgZ(12,"div",160),e.YNc(13,Fv,5,3,"svg",161),e.YNc(14,Uv,4,3,"svg",162),e.qZA(),e.TgZ(15,"div",119,39)(17,"span"),e._uU(18),e.qZA(),e.YNc(19,Rv,3,4,"span",163),e.qZA(),e.YNc(20,Bv,6,3,"div",164),e.qZA()(),e.YNc(21,zv,5,0,"button",165),e.qZA(),e.YNc(22,Jv,7,4,"div",124),e.YNc(23,Hv,10,8,"div",124),e.YNc(24,Yv,8,5,"div",166),e.YNc(25,Gv,7,6,"div",124),e.qZA()()()}if(2&n){const t=e.MAs(10),i=e.MAs(16),a=e.oxw().$implicit,s=e.oxw(2),r=e.MAs(51),l=e.MAs(41);e.Q6J("ngStyle",e.VKq(28,dm,s.isSelectedExamInClipboard(a.exam)?"0.6":"1"))("contextMenu",!a.exam.permissionObj||s.commonService.isEmptyObj(a.exam.permissionObj)?r:l)("contextMenuValue",a.exam),e.xp6(3),e.Q6J("ngClass",e.WLB(30,ns,!s.isMobileWebView,s.isMobileWebView)),e.xp6(3),e.Q6J("ngIf",e.xi3(7,22,a.exam.permissionObj,"exam")||e.xi3(8,25,a.exam.permissionObj,"exam"))("ngIfElse",t),e.xp6(7),e.Q6J("ngIf",1==a.exam.isPublished),e.xp6(1),e.Q6J("ngIf",1!=a.exam.isPublished),e.xp6(1),e.s9C("matTooltip",a.exam.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.Gre("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),e.xp6(1),e.Oqu(a.exam.name),e.xp6(1),e.Q6J("ngIf",s.isMobileWebView),e.xp6(1),e.Q6J("ngIf",a.shared),e.xp6(1),e.Q6J("ngIf",s.isMobileDevice&&null!=a.exam.permissionObj),e.xp6(1),e.Q6J("ngIf",!s.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!s.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!s.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!s.isMobileWebView)}}function Vv(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Wv,26,33,"div",154),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.exam)}}const _m=function(n,o){return{"overflow-x-auto":n,"overflow-x-visible":o}},tl=function(n){return{"min-width":n}},pm=function(n,o){return{"ml-5":n,"ml-3":o}};function Xv(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",80)(1,"div",81)(2,"div",82)(3,"div",83)(4,"div",84),e.YNc(5,mv,1,0,"input",85),e.YNc(6,_v,1,1,"ng-template",null,86,e.W1O),e.TgZ(8,"div",87),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(9),e.ALo(10,"mytranslate"),e.TgZ(11,"div",88),e.O4$(),e.TgZ(12,"svg",89),e._UZ(13,"polyline",90),e.qZA(),e.TgZ(14,"svg",91),e._UZ(15,"polyline",92),e.qZA()()()(),e.YNc(16,pv,10,9,"div",93),e.YNc(17,hv,10,9,"div",93),e.YNc(18,gv,4,3,"div",93),e.YNc(19,fv,10,9,"div",93),e.qZA()(),e.kcU(),e.TgZ(20,"div",94),e.YNc(21,jv,27,36,"div",95),e.YNc(22,Vv,2,1,"ng-container",96),e.qZA(),e._UZ(23,"div",97),e.qZA()()}if(2&n){const t=e.MAs(7),i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngClass",e.WLB(19,_m,!i.isMobileDevice,i.isMobileDevice)),e.xp6(1),e.Q6J("ngStyle",e.VKq(22,tl,i.isMobileWebView?"":"1100px")),e.xp6(2),e.Q6J("ngClass",e.WLB(24,ns,!i.isMobileWebView,i.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",-1!=i.currentCategoryId&&(!i.shareType||"owner"==i.shareType))("ngIfElse",t),e.xp6(3),e.Q6J("ngClass",e.WLB(27,pm,!i.isMobileWebView,i.isMobileWebView)),e.xp6(1),e.hij(" ",e.lcZ(10,17,"lang_testbank_folder_and_file_name")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(30,go,1==(null==i.currentDocumentSortTypeObj?null:i.currentDocumentSortTypeObj.isAscSort)&&(null==i.currentDocumentSortTypeObj?null:i.currentDocumentSortTypeObj.isColumnSortType)==i.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.VKq(32,go,0==(null==i.currentDocumentSortTypeObj?null:i.currentDocumentSortTypeObj.isAscSort)&&(null==i.currentDocumentSortTypeObj?null:i.currentDocumentSortTypeObj.isColumnSortType)==i.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngStyle",e.VKq(34,tl,i.isMobileWebView?"":"1100px")),e.xp6(1),e.Q6J("ngForOf",i.categoryObjs),e.xp6(1),e.Q6J("ngForOf",i.documentObjs)}}const _u=function(n,o){return{"col-span-8":n,"col-span-12":o}};function e3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",82)(1,"div",83)(2,"div",84)(3,"div",190),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"div",88),e.O4$(),e.TgZ(7,"svg",89),e._UZ(8,"polyline",90),e.qZA(),e.TgZ(9,"svg",91),e._UZ(10,"polyline",92),e.qZA()()()(),e.kcU(),e.TgZ(11,"div",191)(12,"div",192)(13,"span",102),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(12,tl,t.isMobileWebView?"":"1100px")),e.xp6(2),e.Q6J("ngClass",e.WLB(14,ns,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.Q6J("ngClass",e.WLB(17,pm,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.hij(" ",e.lcZ(5,8,"lang_testbank_folder_and_file_name")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(20,go,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.VKq(22,go,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.WLB(24,_u,!t.isMobileWebView,t.isMobileWebView)),e.xp6(3),e.hij(" ",e.lcZ(15,10,"lang_testbank_folder_and_file_paths")," ")}}function t3(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",138),e.ALo(2,"mytranslate"),e._UZ(3,"path",139)(4,"path",140)(5,"path",141),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function n3(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",142),e._UZ(1,"path",143),e.qZA())}function i3(n,o){1&n&&(e.TgZ(0,"span",145),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}function o3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",198),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(2),l=e.MAs(38);return e.KtG(r.onContextMenu(a,s,l))}),e.O4$(),e.TgZ(1,"svg",147),e._UZ(2,"circle",50)(3,"circle",51)(4,"circle",52),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",!t.id||t.id<0||"user"==t.shareType)}}function a3(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function s3(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const r3=function(n){return{cursor:n}};function l3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",203)(1,"a",204),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG("DOC"!=s.type&&r.goToBreadPath(s))}),e.TgZ(2,"span",38,39),e.ALo(4,"mytranslate"),e.YNc(5,a3,3,3,"span",10),e.YNc(6,s3,2,1,"span",10),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(2).$implicit;e.Q6J("ngClass",e.VKq(10,du,t.id!=a.id)),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,r3,"DOC"!=t.type?"pointer":"default")),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,8,t.name)),e.Q6J("ngClass",e.VKq(14,mu,t.id!=a.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(3),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",-1!=t.id)}}function c3(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ol",199)(2,"li",200)(3,"a",201),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBackToAllCategoryPageEvent())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,l3,7,16,"li",202),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",t.paths)}}function u3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",193)(1,"div",194)(2,"div",195)(3,"div",111)(4,"div",112)(5,"div",196),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.handleOpenFolder(s))}),e.TgZ(6,"div",117),e.YNc(7,t3,6,3,"span",114),e.YNc(8,n3,2,0,"ng-template",null,137,e.W1O),e.qZA(),e.TgZ(10,"div",119,39),e.ALo(12,"mytranslate"),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.YNc(16,i3,3,3,"span",121),e.qZA()(),e.YNc(17,o3,5,1,"button",197),e.qZA(),e.TgZ(18,"div",191),e.YNc(19,c3,7,4,"ng-container",10),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.MAs(9),a=e.MAs(11),s=e.oxw(2),r=e.MAs(51),l=e.MAs(38);e.s9C("id","folder_"+t.id),e.Q6J("contextMenu",!t.id||t.id<0||"user"==t.shareType?r:l)("contextMenuValue",t),e.xp6(3),e.Q6J("ngClass",e.WLB(22,ns,!s.isMobileWebView,s.isMobileWebView)),e.xp6(2),e.Q6J("ngClass",e.WLB(25,mm,-1==t.id,-1!=t.id)),e.xp6(2),e.Q6J("ngIf",t.shared)("ngIfElse",i),e.xp6(3),e.s9C("matTooltip",e.lcZ(12,18,t.name)),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(3),e.Tol(s.isMobileWebView&&-1!=t.id?"azt-wv-item-name":""),e.xp6(1),e.Oqu(e.lcZ(15,20,t.name)),e.xp6(2),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",s.isMobileDevice&&-1!=t.id),e.xp6(1),e.Q6J("ngClass",e.WLB(28,_u,!s.isMobileWebView,s.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",null==t.paths?null:t.paths.length)}}function d3(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",169),e.ALo(1,"mytranslate"),e._UZ(2,"path",170)(3,"polyline",171)(4,"path",172),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function m3(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",169),e.ALo(1,"mytranslate"),e._UZ(2,"path",170)(3,"polyline",171),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function _3(n,o){if(1&n&&(e.TgZ(0,"span",173),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",t.exam.attended," ")}}function p3(n,o){1&n&&(e.TgZ(0,"div",174),e.O4$(),e.TgZ(1,"svg",175),e.ALo(2,"mytranslate"),e._UZ(3,"path",176)(4,"path",177)(5,"path",178),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function h3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",212),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2).$implicit,r=e.oxw(2),l=e.MAs(41);return e.KtG(r.onContextMenu(a,s.exam,l))}),e.O4$(),e.TgZ(1,"svg",147),e._UZ(2,"circle",50)(3,"circle",51)(4,"circle",52),e.qZA()()}}function g3(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function f3(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function x3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",203)(1,"a",214),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(5);return e.KtG("DOC"!=s.type&&r.goToBreadPath(s))}),e.TgZ(2,"span",38,39),e.ALo(4,"mytranslate"),e.YNc(5,g3,3,3,"span",10),e.YNc(6,f3,2,1,"span",10),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(3).$implicit;e.Q6J("ngClass",e.VKq(9,du,t.id!=a.exam.id)),e.xp6(2),e.s9C("matTooltip",e.lcZ(4,7,t.name)),e.Q6J("ngClass",e.VKq(11,mu,t.id!=a.exam.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(3),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",-1!=t.id)}}function b3(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ol",199)(2,"li",200)(3,"a",213),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.goBackToAllCategoryPageEvent())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,x3,7,13,"li",202),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",t.paths)}}function v3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",206)(1,"div",207)(2,"div",208)(3,"div",209),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.redirectByDocumentAction(a.exam,s.enumDocumentRedirectType.TESTED_LIST))}),e.TgZ(4,"div",112)(5,"div",210)(6,"div",160),e.YNc(7,d3,5,3,"svg",161),e.YNc(8,m3,4,3,"svg",162),e.qZA(),e.TgZ(9,"div",119,39)(11,"span"),e._uU(12),e.qZA(),e.YNc(13,_3,3,4,"span",163),e.qZA(),e.YNc(14,p3,6,3,"div",164),e.qZA()(),e.YNc(15,h3,5,0,"button",211),e.qZA(),e.TgZ(16,"div",191),e.YNc(17,b3,7,4,"ng-container",10),e.qZA()()()()}if(2&n){const t=e.MAs(10),i=e.oxw().$implicit,a=e.oxw(2),s=e.MAs(51),r=e.MAs(41);e.s9C("id","exam_"+i.exam.id),e.Q6J("contextMenu",!i.exam.permissionObj||a.commonService.isEmptyObj(i.exam.permissionObj)?s:r)("contextMenuValue",i.exam),e.xp6(3),e.Q6J("ngClass",e.WLB(18,ns,!a.isMobileWebView,a.isMobileWebView)),e.xp6(4),e.Q6J("ngIf",1==i.exam.isPublished),e.xp6(1),e.Q6J("ngIf",1!=i.exam.isPublished),e.xp6(1),e.s9C("matTooltip",i.exam.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.Gre("mb-0 d-block ",a.isMobileWebView?"azt-wv-item-name":"",""),e.xp6(1),e.Oqu(i.exam.name),e.xp6(1),e.Q6J("ngIf",a.isMobileWebView),e.xp6(1),e.Q6J("ngIf",i.shared),e.xp6(1),e.Q6J("ngIf",a.isMobileDevice&&null!=i.exam.permissionObj),e.xp6(1),e.Q6J("ngClass",e.WLB(21,_u,!a.isMobileWebView,a.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",null==i.paths?null:i.paths.length)}}function y3(n,o){if(1&n&&(e.ynx(0),e.YNc(1,v3,18,24,"div",205),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.exam)}}function w3(n,o){if(1&n&&(e.TgZ(0,"div",81)(1,"div",94),e.YNc(2,e3,16,27,"div",188),e.YNc(3,u3,20,31,"div",189),e.YNc(4,y3,2,1,"ng-container",96),e.qZA(),e._UZ(5,"div",97),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.WLB(5,_m,!t.isMobileDevice,t.isMobileDevice)),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,tl,t.isMobileWebView?"":"1100px")),e.xp6(1),e.Q6J("ngIf",!t.isMobileDevice),e.xp6(1),e.Q6J("ngForOf",t.categoryObjs),e.xp6(1),e.Q6J("ngForOf",t.documentObjs)}}function C3(n,o){if(1&n&&e._UZ(0,"azt-share",218),2&n){const t=e.oxw(2).$implicit;e.Q6J("objectCodeType",4)("objectCode","CATEGORY")("objectId",t.id)("categoryWithPermissionObj",t)}}function k3(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",219),e.qZA())}function T3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",220),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handleEditFolder(a))}),e.O4$(),e.TgZ(2,"svg",221),e._UZ(3,"path",222)(4,"path",223),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_buttom_edit")," "))}function A3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",224),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.acceptCopyAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"path",225)(4,"path",226),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function O3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",227),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.acceptCutAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"polyline",55)(4,"polyline",56)(5,"polyline",57)(6,"polyline",58)(7,"line",59)(8,"line",60),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()}2&n&&(e.xp6(9),e.hij(" ",e.lcZ(10,1,"lang_auto_cut")," "))}function S3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",228),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.handlePasteDataToFolder(a.id))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"rect",63)(4,"path",64),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_paste")," "))}function E3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",229),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cancelAllActionOfDocumentObjs())}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"circle",25)(4,"line",230)(5,"line",231),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_huy_copycut")," "))}function M3(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",219),e.qZA())}function I3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",232),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.acceptDeleteAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"path",66)(4,"path",67)(5,"path",68)(6,"line",69)(7,"line",70),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_buttom_delete")," "))}function L3(n,o){if(1&n&&(e.TgZ(0,"div",216)(1,"ul",16)(2,"li"),e.YNc(3,C3,1,4,"azt-share",217),e.ALo(4,"sharePermission"),e.qZA(),e.YNc(5,k3,2,0,"li",10),e.ALo(6,"fullPermission"),e.YNc(7,T3,7,3,"li",10),e.ALo(8,"editPermission"),e.YNc(9,A3,7,3,"li",10),e.ALo(10,"copyPermission"),e.YNc(11,O3,11,3,"li",10),e.ALo(12,"deletePermission"),e.YNc(13,S3,7,3,"li",10),e.ALo(14,"editPermission"),e.YNc(15,E3,8,3,"li",10),e.ALo(16,"editPermission"),e.YNc(17,M3,2,0,"li",10),e.ALo(18,"fullPermission"),e.YNc(19,I3,10,3,"li",10),e.ALo(20,"deletePermission"),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(3),e.Q6J("ngIf",e.xi3(4,9,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(6,12,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(8,15,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(10,18,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(12,21,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(14,24,1==i.hasCopyOrCutInClipboard()&&!i.checkPasteFunc(t.id)&&t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(16,27,i.hasCopyOrCutInClipboard()&&t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(18,30,t.permissionObj,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(20,33,t.permissionObj,"category"))}}function Z3(n,o){1&n&&(e.YNc(0,L3,21,36,"div",215),e.ALo(1,"editPermission")),2&n&&e.Q6J("ngIf",e.xi3(1,1,o.$implicit.permissionObj,"category"))}function P3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",238),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.doExamAction(a,s.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"circle",25)(4,"line",239)(5,"line",240),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_xem_noi_dung_de")," "))}function j3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",241),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.TESTED_LIST))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"path",242)(4,"circle",243)(5,"path",244)(6,"path",245),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function D3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",246),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.doExamAction(a,s.enumDocumentDoExamActionType.COPY_EXAM_LINK))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"path",247)(4,"path",248),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("cdkCopyToClipboard",i.getExamTestLink(t)),e.xp6(4),e.hij(" ",e.lcZ(6,2,"lang_auto_copy_link")," ")}}function N3(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",219),e.qZA())}function Q3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",249),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.CONFIG_EXAM))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"path",250)(4,"path",251)(5,"path",252)(6,"path",253)(7,"path",254)(8,"path",255)(9,"path",256)(10,"path",257)(11,"path",258)(12,"path",259)(13,"path",260)(14,"path",261)(15,"path",262)(16,"path",263),e.qZA(),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()}2&n&&(e.xp6(17),e.hij(" ",e.lcZ(18,1,"lang_auto_cai_dat")," "))}function q3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",264),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.EDIT_EXAM))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"path",265)(4,"path",266),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function F3(n,o){if(1&n&&(e.ynx(0),e.YNc(1,q3,7,3,"li",10),e.ALo(2,"isOfflineExamWithCustomMixMark"),e.ALo(3,"editPermission"),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.orcLogId)&&e.xi3(3,3,t.permissionObj,"exam"))}}function U3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",267),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.EDIT_EXAM))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"path",265)(4,"path",266),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function R3(n,o){if(1&n&&(e.YNc(0,U3,7,3,"li",10),e.ALo(1,"editPermission")),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",e.xi3(1,1,t.permissionObj,"exam"))}}function B3(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",62),e._UZ(2,"polyline",269),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.BQk()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function z3(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",62),e._UZ(2,"line",270)(3,"line",271),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.BQk()),2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function J3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",268),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.changePublishStatus(a,void 0,1==a.isPublished?0:1))}),e.YNc(2,B3,5,3,"ng-container",10),e.YNc(3,z3,6,3,"ng-container",10),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",0==t.isPublished),e.xp6(1),e.Q6J("ngIf",1==t.isPublished)}}function H3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",272),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.STATISTIC))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"path",273)(4,"path",274),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_thong_ke")," "))}function K3(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",219),e.qZA())}function $3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",275),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw();return e.KtG(s.acceptCopyAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",19),e._UZ(3,"rect",43)(4,"path",44),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function Y3(n,o){if(1&n&&(e.ynx(0),e.YNc(1,$3,7,3,"li",10),e.ALo(2,"copyPermission"),e.ALo(3,"isOfflineExamWithCustomMixMark"),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",e.xi3(2,1,e.lcZ(3,4,t.orcLogId)&&t.permissionObj,"exam"))}}function G3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",276),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,s=e.oxw();return e.KtG(s.acceptCopyAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",19),e._UZ(3,"rect",43)(4,"path",44),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function W3(n,o){if(1&n&&(e.YNc(0,G3,7,3,"li",10),e.ALo(1,"copyPermission")),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",e.xi3(1,1,t.permissionObj,"exam"))}}function V3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",277),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.acceptCutAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",19),e._UZ(3,"polyline",55)(4,"polyline",56)(5,"polyline",57)(6,"polyline",58)(7,"line",59)(8,"line",60),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()}2&n&&(e.xp6(9),e.hij(" ",e.lcZ(10,1,"lang_auto_cut")," "))}function X3(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",278),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.acceptDeleteAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",19),e._UZ(3,"path",66)(4,"path",67)(5,"path",68)(6,"line",69)(7,"line",70),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_buttom_delete")," "))}function ey(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",219),e.qZA())}const ty=function(n){return{"padding-bottom":n}};function ny(n,o){if(1&n&&(e.TgZ(0,"div",235)(1,"ul",16),e.YNc(2,P3,8,3,"li",10),e.ALo(3,"viewPermission"),e.YNc(4,j3,9,3,"li",10),e.ALo(5,"configAndViewPermission"),e.ALo(6,"configAndMarkPermission"),e.ALo(7,"viewPermission"),e.ALo(8,"configPermission"),e.YNc(9,D3,7,4,"li",10),e.ALo(10,"viewPermission"),e.ALo(11,"configPermission"),e.ALo(12,"isOfflineExam"),e.YNc(13,N3,2,0,"li",10),e.ALo(14,"editPermission"),e.ALo(15,"configPermission"),e.YNc(16,Q3,19,3,"li",10),e.ALo(17,"editPermission"),e.YNc(18,F3,4,6,"ng-container",114),e.ALo(19,"isOfflineExam"),e.YNc(20,R3,2,4,"ng-template",null,236,e.W1O),e.YNc(22,J3,4,2,"li",10),e.ALo(23,"editPermission"),e.YNc(24,H3,7,3,"li",10),e.ALo(25,"statisticalPermission"),e.YNc(26,K3,2,0,"li",10),e.ALo(27,"copyPermission"),e.ALo(28,"fullPermission"),e.ALo(29,"deletePermission"),e.YNc(30,Y3,4,6,"ng-container",114),e.ALo(31,"isOfflineExam"),e.YNc(32,W3,2,4,"ng-template",null,237,e.W1O),e.YNc(34,V3,11,3,"li",10),e.ALo(35,"fullPermission"),e.YNc(36,X3,10,3,"li",10),e.ALo(37,"deletePermission"),e.YNc(38,ey,2,0,"li",10),e.ALo(39,"configPermission"),e.qZA()()),2&n){const t=e.MAs(21),i=e.MAs(33),a=e.oxw().$implicit;e.xp6(1),e.Akn(e.VKq(77,ty,0!=a.isGlobalAzota&&a.isGlobalAzota?"7px":"46px")),e.xp6(1),e.Q6J("ngIf",e.xi3(3,17,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",(e.xi3(5,20,a.permissionObj,"exam")||e.xi3(6,23,a.permissionObj,"exam")||e.xi3(7,26,a.permissionObj,"exam")||e.xi3(8,29,a.permissionObj,"exam"))&&(0==a.isGlobalAzota||!a.isGlobalAzota)),e.xp6(5),e.Q6J("ngIf",(e.xi3(10,32,a.permissionObj,"exam")||e.xi3(11,35,a.permissionObj,"exam"))&&!e.lcZ(12,38,a.orcLogId)),e.xp6(4),e.Q6J("ngIf",(e.xi3(14,40,a.permissionObj,"exam")||e.xi3(15,43,a.permissionObj,"exam"))&&(0==a.isGlobalAzota||!a.isGlobalAzota)),e.xp6(3),e.Q6J("ngIf",e.xi3(17,46,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.lcZ(19,49,a.orcLogId))("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",e.xi3(23,51,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(25,54,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",(e.xi3(27,57,a.permissionObj,"exam")||e.xi3(28,60,a.permissionObj,"exam")||e.xi3(29,63,a.permissionObj,"exam"))&&(0==a.isGlobalAzota||!a.isGlobalAzota)),e.xp6(4),e.Q6J("ngIf",e.lcZ(31,66,a.orcLogId))("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",e.xi3(35,68,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(37,71,a.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(39,74,a.permissionObj,"exam")&&(0==a.isGlobalAzota||!a.isGlobalAzota))}}function iy(n,o){1&n&&e.YNc(0,ny,40,79,"div",234),2&n&&e.Q6J("ngIf",null!=o.$implicit.permissionObj)}function oy(n,o){1&n&&(e.TgZ(0,"li")(1,"a",281),e._uU(2),e.ALo(3,"mytranslate"),e.O4$(),e.TgZ(4,"svg",282),e._UZ(5,"polyline",283),e.qZA()()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_xem_them")," "))}function ay(n,o){if(1&n&&(e.TgZ(0,"div",280)(1,"ul",16),e.YNc(2,oy,6,3,"li",10),e.ALo(3,"configPermission"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",e.xi3(3,1,t.permissionObj,"exam"))}}function sy(n,o){1&n&&(e.YNc(0,ay,4,4,"div",279),e.ALo(1,"configPermission")),2&n&&e.Q6J("ngIf",e.xi3(1,1,o.$implicit.permissionObj,"exam"))}function ry(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",285),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.redirectByDocumentAction(a,s.enumDocumentRedirectType.POWER_POINT))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"path",286)(4,"polygon",287),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_insert_into_powerpoint")," "))}function ly(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",288),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.doExamAction(a,s.enumDocumentDoExamActionType.CONFIG_EXAM_CLASSROOM))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"rect",289)(4,"path",290),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_configuration_class")," "))}function cy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",291),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.doExamAction(a,s.enumDocumentDoExamActionType.SHARE_OFFLINE_RESULT))}),e.O4$(),e.TgZ(2,"svg",233),e._UZ(3,"path",292)(4,"polyline",171)(5,"path",293)(6,"path",294),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function uy(n,o){if(1&n&&(e.TgZ(0,"div",284)(1,"ul",16),e.YNc(2,ry,7,3,"li",10),e.ALo(3,"fullPermission"),e.YNc(4,ly,7,3,"li",10),e.ALo(5,"configPermission"),e.YNc(6,cy,9,3,"li",10),e.ALo(7,"fullPermission"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",e.xi3(3,3,t.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(5,6,t.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(7,9,t.permissionObj,"exam"))}}function dy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",295),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"rect",63)(4,"path",64),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_paste")," "))}function my(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",296),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cancelAllActionOfDocumentObjs())}),e.O4$(),e.TgZ(2,"svg",62),e._UZ(3,"circle",25)(4,"line",230)(5,"line",231),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_huy_copycut")," "))}function _y(n,o){if(1&n&&(e.TgZ(0,"div",216)(1,"ul",16),e.YNc(2,dy,7,3,"li",10),e.YNc(3,my,8,3,"li",10),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.hasCopyOrCutInClipboard()&&t.checkCurrentCatePastePermission()),e.xp6(1),e.Q6J("ngIf",t.hasCopyOrCutInClipboard())}}let py=(()=>{class n extends W.Q{checkCurrentCatePastePermission(){return this.permissionService.hasEditPermission("category",this.currentCategory?.permissionObj)}checkPasteFunc(t){return this.clipboardService.isPasteToSelfFolder(t)}sendReloadData(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.loadApiData.emit(!0)}hasCopyOrCutInClipboard(){return null!=this.clipboardService.getCurrentClipBoard().find(i=>i.action==vi.COPY||i.action==vi.CUT)}handleOpenFolder(t){this.goToChildCategoryPage.emit(t)}handleEditFolder(t){this.showEditFolderDialog.emit(t)}handleDeleteMultipleDocument(){this.changeHiddenStatusObj.emit(!0);var t=[];this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{t.push({id:i.id,type:i.type,action:vi.DELETE,documentType:"exam"})}),this.subscriptions.add(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(0,{copyOrCutObjs:t}).subscribe(i=>{i&&1==i.success?(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_xoa_tai_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)):(this.showErrorSnack(i.message??""),this.changeHiddenStatusObj.emit(!1))}))}handlePasteDataToFolder(t){if(-1==t)this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_de_thi_duoc_chia_se");else if(this.clipboardService.hasCopyFolderActionInClipboard())this.clipboardService.isPasteToSelfFolder(t)?this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_ban_dang_muon_copy"):this.dialog.open(j2,{disableClose:!0,width:"350px",data:{copyToCateId:t},restoreFocus:!1}).afterClosed().subscribe(r=>{!0===r&&(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData())});else{var i=[];this.clipboardService.getCurrentClipBoard().filter(s=>s.action==vi.COPY||s.action==vi.CUT).forEach(s=>{i.push({id:s.id,type:s.type,action:s.action,documentType:"exam"})}),this.changeHiddenStatusObj.emit(!0),this.subscriptions.add(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(t,{copyOrCutObjs:i}).subscribe(s=>{s&&1==s.success?(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)):(this.showErrorSnack(s.message??""),this.changeHiddenStatusObj.emit(!1))}))}}changePublishStatus(t,i,a){this.changeHiddenStatusObj.emit(!0),this.selectCurrentItem(t,i);let s=this.getFormValue().clipboardObjs.filter(l=>l.checked);var r={ids:s.filter(l=>l.type==Qn.EXAM).map(l=>l.id),categoryIds:s.filter(l=>l.type==Qn.EXAM_CATEGORY).map(l=>l.id),status:a};this.examService.apiExamPublishExamsPost(r).subscribe(l=>{1==l.success?this.successStatusObj(1==a?"lang_auto_xuat_ban_thanh_cong":"lang_auto_huy_xuat_ban_thanh_cong",!0):this.errorStatusObj(1==a?"lang_core_xuat_ban_de_thi_khong_thanh_cong":"lang_core_huy_xuat_ban_de_thi_khong_thanh_cong",!0),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)})}selectOrUnselectAllDocumentObjs(){this.form.controls.clipboardObjs.controls.forEach(t=>{t.controls.checked.setValue(this.getFormValue().isSelectAll)}),this.form.controls.isSelectAll.value||this.removeValueOfFormInClipboard()}acceptCopyAllDocumentObjs(t,i){this.selectCurrentItem(t,i),this.setValueOfFormToClipboard(vi.COPY);let a=this.getTotalSelectedItem(),s=this.commonService.myTranslateInstant("lang_auto_copy_thanh_cong"),r=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(s+" "+a+" "+r)}acceptCutAllDocumentObjs(t,i){this.selectCurrentItem(t,i),this.setValueOfFormToClipboard(vi.CUT);let a=this.getTotalSelectedItem(),s=this.commonService.myTranslateInstant("lang_auto_cut_thanh_cong"),r=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(s+" "+a+" "+r)}acceptDeleteAllDocumentObjs(t,i){this.selectCurrentItem(t,i);let a=this.getFormValue().clipboardObjs.filter(r=>r.checked);this.dialog.open(Q2,{data:{clipboardObjs:a},restoreFocus:!1}).afterClosed().subscribe(r=>{!0===r&&this.handleDeleteMultipleDocument()})}cancelAllActionOfDocumentObjs(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.form.controls.clipboardObjs.controls.forEach(t=>{t.controls.checked.setValue(!1)})}getClipboardFormGroupByExamCategory(t){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==t.id&&a.getRawValue().type==Qn.EXAM_CATEGORY)}isSelectedExamCategoryInClipboard(t){var i=this.getClipboardFormGroupByExamCategory(t);return i?.getRawValue().checked??!1}getClipboardFormGroupByExam(t){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==t.id&&a.getRawValue().type==Qn.EXAM)}isSelectedExamInClipboard(t){var i=this.getClipboardFormGroupByExam(t);return i?.getRawValue().checked??!1}removeValueOfFormInClipboard(){this.getFormValue().clipboardObjs.filter(t=>!t.checked).forEach(t=>{this.clipboardService.removeDocumentInClipboard(t.id,t.type)})}setValueOfFormToClipboard(t){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{this.clipboardService.setActionToClipboard(i.id,i.type,t,i.name)})}selectCurrentItem(t,i){null!=t?.id&&this.form.controls.clipboardObjs.controls.filter(s=>s.getRawValue().id==t.id&&s.getRawValue().type==Qn.EXAM).forEach(s=>{s.controls.checked.setValue(!0)}),null!=i?.id&&this.form.controls.clipboardObjs.controls.filter(r=>r.getRawValue().id==i.id&&r.getRawValue().type==Qn.EXAM_CATEGORY).forEach(r=>{r.controls.checked.setValue(!0)})}getFormValue(){return this.form.getRawValue()}initFormData(){this.shareType=this.backToData?.shareType??"",this.categoryObjs&&this.categoryObjs.length>0&&this.categoryObjs.forEach(t=>{if(t.id&&t.id>0){let i=this.clipboardService.hasInClipboard(t.id,Qn.EXAM_CATEGORY),a=new p.cw({id:new p.NI(t.id,{nonNullable:!0}),name:new p.NI(t.name??"",{nonNullable:!0}),type:new p.NI(Qn.EXAM_CATEGORY,{nonNullable:!0}),action:new p.NI(this.clipboardService.getActionOfDocumentObj(t.id,Qn.EXAM_CATEGORY)??vi.COPY,{nonNullable:!0}),checked:new p.NI(i,{nonNullable:!0})});i&&this.totalCheckboxSelected++,this.form.controls.clipboardObjs.push(a)}}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(t=>{if("exam"==t.type&&t.exam){let i=this.clipboardService.hasInClipboard(t.exam?.id??0,Qn.EXAM),a=new p.cw({id:new p.NI(t.exam.id??0,{nonNullable:!0}),name:new p.NI(t.exam.name??"",{nonNullable:!0}),type:new p.NI(Qn.EXAM,{nonNullable:!0}),action:new p.NI(this.clipboardService.getActionOfDocumentObj(t.exam?.id??0,Qn.EXAM)??vi.COPY,{nonNullable:!0}),checked:new p.NI(i,{nonNullable:!0})});this.form.controls.clipboardObjs.push(a)}})}getTotalSelectedItem(){return this.totalCheckboxSelected=this.form.getRawValue().clipboardObjs.filter(t=>t.checked).length,this.totalCheckboxSelected}getClassroomName(t){let i=[];return t.forEach(a=>{a.name&&!this.commonService.filterArray(i,a.name)&&i.push(a.name)}),i}getExamTestLink(t){return`${this.commonService.getCurrentDomain()}/de-thi/${t.hashId}`}goBackToAllCategoryPageEvent(){this.goBackToAllCategoryPage.emit()}backToParentCategoryEvent(t){this.backToParentCategory.emit(t)}goToBreadPath(t){this.backToParentCategory.emit(t)}doExamAction(t,i){this.documentDoExamActionService.doExamAction({categoryId:this.currentCategoryId,examObj:t},i).subscribe(s=>{s&&s.reloadData&&this.sendReloadData()})}redirectByDocumentAction(t,i){this.currentCategory?.isGlobalAzota||this.documentRedirectActionService.redirectByAction({examObj:t,categoryId:this.currentCategoryId,currentPage:this.currentPage,backToData:this.backToData},i)}sortDocumentByColumn(t,i){let s=this.documentSortActionService.sortExamByColumn({rootCategoryObjs:this.rootCategoryObjs,rootDocumentObjs:this.rootDocumentObjs,currentCategoryObjs:this.categoryObjs??[],currentDocumentObjs:this.documentObjs??[]},t,i=null==i||!i);this.categoryObjs=s.categoryObjs,this.documentObjs=s.documentObjs,this.currentDocumentSortTypeObj={isAscSort:i,isColumnSortType:t},this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.currentDocumentSortTypeObj))}onContextMenu(t,i,a){t&&a&&(this.contextMenuService.show(a,{value:i,x:t?.clientX+15,y:t?.clientY+15}),t?.preventDefault(),t?.stopPropagation())}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.initFormData()}),this.form.valueChanges.subscribe(i=>{this.getTotalSelectedItem()});let t=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("documentSort")??"");t&&this.sortDocumentByColumn(t.isColumnSortType,!t.isAscSort)}ngAfterViewInit(){this.contextMenuService.closeAll()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,s,r,l,c,d,f,y,O){super(),this.documentDoExamActionService=t,this.contextMenuService=i,this.activeRoute=a,this.dialog=s,this.clipboardService=r,this.browserStorageService=l,this.documentSortActionService=c,this.documentRedirectActionService=d,this.examCategoryService=f,this.permissionService=y,this.examService=O,this.rootCategoryObjs=[],this.rootDocumentObjs=[],this.isShowSearchResult=!1,this.currentPage=0,this.listBreadcrumb=[],this.goBackToAllCategoryPage=new e.vpe,this.backToParentCategory=new e.vpe,this.goToChildCategoryPage=new e.vpe,this.loadApiData=new e.vpe,this.changeHiddenStatusObj=new e.vpe,this.showEditFolderDialog=new e.vpe,this.currentDocumentSortTypeObj=void 0,this.enumDocumentSortType=ts,this.enumDocumentRedirectType=ta,this.enumDocumentDoExamActionType=es,this.currentCategoryId=0,this.totalCheckboxSelected=0,this.shareType="",this.form=new p.cw({clipboardObjs:new p.Oe([]),isSelectAll:new p.NI(!1,{nonNullable:!0,validators:[p.kI.required]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(W2),e.Y36(u.Lk),e.Y36(T.gz),e.Y36(j.uw),e.Y36(cm),e.Y36(we.z),e.Y36(V2),e.Y36(X2),e.Y36(Ve.F1),e.Y36(eo.$),e.Y36(Ve.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-and-exam-category-list"]],inputs:{rootCategoryObjs:"rootCategoryObjs",rootDocumentObjs:"rootDocumentObjs",categoryObjs:"categoryObjs",currentCategory:"currentCategory",documentObjs:"documentObjs",isShowSearchResult:"isShowSearchResult",backToData:"backToData",currentPage:"currentPage",listBreadcrumb:"listBreadcrumb"},outputs:{goBackToAllCategoryPage:"goBackToAllCategoryPage",backToParentCategory:"backToParentCategory",goToChildCategoryPage:"goToChildCategoryPage",loadApiData:"loadApiData",changeHiddenStatusObj:"changeHiddenStatusObj",showEditFolderDialog:"showEditFolderDialog"},features:[e.qOj],decls:52,vars:17,consts:[[1,"azt-file-manager"],[1,"mt-3","mb-3","h-auto","sm:h-10","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","folder-and-file-new-F58H12G9GB-",3,"click"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","flex flex-wrap items-center mt-3 sm:mt-0 mr-auto sm:mr-0",3,"ngClass",4,"ngIf"],[1,"table-zone",3,"contextMenu"],["class","box p-5 flex items-center","style","height: 300px;",4,"ngIf"],[4,"ngIf"],["DefaultDocumentTableTpl",""],["DocumentSearchResultTableTpl",""],["xPosition","before"],["publishUnPublishMenu","matMenu"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],["azt-track-service","folder-and-file-new-nfNbs0mOU",3,"click"],["azt-track-service","class-list-1UlnYstZqkD",1,"dropdown-item","w-full"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],["d","M2 13h10"],["d","m9 16 3-3-3-3"],["azt-track-service","folder-and-file-new-_o5A8FSGtM",3,"click"],["azt-track-service","class-list-WQiM5XgRgUI",1,"dropdown-item","w-full"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["basicMenuExamCategory",""],["contextMenuItem",""],["basicMenuExamFile",""],["contextMenuItem","",3,"subMenu"],["subMenuMove",""],[3,"disabled"],["basicMenuAll",""],["disableMenu",""],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","folder-and-file-new-emN2AGc-y20",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","flex-wrap","items-center","mt-3","sm:mt-0","mr-auto","sm:mr-0",3,"ngClass"],["class","inline-block mr-2",3,"ngClass",4,"ngIf"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-light","ml-2","block",2,"background-color","white",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],[1,"inline-block","mr-2",3,"ngClass"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["points","5 9 2 12 5 15"],["points","9 5 12 2 15 5"],["points","15 19 12 22 9 19"],["points","19 9 22 12 19 15"],["x1","2","y1","12","x2","22","y2","12"],["x1","12","y1","2","x2","12","y2","22"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-primary",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["width","84","height","84","viewBox","0 0 84 84","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M38.5 70H14C12.1435 70 10.363 69.2625 9.05025 67.9497C7.7375 66.637 7 64.8565 7 63V17.5C7 13.65 10.15 10.5 14 10.5H27.755C28.9079 10.506 30.0416 10.7966 31.0552 11.3462C32.0687 11.8957 32.9309 12.6871 33.565 13.65L36.435 17.85C37.0691 18.8129 37.9313 19.6043 38.9448 20.1538C39.9584 20.7034 41.092 20.994 42.245 21H70C71.8565 21 73.637 21.7375 74.9497 23.0503C76.2625 24.363 77 26.1435 77 28V42","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M59.5 70C65.299 70 70 65.299 70 59.5C70 53.701 65.299 49 59.5 49C53.701 49 49 53.701 49 59.5C49 65.299 53.701 70 59.5 70Z","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M73.5 73.5L68.25 68.25","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 26V44.3184M16 50V54.7432V50Z","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"font-medium","mt-2"],[3,"ngTemplateOutlet"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["class","form-check-input","type","checkbox","formControlName","isSelectAll",3,"change",4,"ngIf","ngIfElse"],["onShareFolder",""],["azt-track-service","folder-and-file-new-Fh5Xeywt4Vl",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["points","18 15 12 9 6 15"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","-mt-2",3,"ngClass"],["points","6 9 12 15 18 9"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"ngStyle","id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"change"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"disabled"],[1,"col-span-2"],["azt-track-service","folder-and-file-new-bTOV6xW1dIT",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"flex","mx-auto"],[1,"w-40"],["azt-track-service","folder-and-file-new-C81T6Hn4LB6",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"lg:w-auto","ml-auto"],["azt-track-service","folder-and-file-new-0OUTvRkSwMy",1,"flex","items-center","cursor-pointer","pl-10",3,"click"],[1,"whitespace-nowrap"],[1,"folder-item",3,"ngStyle","id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","py-3"],[1,"flex",2,"width","80vw","justify-content","space-between",3,"ngClass"],[1,"flex-none","flex","items-center"],[1,"flex","items-center"],[4,"ngIf","ngIfElse"],["normalCateCheckbox",""],["azt-track-service","folder-and-file-new-UCBI7ziYKss",1,"flex","items-center","clickable","sm:w-full","ml-3",2,"max-width","370px",3,"ngClass","click"],[1,"image-fit"],["normalCate",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-info text-white font-medium",4,"ngIf"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["class","hidden sm:block col-span-2",4,"ngIf"],["class","col-span-2 py-1",4,"ngIf"],["type","checkbox","disabled","",1,"form-check-input"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],["shareFolder",""],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"ngChange"],["xmlns","http://www.w3.org/2000/svg","version","1.0","fill","currentColor","width","16","height","16","viewBox","0 0 250.000000 250.000000","preserveAspectRatio","xMidYMid meet",1,"w-6","h-6","bi","bi-folder-fill"],["transform","translate(0.000000,250.000000) scale(0.100000,-0.100000)","fill","#485569","stroke","none"],["d","M305 2329 c-86 -20 -181 -113 -213 -208 -7 -19 -12 -78 -12 -133 0 -80 -4 -106 -21 -139 -30 -61 -33 -120 -15 -316 32 -335 45 -478 61 -668 30 -350 48 -409 148 -485 97 -73 68 -71 1023 -68 l849 3 49 23 c76 35 132 86 161 148 28 58 34 100 60 389 8 94 22 242 30 330 51 546 52 560 16 640 -32 73 -111 147 -181 170 -14 4 -200 11 -415 14 -466 7 -432 -2 -595 157 -72 70 -123 111 -160 128 l-55 26 -345 -1 c-190 -1 -363 -5 -385 -10z m735 -166 c40 -25 136 -120 129 -127 -2 -3 -214 -6 -469 -7 l-465 -1 3 23 c10 64 66 121 132 133 14 2 162 3 330 3 295 -2 306 -3 340 -24z m293 -395 c75 -23 116 -75 290 -378 222 -386 211 -363 211 -440 1 -107 -63 -201 -161 -236 -55 -19 -791 -19 -846 0 -57 21 -100 58 -132 117 -24 45 -30 65 -29 119 0 77 -11 54 211 440 171 297 215 355 285 377 46 15 123 15 171 1z"],["d","M1175 1641 c-17 -10 -39 -31 -50 -47 -21 -32 -85 -144 -85 -149 0 -2 18 -1 40 2 48 7 117 -17 148 -50 11 -12 58 -87 104 -167 83 -143 85 -145 122 -148 32 -3 43 2 77 36 36 36 39 44 39 93 0 50 -7 67 -83 199 -107 187 -126 215 -158 234 -37 22 -117 20 -154 -3z"],["d","M1044 1396 c-42 -19 -65 -51 -173 -240 -101 -177 -109 -207 -69 -277 31 -56 67 -69 193 -69 l106 0 -20 26 c-30 38 -44 90 -37 137 4 26 40 100 96 197 81 139 88 156 76 174 -36 55 -114 78 -172 52z"],["d","M1603 1153 c-6 -15 -23 -43 -37 -60 -42 -50 -101 -63 -292 -63 -180 0 -182 -1 -191 -68 -4 -27 1 -50 16 -80 35 -69 49 -72 303 -72 204 0 226 2 255 20 42 25 63 68 63 127 0 39 -9 64 -45 128 -57 100 -60 103 -72 68z"],["noShare",""],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","bi","bi-folder-fill",3,"matTooltip"],["d","M9.63852 2H13.62C14.7961 2 15.7183 3.00984 15.6118 4.18107L14.9755 11.1811C14.8818 12.2112 14.0181 13 12.9837 13H2.63653C1.60212 13 0.738391 12.2112 0.64474 11.1811L0.00837643 4.18107C-0.0356793 3.69646 0.0963746 3.23948 0.349653 2.87023L0.310097 2C0.310097 0.895431 1.20553 0 2.3101 0H5.98167C6.5121 0 7.02081 0.210714 7.39588 0.585787L8.22431 1.41421C8.59938 1.78929 9.10809 2 9.63852 2ZM1.31657 2.11964C1.52937 2.04231 1.75945 2 2.00016 2H7.39588L6.68878 1.29289C6.50124 1.10536 6.24689 1 5.98167 1H2.3101C1.76412 1 1.32033 1.43755 1.31027 1.98112L1.31657 2.11964Z","fill","currentColor"],["d","M2.5 12C2.5 12 2 12 2 11.5C2 11 2.5 9.5 5 9.5C7.5 9.5 8 11 8 11.5C8 12 7.5 12 7.5 12H2.5Z","fill","white"],["d","M5 9C5.82843 9 6.5 8.32843 6.5 7.5C6.5 6.67157 5.82843 6 5 6C4.17157 6 3.5 6.67157 3.5 7.5C3.5 8.32843 4.17157 9 5 9Z","fill","white"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","bi","bi-folder-fill"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-info","text-white","font-medium"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],[1,"hidden","sm:block","col-span-2"],[1,"flex-none","flex","items-center","mr-5"],[1,"w-80"],[1,"col-span-2","py-1"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],[1,"sm:hidden"],["class","exam-item",3,"ngStyle","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"ngStyle","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","hover:shadow-md","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],["azt-track-service","folder-and-file-new-aOxsvSWNL",1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","py-3"],["shareExam",""],["azt-track-service","folder-and-file-new-1sDCbpyZRKl",1,"flex","items-center","clickable","ml-3","w-52","sm:w-full",2,"max-width","370px",3,"click"],[1,"w-6","h-6","image-fit"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","folder-and-file-new-VLcxoWQErXD","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["class","col-span-2 pt-1",4,"ngIf"],["azt-track-service","folder-and-file-new-KfYanxx5uS","type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"ngChange"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-4","h-4","lucide","text-slate-200","dark:text-darkmode-400",2,"padding","3px",3,"matTooltip"],["d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"],["d","M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"],["azt-track-service","folder-and-file-new-VLcxoWQErXD",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],[1,"flex-none","block","sm:flex","items-center","mr-5"],[1,"inbox__item--highlight","mx-auto"],[1,"sm:hidden","pl-10"],[1,"inbox__item--highlight"],[1,"col-span-2","pt-1"],[1,"w-72","sm:w-full","truncate"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","p-5 text-slate-500 border-b border-slate-200/60",3,"ngStyle",4,"ngIf"],["class","folder-item",3,"id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],["azt-track-service","folder-and-file-new-d3FNMrhtn",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[3,"ngClass"],[1,"flex-none","flex","items-center","mr-5","cursor-pointer"],[1,"folder-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3"],["azt-track-service","folder-and-file-new-LEqGYkiB5A",1,"flex","items-center","clickable","sm:w-full","ml-3",2,"max-width","370px",3,"ngClass","click"],["azt-track-service","folder-and-file-new-SpIrsSy8AO","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","folder-and-file-new-SpIrsSy8AO",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],[1,"breadcrumb","flex","flex-wrap","wrapLineBreadcumb","mt-2",2,"line-height","1.25rem","margin-left","5px"],[1,"breadcrumb-item","active"],["azt-track-service","folder-and-file-new-6Dvcjt22Hl",1,"ml-2",3,"click"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],["azt-track-service","folder-and-file-new-SGhP4bd0pB",1,"truncate","w-64","sm:w-auto",2,"max-width","100%","display","block",3,"ngStyle","click"],["class","exam-item",3,"id","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3",2,"cursor","default"],["azt-track-service","folder-and-file-new-YTfsN0EpmC",1,"flex",2,"width","80vw","justify-content","space-between",3,"ngClass","click"],[1,"flex","items-center","clickable","ml-3","w-52","sm:w-full",2,"max-width","370px"],["azt-track-service","folder-and-file-new-21AjY4IME3","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-21AjY4IME3",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],["azt-track-service","folder-and-file-new-FGP7Q6Rvcl",1,"ml-2",3,"click"],["azt-track-service","folder-and-file-new-QqjAwW1BnH",1,"truncate","w-64","sm:w-auto",2,"max-width","100%","display","block",3,"click"],["class","dropdown-menu show w-60 relative p-3",4,"ngIf"],[1,"dropdown-menu","show","w-60","relative","p-3"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj",4,"ngIf"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-dngdKwgVYql",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],["d","M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],["azt-track-service","folder-and-file-new-dMvAkRVjW8P",1,"dropdown-item",3,"click"],["d","M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],["d","M2 8v11c0 1.1.9 2 2 2h14"],["azt-track-service","folder-and-file-new-Eqyg7w3RWjc",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hh3aACvDlTx",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-dpksjYyWqXr",1,"dropdown-item",3,"click"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["azt-track-service","folder-and-file-new-73z5tojbR5l",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["class","dropdown-menu w-60 show relative p-3","style"," margin-bottom: -48px;",4,"ngIf"],[1,"dropdown-menu","w-60","show","relative","p-3",2,"margin-bottom","-48px"],["isOnlineExam",""],["isOnlineExamCopy",""],["azt-track-service","folder-and-file-new-saSjFTRviTc",1,"dropdown-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","folder-and-file-new-0TxDH9uhI5N",1,"dropdown-item",3,"click"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["azt-track-service","folder-and-file-new-Yrb2Iei9P3i",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["azt-track-service","folder-and-file-new-imOSjqX7qwB",1,"dropdown-item",3,"click"],["d","M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],["d","M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],["d","M12 2v2"],["d","M12 22v-2"],["d","m17 20.66-1-1.73"],["d","M11 10.27 7 3.34"],["d","m20.66 17-1.73-1"],["d","m3.34 7 1.73 1"],["d","M14 12h8"],["d","M2 12h2"],["d","m20.66 7-1.73 1"],["d","m3.34 17 1.73-1"],["d","m17 3.34-1 1.73"],["d","m11 13.73-4 6.93"],["azt-track-service","folder-and-file-new-Rw0wdgMyIG",1,"dropdown-item",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","folder-and-file-new-yU7FoiHf8nE",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-IFDWsvZh0l2",1,"dropdown-item",3,"click"],["points","20 6 9 17 4 12"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["azt-track-service","folder-and-file-new-nI3PRUcmMOn",1,"dropdown-item",3,"click"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","folder-and-file-new-oIFmeRUYHl",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-f1MqcshOTmu",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-z4nXVrVuy-s",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-LM51mwt6vZ2",1,"dropdown-item",3,"click"],["class","dropdown-menu show relative p-3","style","margin-top: -28px",4,"ngIf"],[1,"dropdown-menu","show","relative","p-3",2,"margin-top","-28px"],[1,"dropdown-item",2,"cursor","default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-auto"],["points","9 18 15 12 9 6"],[1,"dropdown-menu","show","w-56","relative",2,"margin-left","-5px"],["azt-track-service","folder-and-file-new-PIBIuTYB0c1",1,"dropdown-item",3,"click"],["d","M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],["points","12 15 17 21 7 21 12 15"],["azt-track-service","folder-and-file-new-1pfCD5AevZz",1,"dropdown-item",3,"click"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["azt-track-service","folder-and-file-new-U8OX6yR8aix",1,"dropdown-item",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","folder-and-file-new-wPbmJ8sZGAH",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-or8esZsCIRc",1,"dropdown-item",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),e.NdJ("click",function(){return i.goBackToAllCategoryPageEvent()}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.YNc(8,nv,8,17,"li",6),e.qZA()(),e.YNc(9,cv,16,11,"div",7),e.qZA(),e.TgZ(10,"div",8),e.YNc(11,uv,10,3,"div",9),e.YNc(12,dv,2,1,"ng-container",10),e.qZA()(),e.YNc(13,Xv,24,36,"ng-template",null,11,e.W1O),e.YNc(15,w3,6,10,"ng-template",null,12,e.W1O),e.TgZ(17,"mat-menu",13,14)(19,"div",15)(20,"ul",16)(21,"li",17),e.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,1)}),e.TgZ(22,"button",18),e.O4$(),e.TgZ(23,"svg",19),e._UZ(24,"path",20)(25,"path",21)(26,"path",22),e.qZA(),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(29,"li",23),e.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,0)}),e.TgZ(30,"button",24),e.O4$(),e.TgZ(31,"svg",19),e._UZ(32,"circle",25)(33,"path",26)(34,"path",27),e.qZA(),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()()()()(),e.kcU(),e.TgZ(37,"context-menu",null,28),e.YNc(39,Z3,2,4,"ng-template",29),e.qZA(),e.TgZ(40,"context-menu",null,30),e.YNc(42,iy,1,1,"ng-template",29),e.YNc(43,sy,2,4,"ng-template",31),e.TgZ(44,"context-menu",null,32),e.YNc(46,uy,8,12,"ng-template",29),e.qZA()(),e.TgZ(47,"context-menu",33,34),e.YNc(49,_y,4,2,"ng-template",29),e.qZA(),e._UZ(50,"context-menu",33,35)),2&t){const a=e.MAs(45),s=e.MAs(48);e.xp6(6),e.hij(" ",e.lcZ(7,11,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",i.listBreadcrumb),e.xp6(1),e.Q6J("ngIf",-1!=i.currentCategoryId&&(i.totalCheckboxSelected>0||i.hasCopyOrCutInClipboard())),e.xp6(1),e.Q6J("contextMenu",s),e.xp6(1),e.Q6J("ngIf",0==(null==i.categoryObjs?null:i.categoryObjs.length)&&0==(null==i.documentObjs?null:i.documentObjs.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==i.categoryObjs?null:i.categoryObjs.length)||0!=(null==i.documentObjs?null:i.documentObjs.length)),e.xp6(15),e.hij(" ",e.lcZ(28,13,"lang_auto_xuat_ban")," "),e.xp6(8),e.hij(" ",e.lcZ(36,15,"lang_testbank_offline_test_cancel_publish")," "),e.xp6(8),e.Q6J("subMenu",a),e.xp6(4),e.Q6J("disabled",!i.hasCopyOrCutInClipboard()),e.xp6(3),e.Q6J("disabled",!0)}},dependencies:[M.mk,M.sg,M.O5,M.tP,M.PC,ea.i3,en.VK,en.p6,Zt.gM,p._Y,p.Wl,p.JJ,p.JL,p.sg,p.u,p.CE,Bt.M,ho.Q,el.I,u.lB,u.GI,u.n5,M.OU,re.bT,re.Gf,re.BU,re.vL,re.Pz,re.Jx,re.I$,re.El,re.cW,re.QE,re.HU,re.r,re._W,re.tO],encapsulation:2}),n})();function hy(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function gy(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",45)(1,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goToSyncExamByFolderPage(a.currentCategoryId))}),e.O4$(),e.TgZ(2,"svg",47),e._UZ(3,"path",48)(4,"path",49)(5,"path",50),e.qZA()()()}}const fy=function(n,o){return{"md:col-span-3":n,"md:col-span-4":o}};function xy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"form",9),e.O4$(),e.TgZ(5,"svg",10),e._UZ(6,"circle",11)(7,"line",12),e.qZA(),e.kcU(),e.TgZ(8,"input",13),e.NdJ("enterKey",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.searchDocument())}),e.ALo(9,"mytranslate"),e.qZA()()(),e.TgZ(10,"div",14)(11,"div",15)(12,"azt-permission-checking",16)(13,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToMatrixExamPage())}),e.O4$(),e.TgZ(14,"svg",18),e._UZ(15,"line",19)(16,"line",20)(17,"line",21)(18,"line",22)(19,"line",23)(20,"polygon",24),e.qZA(),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()(),e.kcU(),e.TgZ(23,"div",25)(24,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToCreateExamPage(a.currentCategoryId))}),e.O4$(),e.TgZ(25,"svg",27),e._UZ(26,"line",28)(27,"line",29),e.qZA(),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(30,"div",25)(31,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showAddFolderDialog())}),e.O4$(),e.TgZ(32,"svg",31),e._UZ(33,"path",32)(34,"line",33)(35,"line",34),e.qZA(),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.YNc(38,gy,6,0,"div",35),e.qZA()(),e.kcU(),e._UZ(39,"app-exam-recommend-list",36),e.TgZ(40,"div",37)(41,"app-exam-and-exam-category-list",38),e.NdJ("goToChildCategoryPage",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.goToChildCategoryPage(a))})("showEditFolderDialog",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.showEditFolderDialog(a))})("goBackToAllCategoryPage",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goBackToAllCategoryPage())})("backToParentCategory",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.backToParentCategory(a))})("loadApiData",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.reloadApi())})("changeHiddenStatusObj",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.changeHiddenStatusObj(a))}),e.qZA()(),e.TgZ(42,"div",39)(43,"div",40)(44,"azt-paging",41),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.goToPage(a))}),e.qZA()(),e.TgZ(45,"div",42)(46,"p",43),e._uU(47),e.ALo(48,"number"),e.ALo(49,"mytranslate"),e.qZA()(),e.TgZ(50,"div",44)(51,"p",43),e._uU(52),e.ALo(53,"number"),e.ALo(54,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.Q6J("hidden",!0===t.hiddenStatus.isHidden),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.s9C("placeholder",e.lcZ(9,27,"lang_testbank_test_list_search_document")),e.xp6(3),e.Q6J("ngClass",e.WLB(43,fy,t.userService.isTestMarketAdminRole(),!t.userService.isTestMarketAdminRole())),e.xp6(1),e.Q6J("applyType","MATRIX_QUESTION"),e.xp6(1),e.Q6J("disabled","user"==(null==t.backToData?null:t.backToData.shareType)||-1==t.currentCategoryId),e.xp6(8),e.hij(" ",e.lcZ(22,29,"lang_testbank_test_list_create_new_from_matrix_bank")," "),e.xp6(3),e.Q6J("disabled","user"==(null==t.backToData?null:t.backToData.shareType)||-1==t.currentCategoryId),e.xp6(4),e.hij(" ",e.lcZ(29,31,"lang_testbank_test_list_create_new")," "),e.xp6(3),e.Q6J("disabled","user"==(null==t.backToData?null:t.backToData.shareType)||-1==t.currentCategoryId),e.xp6(5),e.hij(" ",e.lcZ(37,33,"lang_auto_tao_thu_muc")," "),e.xp6(2),e.Q6J("ngIf",t.userService.isTestMarketAdminRole()),e.xp6(1),e.Q6J("categoryId",t.currentCategoryId)("recommendExamObjs",t.recommendExamObjs),e.xp6(2),e.Q6J("rootCategoryObjs",t.cloneCategoryObjs)("rootDocumentObjs",t.cloneDocumentObjs)("categoryObjs",t.categoryObjs)("documentObjs",t.documentObjs)("backToData",t.backToData)("currentPage",t.currentPage)("currentCategory",t.currentCategory)("isShowSearchResult",t.isShowSearchResult)("listBreadcrumb",t.listBreadcrumb),e.xp6(3),e.Q6J("totalPaginationPage",t.totalPage)("paging",t.currentPage),e.xp6(3),e.Oqu(e.lcZ(48,35,t.totalExam)+" "+e.lcZ(49,37,"lang_testbank_test_list_document")),e.xp6(5),e.Oqu(e.lcZ(53,39,t.totalExam)+" "+e.lcZ(54,41,"lang_testbank_test_list_document"))}}let by=(()=>{class n extends W.Q{goToPage(t){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+t,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+t)}resetSearchForm(){this.form.patchValue({searchContent:""}),this.isShowSearchResult=!1}convertExamObj(t){var i=[];return t.forEach(a=>{a.exam?i.push({name:a.exam.name,updatedAt:a.exam.updatedAt,createdAt:a.exam.createdAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,shared:a.shared,type:"exam",paths:a.paths,isGlobalAzota:0}):a.homework&&i.push({name:a.homework.name,type:"homework",createdAt:a.homework.createdAt,updatedAt:a.homework.updatedAt,attended:a.homework.count,isPublished:a.homework.isPublished,homework:a.homework,shared:a.shared,paths:a.paths,isGlobalAzota:0})}),i}convertRecommendExamObjs(t){var i=[];return t.forEach(a=>{if(a.exam){var s={id:a.exam.id,hashId:a.exam.hashId,name:a.exam.name,deadline:a.exam.endTime,delivery:this.getClassroomName(a.exam.classrooms??[]),type:"exam",createdAt:a.exam.createdAt,submitted:a.exam.attended,exam:a.exam};i.push(s)}else a.homework&&i.push(s={id:a.homework.id,hashId:a.homework.hashId,classroomId:a.homework.classroomId,name:a.homework.name,type:"homework",delivery:[a.homework.className??""],createdAt:a.homework.createdAt,deadline:a.homework.deadline,submitted:a.homework.count,total:a.homework.totalStudent,homework:a.homework})}),i}showAddFolderDialog(){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:this.currentCategoryId,examCategoryObj:void 0},Ds.ADD_FOLDER).subscribe(t=>{t?.reloadData&&this.getData()})}showEditFolderDialog(t){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:0,examCategoryObj:t},Ds.EDIT_FOLDER).subscribe(i=>{i?.reloadData&&this.getData()})}goBackToAllCategoryPage(){this.commonService.getFormObj(this.form).searchContent?(this.resetSearchForm(),0==this.currentCategoryId?this.getData():this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}backToParentCategory(t){t.id!=this.currentCategoryId&&(this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+t.id+"/1",t.shareType?"?data="+this.commonService.serializeJson({shareType:t.shareType,backTo:`/admin/testbank/document-management/0/${this.currentCategoryId}/1`,suggest:t.isGlobalAzota&&t.isGlobalAzota>1?1:0}):""))}goToChildCategoryPage(t){this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+t.id+"/1",t.shareType?"?data="+this.commonService.serializeJson({shareType:t.shareType,suggest:t.isGlobalAzota&&0!=t.isGlobalAzota?1:0}):"")}goToCreateExamPage(t){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.currentPage}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/create-new-document/"+(t??0),"?backto="+encodeURIComponent(i))}goToMatrixExamPage(){let t=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.currentPage}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.currentCategoryId+"/1","?backto="+encodeURIComponent(t))}goToSyncExamByFolderPage(t){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.currentPage}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/sync-folder/"+(t??0),"?backto="+encodeURIComponent(i))}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetBreadcrumbsGet(this.currentCategoryId,this.backToData?.shareType??"","new").subscribe(t=>{if(t&&1==t.success){var i=[];t.data?.objs&&t.data?.objs.forEach(a=>{i.push({...a,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]})}),this.listBreadcrumb=i;for(let a=0;a<this.listBreadcrumb?.length;a++)if(this.listBreadcrumb[a].id==this.currentCategoryId){let s="",r=0,l=0;0!=this.listBreadcrumb[a].isGlobalAzota&&(l=1),!this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(s=0!=this.listBreadcrumb[a].isGlobalAzota?"":"user",r=a>1?this.listBreadcrumb[a-1].id??-1:0==a&&0!=this.listBreadcrumb[a].isGlobalAzota?0:this.listBreadcrumb[a].parentId??this.listBreadcrumb[a].tenantId??-1):this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(s=a>1?this.listBreadcrumb[a-1].shareType??"":a<=1&&0!=this.listBreadcrumb[a].isGlobalAzota?this.listBreadcrumb[a].shareType??"":"",r=this.listBreadcrumb[a].parentId??-1):r=this.listBreadcrumb[a].parentId??0;let c=r?`/admin/testbank/document-management/0/${r}/1`+(this.backToData?"?data="+this.commonService.serializeJson({shareType:s}):""):"/admin/testbank/document-management/0/0/1";this.backToLink=this.commonService.serializeJson({shareType:s,backTo:c,suggest:l})}}else this.showErrorSnack(t.message??"")}))}getRecommendExamObjs(){var t=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.currentPage=t>0?t:1,this.subscriptions.add(this.documentService.apiDocumentsGet(this.currentCategoryId?this.currentCategoryId:void 0,"file",this.backToData?.suggest&&this.backToData?.shareType?this.backToData?.shareType:"owner","exam",void 0,void 0,this.backToData?.suggest,void 0,this.currentPage,4).subscribe(i=>{i&&1==i.success?(this.recommendExamObjs=this.convertRecommendExamObjs(i.data?.documentObjs??[]),this.stopStatusObj()):this.showErrorSnack(i.message??"")}))}getClassroomName(t){var i=[];return t.forEach(a=>{a.name&&!this.commonService.filterArray(i,a.name)&&i.push(a.name)}),i}searchDocument(){let t=this.commonService.getFormObj(this.form);this.isShowSearchResult=!!t.searchContent,this.currentPage=1,this.initStatusObj(),this.subscriptions.add(this.documentService.apiDocumentsGet(0!=this.currentCategoryId?this.currentCategoryId:0,void 0,this.backToData?.shareType??"","exam",void 0,t.searchContent,void 0,void 0,this.currentPage).subscribe(i=>{if(i&&1==i.success){var a=this.commonService.castJsonToClassObjs(lm.Y,JSON.stringify(i.data?.documentObjs??[]))??[],s=this.convertExamObj(a);this.documentObjs=s,this.cloneDocumentObjs=s,this.categoryObjs=i.data?.categoryObjs,this.cloneCategoryObjs=i.data?.categoryObjs??[],this.totalExam=i.data?.total??0,this.totalPage=this.totalExam%this.itemPerPage>0?(this.totalExam-this.totalExam%this.itemPerPage)/this.itemPerPage+1:this.totalExam>0?this.totalExam/this.itemPerPage:1,this.stopStatusObj()}else this.showErrorSnack(i.message??"")}))}getData(){var t=Number(this.commonService.getMyParam(this.activeRoute,"page"));let i=this.commonService.getFormObj(this.form);this.currentPage=t>0?t:1,this.initStatusObj(),this.subscriptions.add(this.documentService.apiDocumentsGet(0!=this.currentCategoryId?this.currentCategoryId:0,void 0,this.backToData?.shareType??"","exam",void 0,this.isShowSearchResult?i.searchContent:void 0,void 0,void 0,this.currentPage).subscribe(a=>{if(a&&1==a.success){var s=this.commonService.castJsonToClassObjs(lm.Y,JSON.stringify(a.data?.documentObjs??[]))??[],r=this.convertExamObj(s);if(this.documentObjs=r,this.cloneDocumentObjs=r,this.categoryObjs=a.data?.categoryObjs,this.cloneCategoryObjs=a.data?.categoryObjs??[],this.currentCategory=a.data?.currentCategory?{...a.data?.currentCategory,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}:void 0,this.totalExam=a.data?.total??0,this.totalPage=this.totalExam%this.itemPerPage>0?(this.totalExam-this.totalExam%this.itemPerPage)/this.itemPerPage+1:this.totalExam>0?this.totalExam/this.itemPerPage:1,this.getListParentCategoryObjs(),0==this.currentCategoryId)this.recommendExamObjs=[],this.getRecommendExamObjs();else{let l=this.categoryObjs?.filter(c=>c.id==this.currentCategoryId);console.log(l),l?.length&&l[0].isGlobalAzota?(this.recommendExamObjs=[],this.getRecommendExamObjs()):(this.recommendExamObjs=[],this.stopStatusObj())}}else this.showErrorSnack(a.message??"")}))}reloadApi(){this.getData()}changeHiddenStatusObj(t){t?this.startHiddenObj():this.stopHiddenObj()}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/0/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_EXAM"),this.aztShareService.currentMessage.subscribe(i=>{this.getData()})}),this.subscriptions.add(this.router.events.subscribe(t=>{t instanceof T.m2&&(this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/0/0/1":"/admin/dashboard")}),this.getData())})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,s,r,l,c,d,f,y){super(),this.fb=t,this.activeRoute=i,this.examCategoryService=a,this.documentService=s,this.aztShareService=r,this.mobileWebviewService=l,this.router=c,this.dialog=d,this.userService=f,this.documentDoExamCategoryActionService=y,this.form=new p.nJ({}),this.isShowSearchResult=!1,this.currentPage=1,this.itemPerPage=24,this.totalPage=1,this.totalExam=0,this.recommendExamObjs=[],this.documentObjs=[],this.cloneDocumentObjs=[],this.cloneCategoryObjs=[],this.listBreadcrumb=[],this.currentCategoryId=0,this.backToLink="",this.form=this.fb.group({searchContent:new p.p4("",p.kI.required)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(Ve.F1),e.Y36(t2.Z),e.Y36(n2.f),e.Y36(Gr.F),e.Y36(T.F0),e.Y36(j.uw),e.Y36(Qe.K),e.Y36(_2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-exam-management-list"]],features:[e.qOj],decls:6,vars:4,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],[4,"ngIf","ngIfElse"],[3,"hidden"],["doneLoading",""],[1,"grid","grid-cols-12","gap-6","mt-8",3,"hidden"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","relative","mr-auto","mt-3","sm:mt-0"],[3,"formGroup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","absolute","my-auto","inset-y-0","ml-3","left-0","z-10","text-slate-500"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","formControlName","searchContent",1,"form-control","w-full","sm:w-72","box","px-10",3,"placeholder","enterKey"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","lg:col-span-6",3,"ngClass"],[3,"applyType"],["azt-track-service","document-management-vOye2ZDtJ",1,"btn","btn-info","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","24","viewBox","0 0 20 20","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2"],["x1","3","y1","22","x2","21","y2","22"],["x1","6","y1","18","x2","6","y2","11"],["x1","10","y1","18","x2","10","y2","11"],["x1","14","y1","18","x2","14","y2","11"],["x1","18","y1","18","x2","18","y2","11"],["points","12 2 20 7 4 7"],[1,"col-span-12","md:col-span-4","lg:col-span-3"],["azt-track-service","document-management-PLy5-QC0gDH",1,"btn","btn-success","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","document-management-Pe6lKHXLhm_",1,"btn","btn-primary","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6","mr-2"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],["x1","12","y1","10","x2","12","y2","16"],["x1","9","y1","13","x2","15","y2","13"],["class","col-span-2 md:col-span-1",4,"ngIf"],[3,"categoryId","recommendExamObjs"],[1,"azt-view-file-manager"],[3,"rootCategoryObjs","rootDocumentObjs","categoryObjs","documentObjs","backToData","currentPage","currentCategory","isShowSearchResult","listBreadcrumb","goToChildCategoryPage","showEditFolderDialog","goBackToAllCategoryPage","backToParentCategory","loadApiData","changeHiddenStatusObj"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"totalPaginationPage","paging","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"col-span-2","md:col-span-1"],["azt-track-service","document-management-FeigO5kRW",1,"btn","btn-danger","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.NdJ("contextmenu",function(){return!1}),e.YNc(2,hy,1,0,"azt-loading-effect",2),e._UZ(3,"azt-loading-effect",3),e.YNc(4,xy,55,46,"ng-template",null,4,e.W1O),e.qZA()()),2&t){const a=e.MAs(5);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(1),e.Q6J("hidden",!0!==i.hiddenStatus.isHidden)}},dependencies:[M.mk,M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,jt.Q,Vr.L,Bt.M,g2,Wr,pn._,L2,py,M.JJ,re.bT],encapsulation:2}),n})();function vy(n,o){1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}const yy=function(n){return[n]},wy=function(n){return{backto:n}};function Cy(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"a",18),e.ALo(2,"localize"),e._UZ(3,"azt-file-item",19),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("routerLink",e.lcZ(2,5,e.VKq(7,yy,"/admin/testbank/homework-results-list/"+(null==t.homework?null:t.homework.classroomId)+"/"+(null==t.homework?null:t.homework.id)+"/"+(null==t.homework?null:t.homework.hashId))))("queryParams",e.VKq(9,wy,"/admin/testbank/document-management/1/"+i.currentCategoryId+"/1")),e.xp6(2),e.Q6J("dataObj",t)("showByClass",!0)("viewType","classroom")}}function ky(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",15),e.YNc(2,Cy,4,11,"div",16),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.recommendExamObjs)}}function Ty(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_classroom_list_not_found_homework")))}const Ay=function(n){return{cursor:n}};function Oy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6,7),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.goToClassroomDetailPage(s))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.YNc(7,vy,3,3,"span",8),e.ALo(8,"fullPermission"),e.TgZ(9,"div",9)(10,"button",10),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewAllDocumentObjsOfClassroom(s))}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",11),e.YNc(14,ky,3,1,"div",12),e.YNc(15,Ty,3,3,"ng-template",null,13,e.W1O),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(4),a=e.MAs(16);e.xp6(3),e.s9C("matTooltip",t.name),e.Q6J("ngStyle",e.VKq(16,Ay,t.id?"pointer":"default"))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(6,9,t.name)," "),e.xp6(2),e.Q6J("ngIf",!e.xi3(8,11,t.permissionObj,"classroom")),e.xp6(4),e.hij(" ",e.lcZ(12,14,"lang_auto_xem_tat_ca")," "),e.xp6(3),e.Q6J("ngIf",t.recommendExamObjs&&t.recommendExamObjs.length>0)("ngIfElse",a)}}let Sy=(()=>{class n extends W.Q{goToClassroomDetailPage(t){t.id&&this.commonService.myNavigationWithQueryString("/admin/student/class-details/"+t.id,"?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`))}viewAllDocumentObjsOfClassroom(t){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+t.id+"/1","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`))}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page"))}),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"})}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i){super(),this.activeRoute=t,this.dialog=i,this.classroomWithHomeworkObjs=[],this.searchKey="",this.currentCategoryId=0,this.currentPage=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-classroom-list"]],inputs:{classroomWithHomeworkObjs:"classroomWithHomeworkObjs",searchKey:"searchKey"},features:[e.qOj],decls:3,vars:1,consts:[["id","contentent-view-2"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3"],[1,"box",2,"height","100%"],[1,"flex","items-center","p-2","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-classes-b2nw0JUA5LF",1,"font-medium","truncate","text-md",2,"max-width","40%",3,"ngStyle","matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-auto"],["azt-track-service","folder-and-classes-jpGtWYvPZzj",1,"btn","btn-outline-primary","btn-transparent","p-2",3,"click"],[1,"p-3"],[4,"ngIf","ngIfElse"],["noDocumentData",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12",4,"ngFor","ngForOf"],[1,"col-span-12"],["azt-track-service","folder-and-classes-M4tBKNEyrqt",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-3","text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Oy,17,18,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",i.classroomWithHomeworkObjs))},dependencies:[T.rH,M.sg,M.O5,M.PC,Zt.gM,ru,ho.Q,xa.lO,re.bT,re.Gf],encapsulation:2}),n})();function Ey(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function My(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"form",8),e.O4$(),e.TgZ(5,"svg",9),e._UZ(6,"circle",10)(7,"line",11),e.qZA(),e.kcU(),e.TgZ(8,"input",12),e.NdJ("enterKey",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.searchClassroom())}),e.ALo(9,"mytranslate"),e.qZA()()(),e.TgZ(10,"div",13),e._UZ(11,"div",14),e.TgZ(12,"div",15)(13,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToCreateHomeworkPage(a.currentCategoryId))}),e.O4$(),e.TgZ(14,"svg",17),e._UZ(15,"line",18)(16,"line",19),e.qZA(),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()(),e.kcU(),e.TgZ(19,"div",20),e._UZ(20,"app-document-classroom-list",21),e.qZA(),e.TgZ(21,"div",22)(22,"div",23)(23,"azt-paging",24),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.goToPage(a))}),e.qZA()(),e.TgZ(24,"div",25)(25,"p",26),e._uU(26),e.ALo(27,"number"),e.ALo(28,"mytranslate"),e.qZA()(),e.TgZ(29,"div",27)(30,"p",26),e._uU(31),e.ALo(32,"number"),e.ALo(33,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();let i;e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(4),e.s9C("placeholder",e.lcZ(9,9,"lang_testbank_test_list_search_class")),e.xp6(9),e.hij(" ",e.lcZ(18,11,"lang_auto_tao_bai_tap")," "),e.xp6(3),e.Q6J("searchKey",null==(i=t.form.get("searchContent"))?null:i.value)("classroomWithHomeworkObjs",t.classroomWithHomeworkObjs),e.xp6(3),e.Q6J("totalPaginationPage",t.totalPage)("paging",t.currentPage),e.xp6(3),e.Oqu(e.lcZ(27,13,t.totalExam)+" "+e.lcZ(28,15,"lang_testbank_test_list_classes")),e.xp6(5),e.Oqu(e.lcZ(32,17,t.totalExam)+" "+e.lcZ(33,19,"lang_testbank_test_list_classes"))}}let Iy=(()=>{class n extends W.Q{convertHomeworkObjs(t){var i=[];return t.forEach(a=>{i.length<this.maxItemToShow&&a.homework&&i.push({id:a.homework.id,hashId:a.homework.hashId,classroomId:a.homework.classroomId,name:a.homework.name,type:"homework",createdAt:a.homework.createdAt,deadline:a.homework.deadline,submitted:a.homework.count,total:a.homework.totalStudent,homework:a.homework})}),i}parseHomeworkObjs(t){var i=[];return t.forEach(a=>{a.recommendExamObjs=this.convertHomeworkObjs(a.documentObjs??[]),i.push(a)}),i}goToPage(t){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+t,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+t)}redirectToCreateHomeworkPage(t){let i=`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/homework/add-new-homework/"+(t??0),"?backto="+encodeURIComponent(i))}getClassroomWithWithHomeworkObjs(){let t=Number(this.commonService.getMyParam(this.activeRoute,"page")),i=this.commonService.getFormObj(this.form);this.currentPage=t>0?t:1,this.initStatusObj(),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",this.isShowSearchResult?i.searchContent:void 0,this.currentPage,this.itemPerPage,2).subscribe(a=>{a&&1==a.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(a.data?.classrooms??[]),this.totalExam=a.data?.total??0,this.totalPage=this.totalExam%this.itemPerPage>0?(this.totalExam-this.totalExam%this.itemPerPage)/this.itemPerPage+1:this.totalExam>0?this.totalExam/this.itemPerPage:1,this.successStatusObj()):this.errorStatusObj(a.message??"",!0)})}searchClassroom(){let t=this.commonService.getFormObj(this.form);this.isShowSearchResult=!!t.searchContent,this.currentPage=1,this.initStatusObj(),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",t.searchContent,this.currentPage,this.itemPerPage,2).subscribe(i=>{i&&1==i.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(i.data?.classrooms??[]),this.totalExam=i.data?.total??0,this.totalPage=this.totalExam%this.itemPerPage>0?(this.totalExam-this.totalExam%this.itemPerPage)/this.itemPerPage+1:this.totalExam>0?this.totalExam/this.itemPerPage:1,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)})}ngOnInit(){this.form=this.fb.group({searchContent:new p.p4("",p.kI.required)}),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_HOMEWORK"),this.getClassroomWithWithHomeworkObjs()}),this.subscriptions.add(this.router.events.subscribe(t=>{t instanceof T.m2&&(this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.getClassroomWithWithHomeworkObjs())})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,s,r,l,c){super(),this.fb=t,this.activeRoute=i,this.dialog=a,this.documentService=s,this.userService=r,this.router=l,this.mobileWebviewService=c,this.maxItemToShow=2,this.form=new p.nJ({}),this.isShowSearchResult=!1,this.classroomWithHomeworkObjs=[],this.currentPage=1,this.totalPage=1,this.itemPerPage=24,this.totalExam=0,this.currentCategoryId=0,this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(j.uw),e.Y36(Ve.Zg),e.Y36(Qe.K),e.Y36(T.F0),e.Y36(Gr.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-homework-list"]],features:[e.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"grid","grid-cols-12","gap-6","mt-8"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","relative","mr-auto","mt-3","sm:mt-0"],[3,"formGroup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","absolute","my-auto","inset-y-0","ml-3","left-0","z-10","text-slate-500"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","formControlName","searchContent",1,"form-control","w-full","sm:w-72","box","px-10",3,"placeholder","enterKey"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-8"],[1,"col-span-12","md:col-span-4"],["azt-track-service","document-management-pW981emsf6c",1,"btn","btn-success","text-white","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"azt-view-classroom","mt-8",2,"min-height","calc(100vh - 250px)"],[3,"searchKey","classroomWithHomeworkObjs"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"totalPaginationPage","paging","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.NdJ("contextmenu",function(){return!1}),e.YNc(2,Ey,1,0,"azt-loading-effect",2),e.YNc(3,My,34,21,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,jt.Q,Vr.L,Bt.M,Wr,pn._,Sy,M.JJ,re.bT],encapsulation:2}),n})();function Ly(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function Zy(n,o){1&n&&(e.TgZ(0,"span",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}const Py=function(n){return[n]},jy=function(n){return{backto:n}};function Dy(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"a",25),e.ALo(2,"localize"),e._UZ(3,"azt-file-item",26),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("routerLink",e.lcZ(2,5,e.VKq(7,Py,"/admin/testbank/homework-results-list/"+(null==t.homework?null:t.homework.classroomId)+"/"+(null==t.homework?null:t.homework.id)+"/"+(null==t.homework?null:t.homework.hashId))))("queryParams",e.VKq(9,jy,"/admin/testbank/all-documents-in-class/"+i.classroomId+"/"+i.currentPage)),e.xp6(2),e.Q6J("dataObj",t)("showByClass",!0)("viewType","classroom")}}function Ny(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",22),e.YNc(2,Dy,4,11,"div",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.documentData)}}function Qy(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_homework_homework_list_not_found")," "))}function qy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"a",6),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,Zy,3,3,"span",7),e.ALo(6,"fullPermission"),e.qZA(),e.TgZ(7,"div",8)(8,"form",9),e.O4$(),e.TgZ(9,"svg",10),e._UZ(10,"circle",11)(11,"line",12),e.qZA(),e.kcU(),e.TgZ(12,"input",13),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.searchData())}),e.ALo(13,"mytranslate"),e.qZA()()()(),e.TgZ(14,"div",14),e.YNc(15,Ny,3,1,"div",2),e.YNc(16,Qy,3,3,"ng-template",null,15,e.W1O),e.qZA()(),e.TgZ(18,"div",16)(19,"div",17)(20,"azt-paging",18),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.goToPage(a))}),e.qZA()(),e.TgZ(21,"div",19)(22,"p",20),e._uU(23),e.ALo(24,"number"),e.ALo(25,"mytranslate"),e.qZA()()()}if(2&n){const t=e.MAs(17),i=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,9,null==i.classroomObj?null:i.classroomObj.name)," "),e.xp6(2),e.Q6J("ngIf",!e.xi3(6,11,null==i.classroomObj?null:i.classroomObj.permissionObj,"classroom")),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(4),e.s9C("placeholder",e.lcZ(13,14,"lang_homework_homework_list_search")),e.xp6(3),e.Q6J("ngIf",i.documentData.length>0)("ngIfElse",t),e.xp6(5),e.Q6J("totalPaginationPage",i.totalPage)("paging",i.currentPage),e.xp6(3),e.Oqu(e.lcZ(24,16,i.totalDocument)+" "+e.lcZ(25,18,"lang_testbank_test_list_document"))}}let Fy=(()=>{class n extends W.Q{getClassroomName(t){var i=[];return t.forEach(a=>{a.name&&!this.commonService.filterArray(i,a.name)&&i.push(a.name)}),i}convertHomeworkObjs(t){var i=[];return t.forEach(a=>{if(a.exam){var s={id:a.exam.id,hashId:a.exam.hashId,name:a.exam.name,deadline:a.exam.endTime,type:"exam",createdAt:a.exam.createdAt,submitted:a.exam.attended,delivery:this.getClassroomName(a.exam.classrooms),exam:a.exam};i.push(s)}else a.homework&&(s={id:a.homework.id,hashId:a.homework.hashId,classroomId:a.homework.classroomId,name:a.homework.name,type:"homework",createdAt:a.homework.createdAt,deadline:a.homework.deadline,submitted:a.homework.count,total:a.homework.totalStudent,delivery:a.homework.className?[a.homework.className]:new Array,homework:a.homework},i.push(s))}),i}goToPage(t){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+this.classroomId+"/"+t,"?backto="+this.backToLink)}getClassroomObj(){this.subscriptions.add(this.classroomService.apiClassroomGetObjGet(this.classroomId).subscribe(t=>{1==t.success?(this.classroomObj=t.data?.obj,this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}searchData(){this.initStatusObj();let t=this.commonService.getFormObj(this.form);this.subscriptions.add(this.documentService.apiDocumentsGet(void 0,"file",void 0,"homework",this.classroomId,t.searchContent,void 0,void 0,this.currentPage).subscribe(i=>{if(1==i.success)if(this.documentData=this.convertHomeworkObjs(i.data?.documentObjs??[]),this.totalDocument=i.data?.totalDocument??0,this.totalPage=this.totalDocument%this.itemPagePage>0?(this.totalDocument-this.totalDocument%this.itemPagePage)/this.itemPagePage+1:this.totalDocument>0?this.totalDocument/this.itemPagePage:1,this.classroomId>0)this.getClassroomObj();else{let a=this.commonService.myTranslateInstant("lang_auto_tu_do");this.classroomObj={id:this.classroomId,name:a??"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{}},this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}getData(){this.initStatusObj(),this.subscriptions.add(this.documentService.apiDocumentsGet(void 0,"file",void 0,"homework",this.classroomId,void 0,void 0,void 0,this.currentPage).subscribe(t=>{if(1==t.success)if(this.documentData=this.convertHomeworkObjs(t.data?.documentObjs??[]),this.totalDocument=t.data?.totalDocument??0,this.totalPage=this.totalDocument%this.itemPagePage>0?(this.totalDocument-this.totalDocument%this.itemPagePage)/this.itemPagePage+1:this.totalDocument>0?this.totalDocument/this.itemPagePage:1,this.classroomId>0)this.getClassroomObj();else{let i=this.commonService.myTranslateInstant("lang_auto_tu_do");this.classroomObj={id:this.classroomId,name:i??"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{}},this.successStatusObj()}else this.errorStatusObj(t.message??"",!0)}))}ngOnInit(){this.form=this.fb.group({searchContent:new p.p4("",p.kI.required)}),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/1/0/1",this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"classroom_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.getData()}),this.commonService.translateMetaData({title:"lang_cms_all_document_class_title",description:"lang_cms_all_document_class_description",image:""}),super.ngOnInit()}constructor(t,i,a,s){super(),this.activeRoute=t,this.documentService=i,this.fb=a,this.classroomService=s,this.form=new p.nJ({}),this.backToLink="",this.classroomId=0,this.documentData=[],this.totalDocument=0,this.itemPagePage=24,this.currentPage=1,this.totalPage=1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Ve.Zg),e.Y36(p.QS),e.Y36(Hi.um))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-all-document-homework-in-one-classroom"]],features:[e.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"mb-2","mt-3"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box",2,"min-height","300px"],[1,"flex","lg:items-center","flex-col","lg:flex-row","p-5","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"font-medium","truncate","text-md","mr-2"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-0","lg:ml-auto","relative","mt-2","lg:mt-0","mr-2"],[3,"formGroup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","absolute","my-auto","inset-y-0","ml-3","left-0","z-10","text-slate-500"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","formControlName","searchContent",1,"form-control","w-full","sm:w-72","box","px-10","bg-slate-200","dark:bg-darkmode-400",3,"placeholder","keyup.enter"],[1,"p-5"],["noDocumentData",""],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"totalPaginationPage","paging","goToPaginationPage"],[1,"text-right","mt-2"],[1,"text-md"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-5"],["class","col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-3 intro-y",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","xl:col-span-4","2xl:col-span-3","intro-y"],["azt-track-service","all-document-class-KetDqkKFvjH",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-5","text-center"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,Ly,1,0,"azt-loading-effect",2),e.YNc(3,qy,26,20,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[T.rH,M.sg,M.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,jt.Q,Vr.L,Bt.M,ru,pn._,M.JJ,xa.lO,re.bT,re.Gf],encapsulation:2}),n})();function Uy(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"input",29),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeClassroomOption())}),e.qZA(),e.TgZ(3,"label",30),e.ALo(4,"mytranslate"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()}if(2&n){const t=o.$implicit;let i,a,s,r;e.xp6(1),e.Q6J("formGroup",t),e.xp6(1),e.MGl("id","select-classroom-export_excel__",null==(i=t.get("id"))?null:i.value,""),e.xp6(1),e.MGl("for","select-classroom-export_excel__",null==(a=t.get("id"))?null:a.value,""),e.Q6J("matTooltip",e.lcZ(4,5,null==(s=t.get("name"))?null:s.value)),e.xp6(2),e.Oqu(e.lcZ(6,7,null==(r=t.get("name"))?null:r.value))}}function Ry(n,o){1&n&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("* ",e.lcZ(2,1,"lang_testbank_excel_select_at_least_classroom_to_export_excel"),""))}function By(n,o){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"span",31),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("* ",e.lcZ(4,1,"lang_testbank_excel_select_no_classroom_export"),""))}let zy=(()=>{class n extends W.Q{confirmAction(){let t=[];this.form.get("listClassroom").controls.forEach(a=>{const s=a.get("id");a.get("choose").value&&!this.commonService.filterArray(t,s.value)&&t.push(s.value)}),t.length?this.dialogRef.close(t):this.dialogRef.close()}setChangeSelectAll(){const t=this.form.get("selectAll");if(t){t.setValue(!t.value);const i=this.form.get("listClassroom");i&&(i.controls.forEach(a=>{a.get("choose").setValue(t.value)}),this.countClassroomSelect++),t.value||(this.countClassroomSelect=0)}}onChangeClassroomOption(){const t=this.form.get("listClassroom");let i=!0,a=0;t&&t.controls.forEach(r=>{!1===r.get("choose").value?i=!1:a++});const s=this.form.get("selectAll");s&&s.setValue(i),this.countClassroomSelect=a}setupArrayClassroom(){const t=this.form.get("listClassroom");t&&t.clear(),this.data.classroomDataObjs.forEach(i=>{let a=i.classObj;if(a){let s=this.fb.group({id:new p.NI(a.id),name:new p.NI(a.name),choose:new p.NI(!1)});t.push(s)}})}checkTypeTable(){return"lastTime"==this.data.exportType?"lang_auto_last_time":"firstTime"==this.data.exportType?"lang_auto_first_time":"highest"==this.data.exportType?"lang_auto_highest":"allTime"==this.data.exportType?"lang_auto_allTime":"lang_auto_last_time"}ngOnInit(){super.ngOnInit(),this.data.classroomDataObjs.length>0&&(this.form=this.fb.group({listClassroom:new p.Oe([]),selectAll:new p.NI(!1)}),this.setupArrayClassroom()),this.exportTitle=this.checkTypeTable()}constructor(t,i,a){super(),this.fb=t,this.data=i,this.dialogRef=a,this.form=new p.cw({}),this.countClassroomSelect=0,this.exportTitle=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(j.WI),e.Y36(j.so,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-select-classroom-export-excel"]],features:[e.qOj],decls:39,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left"],[1,"header-right"],["azt-track-service","select-student-export-sMT2Np4C_Vf",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"box-content"],[3,"formGroup","hidden"],[3,"hidden"],[1,"col-span-12","mt-2","px-3"],[1,"font-medium","flex","items-center"],[1,"col-span-12","mt-2","mb-2","px-3","pt-0"],[1,"form-check","mr-10"],["id","select-all-students","type","checkbox",1,"form-check-input",3,"checked","change"],["for","select-all-students",1,"form-check-label"],[1,"box-students"],["pointerEventsMethod","scrollbar",2,"width","100%","height","100%",3,"visibility"],[1,"grid","grid-cols-12","p-3",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2","formArrayName","listClassroom",4,"ngFor","ngForOf"],["class","err-color",4,"ngIf"],[4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","select-student-export-H_SWYi6hbiY",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","select-student-export-FAs4GdQImfT",1,"btn","w-24","btn-primary",3,"disabled","click"],["formArrayName","listClassroom",1,"col-span-12","md:col-span-4","mt-2"],[1,"form-check","mr-10",3,"formGroup"],["formControlName","choose","type","checkbox",1,"form-check-input",3,"id","change"],[1,"form-check-label","truncate",3,"matTooltip","for"],[1,"err-color"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4)(8,"a",5),e.O4$(),e.TgZ(9,"svg",6),e._UZ(10,"line",7)(11,"line",8),e.qZA()()()(),e.kcU(),e.TgZ(12,"div",9)(13,"form",10)(14,"div",11)(15,"div",12)(16,"div",13),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"div",14)(20,"div",15)(21,"input",16),e.NdJ("change",function(){return i.setChangeSelectAll()}),e.qZA(),e.TgZ(22,"label",17),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()(),e.TgZ(25,"div",18)(26,"ng-scrollbar",19)(27,"div",20),e.YNc(28,Uy,7,9,"div",21),e.qZA()()(),e.TgZ(29,"div",12),e.YNc(30,Ry,3,3,"span",22),e.qZA()()(),e.YNc(31,By,5,3,"div",23),e.qZA(),e.TgZ(32,"div",24)(33,"a",25),e._uU(34),e.ALo(35,"mytranslate"),e.qZA(),e.TgZ(36,"button",26),e.NdJ("click",function(){return i.confirmAction()}),e._uU(37),e.ALo(38,"mytranslate"),e.qZA()()()()),2&t){let a,s,r,l;e.xp6(4),e.Oqu(e.lcZ(5,14,"lang_testbank_excel_select_classroom_export")+e.lcZ(6,16,i.exportTitle)),e.xp6(9),e.Q6J("formGroup",i.form)("hidden",0===i.data.classroomDataObjs.length),e.xp6(1),e.Q6J("hidden",0===(null==(a=i.form.get("listClassroom"))?null:a.controls.length)),e.xp6(3),e.hij("",e.lcZ(18,18,"lang_testbank_excel_select_classroom_to_export_excel"),":"),e.xp6(4),e.Q6J("checked",null==(s=i.form.get("selectAll"))?null:s.value),e.xp6(2),e.Oqu(e.lcZ(24,20,null!=(r=i.form.get("selectAll"))&&r.value?"lang_auto_bo_chon_tat_ca":"lang_auto_chon_tat_ca")),e.xp6(3),e.Q6J("visibility","hover"),e.xp6(2),e.Q6J("ngForOf",null==(l=i.form.get("listClassroom"))?null:l.controls),e.xp6(2),e.Q6J("ngIf",0===i.countClassroomSelect),e.xp6(1),e.Q6J("ngIf",0===i.data.classroomDataObjs.length),e.xp6(3),e.hij(" ",e.lcZ(35,22,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",!i.countClassroomSelect),e.xp6(1),e.hij(" ",e.lcZ(38,24,"lang_cms_common_confirm_btn")," ")}},dependencies:[M.sg,M.O5,j.ZT,Zt.gM,x.KC,p._Y,p.Wl,p.JJ,p.JL,p.sg,p.u,p.CE,Bt.M,re.bT],styles:[".box[_ngcontent-%COMP%]{max-width:800px}.box-content[_ngcontent-%COMP%]{padding:10px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.err-color[_ngcontent-%COMP%]{color:#f44336;font-size:small;font-weight:500}.note-color[_ngcontent-%COMP%]{font-size:small;font-weight:500}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:150px}.more-info-color[_ngcontent-%COMP%]{color:rgb(var(--color-primary));cursor:pointer}.text-only-class[_ngcontent-%COMP%]{color:#546e7a;margin-left:5px;font-weight:400}.box-students[_ngcontent-%COMP%]{height:15vh;overflow:hidden}.box-classrooms[_ngcontent-%COMP%]{height:10vh;overflow:hidden}.box-min-classrooms[_ngcontent-%COMP%]{height:45px}.box-max-classrooms[_ngcontent-%COMP%]{height:15vh;overflow:hidden}"]}),n})();var is=S(50626);let pu=(()=>{class n{constructor(t){this.browserStorageService=t,this.global_data_filter={}}getCustomFilter(t,i){let a="";switch(t){case"exam":a="saveFilterExam_"+i;break;case"homework":a="saveFilterHomework_"+i}return this.global_data_filter[a]}setCustomFilter(t,i,a){let s="";switch(i){case"exam":s="saveFilterExam_"+a,this.global_data_filter[s]="",t.isMarked&&(this.global_data_filter[s]+="isMarked "),t.isNotMarked&&(this.global_data_filter[s]+="isNotMarked "),t.isOnTest&&(this.global_data_filter[s]+="isOnTest "),t.isNotTested&&(this.global_data_filter[s]+="isNotTested ");break;case"homework":s="saveFilterHomework_"+a,this.global_data_filter[s]="",t.isMarked&&(this.global_data_filter[s]+="isMarked "),t.isSubmitted&&(this.global_data_filter[s]+="isSubmitted "),t.isNotSubmit&&(this.global_data_filter[s]+="isNotSubmit "),t.mustReSubmit&&(this.global_data_filter[s]+="mustReSubmit ")}}removeCustomFilter(t,i){let a="";switch(t){case"exam":a="saveFilterExam_"+i,this.global_data_filter[a]="";break;case"homework":a="saveFilterHomework_"+i,this.global_data_filter[a]=""}}getStatusSideNav(t){return this.browserStorageService.getSimpleStorage("statusSideNav_"+t)??""}removeStatusSideNav(t){this.browserStorageService.removeSimpleStorage("statusSideNav_"+t)}saveStatusSideNav(t,i){this.browserStorageService.saveSimpleStorage("statusSideNav_"+t,i?"open":"close")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(we.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ns=S(38474);let Jy=(()=>{class n{constructor(t,i,a,s,r,l){this.commonService=t,this.examPageResultService=i,this.permissionService=a,this.globalService=s,this.browserStorageService=r,this.gzipHelper=l}getTestedUserObjs(t,i,a){return this.globalService.startIntervalFunc(t),this.getTestedOfExamResult(t,i,"default",a)}getTestedOfExamResult(t,i,a,s){return new bi.y(r=>{let l="tested_list_result_v2_"+i,c=this.browserStorageService.getSimpleStorage(l)??"",d=this.gzipHelper.resultContentSupport(c),f=d&&this.commonService.willDeleteParseJson(d)?this.commonService.willDeleteParseJson(d):void 0;s&&f?(r.next({status:200,success:1,data:f,message:"successful"}),r.complete()):this.examPageResultService.apiExamPageResultGetObjV3Get(i).subscribe(y=>{if(1==y.success){let N=y.data?.examObj,I=y.data?.classrooms??[],z=y.data?.totalAttended??0,$=y.data?.examCreatorObj,Y=y.data?.offlineExamObj,V=y.data?.offlineMixQuestionObjs,te=y.data?.canResetStudentCode,K=y.data?.hasCreateStudentCode,X=y.data?.fileTypeStr??"";if(this.permissionService.hasViewExamPermission("exam",N?.permissionObj)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",N?.permissionObj)){let ye=[];if(I.length>0)for(let oe=0;oe<I.length;oe++){let pe={id:I[oe].id,name:I[oe].name??"lang_auto_tu_do",totalTested:I[oe].totalTested,countStudents:I[oe].totalRegister,countSubmitted:I[oe].totalTested},je=[];(-1!=pe.id||-1==pe.id&&(pe.countStudents||pe.totalTested))&&ye.push({classObj:{...pe,teacherId:0,showAddStudent:0,grade:0,countStudents:0},results:je})}let ae={studentsInClassResults:ye.length>0?ye:[],studentsNotInClassResults:[],totalAttended:z,totalUsers:0,examCreatorObj:$,offlineMixQuestionObjs:V,examObj:N,offlineExamObj:Y,canResetStudentCode:te,hasCreateStudentCode:K,fileTypeStr:X,errorConfigClassroomPermission:y.data?.errorConfigClassroomPermission,errorMessage:y.data?.errorMessage};if("export_tool"!=t){(this.browserStorageService.getSizeOfStorageByKey("tested_list_result_v2")>2||this.browserStorageService.getSizeOfStorage()>4.5)&&this.browserStorageService.removeSimpleStorageByKey("tested_list_result_v2");let oe=this.gzipHelper.zipBigContent(JSON.stringify(ae));this.browserStorageService.saveSimpleStorage(l,oe)}r.next({status:200,success:1,data:ae,message:"successful"}),r.complete()}else r.next({status:200,success:1,data:{studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:z,totalUsers:0,examCreatorObj:$,offlineMixQuestionObjs:V,examObj:N,offlineExamObj:Y,canResetStudentCode:te,hasCreateStudentCode:K,fileTypeStr:y.data?.fileTypeStr,errorConfigClassroomPermission:y.data?.errorConfigClassroomPermission,errorMessage:y.data?.errorMessage,maxGroupId:0},message:"successful"}),r.complete()}else r.next({status:y.code,success:0,data:null,message:y.message??""}),r.complete()})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(Ve.DR),e.LFG(eo.$),e.LFG(Ns.U),e.LFG(we.z),e.LFG(Jn.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nl=S(67517),hm=S(38801),il=S(33853);let gm=(()=>{class n{getDefaultFilterObj(){var t=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(t=i),t}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(t){var i=0;for(var a in t)!0===t[a]&&(i+=1);return i}_getInitFilterObj(){return{isMarked:!1,isNotMarked:!1,isOnTest:!1,isNotSubmit:!1,isNotTested:!1}}constructor(t,i){this.commonService=t,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_exam_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(we.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Hy=S(4779),Ni=S(32651);function Ky(n,o){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span"),e._UZ(4,"span",5),e._uU(5,"\xa0"),e.qZA()(),e.TgZ(6,"div",6),e._UZ(7,"div",7),e.qZA()()()),2&n){const t=e.oxw();e.xp6(7),e.Q6J("innerHTML",t.msg,e.oJD)}}let ol=(()=>{class n extends W.Q{constructor(t){super(),this.commonService=t,this.show=!1,this.msg=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-export-docx-loading-box"]],inputs:{show:"show",msg:"msg",percent:"percent"},features:[e.qOj],decls:2,vars:1,consts:[[1,"export-docx-frame"],["class","loading-box",4,"ngIf"],[1,"loading-box"],[1,"loading-box-wrapper"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-lg"],[1,"loading-box-lines"],[1,"loading-box-lines-content",3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ky,8,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.show))},dependencies:[M.O5],styles:[".export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9999;top:0;left:0;display:flex;justify-content:center;background-color:#000c}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{margin-top:100px;text-align:center;color:#fafafa;font-weight:400}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#fafafa;color:#000;height:-moz-fit-content;height:fit-content;width:500px;border-radius:5px}@media screen and (max-width: 520px){.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{padding:10px}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{width:100%}}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines-content[_ngcontent-%COMP%]{padding:20px}  .export-docx-frame .loading-box .loading-box-lines p{padding-top:10px}  .export-docx-frame .loading-box .loading-box-lines p:first-child{padding-top:0}"]}),n})();const $y=["TABLE"];function Yy(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.uIk("excelWidth",15)("excelRow",5)("excelColumn",15)("excelStyle",t.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(2,5,"lang_testbank_testted_list_essay_score"))}}function Gy(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.index,i=e.oxw(2);e.uIk("excelWidth",15)("excelRow",5)("excelColumn",(i.hasEssayQuestion?17:16)+t)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(2,5,"lang_combine_exam_component")+(t+1))}}function Wy(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Gy,3,7,"th",9),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.createFakeArr(3))}}function Vy(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.uIk("excelWidth",10)("excelRow",5)("excelColumn",(a.hasEssayQuestion?17:16)+(a.examObj.subjectMarks?3:0)+i)("excelStyle",a.styleThNormal),e.xp6(1),e.AsE("",e.lcZ(2,6,"lang_testbank_test_config_group"),"\xa0",t<9?"0"+(t+1):t+1,"")}}function Xy(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Vy,3,8,"th",9),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.createFakeArr(t.maxGroupQuestion))}}function e4(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.index,i=e.oxw();let a;e.uIk("excelWidth",8)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1)+(t+2))("excelStyle",i.styleThNormal),e.xp6(1),e.AsE("",e.lcZ(2,6,"lang_testbank_testted_list_question"),"\xa0",t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:0)<9?"0"+(t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1)):t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1),"")}}function t4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.Oqu(t.countEssayQuestion&&t.countEssayQuestion>0?(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)-t.countEssayQuestion:(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0))}}function n4(n,o){1&n&&(e.TgZ(0,"td",13),e._uU(1,"0"),e.qZA())}function i4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(null!=t.essayMark?t.essayMark:e.lcZ(2,1,i.checkStatusStudent(t)))}}function o4(n,o){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n){const t=o.index,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[t])?null==i.subjectMarkValues?null:i.subjectMarkValues[t]:""," ")}}function a4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,o4,2,1,"th",15),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.createFakeArr(3))}}function s4(n,o){1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function r4(n,o){if(1&n&&e.YNc(0,s4,2,1,"th",15),2&n){const t=e.oxw(4);e.Q6J("ngForOf",t.createFakeArr(3))}}function l4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,a4,2,1,"ng-container",16),e.YNc(2,r4,1,1,"ng-template",null,17,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",t)}}function c4(n,o){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.point,"1.2-2"))}}function u4(n,o){1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function d4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,u4,2,1,"th",15),e.BQk()),2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-t.groupPoints.length))}}function m4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,c4,3,4,"th",15),e.YNc(2,d4,2,1,"ng-container",8),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.groupPoints),e.xp6(1),e.Q6J("ngIf",t.groupPoints.length<i.maxGroupQuestion)}}function _4(n,o){1&n&&e._UZ(0,"th",13)}function p4(n,o){if(1&n&&e.YNc(0,_4,1,0,"th",15),2&n){const t=e.oxw(4);e.Q6J("ngForOf",t.createFakeArr(t.maxGroupQuestion))}}function h4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,m4,3,2,"ng-container",16),e.YNc(2,p4,1,1,"ng-template",null,18,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",t)}}function g4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function f4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA(),e.TgZ(2,"td",13),e._uU(3),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}function x4(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA(),e.TgZ(5,"td",13),e._uU(6),e.ALo(7,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(8,"td",13),e._uU(9),e.ALo(10,"mytranslate"),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"td",13),e._uU(13),e.ALo(14,"formatStudentCodeToNumber"),e.qZA(),e.TgZ(15,"td",13),e._uU(16),e.ALo(17,"formatOfflineExamHashIdToNumber"),e.qZA(),e.TgZ(18,"td",13),e._uU(19),e.qZA(),e.TgZ(20,"td",13),e._uU(21),e.qZA(),e.TgZ(22,"td",13),e._uU(23),e.ALo(24,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(25,"td",13),e._uU(26),e.ALo(27,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(28,"td",13),e._uU(29),e.qZA(),e.TgZ(30,"td",13),e._uU(31),e.qZA(),e.TgZ(32,"td",13),e._uU(33),e.qZA(),e.YNc(34,t4,2,1,"td",14),e.YNc(35,n4,2,0,"td",14),e.TgZ(36,"td",13),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.YNc(39,i4,3,3,"td",14),e.TgZ(40,"td",13),e._uU(41),e.qZA(),e.YNc(42,l4,4,2,"ng-container",8),e.YNc(43,h4,4,2,"ng-container",8),e.TgZ(44,"td",13),e._uU(45),e.qZA(),e.TgZ(46,"td",13),e._uU(47),e.qZA(),e.YNc(48,g4,2,1,"td",15),e.YNc(49,f4,4,2,"ng-template",10),e.qZA()),2&n){const t=o.$implicit,i=e.oxw().$implicit,a=e.oxw();let s,r;e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(null==i.classObj?null:i.classObj.name),e.xp6(2),e.Oqu(e.lcZ(7,24,t.birthday)),e.xp6(3),e.Oqu(0==t.gender?e.lcZ(10,26,"lang_gender_female"):1==t.gender?e.lcZ(11,28,"lang_gender_male"):""),e.xp6(4),e.Oqu(t.identificationNumber?e.xi3(14,30,t.identificationNumber,6):""),e.xp6(3),e.Oqu(t.offlineMixQuestionHashId?e.xi3(17,33,t.offlineMixQuestionHashId,3):""),e.xp6(3),e.Oqu(t.testedTime),e.xp6(2),e.Oqu(t.totalTestTime?t.totalTestTime:null==t.allResultObjs?null:t.allResultObjs.length),e.xp6(2),e.Oqu(e.lcZ(24,36,null!==(s=t.startedTest)&&void 0!==s?s:"")),e.xp6(3),e.Oqu(e.lcZ(27,38,null!==(r=t.createdAt)&&void 0!==r?r:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":a.calculationTime(t.startedTest,t.createdAt||"")),e.xp6(2),e.Oqu(null==t.startedTest?"":a.calculationTimeOnlyMinutes(t.startedTest,t.createdAt||"")),e.xp6(2),e.Oqu(t.rightAnswer),e.xp6(1),e.Q6J("ngIf",!t.isNotTested&&!t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotTested||t.isOnTest),e.xp6(2),e.Oqu(null!=t.trueFalseMark?t.trueFalseMark:e.lcZ(38,40,a.checkStatusStudent(t))),e.xp6(2),e.Q6J("ngIf",a.hasEssayQuestion),e.xp6(2),e.Oqu(t.mark),e.xp6(1),e.Q6J("ngIf",a.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",a.maxGroupQuestion>0),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.exitCount),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.blurCount),e.xp6(1),e.Q6J("ngForOf",t.answerMixObjs),e.xp6(1),e.Q6J("ngForOf",t.inforsParse)}}const b4=function(){return[]};function v4(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",6),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.YNc(4,x4,50,42,"tr",11),e._UZ(5,"tr")),2&n){const t=o.$implicit,i=e.oxw();let a;e.xp6(1),e.uIk("excelStyle",i.styleTdNormal)("colspan",i.getCurrentColumnIndexForExcel(2)+2),e.xp6(1),e.Oqu(e.lcZ(3,4,"lang_testbank_testted_list_class")+" - "+(null==t.classObj?null:t.classObj.name)),e.xp6(2),e.Q6J("ngForOf",i.checkSortListStudent(null!==(a=null==t.classObj?null:t.classObj.sortType)&&void 0!==a?a:0,t.results||e.DdM(6,b4)))}}function y4(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",6),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.uIk("excelStyle",t.styleTdNormal)("colspan",t.getCurrentColumnIndexForExcel(2)+2),e.xp6(1),e.Oqu(e.lcZ(4,3,e.lcZ(5,5,"lang_testbank_testted_list_class")+" - lang_auto_tu_do"))}}function w4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.Oqu(t.countEssayQuestion&&t.countEssayQuestion>0?(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)-t.countEssayQuestion:(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0))}}function C4(n,o){1&n&&(e.TgZ(0,"td",13),e._uU(1,"0"),e.qZA())}function k4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(null!=t.essayMark?t.essayMark:e.lcZ(2,1,i.checkStatusStudent(t)))}}function T4(n,o){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n){const t=o.index,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[t])?null==i.subjectMarkValues?null:i.subjectMarkValues[t]:""," ")}}function A4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,T4,2,1,"th",15),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.createFakeArr(3))}}function O4(n,o){1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function S4(n,o){if(1&n&&e.YNc(0,O4,2,1,"th",15),2&n){const t=e.oxw(4);e.Q6J("ngForOf",t.createFakeArr(3))}}function E4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,A4,2,1,"ng-container",16),e.YNc(2,S4,1,1,"ng-template",null,17,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",t)}}function M4(n,o){if(1&n&&(e.TgZ(0,"th",13),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.point,"1.2-2"))}}function I4(n,o){1&n&&(e.TgZ(0,"th",13),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function L4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,I4,2,1,"th",15),e.BQk()),2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-t.groupPoints.length))}}function Z4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,M4,3,4,"th",15),e.YNc(2,L4,2,1,"ng-container",8),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.groupPoints),e.xp6(1),e.Q6J("ngIf",t.groupPoints.length<i.maxGroupQuestion)}}function P4(n,o){1&n&&e._UZ(0,"th",13)}function j4(n,o){if(1&n&&e.YNc(0,P4,1,0,"th",15),2&n){const t=e.oxw(4);e.Q6J("ngForOf",t.createFakeArr(t.maxGroupQuestion))}}function D4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Z4,3,2,"ng-container",16),e.YNc(2,j4,1,1,"ng-template",null,19,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",t)}}function N4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function Q4(n,o){if(1&n&&(e.TgZ(0,"td",13),e._uU(1),e.qZA(),e.TgZ(2,"td",13),e._uU(3),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}function q4(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",13),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"td",13),e._uU(8),e.ALo(9,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(10,"td",13),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"td",13),e._uU(15),e.ALo(16,"formatStudentCodeToNumber"),e.qZA(),e.TgZ(17,"td",13),e._uU(18),e.ALo(19,"formatOfflineExamHashIdToNumber"),e.qZA(),e.TgZ(20,"td",13),e._uU(21),e.qZA(),e.TgZ(22,"td",13),e._uU(23),e.qZA(),e.TgZ(24,"td",13),e._uU(25),e.ALo(26,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(27,"td",13),e._uU(28),e.ALo(29,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(30,"td",13),e._uU(31),e.qZA(),e.TgZ(32,"td",13),e._uU(33),e.qZA(),e.TgZ(34,"td",13),e._uU(35),e.qZA(),e.YNc(36,w4,2,1,"td",14),e.YNc(37,C4,2,0,"td",14),e.TgZ(38,"td",13),e._uU(39),e.ALo(40,"mytranslate"),e.qZA(),e.YNc(41,k4,3,3,"td",14),e.TgZ(42,"td",13),e._uU(43),e.qZA(),e.YNc(44,E4,4,2,"ng-container",8),e.YNc(45,D4,4,2,"ng-container",8),e.TgZ(46,"td",13),e._uU(47),e.qZA(),e.TgZ(48,"td",13),e._uU(49),e.qZA(),e.YNc(50,N4,2,1,"td",15),e.YNc(51,Q4,4,2,"ng-template",10),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);let a,s;e.xp6(2),e.Oqu(t.fullName||e.lcZ(3,24,"lang_auto_thi_sinh_thi_offline")+t.resultId),e.xp6(3),e.Oqu(e.lcZ(6,26,"lang_auto_tu_do")),e.xp6(3),e.Oqu(e.lcZ(9,28,t.birthday)),e.xp6(3),e.Oqu(0==t.gender?e.lcZ(12,30,"lang_gender_female"):1==t.gender?e.lcZ(13,32,"lang_gender_male"):""),e.xp6(4),e.Oqu(t.identificationNumber?e.xi3(16,34,t.identificationNumber,6):""),e.xp6(3),e.Oqu(t.offlineMixQuestionHashId?e.xi3(19,37,t.offlineMixQuestionHashId,3):""),e.xp6(3),e.Oqu(t.testedTime),e.xp6(2),e.Oqu(t.totalTestTime?t.totalTestTime:null==t.allResultObjs?null:t.allResultObjs.length),e.xp6(2),e.Oqu(e.lcZ(26,40,null!==(a=t.startedTest)&&void 0!==a?a:"")),e.xp6(3),e.Oqu(e.lcZ(29,42,null!==(s=t.createdAt)&&void 0!==s?s:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":i.calculationTime(t.startedTest,t.createdAt||"")),e.xp6(2),e.Oqu(null==t.startedTest?"":i.calculationTimeOnlyMinutes(t.startedTest,t.createdAt||"")),e.xp6(2),e.Oqu(t.rightAnswer),e.xp6(1),e.Q6J("ngIf",!t.isNotTested&&!t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotTested||t.isOnTest),e.xp6(2),e.Oqu(null!=t.trueFalseMark?t.trueFalseMark:e.lcZ(40,44,i.checkStatusStudent(t))),e.xp6(2),e.Q6J("ngIf",i.hasEssayQuestion),e.xp6(2),e.Oqu(t.mark),e.xp6(1),e.Q6J("ngIf",i.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",i.maxGroupQuestion>0),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.exitCount),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.blurCount),e.xp6(1),e.Q6J("ngForOf",t.answerMixObjs),e.xp6(1),e.Q6J("ngForOf",t.inforsParse)}}function F4(n,o){if(1&n&&(e.ynx(0),e.YNc(1,y4,6,7,"ng-container",8),e.YNc(2,q4,52,46,"tr",11),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.dataScoreByClass.length),e.xp6(1),e.Q6J("ngForOf",t.dataScore)}}let U4=(()=>{class n extends W.Q{getCurrentColumnIndexForExcel(t){let i=this.hasEssayQuestion?17:16;return this.examObj.subjectMarks&&(i+=3),this.maxGroupQuestion>0&&(i+=this.maxGroupQuestion),1==t||2==t&&(i+=1,this.totalQuestion&&(i+=this.totalQuestion)),i}exportToExcel(){let t=this.examObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.examObj.name??"",this.tableType,"-ScoreSheet"])+".xlsx":this.commonService.createFileNameExportFile([this.tableType,"ScoreSheet"])+".xlsx";this.exportExcelService.exportHtmlTableToExcelStyleOnlyHeaderRow(this.TABLE,!0,t,5)}createFakeArr(t){let i=[];for(let a=0;a<t;a++)i.push(a);return i}checkStatusStudent(t){return t.isNotMarked?"lang_auto_chua_cham":t.isOnTest?"lang_auto_dang_thi":t.isNotSubmit?"lang_auto_chua_nop_bai":t.isNotTested?"lang_auto_chua_thi":""}checkTypeTable(){return"lastTime"==this.tableType?"lang_auto_last_time":"firstTime"==this.tableType?"lang_auto_first_time":"highest"==this.tableType?"lang_auto_highest":"allTime"==this.tableType?"lang_auto_allTime":"lang_auto_last_time"}calculationTime(t,i){return this.timeService.calculationTimeExamTested(t,i)}calculationTimeOnlyMinutes(t,i){return this.timeService.calculationTimeOnlyMinutes(t,i)}checkSortListStudent(t,i){return this.isSortByMark?this.sortService.sortMarkDESC(this.commonService.myClone(i),this.hasEssayQuestion):this.isSortByTime?this.sortService.sortTimeDESC(this.commonService.myClone(i)):0==t||this.isSortByName?this.sortService.sortFirstNameStudents(this.commonService.myClone(i)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(i),"pos","id")}constructor(t,i,a){super(),this.timeService=t,this.sortService=i,this.exportExcelService=a,this.dataScore=[],this.dataScoreByClass=[],this.exportQuestionObjs=[],this.tableType="lastTime",this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalQuestion=0,this.maxGroupQuestion=0,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.currentDate=new Date,this.styleThNormal='{"border": {"top": { "style": "thin", "color": { "rgb": "ff3c8dbc" } },"bottom": { "style": "thin", "color": { "rgb": "ff3c8dbc" } }, "left": { "style": "thin", "color": { "rgb": "ffffffff" } }, "right": { "style": "thin", "color": { "rgb": "ffffffff" } } },"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}'}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O),e.Y36(is.K),e.Y36(zr.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-excel-score-sheet"]],viewQuery:function(t,i){if(1&t&&e.Gf($y,5),2&t){let a;e.iGM(a=e.CRH())&&(i.TABLE=a.first)}},inputs:{examObj:"examObj",dataScore:"dataScore",dataScoreByClass:"dataScoreByClass",exportQuestionObjs:"exportQuestionObjs",tableType:"tableType",hasEssayQuestion:"hasEssayQuestion",countEssayQuestion:"countEssayQuestion",totalQuestion:"totalQuestion",maxGroupQuestion:"maxGroupQuestion",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName"},features:[e.qOj],decls:108,vars:170,consts:[["azt-track-service","excel-score-sheet-b3JV23esL",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],["colspan","3"],["colspan","2"],[1,"border-table","azt-excel-cell"],["class","border-table azt-excel-cell",4,"ngIf"],[4,"ngIf"],["class","border-table azt-excel-cell",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],[4,"ngFor","ngForOf"],[1,"border-table",2,"width","150px"],[1,"border-table"],["class","border-table",4,"ngIf"],["class","border-table",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["NoSubjectMarkValues",""],["NoGroupPoints",""],["NoGroupPointsFree",""]],template:function(t,i){1&t&&(e.TgZ(0,"table",0,1),e.NdJ("click",function(){return i.exportToExcel()}),e.TgZ(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"tr")(8,"th",4),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"th",5),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"th",4),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"th",5),e._uU(18),e.qZA()(),e.TgZ(19,"tr")(20,"th",4),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"th",4),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"tr")(27,"th",3),e._uU(28),e.ALo(29,"mytranslate"),e.ALo(30,"formatOnlyDateByUserUnitPipe"),e.qZA()(),e.TgZ(31,"tr"),e._UZ(32,"th"),e.qZA(),e.TgZ(33,"tr")(34,"th",6),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"th",6),e._uU(38),e.ALo(39,"mytranslate"),e.qZA(),e.TgZ(40,"th",6),e._uU(41),e.ALo(42,"mytranslate"),e.qZA(),e.TgZ(43,"th",6),e._uU(44),e.ALo(45,"mytranslate"),e.qZA(),e.TgZ(46,"th",6),e._uU(47),e.ALo(48,"mytranslate"),e.qZA(),e.TgZ(49,"th",6),e._uU(50),e.ALo(51,"mytranslate"),e.qZA(),e.TgZ(52,"th",6),e._uU(53),e.ALo(54,"mytranslate"),e.qZA(),e.TgZ(55,"th",6),e._uU(56),e.ALo(57,"mytranslate"),e.qZA(),e.TgZ(58,"th",6),e._uU(59),e.ALo(60,"mytranslate"),e.qZA(),e.TgZ(61,"th",6),e._uU(62),e.ALo(63,"mytranslate"),e.qZA(),e.TgZ(64,"th",6),e._uU(65),e.ALo(66,"mytranslate"),e.qZA(),e.TgZ(67,"th",6),e._uU(68),e.ALo(69,"mytranslate"),e.qZA(),e.TgZ(70,"th",6),e._uU(71),e.ALo(72,"mytranslate"),e.qZA(),e.TgZ(73,"th",6),e._uU(74),e.ALo(75,"mytranslate"),e.qZA(),e.TgZ(76,"th",6),e._uU(77),e.ALo(78,"mytranslate"),e.qZA(),e.YNc(79,Yy,3,7,"th",7),e.TgZ(80,"th",6),e._uU(81),e.ALo(82,"mytranslate"),e.qZA(),e.YNc(83,Wy,2,1,"ng-container",8),e.YNc(84,Xy,2,1,"ng-container",8),e.TgZ(85,"th",6),e._uU(86),e.ALo(87,"mytranslate"),e.qZA(),e.TgZ(88,"th",6),e._uU(89),e.ALo(90,"mytranslate"),e.qZA(),e.YNc(91,e4,3,8,"th",9),e.TgZ(92,"th",6),e._uU(93),e.ALo(94,"mytranslate"),e.qZA()()(),e.TgZ(95,"tbody"),e.YNc(96,v4,6,7,"ng-template",10),e.YNc(97,F4,3,2,"ng-container",8),e._UZ(98,"tr"),e.TgZ(99,"tr"),e._UZ(100,"td")(101,"td")(102,"td")(103,"td"),e.TgZ(104,"td",5),e._uU(105),e.ALo(106,"mytranslate"),e.qZA(),e._UZ(107,"td"),e.qZA()()()),2&t&&(e.MGl("id","table_",i.tableType,""),e.xp6(5),e.AsE("",e.lcZ(6,114,"lang_testbank_testted_list_subject_exam"),": ",i.examObj.name,""),e.xp6(4),e.hij("",e.lcZ(10,116,"lang_testbank_testted_list_time_exam"),":"),e.xp6(3),e.AsE("",i.examObj.minutes," ",e.lcZ(13,118,"lang_testbank_testted_list_minute"),""),e.xp6(3),e.hij("",e.lcZ(16,120,"lang_testbank_testted_list_total_question"),":"),e.xp6(3),e.Oqu(2==i.examObj.mixQuestion?i.examObj.limitMixQuestion:i.examObj.countQuestion),e.xp6(3),e.hij("",e.lcZ(22,122,"lang_auto_kieu_export"),":"),e.xp6(3),e.Oqu(e.lcZ(25,124,i.checkTypeTable())),e.xp6(4),e.AsE("",e.lcZ(29,126,"lang_testbank_testted_list_time_export"),": ",e.lcZ(30,128,i.currentDate),""),e.xp6(6),e.uIk("excelWidth",25)("excelRow",5)("excelColumn",0)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(36,130,"lang_first_and_last_name")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(39,132,"lang_testbank_testted_list_class")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(42,134,"lang_birthday")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",3)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(45,136,"lang_gender")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",4)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(48,138,"lang_auto_so_bao_danh")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",5)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(51,140,"lang_auto_ma_de_thi")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",6)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(54,142,"lang_testbank_testted_tested_time_exams")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",7)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(57,144,"lang_testbank_testted_list_number_exams")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",8)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(60,146,"lang_testbank_testted_list_time_start")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",9)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(63,148,"lang_testbank_testted_list_time_end")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",10)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(66,150,"lang_testbank_testted_list_time_homework")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",11)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(69,152,"lang_testbank_testted_list_time_homework_only_minutes")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",12)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(72,154,"lang_testbank_testted_list_number_success")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",13)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(75,156,"lang_testbank_testted_list_error")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",14)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(78,158,"lang_testbank_testted_list_test_score")),e.xp6(2),e.Q6J("ngIf",i.hasEssayQuestion),e.xp6(1),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.hasEssayQuestion?16:15)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(82,160,"lang_testbank_testted_list_total_point")),e.xp6(2),e.Q6J("ngIf",i.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",i.maxGroupQuestion>0),e.xp6(1),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1))("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(87,162,"lang_testbank_testted_list_exit_full_screen")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1)+1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(90,164,"lang_testbank_testted_list_exit_brower")),e.xp6(2),e.Q6J("ngForOf",i.createFakeArr(i.totalQuestion)),e.xp6(1),e.uIk("excelWidth",50)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(2)+1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(94,166,"lang_testbank_testted_list_additional_information")),e.xp6(3),e.Q6J("ngForOf",i.dataScoreByClass),e.xp6(1),e.Q6J("ngIf",i.dataScore.length),e.xp6(8),e.hij("",e.lcZ(106,168,"lang_testbank_testted_list_teacher_confirmed"),":"))},dependencies:[M.sg,M.O5,M.JJ,re.bT,re.t9,re.q7,re._I,re.ab],encapsulation:2}),n})();class R4{constructor(){this.x=0,this.y=0}toBase64String(){return(new Si).writeCvPoint2u(this).toBase64String()}}class os{constructor(){this.x=0,this.y=0}toBase64String(){return(new Si).writeCvPoint2f(this).toBase64String()}}class hu{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new Si).writeCvRect2f(this).toBase64String()}}class B4{constructor(){this.center=new os,this.filled=!1}toBase64String(){return(new Si).writeAnswerCircle(this).toBase64String()}}class al{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Si).writeTableAnswer(this).toBase64String()}}class fm{constructor(){this.top=new os,this.left=new os,this.bottom=new os,this.right=new os}toBase64String(){return(new Si).writeResultRect(this).toBase64String()}}class z4{constructor(){this.id=0,this.region=new hu}toBase64String(){return(new Si).writeCropRegion(this).toBase64String()}}class J4{constructor(){this.existed=!1,this.image=[],this.answer=0,this.answerRegion=new hu}toBase64String(){return(new Si).writeHandwrittenRect(this).toBase64String()}}class H4{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new fm,this.studentId=new al,this.examId=new al,this.answerTable=new al,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.examIdNum=0,this.teacherScore=0,this.cropRegion=[],this.answersHandwritten=[],this.teacherScoreTb=[]}toBase64String(){return(new Si).writeResultOutput(this).toBase64String()}}class K4{constructor(){this.imageType=0,this.templateType=0,this.imageWidth=0,this.imageHeight=0,this.imageLength=0,this.numOfQuestion=0}toBase64String(){return(new Si).writeAnswerSheetInput(this).toBase64String()}}class xm{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new Si).writeSmallAnswerCircle(this).toBase64String()}}class as{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Si).writeSmallTableAnswer(this).toBase64String()}}class bm{constructor(){this.studentId=new as,this.examId=new as,this.answerTable=new as}toBase64String(){return(new Si).writeDrawData(this).toBase64String()}}class $4{constructor(o){this.bytes=o,this.cursor=0,this.length=o.byteLength}updateCursor(o){if(this.cursor=this.cursor+o,this.cursor>=this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let o=this.bytes[this.cursor];return this.updateCursor(1),o}parseInt(){let o=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(o).getInt32(0)}parseDouble(){let o=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(o).getFloat64(0,!0)}parseString(){let o=new TextDecoder("utf-8"),t=this.cursor,i=this.bytes[this.cursor];for(;0!=i;)this.updateCursor(1),i=this.bytes[this.cursor];let a=this.bytes.slice(t,this.cursor),s=o.decode(a);return this.updateCursor(1),s}parseBool(){let o=this.bytes[this.cursor];return this.updateCursor(1),o>0}parseCvPoint2u(){let o=new R4;return o.x=this.parseUchar(),o.y=this.parseUchar(),o}parseCvPoint2f(){let o=new os;return o.x=this.parseDouble(),o.y=this.parseDouble(),o}parseCvRect2f(){let o=new hu;return o.x=this.parseDouble(),o.y=this.parseDouble(),o.width=this.parseDouble(),o.height=this.parseDouble(),o}parseAnswerCircle(){let o=new B4;return o.center=this.parseCvPoint2f(),o.filled=this.parseBool(),o}parseTableAnswer(){let o=new al,t=0;o.rows=this.parseInt(),o.cols=this.parseInt(),o.radius=this.parseInt(),t=this.parseInt();for(let i=0;i<t;i++)o.answers.push(this.parseAnswerCircle());return o}parseResultRect(){let o=new fm;return o.top=this.parseCvPoint2f(),o.left=this.parseCvPoint2f(),o.bottom=this.parseCvPoint2f(),o.right=this.parseCvPoint2f(),o}parseCropRegion(){let o=new z4;return o.id=this.parseInt(),o.region=this.parseCvRect2f(),o}parseHandwrittenRect(){let o=new J4,t=0;o.existed=this.parseBool(),t=this.parseInt();for(let i=0;i<t;i++)o.image.push(this.parseUchar());return o.answer=this.parseInt(),o.answerRegion=this.parseCvRect2f(),o}parseResultOutput(){let o=new H4,t=0;o.type=this.parseInt(),o.errorCode=this.parseInt(),o.paperCorner=this.parseResultRect(),o.studentId=this.parseTableAnswer(),o.examId=this.parseTableAnswer(),o.answerTable=this.parseTableAnswer(),o.imageWidth=this.parseInt(),o.imageHeight=this.parseInt(),o.imageSize=this.parseInt(),o.examIdNum=this.parseInt(),o.teacherScore=this.parseDouble(),t=this.parseInt();for(let i=0;i<t;i++)o.cropRegion.push(this.parseCropRegion());t=this.parseInt();for(let i=0;i<t;i++)o.answersHandwritten.push(this.parseHandwrittenRect());t=this.parseInt();for(let i=0;i<t;i++)o.teacherScoreTb.push(this.parseAnswerCircle());return o}parseAnswerSheetInput(){let o=new K4;return o.imageType=this.parseInt(),o.templateType=this.parseInt(),o.imageWidth=this.parseInt(),o.imageHeight=this.parseInt(),o.imageLength=this.parseInt(),o.numOfQuestion=this.parseInt(),o}parseSmallAnswerCircle(){let o=new xm;return o.position=this.parseUchar(),o.x=this.parseUchar(),o.y=this.parseUchar(),o.filledCols=this.parseUchar(),o.rows=this.parseUchar(),o}parseSmallTableAnswer(){let o=new as,t=0;o.rows=this.parseUchar(),o.cols=this.parseUchar(),o.radius=this.parseUchar(),t=this.parseInt();for(let i=0;i<t;i++)o.answers.push(this.parseSmallAnswerCircle());return o}parseDrawData(){let o=new bm;return o.studentId=this.parseSmallTableAnswer(),o.examId=this.parseSmallTableAnswer(),o.answerTable=this.parseSmallTableAnswer(),o}}const Do=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class Si{constructor(){this.bytes=[]}writeUchar(o){return this.bytes.push(o),this}writeUint8Array(o){for(let t=0;t<o.length;t++)this.bytes.push(o[t]);return this}writeArrayBuffer(o){let t=new Uint8Array(o);return this.writeUint8Array(t),this}writeInt(o){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,o,!1),this.writeArrayBuffer(t),this}writeDouble(o){let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,o,!0),this.writeArrayBuffer(t),this}writeString(o){let i=(new TextEncoder).encode(o);return this.writeUint8Array(i),this.writeUchar(0),this}writeBool(o){return this.writeUchar(o?1:0),this}toBase64String(){return function Y4(n){let t,o="",i=n.length;for(t=2;t<i;t+=3)o+=Do[n[t-2]>>2],o+=Do[(3&n[t-2])<<4|n[t-1]>>4],o+=Do[(15&n[t-1])<<2|n[t]>>6],o+=Do[63&n[t]];return t===i+1&&(o+=Do[n[t-2]>>2],o+=Do[(3&n[t-2])<<4],o+="=="),t===i&&(o+=Do[n[t-2]>>2],o+=Do[(3&n[t-2])<<4|n[t-1]>>4],o+=Do[(15&n[t-1])<<2],o+="="),o}(new Uint8Array(this.bytes))}writeCvPoint2u(o){return this.writeUchar(o.x),this.writeUchar(o.y),this}writeCvPoint2f(o){return this.writeDouble(o.x),this.writeDouble(o.y),this}writeCvRect2f(o){return this.writeDouble(o.x),this.writeDouble(o.y),this.writeDouble(o.width),this.writeDouble(o.height),this}writeAnswerCircle(o){return this.writeCvPoint2f(o.center),this.writeBool(o.filled),this}writeTableAnswer(o){this.writeInt(o.rows),this.writeInt(o.cols),this.writeInt(o.radius),this.writeInt(o.answers.length);for(let t of o.answers)this.writeAnswerCircle(t);return this}writeResultRect(o){return this.writeCvPoint2f(o.top),this.writeCvPoint2f(o.left),this.writeCvPoint2f(o.bottom),this.writeCvPoint2f(o.right),this}writeCropRegion(o){return this.writeInt(o.id),this.writeCvRect2f(o.region),this}writeHandwrittenRect(o){this.writeBool(o.existed),this.writeInt(o.image.length);for(let t of o.image)this.writeUchar(t);return this.writeInt(o.answer),this.writeCvRect2f(o.answerRegion),this}writeResultOutput(o){this.writeInt(o.type),this.writeInt(o.errorCode),this.writeResultRect(o.paperCorner),this.writeTableAnswer(o.studentId),this.writeTableAnswer(o.examId),this.writeTableAnswer(o.answerTable),this.writeInt(o.imageWidth),this.writeInt(o.imageHeight),this.writeInt(o.imageSize),this.writeInt(o.examIdNum),this.writeDouble(o.teacherScore),this.writeInt(o.cropRegion.length);for(let t of o.cropRegion)this.writeCropRegion(t);this.writeInt(o.answersHandwritten.length);for(let t of o.answersHandwritten)this.writeHandwrittenRect(t);this.writeInt(o.teacherScoreTb.length);for(let t of o.teacherScoreTb)this.writeAnswerCircle(t);return this}writeAnswerSheetInput(o){return this.writeInt(o.imageType),this.writeInt(o.templateType),this.writeInt(o.imageWidth),this.writeInt(o.imageHeight),this.writeInt(o.imageLength),this.writeInt(o.numOfQuestion),this}writeSmallAnswerCircle(o){return this.writeUchar(o.position),this.writeUchar(o.x),this.writeUchar(o.y),this.writeUchar(o.filledCols),this.writeUchar(o.rows),this}writeSmallTableAnswer(o){this.writeUchar(o.rows),this.writeUchar(o.cols),this.writeUchar(o.radius),this.writeInt(o.answers.length);for(let t of o.answers)this.writeSmallAnswerCircle(t);return this}writeDrawData(o){return this.writeSmallTableAnswer(o.studentId),this.writeSmallTableAnswer(o.examId),this.writeSmallTableAnswer(o.answerTable),this}}const G4=["fileInput"],W4=["fileInputMobile"];function V4(n,o){1&n&&(e.TgZ(0,"p",17),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_he_thong_dang_tai_cong_cu_doing")))}function X4(n,o){1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dang_quet_bai_tu_phieu_scan_doing")))}function ew(n,o){1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_quet_thanh_cong")," "))}function tw(n,o){1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"span",24),e.qZA()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"lang_auto_he_thong_dang_luu_bai_vui_long_khong_thoat_trinh_duyet"),"\xa0"))}function nw(n,o){1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_cham_thanh_cong")," "))}function iw(n,o){1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_cham_khong_thanh_cong")," "))}function ow(n,o){if(1&n&&(e.TgZ(0,"b",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.doneFileScan-t.uploadFileScanError.length,"/",t.totalFileScan,"")}}function aw(n,o){if(1&n&&(e.TgZ(0,"b",25),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE("",t.saveSuccessCount,"/",t.totalFileScan,"")}}function sw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"p",26)(1,"a",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showStudentList())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_xem_danh_sach")," "))}function rw(n,o){if(1&n&&(e.TgZ(0,"div",18)(1,"p",19),e.YNc(2,X4,3,3,"span",20),e.YNc(3,ew,3,3,"span",20),e.YNc(4,tw,4,3,"span",20),e.YNc(5,nw,3,3,"span",20),e.YNc(6,iw,3,3,"span",20),e.YNc(7,ow,2,2,"b",21),e.YNc(8,aw,2,2,"b",21),e.qZA(),e.YNc(9,sw,4,3,"p",22),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.scanningStatus.isScanning),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isScanDone&&!t.scanningStatus.isSavingDone&&!t.scanningStatus.isSaving&&!t.scanningStatus.isSavingFail),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isSaving),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isSavingDone),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isSavingFail),e.xp6(1),e.Q6J("ngIf",!t.scanningStatus.isSavingDone&&t.totalFileScan>0),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isSavingDone&&t.totalFileScan>0),e.xp6(1),e.Q6J("ngIf",t.scanningStatus.isSavingDone)}}function lw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"p",28),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"b",29),e._uU(5),e.qZA(),e._uU(6," file. \xa0"),e.qZA(),e.TgZ(7,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showScanFalseFiles())}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,4,"lang_auto_da_xay_ra_loi_scan_o")," "),e.xp6(3),e.AsE("",t.uploadFileScanError.length,"/",t.totalFileScan," "),e.xp6(3),e.hij(" ",e.lcZ(9,6,"lang_auto_xem_chi_tiet")," ")}}function cw(n,o){if(1&n&&(e.TgZ(0,"p",28),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.HOy(" ",e.lcZ(2,4,"lang_auto_ma_de"),": ",i.replaceDigit(t.offlineMixquestionHashId,!1)," ",e.lcZ(3,6,"lang_auto_-_so_bao_danh"),": ",i.replaceDigit(t.studentCode,!0)," ")}}function uw(n,o){if(1&n&&(e.TgZ(0,"div",31)(1,"p",28),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",32),e.YNc(5,cw,4,8,"p",33),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_du_lieu_luu_loi"),":"),e.xp6(3),e.Q6J("ngForOf",t.invalidDataCallMarkObjs)}}function dw(n,o){1&n&&(e.TgZ(0,"p",35),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_scan_file_support_v2")))}function mw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectFileClick())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chon_thu_muc_file_scan")," "))}function _w(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",34)(1,"p",35),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,dw,3,3,"p",36),e.YNc(5,mw,3,3,"button",37),e.TgZ(6,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectFileClick(!0))}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobile),e.xp6(2),e.hij(" ",e.lcZ(8,6,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function pw(n,o){1&n&&(e.TgZ(0,"p",35),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_scan_file_support_v2")))}function hw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"button",46),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectFileClick())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_chon_thu_muc_file_scan")," "))}const gw=function(n){return{"pl-0":n}};function fw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"p",35),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,pw,3,3,"p",36),e.TgZ(5,"div",41),e.YNc(6,hw,4,3,"div",42),e.TgZ(7,"div",43)(8,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.selectFileClick(!0))}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("ngIf",!t.isMobile),e.xp6(1),e.Q6J("ngClass",e.VKq(9,gw,!t.isMobile)),e.xp6(2),e.hij(" ",e.lcZ(10,7,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function xw(n,o){1&n&&(e.TgZ(0,"mat-icon",52),e._uU(1,"double_arrow"),e.qZA())}function bw(n,o){if(1&n&&(e.TgZ(0,"div",47)(1,"div",48),e._UZ(2,"div",49),e.YNc(3,xw,2,0,"mat-icon",50),e._UZ(4,"div",51),e.qZA()()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.doneFileScan>0)}}function vw(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function yw(n,o){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"div",13)(3,"div",14),e.qZA()()),2&n){const t=e.oxw().index;e.xp6(2),e.s9C("id","processFileScan"+t),e.xp6(1),e.s9C("id","doneFileScan"+t)}}function ww(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"p"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,yw,4,2,"div",10),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.xp6(2),e.AsE("",i+1,".\xa0",e.lcZ(3,3,a.getErrorCode(t.errorMessage?t.errorMessage:"")),""),e.xp6(2),e.Q6J("ngIf",t.img_in||t.img_out)}}function Cw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.YNc(6,ww,5,5,"div",6),e.TgZ(7,"div",7)(8,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onNoClick())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,3,"lang_auto_anh_scan_loi")," "),e.xp6(2),e.Q6J("ngForOf",t.data),e.xp6(3),e.hij(" ",e.lcZ(10,5,"lang_auto_dong")," ")}}const gu=".has-bg[_ngcontent-%COMP%]{background:inherit;background-color:#f1f1f1;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dfdfdf;border-radius:4px;box-shadow:none}.btn-custom-file-scan[_ngcontent-%COMP%]{display:block;background:#2361ae!important;color:#fff!important;transition:all .5s}.link__color[_ngcontent-%COMP%]{color:#0eafc0!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}.status_saving[_ngcontent-%COMP%]{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:#0000007b}.scan-file-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;transform:translate(-50%,-50%)}.scan-file-body[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;max-height:70vh}@media (max-width: 820px){.btn-custom-file-scan[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 768px){.scan-file-body[_ngcontent-%COMP%]{height:calc(100vh - 250px);position:relative}.scan-file-content[_ngcontent-%COMP%]{transform:none!important;top:0;left:0;height:100%}.arrow_icon[_ngcontent-%COMP%]{margin-left:5px!important;width:100%!important}}";function kw(n,o){1&n&&(e.TgZ(0,"div",3)(1,"p",9),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_khong_the_tao_de_thi_offline_voi_de_dang_docx")))}function Tw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"p",9),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"a",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToCreateOfflineTest())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.hij("",e.lcZ(3,2,"lang_testbank_tested_list_no_exam_offline_scan"),"\xa0 "),e.xp6(3),e.Oqu(e.lcZ(6,4,"lang_testbank_test_list_scan_tutorial_click_here")))}const yi=100,Aw=["lang_auto_khong_trang_giay_nao_duoc_tim_thay","lang_auto_trang_giay_qua_nho_camera_dat_qua_xa_trang_giay","lang_auto_khong_nhan_dien_duoc_loai_mau_nao_trong_trang_giay","","lang_auto_khong_tim_thay_duoc_bang_dap_an","lang_auto_bang_dap_an_qua_xa_camera","lang_auto_ma_de_loi_sai_cau_truc_bang_viet_tay","lang_auto_danh_sach_anh_tra_ra_bi_thieu","lang_auto_qua_trinh_nhan_dien_ma_de_loi"];let Ow=(()=>{class n extends W.Q{selectFileClick(t){this.hasExamOffline?this.permissionService.hasMarkPointPermission("exam",this.examObj?.permissionObj)?this.loadedJs?this.fileInput&&(this.doneFileScan=0,this.doneFileScanMarked=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&t?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0)):this.loadingFileJs().then(()=>{this.loadingFileJS=!1,this.fileInput&&(this.doneFileScan=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.doneFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&t?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0))}).catch(i=>{this.loadingFileJS=!1,this.showErrorSnack(this.commonService.myTranslateInstant(i.message)??"")}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay"):this.examOfflineMessage&&""!=this.examOfflineMessage?this.showErrorSnack(this.examOfflineMessage):this.dialog.open(Ew,{width:"60vw",restoreFocus:!1,data:{examObj:this.examObj,backToLink:this.backToLink}}).afterClosed().subscribe(a=>{})}getFileLocal(t){var i=new FileReader;i.onload=()=>{if(i.result&&"string"!=typeof i.result){var s=new Uint8Array(i.result);this.totalFileScan++,this.isSelectedFile=!0,this.scanningStatus.isScanning=!0,this.addQueueFileScan(s)}},i.readAsArrayBuffer(t)}addQueueFileScan(t){this.queueUploadFileScan.push(t),this.processQueueFileScan()}processQueueFileScan(){if(!this.isProcessingFileScan&&0!=this.queueUploadFileScan.length&&!this.isSaving){var t=this.queueUploadFileScan.shift();t&&this.processImg(t)}}processImg(t){var i=this;return(0,$n.Z)(function*(){i.isProcessingFileScan=!0;try{if(null!=typeof imgsdk&&window.hasOwnProperty("imgsdk")){yield imgsdk.init();var a=i.userService.getUserObj(),s=yield imgsdk.processAnswerSheet({src:t,width:720,height:1280,token:i.tokenScan,uid:a.id?.toString()});s&&(i.doneFileScan++,s.Result&&(s.page=new $4(s.Result).parseResultOutput()),console.log("Angular obj",s)),0==i.queueUploadFileScan.length&&(i.scanningStatus.isScanning=!1,i.scanningStatus.isScanDone=!0),(0!=s.code||i.existStudentCodeAndExamId(i.convertStringToNumber(s.StudentId),i.convertStringToNumber(s.ExamId)))&&(0!=s.code?s.errorMessage=Aw[s.code-1]??"process_scan_false":i.existStudentCodeAndExamId(i.convertStringToNumber(s.StudentId),i.convertStringToNumber(s.ExamId))&&(s.errorMessage="exist_exam_id_and_student_code"),s.img_in&&i.uploadFileToCdn(s.img_in,0,!0),i.uploadFileScanError.push(s)),i.addQueueSaveMarkObj(s),i.showOutput(s)}}catch{}i.isProcessingFileScan=!1,i.processQueueFileScan()})()}showOutput(t){var i=document.getElementById("processFileScan"),a=document.getElementById("doneFileScan");i&&a&&(i.innerHTML="",a.innerHTML="",t.img_in.width=144,t.img_in.height=207,i.appendChild(t.img_in),t.img_out&&(t.img_out.width=144,t.img_out.height=207,t.img_out.style.marginLeft=this.isMobile?"20px":"30px",t.img_out.style.display="inline",t.img_out.style.verticalAlign="middle",a.appendChild(t.img_out)))}addQueueSaveMarkObj(t){t&&(this.queueSaveMarkObj.push(t),this.totalFileScanMarked++),this.isSaving||this.processQueueSaveMarkObj()}processQueueSaveMarkObj(){if(!this.isProcessingSaveMark&&0!=this.queueSaveMarkObj.length&&!this.isSaving){var t=this.queueSaveMarkObj.shift();t&&this.processSaveMarkObj(t)}}callSaveMarkObj(t){this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultMarkObjsV2Post(this.examObj.hashId??"",this.removeObjScanToSaveObjs(this.arrDataCallMarkObjs)).subscribe(i=>{if(i&&1==i.success){var a=i.data?.studentCodeToSuccessIds??{};this.firstSuccessResultId.emit(i.data?.firstSuccessResultId),i.data?.invalidData&&i.data?.invalidData.length>0&&(this.invalidDataCallMarkObjs=[...this.invalidDataCallMarkObjs,...i.data?.invalidData]),Object.keys(a).length>0?this.getUrlForImgScan(a,t).then(s=>{this.updateImgUrlForScan(s,t)}):t?(this.arrDataCallMarkObjs.splice(0,yi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len")))}else t?(this.arrDataCallMarkObjs.splice(0,yi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len")))}))}removeObjScanToSaveObjs(t){for(var i=[],a=t.length<yi?t.length:yi,s=0;s<a;s++)i.push({index:t[s].index,studentCode:t[s].studentCode,offlineMixquestionHashId:t[s].offlineMixquestionHashId,studentCodeLength:t[s].studentCodeLength,offlineMixquestionHashIdLength:t[s].offlineMixquestionHashIdLength,images:t[s].images,imagesData:t[s].imagesData,nameImages:t[s].nameImages,templateType:t[s].templateType,nameImagesData:"",rawStudentCode:0,rawOfflineMixQuestionHashId:0,isSuccess:!0});return i}getNamePosForStudent(){return new Promise(t=>{if(this.arrDataCallMarkObjs.length>0){for(var i=this.arrDataCallMarkObjs.length<=yi?this.arrDataCallMarkObjs.length:yi,a=0;a<i;a++)if(this.arrDataCallMarkObjs[a].objScan.page.cropRegion.length>0){let s=document.createElement("canvas");s.setAttribute("id","nameImage_"+a);const r=s.getContext("2d");let l=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.x??210,c=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.y??210,d=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.width??250,f=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.height??50;s.width=d,s.height=f,r?.drawImage(this.arrDataCallMarkObjs[a].objScan.img_out,l,c,d,f,0,0,d,f);let y=s.toDataURL("image/jpeg",.9);this.arrDataCallMarkObjs[a].nameImages={url:y,width:s.width,height:s.height,position:{x:0,y:0,width:d,height:f}}}t()}else t()})}getUrlForImgScan(t,i){return new Promise((a,s)=>{var r=[];for(var l in t)if(t.hasOwnProperty(l)){var c=this.arrDataCallMarkObjs.filter(y=>y.index?.toString()==l);let f=0;if(c&&c.length>0){var d=(y,O,N)=>{this.uploadFileToCdn(y,O,N).then(I=>{I.imgUrl?(r.push({id:I.id,images:{url:I.imgUrl,width:c[0].objScan.img_out.naturalWidth<720?720:c[0].objScan.img_out.naturalWidth,height:c[0].objScan.img_out.naturalHeight<1038?1038:c[0].objScan.img_out.naturalHeight}}),r.length==Object.keys(t).length&&a(r)):(f++,f<=2?setTimeout(()=>{d(y,O,N)},300):i?(this.arrDataCallMarkObjs.splice(0,yi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_file_scan_error_get_url"))))})};d(c[0].objScan.img_out,t[l],!1)}}})}updateImgUrlForScan(t,i){this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultUpdateImagesPost(this.examObj.hashId??"",t).subscribe(a=>{a&&1==a.success?(this.saveSuccessCount+=t.length,i?(this.arrDataCallMarkObjs.splice(0,yi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!1,this.scanningStatus.isSavingDone=!0,this.showSuccessSnack("lang_auto_luu_thanh_cong")),this.saveStudentMarkEmit.emit(!0)):(i&&(this.isSaving=!1,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:this.scanningStatus.isSavingFail=!0,this.showErrorSnack(a.message??""))}))}uploadFileToCdn(t,i,a){return new Promise(s=>{this.drawImgOutToCanvas(t).then(r=>{r?a?this.uploadApiService.uploadToCdnForFileScanError(r,this.examObj.hashId??"").subscribe(l=>{s(l&&1==l.success?{id:i,imgUrl:l.data?.url??""}:{id:i,imgUrl:""})}):this.uploadApiService.uploadToCdnForFileScanExamOffline(r).subscribe(l=>{s(l&&1==l.success?{id:i,imgUrl:l.data?.url??""}:{id:i,imgUrl:""})}):s({id:i,imgUrl:""})}).catch(r=>{s({id:i,imgUrl:""})})})}drawImgOutToCanvas(t){return new Promise((i,a)=>{var s=document.createElement("canvas");try{s.width=t.naturalWidth,s.height=t.naturalHeight,s.getContext("2d")?.drawImage(t,0,0,s.width,s.height),s.toBlob(l=>{let d=(new Date).getTime();var f=this.commonService.getRandomNumber(1e6,9999999);const y=new File([l],`azo_file_scan_${f}_${d}.jpeg`,{type:"image/jpeg"});i(y)},"image/jpeg",.9)}catch(r){a(r)}})}replaceDigit(t,i){var a=t.toString(),s=6;for(i||(s=3);a.length<s;)a="0"+a;return a}convertStringToNumber(t){for(var i=t.split(","),a="",s=0,r=0;r<i.length;r++)""!=i[r]?a+=i[r]:s++;return""!=a&&s<=1?parseInt(a,10):0}getScanFilePos(t){var i={version:"2.0"};return i.resultFilledPos=this.convertScanResult(t),JSON.stringify(i)}convertScanResult(t){let i=new bm;return i.examId=this.convertTableAnswerToSmallTableAnswer(t.examId),i.studentId=this.convertTableAnswerToSmallTableAnswer(t.studentId),i.answerTable=this.convertTableAnswerToSmallTableAnswer(t.answerTable),i.toBase64String()}convertTableAnswerToSmallTableAnswer(t){let i=new as;if(i.cols=t.cols,i.rows=t.rows,0==t.cols&&t.answers.length>0)return new as;i.radius=t.radius,i.answers=[];let a=t.answers;for(var s=0;s<a.length;s++){let c=a[s],d=new xm;var r=Math.floor(c.center.x),l=Math.floor(c.center.y);d.position=16*Math.floor(r/256)+Math.floor(l/256),d.x=r%256,d.y=l%256,d.filledCols=128*(c.filled?1:0)+s%t.cols,d.rows=Math.floor(s/t.cols),i.answers.push(d)}return i}existStudentCodeAndExamId(t,i){var a=0;if(0!=t&&0!=i)for(var s=0;s<this.listMapStudentCodeAndExamId.length;s++)if(this.listMapStudentCodeAndExamId[s].studentCode==t&&this.listMapStudentCodeAndExamId[s].examId==i){a++;break}return a>0}getScanAnswerContent(t){return t?t.split(","):[]}showScanFalseFiles(){this.dialog.open(Sw,{width:"80vw",data:this.uploadFileScanError,restoreFocus:!1}).afterClosed().subscribe(i=>{})}showStudentList(){this.openSelectFile=!1,this.showStudentMarkEmit.emit(!0)}askBeforeCloseWindow(t){return!this.scanningStatus.isSaving||(t.returnValue=!1)}loadingFileJs(){var t=this;return this.loadingFileJS=!0,new Promise((i,a)=>{var s=[{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(s).then((0,$n.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&i(!0),a(new Error("lang_core_lib_not_load"))):(t.countRetryLoadJS++,t.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):i(t.loadingFileJs()))},1e3)})).catch(r=>{a(new Error("lang_core_lib_not_load"))})})}ngOnChanges(){this.openSelectFile&&this.selectFileClick()}ngOnInit(){this.form=this.fb.group({fileScanner:new p.p4(""),fileScannerMobile:new p.p4("")}),this.openSelectFile&&this.selectFileClick(),this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,s,r,l,c){var d;super(),d=this,this.fb=t,this.offlineExamResultService=i,this.userService=a,this.cdnService=s,this.uploadApiService=r,this.permissionService=l,this.dialog=c,this.openSelectFile=!1,this.loadedJs=!1,this.hasExamOffline=!1,this.tokenScan="",this.examOfflineMessage="",this.backToLink="",this.saveStudentMarkEmit=new e.vpe,this.showStudentMarkEmit=new e.vpe,this.firstSuccessResultId=new e.vpe,this.form=new p.nJ({}),this.scanningStatus={isSaving:!1,isSavingDone:!1,isScanDone:!1,isScanning:!1,isSavingFail:!1},this.loadingFileJS=!1,this.isSelectedFile=!1,this.firstTimeScan=!0,this.isMobile=!1,this.queueUploadFileScan=[],this.uploadFileScanError=[],this.isProcessingFileScan=!1,this.doneFileScan=0,this.totalFileScan=0,this.queueSaveMarkObj=[],this.listMapStudentCodeAndExamId=[],this.isProcessingSaveMark=!1,this.doneFileScanMarked=0,this.totalFileScanMarked=0,this.saveSuccessCount=0,this.arrDataCallMarkObjs=[],this.invalidDataCallMarkObjs=[],this.countRetryLoadJS=0,this.isSaving=!1,this.moreThanMaxSaved=0,this.selectFileDirectory=function(){var f=(0,$n.Z)(function*(y){let I=y.target.files;try{let V=0;var z=[];for(var $ in I)if("length"!=$&&"item"!=$){var Y=I[$];Y.webkitRelativePath.indexOf("._")<0&&(Y.webkitRelativePath.indexOf(".jpg")>0||Y.webkitRelativePath.indexOf(".png")>0||Y.webkitRelativePath.indexOf(".tiff")>0||Y.webkitRelativePath.indexOf(".tif")>0||Y.webkitRelativePath.indexOf(".jpeg")>0)?z.push(Y):V++}!I||!I.length||V>=I?.length?d.showErrorSnack("lang_auto_thu_muc_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(z.forEach(te=>{d.getFileLocal(te)}),d.firstTimeScan=!1)}catch(V){console.log(V)}});return function(y){return f.apply(this,arguments)}}(),this.selectFile=function(){var f=(0,$n.Z)(function*(y){let I=y.target.files;try{let V=0,te=!1;var z=[];for(var $ in I)if("length"!=$&&"item"!=$){var Y=I[$];Y.name.indexOf("._")<0&&(Y.name.indexOf(".jpg")>0||Y.name.indexOf(".png")>0||Y.name.indexOf(".tiff")>0||Y.name.indexOf(".tif")>0||Y.name.indexOf(".jpeg")>0)?z.push(Y):((Y.name.indexOf(".heic")>0||Y.name.indexOf(".heif")>0)&&(te=!0),V++)}!I||V>=I?.length?d.showErrorSnack(te?"lang_auto_file_chon_co_heic_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai":"lang_auto_file_chon_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(z.forEach(K=>{d.getFileLocal(K)}),d.firstTimeScan=!1)}catch(V){console.log(V)}});return function(y){return f.apply(this,arguments)}}(),this.processSaveMarkObj=function(){var f=(0,$n.Z)(function*(y){d.isProcessingSaveMark=!0;try{if(y.page){var O={offlineMixquestionHashId:d.convertStringToNumber(y.ExamId),studentCode:d.convertStringToNumber(y.StudentId),studentCodeLength:y.StudentId?y.StudentId.split(",").length-1:0,offlineMixquestionHashIdLength:y.ExamId?y.ExamId.split(",").length-1:0,images:{url:"",width:y.img_out.naturalWidth<720?720:y.img_out.naturalWidth,height:y.img_out.naturalHeight<1038?1038:y.img_out.naturalHeight},imagesData:{content:d.getScanAnswerContent(y.Answers),pos:d.getScanFilePos(y.page)},templateType:y.page.type,objScan:y,nameImagesData:"",rawStudentCode:0,rawOfflineMixQuestionHashId:0,isSuccess:!0};0==y.code&&!d.existStudentCodeAndExamId(O.studentCode??0,O.offlineMixquestionHashId??0)&&(d.listMapStudentCodeAndExamId.push({studentCode:O.studentCode??0,examId:O.offlineMixquestionHashId??0}),O.index=d.arrDataCallMarkObjs.length,d.arrDataCallMarkObjs.push(O)),d.doneFileScanMarked++}let N=d.totalFileScan-d.uploadFileScanError.length;d.totalFileScan<=yi&&d.scanningStatus.isScanDone&&d.doneFileScanMarked>=N?(d.scanningStatus.isSaving=!0,d.getNamePosForStudent().then(()=>{d.callSaveMarkObj()})):d.doneFileScanMarked>=yi?d.isSaving||(d.isSaving=!0,d.getNamePosForStudent().then(()=>{d.callSaveMarkObj(!0)})):N>yi&&N%yi>0&&d.doneFileScanMarked==N-yi*d.moreThanMaxSaved&&d.moreThanMaxSaved==Math.floor(N/yi)?(d.scanningStatus.isSaving=!0,d.getNamePosForStudent().then(()=>{d.callSaveMarkObj()})):(d.isSaving||(d.scanningStatus.isScanDone?d.processQueueSaveMarkObj():d.processQueueFileScan()),console.log("processQueueSaveMarkObj",d.totalFileScan+"|"+d.scanningStatus.isScanDone+"|"+d.doneFileScanMarked+"|"+(d.totalFileScan-d.uploadFileScanError.length)+"|"+d.uploadFileScanError.length,d.saveSuccessCount)),d.isProcessingSaveMark=!1}catch(N){throw N}});return function(y){return f.apply(this,arguments)}}()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(Rn.$4),e.Y36(Qe.K),e.Y36(xt.U),e.Y36(Ln.$),e.Y36(eo.$),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-scan-offline-exam-new"]],viewQuery:function(t,i){if(1&t&&(e.Gf(G4,5),e.Gf(W4,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.fileInput=a.first),e.iGM(a=e.CRH())&&(i.fileInputMobile=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("beforeunload",function(s){return i.askBeforeCloseWindow(s)},!1,e.Jf7)},inputs:{openSelectFile:"openSelectFile",examObj:"examObj",loadedJs:"loadedJs",hasExamOffline:"hasExamOffline",tokenScan:"tokenScan",examOfflineMessage:"examOfflineMessage",backToLink:"backToLink"},outputs:{saveStudentMarkEmit:"saveStudentMarkEmit",showStudentMarkEmit:"showStudentMarkEmit",firstSuccessResultId:"firstSuccessResultId"},features:[e.qOj,e.TTD],decls:18,vars:9,consts:[[1,"absolute","h-full","w-full","bg-white","dark:bg-darkmode-600","top-0","left-0","z-50"],[1,"scan-file-body"],[1,"scan-file-content"],[3,"formGroup","hidden"],["type","file","formControlName","fileScanner","webkitdirectory","","multiple","",1,"form-control",3,"change"],["fileInput",""],["type","file","formControlName","fileScannerMobile","accept","image/*","multiple","",1,"form-control",3,"change"],["fileInputMobile",""],[1,"mx-auto","px-4"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-5","self-center"],["class","h5",4,"ngIf"],["class","flex items-center",4,"ngIf"],["class","items-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-12 align-self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-right",4,"ngIf"],[1,"h5"],[1,"flex","items-center"],[1,"h6"],["class","mb-1 mr-1","style","font-weight: 400;",4,"ngIf"],["style","font-size: 15px; font-weight: 550;",4,"ngIf"],["class","ml-2",4,"ngIf"],[1,"mb-1","mr-1",2,"font-weight","400"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","15px","font-weight","550"],[1,"ml-2"],["azt-track-service","file-scan-offline-UDkBx5P8HR",1,"link__color","link__hover",3,"click"],[1,"mb-0",2,"font-size","14px","font-weight","400"],[2,"color","#DD0000","font-size","15px"],["azt-track-service","file-scan-offline-Y3xSQzwONg",1,"link__color","link__hover",3,"click"],[1,"items-center"],[1,"items-center",2,"max-height","150px","overflow-y","auto"],["class","mb-0","style","font-size: 14px; font-weight: 400",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-7","self-center","text-center"],[1,"mb-1",2,"font-size","14px"],["class","mb-1","style","font-size: 14px;",4,"ngIf"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","","class","btn-custom-file-scan","style","text-transform: none; margin-left: auto!important; margin-right: auto!important;",3,"click",4,"ngIf"],["azt-track-service","file-scan-offline-rLjSHvBSxk","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important","margin-top","0.75rem!important",3,"click"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important",3,"click"],[1,"col-span-12","md:col-span-12","align-self-center","text-center"],[1,"flex","flex-col","md:flex-row","mx-auto",2,"justify-content","center"],["class","mt-3 mr-3",4,"ngIf"],[1,"mt-3",3,"ngClass"],["azt-track-service","file-scan-offline-QP5Xn4YbcL",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"mt-3","mr-3"],["azt-track-service","file-scan-offline-rjEiLoTin7",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"col-span-12","md:col-span-7","self-center","text-right"],[1,"inline-flex","w-full","items-center","justify-end"],["id","processFileScan"],["style","vertical-align: middle; margin-left: 30px; color: #2361ae",4,"ngIf"],["id","doneFileScan"],[2,"vertical-align","middle","margin-left","30px","color","#2361ae"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"input",4,5),e.NdJ("change",function(s){return i.selectFileDirectory(s)}),e.qZA(),e.TgZ(6,"input",6,7),e.NdJ("change",function(s){return i.selectFile(s)}),e.qZA()(),e.TgZ(8,"div",8)(9,"div",9)(10,"div",10),e.YNc(11,V4,3,3,"p",11),e.YNc(12,rw,10,8,"div",12),e.YNc(13,lw,10,8,"div",12),e.YNc(14,uw,6,4,"div",13),e.qZA(),e.YNc(15,_w,9,8,"div",14),e.YNc(16,fw,11,11,"div",15),e.YNc(17,bw,5,1,"div",16),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("formGroup",i.form)("hidden",!0),e.xp6(8),e.Q6J("ngIf",i.loadingFileJS),e.xp6(1),e.Q6J("ngIf",i.isSelectedFile),e.xp6(1),e.Q6J("ngIf",i.uploadFileScanError.length>0),e.xp6(1),e.Q6J("ngIf",i.invalidDataCallMarkObjs.length>0),e.xp6(1),e.Q6J("ngIf",(i.scanningStatus.isSavingDone||i.scanningStatus.isSavingFail)&&!i.scanningStatus.isSaving&&!i.firstTimeScan),e.xp6(1),e.Q6J("ngIf",i.firstTimeScan),e.xp6(1),e.Q6J("ngIf",i.isSelectedFile&&!i.scanningStatus.isSavingDone&&!i.scanningStatus.isSavingFail))},dependencies:[M.mk,M.sg,M.O5,Di.lW,vn.Hw,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],styles:[gu]}),n})(),Sw=(()=>{class n extends W.Q{constructor(t,i){super(),this.dialogRef=t,this.data=i,this.isMobile=!1}getErrorCode(t){return"not_found_exam_id"==t?"lang_auto_khong_quet_duoc_ma_de":"not_found_student_code"==t?"lang_auto_khong_quet_duoc_so_bao_danh_hoc_sinh":"exist_exam_id_and_student_code"==t?"lang_auto_ma_de_ma_hoc_sinh_khong_ton_tai_dot":"process_scan_false"==t?"lang_auto_loi_trong_qua_tring_scan_khong_hien_thi_anh_ket_qua":t}processData(){this.data.forEach((t,i)=>{var a=document.getElementById("processFileScan"+i),s=document.getElementById("doneFileScan"+i);a&&s&&(t.img_in.width=.7*t.img_in.naturalWidth,t.img_in.style.height="auto",t.img_in.style.maxWidth="60%",t.img_in.classList.add("img-fluid"),a.appendChild(t.img_in),t.img_out&&(t.img_out.width=.7*t.img_in.naturalWidth,t.img_out.classList.add("img-fluid"),t.img_out.style.marginLeft=this.isMobile?"5px":"15px",t.img_out.style.display="inline",t.img_out.style.verticalAlign="middle"))})}onNoClick(){this.dialogRef.close(!1)}ngAfterViewInit(){var t=document.getElementById("processFileScan0");document.getElementById("doneFileScan0")&&t&&this.processData()}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["scan-false-dialog-new"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"text-xl","font-medium","items-center","my-2"],["class","mt-2 mx-auto",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-QIrwUMpnlE",1,"btn","w-24","btn-secondary",3,"click"],[1,"mt-2","mx-auto"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"inline-flex","w-full","items-center"],[1,"w-full","border","border-slate-200/60","rounded","mx-auto",3,"id"],[3,"id"]],template:function(t,i){if(1&t&&(e.YNc(0,vw,1,0,"azt-loading-effect",0),e.YNc(1,Cw,11,7,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",1==i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,jt.Q,re.bT],styles:[gu]}),n})(),Ew=(()=>{class n extends W.Q{constructor(t,i,a){super(),this.permissionService=t,this.dialogRef=i,this.data=a}redirectToCreateOfflineTest(){this.permissionService.hasFullPermission("exam",this.data.examObj?.permissionObj)?(this.commonService.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${this.data.examObj?.categoryId?this.data.examObj?.categoryId:0}/${this.data.examObj?.hashId}`,"?backto="+encodeURIComponent(this.data.backToLink??"")),this.dialogRef.close(!1)):this.showErrorSnack("lang_auto_ban_khong_co_quyen_tao_bai_thi_offline_cho_de_thi_nay")}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(eo.$),e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["no-exam-offline-dialog"]],features:[e.qOj],decls:19,vars:15,consts:[[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"mt-1","text-center"],[1,"text-medium","font-bold"],[1,"mt-2"],["class","mt-1 text-center",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-tvKJ1-tcNU","mat-raised-button","","color","basic",3,"click"],[1,"h6",2,"font-size","13px","color","#ACACAC"],["azt-track-service","file-scan-offline-_MOe_cWXcO",1,"link__color","link__hover",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",5)(8,"p"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.YNc(11,kw,4,3,"div",6),e.ALo(12,"isDocxOnly"),e.YNc(13,Tw,7,6,"div",6),e.ALo(14,"isPdfOnly"),e.TgZ(15,"div",7)(16,"button",8),e.NdJ("click",function(){return i.onNoClick()}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()()()),2&t){let a,s;e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_auto_cham_diem_thi_offline")),e.xp6(4),e.hij(" * ",e.lcZ(10,7,"lang_auto_note_use_case_file_scan_in_exam_offline")," "),e.xp6(2),e.Q6J("ngIf",e.lcZ(12,9,null!==(a=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==a?a:0)),e.xp6(2),e.Q6J("ngIf",e.lcZ(14,11,null!==(s=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==s?s:0)),e.xp6(4),e.Oqu(e.lcZ(18,13,"lang_auto_dong"))}},dependencies:[M.O5,Di.lW,re.bT,re.t5,re.yb],styles:[gu]}),n})();var Qs=S(87377);function Mw(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("\xa0",e.lcZ(2,1,"lang_auto_de_thi"),""))}function Iw(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("\xa0",e.lcZ(2,1,"lang_auto_bai_tap"),""))}function Lw(n,o){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.examObj.name)}}function Zw(n,o){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.homeworkObj.name)}}function Pw(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_de_thi")+" "))}function jw(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_bai_tap")+" "))}function Dw(n,o){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.examObj.name+" ")}}function Nw(n,o){if(1&n&&(e.TgZ(0,"span",19),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.homeworkObj.name+" ")}}function Qw(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",20)(2,"g",21)(3,"g",22),e._UZ(4,"circle",23),e.TgZ(5,"path",24),e._UZ(6,"animateTransform",25),e.qZA()()()()())}let fu=(()=>{class n extends W.Q{confirmDelete(){this.data.examObj?this.subscriptions.add(this.examService.apiExamDeleteObjIdGet(Number(this.data.examObj?.id)).subscribe(t=>{1==t.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(t.message??""))})):this.data.homeworkObj&&this.subscriptions.add(this.homeworkService.apiHomeworkDeleteObjGet(this.data.homeworkObj.hashId??"").subscribe(t=>{1==t.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(t.message??""))}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(t,i,a,s){super(),this.examService=t,this.homeworkService=i,this.dialogRef=a,this.data=s,this.form=new p.nJ({})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.Oe),e.Y36(Hi.Lk),e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-dialog"]],features:[e.qOj],decls:41,vars:25,consts:[[1,"box",2,"max-width","600px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger","flex-none"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,""],[2,"text-transform","lowercase"],[4,"ngIf"],["class","font-medium",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-K2F22n8QsM",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-6IvYAh7dZl",1,"btn","w-32","btn-danger",3,"disabled","click"],[1,"font-medium"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e.kcU(),e.TgZ(10,"div")(11,"span",10),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"span",11),e.YNc(15,Mw,3,3,"span",12),e.YNc(16,Iw,3,3,"span",12),e.qZA(),e._uU(17,": "),e.YNc(18,Lw,2,1,"span",13),e.YNc(19,Zw,2,1,"span",13),e.qZA()(),e.TgZ(20,"div",14)(21,"p",15)(22,"span"),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"span",11),e.YNc(26,Pw,3,3,"span",12),e.YNc(27,jw,3,3,"span",12),e.qZA(),e.YNc(28,Dw,2,1,"span",13),e.YNc(29,Nw,2,1,"span",13),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()()()()(),e.TgZ(33,"div",16)(34,"button",17),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"button",18),e.NdJ("click",function(){return i.confirmDelete()}),e.YNc(38,Qw,7,0,"span",12),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(12),e.Oqu(e.lcZ(13,15,"lang_auto_ban_co_chac_chan_muon_xoa")),e.xp6(3),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(2),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(4),e.Oqu(e.lcZ(24,17,"lang_auto_khi_xac_nhan")+", "),e.xp6(3),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(1),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(2),e.Oqu(e.lcZ(32,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),e.xp6(4),e.hij(" ",e.lcZ(36,21,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(40,23,"lang_cms_common_confirm_btn")," "))},dependencies:[M.O5,re.bT],encapsulation:2}),n})();var qw=S(74134);const qs=function(n){return{opacity:n}};function Fw(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"li",34),e.ALo(1,"viewPermission"),e.TgZ(2,"a",64),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),e.O4$(),e.TgZ(3,"svg",65),e._UZ(4,"path",66)(5,"polyline",22)(6,"path",67)(7,"path",68),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(7,qs,e.xi3(1,2,null==t.initData.examObj?null:t.initData.examObj.permissionObj,"exam")?"1":"0.5")),e.xp6(8),e.hij(" ",e.lcZ(9,5,"lang_auto_tra_ket_qua_thi_offline")," ")}}function Uw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDialogExamConfig("whoAllow"))}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",70)(3,"path",71),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function Rw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",74)(1,"a",75,4),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.redirectToClassDetail(a))}),e._uU(3),e.qZA()()}if(2&n){const t=e.MAs(2),i=e.oxw().$implicit;e.xp6(1),e.s9C("matTooltip",null==i.classObj?null:i.classObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.hij(" ",null==i.classObj?null:i.classObj.name," ")}}function Bw(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Rw,4,4,"div",73),e.BQk()),2&n){const t=o.$implicit;let i;e.xp6(1),e.Q6J("ngIf",(null!==(i=null==t.classObj?null:t.classObj.id)&&void 0!==i?i:0)>0)}}function zw(n,o){if(1&n&&(e.ynx(0),e.YNc(1,Bw,2,1,"ng-container",72),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.initData.studentsInClassResults)}}function Jw(n,o){1&n&&(e.TgZ(0,"div",76)(1,"a",77),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function Hw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToUpdateExam())}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",70)(3,"path",71),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function Kw(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDialogExamDetail())}),e.O4$(),e.TgZ(1,"svg",80),e._UZ(2,"path",81)(3,"polyline",22)(4,"line",82)(5,"line",83)(6,"line",84),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xem_chi_tiet")," "))}function $w(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"h3",31),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",32)(5,"ul",33)(6,"li",34),e.ALo(7,"deletePermission"),e.TgZ(8,"a",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDeleteExam())}),e.O4$(),e.TgZ(9,"svg",12),e._UZ(10,"path",36)(11,"path",37)(12,"path",38)(13,"line",39)(14,"line",40),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(17,"li",34),e.ALo(18,"editPermission"),e.TgZ(19,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToActionOnlOff())}),e.O4$(),e.TgZ(20,"svg",12),e._UZ(21,"path",42)(22,"circle",43),e.qZA(),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(25,"li",34),e.ALo(26,"statisticalPermission"),e.TgZ(27,"a",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToStatistical())}),e.O4$(),e.TgZ(28,"svg",45),e._UZ(29,"path",46)(30,"path",47),e.qZA(),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(33,"li",34),e.ALo(34,"viewPermission"),e.TgZ(35,"a",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openVideoMonitor())}),e.O4$(),e.TgZ(36,"svg",12),e._UZ(37,"circle",49)(38,"circle",50)(39,"path",51)(40,"path",52),e.qZA(),e._uU(41),e.ALo(42,"mytranslate"),e.qZA()(),e.YNc(43,Fw,10,9,"li",53),e.qZA()()(),e.kcU(),e.TgZ(44,"div",54)(45,"div",55)(46,"h3",31),e._uU(47),e.ALo(48,"mytranslate"),e.qZA(),e.YNc(49,Uw,6,3,"button",56),e.ALo(50,"editPermission"),e.ALo(51,"configPermission"),e.qZA(),e.TgZ(52,"div",57),e.YNc(53,zw,2,1,"ng-container",58),e.YNc(54,Jw,4,3,"ng-template",null,59,e.W1O),e.qZA()(),e.TgZ(56,"div",60)(57,"div",55)(58,"h3",31),e._uU(59),e.ALo(60,"mytranslate"),e.qZA(),e.YNc(61,Hw,6,3,"button",61),e.ALo(62,"editPermission"),e.qZA(),e.TgZ(63,"div",62),e.YNc(64,Kw,9,3,"button",63),e.ALo(65,"viewPermission"),e.qZA()()}if(2&n){const t=e.MAs(55),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,17,"lang_auto_menu")," "),e.xp6(4),e.Q6J("ngStyle",e.VKq(55,qs,e.xi3(7,19,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),e.xp6(9),e.hij(" ",e.lcZ(16,22,"lang_auto_xoa")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(57,qs,e.xi3(18,24,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),e.xp6(6),e.hij(" ",e.lcZ(24,27,"lang_auto_cai_dat")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(59,qs,e.xi3(26,29,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),e.xp6(6),e.hij(" ",e.lcZ(32,32,"lang_auto_thong_ke")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(61,qs,e.xi3(34,34,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),e.xp6(8),e.hij(" ",e.lcZ(42,37,"lang_auto_giam_sat_nang_cao")," "),e.xp6(2),e.Q6J("ngIf",!i.isNotTestedYet),e.xp6(4),e.hij(" ",e.lcZ(48,39,"lang_auto_giao_cho")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(50,41,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")||e.xi3(51,44,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),e.xp6(4),e.Q6J("ngIf",2==(null==i.initData.examObj?null:i.initData.examObj.whoAllow))("ngIfElse",t),e.xp6(6),e.hij(" ",e.lcZ(60,47,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(62,49,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(65,52,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam"))}}function Yw(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",85),e._UZ(2,"polyline",86),e.qZA()())}function Gw(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",85),e._UZ(2,"polyline",87),e.qZA()())}let Ww=(()=>{class n extends W.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}copyLinkToClipboard(){return this.linkExam}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.dialog.open(Qs._,{width:"600px",data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteExam(){this.permissionService.hasDeletePermission("exam",this.initData.examObj?.permissionObj)?this.dialog.open(fu,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogExamConfig(t){this.dialog.open(uu,{width:"750px",data:{hashId:this.initData.examObj?.hashId},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj=a,this.reloadApi.emit())})}openDialogExamDetail(){this.permissionService.hasViewPermission("exam",this.initData.examObj?.permissionObj)?(this.examDetailDialog={obj:this.initData.examObj?{...this.initData.examObj,attended:0}:void 0,curCateId:this.initData.examObj?.categoryId?this.initData.examObj?.categoryId:0,isOnLib:0,isShow:!0},this.dialog.open(cu,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:this.examDetailDialog,restoreFocus:!1}).afterClosed().subscribe(a=>{})):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}handleReturnOfflineShare(t){t?this.permissionService.hasViewPermission("exam",t.permissionObj)?this.dialog.open(Yr,{width:"600px",data:{examHashId:t.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToActionOnlOff(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj?.permissionObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectConfigExamOnline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj?.permissionObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj?.permissionObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openVideoMonitor(){if(3!=this.initData.examObj?.autoMonitor?this.permissionService.hasFullPermission("exam",this.initData.examObj?.permissionObj)&&this.permissionService.hasViewPermission("exam",this.initData.examObj?.permissionObj)?this.openDialogWaring("lang_auto_chua_bat_giam_sat_moi"):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):-1==this.currentSelectedClassroomId&&this.openDialogWaring("lang_auto_khong_giam_sat_lop_tu_do"),3==this.initData.examObj?.autoMonitor&&this.permissionService.hasViewPermission("exam",this.initData.examObj.permissionObj)&&-1!=this.currentSelectedClassroomId&&this.monitorService.checkValidForSetUpMonitor()){var i=this.userService.getUserObj();typeof aztExam<"u"&&aztExam&&(aztExam.ver=this.monitorService.getMNoteVer(),aztExam.showMonitorTeacher)&&aztExam.showMonitorTeacher({user:{token:i.rememberToken,userid:i.id,username:i.fullName},config:{domainApi:Ce.N.base_api,urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:this.initData.examObj?.hashId,examid:this.initData.examObj?.id,userlist:this.userList,examconfig:this.initData.examObj,firebaseApp:this.fireStoreService,filetypeStr:this.initData.fileTypeStr})}}redirectToClassDetail(t){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/class-details/${t.classObj?.id}`,`?backto=${i}`)}toggleFullDescription(){this.checkFullDescription=!this.checkFullDescription}redirectToUpdateExam(){let t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}`,`?backto=${encodeURIComponent(t)}`)}constructor(t,i,a,s,r,l){super(),this.dialog=t,this.permissionService=i,this.monitorService=a,this.userService=s,this.fireStoreService=r,this.homeworkExamService=l,this.initData={studentsNotInClassResults:[]},this.userList=[],this.isNotTestedYet=!1,this.currentSelectedClassroomId=-1,this.reloadApi=new e.vpe,this.isShowActions=!0,this.linkExam="",this.nextPage="",this.examDetailDialog={obj:void 0,curCateId:-1,isOnLib:-1,isShow:!1},this.loadingObj={},this.allQuestionObjs=[],this.dataMixQuestionObjs=[],this.offlineMixQuestionObjs=[],this.isLoadingLib=!1,this.checkFullDescription=!1}ngOnInit(){let t=this.commonService.getCurrentDomain();this.linkExam=`${t}/de-thi/${this.initData.examObj?.hashId}`,super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(eo.$),e.Y36(hm.M),e.Y36(Qe.K),e.Y36(qw.J),e.Y36(Aa.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-online-test"]],inputs:{initData:"initData",userList:"userList",isNotTestedYet:"isNotTestedYet",currentSelectedClassroomId:"currentSelectedClassroomId"},outputs:{reloadApi:"reloadApi"},features:[e.qOj],decls:47,vars:31,consts:[[1,"box","p-3",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","flex",2,"min-width","135px"],["azt-track-service","menu-online-test-e8RvVr3HPMz",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-online-test-JuzsQFkbn-n",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-online-test-353h1DUlYNc",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-online-test-gvg0oBjKoz0",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-online-test--xkt2Oho69C",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-online-test-SyHOcHV1qRi",1,"dropdown-item",3,"click"],["cx","12","cy","10","r","8"],["cx","12","cy","10","r","3"],["d","M7 22h10"],["d","M12 22v-4"],[3,"ngStyle",4,"ngIf"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],["azt-track-service","menu-online-test-B-MAROi1YQ-","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-online-test-IOoMXZJczdx","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-2"],["azt-track-service","menu-online-test-WA9SAv4z5tk","class","btn-text-primary font-medium",3,"click",4,"ngIf"],["azt-track-service","menu-online-test-A5ZKlgHQbp",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-online-test-B-MAROi1YQ-",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-6 md:col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-6","md:col-span-4","2lg:col-span-3"],["azt-track-service","menu-online-test-z2H-5NP7SkD",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-online-test-IOoMXZJczdx",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["azt-track-service","menu-online-test-WA9SAv4z5tk",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.showCopySuccess()}),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"rect",8)(10,"path",9),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.kcU(),e._UZ(13,"azt-download-qr-code",10),e.qZA()(),e.TgZ(14,"div",11),e.O4$(),e.TgZ(15,"svg",12),e._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),e.qZA(),e.kcU(),e.TgZ(20,"span",17),e._uU(21),e.ALo(22,"mytranslate"),e.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.TgZ(24,"div",11),e.O4$(),e.TgZ(25,"svg",12),e._UZ(26,"path",18)(27,"circle",19),e.qZA(),e.kcU(),e.TgZ(28,"span",17),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",11),e.O4$(),e.TgZ(32,"svg",20),e._UZ(33,"path",21)(34,"polyline",22)(35,"path",23),e.qZA(),e.kcU(),e.TgZ(36,"span",17),e._uU(37),e.ALo(38,"mytranslate"),e.ALo(39,"number"),e.qZA()(),e.TgZ(40,"div",24),e._UZ(41,"azt-share",25),e.qZA()(),e.YNc(42,$w,66,63,"ng-template",26),e.TgZ(43,"div",27)(44,"button",28),e.NdJ("click",function(){return i.toggleShowActions()}),e.YNc(45,Yw,3,0,"span",29),e.YNc(46,Gw,3,0,"span",29),e.qZA()()()),2&t){const a=e.MAs(4);let s;e.xp6(3),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),e.xp6(2),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard()),e.xp6(4),e.hij(" ",e.lcZ(12,19,"lang_auto_copy_link")," "),e.xp6(2),e.Q6J("fileName","azota_exam_qrcode_"+(null==i.initData.examObj?null:i.initData.examObj.hashId))("linkUrl",i.copyLinkToClipboard()),e.xp6(8),e.hij(" ",e.lcZ(22,21,"lang_testbank_tested_list_date_create")+": "+e.lcZ(23,23,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),e.xp6(8),e.hij(" ",e.lcZ(30,25,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),e.xp6(8),e.hij(" ",e.lcZ(38,27,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:e.lcZ(39,29,0))," "),e.xp6(4),e.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(s=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==s?s:0)("examWithPermissionObj",i.initData.examObj),e.xp6(1),e.Q6J("ngIf",i.isShowActions),e.xp6(3),e.Q6J("ngIf",i.isShowActions),e.xp6(1),e.Q6J("ngIf",!i.isShowActions)}},dependencies:[M.sg,M.O5,M.PC,ea.i3,Zt.gM,Ps.o,ho.Q,el.I,M.JJ,re.bT,re.BU,re.vL,re.Pz,re.El,re._W,re.tO],encapsulation:2}),n})();const Vw=function(n){return{"btn-primary":n}};function Xw(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.changeViewHashId(s))}),e._uU(2),e.ALo(3,"formatOfflineExamHashIdToNumber"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Vw,(null==t?null:t.offlineMixQuestionHashId)==i.curOfflineMixQuestionObj.offlineMixQuestionHashId)),e.xp6(1),e.hij(" ",e.lcZ(3,2,null==t?null:t.offlineMixQuestionHashId)," ")}}function e6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(),i=t.index,a=t.$implicit;e.xp6(1),e.hij(" ",i+1+"-"+e.lcZ(2,1,null==a?null:a.answer)," ")}}function t6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1+"-"+e.lcZ(2,1,"lang_core_essay_question")," ")}}function n6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij(" ",t+1+"-"+e.lcZ(2,1,"lang_core_fill_question")," ")}}function i6(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"button",17),e.YNc(2,e6,3,3,"span",18),e.YNc(3,t6,3,3,"span",18),e.YNc(4,n6,3,3,"span",18),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",!(null!=t&&t.isEssay||null!=t&&t.isFill)),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isEssay),e.xp6(1),e.Q6J("ngIf",null==t?null:t.isFill)}}function o6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dong")," "))}const vm=function(){return[]};let ym=(()=>{class n extends W.Q{closeDialog(){this.isDialog&&this.dialogRef.close()}changeViewHashId(t){this.curOfflineMixQuestionObj=t,this.checkTotalQuestion()}checkTotalQuestion(){this.totalQuestionAnswer=this.curOfflineMixQuestionObj.offlineQuestionObjs?.length??0}updateCodeExam(){let t=this.commonService.getMyQueryParam("backto")??"";t&&t.includes("shareType")&&(this.backToLink=this.backToLink+"?backto="+encodeURIComponent(t)),this.myNavigationWithQueryString(`/admin/testbank/update-exam-offline/${this.examObj.categoryId??0}/${this.examObj.hashId}/${this.curOfflineMixQuestionObj.offlineMixQuestionId}`,`?backto=${encodeURIComponent(this.backToLink)}`),this.closeDialog()}ngOnInit(){this.checkTotalQuestion()}constructor(t,i){super(),this.dialogRef=t,this.data=i,this.isDialog=!1,this.totalQuestionAnswer=0,i&&(this.isDialog=i.isDialog,this.offlineExportObj=i.offlineExportObj,this.curOfflineMixQuestionObj=i.curOfflineMixQuestionObj,this.backToLink=i.backToLink,this.examObj=this.offlineExportObj.examObj)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["preview-offline-exam"]],inputs:{isDialog:"isDialog",offlineExportObj:"offlineExportObj",curOfflineMixQuestionObj:"curOfflineMixQuestionObj",backToLink:"backToLink"},features:[e.qOj],decls:25,vars:20,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center","mt-2"],[1,"text-md","font-medium","inline-block","mr-2"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-4","overflow-auto",2,"height","50vh"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"text-md","px-3","mt-3"],[1,"inline-block","ml-1"],[1,"lowercase"],[1,"flex","items-center","p-3",2,"flex-wrap","wrap","padding-right","0"],["class","mr-3 mb-3 block-answer-offline h-full",4,"ngFor","ngForOf"],["class","text-right mt-4",4,"ngIf"],["azt-track-service","preview-offline-exam-Lnr2h-iZa9H",1,"btn","inline-block","border","border-slate-200","dark:border-darkmode-400","p-1","mr-2","text-center","w-12",3,"ngClass","click"],[1,"mr-3","mb-3","block-answer-offline","h-full"],[1,"btn","btn-secondary","btn-sm","w-full","h-full"],[4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-outline-secondary","w-24",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,Xw,4,6,"ng-container",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.updateCodeExam()}),e.TgZ(7,"span",5),e._UZ(8,"lucide-icon",6),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",7)(12,"ng-scrollbar",8)(13,"p",9),e._uU(14),e.ALo(15,"mytranslate"),e.TgZ(16,"span",10),e._uU(17),e.TgZ(18,"span",11),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e._uU(21,") "),e.qZA()(),e.TgZ(22,"div",12),e.YNc(23,i6,5,3,"div",13),e.qZA()()(),e.YNc(24,o6,4,3,"div",14),e.qZA()),2&t){let a,s;e.xp6(3),e.hij(" ",e.lcZ(4,10,"lang_auto_ma_de")+": "," "),e.xp6(2),e.Q6J("ngForOf",null!==(a=null==i.offlineExportObj?null:i.offlineExportObj.offlineMixQuestionObjs)&&void 0!==a?a:e.DdM(18,vm)),e.xp6(4),e.hij(" ",e.lcZ(10,12,"lang_auto_sua")," "),e.xp6(3),e.Q6J("visibility","hover")("autoHeightDisabled",!1),e.xp6(2),e.hij(" ",e.lcZ(15,14,"lang_auto_bang_dap_an")," "),e.xp6(3),e.hij(" (",i.totalQuestionAnswer," "),e.xp6(2),e.Oqu(e.lcZ(20,16,"lang_auto_cau")),e.xp6(4),e.Q6J("ngForOf",null!==(s=i.curOfflineMixQuestionObj.offlineQuestionObjs)&&void 0!==s?s:e.DdM(19,vm)),e.xp6(1),e.Q6J("ngIf",i.isDialog)}},dependencies:[M.mk,M.sg,M.O5,x.KC,h.Nh5,re.bT,re.q7],encapsulation:2}),n})();function a6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDeleteExam())}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",39)(3,"path",40)(4,"path",41)(5,"line",42)(6,"line",43),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xoa")," "))}function s6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToSettingExamOffline())}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",45)(3,"circle",46),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_cai_dat")," "))}function r6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToStatistical())}),e.O4$(),e.TgZ(1,"svg",48),e._UZ(2,"path",49)(3,"path",50),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_thong_ke")," "))}function l6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),e.O4$(),e.TgZ(2,"svg",52),e._UZ(3,"path",53)(4,"polyline",16)(5,"path",54)(6,"path",55),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function c6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDialogExamConfig("whoAllow"))}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",57)(3,"path",58),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function u6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"a",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.redirectToClassDetail(a))}),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("matTooltip",null==t.classObj?null:t.classObj.name),e.xp6(1),e.hij(" ",null==t.classObj?null:t.classObj.name," ")}}function d6(n,o){if(1&n&&(e.ynx(0),e.YNc(1,u6,3,2,"div",60),e.BQk()),2&n){const t=o.$implicit;let i;e.xp6(1),e.Q6J("ngIf",(null!==(i=null==t.classObj?null:t.classObj.id)&&void 0!==i?i:0)>0)}}function m6(n,o){if(1&n&&(e.ynx(0),e.YNc(1,d6,2,1,"ng-container",59),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.initData.studentsInClassResults)}}function _6(n,o){1&n&&(e.TgZ(0,"div",63)(1,"a",64),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function p6(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",65)(2,"div",66)(3,"span",67),e._UZ(4,"azt-loading-ui",68),e.qZA()()(),e.BQk()),2&n&&(e.xp6(4),e.Q6J("type","oval"))}function h6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.redirectToAddCodeExam())}),e.TgZ(1,"span",73),e._UZ(2,"lucide-icon",74),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_sua")," "))}function g6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",76)(1,"button",77),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.openDialogPreview(s))}),e.O4$(),e.TgZ(2,"svg",78),e._UZ(3,"path",79)(4,"polyline",16)(5,"line",80)(6,"line",81)(7,"line",82),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.ALo(10,"formatOfflineExamHashIdToNumber"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(8),e.AsE(" ",e.lcZ(9,2,"lang_auto_ma_de")," ",e.xi3(10,4,t.offlineMixQuestionHashId,3)," ")}}const f6=function(){return[]};function x6(n,o){if(1&n&&(e.ynx(0),e.YNc(1,g6,11,7,"div",75),e.BQk()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("ngForOf",null!==(i=null==t.offlineExportObj?null:t.offlineExportObj.offlineMixQuestionObjs)&&void 0!==i?i:e.DdM(1,f6))}}function b6(n,o){}function v6(n,o){if(1&n&&(e.TgZ(0,"div",65)(1,"div",2)(2,"h3",26),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,h6,5,3,"button",69),e.ALo(6,"editPermission"),e.ALo(7,"isOfflineExamWithCustomMixMark"),e.qZA(),e.TgZ(8,"div",70),e.YNc(9,x6,2,2,"ng-container",35),e.YNc(10,b6,0,0,"ng-template",null,71,e.W1O),e.qZA()()),2&n){const t=e.MAs(11),i=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(6,6,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")&&e.lcZ(7,9,null==i.initData.examObj?null:i.initData.examObj.orcLogId)),e.xp6(4),e.Q6J("ngIf",(null==i.offlineExportObj||null==i.offlineExportObj.offlineMixQuestionObjs?null:i.offlineExportObj.offlineMixQuestionObjs.length)&&!i.loadingApi)("ngIfElse",t)}}function y6(n,o){if(1&n&&(e.TgZ(0,"div",25)(1,"h3",26),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",27)(5,"ul",28)(6,"li"),e.YNc(7,a6,9,3,"a",29),e.ALo(8,"deletePermission"),e.qZA(),e.TgZ(9,"li"),e.YNc(10,s6,6,3,"a",30),e.ALo(11,"editPermission"),e.qZA(),e.TgZ(12,"li"),e.YNc(13,r6,6,3,"a",31),e.ALo(14,"statisticalPermission"),e.qZA(),e.YNc(15,l6,9,3,"li",23),e.ALo(16,"viewPermission"),e.qZA()()(),e.TgZ(17,"div",32)(18,"div",2)(19,"h3",26),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.YNc(22,c6,6,3,"button",33),e.ALo(23,"editPermission"),e.ALo(24,"configPermission"),e.qZA(),e.TgZ(25,"div",34),e.YNc(26,m6,2,1,"ng-container",35),e.YNc(27,_6,4,3,"ng-template",null,36,e.W1O),e.qZA()(),e.YNc(29,p6,5,1,"ng-container",35),e.YNc(30,v6,12,11,"ng-template",null,37,e.W1O)),2&n){const t=e.MAs(28),i=e.MAs(31),a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,11,"lang_auto_menu")," "),e.xp6(5),e.Q6J("ngIf",e.xi3(8,13,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(11,16,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(14,19,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",!a.isNotTestedYet&&e.xi3(16,22,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")),e.xp6(5),e.hij(" ",e.lcZ(21,25,"lang_auto_giao_cho")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(23,27,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")||e.xi3(24,30,null==a.initData.examObj?null:a.initData.examObj.permissionObj,"exam")),e.xp6(4),e.Q6J("ngIf",2==(null==a.initData.examObj?null:a.initData.examObj.whoAllow))("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",a.statusObj.loading)("ngIfElse",i)}}function w6(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",83),e._UZ(2,"polyline",84),e.qZA()())}function C6(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",83),e._UZ(2,"polyline",85),e.qZA()())}function k6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-preview-exam",86),e.NdJ("closeDialog",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.closeDialogPreviewExam(a))}),e.qZA()}}let T6=(()=>{class n extends W.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}openDialogExamConfig(t){this.dialog.open(uu,{width:"750px",data:{hashId:this.initData.examObj?.hashId},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj={...a,editable:!0,allowStudentView:!0,permissionObj:{}},this.reloadApi.emit())})}openDialogPreview(t){if(this.offlineExportObj&&this.initData.examObj&&this.offlineExportObj.offlineMixQuestionObjs?.length){let i=this.commonService.myClone(this.offlineExportObj);i.offlineMixQuestionObjs=new Array,i.offlineMixQuestionObjs.push(t),this.dialog.open(ym,{width:"766px",data:{isDialog:!0,offlineExportObj:i,curOfflineMixQuestionObj:t,backToLink:`/admin/testbank/exam-results-list/${i.examObj?.categoryId??0}/${i.examObj?.id}/0`},restoreFocus:!1})}}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.dialog.open(Qs._,{data:{isShow:!0,content:i},restoreFocus:!1})})}closeDialogPreviewExam(t){this.examDetailDialog={obj:void 0,isShow:!1}}openDeleteExam(){this.permissionService.hasViewPermission("exam",this.initData.examObj?.permissionObj)?this.dialog.open(fu,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.commonService.getTranslate("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay").subscribe(i=>{this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")})}closeDeleteExam(t){t?(this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.dataDeleteDialog={obj:void 0,type:0,isShow:!1}}handleReturnOfflineShare(t){t?this.permissionService.hasViewPermission("exam",t.permissionObj)?this.dialog.open(Yr,{width:"600px",data:{examHashId:t.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToSettingExamOffline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj?.permissionObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj?.permissionObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToClassDetail(t){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/class-details/${t.classObj?.id}`,`?backto=${i}`)}redirectToAddCodeExam(){let t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/add-code-exam-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(t)}`)}getAnswerOffline(t){this.initStatusObj(),this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(t,i,a){super(),this.dialog=t,this.offlineExamExportService=i,this.permissionService=a,this.initData={studentsNotInClassResults:[]},this.isNotTestedYet=!1,this.loadingApi=!0,this.reloadApi=new e.vpe,this.examDetailDialog={obj:void 0,curCateId:-1,isOnLib:-1,isShow:!1},this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.linkExam="",this.isShowActions=!0,this.dataDialogWarning={isShow:!1,content:""}}ngOnInit(){super.ngOnInit();let t=this.commonService.getCurrentDomain();this.linkExam=`${t}/de-thi/${this.initData.examObj?.hashId}`}ngOnChanges(){!this.loadingApi&&this.initData.examObj?.hashId&&this.getAnswerOffline(this.initData.examObj?.hashId)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(Rn.qr),e.Y36(eo.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-offline-test"]],inputs:{initData:"initData",isNotTestedYet:"isNotTestedYet",loadingApi:"loadingApi"},outputs:{reloadApi:"reloadApi"},features:[e.qOj,e.TTD],decls:40,vars:26,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",2,"max-width","90%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-offline-test-C7d866E60NA",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"closeDialog",4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],["azt-track-service","menu-offline-test-v0ibVgHaHZp","class","dropdown-item text-danger",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-boVa6dq1W1j","class","dropdown-item",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-C_QDr7XeJG-","class","dropdown-item",3,"click",4,"ngIf"],[1,"azt-document-who","mt-4"],["azt-track-service","menu-offline-test-l07YIWF2M_z","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],["doneLoading",""],["azt-track-service","menu-offline-test-v0ibVgHaHZp",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-offline-test-boVa6dq1W1j",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-offline-test-C_QDr7XeJG-",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-offline-test-yp0Mu41Mr",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-offline-test-l07YIWF2M_z",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-4","2lg:col-span-3"],["azt-track-service","menu-offline-test-4CoI06cv-3-",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],[1,"azt-document-list-code","mt-4"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[3,"type"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","mt-3"],["noExamOffline",""],["azt-track-service","menu-offline-test-Q_qGX1X8E2W",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],["class","col-span-6",4,"ngFor","ngForOf"],[1,"col-span-6"],["azt-track-service","menu-offline-test-Md6K9sfq64w",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],[3,"closeDialog"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e.O4$(),e.TgZ(7,"svg",6),e._UZ(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),e.qZA(),e.kcU(),e.TgZ(12,"span",11),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.TgZ(16,"div",5),e.O4$(),e.TgZ(17,"svg",6),e._UZ(18,"path",12)(19,"circle",13),e.qZA(),e.kcU(),e.TgZ(20,"span",11),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"div",5),e.O4$(),e.TgZ(24,"svg",14),e._UZ(25,"path",15)(26,"polyline",16)(27,"path",17),e.qZA(),e.kcU(),e.TgZ(28,"span",11),e._uU(29),e.ALo(30,"mytranslate"),e.ALo(31,"number"),e.qZA()(),e.TgZ(32,"div",18),e._UZ(33,"azt-share",19),e.qZA()(),e.YNc(34,y6,32,33,"ng-template",20),e.TgZ(35,"div",21)(36,"button",22),e.NdJ("click",function(){return i.toggleShowActions()}),e.YNc(37,w6,3,0,"span",23),e.YNc(38,C6,3,0,"span",23),e.qZA()()(),e.YNc(39,k6,1,0,"azt-preview-exam",24)),2&t){const a=e.MAs(4);let s;e.xp6(3),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),e.xp6(8),e.hij(" ",e.lcZ(14,16,"lang_testbank_tested_list_date_create")+": "+e.lcZ(15,18,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),e.xp6(8),e.hij(" ",e.lcZ(22,20,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),e.xp6(8),e.hij(" ",e.lcZ(30,22,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:e.lcZ(31,24,0))," "),e.xp6(4),e.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(s=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==s?s:0)("examWithPermissionObj",i.initData.examObj),e.xp6(1),e.Q6J("ngIf",i.isShowActions),e.xp6(3),e.Q6J("ngIf",i.isShowActions),e.xp6(1),e.Q6J("ngIf",!i.isShowActions),e.xp6(1),e.Q6J("ngIf",i.examDetailDialog.isShow)}},dependencies:[M.sg,M.O5,Zt.gM,cu,ho.Q,Xo.J,el.I,h.Nh5,M.JJ,re.bT,re.BU,re.vL,re.Pz,re.El,re.r,re.q7,re._W,re.tO],encapsulation:2}),n})();function A6(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",25)(1,"span",26),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.examResultFilterService.totalCustomFilter)}}function O6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0"),e.TgZ(2,"span",29),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.examResultFilterService.totalCustomFilter)}}function S6(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",27),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,O6,4,1,"span",28),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_testted_list_sort")," "),e.xp6(2),e.Q6J("ngIf",t.examResultFilterService.totalCustomFilter>0)}}let E6=(()=>{class n extends W.Q{changeFilter(){this.examResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.examResultFilterService.filterObj)}clearFilter(){this.examResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.examResultFilterService=t,this.changeFilterEvent=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(gm))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[e.qOj],decls:50,vars:29,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-Csh-AtPhLM","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-jvAvKjPSPr","for","isNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-WpYAtInmdW","for","isOnTest",1,"dropdown-item","cursor-pointer",3,"click"],["id","isOnTest","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-5kYvJjf6Vu","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-qExv_PlJpt","for","isNotTested",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotTested","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-ezDcdMX5-k",3,"click"],["azt-track-service","filter-menu-B7m4rnfcVw1",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(t,i){if(1&t&&(e.TgZ(0,"button",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"polygon",2),e.qZA(),e.YNc(3,A6,3,1,"span",3),e.YNc(4,S6,4,4,"span",4),e.qZA(),e.kcU(),e.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"div",10)(14,"input",11),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isMarked=!i.examResultFilterService.filterObj.isMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(15,"li")(16,"label",12),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(17),e.ALo(18,"mytranslate"),e.TgZ(19,"div",10)(20,"input",13),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotMarked=!i.examResultFilterService.filterObj.isNotMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(21,"li")(22,"label",14),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(23),e.ALo(24,"mytranslate"),e.TgZ(25,"div",10)(26,"input",15),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isOnTest=!i.examResultFilterService.filterObj.isOnTest,i.changeFilter()}),e.qZA()()()(),e.TgZ(27,"li")(28,"label",16),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(29),e.ALo(30,"mytranslate"),e.TgZ(31,"div",10)(32,"input",17),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotSubmit=!i.examResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),e.qZA()()()(),e.TgZ(33,"li")(34,"label",18),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(35),e.ALo(36,"mytranslate"),e.TgZ(37,"div",10)(38,"input",19),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotTested=!i.examResultFilterService.filterObj.isNotTested,i.changeFilter()}),e.qZA()()()(),e.TgZ(39,"li"),e._UZ(40,"hr",20),e.qZA(),e.TgZ(41,"li")(42,"div",21)(43,"button",22),e._uU(44),e.ALo(45,"mytranslate"),e.qZA(),e.TgZ(46,"div",23),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(47,"button",24),e.NdJ("click",function(){return i.clearFilter()}),e._uU(48),e.ALo(49,"mytranslate"),e.qZA()()()()()()()),2&t){const a=e.MAs(6);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Q6J("ngIf",i.examResultFilterService.totalCustomFilter>0),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(7),e.hij(" ",e.lcZ(12,15,"lang_testbank_testted_list_show_student_marking")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isMarked),e.xp6(3),e.hij(" ",e.lcZ(18,17,"lang_testbank_testted_list_student_not_marking")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isNotMarked),e.xp6(3),e.hij(" ",e.lcZ(24,19,"lang_testbank_testted_list_show_student_taking_exam")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isOnTest),e.xp6(3),e.hij(" ",e.lcZ(30,21,"lang_testbank_testted_list_show_student_not_submit_exam")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isNotSubmit),e.xp6(3),e.hij(" ",e.lcZ(36,23,"lang_testbank_testted_list_show_student_not_yet_exam")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isNotTested),e.xp6(6),e.Oqu(e.lcZ(45,25,"lang_buttom_close")),e.xp6(4),e.Oqu(e.lcZ(49,27,"lang_buttom_delete"))}},dependencies:[M.O5,en.VK,en.p6,re.bT],encapsulation:2}),n})();var M6=S(44821),Fs=S(12893),ll=S(52544);const I6=["student",""];function L6(n,o){1&n&&(e.TgZ(0,"span",28),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function Z6(n,o){1&n&&(e.TgZ(0,"span",28),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function P6(n,o){if(1&n&&(e.TgZ(0,"div",25)(1,"span",26),e._uU(2),e.qZA(),e.YNc(3,L6,4,6,"span",27),e.YNc(4,Z6,4,6,"span",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.student.fullName),e.xp6(1),e.Q6J("ngIf",0==t.student.status&&(t.student.isMarked||t.student.isNotMarked)),e.xp6(1),e.Q6J("ngIf",-1==t.student.status&&(t.student.isMarked||t.student.isNotMarked))}}function j6(n,o){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw(2);e.Q6J("nameImages",t.student.nameImages)}}function D6(n,o){1&n&&(e.TgZ(0,"span",30),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_test_result_not_marked_essay")))}function N6(n,o){1&n&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dang_thi")))}function Q6(n,o){1&n&&(e.TgZ(0,"span",32),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function q6(n,o){1&n&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_thi"),""))}function F6(n,o){1&n&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_point")+": "," "))}function U6(n,o){if(1&n&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",null!==(i=t.student.mark)&&void 0!==i?i:0," ")}}function R6(n,o){1&n&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_combine_exam")+": "," "))}function B6(n,o){if(1&n&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.student.subjectMarkValues.join(" | ")," ")}}function z6(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11),e.YNc(2,R6,3,3,"span",16),e.YNc(3,B6,2,1,"span",17),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked)}}function J6(n,o){1&n&&(e.TgZ(0,"div",36),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function H6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTestedTime(t.student.startedTest||void 0,t.student.createdAt||void 0)," ")}}function K6(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTestedTime(t.student.startedTest||void 0)," ")}}function $6(n,o){1&n&&(e.TgZ(0,"p",40),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+": "," "))}function Y6(n,o){if(1&n&&(e.TgZ(0,"p",41),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.hij(" ",null!==(i=null==t.student.filesParse?null:t.student.filesParse.length)&&void 0!==i?i:0," ")}}function G6(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,$6,3,3,"p",38),e.YNc(2,Y6,2,1,"p",39),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked)}}function W6(n,o){if(1&n&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.timeService.calculationTime(t.student.createdAt||void 0)+" "+e.lcZ(2,1,"lang_auto_truoc")," ")}}function V6(n,o){if(1&n&&(e.TgZ(0,"div",37)(1,"p",40),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,W6,3,3,"div",42),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_thoi_gian_nop_bai")+": "," "),e.xp6(2),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked)}}function X6(n,o){if(1&n&&(e.TgZ(0,"div",37)(1,"p",40),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",41),e._uU(5),e.ALo(6,"formatOfflineExamHashIdToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_ma_de_thi"),": "),e.xp6(3),e.hij(" ",e.xi3(6,4,null!==(i=t.student.offlineMixQuestionHashId)&&void 0!==i?i:0,3)," ")}}function eC(n,o){if(1&n&&(e.TgZ(0,"div",37)(1,"p",40),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",41),e._uU(5),e.ALo(6,"formatStudentCodeToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_testbank_offline_student_identification")+": "," "),e.xp6(3),e.hij(" ",e.xi3(6,4,null!==(i=t.student.studentCode)&&void 0!==i?i:0,6)," ")}}function tC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handleRemoveExamResult(a))}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",44),e._UZ(3,"path",45)(4,"path",46)(5,"path",47)(6,"line",48)(7,"line",49),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_remove_offline_result"))}const nC=function(n){return[n]},iC=function(n){return{backto:n}},wm=function(n,o){return{"zoom-in":n,"flex items-center":o}},Cm=function(n){return{"border-b border-slate-200 dark:border-darkmode-400":n}};function oC(n,o){if(1&n&&(e.TgZ(0,"a",2),e.ALo(1,"navigationLocalize"),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5),e._UZ(5,"azt-create-avatar",6),e.qZA(),e.TgZ(6,"div",7),e.YNc(7,P6,5,3,"div",8),e.YNc(8,j6,1,1,"img",9),e.TgZ(9,"div",10)(10,"div",11),e.YNc(11,D6,3,3,"span",12),e.YNc(12,N6,3,3,"span",13),e.YNc(13,Q6,4,6,"span",14),e.YNc(14,q6,3,3,"span",15),e.YNc(15,F6,3,3,"span",16),e.YNc(16,U6,2,1,"span",17),e.qZA()(),e.YNc(17,z6,4,2,"div",18),e.qZA()(),e.TgZ(18,"div",19),e.YNc(19,J6,3,3,"div",20),e.TgZ(20,"div",21),e.YNc(21,H6,2,1,"span",22),e.YNc(22,K6,2,1,"span",22),e.qZA()(),e.YNc(23,G6,3,2,"div",23),e.YNc(24,V6,5,4,"div",23),e.YNc(25,X6,7,7,"div",23),e.YNc(26,eC,7,7,"div",23),e.YNc(27,tC,8,3,"div",24),e.qZA()()),2&n){const t=e.oxw();let i,a,s;e.Q6J("routerLink",e.VKq(26,nC,e.lcZ(1,24,"/admin/testbank/test-review/"+t.examId+"/"+t.student.userId+"/"+t.student.studentId+"/"+t.student.resultId)))("queryParams",e.VKq(28,iC,t.backLink)),e.xp6(2),e.Q6J("ngClass",e.WLB(30,wm,t.student.resultId,!t.student.resultId)),e.xp6(1),e.Q6J("ngClass",e.VKq(33,Cm,t.student.resultId)),e.xp6(2),e.Q6J("linkAvatar",null!==(i=t.student.avatar)&&void 0!==i?i:"")("nameCreateAvatar",t.student.fullName)("size",40),e.xp6(2),e.Q6J("ngIf",!t.student.nameImages||(null!==(a=t.student.studentId)&&void 0!==a?a:0)>0),e.xp6(1),e.Q6J("ngIf",t.student.nameImages&&(null!==(s=t.student.studentId)&&void 0!==s?s:0)<=0),e.xp6(3),e.Q6J("ngIf",t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest),e.xp6(1),e.Q6J("ngIf",t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.student.isNotTested),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked&&t.student.subjectMarkValues&&t.student.subjectMarkValues.length),e.xp6(2),e.Q6J("ngIf",!t.student.isNotTested),e.xp6(2),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest||t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.hasEssayQuestion),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOffline),e.xp6(1),e.Q6J("ngIf",t.student.isOffline),e.xp6(1),e.Q6J("ngIf",t.student.isOffline)}}function aC(n,o){1&n&&(e.TgZ(0,"span",28),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function sC(n,o){1&n&&(e.TgZ(0,"span",28),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function rC(n,o){if(1&n&&(e.TgZ(0,"div",25)(1,"span",26),e._uU(2),e.qZA(),e.YNc(3,aC,4,6,"span",27),e.YNc(4,sC,4,6,"span",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.student.fullName),e.xp6(1),e.Q6J("ngIf",0==t.student.status&&(t.student.isMarked||t.student.isNotMarked)),e.xp6(1),e.Q6J("ngIf",-1==t.student.status&&(t.student.isMarked||t.student.isNotMarked))}}function lC(n,o){if(1&n&&e._UZ(0,"img",29),2&n){const t=e.oxw(2);e.Q6J("nameImages",t.student.nameImages)}}function cC(n,o){1&n&&(e.TgZ(0,"span",30),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_test_result_not_marked_essay")))}function uC(n,o){1&n&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dang_thi")))}function dC(n,o){1&n&&(e.TgZ(0,"span",32),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function mC(n,o){1&n&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_thi"),""))}function _C(n,o){1&n&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_point")+": "," "))}function pC(n,o){if(1&n&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",null!==(i=t.student.mark)&&void 0!==i?i:0," ")}}function hC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.handleRemoveExamResult(a))}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",44),e._UZ(3,"path",45)(4,"path",46)(5,"path",47)(6,"line",48)(7,"line",49),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_remove_offline_result"))}function gC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSelectExamResult())}),e.TgZ(2,"div",5),e._UZ(3,"azt-create-avatar",6),e.qZA(),e.TgZ(4,"div",7),e.YNc(5,rC,5,3,"div",8),e.YNc(6,lC,1,1,"img",9),e.TgZ(7,"div",10)(8,"div",11),e.YNc(9,cC,3,3,"span",12),e.YNc(10,uC,3,3,"span",13),e.YNc(11,dC,4,6,"span",14),e.YNc(12,mC,3,3,"span",15),e.YNc(13,_C,3,3,"span",16),e.YNc(14,pC,2,1,"span",17),e.qZA()()()(),e.YNc(15,hC,8,3,"div",24),e.qZA()}if(2&n){const t=e.oxw();let i,a,s;e.Q6J("ngClass",e.WLB(14,wm,t.student.resultId,!t.student.resultId)),e.xp6(1),e.Q6J("ngClass",e.VKq(17,Cm,t.student.resultId)),e.xp6(2),e.Q6J("linkAvatar",null!==(i=t.student.avatar)&&void 0!==i?i:"")("nameCreateAvatar",t.student.fullName)("size",40),e.xp6(2),e.Q6J("ngIf",!t.student.nameImages||(null!==(a=t.student.studentId)&&void 0!==a?a:0)>0),e.xp6(1),e.Q6J("ngIf",t.student.nameImages&&(null!==(s=t.student.studentId)&&void 0!==s?s:0)<=0),e.xp6(3),e.Q6J("ngIf",t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest),e.xp6(1),e.Q6J("ngIf",t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.student.isNotTested),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOffline)}}let fC=(()=>{class n extends W.Q{constructor(t,i){super(),this.timeService=t,this.dialog=i,this.hasEssayQuestion=!1,this.onHandleRemove=new e.vpe,this.onHandleSelect=new e.vpe}ngOnInit(){super.ngOnInit()}handleSelectExamResult(){this.onHandleSelect.emit()}handleRemoveExamResult(t){t.preventDefault(),t.stopPropagation(),this.dialog.open(M6.V,{data:{examHashId:this.examHashId??"",examResultId:this.student.resultId??0},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.onHandleRemove.emit()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-result-student-exam-result-box","student",""]],inputs:{student:"student",examHashId:"examHashId",examId:"examId",backLink:"backLink",hasEssayQuestion:"hasEssayQuestion"},outputs:{onHandleRemove:"onHandleRemove",onHandleSelect:"onHandleSelect"},features:[e.qOj],attrs:I6,decls:3,vars:2,consts:[["azt-track-service","student_exam_result_box-exJlVgNrtS","class","py-3",3,"routerLink","queryParams",4,"ngIf","ngIfElse"],["noResult",""],["azt-track-service","student_exam_result_box-exJlVgNrtS",1,"py-3",3,"routerLink","queryParams"],[1,"rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px","height","100%","position","relative",3,"ngClass"],["azt-track-service","student_exam_result_box-sBts0o9YG",1,"flex","items-center","p-3","student-exam-result-up",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc( 100% - 3.5rem )"],["class","azt-student-name flex items-center","style","flex-wrap: wrap;",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending font-medium",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-slate-500 font-medium",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","flex items-center mt-1",4,"ngIf"],[1,"flex","items-center","px-3","py-2"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs","font-medium"],[4,"ngIf"],["class","flex items-center px-3 pb-2",4,"ngIf"],["azt-track-service","student_exam_result_box-0z-vC1cAnO","class","student-exam-result-delete",3,"matTooltip","click",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending","font-medium"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-slate-500","font-medium"],[1,"text-black","font-medium"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"flex","items-center","px-3","pb-2"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],["class","text-xs text-slate-500 font-medium",4,"ngIf"],[1,"mr-auto","text-xs","text-slate-500"],[1,"text-xs","text-slate-500","font-medium"],["class","text-slate-500 text-right text-xs font-medium",4,"ngIf"],["azt-track-service","student_exam_result_box-0z-vC1cAnO",1,"student-exam-result-delete",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-trash-2"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","x2","10","y1","11","y2","17"],["x1","14","x2","14","y1","11","y2","17"],["azt-track-service","student_exam_result_box-sBts0o9YG",1,"flex","items-center","p-3","student-exam-result-up",3,"ngClass","click"]],template:function(t,i){if(1&t&&(e.YNc(0,oC,28,35,"a",0),e.YNc(1,gC,16,19,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.student.resultId)("ngIfElse",a)}},dependencies:[T.rH,M.mk,M.O5,Zt.gM,Fs.g,ll.L,re.MR,re.bT,re.t9,re.q7],encapsulation:2}),n})();function xC(n,o){if(1&n&&e.GkF(0,10),2&n){e.oxw();const t=e.MAs(14);e.Q6J("ngTemplateOutlet",t)}}function bC(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function vC(n,o){if(1&n&&(e.TgZ(0,"div",13),e.GkF(1,10),e.qZA()),2&n){e.oxw(2);const t=e.MAs(16);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function yC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.scrollToPosition(0))}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"polygon",21),e.qZA()()}2&n&&e.Q6J("matTooltip",e.lcZ(1,1,"lang_testbank_go_to_top"))}function wC(n,o){if(1&n&&(e.TgZ(0,"div"),e.GkF(1,10),e.TgZ(2,"div",14)(3,"ng-scrollbar",15,16)(5,"div",17),e.GkF(6,10),e.qZA()(),e.YNc(7,yC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw(2),i=e.MAs(8),a=e.MAs(12);e.xp6(1),e.Q6J("ngTemplateOutlet",i),e.xp6(2),e.Q6J("visibility","hover"),e.xp6(3),e.Q6J("ngTemplateOutlet",a),e.xp6(1),e.Q6J("ngIf",t.currentScrollPosition>500)}}function CC(n,o){if(1&n&&(e.YNc(0,vC,2,1,"div",11),e.YNc(1,wC,8,4,"div",12)),2&n){const t=e.oxw();e.Q6J("ngIf",t.isNotTestedYet),e.xp6(1),e.Q6J("ngIf",!t.isNotTestedYet&&t.obj)}}const km=function(n){return{"col-span-2":n}};function kC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectClassroomToShowEvent(null==a.examResultObjsOfSelectedClassroom.classObj?null:a.examResultObjsOfSelectedClassroom.classObj.id))}),e.TgZ(2,"span",27),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(8,km,t.isOpenSideNav)),e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,4,null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.name)+" ("+t.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.countStudents)+")")("matTooltipPosition","above"),e.xp6(2),e.hij(" ",e.lcZ(5,6,null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.name)+" ("+t.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.countStudents)+")"," ")}}const TC=function(n){return{active:n}};function AC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),e.TgZ(2,"span",27),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(9,km,i.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(11,TC,(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)==(null==t.classObj?null:t.classObj.id))),e.xp6(1),e.Q6J("matTooltip",e.lcZ(3,5,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")")("matTooltipPosition","above"),e.xp6(2),e.hij(" ",e.lcZ(5,7,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")"," ")}}function OC(n,o){if(1&n&&(e.ynx(0),e.YNc(1,AC,6,13,"div",23),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("ngIf",t.indexCounter<i.showNumberClassroom||t.indexCounter<=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)<=i.showNumberClassroom)}}function SC(n,o){if(1&n&&(e.ynx(0),e.YNc(1,OC,2,1,"ng-container",12),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.indexCounter)}}function EC(n,o){if(1&n&&e.GkF(0,10),2&n){e.oxw(2);const t=e.MAs(10);e.Q6J("ngTemplateOutlet",t)}}function MC(n,o){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,kC,6,10,"div",23),e.YNc(2,SC,2,1,"ng-container",24),e.YNc(3,EC,1,1,"ng-container",1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null!=t.examResultObjsOfSelectedClassroom.indexCounter&&t.examResultObjsOfSelectedClassroom.indexCounter>t.showNumberClassroom),e.xp6(1),e.Q6J("ngForOf",t.examResultObjsByClassroom),e.xp6(1),e.Q6J("ngIf",t.examResultObjsByClassroom.length>t.showNumberClassroom+1)}}function IC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(2);return e.KtG(s.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),e.TgZ(2,"span",27),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,3,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")")("matTooltipPosition","left"),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")"," ")}}function LC(n,o){if(1&n&&(e.ynx(0),e.YNc(1,IC,6,7,"li",12),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("ngIf",t.indexCounter>i.showNumberClassroom||t.indexCounter>=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)>i.showNumberClassroom)}}function ZC(n,o){if(1&n&&(e.ynx(0),e.YNc(1,LC,2,1,"ng-container",12),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=t.indexCounter&&(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)!=(null==t.classObj?null:t.classObj.id))}}function PC(n,o){if(1&n&&(e.TgZ(0,"div",29)(1,"button",30)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.O4$(),e.TgZ(5,"svg",31),e._UZ(6,"polyline",32),e.qZA()(),e.kcU(),e.TgZ(7,"mat-menu",null,33)(9,"div",34)(10,"ul",35),e.YNc(11,ZC,2,1,"ng-container",24),e.qZA()()()()),2&n){const t=e.MAs(8),i=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(2),e.Oqu(e.lcZ(4,3,"lang_auto_xem_them")),e.xp6(8),e.Q6J("ngForOf",i.examResultObjsByClassroom)}}function jC(n,o){1&n&&e._UZ(0,"azt-loading-effect")}const DC=function(n){return{"lg:col-span-3":n}};function NC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"testbank-exam-result-student-exam-result-box",42),e.NdJ("onHandleSelect",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.handleSelectExamResult(s))})("onHandleRemove",function(){const s=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.handleRemoveExamResult(s))}),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(6,DC,!i.isOpenSideNav&&!i.isMobile)),e.xp6(1),e.Q6J("student",t)("examHashId",null==i.obj?null:i.obj.hashId)("examId",null==i.obj?null:i.obj.id)("backLink",i.backToLink)("hasEssayQuestion",i.hasEssayQuestion)}}function QC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"div",44)(2,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectPageWithClassroomId())}),e._uU(3),e.ALo(4,"mytranslate"),e.O4$(),e.TgZ(5,"svg",46),e._UZ(6,"polyline",32),e.qZA()()()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_xem_them"),"\xa0 "))}function qC(n,o){if(1&n&&(e.TgZ(0,"div",38),e.YNc(1,NC,2,8,"div",39),e.YNc(2,QC,7,3,"div",40),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.lstStudentResults),e.xp6(1),e.Q6J("ngIf",t.canNextPage||t.checkShowLoadMore(-1==(null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.id)?t.examResultObjsByPage.length:null==t.examResultObjsOfSelectedClassroom.results?null:t.examResultObjsOfSelectedClassroom.results.length))}}function FC(n,o){if(1&n&&(e.YNc(0,jC,1,0,"azt-loading-effect",3),e.YNc(1,qC,3,2,"ng-template",null,37,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.loadingResultList)("ngIfElse",t)}}function UC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(1,"svg",51),e._UZ(2,"path",52)(3,"circle",53),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,1,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function RC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(1,"svg",51),e._UZ(2,"line",55)(3,"path",56)(4,"path",57)(5,"path",58),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,1,"lang_auto_huy_cham_file_scan")))}function BC(n,o){if(1&n&&(e.TgZ(0,"p",47),e._uU(1),e.qZA(),e.YNc(2,UC,7,3,"a",48),e.YNc(3,RC,9,3,"a",49)),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.headerTitle," "),e.xp6(1),e.Q6J("ngIf",t.isMobileWebView&&!t.showFileScan&&!t.isNotTestedYet),e.xp6(1),e.Q6J("ngIf",t.isMobileWebView&&t.showFileScan)}}function zC(n,o){1&n&&e._UZ(0,"div")}function JC(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_auto_note_scan_file_in_student_exam_result_for_online_and_offline_exam_no_scan")," ")}function HC(n,o){if(1&n&&(e.TgZ(0,"div",67),e.YNc(1,zC,1,0,"div",3),e.ALo(2,"isOfflineExam"),e.YNc(3,JC,2,3,"ng-template",null,68,e.W1O),e.qZA()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,null==i.obj?null:i.obj.orcLogId))("ngIfElse",t)}}function KC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",79)(1,"a",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(2,"svg",73),e._UZ(3,"path",52)(4,"circle",53),e.qZA(),e.kcU(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(6),e.Oqu(e.lcZ(7,1,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function $C(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",69),e.YNc(1,KC,8,3,"div",70),e.TgZ(2,"div",71)(3,"a",72),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(4,"svg",73),e._UZ(5,"circle",74)(6,"circle",75)(7,"circle",76)(8,"line",77)(9,"line",78),e.qZA(),e.kcU(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isMobileWebView),e.xp6(2),e.Q6J("cdkCopyToClipboard",t.copyLinkToClipboard()),e.xp6(8),e.Oqu(e.lcZ(12,3,"lang_auto_copy_link_de_thi"))}}function YC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",82)(1,"a",83),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(2,"svg",73),e._UZ(3,"path",52)(4,"circle",53),e.qZA(),e.kcU(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(6),e.Oqu(e.lcZ(7,1,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function GC(n,o){if(1&n&&e.YNc(0,YC,8,3,"div",81),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.isMobileWebView)}}function WC(n,o){1&n&&(e.TgZ(0,"p",84),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_hoac")))}function VC(n,o){1&n&&(e.TgZ(0,"p",85),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_tai_app_azota_de_cham_bai_bang_camera_cua_dien_thoai_tai_app_tai_day")," "))}function XC(n,o){1&n&&(e.TgZ(0,"div",86)(1,"div",87)(2,"a",88),e._UZ(3,"img",89),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",90),e._UZ(6,"img",91),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"azota_assets/images/2928664.svg"),e.LSH))}function ek(n,o){1&n&&(e.ynx(0),e.TgZ(1,"p",84),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",92),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",86)(8,"div",93)(9,"p",94)(10,"span",95),e._uU(11,"Google Play"),e.qZA(),e._UZ(12,"azt-download-qr-code",96),e.qZA(),e.TgZ(13,"p",97)(14,"span",95),e._uU(15,"App Store"),e.qZA(),e._UZ(16,"azt-download-qr-code",96),e.qZA()()(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"lang_auto_hoac")),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.xp6(7),e.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function tk(n,o){if(1&n&&(e.TgZ(0,"div",59)(1,"h3",60),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,HC,5,4,"div",61),e.YNc(5,$C,13,5,"div",62),e.ALo(6,"isOfflineExam"),e.YNc(7,GC,1,1,"ng-template",null,63,e.W1O),e.YNc(9,WC,3,3,"p",64),e.YNc(10,VC,3,3,"p",65),e.YNc(11,XC,8,6,"div",66),e.YNc(12,ek,17,10,"ng-container",12),e.qZA()),2&n){const t=e.MAs(8),i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,8,"lang_auto_chua_co_du_lieu_nop_bai")),e.xp6(2),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!e.lcZ(6,10,null==i.obj?null:i.obj.orcLogId))("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobile)}}const nk=function(n){return{"py-2":n}},ik=["*"];let ok=(()=>{class n extends W.Q{copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.obj?.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}showSelectFileScan(){this.isMobileWebView?this.mobileWebviewService.sendMarkOfflineExamObj(this.obj?.hashId??""):(this.showFileScan=!this.showFileScan,this.notTestedOpenFileScan.emit(this.showFileScan))}selectPageEvent(t){this.examResultObjsByPage=[],this.curPage=t;let a=this.examResultObjsByClassroom.find(s=>-1==s.classObj?.id);if(a&&a.results?.length){let s=a.results??[];this.totalPage=Math.ceil(s.length/100),this.examResultObjsByPage=s}setTimeout(()=>{this.scrollToPosition(this.currentScrollPosition)},100)}selectPageWithClassroomId(){this.curPage+=1,this.selectPageClassroomEmitter.emit({classroomId:this.currentClassroomId,page:this.curPage})}ngAfterViewInit(){this.scrollbarRef&&this.scrollbarRef.scrolled.subscribe(t=>{t.target&&t.target instanceof HTMLElement&&(this.currentScrollPosition=t.target.scrollTop)})}scrollToPosition(t){try{this.scrollbarRef&&this.scrollbarRef.scrollTo({top:t})}catch{}}checkShowLoadMore(t){return!!t&&t%this.sizePage==0}selectClassroomToShowEvent(t){this.currentClassroomId=t??-1,this.initDataForClassroom(),this.selectTabClassroomEmitter.emit(t)}findClassroomIdByExamResultId(t,i){for(var a of t)for(var s of a.results??[])if(s.id?.toString()==i.toString()&&a.classObj?.id)return a.classObj.id}findClassroomDataByClassroomId(t,i){for(var a of t)if(a.classObj?.id?.toString()==i)return a;return t.length>0?t[0]:void 0}initDataForClassroom(){this.currentClassroomId||(this.currentClassroomId=(this.mustShownResultId??this.examResultObjsByClassroom?.[0].classObj?.id)||-1);var i=this.findClassroomDataByClassroomId(this.examResultObjsByClassroom,this.currentClassroomId.toString());i&&(this.examResultObjsOfSelectedClassroom=i)}handleSelectExamResult(t){t.resultId&&this.commonService.myNavigationWithQueryString(`/admin/testbank/test-review/${this.obj?.id}/${t.userId}/${t.studentId}/${t.resultId}`,`?backto=${this.backToLink}`,!0)}handleRemoveExamResult(t){this.removeOfflineResultEmitter.emit(!0)}ngOnChanges(){if(this.examResultObjsByClassroom.length){if(this.mustShownResultId){var t=this.findClassroomIdByExamResultId(this.examResultObjsByClassroom,this.mustShownResultId);this.currentClassroomId=t??this.currentClassroomId}this.initDataForClassroom(),this.selectPageEvent(this.curPage)}this.scrollbarRef&&this.scrollbarRef.scrolled.subscribe(i=>{i.target&&i.target instanceof HTMLElement&&(this.currentScrollPosition=i.target.scrollTop)})}ngOnInit(){this.examResultObjsByClassroom.length&&(this.initDataForClassroom(),this.selectPageEvent(this.curPage)),super.ngOnInit()}get lstStudentResults(){return(-1==this.examResultObjsOfSelectedClassroom.classObj?.id?this.examResultObjsByPage:this.examResultObjsOfSelectedClassroom.results)??[]}constructor(t,i,a,s){super(),this.timeService=t,this.browserStorageService=i,this.mobileWebviewService=a,this.ngZone=s,this.isOpenSideNav=!0,this.isMobile=!1,this.backToLink="",this.scanLoading=!1,this.showFileScan=!1,this.mustShownResultId=0,this.headerTitle="",this.notTestedOpenFileScan=new e.vpe,this.selectTabClassroomEmitter=new e.vpe,this.selectPageClassroomEmitter=new e.vpe,this.removeOfflineResultEmitter=new e.vpe,this.obj=void 0,this.examResultObjsByClassroom=[],this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.loadingResultList=!1,this.currentClassroomId=0,this.canNextPage=!1,this.examResultObjsOfSelectedClassroom={},this.showNumberClassroom=(this.isMobile?1:3)-1,this.examResultObjsByPage=[],this.totalPage=0,this.curPage=1,this.sizePage=100,this.currentScrollPosition=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O),e.Y36(we.z),e.Y36(Gr.F),e.Y36(e.R0b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-student-exam-result-v2"]],viewQuery:function(t,i){if(1&t&&e.Gf(x.KC,5),2&t){let a;e.iGM(a=e.CRH())&&(i.scrollbarRef=a.first)}},inputs:{isOpenSideNav:"isOpenSideNav",isMobile:"isMobile",backToLink:"backToLink",scanLoading:"scanLoading",showFileScan:"showFileScan",mustShownResultId:"mustShownResultId",headerTitle:"headerTitle",obj:"obj",examResultObjsByClassroom:"examResultObjsByClassroom",isNotTestedYet:"isNotTestedYet",hasEssayQuestion:"hasEssayQuestion",loadingResultList:"loadingResultList",currentClassroomId:"currentClassroomId",canNextPage:"canNextPage"},outputs:{notTestedOpenFileScan:"notTestedOpenFileScan",selectTabClassroomEmitter:"selectTabClassroomEmitter",selectPageClassroomEmitter:"selectPageClassroomEmitter",removeOfflineResultEmitter:"removeOfflineResultEmitter"},features:[e.qOj,e.TTD],ngContentSelectors:ik,decls:17,vars:6,consts:[[1,"flex","items-center"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"box","mt-2","relative",2,"min-height","90vh",3,"ngClass"],[4,"ngIf","ngIfElse"],["noLoading",""],["showClassroomTabTmp",""],["seeMoreTabOnWebTmp",""],["showExamResultInOneClassroom",""],["examResultHeaderTmp",""],["notTestYetTmp",""],[3,"ngTemplateOutlet"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],[1,"scrollable-content","flex","items-center"],[1,"azt-student-list","scrollable-content","relative",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],["scrollbarRef",""],[1,"mt-4","p-2"],["azt-track-service","student-exam-result-new-dHQIYf6Kn","class","btn btn-sm btn-secondary","style","position: absolute; bottom: 10px; right: 10px",3,"matTooltip","click",4,"ngIf"],["azt-track-service","student-exam-result-new-dHQIYf6Kn",1,"btn","btn-sm","btn-secondary",2,"position","absolute","bottom","10px","right","10px",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-navigation-2"],["points","12 2 19 21 12 17 5 21 12 2"],[1,"nav","nav-link-tabs","grid","grid-cols-12","grap-3","p-2"],["class","col-span-6 md:col-span-3 nav-item",3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","nav-item",3,"ngClass"],["azt-track-service","student-exam-result-new-MSaafbzaB",1,"active","nav-link","w-full","py-1",3,"click"],[1,"truncate",3,"matTooltip","matTooltipPosition"],["azt-track-service","student-exam-result-new-_LwxxkAKE2",1,"nav-link","w-full","py-1",3,"ngClass","click"],[1,"col-span-3","nav-item"],[1,"nav-link","flex","items-center","w-full","py-1",2,"border","none",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-2"],["points","6 9 12 15 18 9"],["listActiveMenu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","student-exam-result-new-UODUmv0qb5",1,"dropdown-item",3,"click"],["doneLoadList",""],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],["class","col-span-12 mt-2",4,"ngIf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"w-full",3,"student","examHashId","examId","backLink","hasEssayQuestion","onHandleSelect","onHandleRemove"],[1,"col-span-12","mt-2"],[1,"text-center","mt-3"],["azt-track-service","student-exam-result-new-QpFPWsrS4","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-md","font-medium","mr-auto"],["azt-track-service","student-exam-result-new-YugzQx7amV","style","height: 43px;font-size: 13px;","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-UfMbOZaVPI","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-YugzQx7amV",1,"btn","btn-pending-soft","btn-sm",2,"height","43px","font-size","13px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],["cx","12","cy","13","r","3"],["azt-track-service","student-exam-result-new-UfMbOZaVPI",1,"btn","btn-pending-soft","btn-sm",3,"click"],["x1","2","y1","2","x2","22","y2","22"],["d","M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],["d","M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],["d","M14.121 15.121A3 3 0 1 1 9.88 10.88"],[1,"text-center","mt-3","mx-auto","p-3",2,"max-width","28rem"],[1,"font-medium","text-lg"],["class","mt-3 mx-auto",4,"ngIf"],["class","flex flex-col md:flex-row mx-auto",4,"ngIf","ngIfElse"],["OfflineExam",""],["class","h5 mt-2 font-medium",4,"ngIf"],["class","mt-2 ml-auto mr-auto w-4/5",4,"ngIf"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"mt-3","mx-auto"],["notOfflineExam",""],[1,"flex","flex-col","md:flex-row","mx-auto"],["class","mt-3 lg:mr-auto",4,"ngIf"],[1,"mt-3","lg:mx-auto"],["azt-track-service","student-exam-result-new-9Vqr3K2yC9",1,"btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"mt-3","lg:mr-auto"],["azt-track-service","student-exam-result-new-Kn62V1VJ1o",1,"btn","btn-secondary-soft",3,"click"],["class","mt-3 lg:ml-auto",4,"ngIf"],[1,"mt-3","lg:ml-auto"],["azt-track-service","student-exam-result-new-xsQoGzCGKe",1,"btn","btn-secondary-soft",3,"click"],[1,"h5","mt-2","font-medium"],[1,"mt-2","ml-auto","mr-auto","w-4/5"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","student-exam-result-new-OSvgGR80G","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","student-exam-result-new-bJncs5ICRt","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"mt-2","ml-auto","mr-auto","w-80"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(t,i){if(1&t&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,xC,1,1,"ng-container",1),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.YNc(4,bC,1,0,"azt-loading-effect",3),e.YNc(5,CC,2,2,"ng-template",null,4,e.W1O),e.qZA(),e.YNc(7,MC,4,3,"ng-template",null,5,e.W1O),e.YNc(9,PC,12,5,"ng-template",null,6,e.W1O),e.YNc(11,FC,3,2,"ng-template",null,7,e.W1O),e.YNc(13,BC,4,3,"ng-template",null,8,e.W1O),e.YNc(15,tk,13,12,"ng-template",null,9,e.W1O)),2&t){const a=e.MAs(6);e.xp6(1),e.Q6J("ngIf",i.obj),e.xp6(1),e.Q6J("ngClass",e.VKq(4,nk,!i.showFileScan)),e.xp6(2),e.Q6J("ngIf",i.scanLoading)("ngIfElse",a)}},dependencies:[M.mk,M.sg,M.O5,M.tP,ea.i3,Di.lW,en.VK,en.p6,Zt.gM,x.KC,jt.Q,Ps.o,fC,re.bT,re.HU,re.Jc],encapsulation:2}),n})();const ak=["drawer"];function sk(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function rk(n,o){1&n&&e._UZ(0,"status-loading-effect-component")}function lk(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"menu-offline-test",55),e.NdJ("reloadApi",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reloadApi())}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("initData",t.initDataTestedList)("loadingApi",t.statusObj.loading)("isNotTestedYet",t.isNotTestedYet)}}function ck(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"menu-online-test",56),e.NdJ("reloadApi",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reloadApi())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("initData",t.initDataTestedList)("currentSelectedClassroomId",t.currentSelectClassroomId)("isNotTestedYet",t.isNotTestedYet)("userList",t.allUserObjsForMonitorModule)}}function uk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",47),e._UZ(3,"rect",58)(4,"path",59)(5,"path",60),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function dk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",47),e._UZ(3,"rect",58)(4,"path",59)(5,"path",62),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function mk(n,o){1&n&&(e.TgZ(0,"div",63)(1,"div",64)(2,"p",65),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_not_found_search"),"!"))}function _k(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-file-scan-offline-exam-new",68),e.NdJ("saveStudentMarkEmit",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.scanMarkObjs(a))})("firstSuccessResultId",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.foundClassOfSuccessScanResult(a))})("showStudentMarkEmit",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.closeScanFile(a))}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("backToLink",t.backFromStudentView)("examObj",t.examObj)("loadedJs",t.loadedJs)("tokenScan",t.tokenScanExamOffline)("hasExamOffline",t.hasExamOffline)("examOfflineMessage",t.examOfflineMessage)}}function pk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-student-exam-result-v2",66),e.NdJ("removeOfflineResultEmitter",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterRemoveOfflineResult(a))})("selectTabClassroomEmitter",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selectTabClassroomShow(a))})("selectPageClassroomEmitter",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.selectPageClassroomShow(a))})("notTestedOpenFileScan",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.openFileScan(a))}),e.YNc(1,_k,1,6,"app-file-scan-offline-exam-new",67),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("backToLink",t.backFromStudentView)("examResultObjsByClassroom",t.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",t.isNotTestedYet)("isOpenSideNav",t.isOpenSideNav)("hasEssayQuestion",t.hasEssayQuestion)("showFileScan",t.showFileScan)("obj",t.examObj)("scanLoading",t.scanLoading)("isMobile",t.isMobile)("currentClassroomId",t.currentSelectClassroomId)("headerTitle",t.headerTitle)("mustShownResultId",t.mustShownResultId)("loadingResultList",t.loadingResultList)("canNextPage",t.canNextPage),e.xp6(1),e.Q6J("ngIf",t.showFileScan&&t.examObj)}}function hk(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",69),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.highestMark)("dataScoreByClass",t.dataExportHighestMark)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","highest")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function gk(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",69),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.exportToExcelObjs)("dataScoreByClass",t.dataExportLastTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","lastTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function fk(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",69),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.firstMark)("dataScoreByClass",t.dataExportFirstTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","firstTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function xk(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",69),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.allTimeMark)("dataScoreByClass",t.dataExportAllTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","allTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}const bk=function(n,o){return{"w-85":n,"w-30":o}},vk=function(n){return{"ml-30":n}},yk=function(n){return{"ml-5":n}},wk=function(n){return{"px-0":n}};function Ck(n,o){if(1&n){const t=e.EpF();e._UZ(0,"azt-export-docx-loading-box",25),e.YNc(1,rk,1,0,"status-loading-effect-component",8),e.TgZ(2,"div",26)(3,"mat-drawer-container",27)(4,"mat-drawer",28,29),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeStatusNav())}),e.TgZ(6,"ng-scrollbar",30),e.YNc(7,lk,2,3,"ng-container",1),e.YNc(8,ck,1,4,"ng-template",null,31,e.W1O),e.qZA()(),e.TgZ(10,"mat-drawer-content",32)(11,"div",33)(12,"div",34),e.YNc(13,uk,6,3,"button",35),e.YNc(14,dk,6,3,"button",36),e.TgZ(15,"div",37)(16,"div",38)(17,"form",6)(18,"input",39),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.search())}),e.ALo(19,"mytranslate"),e.qZA(),e.O4$(),e.TgZ(20,"svg",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.search())}),e._UZ(21,"circle",41)(22,"line",42),e.qZA()()(),e.kcU(),e.TgZ(23,"div",43)(24,"testbank-exam-result-filter-menu",44),e.NdJ("changeFilterEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeFilterEvent())}),e.qZA()(),e.TgZ(25,"div",45)(26,"button",46),e.O4$(),e.TgZ(27,"svg",47),e._UZ(28,"line",48)(29,"line",49)(30,"line",50),e.qZA()()()()(),e.kcU(),e.TgZ(31,"div",51),e.YNc(32,mk,5,3,"div",52),e.YNc(33,pk,2,15,"ng-template",null,53,e.W1O),e.qZA()(),e.YNc(35,hk,1,12,"app-excel-score-sheet",54),e.YNc(36,gk,1,12,"app-excel-score-sheet",54),e.YNc(37,fk,1,12,"app-excel-score-sheet",54),e.YNc(38,xk,1,12,"app-excel-score-sheet",54),e.qZA()()()}if(2&n){const t=e.MAs(9),i=e.MAs(34),a=e.oxw(),s=e.MAs(5);e.Q6J("msg",a.exportResultService.keyLoading)("show",a.exportResultService.isLoading)("percent",a.exportResultService.percent),e.xp6(1),e.Q6J("ngIf",a.exportLoading),e.xp6(2),e.Q6J("hasBackdrop",a.hasBackdrop),e.xp6(1),e.s9C("opened",a.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(27,bk,a.isMobile,!a.isMobile))("mode",a.mode),e.xp6(2),e.Q6J("visibility","hover"),e.xp6(1),e.Q6J("ngIf",a.isOfflineExam)("ngIfElse",t),e.xp6(3),e.Q6J("ngClass",e.VKq(30,vk,!a.isMobile&&a.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(32,yk,!a.isMobile&&a.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!a.isOpenSideNav||a.isMobile),e.xp6(1),e.Q6J("ngIf",a.isOpenSideNav&&!a.isMobile),e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(1),e.s9C("placeholder",e.lcZ(19,25,"lang_testbank_testted_list_search")),e.xp6(8),e.Q6J("matMenuTriggerFor",s),e.xp6(5),e.Q6J("ngClass",e.VKq(34,wk,a.isMobile||!a.isOpenSideNav)),e.xp6(1),e.Q6J("ngIf",a.noDataSearch&&0==a.allViewExamResultObjsOfStudentByClassroom.length&&0!=a.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj)}}function kk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",70),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("lastTime"))}),e.O4$(),e.TgZ(2,"svg",71),e._UZ(3,"path",72)(4,"polyline",73)(5,"line",74),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_testted_list_export_excel_last_exam")," "))}function Tk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("highest"))}),e.O4$(),e.TgZ(2,"svg",71),e._UZ(3,"path",72)(4,"polyline",73)(5,"line",74),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_testted_list_export_excel_highest_point")," "))}function Ak(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("firstTime"))}),e.O4$(),e.TgZ(2,"svg",71),e._UZ(3,"path",72)(4,"polyline",73)(5,"line",74),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_testted_list_export_excel_first_time_score")," "))}function Ok(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("allTime"))}),e.O4$(),e.TgZ(2,"svg",71),e._UZ(3,"path",72)(4,"polyline",73)(5,"line",74),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_testted_list_export_excel_all_exam")," "))}function Sk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",78),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF())}),e.O4$(),e.TgZ(2,"svg",79),e._UZ(3,"path",80)(4,"polyline",81)(5,"line",82)(6,"line",83)(7,"line",84),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_testted_list_export_pdf_last")," "))}function Ek(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",85),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF("highest"))}),e.O4$(),e.TgZ(2,"svg",79),e._UZ(3,"path",80)(4,"polyline",81)(5,"line",82)(6,"line",83)(7,"line",84),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_testted_list_export_pdf_point_bigger")," "))}function Mk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",86),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF("first"))}),e.O4$(),e.TgZ(2,"svg",79),e._UZ(3,"path",80)(4,"polyline",81)(5,"line",82)(6,"line",83)(7,"line",84),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_testted_list_export_pdf_fisrt")," "))}let Ik=(()=>{class n extends W.Q{openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam")}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("exam");this.isOpenSideNav=!t||"close"!=t}}_viewDataBySortSearchAndFilter(){let t=this.commonService.myClone(this.allRawExamResultObjsOfStudentByClassroom);var i=this.examResultFilterService.getDefaultFilterObj();t=this.examResultListSortService._filterExamResultObjsByFilterSettingObjByClassroom(i,t);var a=this.form.controls.searchContent.value?.toString()?.trim();""!=a&&(t=this.examResultListSortService._searchExamResultObjsByFullNameInClassroom(t,a));var s=this.examResultListSortService._getCurrentSortTypeOfSetting();t=this.examResultListSortService._sortExamResultObjsBySettingObjByClassroom(t,this.hasEssayQuestion,s),this.allViewExamResultObjsOfStudentByClassroom=t}search(){this.getStudentResultByPage(1,!0)}changeFilterEvent(){this._viewDataBySortSearchAndFilter()}changeSortEvent(t){let i=!1;"isSortByNameAsc"==t&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),i=!0),"isSortByMarkDesc"==t&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),i=!0),"isSortByTimeDesc"==t&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),i=!0),i?this.examResultListSortService._saveSortTypeOfSetting(t):this.examResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(t){var i=[];return t.forEach(a=>{a.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(a.results??new Array),this.exportQuestionObjs),a.results=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(a.results),this.hasEssayQuestion),i.push(a)}),i}isNewInfoFieldFormatInExportExcel(t){var i=!1;if(null!=t)for(var a=0;a<t.length;a++)if(t[a].hasOwnProperty("contents")){i=!0;break}return i}parseInfoFieldForStudentObjsInExportExcel(t){var i=[];for(let r=0;r<t.length;r++){var a=this.commonService.myParseJson(t[r].infors??"")??[];if(this.isNewInfoFieldFormatInExportExcel(a))if(null!=a){var s=new Array;a.forEach(l=>{l.contents&&1==l.contents.length?s.push({key:l.title,value:l.contents[0]}):l.contents&&l.contents.length>1&&s.push({key:l.title,value:l.contents.join(", ")})}),t[r].inforsParse=s}else t[r].inforsParse=new Array;else t[r].inforsParse=this.commonService.myParseJson(t[r].infors??"")??[];i.push(t[r])}return i}mapQuestionWithAnswerForExportExcel(t,i){var a=[];return t.forEach(s=>{if(""!=s.answers&&null!=s.answers&&"[]"!=s.answers){var r=this.commonService.willDeleteParseJson(s.answers),l=[];i.forEach(c=>{for(var d={QuestionId:c.questionId,Answer:"",index:c.sort},f=0;f<r.length;f++)if(r[f].QuestionId==c.questionId&&r[f].AnswerContent&&r[f].AnswerContent.length>0){d.Answer=r[f].AnswerContent[0].Content;break}l.push(d)}),a.push({...s,results:l})}else l=[],i.forEach(d=>{l.push({QuestionId:d.questionId,Answer:"",index:d.sort})}),a.push({...s,results:l})}),a}exportToExcel(t){this.dialog.open(zy,{data:{classroomDataObjs:this.allViewExamResultObjsOfStudentByClassroom,exportType:t},restoreFocus:!1,width:"750px"}).afterClosed().subscribe(i=>{if(i){let a="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(s=>{a=s.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,ci.openLoadingEffect(a),"lastTime"==t?this.subscriptions.add(this.testedListApiService.getTestedLastMark("export_tool",this.examId,i).subscribe(s=>{Array.isArray(s)||1!=s.success?(this.showErrorSnack(s.message??""),ci.closeLoadingEffect(10),this.exportLoading=!1):(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(r=>{a=r.lang_auto_tap_tin_dang_duoc_tai_xuong}),ci.changeMsgLoadingEffect(a),this.exportQuestionObjs=s.data?.questionObjs??[],this.totalExamQuestion=s.data?.totalQuestion??0,this.exportToExcelObjs=s.data?.studentsNotInClassResults??[],this.hasEssayQuestion=s.data?.hasEssayQuestion??!1,this.maxGroupQuestion=s.data?.maxGroupId??0,this.exportToExcelObjs=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.sortByMarkDESC?.value?this.sortService.sortMarkDESC(s.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(s.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(s.data?.studentsNotInClassResults??[]),s.data?.questionObjs??[]),this.exportToExcelObjs=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.exportToExcelObjs),this.hasEssayQuestion),this.dataExportLastTime=this.processDataForExcel(s.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+t)?.click(),ci.closeLoadingEffect(10),this.exportLoading=!1},1e4),this.successStatusObj())})):"highest"==t?this.subscriptions.add(this.testedListApiService.getTestedHighestMark("export_tool",this.examId,i).subscribe(s=>{1==s.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(r=>{a=r.lang_auto_tap_tin_dang_duoc_tai_xuong}),ci.changeMsgLoadingEffect(a),this.exportQuestionObjs=s.data?.questionObjs??[],this.totalExamQuestion=s.data?.totalQuestion??0,this.highestMark=s.data?.studentsNotInClassResults??[],this.hasEssayQuestion=s.data?.hasEssayQuestion??!1,this.maxGroupQuestion=s.data?.maxGroupId??0,this.highestMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(s.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(s.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(s.data?.studentsNotInClassResults??[]),s.data?.questionObjs??[]),this.highestMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.highestMark),this.hasEssayQuestion),this.dataExportHighestMark=this.processDataForExcel(s.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+t)?.click(),ci.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(s.message??""),ci.closeLoadingEffect(10),this.exportLoading=!1)})):"firstTime"==t?this.subscriptions.add(this.testedListApiService.getTestedFirstMark("export_tool",this.examId,i).subscribe(s=>{1==s.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(r=>{a=r.lang_auto_tap_tin_dang_duoc_tai_xuong}),ci.changeMsgLoadingEffect(a),this.exportQuestionObjs=s.data?.questionObjs??[],this.totalExamQuestion=s.data?.totalQuestion??0,this.firstMark=s.data?.studentsNotInClassResults??[],this.hasEssayQuestion=s.data?.hasEssayQuestion??!1,this.maxGroupQuestion=s.data?.maxGroupId??0,this.firstMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(s.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(s.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(s.data?.studentsNotInClassResults??[]),s.data?.questionObjs??[]),this.firstMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.firstMark),this.hasEssayQuestion),this.dataExportFirstTime=this.processDataForExcel(s.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+t)?.click(),ci.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(s.message??""),ci.closeLoadingEffect(10),this.exportLoading=!1)})):"allTime"==t&&this.subscriptions.add(this.testedListApiService.getTestedAllResult("export_tool",this.examId,i).subscribe(s=>{1==s.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(r=>{a=r.lang_auto_tap_tin_dang_duoc_tai_xuong}),ci.changeMsgLoadingEffect(a),this.exportQuestionObjs=s.data?.questionObjs??[],this.totalExamQuestion=s.data?.totalQuestion??0,this.allTimeMark=s.data?.studentsNotInClassResults??[],this.maxGroupQuestion=s.data?.maxGroupId??0,this.allTimeMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(s.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(s.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(s.data?.studentsNotInClassResults??[]),s.data?.questionObjs??[]),this.allTimeMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.allTimeMark),this.hasEssayQuestion),this.dataExportAllTime=this.processDataForExcel(s.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+t)?.click(),ci.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(s.message??""),ci.closeLoadingEffect(10),this.exportLoading=!1)}))}})}exportToPDF(t){this.exportResultService.processClasses(this.examObj?.id??0,t).then(()=>{}).catch(i=>{this.commonService.snackError("string"==typeof i?i:i.message)})}scanMarkObjs(t){t&&(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData())}closeScanFile(t){t&&(this.showFileScan=!1,0==this.allViewExamResultObjsOfStudentByClassroom.length&&this.selectTabClassroomShow(-1))}openFileScan(t){this.showFileScan=!(!t||!this.loadedJs)&&t}checkHasExamOffline(t){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(t).subscribe(i=>{1==i.success?i.data?.value&&this.homeworkExamService.isPdfExam(this.examObj?.examType??0)?(this.hasExamOffline=!0,this.tokenScanExamOffline=i.data?.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=i.message??""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(t){t&&(this.mustShownResultId=t)}parseAllUserObjsForMonitorModule(t){let i=this.examResultListSortService._changeExamResultStatusForAllClassroom(t,this.hasEssayQuestion,!0),a=[];return i.forEach(s=>{s.results&&s.results.length>0&&s.classObj?.id==this.currentSelectClassroomId&&s.results.forEach(r=>{var c={userid:r.userId,studentid:r.studentId,username:null,studentname:r.fullName,status:r.isOnTest?1:r.isNotMarked?2:r.isMarked?3:0};this.commonService.filterArray(a,c)||a.push(c)})}),a}changeHeaderTitle(){var t=0,i=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(a=>{t+=a.classObj?.countStudents??0,i+=a.classObj?.totalTested??0}),this.totalSubmitted=i,this.totalStudents=t,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(a=>{this.headerTitle=a+" ("+this.totalSubmitted+"/"+this.totalStudents+")"})}reloadApi(){this.browserStorageService.removeSimpleSessionStorage("exam_results_shown_class_"+this.examObj?.hashId),this.headerTitle="",this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.loadingResultList=!0,this.getData()}selectTabClassroomShow(t){this.currentSelectClassroomId=t,this.getStudentResultByPage(1)}selectPageClassroomShow(t){this.currentSelectClassroomId=t.classroomId??-1,this.getStudentResultByPage(t.page??1)}getStudentResultByPage(t,i){let a=this.commonService.getFormObj(this.form);this.examPageResultService.apiExamPageResultListResultsGet(this.examId,this.currentSelectClassroomId,a.searchContent?a.searchContent:void 0,void 0,1,this.sizePage*t).subscribe(s=>{if(s.success&&s.data?.objs&&s.data?.objs.length){this.allRawExamResultObjsOfStudentByClassroom.forEach(c=>{c.classObj?.id==this.currentSelectClassroomId&&(c.results=this.convertStudentResults(s.data?.objs??[]))},this.allRawExamResultObjsOfStudentByClassroom),this.allRawExamResultObjsOfStudentByClassroom=this.examResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0),this.changeFilterEvent(),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=s.data.next??!1,this.scanLoading=!1,this.isNotTestedYet=!1,this.loadingResultList=!1,i&&(this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter(),this.noDataSearch=!1),-1!=this.currentSelectClassroomId&&(this.allUserObjsForMonitorModule=this.parseAllUserObjsForMonitorModule(this.allRawExamResultObjsOfStudentByClassroom));let l={classroomId:this.currentSelectClassroomId,page:t};this.browserStorageService.saveSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId,this.commonService.serializeJson(l)),this.successStatusObj()}else i?(this.allViewExamResultObjsOfStudentByClassroom=[],this.noDataSearch=!0):-1!=this.currentSelectClassroomId&&this.currentSelectClassroomId?(this.isNotTestedYet=!1,this.allRawExamResultObjsOfStudentByClassroom=this.examResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0)):this.isNotTestedYet=!0,this.changeFilterEvent(),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=!1,this.scanLoading=!1,this.loadingResultList=!1,this.stopStatusObj()})}convertStudentResults(t){let i=[];return t.forEach(a=>{i.push({id:a.studentId,resultId:a.id,studentId:a.studentId,classroomIds:[a.classroomId??-1],userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt,avatar:a.attendeeAvatar,isOffline:a.isOffline,subjectMarkValues:a.subjectMarks,studentCode:a.studentCode,offlineMixQuestionHashId:a.rawOfflineMixQuestionId})}),i}afterRemoveOfflineResult(t){t&&this.reloadApi()}getData(){this.testedListApiNewService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(t=>{if(1==t.success){this.initDataTestedList=t.data??{studentsNotInClassResults:[]},this.examObj=t.data?.examObj,this.maxGroupQuestion=t.data?.maxGroupId??0;let i=this.commonService.getMyQueryParam("backto")??"";if(this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj?.orcLogId),this.countEssayQuestion=this.examResultListSortService._counterTotalEssayOfQuestionObjs(t.data?.questionObjs??[]),this.hasEssayQuestion=!!this.countEssayQuestion,t.data?.studentsInClassResults&&t.data?.studentsInClassResults.length>0){this.allRawExamResultObjsOfStudentByClassroom=t.data?.studentsInClassResults;let a=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId)??"")??{};this.currentSelectClassroomId=a&&a.classroomId&&this.findClassroomDataByClassroomId(this.allRawExamResultObjsOfStudentByClassroom,a.classroomId.toString())?a.classroomId:t.data?.studentsInClassResults[0].classObj?.id??-1,this.getStudentResultByPage(1)}else this.checkHasExamOffline(this.examObj?.hashId??""),this.isNotTestedYet=!0,this.scanLoading=!1,this.successStatusObj()}else if(this.scanLoading=!1,this.isNotTestedYet=!0,t.data&&t.data.errorConfigClassroomPermission)this.examObj=t.data.examObj,this.checkHasExamOffline(this.examObj?.hashId??""),this.stopStatusObj();else{let i=this.commonService.getMyQueryParam("backto")??"";this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(t.message??"")}})}findClassroomDataByClassroomId(t,i){for(var a of t)if(a.classObj?.id?.toString()==i)return!0;return!1}loadingFileJs(){var t=this;return new Promise((i,a)=>{var s=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(s).then((0,$n.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&i(!0),a(new Error("lang_core_lib_not_load"))):(t.countRetryLoadJS++,t.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):t.loadingFileJs())},1e3)})).catch(r=>{a(new Error("lang_core_lib_not_load"))})})}ngOnInit(){this.initStatusObj(),this.getStatusSideNav(),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.form=this.fb.group({searchContent:new p.NI("",p.kI.required),isSortByNameAsc:new p.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByNameAsc")),isSortByMarkDesc:new p.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByMarkDesc")),isSortByTimeDesc:new p.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"))}),this.cateId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.examId=Number(this.activeRoute.snapshot.paramMap.get("id"))??0,this.resultId=Number(this.activeRoute.snapshot.paramMap.get("result_id"))??0;let t=this.commonService.getMyQueryParam("backto")??"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,t&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(t)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.subscriptions.add(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanMarkObjs(!0)})),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}constructor(t,i,a,s,r,l,c,d,f,y,O,N,I,z,$,Y,V,te){super(),this.fb=t,this.sortService=i,this.examFilterService=a,this.examPageResultService=s,this.testedListApiNewService=r,this.testedListApiService=l,this.offlineExamResultService=c,this.homeworkExamService=d,this.globalService=f,this.activeRoute=y,this.monitorService=O,this.cdnService=N,this.exportResultService=I,this.examResultFilterService=z,this.examResultListSortService=$,this.dialog=Y,this.mobileWebviewService=V,this.browserStorageService=te,this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.form=new p.cw({}),this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.allUserObjsForMonitorModule=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.sizePage=100,this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.headerTitle="",this.noDataSearch=!1,this.totalExamQuestion=0,this.loadingResultList=!1,this.canNextPage=!1,this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.currentDate=new Date,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0,this.currentSelectClassroomId=-1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(is.K),e.Y36(pu),e.Y36(Ve.DR),e.Y36(Jy),e.Y36(nl.x),e.Y36(Rn.$4),e.Y36(Aa.j),e.Y36(Ns.U),e.Y36(T.gz),e.Y36(hm.M),e.Y36(xt.U),e.Y36(il.e),e.Y36(gm),e.Y36(Hy.n),e.Y36(j.uw),e.Y36(Gr.F),e.Y36(we.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-result-list-new"]],viewQuery:function(t,i){if(1&t&&e.Gf(ak,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e.qOj],decls:62,vars:41,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-new-20jmo8LMYqG","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-PlRPlXkXka5","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-gV0jdKgcvAo","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],["onlineExam",""],[3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-new-o479Z6DA7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-new-0py_X_1wx7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","exam-result-list-new-ZcBH31bMc7","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","lucide-search","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion",4,"ngIf"],[3,"initData","loadingApi","isNotTestedYet","reloadApi"],[3,"initData","currentSelectedClassroomId","isNotTestedYet","userList","reloadApi"],["azt-track-service","exam-result-list-new-o479Z6DA7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-new-0py_X_1wx7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","examResultObjsByClassroom","isNotTestedYet","isOpenSideNav","hasEssayQuestion","showFileScan","obj","scanLoading","isMobile","currentClassroomId","headerTitle","mustShownResultId","loadingResultList","canNextPage","removeOfflineResultEmitter","selectTabClassroomEmitter","selectPageClassroomEmitter","notTestedOpenFileScan"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit",4,"ngIf"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit"],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],["azt-track-service","exam-result-list-new-esmVBDKJjs",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-new-dlmCFDcvLN",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-IJMCAvs_Zj",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-zKngslcUte",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-GFRfEkklS3",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-new-CFoSFfiD7N0",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-K6OMK-6lFqk",1,"dropdown-item",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,sk,1,0,"azt-loading-effect",1),e.YNc(2,Ck,39,36,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),e.YNc(9,kk,8,3,"li",8),e.ALo(10,"viewPermission"),e.YNc(11,Tk,8,3,"li",8),e.ALo(12,"viewPermission"),e.YNc(13,Ak,8,3,"li",8),e.ALo(14,"viewPermission"),e.YNc(15,Ok,8,3,"li",8),e.ALo(16,"viewPermission"),e.YNc(17,Sk,10,3,"li",8),e.ALo(18,"viewPermission"),e.YNc(19,Ek,10,3,"li",8),e.ALo(20,"viewPermission"),e.YNc(21,Mk,10,3,"li",8),e.ALo(22,"viewPermission"),e.TgZ(23,"li")(24,"label",9),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(25,"span",10),e.O4$(),e.TgZ(26,"svg",11),e._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),e.qZA(),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(34,"div",17)(35,"input",18),e.NdJ("change",function(){return i.changeSortEvent("isSortByNameAsc")}),e.qZA()()()(),e.TgZ(36,"li")(37,"label",19),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(38,"span",10),e.O4$(),e.TgZ(39,"svg",11),e._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),e.qZA(),e._uU(45),e.ALo(46,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(47,"div",17)(48,"input",22),e.NdJ("change",function(){return i.changeSortEvent("isSortByMarkDesc")}),e.qZA()()()(),e.TgZ(49,"li")(50,"label",23),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(51,"span",10),e.O4$(),e.TgZ(52,"svg",11),e._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),e.qZA(),e._uU(58),e.ALo(59,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(60,"div",17)(61,"input",24),e.NdJ("change",function(){return i.changeSortEvent("isSortByTimeDesc")}),e.qZA()()()()()()()()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngIf",e.xi3(10,14,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(12,17,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(14,20,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(16,23,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(18,26,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(20,29,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(22,32,null==i.examObj?null:i.examObj.permissionObj,"exam")),e.xp6(11),e.hij(" ",e.lcZ(33,35,"lang_testbank_testted_list_sort_name")," "),e.xp6(13),e.hij(" ",e.lcZ(46,37,"lang_testbank_testted_list_sort_point")," "),e.xp6(13),e.hij(" ",e.lcZ(59,39,"lang_testbank_testted_list_sort_time")," ")}},dependencies:[M.mk,M.O5,en.VK,en.p6,Ni.jA,Ni.kh,Ni.LW,Zt.gM,x.KC,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.sg,p.u,jt.Q,Bt.M,ol,pn._,U4,Ow,Ww,T6,ci,E6,ok,re.bT,re.Pz],encapsulation:2}),n})(),Tm=(()=>{class n{getDefaultFilterObj(){var t=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(t=i),t}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(t){var i=0;for(var a in t)!0===t[a]&&(i+=1);return i}_getInitFilterObj(){return{isSubmitted:!1,isNotSubmit:!1,isMarked:!1,mustReSubmit:!1}}constructor(t,i){this.commonService=t,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_homework_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v),e.LFG(we.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Lk=S(13739);function Zk(n,o){1&n&&(e.TgZ(0,"div",3),e.O4$(),e.TgZ(1,"svg",4)(2,"g",5)(3,"g",6),e._UZ(4,"circle",7),e.TgZ(5,"path",8),e._UZ(6,"animateTransform",9),e.qZA()()()()())}function Pk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"form",11)(2,"div",12)(3,"div",13)(4,"h3",14),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",15),e._UZ(8,"editor",16),e.qZA()()()(),e.TgZ(9,"div",17)(10,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveHomework())}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.hij(" ",e.lcZ(6,5,"lang_auto_noi_dung")," "),e.xp6(3),e.Q6J("init",t.initDataEditor),e.xp6(3),e.hij(" ",e.lcZ(12,7,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(15,9,"lang_auto_luu")," ")}}let jk=(()=>{class n extends W.Q{closeDialog(){this.dialogRef.close()}saveHomework(){if(this.initStatusObj(),this.form.invalid)this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");else{var i=this.commonService.getFormObj(this.form).homeworkDescription;this.uploadImageOfHomeworkService.replaceImageInContent(i).subscribe(a=>{if(null==a.errorMessage){let r={content:this.zipDataService.convertContentGzip(a.content)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,r).subscribe(l=>{1==l.success?(l.data&&l.data.objs&&this.data.callback(l.data.objs[0]),this.closeDialog(),this.showSuccessSnack("lang_auto_luu_thanh_cong")):this.errorStatusObj(l.message??"",!0)}))}else this.showErrorSnack(a.errorMessage),this.stopStatusObj()})}}getHomework(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(t,[]).subscribe(i=>{if(1==i.success){this.homeworkObj=i.data?.homeworkObj;let a=this.homeworkObj?.content?this.zipDataService.decodeContentGzip(this.homeworkObj?.content):"";this.form.patchValue({homeworkDescription:a}),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}checkModeUiEditor(){this.initDataEditor="dark"==(""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light")?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}ngOnInit(){this.form=this.formBuilder.group({homeworkDescription:new p.p4("")}),this.checkModeUiEditor(),super.ngOnInit()}ngOnChanges(){this.checkModeUiEditor()}constructor(t,i,a,s,r,l,c){super(),this.formBuilder=t,this.zipDataService=i,this.documentConfigService=a,this.browserStorageService=s,this.uploadImageOfHomeworkService=r,this.dialogRef=l,this.data=c,this.form=new p.nJ({}),this.permissionTypes=Zn.y,this.homeworkId=0,this.homeworkHashId="",this.homeworkObj=void 0,this.initDataEditor={},this.homeworkHashId=c.hashId,this.getHomework(this.homeworkHashId)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36($i.D),e.Y36(Ve.Cq),e.Y36(we.z),e.Y36(Jo.J),e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-homework"]],features:[e._Bn([{provide:Tn.fM,useClass:So.WG,deps:[ji.Ad,ga.o8]},{provide:Tn.ab,useFactory:$a.hx,deps:[Mt.O]}]),e.qOj,e.TTD],decls:4,vars:2,consts:[[1,"box"],["class","azt-icon-loading text-center p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"azt-icon-loading","text-center","p-5"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"mx-auto","w-8","h-8"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"setting","p-3"],[3,"formGroup"],["id","document-desc"],[1,"setting-label-textarea"],[1,"text-md","font-medium"],[1,"mt-2"],["formControlName","homeworkDescription","apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"init"],[1,"p-3","text-right"],["azt-track-service","config-homework-dialog-lVvTPghlWFp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","config-homework-dialog-DfiuQtfSx_I",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Zk,7,0,"div",1),e.YNc(2,Pk,16,11,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,g.PG,p._Y,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],encapsulation:2}),n})(),Dk=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i}handleCloseDialog(){this.dialogRef.close(!1)}handleConfirmDialog(){this.dialogRef.close(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so),e.Y36(j.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-delete-dialog"]],decls:23,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-Bb7ymz69OiI",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-5Ii165wkYxm",1,"btn","w-24","btn-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(12,"div",10)(13,"p",11),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()(),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){return i.handleCloseDialog()}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return i.handleConfirmDialog()}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(10),e.hij(" ",e.lcZ(11,4,"lang_auto_ban_co_chac_chan_muon_xoa")+" ?"," "),e.xp6(4),e.hij(" ",e.lcZ(15,6,"lang_auto_ban_muon_xoa_file")+" "+i.data.name," "),e.xp6(4),e.hij(" ",e.lcZ(19,8,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(22,10,"lang_auto_xac_nhan")," "))},dependencies:[re.bT],encapsulation:2}),n})();function Nk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clickToSeeMore())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_cms_common_see_more")))}function Qk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clickToShowShortContent())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_cms_common_see_short_content")))}let qk=(()=>{class n extends W.Q{constructor(){super(...arguments),this.content="",this.maxLength=500,this.showContent="",this.showSeeMoreButton=!0,this.showShortContentButton=!1}clickToShowShortContent(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}clickToSeeMore(){this.showSeeMoreButton=!1,this.showShortContentButton=!0,this.processSeeMore()}processSeeMore(){let t=this.commonService.removeTagHtml(this.content);t.length>this.maxLength?this.showContent=this.showSeeMoreButton?t.substring(0,this.maxLength)+"...":this.content:(this.showSeeMoreButton=!1,this.showShortContentButton=!1,this.showContent=this.content)}ngOnInit(){this.processSeeMore(),super.ngOnInit()}ngOnChanges(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-see-more"]],inputs:{content:"content",maxLength:"maxLength"},features:[e.qOj,e.TTD],decls:3,vars:3,consts:[[3,"innerHTML"],["class","btn-text-primary",3,"click",4,"ngIf"],[1,"btn-text-primary",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"div",0),e.YNc(1,Nk,3,3,"a",1),e.YNc(2,Qk,3,3,"a",1)),2&t&&(e.Q6J("innerHTML",i.showContent,e.oJD),e.xp6(1),e.Q6J("ngIf",i.showSeeMoreButton&&i.content.length>i.maxLength),e.xp6(1),e.Q6J("ngIf",i.showShortContentButton&&i.content.length>i.maxLength))},dependencies:[M.O5,re.bT],encapsulation:2}),n})();function Fk(n,o){if(1&n&&(e.TgZ(0,"div",11),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"rect",13)(3,"line",14)(4,"line",15)(5,"line",16),e.qZA(),e.kcU(),e.TgZ(6,"span",17),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw();e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_bat_dau")+": "+e.lcZ(9,3,t.initData.homeworkObj.startDate)," ")}}function Uk(n,o){if(1&n&&e._UZ(0,"azt-share",32),2&n){const t=e.oxw();e.Q6J("objectCodeType",2)("objectCode","HOMEWORK")("objectId",t.initData.homeworkObj.id)("homeworkWithPermissionObj",t.initData.homeworkObj)}}function Rk(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",63)(2,"a",64),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToClassroomDetail())}),e._uU(3),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.s9C("matTooltip",t.initData.classroomObj.name),e.xp6(1),e.hij(" ",t.initData.classroomObj.name," ")}}function Bk(n,o){1&n&&(e.TgZ(0,"div",63)(1,"a",65),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function zk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openConfigDialog())}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",67)(3,"path",68),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function Jk(n,o){if(1&n&&(e.TgZ(0,"div",69),e._UZ(1,"azt-see-more",70),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("content",null!==(i=t.initData.homeworkObj.content)&&void 0!==i?i:"")("maxLength",200)}}function Hk(n,o){1&n&&(e.TgZ(0,"p",71),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_noi_dung")," "))}function Kk(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"path",73)(3,"polyline",74)(4,"line",75),e.qZA()())}function $k(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",76)(2,"g",77)(3,"g",78),e._UZ(4,"circle",79),e.TgZ(5,"path",80),e._UZ(6,"animateTransform",81),e.qZA()()()()())}function Yk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",72),e.NdJ("click",function(){e.CHM(t),e.oxw();const a=e.MAs(51);return e.KtG(a.click())}),e.YNc(1,Kk,5,0,"span",31),e.YNc(2,$k,7,0,"span",31),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.loadingUpload),e.xp6(1),e.Q6J("ngIf",t.loadingUpload),e.xp6(1),e.hij(" ",e.lcZ(4,3,"lang_auto_them_file")," ")}}function Gk(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",84),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.onShowFile(s,-1))}),e.O4$(),e.TgZ(2,"svg",19),e._UZ(3,"path",85)(4,"polyline",86)(5,"line",87)(6,"line",88)(7,"line",89),e.qZA(),e.kcU(),e.TgZ(8,"span",90),e._uU(9),e.qZA()(),e.TgZ(10,"button",91),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.removeFile(s))}),e.ALo(11,"mytranslate"),e.O4$(),e.TgZ(12,"svg",92),e._UZ(13,"line",93)(14,"line",94),e.qZA()(),e.BQk()}if(2&n){const t=o.$implicit;e.xp6(8),e.s9C("matTooltip",t.name),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(11,3,"lang_auto_xoa"))}}function Wk(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",82),e.YNc(2,Gk,15,5,"ng-container",83),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.formHomework.files)}}function Vk(n,o){1&n&&(e.TgZ(0,"p",95),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_file_dinh_kem")," "))}const Am=function(n){return{opacity:n}};function Xk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"h3",34),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",35)(5,"ul",36)(6,"li",37),e.ALo(7,"deletePermission"),e.TgZ(8,"a",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDeleteHomeworkDialog())}),e.O4$(),e.TgZ(9,"svg",12),e._UZ(10,"path",39)(11,"path",40)(12,"path",41)(13,"line",42)(14,"line",43),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(17,"li",37),e.ALo(18,"editPermission"),e.TgZ(19,"a",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToSetting())}),e.O4$(),e.TgZ(20,"svg",12),e._UZ(21,"path",45)(22,"circle",46),e.qZA(),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()()(),e.kcU(),e.TgZ(25,"div",47)(26,"div",48)(27,"h3",34),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"div",49),e.YNc(31,Rk,4,2,"ng-container",50),e.YNc(32,Bk,4,3,"ng-template",null,51,e.W1O),e.qZA()(),e.TgZ(34,"div",52)(35,"div",48)(36,"h3",34),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.YNc(39,zk,6,3,"button",53),e.ALo(40,"editPermission"),e.ALo(41,"configPermission"),e.qZA(),e.TgZ(42,"div",54),e.YNc(43,Jk,2,2,"div",55),e.YNc(44,Hk,3,3,"p",56),e.qZA()(),e.TgZ(45,"div",57)(46,"div",48)(47,"h3",34),e._uU(48),e.ALo(49,"mytranslate"),e.qZA(),e.TgZ(50,"input",58,59),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onFileSelected(a))}),e.qZA(),e.YNc(52,Yk,5,5,"button",60),e.ALo(53,"editPermission"),e.ALo(54,"configPermission"),e.qZA(),e.TgZ(55,"div",61),e._uU(56),e.ALo(57,"mytranslate"),e.qZA(),e.YNc(58,Wk,3,1,"ng-container",50),e.YNc(59,Vk,3,3,"ng-template",null,62,e.W1O),e.qZA()}if(2&n){const t=e.MAs(33),i=e.MAs(60),a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,17,"lang_auto_menu")," "),e.xp6(4),e.Q6J("ngStyle",e.VKq(49,Am,e.xi3(7,19,a.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),e.xp6(9),e.hij(" ",e.lcZ(16,22,"lang_auto_xoa")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(51,Am,e.xi3(18,24,a.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),e.xp6(6),e.hij(" ",e.lcZ(24,27,"lang_auto_cai_dat")," "),e.xp6(5),e.hij(" ",e.lcZ(29,29,"lang_auto_giao_cho")," "),e.xp6(3),e.Q6J("ngIf",a.initData.classroomObj)("ngIfElse",t),e.xp6(6),e.hij(" ",e.lcZ(38,31,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(40,33,null==a.initData.homeworkObj?null:a.initData.homeworkObj.permissionObj,"homework")||e.xi3(41,36,null==a.initData.homeworkObj?null:a.initData.homeworkObj.permissionObj,"homework")),e.xp6(4),e.Q6J("ngIf",null==a.initData.homeworkObj?null:a.initData.homeworkObj.content),e.xp6(1),e.Q6J("ngIf",!(null!=a.initData.homeworkObj&&a.initData.homeworkObj.content)),e.xp6(4),e.hij(" ",e.lcZ(49,39,"lang_auto_file_dinh_kem")," "),e.xp6(4),e.Q6J("ngIf",e.xi3(53,41,null==a.initData.homeworkObj?null:a.initData.homeworkObj.permissionObj,"exam")||e.xi3(54,44,null==a.initData.homeworkObj?null:a.initData.homeworkObj.permissionObj,"exam")),e.xp6(4),e.hij(" ",e.lcZ(57,47,"lang_auto_ho_tro_file_dinh_danh_anh_pdf_work_excel_audio_hoac_video")," "),e.xp6(2),e.Q6J("ngIf",null==a.formHomework.files?null:a.formHomework.files.length)("ngIfElse",i)}}function eT(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",96),e._UZ(2,"polyline",97),e.qZA()())}function tT(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",96),e._UZ(2,"polyline",98),e.qZA()())}let nT=(()=>{class n extends W.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong_duong_dan_nop_bai")}copyLinkToClipboard(t){return`${this.commonService.getCurrentDomain()}/bai-tap/${t}`}onFileSelected(t){if(this.permissionService.hasEditPermission("homework",this.initData.homeworkObj?.permissionObj)){let s=t.target,r=s.files,l=!!r&&r[0];0!=l&&((0,J.C0)(l.type)?(0,J.ml)(l.type)?this.showErrorSnack("lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,J.hv)(l).then(c=>{this.apiUploadService.uploadToCdnForHomework(c).subscribe(d=>{if(d.type!=C.dt.UploadProgress)if(1==d.success){this.formHomework.files.push({...d.data});let f={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",f).subscribe(y=>{1==y.success?this.showSuccessSnack("lang_auto_them_file_thanh_cong"):this.errorStatusObj(y.message??"",!0),this.loadingUpload=!1})),this.uploadProgress=-1}else this.loadingUpload=!1,this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",d.message??"none"))})})):this.showErrorSnack("lang_auto_vui_long_tai_len_file_dinh_dang_anh_pdf_word_excel_audio_hoac_video")),s.files=null}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}removeFile(t){this.dialog.open(Dk,{width:"400px",data:this.formHomework.files?.[t],restoreFocus:!1}).afterClosed().subscribe(a=>{if(a){this.formHomework.files?.splice(t,1);let s={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",s).subscribe(r=>{1==r.success?this.showSuccessSnack("lang_auto_xoa_file_thanh_cong"):this.errorStatusObj(r.message??"",!0),this.loadingUpload=!1}))}})}onShowFile(t,i){let a={...t,index:i};this.dialog.open(au.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:a},restoreFocus:!1})}redirectToClassroomDetail(){let t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,i=this.commonService.getMyQueryParam("backto")??"";i&&i.includes("shareType")&&(t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/student/class-details/${this.initData.classroomObj?.id}`,`?backto=${t}`)}redirectToSetting(){if(this.permissionService.hasEditPermission("homework",this.initData.homeworkObj?.permissionObj)){let i=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,a=this.commonService.getMyQueryParam("backto")??"";a&&a.includes("shareType")&&(i=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-homework/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.hashId}`,`?backto=${i}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.dialog.open(Qs._,{data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteHomeworkDialog(){this.permissionService.hasFullPermission("homework",this.initData.homeworkObj?.permissionObj)?this.dialog.open(fu,{data:{homeworkObj:this.initData.homeworkObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.commonService.myNavigation("/admin/testbank/document-management/1/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openConfigDialog(){this.dialog.open(jk,{width:"850px",data:{callback:this.callbackConfigDialog.bind(this),showConfig:{description:!0},hashId:this.initData.homeworkObj?.hashId},restoreFocus:!1})}callbackConfigDialog(t){this.initData.homeworkObj&&(this.initData.homeworkObj.name=t.name??"",this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(t.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}processData(){this.initData.homeworkObj&&(this.formHomework.files=this.commonService.myParseJson(this.initData.homeworkObj.files??"")??[],this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(this.initData.homeworkObj.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}ngOnInit(){this.processData(),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.dialog=t,this.apiUploadService=i,this.documentConfigService=a,this.zipDataService=s,this.permissionService=r,this.reloadApi=new e.vpe,this.isShowActions=!0,this.loadingUpload=!1,this.uploadProgress=0,this.formHomework={files:[],content:""}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(Ln.$),e.Y36(Ve.Cq),e.Y36($i.D),e.Y36(eo.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-homework"]],inputs:{initData:"initData"},outputs:{reloadApi:"reloadApi"},features:[e.qOj],decls:47,vars:28,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",2,"max-width","60%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","mt-2","lg:mt-0","flex","items-center"],["azt-track-service","menu-homework-eI2NNVUSUY1",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"ml-1",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["class"," flex items-center mt-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],["d","M21 15.5V6a2 2 0 0 0-2-2H9.5"],["d","M16 2v4"],["d","M3 10h7"],["d","M21 10h-5.5"],["x1","2","y1","2","x2","22","y2","22"],[1,"text-sm","inline-block","ml-1"],[1,"flex","mt-2"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-homework-uD4Lx8Z-l-r",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"objectCodeType","objectCode","objectId","homeworkWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-homework-2OnoCiN1dtn",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-homework--_M1HhvAdpz",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-homework-TNawByu5aUA","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"azt-document-desc"],["id","description_content","class","description text-left",4,"ngIf"],["class","text-md text-center",4,"ngIf"],[1,"azt-document-file","mt-4"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""],["azt-track-service","menu-homework-nZbwE5HD5ts","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"leading-relaxed","text-slate-500","text-xs"],["noFile",""],[1,"col-span-12","md:col-span-6"],["azt-track-service","menu-homework-zV31SFaqVqP",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-homework-TNawByu5aUA",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["id","description_content",1,"description","text-left"],[3,"content","maxLength"],[1,"text-md","text-center"],["azt-track-service","menu-homework-nZbwE5HD5ts",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-4","h-4","lucide","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"app-block-detail","mt-2"],[4,"ngFor","ngForOf"],["azt-track-service","menu-homework-qPLF48TFcWr",1,"btn-text-primary",2,"width","85%",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],[1,"truncate",2,"width","75%","text-align","left",3,"matTooltip"],["azt-track-service","menu-homework-8wcAt-Fpoyn",1,"btn","btn-transparent",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"text-md","text-center","mt-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.showCopySuccess()}),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"rect",8)(10,"path",9),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.kcU(),e._UZ(13,"azt-download-qr-code",10),e.qZA()(),e.TgZ(14,"div",11),e.O4$(),e.TgZ(15,"svg",12),e._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),e.qZA(),e.kcU(),e.TgZ(20,"span",17),e._uU(21),e.ALo(22,"mytranslate"),e.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.YNc(24,Fk,10,5,"div",18),e.TgZ(25,"div",11),e.O4$(),e.TgZ(26,"svg",19),e._UZ(27,"path",20)(28,"path",21)(29,"path",22)(30,"path",23)(31,"path",24)(32,"line",25),e.qZA(),e.kcU(),e.TgZ(33,"span",17),e._uU(34),e.ALo(35,"mytranslate"),e.qZA(),e.TgZ(36,"span",26),e._uU(37),e.ALo(38,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(39,"mytranslate"),e.qZA()(),e.TgZ(40,"div",27),e.YNc(41,Uk,1,4,"ng-template",28),e.qZA()(),e.YNc(42,Xk,61,53,"ng-template",28),e.TgZ(43,"div",29)(44,"button",30),e.NdJ("click",function(){return i.toggleShowActions()}),e.YNc(45,eT,3,0,"span",31),e.YNc(46,tT,3,0,"span",31),e.qZA()()()),2&t){const a=e.MAs(4);e.xp6(3),e.s9C("matTooltip",i.initData.homeworkObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",i.initData.homeworkObj.name," "),e.xp6(2),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),e.xp6(4),e.hij(" ",e.lcZ(12,16,"lang_auto_copy_link")," "),e.xp6(2),e.Q6J("fileName","azota_submit_homework_qrcode_"+i.initData.homeworkObj.hashId)("linkUrl",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),e.xp6(8),e.hij(" ",e.lcZ(22,18,"lang_testbank_tested_list_date_create")+": "+e.lcZ(23,20,i.initData.homeworkObj.createdAt)," "),e.xp6(3),e.Q6J("ngIf",null==i.initData.homeworkObj?null:i.initData.homeworkObj.startDate),e.xp6(10),e.hij(" ",e.lcZ(35,22,"lang_auto_han_cuoi")+": "," "),e.xp6(3),e.hij(" ",i.initData.homeworkObj.deadline?e.lcZ(38,24,i.initData.homeworkObj.deadline):e.lcZ(39,26,"lang_auto_khong_thoi_han")," "),e.xp6(4),e.Q6J("ngIf",i.initData.homeworkObj.id),e.xp6(1),e.Q6J("ngIf",i.isShowActions),e.xp6(3),e.Q6J("ngIf",i.isShowActions),e.xp6(1),e.Q6J("ngIf",!i.isShowActions)}},dependencies:[M.sg,M.O5,M.PC,ea.i3,Zt.gM,Ps.o,qk,ho.Q,el.I,re.bT,re.BU,re.vL,re.El,re.tO],encapsulation:2}),n})();const iT=["TABLE"];function oT(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.ALo(5,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(6,"td",7),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"td",4),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"td",4),e._UZ(16,"span",8),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",0)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(t.fullName),e.xp6(1),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",1)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(e.lcZ(5,25,t.birthday)),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",2)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(0==t.gender?e.lcZ(8,27,"lang_gender_female"):1==t.gender?e.lcZ(9,29,"lang_gender_male"):""),e.xp6(3),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",3)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(t.isMarked?a.checkPoint(t.point?t.point:0):t.mustReSubmit?e.lcZ(12,31,"lang_homework_utils_excel_table_export_must_resubmit"):t.isNotSubmit?e.lcZ(13,33,"lang_homework_utils_excel_table_export_not_submit"):e.lcZ(14,35,"lang_homework_utils_excel_table_export_not_point")),e.xp6(4),e.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",4)("excelStyle",a.styleTdNormal),e.xp6(1),e.Q6J("innerHTML",a.getComment(t.answer),e.oJD)}}let aT=(()=>{class n extends W.Q{exportToExcel(){let t=this.homeworkObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.homeworkObj.name??""])+"-ScoreSheet.xlsx":this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx",i=this.exportExcelService.exportHtmlTableToExcelBlob(this.TABLE,!0);this.shareFileFlutterService.shareFileWithBlob(i,t)}checkPoint(t){let i=this.commonService.myTranslateInstant("lang_auto_dat")??"",a=this.commonService.myTranslateInstant("lang_auto_chua_dat")??"",s=this.commonService.myTranslateInstant("lang_auto_hoan_thanh")??"",r=this.commonService.myTranslateInstant("lang_auto_chua_hoan_thanh")??"",l=this.commonService.myTranslateInstant("lang_auto_hoan_thanh_tot")??"";switch(t){case 1e3:return i;case 1001:return a;case 2e3:return s;case 2001:return r;case 3e3:return l;default:return t}}getComment(t){var i="";return null!=t&&t.result&&(i=this.commonService.willDeleteParseJson(t.result).comment),this.commonService.removeTagHtml(i)}ngOnInit(){super.ngOnInit()}constructor(t,i){super(),this.shareFileFlutterService=t,this.exportExcelService=i,this.studentLists=[],this.tableType="homework",this.currentDate=new Date,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Vo.g),e.Y36(zr.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-excel-export"]],viewQuery:function(t,i){if(1&t&&e.Gf(iT,5),2&t){let a;e.iGM(a=e.CRH())&&(i.TABLE=a.first)}},inputs:{studentLists:"studentLists",homeworkObj:"homeworkObj",tableType:"tableType"},features:[e.qOj],decls:44,vars:54,consts:[["azt-track-service","excel-table-export-ZXUlfEPdCW2",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table","azt-excel-cell"],[4,"ngFor","ngForOf"],["colspan","2",1,"border-table","azt-excel-cell"],[1,"azt-excel-cell"],[3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"table",0,1),e.NdJ("click",function(){return i.exportToExcel()}),e.TgZ(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"tr"),e._UZ(8,"th"),e.qZA(),e.TgZ(9,"tr")(10,"th",3),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"formatOnlyDateByUserUnitPipe"),e.qZA()(),e.TgZ(14,"tr"),e._UZ(15,"th"),e.qZA(),e.TgZ(16,"tr")(17,"th",4),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"th",4),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"th",4),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"th",4),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"th",4),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,oT,17,37,"tr",5),e._UZ(34,"tr"),e.TgZ(35,"tr"),e._UZ(36,"td")(37,"td")(38,"td"),e.TgZ(39,"td",6),e._uU(40),e.ALo(41,"mytranslate"),e.qZA(),e._UZ(42,"td")(43,"td"),e.qZA()()()),2&t&&(e.MGl("id","table_",i.tableType,""),e.xp6(5),e.AsE("",e.lcZ(6,36,"lang_homework_utils_excel_table_export_homework"),": ",i.homeworkObj.name,""),e.xp6(6),e.AsE("",e.lcZ(12,38,"lang_homework_utils_excel_table_export_time_export_result"),": ",e.lcZ(13,40,i.currentDate),""),e.xp6(6),e.uIk("excelWidth",30)("excelRow",4)("excelColumn",0)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(19,42,"lang_first_and_last_name")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(22,44,"lang_birthday")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(25,46,"lang_gender")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",3)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(28,48,"lang_point")),e.xp6(2),e.uIk("excelWidth",30)("excelRow",4)("excelColumn",4)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(31,50,"lang_homework_utils_excel_table_export_comment")),e.xp6(3),e.Q6J("ngForOf",i.studentLists),e.xp6(6),e.uIk("excelWidth",15)("excelRow",6+i.studentLists.length)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.hij("",e.lcZ(41,52,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[M.sg,re.bT,re._I],encapsulation:2}),n})();var sT=S(61725);const rT=["student",""];function lT(n,o){1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_cham")))}function cT(n,o){1&n&&(e.TgZ(0,"span",15),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_nop")))}function uT(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai"),""))}function dT(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_point")+": "))}function mT(n,o){if(1&n&&(e.TgZ(0,"span",17),e._UZ(1,"azt-check-mark",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("mark",t.student.point)}}function _T(n,o){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.timeService.calculationTime(t.student.createdAt||void 0)+" "+e.lcZ(2,1,"lang_auto_truoc")," ")}}function pT(n,o){1&n&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function hT(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,pT,3,3,"p",21),e.TgZ(2,"p",22),e._uU(3),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isSubmitted),e.xp6(2),e.hij(" ",null!==(i=null==t.student.answerFileObjs?null:t.student.answerFileObjs.length)&&void 0!==i?i:0," ")}}const gT=function(n){return{"zoom-in":n}};let fT=(()=>{class n extends W.Q{constructor(t){super(),this.timeService=t}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-result-student-exam-result-box","student",""]],inputs:{student:"student"},features:[e.qOj],attrs:rT,decls:16,vars:15,consts:[[1,"flex","items-center","p-3","rounded-md","h-full","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name"],[1,"font-medium",3,"isDisabledTooltip"],[1,"flex","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-xs",4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"text-pending"],[1,"text-danger"],[1,"text-slate-500"],[1,"text-black","font-medium"],[3,"mark"],[1,"text-slate-500","text-xs"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"azt-create-avatar",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e.YNc(9,lT,3,3,"span",8),e.YNc(10,cT,3,3,"span",9),e.YNc(11,uT,3,3,"span",10),e.YNc(12,dT,3,3,"span",10),e.YNc(13,mT,2,1,"span",11),e.qZA(),e.YNc(14,_T,3,3,"div",12),e.qZA(),e.YNc(15,hT,4,2,"div",13),e.qZA()()),2&t){let a;e.Q6J("ngClass",e.VKq(13,gT,!(i.student.isNotSubmit&&i.student.mustReSubmit))),e.xp6(2),e.Q6J("linkAvatar",null!==(a=i.student.avatar)&&void 0!==a?a:"")("nameCreateAvatar",i.student.fullName)("size",40),e.xp6(3),e.Q6J("isDisabledTooltip",!1),e.xp6(1),e.hij(" ",i.student.fullName," "),e.xp6(3),e.Q6J("ngIf",i.student.isSubmitted),e.xp6(1),e.Q6J("ngIf",i.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",i.student.mustReSubmit),e.xp6(1),e.Q6J("ngIf",i.student.isMarked),e.xp6(1),e.Q6J("ngIf",i.student.isMarked),e.xp6(1),e.Q6J("ngIf",null!=i.student.createdAt),e.xp6(1),e.Q6J("ngIf",i.student.isMarked||i.student.isSubmitted)}},dependencies:[M.mk,M.O5,Fs.g,sT.B,ho.Q,re.bT],encapsulation:2}),n})();function xT(n,o){if(1&n&&(e.TgZ(0,"div",4),e.GkF(1,5),e.qZA()),2&n){e.oxw();const t=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}const bT=function(n){return[n]},vT=function(n){return{backto:n}};function yT(n,o){if(1&n&&(e.TgZ(0,"div",14)(1,"a",15),e.ALo(2,"navigationLocalize"),e._UZ(3,"testbank-homework-result-student-exam-result-box",16),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("routerLink",e.VKq(5,bT,e.lcZ(2,3,"/admin/homework/switch-mark-exercise/"+t.answer.id+"/"+i.obj.hashId)))("queryParams",e.VKq(7,vT,i.backToLink)),e.xp6(2),e.Q6J("student",t)}}function wT(n,o){if(1&n&&e._UZ(0,"testbank-homework-result-student-exam-result-box",16),2&n){const t=e.oxw().$implicit;e.Q6J("student",t)}}const CT=function(n){return{"lg:col-span-3":n}};function kT(n,o){if(1&n&&(e.TgZ(0,"div",11),e.YNc(1,yT,4,9,"div",12),e.YNc(2,wT,1,1,"ng-template",null,13,e.W1O),e.qZA()),2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(2);e.Q6J("ngClass",e.VKq(3,CT,!a.isOpenSideNav&&!a.isMobile)),e.xp6(1),e.Q6J("ngIf",t.answer)("ngIfElse",i)}}function TT(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",6)(2,"ng-scrollbar",7)(3,"div",8)(4,"div",9),e.YNc(5,kT,4,5,"div",10),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("visibility","hover"),e.xp6(3),e.Q6J("ngForOf",t.studentLists)}}function AT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"p",18),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",19),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"a",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(10,"svg",21),e._UZ(11,"circle",22)(12,"circle",23)(13,"circle",24)(14,"line",25)(15,"line",26),e.qZA(),e.kcU(),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"lang_auto_chua_co_du_lieu_nop_bai")),e.xp6(3),e.lnq("",e.lcZ(6,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',e.lcZ(7,10,"lang_auto_copy_link_bai_tap"),'" ',e.lcZ(8,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),e.xp6(4),e.Q6J("cdkCopyToClipboard",t.copyLinkHomeWorkToClipboard()),e.xp6(8),e.Oqu(e.lcZ(18,14,"lang_auto_copy_link_bai_tap"))}}let OT=(()=>{class n extends W.Q{copyLinkHomeWorkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}constructor(t){super(),this.timeService=t,this.isOpenSideNav=!0,this.backToLink="",this.studentLists=[],this.isNotTestedYet=!1,this.isMobile=this.commonService.isMobileOrTable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-student-homework-result"]],inputs:{isOpenSideNav:"isOpenSideNav",backToLink:"backToLink",obj:"obj",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet"},features:[e.qOj],decls:5,vars:2,consts:[[1,"box","mt-2","relative"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],["isNotTestedYetTmp",""],[1,"scrollable-content","flex","items-center"],[3,"ngTemplateOutlet"],[1,"azt-student-list","scrollable-content",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"mt-4","p-2"],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],["class","h-full",4,"ngIf","ngIfElse"],["answerIdNull",""],[1,"h-full"],["azt-track-service","student-homework-result-p_58RoCuYW9",3,"routerLink","queryParams"],[3,"student"],[1,"text-center","mt-5","mx-auto",2,"max-width","28rem"],[1,"text-lg"],[1,"mt-2","mx-auto"],["azt-track-service","student-homework-result-GcOiOvgvvW2",1,"mt-2","btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,xT,2,1,"div",1),e.YNc(2,TT,6,2,"div",2),e.qZA(),e.YNc(3,AT,19,16,"ng-template",null,3,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.isNotTestedYet),e.xp6(1),e.Q6J("ngIf",!i.isNotTestedYet))},dependencies:[T.rH,M.mk,M.sg,M.O5,M.tP,ea.i3,x.KC,fT,re.MR,re.bT],encapsulation:2}),n})();function ST(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",23)(1,"span",24),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.homeworkResultFilterService.totalCustomFilter)}}function ET(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0"),e.TgZ(2,"span",27),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.homeworkResultFilterService.totalCustomFilter)}}function MT(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",25),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,ET,4,1,"span",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_testted_list_sort")," "),e.xp6(2),e.Q6J("ngIf",t.homeworkResultFilterService.totalCustomFilter>0)}}let IT=(()=>{class n extends W.Q{changeFilter(){this.homeworkResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.homeworkResultFilterService.filterObj)}clearFilter(){this.homeworkResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.homeworkResultFilterService=t,this.changeFilterEvent=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Tm))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[e.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-IuO864aLwuv","for","isSubmitted",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isSubmitted","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-up7nJngmzVG","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-UMBRazW55_8","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-ZcOfEctFCTF","for","mustReSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","mustReSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-QejPhqaKsKg",3,"click"],["azt-track-service","filter-menu-e-_PwZJaZjq",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(t,i){if(1&t&&(e.TgZ(0,"button",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"polygon",2),e.qZA(),e.YNc(3,ST,3,1,"span",3),e.YNc(4,MT,4,4,"span",4),e.qZA(),e.kcU(),e.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"div",10)(14,"input",11),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isSubmitted=!i.homeworkResultFilterService.filterObj.isSubmitted,i.changeFilter()}),e.qZA()()()(),e.TgZ(15,"li")(16,"label",12),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(17),e.ALo(18,"mytranslate"),e.TgZ(19,"div",10)(20,"input",13),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isNotSubmit=!i.homeworkResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),e.qZA()()()(),e.TgZ(21,"li")(22,"label",14),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(23),e.ALo(24,"mytranslate"),e.TgZ(25,"div",10)(26,"input",15),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isMarked=!i.homeworkResultFilterService.filterObj.isMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(27,"li")(28,"label",16),e.NdJ("click",function(s){return s.stopPropagation()}),e._uU(29),e.ALo(30,"mytranslate"),e.TgZ(31,"div",10)(32,"input",17),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.mustReSubmit=!i.homeworkResultFilterService.filterObj.mustReSubmit,i.changeFilter()}),e.qZA()()()(),e.TgZ(33,"li"),e._UZ(34,"hr",18),e.qZA(),e.TgZ(35,"li")(36,"div",19)(37,"button",20),e._uU(38),e.ALo(39,"mytranslate"),e.qZA(),e.TgZ(40,"div",21),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(41,"button",22),e.NdJ("click",function(){return i.clearFilter()}),e._uU(42),e.ALo(43,"mytranslate"),e.qZA()()()()()()()),2&t){const a=e.MAs(6);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Q6J("ngIf",i.homeworkResultFilterService.totalCustomFilter>0),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(7),e.hij(" ",e.lcZ(12,13,"lang_homework_homework_score_list_sort_student_not_marking")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isSubmitted),e.xp6(3),e.hij(" ",e.lcZ(18,15,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isNotSubmit),e.xp6(3),e.hij(" ",e.lcZ(24,17,"lang_homework_homework_score_list_sort_mark")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isMarked),e.xp6(3),e.hij(" ",e.lcZ(30,19,"lang_homework_homework_score_list_sort_student_resubmit")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.mustReSubmit),e.xp6(6),e.Oqu(e.lcZ(39,21,"lang_buttom_close")),e.xp6(4),e.Oqu(e.lcZ(43,23,"lang_buttom_delete"))}},dependencies:[M.O5,en.VK,en.p6,re.bT],encapsulation:2}),n})();const LT=["drawer"];function ZT(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function PT(n,o){if(1&n&&(e.TgZ(0,"div",36)(1,"span"),e.O4$(),e.TgZ(2,"svg",37),e._UZ(3,"circle",38)(4,"line",39)(5,"line",40),e.qZA()(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(7),e.AsE("",e.lcZ(8,2,"lang_homework_homework_score_list_not_search_data"),"! ",e.lcZ(9,4,"lang_core_not_found_classroom_or_homework"==t.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function jT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",61),e._UZ(3,"rect",74)(4,"path",75)(5,"path",76),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function DT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",61),e._UZ(3,"rect",74)(4,"path",75)(5,"path",78),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function NT(n,o){1&n&&(e.TgZ(0,"div",79)(1,"div",80)(2,"p",81),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_not_found_search"),"!"))}function QT(n,o){if(1&n&&e._UZ(0,"app-student-homework-result",82),2&n){const t=e.oxw(4);e.Q6J("backToLink",t.backToLink)("studentLists",t.studentHaveSortAndSearchByNameObjs)("isNotTestedYet",0==t.rawStudentObjs.length)("isOpenSideNav",t.isOpenSideNav)("obj",t.homeworkObj)}}const qT=function(n,o){return{"w-85":n,"w-30":o}},FT=function(n){return{"ml-30":n}},UT=function(n){return{"ml-5":n}},RT=function(n){return{"px-0":n}},BT=function(n){return[n]};function zT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-drawer-container",41)(1,"mat-drawer",42,43),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeStatusNav())}),e.TgZ(3,"ng-scrollbar",44),e._UZ(4,"menu-homework",45),e.qZA()(),e.TgZ(5,"mat-drawer-content",46)(6,"div",47)(7,"div",48),e.YNc(8,jT,6,3,"button",49),e.YNc(9,DT,6,3,"button",50),e.TgZ(10,"div",51)(11,"div",52)(12,"form",28)(13,"input",53),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.search())}),e.ALo(14,"mytranslate"),e.qZA(),e.O4$(),e.TgZ(15,"svg",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.search())}),e._UZ(16,"circle",55)(17,"line",56),e.qZA()()(),e.kcU(),e.TgZ(18,"div",57)(19,"testbank-homework-result-filter-menu",58),e.NdJ("changeFilterEvent",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeFilterEvent())}),e.qZA()(),e.TgZ(20,"div",59)(21,"button",60),e.O4$(),e.TgZ(22,"svg",61),e._UZ(23,"line",62)(24,"line",63)(25,"line",64),e.qZA()()()()(),e.kcU(),e.TgZ(26,"div",65)(27,"div",66)(28,"div",67)(29,"p",68),e._uU(30),e.ALo(31,"mytranslate"),e.TgZ(32,"a",69),e.ALo(33,"navigationLocalize"),e._uU(34),e.qZA()()()(),e.YNc(35,NT,5,3,"div",70),e.YNc(36,QT,1,5,"ng-template",null,71,e.W1O),e.qZA()(),e._UZ(38,"app-excel-export",72),e.qZA()()}if(2&n){const t=e.MAs(37),i=e.oxw(3),a=e.MAs(5);e.Q6J("hasBackdrop",i.hasBackdrop),e.xp6(1),e.s9C("opened",i.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(29,qT,i.isMobile,!i.isMobile))("mode",i.mode),e.xp6(2),e.Q6J("visibility","hover"),e.xp6(1),e.Q6J("initData",i.initDataHomework),e.xp6(1),e.Q6J("ngClass",e.VKq(32,FT,!i.isMobile&&i.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(34,UT,!i.isMobile&&i.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!i.isOpenSideNav||i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isOpenSideNav&&!i.isMobile),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(1),e.s9C("placeholder",e.lcZ(14,23,"lang_homework_homework_score_list_search")),e.xp6(8),e.Q6J("matMenuTriggerFor",a),e.xp6(5),e.Q6J("ngClass",e.VKq(36,RT,i.isMobile||!i.isOpenSideNav)),e.xp6(4),e.hij("",e.lcZ(31,25,"lang_homework_homework_score_list_list_submit_class"),": "),e.xp6(2),e.Q6J("routerLink",e.VKq(38,BT,e.lcZ(33,27,"/admin/student/class-details/"+i.classroomId))),e.xp6(2),e.AsE(" ",null==i.classroomObj?null:i.classroomObj.name," (",i.initDataHomework.homeworkObj.count+"/"+i.initDataHomework.studentObjs.length,") "),e.xp6(1),e.Q6J("ngIf",0!=i.rawStudentObjs.length&&0==i.studentHaveSortAndSearchByNameObjs.length)("ngIfElse",t),e.xp6(3),e.Q6J("studentLists",i.studentHaveSortAndSearchByNameObjs)("homeworkObj",i.homeworkObj)("tableType","homework")}}function JT(n,o){1&n&&e._UZ(0,"div",83)}function HT(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"azt-export-docx-loading-box",31),e.TgZ(2,"div",32),e.YNc(3,PT,10,6,"div",33),e.YNc(4,zT,39,40,"mat-drawer-container",34),e.qZA(),e.YNc(5,JT,1,0,"div",35),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("msg",t.exportResultService.keyLoading)("show",t.exportResultService.isLoading)("percent",t.exportResultService.percent),e.xp6(2),e.Q6J("ngIf",""!=t.errorMessage),e.xp6(1),e.Q6J("ngIf",""==t.errorMessage),e.xp6(1),e.Q6J("ngIf",1==t.isMobile)}}function KT(n,o){if(1&n&&e.YNc(0,HT,6,6,"div",30),2&n){const t=e.oxw();e.Q6J("ngIf",t.homeworkObj)}}let $T=(()=>{class n extends W.Q{toggleDrawer(){this.drawer?.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1,this.saveStatusSideNav(),this.isMobile&&(document.body.style.overflow="auto")}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.isOpenSideNav)}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("homework");this.isOpenSideNav=!t||"close"!=t}else this.isOpenSideNav=!1}exportToExcel(t){setTimeout(()=>{document.getElementById("table_"+t)?.click()},1e3)}exportToPDF(){this.exportResultService.processHomeworks(Number(this.homeworkId),this.homeworkHashId).then(()=>{}).catch(t=>{this.commonService.snackError("string"==typeof t?t:t.message)})}_isSortedByTimeDesc(){return!!this.browserStorageService.getSimpleStorage(this.sortByStorageKey)}_sortStudentObjs(t){var i=this._isSortedByTimeDesc(),a=this.classroomObj?.sortType??0;return i?this.sortService.sortTimeDESC(t):0==a?this.sortService.sortFirstNameStudents(t):this.sortService.sortArrayByMultipleObjectKeyAsc(t,"pos","id")}_searchStudentObjsByName(t,i){i=this.commonService.convertVietnameseToEnglish(i);var a=[];for(let r=0;r<t.length;r++)-1!=this.commonService.convertVietnameseToEnglish(t[r].fullName??"").toLowerCase().indexOf(i.toLowerCase())&&a.push(t[r]);return a}_getStudentObjByFilterObj(t,i){return i.isSubmitted||i.isNotSubmit||i.isMarked||i.mustReSubmit?t.filter(s=>i.isSubmitted&&1==s.isSubmitted||i.isNotSubmit&&1==s.isNotSubmit||i.isMarked&&1==s.isMarked||i.mustReSubmit&&1==s.mustReSubmit):t}_viewDataBySortSearchAndFilter(){var t=this.homeworkResultFilterService.getDefaultFilterObj(),i=this._getStudentObjByFilterObj(this.rawStudentObjs,t),a=this.form.controls.searchContent.value?.toString()?.trim();""!=a&&(i=this._searchStudentObjsByName(i,a)),i=this._sortStudentObjs(i),this.studentHaveSortAndSearchByNameObjs=i}search(){this.homeworkResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}sortByTimeDesc(){this.form.controls.sortByTimeDesc.value?this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,"sort_by_time_desc"):this.browserStorageService.removeSimpleStorage(this.sortByStorageKey),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){this.form.controls?.searchContent?.setValue(""),this._viewDataBySortSearchAndFilter()}addStatusToStudentObjs(t){for(var i=[],a=0;a<t.length;a++){i.push({...t?.[a],index:a}),t[a].confirmedAt&&t[a].confirmedAt&&i[a].index==a?i[a].isMarked=!0:null==t[a].answer||t[a].confirmedAt||i[a].index!=a?null==t[a].answer&&null!=t[a].answerHistory&&i[a].index==a?i[a].mustReSubmit=!0:i[a].isNotSubmit=!0:i[a].isSubmitted=!0;let s=t[a].answer?.files??"";s.includes("<z>:")&&(s=this.zipDataService.decodeContentGzip(s)),i[a].answerFileObjs=this.castJsonToObj(s)}return i}parseHomeworkData(t){var i=this.castObj(t);return i?.files&&(i.fileObjs=this.commonService.myParseJson(i.files)),i&&this.zipDataService.convertHomeworkObj(i),i}getData(){this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerGetStudentsHomeworkGet(this.homeworkHashId).subscribe(t=>{if(1==t.success){if(t.data){this.errorMessage="",this.zipDataService.convertStudentsHomeworkObj(t.data?.studentObjs),this.initDataHomework=t.data,this.rawStudentObjs=this.addStatusToStudentObjs(t.data?.studentObjs??new Array),this.homeworkObj=this.parseHomeworkData(t.data?.homeworkObj??{}),this.classroomObj=t.data?.classroomObj??{},this.classroomId=this.classroomObj.id??0,this.categoryId=this.homeworkObj?.categoryId??0;let i=this.commonService.getMyQueryParam("backto")??"";this.backToLink="/admin/testbank/homework-results-list/"+this.categoryId+"/"+this.homeworkId+"/"+this.homeworkHashId,i&&i.includes("shareType")&&(this.backToLink=`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}?backto=`+encodeURIComponent(i)),this.paramBackToLink=i||`/admin/testbank/document-management/1/${this.categoryId}/1`,this.changeFilterEvent()}this.successStatusObj()}else this.errorMessage=t.message??"",this.errorStatusObj(this.errorMessage,!0)}))}ngOnInit(){this.getStatusSideNav(),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.form=this.fb.group({searchContent:new p.NI("",p.kI.required),sortByTimeDesc:new p.NI(this._isSortedByTimeDesc())}),this.homeworkId=this.activeRoute.snapshot.paramMap.get("id")??"",this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.categoryId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto",super.ngOnDestroy()}constructor(t,i,a,s,r,l,c,d,f,y,O){super(),this.dialog=t,this.activeRoute=i,this.fb=a,this.answerService=s,this.zipDataService=r,this.sortService=l,this.browserStorageService=c,this.examFilterService=d,this.exportResultService=f,this.homeworkResultFilterService=y,this.gaService=O,this.form=new p.cw({}),this.backToLink="",this.paramBackToLink="",this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classroomId=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.rawStudentObjs=[],this.studentHaveSortAndSearchByNameObjs=[],this.errorMessage="",this.sortByStorageKey="homework_list_sort_by"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(T.gz),e.Y36(p.QS),e.Y36(Hi.P6),e.Y36($i.D),e.Y36(is.K),e.Y36(we.z),e.Y36(pu),e.Y36(il.e),e.Y36(Tm),e.Y36(Lk.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-homework-result-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(LT,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e.qOj],decls:40,vars:13,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","homework-result-list-UoAbuGB6VrG",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","homework-result-list-PxxtOkbgmqm",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","homework-result-list-mTV5aEMDlSD","for","isSortByTimeDESC",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M11 5h10"],["d","M11 9h7"],["d","M11 13h4"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],[3,"formGroup"],["id","isSortByTimeDESC","type","checkbox","formControlName","sortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[4,"ngIf"],[3,"msg","show","percent"],[1,"azt-homework-result-list","container-fluid"],["class","intro-y col-span-11 alert alert-danger alert-dismissible show flex items-center mb-6",4,"ngIf"],["class","azt-drawer-container mt-5",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"intro-y","col-span-11","alert","alert-danger","alert-dismissible","show","flex","items-center","mb-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","info","data-lucide","info",1,"lucide","w-4","h-4","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],[3,"initData"],[3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","homework-result-list-Ej_zMayVTN_","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","homework-result-list-hYOFjZmUAjh","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","homework-result-list-44epYiQtrQC","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","content-zone","pr-0",3,"ngClass"],[1,"row","mt-2","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"mb-1","h6",2,"font-weight","400","font-size","14px"],["azt-track-service","homework-result-list-Fk1Yij7NXbZ",1,"clickable","link-stu",3,"routerLink"],["class","box-content py-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"studentLists","homeworkObj","tableType"],["azt-track-service","homework-result-list-Ej_zMayVTN_",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","homework-result-list-hYOFjZmUAjh",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","studentLists","isNotTestedYet","isOpenSideNav","obj"],[1,"py-4"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,ZT,1,0,"azt-loading-effect",1),e.YNc(2,KT,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"ul",6)(8,"li")(9,"a",7),e.NdJ("click",function(){return i.exportToExcel("homework")}),e.O4$(),e.TgZ(10,"svg",8),e._UZ(11,"path",9)(12,"polyline",10)(13,"line",11),e.qZA(),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(16,"li")(17,"a",12),e.NdJ("click",function(){return i.exportToPDF()}),e.O4$(),e.TgZ(18,"svg",13),e._UZ(19,"path",14)(20,"polyline",15)(21,"line",16)(22,"line",17)(23,"line",18),e.qZA(),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(26,"li")(27,"label",19),e.NdJ("click",function(s){return s.stopPropagation()}),e.TgZ(28,"span",20),e.O4$(),e.TgZ(29,"svg",21),e._UZ(30,"path",22)(31,"path",23)(32,"path",24)(33,"path",25)(34,"path",26),e.qZA(),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(37,"div",27)(38,"form",28)(39,"input",29),e.NdJ("change",function(){return i.sortByTimeDesc()}),e.qZA()()()()()()()()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.paramBackToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(13),e.hij(" ",e.lcZ(15,7,"lang_homework_homework_score_list_export_excel")," "),e.xp6(10),e.hij(" ",e.lcZ(25,9,"lang_homework_homework_score_list_export_pdf")," "),e.xp6(11),e.hij(" ",e.lcZ(36,11,"lang_testbank_testted_list_sort_time")," "),e.xp6(3),e.Q6J("formGroup",i.form)}},dependencies:[T.rH,M.mk,M.O5,en.VK,en.p6,Ni.jA,Ni.kh,Ni.LW,Zt.gM,x.KC,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.sg,p.u,jt.Q,Bt.M,ol,pn._,nT,aT,OT,IT,re.MR,re.bT],encapsulation:2}),n})();function YT(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function GT(n,o){if(1&n&&(e.TgZ(0,"div",22),e._UZ(1,"print-history-box",23),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("examObj",t.examObj)("offlineExamObj",t.offlineExamObj)("startStudentCode",t.startStudentCode)("examPrintInfoObj",t.examPrintInfoObj)}}const Om=function(n){return[n]};function WT(n,o){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",7),e.YNc(6,GT,2,4,"div",8),e.qZA(),e.TgZ(7,"div",9)(8,"div",10)(9,"a",11),e.ALo(10,"navigationLocalize"),e.O4$(),e.TgZ(11,"svg",12),e._UZ(12,"path",13)(13,"polyline",14)(14,"path",15)(15,"path",16)(16,"path",17)(17,"path",18),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(20,"div",19)(21,"a",20),e.ALo(22,"navigationLocalize"),e.O4$(),e.TgZ(23,"svg",12),e._UZ(24,"path",21),e.qZA(),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(2);let i,a;e.xp6(3),e.hij(" ",e.lcZ(4,6,"lang_auto_tao_file_thanh_cong")," \u{1f44f} "),e.xp6(3),e.Q6J("ngIf",t.offlineExamObj&&(null==t.offlineExamObj?null:t.offlineExamObj.hashId)),e.xp6(3),e.Q6J("routerLink",e.VKq(16,Om,e.lcZ(10,8,"/admin/testbank/exam-results-list/"+(null!==(i=t.examObj.categoryId)&&void 0!==i?i:0)+"/"+t.examObj.id+"/0"))),e.xp6(9),e.hij(" ",e.lcZ(19,10,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(3),e.Q6J("routerLink",e.VKq(18,Om,e.lcZ(22,12,"/admin/testbank/document-management/0/"+(t.backToLink.includes("shareType")?0:null!==(a=t.examObj.categoryId)&&void 0!==a?a:0)+"/1"))),e.xp6(4),e.hij(" ",e.lcZ(26,14,"lang_auto_ve_trang_quan_ly_file")," ")}}function VT(n,o){if(1&n&&e.YNc(0,WT,27,20,"div",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.examObj)}}let XT=(()=>{class n extends W.Q{redirectToDocumentManager(){this.myNavigation(`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`)}redirectToTestResultList(){this.myNavigation(`/admin/testbank/exam-results-list/${this.examObj?.categoryId??0}/${this.examObj?.id}/0`)}getExamInfo(t,i){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t,i).subscribe(a=>{1==a.success?(a.data?.examObj&&a.data.offlineExamObj&&(this.examObj=a.data.examObj,this.offlineExamObj=a.data.offlineExamObj,this.examPrintInfoObj=a.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.offlineHashId=this.commonService.getMyParam(this.activeRoute,"offline_hash_id")??"",this.getExamInfo(t,this.offlineHashId);let a=this.commonService.getMyQueryParam("backto");this.backToLink=a??`/admin/testbank/document-management/0/${i}/1`,this.commonService.translateMetaData({title:"lang_cms_download_print_data_title",description:"lang_cms_download_print_data_description",image:""}),super.ngOnInit()}constructor(t,i){super(),this.documentConfigService=t,this.activeRoute=i,this.backToLink="",this.offlineHashId="",this.startStudentCode=1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.Cq),e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-download-file-print"]],features:[e._Bn([M.uU]),e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","intro-y action-document mx-auto mt-8","style","max-width: 700px",4,"ngIf"],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],[1,"action-heading","mb-4"],[1,"text-lg","font-medium","mb-1"],[1,"action-offline","mt-5"],["class","box mt-3 p-5",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","download-file-print-KZ0pTIEXewD",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","download-file-print-O-UfiBIC5BM",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mt-3","p-5"],[3,"examObj","offlineExamObj","startStudentCode","examPrintInfoObj"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,YT,1,0,"azt-loading-effect",1),e.YNc(2,VT,1,1,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[T.rH,M.O5,jt.Q,pn._,Jd,re.MR,re.bT],styles:[".app[_ngcontent-%COMP%]{margin-top:100px}.app-block[_ngcontent-%COMP%]{max-width:750px;margin:0 auto}.app-head[_ngcontent-%COMP%]{text-align:center}.app-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:0}.app-main[_ngcontent-%COMP%]{margin-top:40px}.app-copy[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;width:630px;margin:0 auto}.btn-export[_ngcontent-%COMP%]{transition:all .5s;background:#2361ae}.btn-export[_ngcontent-%COMP%]:hover:enabled{background:#122e50}.app-content[_ngcontent-%COMP%]{border:none;outline:none;background:#fff;border-radius:5px;box-shadow:#00000012 0 0 5px;height:70px;box-sizing:border-box;padding:15px 20px;font-size:18px;color:#2361ae;width:100%;display:flex;align-items:center}.app-content-icon[_ngcontent-%COMP%]{margin-right:15px}.app-main-bottom[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;max-width:630px}.btn-text[_ngcontent-%COMP%]{border:none;text-transform:uppercase;background:transparent;color:#2361ae}.app-footer[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:100px;text-align:center}.app-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#babbbc;font-size:18px}.btn-copy[_ngcontent-%COMP%]{position:absolute;display:flex;background:#2361ae;align-items:center;right:0;height:100%;width:134px;border:none;padding:22px 23px;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;transition:all .5s}.btn-copy[_ngcontent-%COMP%]:hover{background:#184479}.btn-copy[_ngcontent-%COMP%]   .text-copy[_ngcontent-%COMP%]{margin-left:15px;text-transform:initial;font-size:16px}.btn-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px}.truncate[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 768px){.app-copy[_ngcontent-%COMP%]{max-width:630px;width:auto}.btn-copy[_ngcontent-%COMP%]{right:0;width:auto}.app-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:140px}}"]}),n})();function eA(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.hij(" ",t.numQuest>0?(0==i?"":", ")+t.name+"("+t.numQuest+")":""," ")}}function tA(n,o){if(1&n&&(e.TgZ(0,"li",13),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t)}}function nA(n,o){if(1&n&&(e.ynx(0),e.YNc(1,tA,2,1,"li",12),e.BQk()),2&n){const t=o.index;e.xp6(1),e.Q6J("ngIf",t<=2)}}function iA(n,o){1&n&&(e.TgZ(0,"div",14),e._uU(1," ... "),e.qZA())}function oA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.clickToMatrix(s.id))}),e.TgZ(2,"div",4)(3,"h2",5,6),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",7)(8,"h2",8)(9,"b"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",7)(14,"h2",8)(15,"b"),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.YNc(18,eA,2,1,"ng-container",9),e.qZA()(),e.TgZ(19,"div",7)(20,"h2",8)(21,"b"),e._uU(22),e.ALo(23,"mytranslate"),e.qZA(),e.TgZ(24,"ul",10),e.YNc(25,nA,2,1,"ng-container",9),e.qZA()()(),e.YNc(26,iA,2,0,"div",11),e.qZA()()}if(2&n){const t=o.$implicit,i=e.MAs(4);e.xp6(3),e.s9C("matTooltip",t.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(6,11,t.name)," "),e.xp6(5),e.hij("",e.lcZ(11,13,"lang_matrix_list_total_question"),":"),e.xp6(2),e.hij(" ",t.numberQuest," "),e.xp6(4),e.hij("",e.lcZ(17,15,"lang_matrix_list_level_list"),":"),e.xp6(2),e.Q6J("ngForOf",t.ranks),e.xp6(4),e.hij("",e.lcZ(23,17,"lang_auto_don_vi_kien_thuc"),":"),e.xp6(3),e.Q6J("ngForOf",t.knowledge),e.xp6(1),e.Q6J("ngIf",t.knowledge.length>3)}}let aA=(()=>{class n extends W.Q{clickToMatrix(t){t&&this.chooseMatrix.emit(t)}ngOnInit(){super.ngOnInit()}constructor(){super(),this.matrixList=[],this.chooseMatrix=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["exam-matrix-info-box"]],inputs:{matrixList:"matrixList"},outputs:{chooseMatrix:"chooseMatrix"},features:[e.qOj],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6 lg:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4"],["azt-track-service","exam-matrix-info-box-61G2BIhvtR",1,"box","p-3","exam-matrix-info-box",3,"click"],[1,"text-left","w-full",2,"align-self","center"],[1,"intro-x","font-bold","text-lg","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-left","w-full","mt-1",2,"align-self","center"],[1,"intro-x","text-md",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"px-1",2,"overflow","hidden","max-height","80px"],["class","text-left w-full pb-1","style","align-self: center;",4,"ngIf"],["style","list-style: circle; list-style-position: inside;",4,"ngIf"],[2,"list-style","circle","list-style-position","inside"],[1,"text-left","w-full","pb-1",2,"align-self","center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,oA,27,19,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.matrixList))},dependencies:[M.sg,M.O5,Zt.gM,ho.Q,re.bT],encapsulation:2}),n})();function sA(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function rA(n,o){if(1&n&&(e.TgZ(0,"button",19),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.desc)," ")}}function lA(n,o){if(1&n&&(e.TgZ(0,"button",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.desc)," ")}}function cA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.addSubject(s))}),e.YNc(1,rA,3,3,"button",17),e.YNc(2,lA,3,3,"button",18),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isChoose),e.xp6(1),e.Q6J("ngIf",!t.isChoose)}}function uA(n,o){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chon_mon")))}function dA(n,o){if(1&n&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function mA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"p",23),e._uU(3),e.qZA()(),e.TgZ(4,"div",24)(5,"div",25)(6,"mat-form-field",26),e.YNc(7,uA,3,3,"mat-label",27),e.TgZ(8,"mat-select",28),e.NdJ("ngModelChange",function(a){const r=e.CHM(t).$implicit;return e.KtG(r.subjectsIds=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.backUpObjData())}),e.YNc(9,dA,2,2,"mat-option",29),e.qZA()()()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(3),e.Oqu(null==t.class?null:t.class.desc),e.xp6(4),e.Q6J("ngIf",!t.subjectsIds||!t.subjectsIds.length),e.xp6(1),e.Q6J("ngModel",t.subjectsIds),e.xp6(1),e.Q6J("ngForOf",i.valueSubjectSurvey[null!==(a=null==t.class?null:t.class.value)&&void 0!==a?a:0])}}function _A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",10)(8,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nextStep())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()(),e.TgZ(11,"h3",12),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"div",13),e.YNc(15,cA,3,2,"div",14),e.qZA(),e.TgZ(16,"h3",12),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"div",7),e.YNc(20,mA,10,4,"div",15),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,7,"lang_matrix_list_teacher_choose_subject_and_grade")," "),e.xp6(3),e.Q6J("disabled",!t.checkValidChooseGradeAndSubject(t.dataObjs)),e.xp6(1),e.hij(" ",e.lcZ(10,9,"lang_auto_tiep_tuc")," "),e.xp6(3),e.hij(" ",e.lcZ(13,11,"lang_auto_khoi_day")," "),e.xp6(3),e.Q6J("ngForOf",t.valueSurvey),e.xp6(2),e.hij(" ",e.lcZ(18,13,"lang_auto_mon_day")," "),e.xp6(3),e.Q6J("ngForOf",t.dataObjs)}}function pA(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"h3",33),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",34)(6,"div",35)(7,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.chooseAgain())}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goToHome())}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()(),e.BQk()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_matrix_list_not_have_suggestion")," "),e.xp6(5),e.hij(" ",e.lcZ(9,5,"lang_auto_chon_lai")," "),e.xp6(3),e.hij(" ",e.lcZ(12,7,"lang_cms_publish_test_go_home")," "))}function hA(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"h3",12),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"exam-matrix-info-box",47),e.NdJ("chooseMatrix",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.gotoEditMatrix(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_matrix_list_suggestion")," "),e.xp6(2),e.Q6J("matrixList",t.matrixSuggestList)}}function gA(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"h3",12),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"exam-matrix-info-box",47),e.NdJ("chooseMatrix",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.gotoEditMatrix(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_matrix_list_owner_matrix")," "),e.xp6(2),e.Q6J("matrixList",t.matrixOwnerList)}}function fA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",38)(3,"h3",39),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10)(7,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.createNewMatrix())}),e.O4$(),e.TgZ(8,"svg",41),e._UZ(9,"line",42)(10,"line",43),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()(),e.YNc(13,hA,5,4,"ng-container",27),e.YNc(14,gA,5,4,"ng-container",27),e.kcU(),e.TgZ(15,"div",44)(16,"div",45)(17,"azt-paging",46),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.goToPage(a))}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(4),e.hij(" ",e.lcZ(5,6,"lang_matrix_list_choose_below_to_create_exam")," "),e.xp6(7),e.hij(" ",e.lcZ(12,8,"lang_matrix_list_create_new_matrix")," "),e.xp6(2),e.Q6J("ngIf",t.matrixSuggestList.length>0),e.xp6(1),e.Q6J("ngIf",t.matrixOwnerList.length>0),e.xp6(3),e.Q6J("totalPaginationPage",t.totalPage)("paging",t.curPage)}}function xA(n,o){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,pA,13,9,"ng-container",1),e.YNc(2,fA,18,10,"ng-template",null,31,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!i.matrixSuggestList.length&&!i.matrixOwnerList.length)("ngIfElse",t)}}function bA(n,o){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,_A,21,15,"div",4),e.YNc(2,xA,4,2,"div",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1==t.step),e.xp6(1),e.Q6J("ngIf",2==t.step)}}let vA=(()=>{class n extends W.Q{backUpObjData(){this.oldDataObjs=this.dataObjs}addSubject(t){t.isChoose=!t.isChoose,this.commonService.filterArray(this.classroomGrade,t)?this.classroomGrade=this.classroomGrade.filter(s=>s.value!=t.value):this.classroomGrade.push(t),this.dataObjs=[];let i=this.oldDataObjs.length,a=this.classroomGrade.length;for(let s=0;s<a;s++)if(this.dataObjs[s]={class:this.classroomGrade[s],subjectsIds:[]},i>0)for(let l=0;l<i;l++)this.dataObjs[s]&&this.oldDataObjs[l]&&this.dataObjs[s].class?.value==this.oldDataObjs[l].class?.value&&(this.dataObjs[s]=this.oldDataObjs[l])}checkValidChooseGradeAndSubject(t){let i=!0;return t.length?t.forEach(a=>{(!a.subjectsIds||!a.subjectsIds.length)&&(i=!1)}):i=!1,i}nextStep(){let t=[];for(let i=0;i<this.dataObjs.length;i++)if(this.dataObjs[i].subjectsIds&&Array.isArray(this.dataObjs[i].subjectsIds)){let a=this.dataObjs[i].subjectsIds??[];if(a.length)for(let s=0;s<a.length;s++)t.push({classId:this.dataObjs[i].class?.value??0,subjectId:a[s]})}t.length>0?(this.initStatusObj(),this.surveyConfigService.apiSurveyConfigSaveSurvey3Post({objs:t}).subscribe(i=>{i&&1==i.success?(this.step=2,this.getData()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})):this.errorStatusObj("lang_matrix_list_choose_grade_and_subject_fail",!0)}chooseAgain(){this.step=1,this.getGradeAndSubjectObj()}goToPage(t){this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.curCate+"/"+t,"?backto="+encodeURIComponent(this.backToLink))}goToHome(){this.commonService.myNavigation("/admin/dashboard")}createNewMatrix(){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/0","?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}gotoEditMatrix(t){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/"+t,"?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}getSuggestionMatrix(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","global",1,3).subscribe(t=>{t&&1==t.success?(this.matrixSuggestList=this.editorCommonService.getBeautyMatrixObjs(t.data?.banks??[]),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}getGradeAndSubjectObj(){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(t=>{if(1==t.success){let i=t.data?.schoolLevelObjs??[],a=t.data?.schoolSubjectObjs??[];i.forEach(c=>{let d={value:c.id,desc:this.commonService.myTranslateInstant(c.name)};this.commonService.filterArray(this.valueSurvey,d)||this.valueSurvey.push(d)});let s=[],r=[],l=[];a.forEach(c=>{let d={type:0,id:c.id,name:this.commonService.myTranslateInstant(c.name)};c.from&&c.to&&c.from>=1&&c.to<=5?(d.type=1,this.commonService.filterArray(s,d)||s.push(d)):c.from&&c.to&&c.from>=6&&c.to<=9?(d.type=2,this.commonService.filterArray(r,d)||r.push(d)):(d.type=3,this.commonService.filterArray(l,d)||l.push(d));for(var f=1;f<=5;f++)this.valueSubjectSurvey[f]=s;for(f=6;f<=9;f++)this.valueSubjectSurvey[f]=r;for(f=10;f<=13;f++)this.valueSubjectSurvey[f]=l}),this.successStatusObj()}else this.errorStatusObj(t.message??"")}))}getData(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","own",this.curPage,this.sizePage).subscribe(t=>{if(t&&1==t.success){this.matrixOwnerList=this.editorCommonService.getBeautyMatrixObjs(t.data?.banks??[]);let i=t.data?.total??1;this.totalOwnerMatrix=i,this.totalPage=i%this.sizePage>0?(i-i%this.sizePage)/this.sizePage+1:i>0?i/this.sizePage:1,this.curPage>this.totalPage&&(this.curPage=this.totalPage),this.getSuggestionMatrix()}else this.errorStatusObj(t.message??"",!0)}))}checkSurveySubmitted(){this.initStatusObj(),this.surveyConfigService.apiSurveyConfigGetSurvey3Get().subscribe(t=>{t&&1==t.success?t.data?.objs?.length&&t.data?.objs?.length>0?(this.step=2,this.getData()):this.getGradeAndSubjectObj():this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/document-management/0/0/1",this.curPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.curCate=Number(this.commonService.getMyParam(this.activeRoute,"cate")),this.checkSurveySubmitted()}),this.commonService.translateMetaData({title:"lang_matrix_list_title",description:"lang_matrix_list_description",image:""}),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.activeRoute=t,this.examBank=i,this.editorCommonService=a,this.documentConfigService=s,this.surveyConfigService=r,this.matrixOwnerList=[],this.matrixSuggestList=[],this.backToLink="",this.curPage=1,this.curCate=0,this.totalPage=1,this.totalOwnerMatrix=0,this.sizePage=12,this.step=1,this.valueSurvey=[],this.valueSubjectSurvey=[],this.dataObjs=[],this.oldDataObjs=[],this.classroomGrade=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Ve.SP),e.Y36(Ao),e.Y36(Ve.Cq),e.Y36(si.XG))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","py-5"],["class","block-cols-12-full m-0",4,"ngIf"],[1,"block-cols-12-full","m-0"],[1,"action-heading","mb-4"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6","text-left",2,"align-self","center"],[1,"text-lg","font-medium",2,"vertical-align","middle"],[1,"col-span-12","md:col-span-6","text-right"],["azt-track-service","azota-matrix-list-jSDqGYuTf",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"disabled","click"],[1,"text-lg","font-bold","mt-3","mb-3"],[1,"grid","grid-cols-10","gap-3",2,"max-width","620px"],["azt-track-service","azota-matrix-list-idyray5dXY","class","col-span-10 md:col-span-2 text-left",3,"click",4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],["azt-track-service","azota-matrix-list-idyray5dXY",1,"col-span-10","md:col-span-2","text-left",3,"click"],["class","btn btn-secondary shadow-md mr-2 w-full selected-border-box",4,"ngIf"],["class","btn btn-secondary shadow-md mr-2 w-full",4,"ngIf"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full","selected-border-box"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full"],[1,"col-span-12","md:col-span-4"],[1,"text-left"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","mt-2"],[1,"col-span-12"],["appearance","outline"],[4,"ngIf"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["alreadyData",""],[1,"text-center","mx-auto","w-full","py-5"],[1,"text-md","mx-auto"],[1,"mx-auto","mt-3","w-2/5"],[1,"flex","flex-wrap",2,"justify-content","space-around"],["azt-track-service","azota-matrix-list-zYMA7f2mc",1,"btn","btn-primary","text-white","shadow-md","w-40","mb-2",3,"click"],["azt-track-service","azota-matrix-list-RSssWEqyTk",1,"btn","btn-secondary","shadow-md","w-40","mb-2",3,"click"],[1,"col-span-12","md:col-span-6","text-left"],[1,"text-lg","font-bold",2,"vertical-align","middle"],["azt-track-service","azota-matrix-list-h4LcenZp7K",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"col-span-12","flex","flex-wrap","sm:flex-row","sm:flex-nowrap","items-center","mt-5"],[1,"w-full","sm:w-auto","sm:mr-auto"],[3,"totalPaginationPage","paging","goToPaginationPage"],[3,"matrixList","chooseMatrix"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,sA,1,0,"azt-loading-effect",1),e.YNc(2,bA,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,ji.ey,Kn.KE,Kn.hX,$r.gD,p.JJ,p.On,jt.Q,Vr.L,pn._,aA,re.bT],encapsulation:2}),n})(),yA=(()=>{class n extends W.Q{redirectToDonate(){this.commonService.myNavigation("/admin/testbank/donate")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank"]],features:[e.qOj],decls:2,vars:0,consts:[["id","testbank-layout"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[T.lC],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}.btn-donate[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;font-size:14px;color:#3c8dbc;display:flex;justify-content:center;align-items:center;margin-right:15px;transition:all .5s}.btn-donate[_ngcontent-%COMP%]:hover{color:#204e69}.btn-donate[_ngcontent-%COMP%]:hover   .donate-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}.donate-icon[_ngcontent-%COMP%]{margin-right:5px;animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-14px,0) scaleY(1.1) rotate(-15deg)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-7px,0) scaleY(1.05) rotate(15deg)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95) rotate(0)}90%{transform:translate3d(0,-2px,0) scaleY(1.02) rotate(0)}}@media screen and (max-width: 768px){.donate-title[_ngcontent-%COMP%]{display:none}.btn-donate[_ngcontent-%COMP%]{margin-right:0}}"]}),n})();var wA=S(41894),Sm=S(65619),Em=S(63019);class cl{constructor(o,t,i,a,s,r=1,l=!1,c=!1,d,f){this.id=o,this.pr=t,this.type=i,this.shareType=a,this.item=s,this.level=r,this.expandable=l,this.isLoading=c,this.prNode=d,this.isLeaf=f}}let CA=(()=>{class n{constructor(t,i){this.testMarketQuestionService=t,this.fb=i,this.dataMap=new Map,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.formSchoolInfo=new p.cw({}),this.formSchoolInfo=this.fb.group({schoolLevel:new p.NI("0"),schoolSubject:new p.NI("0")})}initialData(){return new Promise(t=>{this.testMarketQuestionService.apiTestMarketQuestionsSubjectLevelsGet().subscribe(i=>{1==i.success?(this.schoolLevelObjs=i.data?.schoolLevelObjs??[],this.schoolSubjectObjs=i.data?.schoolSubjectObjs??[],this.formSchoolInfo.controls.schoolLevel.setValue("12"),this.formSchoolInfo.controls.schoolSubject.setValue("40"),this.apiLeechData(void 0).then(a=>{t(a.map(s=>new cl(s.id,s.pr,s.type,void 0,s.name,0,!s.isLeaf,!1,void 0,s.isLeaf)))}).catch(()=>{t([])})):t([])})})}isExpandable(t){return this.dataMap.has(t)}apiLeechData(t){return new Promise(i=>{const a=[];this.testMarketQuestionService.apiTestMarketQuestionsKnowledgeGet(Number(this.formSchoolInfo.controls.schoolLevel.value),Number(this.formSchoolInfo.controls.schoolSubject.value),t).subscribe(s=>{1===s.success&&s.data&&(s.data.objs||[]).forEach(l=>{a.push({pr:t??0,id:l.id??0,name:l.name?l.name:"",type:"knowledge",isLeaf:l.isLeaf??!1})}),i(a)})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Xr.Q_),e.LFG(p.qu))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kA{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}constructor(o,t){this._treeControl=o,this._database=t,this.dataChange=new Sm.X([])}connect(o){return this._treeControl.expansionModel.changed.subscribe(t=>{(t.added||t.removed)&&this.handleTreeControl(t)}),(0,Em.T)(o.viewChange,this.dataChange).pipe((0,Po.U)(()=>this.data))}getNode(o){let t=this.data.filter(i=>i.id==o);return t&&t.length>0?t[0]:null}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(t=>this.toggleNode(t,!0)),o.removed&&o.removed.slice().reverse().forEach(t=>this.toggleNode(t,!1))}toggleNode(o,t){if("knowledge"===o.type){const i=this.data.indexOf(o);if(t)o.isLoading=!0,this._database.apiLeechData(o.id).then(a=>{const s=a.map(r=>new cl(r.id,r.pr,r.type,void 0,r.name,o.level+1,!r.isLeaf,!1,o,r.isLeaf));this.data.splice(i+1,0,...s),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let s=i+1;s<this.data.length&&this.data[s].level>o.level;s++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}}}let TA=(()=>{class n{constructor(t){this.documentService=t,this.dataMap=new Map}initialData(){return new Promise(t=>{this.apiLeechData(0).then(i=>{t(i.map(a=>new cl(a.id,a.pr,a.type,a.shareType,a.name,0,"cate"===a.type,a.isLeaf)))})})}isExpandable(t){return this.dataMap.has(t)}apiLeechData(t,i){return new Promise(a=>{const s=[];this.documentService.apiDocumentsGet(t,void 0,i,void 0,void 0,void 0,void 0,1,1,-1).subscribe(r=>{1===r.success&&r.data&&((r.data.categoryObjs||[]).forEach(d=>{s.push({pr:t,id:d.id??0,name:d.name??"",type:"cate",shareType:d.shareType,isLeaf:!1})}),(r.data.documentObjs||[]).forEach(d=>{d.exam&&s.push({pr:t,id:d.exam.id??0,name:d.exam.name??"",type:"test",shareType:void 0,isLeaf:!0})})),a(s)})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ve.Zg))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class AA{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}constructor(o,t){this._treeControl=o,this._database=t,this.dataChange=new Sm.X([])}connect(o){return this._treeControl.expansionModel.changed.subscribe(t=>{(t.added||t.removed)&&this.handleTreeControl(t)}),(0,Em.T)(o.viewChange,this.dataChange).pipe((0,Po.U)(()=>this.data))}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(t=>this.toggleNode(t,!0)),o.removed&&o.removed.slice().reverse().forEach(t=>this.toggleNode(t,!1))}toggleNode(o,t){if("cate"===o.type){const i=this.data.indexOf(o);if(t)o.isLoading=!0,this._database.apiLeechData(o.id,o.shareType).then(a=>{const s=a.map(r=>new cl(r.id,r.pr,r.type,r.shareType,r.name,o.level+1,"cate"===r.type,!1,o));this.data.splice(i+1,0,...s),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let s=i+1;s<this.data.length&&this.data[s].level>o.level;s++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}}}var ul=S(98445);function OA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e.qZA(),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",7),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"div",9),e.TgZ(15,"div",10)(16,"span",11)(17,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose(!0))}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,4,"lang_auto_xac_nhan")," "),e.xp6(6),e.hij(" ",e.lcZ(12,6,t.msgConfirm)," "),e.xp6(7),e.hij(" ",e.lcZ(19,8,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(22,10,"lang_auto_xac_nhan")," ")}}let Mm=(()=>{class n extends W.Q{constructor(t){super(),this.commonService=t,this.showConfirm=!1,this.msgConfirm=""}actionClose(t){this.showConfirm=!1,this.callback&&this.callback(t||!1)}startConfirm(t){return new Promise(i=>{this.msgConfirm=t,this.showConfirm=!0,this.callback=a=>{i(a)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["editor-confirm"]],features:[e.qOj],decls:1,vars:1,consts:[["class","box-dialog",4,"ngIf"],[1,"box-dialog"],["azt-track-service","confirm-KaF7r9iJd",1,"overlay",3,"click"],[1,"dialog","box"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","confirm-uojtwFwgYyj",1,"dialog-close",3,"click"],[1,"dialog-body"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-confirm"],[1,"mr-3"],["azt-track-service","confirm-IkBjzbPeZUQ",1,"btn","btn-secondary","mr-2","w-24",3,"click"],["azt-track-service","confirm-PuBYMRtw1El",1,"btn","btn-primary","w-24",3,"click"]],template:function(t,i){1&t&&e.YNc(0,OA,23,12,"div",0),2&t&&e.Q6J("ngIf",i.showConfirm)},dependencies:[M.O5,vn.Hw,re.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.dialog[_ngcontent-%COMP%]{margin-top:7vh;width:550px;box-shadow:#0000003d 0 3px 8px}.overlay[_ngcontent-%COMP%]{background-color:#0000004d;width:100%;height:100vh;position:absolute}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}"]}),n})();const SA=["tableMain"],EA=["popupConfirm"];function MA(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function IA(n,o){if(1&n&&(e.TgZ(0,"option",70),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t.id)("selected",t.id==i.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.key)," ")}}function LA(n,o){if(1&n&&(e.TgZ(0,"option",70),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t.id)("selected",t.id==i.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.key)," ")}}function ZA(n,o){if(1&n&&(e.TgZ(0,"form",63)(1,"label",64),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"select",65)(5,"option",66),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,IA,3,5,"option",67),e.qZA(),e.TgZ(9,"label",68),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"select",69)(13,"option",66),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.YNc(16,LA,3,5,"option",67),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("formGroup",t.azotaKnowledgeDatabaseService.formSchoolInfo),e.xp6(2),e.hij(" ",e.lcZ(3,9,"lang_auto_lop_hoc")," "),e.xp6(3),e.Q6J("selected",0==t.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),e.xp6(1),e.hij("",e.lcZ(7,11,"lang_auto_---chon_khoi"),"---"),e.xp6(2),e.Q6J("ngForOf",t.azotaKnowledgeDatabaseService.schoolLevelObjs),e.xp6(2),e.hij(" ",e.lcZ(11,13,"lang_auto_mon_hoc")," "),e.xp6(3),e.Q6J("selected",0==t.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),e.xp6(1),e.hij("",e.lcZ(15,15,"lang_auto_---chon_mon"),"---"),e.xp6(2),e.Q6J("ngForOf",t.azotaKnowledgeDatabaseService.schoolSubjectObjs)}}function PA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",71),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.switchContentAction(s))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function jA(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",77),e._UZ(2,"path",78),e.qZA()())}function DA(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",79),e._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),e.qZA()())}function NA(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",83),e._UZ(2,"path",80)(3,"polyline",81)(4,"line",84)(5,"line",85)(6,"line",86),e.qZA()())}const Im=function(n){return{paddingLeft:n,paddingBottom:"10px"}},Lm=function(n,o){return{"tb-active":n,"d-none":o}};function QA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",72),e.ALo(1,"compareString"),e._UZ(2,"button",73),e.TgZ(3,"div",74),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(s))}),e.YNc(4,jA,3,0,"span",75),e.YNc(5,DA,5,0,"span",75),e.YNc(6,NA,7,0,"span",75),e.TgZ(7,"span",76),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(11,Im,15*t.level+"px"))("ngClass",e.WLB(13,Lm,i.exitsTables.includes(t.id),!e.xi3(1,6,t.item,i.filterContent))),e.xp6(4),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type),e.xp6(1),e.Q6J("ngIf","knowledge"===t.type&&t.isLeaf),e.xp6(2),e.hij(" ",e.lcZ(9,9,t.item)," ")}}function qA(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",77),e._UZ(2,"path",78),e.qZA()())}function FA(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",91),e._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),e.qZA()())}function UA(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",92)(1,"g",93)(2,"g",94),e._UZ(3,"circle",95),e.TgZ(4,"path",96),e._UZ(5,"animateTransform",97),e.qZA()()()())}function RA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",72),e.ALo(1,"compareString"),e.TgZ(2,"button",87)(3,"mat-icon",88),e._uU(4),e.qZA()(),e.TgZ(5,"div",89),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(s))}),e.YNc(6,qA,3,0,"span",75),e.YNc(7,FA,5,0,"span",75),e.TgZ(8,"span",76),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,UA,6,0,"svg",90),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(14,Im,15*t.level+"px"))("ngClass",e.WLB(16,Lm,i.exitsTables.includes(t.id),!e.xi3(1,9,t.item,i.filterContent))),e.xp6(2),e.Q6J("disabled",t.isLoading),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.hij(" ",i.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(2),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type||"knowledge"===t.type&&t.isLeaf),e.xp6(2),e.hij(" ",e.lcZ(10,12,t.item)," "),e.xp6(2),e.Q6J("ngIf",t.isLoading)}}function BA(n,o){if(1&n&&(e.TgZ(0,"div",98)(1,"div",99)(2,"div",100)(3,"span"),e._UZ(4,"span",101),e._uU(5,"\xa0"),e.qZA()(),e.TgZ(6,"div",102),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(7),e.Oqu(e.lcZ(8,1,t.logConfig.msg))}}const zA=function(n){return{"has-err":n}};function JA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",3),e.YNc(2,ZA,17,17,"form",4),e.qZA(),e.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"form",8),e._UZ(7,"input",9),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"button",10),e._uU(10),e.ALo(11,"mytranslate"),e.TgZ(12,"mat-icon"),e._uU(13,"expand_more"),e.qZA()(),e.TgZ(14,"mat-menu",null,11)(16,"div",12)(17,"ng-scrollbar",13)(18,"ul",14)(19,"li")(20,"a",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createNew())}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"li"),e._UZ(24,"hr",16),e.qZA(),e.YNc(25,PA,3,1,"li",17),e.qZA()()()()()(),e.TgZ(26,"div",18)(27,"div",19)(28,"div",20)(29,"ng-scrollbar",13)(30,"mat-tree",21),e.YNc(31,QA,10,16,"mat-tree-node",22),e.YNc(32,RA,12,19,"mat-tree-node",23),e.qZA()()(),e.TgZ(33,"div",24)(34,"input",25),e.NdJ("ngModelChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.filterContent=a)}),e.ALo(35,"mytranslate"),e.qZA()()(),e.TgZ(36,"div",26)(37,"div",27,28)(39,"table",29)(40,"thead",30)(41,"tr",31)(42,"td",32),e._uU(43),e.ALo(44,"mytranslate"),e.qZA(),e.TgZ(45,"td",32),e._uU(46),e.ALo(47,"mytranslate"),e.qZA(),e.TgZ(48,"td",33),e._uU(49),e.ALo(50,"mytranslate"),e.qZA(),e.TgZ(51,"td",34),e._uU(52),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"td",35),e._uU(55),e.ALo(56,"mytranslate"),e.qZA(),e.TgZ(57,"td",36),e._uU(58),e.ALo(59,"mytranslate"),e.qZA(),e.TgZ(60,"td",32),e._uU(61,"%"),e._UZ(62,"br"),e._uU(63),e.ALo(64,"mytranslate"),e._UZ(65,"br"),e._uU(66),e.ALo(67,"mytranslate"),e.qZA()(),e.TgZ(68,"tr",31)(69,"td",37),e._uU(70),e.ALo(71,"mytranslate"),e.qZA(),e.TgZ(72,"td",37),e._uU(73),e.ALo(74,"mytranslate"),e.qZA(),e.TgZ(75,"td",37),e._uU(76),e.ALo(77,"mytranslate"),e.qZA(),e.TgZ(78,"td",37),e._uU(79),e.ALo(80,"mytranslate"),e.qZA(),e.TgZ(81,"td",37),e._uU(82),e.ALo(83,"mytranslate"),e.qZA(),e.TgZ(84,"td",38),e._uU(85),e.ALo(86,"mytranslate"),e.qZA()(),e.TgZ(87,"tr",31)(88,"td"),e._uU(89),e.ALo(90,"mytranslate"),e.qZA(),e.TgZ(91,"td"),e._uU(92),e.ALo(93,"mytranslate"),e.qZA(),e.TgZ(94,"td"),e._uU(95),e.ALo(96,"mytranslate"),e.qZA(),e.TgZ(97,"td"),e._uU(98),e.ALo(99,"mytranslate"),e.qZA(),e.TgZ(100,"td"),e._uU(101),e.ALo(102,"mytranslate"),e.qZA(),e.TgZ(103,"td"),e._uU(104),e.ALo(105,"mytranslate"),e.qZA(),e.TgZ(106,"td"),e._uU(107),e.ALo(108,"mytranslate"),e.qZA(),e.TgZ(109,"td"),e._uU(110),e.ALo(111,"mytranslate"),e.qZA(),e.TgZ(112,"td"),e._uU(113),e.ALo(114,"mytranslate"),e.qZA(),e.TgZ(115,"td"),e._uU(116),e.ALo(117,"mytranslate"),e.qZA()()(),e.TgZ(118,"tbody")(119,"tr",39)(120,"td",40),e._uU(121),e.ALo(122,"mytranslate"),e.qZA()()(),e.TgZ(123,"tfoot",30)(124,"tr",41)(125,"td",42),e._uU(126),e.ALo(127,"mytranslate"),e.qZA(),e._UZ(128,"td")(129,"td")(130,"td")(131,"td")(132,"td")(133,"td")(134,"td")(135,"td")(136,"td")(137,"td")(138,"td")(139,"td")(140,"td"),e.qZA()()(),e.TgZ(141,"div",43),e._uU(142),e.ALo(143,"mytranslate"),e._UZ(144,"br"),e._uU(145),e.ALo(146,"mytranslate"),e._UZ(147,"br"),e._uU(148),e.ALo(149,"mytranslate"),e.TgZ(150,"a",44),e._uU(151),e.ALo(152,"mytranslate"),e.qZA(),e._UZ(153,"br"),e._uU(154),e.ALo(155,"mytranslate"),e._UZ(156,"br"),e.qZA(),e.TgZ(157,"div",45)(158,"li",46),e.O4$(),e.TgZ(159,"svg",47),e._UZ(160,"path",48)(161,"path",49)(162,"path",50)(163,"path",51)(164,"path",52)(165,"path",53),e.qZA(),e.kcU(),e.TgZ(166,"span",54),e._uU(167),e.ALo(168,"mytranslate"),e.qZA()(),e.TgZ(169,"li",55),e.O4$(),e.TgZ(170,"svg",56),e._UZ(171,"path",57)(172,"path",49)(173,"path",58)(174,"path",59)(175,"path",60),e.qZA(),e.kcU(),e.TgZ(176,"span",54),e._uU(177),e.ALo(178,"mytranslate"),e.qZA()()()()()(),e._UZ(179,"editor-confirm",null,61),e.YNc(181,BA,9,3,"div",62)}if(2&n){const t=e.MAs(15),i=e.oxw();e.xp6(2),e.Q6J("ngIf","azota"===i.selfRequestData),e.xp6(4),e.Q6J("formGroup",i.matrixTableForm),e.xp6(1),e.s9C("placeholder",e.lcZ(8,50,"lang_auto_nhap_ten_ma_tran")+"..."),e.Q6J("readonly",i.isDisableEditor)("ngClass",e.VKq(124,zA,i.checkName&&(!i.matrixTableForm.controls.blackSelectName.value||0===i.matrixTableForm.controls.blackSelectName.value.trim().length))),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(11,52,"lang_auto_danh_sach_da_tao")," "),e.xp6(7),e.Q6J("visibility","hover"),e.xp6(4),e.hij(" + ",e.lcZ(22,54,"lang_testbank_create_new_matrix")," "),e.xp6(4),e.Q6J("ngForOf",i.banks),e.xp6(4),e.Q6J("visibility","hover"),e.xp6(1),e.Q6J("dataSource",i.commonDataSourceProcess)("treeControl",i.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",i.hasChild),e.xp6(2),e.s9C("placeholder",e.lcZ(35,56,"lang_auto_loc_theo_ten")),e.Q6J("ngModel",i.filterContent),e.xp6(9),e.hij(" ",e.lcZ(44,58,"lang_auto_STT")," "),e.xp6(3),e.hij(" ",e.lcZ(47,60,"lang_auto_noi_dung_kien_thuc")," "),e.xp6(3),e.hij(" ",e.lcZ(50,62,"lang_auto_don_vi_kien_thuc")," "),e.xp6(3),e.hij(" ",e.lcZ(53,64,"lang_auto_cau_trong_de_minh_hoa")," "),e.xp6(3),e.hij(" ",e.lcZ(56,66,"lang_auto_muc_do_nhan_biet")," "),e.xp6(3),e.hij(" ",e.lcZ(59,68,"lang_auto_tong")," "),e.xp6(5),e.hij(" ",e.lcZ(64,70,"lang_auto_tong")," "),e.xp6(3),e.Oqu(e.lcZ(67,72,"lang_auto_diem")),e.xp6(4),e.hij(" ",e.lcZ(71,74,"lang_auto_nhan_biet")," "),e.xp6(3),e.Oqu(e.lcZ(74,76,"lang_auto_thong_hieu")),e.xp6(3),e.Oqu(e.lcZ(77,78,"lang_auto_van_dung")),e.xp6(3),e.Oqu(e.lcZ(80,80,"lang_auto_van_dung_cao")),e.xp6(3),e.Oqu(e.lcZ(83,82,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(86,84,"lang_auto_thoi_gian_phut")),e.xp6(4),e.Oqu(e.lcZ(90,86,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(93,88,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(96,90,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(99,92,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(102,94,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(105,96,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(108,98,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(111,100,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(114,102,"lang_auto_TN")),e.xp6(3),e.Oqu(e.lcZ(117,104,"lang_auto_TL")),e.xp6(5),e.hij(" ",e.lcZ(122,106,"lang_auto_chon_cac_noi_dung_kien_thuc_o_cay_thu_muc_ben_cac_de_them_vao_ma_tran")," "),e.xp6(5),e.hij(" ",e.lcZ(127,108,"lang_auto_tong")," "),e.xp6(16),e.hij(" * ",e.lcZ(143,110,"lang_auto_nhap_tl_vao_sau_so_luong_cau_can_lay_de_chi_lay_cau_tu_luan"),""),e.xp6(3),e.hij(" * ",e.lcZ(146,112,"lang_auto_viet_tat_ch_cau_hoi_tl_tu_luan_dot"),""),e.xp6(3),e.hij(" * ",e.lcZ(149,114,"lang_auto_ban_can_gan_nhan_muc_do_nhan_biet_cho_cac_cau_hoi_trong_dot")," "),e.xp6(3),e.hij(" ",e.lcZ(152,116,"lang_auto_tim_hieu_them")," "),e.xp6(3),e.hij(" * ",e.lcZ(155,118,"lang_auto_nhap_vi_tri_trong_de_note")," "),e.xp6(13),e.Oqu(e.lcZ(168,120,"lang_auto_gop_cac_o_da_chon")),e.xp6(10),e.hij(" ",e.lcZ(178,122,"lang_auto_huy_gop_o_da_chon")," "),e.xp6(4),e.Q6J("ngIf",i.logConfig.status)}}let HA=(()=>{class n extends W.Q{constructor(t,i,a,s,r,l,c,d){super(),this.userCategoriesDatabase=t,this.azotaKnowledgeDatabaseService=i,this.editorOutputDataService=a,this.activeRoute=s,this.examBankService=r,this.questionService=l,this.gzipHelper=c,this.fb=d,this.backToLink="",this.checkName=!1,this.cur_cateId=0,this.cur_bankId=0,this.exitsTables=[],this.banks=[],this.logConfig={},this.filterContent="",this.doneInitView=!1,this.doneGetRequest=!1,this.selfRequestData="user",this.isDisableEditor=!1,this.getLevel=f=>f.level,this.isExpandable=f=>f.expandable,this.hasChild=(f,y)=>y.expandable,this.treeControl=new wA.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new AA(this.treeControl,t),this.azotaKnowledgeDataSource=new kA(this.treeControl,i),this.matrixTableForm=this.fb.group({blankSelectId:new p.NI(null),blackSelectName:new p.NI(null)})}switchContentAction(t){let i=this.commonService.myTranslateInstant("lang_auto_xac_nhap_thay_the_noi_dung_ma_tran_da_chon")??"";this.popupConfirm?.startConfirm(i).then(a=>{a&&this.switchContent(t)})}switchContent(t){let i=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=i,this.examBankService.apiExamBanksIdGet(t.id??0).subscribe(a=>{if(a.success&&a.data){let s=this.gzipHelper.resultContentSupport(a.data.content??"");const r=this.commonService.castJsonToObj(s);r&&(this.matrixTableForm.controls.blankSelectId.setValue(a.data.id),this.matrixTableForm.controls.blackSelectName.setValue(a.data.name),this.setStatusDisable(!a.data.editable),this.tableEditor?.resetAndPushList(r).then(()=>{this.logConfig.status=!1,this.logConfig.msg=void 0}))}else this.errorStatusObj(a.message??"",!0),this.logConfig.status=!1,this.logConfig.msg=void 0})}setStatusDisable(t){this.isDisableEditor=t,this.tableEditor?.setDisable(this.isDisableEditor)}cancelAction(){this.popupConfirm?.startConfirm("lang_auto_confirm_destroy_content").then(t=>{t&&location.reload()})}actionRedirect(t){this.logConfig.status=!1,this.logConfig.msg=void 0,this.editorOutputDataService.setMatrixData({matrix:t,response:{id:Number(this.matrixTableForm.controls.blankSelectId.value),name:this.matrixTableForm.controls.blackSelectName.value,type:this.selfRequestData,editable:!this.isDisableEditor,createdAt:new Date,updatedAt:new Date}}),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+("azota"===this.selfRequestData?"?self=azota":"")}saveAction(){const t=this.tableEditor?.getResult();if(this.tableEditor?.isErrSum)this.showErrorSnack("lang_auto_vui_long_nhap_tong_%_diem_khong_qua_100%");else if(this.tableEditor&&this.tableEditor.isErrNumPos)this.showErrorSnack("lang_auto_vui_long_nhap_vi_tri_cau_hoi_hop_le");else if("azota"===this.selfRequestData&&this.tableEditor&&this.tableEditor.getSumQuestion()>120)this.showErrorSnack("lang_auto_limit_matrix_bank_question");else if(t&&t.length>0&&this.matrixTableForm.controls.blackSelectName.value&&this.matrixTableForm.controls.blackSelectName.value.length>0)if(this.isDisableEditor)this.actionRedirect(t);else{let i=this.commonService.myTranslateInstant("lang_auto_dang_chuan_bi_cau_hoi_cho_ma_tran_vua_tao");this.logConfig.status=!0,this.logConfig.msg=i,this.matrixTableForm.controls.blankSelectId.value&&Number(this.matrixTableForm.controls.blankSelectId.value)>0?this.examBankService.apiExamBanksIdPut(Number(this.matrixTableForm.controls.blankSelectId.value),{name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(t)),type:this.typeRequestData}).subscribe(a=>{a&&1==a.success?this.actionRedirect(t):this.showErrorSnack("lang_auto_khong_the_thay_doi_ma_tran_de_thi")}):this.examBankService.apiExamBanksPost({name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(t)),type:this.typeRequestData}).subscribe(a=>{a&&1==a.success?this.actionRedirect(t):this.showErrorSnack("lang_auto_khong_the_luu_ma_tran_de_thi")})}else t&&0!==t.length?(this.checkName=!0,this.showErrorSnack("lang_auto_vui_long_nhap_ten_ma_tran_de_thi")):this.showErrorSnack("lang_auto_khong_tim_thay_du_lieu_ma_tran")}initTableEditor(){if(this.tableMain){const t=this.tableMain.nativeElement;this.tableEditor=new Ut(this.commonService,(s,r,l)=>{r?l&&this.showErrorSnack(s):this.showSuccessSnack(s)},this.questionService,t,t.firstElementChild,Kt.generate({is_select_cell:!1}),s=>{this.exitsTables=[],s.forEach(r=>{this.exitsTables.push(r.obj.id)})});const a=this.editorOutputDataService.getMatrixData();a&&a.matrix.length>0&&a.response.type===this.selfRequestData&&(this.matrixTableForm.controls.blankSelectId.setValue(a.response.id),this.matrixTableForm.controls.blackSelectName.setValue(a.response.name),this.setStatusDisable(!a.response.editable),this.tableEditor.resetAndPushList(a.matrix)),this.doneInitView=!0,this.checkDataBeforeInitDone()}}checkDataBeforeInitDone(){if(this.doneInitView&&this.doneGetRequest&&this.banks.length>0&&this.matrixTableForm.controls.blackSelectName.value===this.banks[0].name&&(this.matrixTableForm.controls.blankSelectId.setValue(this.banks[0].id),this.matrixTableForm.controls.blackSelectName.setValue(this.banks[0].name)),0!==this.cur_bankId){const t=this.banks.find(i=>i.id===this.cur_bankId);t&&this.switchContent(t)}}createNew(){let t=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_moi_ma_tran_de_thi")??"";this.popupConfirm?.startConfirm(t).then(i=>{i&&(this.matrixTableForm.controls.blackSelectName.setValue(null),this.matrixTableForm.controls.blankSelectId.setValue(null),this.tableEditor?.resetAndPushList([]))})}initData(){let t=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=t,this.commonDataSourceProcess._database.initialData().then(i=>{this.commonDataSourceProcess.data=i,this.examBankService.apiExamBanksGet(this.typeRequestData).subscribe(a=>{a.success&&a.data?(this.banks=a.data.banks??[],this.logConfig.status=!1,this.logConfig.msg=void 0,this.doneGetRequest=!0,this.checkDataBeforeInitDone()):this.errorStatusObj(a.message??"",!0)})})}ngAfterViewInit(){this.initTableEditor()}ngOnInit(){super.ngOnInit(),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"cat_id","0")),this.selfRequestData=this.commonService.getMyParamOrDefault(this.activeRoute,"mode_name","user"),this.cur_bankId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"matrix_id","0"));let t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+this.cur_cateId}),this.initData()}get commonDataSourceProcess(){return"user"===this.selfRequestData?this.userCategoriesDataSource:"azota"===this.selfRequestData?this.azotaKnowledgeDataSource:this.userCategoriesDataSource}get typeRequestData(){return"user"===this.selfRequestData?"matrix":"azota"===this.selfRequestData?"knowledge":"matrix"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(TA),e.Y36(CA),e.Y36(De),e.Y36(T.gz),e.Y36(Ve.SP),e.Y36(Ve.aE),e.Y36(Jn.n),e.Y36(p.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mix-bank-template"]],viewQuery:function(t,i){if(1&t&&(e.Gf(SA,5,e.SBq),e.Gf(EA,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.tableMain=a.first),e.iGM(a=e.CRH())&&(i.popupConfirm=a.first)}},features:[e.qOj],decls:4,vars:4,consts:[[3,"headerBackToLink","showConfirmButton","handleCancel","handleConfirm"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"header-mix-bank"],["class","header-fx-item",3,"formGroup",4,"ngIf"],[1,"header-fx-item","d-block"],[1,"bank-name-block"],[1,"name-block"],[1,"input",3,"formGroup"],["formControlName","blackSelectName","type","text",1,"form-control",3,"readonly","placeholder","ngClass"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["historyMatrix","matMenu"],[1,"dropdown-menu","show","relative","w-56",2,"height","60vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content","mt-0"],["azt-track-service","mix-bank-template-qYcpBwTiaO",1,"dropdown-item","uppercase",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[4,"ngFor","ngForOf"],[1,"main-mix-blank","bg-white","dark:bg-darkmode-400"],[1,"col-tree"],[1,"col-tree-main"],[2,"padding-right","10px",3,"dataSource","treeControl"],[3,"ngStyle","ngClass",4,"matTreeNodeDef"],[3,"ngStyle","ngClass",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"filler-node","bg-white","dark:bg-darkmode-400"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-table"],["id","table_main",1,"table-main"],["tableMain",""],["id","table__element"],[2,"color","#2a3545"],[1,"header-tb"],["rowspan","3"],["rowspan","3","colspan","2"],["rowspan","3","colspan","1"],["colspan","8"],["colspan","3"],["colspan","2"],["rowspan","2"],["id","tr__empty-length",1,"text-center","text-slate-500","dark:text-slate-200"],["colspan","17"],[1,"dis-item-tb"],["colspan","4",1,"text-center"],[1,"ins-info"],["azt-track-service","mix-bank-template-uenTko-_UV","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de","target","_blank",1,"text-primary"],["id","menu__excel_editor",1,"menu-excel"],["id","menu__excel_editor__merge",2,"display","none"],["width","25px","viewBox","0, 0, 2048, 2048","focusable","false"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 m 563 -615 v 1741 h -1741 v -1741 m 103 308 h 717 v -205 h -717 m 717 1536 v -205 h -717 v 205 m 1536 -205 h -717 v 205 h 717 m 0 -1229 h -1536 v 922 h 1536 m 0 -1229 h -717 v 205 h 717 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 154 1792 v -1638 h 1638 v 1638 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 1024 410 h -102 v -205 h 102 m 0 1536 h -102 v -205 h 102 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 1639 h 1536 v -1536 h -1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 410 v 1126 h -1741 v -1126 m 103 1024 h 1536 v -922 h -1536 z",2,"fill","rgba(30, 139, 205, 1)"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 z",2,"fill","rgba(30, 139, 205, 1)"],[1,"menu-content"],["id","menu__excel_editor__un_merge",2,"display","none"],["width","25px","viewBox","0,0,2048,2048","focusable","false"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 512 h 717 v -409 h -717 m 1229 1024 h 307 v -512 h -307 m -103 0 h -307 v 512 h 307 m -819 -512 h -307 v 512 h 307 m 102 0 h 308 v -512 h -308 m 308 1024 v -410 h -717 v 410 m 1536 -410 h -717 v 410 h 717 m 0 -1127 v -409 h -717 v 409 z"],["type","path","d","M 1024 1331 v 410 h -102 v -410 m 0 -614 v -512 h 102 v 512 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 1639 103 h -1536 v 1536 h 1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 614 v 717 h -1741 v -717 m 410 615 v -512 h -307 v 512 m 717 0 v -512 h -308 v 512 m 717 0 v -512 h -307 v 512 m 717 -512 h -307 v 512 h 307 z",2,"fill","rgba(30, 139, 205, 1)"],["popupConfirm",""],["class","loading-mess",4,"ngIf"],[1,"header-fx-item",3,"formGroup"],["for","",1,"mr-2","flex-none",2,"width","55px"],["formControlName","schoolLevel",1,"form-select","form-select-sm"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["for","",1,"ml-2","mr-2","flex-none",2,"width","55px"],["formControlName","schoolSubject",1,"form-select","form-select-sm"],[3,"value","selected"],["azt-track-service","mix-bank-template-8PSLx-wsAL",1,"dropdown-item",3,"click"],[3,"ngStyle","ngClass"],["mat-icon-button","","disabled",""],["azt-track-service","mix-bank-template-wg2qiwIfQ",1,"title-box",2,"cursor","pointer",3,"click"],[4,"ngIf"],[1,"text-matrix-title"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","mix-bank-template-dDNwOKdL6l",1,"title-box",2,"cursor","pointer",3,"click"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)","class","ml-2 flex-none w-4 h-4",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"ml-2","flex-none","w-4","h-4"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"]],template:function(t,i){if(1&t&&(e.TgZ(0,"editor-layout",0),e.NdJ("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),e.YNc(1,MA,1,0,"azt-loading-effect",1),e.YNc(2,JA,182,126,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink)("showConfirmButton",!0),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.sg,M.O5,M.PC,Di.RK,vn.Hw,en.VK,en.p6,ul.fQ,ul.eu,ul.gi,ul.uo,x.KC,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.On,p.sg,p.u,jt.Q,Bt.M,Mm,Ue.Z,re.bT,re.ds],styles:['.header-mix-bank[_ngcontent-%COMP%]{padding:5px 20px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .bank-his-matrix[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;justify-content:center;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:10px}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .has-err[_ngcontent-%COMP%]{border:1px solid red!important}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;padding:5px 10px;border-radius:5px;margin-right:15px}.header-mix-bank[_ngcontent-%COMP%]   .header-fx-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-save[_ngcontent-%COMP%]{background-color:#2361ae;line-height:30px;margin-top:5px;text-transform:none}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2e8cff}.btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.btn-cancel[_ngcontent-%COMP%]{background-color:#d0d0d0;line-height:30px;margin-top:5px;text-transform:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#a3a3a3}.btn-cancel.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}  .main-mix-blank{width:100%;height:calc(100vh - 115px);display:flex}  .main-mix-blank .col-tree{position:relative;height:100%;overflow:hidden;width:25%;border-right:1px dotted #7f7f7f}  .main-mix-blank .col-tree-main{overflow:hidden;height:calc(100% - 54px)}  .main-mix-blank .col-tree .filler-node{position:sticky;bottom:0;padding:10px 0 10px 10px;border-top:1px dotted #e0e0e0}  .main-mix-blank .col-tree .filler-node input{width:100%;padding:5px 10px}  .main-mix-blank .col-tree mat-tree-node mat-icon{color:#37474f;width:30px}  .main-mix-blank .col-tree mat-tree-node string{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;cursor:pointer}  .main-mix-blank .col-tree mat-tree-node .icon--folder{color:#ff9800}  .main-mix-blank .col-tree mat-tree-node .icon--article{color:#2196f3}  .main-mix-blank .col-tree .tb-active mat-icon{color:#3f51b5}  .main-mix-blank .col-tree .tb-active span{color:#3f51b5}  .main-mix-blank .col-table{width:75%;margin:20px 0;padding:0 20px;overflow:auto}  .main-mix-blank .table-main{position:relative}  .main-mix-blank .table-main td,   .main-mix-blank .table-main th{box-shadow:1px 1px #000 inset;-webkit-user-select:none;user-select:none}  .main-mix-blank .table-main table{position:relative;border-right:1px solid #000;border-bottom:1px solid #000;width:100%}  .main-mix-blank .table-main table thead{position:sticky;top:0;z-index:2}  .main-mix-blank .table-main table tfoot{position:sticky;bottom:0;box-shadow:0 1px #000 inset}  .main-mix-blank .table-main td{padding:10px}  .main-mix-blank .table-main .note-edit-item-tb:before{position:absolute;z-index:3;width:-moz-fit-content;width:fit-content;display:block;background:#fff59d;padding:5px;border-radius:5px;color:#263238;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}  .main-mix-blank .table-main .note-edit-item-tb:focus-visible:before{content:attr(first-trans) ": " attr(num-tn) "; " attr(last-trans) ": " attr(num-tl) "";white-space:pre-wrap}  .main-mix-blank .table-main .warning-item:after,   .main-mix-blank .table-main .common-warning-item:after{content:"\\e000";position:absolute;font-family:Material Icons;color:#ff9800;font-size:12px;top:0;right:3px;opacity:.5}  .main-mix-blank .table-main .warning-item:hover:after,   .main-mix-blank .table-main .common-warning-item:after{cursor:pointer}  .main-mix-blank .table-main .common-warning-item:after{color:red;font-size:15px;top:2px}  .main-mix-blank .table-main .common-note-item:hover:before{content:attr(common-note-trans);position:absolute;background:#fff59d;z-index:3;color:#000;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));padding:5px;border-radius:5px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;display:block}  .main-mix-blank .table-main .wn-empty:hover:before{content:attr(empty-question-trans);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tn:hover:before{content:attr(over-question-trans-tn);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tl:hover:before{content:attr(over-question-trans-tl);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .edit-item-tb{text-align:center;position:relative}  .main-mix-blank .table-main .edit-item-tb:focus-visible{outline:2px solid #00279d;background-color:#fff;color:#000}  .main-mix-blank .table-main .header-tb{background-color:#c8e6c9;text-align:center;font-weight:600}  .main-mix-blank .table-main .header-tb td:hover{background-color:#c8e6c9}  .main-mix-blank .table-main .dis-item-tb{background-color:#cfd8dc;color:#2a3545}  .main-mix-blank .table-main .dis-item-tb td:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .dis-item-tb:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .text-center{text-align:center}  .main-mix-blank .table-main .no-background{background:#fff!important}  .main-mix-blank .table-main .no-background:hover{background:#fff!important}  .main-mix-blank .table-main table .select{background:#c7e5ff!important}  .main-mix-blank .table-main .menu-excel{display:none;width:-moz-fit-content;width:fit-content;background:#fff;border:1px solid #3f51b5;position:absolute;box-shadow:#00000059 0 5px 15px}  .main-mix-blank .table-main .menu-excel li{padding:10px;list-style:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer}  .main-mix-blank .table-main .menu-excel li:hover{background:rgba(200,230,201,.231372549)}  .main-mix-blank .table-main .menu-excel li svg{margin-right:10px}  .main-mix-blank .table-main .border-err{border:1px solid #f44336!important;outline:1px solid #f44336!important}  .main-mix-blank .table-main .tb-matrix-editor-trash-node{cursor:pointer;width:20px}  .main-mix-blank .table-main .tb-matrix-editor-trash-node:hover{color:#f44336}  .main-mix-blank .table-main thead td{font-weight:400}.header-mix-bank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{text-transform:none}.ins-info[_ngcontent-%COMP%]{padding-top:15px;font-style:italic}@media (max-width: 768px){.bank-name-block[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-bottom:5px}.main-mix-blank[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%!important}.col-tree[_ngcontent-%COMP%]{width:100%!important;height:50vh!important;padding:10px 10px 0;--tw-border-opacity: 1;border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity))}.col-tree[_ngcontent-%COMP%]   .filler-node[_ngcontent-%COMP%]{padding:5px!important}.col-table[_ngcontent-%COMP%]{width:calc(100vw - 20px)!important;padding-bottom:30px}}.text-matrix-title[_ngcontent-%COMP%]{cursor:pointer;text-align:justify}.d-none[_ngcontent-%COMP%]{display:none!important}@media (max-width: 640px){.d-block[_ngcontent-%COMP%]{display:block!important}.name-block[_ngcontent-%COMP%]{width:90vw}}']}),n})();function KA(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function $A(n,o){if(1&n&&e._UZ(0,"preview-offline-exam",7),2&n){const t=e.oxw(3);e.Q6J("isDialog",!1)("offlineExportObj",t.offlineExportObj)("curOfflineMixQuestionObj",t.offlineExportObj.offlineMixQuestionObjs[0])("backToLink",t.backToLink)}}function YA(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",5),e.YNc(5,$A,1,4,"preview-offline-exam",6),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_dap_an_de_thi_offline")," "),e.xp6(3),e.Q6J("ngIf",t.offlineExportObj&&t.offlineExportObj.offlineMixQuestionObjs&&t.offlineExportObj.offlineMixQuestionObjs[0])}}function GA(n,o){1&n&&(e.TgZ(0,"div",8)(1,"div",9),e.O4$(),e.TgZ(2,"svg",10),e._UZ(3,"path",11)(4,"path",12)(5,"path",13)(6,"path",14)(7,"path",15)(8,"path",16),e.qZA()(),e.kcU(),e.TgZ(9,"div",17),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()),2&n&&(e.xp6(10),e.hij(" ",e.lcZ(11,1,"lang_auto_khong_co_du_lieu_dap_an_de_thi")," "))}function WA(n,o){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,YA,6,4,"ng-container",0),e.YNc(2,GA,12,3,"ng-template",null,3,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.offlineExportObj||null==i.offlineExportObj.offlineMixQuestionObjs?null:i.offlineExportObj.offlineMixQuestionObjs.length)("ngIfElse",t)}}let VA=(()=>{class n extends W.Q{getData(){this.initStatusObj();let t=this.getMyParam(this.activeRoute,"hash_id")??"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.backToLink=`/admin/testbank/offline-answer-list/${this.offlineExportObj?.examObj?.categoryId??0}/${this.offlineExportObj?.examObj?.hashId}`,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}changeViewHashId(t){this.indexHashId=t}replace3DigitExamCode(t){for(var i=t.toString();i.length<3;)i="0"+i;return i}ngOnInit(){this.getData(),super.ngOnInit()}constructor(t,i){super(),this.activeRoute=t,this.offlineExamExportService=i,this.indexHashId=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Rn.qr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-offline-answer-list"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-8","mx-auto",2,"max-width","1200px"],["noDataAnswer",""],[1,"font-medium","text-center"],[1,"mt-4"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink",4,"ngIf"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink"],[1,"empty-block","mt-10"],[1,"icon-empty","flex"],["width","87","height","102","viewBox","0 0 87 102","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M66.6719 13.9999L75.9738 81.8427L76.8095 88.649C77.0787 90.8417 75.5194 92.8374 73.3268 93.1066L14.7665 100.297C12.5739 100.566 10.5781 99.0069 10.3089 96.8142L1.29312 23.3867C1.1585 22.2904 1.93813 21.2925 3.03447 21.1579C3.0414 21.157 3.04832 21.1562 3.05526 21.1554L7.91363 20.6104M11.8422 20.1698L16.4292 19.6552Z","fill","white"],["d","M67.9103 13.8302C67.8165 13.1462 67.186 12.6678 66.5021 12.7615C65.8181 12.8553 65.3397 13.4858 65.4335 14.1697L67.9103 13.8302ZM75.9738 81.8427L77.2144 81.6903C77.2137 81.6845 77.213 81.6787 77.2122 81.6729L75.9738 81.8427ZM76.8095 88.649L78.0502 88.4967L76.8095 88.649ZM73.3268 93.1066L73.4791 94.3473L73.3268 93.1066ZM14.7665 100.297L14.9189 101.538L14.7665 100.297ZM10.3089 96.8142L11.5496 96.6619L10.3089 96.8142ZM3.05526 21.1554L3.1946 22.3976L3.05526 21.1554ZM8.05297 21.8527C8.73902 21.7757 9.23279 21.1572 9.15584 20.4711C9.07888 19.7851 8.46034 19.2913 7.77428 19.3682L8.05297 21.8527ZM11.7028 18.9276C11.0168 19.0045 10.523 19.6231 10.5999 20.3091C10.6769 20.9952 11.2954 21.4889 11.9815 21.412L11.7028 18.9276ZM16.5685 20.8974C17.2546 20.8205 17.7484 20.2019 17.6714 19.5159C17.5945 18.8298 16.9759 18.3361 16.2899 18.413L16.5685 20.8974ZM65.4335 14.1697L74.7354 82.0125L77.2122 81.6729L67.9103 13.8302L65.4335 14.1697ZM74.7331 81.995L75.5688 88.8013L78.0502 88.4967L77.2144 81.6903L74.7331 81.995ZM75.5688 88.8013C75.7539 90.3088 74.6819 91.6809 73.1744 91.866L73.4791 94.3473C76.357 93.994 78.4035 91.3745 78.0502 88.4967L75.5688 88.8013ZM73.1744 91.866L14.6142 99.0563L14.9189 101.538L73.4791 94.3473L73.1744 91.866ZM14.6142 99.0563C13.1067 99.2414 11.7347 98.1694 11.5496 96.6619L9.0682 96.9666C9.42156 99.8445 12.041 101.891 14.9189 101.538L14.6142 99.0563ZM11.5496 96.6619L2.5338 23.2344L0.0524334 23.539L9.0682 96.9666L11.5496 96.6619ZM2.5338 23.2344C2.48332 22.8232 2.77568 22.449 3.18681 22.3986L2.88213 19.9172C1.10059 20.1359 -0.166313 21.7575 0.0524334 23.539L2.5338 23.2344ZM3.18681 22.3986C3.1894 22.3982 3.192 22.3979 3.1946 22.3976L2.91592 19.9132C2.90465 19.9145 2.89339 19.9158 2.88213 19.9172L3.18681 22.3986ZM3.1946 22.3976L8.05297 21.8527L7.77428 19.3682L2.91592 19.9132L3.1946 22.3976ZM11.9815 21.412L16.5685 20.8974L16.2899 18.413L11.7028 18.9276L11.9815 21.412Z","fill","#1F64E7"],["fill-rule","evenodd","clip-rule","evenodd","d","M64.14 18.2692L72.5596 79.7529L73.3169 85.9212C73.5609 87.9083 72.1669 89.7146 70.2033 89.9557L17.7613 96.3948C15.7978 96.6359 14.0082 95.2204 13.7642 93.2333L5.61416 26.8568C5.47955 25.7605 6.25918 24.7626 7.35551 24.628L13.8431 23.8314","fill","#E8F0FE"],["d","M23.6719 1.25H69.2286C69.9577 1.25 70.6569 1.5395 71.1726 2.05485L84.6158 15.4898C85.1319 16.0056 85.4219 16.7053 85.4219 17.4349V80C85.4219 81.5188 84.1907 82.75 82.6719 82.75H23.6719C22.1531 82.75 20.9219 81.5188 20.9219 80V4C20.9219 2.48122 22.1531 1.25 23.6719 1.25Z","fill","white","stroke","#1F64E7","stroke-width","2.5"],["d","M69.6719 2.40283V14C69.6719 15.6569 71.015 17 72.6719 17H80.6055","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M31 17H57M31 29H74M31 42H74M31 55H74M31 68H57","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-center","font-medium","mt-4"]],template:function(t,i){if(1&t&&(e.YNc(0,KA,1,0,"azt-loading-effect",0),e.YNc(1,WA,4,2,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,ym,re.bT],encapsulation:2}),n})();var Zm=S(76566),XA=S(51517),e5=S(47312);const t5=function(n){return{"box-select":n}},n5=function(n){return{active:n}};function i5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"img",3),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.ChooseTemplate(s.id?s.id:0))}),e.ALo(2,"mycdn"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(5,t5,i.template_selected_id===t.id)),e.xp6(1),e.s9C("src",e.lcZ(2,3,t.thumb),e.LSH),e.Q6J("ngClass",e.VKq(7,n5,i.template_selected_id===t.id))}}let o5=(()=>{class n extends W.Q{constructor(){super(...arguments),this.templates=[],this.template_selected_id=0,this.change_template=new e.vpe}ChooseTemplate(t){t!==this.template_selected_id&&this.change_template.emit(t)}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-choose-question-form"]],inputs:{templates:"templates",template_selected_id:"template_selected_id"},outputs:{change_template:"change_template"},features:[e.qOj],decls:4,vars:4,consts:[[1,"box-title","bg-slate-900","dark:bg-darkmode-400"],["class","box-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"box-item",3,"ngClass"],["azt-track-service","choose-question-form-Irw33xRlJC","alt","",1,"noChooseTemplate",3,"ngClass","src","click"]],template:function(t,i){1&t&&(e.TgZ(0,"p",0),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,i5,3,9,"div",1)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,2,"lang_auto_chon_mau_hien_thi_cau_hoi_upper")),e.xp6(2),e.Q6J("ngForOf",i.templates))},dependencies:[M.mk,M.sg,re.bT,re.GT],styles:['.box-title[_ngcontent-%COMP%]{text-align:center;font-size:large;padding:10px;border-radius:5px 5px 0 0;background:rgb(var(--color-primary));color:#fff;font-weight:500}.box-item[_ngcontent-%COMP%]{cursor:pointer;margin:10px;position:relative}.box-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.box-select[_ngcontent-%COMP%]:before{content:"";background:rgb(var(--color-primary));width:15px;height:15px;position:absolute;border-radius:50%;top:5px;left:5px}.active[_ngcontent-%COMP%]{border:2px solid rgb(var(--color-primary));box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}']}),n})();var a5=S(60458),s5=S(19651);const r5=["left_element_box"],l5=["right_element_box"];function c5(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span"),e._UZ(1,"span",24),e._uU(2,"\xa0"),e.qZA())}function u5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(4);return e.KtG(r.redirectShowDetail(s))}),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",e.lcZ(3,2,"lang_testbank_powerpoint_date")," ",e.lcZ(4,4,t.createdAt)," ")}}function d5(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",25)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"a",26),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"mat-menu",null,27)(10,"div",28)(11,"ul",29),e.YNc(12,u5,5,6,"li",30),e.qZA()()()()),2&n){const t=e.MAs(9),i=e.oxw(3);e.xp6(2),e.lnq("",e.lcZ(3,6,"lang_testbank_powerpoint_used")," ",(null==i.examObj?null:i.examObj.powerpointLinks)&&(null==i.examObj||null==i.examObj.powerpointLinks?null:i.examObj.powerpointLinks.length)," ",e.lcZ(4,8,"lang_testbank_powerpoint_times"),""),e.xp6(3),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Oqu(e.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),e.xp6(6),e.Q6J("ngForOf",null==i.examObj?null:i.examObj.powerpointLinks)}}function m5(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span"),e._UZ(1,"span",24),e._uU(2,"\xa0"),e.qZA())}function _5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",43),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(5);return e.KtG(r.redirectShowDetail(s))}),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",e.lcZ(3,2,"lang_testbank_powerpoint_date")," ",e.lcZ(4,4,t.createdAt)," ")}}function p5(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",41)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"a",26),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"mat-menu",null,42)(10,"div",28)(11,"ul",29),e.YNc(12,_5,5,6,"li",30),e.qZA()()()()),2&n){const t=e.MAs(9),i=e.oxw().$implicit;e.xp6(2),e.lnq("",e.lcZ(3,6,"lang_testbank_powerpoint_used")," ",i.powerpointLinks.length," ",e.lcZ(4,8,"lang_testbank_powerpoint_times"),""),e.xp6(3),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Oqu(e.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),e.xp6(6),e.Q6J("ngForOf",i.powerpointLinks)}}function h5(n,o){if(1&n&&e._UZ(0,"azt-template-one",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function g5(n,o){if(1&n&&e._UZ(0,"azt-template-two",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function f5(n,o){if(1&n&&e._UZ(0,"azt-template-three",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function x5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"button",36),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw(3);return e.KtG(r.generateLinkAction(s))}),e.O4$(),e.TgZ(7,"svg",15),e._UZ(8,"rect",16)(9,"path",17),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,m5,3,0,"span",18),e.qZA()(),e.YNc(13,p5,13,12,"div",37),e.qZA(),e.kcU(),e.TgZ(14,"div",38)(15,"container-element",39),e.YNc(16,h5,1,3,"azt-template-one",40),e.YNc(17,g5,1,3,"azt-template-two",40),e.YNc(18,f5,1,3,"azt-template-three",40),e.qZA()()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(3);e.xp6(4),e.AsE("",e.lcZ(5,9,"lang_testbank_powerpoint_question")," ",i+1,""),e.xp6(6),e.hij(" ",e.lcZ(11,11,"lang_testbank_powerpoint_copy_link_question")," "),e.xp6(2),e.Q6J("ngIf",t.isLoading&&!0===t.isLoading),e.xp6(1),e.Q6J("ngIf",0!=(null==t.powerpointLinks?null:t.powerpointLinks.length)),e.xp6(2),e.Q6J("ngSwitch",null==a.templateObj?null:a.templateObj.id),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function b5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",9,10)(2,"div",11)(3,"div",12)(4,"div",13),e._uU(5),e.qZA(),e.TgZ(6,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.generateLinkAction())}),e.O4$(),e.TgZ(7,"svg",15),e._UZ(8,"rect",16)(9,"path",17),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,c5,3,0,"span",18),e.qZA()(),e.YNc(13,d5,13,12,"div",19),e.qZA(),e.kcU(),e.TgZ(14,"div")(15,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToYTB())}),e._UZ(16,"img",21),e.ALo(17,"convertCdnLinkOfGitHub"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"div",22),e.YNc(21,x5,19,13,"div",23),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.examObj?null:t.examObj.name),e.xp6(5),e.hij(" ",e.lcZ(11,7,"lang_testbank_powerpoint_copy_link_exam")," "),e.xp6(2),e.Q6J("ngIf",(null==t.examObj?null:t.examObj.isLoading)&&!0===(null==t.examObj?null:t.examObj.isLoading)),e.xp6(1),e.Q6J("ngIf",(null==t.examObj?null:t.examObj.powerpointLinks)&&0!=(null==t.examObj||null==t.examObj.powerpointLinks?null:t.examObj.powerpointLinks.length)),e.xp6(3),e.Q6J("src",e.lcZ(17,9,"azota_assets/images/iconYoutube.svg"),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(19,11,"lang_testbank_powerpoint_see_tutorial")," "),e.xp6(3),e.Q6J("ngForOf",t.questionObjs)}}function v5(n,o){if(1&n&&(e.TgZ(0,"div",45)(1,"div",11)(2,"div",12)(3,"div",13),e._uU(4),e.qZA()(),e.TgZ(5,"div",46)(6,"div",47),e._UZ(7,"img",48),e.ALo(8,"convertCdnLinkOfGitHub"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",22)(12,"div",49),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(null==t.examObj?null:t.examObj.name),e.xp6(3),e.Q6J("src",e.lcZ(8,4,"azota_assets/images/iconYoutube.svg"),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(10,6,"lang_testbank_powerpoint_see_tutorial")," "),e.xp6(4),e.Oqu(e.lcZ(14,8,"lang_testbank_powerpoint_note_toturial"))}}function y5(n,o){1&n&&(e.TgZ(0,"div",45)(1,"div",22)(2,"div",50)(3,"span"),e._UZ(4,"span",24),e._uU(5,"\xa0"),e.qZA(),e.TgZ(6,"span",51),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_testbank_powerpoint_data_sample"),""))}function w5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4,5)(3,"app-choose-question-form",6),e.NdJ("change_template",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.changeTemplate(a))}),e.qZA()(),e.YNc(4,b5,22,13,"div",7),e.YNc(5,v5,15,10,"div",8),e.YNc(6,y5,9,3,"div",8),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("templates",t.templatesObjs),e.xp6(1),e.Q6J("ngIf",t.isSupport&&t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isSupport&&t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function C5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isShowVideo=!1)}),e.TgZ(1,"div",53)(2,"div",54)(3,"div",55),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",56)(7,"mat-icon",57),e._uU(8,"close"),e.qZA()()(),e.TgZ(9,"div",58),e._UZ(10,"iframe",59),e.qZA()()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_testbank_powerpoint_video_tutorial")))}let k5=(()=>{class n extends W.Q{generateLinkAction(t){this.examObj&&(void 0!==t?this.questionObjs?.forEach(i=>{this.questionObjs?.[t].id===i.id&&(i.isLoading=!0)}):this.examObj={...this.examObj,isLoading:!0},this.powerPointLinkService.apiPowerPointLinkGenerateLinkObjPost({examId:void 0!==t?0:this.exam_id,questionId:void 0!==t?this.questionObjs?.[t].id:0,templateId:this.templateObj?.id??0}).subscribe(i=>{if(1==i.success){this.showSuccessSnack("lang_auto_copy_link_thanh_cong");const a=document.createElement("textarea");if(a.value=`${Ce.N.base_embed_link}/embed_ppt/?link_id=${i.data?.obj?.id}&hash_class=${i.data?.obj?.hashCode}`,a.value=a.value.replace(/(^\w+:|^)\/\//,""),a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),!this.examObj)return;void 0!==t?(this.mergeLinks(this.questionObjs?.[t].powerpointLinks,i.data?.obj),this.questionObjs?.forEach(s=>{this.questionObjs?.[t].id===s.id&&(s.isLoading=!1)})):(this.mergeLinks(this.examObj?.powerpointLinks,i.data?.obj),this.examObj={...this.examObj,isLoading:!1})}else this.commonService.snackError("lang_auto_copy_link_that_bai_he_thong_khong_the_tao_link_cho_noi_dung_nay")}))}mergeLinks(t,i){for(let a=0;a<(t?.length??0);a++)if(t?.[a].id===i?.id)return;i&&t?.push(i)}redirectShowDetail(t){this.commonService.myNavigation(`/powerpoint/embed/${t.id}/${t.hashCode}`)}changeTemplate(t){this.getDataPowerPoint(t)}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}getDataPowerPoint(t){this.powerPointLinkService.apiPowerPointLinkGetObjGet(this.exam_id,t).subscribe(i=>{if(1==i.success){if(null!=i.data){this.templatesObjs=i.data?.templatesObjs,this.templateObj=i.data?.templateObj,this.examObj=i.data?.examObj;let a=this.commonService.castJsonToClassObjs(Zm.x,JSON.stringify(i.data?.questionObjs));this.questionObjs=this.homeworkExamService.changeDataQuestions(a??[])??[]}else this.isViewQuestion=!0;this.isSupport=this.homeworkExamService.isLstQuestionTrueFalse(this.questionObjs),i.data?.examObj&&this.powerpointExamService.convert(this.questionObjs,i.data?.examObj),this.isLoading=!0}else this.isViewQuestion=!0,this.showErrorSnack(i.message??""),this.isLoading=!0})}addEventElement(){document.addEventListener("scroll",()=>{this.left_element_box&&this.right_element_box&&(window.innerWidth>=1e3?(this.left_element_box.nativeElement.getBoundingClientRect().top<=-10&&(this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.left_element_box.nativeElement.classList.add("content__fixed"),this.right_element_box.nativeElement.classList.add("content__rfixed")),this.right_element_box.nativeElement.getBoundingClientRect().top>=0&&(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.add("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed"))):(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed")))})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_question_powerpoint_title",description:"lang_cms_question_powerpoint_description",image:"lang_cms_test_image"}),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.exam_id=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")),this.cat_id=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/0/"+(this.cat_id??0)+"/1"}),this.getDataPowerPoint(),this.addEventElement(),super.ngOnInit()}constructor(t,i,a,s){super(),this.activeRoute=t,this.powerPointLinkService=i,this.homeworkExamService=a,this.powerpointExamService=s,this.backToLink="",this.exam_id=0,this.cat_id=0,this.questionObjs=[],this.isLoading=!1,this.isSupport=!1,this.isViewQuestion=!1,this.widthView=0,this.isShowVideo=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Ve.WZ),e.Y36(Aa.j),e.Y36(XA.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-powerpoint-link"]],viewQuery:function(t,i){if(1&t&&(e.Gf(r5,5),e.Gf(l5,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.left_element_box=a.first),e.iGM(a=e.CRH())&&(i.right_element_box=a.first)}},features:[e.qOj],decls:4,vars:6,consts:[[3,"headerBackToLink","headerTitle"],["class","azt-ppt-content",4,"ngIf"],["azt-track-service","powerpoint-bN85gjV08DU","class","popup__video",3,"click",4,"ngIf"],[1,"azt-ppt-content"],[1,"left","box"],["left_element_box",""],[3,"templates","change_template"],["class","right box",4,"ngIf"],["class","right",4,"ngIf"],[1,"right","box"],["right_element_box",""],[1,"right__header"],[1,"right__header_lview"],[1,"right__header__exam_title"],["azt-track-service","powerpoint-N-aYwfOOF_",1,"btn","btn-outline-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[4,"ngIf"],["class","right__header_cview ml-2",4,"ngIf"],["azt-track-service","powerpoint-Zd6K5twMof",1,"btn-text-primary","ml-2",3,"click"],["alt","",1,"mr-2",3,"src"],[1,"right__content"],["class","right__content__question_item",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"right__header_cview","ml-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["detailLinksExam","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["azt-track-service","powerpoint-32OdBjI0q1",1,"dropdown-item",3,"click"],[1,"right__content__question_item"],[1,"right__content__question_item__header"],[1,"right__content__question_item__header_lview"],[1,"right__content__question_item__title"],["azt-track-service","powerpoint-UsKaxl1tor",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","right__content__question_item__header_rview",4,"ngIf"],[1,"right__content__question_item__content"],[3,"ngSwitch"],[3,"questionObj","indexQuestion","isAnswer",4,"ngSwitchCase"],[1,"right__content__question_item__header_rview"],["detailLinks","matMenu"],["azt-track-service","powerpoint-MYsWxijcXF",1,"dropdown-item",3,"click"],[3,"questionObj","indexQuestion","isAnswer"],[1,"right"],[1,"right__header_rview"],[1,"right__header__video"],["alt","",3,"src"],[1,"right__content_noti"],[1,"text-center","m-5"],[1,"right__content_loading"],["azt-track-service","powerpoint-bN85gjV08DU",1,"popup__video",3,"click"],[1,"popup__video_box"],[1,"popup__video__header"],[1,"popup__video__header--title"],[1,"popup__video__header--close"],[1,"d-flex"],[1,"popup__video__video"],["width","560","height","315","src","https://www.youtube.com/embed/FpcOtHNGMCQ","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(t,i){1&t&&(e.TgZ(0,"editor-layout",0),e.ALo(1,"mytranslate"),e.YNc(2,w5,7,4,"div",1),e.YNc(3,C5,11,3,"div",2),e.qZA()),2&t&&(e.Q6J("headerBackToLink",i.backToLink)("headerTitle",e.lcZ(1,4,"lang_testbank_powerpoint_header_title")),e.xp6(2),e.Q6J("ngIf",0==i.isViewQuestion),e.xp6(1),e.Q6J("ngIf",i.isShowVideo))},dependencies:[M.sg,M.O5,M.RF,M.n9,vn.Hw,en.VK,en.p6,e5.m,o5,a5.j,s5._,Ue.Z,re.bT,re.Jc,re.tO],styles:[".azt-ppt-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-top:10px;padding-bottom:40px}.azt-ppt-content__fixed[_ngcontent-%COMP%]{position:fixed;top:0;animation:_ngcontent-%COMP%_dropdownboxelement .5s}.azt-ppt-content__downtoup[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_downtoupboxelement .5s}.azt-ppt-content__rfixed[_ngcontent-%COMP%]{margin-left:380px!important}.azt-ppt-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:350px;height:100%;margin:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin:10px;width:calc(100% - 340px);border-width:1px;border-style:solid;border-radius:5px;padding:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content[_ngcontent-%COMP%]{padding-bottom:80px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_lview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__exam_title[_ngcontent-%COMP%]{max-width:350px;font-weight:700;margin:0 10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]{margin:20px 10px;display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_lview[_ngcontent-%COMP%], .azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_rview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;font-size:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_noti[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin:50px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_loading[_ngcontent-%COMP%]{font-size:20px}.azt-ppt-content__btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-transform:uppercase;padding:6px 15px;border-radius:5px;cursor:pointer}.popup__video[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center}.popup__video__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:10px 10px 0 0}.popup__video__header--title[_ngcontent-%COMP%]{font-size:18px}.popup__video__header--close[_ngcontent-%COMP%]{cursor:pointer}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}@keyframes _ngcontent-%COMP%_dropdownboxelement{0%{top:-10px}50%{top:40px}60%{top:10px}to{top:0}}@keyframes _ngcontent-%COMP%_downtoupboxelement{0%{padding-top:40px}to{padding-top:auto}}@media screen and (max-width: 925px){.content[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:auto!important}.right__header[_ngcontent-%COMP%]{row-gap:10px}.right__header__exam_title[_ngcontent-%COMP%]{max-width:100%!important}.popup__video[_ngcontent-%COMP%]{align-items:flex-start}.popup__video_box[_ngcontent-%COMP%]{width:95%}.popup__video__header[_ngcontent-%COMP%]{margin-top:50px}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 1199px) and (min-width: 926px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 890px) and (min-width: 551px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 550px){.right__content__question_item__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px}.right__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px;align-items:center!important;justify-content:space-between!important;align-content:center!important}.right__header__exam_title[_ngcontent-%COMP%]{max-width:50%!important}}"]}),n})();class fo{static objectLength(o){return Object.keys(o).length}static removeKeyInObject(o,t){for(var i in o)t.hasOwnProperty(i)&&delete o[i];return o}}var E5=S(75108),M5=S(68234);function I5(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function L5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_luong_de_dao")," "))}function Z5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_luong_de_phai_lon_hon_0")," "))}function P5(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_so_luong_de_phai_nho_hon"),"\xa0",t.limitMaxMixQuestionHashId," ")}}function j5(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,L5,3,3,"span",24),e.YNc(2,Z5,3,3,"span",24),e.YNc(3,P5,3,4,"span",24),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.form.controls.numberExam.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.numberExam.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.numberExam.errors.max)}}function D5(n,o){1&n&&(e.TgZ(0,"div",37)(1,"small",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_offline_test_cannot_be_reversed"),". "))}function N5(n,o){1&n&&(e.TgZ(0,"div",37)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_de_thi_qua_120_cau_vui_long_tao_de_con_duoi_120_cau_de_in_de"),". "))}function Q5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.redirectToUpdateExam())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_link_to_update_exam")))}function q5(n,o){if(1&n&&(e.TgZ(0,"div",37)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Q5,3,3,"a",39),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_testbank_offline_test_not_print_exam_have_answer")+" "+t.dataConfigDocument.allowMaxAnswerChoices,". "),e.xp6(2),e.Q6J("ngIf",!(null!=t.examObj&&t.examObj.isRandomQuestion))}}function F5(n,o){if(1&n&&(e.TgZ(0,"p",44,45),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.MAs(1),i=e.oxw(3);e.s9C("matTooltip",i.pagePrintExamCodeWithString),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.AsE(" ",e.lcZ(3,5,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_will_create"),"\xa0",i.pagePrintExamCodeWithString," ")}}function U5(n,o){if(1&n&&(e.TgZ(0,"span")(1,"span",46),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",46),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid")," "),e.xp6(3),e.HOy(" ",e.lcZ(6,7,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_real"),"\xa0",t.form.controls.inputOfflineMixQuestionHashId.errors.countReal," \xa0|\xa0 ",e.lcZ(7,9,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_you"),"\xa0",t.form.controls.inputOfflineMixQuestionHashId.errors.countOfCode," ")}}function R5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_format_invalid")," "))}function B5(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_duplicated_invalid"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds?null:t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds.join(", ")," ")}}function z5(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_min_invalid"),"\xa0",t.form.controls.inputOfflineMixQuestionHashId.errors.minOfStart," ")}}function J5(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_max_invalid"),"\xa0",t.form.controls.inputOfflineMixQuestionHashId.errors.maxOfStart," ")}}function H5(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,U5,8,11,"span",24),e.YNc(2,R5,3,3,"span",24),e.YNc(3,B5,3,4,"span",24),e.YNc(4,z5,3,4,"span",24),e.YNc(5,J5,3,4,"span",24),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.inputOfflineMixQuestionHashId.errors.countOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",t.form.controls.inputOfflineMixQuestionHashId.errors.formatOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",t.form.controls.inputOfflineMixQuestionHashId.errors.minOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",t.form.controls.inputOfflineMixQuestionHashId.errors.maxOfflineMixQuestionHashIdInvalid)}}function K5(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"input",41),e.ALo(2,"mytranslate"),e.TgZ(3,"div",42),e.YNc(4,F5,4,7,"p",43),e.qZA(),e.YNc(5,H5,6,5,"div",14),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,3,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_placeholder")),e.xp6(3),e.Q6J("ngIf",!t.form.controls.numberExam.errors&&!t.form.controls.inputOfflineMixQuestionHashId.errors&&""!=t.pagePrintExamCodeWithString),e.xp6(1),e.Q6J("ngIf",!t.form.controls.numberExam.errors&&t.form.controls.inputOfflineMixQuestionHashId.errors)}}function $5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",47)(4,"div",48)(5,"label",49),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",50),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",51)(12,"div",31)(13,"input",52),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeRandomQuestionConfig(a))}),e.qZA()()()()()()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),e.xp6(3),e.hij(" ",e.lcZ(10,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function Y5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",16)(4,"div",48)(5,"label",53),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",54),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",51)(12,"div",31)(13,"input",55),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeCreateSubTestConfig(a))}),e.qZA()()()()()()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,2,"lang_auto_tao_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(10,4,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "))}function G5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",56)(1,"test-config-online-mix-question",57),e.NdJ("isGroupMixQuestionChange",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.checkValidateCountQuestion=a)})("hasChangeValueLimitQuestion",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeLimitQuestionNonGroup(a))})("totalTakeQuestionChange",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeLimitQuestionInGroup(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("hidden",t.form.controls.isRandomQuestion.value||!(1==t.form.controls.isCreateSubTest.value&&1==t.form.controls.mixQuestion.value)),e.xp6(1),e.Q6J("fromPrintOffline",!0)("form",t.form)("obj",t.obj)("minLimitMixQuestion",t.minLimitMixQuestion)("examGroupInfos",t.examGroupInfos)}}function W5(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",64)(1,"g",65)(2,"g",66),e._UZ(3,"circle",67),e.TgZ(4,"path",68),e._UZ(5,"animateTransform",69),e.qZA()()()())}function V5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",70),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.changeConfigSubjectMark(a))}),e.qZA()}}function X5(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",47)(4,"div",58)(5,"label",59),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",50)(9,"div"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"div",60),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"div",60),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()(),e.TgZ(18,"div",61)(19,"div",31),e.YNc(20,W5,6,0,"svg",62),e.YNc(21,V5,1,0,"input",63),e.qZA()()()()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",e.lcZ(7,6,"lang_config_create_exam_multiple_component")," "),e.xp6(4),e.hij(" ",e.lcZ(11,8,"lang_config_create_exam_multiple_component_description_120"),""),e.xp6(3),e.hij(" ",e.lcZ(14,10,"lang_config_create_exam_multiple_component_description_80"),""),e.xp6(3),e.hij(" ",e.lcZ(17,12,"lang_testbank_in_case_users_create_subtopics_other_than_120_or_80_sentences_this_function_will_automatically_turn_off"),""),e.xp6(4),e.Q6J("ngIf",t.loadingSaveConfigMultiple),e.xp6(1),e.Q6J("ngIf",!t.loadingSaveConfigMultiple)}}const eO=function(n){return{hidden:n}};function tO(n,o){if(1&n&&(e.TgZ(0,"div",71),e._UZ(1,"add-info-print",72),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(3,eO,!t.form.controls.addInfoPrint.value)),e.xp6(1),e.Q6J("form",t.form)("examPrintInfoObj",t.examPrintInfoObj)}}function nO(n,o){1&n&&(e.TgZ(0,"div",81)(1,"div",82)(2,"a",83),e._UZ(3,"img",84),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",85),e._UZ(6,"img",86),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"azota_assets/images/2928664.svg"),e.LSH))}function iO(n,o){1&n&&(e.TgZ(0,"p",78),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function oO(n,o){1&n&&(e.TgZ(0,"div",81)(1,"div",87)(2,"p",88)(3,"span",89),e._uU(4,"Google Play"),e.qZA(),e._UZ(5,"azt-download-qr-code",90),e.qZA(),e.TgZ(6,"p",91)(7,"span",89),e._uU(8,"App Store"),e.qZA(),e._UZ(9,"azt-download-qr-code",90),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function aO(n,o){if(1&n&&(e.TgZ(0,"div",73)(1,"div",74)(2,"span",75),e._uU(3," * "),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",76)(7,"div",77)(8,"p",78),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,nO,8,6,"div",79),e.qZA(),e.TgZ(12,"div",46),e.YNc(13,iO,3,3,"p",80),e.YNc(14,oO,10,4,"div",79),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),e.xp6(5),e.hij(" ",e.lcZ(10,7,"lang_core_tai_app_tai_day")," "),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView)}}function sO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",5)(5,"form",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"label",12),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e._UZ(14,"input",13),e.ALo(15,"mytranslate"),e.YNc(16,j5,4,3,"div",14),e.YNc(17,D5,4,3,"div",14),e.YNc(18,N5,4,3,"div",14),e.YNc(19,q5,5,4,"div",14),e.qZA(),e.TgZ(20,"div",15)(21,"div",16)(22,"div",17)(23,"label",18),e._uU(24),e.ALo(25,"mytranslate"),e.TgZ(26,"span",19),e.ALo(27,"mytranslate"),e._UZ(28,"lucide-icon",20),e.qZA()()(),e.TgZ(29,"div",21)(30,"div",22),e._UZ(31,"input",23),e.qZA()()(),e.YNc(32,K5,6,5,"ng-container",24),e.qZA(),e.TgZ(33,"div",15),e._UZ(34,"app-testbank-choose-answer-sheet",25),e.qZA()(),e.TgZ(35,"div",10),e._UZ(36,"preview-answer-sheet-dialog",26),e.qZA()(),e.YNc(37,$5,14,6,"div",27),e.YNc(38,Y5,14,6,"div",27),e.YNc(39,G5,2,6,"div",28),e.YNc(40,X5,22,14,"div",27),e.TgZ(41,"div",9)(42,"div",10)(43,"div",29)(44,"div",16)(45,"div",17)(46,"label",30),e._uU(47),e.ALo(48,"mytranslate"),e.qZA()(),e.TgZ(49,"div",21)(50,"div",31),e._UZ(51,"input",32),e.qZA()()()(),e.YNc(52,tO,2,5,"div",33),e.qZA()()(),e.YNc(53,aO,15,9,"div",34),e.qZA(),e.TgZ(54,"div",35)(55,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savePrintConfigObj())}),e._uU(56),e.ALo(57,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,26,"lang_auto_in_de_co_phieu_tra_loi_trac_nghiem_rieng")," "),e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(7),e.hij(" ",e.lcZ(13,28,"lang_auto_so_luong_de_dao")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(15,30,"lang_auto_nhap_so_luong_de_dao")),e.xp6(2),e.Q6J("ngIf",t.form.controls.numberExam.dirty&&t.form.controls.numberExam.errors),e.xp6(1),e.Q6J("ngIf",0===(null==t.dataConfigDocument?null:t.dataConfigDocument.canMixQuestion)&&t.form.controls.numberExam.value>1),e.xp6(1),e.Q6J("ngIf",1===(null==t.dataConfigDocument?null:t.dataConfigDocument.exceedMaxQuestions)),e.xp6(1),e.Q6J("ngIf",t.dataConfigDocument&&t.dataConfigDocument.maxAnswerChoices&&t.dataConfigDocument.maxAnswerChoices>4),e.xp6(5),e.hij(" ",e.lcZ(25,32,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(27,34,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_tooltip")),e.xp6(6),e.Q6J("ngIf",t.form.controls.allowCustomInputOfflineMixQuestionHashId.value),e.xp6(2),e.Q6J("form",t.form),e.xp6(2),e.Q6J("answersheetTemplate",t.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",t.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",t.form.controls.amountTemplateA5.value)("amountTemplateA6",t.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",t.form.controls.amountTemplateEssayA4.value),e.xp6(1),e.Q6J("ngIf",t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value),e.xp6(1),e.Q6J("ngIf",t.obj),e.xp6(1),e.Q6J("ngIf",t.canUseSubjectMark),e.xp6(7),e.hij(" ",e.lcZ(48,36,"lang_core_them_thong_tin")," "),e.xp6(5),e.Q6J("ngIf",t.examPrintInfoObj),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("disabled",t.checkValidateCountQuestion&&1==t.form.controls.isCreateSubTest.value||11==t.form.controls.answersheetTemplate.value&&t.form.controls.amountTemplateOriginalA4.errors||12==t.form.controls.answersheetTemplate.value&&t.form.controls.amountTemplateA5.errors||14==t.form.controls.answersheetTemplate.value&&t.form.controls.amountTemplateA6.errors||13==t.form.controls.answersheetTemplate.value&&t.form.controls.amountTemplateEssayA4.errors||1==t.form.controls.isCreateSubTest.value&&t.isGroupMixQuestion&&t.totalTakeQuestion>120||1==t.form.controls.isCreateSubTest.value&&t.isGroupMixQuestion&&0==t.totalTakeQuestion||t.dataConfigDocument&&void 0!==t.dataConfigDocument.maxAnswerChoices&&t.dataConfigDocument.maxAnswerChoices>4||t.form.controls.numberExam.errors||t.form.controls.allowCustomInputOfflineMixQuestionHashId.value&&t.form.controls.inputOfflineMixQuestionHashId.errors),e.xp6(1),e.hij(" ",e.lcZ(57,38,"lang_auto_in_de_and_phieu")," ")}}let rO=(()=>{class n extends W.Q{get pagePrintExamCodeWithString(){const t=this.makeExamCodeWithInput();return t?`(${t.map(i=>this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(i,3)).join(", ")})`:""}makeExamCodeWithInput(){if(this.form.controls.numberExam.errors||this.form.controls.inputOfflineMixQuestionHashId.errors)return;const t=this.commonService.examExtractNumbers(this.form.controls.numberExam.value??1,this.form.controls.inputOfflineMixQuestionHashId.value??"");return t.susses?t.data:void 0}getOfflineMixQuestionHashIdsWillCreated(t,i){t=Number(t),i=Number(i);let a=[];if(t>0&&i>0){let s=this.formatAnswerSheetService.getOfflineMixQuestionHashIdsFromStart(t,i);for(let r=0;r<s.length;r++)a.push(this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(s[r],3))}return a.length>0?"("+a.join(", ")+")":""}getGroupMixInfosSubmit(t){let i={},a=[];return t.forEach(r=>{if(!i.hasOwnProperty(r.groupId)){i[r.groupId]=r.totalQuestion??0;let l=[],c=Number(r.totalGroupScore)/Number(r.totalQuestion);for(let d=0;d<r.totalQuestion;d++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(t,i){let a=Number(i)/Number(t),s=new Array(Number(t)).fill(a);return{limitMixQuestion:Number(t),marks:s}}startCreateOfflineExamData(){this.isLoadingPrintTest=!0;let t=Number(this.form.controls.numberExam.value),a=this.form.controls.answersheetTemplate?Number(this.form.controls.answersheetTemplate.value):11,s=this.makeExamCodeWithInput(),r=this.getAmountAnswerSheetByTemplate(a);this.subscriptions.add(this.offlineExamService.apiOfflineExamCreateExamObjPost({examHashId:this.examObj?.hashId??"",total:t,examTemplate:0,answersheetTemplate:a,totalQuestionOfAnswerSheet:r,customOfflineMixQuestionHashId:s??[]}).subscribe(c=>{if(1===c.success){if(c.data?.obj){let d=c.data.obj,y=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/download-file-print/${this.examObj?.categoryId??0}/${d.examHashId}/${d.hashId}`,`?backto=${encodeURIComponent(y)}`)}this.successStatusObj(),this.isLoadingPrintTest=!1}else this.errorStatusObj(c.message??"",!0),this.isLoadingPrintTest=!1}))}getAmountAnswerSheetByTemplate(t){switch(Number(t)){case 11:default:return this.form.controls.amountTemplateOriginalA4.value;case 12:return this.form.controls.amountTemplateA5.value;case 14:return this.form.controls.amountTemplateA6.value;case 13:return this.form.controls.amountTemplateEssayA4.value}}changeRandomQuestionConfig(t){t.target instanceof HTMLInputElement&&t.target.checked&&(this.form.controls.subjectMarks.enable(),this.form.controls.isCreateSubTest.setValue(!1))}changeConfigSubjectMark(t){if(t.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.commonService.getFormObj(this.form),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0,enableViewAnswerResultMinMark:!1};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(s=>{1==s.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(s.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}changeCreateSubTestConfig(t){t.target instanceof HTMLInputElement&&(t.target.checked?(120!=this.form.controls.limitMixQuestion.value&&80!=this.form.controls.limitMixQuestion.value||this.isGroupMixQuestion&&120!=this.totalTakeQuestion&&80!=this.totalTakeQuestion)&&(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable())}changeLimitQuestionNonGroup(t){this.isGroupMixQuestion||this.disableSubjectMarksConfig(t)}changeLimitQuestionInGroup(t){this.totalTakeQuestion=t,this.isGroupMixQuestion&&this.disableSubjectMarksConfig(t)}disableSubjectMarksConfig(t){this.form.controls.isCreateSubTest.value&&120!=t&&80!=t||!this.canUseSubjectMark?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable()}savePrintConfigObj(){this.initStatusObj(),this.form.controls.isRandomQuestion.value&&this.form.controls.isCreateSubTest.setValue(!1);let t=this.commonService.getFormObj(this.form);t.limitMixQuestion=t.limitMixQuestion>0?t.limitMixQuestion:0;let i=t.isCreateSubTest?2:2==this.dataConfigDocument?.examObj?.mixQuestion?1:void 0,a=this.getGroupMixInfosSubmit(t.groupInfos),r={mixQuestion:i,mixQuestionNotInGroupInfoWithMarkObj:this.getMixInfoSubmit(t.limitMixQuestion,t.totalPointQuestionNoGroup),mixQuestionGroupInfoWithMarkObj:a,subjectMarks:t.subjectMarks?1:0,isRandomQuestion:this.enableRandomQuestion?t.isRandomQuestion?1:0:void 0,isSaveConfig:0,enableViewAnswerResultMinMark:!1};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examObj?.hashId??"",r).subscribe(l=>{1==l.success?(this.startCreateOfflineExamData(),this.addInfoPrint()):this.errorStatusObj(l.message??"",!0)}))}getExamInfoByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.dataConfigDocument&&this.initData(this.dataConfigDocument),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}initData(t){let a,i=t?.examObj,s=this.defaultMaxMixQuestionHashId-(t?.totalUsedMixQuestionHashId??0);if(a=this.castObj(i),null==a)return;a.limitQuestionGroupsParse=this.commonService.myParseJson(i.limitQuestionGroups??""),this.obj=a,this.examObj=t.examObj??{},this.examPrintInfoObj=t.examPrintInfoObj,this.enableRandomQuestion=t.enableRandomQuestion??!1,this.examPrintInfoObj?.status&&this.form.controls.addInfoPrint.setValue(!0),this.limitMaxMixQuestionHashId=s>this.defaultMaxCreateMixExamOneTime?this.defaultMaxCreateMixExamOneTime:s;let r=t.examObj?.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((l,c)=>l+c,0);r=Math.round(100*(r??1))/100,this.form.controls.limitMixQuestion.setValue(this.obj.limitMixQuestion),this.form.controls.isCreateSubTest.setValue(2==this.obj.mixQuestion),this.form.controls.numberExam.addValidators(p.kI.max(this.limitMaxMixQuestionHashId)),this.form.controls.answersheetTemplate.setValue(t.offlineExamObj?.answersheetTemplate?t.offlineExamObj?.answersheetTemplate.toString():"11"),this.form.addValidators(function O5(n,o){return t=>{var i=t.get("inputOfflineMixQuestionHashId"),a=t.get("numberExam");if(i&&i.value&&a&&""!=a.value.toString().trim()){var s=Rt.v.stcExamExtractNumbers(Number(a.value),i.value),l=s.data.filter(function(y){return-1!=o.indexOf(y)});if(s.data.length>0&&l.length>0){for(var c=[],d=0;d<l.length;d++)c.push(n.formatOfflineExamHashIdToNumber(l[d],3));return i?.setErrors({duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:c}),{identityRevealed:!0}}}var f=i?.errors??{};return f=fo.removeKeyInObject(f,{duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:[]}),fo.objectLength(f)<=0?i?.setErrors(null):i?.setErrors(f),null}}(this.formatAnswerSheetService,t.offlineMixQuestionHashIdsUsed??[])),this.form.addValidators(function T5(){return n=>{var o=n.get("inputOfflineMixQuestionHashId");if(o&&""!=o.value.trim()){var t=n.get("numberExam");if(!t||""==t.value.toString().trim())return o?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),{identityRevealed:!0};var i=Number(t.value),a=Rt.v.stcExamExtractNumbers(i,o.value);if(a.susses&&a.data.length!=i)return o?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:i,countReal:a.data.length}),{identityRevealed:!0}}var s=o?.errors??{};return s=fo.removeKeyInObject(s,{countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),fo.objectLength(s)<=0?o?.setErrors(null):o?.setErrors(s),null}}()),this.form.addValidators(function A5(){return n=>{var o=n.get("inputOfflineMixQuestionHashId"),t=n.get("numberExam");if(o&&""!=o.value.trim()&&t&&""!=t.value.toString().trim()){var i=Rt.v.stcExamExtractNumbers(Number(t.value),o.value);if(!i.susses)return o?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0};if(0===i.data.length||i.data.filter(s=>s<0).length>0)return o?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0}}var a=o?.errors??{};return a=fo.removeKeyInObject(a,{formatOfflineMixQuestionHashIdInvalid:!0}),fo.objectLength(a)<=0?o?.setErrors(null):o?.setErrors(a),null}}()),this.form.addValidators(function S5(n,o){return t=>{var i=t.get("inputOfflineMixQuestionHashId"),a=t.get("numberExam");if(i&&""!=i.value.trim()&&a&&""!=a.value.toString().trim()){var s=Rt.v.stcExamExtractNumbers(Number(a.value),i.value);if(s.susses)for(let c=0;c<s.data.length;c++){if(s.data[c]<n)return i?.setErrors({minOfflineMixQuestionHashIdInvalid:!0,minOfStart:n}),{identityRevealed:!0};if(s.data[c]>o){let d=o;return"special"===s.msg&&(d=d-Number(a.value)+1),i?.setErrors({maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:d}),{identityRevealed:!0}}}}var r=i?.errors??{};r=fo.removeKeyInObject(r,{minOfflineMixQuestionHashIdInvalid:!0,minOfStart:0}),fo.objectLength(r)<=0?i?.setErrors(null):i?.setErrors(r);var l=i?.errors??{};return l=fo.removeKeyInObject(l,{maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:0}),fo.objectLength(l)<=0?i?.setErrors(null):i?.setErrors(l),null}}(1,999)),this.form.controls.schoolName.setValue(t.examPrintInfoObj?.schoolName),this.form.controls.subjectName.setValue(t.examPrintInfoObj?.subject),this.form.controls.isRandomQuestion.setValue(1==this.obj.isRandomQuestion),this.form.controls.subjectMarks.setValue(!!this.examObj.subjectMarks),this.form.controls.totalPointQuestionNoGroup.setValue(r),this.hasGroupQuestion=!!t.hasGroupQuestion,this.minLimitMixQuestion=t.minLimitMixQuestion??0,this.examGroupInfos=t.examGroupInfos&&t.examGroupInfos.length>0?t.examGroupInfos:this.examGroupInfos}addInfoPrint(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamPrintInfoObjPost(this.examHashId,{schoolName:this.form.controls.schoolName.value,subject:this.form.controls.subjectName.value,status:this.form.controls.addInfoPrint.value?1:0}).subscribe(i=>{1===i.success||this.errorStatusObj(i.message??"")}))}redirectToUpdateExam(){const i=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${encodeURIComponent(i)}`)}ngOnInit(){this.form=this.formBuilder.group({numberExam:new p.p4(1,[p.kI.required,p.kI.min(1)]),isCreateSubTest:new p.p4(!1),mixQuestion:new p.p4("1"),groupInfos:new p.vC([]),limitMixQuestion:new p.p4(""),totalPointQuestionNoGroup:new p.p4(10),answersheetTemplate:new p.p4("11",[p.kI.required]),amountTemplateOriginalA4:new p.p4(120,[p.kI.required,p.kI.min(1),p.kI.max(120)]),amountTemplateA5:new p.p4(50,[p.kI.required,p.kI.min(1),p.kI.max(50)]),amountTemplateA6:new p.p4(20,[p.kI.required,p.kI.min(1),p.kI.max(20)]),amountTemplateEssayA4:new p.p4(50,[p.kI.required,p.kI.min(1),p.kI.max(50)]),allowCustomInputOfflineMixQuestionHashId:new p.p4(!1,[p.kI.required]),inputOfflineMixQuestionHashId:new p.p4(""),addInfoPrint:new p.p4(!1),schoolName:new p.p4(""),subjectName:new p.p4(""),isRandomQuestion:new p.p4(!1),subjectMarks:new p.p4({value:!1,disabled:!1})}),this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyQueryParam("backto")??"";this.backToLink=i||`/admin/testbank/action-online-offline/${t??0}/${this.examHashId}`,this.getExamInfoByHashId(this.examHashId),super.ngOnInit()}constructor(t,i,a,s,r,l){super(),this.formBuilder=t,this.offlineExamService=i,this.documentConfigService=a,this.formatAnswerSheetService=s,this.activeRoute=r,this.dialog=l,this.form=new p.nJ({}),this.backToLink="",this.isLoadingPrintTest=!1,this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.totalTakeQuestion=0,this.hasGroupQuestion=!1,this.examGroupInfos=[],this.minLimitMixQuestion=0,this.enableRandomQuestion=!1,this.defaultMaxCreateMixExamOneTime=100,this.defaultMaxMixQuestionHashId=999,this.limitMaxMixQuestionHashId=999,this.examHashId="",this.loadingSaveConfigMultiple=!1,this.canUseSubjectMark=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(Rn.vv),e.Y36(Ve.Cq),e.Y36(E5.U),e.Y36(T.gz),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-print-exam-and-ticket"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[1,"form-label","font-medium"],["type","text","appOnlyNumber","","formControlName","numberExam",1,"form-control",3,"placeholder"],["class","text-xs text-danger fade mt-2",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-10","lg:col-span-5"],["for","allow-input-start-offline-mix-question-hash-id",1,"form-check-label","ml-0","azt-ml-0","mr-2","flex","items-center","font-medium"],[1,"w-4","h-4","ml-2","inline-block",3,"matTooltip"],["name","info"],[1,"col-span-2","lg:col-span-7","flex"],[1,"form-check","form-switch","mb-3","ml-auto"],["id","allow-input-start-offline-mix-question-hash-id","formControlName","allowCustomInputOfflineMixQuestionHashId","type","checkbox",1,"show-code","form-check-input"],[4,"ngIf"],["formArrayName","answersheetTemplate",3,"form"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4"],["class","grid grid-cols-12 gap-5",4,"ngIf"],["class","mt-3",3,"hidden",4,"ngIf"],[1,"mt-5"],["for","add-info-print",1,"form-label","font-medium"],[1,"form-check","form-switch","ml-auto"],["id","add-info-print","formControlName","addInfoPrint","type","checkbox",1,"show-code","form-check-input","mr-0","ml-3"],[3,"ngClass",4,"ngIf"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","print-exam-and-ticket-PVsGtKGXRK",1,"btn","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","fade","mt-2"],[1,"text-note","text-danger"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl","class","btn-text-primary inline-flex font-medium",3,"click",4,"ngIf"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl",1,"btn-text-primary","inline-flex","font-medium",3,"click"],["type","text","formControlName","inputOfflineMixQuestionHashId",1,"form-control",3,"placeholder"],[1,"col-span-12","px-0","mt-2"],["class","text-slate-500 text-xs truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[1,"text-slate-500","text-xs","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"block"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","config-matrix-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],["id","config-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],["for","create-sub-exam",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],["id","create-sub-exam","formControlName","isCreateSubTest","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"mt-3",3,"hidden"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"fromPrintOffline","form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange","hasChangeValueLimitQuestion","totalTakeQuestionChange"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],["class","show-code ml-auto form-check-input w-5 h-5","width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"show-code","ml-auto","form-check-input","w-5","h-5"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[3,"ngClass"],[3,"form","examPrintInfoObj"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,I5,1,0,"azt-loading-effect",1),e.YNc(2,sO,58,40,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.mk,M.O5,Zt.gM,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.sg,p.u,p.CE,jt.Q,Ps.o,Vi.Y,Bt.M,ho.Q,M5.z,pn._,h.Nh5,im,Yd,Gd,re.bT,re.Jc],encapsulation:2}),n})();function lO(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function cO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"h3",26),e._uU(2),e.qZA(),e.TgZ(3,"div",27),e._UZ(4,"input",28),e.TgZ(5,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(6,"svg",12),e._UZ(7,"rect",30)(8,"path",31),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(2),e.hij(" ",null==t.classObj?null:t.classObj.name," "),e.xp6(2),e.Q6J("value",t.linkDocument),e.xp6(1),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(null!==(a=t.linkDocument)&&void 0!==a?a:"")),e.xp6(4),e.hij(" ",e.lcZ(10,4,"lang_auto_sao_chep")," ")}}function uO(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"h3",23),e._uU(2),e.qZA(),e.YNc(3,cO,11,6,"div",24),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.homeworkObj?null:t.homeworkObj.name," "),e.xp6(1),e.Q6J("ngForOf",t.listLinkDocument)}}function dO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"h3",23),e._uU(2),e.qZA(),e.TgZ(3,"div",32),e._UZ(4,"input",33),e.TgZ(5,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(6,"svg",12),e._UZ(7,"rect",30)(8,"path",31),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.examObj?null:t.examObj.name," "),e.xp6(2),e.Q6J("value",t.linkDocument),e.xp6(1),e.Q6J("cdkCopyToClipboard",t.copyLinkToClipboard(t.linkDocument)),e.xp6(4),e.hij(" ",e.lcZ(10,4,"lang_auto_sao_chep")," ")}}function mO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"p",36),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",26),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",37)(8,"code",38)(9,"span"),e._uU(10,"<"),e.TgZ(11,"span"),e._uU(12,"iframe"),e.qZA(),e._uU(13,"\xa0 "),e.TgZ(14,"span"),e._uU(15,"width"),e.qZA(),e._uU(16,"="),e.TgZ(17,"span"),e._uU(18,'"100%"'),e.qZA(),e._uU(19,"\xa0 "),e.TgZ(20,"span"),e._uU(21,"height"),e.qZA(),e._uU(22,"="),e.TgZ(23,"span"),e._uU(24,'"900"'),e.qZA(),e._uU(25,"\xa0 "),e.TgZ(26,"span"),e._uU(27,"src"),e.qZA(),e._uU(28,"="),e.TgZ(29,"span"),e._uU(30),e.qZA(),e._uU(31,"\xa0 "),e.TgZ(32,"span"),e._uU(33,"title"),e.qZA(),e._uU(34,"="),e.TgZ(35,"span"),e._uU(36),e.qZA(),e._uU(37,"\xa0 "),e.TgZ(38,"span"),e._uU(39,"frameborder"),e.qZA(),e._uU(40,"="),e.TgZ(41,"span"),e._uU(42,'"0"'),e.qZA(),e._uU(43,"\xa0 "),e.TgZ(44,"span"),e._uU(45,"allow"),e.qZA(),e._uU(46,"="),e.TgZ(47,"span"),e._uU(48,'"accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture"'),e.qZA(),e._uU(49,"\xa0 "),e.TgZ(50,"span"),e._uU(51,"allowfullscreen"),e.qZA(),e._uU(52,">"),e.qZA(),e._uU(53,"\xa0 "),e.TgZ(54,"span"),e._uU(55,"</"),e.TgZ(56,"span"),e._uU(57,"iframe"),e.qZA(),e._uU(58,">"),e.qZA()()(),e.TgZ(59,"div",39)(60,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(61,"svg",41),e._UZ(62,"path",42)(63,"polyline",14),e.qZA(),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,6,"lang_testbank_publish_result_had_website"),"? "),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_testbank_publish_result_note_tutorial")," "),e.xp6(25),e.hij('"',t.linkDocument,'"'),e.xp6(6),e.hij('"',null==t.examObj?null:t.examObj.name,'"'),e.xp6(24),e.Q6J("cdkCopyToClipboard",t.copyLinkToIframe()),e.xp6(4),e.hij(" ",e.lcZ(65,10,"lang_auto_sao_chep_ma_nhung")," ")}}function _O(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"p",6),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,uO,4,2,"div",7),e.YNc(12,dO,11,6,"div",7),e.YNc(13,mO,66,12,"div",8),e.TgZ(14,"div",9)(15,"div",10)(16,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getRouterLinkByType())}),e.O4$(),e.TgZ(17,"svg",12),e._UZ(18,"path",13)(19,"polyline",14)(20,"path",15)(21,"path",16)(22,"path",17)(23,"path",18),e.qZA(),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(26,"div",19)(27,"a",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToDocumentManager())}),e.O4$(),e.TgZ(28,"svg",12),e._UZ(29,"path",21),e.qZA(),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",1==t.type?null!=t.homeworkObj&&t.homeworkObj.isPublished?e.lcZ(4,7,"lang_auto_xuat_ban_thanh_cong"):e.lcZ(5,9,"lang_auto_da_luu_thanh_cong_chua_xuat_ban"):null!=t.examObj&&t.examObj.isPublished?e.lcZ(6,11,"lang_auto_xuat_ban_thanh_cong"):e.lcZ(7,13,"lang_auto_da_luu_thanh_cong_chua_xuat_ban")," \u{1f389} "),e.xp6(6),e.hij(" ",e.lcZ(10,15,"lang_auto_copy_link_ben_duoi_va_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai")," "),e.xp6(2),e.Q6J("ngIf",1==t.type),e.xp6(1),e.Q6J("ngIf",0==t.type),e.xp6(1),e.Q6J("ngIf",0==t.type),e.xp6(11),e.hij(" ",e.lcZ(25,17,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(6),e.hij(" ",e.lcZ(31,19,"lang_auto_ve_trang_quan_ly_file")," ")}}let pO=(()=>{class n extends W.Q{constructor(t,i){super(),this.documentConfigService=t,this.activeRoute=i,this.backToLink="",this.linkDocument="",this.listLinkDocument=[],this.linkIframeDocument="",this.successListHomework=[],this.type=0}createLinkHomeworkObjs(t,i){var a=[];let s=this.commonService.getCurrentDomain();return t.forEach(r=>{var l=i.filter(d=>d.id==r.classroomId);if(l&&l.length>0)a.push({classObj:l[0],homeworkObj:r,linkDocument:`${s}/bai-tap/${r.hashId}`});else{var c={id:0,name:this.commonService.myTranslateInstant("lang_auto_tu_do")??"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{}};a.push({classObj:c,homeworkObj:r,linkDocument:`${s}/bai-tap/${r.hashId}`})}}),a}getHomeworkInfoByHashId(t){var i=this.commonService.myParseJson(t);this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(i?.[0]??"",i).subscribe(a=>{if(1==a.success){this.homeworkObj=a.data?.homeworkObj,this.successListHomework=a.data?.successHomeworkObjs??[],this.listLinkDocument=this.createLinkHomeworkObjs(a.data?.successHomeworkObjs??[],a.data?.classroomObjs??[]);let s=this.commonService.getCurrentDomain();this.linkDocument=`${s}/bai-tap/${this.homeworkObj?.hashId}`,this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}getExamInfoByHashId(t){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(t).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj;let a=this.commonService.getCurrentDomain();this.linkDocument=`${a}/de-thi/${this.examObj?.hashId}`,this.linkIframeDocument=`<iframe width="100%" height="900" src="${this.linkDocument}"  title="${this.examObj?.name}" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`,this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}copyLinkToClipboard(t){return t}copyLinkToIframe(){return this.linkIframeDocument}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getRouterLinkByType(){let t=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString(1==this.type?"/admin/testbank/homework-results-list/"+this.homeworkObj?.classroomId+"/"+this.homeworkObj?.id+"/"+this.homeworkObj?.hashId:"/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",t?"?"+decodeURIComponent(t):"")}getBackData(t,i){let a="";if(t.includes("backto")){let s=t.substring(t.lastIndexOf("backto"));s.includes("shareType")&&(a=i?s.substring(s.lastIndexOf("data")):s)}return a}backToDocumentManager(){let t=this.getBackData(this.backToLink,!0);this.myNavigationWithQueryString(1==this.type?"/admin/testbank/document-management/1/0/1":`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`,t?"?"+decodeURIComponent(t):"")}ngOnInit(){let t=this.commonService.getMyQueryParam("backto"),i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.type=Number(this.commonService.getMyParam(this.activeRoute,"type"))??0,1==this.type?this.getHomeworkInfoByHashId(i):this.getExamInfoByHashId(i),this.backToLink=t??"/admin/testbank/document-management/0/0/1",this.commonService.translateMetaData({title:"lang_cms_publish_document_title",description:"lang_cms_publish_document_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.Cq),e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-publish-document"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"text-md","text-center"],["class","box mx-auto mt-5 p-3","style","max-width: 560px",4,"ngIf"],["class","box p-3 text-center mt-5 intro-x mx-auto","style","max-width: 560px;",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","publish-document-WN-MSecHgq",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","publish-document-zSqq-4hFwf",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-md"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","publish-document-pWkyuGbsV",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"azt-copy","relative","mt-5","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","publish-document-OwwIaPHrMx",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"box","p-3","text-center","mt-5","intro-x","mx-auto",2,"max-width","560px"],[1,"tex-md"],[1,"overflow-y-auto","mt-3","rounded-md","text-left","border","border-slate-200","dark:border-darkmode-300","p-3"],[1,"whitespace-nowrap",2,"padding","1rem"],[1,"text-right","mt-3"],["azt-track-service","publish-document--zJK66x3oF",1,"copy-code","btn","py-1","mr-auto","px-2","btn-outline-secondary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","file","data-lucide","file",1,"lucide","lucide-file","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,lO,1,0,"azt-loading-effect",1),e.YNc(2,_O,32,21,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,ea.i3,jt.Q,pn._,re.bT],encapsulation:2}),n})();var Pm=S(50006);let hO=(()=>{class n{constructor(t,i,a){this.globalService=t,this.commonService=i,this.examPageResultService=a}getExamStatisticObjs(t,i,a){return this.globalService.startIntervalFunc(t),this.getExamAndQuestionObjsForStatistic(t,i,a??0)}getExamAndQuestionObjsForStatistic(t,i,a){return new bi.y(s=>{this.examPageResultService.apiExamPageResultGetObjV2Get(i,a).subscribe(r=>{if(1==r.success){var l=r.data?.serverSecond??0,c=r.data?.examObj;let y=r.data?.totalQuestion??c?.countQuestion;var d=r.data?.classroomWithAvatarAndStudentObjs??new Array,f=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(r.data?.questionObjs))??new Array;this.getAllExamMarksObjsForStatistic(t,[],i,"",O=>{if(1==O.success){var N=[],I={};O.resultObjs?.forEach(z=>{z.examResultObjs&&z.examResultObjs.length>0&&z.examResultObjs.forEach($=>{N.push($.id??0),I.hasOwnProperty($.id??0)||(I[$.id??0]=$)})}),this.getAllAnswerObjsForStatistic(N,i,z=>{if(1==z.success){var $=[];d.forEach(te=>{te.classroomObj&&$.push(te.classroomObj)});var Y=[];z.resultObjs?.forEach(te=>{if(te.id&&I.hasOwnProperty(te.id)){var K={...I[te.id],correctQuestionIds:te.correctQuestionIds,wrongQuestionIds:te.wrongQuestionIds,resultQuestionIds:te.resultQuestionIds};Y.push(K)}}),f.length>0?(s.next({status:200,success:1,data:{examObj:c,classroomObjs:$,totalQuestion:y,classroomObjsWithStudentObjs:d,questionObjs:f,resultQuestionObjs:Y,resultObjs:O.resultObjs??[],curServerTime:l,totalAttended:r.data?.totalAttended},message:"successful"}),s.complete()):(s.next({status:200,success:0,data:null,message:"lang_core_there_are_no_question_in_exam"}),s.complete())}else s.next({status:z.code,success:0,data:null,message:z.message??""}),s.complete()})}else s.next({status:O.code,success:0,data:null,message:O.message??""}),s.complete()})}else s.next({status:r.code,success:0,data:null,message:r.message??""}),s.complete()})})}getAllExamMarksObjsForStatistic(t,i,a,s,r){this.examPageResultService.apiExamPageResultGetObjsV2Get(a,"statistic",s).subscribe(l=>{1==l.success?(l.data?.objs&&i.push(...l.data.objs),l.data?.nextPage?this.globalService.isStopIntervalFunc(t)?r({code:200,resultObjs:i,success:1,message:"successful"}):setTimeout(()=>{this.getAllExamMarksObjsForStatistic(t,i,a,l.data?.nextPage??"",r)},300):r({code:200,resultObjs:i,success:1,message:"successful"})):r({code:l.code,resultObjs:[],success:0,message:l.message??""})})}getAllAnswerObjsForStatistic(t,i,a){this.examPageResultService.apiExamPageResultGetQuestionStatisticByExamResultIdsPost(i,{examResultIds:t}).subscribe(s=>{if(1==s.success){var r=[];s.data?.objs&&r.push(...s.data.objs),a({code:200,resultObjs:r,success:1,message:"successful"})}else a({code:s.code,resultObjs:void 0,success:0,message:s.message??""})})}findExamResultOfStudent(t,i){var a=[];return t.length>1?t.forEach(s=>{s.testStatus&&(s.studentId==i||null==s.studentId)&&a.push(s)}):1==t.length&&(t[0].studentId==i||null==t[0].studentId)&&a.push(t[0]),a}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ns.U),e.LFG(Rt.v),e.LFG(Ve.DR))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dl extends ee.v{constructor(){super(...arguments),this.countTested=0,this.countTrue=0,this.countNotAnswer=0,this.countAttended=0,this.countFalse=0,this.studentWhoFalse=[],this.studentWhoNotAnswer=[]}}class jm{constructor(){this.listResult=[],this.listQuestions=[]}}var xu=S(90320);function gO(n,o){1&n&&(e.TgZ(0,"div",3)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),e.xp6(3),e.hij("",e.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function fO(n,o){1&n&&(e.TgZ(0,"div",6)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}const xO=function(n){return{active:n}};function bO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3);return e.KtG(r.handleChangeClassStatistic(s))}),e.TgZ(1,"button",16),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(1),e.Q6J("ngClass",e.VKq(4,xO,i.idClassObj==t.id)),e.xp6(1),e.hij(" ",e.lcZ(3,2,null!==(a=t.name)&&void 0!==a?a:"lang_auto_thi_sinh_tu_do")," ")}}function vO(n,o){if(1&n&&(e.TgZ(0,"ul",13),e.YNc(1,bO,4,6,"li",14),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.classroomObjs)}}function yO(n,o){1&n&&(e.TgZ(0,"div",17),e._UZ(1,"div",18),e.qZA())}function wO(n,o){if(1&n&&e._UZ(0,"azt-standalone-question",65),2&n){const t=e.oxw().$implicit,i=e.oxw().index,a=e.oxw(3);e.Q6J("startQuestionIndex",a.examObj.startQuestionIndex)("expandInfo",a.examObj.expandInfo)("hideQuestionLabel",!0)("follower",a.followerRenderQuest)("isMobile",a.isMobile)("examObj",a.examObj)("question",t)("index",i)}}function CO(n,o){if(1&n&&(e.TgZ(0,"div",60)(1,"div",61)(2,"div",62)(3,"mat-icon",63),e._uU(4," close "),e.qZA()()(),e.TgZ(5,"div"),e.YNc(6,wO,1,8,"azt-standalone-question",64),e.qZA()()),2&n){const t=e.oxw(4);e.xp6(6),e.Q6J("ngIf",t.examObj)}}function kO(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.Dn7(2,1,e.xi3(3,5,(t.countNotAnswer+t.countFalse)/t.countAttended*100,"1.0-2"),",","."),"%")}}function TO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"0%"),e.qZA())}function AO(n,o){if(1&n&&e._UZ(0,"img",68),2&n){const t=e.oxw().$implicit;e.Q6J("nameImages",t.nameImages)}}function OO(n,o){1&n&&(e.TgZ(0,"span",71),e._uU(1," , "),e.qZA())}function SO(n,o){if(1&n&&(e.TgZ(0,"span",69),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,OO,2,0,"span",70)),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(2).$implicit;let r;e.xp6(1),e.Oqu(null!==(r=i.fullName)&&void 0!==r?r:e.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),e.xp6(2),e.Q6J("ngIf",a!=s.studentWhoFalse.length-1)}}const EO=function(){return{}};function MO(n,o){if(1&n&&(e.ynx(0),e.YNc(1,AO,1,1,"img",66),e.YNc(2,SO,4,4,"ng-template",null,67,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(5);let s;e.xp6(1),e.Q6J("ngIf",t.nameImages&&!a.commonService.isEmptyObj(null!==(s=t.nameImages)&&void 0!==s?s:e.DdM(2,EO)))("ngIfElse",i)}}function IO(n,o){if(1&n&&(e.ynx(0),e.YNc(1,MO,4,3,"ng-container",41),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.studentWhoFalse)}}function LO(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function ZO(n,o){if(1&n&&e._UZ(0,"img",68),2&n){const t=e.oxw().$implicit;e.Q6J("nameImages",t.nameImages)}}function PO(n,o){1&n&&(e.TgZ(0,"span",71),e._uU(1," , "),e.qZA())}function jO(n,o){if(1&n&&(e.TgZ(0,"span",69),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,PO,2,0,"span",70)),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(2).$implicit;let r;e.xp6(1),e.Oqu(null!==(r=i.fullName)&&void 0!==r?r:e.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),e.xp6(2),e.Q6J("ngIf",a!=s.studentWhoNotAnswer.length-1)}}function DO(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ZO,1,1,"img",66),e.YNc(2,jO,4,4,"ng-template",null,67,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.nameImages&&!a.commonService.isEmptyObj(t.nameImages))("ngIfElse",i)}}function NO(n,o){if(1&n&&(e.ynx(0),e.YNc(1,DO,4,2,"ng-container",41),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.studentWhoNotAnswer)}}function QO(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function qO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",23)(3,"span",47),e._uU(4),e.qZA()()(),e.TgZ(5,"td")(6,"div",48)(7,"span",47),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"button",49),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,l=e.MAs(15),c=e.oxw(3);return e.KtG(c.onContextMenu(a,r,l))}),e.O4$(),e.TgZ(11,"svg",50),e._UZ(12,"path",51)(13,"circle",52),e.qZA()()(),e.kcU(),e.TgZ(14,"context-menu",null,53),e.YNc(16,CO,7,1,"ng-template",54),e.qZA()(),e.TgZ(17,"td",55),e._uU(18),e.qZA(),e.TgZ(19,"td",55),e._uU(20),e.qZA(),e.TgZ(21,"td",55),e._uU(22),e.qZA(),e.TgZ(23,"td",55),e._uU(24),e.qZA(),e.TgZ(25,"td",55),e._uU(26),e.qZA(),e.TgZ(27,"td",55),e.YNc(28,kO,4,8,"div",56),e.YNc(29,TO,2,0,"div",56),e.qZA(),e.TgZ(30,"td",55),e.YNc(31,IO,2,1,"ng-container",57),e.YNc(32,LO,2,3,"ng-template",null,58,e.W1O),e.qZA(),e.TgZ(34,"td",55),e.YNc(35,NO,2,1,"ng-container",57),e.YNc(36,QO,2,3,"ng-template",null,59,e.W1O),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.MAs(33),s=e.MAs(37);e.xp6(4),e.Oqu(i+1),e.xp6(4),e.AsE("",e.lcZ(9,14,"lang_testbank_statistical_question")," ",t.id,""),e.xp6(10),e.Oqu(t.countAttended),e.xp6(2),e.Oqu(t.countTested),e.xp6(2),e.Oqu(t.countNotAnswer),e.xp6(2),e.Oqu(t.countTrue),e.xp6(2),e.Oqu(t.countFalse),e.xp6(2),e.Q6J("ngIf",0!=t.countAttended),e.xp6(1),e.Q6J("ngIf",0==t.countAttended),e.xp6(2),e.Q6J("ngIf",t.studentWhoFalse.length<=50)("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",t.studentWhoNotAnswer.length<=50)("ngIfElse",s)}}function FO(n,o){1&n&&e._UZ(0,"span",72)}function UO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"table",20)(2,"thead",21)(3,"tr")(4,"th",22)(5,"div",23),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"th",24)(9,"div",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortIDQuestion())}),e._uU(10),e.ALo(11,"mytranslate"),e.O4$(),e.TgZ(12,"svg",26),e._UZ(13,"polyline",27)(14,"line",28)(15,"polyline",29)(16,"line",30),e.qZA()()(),e.kcU(),e.TgZ(17,"th",31)(18,"div",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountAttended())}),e._uU(19),e.ALo(20,"mytranslate"),e.O4$(),e.TgZ(21,"svg",26),e._UZ(22,"polyline",27)(23,"line",28)(24,"polyline",29)(25,"line",30),e.qZA()()(),e.kcU(),e.TgZ(26,"th",31)(27,"div",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountTested())}),e._uU(28),e.ALo(29,"mytranslate"),e.O4$(),e.TgZ(30,"svg",26),e._UZ(31,"polyline",27)(32,"line",28)(33,"polyline",29)(34,"line",30),e.qZA()()(),e.kcU(),e.TgZ(35,"th",31)(36,"div",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountNotAnswer())}),e._uU(37),e.ALo(38,"mytranslate"),e.O4$(),e.TgZ(39,"svg",26),e._UZ(40,"polyline",27)(41,"line",28)(42,"polyline",29)(43,"line",30),e.qZA()()(),e.kcU(),e.TgZ(44,"th",31)(45,"div",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountTrue())}),e._uU(46),e.ALo(47,"mytranslate"),e.O4$(),e.TgZ(48,"svg",26),e._UZ(49,"polyline",27)(50,"line",28)(51,"polyline",29)(52,"line",30),e.qZA()()(),e.kcU(),e.TgZ(53,"th",31)(54,"div",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountFalse())}),e._uU(55),e.ALo(56,"mytranslate"),e.O4$(),e.TgZ(57,"svg",26),e._UZ(58,"polyline",27)(59,"line",28)(60,"polyline",29)(61,"line",30),e.qZA()()(),e.kcU(),e.TgZ(62,"th",37)(63,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortFalse())}),e._uU(64),e.ALo(65,"mytranslate"),e.O4$(),e.TgZ(66,"svg",26),e._UZ(67,"polyline",27)(68,"line",28)(69,"polyline",29)(70,"line",30),e.qZA()()(),e.kcU(),e.TgZ(71,"th",39)(72,"span"),e._uU(73),e.ALo(74,"mytranslate"),e.qZA()(),e.TgZ(75,"th",40)(76,"span"),e._uU(77),e.ALo(78,"mytranslate"),e.qZA()()()(),e.TgZ(79,"tbody"),e.YNc(80,qO,38,16,"tr",41),e.qZA()(),e.TgZ(81,"div",42)(82,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);let s;return e.KtG(a.getDataForClassroomStatistical(null!==(s=a.idClassObj)&&void 0!==s?s:-1,!0))}),e.YNc(83,FO,1,0,"span",44),e._uU(84),e.ALo(85,"mytranslate"),e.O4$(),e.TgZ(86,"svg",45),e._UZ(87,"polyline",46),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",e.lcZ(7,14,"lang_auto_STT")," "),e.xp6(4),e.hij(" ",e.lcZ(11,16,"lang_testbank_statistical_questions")," "),e.xp6(9),e.hij(" ",e.lcZ(20,18,"lang_testbank_statistical_total_number_exam")," "),e.xp6(9),e.hij(" ",e.lcZ(29,20,"lang_testbank_statistical_number_student_did")," "),e.xp6(9),e.hij(" ",e.lcZ(38,22,"lang_testbank_statistical_number_student_do_not")," "),e.xp6(9),e.hij(" ",e.lcZ(47,24,"lang_testbank_statistical_number_student_right")," "),e.xp6(9),e.hij(" ",e.lcZ(56,26,"lang_testbank_statistical_number_student_wrong")," "),e.xp6(9),e.hij(" ",e.lcZ(65,28,"lang_testbank_statistical_student_not_done")," "),e.xp6(9),e.hij(" ",e.lcZ(74,30,"lang_testbank_statistical_student_who_wrong")," "),e.xp6(4),e.hij(" ",e.lcZ(78,32,"lang_testbank_statistical_student_who_not_answer")," "),e.xp6(3),e.Q6J("ngForOf",t.listQuestion),e.xp6(2),e.Q6J("disabled",t.isLoadMore||t.countTotalQuestion<50*t.page),e.xp6(1),e.Q6J("ngIf",t.isLoadMore),e.xp6(1),e.hij("\xa0 ",e.lcZ(85,34,"lang_auto_xem_them"),"\xa0 ")}}function RO(n,o){if(1&n&&(e.TgZ(0,"div",7)(1,"div",8),e.YNc(2,vO,2,1,"ul",9),e.TgZ(3,"div",10),e.YNc(4,yO,2,0,"div",11),e.YNc(5,UO,88,36,"div",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.classroomObjs&&t.classroomObjs.length>0),e.xp6(2),e.Q6J("ngIf",t.changeClassLoading),e.xp6(1),e.Q6J("ngIf",!t.changeClassLoading)}}let BO=(()=>{class n extends W.Q{onContextMenu(t,i,a){t&&(this.contextMenuService.show(a,{value:i,x:t?.clientX+15,y:t?.clientY+15}),t?.preventDefault(),t?.stopPropagation())}countEssayQuestion(){let t=0;return this.questionObjs.forEach(i=>{this.answerTypeService.isEssayAnswer(i.answerType)&&t++}),t}readyData(t){this.listQuestion=t,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((i,a)=>i.countAttended>0&&a.countAttended>0?(a.countNotAnswer+a.countFalse)/a.countAttended*100-(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(){if(this.dataStatistical&&this.examObj){let t=this.dataStatistical;this.examObj.id=t.id,this.examObj.name=t.name??"";let i=this.commonService.castJsonToClassObjs(jm,JSON.stringify(t.classrooms));this.classroomObjs=i??[],this.getDataForClassroomStatistical(this.idClassObj?this.idClassObj:this.classroomObjs[0].id??-1,!1)}else this.doneLoadingEmit.emit(!1)}getDataForClassroomStatistical(t,i){i?(this.isLoadMore=!0,this.page+=1):(this.initStatusObj(),this.countTotalQuestion=0),this.idClassObj=t,this.examPageResultService.apiExamPageResultListQuestionStatisticGet(this.examObj?.id??0,t,this.page,50).subscribe(a=>{if(a.success&&a.data){let s=[];a.data.objs?.forEach((r,l)=>{let c=this.commonService.castJsonToClassObj(dl,JSON.stringify(r.question))??new dl;c.countAttended=r.totalTest??0,c.countTrue=r.totalCorrect??0,c.countNotAnswer=r.totalNotAnswered??0,c.countTested=r.totalAnswered??0,c.countFalse=r.totalWrong??0,c.countTrue=r.totalCorrect??0,c.indexQuestion=l,c.studentWhoFalse=r.wrongStudents??[],c.studentWhoNotAnswer=r.notAnsweredStudents??[],this.questionObjs.push(c)}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(r=>{(this.answerTypeService.isOneChoiceAnswer(r.answerType)||this.answerTypeService.isFillAnswer(r.answerType))&&s.push(r),this.countTotalQuestion++}),this.readyData(s)}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(a.message??"")})}handleChangeClassStatistic(t){this.idClassObj=t.id,this.page=1,this.changeClassLoading=!0,this.questionObjs=[],this.getDataForClassroomStatistical(this.idClassObj??-1,!1)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((t,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(t.countAttended>0?(t.countNotAnswer+t.countFalse)/t.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((t,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(t.countAttended>0?(t.countNotAnswer+t.countFalse)/t.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortIDQuestion(){this.checkSortType.idQuestion=!this.checkSortType.idQuestion,this.checkSortType.idQuestion?this.listQuestion.sort((t,i)=>(t.id??0)-(i.id??0)):this.listQuestion.sort((t,i)=>(t.id??0)-(i.id??0)).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((t,i)=>t.countAttended-i.countAttended):this.listQuestion.sort((t,i)=>t.countAttended-i.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((t,i)=>t.countTested-i.countTested):this.listQuestion.sort((t,i)=>t.countTested-i.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((t,i)=>t.countNotAnswer-i.countNotAnswer):this.listQuestion.sort((t,i)=>t.countNotAnswer-i.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((t,i)=>t.countTrue-i.countTrue):this.listQuestion.sort((t,i)=>t.countTrue-i.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((t,i)=>t.countFalse-i.countFalse):this.listQuestion.sort((t,i)=>t.countFalse-i.countFalse).reverse()}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic(),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.dialog=t,this.contextMenuService=i,this.docxService=a,this.answerTypeService=s,this.examPageResultService=r,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.idClassObj=0,this.listQuestion=[],this.isCheckData=!1,this.changeClassLoading=!1,this.isMobile=this.commonService.isMobileOrTable(),this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new Xa.G,this.form=new p.nJ({}),this.classroomObjs=[],this.questionObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1,idQuestion:!1},this.countTotalQuestion=0,this.page=1,this.isLoadMore=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(u.Lk),e.Y36(xu.x),e.Y36($o.T),e.Y36(Ve.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-question-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:3,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto","overflow-y-hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",1,"nav-link","w-full","py-2",3,"ngClass"],[1,"flex","justify-center","pb-5"],["role","status",1,"spinner-border"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-kkZu13iI5D",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-xrD2etExg-",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-y6cuGZ-SC8",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-seyRna-GRR",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-LND-UYgzgn",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-kM4o8UGqyP",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-X1HptCCAQA",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","20.5vw"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","18.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-xwuEU3k_LH","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-1b7d1GbqkQ",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],["popUp",""],["contextMenuItem","","style","position: absolute"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notShowWhoFalse",""],["notShowWhoNotAnswer",""],[1,"box"],[1,"grid","grid-cols-12"],[1,"col-span-12","py-1",2,"text-align","end","padding-right","10px","cursor","context-menu"],[2,"color","#333333","vertical-align","middle","font-size","18px","width","18px","height","18px","cursor","pointer"],["style","margin-bottom: 0px",3,"startQuestionIndex","expandInfo","hideQuestionLabel","follower","isMobile","examObj","question","index",4,"ngIf"],[2,"margin-bottom","0px",3,"startQuestionIndex","expandInfo","hideQuestionLabel","follower","isMobile","examObj","question","index"],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(t,i){1&t&&(e.YNc(0,gO,7,6,"div",0),e.YNc(1,fO,4,3,"div",1),e.YNc(2,RO,6,3,"div",2)),2&t&&(e.Q6J("ngIf",1==i.isCheckData),e.xp6(1),e.Q6J("ngIf",1!=i.isCheckData),e.xp6(1),e.Q6J("ngIf",1!=i.isCheckData))},dependencies:[M.mk,M.sg,M.O5,Di.lW,vn.Hw,ll.L,Ta.O,u.GI,u.n5,M.JJ,re.bT,re.AS],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})();function zO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",9)(1,"button",10),e.NdJ("click",function(){const s=e.CHM(t).index,r=e.oxw();return e.KtG(r.chooseTapClass(s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();let s;e.xp6(1),e.Gre("nav-link w-full py-2 ",a.indexClassInArray==i?"active":"",""),e.xp6(1),e.hij(" ",e.lcZ(3,4,null!==(s=null==t.classObj?null:t.classObj.name)&&void 0!==s?s:"lang_auto_tu_do")," ")}}function JO(n,o){1&n&&(e.TgZ(0,"div",11)(1,"div",12)(2,"span",13),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_cms_common_loading"),"..."))}function HO(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"tbody")(1,"tr")(2,"td",29)(3,"p",30),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function KO(n,o){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.fullName)}}function $O(n,o){if(1&n&&(e.TgZ(0,"td",35),e._UZ(1,"img",39),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("nameImages",t.nameImages)}}function YO(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"formatOnlyDateByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.birthday))}}function GO(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function WO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function VO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function XO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function eS(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function tS(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.mark," ")}}function nS(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",35),e._uU(2),e.qZA(),e.YNc(3,KO,2,1,"td",36),e.YNc(4,$O,2,1,"td",36),e.TgZ(5,"td",35),e.YNc(6,YO,3,3,"div",26),e.YNc(7,GO,2,3,"ng-template",null,37,e.W1O),e.qZA(),e.TgZ(9,"td",38),e.YNc(10,WO,3,3,"div",31),e.YNc(11,VO,3,3,"div",31),e.YNc(12,XO,3,3,"div",31),e.YNc(13,eS,3,3,"div",31),e.YNc(14,tS,2,1,"div",31),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(8);e.xp6(2),e.Oqu(i+1),e.xp6(1),e.Q6J("ngIf",!t.nameImages||!t.nameImages.url),e.xp6(1),e.Q6J("ngIf",t.nameImages&&t.nameImages.url),e.xp6(2),e.Q6J("ngIf",null!=t.birthday)("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",t.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.isNotTested),e.xp6(1),e.Q6J("ngIf",t.isMarked)}}function iS(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw(4);let i;e.xp6(1),e.hij(" ",e.Dn7(2,1,e.xi3(3,5,null!==(i=t.statisticObj[t.indexClassInArray].avgMark)&&void 0!==i?i:0,"1.0-2"),",",".")," ")}}function oS(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"tbody"),e.YNc(1,nS,15,10,"tr",32),e.TgZ(2,"tr",33)(3,"td",34),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"td",35),e.YNc(7,iS,4,8,"div",31),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",null==t.statisticObj[t.indexClassInArray]?null:t.statisticObj[t.indexClassInArray].studentsWithMark),e.xp6(3),e.Oqu(e.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),e.xp6(3),e.Q6J("ngIf",t.statisticObj.length>0&&t.statisticObj[t.indexClassInArray])}}function aS(n,o){if(1&n&&(e.O4$(),e.YNc(0,oS,8,5,"tbody",31)),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.indexClassInArray>-1)}}function sS(n,o){1&n&&e._UZ(0,"span",45)}function rS(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",40)(1,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.chooseTapClass(a.indexClassInArray,!0))}),e.YNc(2,sS,1,0,"span",42),e._uU(3),e.ALo(4,"mytranslate"),e.O4$(),e.TgZ(5,"svg",43),e._UZ(6,"polyline",44),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.loadingChangeClassroom||t.getStudentLength()<50*t.page),e.xp6(1),e.Q6J("ngIf",t.loadingChangeClassroom),e.xp6(1),e.hij("\xa0 ",e.lcZ(4,3,"lang_auto_xem_them"),"\xa0 ")}}function lS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr")(4,"th",17)(5,"div",18),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"th",17)(9,"div",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortFullNameStudent(a.indexClassInArray))}),e._uU(10),e.ALo(11,"mytranslate"),e.O4$(),e.TgZ(12,"svg",20),e._UZ(13,"polyline",21)(14,"line",22)(15,"polyline",23)(16,"line",24),e.qZA()()(),e.kcU(),e.TgZ(17,"th",17)(18,"div",18),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()(),e.TgZ(21,"th",17)(22,"div",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortStudentByPoint(a.indexClassInArray))}),e._uU(23),e.ALo(24,"mytranslate"),e.O4$(),e.TgZ(25,"svg",20),e._UZ(26,"polyline",21)(27,"line",22)(28,"polyline",23)(29,"line",24),e.qZA()()()()(),e.YNc(30,HO,6,3,"tbody",26),e.YNc(31,aS,1,1,"ng-template",null,27,e.W1O),e.qZA(),e.YNc(33,rS,7,5,"div",28),e.qZA()}if(2&n){const t=e.MAs(32),i=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,7,"lang_auto_STT")," "),e.xp6(4),e.hij(" ",e.lcZ(11,9,"lang_first_and_last_name")," "),e.xp6(9),e.hij(" ",e.lcZ(20,11,"lang_birthday")," "),e.xp6(4),e.hij(" ",e.lcZ(24,13,"lang_point")," "),e.xp6(7),e.Q6J("ngIf",i.indexClassInArray>-1&&i.statisticObj.length>0&&0==(null==i.statisticObj[i.indexClassInArray].studentsWithMark?null:i.statisticObj[i.indexClassInArray].studentsWithMark.length)||-1==i.indexClassInArray&&0==i.freeStudentList.length)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.getStudentLength())}}let cS=(()=>{class n extends W.Q{chooseTapClass(t,i,a){this.indexClassInArray!=t&&(this.page=1,this.indexClassInArray=t),i&&(this.loadingChangeClassroom=!0,this.page++),this.statisticObj[t]&&this.statisticObj[t].classObj?.id?this.examPageResultService.apiExamPageResultListTranscriptsGet(this.examObj?.id??0,this.statisticObj[t].classObj?.id,void 0,void 0,1,50*this.page,a??void 0).subscribe(s=>{s.success&&s.data?(this.statisticObj[t].studentsWithMark=this.convertStudentResults(s.data.obj?.results??[]),this.statisticObj[t].avgMark=s.data.obj?.averageMark??0,this.readyData(t,!!a),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!0)):i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}):i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}convertStudentResults(t){let i=[];return t.forEach(a=>{let s={id:a.studentId?.toString(),resultId:a.id,userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt};i.push(s)}),i}getStudentLength(){return this.statisticObj[this.indexClassInArray]&&this.statisticObj[this.indexClassInArray].studentsWithMark?this.statisticObj[this.indexClassInArray].studentsWithMark?.length??0:0}getDataStatistic(){if(this.initStatusObj(),this.dataStatistical&&this.examObj){let t=this.dataStatistical;this.examObj.id=t.id,this.examObj.name=t.name??"",t.classrooms?(t.classrooms.forEach(i=>{let a={classObj:{...i,teacherId:0,countStudents:0,showAddStudent:0,grade:0,name:i.name??""},studentsWithMark:[]};this.statisticObj.push(a)}),this.chooseTapClass(0)):this.doneLoadingEmit.emit(!1)}else this.doneLoadingEmit.emit(!1)}readyData(t,i){let a=this.commonService.myClone(this.statisticObj[t].studentsWithMark)??[];if(this.statisticObj[t].studentsWithMark=this.checkStatusStudent(this.statisticObj[t].classObj&&0==this.statisticObj[t].classObj?.sortType?i?a:this.sortService.sortFirstNameStudents(a):i?a:this.sortService.sortArrayByMultipleObjectKeyAsc(a,"pos","id")),this.statisticObj[t].studentsWithMark)for(let s=0;s<(this.statisticObj[t].studentsWithMark?.length??0);s++)this.statisticObj[t].studentsWithMark[s].isMarked||(this.statisticObj[t].studentsWithMark[s].mark=-1);this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(t){var i=[];return t.forEach(a=>{a.confirmedAt&&""!=a.confirmedAt&&a.resultId&&a.resultId>0?a.isMarked=!0:a.resultId&&a.resultId>0&&(!a.confirmedAt||""==a.confirmedAt)?a.isNotMarked=!0:a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||0!=a.status?a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||-1!=a.status?null==a.startedTest&&(a.isNotTested=!0):a.isNotSubmit=!0:a.isOnTest=!0,i.push(a)}),i}calcAvgClassroomMark(t){var i=0,a=0;return t.forEach(s=>{s.isMarked&&(i++,a+=s.mark??0)}),i>0?(a/i).toFixed(2):0}goToStudentList(t){let i=`/admin/testbank/statistic/${this.examObj?.categoryId??0}/${this.examObj?.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${t.classObj?.id}`,"?backto="+encodeURIComponent(i))}sortFullNameStudent(t){this.checkSortObj.fullName=!this.checkSortObj.fullName,this.checkSortObj.fullName?this.chooseTapClass(t,!1,"fullname"):this.chooseTapClass(t,!1)}sortStudentByPoint(t){this.checkSortObj.point=!this.checkSortObj.point,this.checkSortObj.point?this.chooseTapClass(t,!1,"mark"):this.chooseTapClass(t,!1)}_sortByPoint(t){return t.sort((i,a)=>Number(i.mark)-Number(a.mark)),t}constructor(t,i,a,s){super(),this.dialog=t,this.sortService=i,this.globalService=a,this.examPageResultService=s,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:!1,point:!1},this.loadingChangeClassroom=!1,this.page=1}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(is.K),e.Y36(Ns.U),e.Y36(Ve.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-table-score-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:11,vars:6,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],[1,"tab-content","overflow-x-auto","mt-5",2,"overflow-y","hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-ZNru2_q8UiD","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"flex","justify-center","pb-5"],["role","status",1,"spinner-border"],[1,"sr-only"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-1KLvUodz_gh",1,"flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block",2,"cursor","pointer"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["azt-track-service","table-score-ItfC-iAX4HX",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["class","text-center mt-3",4,"ngIf"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"],[1,"text-center","mt-3"],["azt-track-service","table-score-RqXWm0zMM","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),e.YNc(7,zO,4,6,"li",5),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,JO,5,3,"div",7),e.YNc(10,lS,34,15,"div",8),e.qZA()()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_bang_diem")," "),e.xp6(5),e.Q6J("ngForOf",i.statisticObj),e.xp6(2),e.Q6J("ngIf",i.loadingChangeClassroom),e.xp6(1),e.Q6J("ngIf",!i.loadingChangeClassroom))},dependencies:[M.sg,M.O5,Di.lW,ll.L,M.JJ,re.bT,re.AS,re._I],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),n})();var Dm=S(36922),Je=S(70937);function uS(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",19),e._UZ(1,"path",20)(2,"polyline",21)(3,"path",22)(4,"path",23)(5,"path",24)(6,"path",25),e.qZA())}function dS(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",26),e._uU(2,"\xa0"),e.qZA())}function mS(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_statistical_export_file_excel_success")))}function _S(n,o){1&n&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_statistical_export_file_excel_error")))}let pS=(()=>{class n extends W.Q{exportExcel(){let t=this.commonService.getFormObj(this.form);if(0==t.statisticalCheck&&0==t.listQuestionCheck&&0==t.tableScoreCheck){let i=this.commonService.myTranslateInstant("lang_auto_khong_the_de_trong_tat_ca_cac_lua_chon_dot");alert(i)}else this.loadingDownload=!0,this.isExportSuccess=void 0,this.getData(this.examId).then(i=>{setTimeout(()=>{if(1==i){t.statisticalCheck&&this.AddStatisticToSheet(this.Statistic.statisticClass??[],this.Statistic.statisticNoClass??[]),t.tableScoreCheck&&this.AddTableScoreToSheet(this.TableScore.statisticClass??[],this.TableScore.statisticNoClass??[]),t.listQuestionCheck&&this.AddListQuestionToSheet(this.ListQuest.attended??0,this.ListQuest.listQuestions??[],this.ListQuest.listClassStatistic??[]);try{var a;if(a=null!=this.examObj?this.commonService.createFileNameExportFile(["Thong ke de thi",this.examObj.name??""])+".xlsx":this.commonService.createFileNameExportFile(["Thong ke de thi"])+".xlsx",this.commonService.isMobileWebview(void 0)){var s=Je.write(this.wb,{bookType:"xlsx",bookSST:!0,type:"array"});const l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});this.shareFileFlutterService.shareFileWithBlob(l,a)}else Je.writeFile(this.wb,a);this.isExportSuccess=!0,this.loadingDownload=!1,this.wb=Je.utils.book_new()}catch(r){console.log(r),this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=Je.utils.book_new()}}else this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=Je.utils.book_new()},0)})}AddStatisticToSheet(t,i){let a=this.commonService.myTranslateInstant("lang_auto_lop")??"",s=this.commonService.myTranslateInstant("lang_auto_so_hoc_sinh")??"",r=this.commonService.myTranslateInstant("lang_auto_tren_tb")??"(>5)",l=this.commonService.myTranslateInstant("lang_auto_dang_ky")??"",c=this.commonService.myTranslateInstant("lang_auto_du_thi")??"",d=this.commonService.myTranslateInstant("lang_auto_amount")??"",y=1,O=Je.utils.json_to_sheet([{A:a,B:s,C:"",D:"<1",E:"",F:"<2",G:"",H:"<3",I:"",J:"<4",K:"",L:"<5",M:"",N:"<6",O:"",P:"<7",Q:"",R:"<8",S:"",T:"<9",U:"",V:"<=10",W:"",X:r+"(>= 5)",Y:""},{A:"",B:l,C:c,D:d,E:"%",F:d,G:"%",H:d,I:"%",J:d,K:"%",L:d,M:"%",N:d,O:"%",P:d,Q:"%",R:d,S:"%",T:d,U:"%",V:d,W:"%",X:d,Y:"%"}],{skipHeader:!0});const N_e_c=24;for(let K=0;K<=N_e_c;++K)O[Je.utils.encode_cell({c:K,r:0})].s=this.style_header;if(null==t&&null==i){let K=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke")??"";Je.utils.sheet_add_json(O,[{A:K}],{skipHeader:!0,origin:-1})}else{t?.forEach(pe=>{null!=pe.classObj&&(Je.utils.sheet_add_json(O,[{A:pe.classObj.name,B:pe.registerCount,C:pe.testedCount,D:pe.markPercent[0].count,E:this._decimalPipe.transform(pe.markPercent[0].percent,"1.0-2"),F:pe.markPercent[1].count,G:this._decimalPipe.transform(pe.markPercent[1].percent,"1.0-2"),H:pe.markPercent[2].count,I:this._decimalPipe.transform(pe.markPercent[2].percent,"1.0-2"),J:pe.markPercent[3].count,K:this._decimalPipe.transform(pe.markPercent[3].percent,"1.0-2"),L:pe.markPercent[4].count,M:this._decimalPipe.transform(pe.markPercent[4].percent,"1.0-2"),N:pe.markPercent[5].count,O:this._decimalPipe.transform(pe.markPercent[5].percent,"1.0-2"),P:pe.markPercent[6].count,Q:this._decimalPipe.transform(pe.markPercent[6].percent,"1.0-2"),R:pe.markPercent[7].count,S:this._decimalPipe.transform(pe.markPercent[7].percent,"1.0-2"),T:pe.markPercent[8].count,U:this._decimalPipe.transform(pe.markPercent[8].percent,"1.0-2"),V:pe.markPercent[9].count,W:this._decimalPipe.transform(pe.markPercent[9].percent,"1.0-2"),X:pe.markPercent[10].count,Y:this._decimalPipe.transform(pe.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),y++)}),i?.forEach(pe=>{if((pe.registerCount??0)>0){let je=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do");Je.utils.sheet_add_json(O,[{A:je,B:pe.registerCount,C:pe.testedCount,D:pe.markPercent[0].count,E:this._decimalPipe.transform(pe.markPercent[0].percent,"1.0-2"),F:pe.markPercent[1].count,G:this._decimalPipe.transform(pe.markPercent[1].percent,"1.0-2"),H:pe.markPercent[2].count,I:this._decimalPipe.transform(pe.markPercent[2].percent,"1.0-2"),J:pe.markPercent[3].count,K:this._decimalPipe.transform(pe.markPercent[3].percent,"1.0-2"),L:pe.markPercent[4].count,M:this._decimalPipe.transform(pe.markPercent[4].percent,"1.0-2"),N:pe.markPercent[5].count,O:this._decimalPipe.transform(pe.markPercent[5].percent,"1.0-2"),P:pe.markPercent[6].count,Q:this._decimalPipe.transform(pe.markPercent[6].percent,"1.0-2"),R:pe.markPercent[7].count,S:this._decimalPipe.transform(pe.markPercent[7].percent,"1.0-2"),T:pe.markPercent[8].count,U:this._decimalPipe.transform(pe.markPercent[8].percent,"1.0-2"),V:pe.markPercent[9].count,W:this._decimalPipe.transform(pe.markPercent[9].percent,"1.0-2"),X:pe.markPercent[10].count,Y:this._decimalPipe.transform(pe.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),y++}});let K=this.totalPoint(t,i),X=this.totalPercent(t,i),ye=this.totalStudentRegister(t,i),ae=this.totalStudentTakeExam(t,i),oe=this.commonService.myTranslateInstant("lang_auto_tong_upper");Je.utils.sheet_add_json(O,[{A:oe,B:ye,C:ae,D:K[0],E:this._decimalPipe.transform(X[0],"1.0-2"),F:K[1],G:this._decimalPipe.transform(X[1],"1.0-2"),H:K[2],I:this._decimalPipe.transform(X[2],"1.0-2"),J:K[3],K:this._decimalPipe.transform(X[3],"1.0-2"),L:K[4],M:this._decimalPipe.transform(X[4],"1.0-2"),N:K[5],O:this._decimalPipe.transform(X[5],"1.0-2"),P:K[6],Q:this._decimalPipe.transform(X[6],"1.0-2"),R:K[7],S:this._decimalPipe.transform(X[7],"1.0-2"),T:K[8],U:this._decimalPipe.transform(X[8],"1.0-2"),V:K[9],W:this._decimalPipe.transform(X[9],"1.0-2"),X:K[10],Y:this._decimalPipe.transform(X[10],"1.0-2")}],{skipHeader:!0,origin:-1}),y++}O["!cols"]=[{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9}],O["!rows"]=[{hpt:28},{hpt:27}],O["!merges"]=[{s:{r:0,c:1},e:{r:0,c:2}},{s:{r:0,c:3},e:{r:0,c:4}},{s:{r:0,c:5},e:{r:0,c:6}},{s:{r:0,c:7},e:{r:0,c:8}},{s:{r:0,c:9},e:{r:0,c:10}},{s:{r:0,c:11},e:{r:0,c:12}},{s:{r:0,c:13},e:{r:0,c:14}},{s:{r:0,c:15},e:{r:0,c:16}},{s:{r:0,c:17},e:{r:0,c:18}},{s:{r:0,c:19},e:{r:0,c:20}},{s:{r:0,c:21},e:{r:0,c:22}},{s:{r:0,c:23},e:{r:0,c:24}}];let Y_s_c=0,Y_e_c=24,Y_e_r=y-1,V_s_c=0,V_e_c=24;for(let K=1;K<=Y_e_r;++K)for(let X=Y_s_c;X<=Y_e_c;++X)O[Je.utils.encode_cell({c:X,r:K})].s=this.style_body;for(let K=V_s_c;K<=V_e_c;++K)O[Je.utils.encode_cell({c:K,r:y})].s=this.style_footer;let te=this.commonService.myTranslateInstant("lang_auto_thong_ke_pho_diem");Je.utils.book_append_sheet(this.wb,O,te&&te?.length>31?te?.substring(0,27)+"...":te)}AddTableScoreToSheet(t,i){var a;let s=this.commonService.myTranslateInstant("lang_auto_stt")??"",r=this.commonService.myTranslateInstant("lang_auto_ho_va_ten")??"",l=this.commonService.myTranslateInstant("lang_auto_gioi_tinh")??"",c=this.commonService.myTranslateInstant("lang_auto_ngay_sinh")??"",d=this.commonService.myTranslateInstant("lang_point")??"",f=this.commonService.myTranslateInstant("lang_auto_cau"),y=this.commonService.myTranslateInstant("lang_combine_exam_component")??"";if(0==t.length&&0==i.length){let Y=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_thanh_gia_lam_de"),V=this.commonService.myTranslateInstant("lang_auto_bang_diem");a=Je.utils.json_to_sheet([{A:Y,B:"",C:"",D:"",E:""}],{skipHeader:!0}),Je.utils.book_append_sheet(this.wb,a,V&&V?.length>31?V?.substring(0,27)+"...":V)}else{var O=[{width:8},{width:22},{width:34},{width:13},{width:13}];for(let V=0;V<this.limitQuestions;V++)O.push({width:13});var N=[{s:{r:0,c:0},e:{r:0,c:4}}],I=0,z=[],$=[];if(a=Je.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0!=t.length&&t.forEach(V=>{let te=[{A:V.classObj?.name,B:"",C:"",D:"",E:""},{A:s,B:r,C:c,D:l,E:d}],K=5,X=0,ye=0;this.examObj?.subjectMarks&&(te[0]={...te[0],F:"",G:"",H:""},te[1]={...te[1],F:y+"1",G:y+"2",H:y+"3"},K+=3);for(let oe=0;oe<this.limitQuestions;oe++){K>=26&&(K=0,X++);let pe="";0==X&&0==ye?pe=this.keyColExcelArr[K]:(X>26&&(X=1,ye++),ye>0&&(pe+=this.keyColExcelArr[ye-1]),pe+=this.keyColExcelArr[X-1]+""+this.keyColExcelArr[K]),te[0][pe]="",te[1][pe]=f+" "+(oe+(this.examObj?.startQuestionIndex??0)<9?"0"+(oe+(this.examObj?.startQuestionIndex??1)):oe+(this.examObj?.startQuestionIndex??1)),K++}if(z.push(I+=2),N.push({s:{r:I-1,c:0},e:{r:I-1,c:4}}),a=Je.utils.sheet_add_json(a,te,{skipHeader:!0,origin:-1}),0==V.studentsWithMark?.length){let pe=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),B:"",C:"",D:"",E:""}];N.push({s:{r:I+1,c:0},e:{r:I+1,c:4}}),Je.utils.sheet_add_json(a,pe,{skipHeader:!0,origin:-1}),I++}else{let oe=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",pe=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",je=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",Le=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",st=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",rt=this.commonService.myTranslateInstant("lang_auto_nam")??"",sn=this.commonService.myTranslateInstant("lang_auto_nu")??"";V.studentsWithMark?.forEach((ve,Nt)=>{let rn,At=this.timeService.formatOnlyDateByUserUnit(ve.birthday)?this.timeService.formatOnlyDateByUserUnit(ve.birthday):void 0;rn=ve.isNotMarked?oe:ve.isOnTest?pe:ve.isNotSubmit?je:ve.isNotTested?Le:ve.mark??"",I++;let Qt=[{A:Nt+1,B:ve.fullName,C:null==ve.birthday?st:`${At}`,D:`${1==ve.gender?rt:sn}`,E:`${rn}`}],Ot=5;if(this.examObj?.subjectMarks){let mt={};mt=ve.subjectMarks?{F:ve.subjectMarks[0],G:ve.subjectMarks[1],H:ve.subjectMarks[2]}:{F:"",G:"",H:""},Qt[0]={...Qt[0],...mt},Ot+=3}if(ve.answeredQuestions){let mt=0,vt=0;for(let Lt=0;Lt<ve.answeredQuestions?.length;Lt++){Ot>=26&&(Ot=0,mt++);let qt="";0==mt&&0==vt?qt=this.keyColExcelArr[Ot]:(mt>26&&(mt=1,vt++),vt>0&&(qt+=this.keyColExcelArr[vt-1]),qt+=this.keyColExcelArr[mt-1]+""+this.keyColExcelArr[Ot]),Qt[0][qt]=this.checkAnswerQuestionTableExport(ve.answeredQuestions[Lt]),Ot++}}Je.utils.sheet_add_json(a,Qt,{skipHeader:!0,origin:-1})})}let ae=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";Je.utils.sheet_add_json(a,[{A:ae,B:"",C:"",D:"",E:this.calcAvgClassroomMark(V.studentsWithMark??[])}],{skipHeader:!0,origin:-1}),$.push(I+1),N.push({s:{r:(I+=3)-2,c:0},e:{r:I-2,c:3}}),Je.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}),0!=i.length){let V=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_da_tham_gia_nhung_chua_chon_lop"),te=[{A:V,B:"",C:"",D:"",E:""},{A:s,B:r,C:c,D:l,E:d}],K=5,X=0,ye=0;this.examObj?.subjectMarks&&(te[0]={...te[0],F:"",G:"",H:""},te[1]={...te[1],F:y+"1",G:y+"2",H:y+"3"},K+=3);for(let ae=0;ae<this.limitQuestions;ae++){K>=26&&(K=0,X++);let oe="";0==X&&0==ye?oe=this.keyColExcelArr[K]:(X>26&&(X=1,ye++),ye>0&&(oe+=this.keyColExcelArr[ye-1]),oe+=this.keyColExcelArr[X-1]+""+this.keyColExcelArr[K]),te[0][oe]="",te[1][oe]=f+" "+(ae+(this.examObj?.startQuestionIndex??0)<9?"0"+(ae+(this.examObj?.startQuestionIndex??1)):ae+(this.examObj?.startQuestionIndex??1)),K++}if(N.push({s:{r:(I+=2)-1,c:0},e:{r:I-1,c:4}}),z.push(I),a=Je.utils.sheet_add_json(a,te,{skipHeader:!0,origin:-1}),null==i)V=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),Je.utils.sheet_add_json(a,[{A:V,B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1});else{let ae=1,oe=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",pe=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",je=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",Le=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",st=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",rt=this.commonService.myTranslateInstant("lang_auto_nam")??"",sn=this.commonService.myTranslateInstant("lang_auto_nu")??"";Object.keys(i).forEach(Nt=>{let Qt,At=i[Nt],rn=this.timeService.formatOnlyDateByUserUnit(At.birthday)?this.timeService.formatOnlyDateByUserUnit(At.birthday):void 0;Qt=At.isNotMarked?oe:At.isOnTest?pe:At.isNotSubmit?je:At.isNotTested?Le:At.mark??"";let Ot=[{A:ae,B:At.fullName,C:null==rn?st:`${rn}`,D:`${1==At.gender?rt:sn}`,E:Qt}],mt=5;if(this.examObj?.subjectMarks){let vt={};vt=At.subjectMarks?{F:At.subjectMarks[0],G:At.subjectMarks[1],H:At.subjectMarks[2]}:{F:"",G:"",H:""},Ot[0]={...Ot[0],...vt},mt+=3}if(At.answeredQuestions){let vt=0,Lt=0;for(let qt=0;qt<At.answeredQuestions?.length;qt++){mt>=26&&(mt=0,vt++);let nn="";0==vt&&0==Lt?nn=this.keyColExcelArr[mt]:(vt>26&&(vt=1,Lt++),Lt>0&&(nn+=this.keyColExcelArr[Lt-1]),nn+=this.keyColExcelArr[vt-1]+""+this.keyColExcelArr[mt]),Ot[0][nn]=this.checkAnswerQuestionTableExport(At.answeredQuestions[qt]),mt++}}Je.utils.sheet_add_json(a,Ot,{skipHeader:!0,origin:-1}),ae++,I++});let ve=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";Je.utils.sheet_add_json(a,[{A:ve,B:"",C:"",D:"",E:this.calcAvgClassroomMark(i)}],{skipHeader:!0,origin:-1}),$.push(I+1),N.push({s:{r:I+=1,c:0},e:{r:I,c:3}}),Je.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}}a["!cols"]=O,a["!merges"]=N;for(let V=0;V<z.length;V++){a[Je.utils.encode_cell({c:0,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[Je.utils.encode_cell({c:1,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[Je.utils.encode_cell({c:2,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[Je.utils.encode_cell({c:3,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[Je.utils.encode_cell({c:4,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[Je.utils.encode_cell({c:0,r:z[V]})].s=this.style_header,a[Je.utils.encode_cell({c:1,r:z[V]})].s=this.style_header,a[Je.utils.encode_cell({c:2,r:z[V]})].s=this.style_header,a[Je.utils.encode_cell({c:3,r:z[V]})].s=this.style_header,a[Je.utils.encode_cell({c:4,r:z[V]})].s=this.style_header,a[Je.utils.encode_cell({c:0,r:$[V]})].s=this.style_footer,a[Je.utils.encode_cell({c:1,r:$[V]})].s=this.style_footer,a[Je.utils.encode_cell({c:2,r:$[V]})].s=this.style_footer,a[Je.utils.encode_cell({c:3,r:$[V]})].s=this.style_footer,a[Je.utils.encode_cell({c:4,r:$[V]})].s=this.style_footer;for(let K=0;K<this.limitQuestions+(this.examObj?.subjectMarks?3:0);K++)a[Je.utils.encode_cell({c:4,r:z[V]-1})]&&(a[Je.utils.encode_cell({c:4,r:z[V]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}}),a[Je.utils.encode_cell({c:5+K,r:z[V]})]&&(a[Je.utils.encode_cell({c:5+K,r:z[V]})].s=this.style_header),a[Je.utils.encode_cell({c:5+K,r:$[V]})]&&(a[Je.utils.encode_cell({c:5+K,r:$[V]})].s=this.style_footer);let te={s:{c:0,r:z[V]+1},e:{c:4+this.limitQuestions+(this.examObj?.subjectMarks?3:0),r:$[V]}};for(let K=te.s.r;K<=te.e.r;++K)for(let X=te.s.c;X<=te.e.c;++X)a[Je.utils.encode_cell({c:X,r:K})]&&(a[Je.utils.encode_cell({c:X,r:K})].s=this.style_body)}let Y=this.commonService.myTranslateInstant("lang_auto_bang_diem");Je.utils.book_append_sheet(this.wb,a,Y&&Y?.length>31?Y?.substring(0,27)+"...":Y)}}AddListQuestionToSheet(t,i,a){var s,r=0,l=[{s:{r:0,c:0},e:{r:0,c:8}}],d=[],f=[];if(s=Je.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0==t){let y=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),O=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export"),N=[{A:y,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];r++,d.push(r),l.push({s:{r:r-1,c:0},e:{r:r-1,c:8}}),s=Je.utils.sheet_add_json(s,N,{skipHeader:!0,origin:-1}),Je.utils.book_append_sheet(this.wb,s,O&&O?.length>31?O?.substring(0,27)+"...":O)}else{let y=this.commonService.myTranslateInstant("lang_auto_cau_hoi"),O=this.commonService.myTranslateInstant("lang_auto_tong_so_hs_du_thi"),N=this.commonService.myTranslateInstant("lang_auto_so_hs_da_lam"),I=this.commonService.myTranslateInstant("lang_auto_so_hs_chua_lam"),z=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_dung"),$=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_sai"),Y=this.commonService.myTranslateInstant("lang_auto_ty_le_hoc_sinh_khong_hoan_thanh_cau"),V=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_lam_sai"),te=this.commonService.myTranslateInstant("lang_testbank_statistical_student_who_not_answer"),K=this.commonService.myTranslateInstant("lang_auto_thong_ke_theo_cau_hoi"),X=this.commonService.myTranslateInstant("lang_auto_cau");a.length>0&&a.forEach(oe=>{let pe=[{A:oe.name,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:y,B:O,C:N,D:I,E:z,F:$,G:Y,H:V,I:te}];if(d.push(r+=2),l.push({s:{r:r-1,c:0},e:{r:r-1,c:8}}),s=Je.utils.sheet_add_json(s,pe,{skipHeader:!0,origin:-1}),0==oe.listQuestions?.length){let Le=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];r++,l.push({s:{r:r+1,c:0},e:{r:r+1,c:8}}),Je.utils.sheet_add_json(s,Le,{skipHeader:!0,origin:-1})}else oe.listQuestions?.forEach((je,Le)=>{let rt=[{A:`${X} ${je.id}`,B:je.countAttended,C:je.countTested,D:je.countNotAnswer,E:je.countTrue,F:je.countFalse,G:0!=je.countAttended?`${((je.countNotAnswer+je.countFalse)/je.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(je.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(je.studentWhoNotAnswer).join(", ")}];Je.utils.sheet_add_json(s,rt,{skipHeader:!0,origin:-1}),r++});f.push(r),r+=2,Je.utils.sheet_add_json(s,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1})});let ye=[{A:K,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:y,B:O,C:N,D:I,E:z,F:$,G:Y,H:V,I:te}];l.push({s:{r:(r+=2)-1,c:0},e:{r:r-1,c:8}}),d.push(r),s=Je.utils.sheet_add_json(s,ye,{skipHeader:!0,origin:-1}),i.forEach((oe,pe)=>{Je.utils.sheet_add_json(s,[{A:`${X} ${oe.id}`,B:oe.countAttended,C:oe.countTested,D:oe.countNotAnswer,E:oe.countTrue,F:oe.countFalse,G:0!=oe.countAttended?`${((oe.countNotAnswer+oe.countFalse)/oe.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(oe.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(oe.studentWhoNotAnswer).join(", ")}],{skipHeader:!0,origin:-1}),r++}),f.push(r),Je.utils.sheet_add_json(s,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1}),s["!cols"]=[{wch:15.25},{wch:10.63},{wch:6.25},{wch:8.25},{wch:9},{wch:7.25},{wch:16.75},{wch:60},{wch:60}],s["!merges"]=l;for(let oe=0;oe<d.length;oe++){s[Je.utils.encode_cell({c:0,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:1,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:2,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:3,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:4,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:5,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:6,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:7,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:8,r:d[oe]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[Je.utils.encode_cell({c:0,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:1,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:2,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:3,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:4,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:5,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:6,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:7,r:d[oe]})].s=this.style_header,s[Je.utils.encode_cell({c:8,r:d[oe]})].s=this.style_header;let pe={s:{c:0,r:d[oe]+1},e:{c:8,r:f[oe]}};for(let je=pe.s.r;je<=pe.e.r;++je)for(let Le=pe.s.c;Le<=pe.e.c;++Le)s[Je.utils.encode_cell({c:Le,r:je})].s=this.style_body}let ae=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export");Je.utils.book_append_sheet(this.wb,s,ae&&ae?.length>31?ae?.substring(0,27)+"...":ae)}}getNameStudentWhoFalse(t){var i=[];return t.forEach(a=>{a.fullName&&i.push(a.fullName)}),i.length>50?[this.commonService.myTranslateInstant("lang_testbank_statistical_student_not_show_who_wrong")??""]:i}checkStatusStudent(t,i){var a=[];return t.forEach(s=>{s.confirmedAt&&""!=s.confirmedAt&&s.resultId&&s.resultId>0?s.isMarked=!0:s.resultId&&s.resultId>0&&(!s.confirmedAt||""==s.confirmedAt)?s.isNotMarked=!0:s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||0!=s.status?s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||-1!=s.status?null==s.startedTest&&(s.isNotTested=!0):s.isNotSubmit=!0:s.isOnTest=!0,a.push(s)}),a}totalPercent(t,i){var a=[0,0,0,0,0,0,0,0,0,0,0,0];let s=0;for(let r=0;r<t.length;r++)t[r]&&(s+=t[r].testedCount??0,a[0]+=t[r].markPercent[0].count??0,a[1]+=t[r].markPercent[1].count??0,a[2]+=t[r].markPercent[2].count??0,a[3]+=t[r].markPercent[3].count??0,a[4]+=t[r].markPercent[4].count??0,a[5]+=t[r].markPercent[5].count??0,a[6]+=t[r].markPercent[6].count??0,a[7]+=t[r].markPercent[7].count??0,a[8]+=t[r].markPercent[8].count??0,a[9]+=t[r].markPercent[9].count??0,a[10]+=t[r].markPercent[10].count??0);for(let r=0;r<i.length;r++)i[r]&&(s+=i[r].testedCount??0,a[0]+=i[r].markPercent[0].count??0,a[1]+=i[r].markPercent[1].count??0,a[2]+=i[r].markPercent[2].count??0,a[3]+=i[r].markPercent[3].count??0,a[4]+=i[r].markPercent[4].count??0,a[5]+=i[r].markPercent[5].count??0,a[6]+=i[r].markPercent[6].count??0,a[7]+=i[r].markPercent[7].count??0,a[8]+=i[r].markPercent[8].count??0,a[9]+=i[r].markPercent[9].count??0,a[10]+=i[r].markPercent[10].count??0);for(let r=0;r<a.length;r++)a[r]=100*a[r]/s;return a}totalPoint(t,i){let a=[0,0,0,0,0,0,0,0,0,0,0];for(let s=0;s<t.length;s++)a[0]+=t[s].markPercent[0].count??0,a[1]+=t[s].markPercent[1].count??0,a[2]+=t[s].markPercent[2].count??0,a[3]+=t[s].markPercent[3].count??0,a[4]+=t[s].markPercent[4].count??0,a[5]+=t[s].markPercent[5].count??0,a[6]+=t[s].markPercent[6].count??0,a[7]+=t[s].markPercent[7].count??0,a[8]+=t[s].markPercent[8].count??0,a[9]+=t[s].markPercent[9].count??0,a[10]+=t[s].markPercent[10].count??0;for(let s=0;s<i.length;s++)a[0]+=i[s].markPercent[0].count??0,a[1]+=i[s].markPercent[1].count??0,a[2]+=i[s].markPercent[2].count??0,a[3]+=i[s].markPercent[3].count??0,a[4]+=i[s].markPercent[4].count??0,a[5]+=i[s].markPercent[5].count??0,a[6]+=i[s].markPercent[6].count??0,a[7]+=i[s].markPercent[7].count??0,a[8]+=i[s].markPercent[8].count??0,a[9]+=i[s].markPercent[9].count??0,a[10]+=i[s].markPercent[10].count??0;return a}totalStudentRegister(t,i){var a=0;for(let s=0;s<t.length;s++)a+=t[s].registerCount??0;for(let s=0;s<i.length;s++)a+=i[s].registerCount??0;return a}totalStudentTakeExam(t,i){var a=0;for(let s=0;s<t.length;s++)a+=t[s].testedCount??0;for(let s=0;s<i.length;s++)a+=i[s].testedCount??0;return a}calcAvgClassroomMark(t){var i=0,a=0;return t.forEach(s=>{s.isMarked&&(i++,a+=s.mark??0)}),i>0?(a/i).toFixed(2):0}convertStatisticalAllQuestion(t){var i=t.data?.questionObjs&&t.data.questionObjs.length>0?t.data.questionObjs:new Array,a=[];a=this.commonService.castJsonToClassObjs(dl,JSON.stringify(i))??[];var s=t.data?.resultQuestionObjs&&t.data?.resultQuestionObjs.length>0?t.data.resultQuestionObjs:new Array,r=this.dictionaryService.getDictionaryByGroupFieldTS(s,"userId"),l=[];this.examObj=t.data?.examObj;var c=t.data?.resultObjs&&t.data.resultObjs.length>0?t.data.resultObjs:new Array,d={},f=[],y={};t.data?.classroomObjsWithStudentObjs?.forEach($=>{$.classroomObj&&$.studentObjs&&$.studentObjs.forEach(Y=>{if(Y.parentId){this.commonService.filterArray(f,Y.parentId)||f.push(Y.parentId);var V=this.statisticalApiService.findExamResultOfStudent(r[Y.parentId]??[],Y.id??"0");if(V.length>0){var te=V[V.length-1],K=Y.parentId+"_"+(Y.id?Y.id:0)+"_"+te.id;d.hasOwnProperty(K)||(d[K]=Y),y.hasOwnProperty(K)||(y[K]=te)}}})}),c.forEach($=>{if($.parentId&&r.hasOwnProperty($.parentId??0)&&!this.commonService.filterArray(f,$.parentId??"0")){var Y=r[$.parentId][r[$.parentId].length-1];let te=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");$.fullName=$.fullName??te+"_"+Y.id;var V=$.parentId+"_"+($.id??0)+"_"+Y.id;d.hasOwnProperty(V)||(d[V]=$),y.hasOwnProperty(V)||(y[V]=Y)}});for(var O=0;O<a.length;O++)(this.answerTypeService.isOneChoiceAnswer(a[O].answerType)||this.answerTypeService.isFillAnswer(a[O].answerType))&&(a[O].countFalse=0,a[O].countNotAnswer=0,a[O].countTested=0,a[O].countAttended=0,a[O].countTrue=0,a[O].indexQuestion=O,a[O].studentWhoFalse=[],a[O].studentWhoNotAnswer=[]);for(var N in y)if(y.hasOwnProperty(N))for(O=0;O<a.length;O++)if(this.answerTypeService.isOneChoiceAnswer(a[O].answerType)||this.answerTypeService.isFillAnswer(a[O].answerType)){var I=y[N],z=d.hasOwnProperty(N)?d[N]:void 0;I.correctQuestionIds&&this.commonService.filterArray(I.correctQuestionIds,a[O].id)&&(a[O].countTrue++,a[O].countTested++),I.wrongQuestionIds&&this.commonService.filterArray(I.wrongQuestionIds,a[O].id)&&(a[O].countFalse++,a[O].countTested++,this.commonService.filterArray(a[O].studentWhoFalse,{studentId:z?.id??"0",parentId:z?.parentId,fullName:z?.fullName,nameImages:z?.nameImages})||a[O].studentWhoFalse?.push({studentId:z?.id??"0",parentId:z?.parentId,fullName:z?.fullName,nameImages:z?.nameImages})),I.resultQuestionIds&&this.commonService.filterArray(I.resultQuestionIds,a[O].id)&&a[O].countAttended++,this.commonService.filterArray(I.resultQuestionIds,a[O].id)&&!this.commonService.filterArray(I.correctQuestionIds,a[O].id)&&!this.commonService.filterArray(I.wrongQuestionIds,a[O].id)&&(a[O].countNotAnswer++,this.commonService.filterArray(a[O].studentWhoNotAnswer,{studentId:z?.id??"0",parentId:z?.parentId,fullName:z?.fullName,nameImages:z?.nameImages})||a[O].studentWhoNotAnswer?.push({studentId:z?.id??"0",parentId:z?.parentId,fullName:z?.fullName,nameImages:z?.nameImages}))}return a.forEach($=>{(this.answerTypeService.isOneChoiceAnswer($.answerType)||this.answerTypeService.isFillAnswer($.answerType))&&l.push($)}),l}getData(t){var i=this;return(0,$n.Z)(function*(){return new Promise((a,s)=>{let r=0,l=0,c=i.commonService.getFormObj(i.form);1==c.statisticalCheck&&0==i.statisticalLoaded&&r++,1==c.listQuestionCheck&&0==i.listQuestionLoaded&&r++,1==c.tableScoreCheck&&0==i.tableScoreLoaded&&r++,0==r&&a(!0),i.statisticalApiService.getExamStatisticObjs("statistic_export_excel",t,1).subscribe(d=>{if(1==c.statisticalCheck&&0==i.statisticalLoaded){if(1==d.success&&d.data){var f=d.data.classroomObjsWithStudentObjs&&d.data.classroomObjsWithStudentObjs.length>0?d.data.classroomObjsWithStudentObjs:new Array,y=d.data.resultObjs&&d.data.resultObjs.length>0?d.data.resultObjs:new Array,O=i.testedListApiService.mergeStudentWithAvatar(y??[]),N=[],I=[],z=i.dictionaryService.getDictionaryByFieldTS(O,"parentId");if(i.examObj=d.data.examObj,f.length>0){var $=[],Y=[];f.forEach(qt=>{var nn=[],In=[],so=0;qt.studentObjs?.forEach(ai=>{$.push(ai.parentId??"0");var gr=ai.parentId??"0";if(z.hasOwnProperty(gr)&&(Array.isArray(ai.examResultObjs)||(ai.examResultObjs=[]),ai.examResultObjs=i.statisticalApiService.findExamResultOfStudent(ai.examResultObjs?.concat(z[gr].examResultObjs??[])??[],ai.id??"0")),ai.examResultObjs&&ai.examResultObjs.length>0){var ua=ai.examResultObjs[ai.examResultObjs.length-1];ua.testStatus&&(ua.totalEssayQuestion?ua.confirmedAt&&In.push(ua):In.push(ua))}so++});for(var on=i.homeworkExamService.countMarks(In),_n=0;_n<on.length;_n++)nn.push({key:10==_n?"Avg":9==_n?"<= 10":"<"+(_n+1),count:on[_n],percent:i.homeworkExamService.calcPercent(on[_n],In.length)});N.push({classObj:qt.classroomObj,registerCount:so,testedCount:In.length>0?In.length:0,markPercent:nn})});var V=[],te=[];O.forEach(qt=>{if(!i.commonService.filterArray($,qt.parentId??"0")&&qt.examResultObjs&&qt.examResultObjs.length>0){var nn=i.statisticalApiService.findExamResultOfStudent(qt.examResultObjs,qt.id??"0");if(nn.length>0){var In=nn[nn.length-1];In.testStatus&&(In.totalEssayQuestion?In.confirmedAt&&te.push(In):te.push(In),Y.push(qt.parentId??"0"))}}});for(var K=i.homeworkExamService.countMarks(te),X=0;X<K.length;X++)V.push({key:10==X?"Avg":9==X?"<= 10":"<"+(X+1),count:K[X],percent:i.homeworkExamService.calcPercent(K[X],te.length)});te.length>0&&I.push({classObj:void 0,registerCount:Y.length>0?Y.length:0,testedCount:te.length>0?te.length:0,markPercent:V})}else{var ae=[],oe=[],pe=[];for(O.forEach(nn=>{if(nn.examResultObjs&&nn.examResultObjs.length>0){var In=i.statisticalApiService.findExamResultOfStudent(nn.examResultObjs,nn.id??"0");if(In.length>0){var so=In[In.length-1];so.testStatus&&(so.totalEssayQuestion?so.confirmedAt&&oe.push(so):oe.push(so),pe.push(nn.parentId??"0"))}}}),K=i.homeworkExamService.countMarks(oe),X=0;X<K.length;X++)ae.push({key:10==X?"Avg":9==X?"<= 10":"<"+(X+1),count:K[X],percent:i.homeworkExamService.calcPercent(K[X],oe.length)});oe.length>0&&I.push({classObj:void 0,registerCount:pe.length>0?pe.length:0,testedCount:oe.length>0?oe.length:0,markPercent:ae})}i.Statistic={statisticClass:N,statisticNoClass:I},i.statisticalLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==r&&a(!0)}if(1==c.listQuestionCheck&&0==i.listQuestionLoaded){if(1==d.success&&d.data){y=d.data.resultObjs&&d.data.resultObjs.length>0?d.data.resultObjs:new Array,O=i.testedListApiService.mergeStudentWithAvatar(y??[]);var je=i.commonService.castJsonToClassObjs(jm,JSON.stringify(d.data.classroomObjs))??[],Le={};d.data.classroomObjsWithStudentObjs?.forEach(on=>{on.classroomObj&&on.studentObjs&&(Le.hasOwnProperty(on.classroomObj?.id??0)||(Le[on.classroomObj?.id??0]=on.studentObjs))});for(var st=d.data.questionObjs&&d.data.questionObjs.length>0?d.data.questionObjs:new Array,rt=d.data?.resultQuestionObjs&&d.data?.resultQuestionObjs.length>0?d.data.resultQuestionObjs:new Array,sn=i.dictionaryService.getDictionaryByGroupFieldTS(rt,"userId"),ve=($=[],0);ve<je.length;ve++)Le.hasOwnProperty(je[ve].id??0)&&(je[ve].students=Le[je[ve].id??0]),je[ve].students?.forEach(on=>{if(on.parentId&&!i.commonService.filterArray($,on.parentId)&&$.push(on.parentId),on.parentId&&sn.hasOwnProperty(on.parentId)&&!i.commonService.filterArray(je[ve].listResult,sn[on.parentId][0])){var _n=i.statisticalApiService.findExamResultOfStudent(sn[on.parentId],on.id??"0");_n.length>0&&je[ve].listResult?.push(_n[_n.length-1])}});var Nt=!1,At={id:-1,name:i.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"),userTested:[],listResult:[],listQuestions:[]};O.forEach(on=>{if(!i.commonService.filterArray($,on.parentId??"0")){if(on.parentId&&sn.hasOwnProperty(on.parentId??0)){var _n=i.statisticalApiService.findExamResultOfStudent(sn[on.parentId],on.id??"0");if(_n.length>0){var ro=_n[_n.length-1];At.listResult.push(ro);let ai=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");on.fullName=on.fullName??ai+"_"+ro.id,At.userTested?.push(on)}}Nt=!0}}),Nt&&je.push(At);var rn=0;for(X=0;X<je.length;X++){var Qt=[];Qt=i.commonService.castJsonToClassObjs(dl,JSON.stringify(st))??[];for(var Ot=0;Ot<Qt.length;Ot++)(i.answerTypeService.isOneChoiceAnswer(Qt[Ot].answerType)||i.answerTypeService.isFillAnswer(Qt[Ot].answerType))&&(Qt[Ot].indexQuestion=Ot,je[X].listQuestions.push(Qt[Ot]));var mt=i.dictionaryService.getDictionaryByGroupFieldTS(je[X].listResult??[],"userId");for(var vt in mt)if(mt.hasOwnProperty(vt)){rn++;var Lt=-1==je[X].id?je[X].userTested?.filter(_n=>_n.parentId==mt[vt][0].userId):je[X].students?.filter(_n=>_n.parentId==mt[vt][0].userId);for(ve=0;ve<je[X].listQuestions.length;ve++)(i.answerTypeService.isOneChoiceAnswer(je[X].listQuestions[ve].answerType)||i.answerTypeService.isFillAnswer(je[X].listQuestions[ve].answerType))&&(mt[vt][0].correctQuestionIds&&i.commonService.filterArray(mt[vt][0].correctQuestionIds,je[X].listQuestions[ve].id)&&(je[X].listQuestions[ve].countTrue++,je[X].listQuestions[ve].countTested++),mt[vt][0].wrongQuestionIds&&i.commonService.filterArray(mt[vt][0].wrongQuestionIds,je[X].listQuestions[ve].id)&&(je[X].listQuestions[ve].countFalse++,je[X].listQuestions[ve].countTested++,Lt&&Lt.length>0&&(i.commonService.filterArray(je[X].listQuestions[ve].studentWhoFalse,{studentId:Lt[0].id,parentId:Lt[0].parentId,fullName:Lt[0].fullName,nameImages:Lt[0].nameImages})||je[X].listQuestions[ve].studentWhoFalse?.push({studentId:Lt[0].id,parentId:Lt[0].parentId,fullName:Lt[0].fullName,nameImages:Lt[0].nameImages}))),mt[vt][0].resultQuestionIds&&i.commonService.filterArray(mt[vt][0].resultQuestionIds,je[X].listQuestions[ve].id)&&je[X].listQuestions[ve].countAttended++,i.commonService.filterArray(mt[vt][0].resultQuestionIds,je[X].listQuestions[ve].id)&&!i.commonService.filterArray(mt[vt][0].correctQuestionIds,je[X].listQuestions[ve].id)&&!i.commonService.filterArray(mt[vt][0].wrongQuestionIds,je[X].listQuestions[ve].id)&&(je[X].listQuestions[ve].countNotAnswer++,Lt&&Lt.length>0&&(i.commonService.filterArray(je[X].listQuestions[ve].studentWhoNotAnswer,{studentId:Lt[0].id,parentId:Lt[0].parentId,fullName:Lt[0].fullName,nameImages:Lt[0].nameImages})||je[X].listQuestions[ve].studentWhoNotAnswer?.push({studentId:Lt[0].id,parentId:Lt[0].parentId,fullName:Lt[0].fullName,nameImages:Lt[0].nameImages}))))}}i.ListQuest={attended:rn,listQuestions:i.convertStatisticalAllQuestion(d),listClassStatistic:je},i.listQuestionLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==r&&a(!0)}if(1==c.tableScoreCheck&&0==i.tableScoreLoaded){if(1==d.success&&d.data){i.examObj=d.data?.examObj,i.limitQuestions=i.examObj?.countQuestion??0;let qt=i.homeworkExamService.hasEssayInExam(i.examObj?.examType??0),nn=d.data.classroomObjsWithStudentObjs&&d.data.classroomObjsWithStudentObjs.length>0?d.data.classroomObjsWithStudentObjs:new Array,In=d.data?.resultObjs&&d.data?.resultObjs.length>0?d.data.resultObjs:new Array,so=i.testedListApiService.mergeStudentWithAvatar(In??[]),on=[],_n={};so?.forEach(kn=>{let Sn=kn.parentId??"0";_n.hasOwnProperty(Sn)?_n[Sn].push(...kn.examResultObjs??[]):_n[Sn]=kn.examResultObjs??[],on=on.concat(_n[Sn])});let ro=[],ai=[],gr=[],ua=[];i.homeworkExamService.mustInClassroom(i.examObj?.whoAllow??0)&&nn.length>0&&nn.forEach(kn=>{let Sn=[];kn.studentObjs?.forEach(ei=>{let ti;ua.push(ei.parentId??"0");let fr=ei.parentId??"0";_n.hasOwnProperty(fr)&&(Array.isArray(ei.examResultObjs)||(ei.examResultObjs=[]),ei.examResultObjs=i.statisticalApiService.findExamResultOfStudent(_n[fr],ei.id??"0")),ei.examResultObjs&&ei.examResultObjs.length&&(ei.examResultObjs.length>1?ei.examResultObjs.forEach(Fp=>{Fp.testStatus&&(ti=Fp)}):ti=ei.examResultObjs[0]);let xr=ti?.testStatus??0,Dd=ti?.mark?ti.mark:0,Nd=ti?.id&&xr>0?ti.id:0,Qd=ti?.startedTest?ti.startedTest:null,br=ti?.confirmedAt?ti.confirmedAt:null,qd=ti?.answeredQuestions&&xr?ti.answeredQuestions:[],sc=ti?.subjectMarks?ti.subjectMarks:void 0,ij={...ei,userId:ei.userId?.toString(),subjectMarks:sc,mark:Dd,resultId:Nd,startedTest:Qd,confirmedAt:br,status:xr,answeredQuestions:qd};Sn.push(ij)}),ro.push({classObj:kn.classroomObj,studentsWithMark:Sn})}),In.forEach(kn=>{let Sn;if(!i.commonService.filterArray(ua,kn.parentId??"0")){kn.examResultObjs&&kn.examResultObjs.length&&(kn.examResultObjs&&kn.examResultObjs.length>1?kn.examResultObjs.forEach(sc=>{sc.testStatus&&(Sn=sc)}):Sn=kn.examResultObjs[0]);let ei=Sn?.testStatus??0,ti=Sn?.mark?Sn.mark:0,fr=Sn?.id&&ei>0?Sn.id:0,xr=Sn?.startedTest?Sn.startedTest:null,Dd=Sn?.confirmedAt?Sn.confirmedAt:null,Nd=Sn?.answeredQuestions&&ei?Sn.answeredQuestions:[],Qd=Sn?.subjectMarks?Sn.subjectMarks:void 0,br={...kn,userId:kn.userId?.toString(),subjectMarks:Qd,mark:ti,resultId:fr,startedTest:xr,confirmedAt:Dd,nameImages:kn.nameImages,nameImage:"",status:ei,answeredQuestions:Nd},qd=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");br.fullName=br.fullName??qd+"_"+fr,gr.push(br)}}),ai=gr;for(let kn of ro)kn.studentsWithMark=i.checkStatusStudent(kn.classObj&&0==kn.classObj.sortType?i.sortService.sortFirstNameStudents(kn.studentsWithMark??[]):i.sortService.sortArrayByMultipleObjectKeyAsc(i.commonService.myClone(kn.studentsWithMark)??[],"pos","id"),qt);i.TableScore={statisticClass:ro,statisticNoClass:i.checkStatusStudent(i.sortService.sortFirstNameStudents(ai),qt)},i.tableScoreLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==r&&a(!0)}})})})()}getObjKeyLength(t){return Object.keys(t).length}checkAnswerQuestionTableExport(t){let i="";return i=t.correct&&!t.isEssay?"lang_auto_dung":t.correct&&t.isEssay?"lang_auto_cau_TL":"lang_auto_sai",this.commonService.myTranslateInstant(i)??""}constructor(t,i,a,s,r,l,c,d,f,y,O,N,I){super(),this.statisticalApiService=t,this.testedListApiService=i,this.dialog=a,this.activeRoute=s,this.fb=r,this.sortService=l,this.homeworkExamService=c,this.globalService=d,this._decimalPipe=f,this.dictionaryService=y,this.answerTypeService=O,this.shareFileFlutterService=N,this.timeService=I,this.viewType=-1,this.form=new p.nJ({}),this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.examId=-1,this.limitQuestions=0,this.loadingDownload=!1,this.isExportSuccess=void 0,this.isOnApp=!1,this.style_first={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}},diagonal:{style:"thin",color:{rgb:"ffffffff"}},diagonalDown:!0},alignment:{vertical:"center",horizontal:"left",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"ff3c8dbc"}}},this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0}},this.style_footer={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0},fill:{patternType:"solid",fgColor:{rgb:"ffffffff"}}},this.statisticalLoaded=!1,this.listQuestionLoaded=!1,this.tableScoreLoaded=!1,this.wb=Je.utils.book_new(),this.Statistic={},this.ListQuest={},this.TableScore={}}ngOnInit(){this.form=this.fb.group({statisticalCheck:[!0],listQuestionCheck:[!0],tableScoreCheck:[!0]}),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.isOnApp=this.isMobileWebView}),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_export_excel1"),this.globalService.stopIntervalFunc("statistic_export_excel2"),this.globalService.stopIntervalFunc("statistic_export_excel3"),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(hO),e.Y36(nl.x),e.Y36(j.uw),e.Y36(T.gz),e.Y36(p.QS),e.Y36(is.K),e.Y36(Aa.j),e.Y36(Ns.U),e.Y36(M.JJ),e.Y36(Dm.E),e.Y36($o.T),e.Y36(Vo.g),e.Y36(Mt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-export-excel-new"]],inputs:{viewType:"viewType"},features:[e.qOj],decls:33,vars:20,consts:[[1,"intro-y","flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-y","mt-3"],[3,"formGroup"],[1,"box","p-5"],[1,"text-slate-500","border-b","border-slate-200","flex","mb-2","pb-2"],[1,"form-check","mt-2"],["name","statistical","formControlName","statisticalCheck","id","checkbox-switch-1","type","checkbox",1,"form-check-input"],["for","checkbox-switch-1",1,"form-check-label"],["id","checkbox-switch-2","name","listquestion","formControlName","listQuestionCheck","type","checkbox",1,"form-check-input"],["for","checkbox-switch-2",1,"form-check-label"],["id","checkbox-switch-3","name","tablescore","formControlName","tableScoreCheck","type","checkbox","value","",1,"form-check-input"],["for","checkbox-switch-3",1,"form-check-label"],[1,"mt-3"],["azt-track-service","export-excel-_De31aTGuF",1,"btn","btn-outline-primary","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","lucide w-4 h-4 mr-2","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(87, 141, 32);",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(204, 49, 80);",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h3"],["d","M8 17h3"],["d","M14 13h3"],["d","M14 17h3"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-md-8","mt-4",2,"color","rgb(87, 141, 32)"],[1,"col-md-8","mt-4",2,"color","rgb(204, 49, 80)"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6),e._UZ(9,"input",7),e.TgZ(10,"label",8),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",5)(14,"div",6),e._UZ(15,"input",9),e.TgZ(16,"label",10),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",6),e._UZ(21,"input",11),e.TgZ(22,"label",12),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()(),e.TgZ(25,"div",13)(26,"button",14),e.NdJ("click",function(){return i.exportExcel()}),e.YNc(27,uS,7,0,"svg",15),e.YNc(28,dS,3,0,"span",16),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.YNc(31,mS,3,3,"div",17),e.YNc(32,_S,3,3,"div",18),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,10,"lang_testbank_statistical_export_data_to_excel")," "),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(6),e.hij(" ",e.lcZ(12,12,"lang_testbank_statistical_score_spectrum_statistics")," "),e.xp6(6),e.hij(" ",e.lcZ(18,14,"lang_testbank_statistical_statistics_right_wrong")," "),e.xp6(6),e.hij(" ",e.lcZ(24,16,"lang_testbank_statistical_transcript")," "),e.xp6(4),e.Q6J("ngIf",1!=i.loadingDownload),e.xp6(1),e.Q6J("ngIf",1==i.loadingDownload),e.xp6(1),e.hij("",e.lcZ(30,18,"lang_testbank_statistical_export_file_excel")," "),e.xp6(2),e.Q6J("ngIf",!i.isOnApp&&!0===i.isExportSuccess),e.xp6(1),e.Q6J("ngIf",!i.isOnApp&&!1===i.isExportSuccess))},dependencies:[M.O5,p._Y,p.Wl,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],styles:["td[_ngcontent-%COMP%]{vertical-align:center!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:unset!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#3c8dbc;color:#fff}hr.solid[_ngcontent-%COMP%]{border-top:1px solid #bbb}input[type=checkbox].export-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;vertical-align:middle}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#252525;padding-top:1rem;padding-bottom:.5rem;padding-right:.5rem}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:19px;height:19px;margin:-2px 10px 0 0;vertical-align:middle;cursor:pointer}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:.5rem}@media only screen and (max-width: 720px){.export-block[_ngcontent-%COMP%]{text-align:center}}"]}),n})();function hS(n,o){1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),e.xp6(3),e.hij("",e.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function gS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s.goToStudentList(a))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.classObj.name))}}function fS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.registerCount)}}function xS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.testedCount)}}function bS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[0].count)}}function vS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[0].percent,"1.0-2"),",","."))}}function yS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[1].count)}}function wS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[1].percent,"1.0-2"),",","."))}}function CS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[2].count)}}function kS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[2].percent,"1.0-2"),",","."))}}function TS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[3].count)}}function AS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[3].percent,"1.0-2"),",","."))}}function OS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[4].count)}}function SS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[4].percent,"1.0-2"),",","."))}}function ES(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[5].count)}}function MS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[5].percent,"1.0-2"),",","."))}}function IS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[6].count)}}function LS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[6].percent,"1.0-2"),",","."))}}function ZS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[7].count)}}function PS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[7].percent,"1.0-2"),",","."))}}function jS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[8].count)}}function DS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[8].percent,"1.0-2"),",","."))}}function NS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[9].count)}}function QS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[9].percent,"1.0-2"),",","."))}}function qS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[10].count)}}function FS(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[10].percent,"1.0-2"),",","."))}}function US(n,o){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,gS,3,3,"td",52),e.YNc(2,fS,2,1,"td",53),e.YNc(3,xS,2,1,"td",53),e.YNc(4,bS,2,1,"td",53),e.YNc(5,vS,4,8,"td",53),e.YNc(6,yS,2,1,"td",53),e.YNc(7,wS,4,8,"td",53),e.YNc(8,CS,2,1,"td",53),e.YNc(9,kS,4,8,"td",53),e.YNc(10,TS,2,1,"td",53),e.YNc(11,AS,4,8,"td",53),e.YNc(12,OS,2,1,"td",53),e.YNc(13,SS,4,8,"td",53),e.YNc(14,ES,2,1,"td",53),e.YNc(15,MS,4,8,"td",53),e.YNc(16,IS,2,1,"td",53),e.YNc(17,LS,4,8,"td",53),e.YNc(18,ZS,2,1,"td",53),e.YNc(19,PS,4,8,"td",53),e.YNc(20,jS,2,1,"td",53),e.YNc(21,DS,4,8,"td",53),e.YNc(22,NS,2,1,"td",53),e.YNc(23,QS,4,8,"td",53),e.YNc(24,qS,2,1,"td",53),e.YNc(25,FS,4,8,"td",53),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj)}}function RS(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),e._uU(10),e.qZA(),e.TgZ(11,"div",12)(12,"div",13),e.O4$(),e.TgZ(13,"svg",14),e._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),e.qZA(),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(19,"div",18)(20,"div",19),e._uU(21),e.qZA()()(),e.TgZ(22,"div",12)(23,"div",13),e.O4$(),e.TgZ(24,"svg",14),e._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),e.qZA(),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(31,"div",18)(32,"div",19),e._uU(33),e.qZA(),e.TgZ(34,"div",22),e._uU(35),e.ALo(36,"replace"),e.ALo(37,"number"),e.qZA()()(),e.TgZ(38,"div",12)(39,"div",13),e.O4$(),e.TgZ(40,"svg",14),e._UZ(41,"path",23)(42,"path",24)(43,"path",25),e.qZA(),e._uU(44),e.ALo(45,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(46,"div",18)(47,"div",19),e._uU(48),e.qZA()()()()(),e.TgZ(49,"div",26)(50,"div",27)(51,"p",28),e._uU(52),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"div",18)(55,"span",19),e._uU(56),e.ALo(57,"replace"),e.ALo(58,"number"),e.qZA()()(),e.TgZ(59,"div",29)(60,"p",28),e._uU(61),e.ALo(62,"mytranslate"),e.qZA(),e.TgZ(63,"div",18)(64,"span",19),e._uU(65),e.qZA(),e.TgZ(66,"div",22),e._uU(67),e.ALo(68,"replace"),e.ALo(69,"number"),e.qZA()()(),e.TgZ(70,"div",27)(71,"p",30),e._uU(72),e.ALo(73,"mytranslate"),e.qZA(),e.TgZ(74,"div",18)(75,"span",19),e._uU(76),e.qZA(),e.TgZ(77,"div",31),e._uU(78),e.ALo(79,"replace"),e.ALo(80,"number"),e.qZA()()(),e.TgZ(81,"div",27)(82,"p",30),e._uU(83),e.ALo(84,"mytranslate"),e.qZA(),e.TgZ(85,"div",18)(86,"span",19),e._uU(87),e.qZA(),e.TgZ(88,"div",32),e._uU(89),e.ALo(90,"replace"),e.ALo(91,"number"),e.qZA()()()()()()(),e.TgZ(92,"div",33),e._UZ(93,"app-export-excel-new",34),e.qZA(),e.TgZ(94,"div",2)(95,"div",3)(96,"h3",4),e._uU(97),e.ALo(98,"mytranslate"),e.qZA()(),e.TgZ(99,"div",35)(100,"div",36)(101,"div",37)(102,"div",38),e._UZ(103,"div",39),e.qZA()()()()(),e.TgZ(104,"div",2)(105,"div",3)(106,"h3",4),e._uU(107),e.ALo(108,"mytranslate"),e.qZA()(),e.TgZ(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr")(114,"th",44),e._uU(115),e.ALo(116,"mytranslate"),e.qZA(),e.TgZ(117,"th",45),e._uU(118),e.ALo(119,"mytranslate"),e.qZA(),e.TgZ(120,"th",45),e._uU(121,"< 1"),e.qZA(),e.TgZ(122,"th",45),e._uU(123,"< 2"),e.qZA(),e.TgZ(124,"th",45),e._uU(125,"< 3"),e.qZA(),e.TgZ(126,"th",45),e._uU(127,"< 4"),e.qZA(),e.TgZ(128,"th",45),e._uU(129,"< 5"),e.qZA(),e.TgZ(130,"th",45),e._uU(131,"< 6"),e.qZA(),e.TgZ(132,"th",45),e._uU(133,"< 7"),e.qZA(),e.TgZ(134,"th",45),e._uU(135,"< 8"),e.qZA(),e.TgZ(136,"th",45),e._uU(137,"< 9"),e.qZA(),e.TgZ(138,"th",45),e._uU(139,"<= 10"),e.qZA(),e.TgZ(140,"th",45),e._uU(141),e.ALo(142,"mytranslate"),e.qZA()()(),e.TgZ(143,"tbody",46)(144,"tr"),e._UZ(145,"td"),e.TgZ(146,"td",47),e._uU(147),e.ALo(148,"mytranslate"),e.qZA(),e.TgZ(149,"td",47),e._uU(150),e.ALo(151,"mytranslate"),e.qZA(),e.TgZ(152,"td",48),e._uU(153),e.ALo(154,"mytranslate"),e.qZA(),e.TgZ(155,"td",48),e._uU(156,"%"),e.qZA(),e.TgZ(157,"td",48),e._uU(158),e.ALo(159,"mytranslate"),e.qZA(),e.TgZ(160,"td",48),e._uU(161,"%"),e.qZA(),e.TgZ(162,"td",48),e._uU(163),e.ALo(164,"mytranslate"),e.qZA(),e.TgZ(165,"td",48),e._uU(166,"%"),e.qZA(),e.TgZ(167,"td",48),e._uU(168),e.ALo(169,"mytranslate"),e.qZA(),e.TgZ(170,"td",48),e._uU(171,"%"),e.qZA(),e.TgZ(172,"td",48),e._uU(173),e.ALo(174,"mytranslate"),e.qZA(),e.TgZ(175,"td",48),e._uU(176,"%"),e.qZA(),e.TgZ(177,"td",48),e._uU(178),e.ALo(179,"mytranslate"),e.qZA(),e.TgZ(180,"td",48),e._uU(181,"%"),e.qZA(),e.TgZ(182,"td",48),e._uU(183),e.ALo(184,"mytranslate"),e.qZA(),e.TgZ(185,"td",48),e._uU(186,"%"),e.qZA(),e.TgZ(187,"td",48),e._uU(188),e.ALo(189,"mytranslate"),e.qZA(),e.TgZ(190,"td",48),e._uU(191,"%"),e.qZA(),e.TgZ(192,"td",48),e._uU(193),e.ALo(194,"mytranslate"),e.qZA(),e.TgZ(195,"td",48),e._uU(196,"%"),e.qZA(),e.TgZ(197,"td",48),e._uU(198),e.ALo(199,"mytranslate"),e.qZA(),e.TgZ(200,"td",48),e._uU(201,"%"),e.qZA(),e.TgZ(202,"td",48),e._uU(203),e.ALo(204,"mytranslate"),e.qZA(),e.TgZ(205,"td",48),e._uU(206,"%"),e.qZA()(),e.YNc(207,US,26,25,"tr",49),e.TgZ(208,"tr",50)(209,"td",51),e._uU(210),e.ALo(211,"mytranslate"),e.qZA(),e.TgZ(212,"td",51),e._uU(213),e.qZA(),e.TgZ(214,"td",51),e._uU(215),e.qZA(),e.TgZ(216,"td",51),e._uU(217),e.qZA(),e.TgZ(218,"td",51),e._uU(219),e.ALo(220,"replace"),e.ALo(221,"number"),e.qZA(),e.TgZ(222,"td",51),e._uU(223),e.qZA(),e.TgZ(224,"td",51),e._uU(225),e.ALo(226,"replace"),e.ALo(227,"number"),e.qZA(),e.TgZ(228,"td",51),e._uU(229),e.qZA(),e.TgZ(230,"td",51),e._uU(231),e.ALo(232,"replace"),e.ALo(233,"number"),e.qZA(),e.TgZ(234,"td",51),e._uU(235),e.qZA(),e.TgZ(236,"td",51),e._uU(237),e.ALo(238,"replace"),e.ALo(239,"number"),e.qZA(),e.TgZ(240,"td",51),e._uU(241),e.qZA(),e.TgZ(242,"td",51),e._uU(243),e.ALo(244,"replace"),e.ALo(245,"number"),e.qZA(),e.TgZ(246,"td",51),e._uU(247),e.qZA(),e.TgZ(248,"td",51),e._uU(249),e.ALo(250,"replace"),e.ALo(251,"number"),e.qZA(),e.TgZ(252,"td",51),e._uU(253),e.qZA(),e.TgZ(254,"td",51),e._uU(255),e.ALo(256,"replace"),e.ALo(257,"number"),e.qZA(),e.TgZ(258,"td",51),e._uU(259),e.qZA(),e.TgZ(260,"td",51),e._uU(261),e.ALo(262,"replace"),e.ALo(263,"number"),e.qZA(),e.TgZ(264,"td",51),e._uU(265),e.qZA(),e.TgZ(266,"td",51),e._uU(267),e.ALo(268,"replace"),e.ALo(269,"number"),e.qZA(),e.TgZ(270,"td",51),e._uU(271),e.qZA(),e.TgZ(272,"td",51),e._uU(273),e.ALo(274,"replace"),e.ALo(275,"number"),e.qZA(),e.TgZ(276,"td",51),e._uU(277),e.qZA(),e.TgZ(278,"td",51),e._uU(279),e.ALo(280,"replace"),e.ALo(281,"number"),e.qZA()()()()()()()),2&n){const t=e.oxw();let i;e.xp6(3),e.hij(" ",e.lcZ(4,66,"lang_auto_chi_so_co_ban")," "),e.xp6(7),e.hij(" ",t.examCommonStatistical.name," "),e.xp6(7),e.hij(" ",e.lcZ(18,68,"lang_auto_so_nguoi_dang_ky_thi")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalRegister),e.xp6(8),e.hij(" ",e.lcZ(30,70,"lang_auto_so_nguoi_thi")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalNotComplete),e.xp6(2),e.hij("",null!==(i=e.Dn7(36,72,e.xi3(37,76,t.examCommonStatistical.totalNotComplete/t.examCommonStatistical.totalRegister*100,"1.0-2"),",","."))&&void 0!==i?i:0,"%"),e.xp6(9),e.hij(" ",e.lcZ(45,79,"lang_auto_tong_luot_lam")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalAttendee),e.xp6(4),e.hij(" ",e.lcZ(53,81,"lang_auto_diem_trung_binh")," "),e.xp6(4),e.Oqu(e.Dn7(57,83,e.xi3(58,87,t.examCommonStatistical.averageMark,"1.0-2"),",",".")),e.xp6(5),e.hij(" ",e.lcZ(62,90,"lang_auto_so_hoc_sinh_dat_diem")+" <1"," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalLte1),e.xp6(2),e.hij("",e.Dn7(68,92,e.xi3(69,96,100*t.examCommonStatistical.totalLte1/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),e.xp6(5),e.Oqu(e.lcZ(73,99,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),e.xp6(4),e.Oqu(t.examCommonStatistical.totalGte5),e.xp6(2),e.hij("",e.Dn7(79,101,e.xi3(80,105,100*t.examCommonStatistical.totalGte5/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),e.xp6(5),e.hij(" ",e.lcZ(84,108,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.markPopular),e.xp6(2),e.hij("",e.Dn7(90,110,e.xi3(91,114,t.examCommonStatistical.totalPopular/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete)*100,"1.0-2"),",","."),"%"),e.xp6(4),e.Q6J("viewType",t.viewType),e.xp6(4),e.hij(" ",e.lcZ(98,117,"lang_auto_bieu_do_pho_diem")," "),e.xp6(6),e.Q6J("chart",t.chart),e.xp6(4),e.hij(" ",e.lcZ(108,119,"lang_auto_bang_tan_so")," "),e.xp6(8),e.Oqu(e.lcZ(116,121,"lang_testbank_statistical_class")),e.xp6(3),e.Oqu(e.lcZ(119,123,"lang_testbank_statistical_number_student")),e.xp6(23),e.hij("",e.lcZ(142,125,"lang_testbank_statistical_on_tb")," (>= 5)"),e.xp6(6),e.Oqu(e.lcZ(148,127,"lang_buttom_register")),e.xp6(3),e.Oqu(e.lcZ(151,129,"lang_testbank_statistical_join_exam")),e.xp6(3),e.Oqu(e.lcZ(154,131,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(159,133,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(164,135,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(169,137,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(174,139,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(179,141,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(184,143,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(189,145,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(194,147,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(199,149,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(204,151,"lang_auto_amount")),e.xp6(4),e.Q6J("ngForOf",t.statistic),e.xp6(3),e.Oqu(e.lcZ(211,153,"lang_testbank_statistical_total")),e.xp6(3),e.Oqu(t.countStudentRegister),e.xp6(2),e.Oqu(t.countStudentTakeExam),e.xp6(2),e.Oqu(t.markPointOne),e.xp6(2),e.Oqu(e.Dn7(220,155,e.xi3(221,159,t.markPercentOne,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointTwo),e.xp6(2),e.Oqu(e.Dn7(226,162,e.xi3(227,166,t.markPercentTwo,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointThree),e.xp6(2),e.Oqu(e.Dn7(232,169,e.xi3(233,173,t.markPercentThree,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointFour),e.xp6(2),e.Oqu(e.Dn7(238,176,e.xi3(239,180,t.markPercentFour,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointFive),e.xp6(2),e.Oqu(e.Dn7(244,183,e.xi3(245,187,t.markPercentFive,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointSix),e.xp6(2),e.Oqu(e.Dn7(250,190,e.xi3(251,194,t.markPercentSix,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointSeven),e.xp6(2),e.Oqu(e.Dn7(256,197,e.xi3(257,201,t.markPercentSeven,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointEight),e.xp6(2),e.Oqu(e.Dn7(262,204,e.xi3(263,208,t.markPercentEight,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointNine),e.xp6(2),e.Oqu(e.Dn7(268,211,e.xi3(269,215,t.markPercentNine,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointTen),e.xp6(2),e.Oqu(e.Dn7(274,218,e.xi3(275,222,t.markPercentTen,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointAvg),e.xp6(2),e.Oqu(e.Dn7(280,225,e.xi3(281,229,t.markPercentAvg,"1.0-2"),",","."))}}let BS=(()=>{class n extends W.Q{getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let t={id:this.dataStatistical.id??0,categoryId:this.dataStatistical.categoryId??0,name:this.dataStatistical.name??"",totalRegister:this.dataStatistical.totalRegister??0,totalNotComplete:this.dataStatistical.totalNotComplete??0,totalAttendee:this.dataStatistical.totalAttendee??0,averageMark:this.dataStatistical.averageMark??0,markPopular:this.dataStatistical.markPopular??0,totalPopular:this.dataStatistical.totalPopular??0,totalLte1:this.dataStatistical.totalLte1??0,totalGte5:this.dataStatistical.totalGte5??0};this.examCommonStatistical=t,this.examPageResultService.apiExamPageResultGetExamClassroomFrequencyMarkGet(t.id).subscribe(i=>{if(i.success&&i.data){let a=[];i.data.objs?.forEach(s=>{let r={classObj:{id:s.classroomId,name:s.classroomName??"lang_testbank_statistical_freelance_contestant",teacherId:0,showAddStudent:0,countStudents:0,grade:0},registerCount:s.totalRegister,testedCount:s.totalAttendee,markPercent:this.calcMarkPerCentForClassroom(s.marks??[],s.totalAttendee??0)};a.push(r)}),this.readyData(a)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(i.message??"")})}else this.doneLoadingEmit.emit(!1)}readyData(t){this.statistic=t,this.totalStudentRegister(this.statistic),this.totalStudentTakeExam(this.statistic),this.totalPercent(this.statistic),this.totalPoint(this.statistic),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}calcMarkPerCentForClassroom(t,i){let a=[],s=0;for(let l=1;l<=11;l++){let c={key:"",count:0,percent:0};if(t[l-1]){let d=t[l-1];0==d.fromMark&&1==d.toMark?c.key="<1":1==d.fromMark&&2==d.toMark?c.key="<2":2==d.fromMark&&3==d.toMark?c.key="<3":3==d.fromMark&&4==d.toMark?c.key="<4":4==d.fromMark&&5==d.toMark?c.key="<5":5==d.fromMark&&6==d.toMark?(c.key="<6",s+=d.total??0):6==d.fromMark&&7==d.toMark?(c.key="<7",s+=d.total??0):7==d.fromMark&&8==d.toMark?(c.key="<8",s+=d.total??0):8==d.fromMark&&9==d.toMark?(c.key="<9",s+=d.total??0):(c.key="<=10",s+=d.total??0),c.count=d.total??0,c.percent=this.homeworkExamService.calcPercent(d.total,i)}else c.key="<"+l;a.push(c)}let r={key:"Avg",count:s,percent:this.homeworkExamService.calcPercent(s,i)};return a.push(r),a}createChart(){let t=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi")??"",i=this.commonService.myTranslateInstant("lang_auto_so_luong")??"",s=new _.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:t+"_"+this.examCommonStatistical.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["< 1","< 2","< 3","< 4","< 5","< 6","< 7","< 8","< 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:i,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=s}totalPercent(t){var i=0,a=0,s=0,r=0,l=0,c=0,d=0,f=0,y=0,O=0,N=0,I=0;for(let z=0;z<t.length;z++)t[z]&&(I+=t[z].testedCount??0,i+=t[z].markPercent[0].count??0,a+=t[z].markPercent[1].count??0,s+=t[z].markPercent[2].count??0,r+=t[z].markPercent[3].count??0,l+=t[z].markPercent[4].count??0,c+=t[z].markPercent[5].count??0,d+=t[z].markPercent[6].count??0,f+=t[z].markPercent[7].count??0,y+=t[z].markPercent[8].count??0,O+=t[z].markPercent[9].count??0,N+=t[z].markPercent[10].count??0);this.markPercentOne=100*i/I,this.markPercentTwo=100*a/I,this.markPercentThree=100*s/I,this.markPercentFour=100*r/I,this.markPercentFive=100*l/I,this.markPercentSix=100*c/I,this.markPercentSeven=100*d/I,this.markPercentEight=100*f/I,this.markPercentNine=100*y/I,this.markPercentTen=100*O/I,this.markPercentAvg=100*N/I}totalPoint(t){var i=0,a=0,s=0,r=0,l=0,c=0,d=0,f=0,y=0,O=0,N=0;for(let I=0;I<t.length;I++)t[I]&&(i+=t[I].markPercent[0].count??0,a+=t[I].markPercent[1].count??0,s+=t[I].markPercent[2].count??0,r+=t[I].markPercent[3].count??0,l+=t[I].markPercent[4].count??0,c+=t[I].markPercent[5].count??0,d+=t[I].markPercent[6].count??0,f+=t[I].markPercent[7].count??0,y+=t[I].markPercent[8].count??0,O+=t[I].markPercent[9].count??0,N+=t[I].markPercent[10].count??0);this.markPointOne=i,this.markPointTwo=a,this.markPointThree=s,this.markPointFour=r,this.markPointFive=l,this.markPointSix=c,this.markPointSeven=d,this.markPointEight=f,this.markPointNine=y,this.markPointTen=O,this.markPointAvg=N}totalStudentRegister(t){var i=0;for(let a=0;a<t.length;a++)i+=t[a].registerCount??0;this.countStudentRegister=i}totalStudentTakeExam(t){var i=0;for(let a=0;a<t.length;a++)i+=t[a].testedCount??0;this.countStudentTakeExam=i}goToStudentList(t){t.classObj?.id&&t.classObj?.id>0&&this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${t.classObj.id}`,"?backto="+encodeURIComponent(`/admin/testbank/statistic/${this.examCommonStatistical.categoryId??0}/${this.examCommonStatistical.id}`))}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.dialog=t,this.homeworkExamService=i,this.dictionaryService=a,this.testedListApiService=s,this.examPageResultService=r,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.chart=new _.kL,this.examId=-1,this.statistic=[],this.examCommonStatistical={id:0,categoryId:0,name:"",totalRegister:0,totalNotComplete:0,totalAttendee:0,averageMark:0,markPopular:0,totalPopular:0,totalLte1:0,totalGte5:0},this.totalAttended=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(Aa.j),e.Y36(Dm.E),e.Y36(nl.x),e.Y36(Ve.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-statistical-point-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],["azt-track-service","statistical-point-H1Y1HbVLKAS","style","padding: 9.5px !important; cursor: pointer;",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-H1Y1HbVLKAS",2,"padding","9.5px !important","cursor","pointer",3,"click"]],template:function(t,i){if(1&t&&(e.YNc(0,hS,8,6,"div",0),e.YNc(1,RS,282,232,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statistic&&0!=i.statistic.length&&i.freeStudentList&&0!=i.freeStudentList.length)("ngIfElse",a)}},dependencies:[M.sg,M.O5,_.Dm,pS,M.JJ,re.bT,re.AS],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),n})();const zS=["drawer"];function JS(n,o){1&n&&e._UZ(0,"azt-loading-effect")}const HS=function(n){return{hidden:n}};let KS=(()=>{class n extends W.Q{getDataStatistical(){this.initStatusObj(),this.examPageResultService.apiExamPageResultGetExamInfoGet(this.examId).subscribe(t=>{1==t.success&&t.data?this.examInfoForStatistical=t.data??{}:(this.showErrorSnack(t.message??""),this.stopStatusObj())})}doneLoadingFunc(t){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyParam(this.activeRoute,"id")??"";this.backToLink=this.commonService.getMyQueryParam("backto")?this.commonService.getMyQueryParam("backto")??"":`/admin/testbank/exam-results-list/${t}/${i}/0`,(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.getDataStatistical()}),super.ngOnInit()}constructor(t,i){super(),this.examPageResultService=t,this.activeRoute=i,this.isListQuestion=!0,this.isStatistical=!1,this.isTabScore=!0,this.isExportExcel=!0,this.viewType=1,this.backToLink="",this.examId=0,this.doneLoadCount=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.DR),e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-statistical-new"]],viewQuery:function(t,i){if(1&t&&e.Gf(zS,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e.qOj],decls:9,vars:15,consts:[[3,"headerTitle","headerBackToLink"],[1,"statistical","mx-auto","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0),e.ALo(1,"mytranslate"),e.TgZ(2,"div",1),e.YNc(3,JS,1,0,"azt-loading-effect",2),e.TgZ(4,"div",3)(5,"app-statistical-point-new",4),e.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),e.qZA(),e.TgZ(6,"app-list-question-new",5),e.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),e.qZA(),e.TgZ(7,"app-table-score-new",5),e.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),e.qZA()(),e._UZ(8,"azt-scroll-to-top-bottom",6),e.qZA()()),2&t&&(e.Q6J("headerTitle",e.lcZ(1,11,"lang_testbank_statistical_header_title"))("headerBackToLink",i.backToLink),e.xp6(3),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngClass",e.VKq(13,HS,i.statusObj.loading)),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("isScrollToTop",!0))},dependencies:[M.mk,M.O5,jt.Q,Pm.M,pn._,BO,cS,BS,re.bT],encapsulation:2}),n})();var ss=S(43216),$S=S(80581);class YS{process(o){let t=["(^c\xe2u\\s*\\d{1,4}[^0-9])","(^ca\u0302u\\s*\\d{1,4}[^0-9])","(^c\xa9u\\s*\\d{1,4}[^0-9])","(^ca\u201au\\s*\\d{1,4}[^0-9])","(^b\xe0i\\s*\\d{1,4}[^0-9])","(^ba\u0300i\\s*\\d{1,4}[^0-9])","(^cau\\s*\\d{1,4}[^0-9])","(^bai\\s*\\d{1,4}[^0-9])","(^question\\s*\\d{1,4}[^0-9])","(^questions\\s*\\d{1,4}[^0-9])","(^\\[\\d{1,4}\\][^0-9])","(^\\d+\\s*\\(nb\\))","(^\\d+\\s*\\(th\\))","(^\\d+\\s*\\(vd\\))","(^\\d+\\s*\\(vdc\\))","(^c\xe2u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u0302u\\s*\\d{1,4}[\\s\\.:]*$)","(^c\xa9u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u201au\\s*\\d{1,4}[\\s\\.:]*$)","(^b\xe0i\\s*\\d{1,4}[\\s\\.:]*$)","(^ba\u0300i\\s*\\d{1,4}[\\s\\.:]*$)","(^cau\\s*\\d{1,4}[\\s\\.:]*$)","(^bai\\s*\\d{1,4}[\\s\\.:]*$)","(^questions\\s*\\d{1,4}[\\s\\.:]*$)","(^question\\s*\\d{1,4}[\\s\\.:]*$)"],i=["(^(\\d+\\s*\\.)\\s*[\\.0-9])","(^(\\d+\\s*\\.)\\s*\\(\\s*\\d+\\s*\\))","(^(\\d+\\s*\\.)\\s*[^\\s]\\s*[^\\s0-9])","(^\\d+\\s*\\.\\s*$)"],a=["(H\u01af\u1edaNG\\s*D\u1eaaN)","(\u01af\u1edaNG\\s*D\u1eaaN\\s*GI\u1ea2I\\s*CHI)","(GI\u1ea2I\\s*TH\xcdCH\\s*CHI\\s*TI\u1ebeT)","(H\u01b0\u1edbng\\s*d\u1eabn\\s*gi\u1ea3i)","(L\u1eddi\\s*gi\u1ea3i)","(L\u1edcI\\s*GI\u1ea2I)","(GI\u1ea2I\\s*CHI\\s*TI\u1ebeT)","(HD:)","(GLOSSARY)"],s=0,r=[],l=[];for(let d of o){let f=this.do(d,t,i);null!=f?(r.push({idx:s,val:$S.Utils.capitalizeFirstLetter(f.olabel)}),l.push("q")):(f=this.match(d,a),null!=f&&l.push("h")),s++}if(l.join("-").startsWith("q-h-q-h")){let d=1;for(let f of r)o[f.idx]=o[f.idx].replace(f.val,f.val.replace(/\d+/g,d+"")),d++}}do(o,t,i){let a=this.matchPos(o,t,i);if(a.value){let s=null;for(let y=a.value.length-1;y>=0;y--)if(a.value[y]){s=a.value[y];break}if(null==s)return null;let r=o.replace(/\|/g,"").toLowerCase().indexOf(s),l=r,c="",d=o.toLowerCase();for((s.endsWith("(")||s.endsWith("["))&&(s=s.substring(0,s.length-1));l<d.length&&("|"!=d[l]&&(c+=d[l]),l++,c!=s););return{pos:[r,l],olabel:s}}return null}matchPos(o,t,i){let a=o.replace(/\|/g,"").toLowerCase().trim(),s=t.join("|"),r=a.matchAll(s).next();return r.value||(s=i.join("|"),r=a.matchAll(s).next()),r}match(o,t){let i=o.replace(/\|/g,"").trim().match(t.join("|"));return null!=i&&i.length>0?{pos:[0,0],olabel:""}:null}}let GS=(()=>{class n{constructor(t,i,a,s,r,l,c,d,f,y){this.editorCommonService=t,this.commonService=i,this.cdnService=a,this.infoService=s,this.questionService=r,this.examCategoryService=l,this.apiUploadService=c,this.userService=d,this.questionSaveService=f,this.examService=y,this.saveParts=[],this.cropPdfParams="",this.configRenderService=new se.B,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.loadingManager=new Map,this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g}init(){return new Promise((t,i)=>{this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(a=>{this.cropPdfParams=a.CROPPDF_PARAMS,t()})}).catch(a=>{i(a)})})}hasStyleAns(t,i,a){if(!i)return"";let s=a.filter(r=>r.lineIdx==i.lineIdx&&r.s<=i.b&&r.e>=i.b);for(let r of s)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(t,i,a){for(let s=i.length-1;s>=0;s--){let r=i[s],l=a.filter(c=>c.lineIdx==r.lineIdx&&c.e>=r.s);for(let c=l.length-1;c>=0;c--){let d=l[c].s>=r.s?l[c].s:r.s,f=l[c].e<=(r.e??9999999)?l[c].e:r.e,y=l[c].style.replaceAll("!hl","");if(d<f&&""!=y){let O=t[r.lineIdx],N=O.substring(d,f);""!=N.trim()&&(t[r.lineIdx]=O.substring(0,d)+"["+y+":$"+N+"$]"+O.substring(f))}}}}processUnderlineAns(t){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,s=[];for(let r of t){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&a>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),d=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let f=t[a-1].match(i);if(f&&l.length==f.length){for(let O of f)t[a-1]=t[a-1].replace(O,O.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==d?"*":""}${l.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=t[a-1],l=l.substring(1),d++;a++;continue}}}s.push(r),a++}return s}processStyle(t){let i=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,s=[],r=0;for(let I of t){if(a.test(t[r].replaceAll(i,"$1"))&&(t[r]=t[r].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),I=t[r]),I){let Y,z=I.matchAll(i),$=0;for(;;){let V=z.next();if(V.done)break;let te=V.value[0],K=te.indexOf(":"),X=te.substring(1,K),ae=V.value.index-$,oe=ae+V.value[1].length;Y&&ae==Y.e&&Y.style==X?Y.e=oe:(Y={lineIdx:r,s:ae,e:oe,style:X},s.push(Y)),$+=K+4}t[r]=I.replaceAll(i,"$1")}r++}const l=new D.ExamIntellisense(this.cropPdfParams);l.setLines(t);let c=l.parse(),d=[],f=new Map,y=0;for(let I of c){y++;for(let z of I.parts)d.push(z);for(let z of I.answers){let $=this.hasStyleAns(t,z.parts[0],s);""!=$&&f.set(`${I.label}-${I.group}-${z.label}-${y}`,$);for(let Y of z.parts)d.push(Y)}}for(let I of c)if(I.help)for(let z of I.help)d.push(z);this.applyStyle(t,d,s),l.setLines(t),c=l.parse()??[];let O=[];y=0;for(let I of c){y++;let z=new Map;if(!(I.answers.filter($=>$.isCorrect).length>0)){for(let $ of I.answers){let Y=f.get(`${I.label}-${I.group}-${$.label}-${y}`);Y&&""!=Y&&z.set(Y,z.has(Y)?void 0:$.parts[0])}for(let $ of z)if($[1]){O.push($[1]);break}}}for(let I=O.length-1;I>=0;I--){let z=O[I];t[z.lineIdx]=t[z.lineIdx].substring(0,z.b)+"*"+t[z.lineIdx].substring(z.b)}return t=this.processUnderlineAns(t),c.length>0?t.slice(c[0].parts[0].lineIdx):t}processMath(t,i){let a=0;for(let s of t){let r=s.matchAll(this.MATH_PAT);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],f=i.get(l.value[1]);f&&(f.lineIdx=a+1,f.startCol=l.value.index+1,f.endCol=f.startCol+c.length)}a++}}getLoadedIds(t){return t.filter(i=>i.id&&i.id>0).map(i=>i.id??0)}getIncludeIds(t,i){return[]}renderStr(t,i,a,s,r,l,c,d,f=!0){let y=f?s.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):s,O=[new de,new Oe(this.cdnService),new ut,new He,new We,new Be,new qe(i),new it,new Ye.$(this.cdnService,this.commonService,this.configRenderService,l),new $e(this.cdnService,this.commonService,c,this.apiCallbackCache,this.aztEditor,d,this.getIncludeIds(t),this.apiDataCache,this.matrixLoadedData)];"link"==r&&(O=[new Ye.$(this.cdnService,this.commonService,this.configRenderService,l)]),"help"==r&&O.pop();for(const N of O)N.setLoadingManager(this.loadingManager),y=N.render(y,a,this.questionService);return y}upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}parseExtra(t){if(t.startsWith("[@"))return{val:"",idx:0,id:t};let s=t.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let d=s.next();if(d.done)break;r=d.value[0],l=d.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}fillImg(t,i,a,s){let r=new RegExp("<div id='"+a+"'[^>]+></div>","g"),l=t[i];l.renderedStr=l.renderedStr.replace(r,s??"");for(let c of l.answers)c.renderedStr=c.renderedStr.replace(r,s??"");l.helpRenderedStr&&(l.helpRenderedStr=l.helpRenderedStr.replace(r,s??""))}fillError(t,i,a){t[i].err=`<span style='color:red'>${a}</span>`}renderQuest(t,i,a,s,r,l){return new Promise(c=>{let d=3;s.answers.length>0&&(d=1),0==s.answers.length&&s.strAns&&(d=4);let f=(Y,V)=>{console.log("nvanh fill image ",t.length,Y,V),this.fillImg(t,r,Y,V)},y=Y=>{console.log("nvanh fill quest ",r,Y)},O=Y=>{this.fillError(t,r,Y)},N=s.parts.map(Y=>Y.text??"").join("<br>").trim(),I=this.parseExtra(N);""!=I.val&&(N=N.substring(0,I.idx)+N.substring(I.idx+I.val.length));let z=s.help?s.help.map(Y=>Y.text??"").join("<br>").trim():void 0,$={renderedStr:this.renderStr(t,i,a,N,"full",f,y,O),quest:s,type:d,strAns:s.strAns?s.strAns.split(/[\|]/).map(Y=>Y.trim()):void 0,label:this.upperFirst(s.olabel??""),helpRenderedStr:z?this.renderStr(t,i,a,z,"full",f,y,O):void 0,answers:s.answers.map(Y=>{let V=Y.parts.map(te=>te.text??"").join("<br>").trim();return{renderedStr:this.renderStr(t,i,a,V,"full",f,y,O),ans:Y}})};if($.renderedStr.startsWith("Loading...|")){let Y=$.renderedStr.split("|");if(Y[1].indexOf(",")<0){let V=+Y[1];V>0&&($.id=V)}$.renderedStr=Y[0]}t[r]=$,l&&l($),c($)})}getLstQuestWithFile(t,i,a){return new Promise((s,r)=>{const l=new he(this.editorCommonService,this.commonService),c=[],d=new Map,f=[],y=[];let O=1;l.handleFileSelect(t,N=>{for(let K of N.data)if("img"==K.type)c.push({id:K.key,link:K.value,cssStyle:K.cssStyle}),K.cssStyle&&K.cssStyle.split(";").length>2&&f.push([`^\\[img:\\$${K.key}\\$\\]`,`[img:$${K.key}$]\n`]);else if("mathml"==K.type){let X=+K.key.split("_")[1];d.set(K.key,{id:X,str:K.value,raw:K.docx,lineIdx:0,startCol:0,endCol:0}),X>O&&(O=X)}O++;for(let K of N.lines){if(0==K.length)continue;let X="";X=Array.isArray(K[0])&&Array.isArray(K[K.length-1])&&Array.isArray(K[Math.floor(K.length/2)])?"[* "+K.map(ae=>ae.map(oe=>oe.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":K.join("");for(let ae of f)X=X.replaceAll(new RegExp(ae[0],"g"),ae[1]);let ye=X.split("\n");for(let ae of ye)y.push(ae)}(new me).process(y);let z=this.processStyle(y);this.processMath(z,d),(new YS).process(z);const Y=new D.ExamIntellisense(this.cropPdfParams);Y.setLines(z);let V=Y.parse();const te=new U.Q(2);for(let K=0;K<V.length;K++)te.addTask(this,this.renderQuest,[i,d,c,V[K],K,a]);te.start().then(K=>{setTimeout(()=>{s({lstQuest:i,mathMap:d,images:c})},10*c.length)})})})}createFolder(t,i){return new Promise((a,s)=>{this.examCategoryService.apiExamCategorySaveObjPost({name:t,parentId:i}).subscribe(l=>{1==l.success?a(l.data??{}):s(new Error(l.message))})})}convertPartItem(t){return 0===t.length?"":/^\[@((.)+)\]/g.test(t[0].text??"")?t[0].lineIdx+"_____"+t[0].text?.split("]=>")[0]+"]":""}convertQuestion(t,i,a,s,r,l,c){return new Promise((d,f)=>{const y=[];s.answers.forEach(z=>{y.push({key:z.ans.label,content:z.renderedStr})});let O=s.answers.find(z=>!0===z.ans.isCorrect);const I={name:this.commonService.myTranslateInstant(c?"lang_testbank_question_created_from_ai":"lang_auto_cau_hoi_tu_editor")+" "+(r+1),answerType:s.type,categoryId:0,questionContent:s.renderedStr,questionText:s.renderedStr,answerConfig:JSON.stringify(y),groupId:l,answerResult:O?JSON.stringify([O.ans.label]):s.strAns&&s.strAns?.length>0?JSON.stringify(s.strAns):void 0,totalQuestion:t.length,version:"4",isFixAns:s.quest.isFixAns?1:0,isImage:1,answerMedia:s.helpRenderedStr,mediaMeta:JSON.stringify(i),groupType:i?.isFixGroup?"1":void 0,tags:s.tag&&s.tag.length?s.tag.map(z=>z.code??""):[],__path:this.convertPartItem(s.quest.parts)};a.exam?.questionObj.listQuestions?.push(I),a.exam?.rootQuests.push(s),s.audio&&(0,J.F0)(s.audio.type)?s.attachments&&"[]"!==s.attachments?(I.attachments=s.attachments,d()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(s.audio).subscribe(z=>{z.type!=C.dt.UploadProgress&&(1==z.success?I.attachments=JSON.stringify([z.data]):f(new Error("lang_auto_upload_file_audio_that_bai")),d())}):d()})}generateFileAzt(t){let i=this.aztEditor?._editor.getValue().trim()??"";if(""!=i){let a=[],s=[];for(let c of t.mathMap)a.push(c);let l=JSON.stringify({text:i,imgs:t.images,maths:a,infos:s});return new Blob([l],{type:"text/plain"})}return null}saveCdn(t,i){return new Promise(a=>{if(i.exam?.examObj){let s=new Date,r=`user-${this.userService.getUserObj().id}-de-azota-${s.getDate()}${s.getMonth()+1}${s.getFullYear()}-${s.getTime()}.azt`;const l=this.generateFileAzt(t);if(l){const c=new File([l],r,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(c).subscribe(d=>{d.type!=C.dt.UploadProgress&&(1==d.success&&d.data&&i.exam?.examObj&&(i.exam.examObj.cdnEditorFile=d.data.url??""),a())})}else a()}else a()})}makeExpandInfoObj(t){const a=t.map(s=>s.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(s=>s&&s.length>0);return a.length>0?{label:(s=a[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",s.charAt(0).toUpperCase()+s.slice(1))}:{};var s}uploadFileProcess(t,i){return new Promise(a=>{t?this.apiUploadService.uploadToCdnProgressForTestbankDocx(t).subscribe(s=>{s.type!=C.dt.UploadProgress&&(1==s.success&&i.exam&&(i.exam.examObj.cdnExamFile=s.data?.url??""),a())}):a()})}saveQuestionObjs(t,i,a){return new Promise(s=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:i}).subscribe(r=>{if(t.exam&&1===r.success&&r.data?.objs){const l=[];r.data.objs.forEach((c,d)=>{const f=t.exam?.examConfig.find(O=>O.name==c.name);if(l.push({id:c.id,name:c.name,groupId:c.groupId,scorePerQuestion:f?.point||1,totalQuestion:1,sort:d+a}),i[d]){const O=i[d];O.__path&&O.__path.length>0?this.saveParts.includes(O.__path)||this.saveParts.push(O.__path):this.saveParts.push(`[@Q${c.id}: C\xe2u ${d+a+1}]`)}}),s({indexSaved:r.data?.objs?.length+a,examConfigs:l})}else s({indexSaved:a,examConfigs:[]})})})}processSaveQuestions(t,i,a,s,r,l){if(i.exam?.questionObj&&i.exam?.questionObj.listQuestions){var c=i.exam?.questionObj.listQuestions.length;let f=a+100>c?c:a+100;var d=i.exam?.questionObj.listQuestions.slice(a,f)??[];let y=[];for(const O of d)y.push({categoryId:O.categoryId,groupId:O.groupId,name:O.name??"none",metadata:O.metadata,isImage:O.isImage,questionContent:O.questionContent,answerMedia:O.answerMedia,questionText:O.questionText,answerType:O.answerType,answerConfig:O.answerConfig,coordinates:O.coordinates,answerResult:O.answerResult,totalQuestion:O.totalQuestion,tags:O.tags??[],mediaId:O.mediaId,mediaMeta:O.mediaMeta,attachments:O.attachments,version:O.version,isFixAns:O.isFixAns,groupType:O.groupType});y.length>0?this.saveQuestionObjs(i,y,s).then(O=>{if(O.examConfigs&&O.examConfigs.length>0){let N=r.concat(O.examConfigs);this.processSaveQuestions(t,i,f,O.indexSaved,N,l)}}):this.saveExamObj(t,i,r,l)}}saveExamObj(t,i,a,s){if(i.exam){let l=!1;this.saveParts=this.saveParts.map(y=>{const O=y.split("_____");return-1!==y.indexOf("ng\u1eabu nhi\xean")&&(l=!0),1===O.length?O[0]:O[1]});let c={...this.formSubjectAndClassroom,generalTitle:i.exam?.examObj.name,generalDescription:""};s&&(c.generalTitle=s.controls?.name.value,c.generalDescription=s.controls?.description.value,c.schoolLevel=s.controls?.schoolLevel.value,c.schoolSubject=s.controls?.schoolSubject.value);let d=this.userService.getUserObj(),f=JSON.stringify({type:"exam",id:0,user:d.id});i.exam.examObj.scoringMethod="1",i.exam.examObj.name=c.generalTitle,i.exam.examObj.examConfigs=JSON.stringify(a),i.exam.examObj.description=c.generalDescription,i.exam.examObj.editorStatus=2,i.exam.examObj.metadata=JSON.stringify(this.saveParts),i.exam.examObj.isRandomExam=l,i.exam.examObj.schoolLevelId=c.schoolLevel,i.exam.examObj.schoolSubjectId=c.schoolSubject,this.examService.apiExamSaveObjPost({id:i.exam.examObj.id??0,categoryId:i.exam.examObj.categoryId,scoringMethod:i.exam.examObj.scoringMethod,name:i.exam.examObj.name??"",description:i.exam.examObj.description,examConfigs:i.exam.examObj.examConfigs,suggestions:i.exam.examObj.suggestions,labelsUrl:i.exam.examObj.labelsUrl,abcdLabelPos:i.exam.examObj.abcdLabelPos,questionLabelMap:i.exam.examObj.questionLabelMap,firstInGroupIndexes:i.exam.examObj.firstInGroupIndexes,totalExam:i.exam.examObj.totalExam??0,cdnExamFile:i.exam.examObj.cdnExamFile,cdnEditorFile:i.exam.examObj.cdnEditorFile,trackEdit:i.exam.examObj.trackEdit,examHeader:i.exam.examObj.examHeader,expandInfoObj:i.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:i.exam.examObj.editorStatus,startQuestionIndex:i.exam.examObj.startQuestionIndex,metadata:i.exam.examObj.metadata,isRandomExam:i.exam.examObj.isRandomExam,schoolLevelId:i.exam.examObj.schoolLevelId,schoolSubjectId:i.exam.examObj.schoolSubjectId,purposeId:i.exam.examObj.purposeId,purposeNote:i.exam.examObj.purposeNote},f).subscribe(y=>{if(s){const O=`/admin/testbank/ai-create-exam/${y.data?.obj?.categoryId??0}`;this.commonService.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${y.data?.obj?.categoryId??0}/${y.data?.obj?.hashId}`,`?backto=${encodeURIComponent(O)}`)}t()})}}saveExam(t,i,a,s){return new Promise(r=>{if(t.result){const l=new U.Q(10,{function:(I,z)=>{const $=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi");a.pushMsg(`${$}: ${Math.floor(I/z*100)}%`)}}),c={},f=(t.result.lstQuest[0].quest.isGroup?t.result.lstQuest[1]:t.result.lstQuest[0]).quest.label??1;let y,O=[],N=!0;c.exam=s?{examObj:{categoryId:i,name:s.controls?.name.value??t.file.name,startQuestionIndex:f,schoolLevelId:s.controls?.schoolLevel.value,schoolSubjectId:s.controls?.schoolSubject.value,description:s.controls?.description.value},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]}:{examObj:{categoryId:i,name:t.file.name,startQuestionIndex:f},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},l.addTask(this,this.uploadFileProcess,[t.file,c]),t.result.lstQuest.forEach((I,z)=>{if(I.quest.isGroup)y=I,N=!1;else{N||(N=!0,O.push(z-(O.length+1)));const Y={name:this.commonService.myTranslateInstant(s?"lang_testbank_question_created_from_ai":"lang_auto_cau_hoi_tu_editor")+" "+(z-O.length+1),point:1};c.exam?.examConfig.push(Y),l.addTask(this,this.convertQuestion,[t.result?.lstQuest,y,c,I,z-O.length,O.length,s])}}),l.addTask(this,this.saveCdn,[t.result,c]),c.exam.examObj.firstInGroupIndexes=JSON.stringify(O),c.exam.examObj.expandInfoObj=this.makeExpandInfoObj(t.result.lstQuest),c.exam.examObj.description=s?.controls?.description.value??"",l.start().then(()=>{a.pushMsg("\u0110ang l\u01b0u ..."),console.log("nvanh save ",c),this.questionSaveService.convertQuestions(c.exam?.questionObj.listQuestions??[],c.exam?.rootQuests??[],(z,$="",Y)=>{a.remove(),r()}).then(()=>{this.saveParts=[],this.processSaveQuestions(()=>{a.remove(),r()},c,0,0,[],s)}),r()})}else r()})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ao),e.LFG(Rt.v),e.LFG(xt.U),e.LFG(si.CM),e.LFG(Ve.aE),e.LFG(Ve.F1),e.LFG(Ln.$),e.LFG(Qe.K),e.LFG(Ge),e.LFG(Ve.Oe))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WS=(()=>{class n{reset(){this.logger=new ss.O}cancel(){return new Promise(t=>{this.treeDataFolders.pushActionCancel(0).then(()=>{this.logger.remove(),t()})})}init(t,i){return new Promise((a,s)=>{this.logger=new ss.O(!0,this.commonService.myTranslateInstant("lang_loading_data")),this.treeDataFolders=new ml,this.treeDataFolders.parentId=t,this.treeDataFolders.pushActionCancel(1),this.treeDataFolders.pushActionRunner(!0),this.syncQuestionTestBankService.formSubjectAndClassroom=i,this.syncQuestionTestBankService.init().then(()=>{a()}).catch(r=>{s(r)})})}push(t){this.treeDataFolders.push(t)}start(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const t=new U.Q(1);this.treeDataFolders.pushTaskDocument(t,this.syncQuestionTestBankService,this.logger),t.start().then(i=>{this.logger.remove()})}getListQuestion(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const t=new U.Q(1);this.treeDataFolders.pushTaskDocument(t,this.syncQuestionTestBankService,this.logger)}constructor(t,i){this.syncQuestionTestBankService=t,this.commonService=i,this.logger=new ss.O,this.treeDataFolders=new ml}get keyLoading(){return this.logger.lines}get isLoading(){return this.logger.run??!1}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(GS),e.LFG(Rt.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ml{push(o){const t=o.webkitRelativePath.split("/"),i=t.shift();if(""===this.name&&(this.name=i??"root"),1===t.length)return void this.documents.push({file:o});t.pop();let a=this;t.forEach(s=>{a=this.getOrCreateObject(s,a)}),a.documents.push({file:o})}pushTaskDocument(o,t,i){o.addTask(this,this.syncFolderAction,[t,i],this.name),this.documents.forEach(a=>{o.addTask(this,this.processDocument,[a,t,i],a.file.name)}),this.children.forEach(a=>{a.pushTaskDocument(o,t,i)})}syncActionDocument(o,t,i){return new Promise(a=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(i.file.name)))if(i.result&&i.result.lstQuest.filter(s=>s.answers.length>2).length>0){const s=new ss.O(!0,"\u0110ang l\u01b0u \u0111\u1ec1 thi "+i.file.name);t.pushChild(s),o.saveExam(i,this.folderId,s).then(()=>{this.saveName(this.makeName(i.file.name)),s.remove(),a()})}else a();else a()})}syncFolderAction(o,t){return new Promise(i=>{if(1===this.getStatusAction()&&this.checkName(this.makeName()))if(-1===this.folderId){const a=new ss.O(!0,"\u0110ang t\u1ea1o th\u01b0 m\u1ee5c "+this.name);t.pushChild(a),-1!==this.parentId?o.createFolder(this.name,this.parentId).then(s=>{this.folderId=s.obj?.id??-1,this.children.forEach(r=>{r.parentId=this.folderId}),this.saveName(this.makeName()),this.saveFolderId(this.makeName(),this.folderId),a.remove(),i()}).catch(()=>{this.folderId=-1,a.remove(),i()}):(a.remove(),i())}else i();else 1===this.getStatusAction()&&(this.folderId=this.getFolderId(this.makeName()),this.children.forEach(a=>{a.parentId=this.folderId})),i()})}processDocument(o,t,i){return new Promise((a,s)=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(o.file.name))){const r=new ss.O(!0,"\u0110ang x\u1eed l\xfd t\u1ec7p tin "+o.file.name);i.pushChild(r),t.getLstQuestWithFile(o.file,[]).then(c=>{o.result=c,c.lstQuest.filter(d=>d.answers.length>2).length>0&&(r.pushMsg("\u0110ang l\u01b0u \u0111\u1ec1 thi "+o.file.name),this.syncActionDocument(t,i,o).then(()=>{r.remove(),a()}))})}else a()})}getOrCreateObject(o,t){let i=t.children.find(a=>a.name===o);return i||(i=new ml(o),i.parentName=t.parentName+"/"+t.name,t.children.push(i)),i}saveName(o){const t=this.makeObjSave();t.save_names.push(o),this.setObjSave(t)}saveFolderId(o,t){const i=this.makeObjSave();i.folder_save.push({name:o,value:t}),this.setObjSave(i)}checkName(o){return!this.makeObjSave().save_names.includes(o)}makeName(o){return o?this.parentName+"_"+this.name+"_"+o:this.parentName+"_"+this.name}getFolderId(o){return this.makeObjSave().folder_save.find(i=>i.name===o)?.value??0}pushActionCancel(o){return new Promise(t=>{const i=this.makeObjSave();if(i.status=o,this.setObjSave(i),0===o){const a=setInterval(()=>{this.makeObjSave().isRun||(clearInterval(a),t())},100)}else t()})}pushActionRunner(o){const t=this.makeObjSave();t.isRun=o,this.setObjSave(t)}getStatusAction(){const o=this.makeObjSave().status;return 0===o&&this.pushActionRunner(!1),o}makeObjSave(){const o=window.localStorage.getItem(this.LOCAL_STORAGE_KEY);return o?JSON.parse(o):new VS}setObjSave(o){window.localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(o))}constructor(o){this.parentName="",this.parentId=-1,this.folderId=-1,this.name="",this.documents=[],this.children=[],this.LOCAL_STORAGE_KEY="NVANH_TOOL_SYNC_ACTION",o&&(this.name=o)}}class VS{constructor(){this.status=1,this.save_names=[],this.folder_save=[],this.isRun=!0}}var XS=S(63074);const eE=["drawer"];function tE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCancelSync())}),e._uU(1,"Hu\u1ef7"),e.qZA()}}function nE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",38),e._UZ(3,"rect",39)(4,"path",40)(5,"path",41),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function iE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",38),e._UZ(3,"rect",39)(4,"path",40)(5,"path",43),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function oE(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"config-level-subject",44),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("form",t.form)("schoolLevelObjs",t.schoolLevelObjs)("schoolSubjectObjs",t.schoolSubjectObjs)("examSchoolLogObj",t.examSchoolLogObj)}}const aE=function(n){return{"ml-5":n}};function sE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e.YNc(2,nE,6,3,"button",20),e.YNc(3,iE,6,3,"button",21),e.qZA(),e.YNc(4,oE,2,4,"ng-container",22),e.TgZ(5,"div",10)(6,"p",23),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",24)(10,"div",25)(11,"div",26)(12,"input",27,28),e.NdJ("change",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEventChangeFolder(a))}),e.qZA(),e.TgZ(14,"div",29)(15,"div",30)(16,"div")(17,"span",14),e._UZ(18,"lucide-icon",31),e.qZA(),e.TgZ(19,"span",32),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()()()(),e.TgZ(22,"div",33)(23,"span",34),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",33)(27,"a",35),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(13);return e.KtG(a.click())}),e.TgZ(28,"span",14),e._UZ(29,"lucide-icon",36),e.qZA(),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(16,aE,!t.isMobile&&t.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!t.isOpenSideNav||t.isMobile),e.xp6(1),e.Q6J("ngIf",t.isOpenSideNav&&!t.isMobile),e.xp6(1),e.Q6J("ngIf",t.examSchoolLogObj),e.xp6(3),e.hij(" ",e.lcZ(8,8,"lang_core_auto_tool_sync_chon_thu_muc")," "),e.xp6(13),e.hij(" ",e.lcZ(21,10,"lang_core_auto_tool_sync_keo_tha")," "),e.xp6(4),e.hij(" ",e.lcZ(25,12,"lang_core_auto_tool_sync_hoac")," "),e.xp6(7),e.Oqu(e.lcZ(32,14,"lang_core_auto_tool_sync_chon_thu_muc_can_sync"))}}const rE=function(n,o){return{"w-85":n,"w-30":o}};let lE=(()=>{class n extends W.Q{openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam_sync_folder",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam_sync_folder")}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("exam_sync_folder");this.isOpenSideNav=!t||"close"!=t}}mainProcessFiles(t){const i=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,a=this.form.getRawValue();this.syncTestbankService.init(i,a).then(()=>{t.forEach(s=>{(0,J.D_)(s.type)&&s.name.includes("docx")&&this.syncTestbankService.push(s)}),this.syncTestbankService.start()})}handleEventChangeFolder(t){t.target.files&&this.mainProcessFiles([...t.target.files]),t.target.value=""}handleCancelSync(){this.syncTestbankService.cancel().then(()=>{})}ngOnInit(){super.ngOnInit(),this.userService.isTestMarketAdminRole()?(this.form=this.formBuilder.group({generalDescription:new p.p4(""),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required])}),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(t=>{1==t.success?(this.examSchoolLogObj=t.data?.examSchoolLogObj,this.schoolLevelObjs=t.data?.schoolLevelObjs??[],this.schoolSubjectObjs=t.data?.schoolSubjectObjs??[],this.isLoadForm=!0):this.errorStatusObj(t.message??"")}))):this.commonService.myNavigation("/admin/dashboard")}constructor(t,i,a,s,r,l){super(),this.examFilterService=t,this.syncTestbankService=i,this.activeRoute=a,this.documentConfigService=s,this.userService=r,this.formBuilder=l,this.backToLink="/admin/dashboard",this.aztConfigCropParam="",this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.isLoadForm=!1,this.form=new p.nJ({}),this.schoolLevelObjs=[],this.schoolSubjectObjs=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(pu),e.Y36(WS),e.Y36(T.gz),e.Y36(Ve.Cq),e.Y36(Qe.K),e.Y36(p.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sync-folder"]],viewQuery:function(t,i){if(1&t&&e.Gf(eE,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e.qOj],decls:22,vars:22,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],["azt-track-service","sync-folder-I_srCKgqJ","class","cancel","style","\n\t\t    z-index: 999999999999;\n\t\t\tposition: fixed;\n\t\t\tpadding: 5px 20px;\n\t\t\tborder-radius: 5px;\n\t\t\tborder: 1px solid #cfd8dc;\n\t\t\tbackground: #eceff1;\n\t\t\ttop: 50px;\n\t\t\tleft: 50%;\n\t\t\tcursor: pointer;\n\t\t",3,"click",4,"ngIf"],[3,"msg","show","percent"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"height","80vh"],[1,"document-info"],[1,"flex","items-center"],["matTooltip","\u0110\u1ed3ng b\u1ed9 th\u01b0 m\u1ee5c",1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-md","mt-2"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["class","azt-drawer-content",3,"ngClass",4,"ngIf"],["azt-track-service","sync-folder-I_srCKgqJ",1,"cancel",2,"z-index","999999999999","position","fixed","padding","5px 20px","border-radius","5px","border","1px solid #cfd8dc","background","#eceff1","top","50px","left","50%","cursor","pointer",3,"click"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","sync-folder-SS5UgcvZq","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","sync-folder-q_c8tTVOYm","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],[1,"text-md","font-medium","mr-auto","ng-star-inserted"],[1,"box","mt-2","relative","py-2",2,"height","62vh"],[1,"h-100","flex","items-center","justify-center",2,"height","100%"],[1,"text-center"],["type","file","webkitdirectory","",2,"display","none",3,"change"],["folderInputDirectory",""],["appDragDrop","",1,"xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[1,"flex","items-center","justify-center","text-center","cursor-pointer","relative",2,"width","400px","height","200px"],["name","folder-input"],[1,"text-primary","mr-1"],[1,"mt-3","lg:mr-auto"],[1,"text-md"],["azt-track-service","sync-folder-AgaqXySbDm",1,"btn","btn-secondary-soft",3,"click"],["name","folder-up"],["azt-track-service","sync-folder-SS5UgcvZq",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","sync-folder-q_c8tTVOYm",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"form","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.NdJ("contextmenu",function(){return!1}),e.YNc(2,tE,2,0,"div",2),e._UZ(3,"azt-export-docx-loading-box",3),e.TgZ(4,"mat-drawer-container",4)(5,"mat-drawer",5,6),e.NdJ("closedStart",function(){return i.changeStatusNav()}),e.TgZ(7,"ng-scrollbar",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"h3",11,12),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",13)(16,"span",14),e._UZ(17,"lucide-icon",15),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()(),e.TgZ(20,"mat-drawer-content"),e.YNc(21,sE,33,18,"div",16),e.qZA()()()()),2&t){const a=e.MAs(12);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.syncTestbankService.isLoading),e.xp6(1),e.Q6J("msg",i.syncTestbankService.keyLoading)("show",i.syncTestbankService.isLoading)("percent",0),e.xp6(1),e.Q6J("hasBackdrop",i.hasBackdrop),e.xp6(1),e.s9C("opened",i.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(19,rE,i.isMobile,!i.isMobile))("mode",i.mode),e.xp6(2),e.Q6J("visibility","hover"),e.xp6(4),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(14,15,"lang_core_auto_tool_sync_huong_dan_dong_bo")," "),e.xp6(5),e.hij(" ",e.lcZ(19,17,"lang_core_auto_tool_sync_huong_dan_dong_bo_description")," "),e.xp6(3),e.Q6J("ngIf",i.isLoadForm)}},dependencies:[M.mk,M.O5,Ni.jA,Ni.kh,Ni.LW,Zt.gM,x.KC,XS.N,ho.Q,ol,pn._,h.Nh5,Ga,re.bT],encapsulation:2}),n})();var cE=S(67898),uE=S(63833);function dE(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function mE(n,o){if(1&n&&(e.TgZ(0,"div",3),e._UZ(1,"azt-test-result-tracking",4),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("dataResultObjs",t.dataResultObjs)("dataScrollObjs",t.dataScrollObjs)}}let _E=(()=>{class n extends W.Q{getData(t,i,a,s){this.initStatusObj(),this.subscriptions.add(this.examResultTrackService.apiExamResultTrackGetObjGet(t,i,a,s).subscribe(r=>{if(1==r.success){this.examObj=r.data?.examObj;var l=this.castJsonToObj(this.zipDataService.decodeContentGzip(r?.data?.examResultTrackObj?.trackData??""));l&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(l)),this.backToLink="/admin/testbank/exam-results-list/"+(r.data?.examObj?.categoryId?r.data.examObj.categoryId:0)+"/"+r.data?.examObj?.id+"/0",this.successStatusObj()}else this.errorStatusObj(r.message??"",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let t=Number(this.activeRoute.snapshot.paramMap.get("exam_id"));var i=this.activeRoute.snapshot.paramMap.get("result_id")??"0";let a=parseInt(i,10),s=this.activeRoute.snapshot.paramMap.get("user_id")??"",r=this.activeRoute.snapshot.paramMap.get("student_id")??"";this.getData(t,s,r,a),super.ngOnInit()}constructor(t,i,a,s){super(),this.activeRoute=t,this.examResultTrackService=i,this.zipDataService=a,this.sAztTestResultTrackingService=s,this.dataResultObjs=[],this.dataScrollObjs=[],this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(Ve.UR),e.Y36($i.D),e.Y36(cE.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-result-tracking"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","mt-3","mb-5"],[3,"startQuestionIndex","dataResultObjs","dataScrollObjs"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,dE,1,0,"azt-loading-effect",1),e.YNc(2,mE,2,3,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,uE.$,pn._]}),n})();var pE=S(99080),Qm=S(52846),hE=S(36669),gE=S(85123);function fE(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"span",10),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",t.studentObj.fullName),e.xp6(1),e.Oqu(t.studentObj.fullName)}}function xE(n,o){if(1&n&&e._UZ(0,"img",12),2&n){const t=e.oxw(3);e.Q6J("nameImages",t.studentObj.nameImages)}}function bE(n,o){if(1&n&&e.YNc(0,xE,1,1,"img",11),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.studentObj.nameImages)}}function vE(n,o){if(1&n&&(e.TgZ(0,"div",7),e.YNc(1,fE,3,2,"ng-container",8),e.YNc(2,bE,1,1,"ng-template",null,9,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",!i.studentObj.nameImages||i.studentObj.id>0)("ngIfElse",t)}}function yE(n,o){if(1&n&&(e.TgZ(0,"div",13),e.O4$(),e.TgZ(1,"svg",14),e._UZ(2,"path",15),e.qZA(),e.kcU(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"anonymousPhone"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.AsE("",e.lcZ(5,2,"lang_auto_dien_thoai"),": ",t.studentObj?e.lcZ(6,4,t.studentObj.phone):""," ")}}function wE(n,o){if(1&n&&(e.TgZ(0,"div",16),e.O4$(),e.TgZ(1,"svg",17),e._UZ(2,"rect",18)(3,"line",19)(4,"line",20)(5,"line",21)(6,"path",22)(7,"path",23)(8,"path",24)(9,"path",25)(10,"path",26)(11,"path",27),e.qZA(),e.kcU(),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"formatOnlyDateByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw();e.xp6(13),e.AsE("",e.lcZ(14,2,"lang_auto_ngay_sinh"),": ",e.lcZ(15,4,null==t.studentObj?null:t.studentObj.birthday),"")}}let CE=(()=>{class n extends W.Q{returnTooltip(){return null==this.studentObj?.parentPhone?"ID: "+this.studentObj?.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj?.phone??""):"ID: "+this.studentObj.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.userService=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Qe.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-basic-info-box"]],inputs:{studentObj:"studentObj"},features:[e.qOj],decls:7,vars:7,consts:[[1,"flex","flex-1","items-center","justify-start"],[1,"w-20","h-20","flex-none","image-fit","relative"],[2,"cursor","pointer",3,"nameCreateAvatar","matTooltip","size","linkAvatar"],[1,"ml-5","w-full"],["class","font-medium text-md",4,"ngIf"],["class","flex items-center text-xs mt-1",4,"ngIf"],["class","flex items-center mt-1 text-xs",4,"ngIf"],[1,"font-medium","text-md"],[4,"ngIf","ngIfElse"],["noStudentName",""],[1,"truncate","sm:whitespace-normal",2,"max-width","72%",3,"matTooltip"],["appDrawNameImage","","loading","lazy","class","img-name-fluid","style","max-width: 95%!important;",3,"nameImages",4,"ngIf"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"max-width","95%!important",3,"nameImages"],[1,"flex","items-center","text-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-3","h-3","mr-2"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"flex","items-center","mt-1","text-xs"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["d","M8 14h.01"],["d","M12 14h.01"],["d","M16 14h.01"],["d","M8 18h.01"],["d","M12 18h.01"],["d","M16 18h.01"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"azt-create-avatar",2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,vE,4,2,"div",4),e.YNc(5,yE,7,6,"div",5),e.YNc(6,wE,16,6,"div",6),e.qZA()()),2&t&&(e.xp6(2),e.s9C("matTooltip",i.returnTooltip()),e.Q6J("nameCreateAvatar",null==i.studentObj?null:i.studentObj.fullName)("size",80)("linkAvatar",null==i.studentObj?null:i.studentObj.avatar),e.xp6(2),e.Q6J("ngIf",i.studentObj),e.xp6(1),e.Q6J("ngIf",i.studentObj&&10==(null==i.studentObj.phone?null:i.studentObj.phone.length)),e.xp6(1),e.Q6J("ngIf",null==i.studentObj?null:i.studentObj.birthday))},dependencies:[M.O5,Zt.gM,Fs.g,ll.L,re.bT,re.C5,re._I],encapsulation:2}),n})();var kE=S(58334);function TE(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"button",7),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"span",8),e._uU(5),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(2);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(1),e.hij(" ",e.lcZ(3,3,"lang_auto_xem_cac_lan_thi_")," "),e.xp6(3),e.hij("(",t.historyExamResultObjs.length,")")}}function AE(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",14),e.qZA())}const OE=function(n){return{"bg-slate-100 dark:bg-darkmode-300":n}};function SE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.getAndProcessAnswers(s.id))}),e.TgZ(2,"div",10)(3,"div",11),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",12),e._uU(8),e.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(10,"formatOnlyTimeByUserUnitPipe"),e.qZA(),e.TgZ(11,"div",12),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()(),e.YNc(14,AE,2,0,"li",13)}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(20,OE,t.id===a.examResultIdParam)),e.xp6(3),e.HOy(" ",e.lcZ(5,10,"lang_auto_lan")," ",a.historyExamResultObjs.length-i," [",e.lcZ(6,12,"lang_auto_diem")," ",t.mark,"] "),e.xp6(4),e.AsE("",e.lcZ(9,14,t.startedTest)," - ",e.lcZ(10,16,t.createdAt),""),e.xp6(4),e.AsE("",e.lcZ(13,18,"lang_auto_thoi_gian_lam_bai"),": ",a.calculateTime(t.startedTest,t.createdAt),""),e.xp6(2),e.Q6J("ngIf",i!=a.historyExamResultObjs.length-1)}}let EE=(()=>{class n extends W.Q{getAndProcessAnswers(t){var i=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+t)+"?backto="+encodeURIComponent(this.backToLink);window.location.href=i.toString()}calculateTime(t,i){return this.timeService.calculationTestedTime(t,i)}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.timeService=t,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-exam-result-history"]],inputs:{historyExamResultObjs:"historyExamResultObjs",backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam"},features:[e.qOj],decls:6,vars:2,consts:[["class","history-exam mt-3",4,"ngIf"],["yPosition","above"],["menuTimeTest","matMenu"],[1,"dropdown-menu","show","w-56","relative",2,"overflow-y","auto","max-height","calc(100vh - 250px)","box-shadow","0px 3px 10px #00000017"],[1,"dropdown-content",2,"margin-top","0"],["ngFor","",3,"ngForOf"],[1,"history-exam","mt-3"],[1,"btn","btn-outline-secondary","block","w-full",3,"matMenuTriggerFor"],[1,"ml-2"],["azt-track-service","exam-result-history-6Kv3ed2IY6",1,"dropdown-item","mb-2",3,"ngClass","click"],[1,"once-tested"],[1,"font-medium"],[1,"text-xs","text-slate-600","dark:text-slate-300","mt-1"],[4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"]],template:function(t,i){1&t&&(e.YNc(0,TE,6,5,"div",0),e.TgZ(1,"mat-menu",1,2)(3,"div",3)(4,"ul",4),e.YNc(5,SE,15,22,"ng-template",5),e.qZA()()()),2&t&&(e.Q6J("ngIf",i.historyExamResultObjs),e.xp6(5),e.Q6J("ngForOf",i.historyExamResultObjs))},dependencies:[M.mk,M.sg,M.O5,en.VK,en.p6,re.bT,re.tO,re.t2],encapsulation:2}),n})();var ME=S(63987);let IE=(()=>{class n extends W.Q{hasNext(){var t=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){t=i;break}return t<this.testedUserObjs.length-1}return!1}hasPrev(){var t=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){t=i;break}return t>0}return!1}handleNavigate(t){this.initStatusObj();let i=0;i=this.historyExamResultObjs.length?this.historyExamResultObjs[0].id??this.examResultIdParam??0:this.examResultIdParam??0,this.subscriptions.add(this.examPageResultService.apiExamPageResultGetNextResultGet(i,this.classroomId,"next"==t?1:0).subscribe(a=>{if(1==a.success&&a.data){var s=a.data.userId?.toString(),r=a.data.studentId?.toString(),l=a.data.id?.toString(),c=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+s+"/"+r+"/"+(l??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=c.toString(),this.successStatusObj()}else this.showErrorSnack(a.message??""),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0})}constructor(t,i){super(),this.examPageResultService=t,this.activeRoute=i,this.classroomId=0,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.DR),e.Y36(T.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-show-next-back-button"]],inputs:{testedUserObjs:"testedUserObjs",classroomId:"classroomId",historyExamResultObjs:"historyExamResultObjs"},features:[e.qOj],decls:9,vars:6,consts:[[1,"p-3"],["azt-track-service","show-next-back-box-_0g3eIKk5Q",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["points","15 18 9 12 15 6"],["azt-track-service","show-next-back-box-gLJelBC71K",1,"btn","btn-sm","btn-secondary-soft",3,"matTooltip","click"],["points","9 18 15 12 9 6"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.handleNavigate("prev")}),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"polyline",3),e.qZA()(),e.kcU(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.handleNavigate("next")}),e.ALo(6,"mytranslate"),e.O4$(),e.TgZ(7,"svg",2),e._UZ(8,"polyline",5),e.qZA()()()),2&t&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_hoc_sinh_truoc_do")),e.xp6(4),e.s9C("matTooltip",e.lcZ(6,4,"lang_auto_hoc_sinh_tiep_theo")))},dependencies:[Zt.gM,re.bT],encapsulation:2}),n})(),LE=(()=>{class n extends W.Q{clickExportPdf(){this.essayQuestionObjs.length>0&&!this.examResultObj?.confirmedAt?this.showErrorSnack("lang_auto_ban_chi_co_the_tai_file_pdf_khi_cham_xong_tu_luan"):this.exportResultService.processUser(Number(this.examIdParam??0),Number(this.examResultIdParam??0),this.userIdParam,this.studentIdParam).then(()=>{}).catch(t=>{this.commonService.snackError("string"==typeof t?t:t.message)})}getBackData(t,i){let a="";if(t.includes("backto")){let s=t.substring(t.lastIndexOf("backto"));s.includes("shareType")&&(a=i?s.substring(s.lastIndexOf("data")):s)}return a}redirectToTestedList(){let t=this.commonService.getMyQueryParam("backto"),i=this.getBackData(t??"",!1);this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?this.examObj.categoryId:0)+"/"+this.examIdParam+"/0",i?"?"+decodeURIComponent(i):"")}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.exportResultService=t,this.essayQuestionObjs=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(il.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-export-pdf-menu"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",examObj:"examObj",examResultObj:"examResultObj",essayQuestionObjs:"essayQuestionObjs"},features:[e.qOj],decls:29,vars:7,consts:[[1,"menu","ml-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","export-pdf-menu-box-55F1itGQin",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","export-pdf-menu-box-LA2X4vBtnx",1,"dropdown-item",3,"click"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 11h4"],["d","M12 16h4"],["d","M8 11h.01"],["d","M8 16h.01"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"line",3)(4,"line",4)(5,"line",5),e.qZA()()(),e.kcU(),e.TgZ(6,"mat-menu",6,7)(8,"div",8)(9,"ul",9)(10,"li")(11,"a",10),e.NdJ("click",function(){return i.clickExportPdf()}),e.O4$(),e.TgZ(12,"svg",11),e._UZ(13,"path",12)(14,"polyline",13)(15,"line",14),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(18,"li")(19,"a",15),e.NdJ("click",function(){return i.redirectToTestedList()}),e.O4$(),e.TgZ(20,"svg",11),e._UZ(21,"rect",16)(22,"path",17)(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21),e.qZA(),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(7);e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(15),e.hij(" ",e.lcZ(17,3,"lang_auto_tai_bai_lam_duoi_dang_pdf")," "),e.xp6(11),e.hij(" ",e.lcZ(28,5,"lang_auto_danh_sach_da_thi")," ")}},dependencies:[en.VK,en.p6,re.bT],encapsulation:2}),n})();function ZE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_trac_nghiem")))}function PE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_tu_luan")))}function jE(n,o){if(1&n&&(e.TgZ(0,"span",12),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_lan")," ",t.data.index," - ",e.lcZ(3,5,1e3*t.data.createdAt)," ")}}function DE(n,o){if(1&n&&(e.TgZ(0,"span",12),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_lan")," ",t.data.index," - ",e.lcZ(3,5,1e3*t.data.createdAt)," ")}}function NE(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",13)(2,"g",14)(3,"g",15),e._UZ(4,"circle",16),e.TgZ(5,"path",17),e._UZ(6,"animateTransform",18),e.qZA()()()()())}let qm=(()=>{class n extends W.Q{btnCloseDialog(t){this.dialogRef.close(t)}constructor(t,i){super(),this.dialogRef=t,this.data=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-history"]],features:[e.qOj],decls:23,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center"],[2,"font-weight","450","font-size","14px"],[4,"ngIf"],["style","font-weight: 450; font-size: 15px; color: #ff0024",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"text-right","my-3","p-3"],["azt-track-service","dialog-confirm-action-0FalsTWUHN",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","dialog-confirm-action-weCfaxHnGJ",1,"btn","w-32","btn-primary",3,"disabled","click"],[2,"font-weight","450","font-size","15px","color","#ff0024"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e.YNc(5,ZE,3,3,"span",5),e.YNc(6,PE,3,3,"span",5),e.YNc(7,jE,4,7,"span",6),e.YNc(8,DE,4,7,"span",6),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",7)(12,"p",8),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()(),e.TgZ(15,"div",9)(16,"button",10),e.NdJ("click",function(){return i.btnCloseDialog(void 0)}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"button",11),e.NdJ("click",function(){return i.btnCloseDialog(i.data)}),e.YNc(20,NE,7,0,"span",5),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",10!=i.data.type),e.xp6(1),e.Q6J("ngIf",10==i.data.type),e.xp6(1),e.Q6J("ngIf",10!=i.data.type),e.xp6(1),e.Q6J("ngIf",10==i.data.type),e.xp6(1),e.hij(" ",e.lcZ(10,10,"lang_auto_lam_ket_qua_phuc_khao_cho_hoc_sinh_nay")," "),e.xp6(4),e.hij(" ",e.lcZ(14,12,"lang_auto_de_tra_loi_cau_hoi_tu_luan_ban_co_the_lam_truc_tiep_dot")," "),e.xp6(4),e.hij(" ",e.lcZ(18,14,"lang_auto_dong")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(22,16,"lang_cms_common_confirm_btn")," "))},dependencies:[M.O5,re.bT,re.tO],encapsulation:2}),n})();function QE(n,o){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"azt-loading-effect"),e.qZA())}function qE(n,o){1&n&&e._UZ(0,"th")}function FE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"span",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(5);return e.KtG(r.onShowFile(s))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function UE(n,o){if(1&n&&(e.ynx(0),e.YNc(1,FE,3,1,"span",13),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.fileObjs)}}function RE(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_auto_khong_co_file")," ")}function BE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),s=a.$implicit,r=a.index,l=e.oxw(3);return e.KtG(l.openDialogConfirm(s,r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",!(null!=t.fileObjs&&t.fileObjs.length)),e.xp6(1),e.Oqu(e.lcZ(3,2,"lang_auto_phuc_khao"))}}function zE(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA(),e.TgZ(7,"td",14),e.YNc(8,UE,2,1,"ng-container",15),e.YNc(9,RE,2,3,"ng-template",null,16,e.W1O),e.qZA(),e.YNc(11,BE,4,4,"td",12),e.qZA(),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(10),s=e.oxw(3);e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(e.lcZ(6,5,t.createdAt)),e.xp6(3),e.Q6J("ngIf",null==t.fileObjs?null:t.fileObjs.length)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",!s.isFrontEnd)}}function JE(n,o){if(1&n&&(e.TgZ(0,"table",11)(1,"tr")(2,"th"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"File"),e.qZA(),e.YNc(10,qE,1,0,"th",12),e.qZA(),e.YNc(11,zE,12,7,"ng-container",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"lang_auto_STT")),e.xp6(3),e.Oqu(e.lcZ(7,6,"lang_auto_thoi_gian")),e.xp6(4),e.Q6J("ngIf",!t.isFrontEnd),e.xp6(1),e.Q6J("ngForOf",t.objs)}}function HE(n,o){1&n&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function KE(n,o){1&n&&(e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"span",23),e._uU(4,"Loading..."),e.qZA()()()())}function $E(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getNextPage())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_xem_them")),e.Q6J("disabled",t.disableBtn)}}function YE(n,o){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.YNc(3,JE,12,8,"table",6),e.YNc(4,HE,3,3,"ng-template",null,7,e.W1O),e.qZA()(),e.TgZ(6,"div",8),e.YNc(7,KE,5,0,"div",9),e.YNc(8,$E,5,4,"div",10),e.qZA()()),2&n){const t=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.objs.length>0)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",i.isLoadMore),e.xp6(1),e.Q6J("ngIf",!i.isLoadMore)}}let GE=(()=>{class n extends W.Q{btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(t){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptFileObjGet(t.examId,this.data.resultObj.id??0,t.userId,t.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_file_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(t,i){let a=t.createdAt?new Date(t.createdAt).getTime()/1e3:0;this.dialog.open(qm,{data:{isShow:!0,index:i+1,type:10,createdAt:a,examId:t.examId??0,userId:t.userId??0,id:t.id??0},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.confirmData(l)})}onShowFile(t){let i={...t,index:-1};this.dialog.open(au.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i},restoreFocus:!1})}convertFileObjs(t){for(var i=[],a=0;a<t.length;a++){var s=this.castObj(t[a]);s?.files&&(s.fileObjs=this.castJsonToObj(s.files)),i.push(t[a])}return i}getNextPage(){this.getObjs(this.curPage)}getObjs(t){""==t&&this.initStatusObj(),this.isLoadMore=!0,this.examResultHistoryLogService.apiExamResultHistoryLogGetFileObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),t).subscribe(i=>{1==i.success?(this.isLoadMore=!1,this.curPage=i.data?.nextPage??"",i.data?.objs&&i.data.objs.length>0&&(this.objs=this.objs.concat(this.convertFileObjs(i.data.objs))),i.data?.nextPage||(this.disableBtn=!0),this.successStatusObj()):(this.isLoadMore=!1,this.errorStatusObj(i.message??"",!0))})}ngOnInit(){this.getObjs(""),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(t,i){super(),this.examResultHistoryLogService=t,this.dialog=i,this.isFrontEnd=!1,this.closeDialog=new e.vpe,this.dataPreviewFile=new e.vpe,this.form=new p.nJ({}),this.IAztTestbankMarkEssayDialogConfirmData={type:0,isShow:!1},this.objs=[],this.isLoadMore=!1,this.curPage="",this.offset=0,this.disableBtn=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.ml),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history-essay"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog",dataPreviewFile:"dataPreviewFile"},features:[e.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],[4,"ngIf","ngIfElse"],["noFiles",""],["azt-track-service","essay-qvqBong5nt",1,"preview-file",3,"click"],["azt-track-service","essay-CT8RATAJF6",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","essay-TB1XoFOuoU","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,QE,2,0,"div",0),e.YNc(1,YE,9,4,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,Di.lW,vn.Hw,Zt.gM,jt.Q,re.bT,re.tO],encapsulation:2}),n})();var WE=S(50871);function VE(n,o){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"azt-loading-effect"),e.qZA())}function XE(n,o){1&n&&e._UZ(0,"th")}function eM(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0|\xa0"),e.qZA())}function tM(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,eM,2,0,"span",12),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2),s=a.index,r=a.$implicit,l=e.oxw(2).$implicit;let c;e.xp6(1),e.hij(" ",t.content+(s!=(null!==(c=null==l.dataObj.answers?null:l.dataObj.answers.length)&&void 0!==c?c:0)-1&&i==r.answerContent.length-1?", ":"")," "),e.xp6(1),e.Q6J("ngIf",i!=r.answerContent.length-1)}}function nM(n,o){if(1&n&&(e.TgZ(0,"span")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,tM,3,2,"span",13),e.qZA()),2&n){const t=e.oxw(),i=t.index,a=t.$implicit;e.xp6(2),e.AsE("",e.lcZ(3,3,"lang_auto_cau")," ",i+1,":\xa0"),e.xp6(2),e.Q6J("ngForOf",a.answerContent)}}function iM(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,nM,5,5,"span",12),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.answerContent.length>0)}}function oM(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,iM,2,1,"span",13),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.dataObj.answers)}}function aM(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_chon_dap_an")))}function sM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),s=a.$implicit,r=a.index,l=e.oxw(3);return e.KtG(l.openDialogConfirm(s,r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",!(null!=t.dataObj.answers&&t.dataObj.answers.length)),e.xp6(1),e.Oqu(e.lcZ(3,2,"lang_auto_phuc_khao"))}}function rM(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),e.qZA(),e.TgZ(7,"td",14),e.YNc(8,oM,2,1,"div",12),e.YNc(9,aM,3,3,"div",12),e.qZA(),e.YNc(10,sM,4,4,"td",12),e.qZA(),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(3);e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(e.lcZ(6,5,1e3*(t.secondTime?t.secondTime:0))),e.xp6(3),e.Q6J("ngIf",null==t.dataObj||null==t.dataObj.answers?null:t.dataObj.answers.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.dataObj&&null!=t.dataObj.answers&&t.dataObj.answers.length)),e.xp6(1),e.Q6J("ngIf",!a.isFrontEnd)}}function lM(n,o){if(1&n&&(e.TgZ(0,"table",11)(1,"tr")(2,"th"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,XE,1,0,"th",12),e.qZA(),e.YNc(12,rM,11,7,"ng-container",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_auto_STT")),e.xp6(3),e.Oqu(e.lcZ(7,7,"lang_auto_thoi_gian")),e.xp6(3),e.Oqu(e.lcZ(10,9,"lang_auto_dap_an_chon")),e.xp6(2),e.Q6J("ngIf",!t.isFrontEnd),e.xp6(1),e.Q6J("ngForOf",t.objs)}}function cM(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function uM(n,o){1&n&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),e._uU(4,"Loading..."),e.qZA()()()())}function dM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getNextPage())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_xem_them")),e.Q6J("disabled",t.disableBtn)}}function mM(n,o){if(1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.YNc(3,lM,13,11,"table",6),e.YNc(4,cM,3,3,"ng-template",null,7,e.W1O),e.qZA()(),e.TgZ(6,"div",8),e.YNc(7,uM,5,0,"div",9),e.YNc(8,dM,5,4,"div",10),e.qZA()()),2&n){const t=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.objs.length>0)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",i.isLoadMore),e.xp6(1),e.Q6J("ngIf",!i.isLoadMore)}}let _M=(()=>{class n extends W.Q{convertGzipResultObjs(t){for(var i=[],a=0;a<t.length;a++){var s=this.castObj(t[a]);if(s){var r=this.zipDataService.decodeContentGzip(s?.datas??"");s.dataObj=this.castJsonToObj(r)??{},i.push(s)}}return i}convertRawToMixForAnswerObjs(t){for(var i=0;i<t.length;i++){var a=t[i].dataObj?.answers;if(a){for(var s=0;s<a.length;s++)a[s].answerContent.length&&(a[s].answerContent[0].content=this.findAlphaOfAnswerContent(a[s].answerContent[0].content,a[s].questionId));t[i].dataObj.answers=a}}return t}findAlphaOfAnswerContent(t,i){let a="";for(let r=0;r<this.questionObjs.length;r++)if(this.questionObjs[r].id==i){if(this.questionAnswerConfigService.isTrueFalseQuestion(this.questionObjs[r].answerType??0)){var s=this.questionObjs[r].answerConfigParse?.filter(l=>l.key==t&&l.questionId==i);s&&s.length>0&&(a=s[0].alpha??s[0].key??"");break}a=t}return a}getQuestionData(t,i){this.examResultHistoryLogService.apiExamResultHistoryLogGetAllExamQuestionObjsGet(t,this.data.resultObj.id??0).subscribe(a=>{if(1==a.success){let s=this.commonService.castJsonToClassObjs(Zm.x,JSON.stringify(a.data?.objs));this.questionObjs=this.questionAnswerConfigService.changeQuestionContent(s??[],!0),i(!0)}else this.errorStatusObj(a.message??"",!0),i(!1)})}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(t){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptResultObjGet(t.examId,this.data.resultObj.id??0,t.userId,t.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_du_lieu_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(t,i){this.dialog.open(qm,{data:{isShow:!0,index:i+1,type:11,createdAt:t.secondTime??0,examId:t.examId??0,userId:t.userId??0,id:t.id??0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.confirmData(r)})}getNextPage(){this.getObjs(this.curPage)}getObjs(t){""==t&&this.initStatusObj(),this.isLoadMore=!0,this.getQuestionData(this.data.examObj.id??0,i=>{i?this.examResultHistoryLogService.apiExamResultHistoryLogGetResultObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),this.curPage).subscribe(a=>{if(1==a.success){if(a.data?.objs&&a.data.objs.length>0){var s=this.convertGzipResultObjs(a.data.objs);s=this.convertRawToMixForAnswerObjs(s),this.objs=this.objs.concat(s)}this.curPage=a.data?.nextPage??"",a.data?.nextPage||(this.disableBtn=!0),this.isLoadMore=!1,this.successStatusObj()}else this.isLoadMore=!1,this.errorStatusObj(a.message??"",!0)}):(this.stopStatusObj(),this.isLoadMore=!0)})}ngOnInit(){this.getObjs(this.curPage),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.examResultHistoryLogService=t,this.zipDataService=i,this.questionAnswerConfigService=a,this.dialog=s,this.timeService=r,this.isFrontEnd=!1,this.closeDialog=new e.vpe,this.form=new p.nJ({}),this.objs=[],this.curPage="",this.offset=0,this.disableBtn=!1,this.questionObjs=[],this.isLoadMore=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ve.ml),e.Y36($i.D),e.Y36(WE.U),e.Y36(j.uw),e.Y36(Mt.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history-true-false"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],["azt-track-service","truefalse-XnX_QRUEsZ0",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","truefalse-RDGSarfASfG","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,VE,2,0,"div",0),e.YNc(1,mM,9,4,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.sg,M.O5,Di.lW,vn.Hw,Zt.gM,jt.Q,re.bT,re.ZN],encapsulation:2}),n})();function pM(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"span",10),e._UZ(2,"azt-create-avatar",11),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.qZA(),e._uU(5,"\xa0-\xa0 "),e.TgZ(6,"span",13),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("linkAvatar",t.data.studentObj.avatar)("nameCreateAvatar",t.data.studentObj.fullName)("size",30),e.xp6(2),e.hij(" ",t.data.studentObj.fullName,""),e.xp6(3),e.Oqu(e.lcZ(8,5,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi"))}}function hM(n,o){1&n&&(e.TgZ(0,"div",9)(1,"span",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi")))}function gM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",14),e.ALo(1,"mytranslate"),e.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-true-false",15),e.NdJ("closeDialog",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.btnCloseDialog(a))}),e.qZA()()()}if(2&n){const t=e.oxw();e.s9C("label",e.lcZ(1,3,"lang_auto_du_lieu_bai_lam")),e.xp6(3),e.Q6J("data",t.data)("isFrontEnd",t.isFrontEnd)}}function fM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",14),e.ALo(1,"mytranslate"),e.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-essay",16),e.NdJ("closeDialog",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.btnCloseDialog(a))})("dataPreviewFile",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.btnCloseDialog(a))}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"lang_auto_file_bai_lam")),e.xp6(3),e.Q6J("isFrontEnd",t.isFrontEnd)("data",t.data)}}function xM(n,o){if(1&n&&(e.ynx(0),e.YNc(1,fM,4,5,"mat-tab",4),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.data.resultObj.files||""==t.data.resultObj.files||"[]"==t.data.resultObj.files)}}let bM=(()=>{class n extends W.Q{btnCloseDialog(t){this.dialogRef.close(t)}constructor(t,i){super(),this.dialogRef=t,this.isFrontEnd=!1,this.data=i.dataHistory,this.isFrontEnd=i.isFrontEnd}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.so,8),e.Y36(j.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history"]],features:[e.qOj],decls:13,vars:10,consts:[[1,"box"],[1,"px-5","pt-5"],["class","flex items-center",4,"ngIf"],["mat-align-tabs","start","dynamicHeight","",1,"mt-3",2,"height","60vh",3,"selectedIndex"],[3,"label",4,"ngIf"],[4,"ngIf"],["align","end"],[1,"text-right","p-3"],["azt-track-service","result-history-mkCSltAT1",1,"btn","w-24","btn","btn-secondary",3,"click"],[1,"flex","items-center"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3"],[1,"text-danger"],[3,"label"],[2,"width","100%",3,"data","isFrontEnd","closeDialog"],[2,"width","100%",3,"isFrontEnd","data","closeDialog","dataPreviewFile"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,pM,9,7,"div",2),e.YNc(3,hM,4,3,"div",2),e.TgZ(4,"mat-tab-group",3),e.YNc(5,gM,4,5,"mat-tab",4),e.YNc(6,xM,2,1,"ng-container",5),e.ALo(7,"hasEssayInExam"),e.qZA()(),e.TgZ(8,"mat-dialog-actions",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()()),2&t){let a;e.xp6(2),e.Q6J("ngIf",!i.isFrontEnd),e.xp6(1),e.Q6J("ngIf",i.isFrontEnd),e.xp6(1),e.Q6J("selectedIndex",0),e.xp6(1),e.Q6J("ngIf","[]"==i.data.resultObj.answers),e.xp6(1),e.Q6J("ngIf",e.lcZ(7,6,null!==(a=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==a?a:0)),e.xp6(5),e.hij(" ",e.lcZ(12,8,"lang_auto_dong")," ")}},dependencies:[M.O5,j.H8,Ca.uX,Ca.SP,Fs.g,GE,_M,bt.O,re.bT,re.kK],encapsulation:2}),n})();var vM=S(73967);function yM(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_combine_exam_component")+(i+1),":\xa0"),e.xp6(3),e.Oqu(t+(a.totalMarkSubject?"/"+e.xi3(5,4,a.totalMarkSubject/a.totalSubject,"1.0-2"):""))}}function wM(n,o){if(1&n&&(e.ynx(0),e.YNc(1,yM,6,7,"div",11),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.examResultObj?null:t.examResultObj.subjectMarkValues)}}function CM(n,o){if(1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.lcZ(2,3,"lang_auto_cau_brackets"),"")}}function kM(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.YNc(4,CM,3,5,"span",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,3,"lang_auto_trac_nghiem"),": ",null!=t.examResultObj.trueFalseMark?t.examResultObj.trueFalseMark:e.lcZ(3,5,"lang_auto_chua_co_diem")," "),e.xp6(3),e.Q6J("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function TM(n,o){if(1&n&&e.YNc(0,kM,5,7,"div",10),2&n){const t=e.oxw();e.Q6J("ngIf",t.trueFalseChoiceQuestionObjs.length>0&&t.examResultObj&&t.examResultObj.totalQuestion)}}function AM(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.HOy(" ",e.lcZ(2,4,"lang_auto_tu_luan"),": ",null==t.examResultObj?null:t.examResultObj.essayMark," (",t.essayQuestionObjs.length," ",e.lcZ(3,6,"lang_auto_cau_brackets")," ")}}function OM(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"span",16),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,4,"lang_auto_tu_luan"),": "),e.xp6(3),e.Oqu(e.lcZ(5,6,"lang_auto_chua_cham")),e.xp6(2),e.AsE(" (",t.essayQuestionObjs.length," ",e.lcZ(7,8,"lang_auto_cau_brackets")," ")}}function SM(n,o){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,AM,4,8,"span",15),e.YNc(2,OM,8,10,"span",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.examResultObj?null:t.examResultObj.confirmedAt),e.xp6(1),e.Q6J("ngIf",!(null!=t.examResultObj&&t.examResultObj.confirmedAt))}}function EM(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",t.files.length," ")}}function MM(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",t.examTracks.exitFullScreen," ")}}function IM(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_so_lan_thoat_trinh_duyet"),": ",t.examTracks.blurWindow," ")}}function LM(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"span",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"azt-create-avatar",18),e.ALo(5,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_auto_giao_vien_cham"),": "),e.xp6(2),e.s9C("matTooltip",e.lcZ(5,7,"lang_auto_giao_vien_cham")+": "+(null==t.markedByObj?null:t.markedByObj.fullName)),e.Q6J("nameCreateAvatar",null==t.markedByObj?null:t.markedByObj.fullName)("size",25)("linkAvatar",null==t.markedByObj?null:t.markedByObj.avatar)}}function ZM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clickResultTrack())}),e.O4$(),e.TgZ(4,"svg",20),e._UZ(5,"path",21)(6,"polyline",22)(7,"circle",23)(8,"path",24),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function PM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showResultInfors())}),e.O4$(),e.TgZ(4,"svg",26),e._UZ(5,"circle",27)(6,"path",28)(7,"path",29)(8,"path",30),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_show_infos_test_submit"),": "))}function jM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openResultHistoryReview())}),e.O4$(),e.TgZ(4,"svg",32),e._UZ(5,"path",33)(6,"path",34)(7,"path",35),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_phuc_khao"),": "))}let DM=(()=>{class n extends W.Q{get checkHasType1Question(){let t=!1;for(let i=0;i<(this.questionObjs?.length??0);i++)if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs?.[i].answerType)){t=!0;break}return t}checkShowIconHistory(){let t=!1;return this.historyExamResultObjs&&this.historyExamResultObjs.length>0&&(t=!0),this.homeworkExamService.isOnlyTrueFalse(this.examObj?.examType??0)?!(!t||!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj)):!(!t||""!=this.examResultObj?.files&&null!=this.examResultObj?.files&&!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj))}openResultHistoryReview(){this.dialog.open(bM,{data:{dataHistory:{examObj:this.examObj,resultObj:this.examResultObj,studentObj:this.studentObj},isFrontEnd:!1},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&window.location.reload()})}showResultInfors(){this.dialog.open(vM.p,{width:"500px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){const t=this.commonService.getLocalRouter("/admin/testbank/test-result-tracking")+"/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+this.examResultIdParam;window.open(t,"_blank")}ngOnInit(){super.ngOnInit(),this.totalSubject=this.examResultObj?.subjectMarkValues?.length??3,this.totalMarkSubject=this.examResultObj?.examResultStatisticObj?.examQuestionStatisticObj?.totalMark??0}constructor(t,i,a){super(),this.answerTypeService=t,this.homeworkExamService=i,this.dialog=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.historyExamResultObjs=[],this.resultInfos=[],this.totalSubject=3,this.totalMarkSubject=30}}return n.\u0275fac=function(t){return new(t||n)(e.Y36($o.T),e.Y36(Aa.j),e.Y36(j.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-show-detail-info-for-teacher"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos"},features:[e.qOj],decls:25,vars:17,consts:[[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"font-medium","flex","items-center"],[1,"mr-3"],[1,"text-lg"],[4,"ngIf","ngIfElse"],["showNormalMark",""],["class","flex items-center mt-2",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],[1,"mr-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],["azt-track-service","show-detail-info-box-for-teacher--xrnTJmA5SE",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],["points","14 2 14 8 20 8"],["cx","8","cy","16","r","6"],["d","M9.5 17.5 8 16.25V14"],["azt-track-service","show-detail-info-box-for-teacher-setZE9eOS5A",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["cx","12","cy","12","r","10"],["d","M17 12h.01"],["d","M12 12h.01"],["d","M7 12h.01"],["azt-track-service","show-detail-info-box-for-teacher-IF9N08gpe_f",1,"btn-text-primary","ml-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 3v5h5"],["d","M3.05 13A9 9 0 1 0 6 5.3L3 8"],["d","M12 7v5l4 2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"span",6),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"span",7),e._uU(13),e.qZA()(),e.YNc(14,wM,2,1,"ng-container",8),e.YNc(15,TM,1,1,"ng-template",null,9,e.W1O),e.YNc(17,SM,3,2,"div",10),e.YNc(18,EM,3,4,"div",10),e.YNc(19,MM,3,4,"div",10),e.YNc(20,IM,3,4,"div",10),e.YNc(21,LM,6,9,"div",10),e.YNc(22,ZM,9,3,"div",10),e.YNc(23,PM,9,3,"div",10),e.YNc(24,jM,8,3,"div",10),e.qZA()()),2&t){const a=e.MAs(16);let s;e.xp6(5),e.hij(" ",e.lcZ(6,13,"lang_auto_thong_tin_chi_tiet")," "),e.xp6(5),e.hij("",e.lcZ(11,15,"lang_auto_diem_cuoi"),": "),e.xp6(3),e.Oqu((null==i.examResultObj?null:i.examResultObj.mark)+(i.totalMarkSubject?"/"+i.totalMarkSubject:"")),e.xp6(1),e.Q6J("ngIf",(null==i.examObj?null:i.examObj.subjectMarks)&&(null==i.examResultObj||null==i.examResultObj.subjectMarkValues?null:i.examResultObj.subjectMarkValues.length))("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.essayQuestionObjs.length),e.xp6(1),e.Q6J("ngIf",i.essayQuestionObjs.length),e.xp6(1),e.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),e.xp6(1),e.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),e.xp6(1),e.Q6J("ngIf",null==i.examResultObj?null:i.examResultObj.confirmedAt),e.xp6(1),e.Q6J("ngIf",i.checkHasType1Question&&i.trueFalseChoiceQuestionObjs.length>0&&(null==i.examResultObj?null:i.examResultObj.totalQuestion)),e.xp6(1),e.Q6J("ngIf",i.resultInfos.length),e.xp6(1),e.Q6J("ngIf",i.checkShowIconHistory()&&(null!==(s=null==i.examResultObj?null:i.examResultObj.userId)&&void 0!==s?s:0)>0)}},dependencies:[M.sg,M.O5,Zt.gM,Fs.g,M.JJ,re.bT],encapsulation:2}),n})();var NM=S(65076);const QM=["drawer"];function qM(n,o){1&n&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function FM(n,o){1&n&&(e.TgZ(0,"div")(1,"div",31),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_thi_sinh_chua_thi_lan_nao")," "))}function UM(n,o){if(1&n&&e._UZ(0,"app-testbank-show-offline-result",34),2&n){const t=e.oxw(3);e.Q6J("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("essayExam",!!t.essayQuestionObjs.length)("examObj",t.examObj)("offlineMarkObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.isDeletableExamResultObj)}}const _l=function(){return[]};function RM(n,o){if(1&n&&(e._UZ(0,"app-testbank-test-review-show-detail-info-for-teacher",32),e.YNc(1,UM,1,10,"app-testbank-show-offline-result",26),e._UZ(2,"app-testbank-test-review-exam-result-history",33)),2&n){const t=e.oxw(2);let i,a;e.Q6J("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("studentObj",t.studentObj)("examObj",t.examObj)("examResultObj",t.examResultObj)("markedByObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.markedByObj)("questionObjs",t.questionObjs)("essayQuestionObjs",t.essayQuestionObjs)("trueFalseChoiceQuestionObjs",t.trueFalseChoiceQuestionObjs)("files",t.files)("historyExamResultObjs",null!==(i=null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.historyExamResultObjs)&&void 0!==i?i:e.DdM(22,_l))("examTracks",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.examTracks)("resultInfos",t.resultInfos),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("historyExamResultObjs",null!==(a=null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.historyExamResultObjs)&&void 0!==a?a:e.DdM(23,_l))("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)}}function BM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",36),e._UZ(3,"rect",37)(4,"path",38)(5,"path",39),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function zM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",36),e._UZ(3,"rect",37)(4,"path",38)(5,"path",41),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function JM(n,o){if(1&n&&e._UZ(0,"app-testbank-show-offline-result",34),2&n){const t=e.oxw(2);e.Q6J("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("essayExam",!!t.essayQuestionObjs.length)("examObj",t.examObj)("offlineMarkObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.isDeletableExamResultObj)}}function HM(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",50),2&n){const t=e.oxw(3);e.Q6J("imgSrc",null==t.examObj?null:t.examObj.examHeader)}}function KM(n,o){if(1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_tong_so_cau_dung")," ",null==t.examResultObj?null:t.examResultObj.rightAnswer,".")}}function $M(n,o){if(1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_tong_so_cau_sai")," ",((null==t.examResultObj?null:t.examResultObj.totalQuestion)||0)-t.essayQuestionObjs.length-((null==t.examResultObj?null:t.examResultObj.rightAnswer)||0),".")}}const YM=function(n,o){return{correct:n,incorrect:o}};function GM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-standalone-question",53),e.NdJ("statusResult",function(a){e.CHM(t);const s=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.setClassStatusResult(a,s))}),e.qZA()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(3);e.Q6J("startQuestionIndex",s.examObj.startQuestionIndex)("expandInfo",s.examObj.expandInfo)("follower",s.followerRenderQuest)("ngClass",e.WLB(15,YM,null==i?null:i.correctAnswer,!i.correctAnswer))("userAnswersObj",s.userAnswersObj)("question",i)("index",a)("place","multiple_choice")("configExam",s.examObj)("index",a)("cur_result",s.examResultIdParam)("newFirstInGroupIndexes",e.DdM(18,_l))("showButtonCommentToTeacher",!0)("orgExamObjs",s.orgExamObjs)("displayScreen",s.displayScreen)}}function WM(n,o){if(1&n&&e.YNc(0,GM,1,19,"azt-standalone-question",52),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.examObj)}}function VM(n,o){if(1&n&&(e.TgZ(0,"mat-tab",42),e.ALo(1,"mytranslate"),e.TgZ(2,"div",43)(3,"div",44)(4,"ng-scrollbar",45)(5,"div",46),e.YNc(6,HM,1,1,"azt-loaded-img",47),e.YNc(7,KM,3,4,"div",48),e.YNc(8,$M,3,4,"div",48),e.YNc(9,WM,1,1,"ng-template",49),e.qZA()()()()()),2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,10,"lang_auto_trac_nghiem")),e.xp6(2),e.Tol(t.viewOption),e.xp6(2),e.Q6J("visibility","hover")("disabled",t.isMobile),e.xp6(2),e.Q6J("ngIf",null==t.examObj?null:t.examObj.examHeader),e.xp6(1),e.Q6J("ngIf","viewRight"==t.viewOption),e.xp6(1),e.Q6J("ngIf","viewWrong"==t.viewOption),e.xp6(1),e.Q6J("ngForOf",t.questionObjs)}}function XM(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"azt-mark-essay-new",58),e.NdJ("saveResultEvent",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.saveResultEvent(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("curSelectedTab",t.curSelectedTab)("displayScreen",t.displayScreen)("resultID",null!==(i=t.examResultIdParam)&&void 0!==i?i:0)("files",t.files)("orgExamObjs",t.orgExamObjs)("questions",t.essayQuestionObjs)("userAnswersObj",t.userAnswersObj)("iframeSrc",t.iframeSrc)("examResultObj",t.examResultObj)("configExam",t.examObj)("iframeViewMode","edit")("examObj",t.examObj)("isBackEnd",!0)("changeSelectedTab",t.changeSelectedTab)("hasLoadedData",t.hasLoadedData)}}function eI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-mark-essay",59),e.NdJ("saveResultEvent",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.saveResultEvent(a))}),e.qZA()}if(2&n){const t=e.oxw(3);let i;e.Q6J("displayScreen",t.displayScreen)("resultID",null!==(i=t.examResultIdParam)&&void 0!==i?i:0)("files",t.files)("questions",t.essayQuestionObjs)("userAnswersObj",t.userAnswersObj)("iframeSrc",t.iframeSrc)("examResultObj",t.examResultObj)("configExam",t.examObj)("iframeViewMode","edit")("examObj",t.examObj)("isBackEnd",!0)("hasLoadedData",t.hasLoadedData)}}function tI(n,o){if(1&n&&(e.TgZ(0,"mat-tab",54),e.ALo(1,"mytranslate"),e.TgZ(2,"div",55)(3,"div",56),e.YNc(4,XM,2,15,"ng-container",13),e.YNc(5,eI,1,12,"ng-template",null,57,e.W1O),e.qZA()()()),2&n){const t=e.MAs(6),i=e.oxw(2);e.s9C("label",e.lcZ(1,3,"lang_auto_tu_luan")),e.xp6(4),e.Q6J("ngIf",i.checkMarkNote)("ngIfElse",t)}}const nI=function(n,o){return{"w-85":n,"w-25":o}},iI=function(n){return{"ml-25":n}},oI=function(n){return{"ml-5":n}};function aI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-drawer-container",6)(1,"mat-drawer",7,8),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeStatusNav())}),e.TgZ(3,"div",9)(4,"div",10),e._UZ(5,"azt-basic-info-box",11),e.qZA(),e.TgZ(6,"div",12),e.YNc(7,FM,4,3,"div",13),e.YNc(8,RM,3,24,"ng-template",null,14,e.W1O),e.qZA(),e._UZ(10,"app-testbank-test-review-show-next-back-button",15),e.qZA()(),e.TgZ(11,"mat-drawer-content",16)(12,"div",17)(13,"div",18)(14,"div",19),e.YNc(15,BM,6,3,"button",20),e.YNc(16,zM,6,3,"button",21),e.TgZ(17,"div",22),e._uU(18),e.qZA(),e.TgZ(19,"div",23),e.GkF(20,24),e._UZ(21,"app-testbank-test-review-export-pdf-menu",25),e.qZA()(),e.YNc(22,JM,1,10,"app-testbank-show-offline-result",26),e.TgZ(23,"div",27)(24,"mat-tab-group",28),e.NdJ("selectedTabChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onTabChanged(a))})("selectedIndexChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.curSelectedTab=a)}),e.YNc(25,VM,10,12,"mat-tab",29),e.YNc(26,tI,7,5,"mat-tab",30),e.qZA()()()()()()}if(2&n){const t=e.MAs(9),i=e.oxw(),a=e.MAs(6);let s,r;e.Q6J("hasBackdrop",i.hasBackdrop),e.xp6(1),e.s9C("opened",i.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(28,nI,i.isMobile,!i.isMobile))("mode",i.mode),e.xp6(4),e.Q6J("studentObj",i.studentObj),e.xp6(2),e.Q6J("ngIf",0===(null==i.initDataResult||null==i.initDataResult.data||null==i.initDataResult.data.historyExamResultObjs?null:i.initDataResult.data.historyExamResultObjs.length))("ngIfElse",t),e.xp6(3),e.Q6J("testedUserObjs",i.testedUserObjs)("classroomId",null!==(s=null==i.classroomObj?null:i.classroomObj.id)&&void 0!==s?s:-1)("historyExamResultObjs",null!==(r=null==i.initDataResult||null==i.initDataResult.data?null:i.initDataResult.data.historyExamResultObjs)&&void 0!==r?r:e.DdM(31,_l)),e.xp6(1),e.Q6J("ngClass",e.VKq(32,iI,!i.isMobile&&i.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(34,oI,!i.isMobile&&i.isOpenSideNav)),e.xp6(3),e.Q6J("ngIf",!i.isOpenSideNav||i.isMobile),e.xp6(1),e.Q6J("ngIf",i.isOpenSideNav&&!i.isMobile),e.xp6(1),e.s9C("matTooltip",null==i.examObj?null:i.examObj.name),e.xp6(1),e.hij(" ",null==i.examObj?null:i.examObj.name," "),e.xp6(2),e.Q6J("ngTemplateOutlet",a),e.xp6(1),e.Q6J("examResultIdParam",i.examResultIdParam)("userIdParam",i.userIdParam)("studentIdParam",i.studentIdParam)("examIdParam",i.examIdParam)("examObj",i.examObj)("examResultObj",i.examResultObj)("essayQuestionObjs",i.essayQuestionObjs),e.xp6(1),e.Q6J("ngIf",i.isMobileWebView),e.xp6(2),e.Q6J("selectedIndex",i.curSelectedTab),e.xp6(1),e.Q6J("ngIf",i.trueFalseChoiceQuestionObjs.length>0),e.xp6(1),e.Q6J("ngIf",i.essayQuestionObjs.length>0&&i.examObj&&i.examResultObj)}}function sI(n,o){1&n&&(e.TgZ(0,"button",76)(1,"span",77),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_sai")," "))}function rI(n,o){1&n&&(e.TgZ(0,"button",78)(1,"span",77),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dung")," "))}function lI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",60),e.YNc(1,sI,4,3,"button",61),e.YNc(2,rI,4,3,"button",62),e.TgZ(3,"button",63),e.O4$(),e.TgZ(4,"svg",64),e._UZ(5,"polygon",65),e.qZA(),e.kcU(),e.TgZ(6,"span",66),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"mat-menu",67,68)(11,"div",69)(12,"ul",70)(13,"li")(14,"label",71),e._uU(15),e.ALo(16,"mytranslate"),e.TgZ(17,"div",72)(18,"input",73),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeViewOption("viewRight"))})("click",function(a){return a.stopPropagation()}),e.qZA()()()(),e.TgZ(19,"li")(20,"label",74),e._uU(21),e.ALo(22,"mytranslate"),e.TgZ(23,"div",72)(24,"input",75),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeViewOption("viewWrong"))})("click",function(a){return a.stopPropagation()}),e.qZA()()()()()()()}if(2&n){const t=e.MAs(10),i=e.oxw();e.xp6(1),e.Q6J("ngIf","viewWrong"===i.viewOption),e.xp6(1),e.Q6J("ngIf","viewRight"===i.viewOption),e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.hij(" ",e.lcZ(8,8,"lang_testbank_testted_list_sort")," "),e.xp6(8),e.hij(" ",e.lcZ(16,10,"lang_auto_cau_dung")," "),e.xp6(3),e.Q6J("checked","viewRight"==i.viewOption),e.xp6(3),e.hij(" ",e.lcZ(22,12,"lang_auto_cau_sai")," "),e.xp6(3),e.Q6J("checked","viewWrong"==i.viewOption)}}let cI=(()=>{class n extends W.Q{openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.dialog.open(Qs._,{data:{isShow:!0,content:i},restoreFocus:!1})})}onResize(t){t.target.innerWidth<980?(this.isMobile=!0,this.mode="over",this.hasBackdrop=!0):(this.isMobile=!1,this.mode="side",this.hasBackdrop=!1)}openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}onChangeViewOption(t){this.viewOption=this.viewOption==t?"viewAll":t}onTabChanged(t){this.matTabGroupIndex=t.index,this.changeSelectedTab=!0}setClassStatusResult(t,i){(0,pE.H)(100).subscribe(()=>i.isStatusResult=t)}saveResultEvent(t){t&&this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(i=>{1==i.success?(this.examResultObj=i?.data?.examResultObj,this.orgExamObjs=i.data?.orgExamObjs??[],this.initDataResult?.data?.markedByObj&&(this.initDataResult.data.markedByObj.fullName=i.data?.markedByObj?.fullName??"",this.initDataResult.data.markedByObj.avatar=i.data?.markedByObj?.avatar)):this.errorStatusObj(i.message??"",!0)})}processConvertData(t){if(t.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObj(t.data,this.testedUserObjs,this.studentObj),this.examObj=t?.data?.examObj,this.examResultObj=t?.data?.examResultObj,this.files=this.commonService.myParseJson(this.examResultObj?.files??"")??[],this.resultInfos=this.commonService.willDeleteParseJson(this.examResultObj?.infors??"")??[],this.classroomObj=t?.data?.classroomObj;const i=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(t.data.questionObjs??[]));this.followerRenderQuest.setNumQuest(i?.length||0),this.questionObjs=i,this.questionObjs?.forEach(r=>{r.correctAnswer=this.commonService.filterArray(t?.data?.correctQuestionIds,r.id),r.isRoleTeacher=!0}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs??[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(this.castJsonToObj(t.data.examResultObj?.answers??"")??[]),this.getQuestionCanFeedback(),this.hasLoadedData=!0;const a=parseInt(this.iframeSrc.split("?")[1]?.split("=")[1]),s=1e6;if(this.examResultObj?.result){const r=this.castJsonToObj(this.examResultObj?.result??"");this.checkMarkNote=!(!r||!r.urlDataMark)}else this.checkMarkNote=a>s}}getQuestionCanFeedback(){let t=[];Array.isArray(this.questionObjs)&&(this.questionObjs.forEach(i=>{i.id&&!this.commonService.filterArray(t,i.id)&&t.push(i.id)}),this.subscriptions.add(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examObj?.id,t.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];if(Array.isArray(this.questionObjs))for(let s=0;s<this.questionObjs.length;s++)a.forEach(r=>{this.questionObjs&&this.questionObjs[s].id==r.questionId&&(this.questionObjs[s].enableFeedback=r.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)})))}getOrgExamObjs(){this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(t=>{1==t.success?this.orgExamObjs=t.data?.orgExamObjs??[]:this.errorStatusObj(t.message??"",!0)})}ngOnInit(){this.iframeSrc=this.envService.getEnvValue("classliveUrl")??"",(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id")??"0",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0,this.initDataResult&&this.processConvertData(this.initDataResult)}),this.getOrgExamObjs(),this.answerBoxService.switchEssayTabMessage.subscribe(t=>{t&&(this.curSelectedTab=1,setTimeout(()=>{window.scroll(0,0)},0))}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f){super(),this.dialog=t,this.activeRoute=i,this.docxService=a,this.envService=s,this.testReviewService=r,this.examResultService=l,this.testMarketFeedbackService=c,this.answerBoxService=d,this.exportResultService=f,this.displayScreen=3,this.curSelectedTab=0,this.backToLink="",this.examResultIdParam=0,this.cur_cateId="0",this.viewOption="viewAll",this.matTabGroupIndex=0,this.drawer=void 0,this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.orgExamObjs=[],this.followerRenderQuest=new Xa.G,this.iframeSrc="",this.hasLoadedData=!1,this.checkMarkNote=!1,this.changeSelectedTab=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(T.gz),e.Y36(xu.x),e.Y36(Qm.D),e.Y36(hE.l),e.Y36(Ve.kS),e.Y36(Xr.nC),e.Y36(gE.g),e.Y36(il.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-test-review-for-teacher"]],viewQuery:function(t,i){if(1&t&&e.Gf(QM,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs",displayScreen:"displayScreen"},features:[e.qOj],decls:7,vars:5,consts:[[1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],["hasResult",""],[3,"msg","show","percent"],["ShowCorrectIncorrectFilterTpl",""],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"box"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"relative",3,"studentObj"],[1,"p-3","sm:pb-0"],[4,"ngIf","ngIfElse"],["allReadyTested",""],[3,"testedUserObjs","classroomId","historyExamResultObjs"],[3,"ngClass"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","examResultObj","essayQuestionObjs"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj",4,"ngIf"],[1,"box","flex-1"],[3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"flex","justify-center"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","files","historyExamResultObjs","examTracks","resultInfos"],[3,"historyExamResultObjs","backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"label"],["id","multipleChoiceWrap"],[1,"azt-student-list","scrollable-content"],["pointerEventsMethod","scrollbar",2,"height","calc(100vh - 166px)","width","100%",3,"visibility","disabled"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","px-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"px-2","font-bold"],["class","relative",3,"startQuestionIndex","expandInfo","follower","ngClass","userAnswersObj","question","index","place","configExam","cur_result","newFirstInGroupIndexes","showButtonCommentToTeacher","orgExamObjs","displayScreen","statusResult",4,"ngIf"],[1,"relative",3,"startQuestionIndex","expandInfo","follower","ngClass","userAnswersObj","question","index","place","configExam","cur_result","newFirstInGroupIndexes","showButtonCommentToTeacher","orgExamObjs","displayScreen","statusResult"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],["isFrameMark",""],[3,"curSelectedTab","displayScreen","resultID","files","orgExamObjs","questions","userAnswersObj","iframeSrc","examResultObj","configExam","iframeViewMode","examObj","isBackEnd","changeSelectedTab","hasLoadedData","saveResultEvent"],[3,"displayScreen","resultID","files","questions","userAnswersObj","iframeSrc","examResultObj","configExam","iframeViewMode","examObj","isBackEnd","hasLoadedData","saveResultEvent"],[1,"filter","flex"],["class","btn btn-sm btn-danger mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],["class","btn btn-sm btn-success mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"azt-hidden","md:block"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-teacher-Pz5-Lg4oM39","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-teacher-l9jNq9CQL6R","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],[1,"btn","btn-sm","btn-danger","mx-2",2,"cursor","default","padding","6px 4px"],[1,"azt-hidden","text-white","md:block"],[1,"btn","btn-sm","btn-success","mx-2",2,"cursor","default","padding","6px 4px"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("resize",function(s){return i.onResize(s)},!1,e.Jf7),e.YNc(1,qM,3,3,"div",1),e.YNc(2,aI,27,36,"ng-template",null,2,e.W1O),e.qZA(),e._UZ(4,"azt-export-docx-loading-box",3),e.YNc(5,lI,25,14,"ng-template",null,4,e.W1O)),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!(null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.examResultObj||null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.historyExamResultObjs))("ngIfElse",a),e.xp6(3),e.Q6J("msg",i.exportResultService.keyLoading)("show",i.exportResultService.isLoading)("percent",i.exportResultService.percent)}},dependencies:[M.mk,M.sg,M.O5,M.tP,en.VK,en.p6,Ni.jA,Ni.kh,Ni.LW,Ca.uX,Ca.SP,Zt.gM,x.KC,CE,lu.l,kE.s,Ta.O,ol,EE,ME.i,IE,LE,DM,NM.P,re.bT],styles:[".edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{margin:10px 10px 18px;padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}.w-70[_ngcontent-%COMP%]{width:70%}.pos-menu[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:0}.pos-menu-v2[_ngcontent-%COMP%]{position:absolute;top:-2%;right:0}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);overflow-x:hidden;display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.list-time[_ngcontent-%COMP%]{list-style:none;background-color:#fff;margin:0 10px;padding:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.list-time[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.btn-times[_ngcontent-%COMP%]{display:block;transition:all .5s;background:#fafafa;width:100%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrap[_ngcontent-%COMP%]{background-color:#fff;padding:30px;position:relative}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.button-show-error[_ngcontent-%COMP%]:hover, .button-show-success[_ngcontent-%COMP%]:hover{background-color:#d8d8d8;color:#00f}.button-show-all[_ngcontent-%COMP%]:hover{color:#00f}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}.menu-button-filter[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important;border:1px solid rgba(234,234,234,.8901960784);border-radius:3px;text-transform:none;padding-right:6px;padding-bottom:3px;color:#414141;line-height:20px;background:whitesmoke}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#boxQAButtons[_ngcontent-%COMP%]{position:fixed;right:20px;z-index:99999999999999;bottom:10px;background-color:#fff;border:1px solid #a3a3a3;padding:5px;border-radius:4px}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}.btn-copy[_ngcontent-%COMP%]{font-size:14px;transition:all .5s;border:none;background:transparent;text-transform:inherit;padding-left:0;color:#00b2c3}.btn-copy[_ngcontent-%COMP%]:hover{color:#047781}@media screen and (max-width: 768px){#tester-info[_ngcontent-%COMP%]{height:auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{right:13px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:13px}}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}.icon-click-show-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:lightgrey;font-size:25px;text-align:center;height:auto;width:30px;padding:3px 0;border-radius:3px}"]}),n})();function uI(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function dI(n,o){if(1&n&&e._UZ(0,"azt-test-review-for-teacher",3),2&n){const t=e.oxw();e.Q6J("initDataResult",t.initDataLastResultExam)("testedUserObjs",t.testedUserObjs)("displayScreen",4)}}let mI=(()=>{class n extends W.Q{openResultHistoryReview(t){this.examResultHistoryDialog=t}closeResultHistoryReview(t){t&&location.reload(),this.examResultHistoryDialog=void 0}onShowFile(t){this.isShowPreviewFile=!0,this.previewFile=t}onFileClose(){this.isShowPreviewFile=!1,this.previewFile=void 0}getAndProcessData(){this.initStatusObj();let t=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.activeRoute.snapshot.paramMap.get("user_id")??"",a=this.activeRoute.snapshot.paramMap.get("student_id")??"",s=Number(this.activeRoute.snapshot.paramMap.get("result_id"));this.examResultService.apiExamResultGetLastResultGet(t,i,a,s??0).subscribe(r=>{1==r.success?(this.initDataLastResultExam=r,this.headerTitle=r?.data?.examObj?.name??"",this.translateMetaTitle(r.data?.examObj?.name),this.successStatusObj()):this.errorStatusObj(r.message??"",!0)})}translateMetaTitle(t){this.commonService.getTranslate("lang_auto_cham_de_thi").subscribe(i=>{this.commonService.translateMetaData({title:i+" "+t,description:i+t,image:"lang_cms_test_image"})})}ngOnInit(){let t=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.commonService.getMyQueryParam("backto");this.backToLink=i||"/admin/testbank/exam-results-list/"+(this.initDataLastResultExam?.data?.examObj?.categoryId?this.initDataLastResultExam?.data?.examObj?.categoryId:0)+"/"+t+"/0",this.getAndProcessData(),super.ngOnInit()}constructor(t,i,a,s,r){super(),this.activeRoute=t,this.browserStorageService=i,this.examResultService=a,this.sortService=s,this.testedListApiService=r,this.headerTitle="",this.examResultHistoryDialog=void 0,this.isShowPreviewFile=!1,this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(we.z),e.Y36(Ve.kS),e.Y36(is.K),e.Y36(nl.x))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-review"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"initDataResult","testedUserObjs","displayScreen"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,uI,1,0,"azt-loading-effect",1),e.YNc(2,dI,1,3,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,cI,pn._],encapsulation:2}),n})();function _I(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function pI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"h3",4),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"ui-create-offline-exam",5),e.NdJ("handleSaveData",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleUpdateQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_core_update_exam_offline_title")," "),e.xp6(2),e.Q6J("form",t.form)("type",t.type)("dataExamOffline",t.dataExamOffline)}}let hI=(()=>{class n extends W.Q{constructor(t,i,a){super(),this.formBuilder=t,this.activeRoute=i,this.offlineExamCreatorV2Service=a,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.form=new p.nJ({}),this.backToLink="",this.prevData="",this.type=po.edit,this.form=this.formBuilder.group({nameExam:new p.p4("",[p.kI.required,Ai._.noWhiteSpace]),codeExamList:t.array([]),schoolLevel:new p.p4(0,[p.kI.required]),schoolSubject:new p.p4(0,[p.kI.required])})}handleUpdateQuestionAndExam(t){let i=[],a=[],s=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";t.forEach((l,c)=>{l.isUpdate?i.push({offlineMixQuestionId:l.offlineMixQuestionId,offlineQuestionObjs:l.offlineQuestionObjs}):a.push({offlineMixQuestionHashId:l.offlineMixQuestionHashId,offlineQuestionObjs:l.offlineQuestionObjs})}),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:s,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a}).subscribe(l=>{if(1===l.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const c=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(c)}else this.errorStatusObj(l.message??"",!0)}))}getData(){this.initStatusObj();let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=Number(this.commonService.getMyParam(this.activeRoute,"offline_id"))??0;this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateOneOfflineMixQuestionIdGet(t,i).subscribe(a=>{if(1===a.success){const s=a.data?.updateOfflineExamRequest;s&&(this.dataExamOffline.updateOfflineMixQuestionObjs=s.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=s.schoolLevelId,this.dataExamOffline.examHashId=t,this.dataExamOffline.schoolSubjectId=s.schoolSubjectId,this.dataExamOffline.name=s.name),this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){super.ngOnInit();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline_title",description:"lang_core_update_exam_offline_title",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(i=>{let a=JSON.stringify(i);a!=this.prevData&&(this.prevData=a,this.form.patchValue(i))}),this.getData()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(T.gz),e.Y36(Rn.Jt))},n.\u0275cmp=e.Xpm({type:n,selectors:[["update-exam-offline"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,_I,1,0,"azt-loading-effect",1),e.YNc(2,pI,5,6,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[M.O5,jt.Q,pn._,Kr,re.bT],encapsulation:2}),n})();var gI=S(6593);function fI(n,o){1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"span",4),e._uU(3,"Loading..."),e.qZA()()())}function xI(n,o){if(1&n&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fileOption.name)}}function bI(n,o){if(1&n&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.fileNameCustom)}}function vI(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_dung_luong"),": ",t.fileMb," MB | ")}}function yI(n,o){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,vI,3,4,"span",22),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0!=t.fileMb),e.xp6(1),e.AsE("",e.lcZ(3,3,"lang_auto_loai")," : ",t.fileOption.mimes,"")}}function wI(n,o){1&n&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function CI(n,o){if(1&n&&(e.TgZ(0,"a",23)(1,"mat-icon",16),e._uU(2,"save_alt"),e.qZA()()),2&n){const t=e.oxw(2);e.uIk("href",t.rootLink,e.LSH)("download",t.fileOption.name)}}function kI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",28)(2,"audio",29)(3,"source",30),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA(),e._uU(4," Your browser does not support the audio element. "),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.cdnLink,e.LSH),e.uIk("type",null==t.fileOption?null:t.fileOption.mimes)}}function TI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"video",32)(3,"source",30),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA(),e.TgZ(4,"p",33),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.s9C("poster",t.videoThumbUrl,e.LSH),e.xp6(1),e.Q6J("src",t.cdnLink,e.LSH),e.uIk("type",null==t.fileOption?null:t.fileOption.mimes),e.xp6(2),e.Oqu(e.lcZ(6,4,"lang_auto_ban_dang_su_dung_trinh_duyet_khong_ho_tro_xem_video_truc_tuyen"))}}function AI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"iframe",34),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("src",t.cdnLink,e.uOi)}}function OI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",31)(2,"img",35),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.uIk("src",t.cdnLink,e.LSH)}}function SI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",36)(2,"iframe",37),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.cdnLink,e.uOi)}}function EI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",38)(2,"pdf-viewer",39),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.cdnLink)("show-all",!0)}}function MI(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",24)(2,"div",25),e.YNc(3,kI,5,2,"div",22),e.YNc(4,TI,7,6,"div",22),e.YNc(5,AI,2,1,"div",22),e.YNc(6,OI,3,1,"div",22),e.YNc(7,SI,3,1,"div",22),e.YNc(8,EI,3,2,"div",22),e._UZ(9,"div",26),e.qZA(),e._UZ(10,"div",27),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf","audio"===t.typeFile),e.xp6(1),e.Q6J("ngIf","video"===t.typeFile),e.xp6(1),e.Q6J("ngIf","vimeo"===t.typeFile),e.xp6(1),e.Q6J("ngIf","image"===t.typeFile),e.xp6(1),e.Q6J("ngIf","officeapps"===t.typeFile),e.xp6(1),e.Q6J("ngIf","pdf"===t.typeFile)}}function II(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",40)(3,"img",41),e.NdJ("load",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onLoad())}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.uIk("src",t.linkUrl,e.LSH)}}function LI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),e._UZ(4,"div",9),e.qZA(),e.YNc(5,xI,2,1,"div",10),e.YNc(6,bI,2,1,"div",10),e.YNc(7,yI,4,5,"div",11),e.YNc(8,wI,3,3,"div",11),e.qZA(),e.TgZ(9,"div",12)(10,"span",13),e.YNc(11,CI,3,2,"a",14),e.qZA(),e.TgZ(12,"span",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.btnClosePreview())}),e.TgZ(13,"mat-icon",16),e._uU(14,"close"),e.qZA()()()(),e.TgZ(15,"div",17),e.YNc(16,MI,11,6,"ng-container",18),e.YNc(17,II,4,1,"ng-template",null,19,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(18),i=e.oxw();e.xp6(5),e.Q6J("ngIf",null!=i.fileOption),e.xp6(1),e.Q6J("ngIf",null==i.fileOption),e.xp6(1),e.Q6J("ngIf",null!=i.fileOption),e.xp6(1),e.Q6J("ngIf",null==i.fileOption),e.xp6(3),e.Q6J("ngIf",null!=i.fileOption),e.xp6(5),e.Q6J("ngIf",0==i.typePreview)("ngIfElse",t)}}let ZI=(()=>{class n extends W.Q{onLoad(){this.stopStatusObj()}initData(){if(0==this.typePreview){let t=this.fileOption?.size?Number(this.fileOption.size):0,i=this.fileOption?.mimes?this.fileOption.mimes:"";if(this.cdnLink=this.cdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(t),this.typeFile=(0,J.Z9)(i),"string"==typeof this.cdnLink&&(this.isVimeoLink=this.cdnLink.includes("https://player.vimeo.com/")||this.cdnLink.includes("https://mega.nz")),this.isVimeoLink&&(this.typeFile="vimeo"),"string"==typeof this.cdnLink&&""!=this.cdnLink)switch(this.typeFile){case"pdf":this.cdnLink=this.cdnLink;break;case"officeapps":this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.envService.getLinkEmbedDocument(this.cdnLink));break;default:this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.cdnLink)}}else this.linkUrl=this.cdnService.getMyCdn(this.linkUrl??"");setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.closePreview.emit()}getFileMB(t){return t&&t>0?(t/=1048576).toFixed(2):0}reloadFrame(t){let i=document.getElementById(t);i&&i.parentNode&&i.parentNode.replaceChild(i.cloneNode(),i)}ngOnInit(){document.body.classList.add("overflow-hidden"),setTimeout(()=>{this.initData()},0),this.videoThumbUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/video-thumb.png"),this.initStatusObj(),super.ngOnInit()}constructor(t,i,a){super(),this.dom=t,this.cdnService=i,this.envService=a,this.typePreview=0,this.fileNameCustom="",this.closePreview=new e.vpe,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.isVimeoLink=!1}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(gI.H7),e.Y36(xt.U),e.Y36(Qm.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-media"]],inputs:{fileOption:"fileOption",typePreview:"typePreview",fileNameCustom:"fileNameCustom",linkUrl:"linkUrl"},outputs:{closePreview:"closePreview"},features:[e.qOj],decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"loading-block"],["role","status",1,"spinner-border","text-secondary",2,"width","5rem","height","5rem"],[1,"sr-only"],[1,"file-preview"],[1,"file-preview__header","flx","flx-sp-btw"],[1,"file-preview__header-left"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-image","url('https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/documents.png')","background-size","cover"],["class","file-preview__header__title",4,"ngIf"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"file-preview__controls-container"],["azt-track-service","preview-media-rf73f2TV3G","class","clickable download","target","_blank",4,"ngIf"],["azt-track-service","preview-media-l05RPS6FbP",1,"file-preview__buttons-container",3,"click"],[2,"color","rgb(53, 53, 53)","cursor","pointer"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"file-preview__header__title"],[1,"file-preview__header__send-time"],[4,"ngIf"],["azt-track-service","preview-media-rf73f2TV3G","target","_blank",1,"clickable","download"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],["controls",""],[3,"src","load"],[1,"pl-2","pr-2","mt-3"],["id","my-video","playsinline","playsinline","controls","","preload","auto","data-setup","{}",1,"video-js",2,"max-height","calc(100vh - 80px)","width","100%","padding-bottom","1rem",3,"poster"],[1,"vjs-no-js"],["frameborder","0","allowfullscreen","",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],[1,"pl-2","pr-2","mp-0"],["frameborder","0",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],[1,"pl-2","pr-2","mt-3","block-img"],["alt","Responsive image",1,"img-fluid","image-preview",3,"load"]],template:function(t,i){1&t&&(e.YNc(0,fI,4,0,"div",0),e.YNc(1,LI,19,7,"div",1)),2&t&&(e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",(null!=i.fileOption||""!=i.linkUrl)&&!i.statusObj.loading))},dependencies:[M.O5,vn.Hw,m.rQ,re.bT],styles:[".file-preview[_ngcontent-%COMP%]{background:#ECF0F5;position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0}.block-img[_ngcontent-%COMP%]{background:#a3a3a3;width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#ecf0f5}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed;background:#ECF0F5}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;background:#fff;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;color:#fff;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#e5efff}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;color:#222;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{color:#fff;margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.file-preview__buttons-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;position:relative}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),n})(),PI=(()=>{class n extends W.Q{ngOnInit(){this.form=this.fb.group({labelQuestion:new p.p4(this.expandInfoParse.label??"C\xe2u")}),super.ngOnInit()}saveConfig(){this.closeDialog.emit(this.form.controls.labelQuestion.value&&this.form.controls.labelQuestion.value.length>0?{label:this.form.controls.labelQuestion.value}:{label:void 0})}constructor(t){super(),this.fb=t,this.closeDialog=new e.vpe,this.form=new p.nJ({})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-expand-info"]],inputs:{expandInfoParse:"expandInfoParse"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:31,vars:14,consts:[[1,"label-info_bg"],[1,"label-info","p-4"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal",3,"formGroup"],[1,"row","mt-3"],[1,"col-md-12"],[1,"col-md-12","mt-2"],["formControlName","labelQuestion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","C\xe2u"],["value","Question"],["value","B\xe0i"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-echJ9MnECDy",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-FNP5lMszlU9",1,"btn","w-24","btn-primary",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",5)(10,"form",7)(11,"div",8)(12,"div",9)(13,"p"),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.TgZ(16,"div",10)(17,"select",11)(18,"option",12),e._uU(19,"C\xe2u"),e.qZA(),e.TgZ(20,"option",13),e._uU(21,"Question"),e.qZA(),e.TgZ(22,"option",14),e._uU(23,"B\xe0i"),e.qZA()()()()()(),e.TgZ(24,"div",15)(25,"button",16),e.NdJ("click",function(){return i.closeDialog.emit()}),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.TgZ(28,"button",17),e.NdJ("click",function(){return i.saveConfig()}),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()()()()()()),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,6,"lang_core_exam_config_question_label")),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(4),e.Oqu(e.lcZ(15,8,"lang_core_exam_config_question_label_description")),e.xp6(12),e.hij(" ",e.lcZ(27,10,"lang_auto_dong")," "),e.xp6(2),e.Q6J("disabled",i.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(30,12,"lang_auto_luu")," "))},dependencies:[p._Y,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u,Bt.M,re.bT],styles:[".label-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.label-info[_ngcontent-%COMP%]{max-width:400px;border-radius:.375rem;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();function jI(n,o){1&n&&e._UZ(0,"azt-loading-effect")}function DI(n,o){1&n&&(e.TgZ(0,"div",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_testted_list_teacher_confirmed")," "))}function NI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-expand-info",40),e.NdJ("closeDialog",function(a){e.CHM(t);const s=e.oxw(5);return e.KtG(s.closeDialogConfigExpandInfo(a))}),e.qZA()}if(2&n){const t=e.oxw(5);e.Q6J("expandInfoParse",t.expandInfoParse)}}function QI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-split-point",41),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.closeDialogSpitPoint())})("setPoint",function(a){e.CHM(t);const s=e.oxw(5);return e.KtG(s.setPointTest(a))}),e.qZA()}if(2&n){const t=e.oxw(5);e.Q6J("data",t.dataSpitPoint)}}function qI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.showAllResultQuestion())}),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openExamInfoDialog())}),e.ALo(8,"mytranslate"),e.TgZ(9,"mat-icon"),e._uU(10,"info"),e.qZA()()(),e.TgZ(11,"div",28)(12,"div",29)(13,"div",30)(14,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openDialogConfigExpandInfo())}),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openDialogSpitPoint())}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()(),e.YNc(20,NI,1,1,"azt-expand-info",33),e.YNc(21,QI,1,1,"azt-split-point",34),e.qZA(),e.TgZ(22,"div",35)(23,"div",36)(24,"span",37),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"input",38),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.nexToQuestionConf.value=a)})("focus",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!1))}),e.qZA(),e.TgZ(28,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())}),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw(4);e.xp6(3),e.AsE(" ",0==t.defaultShowResultMedia?e.lcZ(4,11,"lang_testbank_update_exam_show"):e.lcZ(5,13,"lang_testbank_update_exam_hide")," ",e.lcZ(6,15,"lang_testbank_update_exam_explain")," "),e.xp6(4),e.s9C("matTooltip",e.lcZ(8,17,"lang_auto_chi_tiet_de_thi")),e.xp6(8),e.Oqu(e.lcZ(16,19,"lang_core_exam_config_question_label")),e.xp6(3),e.Oqu(e.lcZ(19,21,"lang_testbank_update_exam_split_points")),e.xp6(2),e.Q6J("ngIf",null==t.dataConfigExpandInfo?null:t.dataConfigExpandInfo.isShow),e.xp6(1),e.Q6J("ngIf",null==t.dataSpitPoint?null:t.dataSpitPoint.isShow),e.xp6(4),e.Oqu(e.lcZ(26,23,"lang_testbank_create_exam_width_file_pdf_go_to")),e.xp6(2),e.Q6J("min",1)("ngModel",t.nexToQuestionConf.value),e.xp6(2),e.Oqu(e.lcZ(30,25,"lang_auto_den"))}}function FI(n,o){1&n&&(e.TgZ(0,"span",48),e._uU(1,",\xa0"),e.qZA())}function UI(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"b",46),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(6);let l;return e.KtG(r.goToQuestionAll(null!==(l=s.index)&&void 0!==l?l:0))}),e.ALo(2,"mytranslate"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,FI,2,0,"span",47),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(6);let s;e.xp6(1),e.s9C("matTooltip",e.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),e.xp6(2),e.AsE("",e.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(s=t.index)&&void 0!==s?s:0)+1,""),e.xp6(2),e.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function RI(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"div",44),e.YNc(4,UI,6,8,"ng-container",45),e.qZA(),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),e.xp6(3),e.Q6J("ngForOf",t.invalidTypeQuestionConfig)}}function BI(n,o){if(1&n&&(e.TgZ(0,"div",42)(1,"mat-icon",43),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,RI,5,4,"ng-container",3),e.qZA()),2&n){const t=e.oxw(4);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),e.xp6(2),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0)}}function zI(n,o){1&n&&(e.TgZ(0,"span",52),e._uU(1,"|"),e.qZA())}function JI(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",50),e.NdJ("click",function(a){const r=e.CHM(t).$implicit,l=e.oxw(5);return e.KtG(l.onShowFile(a,r,-1))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,zI,2,0,"span",51),e.BQk()}if(2&n){const t=o.index,i=e.oxw(5);e.xp6(2),e.AsE("",e.lcZ(3,3,"lang_testbank_update_exam_image")," ",t+1,""),e.xp6(2),e.Q6J("ngIf",t<i.cropperData.length-1)}}function HI(n,o){if(1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,JI,5,5,"ng-container",45),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),e.xp6(2),e.Q6J("ngForOf",t.cropperData)}}function KI(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",53),2&n){const t=e.oxw(4);e.Q6J("imgSrc",t.examObj.examHeader)}}function $I(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",79)(2,"button",80),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.showFeedbackQuestionDialog(a))}),e.ALo(3,"mytranslate"),e._UZ(4,"lucide-icon",81),e.qZA()(),e.TgZ(5,"div",78),e._uU(6,"|"),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.s9C("matTooltip",e.lcZ(3,1,"lang_auto_bao_loi")))}function YI(n,o){1&n&&(e.TgZ(0,"div",82),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",83),e._UZ(3,"line",84)(4,"path",85),e.qZA()()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function GI(n,o){1&n&&(e.TgZ(0,"div",78),e._uU(1,"|"),e.qZA())}function WI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",86)(1,"div",87)(2,"mat-chip-listbox")(3,"mat-chip-option",88),e.NdJ("removed",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.setTag(a))}),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"button",89)(7,"mat-icon",90),e._uU(8,"cancel"),e.qZA()()()()()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,1,"azt_lang_tag_"+t.tags[0].code)," ")}}function VI(n,o){1&n&&(e.TgZ(0,"div",78),e._uU(1,"|"),e.qZA())}function XI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",101),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(3).$implicit,l=e.oxw(4);return e.KtG(l.setTag(r,s))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(7);let a;e.xp6(2),e.hij(" ",null!==(a=t[i.commonService.getCurrentLang()+"Name"])&&void 0!==a?a:t.enName," ")}}function e8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",91)(1,"button",92),e.O4$(),e.TgZ(2,"svg",74),e._UZ(3,"path",93)(4,"path",94)(5,"path",95),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"mat-menu",null,96)(11,"div",97)(12,"ul",98),e.YNc(13,XI,3,1,"li",45),e.TgZ(14,"li"),e._UZ(15,"hr",99),e.qZA(),e.TgZ(16,"li")(17,"button",100),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.applyTagAll(a))}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.MAs(10),i=e.oxw(2).$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(6),e.Oqu(e.lcZ(8,5,"lang_teacher_set_tags")),e.xp6(6),e.Q6J("ngForOf",a.questionTags),e.xp6(4),e.Q6J("disabled",!i.tags),e.xp6(1),e.hij(" ",e.lcZ(19,7,"lang_teacher_apply_all_tags")," ")}}function t8(n,o){1&n&&(e.TgZ(0,"div",78),e._uU(1,"|"),e.qZA())}function n8(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",102),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,s=e.oxw(4);return e.KtG(s.goToOriginalQuestion(a))}),e.TgZ(2,"span",103),e._UZ(3,"lucide-icon",104),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",78),e._uU(8,"|"),e.qZA(),e.BQk()}2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"lang_update_exam_original_question")))}function i8(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,$I,7,3,"ng-container",3),e.YNc(2,YI,5,3,"div",68),e.YNc(3,GI,2,0,"div",69),e.TgZ(4,"div",70),e.YNc(5,WI,9,3,"div",71),e.qZA(),e.YNc(6,VI,2,0,"div",69),e.YNc(7,e8,20,9,"div",72),e.YNc(8,t8,2,0,"div",69),e.TgZ(9,"div",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(4);return e.KtG(s.editQuestion(a))}),e.TgZ(10,"span"),e.O4$(),e.TgZ(11,"svg",74),e._UZ(12,"path",75)(13,"polyline",76)(14,"path",77),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(17,"div",78),e._uU(18,"|"),e.qZA(),e.YNc(19,n8,9,3,"ng-container",3),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.enableFeedback),e.xp6(1),e.Q6J("ngIf",t.isFixAns),e.xp6(1),e.Q6J("ngIf",t.isFixAns),e.xp6(2),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(7),e.hij(" ",e.lcZ(16,9,"lang_teacher_edit_content_exam"),""),e.xp6(4),e.Q6J("ngIf",t.orgQuestionObj&&t.orgQuestionObj.orgExamId)}}function o8(n,o){1&n&&(e.TgZ(0,"div",105),e.ALo(1,"mytranslate"),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),e.xp6(3),e.Oqu(e.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function a8(n,o){if(1&n&&(e.TgZ(0,"div",108),e._UZ(1,"img",109),e.ALo(2,"mycdn"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.s9C("src",e.lcZ(2,1,t.answerMedia),e.LSH)}}function s8(n,o){if(1&n&&(e.TgZ(0,"div",108)(1,"div",110),e._UZ(2,"span",111),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("innerHtml",t.answerMedia,e.oJD)}}function r8(n,o){if(1&n&&(e.TgZ(0,"div",106),e.YNc(1,a8,3,3,"div",107),e.YNc(2,s8,3,1,"div",107),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==t.isImage),e.xp6(1),e.Q6J("ngIf",0==t.isImage)}}const l8=function(n){return{"d-none":n}},c8=function(n){return{"error-border":n}};function u8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"div",57),e._UZ(4,"div",58)(5,"div",59),e.TgZ(6,"div",60),e.YNc(7,i8,20,11,"ng-container",3),e.ALo(8,"isOfflineExam"),e.TgZ(9,"div",61)(10,"span",62),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"input",63),e.NdJ("input",function(a){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.setScore(a,r.id))}),e.qZA()()()(),e.TgZ(14,"div",64)(15,"azt-standalone-question",65),e.NdJ("showResultQuestionEmit",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.showResultQuestion(a))})("setAnswerType4UpdateEmit",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.setAnswerType4(a))})("removeAnswerType4Emit",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.removeAnswerType4(a))})("setAnswerOnUpdateEmit",function(a){e.CHM(t);const s=e.oxw(4);return e.KtG(s.setAnswer(a))}),e.YNc(16,o8,5,6,"div",66),e.qZA()()(),e.YNc(17,r8,3,2,"div",67),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(4);let s;e.uIk("id","questViewBoxByLabel"+t.rawIndex),e.xp6(1),e.s9C("id","question_view_"+t.id),e.xp6(1),e.s9C("id","question_"+i),e.xp6(5),e.Q6J("ngIf",!e.lcZ(8,19,null==a.examObj?null:a.examObj.orcLogId)),e.xp6(3),e.Q6J("ngClass",e.VKq(23,l8,a.isMobile)),e.xp6(1),e.hij("",e.lcZ(12,21,"lang_testbank_update_exam_point"),":"),e.xp6(2),e.s9C("value",a.isDivinePointForQuestion?a.parseNumberFixed(null!==(s=t.scorePerQuestion)&&void 0!==s?s:0,8):t.scorePerQuestion),e.Q6J("ngClass",e.VKq(25,c8,null==t.scorePerQuestion||t.scorePerQuestion<0))("decimal",!0),e.xp6(2),e.Q6J("startQuestionIndex",a.examObj.startQuestionIndex)("expandInfo",a.examObj.expandInfo)("follower",a.followerRenderQuest)("displayScreen",8)("isMobile",a.isMobile)("examObj",a.examObj)("question",t)("index",i),e.xp6(1),e.Q6J("ngIf",(null==t.groupInfo?null:t.groupInfo.isFirstInGroup)&&(null==t.groupInfo?null:t.groupInfo.isFixGroup)),e.xp6(1),e.Q6J("ngIf",t.showResultMedia)}}function d8(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",5)(2,"div",6)(3,"div",7),e._UZ(4,"input",8),e.qZA(),e.TgZ(5,"div",9)(6,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBack())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSubmitSaveExam())}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()(),e.TgZ(12,"div",12)(13,"div",13)(14,"div",14),e.YNc(15,DI,3,3,"div",15),e.YNc(16,qI,31,27,"div",16),e.YNc(17,BI,6,4,"div",17),e.YNc(18,HI,4,4,"div",18),e.TgZ(19,"div",19),e.YNc(20,KI,1,1,"azt-loaded-img",20),e.YNc(21,u8,18,27,"div",21),e.qZA()()()(),e._UZ(22,"azt-scroll-to-top-bottom",22),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(4),e.Q6J("formControl",t.nameExamInp),e.xp6(3),e.Oqu(e.lcZ(8,11,"lang_buttom_cancel")),e.xp6(2),e.Q6J("disabled",""===t.nameExamInp.value.trim()||t.nameExamInp.errors||t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Oqu(e.lcZ(11,13,"lang_buttom_save")),e.xp6(5),e.Q6J("ngIf",0===t.questionObjs.length),e.xp6(1),e.Q6J("ngIf",t.questionObjs.length>0),e.xp6(1),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Q6J("ngIf",t.cropperData&&t.cropperData.length>0),e.xp6(2),e.Q6J("ngIf",t.examObj.examHeader),e.xp6(1),e.Q6J("ngForOf",t.questionObjs),e.xp6(1),e.Q6J("isScrollToTop",!0)}}function m8(n,o){1&n&&(e.TgZ(0,"div",112)(1,"span",113),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"! "))}function _8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,d8,23,15,"ng-container",1),e.ALo(2,"editPermission"),e.YNc(3,m8,4,3,"ng-template",null,4,e.W1O),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.xi3(2,2,i.examObj.permissionObj,"exam"))("ngIfElse",t)}}function p8(n,o){if(1&n&&e.YNc(0,_8,5,5,"ng-container",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.examObj)}}function h8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-preview-media",114),e.NdJ("closePreview",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onFileClose())}),e.ALo(2,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("linkUrl",t.previewFile)("typePreview",1)("fileNameCustom",e.lcZ(2,3,"lang_auto_du_lieu_cat_de"))}}function g8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-exam-info",115),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogExamInfo())}),e.qZA()()}if(2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("startIndexQuestion",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",t.dataExamInfo)}}const x8=[{path:"",component:yA,canActivate:[Bc.v],children:[{path:"create-new-document/:cat_id",component:Ub},{path:"azota-editor/:cat_id",component:ni},{path:"azota-editor/:cat_id/:quest_id",component:ni},{path:"mix-bank-template/:cat_id/:mode_name/:matrix_id",component:HA},{path:"sync-folder/:cat_id",component:lE},{path:"document-management/0/:cat_id/:page",component:by},{path:"document-management/1/:cat_id/:page",component:Iy},{path:"action-online-offline/:cat_id/:hash_id",component:Kg},{path:"print-exam-and-ticket/:cat_id/:hash_id",component:rO},{path:"config-exam-offline/:cat_id/:hash_id",component:v0},{path:"config-exam-online/:cat_id/:hash_id",component:bb},{path:"config-homework/:cat_id/:hash_id",component:am},{path:"config-homework/:cat_id",component:am},{path:"download-file-print/:cat_id/:hash_id/:offline_hash_id",component:XT},{path:"exam-results-list/:cat_id/:id/:result_id",component:Ik},{path:"publish-document/:type/:cat_id/:hash_id",component:pO},{path:"all-documents-in-class/:classroom_id/:page",component:Fy},{path:"homework-results-list/:cat_id/:id/:hash_id",component:$T},{path:"create-file-pdf-ver2/:cat_id",component:Qh},{path:"create-exam-by-excel/:cat_id",component:Db},{path:"create-exam-by-hand/:cat_id",component:Nb},{path:"test-review/:exam_id/:user_id/:student_id/:result_id",component:mI},{path:"test-result-tracking/:exam_id/:user_id/:student_id/:result_id",component:_E},{path:"statistic/:cat_id/:id",component:KS},{path:"update-exam/:cat_id/:id",component:(()=>{class n extends W.Q{onWindowScroll(){let t=document.getElementById("np-name-root");window.pageYOffset>30?t?.classList.add("fixToolBar"):t?.classList.remove("fixToolBar")}scrollDown(){let t=document.getElementById("azt-layout");console.log(t),t.scrollIntoView()}editQuestion(t){if(this.examObj?.editable){let i=`/admin/testbank/update-exam/${null!=this.cur_cateId?this.cur_cateId:0}/${this.examId}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+"/"+t.id+"?backto="+encodeURIComponent(i)+"&r="+((t.rawIndex??0)+(this.examObj?.startQuestionIndex??1)-1)+(this.expandInfoParse.label?"&defaultQuestLabel="+this.expandInfoParse.label:"")}else this.openDialogWaring("lang_auto_not_edit_content_question")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.dialog.open(Qs._,{data:{isShow:!0,content:i},restoreFocus:!1})})}setTag(t,i){t.tags=i?[i]:[]}applyTagAll(t){for(let a=this.questionObjs.indexOf(t)+1;a<this.questionObjs.length;a++)this.questionObjs[a].tags=t.tags}openDialogConfigExpandInfo(){this.dataConfigExpandInfo?this.dataConfigExpandInfo.isShow=!0:this.dataConfigExpandInfo={isShow:!0}}closeDialogConfigExpandInfo(t){void 0!==t&&(this.expandInfoParse=t,this.handleSubmitSaveExam()),this.dataConfigExpandInfo&&(this.dataConfigExpandInfo.isShow=!1)}openDialogSpitPoint(){if(this.dataSpitPoint){let t=this.trueFalseCounter(this.questionObjs),i=this.fillAnswerCounter(this.questionObjs),a=this.questionObjs.length-t-i,s={multipleQuestion:t,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:i,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:a,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.dataSpitPoint={isShow:!0,obj:s}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}showFeedbackQuestionDialog(t){this.dialog.open(H.V,{width:"750px",data:{questionObj:t,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{})}get invalidTypeQuestionConfig(){return this.questionObjs.filter(t=>null==t.scorePerQuestion||t.scorePerQuestion<0||!isFinite(t.scorePerQuestion??0)||!t.answerResult?.length&&this.answerTypeService.isFillAnswer(t.answerType))}goToQuestionAll(t,i=150){document.getElementById("question_"+t).scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(t,i)}}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=void 0}onShowFile(t,i,a){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=i}goBack(){this.commonService.myNavigationBySpecialQueryString(this.backToLink)}showAllResultQuestion(){this.viewQuestions.forEach(t=>{t.isShowExplain=!this.defaultShowResultMedia}),this.defaultShowResultMedia=!this.defaultShowResultMedia}showResultQuestion(t){this.viewQuestions.forEach(i=>{i.id==t&&(i.isShowExplain=!i.isShowExplain)})}convertData(t){for(var i=[],a=0;a<t.length;a++)t[a].content&&i.push(t[a].content);return JSON.stringify(i)}keepAnswerResult(t){for(var i=[],a=0;a<t.length;a++)i.push({id:t[a].id??0,answerResult:JSON.stringify(t[a].answerResult),scorePerQuestion:t[a].scorePerQuestion??0,tags:t[a].tags?.map(s=>s.code??"")});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.examObj&&this.permissionService.hasEditPermission("exam",this.examObj.permissionObj)){let t=!1,i=0;this.questionObjs.forEach(a=>{3!=a.answerType&&0==a.answerResult?.length&&(a.errorValidateQuestion=!0,t=!0,document.getElementById("question_"+i)?.scrollIntoView()),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(a=>{var s=this.questionObjs.filter(r=>r.id==a.id);null!=s&&s.length>0&&!this.answerTypeService.isFillAnswer(s[0].answerType)&&a.answerResultParse&&a.answerResultParse.length>0&&(a.answerResult=this.convertData(a.answerResultParse??[]),a.tags=s[0].tags?.map(r=>r.code??""))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),t?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.initStatusObj(),this.subscriptions.add(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(s=>{1==s.success?(this.newAnswerList=new Array,this.examObj&&(this.examObj.expandInfo=this.serializeJson(this.expandInfoParse)),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(s.message??"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(t){var i=this.newAnswerList.filter(l=>l.id==t.idQuestion);if(null!=t.index&&1==t.type){var a={id:t.idQuestion,answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,answerResult:"",tags:[]};if(i&&i.length>0)for(var s=0;s<this.newAnswerList.length;s++)this.newAnswerList[s].id==a.id&&(this.newAnswerList[s].answerResultParse?.push(a.answerResultParse?.[0]??{}),this.newAnswerList[s].answerResult=JSON.stringify(this.newAnswerList[s].answerResultParse));else a.answerResult=JSON.stringify(a.answerResultParse),this.newAnswerList.push(a);this.changeStatusAnswer(a,t.index,!0,t.isImage)}else if(null!=t.index&&2==t.type){var r={id:t.idQuestion,answerResult:JSON.stringify([{index:t.index,content:t.isImage?t.event.content:t.event.key}]),answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,tags:[]};if(i&&i.length>0)for(s=0;s<this.newAnswerList.length;s++)this.newAnswerList[s].id==r.id&&(this.newAnswerList[s].answerResult=r.answerResult,this.newAnswerList[s].answerResultParse=r.answerResultParse);else this.newAnswerList.push(r);this.changeStatusAnswer(r,t.index,!1,t.isImage)}}setAnswerType4(t){const i=(t.event.value||"").trim();if(i){var a=this.newAnswerList.filter(s=>s.id==t.questionId);this.questionObjs.forEach(s=>{if(s.id==t.questionId){i.split("|").forEach(c=>{s.answerResult?.push(c.trim())}),s.onChanges=!0;var r={id:s.id,answerResult:JSON.stringify(s.answerResult),scorePerQuestion:s.scorePerQuestion??0,tags:s.tags?.map(c=>c.code??"")};null!=a&&a.length>0?this.newAnswerList.forEach(c=>{c.id==t.questionId&&(c.answerResult=JSON.stringify(s.answerResult))}):this.newAnswerList.push(r)}})}this.questionObjs.forEach(s=>{s.errorValidateQuestion=3!=s.answerType&&0==s.answerResult?.length}),t.event.input.value=""}removeAnswerType4(t){var i=this.newAnswerList.filter(a=>a.id==t.questionId);this.questionObjs.forEach(a=>{if(a.id==t.questionId){var s=a.answerResult?.indexOf(t.answerObj)??0;if(s>=0){a.answerResult?.splice(s,1);var r={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion??0,tags:a.tags?.map(l=>l.code??"")};null!=i&&i.length>0?this.newAnswerList.forEach(l=>{l.id==t.questionId&&(l.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(r)}}})}changeStatusAnswer(t,i,a,s){a||this.questionObjs.forEach(r=>{if(r.id==t.id&&r.answers&&r.answers.length>0){for(var l=0;l<r.answers.length;l++)r.answers[l].isTrue=!1;r.answers[i].isTrue=!0}})}setPointTest(t){let i=Number(t.multiplePoint)/this.countTrueFalseQuestion,a=Number(t.fillPoint)/this.countFillAnswerQuestion,s=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(s=Number(t.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let r=0;r<this.questionObjs.length;r++){let l=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(i,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(i,8)),l=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(s,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(s,8)),l=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[r].answerType)){this.questionObjs[r].scorePerQuestion=Number(this.parseNumberFixed(a,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[r].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(a,8)),l=!0;break}}if(!l){let c={id:this.questionObjs[r].id??0,answerResult:JSON.stringify(this.questionObjs[r].answerResult),scorePerQuestion:this.questionObjs[r].scorePerQuestion??0,tags:[]};this.newAnswerList.push(c)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong"),this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointQuestion(){var t=this.commonService.getFormObj(this.form);if(t.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=t.maxScore/t.totalQuestion;this.questionObjs.forEach(a=>{if(this.answerTypeService.isOneChoiceAnswer(a.answerType)||this.answerTypeService.isFillAnswer(a.answerType)){a.scorePerQuestion=i;for(var s=0;s<this.newAnswerList.length;s++)if(this.newAnswerList[s].id==a.id){this.newAnswerList[s].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(t,i){for(let s=0;s<this.questionObjs.length;s++){let r=isNaN(parseFloat(t.target.value))?void 0:parseFloat(t.target.value);if(this.questionObjs[s]&&this.questionObjs[s].id==i&&(this.questionObjs[s].scorePerQuestion=r,this.newAnswerList.length>0)){let l=!1;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==this.questionObjs[s].id){this.newAnswerList[a].scorePerQuestion=r??0,l=!0;break}if(!l){let c=Array.isArray(this.questionObjs[s].answerResult)&&this.questionObjs[s].answerResult?.length?this.questionObjs[s].answerResult?.[0]:"";this.newAnswerList.push({id:this.questionObjs[s].id??0,answerResult:JSON.stringify(this.questionObjs[s].answerResult),answerResultParse:[{content:c}],scorePerQuestion:parseFloat(t.target.value),tags:[]})}}}}trueFalseCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a.answerType)&&i++}),i}fillAnswerCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isFillAnswer(a.answerType)&&i++}),i}maxPointCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a.answerType)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isFillAnswer(a.answerType)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}essayPointCounter(t){var i=0;return t.forEach(a=>{!this.answerTypeService.isOneChoiceAnswer(a.answerType)&&!this.answerTypeService.isFillAnswer(a.answerType)&&(i+=a.scorePerQuestion??0)}),i.toString()}parseNumberFixed(t,i){let a=Number(parseFloat(t.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(t.toString()).toFixed(i)}convertErrsResultQuestions(){for(let t=0;t<this.questionObjs.length;t++)null===this.questionObjs[t].answerResult&&(this.questionObjs[t].answerResult=[])}changeAnswerResultStatus(t){var i=[];let a=0;return t.forEach(s=>{if(s.index=a,s.isRoleTeacher=!0,a++,s.answers&&s.answerResult)for(let r=0;r<s.answers.length;r++)s.answers[r].questionId=s.id,s.answers[r].checked=!1,s.answers[r].isTrue=!!this.checkAnswerResult(s.answers[r].key??"",s.answerResult);i.push(s)}),i}checkAnswerResult(t,i){var a=!1;for(var s in i){if(i[s]==t){a=!0;break}a=!1}return a}getQuestionCanFeedback(){let t=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.filterArray(t,i.id)&&t.push(i.id)}),this.subscriptions.add(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,t.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];for(let s=0;s<this.questionObjs.length;s++)a.forEach(r=>{this.questionObjs[s].id==r.questionId&&(this.questionObjs[s].enableFeedback=r.allowFeedback)});this.successStatusObj(),setTimeout(()=>{this.scrollToQuestion()},200),setTimeout(()=>{this.scrollToQuestion()},500)}else this.errorStatusObj(i.message??"",!0)}))}goToOriginalQuestion(t){const i=`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");this.myNavigationWithQueryString(`/admin/testbank/update-exam/${t.orgQuestionObj?.orgCategoryId}/${t.orgQuestionObj?.orgExamId}`,`?backto=${encodeURIComponent(i)}&questionId=${t.orgQuestionObj?.orgQuestionId}`)}getData(){this.initStatusObj(),this.subscriptions.add(this.examService.apiExamGetQuestionsIdGet(this.examId,1).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj,this.expandInfoParse=this.commonService.castJsonToObj(this.examObj?.expandInfo??"{}")??{},this.firstInGroupIndexes=this.commonService.myParseJson(this.examObj?.firstInGroupIndexes??"")??[],this.nameExamInp.setValue(this.examObj?.name??"");let a=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(i.data?.questionObjs));const s=this.changeAnswerResultStatus(a??[]);this.followerRenderQuest.setNumQuest(s.length);const r=i.data?.orgQuestionObjs??[];this.questionObjs=s;for(let l=0;l<this.questionObjs.length;l++)for(let c=0;c<r.length;c++)r[c].questionId===this.questionObjs[l].id&&(this.questionObjs[l].orgQuestionObj=r[c]);this.cropperData=this.commonService.myParseJson(this.examObj?.labelsUrl??"")??[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.trueFalseCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=this.fb.group({maxScore:new p.p4(this.maxPointCounter(this.questionObjs),[p.kI.required]),totalQuestion:new p.p4(this.trueFalseCounter(this.questionObjs),[p.kI.required])}),this.questionService.apiQuestionGetTagsGet().subscribe(l=>{1==l.success&&l.data&&(this.questionTags=l.data.objs??[])})}else this.showErrorSnack(i.message??"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(t){this.nexToQuestionConf.showTooltip=t}actionNextToQuestion(){if(void 0===this.nexToQuestionConf.value)return;const t=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));t?t.scrollIntoView():this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}scrollToQuestion(){const t=this.commonService.getMyQueryParam("questionId"),i=document.getElementById("question_view_"+t);i&&i.scrollIntoView()}ngOnInit(){(0,Q.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0;var t=this.commonService.getMyQueryParam("backto");this.backToLink=t||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()}),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a,s,r,l,c,d,f){super(),this.dialog=t,this.fb=i,this.questionService=a,this.examService=s,this.activeRoute=r,this.permissionService=l,this.docxService=c,this.answerTypeService=d,this.testMarketFeedbackService=f,this.questionTags=[],this.form=new p.nJ({}),this.questionObjs=[],this.followerRenderQuest=new Xa.G,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.firstInGroupIndexes=[],this.nameExamInp=new p.p4("",[Ai._.noWhiteSpace]),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[va.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.isShowPreviewFile=!1,this.dataSpitPoint={isShow:!1},this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.uw),e.Y36(p.QS),e.Y36(Ve.aE),e.Y36(Ve.Oe),e.Y36(T.gz),e.Y36(eo.$),e.Y36(xu.x),e.Y36($o.T),e.Y36(Xr.nC))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ta.O,5),2&t){let a;e.iGM(a=e.CRH())&&(i.viewQuestions=a)}},hostBindings:function(t,i){1&t&&e.NdJ("scroll",function(s){return i.onWindowScroll(s)},!1,e.Jf7)},features:[e.qOj],decls:7,vars:8,consts:[[3,"headerTitle","headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"grid","grid-cols-12","gap-5",2,"width","100%","margin","20px auto"],[1,"mb-1","lg:col-span-8","sm:col-span-6","col-span-12"],["type","text",1,"inputMobile","form-control",3,"formControl"],[1,"text-center","h-9","flex","col-span-12","lg:col-span-4","sm:col-span-6"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-3",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","grid grid-cols-12 gap-1 items-center","style","justify-content: space-between",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"box-questions","mt-3"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","box-questions-item mb-2","style","position: relative",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[1,"box-control","text-center"],[1,"grid","grid-cols-12","gap-1","items-center",2,"justify-content","space-between"],[1,"box-control","text-left","col-span-12","md:col-span-6"],["azt-track-service","update-exam-7Rsn956k43",1,"btn","btn-show",3,"click"],["azt-track-service","update-exam-RjxFPV1tds",1,"btn-detail",2,"margin-left","10px",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6","flex","justify-btn-block"],[1,"flex","flex-col","sm:flex-row","justify-btn-block"],[1,"flex","items-center","mb-2"],["azt-track-service","update-exam-4zmWzk9Yc",1,"btn","btn-set-quest-label",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[3,"expandInfoParse","closeDialog",4,"ngIf"],[3,"data","closeDialog","setPoint",4,"ngIf"],[1,"col-span-12","mt-2"],[1,"next-to-question","mb-2","rounded","shadow","py-1","px-2",2,"display","inline-block"],[1,"font-medium",2,"width","auto"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-next-to-question",3,"click"],[3,"expandInfoParse","closeDialog"],[3,"data","closeDialog","setPoint"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"box-questions-item","mb-2",2,"position","relative"],[1,"w-100",3,"id"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0","relative",2,"box-shadow","none"],[1,"mb-0","relative","overflow-hidden",3,"startQuestionIndex","expandInfo","follower","displayScreen","isMobile","examObj","question","index","showResultQuestionEmit","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],["class","fix-group",3,"matTooltip",4,"ngIf"],["class","card question-card","style","box-shadow: none",4,"ngIf"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-1"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"edit-question-header-dr"],["reportQTakeTest",""],["azt-track-service","update-exam-5Q2j_re4X","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],["azt-track-service","update-exam-Va0keXkLs",1,"edit-question-header-content","flex","items-center",3,"click"],[1,"w-4","h-4","inline-block","mr-1"],["name","file-clock"],[1,"fix-group",3,"matTooltip"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"linkUrl","typePreview","fileNameCustom","closePreview"],[3,"startIndexQuestion","data","closeDialog"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.ALo(1,"mytranslate"),e.YNc(2,jI,1,0,"azt-loading-effect",1),e.YNc(3,p8,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(5,h8,3,5,"div",3),e.YNc(6,g8,2,2,"div",3)),2&t){const a=e.MAs(4);e.Q6J("headerTitle",e.lcZ(1,6,"lang_testbank_update_exam_exam"))("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.isShowPreviewFile),e.xp6(1),e.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[M.mk,M.sg,M.O5,Oi.z2,Oi.iO,Oi.qH,vn.Hw,en.VK,en.p6,Zt.gM,p.Fj,p.wV,p.JJ,p.qQ,p.On,p.oH,lu.l,jt.Q,ZI,Vi.Y,Z,Ie,Ta.O,Pm.M,PI,pn._,h.Nh5,re.bT,re.GT,re.BU,re.HU],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding:5px 20px;width:100%;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%], #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid #000;padding:5px 20px;font-size:small;text-align:center;width:100%;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.question-offline-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:15px}.question-offline-answer[_ngcontent-%COMP%]{max-width:300px;padding:10px;display:flex;justify-content:space-between;font-weight:500}.question-offline-answer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.listda[_ngcontent-%COMP%]{margin-top:30px;padding-left:20px}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.listli[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block}.listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;cursor:pointer}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.show_explain[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-block:auto}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}.image_group[_ngcontent-%COMP%]{position:relative}.image_group[_ngcontent-%COMP%]   .mixGroupLabel[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-35px;left:-45px;background-color:#ff000094;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px;display:block}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.box-questions[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.box-questions[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-questions[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}"]}),n})()},{path:"update-exam-offline/:cat_id/:hash_id/:offline_id",component:hI},{path:"add-code-exam-offline/:cat_id/:hash_id",component:D1},{path:"create-website",component:e2},{path:"create-website-result",component:zb},{path:"powerpoint/:cat_id/:exam_id",component:k5},{path:"config-share-offline-result/:cat_id/:hash_id",component:Ib},{path:"offline-answer-list/:cat_id/:hash_id",component:VA},{path:"matrix-list/:cate/:page",component:vA}]}];let b8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[T.Bz.forChild(x8),T.Bz,xa.fQ]}),n})();class y8 extends ee.v{constructor(){super(...arguments),this.isSelected=!1,this.isShow=!0}}var Fm=S(69546);const w8=["colItem"],C8=["resizeBarH"],k8=["aztColResizable",""];function T8(n,o){1&n&&(e.TgZ(0,"div",6)(1,"div",2),e.Hsn(2,1),e.qZA()())}const A8=[[["","colLeftContent",""]],[["","colRightContent",""]]],O8=function(n){return{width:n}},S8=["[colLeftContent]","[colRightContent]"];let E8=(()=>{class n extends W.Q{handleMouseDown(t){this.colItem&&(this.x=t.clientX,this.y=t.clientY,this.leftWidth=this.colItem.nativeElement.getBoundingClientRect().width,this.resizeBarH&&this.resizeBarH.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}ngOnInit(){super.ngOnInit()}constructor(){super(),this.hasColRight=!1,this.width=0,this.x=0,this.y=0,this.leftWidth=0,this.handleMouseUp=t=>{this.resizeBarH&&this.resizeBarH.nativeElement.classList.remove("hover"),this.resizeBarH?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.colItem?.nativeElement.style.removeProperty("user-select"),this.colItem?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=t=>{if(this.colItem){let i=this.colItem.nativeElement;i.style.width=`${this.leftWidth+(t.clientX-this.x)}px`,document.body.style.cursor="col-resize",i.style.userSelect="none",i.style.pointerEvents="none"}}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["","aztColResizable",""]],viewQuery:function(t,i){if(1&t&&(e.Gf(w8,5),e.Gf(C8,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.colItem=a.first),e.iGM(a=e.CRH())&&(i.resizeBarH=a.first)}},inputs:{hasColRight:"hasColRight",width:"width"},features:[e.qOj],attrs:k8,ngContentSelectors:S8,decls:7,vars:4,consts:[[1,"col-item","border-r","border-slate-400","dark:border-darkmode-400",3,"ngStyle"],["colItem",""],[1,"col-content"],[1,"resize-bar","resize-bar-h",3,"mousedown"],["resizeBarH",""],["class","col-right",4,"ngIf"],[1,"col-right"]],template:function(t,i){1&t&&(e.F$t(A8),e.TgZ(0,"div",0,1)(2,"div",2),e.Hsn(3),e.qZA(),e.TgZ(4,"div",3,4),e.NdJ("mousedown",function(s){return i.handleMouseDown(s)}),e.qZA()(),e.YNc(6,T8,3,0,"div",5)),2&t&&(e.Q6J("ngStyle",e.VKq(2,O8,i.hasColRight?"60%":i.width?i.width+"px":"100%")),e.xp6(6),e.Q6J("ngIf",i.hasColRight))},dependencies:[M.O5,M.PC],styles:[".col-item[_ngcontent-%COMP%]{min-width:150px;min-height:150px;height:100%;position:relative}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;background-color:transparent}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}.col-item[_ngcontent-%COMP%]   .resize-bar.hover[_ngcontent-%COMP%]{background-color:#2262ae}.col-item[_ngcontent-%COMP%]   .resize-bar.resize-bar-h[_ngcontent-%COMP%]{width:3px;right:0;top:0;bottom:0}.col-right[_ngcontent-%COMP%]{flex:auto}.col-content[_ngcontent-%COMP%]{height:100%;padding:15px;overflow-y:auto;overflow-x:hidden}"]}),n})();function M8(n,o){if(1&n&&e._UZ(0,"azt-standalone-question",4),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,s=e.oxw(2);e.Q6J("follower",s.followerRenderQuest)("question",i)("index",a)("displayScreen",9)("configExam",s.examWithPermissionObj)("expandInfo",s.examWithPermissionObj.expandInfo)("startQuestionIndex",s.examWithPermissionObj.startQuestionIndex)("hidden",!i.isShow)}}function I8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,M8,1,8,"azt-standalone-question",3),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.examWithPermissionObj)}}function L8(n,o){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,I8,2,1,"ng-container",2),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.questionList)}}let Z8=(()=>{class n extends W.Q{getTagsOfQuestion(t){let i=[];return t.tags?.forEach(a=>{a.code&&i.push(a.code)}),i}getFilterTagValue(t){let i=[];return t.forEach(a=>{a.hasOwnProperty("key")&&a.key&&i.push(a.key)}),i}getFilterTypeValue(t){let i=[];return t.forEach(a=>{a.hasOwnProperty("key")&&a.key&&("TN"==a.key?i.push(1):"TL"==a.key?i.push(3):"\u0110T"==a.key&&i.push(4))}),i}checkValidTagQuestion(t,i){let a=!1;return t.forEach(s=>{this.commonService.filterArray(i,s)&&(a=!0)}),a}ngOnChanges(){let t=this.getFilterTagValue(this.filterTag),i=this.getFilterTypeValue(this.filterType);for(let a=0;a<this.questionList.length;a++){let s=this.getTagsOfQuestion(this.questionList[a]);this.questionList[a].isShow=t.length>0&&!i.length?!!this.checkValidTagQuestion(s,t):i.length>0&&!t.length?!!this.commonService.filterArray(i,this.questionList[a].answerType):!(t.length>0&&i.length>0)||!!this.checkValidTagQuestion(s,t)&&!!this.commonService.filterArray(i,this.questionList[a].answerType)}}ngOnInit(){this.subscriptions.add(this.store.select(Fm.Y).subscribe(t=>{this.state=t})),this.followerRenderQuest.setNumQuest(this.questionList.length);for(let t=0;t<this.questionList.length;t++)this.questionList[t].isRoleTeacher=!0;super.ngOnInit(),this.examWithPermissionObj={...this.exam,editable:!0,allowStudentView:!0}}constructor(t,i,a){super(),this.fb=t,this.store=i,this.commonService=a,this.questionList=[],this.filterTag=[],this.filterType=[],this.followerRenderQuest=new Xa.G}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.QS),e.Y36(fn.yh),e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-list-question"]],inputs:{exam:"exam",questionList:"questionList",filterTag:"filterTag",filterType:"filterType"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["id","boxContentQuestion",4,"ngIf"],["id","boxContentQuestion"],[4,"ngFor","ngForOf"],[3,"follower","question","index","displayScreen","configExam","expandInfo","startQuestionIndex","hidden",4,"ngIf"],[3,"follower","question","index","displayScreen","configExam","expandInfo","startQuestionIndex","hidden"]],template:function(t,i){1&t&&e.YNc(0,L8,2,1,"div",0),2&t&&e.Q6J("ngIf",i.questionList.length>0)},dependencies:[M.sg,M.O5,Ta.O],styles:['.used[_ngcontent-%COMP%]{position:relative}.used[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:100%;position:absolute;z-index:3;background-color:#44444429;left:0;top:0}.image_group[_ngcontent-%COMP%]{border:1px solid #ccc}.image_group.selected-group[_ngcontent-%COMP%]{border:1px solid green;outline:3px solid rgba(0,193,0,.321)}.hidden[_ngcontent-%COMP%]{display:none!important}.image_group[_ngcontent-%COMP%], .image_question[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}']}),n})();var P8=S(78645),Um=S(59773);let j8=(()=>{class n{filterObjInArrObjs(t,i){if(0==t.length||!i||this.commonService.isEmptyObj(i))return!1;let a=!1;for(let s=0;s<t.length;s++)if(t[s].key==i.key&&t[s].value==i.value){a=!0;break}return a}constructor(t){this.commonService=t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rt.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D8=["searchDropdownInput"],N8=["multiAllOption"];function Q8(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(2),e.lnq(" ",e.lcZ(3,3,"lang_auto_tat_ca"),"\xa0",t.options.length," ",e.lcZ(4,5,"lang_auto_duoc_chon")," ")}}function q8(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(4);e.xp6(1),e.AsE(" ",t.value," ",a.selected.length>1&&i<a.selected.length-1?", ":""," ")}}function F8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,q8,2,2,"span",7),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selected)}}function U8(n,o){if(1&n&&(e.TgZ(0,"mat-select-trigger"),e.YNc(1,Q8,5,7,"ng-container",4),e.YNc(2,F8,2,1,"ng-container",4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==t.multiAllOption?null:t.multiAllOption.selected)||(null==t.selected?null:t.selected.length)===(null==t.options?null:t.options.length)),e.xp6(1),e.Q6J("ngIf",!(null!=t.multiAllOption&&t.multiAllOption.selected)&&(null==t.selected?null:t.selected.length)!==(null==t.options?null:t.options.length))}}function R8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(a){e.CHM(t);const s=e.oxw(3);return e.KtG(s.clear(a))}),e._uU(1,"clear "),e.qZA()}}function B8(n,o){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"lucide-icon",9)(2,"input",10,11),e.YNc(4,R8,2,0,"mat-icon",12),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("placeholder",t.searchPlaceholder),e.xp6(2),e.Q6J("ngIf",t.showClearButton)}}function z8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",14,15),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(2);return e.KtG(s.toggleMultiAll(a))})("keyup.enter",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(2);return e.KtG(s.toggleMultiAll(a))})("keyup.space",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(2);return e.KtG(s.toggleMultiAll(a))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("value",t.options),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_tat_ca")," ")}}function J8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",18,19),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))})("keyup.enter",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))})("keyup.space",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))}),e._uU(2),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t),e.xp6(2),e.hij(" ",i.displayValue(t)," ")}}function H8(n,o){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_no_result_found")," "))}function K8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,J8,3,2,"mat-option",16),e.ALo(2,"async"),e.YNc(3,H8,3,3,"span",17),e.ALo(4,"async"),e.BQk()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,t.filteredOptions$)),e.xp6(2),e.Q6J("ngIf",!t.showAllOption&&0===(null==(i=e.lcZ(4,4,t.filteredOptions$))?null:i.length))}}function $8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",22,19),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))})("keyup.enter",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))})("keyup.space",function(){e.CHM(t);const a=e.MAs(1),s=e.oxw(3);return e.KtG(s.recalculateCheckedBoxes(a))}),e._uU(2),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t),e.xp6(2),e.hij(" ",i.displayValue(t)," ")}}function Y8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,$8,3,2,"mat-option",21),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.options)}}const Rm=function(n){return{inactive:n}},G8=function(n,o){return["new-select-design-panel",n,o]};function W8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",1)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"mat-select",3),e.NdJ("selectionChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onSelectionChange(a))})("openedChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.openedChange(a))}),e.YNc(5,U8,3,2,"mat-select-trigger",4),e.YNc(6,B8,5,2,"div",5),e.YNc(7,z8,4,4,"mat-option",6),e.ALo(8,"async"),e.YNc(9,K8,5,6,"ng-container",4),e.YNc(10,Y8,2,1,"ng-container",4),e.qZA()()()}if(2&n){const t=e.oxw();let i;e.Q6J("formGroup",t.selectSearchForm)("ngClass",e.VKq(17,Rm,t.disableSelectSearch)),e.xp6(2),e.hij(" ",t.label," "),e.xp6(1),e.Q6J("ngClass",e.VKq(19,Rm,t.disableSelectSearch)),e.xp6(1),e.s9C("multiple",t.multiple),e.Q6J("ngClass",t.selected.length>0?"custom-selected-text":"")("panelClass",e.WLB(21,G8,t.panelClass,t.scrollClass))("disableOptionCentering",!0)("disabled",t.disableSelectSearch)("placeholder",t.selected.length>0?t.selected.length+" selected":t.selectPlaceholder),e.xp6(1),e.Q6J("ngIf",t.multiple),e.xp6(1),e.Q6J("ngIf",t.showSearch),e.xp6(1),e.Q6J("ngIf",t.multiple&&t.options.length>1&&0!==(null==(i=e.lcZ(8,15,t.filteredOptions$))?null:i.length)),e.xp6(2),e.Q6J("ngIf",t.showSearch),e.xp6(1),e.Q6J("ngIf",!t.showSearch)}}let V8=(()=>{class n{constructor(t,i,a){this._formBuilder=t,this._cd=i,this.testFinderService=a,this._destroy$=new P8.x,this.selectedEvent=new e.vpe,this.formValidEvent=new e.vpe,this.maxNumOptionsBeforeSearch=5,this.selected=[],this.selectPlaceholder="Select One",this.disableSelectSearch=!1,this.searchPlaceholder="Search",this.defaultOptionIndex=0,this.panelClass="",this.setInitialValue=!0,this.scrollClass="",this.multiple=!1,this.selectSearchForm=new p.cw({}),this._filteredListLength=0}ngOnInit(){this.options?.length>this.maxNumOptionsBeforeSearch&&(this.showSearch=!0,this.scrollClass="scroll"),this._setUpFormControls(this.selected,this.setInitialValue,this.multiple),this.showSearch&&(this.filteredOptions$=this.selectSearchForm.get("SearchControl")?.valueChanges.pipe((0,Es.O)(""),(0,Po.U)(t=>(this.showClearButton=this._showClearButton(t),this._filter(t))),(0,Um.R)(this._destroy$))),this.selectSearchForm.statusChanges.pipe((0,Um.R)(this._destroy$)).subscribe(t=>{"VALID"===t&&this.formValidEvent.emit(!0),"INVALID"===t&&this.formValidEvent.emit(!1)})}ngAfterViewChecked(){this._cd&&!this._cd.destroyed&&this._cd.detectChanges()}ngOnDestroy(){this._destroy$.next(void 0),this._destroy$.complete()}onSelectionChange(t){console.log("onSelectionChange $event --\x3e",t)}clear(t){t.stopPropagation(),this._filteredList=this.options,this._setSelectValue(this.selected),this.selectSearchForm.get("SearchControl")?.setValue(""),this.selectSearchForm.get("SearchControl")?.reset(),this.showClearButton=!1}openedChange(t){!t&&0===this._filteredListLength&&!this.multiple&&(this.selectSearchForm.get("SearchControl")?.setValue(""),this.selectSearchForm.get("SearchControl")?.reset(),this._setSelectValue(this.selected)),!t&&this._filteredListLength>0&&!this.multiple&&this._setSelectValue(this._filteredList[0]),t&&(this.searchDropdownInput?.nativeElement?.value?.toLowerCase().includes("all")&&(this.selectSearchForm.get("SearchControl")?.setValue(""),this.selectSearchForm.get("SearchControl")?.reset(),this.searchDropdownInput.nativeElement.value=""),this.searchDropdownInput?.nativeElement?.focus())}displayValue(t){return t.value}toggleMultiAll(t){this._setSelectValue(t.selected?this.options:[])}recalculateCheckedBoxes(t){this._setSelectValue(this.multiple?t.selected?[t.value,...this.selected]:this._removeOptionFromSelected(t.value,this.selected):t.value)}_removeOptionFromSelected(t,i){return i.filter(a=>t!==a)}_setUpFormControls(t,i,a){this.selectSearchForm=this._formBuilder.group({SelectControl:[this._setInitialValue(t,i,a)],SearchControl:[""]})}_isOptionAll(t){return!!t&&this.displayValue(t).toLowerCase().includes("all")}_setInitialValue(t,i,a){return t?(this.selected=t,this.selected):t||!i||a||0!==this.defaultOptionIndex&&!this.defaultOptionIndex?[]:(this.testFinderService.filterObjInArrObjs(this.selected,this.options[this.defaultOptionIndex])&&this.selected.push(this.options[this.defaultOptionIndex]),this.selected)}_setSelectValue(t){this.testFinderService.filterObjInArrObjs(this.selected,t)||(this.selected=t,this.selectSearchForm.get("SelectControl")?.setValue(t),this.selectedEvent.emit(this.selected),this.multiple&&(this.selected.length===this.options.length?this.multiAllOption.select():this.multiAllOption.deselect()),!this.multiple&&!this._isOptionAll(t)&&this.selectSearchForm.get("SearchControl")?.setValue(this.displayValue(t)))}_filter(t){return!t||t?.toLowerCase().includes("all")?this.options:(this._filterValue=t.toLowerCase(),this._filteredList=this.options.filter(i=>-1!==this.displayValue(i).toLowerCase().indexOf(this._filterValue??"")),this._filteredListLength=this._filteredList.length,this._filteredList)}_showClearButton(t){return t.length>0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.qu),e.Y36(e.sBO),e.Y36(j8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-select-search-dropdown"]],viewQuery:function(t,i){if(1&t&&(e.Gf(D8,5),e.Gf(N8,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.searchDropdownInput=a.first),e.iGM(a=e.CRH())&&(i.multiAllOption=a.first)}},inputs:{label:"label",options:"options",selected:"selected",selectPlaceholder:"selectPlaceholder",extractValue:"extractValue",disableSelectSearch:"disableSelectSearch",searchPlaceholder:"searchPlaceholder",defaultOptionIndex:"defaultOptionIndex",panelClass:"panelClass",tooltipMessage:"tooltipMessage",setInitialValue:"setInitialValue",multiple:"multiple"},outputs:{selectedEvent:"selectedEvent",formValidEvent:"formValidEvent"},decls:1,vars:1,consts:[["class","new-select-design",3,"formGroup","ngClass",4,"ngIf"],[1,"new-select-design",3,"formGroup","ngClass"],["appearance","outline",3,"ngClass"],["formControlName","SelectControl",3,"ngClass","panelClass","disableOptionCentering","disabled","multiple","placeholder","selectionChange","openedChange"],[4,"ngIf"],["class","search-option",4,"ngIf"],[3,"value","click","keyup.enter","keyup.space",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"search-option"],["name","search",2,"height","21px!important","width","21px!important","margin-right","2px"],["tabindex","0","type","text","matInput","","formControlName","SearchControl","autocomplete","off",1,"search-input",3,"placeholder"],["searchDropdownInput",""],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","class","clear-icon","aria-label","Clear",3,"click",4,"ngIf"],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","aria-label","Clear",1,"clear-icon",3,"click"],[3,"value","click","keyup.enter","keyup.space"],["multiAllOption",""],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space"],["matOption",""],[1,"no-results"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space"]],template:function(t,i){1&t&&e.YNc(0,W8,11,24,"form",0),2&t&&e.Q6J("ngIf",!!i.options&&i.options.length>0)},dependencies:[M.mk,M.sg,M.O5,ji.ey,vn.Hw,As.Nt,Kn.KE,Kn.hX,Kn.R9,$r.gD,$r.$L,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,Bt.M,h.Nh5,M.Ov,re.bT],styles:[".search-input[_ngcontent-%COMP%]{border:none!important;outline:none!important}.new-select-design[_ngcontent-%COMP%]{padding:0!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:700;color:#63738a}input[_ngcontent-%COMP%]{font-size:16px}.se-search[_ngcontent-%COMP%]{color:#008cff;font-size:22px}ngk-icon[_ngcontent-%COMP%]{cursor:pointer;fill:#0000008a}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:#000!important}.no-results[_ngcontent-%COMP%]{display:block;line-height:1;font-size:14px;margin:1rem;text-align:center}.search-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:15px 10px}.search-option[_ngcontent-%COMP%]   .ngk-search-icon[_ngcontent-%COMP%], .search-option[_ngcontent-%COMP%]   .se-search[_ngcontent-%COMP%]{margin-right:10px;margin-left:-16px}.search-option[_ngcontent-%COMP%]   .ngk-clear-icon[_ngcontent-%COMP%]{align-self:flex-end;margin-right:-16px}mat-error[_ngcontent-%COMP%]{color:#d6312b;margin-top:5px;font-size:16px}.custom-selected-text[_ngcontent-%COMP%]  .mat-select-placeholder{color:#000!important;opacity:1!important}"]}),n})();function X8(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function eL(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function tL(n,o){1&n&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}const Bm=function(n,o){return{selected:n,last:o}};function nL(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2).index,l=e.oxw(2);return e.KtG(l.handleClickFolder(s.id,r,s.name||"Th\u01b0 m\u1ee5c "+s.id,l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==s.id&&1==l.state.itemSelecteds[r].type,s.shareType))}),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"path",20),e.qZA(),e.kcU(),e.TgZ(3,"span",21),e.YNc(4,X8,3,3,"span",2),e.YNc(5,eL,2,1,"span",2),e.qZA(),e.YNc(6,tL,3,3,"span",22),e._UZ(7,"mat-spinner",23),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2).index,a=e.oxw(2);e.Q6J("ngClass",e.WLB(7,Bm,a.state.itemSelecteds.length>0&&a.state.itemSelecteds[i]&&a.state.itemSelecteds[i].id==t.id&&1==a.state.itemSelecteds[i].type,a.state.itemSelecteds.length>0&&i==a.state.itemSelecteds.length-1&&a.state.itemSelecteds[i].id==t.id&&1==a.state.itemSelecteds[i].type)),e.xp6(3),e.Q6J("title",t.name),e.xp6(1),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",-1!=t.id),e.xp6(1),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("strokeWidth",2)("diameter",24)}}function iL(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2).index,l=e.oxw(2);return e.KtG(l.handleClickFile(s,r,s.name||"T\xean \u0111\u1ec1 thi",l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==(null==s.exam?null:s.exam.id)&&2==l.state.itemSelecteds[r].type))}),e.TgZ(2,"div",26),e.O4$(),e.TgZ(3,"svg",27),e._UZ(4,"path",28),e.qZA()(),e.kcU(),e.TgZ(5,"span",21),e._uU(6),e.qZA(),e._UZ(7,"mat-spinner",23),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(2).index,a=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(5,Bm,a.state.itemSelecteds.length>0&&a.state.itemSelecteds[i]&&a.state.itemSelecteds[i].id==(null==t.exam?null:t.exam.id)&&2==a.state.itemSelecteds[i].type,a.state.itemSelecteds.length>0&&i==a.state.itemSelecteds.length-1&&a.state.itemSelecteds[i].id==(null==t.exam?null:t.exam.id)&&2==a.state.itemSelecteds[i].type)),e.xp6(4),e.Q6J("title",(null==t.exam?null:t.exam.name)||(null==t.homework?null:t.homework.className)||""),e.xp6(1),e.hij(" ",(null==t.exam?null:t.exam.name)||(null==t.homework?null:t.homework.className)||""," "),e.xp6(1),e.Q6J("strokeWidth",2)("diameter",24)}}function oL(n,o){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,nL,8,10,"div",17),e.YNc(3,iL,8,8,"ng-container",10),e.qZA()()),2&n){const t=e.oxw(),i=t.last,a=t.$implicit,s=e.oxw(2);e.Q6J("width",300)("id",!s.state.showPreview&&i?"col-last":""),e.xp6(2),e.Q6J("ngForOf",a.categoryObjs),e.xp6(1),e.Q6J("ngForOf",a.documentObjs)}}function aL(n,o){if(1&n&&(e.TgZ(0,"div",29)(1,"div",16)(2,"div",30),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw(3);e.Q6J("id",t.state.showPreview?"":"col-last")("width",300),e.xp6(3),e.Oqu(e.lcZ(4,3,"lang_auto_thu_muc_trong"))}}function sL(n,o){if(1&n&&(e.ynx(0),e.YNc(1,oL,4,4,"div",13),e.YNc(2,aL,5,5,"ng-template",null,14,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.categoryObjs.length>0||t.documentObjs.length>0)("ngIfElse",i)}}function rL(n,o){if(1&n&&(e.TgZ(0,"div",29)(1,"div",16)(2,"div",31),e._uU(3),e.qZA()()()),2&n){const t=e.oxw(2);e.Q6J("id",t.state.showPreview?"":"col-last")("width",300),e.xp6(3),e.Oqu("[ERROR] "+t.state.error)}}function lL(n,o){if(1&n&&e._UZ(0,"azt-preview-list-question",35),2&n){const t=e.oxw(3);e.Q6J("exam",t.exam)("questionList",t.questionList)("filterTag",t.questionTag)("filterType",t.questionType)}}function cL(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"div",33),e.YNc(2,lL,1,4,"azt-preview-list-question",34),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.exam)}}function uL(n,o){if(1&n&&(e.ynx(0),e.YNc(1,sL,4,2,"ng-container",10),e.YNc(2,rL,4,3,"div",11),e.YNc(3,cL,3,1,"div",12),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.state.dataLevels),e.xp6(1),e.Q6J("ngIf",t.state.error),e.xp6(1),e.Q6J("ngIf",t.state.showPreview)}}function dL(n,o){if(1&n&&(e._uU(0),e.ALo(1,"mytranslate"),e.TgZ(2,"b"),e._uU(3),e.qZA()),2&n){const t=e.oxw();e.hij(" ",e.lcZ(1,2,"lang_auto_so_cau_da_chon"),":\xa0"),e.xp6(3),e.Oqu(t.calSelectings)}}function mL(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.tongleTooltip())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.tooltipRandom)}}function _L(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",36),e.YNc(1,mL,2,1,"span",37),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"input",38),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showTooltip=!0)})("keyup.enter",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handlePressEnter(a))})("ngModelChange",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.random=a)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showTooltip&&t.state.itemSelecteds.length>0),e.xp6(2),e.Oqu(e.lcZ(4,3,"lang_auto_nhap_so_cau_can_lay")),e.xp6(2),e.Q6J("ngModel",t.random)}}const pL=function(n){return{loading:n}};let hL=(()=>{class n extends W.Q{changeTypeQuestion(t){this.questionType=t}changeTagQuestion(t){this.questionTag=t}onKeydownHandler(t){"Escape"==t.key&&this.closeTestFinder.emit(void 0)}handlePressEnter(t){0==this.state.itemSelecteds.length||this.state.loading||this.handleClickChon()}handleClickFolder(t,i,a,s=!1,r){this.showTooltip=!0,!this.state.loading&&(s||(this.store.dispatch(xe.nm()),this.store.dispatch(xe.m_({item:{type:1,id:t,level:i,name:a,shareType:r}}))))}get tooltipRandom(){let t="",i="",a="",s="",r="";return this.commonService.getTranslate("lang_auto_lay_ngau_nhien_so_cau_hoi_o").subscribe(l=>{t=l}),this.commonService.getTranslate("lang_auto_nhom_thuong").subscribe(l=>{i=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_thu_muc_thuong").subscribe(l=>{a=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_de_thi_thuong").subscribe(l=>{s=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_dang_chon").subscribe(l=>{r=l}),t+" "+(void 0!==this.state.chosenGroup?i:0==this.state.itemSelecteds.length||1==this.state.itemSelecteds[this.state.itemSelecteds.length-1].type?a:s)+" "+r}handleClickFile(t,i,a,s=!1,r){if(this.showTooltip=!0,!this.state.loading&&!s&&t.exam){this.loadingPreview=!0;let l=t.exam.id??0;this.store.dispatch(xe.m_({item:{type:2,id:l,level:i,name:a,shareType:r}})),this.fectchPreview(l)}}fectchPreview(t){this.examService.apiExamGetQuestionsIdGet(t).subscribe(i=>{if(i.success){this.exam=i.data?.examObj?{...i.data?.examObj,attended:0}:void 0;let a=this.commonService.castJsonToClassObjs(ee.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.questionList=this.commonService.castJsonToClassObjs(y8,JSON.stringify(a))??[],this.loadingPreview=!1}else this.loadingPreview=!1})}handleClickCancel(){this.closeTestFinder.emit(void 0)}handleGetAllQuestionStringCode(){this.calSelectings<1&&this.random<1&&this.state.chosenGroup&&this.questionList.forEach(t=>{t.groupInfo?.groupId==this.state.chosenGroup&&(t.isSelected=!0)}),this.calSelectings<1&&this.random<1&&!this.state.chosenGroup&&this.questionList.forEach(t=>{t.isSelected=!0})}handleClickChon(){this.handleGetAllQuestionStringCode();let t="",i="",a="",s="",r="";if(this.commonService.getTranslate("lang_auto_nhom").subscribe(f=>{t=f}),this.commonService.getTranslate("lang_auto_cau_thuong").subscribe(f=>{i=f}),this.commonService.getTranslate("lang_auto_lay_tieu_de").subscribe(f=>{a=f}),this.commonService.getTranslate("lang_auto_lay_ngau_nhien").subscribe(f=>{s=f}),this.commonService.getTranslate("lang_auto_lay_toan_bo").subscribe(f=>{r=f}),this.calSelectings>0){this.store.dispatch(xe.qY({questions:this.questionList}));let f=[],y=0;for(let O=0;O<this.state.usedQuestionLocations.length;O++){const N=this.state.usedQuestionLocations[O];let I=[],z=0;for(let $=0;$<N.length;$++){const Y=N[$];let V=this.commonService.myTranslateInstant(this.cleanName(Y.name))??this.cleanName(Y.name);if(1==Y.type&&I.push(`[@C${Y.id}:${(Y.shareType&&"user"===Y.shareType?`:${Y.shareType}-`:null)??""}${V}]`),2==Y.type&&I.push(`[@T${Y.id}:${V}]`),3==Y.type){let K=this.questionList.filter(X=>X.groupInfo?.groupId&&X.groupInfo?.groupId==parseInt(V)).length;K&&I.push(`[@G${V}:${K}-${t} ${V}]`),z=parseInt(V)}4==Y.type&&I.push(`[@Q${Y.id}:${V.replace("[PDFv2] ","")}]`)}if(0!=z&&z!=y){let $=[...I];$[$.length-1]=`[${a}]`,f.push($.join(".")),y=z}f.push(I.join("."))}return void this.closeTestFinder.emit(f)}const l=this.state.itemSelecteds;let c=[];for(let f=0;f<l.length;f++){const y=l[f];let O=this.commonService.myTranslateInstant(this.cleanName(y.name))??this.cleanName(y.name);1==y.type&&c.push(`[@C${y.id}:${(y.shareType&&"user"===y.shareType?`:${y.shareType}-`:null)??""}${O}]`),2==y.type&&c.push(`[@T${y.id}:${O}]`)}if(this.questionType.length>0&&this.questionType.forEach(f=>{c.push(`[@F:${f.key}]`)}),this.questionTag.length>0&&this.questionTag.forEach(f=>{c.push(`[@F:${f.key}]`)}),this.state.chosenGroup){let f=this.questionList.filter(y=>y.groupInfo?.groupId==this.state.chosenGroup).length;if(c.push(`[@G${this.state.chosenGroup}:${f}-${t} ${this.state.chosenGroup}]`),this.random>0)c.push(`[${s} ${this.random} ${i}]`);else{let y=this.questionList.filter(O=>O.groupInfo?.groupId==this.state.chosenGroup).length;c.push(`[${r} ${y} ${i}]`)}}else if(this.random>0)c.push(`[${s} ${this.random} ${i}]`);else{if(!(this.questionList.length>0))return void this.showErrorSnack("lang_auto_ban_can_nhap_so_luong_it_nhat_1_cau");c.push(`[${r} ${this.questionList.length} ${i}]`)}let d=this.replaceFilterCodeStr(c);this.closeTestFinder.emit([d])}replaceFilterCodeStr(t){let i="";return t.forEach((a,s)=>{s<t.length-1?a.includes("[@F:")?i+=a+",":i+=a+".":i.includes("[@F:")?(i=i.substring(0,i.lastIndexOf(",")),i+="."+a):i+=a}),i}get calSelectings(){return this.questionList.filter(t=>t.isSelected).length}cleanName(t){let i=t;return i=i.replaceAll(/[\[\],\.\-]+/g,""),i}tongleTooltip(){this.showTooltip=!this.showTooltip}ngAfterViewInit(){if(this.state.itemSelecteds.length>0){let t=this.state.itemSelecteds[this.state.itemSelecteds.length-1];2==t.type&&this.fectchPreview(t.id)}}ngOnInit(){this.store.dispatch(xe.WR({isFirstTime:this.isFirstTime})),this.store.dispatch(xe.AL()),this.subscriptions.add(this.store.select(Fm.Y).subscribe(t=>{this.state=t,this.usedIds=this.state.usedQuestions.map(i=>i.id||0)})),super.ngOnInit()}constructor(t,i){super(),this.store=t,this.examService=i,this.closeTestFinder=new e.vpe,this.isFirstTime=!1,this.form=new p.nJ({}),this.random=0,this.usedIds=[],this.showTooltip=!0,this.questionList=[],this.loadingPreview=!1,this.questionType=[],this.questionTag=[],this.questionTypeList=[{key:"TN",value:"Tr\u1eafc nghi\u1ec7m"},{key:"TL",value:"T\u1ef1 lu\u1eadn"},{key:"\u0110T",value:"\u0110i\u1ec1n t\u1eeb"}],this.questionTagList=[{key:"NB",value:"Nh\u1eadn bi\u1ebft"},{key:"TH",value:"Th\xf4ng hi\u1ec3u"},{key:"VD",value:"V\u1eadn d\u1ee5ng"},{key:"VDC",value:"V\u1eadn d\u1ee5ng cao"}]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fn.yh),e.Y36(Ve.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-finder"]],hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(s){return i.onKeydownHandler(s)},!1,e.evT)},inputs:{isFirstTime:"isFirstTime"},outputs:{closeTestFinder:"closeTestFinder"},features:[e.qOj],decls:23,vars:35,consts:[["azt-track-service","test-finder-De2lZomoHz6",1,"close-button","clickable",3,"matTooltip","click"],["id","grid-parent",1,"grid-parent",3,"ngClass"],[4,"ngIf"],["id","examSaveBtns",1,"bg-slate-200","dark:bg-darkmode-400"],[1,"left","test-finder",3,"formGroup"],[2,"margin-left","3px",3,"selectPlaceholder","searchPlaceholder","options","selected","multiple","selectedEvent"],[1,"right"],["manualSelect",""],["class","random",4,"ngIf","ngIfElse"],["azt-track-service","test-finder-cpsVY9x_hjE",1,"btn","btn-primary","w-24","ml-3",3,"disabled","click"],[4,"ngFor","ngForOf"],["aztColResizable","",3,"id","width",4,"ngIf"],["class","preview-pane","id","col-last",4,"ngIf"],["aztColResizable","",3,"width","id",4,"ngIf","ngIfElse"],["emptyCol",""],["aztColResizable","",3,"width","id"],["colLeftContent",""],["azt-track-service","test-finder-s_cSxPWj6","class","doc-item doc-item-cate clickable mb-2",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-s_cSxPWj6",1,"doc-item","doc-item-cate","clickable","mb-2",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"cat-name",3,"title"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["color","accent",3,"strokeWidth","diameter"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","test-finder-1CILmbro_M",1,"doc-item","doc-item-file","clickable","mb-2",3,"ngClass","click"],[1,"file-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-pending"],["d","M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708z"],["aztColResizable","",3,"id","width"],[1,"text-center","alert","alert-info"],[1,"text-center","alert","alert-danger"],["id","col-last",1,"preview-pane"],[1,"preview-content"],[3,"exam","questionList","filterTag","filterType",4,"ngIf"],[3,"exam","questionList","filterTag","filterType"],[1,"random"],["azt-track-service","test-finder-ZvOINp82Nc","class","qv_tooltip",3,"click",4,"ngIf"],["type","text","appOnlyNumber","","name","random","id","random",1,"form-control",3,"ngModel","focus","keyup.enter","ngModelChange"],["azt-track-service","test-finder-ZvOINp82Nc",1,"qv_tooltip",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("click",function(){return i.handleClickCancel()}),e.ALo(1,"mytranslate"),e._uU(2,"close"),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,uL,4,3,"ng-container",2),e.qZA(),e.TgZ(5,"div",3)(6,"form",4)(7,"b"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"app-select-search-dropdown",5),e.NdJ("selectedEvent",function(s){return i.changeTagQuestion(s)}),e.ALo(11,"mytranslate"),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"app-select-search-dropdown",5),e.NdJ("selectedEvent",function(s){return i.changeTypeQuestion(s)}),e.ALo(14,"mytranslate"),e.ALo(15,"mytranslate"),e.qZA()(),e.TgZ(16,"div",6),e.YNc(17,dL,4,4,"ng-template",null,7,e.W1O),e.YNc(19,_L,6,5,"div",8),e.TgZ(20,"button",9),e.NdJ("click",function(){return i.handleClickChon()}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t){const a=e.MAs(18);e.s9C("matTooltip",e.lcZ(1,19,"lang_auto_dong")),e.xp6(3),e.Q6J("ngClass",e.VKq(33,pL,i.state.loading)),e.xp6(1),e.Q6J("ngIf",i.state.dataLevels.length>0),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(2),e.hij("",e.lcZ(9,21,"lang_testbank_testted_list_sort"),": "),e.xp6(2),e.Q6J("selectPlaceholder",e.lcZ(11,23,"lang_auto_select_tag"))("searchPlaceholder",e.lcZ(12,25,"lang_auto_search_tag"))("options",i.questionTagList)("selected",i.questionTag)("multiple",!0),e.xp6(3),e.Q6J("selectPlaceholder",e.lcZ(14,27,"lang_auto_select_type"))("searchPlaceholder",e.lcZ(15,29,"lang_auto_search_type"))("options",i.questionTypeList)("selected",i.questionType)("multiple",!0),e.xp6(6),e.Q6J("ngIf",0==i.calSelectings)("ngIfElse",a),e.xp6(1),e.Q6J("disabled",0==i.state.itemSelecteds.length||i.state.loading),e.xp6(1),e.Oqu(e.lcZ(22,31,"lang_auto_chon"))}},dependencies:[M.mk,M.sg,M.O5,vn.Hw,uo.Ou,Zt.gM,p._Y,p.Fj,p.JJ,p.JL,p.On,p.sg,E8,Vi.Y,Z8,V8,re.bT],styles:['.close-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;color:#9c9c9c;z-index:10}.close-button[_ngcontent-%COMP%]:hover{color:#747474;cursor:pointer}.grid-parent[_ngcontent-%COMP%]{min-width:300;width:100%;min-height:150px;height:100%;display:flex;flex-wrap:nowrap;overflow-y:auto;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:orange;margin-right:5px;width:40px;height:40px;min-width:40px;font-size:40px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:5px;padding:5px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{width:40px;min-width:40px;margin-right:5px;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .examTableIconObj[_ngcontent-%COMP%]{position:absolute;top:3px;left:5px;width:20px;background-image:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/titlePublishExam.png);background-position:top;background-size:cover;overflow:hidden;height:20px}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]{background-color:#7497c2}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{color:#fff}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected.last[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]{flex:1;min-width:800px;padding:15px;overflow-y:auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{width:100%;max-width:700px;height:100%;margin:0 auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .question-item[_ngcontent-%COMP%]{border:1px solid rgb(231,231,231)}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:50px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:15px;flex:auto;display:flex;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:right;align-items:center;padding-right:15px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:1px solid #eeeeee;margin-left:5px;padding:5px;width:100px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]{display:flex;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#18a2b8;margin-right:.25rem}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin-left:5px;width:auto!important}mat-spinner[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 570px){#examSaveBtns[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;padding-top:5px;padding-bottom:5px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:block;margin-bottom:5px;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex:none}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px!important}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-right:30px;padding-left:30px}}.qv_tooltip[_ngcontent-%COMP%]{bottom:47px;right:110px;display:flex;font-size:11px;justify-content:space-between;position:absolute;z-index:999;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:29px;left:298px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}']}),n})();var gL=S(11343),fL=S(92438),xL=S(92638);const bL=["editorContainer"];let vL=(()=>{class n{initMonacoAction(){return new Promise(t=>{const i="assets/monaco-editor/min/vs";"object"!=typeof window.monaco?(this.loaderScript.type="text/javascript",this.loaderScript.setAttribute("async","false"),this.loaderScript.src=`${i}/loader.js`,this.loaderScript.addEventListener("load",()=>{window.require.config({paths:{vs:`${i}`}}),window.require(["vs/editor/editor.main"],()=>{t()})}),document.body.appendChild(this.loaderScript)):t()})}ngAfterViewInit(){this.initMonacoAction().then(()=>{this.initMonaco()})}ngAfterViewChecked(){this.drawer.isOpened()||setTimeout(()=>{this._editor&&this._editor.layout()},100)}constructor(t,i,a,s,r,l,c){this.drawer=t,this.cdr=i,this.cdnService=a,this.documentService=s,this.examService=r,this.infoService=l,this.commonService=c,this.loaderScript=document.createElement("script"),this.config="",this.onInit=new e.vpe,this.returnImageMap=new e.vpe}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0),this.loaderScript.parentNode&&this.loaderScript.parentNode.removeChild(this.loaderScript)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(xL.h),e.Y36(e.sBO),e.Y36(xt.U),e.Y36(Ve.Zg),e.Y36(Ve.Oe),e.Y36(si.CM),e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(bL,7),2&t){let a;e.iGM(a=e.CRH())&&(i._editorContainer=a.first)}},inputs:{config:"config"},outputs:{onInit:"onInit",returnImageMap:"returnImageMap"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class Us{constructor(o){this.name=o}}class yL extends Us{run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=t.getValueInRange(a);o.executeEdits("",[{range:a,text:`<code>${s}</code>`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+6+s.length})}}class wL extends Us{run(o){let t=o.getPosition();o.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:t.column,endColumn:t.column},text:"________"}]),o.setPosition({lineNumber:t.lineNumber,column:t.column+8})}}class CL extends Us{run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=t.getValueInRange(a);o.executeEdits("",[{range:a,text:`\\( ${s} \\)`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+3+s.length})}}class bu extends Us{constructor(o,t){super(o),this.tag=t}run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=t.getValueInRange(a),r=s;s.indexOf(`!${this.tag}`)>=0?(r=r.replaceAll(`!${this.tag}`,""),r=r.replaceAll(/\[:\$(([^\$]|\$[^\]])+)\$\]/g,"$1")):r=s.startsWith("[!")?`[!${this.tag}`+s.substring(1):`[!${this.tag}:$${s}$]`,o.executeEdits("",[{range:a,text:r}])}}class kL extends Us{run(o){let t=o.getSelection(),i=o.getModel(),a={startLineNumber:t.startLineNumber,endLineNumber:t.endLineNumber,startColumn:t.startColumn,endColumn:t.endColumn},s=i.getValueInRange(a);/^\[\*?[A-H]:[^\]]+\]$/.test(s)?(s=s.substring(s.indexOf(":")+1,s.length-2),o.executeEdits("",[{range:a,text:s}])):o.executeEdits("",[{range:a,text:`[A:${s}]`}])}}class TL{constructor(){this.placeHolderRemoved=!1,this.decorations=[],this.parseChange=!0,this.hasError=!1}setIntellisense(o){this.azotaIntel=o}setSingleMode(o){this.azotaIntel?.setSingleMode(o)}setLang(o){this.lang=o,this.azotaIntel?.setLang(o)}registerPlugin(o,t){this._editor&&this._editor.addAction({id:o.name,label:o.name,keybindings:[this.monaco.KeyMod.CtrlCmd|t],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(i){o.run(i)}})}getCurLine(){return this._editor.getPosition().lineNumber}getCurLineText(){let o=this._editor.getPosition().lineNumber;return this._editor.getModel().getLineContent(o)}getLineText(o){return this._editor.getModel().getLineContent(o)}getCurQuest(){if(this.azotaIntel){let o=this.getCurLine()-1;return this.azotaIntel.getCurPos(o,50)[0]}}goToLine(o){this._editor.focus(),this._editor.setPosition({lineNumber:o,column:0}),this._editor.revealLineNearTop(o+1)}setPosition(o,t){let i={lineNumber:o,column:t};this._editor.focus(),this._editor.setPosition(i),this._editor.revealPositionNearTop(i)}insertDetails(o,t){let i=this.getLineText(o),s=[],r=i.replaceAll(/\s+/g," ").split("].[");r.splice(r.length-1);let l=r.join("].[")+"]";for(const c of t)s.push(l+`.[@Q${c}]`);if(s.length>0){let c=s.join("\n");this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:i.length+2},text:c}]),this._editor.setSelection({startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:0})}}setError(o){this.hasError=o.length>0;let t=[],i=this._editor.getModel();for(const a of o){let s=a.split("|"),r=+s[0],l=s[1],c=i.getLineContent(r);t.push({startLineNumber:r,endLineNumber:r,startColumn:0,endColumn:c.length+1,message:l})}this.monaco.editor.setModelMarkers(i,"",t)}init(o,t,i,a){i&&this.setLang(i);let s=this;this.monaco=o;let r="azota",l=o.languages.getLanguages().filter(V=>V.id==r),c=l&&l.length>0;c||(o.languages.register({id:r}),o.languages.setMonarchTokensProvider(r,{operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^\s*C\xe2u\s*\d+/,"question-label"],[/^\s*Question\s*\d+/,"question-label"],[/\s+\*?[A-Ha-h][\.\)]/,"answer-label"],[/^\s*\*?[A-Ha-h][\.\)]/,"answer-label"],[/\[[^\]]+\]/,"expression"],[/^\s*L\u1eddi gi\u1ea3i\s*$/,"token"],[/^\s*GLOSSARY\s*$/,"token"],[/^\s*B\u1ea2NG \u0110\xc1P \xc1N\s*$/,"token"],[/^\s*B\u1ea3ng \u0111\xe1p \xe1n\s*$/,"token"],[/^\s*\-+H\u1ebeT\-+\s*$/,"token"],[/^\s*H\u01b0\u1edbng d\u1eabn gi\u1ea3i\s*$/,"token"],[/^\s*H\u01af\u1edaNG D\u1eaaN GI\u1ea2I\s*$/,"token"],[/^\s*Ch\u1ecdn\s*[A-Ha-h]\s*$/,"choose"],[/^\s*Answer keys\s*$/,"token"],[/^\s*ANSWER KEYS\s*$/,"token"],[/^\s*Answer key\s*$/,"token"],[/^\s*ANSWER KEY\s*$/,"token"],[/^\s*Answer Section\s*$/,"token"],[/^\s*\-+THE END\-+\s*$/,"token"],[/^\s*\-+END\-+\s*$/,"token"],[/^\s*Instructions\s*$/,"token"],[/^\s*INSTRUCTIONS\s*$/,"token"],[/^\s*Choose\s*[A-Ha-h]\s*$/,"choose"],[/^[IVX]+\s*[\.:].*$/,"section"],[/^Section+\s*[\dA-K]+[\.:].*$/,"section"],[/^Part+\s*[\dA-KVX]+[\.:].*$/,"section"],[/^Ph\u1ea7n+\s*[\dA-KVX]+[\.:].*$/,"section"],[/\\[a-z][a-z0-9]+/,"latex"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}}));let d="dark"==localStorage.getItem("mode_ui");var V;o.editor.defineTheme("azotaTheme",{base:d?"vs-dark":"vs",inherit:!0,rules:[{token:"question-label",foreground:d?"569cd6":"3437eb",fontStyle:"bold"},{token:"answer-label",foreground:d?"FF6464":"ff0000",fontStyle:"bold"},{token:"expression",foreground:"ab2428"},{token:"operator",foreground:"ab2428"},{token:"latex",foreground:"3437eb"},{token:"keyword",foreground:"2504da"},{token:"keyword.predefined",foreground:"2504da"},{token:"token",foreground:"8f4106",fontStyle:"bold"},{token:"choose",foreground:"000000",fontStyle:"bold"},{token:"section",foreground:"000000",fontStyle:"bold"}],colors:{"editor.foreground":d?"#d4d4d4":"#000000","editor.background":d?"#25304C":"#ffffff"}}),c||(o.languages.setLanguageConfiguration(r,{brackets:[["{","}"],["[","]"],["(",")"],["\\(","\\)"],["[*","*]"]]}),o.languages.registerCompletionItemProvider(r,{triggerCharacters:["@",".",","],provideCompletionItems:(V=(0,$n.Z)(function*(te,K){if(!s.azotaIntel)return{suggestions:[]};let X=te.getWordUntilPosition(K),ye=te.getLineContent(K.lineNumber);return{suggestions:(yield s.azotaIntel.getSuggestions(K.lineNumber-1,K.column-1,X.word,ye)).map(oe=>{let Le,rt,pe=oe.split("|"),je=o.languages.CompletionItemKind.Text,st=pe[0];if(pe.length>2){switch(pe[2]){case"file":je=o.languages.CompletionItemKind.File,st="2"+pe[0];break;case"folder":je=o.languages.CompletionItemKind.Folder,st="1"+pe[0];break;case"class":je=o.languages.CompletionItemKind.Class,st="3"+pe[3];break;case"function":je=o.languages.CompletionItemKind.Function,st="3"+pe[3];break;case"snippet":je=o.languages.CompletionItemKind.Module,Le=o.languages.CompletionItemInsertTextRule.InsertAsSnippet,st="0"}rt={id:"editor.action.triggerSuggest",title:""}}return{label:pe[0],kind:je,insertText:pe[1],insertTextRules:Le,sortText:st,command:rt,documentation:{supportHtml:!0,value:pe[4]}}})}}),function(K,X){return V.apply(this,arguments)})}));let y=o.editor.create(t,{theme:"azotaTheme",language:r,wordBasedSuggestions:!1,minimap:{enabled:!1},overviewRulerLanes:0,wordWrap:"on",tabSize:4,readOnly:a}),O=y.getModel();y.onMouseDown(function(V){s.onChangePosCalback&&V.target.position&&s.onChangePosCalback(V.target.position.lineNumber,V.target.position.column),y.focus()});let N={domNode:null,getId:function(){return"my.content.widget"},getDomNode:function(){return this.domNode||this.domNode||(this.domNode=document.createElement("div"),this.domNode.innerHTML=s.lang?.myTranslateInstant("azt_lang_enter_at_to_choose_from_bank")??"Nh\u1eadp @ \u0111\u1ec3 ch\xe8n t\u1eeb ng\xe2n h\xe0ng c\xe1 nh\xe2n",this.domNode.style.color="grey",this.domNode.style.width="250px"),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:2},preference:[o.editor.ContentWidgetPositionPreference.BELOW]}}};y.addContentWidget(N),O.onDidChangeContent(V=>{let K=O.getValue().replaceAll("\r","").split("\n");this.placeHolderRemoved||(y.removeContentWidget(N),this.placeHolderRemoved=!0);let X=V.changes[0].range.startLineNumber,ye=X<=K.length?O.getLineContent(X):"";ye.startsWith("@[@")&&this.runEditAction([V.changes[0].range.startLineNumber-1+"|0|3|[@"],y,!1),ye.endsWith(".,")&&this.runEditAction([`${V.changes[0].range.startLineNumber-1}|${ye.length-2}|${ye.length}|,`],y,!1),this.azotaIntel&&this.parseChange?this.azotaIntel.onChange({startLineNumber:V.changes[0].range.startLineNumber,endLineNumber:V.changes[0].range.endLineNumber,startColumn:V.changes[0].range.startColumn,endColumn:V.changes[0].range.endColumn,text:V.changes[0].text},s,this.onChangeCalback):this.parseChange&&this.onChangeCalback&&this.onChangeCalback(K,null)});let I=y.addCommand(0,function(V,te,K){if(s.onInsertDetailsCb){let X=K.replaceAll(/\s+/g," ").trim();s.onInsertDetailsCb(X,te)}},""),z=y.addCommand(0,function(V,te,K){if(s.onRefreshCalback){let X=K.replaceAll(/\s+/g," ").trim();s.onRefreshCalback(X,te)}},""),$=y.addCommand(0,function(V,te,K){if(s.onInsertQuestTextCb){let X=K.replaceAll(/\s+/g," ").trim();s.onInsertQuestTextCb(X,te)}},""),Y=new Map;return a||(Y.set("insertDirectQuest",I),Y.set("insertQuestText",$)),Y.set("randomAgain",z),c||o.languages.registerCodeLensProvider(r,{provideCodeLenses:function(V,te){let K=V.getValue().split("\n");return s.azotaIntel?{lenses:s.azotaIntel.getCodeLens(K).map(ye=>{let ae=ye.split("|"),oe=+ae[0]+1;return{range:{startLineNumber:oe,startColumn:1,endLineNumber:oe,endColumn:1},id:ae[1],command:{id:Y.get(ae[1]),title:ae[2],arguments:[oe,ae[4]],tooltip:ae[3]}}}),dispose:()=>{}}:{lenses:[],dispose:()=>{}}}}),y.onKeyUp(V=>{if(V.keyCode==o.KeyCode.Enter&&s.runCommand("enter",y),V.keyCode==o.KeyCode.Tab){let te=y.getPosition(),K=O.getLineContent(te.lineNumber);te.column>K.length&&s.runCommand("tab",y)}}),y.onKeyDown(V=>{if(V.keyCode==o.KeyCode.Backspace){let te=y.getSelection();if(te.startLineNumber!=te.endLineNumber||te.startColumn!=te.endColumn)return;let K=y.getPosition(),ye=O.getValueInRange({startLineNumber:K.lineNumber,endLineNumber:K.lineNumber,startColumn:K.column-1,endColumn:K.column}),ae={startLineNumber:K.lineNumber,endLineNumber:K.lineNumber,startColumn:0,endColumn:K.column};if("]"==ye){let Le=O.getValueInRange(ae).lastIndexOf("[")+2;return ae.startColumn=Le,void y.executeEdits("",[{range:ae,text:""}])}let oe=O.getLineContent(K.lineNumber).trim(),pe=[/^C\xe2u\s\d+[\.:]$/,/^Question\s\d+[\.:]$/,/^[A-H]\.$/];if(K.column>oe.length){let je=!1;for(const Le of pe)if(Le.test(oe)){je=!0;break}if(je)return void y.executeEdits("",[{range:ae,text:"\n"}])}}}),y.onDidPaste(V=>{this.pastePosition=V}),o.languages.registerHoverProvider("azota",{provideHover:function(V,te){if(s.onHoverCalback){let K=s.onHoverCalback(te.lineNumber,te.column,V.getLineContent(te.lineNumber));return K?{range:new o.Range(K.lineIdx,K.s,K.lineIdx,K.e),contents:[{supportHtml:!0,value:K.text}]}:void 0}}}),this._editor=y,y.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.Enter,function(){}),this.registerPlugin(new wL(this.lang?.myTranslateInstant("azt_lang_menu_fill_blank")??"\u0110i\u1ec1n v\xe0o ch\u1ed7 tr\u1ed1ng"),o.KeyCode.Period),this.registerPlugin(new kL(this.lang?.myTranslateInstant("azt_lang_menu_find_mistake")??"\u0110\xe1p \xe1n t\xecm l\u1ed7i sai"),o.KeyCode.KeyD),this.registerPlugin(new CL(this.lang?.myTranslateInstant("azt_lang_menu_enter_latex")??"Nh\u1eadp latex"),o.KeyCode.KeyL),this.registerPlugin(new bu(this.lang?.myTranslateInstant("azt_lang_menu_italic")??"In nghi\xeang","i"),o.KeyCode.KeyI),this.registerPlugin(new bu(this.lang?.myTranslateInstant("azt_lang_menu_bold")??"In \u0111\u1eadm","b"),o.KeyCode.KeyB),this.registerPlugin(new bu(this.lang?.myTranslateInstant("azt_lang_menu_underline")??"G\u1ea1ch ch\xe2n","u"),o.KeyCode.KeyU),this.registerPlugin(new yL(this.lang?.myTranslateInstant("azt_lang_menu_enter_code")??"Hi\u1ec3n th\u1ecb d\u1ea1ng code block"),o.KeyCode.KeyF),setTimeout(()=>{this._editor.focus()},200),y}setHoverCalback(o){this.onHoverCalback=o}onChange(o){this.onChangeCalback=o}onChangePosition(o){this.onChangePosCalback=o}onRefreshInclude(o){this.onRefreshCalback=o}onInsertDetails(o){this.onInsertDetailsCb=o}onInsertQuestText(o){this.onInsertQuestTextCb=o}updateLine(o,t,i,a){this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:t,endColumn:i},text:a}])}insertLine(o){let t=this._editor.getPosition(),a=this._editor.getModel().getLineContent(t.lineNumber),s=a+"\n"+o;this._editor.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:0,endColumn:a.length+1},text:s.trim()}]);let l=t.lineNumber+s.split("\n").length;this._editor.setSelection({startLineNumber:l,endLineNumber:l,startColumn:0,endColumn:0}),this._editor.focus()}removeLines(o,t){let i=this.parseChange;this.parseChange=!1;for(let a=o.length-1;a>=0;a--){let s=o[a],r={startLineNumber:s+1,endLineNumber:s+2,startColumn:0,endColumn:0};0==a&&t&&(this.parseChange=!0),this._editor.executeEdits("",[{range:r,text:""}])}this.parseChange=i}removeText(o,t,i,a){let s={startLineNumber:o,endLineNumber:o,startColumn:t,endColumn:i},r=this.parseChange;this.parseChange=a,this._editor.executeEdits("",[{range:s,text:""}]),this.parseChange=r}getCurPos(){return this._editor.getPosition()}insertAtCurPos(o){let t=this._editor.getPosition();this._editor.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:t.column,endColumn:t.column},text:o}]);let a=t.lineNumber,s=t.column+o.length;return this._editor.setSelection({startLineNumber:a,endLineNumber:a,startColumn:s,endColumn:s}),this._editor.focus(),{lineIdx:a,startCol:t.column,endCol:s}}runEditAction(o,t,i,a){this.parseChange=!1;let s="",r=0;for(const l of o){let c=l.split("|"),d=+c[0]+1,O=c[3],N={startLineNumber:d,endLineNumber:d,startColumn:+c[1]+1,endColumn:+c[2]+1};if(r==o.length-1&&i&&!a&&(this.parseChange=!0),r==o.length-1&&a&&(O+="|"),t.executeEdits("",[{range:N,text:O}]),r==o.length-1&&a){this.parseChange=i??!1,N.startColumn=N.startColumn+O.length-1,N.endColumn=N.startColumn+1;let I=O.split("\n");I.length>1&&(N.startLineNumber=d+I.length-1,N.endLineNumber=N.startLineNumber,N.startColumn=I[I.length-1].length,N.endColumn=N.startColumn+1),t.executeEdits("",[{range:N,text:""}])}s=O,r++}return this.parseChange=!0,s}runCommand(o,t){let i=t.getPosition(),a=this.azotaIntel?.getAutofillValue(i.lineNumber-1,i.column-1,o);if(!a||0==a.length)return;let s=this.runEditAction(a,t,!0,!0),l=t.getModel().getLineCount(),c=s.split("\n").length,f={lineNumber:i.lineNumber+(i.lineNumber+c-1==l&&"enter"==o?c:0),column:("enter"==o?0:i.column)+s.length};t.setPosition(f),this.onChangePosCalback&&this.onChangePosCalback(f.lineNumber,f.column)}zeroPad(o,t){return o=o||2,(new Array(o).join("0")+t).slice(-1*o)}}class AL{constructor(o,t){this.examIntel=new D.ExamIntellisense(o),this.examIntel.setApiService(t),this.apiService=t}setSingleMode(o){this.examIntel.setSingleMode(o)}setLang(o){this.lang=o}getSuggestions(o,t,i,a){return new Promise(s=>{this.examIntel.getSuggestions(o,t,i,a).then(r=>{s(this.translate(r))})})}getAutofillValue(o,t,i){return this.translate(this.examIntel.getAutofillValue(o,t,i))}getCurPos(o,t){return this.examIntel.getCurPos(o,t)}getCodeLens(o){let t=[],i=0;for(const f of o)/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(f.trim())?(t.push(`${i}|insertDirectQuest|azt_lang_editor_insert_direct|azt_lang_editor_insert_direct_desc|${f.trim()}`),t.push(`${i}|randomAgain|azt_lang_editor_random_again|azt_lang_editor_random_again_desc|${f.trim()}`)):/\[@Q\d+:[^\]]*\]$/.test(f.trim())&&t.push(`${i}|insertQuestText|azt_lang_editor_insert_quest_text|azt_lang_editor_insert_quest_text_desc|${f.trim()}`),i++;return this.translate(t)}getApiService(){return this.apiService}onChange(o,t,i){if(1!=o.text.length||"\n"==o.text)this.notiChange(t,i);else{let a=t._editor.getValue().replaceAll("\r",""),s=a.split("\n"),r=200;a.length>1e5&&(r=200*a.length/1e5),this.examIntel.setLines(s),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.notiChange(t,i)},r)}}onMobileChange(o,t){let i=o.split("\n"),a=400;o.length>1e5&&(a=400*o.length/1e5),this.examIntel.setLines(i),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{let s=this.examIntel.parse();t&&t(i,s)},a)}translate(o){let t=[];for(let i of o)t.push(this.lang?.translateString(i)??i);return t}notiChange(o,t){let i=o._editor.getValue().replaceAll("\r",""),a=i.split("\n");this.examIntel.setLines(a);let s=this.examIntel.parse(),r=this.examIntel.getEditHint();r&&o.runEditAction(r,o._editor),o.parseChange=!0,r.length>0&&(i=o._editor.getValue(),a=i.split("\n"),this.examIntel.setLines(a),s=this.examIntel.parse()),t&&t(a,s)}}let OL=(()=>{class n extends vL{constructor(){super(...arguments),this.onStartProcessFile=new e.vpe,this.onSwitchFilePdf=new e.vpe}setupDropFile(){const t=jQuery("#frame_monaco_editor");t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.onStartProcessFile.emit(i.originalEvent.dataTransfer.files[0])})}initMonaco(){let t=new TL;this.editorApiService&&(t.setIntellisense(new AL(this.config,this.editorApiService)),this._editor=t.init(monaco,this._editorContainer.nativeElement,this.commonService,this.readOnly),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,fL.R)(window,"resize").subscribe(()=>this._editor.layout()),this.setupDropFile(),this.onInit.emit({azotaEditor:t}))}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-monaco-editor"]],inputs:{editorApiService:"editorApiService",readOnly:"readOnly"},outputs:{onStartProcessFile:"onStartProcessFile",onSwitchFilePdf:"onSwitchFilePdf"},features:[e._Bn([{provide:p.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.qOj],decls:4,vars:0,consts:[["id","frame_monaco_editor"],[1,"editor-container"],["editorContainer",""],[1,"file-drop-background"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1,2)(3,"div",3),e.qZA())},styles:["[_nghost-%COMP%]{display:block}.editor-container[_ngcontent-%COMP%]{width:100%;height:100%}#frame_monaco_editor[_ngcontent-%COMP%]{height:100%;position:relative}.file-drop-background[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000029;justify-content:center;align-items:center;color:#fff}"]}),n})();var SL=Object.defineProperty,EL=Object.defineProperties,ML=Object.getOwnPropertyDescriptors,zm=Object.getOwnPropertySymbols,IL=Object.prototype.hasOwnProperty,LL=Object.prototype.propertyIsEnumerable,Jm=(n,o,t)=>o in n?SL(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t,Ze=(n,o)=>{for(var t in o||(o={}))IL.call(o,t)&&Jm(n,t,o[t]);if(zm)for(var t of zm(o))LL.call(o,t)&&Jm(n,t,o[t]);return n},kt=(n,o)=>EL(n,ML(o));function Bn(n){return Array.isArray(n)}function Ei(){return"window"in globalThis&&"document"in globalThis}function Hm(){if(!Ei())throw new Error("<math-field> is an interactive component that needs to run in a browser environment\nIf you are using nextjs, see https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr")}function Km(){return"matchMedia"in globalThis?globalThis.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in globalThis||navigator.maxTouchPoints>0}function vu(){return"function"==typeof navigator.vibrate}function rs(){var n,o;if(!Ei())return"other";let t=null!=(o=null==(n=navigator.userAgentData)?void 0:n.platform)?o:navigator.platform;return/^mac/i.test(t)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(t)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function $m(){if(!Ei())return!0;if(/firefox/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/firefox\/(\d+)/i);return!!n&&parseInt(n[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/edg\/(\d+)/i);return!!n&&parseInt(n[1])>=79}return!0}var cn={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"\u0645\u0647\u0627\u0645","keyboard.tooltip.symbols":"\u062d\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.command":"\u062d\u0627\u0644\u0629 \u062a\u0644\u0642\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0644\u0627\u062a\u0643","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.roman":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621","menu.insert matrix":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.insert vector":"\u0623\u062f\u062e\u0644 \u0645\u062a\u062c\u0647","submenu.array.matrix delimiters":"\u0645\u062d\u062f\u062f\u0627\u062a \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064b\u0627 \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062d\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.array.delete column":"\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","menu.array.delete columns":"\u062d\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","submenu.array.insert separator":"\u0623\u062f\u062e\u0644 \u0641\u0627\u0635\u0644","menu.insert table":"\u0625\u062f\u0631\u0627\u062c \u062c\u062f\u0648\u0644","submenu.table style":"\u0646\u0645\u0637 \u0627\u0644\u062c\u062f\u0648\u0644"},bg:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u044a\u0446\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u0435\u043d \u0440\u0435\u0436\u0438\u043c \u043d\u0430 \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u0435 \u0432 \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434\u0430","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u041f\u0440\u0435\u0432\u043a\u043b\u044e\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u041e\u0442\u043c\u044f\u043d\u0430","menu.insert matrix":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u0441\u043b\u0435\u0434","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434\u0438","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u0441\u043b\u0435\u0434","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434\u0438","menu.array.delete row":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434\u0430","menu.array.delete rows":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430","menu.array.delete columns":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0438","submenu.array.insert separator":"\u041f\u043e\u0441\u0442\u0430\u0432\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b","menu.insert table":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u0435\u043d \u0441\u0442\u0438\u043b"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i red","menu.array.delete rows":"Izbri\u0161i odabrane redove","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"\u0158eck\xe9 dopisy","keyboard.tooltip.command":"P\u0159\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"\u010c\xedseln\xe9","keyboard.tooltip.roman":"\u0158\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"P\u0159ed\u011blat","tooltip.toggle virtual keyboard":"P\u0159epnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vlo\u017ete matici","menu.insert vector":"Vlo\u017eit vektor","submenu.array.matrix delimiters":"Odd\u011blova\u010de matic","menu.array.add row above":"P\u0159idat \u0159\xe1dek za","menu.array.add row below":"P\u0159idat \u0159\xe1dek p\u0159ed","menu.array.add column after":"P\u0159idat sloupec za","menu.array.add column before":"P\u0159idat sloupec d\u0159\xedve","menu.array.delete row":"Odstranit \u0159\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 \u0159\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vlo\u017ete odd\u011blova\u010d","menu.insert table":"Vlo\u017eit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"\u03c3\u03c5\u03bd\u03b1\u03c1\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2","keyboard.tooltip.symbols":"\u03c3\u03cd\u03bc\u03b2\u03bf\u03bb\u03b1","keyboard.tooltip.greek":"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","keyboard.tooltip.command":"\u039b\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b5\u03bd\u03c4\u03bf\u03bb\u03ce\u03bd LaTeX","keyboard.tooltip.numeric":"\u0391\u03c1\u03b9\u03b8\u03bc\u03b7\u03c4\u03b9\u03ba\u03cc\u03c2","keyboard.tooltip.roman":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","tooltip.copy to clipboard":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03bf \u03c0\u03c1\u03cc\u03c7\u03b5\u03b9\u03c1\u03bf","tooltip.redo":"\u039e\u03b1\u03bd\u03b1\u03ba\u03ac\u03bd\u03c9","tooltip.toggle virtual keyboard":"\u0395\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03ba\u03bf\u03cd \u03c0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5","tooltip.undo":"\u039e\u03b5\u03ba\u03ac\u03bd\u03c9","menu.insert matrix":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae Matrix","menu.insert vector":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03bd\u03cd\u03c3\u03bc\u03b1\u03c4\u03bf\u03c2","submenu.array.matrix delimiters":"\u039f\u03c1\u03b9\u03bf\u03b8\u03ad\u03c4\u03b5\u03c2 Matrix","menu.array.add row above":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add row below":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.add column after":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add column before":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.delete row":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.array.delete rows":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03b5\u03b9\u03c1\u03ce\u03bd","menu.array.delete column":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2","menu.array.delete columns":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd","submenu.array.insert separator":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03c7\u03c9\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03bf\u03cd","menu.insert table":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03af\u03bd\u03b1\u03ba\u03b1","submenu.table style":"\u03a3\u03c4\u03c5\u03bb \u03c0\u03af\u03bd\u03b1\u03ba\u03b1"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4sure\u017eiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.roman":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"\u062a\u0648\u0627\u0628\u0639","keyboard.tooltip.symbols":"\u0646\u0645\u0627\u062f\u0647\u0627","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u06cc\u0648\u0646\u0627\u0646\u06cc","keyboard.tooltip.command":"\u062d\u0627\u0644\u062a \u062f\u0633\u062a\u0648\u0631 \u0644\u0627\u062a\u06a9","keyboard.tooltip.numeric":"\u0639\u062f\u062f\u06cc","keyboard.tooltip.roman":"\u062d\u0631\u0648\u0641 \u0631\u0648\u0645\u06cc","tooltip.copy to clipboard":"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e\u0628\u0648\u0631\u062f","tooltip.redo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0628\u0639\u062f","tooltip.toggle virtual keyboard":"\u0646\u0645\u0627\u06cc\u0634/\u0646\u0647\u0641\u062a\u0646 \u06a9\u06cc\u0628\u0648\u0631\u062f \u0645\u062c\u0627\u0632\u06cc","tooltip.undo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0642\u0628\u0644","menu.insert matrix":"\u0645\u0627\u062a\u0631\u06cc\u0633 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","menu.insert vector":"\u062f\u0631\u062c \u0628\u0631\u062f\u0627\u0631","submenu.array.matrix delimiters":"\u0645\u0631\u0632\u0647\u0627\u06cc \u0645\u0627\u062a\u0631\u06cc\u0633","menu.array.add row above":"\u0628\u0639\u062f \u0627\u0632 \u0622\u0646 \u0631\u062f\u06cc\u0641 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add row below":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u0642\u0628\u0644 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add column after":"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0633\u062a\u0648\u0646 \u0628\u0639\u062f","menu.array.add column before":"\u0633\u062a\u0648\u0646 \u0642\u0628\u0644 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.delete row":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete rows":"\u0631\u062f\u06cc\u0641 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete column":"\u062d\u0630\u0641 \u0633\u062a\u0648\u0646","menu.array.delete columns":"\u0633\u062a\u0648\u0646 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","submenu.array.insert separator":"\u062f\u0631\u062c \u062c\u062f\u0627 \u06a9\u0646\u0646\u062f\u0647","menu.insert table":"\u0642\u0631\u0627\u0631 \u062f\u0627\u062f\u0646 \u062c\u062f\u0648\u0644","submenu.table style":"\u0633\u0628\u06a9 \u0645\u06cc\u0632"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.roman":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.roman":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d5\u05ea","keyboard.tooltip.symbols":"\u05e1\u05de\u05dc\u05d9\u05dd","keyboard.tooltip.greek":"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05d5\u05d5\u05e0\u05d9\u05d5\u05ea","keyboard.tooltip.command":"\u05de\u05e6\u05d1 \u05e4\u05e7\u05d5\u05d3\u05d4 \u05dc\u05d8\u05e7\u05e1","keyboard.tooltip.numeric":"\u05de\u05e1\u05e4\u05e8\u05d9","keyboard.tooltip.roman":"\u05de\u05db\u05ea\u05d1\u05d9\u05dd \u05e8\u05d5\u05de\u05d9\u05d9\u05dd","tooltip.copy to clipboard":"\u05d4\u05e2\u05ea\u05e7 \u05dc\u05dc\u05d5\u05d7","tooltip.redo":"\u05dc\u05b7\u05e2\u05b2\u05e9\u05c2\u05d5\u05b9\u05ea \u05e9\u05c1\u05d5\u05bc\u05d1","tooltip.toggle virtual keyboard":"\u05d4\u05d7\u05dc\u05e3 \u05d0\u05ea \u05d4\u05de\u05e7\u05dc\u05d3\u05ea \u05d4\u05d5\u05d5\u05d9\u05e8\u05d8\u05d5\u05d0\u05dc\u05d9\u05ea","tooltip.undo":"\u05dc\u05d1\u05d8\u05dc","menu.insert matrix":"\u05d4\u05db\u05e0\u05e1 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.insert vector":"\u05d4\u05db\u05e0\u05e1 \u05d5\u05e7\u05d8\u05d5\u05e8","submenu.array.matrix delimiters":"\u05de\u05e4\u05e8\u05d9\u05d3\u05d9 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.array.add row above":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add row below":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.add column after":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add column before":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.delete row":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4","menu.array.delete rows":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.array.delete column":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4","menu.array.delete columns":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","submenu.array.insert separator":"\u05d4\u05db\u05e0\u05e1 \u05de\u05e4\u05e8\u05d9\u05d3","menu.insert table":"\u05d4\u05db\u05e0\u05e1 \u05d8\u05d1\u05dc\u05d4","submenu.table style":"\u05d8\u05d1\u05dc\u05d4 \u05e1\u05b4\u05d2\u05b0\u05e0\u05d5\u05b9\u05df"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u me\u0111uspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i redak","menu.array.delete rows":"Izbri\u0161i odabrane retke","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.roman":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"\u0915\u093e\u0930\u094d\u092f\u094b\u0902","keyboard.tooltip.symbols":"\u092a\u094d\u0930\u0924\u0940\u0915","keyboard.tooltip.greek":"\u0917\u094d\u0930\u0940\u0915 \u0905\u0915\u094d\u0937\u0930","keyboard.tooltip.command":"\u0932\u093e\u091f\u0947\u0915\u094d\u0938 \u0915\u092e\u093e\u0902\u0921 \u092e\u094b\u0921","keyboard.tooltip.numeric":"\u0938\u0902\u0916\u094d\u092f\u093e\u0924\u094d\u092e\u0915","keyboard.tooltip.roman":"\u0930\u094b\u092e\u0928 \u092a\u0924\u094d\u0930","tooltip.copy to clipboard":"\u0915\u094d\u0932\u093f\u092a\u092c\u094b\u0930\u094d\u0921 \u092a\u0930 \u0915\u0949\u092a\u0940 \u0915\u0930\u0947\u0902","tooltip.redo":"\u092b\u093f\u0930 \u0938\u0947 \u0915\u0930\u0947\u0902","tooltip.toggle virtual keyboard":"\u0935\u0930\u094d\u091a\u0941\u0905\u0932 \u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u091f\u0949\u0917\u0932 \u0915\u0930\u0947\u0902","tooltip.undo":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924","menu.insert matrix":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0921\u093e\u0932\u0947\u0902","menu.insert vector":"\u0935\u0947\u0915\u094d\u091f\u0930 \u0921\u093e\u0932\u0947\u0902","submenu.array.matrix delimiters":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0938\u0940\u092e\u093e\u0902\u0915\u0915","menu.array.add row above":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add row below":"\u092a\u0939\u0932\u0947 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column after":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column before":"\u092a\u0939\u0932\u0947 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.delete row":"\u092a\u0902\u0915\u094d\u0924\u093f \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete rows":"\u091a\u092f\u0928\u093f\u0924 \u092a\u0902\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete column":"\u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","menu.array.delete columns":"\u091a\u092f\u0928\u093f\u0924 \u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","submenu.array.insert separator":"\u0935\u093f\u092d\u093e\u091c\u0915 \u0921\u093e\u0932\u0947\u0902","menu.insert table":"\u091f\u0947\u092c\u0932 \u0907\u0902\u0938\u0930\u094d\u091f \u0915\u0930\u0947\u0902","submenu.table style":"\u091f\u0947\u092c\u0932 \u0938\u094d\u091f\u093e\u0907\u0932"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.roman":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billenty\u0171zetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor el\u0151tt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop el\u0151tt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.roman":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"\u95a2\u6570","keyboard.tooltip.symbols":"\u30b7\u30f3\u30dc\u30eb","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.command":"\u30e9\u30c6\u30c3\u30af\u30b9\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.roman":"\u30ed\u30fc\u30de\u5b57","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059","menu.insert matrix":"\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u633f\u5165","menu.insert vector":"\u30d9\u30af\u30c8\u30eb\u3092\u633f\u5165","submenu.array.matrix delimiters":"\u884c\u5217\u533a\u5207\u308a\u6587\u5b57","menu.array.add row above":"\u5f8c\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add row below":"\u524d\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add column after":"\u5f8c\u306b\u5217\u3092\u8ffd\u52a0","menu.array.add column before":"\u524d\u306b\u5217\u3092\u8ffd\u52a0","menu.array.delete row":"\u884c\u3092\u524a\u9664","menu.array.delete rows":"\u9078\u629e\u3057\u305f\u884c\u3092\u524a\u9664\u3059\u308b","menu.array.delete column":"\u5217\u3092\u524a\u9664","menu.array.delete columns":"\u9078\u629e\u3057\u305f\u5217\u3092\u524a\u9664\u3059\u308b","submenu.array.insert separator":"\u30bb\u30d1\u30ec\u30fc\u30bf\u30fc\u3092\u633f\u5165","menu.insert table":"\u30c6\u30fc\u30d6\u30eb\u3092\u633f\u5165","submenu.table style":"\u30c6\u30fc\u30d6\u30eb\u30b9\u30bf\u30a4\u30eb"},ko:{"keyboard.tooltip.functions":"\uae30\ub2a5","keyboard.tooltip.symbols":"\uae30\ud638","keyboard.tooltip.greek":"\uadf8\ub9ac\uc2a4 \ubb38\uc790","keyboard.tooltip.command":"\uc720\uc561 \uba85\ub839 \ubaa8\ub4dc","keyboard.tooltip.numeric":"\uc22b\uc790","keyboard.tooltip.roman":"\ub85c\ub9c8 \ubb38\uc790","tooltip.copy to clipboard":"\ud074\ub9bd \ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac","tooltip.redo":"\ub2e4\uc2dc \ud558\ub2e4","tooltip.toggle virtual keyboard":"\uac00\uc0c1 \ud0a4\ubcf4\ub4dc \uc804\ud658","tooltip.undo":"\uc2e4\ud589 \ucde8\uc18c","menu.insert matrix":"\ub9e4\ud2b8\ub9ad\uc2a4 \uc0bd\uc785","menu.insert vector":"\ubca1\ud130 \uc0bd\uc785","submenu.array.matrix delimiters":"\ud589\ub82c \uad6c\ubd84 \uae30\ud638","menu.array.add row above":"\ub4a4\uc5d0 \ud589 \ucd94\uac00","menu.array.add row below":"\uc55e\uc5d0 \ud589 \ucd94\uac00","menu.array.add column after":"\ub4a4\uc5d0 \uc5f4 \ucd94\uac00","menu.array.add column before":"\uc55e\uc5d0 \uc5f4 \ucd94\uac00","menu.array.delete row":"\ud589 \uc0ad\uc81c","menu.array.delete rows":"\uc120\ud0dd\ud55c \ud589 \uc0ad\uc81c","menu.array.delete column":"\uc5f4 \uc0ad\uc81c","menu.array.delete columns":"\uc120\ud0dd\ud55c \uc5f4 \uc0ad\uc81c","submenu.array.insert separator":"\uad6c\ubd84\uc790 \uc0bd\uc785","menu.insert table":"\ud45c \uc0bd\uc785","submenu.table style":"\ud14c\uc774\ube14 \uc2a4\ud0c0\uc77c"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grie\u0137u burti","keyboard.tooltip.command":"LaTeX komandu re\u017e\u012bms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.roman":"Romie\u0161u v\u0113stules","tooltip.copy to clipboard":"Kop\u0113t starpliktuv\u0113","tooltip.redo":"P\u0101rtais\u012bt","tooltip.toggle virtual keyboard":"P\u0101rsl\u0113gt virtu\u0101lo tastat\u016bru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graiki\u0161kos raid\u0117s","keyboard.tooltip.command":"LaTeX komand\u0173 re\u017eimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.roman":"Romos lai\u0161kai","tooltip.copy to clipboard":"Nukopijuoti \u012f i\u0161karpin\u0119","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtuali\u0105j\u0105 klaviat\u016br\u0105","tooltip.undo":"At\u0161aukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.roman":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.roman":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0447\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u043e \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0432\u043e \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u0412\u043a\u043b\u0443\u0447\u0435\u0442\u0435 \u0458\u0430 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0430\u0442\u0430 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u0412\u0440\u0430\u0442\u0438","menu.insert matrix":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u0420\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0443\u0432\u0430\u0447\u0438 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0434\u0438 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0433\u043e \u0440\u0435\u0434\u043e\u0442","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0435\u0442\u0435 \u0433\u0438 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0438","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","submenu.array.insert separator":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0442\u0430\u0431\u0435\u043b\u0430","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430 \u0441\u0442\u0438\u043b"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece\u0144 LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wype\u0142nij tabel\u0119","submenu.table style":"Styl tabel\u0119"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Func\u021bii","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grece\u0219ti","keyboard.tooltip.command":"Modul de comand\u0103 latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Scrisori romane","tooltip.copy to clipboard":"Copia\u021bi \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comuta\u021bi tastatura virtual\u0103","tooltip.undo":"Anula","menu.insert matrix":"Introduce\u021bi Matrix","menu.insert vector":"Insera\u021bi Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Ad\u0103uga\u021bi r\xe2ndul dup\u0103","menu.array.add row below":"Ad\u0103uga\u021bi r\xe2ndul \xeenainte","menu.array.add column after":"Ad\u0103uga\u021bi o coloan\u0103 dup\u0103","menu.array.add column before":"Ad\u0103uga\u021bi o coloan\u0103 \xeenainte","menu.array.delete row":"\u0218terge\u021bi r\xe2ndul","menu.array.delete rows":"\u0218terge\u021bi r\xe2ndurile selectate","menu.array.delete column":"\u0218terge\u021bi coloana","menu.array.delete columns":"\u0218terge\u021bi coloanele selectate","submenu.array.insert separator":"Introduce\u021bi separatorul","menu.insert table":"Introduce\u021bi tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u044b","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u041b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439","keyboard.tooltip.roman":"\u041b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","tooltip.copy to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","tooltip.redo":"\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0440\u0430\u0441\u0441\u0442\u0435\u0433\u0438\u0432\u0430\u0442\u044c","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u044b\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0435\u0440\u0435\u0434","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443","menu.array.delete rows":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438","menu.array.delete column":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","menu.array.delete columns":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.roman":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrova\u0165 do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfa\u0165 virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4\u0165","menu.insert matrix":"Vlo\u017ete maticu","menu.insert vector":"Vlo\u017ete vektor","submenu.array.matrix delimiters":"Odde\u013eova\u010de mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Prida\u0165 st\u013apec za","menu.array.add column before":"Pridajte st\u013apec predt\xfdm","menu.array.delete row":"Odstr\xe1ni\u0165 riadok","menu.array.delete rows":"Odstr\xe1ni\u0165 vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1ni\u0165 st\u013apec","menu.array.delete columns":"Odstr\xe1ni\u0165 vybrat\xe9 st\u013apce","submenu.array.insert separator":"Vlo\u017ete odde\u013eova\u010d","menu.insert table":"Vlo\u017ete tabu\u013eku","submenu.table style":"\u0160t\xfdl tabu\u013eky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u0161ka pisma","keyboard.tooltip.command":"Ukazni na\u010din LaTeX","keyboard.tooltip.numeric":"\u0160tevilsko","keyboard.tooltip.roman":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odlo\u017ei\u0161\u010de","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matri\u010dni lo\u010devalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbri\u0161i vrstico","menu.array.delete rows":"Izbri\u0161i izbrane vrstice","menu.array.delete column":"Izbri\u0161i stolpec","menu.array.delete columns":"Izbri\u0161i izbrane stolpce","submenu.array.insert separator":"Vstavi lo\u010dilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.roman":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0458\u0435","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0435\u043a \u041b\u0435\u0442\u0442\u0435\u0440\u0441","keyboard.tooltip.command":"\u041b\u0430\u0422\u0435\u041a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u0438 \u0440\u0435\u0436\u0438\u043c","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0430 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0443 \u043c\u0435\u0452\u0443\u0441\u043f\u0440\u0435\u043c\u043d\u0438\u043a","tooltip.redo":"\u041f\u043e\u043d\u043e\u0432\u0438","tooltip.toggle virtual keyboard":"\u0423\u043a\u0459\u0443\u0447\u0438 / \u0438\u0441\u043a\u0459\u0443\u0447\u0438 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0443 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u041e\u043f\u043e\u0437\u043e\u0432\u0438","menu.insert matrix":"\u0423\u043c\u0435\u0442\u043d\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u043a \u0414\u0435\u043b\u0438\u043c\u0438\u0442\u0435\u0440\u0441","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u0440\u0435","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u0440\u0435","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0440\u0435\u0434","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u043a\u043e\u043b\u043e\u043d\u0443","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u043a\u043e\u043b\u043e\u043d\u0435","submenu.array.insert separator":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0423\u0431\u0430\u0446\u0438 \u0442\u0430\u0431\u0435\u043b\u0443","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430\u0440\u043d\u0438 \u0441\u0442\u0438\u043b"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"\u0e1f\u0e31\u0e07\u0e01\u0e4c\u0e0a\u0e31\u0e48\u0e19","keyboard.tooltip.symbols":"\u0e2a\u0e31\u0e0d\u0e25\u0e31\u0e01\u0e29\u0e13\u0e4c","keyboard.tooltip.greek":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e01\u0e23\u0e35\u0e01","keyboard.tooltip.command":"\u0e42\u0e2b\u0e21\u0e14\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 \u0e19\u0e49\u0e33\u0e22\u0e32\u0e07","keyboard.tooltip.numeric":"\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02","keyboard.tooltip.roman":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e42\u0e23\u0e21\u0e31\u0e19","tooltip.copy to clipboard":"\u0e04\u0e31\u0e14\u0e25\u0e2d\u0e01\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e04\u0e25\u0e34\u0e1b\u0e1a\u0e2d\u0e23\u0e4c\u0e14","tooltip.redo":"\u0e17\u0e33\u0e0b\u0e49\u0e33","tooltip.toggle virtual keyboard":"\u0e2a\u0e25\u0e31\u0e1a\u0e41\u0e1b\u0e49\u0e19\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e40\u0e2a\u0e21\u0e37\u0e2d\u0e19","tooltip.undo":"\u0e40\u0e25\u0e34\u0e01\u0e17\u0e33","menu.insert matrix":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.insert vector":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e27\u0e01\u0e40\u0e15\u0e2d\u0e23\u0e4c","submenu.array.matrix delimiters":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.array.add row above":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e2b\u0e25\u0e31\u0e07","menu.array.add row below":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e01\u0e48\u0e2d\u0e19","menu.array.add column after":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e2b\u0e25\u0e31\u0e07","menu.array.add column before":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e01\u0e48\u0e2d\u0e19","menu.array.delete row":"\u0e25\u0e1a\u0e41\u0e16\u0e27","menu.array.delete rows":"\u0e25\u0e1a\u0e41\u0e16\u0e27\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","menu.array.delete column":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c","menu.array.delete columns":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","submenu.array.insert separator":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e41\u0e17\u0e23\u0e01","menu.insert table":"\u0e41\u0e17\u0e23\u0e01\u0e15\u0e32\u0e23\u0e32\u0e07","submenu.table style":"\u0e2a\u0e44\u0e15\u0e25\u0e4c\u0e15\u0e32\u0e23\u0e32\u0e07"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Say\u0131sal","keyboard.tooltip.roman":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris S\u0131n\u0131rlay\u0131c\u0131lar","menu.array.add row above":"Sat\u0131rdan Sonra Ekle","menu.array.add row below":"\xd6nce Sat\u0131r Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"S\u0131ray\u0131 sil","menu.array.delete rows":"Se\xe7ili Sat\u0131rlar\u0131 Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunlar\u0131 Sil","submenu.array.insert separator":"Ay\u0131r\u0131c\u0131 Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0456\u0457","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u043b\u0430\u0442\u0435\u043a\u0441\u0443","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438\u0439","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0456\u043d\u0443","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u044e","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0456 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a\u0438","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043f\u0456\u0441\u043b\u044f","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0434\u043e","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0456\u0441\u043b\u044f","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0440\u044f\u0434\u043a\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0441\u0442\u043e\u0432\u043f\u0446\u0456","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0442\u0435 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","submenu.table style":"\u0421\u0442\u0438\u043b\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0456"},vi:{"keyboard.tooltip.functions":"Ch\u1ee9c n\u0103ng","keyboard.tooltip.symbols":"K\xfd hi\u1ec7u","keyboard.tooltip.greek":"Ch\u1eef Hy L\u1ea1p","keyboard.tooltip.command":"Ch\u1ebf \u0111\u1ed9 l\u1ec7nh LaTeX","keyboard.tooltip.numeric":"S\u1ed1","keyboard.tooltip.roman":"Ch\u1eef c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m l\u1ea1i","tooltip.toggle virtual keyboard":"Chuy\u1ec3n \u0111\u1ed5i b\xe0n ph\xedm \u1ea3o","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma tr\u1eadn","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"D\u1ea5u ph\xe2n c\xe1ch ma tr\u1eadn","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng tr\u01b0\u1edbc","menu.array.add column after":"Th\xeam c\u1ed9t sau","menu.array.add column before":"Th\xeam c\u1ed9t tr\u01b0\u1edbc","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng \u0111\xe3 ch\u1ecdn","menu.array.delete column":"X\xf3a c\u1ed9t","menu.array.delete columns":"X\xf3a c\xe1c c\u1ed9t \u0111\xe3 ch\u1ecdn","submenu.array.insert separator":"Ch\xe8n d\u1ea5u ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n b\u1ea3ng","submenu.table style":"Ki\u1ec3u b\u1ea3ng"},zh_cn:{"keyboard.tooltip.functions":"\u804c\u80fd","keyboard.tooltip.symbols":"\u7b26\u53f7","keyboard.tooltip.greek":"\u5e0c\u814a\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u80f6 \u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6570\u5b57","keyboard.tooltip.roman":"\u7f57\u9a6c\u5b57\u6bcd","tooltip.copy to clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u6362\u865a\u62df\u952e\u76d8","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9635","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9635\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u540e\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u540e\u9762\u6dfb\u52a0\u5217r","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u5220\u9664\u884c","menu.array.delete rows":"\u5220\u9664\u9009\u5b9a\u884c","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6837\u5f0f"},zh_tw:{"keyboard.tooltip.functions":"\u8077\u80fd","keyboard.tooltip.symbols":"\u7b26\u865f","keyboard.tooltip.greek":"\u5e0c\u81d8\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u81a0\u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6578\u5b57","keyboard.tooltip.roman":"\u7f85\u99ac\u5b57\u6bcd","tooltip.copy to clipboard":"\u8907\u88fd\u5230\u526a\u8cbc\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u63db\u865b\u64ec\u9375\u76e4","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9663","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9663\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u5f8c\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u5f8c\u9762\u6dfb\u52a0\u5217","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u522a\u9664\u884c","menu.array.delete rows":"\u522a\u9664\u9078\u5b9a\u884c","menu.array.delete column":"\u522a\u9664\u5217","menu.array.delete columns":"\u522a\u9664\u9078\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6a23\u5f0f"}},_locale:"",get locale(){return cn._locale||(cn._locale=Ei()?navigator.language.slice(0,5):"en"),cn._locale},set locale(n){cn._locale=n},merge(n,o){if(n&&o){let t=cn._locale;cn.locale=n,cn.strings[n]=Ze(Ze({},cn.strings[n]),o),cn.locale=t}else if(n&&!o)for(let t of Object.keys(n))cn.merge(t,n[t])}};function Oa(n){if(void 0===n)return;let o=cn.locale.slice(0,2),t="";return cn.strings[cn.locale]&&(t=cn.strings[cn.locale][n]),!t&&cn.strings[o]&&(t=cn.strings[o][n]),t||(t=cn.strings.en[n]),t||void 0}var PL={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},jL={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},pl={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},hl={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Ym={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},DL={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function gl(n){var o,t,i,a,s,r;let c,d,f,l=n.split("!"),y=255,O=255,N=255,I=-1,z=l.length>0&&l[0].startsWith("-");z&&(l[0]=l[0].slice(1));for(let $=0;$<l.length;$++){c=y,d=O,f=N;let Y=null==(o=l[$].trim().match(/^([A-Za-z\d]+)/))?void 0:o[1],V=Y?.toLowerCase(),te=Y&&null!=(r=null!=(s=null!=(a=null!=(i=null!=(t=hl[V])?t:hl[Ym[Y]])?i:jL[Y])?a:DL[Y])?s:PL[Y])?r:l[$].trim(),K=te.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=K&&K[1]&&K[2]&&K[3])y=Math.max(0,Math.min(255,Number.parseInt(K[1],16))),O=Math.max(0,Math.min(255,Number.parseInt(K[2],16))),N=Math.max(0,Math.min(255,Number.parseInt(K[3],16)));else if(K=te.match(/^#([\da-f]{3})$/i),null!=K&&K[1]){let X=Number.parseInt(K[1][0],16),ye=Number.parseInt(K[1][1],16),ae=Number.parseInt(K[1][2],16);y=Math.max(0,Math.min(255,16*X+X)),O=Math.max(0,Math.min(255,16*ye+ye)),N=Math.max(0,Math.min(255,16*ae+ae))}else{if(K=te.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(null!=K&&K[1]&&K[2]&&K[3]))return;y=Math.max(0,Math.min(255,Number.parseInt(K[1]))),O=Math.max(0,Math.min(255,Number.parseInt(K[2]))),N=Math.max(0,Math.min(255,Number.parseInt(K[3])))}I>=0&&(y=(1-I)*y+I*c,O=(1-I)*O+I*d,N=(1-I)*N+I*f,I=-1),$+1<l.length&&(I=Math.max(0,Math.min(100,Number.parseInt(l[++$])))/100)}return I>=0&&(y=I*y+(1-I)*c,O=I*O+(1-I)*d,N=I*N+(1-I)*f),z&&(y=255-y,O=255-O,N=255-N),"#"+("00"+Math.round(y).toString(16)).slice(-2)+("00"+Math.round(O).toString(16)).slice(-2)+("00"+Math.round(N).toString(16)).slice(-2)}function yu(n){var o,t;return n=n.trim(),null!=(t=null!=(o=pl[n.toLowerCase()])?o:pl[Ym[n]])?t:gl(n)}function wu(n,o,t){return t<0&&(t+=6),t>=6&&(t-=6),t<1?(o-n)*t+n:t<3?o:t<4?(o-n)*(4-t)+n:n}function Cu(n){return n<0?0:n>255?255:Math.round(n)}function Gm(n){let o=function NL(n){if(!n||"#"!==n[0])return;let o;return(n=n.slice(1)).length<=4?(o={r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16)},4===n.length&&(o.a=parseInt(n[3]+n[3],16)/255)):(o={r:parseInt(n[0]+n[1],16),g:parseInt(n[2]+n[3],16),b:parseInt(n[4]+n[5],16)},8===n.length&&(o.a=parseInt(n[6]+n[7],16)/255)),o&&void 0===o.a&&(o.a=1),o}(n);if(!o)return n;let{h:t,s:i,l:a}=function FL(n){let{r:o,g:t,b:i}=n;o/=255,t/=255,i/=255;let l,c,a=Math.min(o,t,i),s=Math.max(o,t,i),r=s-a;s===a?l=0:o===s?l=(t-i)/r:t===s?l=2+(i-o)/r:i===s&&(l=4+(o-t)/r),l=Math.min(60*l,360),l<0&&(l+=360);let d=(a+s)/2;return c=s===a?0:d<=.5?r/(s+a):r/(2-s-a),{h:l,s:c,l:d}}(o);return i+=.1,a-=.1,function qL(n){let{r:o,g:t,b:i}=n,a=((1<<24)+(Cu(o)<<16)+(Cu(t)<<8)+Cu(i)).toString(16).slice(1);return a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]&&a[6]===a[7]&&(a=a[0]+a[2]+a[4]),"#"+a}(function QL(n){let[o,t,i]=[n.h,n.s,n.l];o=(o+360)%360/60,i=Math.max(0,Math.min(i,1)),t=Math.max(0,Math.min(t,1));let a=i<=.5?i*(t+1):i+t-i*t,s=2*i-a;return{r:Math.round(255*wu(s,a,o+2)),g:Math.round(255*wu(s,a,o)),b:Math.round(255*wu(s,a,o-2))}}({h:t,s:i,l:a}))}var xo={},fl={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},bo={},ku={},zL={iff:"\\;\u27fa\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}","braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},expand:!1},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},expand:!1}},No={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201c":8220,"\u201d":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},JL=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/,HL=$m()?new RegExp("\\p{Letter}","u"):/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,xl=$m()?new RegExp("[0-9\\p{Letter}]","u"):/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/;function Tu(n,o,t="mord",i){void 0!==o&&(xo[n]={definitionType:"symbol",type:t,variant:i,codepoint:o},fl[o]||(fl[o]=n),No[n]||(No[n]=o))}function Hn(n,o,t){if("string"!=typeof n)for(let[i,a,s,r]of n)Tu(i,a,s??o,r??t);else for(let i=0;i<n.length;i++){let a=n.charAt(i);Tu(a,a.codePointAt(0))}}function Wm(n,o){for(let t=n;t<=o;t++)Tu(String.fromCodePoint(t),t)}function bl(n,o){if(void 0===o)return"";if("math"===n&&fl[o])return fl[o];if("text"===n){let t=Object.keys(No).find(i=>No[i]===o);if(!t){let i=o.toString(16);t="^".repeat(i.length)+i}return t}return String.fromCodePoint(o)}var wl,Au={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Vm=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function Xm(n){let o="auto",t=n.match(/:([^=]+)/);return t&&(o=t[1].trim()),o}function vl(n){if(!n)return[];let o=[],t=n.split("]");if(t[0].startsWith("[")){o.push({isOptional:!0,type:Xm(t[0].slice(1))});for(let i=1;i<=t.length;i++)o.push(...vl(t[i]))}else if(t=n.split("}"),t[0].startsWith("{")){o.push({isOptional:!1,type:Xm(t[0].slice(1))});for(let i=1;i<=t.length;i++)o.push(...vl(t[i]))}return o}function e_(n){if(!n)return"";let o="",t=!0;for(let i of n)"string"==typeof i.value?o+=i.value:t=!1;return t?o:""}function yl(n,o,t,i=!1){"string"==typeof n&&(n=[n]);let s={tabular:i,params:vl(o),createAtom:t};for(let r of n)ku[r]=s}function vo(n,o,t){yl(n,o,t,!0)}function Ee(n,o,t){var i,a;t||(t={});let s={definitionType:"function",params:vl(o),ifMode:t.ifMode,isFunction:null!=(i=t.isFunction)&&i,applyMode:t.applyMode,infix:null!=(a=t.infix)&&a,createAtom:t.createAtom,applyStyle:t.applyStyle};if("string"==typeof n)bo["\\"+n]=s;else for(let r of n)bo["\\"+r]=s}function Ou(n){return wl||(wl=Su(zL)),n?Su(Ze(Ze({},wl),n)):wl}function t_(n,o){var t,i,a,s;if("string"==typeof n){let r=0,l=n;return/(^|[^\\])#1/.test(l)&&(r=1),/(^|[^\\])#2/.test(l)&&(r=2),/(^|[^\\])#3/.test(l)&&(r=3),/(^|[^\\])#4/.test(l)&&(r=4),/(^|[^\\])#5/.test(l)&&(r=5),/(^|[^\\])#6/.test(l)&&(r=6),/(^|[^\\])#7/.test(l)&&(r=7),/(^|[^\\])#8/.test(l)&&(r=8),/(^|[^\\])#9/.test(l)&&(r=9),{expand:null==(t=o?.expand)||t,captureSelection:null==(i=o?.captureSelection)||i,args:r,def:l}}return Ze({expand:null==(a=o?.expand)||a,captureSelection:null==(s=o?.captureSelection)||s,args:0},n)}function Su(n){if(!n)return{};let o={};for(let t of Object.keys(n)){let i=n[t];if(null==i)delete o[t];else if("object"==typeof i&&"package"in i)for(let a of Object.keys(i.package))o[a]=t_(i.package[a],{expand:i.expand,captureSelection:i.captureSelection});else o[t]=t_(i)}return o}var ue=[0,.69444,0,0],Ke=[0,.61111,0,0],ct=[.25,.75,0,0],dt=[0,.44444,0,0],ht=[0,.68611,0,0],Ct=[.19444,.69444,0,0],It=[0,.68333,0,0],Pt=[0,.68889,0,0],Ht=[0,.69141,0,0],zt=[0,0,0,0],yn=[0,.64444,0,0],qn=[0,.69224,0,0],Fn=[.19444,.44444,0,0],Wn=[.65002,1.15,0,0],ii=[0,.55556,0,0],ui=[.35001,.85,0,0],di=[1.25003,1.75,0,0],mi=[.95003,1.45,0,0],wi=[0,.75,0,0],Ci=[0,.47534,0,0],Qi=[.25001,.75,0,0],qi=[.55001,1.05,0,0],Eu=[.16667,.68889,0,0],Fi=[.08167,.58167,0,0],VL={"AMS-Regular":{32:zt,65:Pt,66:Pt,67:Pt,68:Pt,69:Pt,70:Pt,71:Pt,72:Pt,73:Pt,74:Eu,75:Pt,76:Pt,77:Pt,78:Pt,79:Eu,80:Pt,81:Eu,82:Pt,83:Pt,84:Pt,85:Pt,86:Pt,87:Pt,88:Pt,89:Pt,90:Pt,107:Pt,160:zt,165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:Pt,295:Pt,710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:Fi,1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:Pt,8487:Pt,8498:Pt,8502:Pt,8503:Pt,8504:Pt,8513:Pt,8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:qn,8625:qn,8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:Pt,8709:Fi,8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:Fi,8733:qn,8736:qn,8737:qn,8738:[.03517,.52239,0,0],8739:Fi,8740:[.25142,.74111,0,0],8741:Fi,8742:[.25142,.74111,0,0],8756:qn,8757:qn,8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:Fi,8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:qn,8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:qn,8873:qn,8874:qn,8876:Pt,8877:Pt,8878:Pt,8879:Pt,8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:Fi,8905:Fi,8906:Fi,8907:qn,8908:qn,8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:qn,8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:qn,9488:qn,9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:qn,10016:qn,10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:Fi,57351:Fi,57352:Fi,57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{32:zt,65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889],160:zt},"Fraktur-Regular":{32:zt,33:Ht,34:Ht,38:Ht,39:Ht,40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:Ci,49:Ci,50:Ci,51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:Ht,55:[.18906,.47534,0,0],56:Ht,57:[.18906,.47534,0,0],58:Ci,59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:Ht,65:Ht,66:Ht,67:Ht,68:Ht,69:Ht,70:[.12604,.69141,0,0],71:Ht,72:[.06302,.69141,0,0],73:Ht,74:[.12604,.69141,0,0],75:Ht,76:Ht,77:Ht,78:Ht,79:Ht,80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:Ht,83:Ht,84:Ht,85:Ht,86:Ht,87:Ht,88:Ht,89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:Ht,97:Ci,98:Ht,99:Ci,100:[0,.62119,0,0],101:Ci,102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:Ht,106:Ht,107:Ht,108:Ht,109:Ci,110:Ci,111:Ci,112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:Ci,115:Ci,116:[0,.62119,0,0],117:Ci,118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],160:zt,8216:Ht,8217:Ht,58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:Ht,58118:[0,.62119,0,0],58119:Ci},"Main-Bold":{32:zt,33:ue,34:ue,35:Ct,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:ue,39:ue,40:ct,41:ct,42:wi,43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:dt,46:[0,.15556,0,0],47:ct,48:yn,49:yn,50:yn,51:yn,52:yn,53:yn,54:yn,55:yn,56:yn,57:yn,58:dt,59:Fn,60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:ue,64:ue,65:ht,66:ht,67:ht,68:ht,69:ht,70:ht,71:ht,72:ht,73:ht,74:ht,75:ht,76:ht,77:ht,78:ht,79:ht,80:ht,81:[.19444,.68611,0,0],82:ht,83:ht,84:ht,85:ht,86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:ht,89:[0,.68611,.02875,0],90:ht,91:ct,92:ct,93:ct,94:ue,95:[.31,.13444,.03194,0],97:dt,98:ue,99:dt,100:ue,101:dt,102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:ue,105:ue,106:Ct,107:ue,108:ue,109:dt,110:dt,111:dt,112:Fn,113:Fn,114:dt,115:dt,116:[0,.63492,0,0],117:dt,118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:dt,121:[.19444,.44444,.01597,0],122:dt,123:ct,124:ct,125:ct,126:[.35,.34444,0,0],160:zt,163:ue,168:ue,172:dt,176:ue,177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:ht,215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:ue,230:dt,247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:dt,338:ht,339:dt,567:Fn,710:ue,711:[0,.63194,0,0],713:[0,.59611,0,0],714:ue,715:ue,728:ue,729:ue,730:ue,732:ue,733:ue,915:ht,916:ht,920:ht,923:ht,926:ht,928:ht,931:ht,933:ht,934:ht,936:ht,937:ht,8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:ue,8217:ue,8220:ue,8221:ue,8224:Ct,8225:Ct,8242:ii,8407:[0,.72444,.15486,0],8463:ue,8465:ue,8467:ue,8472:Fn,8476:ue,8501:ue,8592:[-.10889,.39111,0,0],8593:Ct,8594:[-.10889,.39111,0,0],8595:Ct,8596:[-.10889,.39111,0,0],8597:ct,8598:Ct,8599:Ct,8600:Ct,8601:Ct,8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:Ct,8658:[-.10889,.39111,0,0],8659:Ct,8660:[-.10889,.39111,0,0],8661:ct,8704:ue,8706:[0,.69444,.06389,0],8707:ue,8709:[.05556,.75,0,0],8711:ht,8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:ct,8726:ct,8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:dt,8734:dt,8736:qn,8739:ct,8741:ct,8743:ii,8744:ii,8745:ii,8746:ii,8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:Ct,8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:ii,8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:ii,8852:ii,8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:ue,8867:ue,8868:ue,8869:ue,8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:ct,8969:ct,8970:ct,8971:ct,8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:Ct,9657:[-.02778,.47222,0,0],9661:Ct,9667:[-.02778,.47222,0,0],9711:Ct,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:wi,9838:Ct,9839:Ct,10216:ct,10217:ct,10815:ht,10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:Ct},"Main-BoldItalic":{32:zt,33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:ht,66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:ht,77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],160:zt,168:[0,.69444,.11473,0],176:ue,184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:ue,728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:ue,732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:ht,920:[0,.68611,.09062,0],923:ht,926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{32:zt,33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:It,66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:It,77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],160:zt,168:[0,.66786,.10474,0],176:ue,184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:ue,728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:ue,732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:It,920:[0,.68333,.09403,0],923:It,926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:Pt},"Main-Regular":{32:zt,33:ue,34:ue,35:Ct,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:ue,39:ue,40:ct,41:ct,42:wi,43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:ct,48:yn,49:yn,50:yn,51:yn,52:yn,53:yn,54:yn,55:yn,56:yn,57:yn,58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:ue,64:ue,65:It,66:It,67:It,68:It,69:It,70:It,71:It,72:It,73:It,74:It,75:It,76:It,77:It,78:It,79:It,80:It,81:[.19444,.68333,0,0],82:It,83:It,84:It,85:It,86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:It,89:[0,.68333,.025,0],90:It,91:ct,92:ct,93:ct,94:ue,95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:ue,99:[0,.43056,0,0],100:ue,101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:ue,105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:ue,108:ue,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:ct,124:ct,125:ct,126:[.35,.31786,0,0],160:zt,163:ue,167:Ct,168:[0,.66786,0,0],172:[0,.43056,0,0],176:ue,177:[.08333,.58333,0,0],182:Ct,184:[.17014,0,0,0],198:It,215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:ue,230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:It,339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:ue,711:[0,.62847,0,0],713:[0,.56778,0,0],714:ue,715:ue,728:ue,729:[0,.66786,0,0],730:ue,732:[0,.66786,0,0],733:ue,915:It,916:It,920:It,923:It,926:It,928:It,931:It,933:It,934:It,936:It,937:It,8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:ue,8217:ue,8220:ue,8221:ue,8224:Ct,8225:Ct,8230:[0,.12,0,0],8242:ii,8407:[0,.71444,.15382,0],8463:Pt,8465:ue,8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:ue,8501:ue,8592:[-.13313,.36687,0,0],8593:Ct,8594:[-.13313,.36687,0,0],8595:Ct,8596:[-.13313,.36687,0,0],8597:ct,8598:Ct,8599:Ct,8600:Ct,8601:Ct,8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:Ct,8658:[-.13313,.36687,0,0],8659:Ct,8660:[-.13313,.36687,0,0],8661:ct,8704:ue,8706:[0,.69444,.05556,.08334],8707:ue,8709:[.05556,.75,0,0],8711:It,8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:ct,8726:ct,8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:qn,8739:ct,8741:ct,8743:ii,8744:ii,8745:ii,8746:ii,8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:Ct,8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:ii,8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:ii,8852:ii,8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:ue,8867:ue,8868:ue,8869:ue,8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:ct,8969:ct,8970:ct,8971:ct,8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:Ct,9657:[-.03472,.46528,0,0],9661:Ct,9667:[-.03472,.46528,0,0],9711:Ct,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:wi,9838:Ct,9839:Ct,10216:ct,10217:ct,10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:It,10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:Ct},"Math-BoldItalic":{32:zt,48:dt,49:dt,50:dt,51:Fn,52:Fn,53:Fn,54:yn,55:Fn,56:yn,57:Fn,65:ht,66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:ht,72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:ht,77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:dt,98:ue,99:dt,100:ue,101:dt,102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:ue,105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:dt,110:dt,111:dt,112:Fn,113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:dt,116:[0,.63492,0,0],117:dt,118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:dt,121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],160:zt,915:[0,.68611,.15972,0],916:ht,920:[0,.68611,.03194,0],923:ht,926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:ht,936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:dt,946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:dt,950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:dt,954:dt,955:ue,956:Fn,957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:dt,960:[0,.44444,.03704,0],961:Fn,962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:Fn,967:Fn,968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:ue,981:Ct,982:[0,.44444,.03194,0],1009:Fn,1013:dt,57649:dt,57911:Fn},"Math-Italic":{32:zt,48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:yn,55:[.19444,.43056,0,0],56:yn,57:[.19444,.43056,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:ue,99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:ue,105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],160:zt,915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:ue,956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556],57649:[0,.43056,0,.02778],57911:[.19444,.43056,0,.08334]},"SansSerif-Bold":{32:zt,33:ue,34:ue,35:Ct,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:ue,39:ue,40:ct,41:ct,42:wi,43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:ct,48:ue,49:ue,50:ue,51:ue,52:ue,53:ue,54:ue,55:ue,56:ue,57:ue,58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:ue,64:ue,65:ue,66:ue,67:ue,68:ue,69:ue,70:ue,71:ue,72:ue,73:ue,74:ue,75:ue,76:ue,77:ue,78:ue,79:ue,80:ue,81:[.10556,.69444,0,0],82:ue,83:ue,84:ue,85:ue,86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:ue,89:[0,.69444,.0275,0],90:ue,91:ct,93:ct,94:ue,95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:ue,99:[0,.45833,0,0],100:ue,101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:ue,105:ue,106:Ct,107:ue,108:ue,109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],160:zt,168:ue,176:ue,180:ue,184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:ue,711:[0,.63542,0,0],713:[0,.63778,0,0],728:ue,729:ue,730:ue,732:ue,733:ue,915:ue,916:ue,920:ue,923:ue,926:ue,928:ue,931:ue,933:ue,934:ue,936:ue,937:ue,8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:ue,8217:ue,8220:ue,8221:ue},"SansSerif-Italic":{32:zt,33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:ue,66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:ue,77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],160:zt,168:[0,.67937,.06385,0],176:ue,184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:ue,728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:ue,732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:ue,920:[0,.69444,.07555,0],923:ue,926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{32:zt,33:ue,34:ue,35:Ct,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:ue,39:ue,40:ct,41:ct,42:wi,43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:dt,46:[0,.08333,0,0],47:ct,48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:dt,59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:ue,64:ue,65:ue,66:ue,67:ue,68:ue,69:ue,70:ue,71:ue,72:ue,73:ue,74:ue,75:ue,76:ue,77:ue,78:ue,79:ue,80:ue,81:[.125,.69444,0,0],82:ue,83:ue,84:ue,85:ue,86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:ue,89:[0,.69444,.025,0],90:ue,91:ct,93:ct,94:ue,95:[.35,.09444,.02778,0],97:dt,98:ue,99:dt,100:ue,101:dt,102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:ue,105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:ue,108:ue,109:dt,110:dt,111:dt,112:Fn,113:Fn,114:[0,.44444,.01389,0],115:dt,116:[0,.57143,0,0],117:dt,118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:dt,121:[.19444,.44444,.01389,0],122:dt,126:[.35,.32659,0,0],160:zt,168:[0,.67937,0,0],176:ue,184:[.17014,0,0,0],305:dt,567:Fn,710:ue,711:[0,.63194,0,0],713:[0,.60889,0,0],714:ue,715:ue,728:ue,729:[0,.67937,0,0],730:ue,732:[0,.67659,0,0],733:ue,915:ue,916:ue,920:ue,923:ue,926:ue,928:ue,931:ue,933:ue,934:ue,936:ue,937:ue,8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:ue,8217:ue,8220:ue,8221:ue},"Script-Regular":{32:zt,65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0],160:zt},"Size1-Regular":{32:zt,40:ui,41:ui,47:ui,91:ui,92:ui,93:ui,123:ui,125:ui,160:zt,710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:Qi,8720:Qi,8721:Qi,8730:ui,8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:Qi,8897:Qi,8898:Qi,8899:Qi,8968:ui,8969:ui,8970:ui,8971:ui,9168:[-99e-5,.601,0,0],10216:ui,10217:ui,10752:Qi,10753:Qi,10754:Qi,10756:Qi,10758:Qi},"Size2-Regular":{32:zt,40:Wn,41:Wn,47:Wn,91:Wn,92:Wn,93:Wn,123:Wn,125:Wn,160:zt,710:wi,732:wi,770:wi,771:wi,8719:qi,8720:qi,8721:qi,8730:Wn,8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:qi,8897:qi,8898:qi,8899:qi,8968:Wn,8969:Wn,8970:Wn,8971:Wn,10216:Wn,10217:Wn,10752:qi,10753:qi,10754:qi,10756:qi,10758:qi},"Size3-Regular":{32:zt,40:mi,41:mi,47:mi,91:mi,92:mi,93:mi,123:mi,125:mi,160:zt,710:wi,732:wi,770:wi,771:wi,8730:mi,8968:mi,8969:mi,8970:mi,8971:mi,10216:mi,10217:mi},"Size4-Regular":{32:zt,40:di,41:di,47:di,91:di,92:di,93:di,123:di,125:di,160:zt,710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:di,8968:di,8969:di,8970:di,8971:di,9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:Wn,9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:Wn,9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:di,10217:di,57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:zt,33:Ke,34:Ke,35:Ke,36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:Ke,39:Ke,40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:Ke,49:Ke,50:Ke,51:Ke,52:Ke,53:Ke,54:Ke,55:Ke,56:Ke,57:Ke,58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:Ke,64:Ke,65:Ke,66:Ke,67:Ke,68:Ke,69:Ke,70:Ke,71:Ke,72:Ke,73:Ke,74:Ke,75:Ke,76:Ke,77:Ke,78:Ke,79:Ke,80:Ke,81:[.13889,.61111,0,0],82:Ke,83:Ke,84:Ke,85:Ke,86:Ke,87:Ke,88:Ke,89:Ke,90:Ke,91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:Ke,95:[.09514,0,0,0],96:Ke,97:[0,.43056,0,0],98:Ke,99:[0,.43056,0,0],100:Ke,101:[0,.43056,0,0],102:Ke,103:[.22222,.43056,0,0],104:Ke,105:Ke,106:[.22222,.61111,0,0],107:Ke,108:Ke,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:Ke,127:Ke,160:zt,176:Ke,184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:Ke,715:Ke,728:Ke,730:Ke,770:Ke,771:Ke,776:Ke,915:Ke,916:Ke,920:Ke,923:Ke,926:Ke,928:Ke,931:Ke,933:Ke,934:Ke,936:Ke,937:Ke,8216:Ke,8217:Ke,8242:Ke,9251:[.11111,.21944,0,0]}},XL=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,to=.25,Sa=.431,n_={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[Sa,Sa,Sa],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[to,to,to],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},Mu=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ea=5,i_={"\xa0":" ","\u200b":" ",\u00c5:"A",\u00c7:"C",\u00d0:"D",\u00de:"o",\u00e5:"a",\u00e7:"c",\u00f0:"d",\u00fe:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041a:"K",\u041b:"N",\u041c:"M",\u041d:"H",\u041e:"O",\u041f:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042a:"B",\u042b:"X",\u042c:"B",\u042d:"3",\u042e:"X",\u042f:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043a:"n",\u043b:"n",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044a:"a",\u044b:"m",\u044c:"a",\u044d:"e",\u044e:"m",\u044f:"r"};function Ma(n,o){void 0===n&&(n=77);let t=VL[o][n];if(t)return{defaultMetrics:!1,depth:t[0],height:t[1],italic:t[2],skew:t[3]};if(11034===n)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0};let i=String.fromCodePoint(n);if(i in i_)n=i_[i].codePointAt(0);else if(XL.test(i))return n=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}var na=class{constructor(n,o,t){this.id=n,this.sizeDelta=o,this.cramped=t;let i={"-4":2,"-3":1,0:0}[o];this.metrics=Object.keys(n_).reduce((a,s)=>kt(Ze({},a),{[s]:n_[s][i]}),{})}getFontSize(n){return Math.max(1,n+this.sizeDelta)}get sup(){return Vn[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return Vn[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return Vn[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return Vn[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return Vn[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},Vn={7:new na(7,0,!1),6:new na(6,0,!0),5:new na(5,0,!1),4:new na(4,0,!0),3:new na(3,-3,!1),2:new na(2,-3,!0),1:new na(1,-4,!1),0:new na(0,-4,!0)};function yo(n,o){return null===n?0:function t9(n,o){var t;if(!n)return 0;let i={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(t=n.unit)?t:"pt"];if(Number.isFinite(o)){let a=10**o;return Math.round(n.dimension/10*i*a)/a}return n.dimension*i}(n,o)/10}function Zu(n){var o;return`${n.dimension}${null!=(o=n.unit)?o:"pt"}`}Vn.displaystyle=Vn[7],Vn.textstyle=Vn[5],Vn.scriptstyle=Vn[3],Vn.scriptscriptstyle=Vn[1];var Tt=class{constructor(n,o,t){var i,a,s,r,l,c;n instanceof Tt&&(this.parent=n),n instanceof Tt||(this.registers=null!=(i=n.registers)?i:{}),this.isPhantom=null!=(r=null!=(s=o?.isPhantom)?s:null==(a=this.parent)?void 0:a.isPhantom)&&r;let f,d=Ze({},n);if(o&&(o.letterShapeStyle&&"auto"!==o.letterShapeStyle&&(d.letterShapeStyle=o.letterShapeStyle),o.color&&"none"!==o.color&&(d.color=o.color),o.backgroundColor&&"none"!==o.backgroundColor&&(d.backgroundColor=o.backgroundColor),o.fontSize&&"auto"!==o.fontSize&&o.fontSize!==(null==(l=this.parent)?void 0:l._size)&&(this._size=o.fontSize)),this.letterShapeStyle=null!=(c=d.letterShapeStyle)?c:"tex",this.color=d.color,this.backgroundColor=d.backgroundColor,"string"==typeof t){if(n instanceof Tt)switch(t){case"cramp":f=n.mathstyle.cramp;break;case"superscript":f=n.mathstyle.sup;break;case"subscript":f=n.mathstyle.sub;break;case"numerator":f=n.mathstyle.fracNum;break;case"denominator":f=n.mathstyle.fracDen}switch(t){case"textstyle":f=Vn.textstyle;break;case"displaystyle":f=Vn.displaystyle;break;case"scriptstyle":f=Vn.scriptstyle;break;case"scriptscriptstyle":f=Vn.scriptscriptstyle}}this._mathstyle=f,this.atomIdsSettings=n.atomIdsSettings,this.renderPlaceholder=d.renderPlaceholder}get mathstyle(){let n=this._mathstyle,o=this.parent;for(;!n;)n=o._mathstyle,o=o.parent;return n}getRegister(n){var o;return null!=(o=this.registers)&&o[n]?this.registers[n]:this.parent?this.parent.getRegister(n):void 0}getRegisterAsGlue(n){var o;if(null!=(o=this.registers)&&o[n]){let t=this.registers[n];return"object"==typeof t&&"glue"in t?t:"object"==typeof t&&"dimension"in t?{glue:{dimension:t.dimension}}:"number"==typeof t?{glue:{dimension:t}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(n)}getRegisterAsEm(n){return yo(this.getRegisterAsDimension(n))}getRegisterAsDimension(n){var o;if(null!=(o=this.registers)&&o[n]){let t=this.registers[n];return"object"==typeof t&&"glue"in t?t.glue:"object"==typeof t&&"dimension"in t?t:"number"==typeof t?{dimension:t}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(n)}setRegister(n,o){void 0!==o?this.registers[n]=o:delete this.registers[n]}setGlobalRegister(n,o){let t=this;for(;t.parent;)t.setRegister(n,void 0),t=t.parent;t.setRegister(n,o)}get size(){let n=this._size,o=this.parent;for(;!n;)n=o._size,o=o.parent;return n}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);let n=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,n}scale(n){return n*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get effectiveFontSize(){return Mu[Math.max(1,this.size+this.mathstyle.sizeDelta)]}get computedColor(){let n=this.color,o=this.parent;return!n&&o&&(n=o.color,o=o.parent),n??""}get computedBackgroundColor(){let n=this.backgroundColor,o=this.parent;return!n&&o&&(n=o.backgroundColor,o=o.parent),n??""}get metrics(){return this.mathstyle.metrics}},Pu={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ju={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},o_={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:"m 529 160\n  c -179 0 -524 -115 -524 -115\n  c -5 -1 -9 -5 -9 -10\n  c 0 -1 1 -2 1 -3\n  l 4 -22\n  c 1 -5 5 -9 11 -9\n  h 2\n  s 338 93 512 92\n  c 174 0 513 -92 513 -92\n  h 2\n  c 5 0 9 4 11 9\n  l 5 22\n  c 1 6 -2 12 -8 13\n  c 0 0 -342 115 -520 115\n  z\n  ",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},zs=class{constructor(n){zs._registry[n]=this}static createAtom(n,o,t,i){return zs._registry[n].createAtom(o,t,i)}static serialize(n,o){return zs._registry[n[0].mode].serialize(n,o)}static applyStyle(n,o,t){return zs._registry[n].applyStyle(o,t)}},ia=zs;function Ri(n,o){let a,t=[],i=[];for(let s of n)if("first"!==s.type&&s.style){let r;"variant"===o?(r=s.style.variant,s.style.variantStyle&&"up"!==s.style.variantStyle&&(r+="-"+s.style.variantStyle)):"cssClass"===o?"group"===s.type&&(r=s.customClass):r=s.style[o],r===a?i.push(s):(i.length>0&&t.push(i),i=[s],a=r)}return i.length>0&&t.push(i),t}ia._registry={};var s9=["","chem","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","latex","composition","error","placeholder","supsub","none","mathfield"],l9={mord:{mop:3,mbin:4,mrel:5,minner:3},mop:{mord:3,mop:3,rel:5,minner:3},mbin:{mord:4,mop:4,mopen:4,minner:4},mrel:{mord:5,mop:5,mopen:5,minner:5},mclose:{mop:3,mbin:4,mrel:5,minner:3},mpunct:{mord:3,mop:3,mrel:3,mopen:3,mpunct:3,minner:3},minner:{mord:3,mop:3,mbin:4,mrel:5,mopen:3,mpunct:3,minner:3}},c9={mord:{mop:3},mop:{mord:3,mop:3},mclose:{mop:3},minner:{mop:3}};function Js(n,o){if("string"==typeof n)return n;if("number"==typeof n){Number.isFinite(n);let t=Math.ceil(100*n)/100;return 0===t?"0":t.toString()+(o??"")}return""}var Re=class{constructor(n,o){var t,i,a,s,r,l;if("number"==typeof n?this.value=String.fromCodePoint(n):"string"==typeof n?this.value=n:Bn(n)?this.children=n.filter(d=>null!==d):n&&n instanceof Re&&(this.children=[n]),this.type=null!=(t=o?.type)?t:"",this.isSelected=!1,this.isTight=null!=(i=o?.isTight)&&i,this.newList=null!=(a=o?.newList)&&a,null!=o&&o.properties)for(let d of Object.keys(o.properties))this.setStyle(d,o.properties[d]);null!=o&&o.attributes&&(this.attributes=o.attributes),this.classes=null!=(s=o?.classes)?s:"";let c=o?.fontFamily||"Main-Regular";if(null!=o&&o.style&&this.value&&(c=ia.applyStyle(null!=(r=o.mode)?r:"math",this,o.style)||"Main-Regular"),this.height=0,this.depth=0,this.skew=0,this.italic=0,this.maxFontSize=0,"latex"===this.type)this.height=.8,this.depth=.2;else if("number"==typeof n){let d=Ma(n,c);this.height=d.height,this.depth=d.depth,this.skew=d.skew,this.italic=d.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this.skew=-1/0,this.italic=-1/0;for(let d=0;d<this.value.length;d++){let f=Ma(this.value.codePointAt(d),c||"Main-Regular");this.height=Math.max(this.height,f.height),this.depth=Math.max(this.depth,f.depth),this.skew=f.skew,this.italic=f.italic}}else if(this.children&&this.children.length>0)if(1===this.children.length){let d=this.children[0];this.height=d.height,this.depth=d.depth,this.maxFontSize=d.maxFontSize,this.skew=d.skew,this.italic=d.italic}else{let d=-1/0,f=-1/0,y=0;for(let O of this.children)O.height>d&&(d=O.height),O.depth>f&&(f=O.depth),y=Math.max(y,null!=(l=O.maxFontSize)?l:0);this.height=d,this.depth=f,this.maxFontSize=y}void 0!==o?.height&&(this.height=o.height),void 0!==o?.depth&&(this.depth=o.depth),void 0!==o?.maxFontSize&&(this.maxFontSize=o.maxFontSize)}set atomID(n){void 0===n||0===n.length||(this.attributes||(this.attributes={}),this.attributes["data-atom-id"]=n)}selected(n){if(this.isSelected!==n&&(this.isSelected=n,this.children))for(let o of this.children)o.selected(n)}setStyle(n,o,t){if(void 0===o)return;let i=Js(o,t);i.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[n]=i)}setTop(n){Number.isFinite(n)&&Math.abs(n)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=Js(n,"em"),this.height-=n,this.depth+=n)}get left(){var n;return null!=(n=this.cssProperties)&&n["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=Js(n,"em")))}set right(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=Js(n,"em")))}set width(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties.width:(this.cssProperties||(this.cssProperties={}),this.cssProperties.width=Js(n,"em")))}wrap(n,o){let t=n.parent;if(!t)return this;n.isPhantom&&this.setStyle("opacity",0);let i=n.computedColor;i===t.computedColor&&(i=""),this.setStyle("color",i);let r,a=n.effectiveFontSize===t.effectiveFontSize?void 0:n.effectiveFontSize,s=n.computedBackgroundColor;if(this.isSelected&&(s=Gm(s)),s===t.computedBackgroundColor&&(s=""),!(a||s||o&&(o.classes||o.type)))return this;s?(r=oa(this,o),r.selected(this.isSelected),r.setStyle("background-color",s),r.setStyle("display","inline-block")):r=new Re(this,o);let l=n.scalingFactor;return 1!==l&&(r.setStyle("font-size",100*l,"%"),r.height*=l,r.depth*=l,r.italic*=l,r.skew*=l),r}wrapSelect(n){if(!this.isSelected)return this;if(!n.parent)return this;let o=Gm(n.computedBackgroundColor),t=oa(this);return t.selected(!0),t.setStyle("background-color",o),t.setStyle("display","inline-block"),t}toMarkup(){var n,o,t;let i=null!=(n=this.value)?n:"";if(this.children)for(let l of this.children)i+=l.toMarkup();let a=this.classes.split(" ");a.push(null!=(o={latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])?o:""),"latex"===this.caret&&a.push("ML__latex-caret");let s=1===a.length?a[0]:a.filter((l,c,d)=>l.length>0&&d.indexOf(l)===c).join(" "),r="";if(i.length>0&&"\u200b"!==i||s.length>0||this.cssId||this.htmlData||this.htmlStyle||this.attributes||this.cssProperties||this.svgBody||this.svgOverlay){let l="";if(this.cssId&&(l+=` id="${this.cssId.replace(/ /g,"-")}" `),this.htmlData){let d=this.htmlData.split(",");for(let f of d){let y=f.match(/([^=]+)=(.+$)/);if(y){let O=y[1].trim().replace(/ /g,"-");O&&(l+=` data-${O}="${y[2]}" `)}else{let O=f.trim().replace(/ /g,"-");O&&(l+=` data-${O} `)}}}if(this.htmlStyle){let d=this.htmlStyle.split(";"),f="";for(let y of d){let O=y.match(/([^=]+):(.+$)/);if(O){let N=O[1].trim().replace(/ /g,"-");N&&(f+=`${N}:${O[2]};`)}}f&&(l+=` style="${f}"`)}if(this.attributes&&(l+=" "+Object.keys(this.attributes).map(d=>`${d}="${this.attributes[d]}"`).join(" ")),s.length>0&&(l+=` class="${s}"`),this.cssProperties){let d=Object.keys(this.cssProperties).map(f=>`${f}:${this.cssProperties[f]}`).join(";");d.length>0&&(l+=` style="${d}"`)}let c="";this.svgBody?c=function i9(n){if(ju[n]){let[d,f,y]=ju[n];return`<span style="display:inline-block;height:${y/2}em;min-width:0"><span class="stretchy" style="height:${y}em"><svg width="100%" height="${y}em" viewBox="0 0 ${d} ${f}" preserveAspectRatio="none" ><path fill="currentcolor" d="${o_[n]}"></path></svg></span></span>`}let s,r,[o,t,i,a]=Pu[n],l=i/1e3;3===o.length?(s=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],r=["xMinYMin","xMidYMin","xMaxYMin"]):2===o.length?(s=["slice-1-of-2","slice-2-of-2"],r=["xMinYMin","xMaxYMin"]):(s=["slice-1-of-1"],r=[a]);let c=o.map((d,f)=>`<span class="${s[f]}" style=height:${l}em><svg width=400em height=${l}em viewBox="0 0 400000 ${i}" preserveAspectRatio="${r[f]} slice"><path fill="currentcolor" d="${o_[d]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${l}em;min-width:${t}em;">${c}</span>`}(this.svgBody):this.svgOverlay&&(c='<span style="',c+="display: inline-block;",c+=`height:${this.height+this.depth}em;`,c+=`vertical-align:${this.depth}em;`,c+='">',c+=i,c+="</span>",c+='<svg style="position:absolute;overflow:overlay;',c+=`height:${this.height+this.depth}em;`,null!=(t=this.cssProperties)&&t.padding?(c+=`top:${this.cssProperties.padding}em;`,c+=`left:${this.cssProperties.padding}em;`,c+=`width:calc(100% - 2 * ${this.cssProperties.padding}em );`):c+="top:0;left:0;width:100%;",c+="z-index:2;",c+='"',this.svgStyle&&(c+=` style="${this.svgStyle}"`),c+=`>${this.svgOverlay}</svg>`),r=`<span${l}>${i}${c}</span>`}return"text"===this.caret?r+='<span class="ML__text-caret"></span>':"math"===this.caret&&(r+='<span class="ML__caret"></span>'),r}tryCoalesceWith(n){if(this.type!==n.type||!/ML__text/.test(this.classes)&&!["mord","mbin","mrel"].includes(this.type)||this.svgBody||!this.value||n.svgBody||!n.value)return!1;if(this.children&&this.children.length>0||n.children&&n.children.length>0)return!1;let i=this.cssProperties?Object.keys(this.cssProperties).length:0;if(i!==(n.cssProperties?Object.keys(n.cssProperties).length:0))return!1;if(i>0)for(let l of Object.keys(this.cssProperties))if(this.cssProperties[l]!==n.cssProperties[l])return!1;let s=this.classes.trim().replace(/\s+/g," ").split(" "),r=n.classes.trim().replace(/\s+/g," ").split(" ");if(s.length!==r.length)return!1;s.sort(),r.sort();for(let[l,c]of s.entries())if("vertical-separator"===c||c!==r[l])return!1;return this.value+=n.value,this.height=Math.max(this.height,n.height),this.depth=Math.max(this.depth,n.depth),this.maxFontSize=Math.max(this.maxFontSize,n.maxFontSize),this.italic=n.italic,!0}};function Du(n){if(!n||0===n.length)return[];n[0].children=Du(n[0].children);let o=[n[0]];for(let t=1;t<n.length;t++)o[o.length-1].tryCoalesceWith(n[t])||(n[t].children=Du(n[t].children),o.push(n[t]));return o}function kl(n){return n.children&&(n.children=Du(n.children)),n}function a_(n,o,t){o.newList&&(n=null);let i=o.type;if("first"===i)return null;if("spacing"===i)return n;if(t(n,o),o.children){let a=null;(void 0===i||0===i.length)&&(a=n);for(let s of o.children)a=a_(a,s,t);(void 0===i||0===i.length)&&(n=a)}return"supsub"!==i&&void 0!==i&&i.length>0&&(n=o),n}function s_(n,o){n&&a_(null,n,o)}function us(n,o=1){return function u9(n){s_(n,(o,t)=>{"mbin"===t.type&&(!o||/first|none|mbin|mop|mrel|mopen|mpunct/.test(o.type))&&(t.type="mord"),o&&"mbin"===o.type&&/mrel|mclose|mpunct|placeholder/.test(t.type)&&(o.type="mord")})}(n),function d9(n,o){s_(n,(t,i)=>{var a,s,r,l;let c=null!=(a=t?.type)?a:"none",d=i.isTight?null!=(s=c9[c])?s:null:null!=(r=l9[c])?r:null,f=d&&null!=(l=d[i.type])?l:0;f&&(i.left+=o*(f/18))})}(n,o),n}function oa(n,o){if(!n)return new Re(null,o);let t=new Re(null,{classes:"ML__strut"});t.setStyle("height",Math.max(0,n.height),"em");let i=[t];if(0!==n.depth){let a=new Re(null,{classes:"ML__strut--bottom"});a.setStyle("height",n.height+n.depth,"em"),a.setStyle("vertical-align",-n.depth,"em"),i.push(a)}return i.push(n),new Re(i,o)}function Tl(n){let o=function o9(n){return Pu[n]?Pu[n][2]/1e3:ju[n][2]}(n)/2,t=new Re(null,{height:o+.166,depth:o-.166,maxFontSize:0});return t.svgBody=n,t}var Ol,Pn=class extends Re{constructor(n,o){var t;let[i,a,s]=function p9(n){var o;let[t,i]=function _9(n){if("individualShift"in n){let o=n.individualShift,t=o[0],i=[t],a=-t.shift-t.box.depth,s=a;for(let r=1;r<o.length;r++){let l=o[r],c=-l.shift-s-l.box.depth;s+=c,i.push(c-(t.box.height+t.box.depth)),i.push(l),t=l}return[i,a]}if("top"in n){let o=n.top;for(let t of n.children)o-="number"==typeof t?t:t.box.height+t.box.depth;return[n.children,o]}if("bottom"in n)return[n.children,-n.bottom];if("firstBaseline"in n){let o=n.firstBaseline[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.firstBaseline,-o.box.depth]}if("shift"in n){let o=n.children[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.children,-o.box.depth-n.shift]}return[null,0]}(n);if(!t)return[[],0,0];let a=0;for(let N of t)if("number"!=typeof N){let I=N.box;a=Math.max(a,I.maxFontSize,I.height)}a+=2;let s=new Re(null,{classes:"pstrut"});s.setStyle("height",a,"em");let r=[],l=i,c=i,d=i;for(let N of t){if("number"==typeof N)d+=N;else{let I=N.box,z=null!=(o=N.classes)?o:[],$=new Re([s,I],{classes:z.join(" "),style:N.style});$.setStyle("top",-a-d-I.depth,"em"),N.marginLeft&&$.setStyle("margin-left",N.marginLeft,"em"),N.marginRight&&$.setStyle("margin-right",N.marginRight,"em"),r.push($),d+=I.height+I.depth}l=Math.min(l,d),c=Math.max(c,d)}let f=new Re(r,{classes:"vlist"});if(f.setStyle("height",c,"em"),l>=0)return[[new Re(f,{classes:"vlist-r"})],c,-l];let y=new Re(new Re(null),{classes:"vlist"});y.setStyle("height",-l,"em");let O=new Re(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new Re([f,O],{classes:"vlist-r"}),new Re(y,{classes:"vlist-r"})],c,-l]}(n);super(1===i.length?i[0]:i,{classes:(null!=(t=o?.classes)?t:"")+" vlist-t"+(2===i.length?" vlist-t2":""),height:a,depth:s,type:o?.type})}},Al=8205,f9=[[Al,1],[65038,2],[127995,5],[129456,4],[917536,96]],r_=[127462,127487];function l_(n){var o;if(void 0===Ol){Ol={};for(let t of f9)for(let i=t[0];i<=t[0]+t[1]-1;i++)Ol[i]=!0}return null!=(o=Ol[n])&&o}function x9(n){return n>=r_[0]&&n<=r_[1]}function c_(n){if(/^[\u0020-\u00FF]*$/.test(n))return n;let o=[],t=function g9(n){let o=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(13===i&&10===n.charCodeAt(t+1)&&(i=10,t++),(13===i||12===i)&&(i=10),0===i&&(i=65533),i>=55296&&i<=56319){let a=n.charCodeAt(t+1);a>=56320&&a<=57343&&(i=65536+1024*(i-55296)+(a-56320),t++)}o.push(i)}return o}(n),i=0;for(;i<t.length;){let a=t[i++],s=t[i];if(s===Al){let r=i-1;for(i+=2;t[i]===Al;)i+=2;o.push(String.fromCodePoint(...t.slice(r,i-r+1)))}else if(l_(s)){let r=i-1;for(;l_(t[i]);)i+=t[i]===Al?2:1;o.push(String.fromCodePoint(...t.slice(r,2*i-r-1)))}else x9(a)?(i+=1,o.push(String.fromCodePoint(...t.slice(i-2,2)))):o.push(String.fromCodePoint(a))}return o}var b9=class{constructor(n){this.s=c_(n),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(n){let o=n.exec("string"==typeof this.s?this.s.slice(this.pos):this.s.slice(this.pos).join(""));return null!=o&&o[0]?(this.pos+=o[0].length,o[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let n=this.get();if("\\"===n){if(!this.end()){let o=this.match(/^[a-zA-Z\*]+/);if(o)this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);else if(o=this.get()," "===o)return"<space>";return"\\"+o}}else{if("{"===n)return"<{>";if("}"===n)return"<}>";if("^"===n){if("^"===this.peek()){this.get();let o=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(o)return String.fromCodePoint(Number.parseInt(o.slice(o.lastIndexOf("^")+1),16))}return n}if("#"===n){if(!this.end()){let o=!1;return/[\d?@]/.test(this.peek())&&(o=!0,this.pos+1<this.s.length)&&(o=/[^\dA-Za-z]/.test(this.s[this.pos+1])),o?"#"+this.get():"#"}}else if("$"===n)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return n}};function v9(n,o){var t,i,a,s;let r=[],l=n.next();if(l&&"\\relax"!==l)if("\\noexpand"===l)l=n.next(),l&&r.push(l);else if("\\obeyspaces"===l)n.obeyspaces=!0;else if("\\space"===l||"~"===l)r.push("<space>");else if("\\bgroup"===l)r.push("<{>");else if("\\egroup"===l)r.push("<}>");else if("\\string"===l){if(l=n.next(),l)if(l.startsWith("\\"))for(let c of l)r.push("\\"===c?"\\backslash":c);else"<{>"===l?r.push("\\{"):"<space>"===l?r.push("~"):"<}>"===l&&r.push("\\}")}else if("\\csname"===l){for(;"<space>"===n.peek();)n.next();let c="",d=!1,f=[];do{if(0===f.length)if(/^#[\d?@]$/.test(n.peek())){let y=n.get().slice(1);f=ds(null!=(i=null!=(t=o?.(y))?t:o?.("?"))?i:"\\placeholder{}",o),l=f[0]}else l=n.next(),f=l?[l]:[];d=0===f.length,!d&&"\\endcsname"===l&&(d=!0,f.shift()),d||(d="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||"string"==typeof l&&l.length>1&&l.startsWith("\\")),d||(c+=f.shift())}while(!d);c&&r.push("\\"+c),r.push(...f)}else if("\\endcsname"!==l)if(l.length>1&&l.startsWith("#")){let c=l.slice(1);r.push(...ds(null!=(s=null!=(a=o?.(c))?a:o?.("?"))?s:"\\placeholder{}",o))}else r.push(l);return r}function ds(n,o=null){let t=[],i="";for(let r of n.toString().split(/\r?\n/)){i&&t.push(i),i=" ";let l=r.match(/((?:\\%)|[^%])*/);null!==l&&t.push(l[0])}let a=new b9(t.join("")),s=[];do{s.push(...v9(a,o))}while(!a.end());return s}function wn(n){let o="",t=[];for(let i of n)i&&(/[a-zA-Z\*]/.test(i[0])&&t.push(o),t.push(i),/\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(i)&&t.push(" "),o=/\\[a-zA-Z]+\*?$/.test(i)?" ":"");return t.join("")}function Hs(n){return wn(n.map(o=>{var t;return null!=(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[o])?t:o}))}var w9=class extends Re{constructor(n,o,t){super(null,t),this.mathfield=o,this.htmlData=`placeholder-id="${n}" `;let i=function y9(n){return oa(us(n.model.root.render(new Tt({registers:n.registers},{fontSize:Ea,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(o._mathfield);this.height=i.height,this.depth=i.depth}toMarkup(){let n=[],o=this.classes.split(" "),t=1===o.length?o[0]:o.filter((a,s,r)=>a.length>0&&r.indexOf(a)===s).join(" ");if(this.cssId&&n.push(`id="${this.cssId.replace(/ /g,"-")}"`),this.htmlData){let a=this.htmlData.split(",");for(let s of a){let r=s.match(/([^=]+)=(.+$)/);if(r){let l=r[1].trim().replace(/ /g,"-");l&&n.push(`data-${l}=${r[2]}`)}else{let l=s.trim().replace(/ /g,"-");l&&n.push(`data-${l}`)}}}if(this.htmlStyle){let a=this.htmlStyle.split(";"),s="";for(let r of a){let l=r.match(/([^=]+):(.+$)/);if(l){let c=l[1].trim().replace(/ /g,"-");c&&(s+=`${c}:${l[2]};`)}}s&&n.push(`style="${s}"`)}this.attributes&&n.push(...Object.keys(this.attributes).map(a=>`${a}="${this.attributes[a]}"`)),t.length>0&&n.push(`class="${t}"`);let i=this.mathfield;return n.push(`style="display:inline-block; width:${i.clientWidth}px; height:${i.clientHeight}px;" `),`<span ${n.join(" ")}></span>`}},Ia=["above","body","below","superscript","subscript"];function La(n){return"string"==typeof n&&Ia.includes(n)}function Sl(n){return void 0!==n&&Array.isArray(n)&&2===n.length}var no=class{constructor(n,o,t){var i,a,s,r,l,c;this.id=void 0,this.verbatimLatex=void 0,this._isDirty=!1,this._changeCounter=0,this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.skipBoundary=!1,this.captureSelection=!1,this.type=n,this.context=o,"string"==typeof t?.value&&(this.value=t.value),this.command=null!=(a=null!=(i=t?.command)?i:this.value)?a:"",this.mode=null!=(s=t?.mode)?s:"math",this.isFunction=null!=(r=t?.isFunction)&&r,this.subsupPlacement=t?.limits,this.style=null!=(l=t?.style)?l:{},this.displayContainsHighlight=null!=(c=t?.displayContainsHighlight)&&c,null!=t&&t.serialize&&(no.customSerializer[t.command]=t.serialize)}static createBox(n,o,t){var i,a,s;if(!o)return null;let r=function C9(n){let o,t=[],i=[];for(let a of n)if(o||a.style){let s=a.computedStyle;o&&s.color===o.color&&s.backgroundColor===o.backgroundColor&&s.fontSize===o.fontSize?i.push(a):(i.length>0&&t.push(i),i=[a],o=s)}else i.push(a);return i.length>0&&t.push(i),t}(o);if(1===r.length){let d=r[0];return Nu(n,d,d[0].style?kt(Ze({},t),{style:{color:d[0].style.color,backgroundColor:d[0].style.backgroundColor,fontSize:d[0].style.fontSize}}):t)}let l=[],c=t?.newList;for(let d of r){let y=Nu(new Tt(n,{color:null==(i=d[0].style)?void 0:i.color,backgroundColor:null==(a=d[0].style)?void 0:a.backgroundColor,fontSize:null==(s=d[0].style)?void 0:s.fontSize}),d,{newList:c});y&&(c=!1,l.push(y))}return 0===l.length?null:1!==l.length||null!=t&&t.classes||null!=t&&t.type?new Re(l,{classes:t?.classes,type:t?.type,newList:t?.newList}).wrap(n):l[0].wrap(n)}static serialize(n,o){return Bn(n)?ms(n,o):"number"==typeof n||"boolean"==typeof n?n.toString():"string"==typeof n?n.replace(/\s/g,"~"):void 0===n?"":o.expandMacro||"string"!=typeof n.verbatimLatex?n.command&&no.customSerializer[n.command]?no.customSerializer[n.command](n,o):n.serialize(o):n.verbatimLatex}static commonAncestor(n,o){if(n===o||n.parent===o.parent)return n.parent;let t=new WeakSet,{parent:i}=n;for(;i;)t.add(i),i=i.parent;for(i=o.parent;i;){if(t.has(i))return i;i=i.parent}}static fromJson(n,o){let t=new no(n.type,o,n);for(let i of Ia)n[i]&&t.setChildren(n[i],i);return t}toJson(){let n={type:this.type};if("math"!==this.mode&&(n.mode=this.mode),this.command&&this.command!==this.value&&(n.command=this.command),void 0!==this.value&&(n.value=this.value),this.style&&Object.keys(this.style).length>0&&(n.style=Ze({},this.style)),void 0!==this.verbatimLatex&&(n.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(n.explicitSubsupPlacement=!0),this.isFunction&&(n.isFunction=!0),this.displayContainsHighlight&&(n.displayContainsHighlight=!0),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.skipBoundary&&(n.skipBoundary=!0),this.captureSelection&&(n.captureSelection=!0),this._branches)for(let o of Object.keys(this._branches))this._branches[o]&&(n[o]=this._branches[o].filter(t=>"first"!==t.type).map(t=>t.toJson()));return n}get changeCounter(){return this._changeCounter}get isDirty(){return this._isDirty}set isDirty(n){if(this._isDirty=n,n){this._changeCounter++,this.verbatimLatex=void 0,this._children=void 0;let{parent:o}=this;for(;o;)o._isDirty=!0,o._changeCounter++,o.verbatimLatex=void 0,o._children=void 0,o=o.parent}}serialize(n){var o;return this.body&&this.command?wn([this.command,"{",this.bodyToLatex(n),"}",this.supsubToLatex(n)]):this.body?wn([this.bodyToLatex(n),this.supsubToLatex(n)]):this.value&&"\u200b"!==this.value?null!=(o=this.command)?o:function YL(n,o){var t;if("text"===n)return null!=(t=bl(n,o.codePointAt(0)))?t:o;let i;if(i=bl(n,o.codePointAt(0)),i)return i;let s=function KL(n){var o;if((n<119808||n>120831)&&(n<8448||n>8527))return{char:String.fromCodePoint(n)};for(let t in Au)if(Au[t]===n){n=null!=(o=t.codePointAt(0))?o:0;break}for(let t of Vm)if(n>=t.start&&n<t.start+t.len)return{char:String.fromCodePoint(n-t.start+t.offset),variant:t.variant,style:t.style};return{char:String.fromCodePoint(n)}}(o.codePointAt(0));return s.style||s.variant?(i=s.char,s.variant&&(i="\\"+s.variant+"{"+i+"}"),"bold"===s.style?i="\\mathbf{"+i+"}":"italic"===s.style?i="\\mathit{"+i+"}":"bolditalic"===s.style&&(i="\\mathbfit{"+i+"}"),"\\mathord{"+i+"}"):""}(this.mode,this.value):""}bodyToLatex(n){return ms(this.body,n)}aboveToLatex(n){return ms(this.above,n)}belowToLatex(n){return ms(this.below,n)}supsubToLatex(n){let o="";if(void 0!==this.branch("subscript")){let t=ms(this.subscript,n);o+=0===t.length?"_{}":1===t.length?"_"+t:`_{${t}}`}if(void 0!==this.branch("superscript")){let t=ms(this.superscript,n);o+=0===t.length?"^{}":1===t.length?"\u2032"===t?"^\\prime ":"\u2033"===t?"^\\doubleprime ":"^"+t:`^{${t}}`}return o}get treeDepth(){let n=1,o=this.parent;for(;o;)o=o.parent,n+=1;return n}get inCaptureSelection(){let n=!1,o=this;for(;o;){if(o.captureSelection){n=!0;break}o=o.parent}return n}branch(n){if(La(n)&&this._branches)return this._branches[n]}get branches(){if(!this._branches)return[];let n=[];for(let o of Ia)this._branches[o]&&n.push(o);return n}createBranch(n){return La(n),La(n)?(this._branches?this._branches[n]||(this._branches[n]=[this.makeFirstAtom(n)]):this._branches={[n]:[this.makeFirstAtom(n)]},this.isDirty=!0,this._branches[n]):[]}get row(){return Sl(this.treeBranch)?this.treeBranch[0]:-1}get col(){return Sl(this.treeBranch)?this.treeBranch[1]:-1}get body(){var n;return null==(n=this._branches)?void 0:n.body}set body(n){this.setChildren(n,"body")}get superscript(){var n;return null==(n=this._branches)?void 0:n.superscript}set superscript(n){this.setChildren(n,"superscript")}get subscript(){var n;return null==(n=this._branches)?void 0:n.subscript}set subscript(n){this.setChildren(n,"subscript")}get above(){var n;return null==(n=this._branches)?void 0:n.above}set above(n){this.setChildren(n,"above")}get below(){var n;return null==(n=this._branches)?void 0:n.below}set below(n){this.setChildren(n,"below")}get computedStyle(){var n;if(!this.parent)return Ze({},null!=(n=this.style)?n:{});let o=void 0!==this.style.verbatimColor,t=void 0!==this.style.verbatimBackgroundColor,i=Ze(Ze({},this.parent.computedStyle),this.style);return delete i.variant,delete i.variantStyle,t||delete i.verbatimBackgroundColor,o||delete i.verbatimColor,i}applyStyle(n){this.isDirty=!0,this.style=Ze(Ze({},this.style),n),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize;for(let o of this.children)o.applyStyle(n)}getInitialBaseElement(){let o;return this.hasEmptyBranch("body")||(o=this.body[1].getInitialBaseElement()),o??this}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){if("leftright"===this.type)return!1;let n=this.getInitialBaseElement();return/mord/.test(n.type)}hasEmptyBranch(n){let o=this.branch(n);return!o||1===o.length}setChildren(n,o){if(!n||(La(o),!La(o)))return;let i=[this.makeFirstAtom(o),...n];this._branches?this._branches[o]=i:this._branches={[o]:i};for(let a of n)a.parent=this,a.treeBranch=o;this.isDirty=!0}makeFirstAtom(n){let o=new no("first",this.context,{mode:this.mode});return o.parent=this,o.treeBranch=n,o}addChild(n,o){this.createBranch(o).push(n),this.isDirty=!0,n.parent=this,n.treeBranch=o}addChildBefore(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o),0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildAfter(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o)+1,0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildren(n,o){for(let t of n)this.addChild(t,o)}addChildrenAfter(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o)+1,0,...n),this.isDirty=!0;for(let i of n)i.parent=this,i.treeBranch=o.treeBranch;return n[n.length-1]}removeBranch(n){let o=this.branch(n);if(La(n)&&(this._branches[n]=void 0),!o)return[];for(let t of o)t.parent=void 0,t.treeBranch=void 0;return o.shift(),this.isDirty=!0,o}removeChild(n){if("first"===n.type)return;let o=this.branch(n.treeBranch),t=o.indexOf(n);o.splice(t,1),this.isDirty=!0,n.parent=void 0,n.treeBranch=void 0}get siblings(){return"root"===this.type?[]:this.parent.branch(this.treeBranch)}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:n}=this;return n[n.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)-1]}get rightSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.children[0]}get lastChild(){let{children:n}=this;return n[n.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let n=[];for(let o of Ia)if(this._branches[o])for(let t of this._branches[o])n.push(...t.children),n.push(t);return this._children=n,n}render(n,o){if("first"===this.type&&!n.atomIdsSettings)return null;let t=new Tt(n,this.style),i="";"root"===this.type&&(i+=" ML__base"),this.isSelected&&(i+=" ML__selected");let a=this.createBox(t,{classes:i,newList:!0===o?.newList||"first"===this.type});return a?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(a=this.attachSupsub(t,{base:a})),a.wrap(t)):null}attachSupsub(n,o){var t,i;let a=o.base,s=this.superscript,r=this.subscript;if(!s&&!r)return a;let l=null,c=null,d=null!=(t=o.isCharacterBox)?t:this.isCharacterBox(),f=0;if(s){let $=new Tt(n,void 0,"superscript");l=no.createBox($,s,{newList:!0}),d||(f=a.height-n.metrics.supDrop*$.scalingFactor)}let O,y=0;if(r){let $=new Tt(n,void 0,"subscript");c=no.createBox($,r,{newList:!0}),d||(y=a.depth+n.metrics.subDrop*$.scalingFactor)}O=n.isDisplayStyle?n.metrics.sup1:n.isCramped?n.metrics.sup3:n.metrics.sup2;let N=.05/n.scalingFactor,I=null;if(c&&l){f=Math.max(f,O,l.depth+.25*n.metrics.xHeight),y=Math.max(y,n.metrics.sub2);let $=n.metrics.defaultRuleThickness;if(f-l.depth-(c.height-y)<4*$){y=4*$-(f-l.depth)+c.height;let V=.8*n.metrics.xHeight-(f-l.depth);V>0&&(f+=V,y-=V)}I=new Pn({individualShift:[{box:c,shift:y,marginLeft:this.isExtensibleSymbol&&a.italic?-a.italic:0},{box:l,shift:-f}]}).wrap(n)}else c&&!l?(y=Math.max(y,n.metrics.sub1,c.height-.3448),I=new Pn({shift:y,children:[{box:c,marginRight:N,marginLeft:this.isCharacterBox()?-(null!=(i=a.italic)?i:0):0}]})):!c&&l&&(f=Math.max(f,O,l.depth+.10775),I=new Pn({shift:-f,children:[{box:l,marginRight:N}]}),I.wrap(n));let z=new Re(I,{classes:"msubsup"+(this.isSelected?" ML__selected":"")});return this.caret&&(z.caret=this.caret),new Re([a,z],{type:o.type})}attachLimits(n,o){var t;let i=this.superscript?no.createBox(new Tt(n,this.style,"superscript"),this.superscript,{newList:!0}):null,a=this.subscript?no.createBox(new Tt(n,this.style,"subscript"),this.subscript,{newList:!0}):null;return i||a?function h9(n,o){var t,i,a,s,r;let l=n.metrics,c=new Re(o.base),d=null!=(t=o.baseShift)?t:0,f=null!=(i=o.slant)?i:0,y=0,O=0;o.above&&(y=null!=(a=o.aboveShift)?a:Math.max(l.bigOpSpacing1,l.bigOpSpacing3-o.above.depth)),o.below&&(O=null!=(s=o.belowShift)?s:Math.max(l.bigOpSpacing2,l.bigOpSpacing4-o.below.height));let N=null;return N=o.below&&o.above?new Pn({bottom:l.bigOpSpacing5+o.below.height+o.below.depth+O+c.depth+d,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-f,classes:["ML__center"]},O,{box:c,classes:["ML__center"]},y,{box:o.above,marginLeft:f,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):o.below&&!o.above?new Pn({top:c.height-d,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-f,classes:["ML__center"]},O,{box:c,classes:["ML__center"]}]}).wrap(n):!o.below&&o.above?new Pn({bottom:c.depth+d,children:[{box:c,classes:["ML__center"]},y,{box:o.above,marginLeft:f,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):new Pn({bottom:c.depth+d,children:[{box:c},l.bigOpSpacing5]}).wrap(n),new Re(N,{type:null!=(r=o.type)?r:"mop"})}(n,kt(Ze({},o),{above:i,below:a,type:null!=(t=o?.type)?t:"mop"})):o.base.wrap(n)}bind(n,o){if(!o||n.isPhantom||"\u200b"===this.value)return o;let t=this.parent;for(;t&&!t.captureSelection;)t=t.parent;return null!=t&&t.captureSelection||(this.id||(this.id=n.makeID()),o.atomID=this.id),o}createMathfieldBox(n,o,t){let a=new w9(t,o,{type:"mathfield",mode:this.mode,maxFontSize:n.scalingFactor,style:kt(Ze({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:""});return n.isTight&&(a.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(a.italic=0),a.right=a.italic,this.bind(n,a),oa(a,{type:"mord"})}createBox(n,o){var t,i,a;let s=null!=(t=this.value)?t:this.body,r=function r9(n){return s9.includes(n)}(this.type)?this.type:void 0,l=null!=(i=o?.classes)?i:"";"text"===this.mode&&(l+=" ML__text");let c="string"==typeof s||void 0===s?new Re(s??null,{type:r,mode:this.mode,maxFontSize:n.scalingFactor,style:kt(Ze({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:l,newList:o?.newList}):null!=(a=no.createBox(n,s,{type:r,mode:this.mode,style:this.style,classes:l,newList:o?.newList}))?a:new Re(null);return n.isTight&&(c.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(c.italic=0),c.right=c.italic,this.bind(n,c),this.caret&&!this.superscript&&!this.subscript&&(c.caret=this.caret),c}isDigit(){var n;return"mord"===this.type&&this.value?/^[\d,.]$/.test(this.value):"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var n;return"mord"===this.type&&this.value&&/^[\d,.]$/.test(this.value)?this.value:"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value?".":""}},Me=no;function ms(n,o){if(!n||0===n.length)return"";if("first"===n[0].type){if(1===n.length)return"";n=n.slice(1)}return 0===n.length?"":wn(Ri(n,"cssClass").map(t=>wn(Ri(t,"color").map(i=>wn(function a9(n){let o=[],t=[],i="NONE";for(let a of n)"first"!==a.type&&(a.mode!==i?(t.length>0&&o.push(t),t=[a],i=a.mode):t.push(a));return t.length>0&&o.push(t),o}(i).map(a=>ia.serialize(a,o)))))))}function Nu(n,o,t){var i,a,s,r,l;function c(I){return"text"===I.mode}if(!o||0===o.length)return null;let N,d=new Tt(n,t?.style),f=!(null!=(i=d.atomIdsSettings)&&i.groupNumbers),y=[],O=null!=(a=t?.newList)&&a;if(1===o.length){let I=o[0],z=I.render(d,{newList:O});z&&(f&&I.isSelected&&z.selected(!0),y=[z])}else{let I="",z=!0;for(let $ of o){null!=(s=d.atomIdsSettings)&&s.groupNumbers&&I&&(z&&$.isDigit()||!z&&c($))&&(d.atomIdsSettings.overrideID=I);let Y=$.render(d,{newList:O});d.atomIdsSettings&&(d.atomIdsSettings.overrideID=void 0),Y&&(O="group"===$.type&&!$.boxType,null!=(r=d.atomIdsSettings)&&r.groupNumbers&&(($.isDigit()||c($))&&(!I||z!==$.isDigit())&&(z=$.isDigit(),I=null!=(l=$.id)?l:""),I&&(!($.isDigit()||c($))||!$.hasEmptyBranch("superscript")||!$.hasEmptyBranch("subscript"))&&(I="")),f&&$.isSelected&&Y.selected(!0),y.push(Y))}}return 0===y.length?null:(t||d.isTight||y.length>1?(N=new Re(y,Ze({isTight:d.isTight},t??{})),N.isSelected=y.every(I=>I.isSelected)):N=y[0],N.wrap(d).wrap(n))}Me.customSerializer={};var Ks=class extends Me{constructor(n,o,t,i){super("accent",t,{command:n,style:i.style}),i.accentChar?this.accent=i.accentChar:this.svgAccent=i?.svgAccent,this.body=o,this.skipBoundary=!0}static fromJson(n,o){return new Ks(n.command,n.body,o,{accentChar:n.accentChar,svgAccent:n.svgAccent,style:n.style})}toJson(){return kt(Ze({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(n){var o;let t=new Tt(n,this.style,"cramp"),i=null!=(o=Me.createBox(t,this.body))?o:new Re(null),a=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(a=i.skew);let r,s=Math.min(i.height,Sa);if(this.svgAccent)r=Tl(this.svgAccent),s=t.metrics.bigOpSpacing1-s;else if(this.accent){let c=new Re(this.accent,{fontFamily:"Main-Regular"});c.italic=0;let d=8407===this.accent?" ML__accent-vec":"";r=new Re(new Re(c),{classes:"ML__accent-body"+d})}r=new Pn({shift:0,children:[{box:new Re(i)},-s,{box:r,marginLeft:i.left+2*a,classes:["ML__center"]}]});let l=new Re(r,{newList:!0,type:"mord"});return this.caret&&(l.caret=this.caret),this.bind(t,l.wrap(t)),this.attachSupsub(t,{base:l})}},$s={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},u_=Object.fromEntries(Object.entries($s).map(([n,o])=>[o,n]));function El(n){var o;return null!=(o={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[n])?o:n.codePointAt(0)}function d_(n,o,t,i,a){let s=new Tt(i,a?.style,"textstyle"),r=new Re(El(n),{fontFamily:"Size"+o+"-Regular",classes:"ML__delim-size"+o}).wrap(s);return t&&r.setTop((1-s.scalingFactor)*to),r}function m_(n,o,t,i,a){var s;let r,l,c,d;r=c=d=El(n),l=null;let f="Size1-Regular";"\\vert"===n||"\\lvert"===n||"\\rvert"===n||"\\mvert"===n||"\\mid"===n?c=r=d=8739:"\\Vert"===n||"\\lVert"===n||"\\rVert"===n||"\\mVert"===n||"\\|"===n?c=r=d=8741:"\\uparrow"===n?c=d=9168:"\\Uparrow"===n?c=d=8214:"\\downarrow"===n?r=c=9168:"\\Downarrow"===n?r=c=8214:"\\updownarrow"===n?(r=8593,c=9168,d=8595):"\\Updownarrow"===n?(r=8657,c=8214,d=8659):"["===n||"\\lbrack"===n?(r=9121,c=9122,d=9123,f="Size4-Regular"):"]"===n||"\\rbrack"===n?(r=9124,c=9125,d=9126,f="Size4-Regular"):"\\lfloor"===n||"\u230a"===n?(c=r=9122,d=9123,f="Size4-Regular"):"\\lceil"===n||"\u2308"===n?(r=9121,c=d=9122,f="Size4-Regular"):"\\rfloor"===n||"\u230b"===n?(c=r=9125,d=9126,f="Size4-Regular"):"\\rceil"===n||"\u2309"===n?(r=9124,c=d=9125,f="Size4-Regular"):"("===n||"\\lparen"===n?(r=9115,c=9116,d=9117,f="Size4-Regular"):")"===n||"\\rparen"===n?(r=9118,c=9119,d=9120,f="Size4-Regular"):"\\{"===n||"\\lbrace"===n?(r=9127,l=9128,d=9129,c=9130,f="Size4-Regular"):"\\}"===n||"\\rbrace"===n?(r=9131,l=9132,d=9133,c=9130,f="Size4-Regular"):"\\lgroup"===n||"\u27ee"===n?(r=9127,d=9129,c=9130,f="Size4-Regular"):"\\rgroup"===n||"\u27ef"===n?(r=9131,d=9133,c=9130,f="Size4-Regular"):"\\lmoustache"===n||"\u23b0"===n?(r=9127,d=9133,c=9130,f="Size4-Regular"):"\\rmoustache"===n||"\u23b1"===n?(r=9131,d=9129,c=9130,f="Size4-Regular"):"\\surd"===n?(r=57345,d=9143,c=57344,f="Size4-Regular"):"\\ulcorner"===n?(r=9484,c=d=32):"\\urcorner"===n?(r=9488,c=d=32):"\\llcorner"===n?(d=9492,c=r=32):"\\lrcorner"===n&&(r=9496,c=r=32);let y=Ma(r,f),O=y.height+y.depth,N=Ma(c,f),I=N.height+N.depth,z=Ma(d,f),$=z.height+z.depth,Y=0,V=1;if(null!==l){let rt=Ma(l,f);Y=rt.height+rt.depth,V=2}let te=O+$+Y,K=Math.max(0,Math.ceil((o-te)/(V*I))),ye=to;t&&(ye*=i.scalingFactor);let ae=(te+K*V*I)/2-ye,oe=.008,pe=[];pe.push({box:new Re(d,{fontFamily:f})}),pe.push(-oe);let je=new Re(c,{fontFamily:f});if(null===l)for(let rt=0;rt<K;rt++)pe.push({box:je});else{for(let rt=0;rt<K;rt++)pe.push({box:je});pe.push(-oe),pe.push({box:new Re(l,{fontFamily:f})}),pe.push(-oe);for(let rt=0;rt<K;rt++)pe.push({box:je})}pe.push(-oe),pe.push({box:new Re(r,{fontFamily:f})});let Le="";"Size1-Regular"===f?Le=" delim-size1":"Size4-Regular"===f&&(Le=" delim-size4");let st=new Pn({bottom:ae,children:pe},{classes:Le});return new Re(st,kt(Ze({},a??{}),{classes:(null!=(s=a?.classes)?s:"")+" ML__delim-mult"}))}var __=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230a","\u230b","\u2308","\u2309"]),T9=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27ee","\u27ef","\u23b0","\u23b1"]),p_=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),A9=[0,1.2,1.8,2.4,3],S9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],E9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],M9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function I9(n){return"small"===n.type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":"Size4-Regular"}function Ml(n,o,t,i,a,s){var r;if(!o||0===o.length||"."===o)return Za(a,n,n);let l;"<"===o||"\\lt"===o?o="\\langle":(">"===o||"\\gt"===o)&&(o="\\rangle"),l=p_.has(o)?S9:__.has(o)?M9:E9;let c=function L9(n,o,t,i){for(let s={"-4":0,"-3":1,0:2}[i.mathstyle.sizeDelta];s<t.length&&"stack"!==t[s].type;s++){let r=Ma(n,I9(t[s]));if(r.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let l=r.height+r.depth;if("small"===t[s].type&&("scriptscriptstyle"===t[s].mathstyle?l*=Mu[Math.max(1,i.size-2)]:"scriptstyle"===t[s].mathstyle&&(l*=Mu[Math.max(1,i.size-1)])),l>o)return t[s]}return t[t.length-1]}(El(o),t,l,a),d=new Tt(a,s?.style,c.mathstyle);return"small"===c.type?function k9(n,o,t,i){let a=new Re(El(n),{fontFamily:"Main-Regular"}).wrap(o,i);return t&&a.setTop((1-o.scalingFactor)*to),a}(o,d,i,{type:n,classes:"ML__small-delim "+(null!=(r=s?.classes)?r:"")}):"large"===c.type?d_(o,c.size,i,d,kt(Ze({},s),{type:n})):m_(o,t,i,d,kt(Ze({},s),{type:n}))}function Ys(n,o,t,i,a,s){if("."===o)return Za(a,n,s?.classes);let r=to*a.scalingFactor,d=Math.max(t-r,i+r);return Ml(n,o,Math.max(d/500*901,2*d-.5),!0,a,s)}function Za(n,o,t){let i=new Tt(n,void 0,"textstyle");return new Re(null,{classes:" nulldelimiter "+(t??""),type:o}).wrap(i)}var Mi=class extends Me{constructor(n,o,t){var i,a,s,r;super("overunder",o,{command:n,serialize:t.serialize,style:t.style}),this.skipBoundary=null==(i=t.skipBoundary)||i,this.subsupPlacement=t.supsubPlacement,this.body=t.body,this.svgAbove=t.svgAbove,this.svgBelow=t.svgBelow,this.svgBody=t.svgBody,this.above=t.above,this.below=t.below,this.boxType=null!=(a=t.boxType)?a:"mord",this.paddedBody=null!=(s=t.paddedBody)&&s,this.paddedLabels=null!=(r=t.paddedLabels)&&r}static fromJson(n,o){return new Mi(n.command,o,n)}toJson(){let n={};return this.skipBoundary||(n.skipBoundary=!1),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.svgAbove&&(n.svgAbove=this.svgAbove),this.svgBelow&&(n.svgBelow=this.svgBelow),this.svgBody&&(n.svgBody=this.svgBody),"mord"!==this.boxType&&(n.boxType=this.boxType),this.paddedBody&&(n.paddedBody=!0),this.paddedLabels&&(n.paddedLabels=!0),Ze(Ze({},super.toJson()),n)}render(n){let o=this.svgBody?Tl(this.svgBody):Me.createBox(n,this.body,{newList:!0}),t=new Tt(n,this.style,"scriptstyle"),i=null;this.svgAbove?i=Tl(this.svgAbove):this.above&&(i=Me.createBox(t,this.above,{newList:!0}));let a=null;this.svgBelow?a=Tl(this.svgBelow):this.below&&(a=Me.createBox(t,this.below,{newList:!0})),this.paddedBody&&(o=new Re([Za(n,"mopen"),o,Za(n,"mclose")],{newList:!0}));let s=function Z9(n,o){if(!o.base)return null;if(!o.above&&!o.below){let l=new Re(o.base,{type:o.type});return l.setStyle("position","relative"),l}let t=0;o.above&&(t=-o.above.depth+n.metrics.bigOpSpacing2);let i=null,a=o.base,r=["ML__center"];return o.paddedAboveBelow&&r.push("ML__label_padding"),o.below&&o.above?i=new Pn({bottom:n.metrics.bigOpSpacing5+o.below.height+o.below.depth+a.depth+0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:r},{box:a,classes:["ML__center"]},t,{box:o.above,classes:r},n.metrics.bigOpSpacing5]}):o.below?i=new Pn({top:a.height-0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:r},{box:a,classes:["ML__center"]}]}):o.above&&(i=new Pn({bottom:a.depth+0,children:[{box:a,classes:["ML__center"]},t,{box:o.above,classes:r},n.metrics.bigOpSpacing5]})),new Re(i,{type:o.type})}(n,{base:o,above:i,below:a,type:"mbin"===this.boxType||"mrel"===this.boxType?this.boxType:"mord",paddedAboveBelow:this.paddedLabels});return s?(s="over-under"===this.subsupPlacement?this.attachLimits(n,{base:s,type:s.type}):this.attachSupsub(n,{base:s}),this.caret&&(s.caret=this.caret),this.bind(n,s)):null}},zn=class extends Me{constructor(n,o,t){var i,s,r;super("group",o,{command:t?.command,mode:null!=(i=t?.mode)?i:"math",serialize:t?.serialize,style:t?.style}),this.body=n,this.mathstyleName=t?.mathstyleName,this.latexOpen=t?.latexOpen,this.latexClose=t?.latexClose,this.cssId=t?.cssId,this.htmlData=t?.htmlData,this.htmlStyle=t?.htmlStyle,this.customClass=t?.customClass,this.boxType=t?.boxType,this.skipBoundary=!0,this.captureSelection=null!=(s=t?.captureSelection)&&s,this.changeMode=null!=(r=t?.changeMode)&&r,this.displayContainsHighlight=!1,n&&1===n.length&&","===n[0].command&&(this.captureSelection=!0)}static fromJson(n,o){return new zn(n.body,o,n)}toJson(){let n={};return this.mathstyleName&&(n.mathstyleName=this.mathstyleName),this.latexOpen&&(n.latexOpen=this.latexOpen),this.latexClose&&(n.latexClose=this.latexClose),this.cssId&&(n.cssId=this.cssId),this.htmlData&&(n.htmlData=this.htmlData),this.htmlStyle&&(n.htmlStyle=this.htmlStyle),this.customClass&&(n.customClass=this.customClass),this.boxType&&(n.boxType=this.boxType),this.captureSelection&&(n.captureSelection=!0),this.changeMode&&(n.changeMode=!0),Ze(Ze({},super.toJson()),n)}render(n){let o=new Tt(n,this.style,this.mathstyleName),t=Me.createBox(o,this.body,{type:this.boxType,classes:this.customClass,mode:this.mode,style:{backgroundColor:this.style.backgroundColor},newList:!this.boxType});return t?(this.cssId&&(t.cssId=this.cssId),this.htmlData&&(t.htmlData=this.htmlData),this.htmlStyle&&(t.htmlStyle=this.htmlStyle),this.caret&&(t.caret=this.caret),this.bind(n,t)):null}serialize(n){let o=this.bodyToLatex(n);return"string"==typeof this.latexOpen&&(o=this.latexOpen+o+this.latexClose),this.htmlData&&(o=`\\htmlData{${this.htmlData}}{${o}}`),this.htmlStyle&&(o=`\\htmlStyle{${this.htmlStyle}}{${o}}`),this.customClass&&(o=`\\class{${this.customClass}}{${o}}`),this.cssId&&(o=`\\cssId{${this.cssId}}{${o}}`),o}},Pa=class extends Me{constructor(n,o,t,i){super("spacing",t,{command:n,style:o}),this.width=i}static fromJson(n,o){return new Pa(n.command,n.style,o,n.width)}toJson(){let n={};return this.width&&(n.width=this.width),Ze(Ze({},super.toJson()),n)}render(n){var o;let t;if(this.width)t=new Re(null,{classes:"mspace"}),t.left=function n9(n){return yo(n.glue)}(this.width);else{let i=null!=(o={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.command])?o:"mediumspace";t=new Re(null,{classes:i})}return t=this.bind(n,t),this.caret&&(t.caret=this.caret),t}serialize(n){var o;let t=null!=(o=this.command)?o:"";return"\\hspace"===this.command||"\\hspace*"===this.command?Number.isFinite(this.width)?t+=`{${this.width}em'}`:t+="{0pt}":Number.isFinite(this.width)&&(t+=` ${this.width}em`),t}},Xn=class extends Me{constructor(n,o,t,i){super("leftright",t,{style:i.style,displayContainsHighlight:!0}),this.variant=n,this.body=o,this.leftDelim=i.leftDelim,this.rightDelim=i.rightDelim}static fromJson(n,o){var t;return new Xn(null!=(t=n.variant)?t:"",n.body,o,n)}toJson(){let n=super.toJson();return this.variant&&(n.variant=this.variant),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),n}serialize(n){var o,t;let i=this.matchingRightDelim();return wn("left...right"===this.variant?["\\left"+(null!=(o=this.leftDelim)?o:"."),this.bodyToLatex(n),"\\right"+i]:"mleft...mright"===this.variant?["\\mleft"+(null!=(t=this.leftDelim)?t:"."),this.bodyToLatex(n),"\\mright"+i]:[this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(n),i])}matchingRightDelim(){var n,o;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let t=null!=(n=this.leftDelim)?n:".";return null!=(o=$s[t])?o:t}render(n){var o,t,i;let a=new Tt(n,this.style),s=new Tt(n,this.style,"textstyle"),r=null!=(o=Me.createBox(a,this.body,{newList:!0}))?o:new Re(null,{newList:!0}),l=r.height/s.scalingFactor,c=r.depth/s.scalingFactor,d=[];if(this.leftDelim&&d.push(this.bind(s,Ys("mopen",this.leftDelim,l,c,s,{classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),r){if(r.children)for(let O=0;O<r.children.length;O++){let N=r.children[O];if(N.delim){let I=N.caret;r.children[O]=this.bind(a,Ys("minner",N.delim,l,c,a)),r.children[O].caret=I}}d.push(r)}if(this.rightDelim){let O=this.containsCaret?" ML__contains-caret":"",N=this.rightDelim;"?"===N&&(this.context.smartFence?(N=this.matchingRightDelim(),O+=" ML__smart-fence__close"):N="."),d.push(this.bind(s,Ys("mclose",N,l,c,s,{classes:O+" ML__close",mode:this.mode,style:this.style})))}let f=null!=(i="mleft...mright"===this.variant||(null==(t=this.leftSibling)?void 0:t.isFunction))&&i,y=new Re(d,{type:f?"mclose":"minner",classes:"left-right"});return this.caret&&(y.caret=this.caret),this.bind(a,y.wrap(a))}},Gs=class extends Me{constructor(n,o){super("msubsup",n,{style:o?.style})}static fromJson(n,o){let t=new Gs(o,n);for(let i of Ia)n[i]&&t.setChildren(n[i],i);return t}toJson(){return super.toJson()}render(n){var o;let t=this.leftSibling,i=new Tt(n,{isPhantom:!0}),a=null!=(o=t.render(i))?o:new Re(null),s=new Re(null,{height:a.height,depth:a.depth});return this.attachSupsub(n,{base:s,isCharacterBox:t.isCharacterBox(),type:"supsub"})}serialize(n){return this.supsubToLatex(n)}},An=class extends Me{constructor(n,o){var t;let i=o?.value||n.placeholderSymbol;super("placeholder",n,{mode:null!=(t=o?.mode)?t:"math",style:o?.style,value:i,command:"\\placeholder"}),this.captureSelection=!0,this.placeholderId=o?.placeholderId,null!=o&&o.default&&(this.defaultValue=o?.default)}static fromJson(n,o){return new An(o,n)}toJson(){let n=super.toJson();return this.placeholderId&&(n.placeholderId=this.placeholderId),this.value===this.context.placeholderSymbol&&delete n.value,this.defaultValue&&(n.defaultValue=this.defaultValue.map(o=>o.toJson())),n}render(n){if("function"==typeof n.renderPlaceholder)return n.renderPlaceholder(n,this);let o="";return this.caret&&(o+="ML__placeholder-selected "),this.isSelected&&(o+=" ML__selected "),this.createBox(n,{classes:o})}serialize(n){var o;let t=null!=(o=this.value)?o:"";return t===this.context.placeholderSymbol&&(t=""),`\\placeholder${this.placeholderId?`[${this.placeholderId}]`:""}${this.defaultValue?`[${Me.serialize(this.defaultValue,n)}]`:""}{${t}}`}},Qu=class extends Me{constructor(n,o){super("error",o,{value:n,command:n,mode:"math"}),this.verbatimLatex=n}static fromJson(n,o){return new Qu(n.command,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n,{classes:"ML__error"});return this.caret&&(o.caret=this.caret),o}},qu=class extends Me{constructor(n,o,t){var i,a;super("macro",o,{command:n}),this.body=t.body,this.captureSelection=void 0===t.captureSelection?!t.args:t.captureSelection,this.macroArgs=null!=(i=t.args)?i:"",this.expand=null!=(a=t.expand)&&a}static fromJson(n,o){return new qu(n.command,o,n)}toJson(){let n=super.toJson();return this.expand&&(n.expand=!0),void 0!==this.captureSelection&&(n.captureSelection=this.captureSelection),this.macroArgs&&(n.args=this.macroArgs),n}serialize(n){return n.expandMacro&&this.expand?this.bodyToLatex(n):this.command+this.macroArgs}render(n){let o=Me.createBox(n,this.body);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},_s=class extends Me{constructor(n,o,t,i){super("text",i,{command:n,mode:"text",displayContainsHighlight:!0}),this.value=o,this.verbatimLatex=o,this.applyStyle(t)}static fromJson(n,o){return new _s(n.command,n.value,n.style,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n);return this.caret&&(o.caret=this.caret),o}serialize(n){var o;return null!=(o=this.verbatimLatex)?o:bl("text",this.value.codePointAt(0))}};function Il(n){return!/^<({|}|\$|\$\$|space)>$/.test(n)}var Ll=class{constructor(n,o,t){var i,a,s,r,l,c;this.index=0,this.endCount=0,this.tokens=n,this.context=o,this.errors=[],this.args=null!=(i=t.args)?i:null,this.smartFence=null!=(a=t.smartFence)?a:o.smartFence,this._currentParsingContext={parent:void 0,mathlist:[],style:null!=(s=t.style)?s:{},parseMode:null!=(r=t.parseMode)?r:"math",mathstyle:null!=(l=t.mathstyle)?l:"displaystyle",registers:null!=(c=t.registers)?c:o.registers,tabular:!1}}get currentContext(){return this._currentParsingContext}get rootContext(){let n=this._currentParsingContext;for(;n.parent;)n=n.parent;return n}beginContext(n){var o,t,i;let a={parent:this.currentContext,mathlist:[],style:Ze({},this.currentContext.style),parseMode:null!=(o=n?.mode)?o:this.currentContext.parseMode,mathstyle:null!=(t=n?.mathstyle)?t:this.currentContext.mathstyle,registers:null,tabular:null!=(i=n?.tabular)&&i};this._currentParsingContext=a}endContext(){this._currentParsingContext=this._currentParsingContext.parent}onError(n){this.errors.push(Ze({before:Hs(this.tokens.slice(this.index,this.index+10)),after:Hs(this.tokens.slice(Math.max(0,this.index-10),this.index))},n))}get mathlist(){return this.currentContext.mathlist}set mathlist(n){this.currentContext.mathlist=n}get parseMode(){return this.currentContext.parseMode}set parseMode(n){this.currentContext.parseMode=n}get tabularMode(){return this.currentContext.tabular}get style(){let n=this.currentContext;for(;n;){if(n.style)return n.style;n=n.parent}return{}}set style(n){this.currentContext.style=n}getRegister(n){var o,t,i;if(n.startsWith("global "))return null!=(t=null==(o=this.rootContext.registers)?void 0:o[n.slice(7)])?t:0;let a=this.currentContext;for(;a;){if(null!=(i=a.registers)&&i[n])return a.registers[n];a=a.parent}return 0}setRegister(n,o){var t;if(n.startsWith("global ")){n=n.slice(7);let i=this.currentContext;for(;i;)null!=(t=i.registers)&&t[n]&&delete i.registers[n],i=i.parent;this.rootContext.registers[n]=o}else this.currentContext.registers||(this.currentContext.registers={}),this.currentContext.registers[n]=o}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(n){return this.tokens[this.index]===n&&(this.index++,!0)}lastSubsupAtom(){let n;return this.mathlist.length>0&&(n=this.mathlist[this.mathlist.length-1],"msubsup"===n.type||void 0!==n.subsupPlacement)||(n=new Gs(this.context,{style:this.style}),this.mathlist.push(n)),n}hasPattern(n){return n.test(this.tokens[this.index])}hasInfixCommand(){var n;let{index:o}=this;if(o<this.tokens.length&&this.tokens[o].startsWith("\\")){let t=this.context.getDefinition(this.tokens[o],this.parseMode);return!(!t||"symbol"===t.definitionType||t.ifMode&&!t.ifMode.includes(this.parseMode))&&null!=(n=t.infix)&&n}return!1}matchColumnSeparator(){let{index:n}=this;return!(!this.tabularMode||"&"!==this.tokens[n]||(this.index++,0))}matchRowSeparator(){let{index:n}=this;return!(!this.tabularMode||"\\\\"!==this.tokens[n]&&"\\cr"!==this.tokens[n]||(this.index++,0))}placeholder(){var n;let o=null==(n=this.args)?void 0:n.call(this,"?");return o?pi(o,this.context,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new An(this.context,{mode:this.parseMode,style:this.style})]}matchWhitespace(){let n=!1;for(;this.match("<space>");)n=!0;return n}skipUntilToken(n){let o=this.tokens[this.index];for(;o&&o!==n;)o=this.tokens[++this.index];o===n&&this.index++}skipFiller(){let n=!1;do{let o=this.matchWhitespace(),t=this.match("\\relax");n=!o&&!t}while(!n)}matchKeyword(n){let o=this.index,t=this.end(),i="";for(;!t;){let s=this.get();Il(s)?(i+=s,t=this.end()||i.length>=n.length):t=!0}let a=n.toUpperCase()===i.toUpperCase();return a||(this.index=o),a}scanString(){let n="";for(;!this.end();)if(this.match("<space>"))n+=" ";else{let o=this.peek();if("]"===o)break;if(Il(o))n+=this.get();else{if(!o.startsWith("\\"))break;this.onError({code:"unbalanced-braces"}),n+=this.get()}}return n}scanBalancedString(){let n="",o=this.end(),t=1;for(;!o;){if(this.match("<space>"))n+=" ";else{let i=this.get();"<{>"===i?(n+="{",t+=1):"<}>"===i?(t-=1,t>0?n+="}":this.index-=1):n+="<$>"===i?"$":"<$$>"===i?"$$":i}o=0===t||this.end()}return n}matchLiteralArg(){var n;let o="";if(this.match("<{>")){let t=1;for(;t>0&&!this.end();){let i=this.get();"<}>"===i?(t-=1,t>0&&(o+="}")):"<{>"===i?(t+=1,o+="{"):o+=null!=(n={"<space>":" ","<$$>":"$$","<$>":"$"}[i])?n:i}}return o}scanNumber(n=!0){var o,t;let i=!1,a=this.peek();for(;"<space>"===a||"+"===a||"-"===a;)this.get(),"-"===a&&(i=!i),a=this.peek();n=!!n;let s=10,r=/\d/;if(this.match("'"))s=8,r=/[0-7]/,n=!0;else if(this.match('"')||this.match("x"))s=16,r=/[\dA-F]/,n=!0;else if(this.match("`"))return a=this.get(),a?a.startsWith("\\")&&2===a.length?(i?-1:1)*(null!=(o=a.codePointAt(1))?o:0):(i?-1:1)*(null!=(t=a.codePointAt(0))?t:0):null;let l="";for(;this.hasPattern(r);)l+=this.get();if(!n&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(r);)l+=this.get();let c=n?Number.parseInt(l,s):Number.parseFloat(l);return Number.isNaN(c)?null:i?-c:c}scanDimen(){var n,o,t;let a,i=this.scanNumber(!1);if(null===i){if(null==(n=this.peek())||!n.startsWith("\\"))return null;i=1}return this.matchWhitespace(),this.matchKeyword("pt")?a={dimension:i,unit:"pt"}:this.matchKeyword("mm")?a={dimension:i,unit:"mm"}:this.matchKeyword("cm")?a={dimension:i,unit:"cm"}:this.matchKeyword("ex")?a={dimension:i,unit:"ex"}:this.matchKeyword("px")?a={dimension:i,unit:"px"}:this.matchKeyword("em")?a={dimension:i,unit:"em"}:this.matchKeyword("bp")?a={dimension:i,unit:"bp"}:this.matchKeyword("dd")?a={dimension:i,unit:"dd"}:this.matchKeyword("pc")?a={dimension:i,unit:"pc"}:this.matchKeyword("in")?a={dimension:i,unit:"in"}:this.matchKeyword("mu")?a={dimension:i,unit:"mu"}:null!=(o=this.peek())&&o.startsWith("\\")?(a=null!=(t=Zl(this.getRegister(this.get().slice(1)),this.context))?t:{dimension:0},a.dimension*=i):(this.match("\\relax")||this.onError({code:"missing-unit"}),a={dimension:i,unit:"pt"}),a}scanGlue(){let n=this.scanDimen();if(null===n)return null;let o={glue:n};return this.matchWhitespace(),this.match("\\relax")||(this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.match("\\relax"))||(this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen()),o}scanColspec(){this.matchWhitespace();let n=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){let o=this.get();"c"===o||"r"===o||"l"===o?n.push({align:o}):"|"===o?n.push({separator:"solid"}):":"===o?n.push({separator:"dashed"}):"@"===o&&(this.match("<{>")&&(this.beginContext({mode:"math"}),n.push({gap:this.parse(t=>"<}>"===t)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return n}parseModeSet(){let n="";if(this.match("\\(")&&(n="\\)"),!n&&this.match("\\[")&&(n="\\]"),!n)return null;this.beginContext({mode:"math",mathstyle:"\\)"===n?"textstyle":"displaystyle"});let o=new zn(this.parse(t=>t===n),this.context,{mathstyleName:"\\)"===n?"textstyle":"displaystyle",latexOpen:"\\]"===n?"\\[":"\\(",latexClose:n,boxType:"mord"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseModeShift(){let n="";if(this.match("<$>")&&(n="<$>"),!n&&this.match("<$$>")&&(n="<$$>"),!n)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let o=new zn(this.parse(t=>t===n),this.context,{mathstyleName:"<$>"===n?"textstyle":"displaystyle",latexOpen:"<$>"===n?"$ ":"$$ ",latexClose:"<$>"===n?" $":" $$"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseEnvironment(){if(!this.match("\\begin"))return null;let n=this.parseArgument("string");if(!n)return null;let o=function GL(n){var o;return null!=(o=ku[n])?o:null}(n);if(!o)return this.onError({code:"unknown-environment",arg:n}),null;let t=[];if(o.params)for(let l of o.params)if(l.isOptional)t.push(this.parseOptionalArgument(l.type));else{let c=this.parseArgument(l.type);c||this.onError({code:"missing-argument",arg:n}),t.push(c)}this.beginContext({tabular:o.tabular});let i=[],a=[],s=[],r=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:n}),r=!0),!r&&this.match("\\end")&&(this.parseArgument("string")!==n&&this.onError({code:"unbalanced-environment",arg:n}),r=!0),!r)if(this.matchColumnSeparator())s.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){s.push(this.mathlist),this.mathlist=[];let l=null;this.matchWhitespace(),this.match("[")&&(l=this.scanDimen(),this.matchWhitespace(),this.match("]")),a.push(l??{dimension:0}),i.push(s),s=[]}else this.mathlist.push(...this.parse(l=>"<}>"===l||"&"===l||"\\end"===l||"\\cr"===l||"\\\\"===l))}while(!r);return s.push(this.mathlist),s.length>0&&i.push(s),this.endContext(),o.createAtom(this.context,n,i,a,t)}parse(n){this.beginContext(),n||(n=l=>"<}>"===l);let r,o="",t=null,i=[],a=null,s=this.mathlist;for(this.mathlist=[];!this.end()&&!n(this.peek());)this.hasInfixCommand()&&!o?(o=this.get(),t=this.context.getDefinition(o,"math"),t&&(i=this.parseArguments(t)[1]),a=this.mathlist,this.mathlist=[]):this.parseToken();return o?(i.unshift(this.mathlist),this.mathlist=s,a&&i.unshift(a),r=[t.createAtom(o,i,this.style,this.context)]):(r=this.mathlist,this.mathlist=s),this.endContext(),r}parseGroup(){if(!this.match("<{>"))return null;let n=new zn(this.parse(o=>"<}>"===o),this.context,{mode:this.parseMode,latexOpen:"{",latexClose:"}"});return this.match("<}>")||this.onError({code:"unbalanced-braces"}),n}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;this.beginContext();let n=1;for(;!this.end()&&0!==n;)this.match("(")&&(n+=1),this.match(")")&&(n-=1),0!==n&&this.parseToken();0===n&&this.match(")");let o=new Xn("",this.mathlist,this.context,{leftDelim:"(",rightDelim:0===n?")":"?"});return this.endContext(),o}scanDelim(){this.matchWhitespace();let n=this.get();if(!n)return this.onError({code:"unexpected-end-of-string"}),null;let o=".";(n.startsWith("\\")||Il(n))&&(o=n);let t=this.context.getDefinition(o,"math");return t?"function"===t.definitionType&&t.ifMode&&!t.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:o}),null):"symbol"===t.definitionType&&("mopen"===t.type||"mclose"===t.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(o)?o:(this.onError({code:"unexpected-delimiter",arg:o}),null):(this.onError({code:"unknown-command",arg:o}),null)}parseLeftRight(){var n;if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;let o="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;o="\\mright"}let t=this.scanDelim();if(!t)return null;for(this.beginContext();!this.end()&&!this.match(o);)this.parseToken();let i=this.mathlist;this.endContext();let a=null!=(n=this.scanDelim())?n:".";return new Xn("\\right"===o?"left...right":"mleft...mright",i,this.context,{leftDelim:t,rightDelim:a,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let n=this.peek();if("^"!==n&&"_"!==n&&"'"!==n)return!1;for(;"^"===n||"_"===n||"'"===n;){if(this.match("'"))this.match("'")?this.lastSubsupAtom().addChild(new Me("mord",this.context,{command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript"):this.lastSubsupAtom().addChild(new Me("mord",this.context,{command:"\\prime",mode:"math",value:"\u2032"}),"superscript");else if(this.match("^")||this.match("_")){let o=this.parseArgument("math");o?this.lastSubsupAtom().addChildren(o,"_"===n?"subscript":"superscript"):this.lastSubsupAtom().createBranch("_"===n?"subscript":"superscript")}n=this.peek()}return!0}parseLimits(){let n=this.match("\\limits"),o=!n&&this.match("\\nolimits"),t=!o&&!n&&this.match("\\displaylimits");if(!n&&!o&&!t)return!1;let i=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return!(null===i||"mop"!==i.type||(n?(i.subsupPlacement="over-under",i.explicitSubsupPlacement=!0,0):o?(i.subsupPlacement="adjacent",i.explicitSubsupPlacement=!0,0):!t||(i.subsupPlacement="auto",i.explicitSubsupPlacement=!0,0)))}parseArguments(n){if(null==n||!n.params)return[void 0,[]];let o,t=[],i=n.infix?2:0;for(;i<n.params.length;){let a=n.params[i];if("rest"===a.type)t.push(this.parse(s=>"<}>"===s||"&"===s||"\\end"===s||"\\cr"===s||"\\\\"===s));else if(a.isOptional)t.push(this.parseOptionalArgument(a.type));else if(a.type.endsWith("*"))o=a.type.slice(0,-1);else{let s=this.parseArgument(a.type);if(null!==s)t.push(s);else switch(this.onError({code:"missing-argument"}),a.type){case"number":t.push(0);break;case"dimen":t.push({dimension:0,unit:"pt"});break;case"glue":t.push({glue:{dimension:0,unit:"pt"}});break;case"string":case"balanced-string":t.push("");break;case"delim":t.push(".");break;case"colspec":t.push("llllllllll");break;default:t.push(this.placeholder())}}i+=1}return[o,t]}parseArgument(n){var o,t;this.skipFiller(),"auto"===n&&(n=this.parseMode);let i=null,a="<{>"===this.peek();if(!a){if("delim"===n)return null!=(o=this.scanDelim())?o:".";if("text"===n||"math"===n){this.beginContext();let r=this.parseSimpleToken();return this.endContext(),r}}if(a&&this.get(),"text"===n||"math"===n){this.beginContext({mode:n});do{this.mathlist.push(...this.parse())}while(!this.match("<}>")&&!this.end())}else if(this.beginContext(),"string"===n?i=this.scanString():"balanced-string"===n?i=this.scanBalancedString():"number"===n?i=this.scanNumber():"colspec"===n?i=this.scanColspec():"dimen"===n?i=this.scanDimen():"glue"===n?i=this.scanGlue():"delim"===n&&(i=null!=(t=this.scanDelim())?t:"."),a&&this.skipUntilToken("<}>"),null===i)return this.endContext(),null;let s=this.mathlist;return this.endContext(),i??s}parseOptionalArgument(n){var o,t;if(n="auto"===n?this.parseMode:n,this.matchWhitespace(),!this.match("["))return null;let i=null;for(;!this.end()&&!this.match("]");)if("string"===n)i=this.scanString();else if("number"===n)i=this.scanNumber();else if("dimen"===n)i=this.scanDimen();else if("glue"===n)i=this.scanGlue();else if("colspec"===n)i=this.scanColspec();else if("bbox"===n){let a=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),s={};for(let r of a){let l=null==(t=(o=this.context).backgroundColorMap)?void 0:t.call(o,r);if(l)s.backgroundcolor=l;else{let c=r.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(c)s.padding=c[0];else{let d=r.match(/^\s*border\s*:\s*(.*)/);d&&(s.border=d[1])}}}i=s}else"math"===n&&(this.beginContext({mode:"math"}),i=this.mathlist.concat(this.parse(a=>"]"===a)),this.endContext());return i}parseCommand(n){var o,t,i,a,s,r,l;if("\\placeholder"===n){let y=this.parseOptionalArgument("string"),O=this.parseOptionalArgument("math"),N=null!=(o=this.parseArgument("string"))?o:void 0;return[new An(this.context,{mode:this.parseMode,placeholderId:y,value:N,default:O,style:this.style})]}let c=null;if("\\char"===n){let y=this.index,O=Math.floor(null!=(t=this.scanNumber(!0))?t:Number.NaN);(!Number.isFinite(O)||O<0||O>1114111)&&(O=10067);let N="\\char"+Hs(this.tokens.slice(y,this.index));return c=new Me("math"===this.parseMode?"mord":"text",this.context,{command:"\\char",mode:this.parseMode,value:String.fromCodePoint(O),serialize:()=>N}),c.verbatimLatex=N,[c]}if("\\hskip"===n||"\\kern"===n){let y=this.scanGlue();return y?[new Pa(n,this.style,this.context,y)]:null}if(c=this.scanMacro(n),c)return[c];let d=this.context.getDefinition(n,this.parseMode);if(!d)return this.onError({code:"unknown-command",arg:n}),[new Qu(n,this.context)];let f=this.index;if("symbol"===d.definitionType){let y=Ze({},this.style);d.variant&&(y.variant=d.variant),c=new Me(null!=(i=d.type)?i:"mop",this.context,{command:n,style:y,value:String.fromCodePoint(d.codepoint),mode:this.parseMode})}else{if(d.ifMode&&!d.ifMode.includes(this.parseMode))return[];let y=this.parseMode;d.applyMode&&(this.parseMode=d.applyMode);let[O,N]=this.parseArguments(d);if(this.parseMode=y,!N)return null;if(d.applyMode&&!d.applyStyle&&!d.createAtom)return N[0];if(d.infix)return this.onError({code:"too-many-infix-commands",arg:n}),null;if("function"==typeof d.createAtom)c=d.createAtom(n,N,this.style,this.context),O&&(c.body=null!=(a=this.parseArgument(O))?a:void 0);else if("function"==typeof d.applyStyle){let I=d.applyStyle(n,N,this.context),z=this.parseMode;if(d.applyMode&&(this.parseMode=d.applyMode),O){let $=this.style;this.style=Ze(Ze({},this.style),I);let Y=this.parseArgument(O);return this.style=$,this.parseMode=z,Y}this.style=Ze(Ze({},this.style),I),this.parseMode=z}else c=new Me("mop",this.context,{command:null!=(s=d.command)?s:n,style:Ze({},this.style),value:n,mode:null!=(r=d.applyMode)?r:this.parseMode})}if(c instanceof Me&&void 0===c.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(n)&&(c.verbatimLatex=(null!=(l=c.command)?l:"")+Hs(this.tokens.slice(f,this.index)),0===c.verbatimLatex.length&&(c.verbatimLatex=void 0),c.isFunction&&this.smartFence)){let y=this.scanSmartFence();if(y)return[c,y]}return c?[c]:null}parseLiteral(n){let o=ia.createAtom(this.parseMode,n,this.context,Ze({},this.style));if(!o)return null;if(o.isFunction&&this.smartFence){let t=this.scanSmartFence();if(t)return[o,t]}return[o]}parseSimpleToken(){let n=this.get();return n?"<space>"===n?"text"===this.parseMode?[new _s(" "," ",this.style,this.context)]:null:n.startsWith("\\")?this.parseCommand(n):Il(n)?this.parseLiteral(n):(this.onError("<}>"===n?{latex:"",code:"unbalanced-braces"}:{latex:"",code:"unexpected-token",arg:n}),null):null}scanMacro(n){var o;let t=this.context.getMacro(n);if(!t)return null;let i=this.index,a=t.args,s={"?":null==(o=this.args)?void 0:o.call(this,"?")};for(let r=1;r<=a;r++)s[r]=this.matchLiteralArg();return new qu(n,this.context,{expand:t.expand,captureSelection:t.captureSelection,args:Hs(this.tokens.slice(i,this.index)),body:pi(t.def,this.context,{parseMode:this.parseMode,args:r=>s[r],mathstyle:this.currentContext.mathstyle})})}parseToken(){var n,o,t,i;let a=null!=(i=null!=(t=null!=(o=null!=(n=this.parseEnvironment())?n:this.parseModeShift())?o:this.parseModeSet())?t:this.parseGroup())?i:this.parseLeftRight();if(null===a){if(this.parseSupSub()||this.parseLimits())return!0;a=this.parseSimpleToken()}return Bn(a)?this.mathlist.push(...a):a&&this.mathlist.push(a),null!==a}};function pi(n,o,t){var i,a,s;let r=null!=(i=t?.args)?i:null,l=new Ll(ds(n,r),o,{args:r,mathstyle:null!=(a=t?.mathstyle)?a:"displaystyle",parseMode:null!=(s=t?.parseMode)?s:"math"}),c=[];for(;!l.end();)c.push(...l.parse());return c}function P9(n,o,t){return"object"==typeof n&&"glue"in n?n:"object"==typeof n&&"dimension"in n?{glue:n}:"number"==typeof n?{glue:{dimension:n}}:new Ll(ds(n),o,{registers:t}).scanGlue()}function Zl(n,o,t){return"number"==typeof n?{dimension:n,unit:"pt"}:("object"==typeof n&&"glue"in n&&(n=n.glue),"object"==typeof n&&"dimension"in n?n:new Ll(ds(n),o,{registers:t}).scanDimen())}var ja=class extends Me{constructor(n,o,t,i){super("box",t,{command:n,serialize:i.serialize,style:i.style}),this.body=o,this.framecolor=i.framecolor,this.verbatimFramecolor=i.verbatimBackgroundcolor,this.backgroundcolor=i.backgroundcolor,this.verbatimBackgroundcolor=i.verbatimBackgroundcolor,this.padding=i.padding,this.border=i.border}static fromJson(n,o){return new ja(n.command,n.body,o,n)}toJson(){return kt(Ze({},super.toJson()),{framecolor:this.framecolor,verbatimFramecolor:this.verbatimFramecolor,backgroundcolor:this.backgroundcolor,verbatimBackgroundcolor:this.verbatimBackgroundcolor,padding:this.padding,border:this.border})}render(n){let o=new Tt(n,this.style),t=yo(o.getRegisterAsDimension("fboxsep")),i=void 0===this.padding?t:yo(Zl(this.padding,kt(Ze({},this.context),{registers:n.registers}))),a=Me.createBox(n,this.body);if(!a)return null;a.setStyle("vertical-align",-a.height,"em");let s=new Re(a,{type:"mord"}),r=new Re(null,{classes:"ML__box"});r.height=s.height+i,r.depth=s.depth+i,r.setStyle("box-sizing","border-box"),r.setStyle("position","absolute"),r.setStyle("height",s.height+s.depth+2*i,"em"),0===i?r.setStyle("width","100%"):(r.setStyle("width",`calc(100% + ${2*i}em)`),r.setStyle("top",t,"em"),r.setStyle("left",-i,"em")),this.backgroundcolor&&r.setStyle("background-color",this.backgroundcolor),this.framecolor&&r.setStyle("border",`${yo(o.getRegisterAsDimension("fboxrule"))}em solid ${this.framecolor}`),this.border&&r.setStyle("border",this.border),s.setStyle("display","inline-block"),s.setStyle("height",a.height+a.depth,"em"),s.setStyle("vertical-align",-i,"em");let l=new Re([r,s]);return l.setStyle("position","relative"),l.setStyle("display","inline-block"),l.setStyle("line-height",0),l.height=s.height+i,l.depth=s.depth+i,l.left=i,l.right=i,l.setStyle("height",s.height+i,"em"),l.setStyle("top",s.depth-s.height,"em"),l.setStyle("vertical-align",s.depth+i,"em"),this.caret&&(l.caret=this.caret),this.attachSupsub(n,{base:l})}},hn=class extends Me{constructor(n,o,t,i,a={}){var s,r;super("array",n),this.environmentName=o,this.rowGaps=i,a.mathstyleName&&(this.mathstyleName=a.mathstyleName),a.columns&&(this.colFormat=0===a.columns.length?[{align:"l"}]:a.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function j9(n,o,t,i){let a=0;for(let f of i)"align"in f&&(a+=1);let s=0,r=[];for(let f of t){let y=0;for(s=Math.max(s,Math.min(f.length,a));y<f.length;){let O=[],N=Math.min(f.length,y+a);for(;y<N;)O.push(0===f[y].length?[new Me("first",n,{mode:o.mode})]:"first"!==f[y][0].type?[new Me("first",n,{mode:o.mode}),...f[y]]:f[y]),y+=1;r.push(O)}}1===r[r.length-1].length&&0===r[r.length-1][0].length&&r.pop();let l=[];for(let f of r){if(f.length!==s)for(let y=f.length;y<s;y++)f.push([new Me("first",n,{mode:o.mode}),new An(n)]);l.push(f)}let c=0,d=0;for(let f of l){d=0;for(let y of f){for(let O of y)O.parent=o,O.treeBranch=[c,d];d+=1}c+=1}return o.isDirty=!0,l}(n,this,t,this.colFormat),a.leftDelim&&(this.leftDelim=a.leftDelim),a.rightDelim&&(this.rightDelim=a.rightDelim),void 0!==a.jot&&(this.jot=a.jot),a.arraycolsep&&(this.arraycolsep=a.arraycolsep),this.colSeparationType=a.colSeparationType,this.arraystretch=null!=(s=a.arraystretch)?s:1,this.minColumns=null!=(r=a.minColumns)?r:1}static fromJson(n,o){return new hn(o,n.environmentName,n.array,n.rowGaps,n)}toJson(){let n=kt(Ze({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(o=>o.map(t=>t.map(i=>i.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return 1!==this.arraystretch&&(n.arraystretch=this.arraystretch),this.arraycolsep&&(n.arraycolsep=this.arraycolsep),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),void 0!==this.jot&&(n.jot=this.jot),n}branch(n){var o;if(Sl(n))return null!=(o=this.array[n[0]][n[1]])?o:void 0}get branches(){let n=super.branches;return this.array.forEach((o,t)=>{this.array[t].forEach((i,a)=>{this.array[t][a]&&n.push([t,a])})}),n}createBranch(n){var o;return Sl(n)?(this.isDirty=!0,null!=(o=this.branch(n))?o:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(n=>!!n.align).length}removeBranch(n){if(La(n))return super.removeBranch(n);let o=this.branch(n);return this.array[n[0]][n[1]]=void 0,o.forEach(t=>{t.parent=void 0,t.treeBranch=void 0}),o.shift(),this.isDirty=!0,o}get hasChildren(){return this.children.length>0}get children(){let n=[];for(let o of this.array)for(let t of o)if(t)for(let i of t)n.push(...i.children),n.push(i);return[...n,...super.children]}render(n){var o,t,i,a,s;let r=new Tt(n,this.style,this.mathstyleName),l=r.getRegisterAsEm("arrayrulewidth"),c=r.getRegisterAsEm("arraycolsep"),d=r.getRegisterAsEm("doublerulesep"),f=null!=(o=this.arraystretch)?o:1,y="number"==typeof this.arraycolsep?this.arraycolsep:c;"small"===this.colSeparationType&&(y=new Tt(n,void 0,"scriptstyle").scalingFactor/n.scalingFactor*.2778);let O=1.2*f,N=.7*O,I=.3*O,z=0,$=[],Y=0,V=this.array.length;for(let ve=0;ve<V;++ve){let Nt=this.array[ve];Y=Math.max(Y,Nt.length);let At=new Tt(r,this.style,this.mathstyleName),rn=N/At.scalingFactor,Qt=I/At.scalingFactor,Ot={cells:[],height:0,depth:0,pos:0};for(let vt of Nt){let Lt=null!=(t=Me.createBox(At,vt,{newList:!0}))?t:new Re(null,{newList:!0});Qt=Math.max(Qt,Lt.depth),rn=Math.max(rn,Lt.height),Ot.cells.push(Lt)}let mt=null!=(i=yo(this.rowGaps[ve]))?i:0;mt>0&&(mt+=I,Qt=Math.max(Qt,mt),mt=0),void 0!==this.jot&&(Qt+=this.jot),Ot.height=rn,Ot.depth=Qt,z+=rn,Ot.pos=z,z+=Qt+mt,$.push(Ot)}let te=z/2+to,K=[];for(let ve=0;ve<Y;ve++){let Nt=[];for(let At of $){let rn=At.cells[ve];rn.depth=At.depth,rn.height=At.height,Nt.push({box:rn,shift:At.pos-te})}Nt.length>0&&K.push(new Pn({individualShift:Nt}))}let X=[],ye=!1,ae=!1,oe=0,pe=!this.leftDelim,{colFormat:je}=this;for(let ve of je){if("align"in ve&&oe>=K.length)break;if("align"in ve)ye?X.push(jl(2*y)):(ae||pe)&&X.push(jl(y)),X.push(new Re(K[oe],{classes:"col-align-"+ve.align})),oe++,ye=!0,ae=!1,pe=!1;else if("gap"in ve){if("number"==typeof ve.gap)X.push(jl(ve.gap));else{let Nt=D9(n,$,te,ve.gap);Nt&&X.push(Nt)}ye=!1,ae=!1,pe=!1}else if("separator"in ve){let Nt=new Re(null,{classes:"vertical-separator"});Nt.setStyle("height",z,"em"),Nt.setStyle("border-right",`${l}em ${ve.separator} currentColor`),Nt.setStyle("vertical-align",-(z-te),"em");let At=0;ae?At=d-l:ye&&(At=y-l),Nt.left=At,X.push(Nt),ye=!1,ae=!0,pe=!1}}ye&&!this.rightDelim&&X.push(jl(y));let Le=new Re(X,{classes:"mtable"});if(!(this.leftDelim&&"."!==this.leftDelim||this.rightDelim&&"."!==this.rightDelim))return this.caret&&(Le.caret=this.caret),Le;let st=Le.height,rt=Le.depth,sn=this.bind(n,new Re([this.bind(n,Ys("mopen",null!=(a=this.leftDelim)?a:".",st,rt,r)),Le,this.bind(n,Ys("mclose",null!=(s=this.rightDelim)?s:".",st,rt,r))],{type:"mord"}));return sn?(this.caret&&(sn.caret=this.caret),this.attachSupsub(n,{base:sn})):null}serialize(n){let o="\\begin{"+this.environmentName+"}";if("array"===this.environmentName){if(o+="{",void 0!==this.colFormat)for(let t of this.colFormat)"align"in t?o+=t.align:"separator"in t&&"solid"===t.separator?o+="|":"separator"in t&&"dashed"===t.separator&&(o+=":");o+="}"}for(let t=0;t<this.array.length;t++){for(let i=0;i<this.array[t].length;i++)i>0&&(o+=" & "),o=wn([o,Me.serialize(this.array[t][i],n)]);t<this.array.length-1&&(o+=" \\\\ ")}return o+="\\end{"+this.environmentName+"}",o}getCell(n,o){return this.array[n][o]}setCell(n,o,t){"array"===this.type&&Array.isArray(this.array);for(let a of this.array[n][o])a.parent=void 0,a.treeBranch=void 0;let i=t;(0===t.length||"first"!==t[0].type)&&(i=[new Me("first",this.context,{mode:this.mode}),...t]),this.array[n][o]=i;for(let a of i)a.parent=this,a.treeBranch=[n,o];this.isDirty=!0}addRowBefore(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let t=0;t<this.colCount;t++)o.push(Pl(this));this.array.splice(n,0,o);for(let t=n;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let s of a)s.treeBranch=[t,i]}this.isDirty=!0}addRowAfter(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let t=0;t<this.colCount;t++)o.push(Pl(this));this.array.splice(n+1,0,o);for(let t=n+1;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let s of a)s.treeBranch=[t,i]}this.isDirty=!0}removeRow(n){"array"===this.type&&Array.isArray(this.array);let o=this.array.splice(n,1);for(let t of o)for(let i of t)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0;for(let t=n;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let s of a)s.treeBranch=[t,i]}this.isDirty=!0}addColumnBefore(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n,0,Pl(this));for(let o=0;o<this.rowCount;o++)for(let t=n;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}addColumnAfter(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n+1,0,Pl(this));for(let o=0;o<this.rowCount;o++)for(let t=n+1;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array){let t=o.splice(n,1);for(let i of t)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0}for(let o=0;o<this.rowCount;o++)for(let t=n;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}get cells(){let n=[];for(let o of this.array)for(let t of o)t&&n.push(t);return n}};function Pl(n){let o=new Me("first",n.context,{mode:n.mode});o.parent=n;let t=new An(n.context,{mode:n.mode});return t.parent=n,[o,t]}function jl(n){let o=new Re(null,{classes:"arraycolsep"});return o.width=n,o}function D9(n,o,t,i){if(!i)return null;let a=[];for(let s of o){let r=Me.createBox(n,i,{newList:!0});r&&(r.depth=s.depth,r.height=s.height,a.push({box:r,shift:s.pos-t}))}return new Pn({individualShift:a}).wrap(n)}var Fu=class extends Me{constructor(n,o,t){var i;super("composition",o,{mode:null!=(i=t?.mode)?i:"math",value:n})}static fromJson(n,o){return new Fu(n.value,o,n)}toJson(){return super.toJson()}get computedStyle(){return{}}render(n){let o=new Re(this.value,{classes:"ML__composition",type:"composition"});return this.bind(n,o),this.caret&&(o.caret=this.caret),o}serialize(n){return""}},Uu=class extends Me{constructor(n,o,t){super("chem",t,{command:n,mode:"math"});let i=un.go(Pe.go(o,"\\pu"===n?"pu":"ce"),!1);this.body=pi(i,t),this.verbatimLatex=n+"{"+o+"}",this.arg=o,this.captureSelection=!0}static fromJson(n,o){return new Uu(n.command,n.arg,o)}toJson(){return kt(Ze({},super.toJson()),{arg:this.arg})}render(n){let o=Me.createBox(n,this.body,{type:"chem",newList:!0});return this.caret&&(o.caret=this.caret),this.bind(n,o)}serialize(n){return this.verbatimLatex}};Ee(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(n,o,t,i)=>new Uu(n,o[0],i)});var Pe={go:function(n,o){if(!n)return[];void 0===o&&(o="ce");var t="0",i={parenthesisLevel:0};n=(n=(n=n.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var a,s=10,r=[];;){a!==n?(s=10,a=n):s--;var l=Pe.stateMachines[o],c=l.transitions[t]||l.transitions["*"];e:for(var d=0;d<c.length;d++){var f=Pe.patterns.match_(c[d].pattern,n);if(f){for(var y=c[d].task,O=0;O<y.action_.length;O++){var N;if(l.actions[y.action_[O].type_])N=l.actions[y.action_[O].type_](i,f.match_,y.action_[O].option);else{if(!Pe.actions[y.action_[O].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+y.action_[O].type_+")"];N=Pe.actions[y.action_[O].type_](i,f.match_,y.action_[O].option)}Pe.concatArray(r,N)}if(t=y.nextState||t,!(n.length>0))return r;if(y.revisit||(n=f.remainder),!y.toContinue)break e}}if(s<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(n,o){if(o)if(Array.isArray(o))for(var t=0;t<o.length;t++)n.push(o[t]);else n.push(o)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"(-)(9)^(-9)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"state of aggregation $":function(n){var o=Pe.patterns.findObserveGroups(n,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(o&&o.remainder.match(/^($|[\s,;\)\]\}])/))return o;var t=n.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return t?{match_:t[0],remainder:n.substr(t[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"^{","","","}")},"^($...$)":function(n){return Pe.patterns.findObserveGroups(n,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(n){return Pe.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(n){return Pe.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"_{","","","}")},"_($...$)":function(n){return Pe.patterns.findObserveGroups(n,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(n){return Pe.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(n){return Pe.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(n){return Pe.patterns.findObserveGroups(n,"","{","}","")},"{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"{","","","}")},"$...$":function(n){return Pe.patterns.findObserveGroups(n,"","$","$","")},"${(...)}$":function(n){return Pe.patterns.findObserveGroups(n,"${","","","}$")},"$(...)$":function(n){return Pe.patterns.findObserveGroups(n,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(n){return Pe.patterns.findObserveGroups(n,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(n){return Pe.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(n){return Pe.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(n){return Pe.patterns.findObserveGroups(n,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(n){return Pe.patterns.findObserveGroups(n,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(n){return Pe.patterns.findObserveGroups(n,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(n){return Pe.patterns.findObserveGroups(n,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(n){var o;if(o=n.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:o[0],remainder:n.substr(o[0].length)};var t=Pe.patterns.findObserveGroups(n,"","$","$","");return t&&(o=t.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:o[0],remainder:n.substr(o[0].length)}:null},amount2:function(n){return this.amount(n)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(n){if(n.match(/^\([a-z]+\)$/))return null;var o=n.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return o?{match_:o[0],remainder:n.substr(o[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(n,o,t,i,a,s,r,l,c,d){var f=function(Y,V){if("string"==typeof V)return 0!==Y.indexOf(V)?null:V;var te=Y.match(V);return te?te[0]:null},O=f(n,o);if(null===O||(n=n.substr(O.length),null===(O=f(n,t))))return null;var N=function(Y,V,te){for(var K=0;V<Y.length;){var X=Y.charAt(V),ye=f(Y.substr(V),te);if(null!==ye&&0===K)return{endMatchBegin:V,endMatchEnd:V+ye.length};if("{"===X)K++;else if("}"===X){if(0===K)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];K--}V++}return null}(n,O.length,i||a);if(null===N)return null;var I=n.substring(0,i?N.endMatchEnd:N.endMatchBegin);if(s||r){var z=this.findObserveGroups(n.substr(N.endMatchEnd),s,r,l,c);if(null===z)return null;var $=[I,z.match_];return{match_:d?$.join(""):$,remainder:z.remainder}}return{match_:I,remainder:n.substr(N.endMatchEnd)}},match_:function(n,o){var t=Pe.patterns.patterns[n];if(void 0===t)throw["MhchemBugP","mhchem bug P. Please report. ("+n+")"];if("function"==typeof t)return Pe.patterns.patterns[n](o);var i=o.match(t);return i?{match_:i[2]?[i[1],i[2]]:i[1]?i[1]:i[0],remainder:o.substr(i[0].length)}:null}},actions:{"a=":function(n,o){n.a=(n.a||"")+o},"b=":function(n,o){n.b=(n.b||"")+o},"p=":function(n,o){n.p=(n.p||"")+o},"o=":function(n,o){n.o=(n.o||"")+o},"q=":function(n,o){n.q=(n.q||"")+o},"d=":function(n,o){n.d=(n.d||"")+o},"rm=":function(n,o){n.rm=(n.rm||"")+o},"text=":function(n,o){n.text_=(n.text_||"")+o},insert:function(n,o,t){return{type_:t}},"insert+p1":function(n,o,t){return{type_:t,p1:o}},"insert+p1+p2":function(n,o,t){return{type_:t,p1:o[0],p2:o[1]}},copy:function(n,o){return o},rm:function(n,o){return{type_:"rm",p1:o||""}},text:function(n,o){return Pe.go(o,"text")},"{text}":function(n,o){var t=["{"];return Pe.concatArray(t,Pe.go(o,"text")),t.push("}"),t},"tex-math":function(n,o){return Pe.go(o,"tex-math")},"tex-math tight":function(n,o){return Pe.go(o,"tex-math tight")},bond:function(n,o,t){return{type_:"bond",kind_:t||o}},"color0-output":function(n,o){return{type_:"color0",color:o[0]}},ce:function(n,o){return Pe.go(o)},"1/2":function(n,o){var t=[];o.match(/^[+\-]/)&&(t.push(o.substr(0,1)),o=o.substr(1));var i=o.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return i[1]=i[1].replace(/\$/g,""),t.push({type_:"frac",p1:i[1],p2:i[2]}),i[3]&&(i[3]=i[3].replace(/\$/g,""),t.push({type_:"tex-math",p1:i[3]})),t},"9,9":function(n,o){return Pe.go(o,"9,9")}},createTransitions:function(n){var o,t,i,a,s={};for(o in n)for(t in n[o])for(i=t.split("|"),n[o][t].stateArray=i,a=0;a<i.length;a++)s[i[a]]=[];for(o in n)for(t in n[o])for(i=n[o][t].stateArray||[],a=0;a<i.length;a++){var r=n[o][t];if(r.action_){r.action_=[].concat(r.action_);for(var l=0;l<r.action_.length;l++)"string"==typeof r.action_[l]&&(r.action_[l]={type_:r.action_[l]})}else r.action_=[];for(var c=o.split("|"),d=0;d<c.length;d++)if("*"===i[a])for(var f in s)s[f].push({pattern:c[d],task:r});else s[i[a]].push({pattern:c[d],task:r})}return s},stateMachines:{}};Pe.stateMachines={ce:{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(n,o){var t;if((n.d||"").match(/^[0-9]+$/)){var i=n.d;n.d=void 0,t=this.output(n),n.b=i}else t=this.output(n);return Pe.actions["o="](n,o),t},"d= kv":function(n,o){n.d=o,n.dType="kv"},"charge or bond":function(n,o){if(n.beginsWithBond){var t=[];return Pe.concatArray(t,this.output(n)),Pe.concatArray(t,Pe.actions.bond(n,o,"-")),t}n.d=o},"- after o/d":function(n,o,t){var i=Pe.patterns.match_("orbital",n.o||""),a=Pe.patterns.match_("one lowercase greek letter $",n.o||""),s=Pe.patterns.match_("one lowercase latin letter $",n.o||""),r=Pe.patterns.match_("$one lowercase latin letter$ $",n.o||""),l="-"===o&&(i&&""===i.remainder||a||s||r);l&&!n.a&&!n.b&&!n.p&&!n.d&&!n.q&&!i&&s&&(n.o="$"+n.o+"$");var c=[];return l?(Pe.concatArray(c,this.output(n)),c.push({type_:"hyphen"})):(i=Pe.patterns.match_("digits",n.d||""),t&&i&&""===i.remainder?(Pe.concatArray(c,Pe.actions["d="](n,o)),Pe.concatArray(c,this.output(n))):(Pe.concatArray(c,this.output(n)),Pe.concatArray(c,Pe.actions.bond(n,o,"-")))),c},"a to o":function(n){n.o=n.a,n.a=void 0},"sb=true":function(n){n.sb=!0},"sb=false":function(n){n.sb=!1},"beginsWithBond=true":function(n){n.beginsWithBond=!0},"beginsWithBond=false":function(n){n.beginsWithBond=!1},"parenthesisLevel++":function(n){n.parenthesisLevel++},"parenthesisLevel--":function(n){n.parenthesisLevel--},"state of aggregation":function(n,o){return{type_:"state of aggregation",p1:Pe.go(o,"o")}},comma:function(n,o){var t=o.replace(/\s*$/,"");return t!==o&&0===n.parenthesisLevel?{type_:"comma enumeration L",p1:t}:{type_:"comma enumeration M",p1:t}},output:function(n,o,t){var i,a,s;for(var r in n.r?(a="M"===n.rdt?Pe.go(n.rd,"tex-math"):"T"===n.rdt?[{type_:"text",p1:n.rd||""}]:Pe.go(n.rd),s="M"===n.rqt?Pe.go(n.rq,"tex-math"):"T"===n.rqt?[{type_:"text",p1:n.rq||""}]:Pe.go(n.rq),i={type_:"arrow",r:n.r,rd:a,rq:s}):(i=[],!n.a&&!n.b&&!n.p&&!n.o&&!n.q&&!n.d&&!t||(n.sb&&i.push({type_:"entitySkip"}),n.o||n.q||n.d||n.b||n.p||2===t?n.o||n.q||n.d||!n.b&&!n.p?n.o&&"kv"===n.dType&&Pe.patterns.match_("d-oxidation$",n.d||"")?n.dType="oxidation":n.o&&"kv"===n.dType&&!n.q&&(n.dType=void 0):(n.o=n.a,n.d=n.b,n.q=n.p,n.a=n.b=n.p=void 0):(n.o=n.a,n.a=void 0),i.push({type_:"chemfive",a:Pe.go(n.a,"a"),b:Pe.go(n.b,"bd"),p:Pe.go(n.p,"pq"),o:Pe.go(n.o,"o"),q:Pe.go(n.q,"pq"),d:Pe.go(n.d,"oxidation"===n.dType?"oxidation":"bd"),dType:n.dType}))),n)"parenthesisLevel"!==r&&"beginsWithBond"!==r&&delete n[r];return i},"oxidation-output":function(n,o){var t=["{"];return Pe.concatArray(t,Pe.go(o,"oxidation")),t.push("}"),t},"frac-output":function(n,o){return{type_:"frac-ce",p1:Pe.go(o[0]),p2:Pe.go(o[1])}},"overset-output":function(n,o){return{type_:"overset",p1:Pe.go(o[0]),p2:Pe.go(o[1])}},"underset-output":function(n,o){return{type_:"underset",p1:Pe.go(o[0]),p2:Pe.go(o[1])}},"underbrace-output":function(n,o){return{type_:"underbrace",p1:Pe.go(o[0]),p2:Pe.go(o[1])}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Pe.go(o[1])}},"r=":function(n,o){n.r=o},"rdt=":function(n,o){n.rdt=o},"rd=":function(n,o){n.rd=o},"rqt=":function(n,o){n.rqt=o},"rq=":function(n,o){n.rq=o},operator:function(n,o,t){return{type_:"operator",kind_:t||o}}}},a:{transitions:Pe.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Pe.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(n){if(n.text_){var o={type_:"text",p1:n.text_};for(var t in n)delete n[t];return o}}}},pq:{transitions:Pe.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(n,o){return{type_:"state of aggregation subscript",p1:Pe.go(o,"o")}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Pe.go(o[1],"pq")}}}},bd:{transitions:Pe.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Pe.go(o[1],"bd")}}}},oxidation:{transitions:Pe.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(n,o){return{type_:"roman numeral",p1:o||""}}}},"tex-math":{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var t in n)delete n[t];return o}}}},"tex-math tight":{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(n,o){n.o=(n.o||"")+"{"+o+"}"},output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var t in n)delete n[t];return o}}}},"9,9":{transitions:Pe.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(n,o){var t=[];return"+-"===o[0]||"+/-"===o[0]?t.push("\\pm "):o[0]&&t.push(o[0]),o[1]&&(Pe.concatArray(t,Pe.go(o[1],"pu-9,9")),o[2]&&(o[2].match(/[,.]/)?Pe.concatArray(t,Pe.go(o[2],"pu-9,9")):t.push(o[2])),o[3]=o[4]||o[3],o[3]&&(o[3]=o[3].trim(),"e"===o[3]||"*"===o[3].substr(0,1)?t.push({type_:"cdot"}):t.push({type_:"times"}))),o[3]&&t.push("10^{"+o[5]+"}"),t},"number^":function(n,o){var t=[];return"+-"===o[0]||"+/-"===o[0]?t.push("\\pm "):o[0]&&t.push(o[0]),Pe.concatArray(t,Pe.go(o[1],"pu-9,9")),t.push("^{"+o[2]+"}"),t},operator:function(n,o,t){return{type_:"operator",kind_:t||o}},space:function(){return{type_:"pu-space-1"}},output:function(n){var o,t=Pe.patterns.match_("{(...)}",n.d||"");t&&""===t.remainder&&(n.d=t.match_);var i=Pe.patterns.match_("{(...)}",n.q||"");if(i&&""===i.remainder&&(n.q=i.match_),n.d&&(n.d=n.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.d=n.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),n.q){n.q=n.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.q=n.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:Pe.go(n.d,"pu"),q:Pe.go(n.q,"pu")};"//"===n.o?o={type_:"pu-frac",p1:a.d,p2:a.q}:((o=a.d).push(a.d.length>1||a.q.length>1?{type_:" / "}:{type_:"/"}),Pe.concatArray(o,a.q))}else o=Pe.go(n.d,"pu-2");for(var s in n)delete n[s];return o}}},"pu-2":{transitions:Pe.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(n,o){n.rm+="^{"+o+"}"},space:function(){return{type_:"pu-space-2"}},output:function(n){var o=[];if(n.rm){var t=Pe.patterns.match_("{(...)}",n.rm||"");o=t&&""===t.remainder?Pe.go(t.match_,"pu"):{type_:"rm",p1:n.rm}}for(var i in n)delete n[i];return o}}},"pu-9,9":{transitions:Pe.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){var t=n.text_.length%3;0===t&&(t=3);for(var i=n.text_.length-3;i>0;i-=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(0,t)),o.reverse()}else o.push(n.text_);for(var a in n)delete n[a];return o},"output-o":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){for(var t=n.text_.length-3,i=0;i<t;i+=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(i))}else o.push(n.text_);for(var a in n)delete n[a];return o}}}};var ra,un={go:function(n,o){if(!n)return"";for(var t="",i=!1,a=0;a<n.length;a++){var s=n[a];"string"==typeof s?t+=s:(t+=un._go2(s),"1st-level escape"===s.type_&&(i=!0))}return!o&&!i&&t&&(t="{"+t+"}"),t},_goInner:function(n){return n&&un.go(n,!0)},_go2:function(n){var o;switch(n.type_){case"chemfive":o="";var t={a:un._goInner(n.a),b:un._goInner(n.b),p:un._goInner(n.p),o:un._goInner(n.o),q:un._goInner(n.q),d:un._goInner(n.d)};t.a&&(t.a.match(/^[+\-]/)&&(t.a="{"+t.a+"}"),o+=t.a+"\\,"),(t.b||t.p)&&(o+="{\\vphantom{X}}",o+="^{\\hphantom{"+(t.b||"")+"}}_{\\hphantom{"+(t.p||"")+"}}",o+="{\\vphantom{X}}",o+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(t.b||"")+"}}",o+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(t.p||"")+"}}}"),t.o&&(t.o.match(/^[+\-]/)&&(t.o="{"+t.o+"}"),o+=t.o),"kv"===n.dType?((t.d||t.q)&&(o+="{\\vphantom{X}}"),t.d&&(o+="^{"+t.d+"}"),t.q&&(o+="_{\\smash[t]{"+t.q+"}}")):"oxidation"===n.dType?(t.d&&(o+="{\\vphantom{X}}",o+="^{"+t.d+"}"),t.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+t.q+"}}")):(t.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+t.q+"}}"),t.d&&(o+="{\\vphantom{X}}",o+="^{"+t.d+"}"));break;case"rm":case"roman numeral":o="\\mathrm{"+n.p1+"}";break;case"text":n.p1.match(/[\^_]/)?(n.p1=n.p1.replace(" ","~").replace("-","\\text{-}"),o="\\mathrm{"+n.p1+"}"):o="\\text{"+n.p1+"}";break;case"state of aggregation":o="\\mskip2mu "+un._goInner(n.p1);break;case"state of aggregation subscript":o="\\mskip1mu "+un._goInner(n.p1);break;case"bond":if(!(o=un._getBond(n.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+n.kind_+")"];break;case"frac":var i="\\frac{"+n.p1+"}{"+n.p2+"}";o="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"pu-frac":var a="\\frac{"+un._goInner(n.p1)+"}{"+un._goInner(n.p2)+"}";o="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":o=n.p1+" ";break;case"frac-ce":o="\\frac{"+un._goInner(n.p1)+"}{"+un._goInner(n.p2)+"}";break;case"overset":o="\\overset{"+un._goInner(n.p1)+"}{"+un._goInner(n.p2)+"}";break;case"underset":o="\\underset{"+un._goInner(n.p1)+"}{"+un._goInner(n.p2)+"}";break;case"underbrace":o="\\underbrace{"+un._goInner(n.p1)+"}_{"+un._goInner(n.p2)+"}";break;case"color":o="{\\color{"+n.color1+"}{"+un._goInner(n.color2)+"}}";break;case"color0":o="\\color{"+n.color+"}";break;case"arrow":var s={rd:un._goInner(n.rd),rq:un._goInner(n.rq)},r="\\x"+un._getArrow(n.r);s.rq&&(r+="[{"+s.rq+"}]"),o=r+=s.rd?"{"+s.rd+"}":"{}";break;case"operator":o=un._getOperator(n.kind_);break;case"space":o=" ";break;case"entitySkip":case"pu-space-1":o="~";break;case"pu-space-2":o="\\mkern3mu ";break;case"1000 separator":o="\\mkern2mu ";break;case"commaDecimal":o="{,}";break;case"comma enumeration L":o="{"+n.p1+"}\\mkern6mu ";break;case"comma enumeration M":o="{"+n.p1+"}\\mkern3mu ";break;case"comma enumeration S":o="{"+n.p1+"}\\mkern1mu ";break;case"hyphen":o="\\text{-}";break;case"addition compound":o="\\,{\\cdot}\\,";break;case"electron dot":o="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":o="{\\times}";break;case"prime":o="\\prime ";break;case"cdot":o="\\cdot ";break;case"tight cdot":o="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":o="\\times ";break;case"circa":o="{\\sim}";break;case"^":o="uparrow";break;case"v":o="downarrow";break;case"ellipsis":o="\\ldots ";break;case"/":o="/";break;case" / ":o="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return o},_getArrow:function(n){switch(n){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(n){switch(n){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(n){switch(n){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},Ru=class extends Me{constructor(n,o,t,i){super("delim",t,{command:n,style:i?.style}),this.value=o,this.size=i?.size}static fromJson(n,o){return new Ru(n.command,n.delim,o,n)}toJson(){return kt(Ze({},super.toJson()),{delim:this.value,size:this.size})}render(n){let o=new Re(null);return o.delim=this.value,o}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},Bu=class extends Me{constructor(n,o,t,i){super("sizeddelim",t,{command:n,style:i.style}),this.value=o,this.delimClass=i.delimClass,this.size=i.size}static fromJson(n,o){return new Bu(n.command,n.delim,o,n)}toJson(){return kt(Ze({},super.toJson()),{delim:this.value,size:this.size,delimClass:this.delimClass})}render(n){let o=function O9(n,o,t,i){var a;return void 0===n||"."===n?Za(t,null!=(a=i.type)?a:"minner",i.classes):("<"===n||"\\lt"===n||"\u27e8"===n?n="\\langle":(">"===n||"\\gt"===n||"\u27e9"===n)&&(n="\\rangle"),__.has(n)||p_.has(n)?d_(n,o,!1,t,i):T9.has(n)?m_(n,A9[o],!1,t,i):null)}(this.value,this.size,n,{classes:this.delimClass});return o?(o=this.bind(n,o),this.caret&&(o.caret=this.caret),o):null}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},ps=class extends Me{constructor(n,o,t,i,a){super("enclose",i,{command:n,style:a.style}),this.body=o,this.backgroundcolor=a.backgroundcolor,t.updiagonalarrow&&(t.updiagonalstrike=!1),t.box&&(t.left=!1,t.right=!1,t.bottom=!1,t.top=!1),this.notation=t,this.shadow=a.shadow,this.strokeWidth=a.strokeWidth,this.strokeStyle=a.strokeStyle,this.svgStrokeStyle=a.svgStrokeStyle,this.strokeColor=a.strokeColor,this.borderStyle=a.borderStyle,this.padding=a.padding,this.captureSelection=!0}static fromJson(n,o){return new ps(n.command,n.body,n.notation,o,n)}toJson(){let n={};return this.notation.downdiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.verticalstrike&&(n.downdiagonalstrike=!0),this.notation.horizontalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalarrow&&(n.downdiagonalstrike=!0),this.notation.right&&(n.downdiagonalstrike=!0),this.notation.bottom&&(n.downdiagonalstrike=!0),this.notation.left&&(n.downdiagonalstrike=!0),this.notation.top&&(n.downdiagonalstrike=!0),this.notation.circle&&(n.downdiagonalstrike=!0),this.notation.roundedbox&&(n.downdiagonalstrike=!0),this.notation.madruwb&&(n.downdiagonalstrike=!0),this.notation.actuarial&&(n.downdiagonalstrike=!0),this.notation.box&&(n.downdiagonalstrike=!0),kt(Ze({},super.toJson()),{notation:n,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}serialize(n){var o;let t=null!=(o=this.command)?o:"";if("\\enclose"===this.command){t+="{"+Object.keys(this.notation).join(" ")+"}";let i="",a="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(i+=a+'mathbackground="'+this.backgroundcolor+'"',a=","),this.shadow&&"auto"!==this.shadow&&(i+=a+'shadow="'+this.shadow+'"',a=","),this.strokeWidth||"solid"!==this.strokeStyle?(i+=a+this.borderStyle,a=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(i+=a+'mathcolor="'+this.strokeColor+'"',a=","),i&&(t+=`[${i}]`)}return t+=`{${this.bodyToLatex(n)}}`,t}render(n){var o;let t=new Tt(n,this.style),i=Me.createBox(t,this.body);if(!i)return null;let a=null!=(o=yo(this.padding&&"auto"!==this.padding?Zl(this.padding,kt(Ze({},this.context),{registers:n.registers})):t.getRegisterAsDimension("fboxsep")))?o:0,s=function N9(n){if(!n)return"1px";let o=n.match(/([0-9][a-zA-Z\%]+)/);return null===o?"1px":o[1]}(this.borderStyle),r=new Re(null,{classes:"ML__notation"});r.setStyle("box-sizing","border-box"),r.setStyle("top",`calc(-${s} / 2 - ${a}em)`),r.setStyle("left",`calc(-${s} / 2 - ${a}em)`),r.setStyle("height",`calc(100% + ${2*a}em + 2 * ${s})`),r.height=i.height+a,r.depth=i.depth+a,r.setStyle("width",`calc(100% + ${2*a}em + 2 * ${s})`),this.backgroundcolor&&r.setStyle("background-color",this.backgroundcolor),this.notation.box&&r.setStyle("border",this.borderStyle),this.notation.actuarial&&(r.setStyle("border-top",this.borderStyle),r.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(r.setStyle("border-bottom",this.borderStyle),r.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(r.setStyle("border-radius","8px"),r.setStyle("border",this.borderStyle)),this.notation.circle&&(r.setStyle("border-radius","50%"),r.setStyle("border",this.borderStyle)),this.notation.top&&r.setStyle("border-top",this.borderStyle),this.notation.left&&r.setStyle("border-left",this.borderStyle),this.notation.right&&r.setStyle("border-right",this.borderStyle),this.notation.bottom&&r.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let d;"none"!==this.shadow&&(d="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),function m9(n,o,t){n.svgOverlay=o,n.svgStyle=t}(r,l,d)}let c=new Re([r,i]);return c.setStyle("position","relative"),c.setStyle("display","inline"),c.height=i.height+a,c.depth=i.depth+a,c.left=a,c.right=a,this.caret&&(c.caret=this.caret),c.wrap(t)}},Da=class extends Me{constructor(n,o,t,i,a){var s,r;super("genfrac",i,{style:a.style,command:n,serialize:a.serialize,displayContainsHighlight:!0}),this.above=o,this.below=t,this.hasBarLine=null==(s=a?.hasBarLine)||s,this.continuousFraction=null!=(r=a?.continuousFraction)&&r,this.numerPrefix=a?.numerPrefix,this.denomPrefix=a?.denomPrefix,this.mathstyleName=a?.mathstyleName,this.leftDelim=a?.leftDelim,this.rightDelim=a?.rightDelim}static fromJson(n,o){return new Da(n.command,n.above,n.below,o,n)}toJson(){let n={};return this.continuousFraction&&(n.continuousFraction=!0),this.numerPrefix&&(n.numerPrefix=this.numerPrefix),this.denomPrefix&&(n.denomPrefix=this.denomPrefix),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),this.hasBarLine||(n.hasBarLine=!1),this.mathstyleName&&(n.mathstyleName=this.mathstyleName),Ze(Ze({},super.toJson()),n)}serialize(n){return this.command+`{${this.aboveToLatex(n)}}{${this.belowToLatex(n)}}`}get children(){if(this._children)return this._children;let n=[];if("numerator-denominator"===this.context.fractionNavigationOrder){for(let o of this.above)n.push(...o.children),n.push(o);for(let o of this.below)n.push(...o.children),n.push(o)}else{for(let o of this.below)n.push(...o.children),n.push(o);for(let o of this.above)n.push(...o.children),n.push(o)}return this._children=n,n}render(n){var o,t;let f,O,i=new Tt(n,this.style,this.mathstyleName),a=i.metrics,s=new Tt(i,this.style,this.continuousFraction?"":"numerator"),r=this.numerPrefix?new Re([new Re(this.numerPrefix),Me.createBox(s,this.above)],{isTight:s.isTight,newList:!0}):null!=(o=Me.createBox(s,this.above,{newList:!0}))?o:new Re(null,{newList:!0}),l=new Tt(i,this.style,this.continuousFraction?"":"denominator"),c=this.denomPrefix?new Re([new Re(this.denomPrefix),Me.createBox(l,this.below,{newList:!0})]):null!=(t=Me.createBox(l,this.below,{newList:!0}))?t:new Re(null,{newList:!0}),d=this.hasBarLine?a.defaultRuleThickness:0,y=0;i.isDisplayStyle?(f=a.num1,y=d>0?3*d:7*d,O=a.denom1):(d>0?(f=a.num2,y=d):(f=a.num3,y=3*d),O=a.denom2);let N=[];this.isSelected&&N.push("ML__selected");let $,I=r.depth,z=c.height;if(d<=0){let ye=f-I-(z-O);ye<y&&(f+=(y-ye)/2,O+=(y-ye)/2),$=new Pn({individualShift:[{box:r,shift:-f,classes:[...N,"ML__center"]},{box:c,shift:O,classes:[...N,"ML__center"]}]}).wrap(i)}else{let ye=to+d/2,ae=to-d/2;f<y+I+ye&&(f=y+I+ye),O<y+z-ae&&(O=y+z-ae);let oe=new Re(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});oe.height=d/2,oe.depth=d/2,$=new Pn({individualShift:[{box:c,shift:O,classes:[...N,"ML__center"]},{box:oe,shift:d/2-ae,classes:N},{box:r,shift:-f,classes:[...N,"ML__center"]}]}).wrap(i)}let Y=i.isDisplayStyle?a.delim1:a.delim2,V=this.isSelected?" ML__selected":"",te=this.leftDelim?this.bind(n,Ml("mopen",this.leftDelim,Y,!0,n,{style:this.style,mode:this.mode,classes:V})):Za(i,"mopen"),K=null;K=this.continuousFraction?new Re(null,{type:"mclose"}):this.rightDelim?this.bind(n,Ml("mclose",this.rightDelim,Y,!0,n,{style:this.style,mode:this.mode,classes:V})):Za(i,"mclose");let X=this.bind(n,new Re([te,$,K],{isTight:i.isTight,type:"mord",classes:"mfrac"}));return X?(this.caret&&(X.caret=this.caret),this.attachSupsub(n,{base:X})):null}},jn=class extends Me{constructor(n,o,t){var i;super("latex",o,{value:n,mode:"latex"}),this.isSuggestion=null!=(i=t?.isSuggestion)&&i,this.isError=!1,this.verbatimLatex=n}static fromJson(n,o){let t=new jn(n.command,o);return n.isSuggestion&&(t.isSuggestion=!0),n.isError&&(t.isError=!0),t}toJson(){let n={};return this.isSuggestion&&(n.isSuggestion=!0),this.isError&&(n.isError=!0),Ze(Ze({},super.toJson()),n)}get computedStyle(){return{}}render(n){let o=new Re(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},aa=class extends Me{constructor(n,o){super("latexgroup",o,{mode:"latex"}),this.body=[...n].map(t=>new jn(t,o)),this.skipBoundary=!1}static fromJson(n,o){return new aa("",o)}toJson(){return super.toJson()}render(n){let o=Me.createBox(n,this.body,{newList:!0});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){var o,t;return null!=(t=null==(o=this.body)?void 0:o.map(i=>i.value).join(""))?t:""}},Dl=class extends Me{constructor(n,o,t,i){super("line",t,{command:n,style:i.style}),this.skipBoundary=!0,this.body=o,this.position=i.position}static fromJson(n,o){return new Dl(n.command,n.body,o,n)}toJson(){return kt(Ze({},super.toJson()),{position:this.position})}render(n){let o=new Tt(n,this.style,"cramp"),t=Me.createBox(o,this.body);if(!t)return null;let s,i=o.metrics.defaultRuleThickness/o.scalingFactor,a=new Re(null,{classes:this.position+"-line"});return a.height=i,a.maxFontSize=1.125*i*o.scalingFactor,s=new Pn("overline"===this.position?{shift:0,children:[{box:t},3*i,{box:a},i]}:{top:t.height,children:[i,{box:a},3*i,{box:t}]}),this.caret&&(s.caret=this.caret),new Re(s,{classes:this.position,type:"mord"})}},Ii=class extends Me{constructor(n,o,t,i){var a,s,r,l;super(null!=(a=i.type)?a:"mop",t,{command:n,style:i.style,isFunction:i?.isFunction}),"string"==typeof o?this.value=o:this.body=o,this.captureSelection=null!=(s=i.captureSelection)&&s,this.hasArgument=null!=(r=i.hasArgument)&&r,this.variant=i?.variant,this.variantStyle=i?.variantStyle,this.subsupPlacement=i?.limits,this.isExtensibleSymbol=null!=(l=i?.isExtensibleSymbol)&&l}static fromJson(n,o){return new Ii(n.command,n.body?n.body:n.value,o,n)}toJson(){let n=super.toJson();return this.hasArgument&&(n.hasArgument=!0),this.variant&&(n.variant=this.variant),this.variantStyle&&(n.variantStyle=this.variantStyle),this.subsupPlacement&&(n.limits=this.subsupPlacement),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.value&&(n.symbol=this.value),n}render(n){var o;let t,i=0,a=0;if(this.isExtensibleSymbol){let r=n.isDisplayStyle&&"\\smallint"!==this.value;if(t=new Re(this.value,{fontFamily:r?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(r?"large-op":"small-op"),type:"mop",maxFontSize:n.scalingFactor}),!t)return null;t.right=t.italic,i=(t.height-t.depth)/2-to*n.scalingFactor,a=t.italic,t.setStyle("color",this.style.color),t.setStyle("background-color",this.style.backgroundColor)}else if(this.body){if(t=Me.createBox(n,this.body,{newList:!0}),!t)return null;t.setStyle("color",this.style.color),t.setStyle("background-color",this.style.backgroundColor)}else t=new Re(this.value,{type:"mop",mode:"math",maxFontSize:n.scalingFactor,style:{color:this.style.color,backgroundColor:this.style.backgroundColor,letterShapeStyle:n.letterShapeStyle,variant:this.variant,variantStyle:this.variantStyle}});this.isExtensibleSymbol&&t.setTop(i);let s=t;if(this.superscript||this.subscript){let r=null!=(o=this.subsupPlacement)?o:"auto";s="over-under"===r||"auto"===r&&n.isDisplayStyle?this.attachLimits(n,{base:t,baseShift:i,slant:a}):this.attachSupsub(n,{base:t})}return this.caret&&(s.caret=this.caret),new Re(this.bind(n,s),{type:"mop",classes:"op-group"+(this.isSelected?" ML__selected":"")})}serialize(n){if("\u200b"===this.value)return this.supsubToLatex(n);let o=[];return o.push(this.command),this.hasArgument&&o.push(`{${this.bodyToLatex(n)}}`),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&o.push("\\limits"),"adjacent"===this.subsupPlacement&&o.push("\\nolimits"),"auto"===this.subsupPlacement&&o.push("\\displaylimits")),o.push(this.supsubToLatex(n)),wn(o)}},sa=class extends Me{constructor(n,o,t,i){var a,s;super("overlap",t,{command:n,style:i?.style}),this.skipBoundary=!0,this.body="string"==typeof o?[new Me("mord",t,{value:o})]:o,this.align=null!=(a=i?.align)?a:"left",this.boxType=null!=(s=i?.boxType)?s:"mord"}static fromJson(n,o){return new sa(n.command,n.body,o,n)}toJson(){let n={};return this.align&&(n.align=this.align),this.boxType&&(n.boxType=this.boxType),Ze(Ze({},super.toJson()),n)}render(n){let o=Me.createBox(n,this.body,{classes:"inner"});return o?(this.caret&&(o.caret=this.caret),this.bind(n,new Re([o,new Re(null,{classes:"fix"})],{classes:"left"===this.align?"llap":"rlap",type:this.boxType}))):null}},Na=class extends Me{constructor(n,o,t,i){var a,s,r,l;super("phantom",t,{command:n,style:i.style}),this.captureSelection=!0,this.body=o,this.isInvisible=null!=(a=i.isInvisible)&&a,this.smashDepth=null!=(s=i.smashDepth)&&s,this.smashHeight=null!=(r=i.smashHeight)&&r,this.smashWidth=null!=(l=i.smashWidth)&&l}static fromJson(n,o){return new Na(n.command,n.body,o,n)}toJson(){let n={};return this.isInvisible&&(n.isInvisible=!0),this.smashDepth&&(n.smashDepth=!0),this.smashHeight&&(n.smashHeight=!0),this.smashWidth&&(n.smashWidth=!0),Ze(Ze({},super.toJson()),n)}render(n){let o=new Tt(n,{isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return Me.createBox(o,this.body,{classes:"inner"});let t=Me.createBox(this.isInvisible?o:n,this.body);if(!t)return null;if(this.smashWidth){let i=new Re(null,{classes:"fix"});return new Re([t,i],{classes:"rlap"}).wrap(n)}if(!this.smashHeight&&!this.smashDepth)return t;if(this.smashHeight&&(t.height=0),this.smashDepth&&(t.depth=0),t.children)for(let i of t.children)this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0);return new Pn({firstBaseline:[{box:t}]},{type:"mord"}).wrap(n)}},zu=class extends Me{constructor(n,o,t){var i;super("rule",o,{command:n,style:t.style}),this.shift=null!=(i=t.shift)?i:{dimension:0},this.height=t.height,this.width=t.width}static fromJson(n,o){return new zu(n.command,o,n)}toJson(){let n={height:this.height,width:this.width};return this.shift&&(n.shift=this.shift),Ze(Ze({},super.toJson()),n)}render(n){let o=new Tt(n,this.style,"textstyle"),t=yo(this.shift),i=yo(this.width),a=yo(this.height),s=new Re(null,{classes:"rule",type:"mord"});return s.setStyle("border-right-width",i,"em"),s.setStyle("border-top-width",a,"em"),s.setStyle("border-color",this.style.color),s.setStyle("vertical-align",t,"em"),this.isSelected&&s.setStyle("opacity","50%"),s.width=i,s.height=a+t,s.depth=-t,this.bind(n,s),this.caret&&(s.caret=this.caret),s.wrap(o)}serialize(n){var o;let t=null!=(o=this.command)?o:"";return this.shift&&(t+=`[${Zu(this.shift)}]`),t+=`{${Zu(this.width)}}{${Zu(this.height)}}`,t}},Ju=class extends Me{constructor(n,o,t){var i;super("surd",o,{command:n,mode:null!=(i=t.mode)?i:"math",style:t.style,displayContainsHighlight:!0}),this.body=t.body,this.above=t.index}static fromJson(n,o){return new Ju(n.command,o,kt(Ze({},n),{index:n.above}))}toJson(){return super.toJson()}serialize(n){let o="";return this.above&&(o+=`[${this.aboveToLatex(n)}]`),o+=`{${this.bodyToLatex(n)}}`,this.command+o}render(n){var o;let t=new Tt(n,this.style,"cramp"),i=null!=(o=Me.createBox(t,this.body,{style:this.style,newList:!0}))?o:new Re(null),a=t.scalingFactor,s=t.metrics.defaultRuleThickness/a,r=n.isDisplayStyle?Sa:s,l=new Re(null,{classes:"ML__sqrt-line",style:this.style,height:s}),c=a*(s+r/4),d=Math.max(2*a*r,i.height+i.depth)+c+s,f=new Tt(n,this.style),y=this.isSelected?" ML__selected":"",O=this.bind(f,new Re(Ml("","\\surd",d,!1,f,{classes:y}),{classes:"ML__sqrt-sign"+y,style:this.style}));if(!O)return null;let N=O.height+O.depth-s;N>i.height+i.depth+c&&(c=(c+N-(i.height+i.depth))/2),O.setTop(O.height-i.height-c);let I=this.bind(n,new Pn({firstBaseline:[{box:new Re(i)},c-2*s,{box:l},s]}).wrap(n)),z=Me.createBox(new Tt(n,this.style,"scriptscriptstyle"),this.above,{style:this.style,newList:!0});if(!z){let V=new Re([O,I],{classes:this.containsCaret?"ML__contains-caret":"",type:"mord"});return this.caret&&(V.caret=this.caret),this.bind(n,V.wrap(n))}let $=new Pn({shift:-.6*(Math.max(O.height,I.height)-Math.max(O.depth,I.depth)),children:[{box:z}]}),Y=new Re([new Re($,{classes:"ML__sqrt-index"}),O,I],{type:"mord",classes:this.containsCaret?"ML__contains-caret":""});return Y.height=O.height,Y.depth=O.depth,this.caret&&(Y.caret=this.caret),this.bind(n,Y.wrap(n))}},g_={"p@":"1pt ","z@":"0pt",maxdimen:"16383.99999pt",hfuzz:"0.1pt",vfuzz:"0.1pt",overfullrule:"5pt",hsize:"6.5in",vsize:"8.9in",parindent:"20pt",maxdepth:"4pt",splitmaxdepth:"\\maxdimen",boxmaxdepth:"\\maxdimen",delimitershortfall:"5pt",nulldelimiterspace:"1.2pt",scriptspace:"0.5pt",topskip:"10pt",splittopskip:"10pt",normalbaselineskip:"12pt",normallineskip:"1pt",normallineskiplimit:"0pt",jot:"3pt",doublerulesep:"2pt",arrayrulewidth:"0.4pt",arraycolsep:"5pt",fboxsep:"3pt",fboxrule:"0.4pt"},f_={"z@skip":"0pt plust0pt minus0pt",hideskip:"-1000pt plust 1fill","@flushglue":"0pt plust 1fill",parskip:"0pt plus 1pt",abovedisplayskip:"12pt plus 3pt minus 9pt",abovedisplayshortskip:"0pt plus 3pt",belowdisplayskip:"12pt plus 3pt minus 9pt",belowdisplayshortskip:"7pt plus 3pt minus 4pt",parfillskip:"0pt plus 1fil",thinmuskip:"3mu",medmuskip:"4mu plus 2mu minus 4mu",thickmuskip:"5mu plus 5mu",smallskipamount:"3pt plus1pt minus1pt",medskipamount:"6pt plus2pt minus2pt",bigskipamount:"12pt plus4pt minus4pt"},Q9={pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:"",month:(new Date).getMonth()+1,day:(new Date).getDate(),year:(new Date).getFullYear()};function x_(n){var o,t;if(ra)return ra;ra=Ze({},Q9);for(let i of Object.keys(g_))ra[i]=null!=(o=Zl(g_[i],n,ra))?o:0;for(let i of Object.keys(f_))ra[i]=null!=(t=P9(f_[i],n,ra))?t:0;return ra}function Qa(){let n={registers:{},smartFence:!1,fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",letterShapeStyle:cn.locale.startsWith("fr")?"french":"tex",colorMap:gl,backgroundColorMap:yu,getDefinition:Hu,getMacro:o=>b_(o,Ou())};return kt(Ze({},n),{registers:x_(n)})}function Hu(n,o="math"){if(!n||0===n.length)return null;let t=null;if(n.startsWith("\\")){if(t=bo[n],t)return t;"math"===o?t=xo[n]:No[n]&&(t={definitionType:"symbol",type:"mord",codepoint:No[n]})}else if("math"===o){if(t=xo[n],!t&&1===n.length){let i=bl("math",n.codePointAt(0));return i.startsWith("\\")?kt(Ze({},Hu(i,"math")),{command:i}):null}}else No[n]?t={definitionType:"symbol",type:"mord",codepoint:No[n]}:"text"===o&&(t={definitionType:"symbol",type:"mord",codepoint:n.codePointAt(0)});return t&&"symbol"===t.definitionType&&"mord"===t.type&&(102===t.codepoint||103===t.codepoint||104===t.codepoint)&&(t.isFunction=!0),t??null}function b_(n,o){return n.startsWith("\\")?o[n.slice(1)]:null}var Nl=class extends Me{constructor(n,o,t,i){super("tooltip",t,{command:i?.command,mode:"math",serialize:i?.serialize,style:i?.style,displayContainsHighlight:!0}),this.body=n;let a=Qa();this.tooltip=new Me("root",a,{style:{}}),this.tooltip.body=o,this.skipBoundary=!0,this.captureSelection=!1}static fromJson(n,o){return new Nl(n.body,io(n.tooltip,o),o,n)}toJson(){var n;let o=null==(n=this.tooltip.body)?void 0:n.filter(t=>"first"!==t.type).map(t=>t.toJson());return kt(Ze({},super.toJson()),{tooltip:o})}render(n){let o=Me.createBox(n,this.body,{style:this.style});if(!o)return null;let t=kl(us(new Re(this.tooltip.render(new Tt({registers:n.registers},{fontSize:Ea},"displaystyle")),{classes:"ML__tooltip-content"}))),i=new Re([t,o],{classes:"ML__tooltip-container"});return this.caret&&(i.caret=this.caret),this.bind(n,i)}serialize(n){return`${this.command}{${this.bodyToLatex(n)}}{${Me.serialize(this.tooltip.body,n)}}`}};function io(n,o){if(Bn(n))return n.map(a=>io(a,o));n=Ze({},n);for(let a of Ia)n[a]&&(n[a]=io(n[a],o));n.array&&(n.array=io(n.array,o));let i,t=n.type;"accent"===t&&(i=Ks.fromJson(n,o)),"array"===t&&(i=hn.fromJson(n,o)),"box"===t&&(i=ja.fromJson(n,o)),"chem"===t&&(i=Uu.fromJson(n,o)),"choice"===t&&(i=Ku.fromJson(n,o)),"composition"===t&&(i=Fu.fromJson(n,o)),"delim"===t&&(i=Ru.fromJson(n,o)),"enclose"===t&&(i=ps.fromJson(n,o)),"error"===t&&(i=Qu.fromJson(n,o)),"genfrac"===t&&(i=Da.fromJson(n,o)),"group"===t&&(i=zn.fromJson(n,o)),"latex"===t&&(i=jn.fromJson(n,o)),"latexgroup"===t&&(i=aa.fromJson(n,o)),"leftright"===t&&(i=Xn.fromJson(n,o)),"line"===t&&(i=Dl.fromJson(n,o)),"macro"===t&&(i=qu.fromJson(n,o)),"msubsup"===t&&(i=Gs.fromJson(n,o)),"overlap"===t&&(i=sa.fromJson(n,o)),"overunder"===t&&(i=Mi.fromJson(n,o)),"placeholder"===t&&(n.defaultValue&&(n.defaultValue=io(n.defaultValue,o)),i=An.fromJson(n,o)),"phantom"===t&&(i=Na.fromJson(n,o)),"rule"===t&&(i=zu.fromJson(n,o)),"sizeddelim"===t&&(i=Bu.fromJson(n,o)),"spacing"===t&&(i=Pa.fromJson(n,o)),"surd"===t&&(i=Ju.fromJson(n,o)),"text"===t&&(i=_s.fromJson(n,o)),"tooltip"===t&&(i=Nl.fromJson(n,o)),"mop"===t&&(i=Ii.fromJson(n,o)),i||(["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(t),i=Me.fromJson(n,o));for(let a of Ia)n[a]&&i.setChildren(n[a],a);return void 0!==n.verbatimLatex&&(i.verbatimLatex=n.verbatimLatex),n.subsupPlacement&&(i.subsupPlacement=n.subsupPlacement),n.explicitSubsupPlacement&&(i.explicitSubsupPlacement=!0),n.isFunction&&(i.isFunction=!0),n.isExtensibleSymbol&&(i.isExtensibleSymbol=!0),n.skipBoundary&&(i.skipBoundary=!0),n.captureSelection&&(i.captureSelection=!0),i}var Ku=class extends Me{constructor(n,o){super("choice",o),this.choices=n,this.skipBoundary=!0}static fromJson(n,o){return new Ku([io(n.choices[0],o),io(n.choices[1],o),io(n.choices[2],o),io(n.choices[3],o)],o)}toJson(){let n=[];for(let o of this.choices)n.push(o.filter(t=>"first"!==t.type).map(t=>t.toJson()));return kt(Ze({},super.toJson()),{choices:n})}render(n){let o=Me.createBox(n,this.choices[Math.floor(n.mathstyle.id/2)]);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){return`\\mathchoice{${Me.serialize(this.choices[0],n)}}{${Me.serialize(this.choices[1],n)}}{${Me.serialize(this.choices[2],n)}}{${Me.serialize(this.choices[3],n)}}`}};Ee("mathtip","{:math}{:math}",{createAtom:(n,o,t,i)=>new Nl(o[0],o[1],i,{command:n,content:"math",style:t})}),Ee("texttip","{:math}{:text}",{createAtom:(n,o,t,i)=>new Nl(o[0],o[1],i,{command:n,content:"text",style:t})}),Ee("error","{:math}",{createAtom:(n,o,t,i)=>new zn(o[0],i,{mode:"math",command:"\\error",customClass:"ML__error",style:t,serialize:(a,s)=>`\\error{${a.bodyToLatex(s)}}`})}),Ee("ensuremath","{:math}",{createAtom:(n,o,t,i)=>new zn(o[0],i,{mode:"math",latexOpen:"\\ensuremath{",latexClose:"}",style:t})}),Ee("color","{:string}",{applyStyle:(n,o,t)=>{var i,a;let s=o[0];return{verbatimColor:o[0],color:null!=(a=null==(i=t.colorMap)?void 0:i.call(t,s))?a:s}}}),Ee("textcolor","{:string}{content:auto*}",{applyStyle:(n,o,t)=>{var i,a;let s=o[0];return{verbatimColor:s,color:null!=(a=null==(i=t.colorMap)?void 0:i.call(t,s))?a:s}}}),Ee("boxed","{content:math}",{createAtom:(n,o,t,i)=>new ja(n,o[0],i,{framecolor:"black",style:t})}),Ee("colorbox","{:string}{content:auto*}",{applyMode:"text",applyStyle:(n,o,t)=>{var i,a;let s=o[0];return{verbatimBackgroundColor:o[0],backgroundColor:null!=(a=null==(i=t.backgroundColorMap)?void 0:i.call(t,s))?a:s}}}),Ee("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{applyMode:"text",createAtom:(n,o,t,i)=>{var a,s,r,l;let c=o[0],d=o[1];return new ja(n,o[2],i,{verbatimFramecolor:c,framecolor:null!=(s=null==(a=i.colorMap)?void 0:a.call(i,c))?s:c,verbatimBackgroundcolor:o[1],backgroundcolor:null!=(l=null==(r=i.backgroundColorMap)?void 0:r.call(i,d))?l:d,style:t,serialize:(f,y)=>{var O,N;return`${f.command}{${null!=(O=f.verbatimFramecolor)?O:f.framecolor}{${null!=(N=f.verbatimBackgroundcolor)?N:f.backgroundcolor}}{${f.bodyToLatex(y)}}`}})}}),Ee("bbox","[:bbox]{body:auto}",{createAtom:(n,o,t,i)=>{if(o[0]){let a=o[0];return new ja(n,o[1],i,{padding:a.padding,border:a.border,backgroundcolor:a.backgroundcolor,style:t,serialize:(s,r)=>{var l;let c=n;if(Number.isFinite(s.padding)||void 0!==s.border||void 0!==s.backgroundcolor){let d=[];s.padding&&d.push(s.padding),s.border&&d.push(`border: ${s.border}`),(s.verbatimBackgroundcolor||s.backgroundcolor)&&d.push(null!=(l=s.verbatimBackgroundcolor)?l:s.backgroundcolor),c+=`[${d.join(",")}]`}return c+`{${s.bodyToLatex(r)}}`}})}return new ja(n,o[1],i,{style:t})}}),Ee(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(n,o,t,i)=>new zn(o[0],i,{latexOpen:`{${n} `,latexClose:"}",style:t,mathstyleName:n.slice(1)})}),Ee(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(n,o)=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[n]})}),Ee("fontseries","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontSeries:o[0]})}),Ee("fontshape","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontShape:o[0]})}),Ee("fontfamily","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontFamily:o[0]})}),Ee("selectfont","",{ifMode:"text",applyStyle:(n,o)=>({})}),Ee("bf","",{applyStyle:(n,o)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})}),Ee(["boldsymbol","bm"],"{:math*}",{applyMode:"math",createAtom:(n,o,t,i)=>new zn(o[0],i,{latexOpen:`${n}{`,latexClose:"}",style:t,customClass:"ML__boldsymbol"})}),Ee("bold","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variantStyle:"bold"})}),Ee("bfseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Ee("mdseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Ee("upshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Ee("slshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Ee("scshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Ee("textbf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Ee("textmd","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Ee("textup","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Ee("textnormal","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n",fontSeries:"m"})}),Ee("textsl","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Ee("textit","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"it"})}),Ee("textsc","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Ee("textrm","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"roman"})}),Ee("textsf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Ee("texttt","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"monospace"})}),Ee("mathbf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"bold"})}),Ee("mathit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"italic"})}),Ee("mathnormal","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"italic"})}),Ee("mathbfit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"bolditalic"})}),Ee("mathrm","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"up"})}),Ee("mathsf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"sans-serif",variantStyle:"up"})}),Ee("mathtt","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"monospace",variantStyle:"up"})}),Ee("it","",{applyStyle:(n,o)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})}),Ee("rmfamily","",{applyStyle:(n,o)=>({fontFamily:"roman"})}),Ee("sffamily","",{applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Ee("ttfamily","",{applyStyle:(n,o)=>({fontFamily:"monospace"})}),Ee(["Bbb","mathbb"],"{:math*}",{applyStyle:(n,o)=>({variant:"double-struck",variantStyle:"up"})}),Ee(["frak","mathfrak"],"{:math*}",{applyStyle:(n,o)=>({variant:"fraktur",variantStyle:"up"})}),Ee("mathcal","{:math*}",{applyStyle:(n,o)=>({variant:"calligraphic",variantStyle:"up"})}),Ee("mathscr","{:math*}",{applyStyle:(n,o)=>({variant:"script",variantStyle:"up"})}),Ee("mbox","{:text}",{ifMode:"math",createAtom:(n,o,t,i)=>new zn(o[0],i,{changeMode:!0,style:t,mode:"text",command:n,serialize:(a,s)=>`\\mbox{${a.bodyToLatex(kt(Ze({},s),{skipModeCommand:!0}))}}`})}),Ee("text","{:text}",{ifMode:"math",applyMode:"text"}),Ee("class","{name:string}{content:auto*}",{createAtom:(n,o,t,i)=>new zn(o[1],i,{customClass:o[0],style:t})}),Ee("cssId","{id:string}{content:auto}",{createAtom:(n,o,t,i)=>new zn(o[1],i,{cssId:o[0],style:t})}),Ee("htmlData","{data:string}{content:auto}",{createAtom:(n,o,t,i)=>new zn(o[1],i,{htmlData:o[0],style:t})}),Ee("htmlStyle","{data:string}{content:auto}",{createAtom:(n,o,t,i)=>new zn(o[1],i,{htmlStyle:o[0],style:t})}),Ee("em","{:auto*}",{createAtom:(n,o,t,i)=>new zn(o[0],i,{latexOpen:"\\em",latexClose:"",customClass:"ML__emph",style:t})}),Ee("emph","{:auto}",{createAtom:(n,o,t,i)=>new zn(o[0],i,{latexOpen:"\\emph{",latexClose:"}",customClass:"ML__emph",style:t})});var v_={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Ee(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(n,o,t,i)=>new Bu(n,o[0],i,{size:v_[n].size,delimClass:v_[n].mclass,style:t})}),Ee(["hspace","hspace*"],"{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Pa(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Ee(["mkern","kern"],"{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Pa(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Ee("mspace","{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Pa(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Ee("mathop","{:auto}",{createAtom:(n,o,t,i)=>new Ii(n,o[0],i,{type:"mop",captureSelection:!0,limits:"over-under",isFunction:!0,hasArgument:!0,style:t})}),Ee("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(n,o,t,i)=>new Ku(o,i)}),Ee(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(n,o,t,i)=>new Ii(n,o[0],i,{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[n],captureSelection:!0,hasArgument:!0,style:t})}),Ee(["operatorname","operatorname*"],"{operator:math}",{createAtom:(n,o,t,i)=>{let a=new Ii(n,o[0],i,{isFunction:!0,hasArgument:!0,limits:"\\operatorname"===n?"adjacent":"over-under",style:t});return a.captureSelection=!0,a.body&&a.body.forEach(s=>{var r;"first"!==s.type&&(s.type="mord",s.value=null!=(r={"\u2217":"*","\u2212":"-"}[s.value])?r:s.value,s.isFunction=!1,!s.style.variant&&!s.style.variantStyle&&(s.style.variant="main",s.style.variantStyle="up"))}),a}});var q9=class extends Me{constructor(n,o,t){let i=Number.parseInt(n);Number.isFinite(i)||(i=10067),super("mord",t,{value:String.fromCodePoint(i),style:o}),this.codepoint=i}serialize(n){return'\\unicode"'+("000000"+this.codepoint.toString(16)).toUpperCase().slice(-6)}};function Ql(n){if(1===n.length){let o=n[0];if("mbin"===o.type)return"mbin";if("mrel"===o.type)return"mrel"}return"mord"}Ee("unicode","{charcode:number}",{createAtom:(n,o,t,i)=>new q9(o[0],t,i)}),Ee("rule","[raise:dimen]{width:dimen}{thickness:dimen}",{createAtom:(n,o,t,i)=>new zu(n,i,{shift:o[0],width:o[1],height:o[2],style:t})}),Ee("overline","{:auto}",{createAtom:(n,o,t,i)=>new Dl(n,o[0],i,{position:"overline",style:t})}),Ee("underline","{:auto}",{createAtom:(n,o,t,i)=>new Dl(n,o[0],i,{position:"underline",style:t})}),Ee("overset","{above:auto}{base:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{above:o[0],body:o[1],skipBoundary:!1,style:t,boxType:Ql(o[1]),serialize:(a,s)=>`${a.command}{${a.aboveToLatex(s)}}{${a.bodyToLatex(s)}}`})}),Ee("underset","{below:auto}{base:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{below:o[0],body:o[1],skipBoundary:!1,style:t,boxType:Ql(o[1]),serialize:(a,s)=>`${n}{${a.belowToLatex(s)}}{${a.bodyToLatex(s)}}`})}),Ee("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{above:o[0],below:o[1],body:o[2],skipBoundary:!1,style:t,boxType:Ql(o[2]),serialize:(a,s)=>`${a.command}{${a.aboveToLatex(s)}}{${a.bodyToLatex(s)}}`})}),Ee(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[2],above:o[1],below:o[0],skipBoundary:!1,style:t,boxType:"\\stackrel"===n?"mrel":"mbin",serialize:(a,s)=>`${a.command}{${a.aboveToLatex(s)}}{${a.bodyToLatex(s)}}`})}),Ee("smash","[:string]{:auto}",{createAtom:(n,o,t,i)=>new Na(n,o[1],i,o[0]?{smashHeight:o[0].includes("t"),smashDepth:o[0].includes("b"),style:t}:{smashHeight:!0,smashDepth:!0,style:t})}),Ee(["vphantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Na(n,o[1],i,{isInvisible:!0,smashWidth:!0,style:t})}),Ee(["hphantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Na(n,o[1],i,{isInvisible:!0,smashHeight:!0,smashDepth:!0,style:t})}),Ee(["phantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Na(n,o[1],i,{isInvisible:!0,style:t})}),Ee("not","{:math}",{createAtom:(n,o,t,i)=>{if(o.length<1||null===o[0])return new Me("mrel",i,{command:n,style:t,value:"\ue020"});let a=o[0];return new zn([new sa(n,"\ue020",i,{align:"right",style:t,boxType:"mrel"}),...a],i,{boxType:"mrel",captureSelection:!0,command:"\\not",serialize:(s,r)=>{let l=Me.serialize(a,r);return 1!==l.length||/[a-zA-Z]/.test(l)?`\\not{${l}}`:"\\not"+l}})}}),Ee(["ne","neq"],"",{createAtom:(n,o,t,i)=>new zn([new sa(n,"\ue020",i,{align:"right",style:t,boxType:"mrel"}),new Me("mrel",i,{style:t,value:"="})],i,{boxType:"mrel",captureSelection:!0,serialize:()=>n,command:n})}),Ee("rlap","{:auto}",{createAtom:(n,o,t,i)=>new sa(n,o[0],i,{align:"right",style:t})}),Ee("llap","{:auto}",{createAtom:(n,o,t,i)=>new sa(n,o[0],i,{style:t})}),Ee("mathllap","{:auto}",{createAtom:(n,o,t,i)=>new sa(n,o[0],i,{style:t})}),Ee("mathrlap","{:auto}",{createAtom:(n,o,t,i)=>new sa(n,o[0],i,{align:"right",style:t})});var y_={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};function Li(n){for(let o of n)for(let t of o)if(t.length>0)return!1;return!0}Ee(Object.keys(y_),"{body:auto}",{createAtom:(n,o,t,i)=>new Ks(n,o[0],i,{accentChar:y_[n.slice(1)],style:t})}),Ee(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(n,o,t,i)=>{let a=e_(o[0]);return new Ks(n,o[0],i,{style:t,svgAccent:n.slice(1)+(a.length>5?"4":["1","1","2","2","3","3"][a.length])})}}),Ee(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(n,o,t,i)=>new Ks(n,o[0],i,{style:t,svgAccent:"overarc"})}),Ee(["underarc","underparen"],"{body:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[0],style:t,svgBelow:"underarc"})}),Ee("utilde","{body:auto}",{createAtom:(n,o,t,i)=>{let a=e_(o[0]);return new Mi(n,i,{body:o[0],svgBelow:"widetilde"+(a.length>5?"4":["1","1","2","2","3","3"][a.length]),style:t,boxType:Ql(o[0])})}}),Ee("^","{:string}",{createAtom:(n,o,t,i)=>{var a;return new Me("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[o[0]])?a:"^"})}}),Ee("`","{:string}",{createAtom:(n,o,t,i)=>{var a;return new Me("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[o[0]])?a:"`"})}}),Ee("'","{:string}",{createAtom:(n,o,t,i)=>{var a;return new Me("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[o[0]])?a:"^"})}}),Ee("~","{:string}",{createAtom:(n,o,t,i)=>{var a;return new Me("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[o[0]])?a:"\xb4"})}}),Ee("c","{:string}",{createAtom:(n,o,t,i)=>{var a;return new Me("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={c:"\xe7",C:"\xc7"}[o[0]])?a:""})}}),Ee("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(n,o,t,i)=>{var a;let s={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:t};if(o[1]){let l=o[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of l){let d=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(d)s.strokeWidth=d[1],s.strokeStyle=d[2],s.strokeColor=d[3];else{let f=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);f&&("mathbackground"===f[1]?s.backgroundcolor=f[2]:"mathcolor"===f[1]?s.strokeColor=f[2]:"padding"===f[1]?s.padding=f[2]:"shadow"===f[1]&&(s.shadow=f[2]))}}"dashed"===s.strokeStyle?s.svgStrokeStyle="5,5":"dotted"===s.strokeStyle&&(s.svgStrokeStyle="1,5")}s.borderStyle=`${s.strokeWidth} ${s.strokeStyle} ${s.strokeColor}`;let r={};return(null!=(a=o[0])?a:"").split(/[, ]/).filter(l=>l.length>0).forEach(l=>{r[l.toLowerCase()]=!0}),new ps(n,o[2],r,i,s)}}),Ee("cancel","{body:auto}",{createAtom:(n,o,t,i)=>new ps(n,o[0],{updiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),Ee("bcancel","{body:auto}",{createAtom:(n,o,t,i)=>new ps(n,o[0],{downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),Ee("xcancel","{body:auto}",{createAtom:(n,o,t,i)=>new ps(n,o[0],{updiagonalstrike:!0,downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),yl("math","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{mathstyleName:"textstyle"}))),yl("displaymath","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{mathstyleName:"textstyle"}))),vo("array","{columns:colspec}",(n,o,t,i,a)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:a[0],mathstyleName:"textstyle"}))),vo(["equation","equation*","subequations"],"",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:[{align:"c"}]}))),vo("multline","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:[{align:"m"}]}))),vo(["align","align*","aligned","eqnarray"],"",(n,o,t,i)=>{let a=0;Li(t)&&(t=[[[new Me("first",n),new An(n)],[new Me("first",n),new An(n)]]]);for(let l of t)a=Math.max(a,l.length);let s=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],r=2;for(;r<a;)s.push({gap:1}),s.push({align:"r"}),s.push({gap:.25}),s.push({align:"l"}),r+=2;return s.push({gap:0}),new hn(n,o,t,i,{arraycolsep:0,columns:s,colSeparationType:"align",jot:.3,minColumns:2})}),vo("split","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)],[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:[{align:"r"},{align:"l"}],minColumns:2}))),vo(["gather","gathered"],"",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:[{gap:.25},{align:"c"},{gap:0}],colSeparationType:"gather"}))),vo(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",(n,o,t,i,a)=>{var s;Li(t)&&(t=[[[new Me("first",n),new An(n)]]]);let r=".",l=".";switch(o){case"pmatrix":case"pmatrix*":r="(",l=")";break;case"bmatrix":case"bmatrix*":r="[",l="]";break;case"Bmatrix":case"Bmatrix*":r="\\lbrace",l="\\rbrace";break;case"vmatrix":case"vmatrix*":r="\\vert",l="\\vert";break;case"Vmatrix":case"Vmatrix*":r="\\Vert",l="\\Vert";break;case"matrix":case"matrix*":r=".",l="."}return new hn(n,o,t,i,{mathstyleName:"textstyle",leftDelim:r,rightDelim:l,columns:null!=(s=a[0])?s:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]})}),vo(["smallmatrix","smallmatrix*"],"[columns:colspec]",(n,o,t,i,a)=>{var s;return Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{mathstyleName:"scriptstyle",columns:null!=(s=a[0])?s:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],colSeparationType:"small",arraystretch:.5})}),vo(["cases","dcases"],"",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{mathstyleName:"dcases"===o?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]}))),vo("rcases","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]}))),yl("center","",(n,o,t,i)=>(Li(t)&&(t=[[[new Me("first",n),new An(n)]]]),new hn(n,o,t,i,{columns:[{align:"c"}]}))),Ee(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:t,svgAbove:n.slice(1)})}),Ee("overbrace","{:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:t,svgAbove:n.slice(1)})}),Ee(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:t,svgBelow:n.slice(1)})}),Ee(["underbrace"],"{:auto}",{createAtom:(n,o,t,i)=>new Mi(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:t,svgBelow:n.slice(1)})}),Ee(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",{createAtom:(n,o,t,i)=>{var a,s;return new Mi(n,i,{style:t,svgBody:n.slice(1),above:0===(null==(a=o[1])?void 0:a.length)?void 0:o[1],below:null!=(s=o[0])?s:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"mrel",serialize:(r,l)=>n+(r.hasEmptyBranch("below")?"":`[${r.belowToLatex(l)}]`)+`{${r.aboveToLatex(l)}}${r.supsubToLatex(l)}`})}}),Ee(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,createAtom:(n,o,t,i)=>new Ii(n,n.slice(1),i,{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up",style:t})}),Ee(["liminf","limsup"],"",{createAtom:(n,o,t,i)=>new Ii(n,{"\\liminf":"lim inf","\\limsup":"lim sup"}[n],i,{limits:"over-under",variant:"main",style:t})}),Ee(["lim","mod"],"",{createAtom:(n,o,t,i)=>new Ii(n,n.slice(1),i,{limits:"over-under",variant:"main",style:t})}),Ee(["det","max","min"],"",{isFunction:!0,createAtom:(n,o,t,i)=>new Ii(n,n.slice(1),i,{limits:"over-under",isFunction:!0,variant:"main",style:t})}),Ee(["ang"],"{:math}",{isFunction:!0,createAtom:(n,o,t,i)=>new zn([...o[0],new Me("mord",i,{value:"\xb0",style:t})],i,{mode:"math",latexOpen:"\\ang{",latexClose:"}",style:t})}),Ee("sqrt","[index:auto]{radicand:auto}",{createAtom:(n,o,t,i)=>new Ju(n,i,{body:o[1],index:o[0],style:t})}),Ee(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",{createAtom:(n,o,t,i)=>{let a={style:t};switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a.hasBarLine=!0;break;case"\\atopfrac":a.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a.hasBarLine=!1,a.leftDelim="(",a.rightDelim=")"}switch(n){case"\\dfrac":case"\\dbinom":a.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":a.mathstyleName="textstyle";break;case"\\cfrac":a.hasBarLine=!0,a.continuousFraction=!0}return new Da(n,o[0],o[1],i,a)}}),Ee(["brace","brack"],"",{infix:!0,createAtom:(n,o,t,i)=>new Da(n,o[0],o[1],i,{hasBarLine:!1,leftDelim:"\\brace"===n?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===n?"\\rbrace":"\\rbrack",style:t,serialize:(a,s)=>wn([a.aboveToLatex(s),a.command,a.belowToLatex(s)])})}),Ee(["over","atop","choose"],"",{infix:!0,createAtom:(n,o,t,i)=>{let a,s;return"\\choose"===n&&(a="(",s=")"),new Da(n,o[0],o[1],i,{hasBarLine:"\\over"===n,leftDelim:a,rightDelim:s,style:t,serialize:(r,l)=>wn([r.aboveToLatex(l),r.command,r.belowToLatex(l)])})}}),Ee(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:(n,o,t,i)=>new Da(n,o[0],o[1],i,{leftDelim:o[2],rightDelim:o[3],hasBarLine:!1,style:t,serialize:(a,s)=>`${a.aboveToLatex(s)} ${a.command}${a.leftDelim}${a.rightDelim}${a.belowToLatex(s)}`})}),Ee("pdiff","{numerator}{denominator}",{createAtom:(n,o,t,i)=>new Da(n,o[0],o[1],i,{hasBarLine:!0,numerPrefix:"\u2202",denomPrefix:"\u2202",style:t})}),Ee(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{createAtom:(n,o,t,i)=>new Ii(n,{coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[n.slice(1)],i,{isExtensibleSymbol:!0,limits:"auto",variant:"main",style:t})}),Ee("smallint","",{createAtom:(n,o,t,i)=>new Ii(n,"\u222b",i,{limits:"adjacent",isExtensibleSymbol:!1,style:t,variant:"main"})});var $u={int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228e",wr:"\u2240",amalg:"\u2a3f",Cap:"\u22d2",Cup:"\u22d3",doublecap:"\u22d2",doublecup:"\u22d3"};function U9(n,o){return n[0]===o[0]&&n[1]===o[1]?"equal":"different"}function Bi(n){let o=1/0,t=-1/0;for(let i of n.ranges)o=Math.min(o,i[0],i[1]),t=Math.max(t,i[0],i[1]);return[o,t]}function Yu(n,o,t){return t?function R9(n,o){if(!o)return"";if("string"==typeof o)return o;if(!n||void 0===o.after)return o.value;let t=!1,i=!1,a=!1,s=!1,r=!1,l=!1,c=!1,d=!1,f=!1,y=!1,O=!1,N=!1,I=!1,z=!1,$=!1,Y=n[0],V=0;for(;Y&&/msubsup|placeholder/.test(Y.type);)V+=1,Y=n[V];return t=!Y||"first"===Y.type,Y&&(z="text"===Y.mode,i=!z&&"mord"===Y.type&&HL.test(Y.value),a=!z&&"mord"===Y.type&&/\d+$/.test(Y.value),s=!z&&Y.isFunction,r="genfrac"===Y.type,l="surd"===Y.type,c="mbin"===Y.type,d="mrel"===Y.type,f="mop"===Y.type,y="mpunct"===Y.type||"minner"===Y.type,O="array"===Y.type,N="mopen"===Y.type,I="mclose"===Y.type||"leftright"===Y.type,$="space"===Y.type),o.after.includes("nothing")&&t||o.after.includes("letter")&&i||o.after.includes("digit")&&a||o.after.includes("function")&&s||o.after.includes("frac")&&r||o.after.includes("surd")&&l||o.after.includes("binop")&&c||o.after.includes("relop")&&d||o.after.includes("operator")&&f||o.after.includes("punct")&&y||o.after.includes("array")&&O||o.after.includes("openfence")&&N||o.after.includes("closefence")&&I||o.after.includes("text")&&z||o.after.includes("space")&&$?o.value:""}(n,t[o]):""}Ee(Object.keys($u),"",{createAtom:(n,o,t,i)=>new Ii(n,$u[n.slice(1)],i,{limits:"adjacent",isExtensibleSymbol:!0,style:t,variant:{"\u22d2":"ams","\u22d3":"ams"}[$u[n.slice(1)]]})}),Ee(["Re","Im"],"",{createAtom:(n,o,t,i)=>new Ii(n,{"\\Re":"\u211c","\\Im":"\u2111"}[n],i,{limits:"adjacent",style:t,isFunction:!0,variant:"fraktur"})}),Ee("middle","{:delim}",{createAtom:(n,o,t,i)=>new Ru(n,o[0],i,{size:1,style:t})}),Hn("0123456789/@.?!"),Wm(65,90),Wm(97,122),Hn([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),Hn([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),Hn([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),Hn([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),Hn([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),Hn([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nrightarrow",8603],["\\nleftarrow",8602],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),Hn([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),Hn([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),Hn([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),Hn([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),Hn([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),Hn([["\\wp",8472],["\\aleph",8501]]),Hn([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),Hn([["\\ ",160],["~",160],["\\space",160]],"space"),Ee(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:(n,o,t,i)=>new Pa(n,t,i)}),Hn([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),Hn([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),Hn([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var w_={"&":"\\&","%":"\\%","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","\u221e":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},\u00b5:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",\u03a9:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function ql(n,o){var t;let i=null!=(t=o?.format)?t:"auto";return"auto"===i&&([i,n]=function B9(n){if((n=n.trim()).length<=1)return["latex",n];let o;return[o,n]=Gu(n),o?["latex",n]:n.startsWith("`")&&n.endsWith("`")?["ascii-math",n=n.substring(1,n.length-1)]:n.includes("\\")?["latex",n]:/\$.+\$/.test(n)?["latex",`\\text{${n}}`]:[void 0,n]}(n)),"ascii-math"===i?["ascii-math",hi(n=(n=(n=(n=(n=(n=n.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:o?.inlineShortcuts})]:["latex",n]}function hi(n,o){var t,i,a;if(!n)return"";let r,s=!1,l=null!=(t=o.inlineShortcuts)?t:w_;if(!s&&(n.startsWith("^")||n.startsWith("_"))&&(r=qa(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n=n[0]+"{"+r.match+"}",n+=hi(r.rest,o),s=!0),s||(r=n.match(/^(sqrt|\u221A)(.*)/),r&&(r=qa(r[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt{"+(null!=(i=r.match)?i:"\\placeholder{}")+"}",n+=hi(r.rest,o),s=!0)),s||(r=n.match(/^(\\cbrt|\u221B)(.*)/),r&&(r=qa(r[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt[3]{"+(null!=(a=r.match)?a:"\\placeholder{}")+"}",n+=hi(r.rest,o),s=!0)),s||(r=n.match(/^abs(.*)/),r&&(r=qa(r[1],{inlineShortcuts:l,noWrap:!0}),n="\\left|"+r.match+"\\right|",n+=hi(r.rest,o),s=!0)),s||(r=n.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),r&&(n="\\text{"+r[1]+"}",n+=hi(r[2],o),s=!0)),s||(r=n.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),r&&(n=C_(r[1],l),n+=hi(r[2],o),s=!0)),!s&&/^([fgh])[^a-zA-Z]/.test(n)&&(r=qa(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n="("===n[1]?n[0]+"\\left("+r.match+"\\right)":n[0]+r.match,n+=hi(r.rest,o),s=!0),s||(r=n.match(/^([a-zA-Z]+)(.*)/),r&&(n=C_(r[1],l),n+=hi(r[2],o),s=!0)),!s)if(r=qa(n,{inlineShortcuts:l,noWrap:!0}),r.match&&"/"===r.rest[0]){let c=qa(r.rest.slice(1),{inlineShortcuts:l,noWrap:!0});c.match&&(n="\\frac{"+r.match+"}{"+c.match+"}"+hi(c.rest,o)),s=!0}else r.match&&(n=n.startsWith("(")?"\\left("+r.match+"\\right)"+hi(r.rest,o):r.match+hi(r.rest,o),s=!0);return s||(r=n.match(/^(\s+)(.*)$/),r&&(n=" "+hi(r[2],o),s=!0)),n}function qa(n,o){let t="",i=n=n.trim(),a=n.charAt(0),s={"(":")","{":"}","[":"]"}[a];if(s){let r=1,l=1;for(;l<n.length&&r>0;)n[l]===a&&r++,n[l]===s&&r--,l++;0===r?(o.noWrap&&"("===a?t=hi(n.substring(1,l-1),o):("{"===a&&"}"===s&&(a="\\{",s="\\}"),t="\\left"+a+hi(n.substring(1,l-1),o)+"\\right"+s),i=n.slice(Math.max(0,l))):(t=n.substring(1,l),i="")}else{let r=n.match(/^([a-zA-Z]+)/);if(r){let l=Yu(null,n,o.inlineShortcuts);if(l)return l=l.replace("_{#?}",""),l=l.replace("^{#?}",""),{match:l,rest:n.slice(l.length)}}if(r=n.match(/^([a-zA-Z])/),r)return{match:r[1],rest:n.slice(1)};if(r=n.match(/^(-)?\d+(\.\d*)?/),r)return{match:r[0],rest:n.slice(r[0].length)};/^\\(left|right)/.test(n)||(r=n.match(/^(\\[a-zA-Z]+)/),r&&(i=n.slice(r[1].length),t=r[1]))}return{match:t,rest:i}}function C_(n,o){let t=Yu(null,n,o);return t?(t=t.replace("_{#?}",""),t=t.replace("^{#?}",""),t+=" "):t=n,t}var k_=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Gu(n){let o=n.trim();for(let t of k_)if(o.startsWith(t[0])&&o.endsWith(t[1]))return[!0,o.substring(t[0].length,o.length-t[1].length)];return[!1,n]}var H9=(n,o,t)=>(k_.some(i=>o.startsWith(i[0])&&o.endsWith(i[1]))||(o=`$$ ${o} $$`),o),Fl=class{constructor(n){Fl._registry[n]=this}static onPaste(n,o,t){var i;if("string"==typeof t){let s=new DataTransfer;s.setData("text/plain",t),t=s}let a=new ClipboardEvent("paste",{clipboardData:t,cancelable:!0});return!(null==(i=o.host)||!i.dispatchEvent(a))&&Fl._registry[n].onPaste(o,t)}static onCopy(n,o){if(!o.clipboardData)return;let t=n.model,i=t.selectionIsCollapsed?[0,t.lastOffset]:Bi(t.selection),a=t.getAtoms(i);if(a.every(s=>"text"===s.mode||!s.mode))o.clipboardData.setData("text/plain",a.filter(s=>s instanceof _s).map(s=>s.value).join(""));else if(a.every(s=>"latex"===s.mode))o.clipboardData.setData("text/plain",t.getAtoms(i,{includeChildren:!0}).map(s=>{var r;return null!=(r=s.value)?r:""}).join(""));else{let s;s=1===a.length&&void 0!==a[0].verbatimLatex?a[0].verbatimLatex:t.getValue(i,"latex-expanded"),o.clipboardData.setData("application/x-latex",s);try{o.clipboardData.setData("text/plain",n.options.onExport(n,s,i))}catch{}1===a.length&&("root"===a[0].type||"group"===a[0].type)&&(a=a[0].body.filter(l=>"first"!==l.type));try{o.clipboardData.setData("application/json+mathlive",JSON.stringify(a.map(l=>l.toJson())))}catch{}let r=n.computeEngine;if(r)try{r.jsonSerializationOptions={metadata:["latex"]};let l=r.parse(s),c=JSON.stringify(l.json);c&&o.clipboardData.setData("application/json",c)}catch{}}o.preventDefault()}static insert(n,o,t,i={}){return Fl._registry[n].insert(o,t,i)}onPaste(n,o){return!1}insert(n,o,t){return!1}},Cn=Fl;Cn._registry={};var Zi={"\\ne":"<mo>&ne;</mo>","\\neq":"<mo>&neq;</mo>","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"},T_="<mo>&#x2061;</mo>",Wu="<mo>&#8290;</mo>";function Ul(n){return n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dn(n,o){return n&&o.generateID?` extid="${n}"`:""}function K9(n,o,t){var i,a,s,r,l,c,d,f;let y=!1;o=o??n.atoms.length;let O="",N="",I=n.atoms[n.index];if("\\operatorname"===I.command)N=Vs(I.body),n.index+=1;else{let z=null!=(a=null==(i=I.style)?void 0:i.variant)?a:"",$=null!=(r=null==(s=I.style)?void 0:s.variantStyle)?r:"";for(;n.index<o&&("mord"===I.type||"macro"===I.type)&&!I.isDigit()&&z===(null!=(c=null==(l=I.style)?void 0:l.variant)?c:"")&&$===(null!=(f=null==(d=I.style)?void 0:d.variantStyle)?f:"");)N+=Vs([I]),n.index+=1,I=n.atoms[n.index]}return N.length>0&&(y=!0,O=`<mi>${N}</mi>`,("mi"===n.lastType||"mn"===n.lastType||"mtext"===n.lastType||"fence"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(O)&&(O=Wu+O),N.endsWith(">f</mi>")||N.endsWith(">g</mi>")?(O+=T_,n.lastType="applyfunction"):n.lastType=/^<mo>(.*)<\/mo>$/.test(O)?"mo":"mi",Ws(N,n,t)||(n.mathML+=O)),y}function Ws(n,o,t){var i;let a=o.atoms[o.index-1];if(!a)return!1;if(!a.superscript&&!a.subscript){if("msubsup"!==(null==(i=o.atoms[o.index])?void 0:i.type))return!1;a=o.atoms[o.index],o.index+=1}let s=Yt(a.superscript,t),r=Yt(a.subscript,t);if(!s&&!r)return!1;let l="";return s&&r?l=`<msubsup>${n}${r}${s}</msubsup>`:s?l=`<msup>${n}${s}</msup>`:r&&(l=`<msub>${n}${r}</msub>`),o.mathML+=l,o.lastType="",!0}function G9(n,o,t){o=o??n.atoms.length;let i=n.index,a="";for(;n.index<o&&"text"===n.atoms[n.index].mode;)a+=n.atoms[n.index].value?n.atoms[n.index].value:" ",n.index+=1;return a.length>0&&(n.mathML+=`<mtext ${dn(n.atoms[i].id,t)}\n      >${a}</mtext>`,n.lastType="mtext",!0)}function W9(n,o,t){o=o??n.atoms.length;let i=n.index,a="",s=function Y9(n){let o=-1,t=n.index,i=!1,a=!1;for(;t<n.atoms.length&&!i&&!a;){let s=n.atoms[t];i=!s.isDigit(),a=!i&&void 0!==s.superscript,t++}return a&&(o=t-1),o}(n);for(s>=0&&s<o&&(o=s);n.index<o&&n.atoms[n.index].isDigit();)a+=n.atoms[n.index].asDigit(),n.index+=1;return!(a.length<=0||(a="<mn"+dn(n.atoms[i].id,t)+">"+a+"</mn>",s<0&&function $9(n){return n.index<n.atoms.length&&n.atoms[n.index].superscript&&"msubsup"===n.atoms[n.index].type}(n)&&(s=n.index,n.index+=1),Ws(a,n,t)||(n.mathML+=a,n.lastType="mn"),0))}function V9(n,o,t){let i=!1,a="",s="";if(n.index<(o=o??n.atoms.length)&&"mopen"===n.atoms[n.index].type){let r=!1,l=0,c=n.index,d=-1,f=c+1;for(;f<o&&!r;)"mopen"===n.atoms[f].type?l+=1:"mclose"===n.atoms[f].type&&(l-=1),-1===l&&(r=!0,d=f),f+=1;r&&(a="<mrow>",a+=Fa(n.atoms[c],t),a+=Yt(n.atoms,t,c+1,d),a+=Fa(n.atoms[d],t),a+="</mrow>",n.index=d+1,("mi"===n.lastType||"mn"===n.lastType||"mfrac"===n.lastType||"fence"===n.lastType)&&(n.mathML+=Wu),Ws(a,n,t)&&(i=!0,n.lastType="",a=""),s="fence")}return a.length>0&&(i=!0,n.mathML+=a,n.lastType=s),i}function X9(n,o,t){let i=!1,a="",s="",r=n.atoms[n.index];if(n.index<(o=o??n.atoms.length)&&("mbin"===r.type||"mrel"===r.type))a+=Vu(n.atoms[n.index],t),n.index+=1,s="mo";else if(n.index<o&&"mop"===r.type){if("over-under"===r.subsupPlacement&&(r.superscript||r.subscript)){let l=Fa(r,t);r.superscript&&r.subscript?(a+="<munderover>"+l,a+=Yt(r.subscript,t),a+=Yt(r.superscript,t),a+="</munderover>"):r.superscript?(a+="<mover>"+l,a+=Yt(r.superscript,t),a+="</mover>"):r.subscript&&(a+="<munder>"+l,a+=Yt(r.subscript,t),a+="</munder>"),s="mo"}else{let l=n.atoms[n.index],c="\\operatorname"===l.value,d=c?'<mi class="MathML-Unit"'+dn(l.id,t)+">"+Vs(l.value)+"</mi>":Fa(l,t);a+=d,c||/^<mo>(.*)<\/mo>$/.test(d)?s=c?"mi":"mo":(a+=T_,s="applyfunction")}("mi"===n.lastType||"mn"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(a)&&(a=Wu+a),n.index+=1}return a.length>0&&(i=!0,Ws(a,n,t)||(n.mathML+=a,n.lastType=s)),i}function Yt(n,o,t,i){let a={atoms:[],index:t??0,mathML:"",lastType:""};if("number"==typeof n||"boolean"==typeof n)a.mathML=n.toString();else if("string"==typeof n)a.mathML=n;else if(n instanceof Me)a.mathML=Vu(n,o);else if(Array.isArray(n)){a.atoms=n;let s=0;for(i=i||(n?n.length:0);a.index<i;)if(G9(a,i,o)||W9(a,i,o)||K9(a,i,o)||X9(a,i,o)||V9(a,i,o))s+=1;else if(a.index<i){let r=Vu(a.atoms[a.index],o);"mn"===a.lastType&&r.length>0&&"genfrac"===a.atoms[a.index].type&&(r="<mo>&#x2064;</mo>"+r),a.lastType="genfrac"===a.atoms[a.index].type?"mfrac":"",a.index+=1,Ws(r,a,o)?s+=1:r.length>0&&(a.mathML+=r,s+=1)}s>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a.mathML}function Fa(n,o){let t="",i=Vs(n.value);return i&&(t="<mo"+dn(n.id,o)+">"+i+"</mo>"),t}function Vs(n){if(!n)return"";if("string"==typeof n)return Ul(n);if(!Array.isArray(n)&&"string"==typeof n.body)return Ul(n.body);let o="";for(let t of n)"string"==typeof t.value&&(o+=t.value);return Ul(o)}function Vu(n,o){var t,i,a,s,r,l,c,d,f,y,O,N,I,z,$,Y,V,te,K,X,ye,ae,oe,pe,je;let At,rn,Qt,Ot,mt,vt,Le={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},st={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."},sn={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},ve="",Nt="",Lt=null!=(i={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[null!=(t=n.fontFamily)?t:n.font])?i:"";Lt&&(Lt=` mathvariant="${Lt}"`);let{command:qt}=n;if("text"===n.mode)ve=`<mi${dn(n.id,o)}>${n.value}</mi>`;else switch(n.type){case"first":case"line":case"overlap":case"msubsup":case"phantom":case"composition":case"rule":case"chem":case"error":break;case"group":case"root":ve=Zi[n.command]?Zi[n.command]:Yt(n.body,o);break;case"array":if((n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(ve+="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(ve+="<mo>"+(Zi[n.leftDelim]||n.leftDelim)+"</mo>")),ve+="<mtable",n.colFormat){for(ve+=' columnalign="',Qt=0;Qt<n.colFormat.length;Qt++)n.colFormat[Qt].align&&(ve+={l:"left",c:"center",r:"right"}[n.colFormat[Qt].align]+" ");ve+='"'}for(ve+=">",rn=0;rn<n.array.length;rn++){for(ve+="<mtr>",At=0;At<n.array[rn].length;At++)ve+="<mtd>"+Yt(n.array[rn][At],o)+"</mtd>";ve+="</mtr>"}ve+="</mtable>",(n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(n.rightDelim&&"."!==n.rightDelim&&(ve+="<mo>"+(Zi[n.leftDelim]||n.rightDelim)+"</mo>"),ve+="</mrow>");break;case"genfrac":(n.leftDelim||n.rightDelim)&&(ve+="<mrow>"),n.leftDelim&&"."!==n.leftDelim&&(ve+="<mo"+dn(n.id,o)+">"+(Zi[n.leftDelim]||n.leftDelim)+"</mo>"),n.hasBarLine?(ve+="<mfrac>",ve+=Yt(n.above,o)||"<mi>&nbsp;</mi>",ve+=Yt(n.below,o)||"<mi>&nbsp;</mi>",ve+="</mfrac>"):(ve+="<mtable"+dn(n.id,o)+">",ve+="<mtr>"+Yt(n.above,o)+"</mtr>",ve+="<mtr>"+Yt(n.below,o)+"</mtr>",ve+="</mtable>"),n.rightDelim&&"."!==n.rightDelim&&(ve+="<mo"+dn(n.id,o)+">"+(Zi[n.rightDelim]||n.rightDelim)+"</mo>"),(n.leftDelim||n.rightDelim)&&(ve+="</mrow>");break;case"surd":n.hasEmptyBranch("above")?(ve+="<msqrt"+dn(n.id,o)+">",ve+=Yt(n.body,o),ve+="</msqrt>"):(ve+="<mroot"+dn(n.id,o)+">",ve+=Yt(n.body,o),ve+=Yt(n.above,o),ve+="</mroot>");break;case"leftright":ve="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(ve+="<mo"+dn(n.id,o)+">"+(null!=(a=Zi[n.leftDelim])?a:n.leftDelim)+"</mo>"),n.body&&(ve+=Yt(n.body,o)),n.rightDelim&&"."!==n.rightDelim&&(ve+="<mo"+dn(n.id,o)+">"+(null!=(s=Zi[n.rightDelim])?s:n.rightDelim)+"</mo>"),ve+="</mrow>";break;case"sizeddelim":case"delim":ve+='<mo separator="true"'+dn(n.id,o)+">"+(Zi[n.delim]||n.delim)+"</mo>";break;case"accent":ve+='<mover accent="true"'+dn(n.id,o)+">",ve+=Yt(n.body,o),ve+="<mo>"+(Zi[qt]||n.accent)+"</mo>",ve+="</mover>";break;case"overunder":mt=n.above,Ot=n.below,(n.svgAbove||mt)&&(n.svgBelow||Ot)?vt=n.body:mt&&mt.length>0?(vt=n.body,null!=(l=null==(r=n.body)?void 0:r[0])&&l.below?(Ot=n.body[0].below,vt=n.body[0].body):"first"===(null==(d=null==(c=n.body)?void 0:c[0])?void 0:d.type)&&null!=(y=null==(f=n.body)?void 0:f[1])&&y.below&&(Ot=n.body[1].below,vt=n.body[1].body)):Ot&&Ot.length>0&&(vt=n.body,null!=(N=null==(O=n.body)?void 0:O[0])&&N.above?(mt=n.body[0].above,vt=n.body[0].body):"first"===(null==(z=null==(I=n.body)?void 0:I[0])?void 0:z.type)&&null!=(Y=null==($=n.body)?void 0:$[1])&&Y.above&&(mt=n.body[1].overscript,vt=n.body[1].body)),(n.svgAbove||mt)&&(n.svgBelow||Ot)?(ve+=`<munderover ${Lt} ${dn(n.id,o)}>`,ve+=null!=(V=Le[n.svgBody])?V:Yt(vt,o),ve+=null!=(te=Le[n.svgBelow])?te:Yt(Ot,o),ve+=null!=(K=Le[n.svgAbove])?K:Yt(mt,o),ve+="</munderover>"):n.svgAbove||mt?(ve+=`<mover ${Lt} ${dn(n.id,o)}>`+(null!=(X=Le[n.svgBody])?X:Yt(vt,o)),ve+=null!=(ye=Le[n.svgAbove])?ye:Yt(mt,o),ve+="</mover>"):(n.svgBelow||Ot)&&(ve+=`<munder ${Lt} ${dn(n.id,o)}>`+(null!=(ae=Le[n.svgBody])?ae:Yt(vt,o)),ve+=null!=(oe=Le[n.svgBelow])?oe:Yt(Ot,o),ve+="</munder>");break;case"placeholder":case"mord":{ve=st[qt]||qt||("string"==typeof n.value?n.value:"");let nn=qt?qt.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;nn?ve="&#x"+nn[1]+";":ve.length>0&&ve.startsWith("\\")&&(ve="string"==typeof n.value&&n.value.charCodeAt(0)>255?"&#x"+("000000"+n.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof n.value?n.value.charAt(0):"");let In=/\d/.test(ve)?"mn":"mi";ve=`<${In}${Lt}${dn(n.id,o)}>${Ul(ve)}</${In}>`;break}case"mbin":case"mrel":case"minner":ve=qt&&st[qt]?"<mi"+dn(n.id,o)+">"+st[qt]+"</mi>":qt&&Zi[qt]?"<mo"+dn(n.id,o)+">"+Zi[qt]+"</mo>":Fa(n,o);break;case"mpunct":ve='<mo separator="true"'+dn(n.id,o)+">"+(null!=(pe=Zi[qt])?pe:qt)+"</mo>";break;case"mop":"\u200b"!==n.body&&(ve="<mo"+dn(n.id,o)+">",ve+="\\operatorname"===qt?n.body:qt||n.body,ve+="</mo>");break;case"box":ve='<menclose notation="box"',n.backgroundcolor&&(ve+=' mathbackground="'+n.backgroundcolor+'"'),ve+=dn(n.id,o)+">"+Yt(n.body,o)+"</menclose>";break;case"spacing":ve+='<mspace width="'+(null!=(je=sn[qt])?je:0)+'em"/>';break;case"enclose":ve='<menclose notation="';for(let nn in n.notation)Object.prototype.hasOwnProperty.call(n.notation,nn)&&n.notation[nn]&&(ve+=Nt+nn,Nt=" ");ve+=dn(n.id,o)+'">'+Yt(n.body,o)+"</menclose>";break;case"space":ve+="&nbsp;";break;case"mopen":case"mclose":ve+=Fa(n,o);break;case"macro":{let nn=n.command+Vs(n.macroArgs);nn&&(ve+=`<mo ${dn(n.id,o)}>${nn}</mo>`)}break;case"latexgroup":case"tooltip":ve+=Yt(n.body,o);break;case"latex":ve+="<mtext"+dn(n.id,o)+">"+n.value+"</mtext>"}return ve}var hs={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Xu={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function Xs(n){let o=0;if(Bn(n))for(let t of n)"first"!==t.type&&(o+=1);return 1===o}function A_(n){let o="";if(Bn(n))for(let t of n)"first"!==t.type&&"string"==typeof t.value&&(o+=t.value);return o}function tn(n,o,t){var i,a,s,r;function c(f){return"<emphasis>"+f+"</emphasis>"}if(!o)return"";let d="";if(Bn(o)){let f=!1,y=!1;for(let O=0;O<o.length;O++)"first"!==o[O].type&&("text"!==o[O].mode&&(y=!1),O<o.length-2&&"mopen"===o[O].type&&"mclose"===o[O+2].type&&"mord"===o[O+1].type?(d+=" of ",d+=c(tn(n,o[O+1],t)),O+=2):"text"===o[O].mode?y?d+=null!=(i=o[O].value)?i:" ":(y=!0,d+=tn("text",o[O],t)):o[O].isDigit()?f?d+=o[O].asDigit():(f=!0,d+=tn(n,o[O],t)):(f=!1,d+=tn(n,o[O],t)))}else if("text"===o.mode)o.id&&"math"===n&&(d+='<mark name="'+o.id.toString()+'"/>'),d+=o.value;else{o.id&&"math"===n&&(d+='<mark name="'+o.id.toString()+'"/>');let f="",y="",O="",N=!1,{command:I}=o;switch(o.type){case"accent":"\\vec"===I&&(d+="vector "+tn(n,o.body,t));break;case"array":let z=o.array,$=o.environmentName;if(Object.keys(Xu).includes($)){d+=` begin ${Xu[$]} `;for(let K=0;K<z.length;K++){K>0&&(d+=","),d+=` row ${K+1} `;for(let X=0;X<z[K].length;X++)X>0&&(d+=","),d+=` column ${X+1}: `,d+=tn("math",z[K][X],t)}d+=` end ${Xu[$]} `}break;case"group":"\\ne"===I?d+=" not equal ":("\\not"===I&&(d+=" not "),d+=tn("math",o.body,t));break;case"root":d+=tn("math",o.body,t);break;case"genfrac":if(f=tn("math",o.above,t),y=tn("math",o.below,t),Xs(o.above)&&Xs(o.below)){let K={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[A_(o.above)+"/"+A_(o.below)];K?d=K:d+=f+" over "+y}else d+=' the fraction <break time="150ms"/>'+f+' over <break time="150ms"/>'+y+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(O=tn("math",o.body,t),o.hasEmptyBranch("above"))d+=Xs(o.body)?" the square root of "+O+" , ":' the square root of <break time="200ms"/>'+O+'. <break time="200ms"/> End square root';else{let K=tn("math",o.above,t);K=K.trim();let X=K.replace(/<mark([^/]*)\/>/g,"");d+="3"===X?' the cube root of <break time="200ms"/>'+O+'. <break time="200ms"/> End cube root':"n"===X?' the nth root of <break time="200ms"/>'+O+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+K+', of <break time="200ms"/>'+O+'. <break time="200ms"/> End root'}break;case"leftright":{let K=o;d+=null!=(a=K.leftDelim?hs[K.leftDelim]:void 0)?a:K.leftDelim,d+=tn("math",o.body,t),d+=null!=(s=K.rightDelim?hs[K.rightDelim]:void 0)?s:K.rightDelim}break;case"rule":case"overunder":case"overlap":case"space":case"spacing":break;case"line":let Y=o.position;d+=`${Y} `,d+=tn("math",o.body,t),d+=` end ${Y} `;break;case"macro":let V=I.replace(/^\\/g,""),te=Ou()[V];te&&(d+=null!=te&&te.expand?tn("math",o.body,t):`${V} `);break;case"placeholder":d+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===I||"\\mathrel"===I||"\\mathopen"===I||"\\mathclose"===I||"\\mathpunct"===I||"\\mathord"===I||"\\mathinner"===I){d=tn(n,o.body,t);break}let K=o.isDigit()?o.asDigit():o.value,X=o.command;if(("delim"===o.type||"sizeddelim"===o.type)&&(X=o.value,K=X),"text"===n)d+=K;else{if("mbin"===o.type&&(d+='<break time="150ms"/>'),K){let ye=hs[K]||(X?hs[X.trim()]:"");if(ye)d+=" "+ye;else{let ae=X?function e7(n){let o="";return n.startsWith("\\")&&(o=" "+n.replace("\\","")+" "),o}(X.trim()):"";d+=ae||function l(f){return t.textToSpeechMarkup?/[a-z]/.test(f)?` <say-as interpret-as="character">${f}</say-as>`:/[A-Z]/.test(f)?`capital <say-as interpret-as="character">${f.toLowerCase()}</say-as>`:f:/[a-z]/.test(f)?" '"+f.toUpperCase()+"'":/[A-Z]/.test(f)?" 'capital "+f.toUpperCase()+"'":f}(K)}}else d+=tn("math",o.body,t);"mbin"===o.type&&(d+='<break time="150ms"/>')}break}case"mop":if("\u200b"!==o.value){let K=o.command;if("\\sum"===K)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))d+=" the summation of";else{let X=tn("math",o.subscript,t);X=X.trim(),d+=' the summation from <break time="200ms"/>'+X+'<break time="200ms"/> of <break time="150ms"/>',N=!0}else{let X=tn("math",o.superscript,t);X=X.trim();let ye=tn("math",o.subscript,t);ye=ye.trim(),d+=' the summation from <break time="200ms"/>'+ye+'<break time="200ms"/> to  <break time="200ms"/>'+X+'<break time="200ms"/> of <break time="150ms"/>',N=!0}else if("\\prod"===K)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))d+=" the product  of ";else{let X=tn("math",o.subscript,t);X=X.trim(),d+=' the product from <break time="200ms"/>'+X+'<break time="200ms"/> of <break time="150ms"/>',N=!0}else{let X=tn("math",o.superscript,t);X=X.trim();let ye=tn("math",o.subscript,t);ye=ye.trim(),d+=' the product from <break time="200ms"/>'+ye+'<break time="200ms"/> to <break time="200ms"/>'+X+'<break time="200ms"/> of <break time="150ms"/>',N=!0}else if("\\int"===K)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))d+=' the integral of <break time="200ms"/> ';else{let X=tn("math",o.superscript,t);X=X.trim();let ye=tn("math",o.subscript,t);ye=ye.trim(),d+=' the integral from <break time="200ms"/>'+c(ye)+'<break time="200ms"/> to <break time="200ms"/>'+c(X)+' <break time="200ms"/> of ',N=!0}else"string"==typeof o.value?d+=(null!=(r=hs[o.value])?r:o.command?hs[o.command]:void 0)||" "+o.value:o.command&&(d+="\\mathop"===o.command?tn("math",o.body,t):"\\operatorname"===o.command?function n7(n,o){return n?n.map(t=>t.value).join(""):""}(o.body):o.command.startsWith("\\")?" "+o.command.slice(1):" "+o.command)}break;case"enclose":O=tn("math",o.body,t),d+=" crossed out "+O+". End crossed out."}if(!N&&!o.hasEmptyBranch("superscript")){let z=tn(n,o.superscript,t);z=z.trim();let $=z.replace(/<[^>]*>/g,"");if(Xs(o.superscript)){if("math"===n){let Y=function t7(n){if(Bn(n))for(let o of n)if("first"!==o.type&&o.id)return o.id.toString();return""}(o.superscript);Y&&(d+='<mark name="'+Y+'"/>')}"\u2032"===$?d+=" prime ":"2"===$?d+=" squared ":"3"===$?d+=" cubed ":Number.isNaN(Number.parseInt($))?d+=" to the "+z+"; ":d+=' to the <say-as interpret-as="ordinal">'+$+"</say-as> power; "}else Number.isNaN(Number.parseInt($))?d+=" raised to the "+z+"; ":d+=' raised to the <say-as interpret-as="ordinal">'+$+"</say-as> power; "}if(!N&&!o.hasEmptyBranch("subscript")){let z=tn("math",o.subscript,t);z=z.trim(),d+=Xs(o.subscript)?" sub "+z:" subscript "+z+". End subscript. "}}return d}function gs(n,o){var t;let i=kt(Ze({},o),{textToSpeechRulesOptions:Ze({},o.textToSpeechRulesOptions)});if("sre"===i.textToSpeechRules&&"sre"in globalThis){let s=Yt(n,i);return s?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=null!=(t=i.textToSpeechRulesOptions)?t:{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,"ssml"===i.textToSpeechRulesOptions.markup&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&globalThis.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),globalThis.sre.System.getInstance().toSpeech(s)):""}let a=tn("math",n,i);if("ssml"===i.textToSpeechMarkup){let s="";i.speechEngineRate&&(s='<prosody rate="'+i.speechEngineRate+'">'),a='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+s+"<p><s>"+a+"</s></p>"+(s?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else a="mac"===i.textToSpeechMarkup&&"macos"===rs()?a.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):a.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return a}function oo(n,o,t,i){let a=o.split(" ");for(let s of a){let r=s.match(/(.*):(.*)/);if(r){let l=i??{};"active"===r[2]?l.passive=!1:l[r[2]]=!0,n.addEventListener(r[1],t,l)}else n.addEventListener(s,t,i)}}function Rl(n,o,t,i){let a=o.split(" ");for(let s of a){let r=s.match(/(.*):(.*)/);if(r){let l=i??{};"active"===r[2]?l.passive=!1:l[r[2]]=!0,n.removeEventListener(r[1],t,l)}else n.removeEventListener(s,t,i)}}function O_(n){var o;Hm();let t=document.getElementById(n);return t?t.dataset.refcount=Number(Number.parseInt(null!=(o=t.getAttribute("data-refcount"))?o:"0")+1).toString():(t=document.createElement("div"),t.setAttribute("aria-hidden","true"),t.dataset.refcount="1",t.id=n,document.body.append(t)),t}function S_(n){var o;if(!n)return;let t=Number.parseInt(null!=(o=n.getAttribute("data-refcount"))?o:"0");t<=1?n.remove():n.dataset.refcount=Number(t-1).toString()}function Ua(n){var o;return(null==(o=n.element)?void 0:o.mathfield)===n}function er(n){let o=function i7(n){var o,t;return null!=(t=null!=(o=n.querySelector(".ML__caret"))?o:n.querySelector(".ML__text-caret"))?t:n.querySelector(".ML__latex-caret")}(n);if(!o)return null;let t=o.getBoundingClientRect();return{x:t.right,y:t.bottom,height:t.height}}function o7(n){var o;if(!n.parent)return"root";let t=null!=(o=n.parent.id)?o:"";return t+="string"==typeof n.treeBranch?"-"+n.treeBranch:`-${n.treeBranch[0]}/${n.treeBranch[0]}`,t}function E_(n,o){if(!o)return null;let t=n.field.getBoundingClientRect(),i=o.right-o.left,a=o.bottom-o.top,s=Math.ceil(o.left-t.left+n.field.scrollLeft),r=Math.ceil(o.top-t.top);return{left:s,right:s+i,top:r,bottom:r+a}}function M_(n){let o=n.getBoundingClientRect(),t=parseInt(getComputedStyle(n).marginRight),i={top:o.top-1,bottom:o.bottom,left:o.left,right:o.right-1+t};if(0===n.children.length||"SVG"===n.tagName.toUpperCase())return i;for(let a of n.children)if(1===a.nodeType&&"atomId"in a.dataset&&!a.classList.contains("pstrut")){let s=M_(a);i.left=Math.min(i.left,s.left),i.right=Math.max(i.right,s.right),i.top=Math.min(i.top,s.top),i.bottom=Math.max(i.bottom,s.bottom)}return i}function tr(n,o){var t,i;if(!o.id)return null;let a=null!=(i=null==(t=n.atomBoundsCache)?void 0:t.get(o.id))?i:null;if(null!==a)return a;let s=n.field.querySelector(`[data-atom-id="${o.id}"]`);return a=s?M_(s):null,n.atomBoundsCache&&(a?n.atomBoundsCache.set(o.id,a):n.atomBoundsCache.delete(o.id)),a??null}function I_(n,o){return n.model.selection.ranges.reduce((t,i)=>t.concat(...function a7(n,o,t){let i=new Map;for(let a of n.model.getAtoms(o,{includeChildren:!0})){if(null!=t&&t.excludeAtomsWithBackground&&a.style.backgroundColor)break;let s=E_(n,tr(n,a));if(s){let r=o7(a);if(i.has(r)){let l=i.get(r);i.set(r,{left:Math.min(l.left,s.left),right:Math.max(l.right,s.right),top:Math.min(l.top,s.top),bottom:Math.max(l.bottom,s.bottom)})}else i.set(r,s)}}return[...i.values()]}(n,i,o)),[])}function Z_(n){let o=0,t=0,i=n.offsetWidth,a=n.offsetHeight;for(;n instanceof HTMLElement;)o+=n.offsetTop,t+=n.offsetLeft,n=n.offsetParent;return new DOMRect(t,o,i,a)}var P_={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},j_={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},D_=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,r7=[/^[a-z]$/,/^[A-Z]$/,D_,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],l7={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function ed(n){if(!n)return"";let{style:o}=n;if(void 0===o.variant)return"";let t=o.variant;return o.variantStyle&&"up"!==o.variantStyle&&(t+="-"+o.variantStyle),t}function fs(n){return[wn(n.map(o=>o[0])),n.map(o=>o[1]).some(o=>!0===o)]}function g7(n,o){return fs(Ri(n,"fontSize").map(t=>{var i,a;let[s,r]=function h7(n,o){return fs(Ri(n,"fontSeries").map(t=>{let[i,a]=function p7(n,o){return fs(Ri(n,"fontShape").map(t=>{let[i,a]=function _7(n,o){return[wn(n.map(t=>Me.serialize(t,o))),!0]}(t,o),{fontShape:s}=t[0].style;return"it"===s?["\\textit{"+i+"}",!1]:"sl"===s?["\\textsl{"+i+"}",!1]:"sc"===s?["\\textsc{"+i+"}",!1]:"n"===s?["\\textup{"+i+"}",!1]:s?[`{\\fontshape{${t[0].style.fontShape}}${i}`,!1]:[i,a]}))}(t,o),{fontSeries:s}=t[0].style;return"b"===s?[`\\textbf{${i}}`,!1]:"l"===s?[`\\textlf{${i}}`,!1]:"m"===s?[`\\textmd{${i}}`,!1]:s?[`\\fontseries{${s}}${i}`,!1]:[i,a]}))}(t,o),l=null!=(a=["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][null!=(i=t[0].style.fontSize)?i:""])?a:"";return l?[`{\\${l} ${s}}`,r]:[s,r]}))}function b7(n,o){return fs(Ri(n,"backgroundColor").map(t=>{var i,a;let[s,r]=function v7(n,o){var t;if(!n||0===n.length)return["",!1];let i=null==(t=n[0].parent)?void 0:t.style.color;return fs(Ri(n,"color").map(a=>{var s,r;let[l,c]=function x7(n,o){return function f7(n,o){return fs(Ri(n,"fontFamily").map(t=>{var i,a;let[s,r]=g7(t,o),l=null!=(a={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[null!=(i=t[0].style.fontFamily)?i:""])?a:"";return l?[`\\${l}{${s}}`,!1]:t[0].style.fontFamily?[`\\fontfamily{${t[0].style.fontFamily}}${s}`,r]:[s,r]}))}(n,o)}(a,o);return null!=(s=o.skipStyles)&&s||!a[0].style.color||"none"===a[0].style.color||i===a[0].style.color?[l,c]:[`\\textcolor{${null!=(r=a[0].style.verbatimColor)?r:a[0].style.color}}{${l}}`,!1]}))}(t,o),l=t[0].computedStyle;return null!=(i=o.skipStyles)&&i||!l.backgroundColor||"none"===l.backgroundColor?[s,r]:[`\\colorbox{${null!=(a=l.verbatimBackgroundColor)?a:l.backgroundColor}}{${s}}`,!1]}))}new class extends ia{constructor(){super("math")}createAtom(n,o,t){var i,a,s,r,l;let c=o.getDefinition(n,"math");if(null===c)return new Me("mord",o,{mode:"math",command:n,value:n,style:t});if("symbol"===c.definitionType){let f=new Me(null!=(i=c.type)?i:"mord",o,{mode:"math",command:null!=(a=c.command)?a:n,value:String.fromCodePoint(c.codepoint),style:t});return null!=(s=c.isFunction)&&s&&(f.isFunction=!0),n.startsWith("\\")&&(f.verbatimLatex=n),f}let d=new Me("mord",o,{mode:"math",command:null!=(r=c.command)?r:n,value:n,style:t});return null!=(l=c.isFunction)&&l&&(d.isFunction=!0),n.startsWith("\\")&&(d.verbatimLatex=n),d}serialize(n,o){let{parent:t}=n[0],i=t?.computedStyle.fontSize;return wn(Ri(n,"fontSize").map(a=>{let s=function m7(n,o){let{parent:t}=n[0],i=t?.computedStyle.backgroundColor;return wn(Ri(n,"backgroundColor").map(a=>{var s,r;let l=function d7(n,o){let{parent:t}=n[0],i=t?.computedStyle.color;return wn(Ri(n,"color").map(a=>{var s,r;let l=function u7(n,o){var t;let{parent:i}=n[0],a=ed(i),s=null!=(t=i?.mode)?t:"math";return wn(Ri(n,"variant").map(r=>{let l=ed(r[0]);if(r.every(d=>{let f=d.context.getDefinition(d.command,s);return!(!f||"function"===f.definitionType||!f.variant)&&ed(d)===l}))return wn(r.map(d=>Me.serialize(d,o)));let c="";return l&&l!==a&&(c={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathnormal{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[l]),c?c+wn(r.map(d=>Me.serialize(d,o)))+"}":wn(r.map(d=>Me.serialize(d,o)))}))}(a,o),c=a[0].computedStyle;return null!=(s=o.skipStyles)&&s||!c.color||t&&i===c.color?l:"\\textcolor{"+(null!=(r=c.verbatimColor)?r:c.color)+"}{"+l+"}"}))}(a,o),c=a[0].computedStyle;return!(null!=(s=o.skipStyles)&&s)&&l.trim()&&c.backgroundColor&&(!t||i!==c.backgroundColor)&&(a.length>0||!(a[0]instanceof ja))&&(l=`\\ensuremath{${l}}`,l=`\\colorbox{${null!=(r=c.verbatimBackgroundColor)?r:c.backgroundColor}}{${l}}`),l}))}(a,o),r=a[0].computedStyle.fontSize;return!r||t&&i===r?s:"\\"+["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][r]+" "+s}))}applyStyle(n,o){if(void 0===o.variant)return"";let t="auto"!==o.letterShapeStyle&&o.letterShapeStyle?o.letterShapeStyle:"tex",{variant:i}=o,{variantStyle:a}=o;"normal"===i&&!a&&/[\u00A3\u0131\u0237]/.test(n.value)&&(i="main",a="italic"),"normal"===i&&!a&&1===n.value.length&&r7.forEach((c,d)=>{c.test(n.value)&&"it"===l7[t][d]&&(a="italic")}),"up"===a&&(a=void 0);let s=a?i+"-"+a:i,[r,l]=P_[s];return j_[i]&&!j_[i].test(n.value)?(n.value=function $L(n,o,t){if(!/[A-Za-z\d]/.test(n)||!o&&!t)return n;let i=n.codePointAt(0);if(void 0===i)return n;for(let a of Vm)if((!o||a.variant===o)&&(!t||a.style===t)&&i>=a.offset&&i<a.offset+a.len){let s=a.start+i-a.offset;return String.fromCodePoint(Au[s]||s)}return n}(n.value,i,a),null):(D_.test(n.value)&&(n.classes+=" lcGreek"),l&&(n.classes+=" "+l),r)}};var N_={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function Qo(n){let o=0;for(let t=0;t<n.length;t++)o=Math.imul(31,o)+n.charCodeAt(t)|0;return Math.abs(o)}function qo(n,o,t){var i,a;if(!o)return null;let s=null!=(i=n?.getRootNode())?i:document?.head;if(!s)return null;s===document&&(s=document.head);let r=s.querySelector(`style[data-id="${t}"]`);if(r){let l=Number.parseFloat(null!=(a=r.getAttribute("data-refcount"))?a:"0");r.dataset.refcount=Number(l+1).toString()}else{let l=document.createElement("style");l.dataset.id=t,l.dataset.refcount="1",l.append(document.createTextNode(o)),s.appendChild(l)}return{release:()=>{var l;let c=s.querySelector(`style[data-id="${t}"]`);if(c){let d=Number.parseFloat(null!=(l=c.getAttribute("data-refcount"))?l:"0");1===d?c.remove():c.dataset.refcount=Number(d-1).toString()}}}}function Q_(n){let o=n.split("+"),t={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:o.pop()};return o.includes("shift")&&(t.shift=!0),o.includes("alt")&&(t.alt=!0),o.includes("ctrl")&&(t.ctrl=!0),o.includes("cmd")&&(t.cmd=!0),o.includes("win")&&(t.win=!0),o.includes("meta")&&(t.meta=!0),t}function Bl(n){let o="";return n.shift&&(o+="shift+"),n.alt&&(o+="alt+"),n.ctrl&&(o+="ctrl+"),n.cmd&&(o+="cmd+"),n.win&&(o+="win+"),n.meta&&(o+="meta+"),o+n.key}new class extends ia{constructor(){super("text")}createAtom(n,o,t){let i=o.getDefinition(n,"text");return i&&"symbol"===i.definitionType?new _s(n,String.fromCodePoint(i.codepoint),t??{},o):null}serialize(n,o){var t;let[i,a]=b7(n,o);return!0===(null!=(t=o.skipModeCommand)&&t)&&(a=!1),a&&(i=`\\text{${i}}`),i}applyStyle(n,o){var t,i,a,s,r;let{fontFamily:l}=o;if(N_[l]?n.classes+=" "+N_[l]:l&&n.setStyle("font-family",l),o.fontShape&&(n.classes+=" ",n.classes+=null!=(t={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[o.fontShape])?t:""),o.fontSeries){let c=o.fontSeries.match(/(.?[lbm])?(.?[cx])?/);c&&(n.classes+=" ",n.classes+=null!=(a={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[null!=(i=c[1])?i:""])?a:"",n.classes+=" ",n.classes+=null!=(r={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[null!=(s=c[2])?s:""])?r:"")}return"Main-Regular"}},new class extends ia{constructor(){super("latex")}createAtom(n,o,t){return new jn(n,o)}serialize(n,o){return n.filter(t=>t instanceof jn&&!t.isSuggestion).map(t=>t.value).join("")}applyStyle(){return null}};var Ra,q_="apple"===td()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u0131"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\u02dd"],KeyH:["h","H","\u02d9","\xd3"],KeyI:["i","I","\u02c6","\u02c6"],KeyJ:["j","J","\u2206","\xd4"],KeyK:["k","K","\u02da","\uf8ff"],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","\u02dc","\u02dc"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae","\u2030"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","\u2020","\u02c7"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\u02db"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","\u03a9","\xb8"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xb1"],BracketLeft:["[","{","\u201c","\u201d"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","\u2026","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","\u02dc","`","`"],Comma:[",","<","\u2264","\xaf"],Period:[".",">","\u2265","\u02d8"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===td()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","\u20ac",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},C7={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},nr=[];function td(){switch(rs()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function wo(n){(!n.platform||n.platform===td())&&nr.push(n)}function F_(n){Ra=nr.find(o=>n.startsWith(o.locale))}function ir(){return Ra??nr[0]}wo(q_),wo({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03a9"],KeyB:["b","B","\xdf","\u222b"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","\u0192","\xb7"],KeyG:["g","G","\ufb01","\ufb02"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","\u221e","\xbf"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","\u201a"],KeyS:["s","S","\xd2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","\u25ca","\u221a"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xda","\u0178"],KeyZ:["w","W","\u2039","\u203a"],Digit1:["&","1","\uf8ff","\xb4"],Digit2:["\xe9","2","\xeb","\u201e"],Digit3:['"',"3","\u201c","\u201d"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","\u20ac","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xf7","\\"],Slash:["=","+","\u2260","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}}),wo({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0192","\ufb01"],KeyG:["g","G","\uf8ff","\ufb02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","\u02c7"],KeyL:["l","L"," ","\u02d8"],KeyM:["m","M","\xb5","\u02da"],KeyN:["n","N"," ","\u02d9"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae"," "],KeyS:["s","S","\u222b"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","\u2211","\u203a"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","\u03a9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02dd"],Digit3:["3","\xb7","#","\u2022"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","\u221e","\u2030"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","\u2044"],Digit8:["8","(","\u201c","\u2018"],Digit9:["9",")","\u201d","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","\u201a","\u02db"],BracketLeft:["`","^","[","\u02c6"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","\u02dc"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201e",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),wo({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20ac",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),wo({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","\u215b"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030a"],BracketRight:["+","*","]","\u0304"],Backslash:["\xe7","\xc7","}","\u0306"],Semicolon:["\xf1","\xd1","~","\u030b"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","\u2500","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),wo({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03a9"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030b"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","\u215b"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215c"],Digit6:["-","6","|","\u215d"],Digit7:["\xe8","7","`","\u215e"],Digit8:["_","8","\\","\u2122"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030a"],BracketRight:["$","\xa3","\xa4","\u0304"],Backslash:["*","\xb5","\u0300","\u0306"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","\u0302","\u030c"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","\u2500","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),wo({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),wo({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","\u1e9e"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),wo({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u2039"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20ac","\u2030"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","\u2044","\xdb"],KeyJ:["j","J","\xba","\u0131"],KeyK:["k","K","\u2206","\u02c6"],KeyL:["l","L","@","\ufb02"],KeyM:["m","M","\xb5","\u02d8"],KeyN:["n","N","~","\u203a"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","\u201a","\xcd"],KeyT:["t","T","\u2020","\u02dd"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\xd9"],KeyY:["z","Z","\u03a9","\u02c7"],KeyZ:["y","Y","\xa5","\u2021"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"\u201c","\u201d"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","\ufb01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02dc"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","\u2260","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","\u02d9"],Equal:["\xb4","`","'","\u02da"],BracketLeft:["\xfc","\xdc","\u2022","\xb0"],BracketRight:["+","*","\xb1","\uf8ff"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xf6","\xd6","\u0153","\u0152"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221e","\u02db"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","\u201e","\u201c"],NumpadEqual:["=","=","=","="]}}),wo({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","\u2248","\u02db"],KeyC:["j","J","\u2206","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","\u2265","\u02d8"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","\u02c6","\u02c6"],KeyH:["d","D","\u2202","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","\u02d9","\xd3"],KeyK:["t","T","\u2020","\u02c7"],KeyL:["n","N","\u02dc","\u02dc"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","\u222b","\u0131"],KeyO:["r","R","\xae","\u2030"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","\u03c0","\u220f"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","\u02dd"],KeyV:["k","K","\u02da","\uf8ff"],KeyW:[",","<","\u2264","\xaf"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xcf"],KeyZ:[";",":","\u2026","\xda"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["[","{","\u201c","\u201d"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","\u2260","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201e"],Period:["v","V","\u221a","\u25ca"],Slash:["z","Z","\u03a9","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});var U_=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",command:"cutToClipboard"},{key:"cmd+x",command:"cutToClipboard"},{key:"ctrl+c",command:"copyToClipboard"},{key:"cmd+c",command:"copyToClipboard"},{key:"ctrl+v",command:"pasteFromClipboard"},{key:"cmd+v",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+w",ifMode:"math",command:["insert","\\sum_{i=#?}^{#?}"]},{key:"alt+b",command:["insert","\\int_{#?}^{#?}"]},{key:"alt+u",ifMode:"math",command:["insert","\\cup"]},{key:"alt+n",ifMode:"math",command:["insert","\\cap"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"shift+alt+p",ifMode:"math",command:["insert","\\prod_{i=#?}^{#?}"]},{key:"shift+alt+u",ifMode:"math",command:["insert","\\bigcup"]},{key:"shift+alt+n",ifMode:"math",command:["insert","\\bigcap"]},{key:"shift+alt+a",ifMode:"math",command:["insert","\\forall"]},{key:"shift+alt+e",ifMode:"math",command:["insert","\\exists"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"shift+ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\wedge"]},{key:"shift+alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\vee"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],O7={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"shift+alt+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"shift+alt+u","\\bigcap":"shift+alt+n","\\forall":"shift+alt+a","\\exists":"shift+alt+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit6]","\\vee":"shift+alt+[Digit6]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function R_(n){let o=n;return Bn(o)&&(o=o.length>0?o[0]+"("+o.slice(1).join("")+")":""),o}function M7(n,o){let t=[];if("string"==typeof o){let s=O7[o];Bn(s)?t=s.slice():s&&t.push(s)}let i=R_(o),a=new RegExp("^"+i.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let s of n)a.test(R_(s.command))&&t.push(s.key);return t.map(nd)}function nd(n){var o;let t=/macos|ios|/.test(rs()),i=n.split("+"),a="";for(let s of i)!t&&a&&(a+='<span class="ML__shortcut-join">+</span>'),s.startsWith("[Key")?a+=s.slice(4,5):s.startsWith("Key")?a+=s.slice(3,4):s.startsWith("[Digit")?a+=s.slice(6,7):s.startsWith("Digit")?a+=s.slice(5,6):a+=null!=(o={cmd:"\u2318",meta:t?"\u2318":"command",shift:t?"\u21e7":"shift",alt:t?"\u2325":"alt",ctrl:t?"\u2303":"control","\n":t?"\u23ce":"return","[return]":t?"\u23ce":"return","[enter]":t?"\u2324":"enter","[tab]":t?"\u21e5":"tab","[escape]":"esc","[backspace]":t?"\u232b":"backspace","[delete]":t?"\u2326":"del","[pageup]":t?"\u21de":"page up","[pagedown]":t?"\u21df":"page down","[home]":t?"\u2912":"home","[end]":t?"\u2913":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"\u21e0",up:"\u21e1",right:"\u21e2",down:"\u21e3","[arrowleft]":"\u21e0","[arrowup]":"\u21e1","[arrowright]":"\u21e2","[arrowdown]":"\u21e3","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[s.toLowerCase()])?o:s.toUpperCase();return a}function I7(n,o){if(n.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(n.ifPlatform))throw new Error(`Unexpected platform "${n.ifPlatform}" for keybinding ${n.key}`);if(void 0!==n.ifLayout&&(0===o.score||!n.ifLayout.includes(o.id)))return;let t=Q_(n.key),i=n.ifPlatform;if(t.cmd){if(i&&"macos"!==i&&"ios"!==i)throw new Error('Unexpected "cmd" modifier with platform "'+i+'"\n"cmd" modifier can only be used with macOS or iOS platform.');i||(i="ios"===rs()?"ios":"macos"),t.win=!1,t.cmd=!1,t.meta=!0}if(t.win){if(i&&"windows"!==i)throw new Error('Unexpected "win" modifier with platform "'+i+'"\n"win" modifier can only be used with Windows platform.');i="windows",t.win=!1,t.cmd=!1,t.meta=!0}if(i&&!function S7(n){if(Ei()){let o=rs(),t=n.startsWith("!"),i=n.endsWith(o);if(t&&!i||!t&&i)return!0}return"!other"!==n&&"other"===n}(i))return;if(/^\[.+\]$/.test(t.key))return kt(Ze({},n),{ifPlatform:i,key:Bl(t)});let a=function k7(n,o){var t;let i={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!n)return i;for(let[a,s]of Object.entries(o.mapping)){if(s[0]===n)return i.key=`[${a}]`,i;if(s[1]===n)return i.shift=!0,i.key=`[${a}]`,i;if(s[2]===n)return i.alt=!0,i.key=`[${a}]`,i;if(s[3]===n)return i.shift=!0,i.alt=!0,i.key=`[${a}]`,i}return i.key=null!=(t=C7[n])?t:"",i}(t.key,o);if(!a)throw new Error('Invalid keybinding key "'+n.key+'"');if(a.shift&&t.shift||a.alt&&t.alt)throw new Error(`The keybinding ${n.key} (${id(n.command)}) is conflicting with the key combination ${Bl(a)} using the ${o.displayName} keyboard layout`);return a.shift=a.shift||t.shift,a.alt=a.alt||t.alt,a.meta=t.meta,a.ctrl=t.ctrl,kt(Ze({},n),{ifPlatform:i,key:Bl(a)})}function id(n){if(Array.isArray(n)){let o=[...n];return o.shift()+"("+o.map(t=>"string"==typeof t?`"${t}"`:t.toString()).join(", ")+")"}return n}var B_="#mathlive-popover-panel{visibility:hidden;background-color:rgba(97,97,97,0.95);color:#fff;text-align:center;border-radius:8px;position:fixed;z-index:1;display:flex;flex-direction:column;justify-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:all .2s cubic-bezier(.64, .09, .08, 1)}#mathlive-popover-panel::after{content:'';position:absolute;top:-5px;left:calc(50% - 3px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;font-size:1rem;border-bottom:5px solid rgba(97,97,97,0.9)}#mathlive-popover-panel.is-visible{visibility:inherit;animation:ML__fade-in cubic-bezier(0, 0, .2, 1) .15s}@keyframes ML__fade-in{from{opacity:0}to{opacity:1}}#mathlive-popover-panel ul{display:flex;flex-flow:column;list-style:none;margin:0;padding:0;align-items:flex-start;justify-content:center}#mathlive-popover-panel li{display:flex;flex-direction:row;justify-content:space-between;margin:8px;padding:8px;width:calc(100% - 16px - 16px);column-gap:1em;border-radius:8px;cursor:pointer}#mathlive-popover-panel li a{color:#5ea6fd;padding-top:.3em;margin-top:.4em;display:block}#mathlive-popover-panel li a:hover{color:#5ea6fd;text-decoration:underline}#mathlive-popover-panel li:hover,#mathlive-popover-panel li.is-pressed,#mathlive-popover-panel li.is-active{background:rgba(255,255,255,0.1)}.ML__popover__command{font-size:1.6rem;font-family:KaTeX_Main}.ML__popover__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;align-self:center}.ML__popover__keybinding{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:.8em;opacity:.7}.ML__shortcut-join{opacity:.5}",Co=".ML__sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);clip-path:inset(50%);white-space:nowrap;border:0}.ML__isInline{display:inline-block}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text;padding:0;margin:0;box-sizing:content-box;border:0;outline:0;vertical-align:baseline;font-weight:inherit;font-family:inherit;font-style:inherit;text-decoration:none;width:min-content}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family, system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:bold}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:normal}.ML__mathbfit{font-family:KaTeX_Math;font-weight:bold;font-style:italic}.ML__ams{font-family:KaTeX_AMS}.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_ul{font-weight:100}.ML__series_el{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px black;text-stroke:1px black;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__center{text-align:center}.ML__label_padding{padding:0 .5em}.ML__frac-line{width:100%;min-height:1px}.ML__frac-line:after{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;box-sizing:content-box;transform:translate(0, 0)}.ML__sqrt{display:inline-block}.ML__sqrt-sign{display:inline-block;font-family:KaTeX_Main;position:relative}.ML__sqrt-line{display:inline-block;height:.04em;width:100%}.ML__sqrt-line:before{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;transform:translate(0, 0)}.ML__sqrt-line:after{border-bottom-width:1px;content:' ';display:block;margin-top:-0.1em}.ML__sqrt-index{margin-left:.27777778em;margin-right:-0.55555556em}.ML__delim-size1{font-family:KaTeX_Size1}.ML__delim-size2{font-family:KaTeX_Size2}.ML__delim-size3{font-family:KaTeX_Size3}.ML__delim-size4{font-family:KaTeX_Size4}.ML__delim-mult .delim-size1>span{font-family:KaTeX_Size1}.ML__delim-mult .delim-size4>span{font-family:KaTeX_Size4}.ML__accent-body>span{font-family:KaTeX_Main;width:0}.ML__accent-vec>span{position:relative;left:.24em}.ML__mathlive{display:inline-block;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main,'Times New Roman',serif;font-style:normal;font-size-adjust:none;font-stretch:normal;font-variant-caps:normal;letter-spacing:normal;line-height:1.2;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;user-select:none;width:min-content}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .mfrac,.ML__mathlive .left-right{display:inline-block}.ML__mathlive .vlist-t{display:inline-table;table-layout:fixed;border-collapse:collapse}.ML__mathlive .vlist-r{display:table-row}.ML__mathlive .vlist{display:table-cell;vertical-align:bottom;position:relative}.ML__mathlive .vlist>span{display:block;height:0;position:relative}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .vlist>span>.pstrut{overflow:hidden;width:0}.ML__mathlive .vlist-t2{margin-right:-2px}.ML__mathlive .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .negativethinspace{display:inline-block;margin-left:-0.16667em;height:.71em}.ML__mathlive .thinspace{display:inline-block;width:.16667em;height:.71em}.ML__mathlive .mediumspace{display:inline-block;width:.22222em;height:.71em}.ML__mathlive .thickspace{display:inline-block;width:.27778em;height:.71em}.ML__mathlive .enspace{display:inline-block;width:.5em;height:.71em}.ML__mathlive .quad{display:inline-block;width:1em;height:.71em}.ML__mathlive .qquad{display:inline-block;width:2em;height:.71em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative;display:inline-block}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:solid 0;position:relative;box-sizing:border-box}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:'';display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:'';display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:before,.ML__mathlive .stretchy:after{content:''}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{display:inline-flex;position:absolute;left:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;right:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .nulldelimiter{width:.12em;display:inline-block}.ML__mathlive .op-group{display:inline-block}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .mtable .vertical-separator{display:inline-block;min-width:1px;box-sizing:border-box}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist-t{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist-t{text-align:right}.ML__error{display:inline-block;background-image:radial-gradient(ellipse at center, hsl(341,100%,40%), rgba(0,0,0,0) 70%);background-color:hsla(341,100%,40%,0.1);background-repeat:repeat-x;background-size:3px 3px;padding-bottom:3px;background-position:0 100%}.ML__error>.ML__error{background:transparent;padding:0}.ML__composition{background:#fff1c2;color:black;text-decoration:underline var(--caret-color-computed, var(--ML__caret-color))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:white}}.ML__placeholder{color:var(--placeholder-color, var(--ML__placeholder-color));opacity:var(--placeholder-opacity, .4);padding-left:.4ex;padding-right:.4ex;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.ML__placeholdercontainer{display:none}.ML__placeholdercontainer math-field{display:inline-block;position:absolute;z-index:1001;min-width:32px;padding-left:4px;padding-right:4px;border-radius:4px;border:1px solid var(--editable-border)}.ML__isReadOnly .ML__placeholdercontainer{display:block}.ML__notation{position:absolute;box-sizing:border-box}.ML__container{min-height:auto !important}";function z_(n){var o,t;"function"==typeof(null==(o=n.listeners)?void 0:o.onSelectionDidChange)&&!n.suppressChangeNotifications&&(n.suppressChangeNotifications=!0,n.listeners.onSelectionDidChange(n),n.suppressChangeNotifications=!1),null==(t=n.mathfield.virtualKeyboard)||t.updateToolbar(n.mathfield)}function mn(n,o={}){var t;if(n.suppressChangeNotifications||!n.mathfield.host)return!0;n.suppressChangeNotifications=!0;let i=n.mathfield.host.dispatchEvent(new InputEvent("beforeinput",kt(Ze({},o),{data:o.data?o.data:null!=(t=o.inputType)?t:"",cancelable:!0,bubbles:!0,composed:!0})));return n.suppressChangeNotifications=!1,i}function gn(n,o){var t;n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new InputEvent("input",kt(Ze({},o),{data:o.data?o.data:null!=(t=o.inputType)?t:"",bubbles:!0,composed:!0}))),n.suppressChangeNotifications=!1)}function or(n){var o,t;let i=n.atoms.find(a=>a instanceof aa);return i&&null!=(t=null==(o=i.body)?void 0:o.filter(a=>a instanceof jn))?t:[]}function J_(n,o){var t;let i=0,a=!1,s=Number.isFinite(o?.before)?null!=(t=o?.before)?t:0:n.lastOffset;for(;i<=s&&!a;){let c=n.at(i);a=c instanceof jn&&c.isSuggestion,a||i++}if(!a)return[void 0,void 0];let r=i,l=!1;for(;r<=s&&!l;){let c=n.at(r);l=!(c instanceof jn&&c.isSuggestion),l||r++}return[i-1,r-1]}function od(n){let o=or(n.model).filter(t=>t.isSuggestion);if(0!==o.length){n.model.position=n.model.offsetOf(o[0].leftSibling);for(let t of o)t.parent.removeChild(t)}}function zl(n,o){var t;let{model:i}=n;od(n);for(let d of or(i))d.isError=!1;if(!i.selectionIsCollapsed)return void ar(n);let a=[],s=i.at(i.position);for(;s&&s instanceof jn&&/^[a-zA-Z\*]$/.test(s.value);)s=s.leftSibling;if(s&&s instanceof jn&&"\\"===s.value)for(a.push(s),s=s.rightSibling;s&&s instanceof jn&&/^[a-zA-Z\*]$/.test(s.value);)a.push(s),s=s.rightSibling;let r=a.map(d=>d.value).join(""),l=r?function WL(n,o){var t,i;if("\\"===o)return[];if(!o.startsWith("\\"))return[];let a=[];for(let r in bo)r.startsWith(o)&&!bo[r].infix&&a.push({match:r,frequency:null!=(t=bo[r].frequency)?t:0});for(let r in xo)r.startsWith(o)&&a.push({match:r,frequency:null!=(i=xo[r].frequency)?i:0});let s=o.substring(1);for(let r of Object.keys(n.options.macros))r.startsWith(s)&&a.push({match:"\\"+r,frequency:0});return a.sort((r,l)=>{var c,d;return r.frequency===l.frequency?r.match.length===l.match.length?r.match<l.match?-1:1:r.match.length-l.match.length:(null!=(c=l.frequency)?c:0)-(null!=(d=r.frequency)?d:0)}),a.map(r=>r.match)}(n,r):[];if(0===l.length)return/^\\[a-zA-Z\*]+$/.test(r)&&a.forEach(d=>{d.isError=!0}),void ar(n);n.suggestionIndex=null!=(t=o?.atIndex)?t:0,n.suggestionIndex<0&&(n.suggestionIndex=l.length-1);let c=l[n.suggestionIndex%l.length];if(c!==r){let d=a[a.length-1];d.parent.addChildrenAfter([...c.slice(r.length-c.length)].map(f=>new jn(f,n,{isSuggestion:!0})),d),En(n)}!function N7(n,o){if(0===o.length||!1===n.options.enablePopover)return void ar(n);o=o.slice(0,10);let t="<ul>";for(let a of o){let s=a,r=D7(n,a),l=M7(n.keybindings,s).join("<br>");t+=`<li role="button" data-command="${s}"><span class="ML__popover__latex">${s}</span><span class="ML__popover__command">${r}</span>`,l&&(t+=`<span class="ML__popover__keybinding">${l}</span>`),t+="</li>"}t+="</ul>",n.popover=function Q7(n,o){return n.popover?(n.popover.innerHTML=n.options.createHTML(o),n.popover):(n.popover=O_("mathlive-popover-panel"),void 0===ad&&(ad=Qo(B_).toString(36)),sd=qo(null,B_,ad),rd=qo(null,Co,Qo(Co).toString(36)),n.popover.innerHTML=n.options.createHTML(o),n.popover)}(n,t);let i=n.popover.querySelectorAll("ul li");for(let a of i)a.addEventListener("pointerdown",s=>s.preventDefault()),a.addEventListener("click",s=>{Ba(n,"reject"),Cn.insert("math",n.model,a.dataset.command,{selectionMode:"placeholder",format:"latex"}),n.dirty=!0,n.scrollIntoView(),n.focus()});setTimeout(()=>{let a=er(n.field);a&&K_(n,a),n.popover&&(n.popover.classList.add("is-visible"),n.popoverVisible=!0)},32)}(n,l)}function H_(n){let[o,t]=J_(n,{before:n.position});if(void 0===o||void 0===t)return!1;let i=!1;return n.getAtoms([o,t]).forEach(a=>{a.isSuggestion&&(a.isSuggestion=!1,i=!0)}),i}function Ba(n,o="accept",t){var i,a;ar(n);let s=function j7(n){return n.atoms.find(o=>o instanceof aa)}(n.model);if(!s)return!1;if("accept-suggestion"===o){let c=or(n.model).filter(d=>d.isSuggestion);if(0===c.length)return!1;for(let d of c)d.isSuggestion=!1;return n.model.position=n.model.offsetOf(c[c.length-1]),!0}let r=or(n.model).filter(c=>!c.isSuggestion).map(c=>c.value).join(""),l=s.leftSibling;return s.parent.removeChild(s),n.model.position=n.model.offsetOf(l),n.mode=null!=(i=t?.mode)?i:"math","reject"===o||(Cn.insert("math",n.model,r,{selectionMode:null!=(a=t?.selectItem)&&a?"item":"placeholder",format:"latex"}),n.snapshot(),n.model.announce("replacement")),!0}new class extends Cn{constructor(){super("latex")}createAtom(n,o,t){return new jn(n,o)}onPaste(n,o){var t;if(!o)return!1;let i="string"==typeof o?o:null!=(t=o.getData("text/x-latex"))?t:o.getData("text/plain");return!(!i||!mn(n.model,{inputType:"insertFromPaste",data:i})||(n.snapshot(),this.insert(n.model,i)&&(gn(n.model,{inputType:"insertFromPaste"}),En(n)),0))}insert(n,o,t){if(!mn(n,{data:o,inputType:"insertText"}))return!1;t||(t={}),t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder");let{suppressChangeNotifications:i}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Bi(n.selection));let s=[];for(let c of o)JL.test(c)&&s.push(new jn(c,n.mathfield));let r=n.at(n.position);if(r instanceof aa&&(r=r.lastChild),!(r.parent instanceof aa)){let c=new aa("",n.mathfield);r.parent.addChildAfter(c,r),r=c.firstChild}let l=r.parent.addChildrenAfter(s,r);return n.suppressChangeNotifications=a,"before"===t.selectionMode||("item"===t.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),gn(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var ad,sd=null,rd=null;function D7(n,o){let t=n,i=new Me("root",t);return i.body=pi(o,t,{parseMode:"math"}),oa(kl(us(new Re(i.render(new Tt({registers:t.registers},{fontSize:Ea},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function Jl(n,o){var t;if(n.element&&n.element.mathfield===n&&n.popover&&n.popoverVisible){if(null!=o&&o.deferred)return void setTimeout(()=>Jl(n),100);if("latex"!==(null==(t=n.model.at(n.model.position))?void 0:t.type))ar(n);else{let i=er(n.field);i&&K_(n,i)}}}function K_(n,o){if(Hm(),!n.popover||!n.popoverVisible)return;let t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerWidth-document.documentElement.clientWidth,s=window.innerHeight-document.documentElement.clientHeight,r=n.virtualKeyboard.height;n.popover.style.left=o.x+n.popover.offsetWidth/2>i-a?i-n.popover.offsetWidth-a+"px":o.x-n.popover.offsetWidth/2<0?"0":o.x-n.popover.offsetWidth/2+"px",o.y+n.popover.offsetHeight+5>t-s-r?(n.popover.classList.add("ML__popover--reverse-direction"),n.popover.style.top=o.y-o.height-n.popover.offsetHeight-5+"px"):(n.popover.classList.remove("ML__popover--reverse-direction"),n.popover.style.top=`${o.y+5}px`)}function ar(n){n.suggestionIndex=0,n.popoverVisible=!1,n.popover&&(n.popover.classList.remove("is-visible"),n.popover.innerHTML="")}function F7(n){let o=0;for(let t=0;t<n.length;t++)o=31*o+n.charCodeAt(t),o|=0;return Math.abs(o)}function En(n,o){n.dirty||(n.dirty=!0,requestAnimationFrame(()=>{Ua(n)&&n.dirty&&(n.atomBoundsCache=new Map,za(n,o),n.atomBoundsCache=void 0)}))}function za(n,o){var t;if(!Ua(n))return;o=o??{};let{model:i}=n;i.root.caret="",i.root.isSelected=!1,i.root.containsCaret=!0;for(let c of i.atoms)c.caret="",c.isSelected=!1,c.containsCaret=!1;let a=!n.options.readOnly&&n.hasFocus();if(i.selectionIsCollapsed)i.at(i.position).caret=a?n.mode:"";else{let c=i.getAtoms(i.selection,{includeChildren:!0});for(let d of c)d.isSelected=!0}if(a){let c=i.at(i.position).parent;for(;c;)c.containsCaret=!0,c=c.parent}let s=function U7(n,o){var t;return oa(us(n.model.root.render(new Tt({registers:n.registers,atomIdsSettings:{seed:(o=o??{}).forHighlighting?F7(Me.serialize(n.model.root,{expandMacro:!1,defaultMode:n.options.defaultMode})):"random",groupNumbers:null!=(t=o.forHighlighting)&&t},renderPlaceholder:n.options.readOnly?(a,s)=>{if(s.placeholderId){let r=n.getPlaceholderField(s.placeholderId);return s.createMathfieldBox(a,r,s.placeholderId)}return s.createBox(a)}:void 0},{fontSize:Ea,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(n,o),r=n.field,l=r.classList.contains("ML__focused");l&&!a?r.classList.remove("ML__focused"):!l&&a&&r.classList.add("ML__focused"),r.innerHTML=n.options.createHTML(s.toMarkup()),n.fieldContent=r.querySelector(".ML__mathlive"),n.accessibleMathML.innerHTML=n.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+Yt(i.root,n.options)+"</math>"),$_(n),n.options.readOnly&&n.attachNestedMathfield(),null!=(t=o.interactive)&&t||setTimeout(()=>$_(n),32),n.dirty=!1}function $_(n){let o=n.field;if(!o)return;for(let s of o.querySelectorAll(".ML__selection, .ML__contains-highlight"))s.remove();if(!n.hasFocus())return;let t=n.model,i=parseFloat(getComputedStyle(o).width),a=o.getBoundingClientRect().width/i;if(a=isNaN(a)?1:a,t.selectionIsCollapsed){setTimeout(()=>Jl(n),32);let s=t.at(t.position);for(;s&&(!s.containsCaret||!s.displayContainsHighlight);)s=s.parent;if(null!=s&&s.containsCaret&&s.displayContainsHighlight){let r=E_(n,tr(n,s));if(r){r.left/=a,r.right/=a,r.top/=a,r.bottom/=a;let l=document.createElement("div");l.classList.add("ML__contains-highlight"),l.style.position="absolute",l.style.left=`${r.left}px`,l.style.top=`${r.top}px`,l.style.width=`${Math.ceil(r.right-r.left)}px`,l.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,o.insertBefore(l,o.childNodes[0])}}}else for(let s of function R7(n){let o=[];for(let t of n){let i=!1;for(let a of o)if(t.left===a.left&&t.right===a.right&&t.top===a.top&&t.bottom===a.bottom){i=!0;break}i||o.push(t)}n=o,o=[];for(let t of n){let i=0;for(let a of n)if(t.left>=a.left&&t.right<=a.right&&t.top>=a.top&&t.bottom<=a.bottom&&(i+=1,i>1))break;1===i&&o.push(t)}return o}(I_(n,{excludeAtomsWithBackground:!0}))){s.left/=a,s.right/=a,s.top/=a,s.bottom/=a;let r=document.createElement("div");r.classList.add("ML__selection"),r.style.position="absolute",r.style.left=`${s.left}px`,r.style.top=`${s.top}px`,r.style.width=`${Math.ceil(s.right-s.left)}px`,r.style.height=`${Math.ceil(s.bottom-s.top-1)}px`,o.insertBefore(r,o.childNodes[0])}}var Fo={};function gi(n,o){o=o??{target:"mathfield",canUndo:!1};for(let t of Object.keys(n))Fo[t]=kt(Ze({},o),{fn:n[t]})}function sr(n){var o;let t;return t=Bn(n)?n[0]:n,t=t.replace(/-\w/g,i=>i[1].toUpperCase()),null==(o=Fo[t])?void 0:o.target}function xs(n,o,t){return o+gs(t,kt(Ze({},n),{textToSpeechMarkup:"",textToSpeechRulesOptions:kt(Ze({},n.textToSpeechRulesOptions),{markup:"none"})}))}function $7(n,o){var t,i,a;if(Ei()&&(null!=o||(o=null!=(t=Dn().config)?t:{}),o))if(o.speechEngine&&"local"!==o.speechEngine)if("amazon"===o.speechEngine)if("AWS"in window){let s=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"mp3",VoiceId:null!=(i=o.speechEngineVoice)?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(a=o.speechEngineVoice)?a:"Joanna")?"neural":"standard",Text:n,TextType:"ssml"};s.synthesizeSpeech(r,(l,c)=>{if(l)console.error("MathLive: polly.synthesizeSpeech() error:",l,l.stack);else if(null!=c&&c.AudioStream){let d=new Uint8Array(c.AudioStream),f=new Blob([d.buffer],{type:"audio/mpeg"}),y=URL.createObjectURL(f);new Audio(y).play().catch(O=>console.log(O))}})}else console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else"google"===o.speechEngine&&console.error("MathLive: The Google speech engine is not supported yet. Please come again.");else{let s=new SpeechSynthesisUtterance(n);window.speechSynthesis.speak(s)}}function Y_(n){if(n&&(n.classList.remove("ML__highlight"),n.children))for(let o of n.children)Y_(o)}function cd(n,o){var t;n&&(o&&(null==(t=n.dataset)?void 0:t.atomId)!==o?(n.classList.remove("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&cd(i,o)})):(n.classList.add("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&cd(i)})))}function Y7(n,o,t){var i;if(!Ei())return;if(null!=t||(t=Dn().config),"amazon"!==t.speechEngine)return console.error("MathLive: Use Amazon TTS Engine for synchronized highlighting"),void(t.speakHook&&t.speakHook(o,t));if(!globalThis.AWS)return void console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");let a=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"json",VoiceId:null!=(i=t.speechEngineVoice)?i:"Joanna",Engine:"standard",Text:o,TextType:"ssml",SpeechMarkTypes:["ssml"]};Dn().readAloudElement=n,a.synthesizeSpeech(s,(r,l)=>{if(r)return void console.error("MathLive: polly.synthesizeSpeech() error:",r,r.stack);if(null==l||!l.AudioStream)return;let c=new TextDecoder("utf-8").decode(new Uint8Array(l.AudioStream));Dn().readAloudMarks=c.split("\n").map(d=>d?JSON.parse(d):{}),Dn().readAloudTokens=[];for(let d of Dn().readAloudMarks)d.value&&Dn().readAloudTokens.push(d.value);Dn().readAloudCurrentMark="",s.OutputFormat="mp3",s.SpeechMarkTypes=[],a.synthesizeSpeech(s,(d,f)=>{if(d)return void console.error("MathLive: polly.synthesizeSpeech(",o,") error:",d,d.stack);if(null==f||!f.AudioStream)return;let y=new Uint8Array(f.AudioStream),O=new Blob([y.buffer],{type:"audio/mpeg"}),N=URL.createObjectURL(O),I=Dn();I.readAloudAudio?I.readAloudAudio.pause():(I.readAloudAudio=new Audio,I.readAloudAudio.addEventListener("ended",()=>{let z=I.readAloudMathField;I.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),z?(za(z),I.readAloudElement=null,I.readAloudMathField=null,I.readAloudTokens=[],I.readAloudMarks=[],I.readAloudCurrentMark=""):Y_(I.readAloudElement)}),I.readAloudAudio.addEventListener("timeupdate",()=>{let z="",$=1e3*I.readAloudAudio.currentTime+100;for(let Y of I.readAloudMarks)Y.time<$&&(z=Y.value);I.readAloudCurrentMark!==z&&(I.readAloudCurrentToken=z,z&&z===I.readAloudFinalToken?I.readAloudAudio.pause():(I.readAloudCurrentMark=z,cd(I.readAloudElement,I.readAloudCurrentMark)))})),I.readAloudAudio.src=N,I.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),I.readAloudAudio.play()})})}function ud(n,o){var t,i,a;let s=bs(n,Object.keys(n));for(let r of Object.keys(o))switch(r){case"scriptDepth":if(Bn(o.scriptDepth))s.scriptDepth=[o.scriptDepth[0],o.scriptDepth[1]];else{if("number"!=typeof o.scriptDepth)throw new TypeError("Unexpected value for scriptDepth");s.scriptDepth=[o.scriptDepth,o.scriptDepth]}break;case"locale":s.locale="auto"===o.locale?navigator.language.slice(0,5):o.locale,cn.locale=s.locale;break;case"strings":cn.merge(o.strings),s.strings=cn.strings;break;case"virtualKeyboardLayout":s.virtualKeyboardLayout=o.virtualKeyboardLayout;break;case"virtualKeyboardMode":let l=o.virtualKeyboardMode.toLowerCase();s.virtualKeyboardMode="auto"===l?Km()?"onfocus":"off":l;break;case"customVirtualKeyboardLayers":s.customVirtualKeyboardLayers=Ze(Ze({},s.customVirtualKeyboardLayers),o.customVirtualKeyboardLayers);break;case"customVirtualKeyboards":s.customVirtualKeyboards=Ze(Ze({},s.customVirtualKeyboards),o.customVirtualKeyboards);break;case"letterShapeStyle":s.letterShapeStyle="auto"===o.letterShapeStyle?cn.locale.startsWith("fr")?"french":"tex":o.letterShapeStyle;break;case"plonkSound":void 0!==o.plonkSound&&(s.plonkSound=o.plonkSound);break;case"keypressSound":null===o.keypressSound?s.keypressSound={default:null,delete:null,return:null,spacebar:null}:"string"==typeof o.keypressSound?s.keypressSound={delete:o.keypressSound,return:o.keypressSound,spacebar:o.keypressSound,default:o.keypressSound}:"object"==typeof o.keypressSound&&"default"in o.keypressSound&&(s.keypressSound=Ze({},o.keypressSound),s.keypressSound.delete=null!=(t=s.keypressSound.delete)?t:o.keypressSound.default,s.keypressSound.return=null!=(i=s.keypressSound.return)?i:o.keypressSound.default,s.keypressSound.spacebar=null!=(a=s.keypressSound.spacebar)?a:o.keypressSound.default);break;case"computeEngine":s.computeEngine=o.computeEngine;break;case"virtualKeyboardContainer":s.virtualKeyboardContainer=o.virtualKeyboardContainer;break;case"macros":s.macros=Su(o.macros);break;default:s[r]=Bn(o[r])?[...o[r]]:"object"==typeof o[r]?Ze({},o[r]):o[r]}return s}function bs(n,o){let t;t="string"==typeof o?[o]:void 0===o?Object.keys(n):o;let i={};for(let a of t)i[a]=null===n[a]?null:Bn(n[a])?[...n[a]]:"object"!=typeof n[a]||n[a]instanceof Element||"computeEngine"===a?n[a]:Ze({},n[a]);return"string"==typeof o?i[o]:i}gi({performWithFeedback:(n,o)=>function z7(n,o){n.focus(),n.options.keypressVibration&&vu()&&navigator.vibrate(3),o=o.replace(/-\w/g,i=>i[1].toUpperCase()),n.playSound("moveToNextPlaceholder"===o||"moveToPreviousPlaceholder"===o||"complete"===o?"return":"deleteBackward"===o||"deleteForward"===o||"deletePreviousWord"===o||"deleteNextWord"===o||"deleteToGroupStart"===o||"deleteToGroupEnd"===o||"deleteToMathFieldStart"===o||"deleteToMathFieldEnd"===o?"delete":"keypress");let t=n.executeCommand(o);return n.scrollIntoView(),t}(n,o)}),gi({complete:Ba,nextSuggestion:function J7(n){return zl(n,{atIndex:n.suggestionIndex+1}),!1},previousSuggestion:function H7(n){return zl(n,{atIndex:n.suggestionIndex-1}),!1}},{target:"mathfield",category:"autocomplete"}),gi({speak:(n,o,t)=>function K7(n,o,t){var i,a;t=t??{withHighlighting:!1};let{model:s}=n;let c=function r(y){let O=null;switch(y){case"all":default:O=s.root;break;case"selection":O=s.getAtoms(s.selection);break;case"left":O=s.getAtoms(s.offsetOf(s.at(s.position).leftSibling),s.position);break;case"right":O=s.getAtoms(s.position,s.offsetOf(s.at(s.position).rightSibling));break;case"group":O=s.getAtoms(s.getSiblingsRange(s.position));break;case"parent":{let{parent:N}=s.at(s.position);O=N&&"root"!==N.type?N:s.root;break}}return O}(o);if(null===c)return null==(a=(i=n.options).speakHook)||a.call(i,function l(y){let O="";switch(y){case"all":case"group":default:break;case"selection":O="no selection";break;case"left":O="at start";break;case"right":O="at end";break;case"parent":O="no parent"}return O}(o),n.options),!1;let d=Ze({},n.options);(t.withHighlighting||"amazon"===d.speechEngine)&&(d.textToSpeechMarkup=globalThis.sre&&"sre"===d.textToSpeechRules?"ssml_step":"ssml");let f=gs(c,d);return Ei()&&t.withHighlighting?(Dn().readAloudMathField=n,za(n,{forHighlighting:!0}),n.options.readAloudHook&&n.options.readAloudHook(n.field,f,n.options)):n.options.speakHook&&n.options.speakHook(f,d),!1}(n,o,t)},{target:"mathfield",category:"speech"});var G_='<span style="width: 21px; margin-top: 4px;"><svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>';function dd(){var n,o,t;return{readOnly:!1,createHTML:i=>i,fontsDirectory:"./fonts",soundsDirectory:"./sounds",computeEngine:void 0,defaultMode:"math",macros:Ou(),registers:{},colorMap:gl,backgroundColorMap:yu,horizontalSpacingScale:1,letterShapeStyle:cn.locale.startsWith("fr")?"french":"tex",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",decimalSeparator:".",fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",enablePopover:!0,locale:cn.locale,strings:cn.strings,keybindings:U_,inlineShortcuts:w_,inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:G_,virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:/android|cros/i.test(navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,virtualKeyboardToolbar:"default",virtualKeyboardContainer:null!=(o=null==(n=globalThis.document)?void 0:n.body)?o:null,useSharedVirtualKeyboard:!1,sharedVirtualKeyboardTargetOrigin:null==(t=globalThis.window)?void 0:t.origin,originValidator:"same-origin",textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:$7,readAloudHook:Y7,onInlineShortcut:()=>"",onExport:H9,value:""}}function md(n){return"inline-math"===n.defaultMode?"math":n.defaultMode}var V_,X_,W_="@keyframes ML__caret-blink{0%,100%{opacity:1}50%{opacity:0}}.ML__caret:after{content:'';border:none;border-radius:2px;border-right:2px solid var(--caret-color, var(--ML__caret-color));margin-right:-2px;position:relative;left:-1px;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__text-caret:after{content:'';border:none;border-radius:1px;border-right:1px solid var(--caret-color, var(--ML__caret-color));margin-right:-1px;position:relative;left:0;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__latex-caret:after{content:'_';border:none;margin-right:0;margin-right:calc(-1ex - 2px);position:relative;color:var(--caret-color, var(--ML__caret-color));animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__container{display:flex;flex-flow:row;justify-content:space-between;align-items:flex-end;min-height:39px;width:100%;isolation:isolate;touch-action:none;--ML__selection-background-color:hsl(var(--hue, 212), 97%, 85%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .1);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 40%, 95%);--ML__selection-color:currentColor;--ML__caret-color:hsl(var(--hue, 212), 40%, 49%);--ML__smart-fence-color:currentColor;--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 40%, 49%)}@media (prefers-color-scheme:dark){.ML__container{--ML__selection-background-color:hsl(var(--hue, 212), 25%, 45%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .2);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 5%, 34%);--ML__caret-color:hsl(var(--hue, 212), 60%, 69%);--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 60%, 69%)}}.ML__content{display:flex;align-items:center;align-self:center;position:relative;overflow:hidden;padding:2px 0 2px 1px;width:100%}.ML__virtual-keyboard-toggle{display:none;box-sizing:border-box}.ML__virtual-keyboard-toggle>span{display:flex;align-self:center;align-items:center}.ML__virtual-keyboard-toggle.is-visible{display:flex;align-self:center;align-items:center;flex-shrink:0;flex-direction:column;justify-content:center;width:34px;height:34px;padding:0;margin-right:4px;cursor:pointer;border-radius:8px;border:1px solid transparent;transition:background .2s cubic-bezier(.64, .09, .08, 1);color:var(--primary, hsl(var(--hue, 212), 40%, 50%));fill:currentColor;background:transparent}.ML__virtual-keyboard-toggle.is-visible:hover{background:hsla(0,0%,70%,0.5);color:#333;fill:currentColor;border-radius:8px}.ML__keyboard-sink{display:inline-block;resize:none;outline:none;border:none;position:fixed;clip:rect(0 0 0 0);font-size:1em;font-family:KaTeX_Main}.ML__focused .ML__text{background:var(--highlight-text, var(--ML__text-highlight-background-color))}.ML__smart-fence__close{opacity:var(--smart-fence-opacity, .5);color:var(--smart-fence-color, var(--ML__smart-fence-color))}.ML__focused .ML__selection{background:var(--selection-background-color-focused, var(--selection-background-color, var(--ML__selection-background-color))) !important}.ML__focused .ML__selected,.ML__focused .ML__selected .ML__contains-caret,.ML__focused .ML__selected .ML__smart-fence__close,.ML__focused .ML__selected .ML__placeholder{color:var(--selection-color-focused, var(--selection-color, var(--ML__selection-color))) !important}.ML__selection{box-sizing:border-box;background:var(--selection-background-color, var(--ML__selection-background-color)) !important}.ML__selected,.ML__selected .ML__contains-caret,.ML__selected .ML__smart-fence__close,.ML__selected .ML__placeholder{color:var(--selection-color, var(--ML__selection-color));opacity:1}.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open,.ML__contains-caret .ML__sqrt-sign,.ML__contains-caret .ML__sqrt-line{color:var(--caret-color, var(--ML__caret-color))}.ML__contains-highlight{background:var(--contains-highlight-backround-color, var(--ML__contains-highlight));box-sizing:border-box}.ML__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;font-weight:400;color:var(--latex-color, var(--ML__latex-color))}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__virtual-keyboard-toggle:focus{outline:none;border-radius:8px;border:2px solid var(--primary, hsl(var(--hue, 212), 40%, 50%))}.ML__virtual-keyboard-toggle.is-pressed,.ML__virtual-keyboard-toggle.is-active:hover,.ML__virtual-keyboard-toggle.is-active{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__tooltip-container{position:relative;transform:scale(0)}.ML__tooltip-container .ML__tooltip-content{position:fixed;display:inline-table;visibility:hidden;z-index:2;width:max-content;max-width:400px;padding:12px 12px;border-radius:8px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);opacity:0;transition:opacity .15s cubic-bezier(.4, 0, 1, 1)}.ML__tooltip-container .ML__tooltip-content .ML__text{white-space:normal}.ML__tooltip-container .ML__tooltip-content .ML__base{display:contents}.ML__tooltip-container:hover .ML__tooltip-content{visibility:visible;opacity:1;font-size:.75em;transform:scale(1) translate(0, 3em)}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement='top']::after{top:inherit;bottom:100%}[data-ML__tooltip]::after{content:attr(data-ML__tooltip);position:absolute;display:none;z-index:2;right:110%;width:max-content;max-width:200px;padding:8px 8px;border-radius:2px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);text-align:center;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;opacity:0;transform:scale(.5);transition:all .15s cubic-bezier(.4, 0, 1, 1)}@media only screen and (max-width:767px){[data-ML__tooltip]::after{padding:8px 16px;font-size:16px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover::after{visibility:visible;display:inline-table;opacity:1;transform:scale(1)}[data-ML__tooltip][data-delay]::after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover::after{transition-delay:1s}",Hl=null,_d=(null==(X_=null==(V_=globalThis?.document)?void 0:V_.currentScript)?void 0:X_.src)||function G7(){let n=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===n.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${(new Error).stack}").`),"";let o=n[1],t=o.match(/http.*\.ts[\?:]/);return t&&(o=n[2]),t=o.match(/(https?:.*):[0-9]+:[0-9]+/),t||(t=o.match(/at (.*(\.ts))[\?:]/),t||(t=o.match(/at (.*(\.mjs|\.js))[\?:]/))),t?t[1]:(console.error(n),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${o}").`),"")}();function ep(n){return pd.apply(this,arguments)}function pd(){return(pd=(0,$n.Z)(function*(n){if(/^(?:[a-z+]+:)?\/\//i.test(n))return new URL(n).href;if(null===Hl)try{let o=yield fetch(_d,{method:"HEAD"});200===o.status&&(Hl=o.url)}catch{console.error(`Invalid URL "${n}" (relative to "${_d}")`)}return new URL(n,Hl??_d).href})).apply(this,arguments)}function hd(n){return gd.apply(this,arguments)}function gd(){return(gd=(0,$n.Z)(function*(n){var o;if(!(document.body.classList.contains("ML__fonts-loading")||null!=(o=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&o)&&(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document)){let t=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],i=Array.from(document.fonts).map(r=>r.family);if(t.every(r=>i.includes(r)))return;document.body.classList.add("ML__fonts-loading");let a=yield ep(n??"./fonts");if(!a)return document.body.classList.add("ML__fonts-did-not-load"),void document.body.classList.remove("ML__fonts-loading");let s=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(r=>function W7(n,o,t={}){return new FontFace(n,`url(${o}.woff2) format('woff2')`,t)}(r[0].replace(/-[a-zA-Z]+$/,""),a+"/"+r[0],r[1]));try{(yield Promise.all(s.map(r=>{try{return r.load()}catch{}}))).forEach(r=>document.fonts.add(r))}catch(r){console.error(`The MathLive fonts could not be loaded from "${a}"`,{cause:r}),document.body.classList.add("ML__fonts-did-not-load")}document.body.classList.remove("ML__fonts-loading")}})).apply(this,arguments)}function la(n){return"number"==typeof n&&!Number.isNaN(n)}function Kl(n){return Array.isArray(n)&&2===n.length}function $l(n){return null!=n&&"object"==typeof n&&"ranges"in n&&Array.isArray(n.ranges)}var rr={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},fd={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function Mn(n){var o,t,i,a,s,r,l,c,d,f,y,O,N;if(!n)return"";if(Bn(n)){if(0===n.length||("first"===n[0].type&&(n=n.slice(1)),0===n.length))return"";let Y="";if("latex"===n[0].mode)for(let V of n)Y+=Mn(V);else if("text"===n[0].mode){let V=0;for(Y='"';"text"===(null==(o=n[V])?void 0:o.mode);)Y+=n[V].body?Mn(n[V].body):n[V].value,V++;Y+='"'+Mn(n.slice(V))}else if("math"===n[0].mode){let V=0;for(;n[V]&&"math"===n[V].mode;)Y+=Mn(n[V]),V++;Y+=Mn(n.slice(V))}else console.warn("toASCIIMath: Unexpected mode");return Y.trim()}if("text"===n.mode)return'"'+n.value+'"';let $,I="",{command:z}=n;switch(n.type){case"first":return"";case"group":case"root":I=null!=(t=rr[z])?t:Mn(n.body);break;case"genfrac":{let ye=n;(ye.leftDelim||ye.rightDelim)&&(I+="."!==ye.leftDelim&&ye.leftDelim?ye.leftDelim:"{:"),ye.hasBarLine?(I+="(",I+=Mn(ye.above),I+=")/(",I+=Mn(ye.below),I+=")"):(I+="("+Mn(ye.above)+"),",I+="("+Mn(ye.below)+")"),(ye.leftDelim||ye.rightDelim)&&(I+="."!==ye.rightDelim&&ye.rightDelim?ye.rightDelim:"{:")}break;case"surd":I+=n.hasEmptyBranch("above")?"sqrt("+Mn(n.body)+")":"root("+Mn(n.above)+")("+Mn(n.body)+")";break;case"latex":I=n.value;break;case"leftright":{let ye=n;I+="."!==ye.leftDelim&&ye.leftDelim?ye.leftDelim:"{:",I+=Mn(ye.body),I+="."!==ye.rightDelim&&ye.rightDelim?ye.rightDelim:":}"}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":I=null!=(a=null!=(i=rr[z])?i:z)?a:"string"==typeof n.value?n.value:"",I.startsWith("\\")&&(I+=" "),$=z?z.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null,$?I=String.fromCodePoint(Number.parseInt("0x"+$[1])):I.length>0&&I.startsWith("\\")&&(I="string"==typeof n.value?n.value.charAt(0):n.command);break;case"mbin":case"mrel":case"minner":I=null!=(r=null!=(s=rr[z])?s:fd[z])?r:n.value;break;case"mopen":case"mclose":I+=n.value;break;case"mpunct":I=null!=(l=fd[z])?l:z;break;case"mop":"\u200b"!==n.value&&(I="",I+="\\operatorname"===z?Mn(n.body):null!=(c=n.value)?c:z,I+=" ");break;case"array":let Y=n.array,V=n.environmentName,te=null!=(d={bmatrix:["[","]"],"bmatrix*":["[","]"]}[V])?d:["(",")"],K=[];for(let ye of Y){let ae=[];for(let oe of ye)ae.push(te[0]+Mn(oe)+te[1]);K.push(ae.join(","))}let X=null!=(f={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[V])?f:["(",")"];I=X[0]+K.join(",")+X[1];break;case"spacing":I=null!=(y=rr[z])?y:" ";break;case"enclose":I="("+Mn(n.body)+")";break;case"space":I=" ";break;case"msubsup":I="";break;case"macro":I=null!=(N=null!=(O=rr[z])?O:fd[z])?N:Mn(n.body)}if(!n.hasEmptyBranch("subscript")){I+="_";let Y=Mn(n.subscript);I+=Y.length>1?"("+Y+")":Y}if(!n.hasEmptyBranch("superscript")){I+="^";let Y=Mn(n.superscript);I+=Y.length>1?"("+Y+")":Y}return I}function tp(n){let o;if("body"===n.treeBranch)o={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator"}[n.type];else if("genfrac"===n.parent.type){if("above"===n.treeBranch)return"numerator";if("below"===n.treeBranch)return"denominator"}else"surd"===n.parent.type?"above"===n.treeBranch&&(o="index"):"superscript"===n.treeBranch?o="superscript":"subscript"===n.treeBranch&&(o="subscript");return o??"parent"}function np(n,o,t,i){let a=n.offsetOf(o);if(a<t||a>i)return!1;if(!o.hasChildren)return!0;let s=n.offsetOf(o.firstChild);if(s>=t&&s<=i){let r=n.offsetOf(o.lastChild);if(r>=t&&r<=i)return!0}return!1}function xd(n,o,t){if(null==o||!o.hasChildren)return!1;let[i,a]=t,s=n.offsetOf(o.firstChild),r=n.offsetOf(o.lastChild);return s>=i&&s<=a&&r>=s&&r<=a}function Yl(n,o){let t=n.at(n.position);for(;t&&!(Array.isArray(t.treeBranch)&&t.parent instanceof hn);)t=t.parent;if(Array.isArray(t?.treeBranch)&&t?.parent instanceof hn){let a,i=t.parent;switch(o){case"after row":i.addRowAfter(t.treeBranch[0]),a=n.offsetOf(i.getCell(t.treeBranch[0]+1,0)[0]);break;case"after column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnAfter(t.treeBranch[1]),a=n.offsetOf(i.getCell(t.treeBranch[0],t.treeBranch[1]+1)[0]);break;case"before row":i.addRowBefore(t.treeBranch[0]),a=n.offsetOf(i.getCell(t.treeBranch[0]-1,0)[0]);break;case"before column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnBefore(t.treeBranch[1]),a=n.offsetOf(i.getCell(t.treeBranch[0],t.treeBranch[1]-1)[0])}n.setSelection(a,a+1)}}function ip(n){return!!mn(n,{inputType:"insertText"})&&(Yl(n,"after row"),gn(n,{inputType:"insertText"}),!0)}function op(n){return!!mn(n,{inputType:"insertText"})&&(Yl(n,"after column"),gn(n,{inputType:"insertText"}),!0)}function ap(n,o){let t=n.at(n.position);for(;t&&!(Array.isArray(t.treeBranch)&&t.parent instanceof hn);)t=t.parent;if(Array.isArray(t?.treeBranch)&&t?.parent instanceof hn){let s,i=t.parent,a=t.treeBranch;switch(o){case"row":if(i.rowCount>1){i.removeRow(a[0]);let r=i.getCell(Math.max(0,a[0]-1),a[1]);s=n.offsetOf(r[r.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(a[1]);let r=i.getCell(a[0],Math.max(0,a[1]-1));s=n.offsetOf(r[r.length-1])}}s&&n.setPositionHandlingPlaceholder(s)}}function lr(n,o,t,i){var a,s,r,l,c,d;let f=t.parent;if(f&&t instanceof Xn){let y=!i&&"forward"===o||"body"===i&&"backward"===o,O=n.offsetOf(y?t.firstChild:t.lastChild);return y?"?"!==t.rightDelim&&"."!==t.rightDelim?(t.leftDelim=".",t.isDirty=!0):(f.addChildrenAfter(t.removeBranch("body"),t),f.removeChild(t),O--):"?"!==t.leftDelim&&"."!==t.leftDelim?(t.rightDelim=".",t.isDirty=!0):(f.addChildrenAfter(t.removeBranch("body"),t),f.removeChild(t),O--),n.position=O,!0}if(f&&"surd"===t.type){if("forward"===o&&!i||"backward"===o&&"body"===i){let y=t.leftSibling;t.hasChildren&&f.addChildrenAfter(t.removeBranch("body"),t),f.removeChild(t),n.position=n.offsetOf(y)}else"forward"===o&&"body"===i?n.position=n.offsetOf(t):i||"backward"!==o?"above"===i&&(t.hasEmptyBranch("above")&&t.removeBranch("above"),n.position=n.offsetOf("backward"===o?t.leftSibling:t.body[0])):t.hasChildren?n.position=n.offsetOf(t.lastChild):(n.position=Math.max(0,n.offsetOf(t)-1),f.removeChild(t));return!0}if(f&&("box"===t.type||"enclose"===t.type)){let y=i&&"backward"===o||!i&&"forward"===o?t.leftSibling:t.lastChild;return f.addChildrenAfter(t.removeBranch("body"),t),f.removeChild(t),n.position=n.offsetOf(y),!0}if("genfrac"===t.type||"overunder"===t.type){if(!i)return!("overunder"===t.type&&t.hasEmptyBranch("body")||"genfrac"===t.type&&t.hasEmptyBranch("below")&&t.hasEmptyBranch("above")||(n.position=n.offsetOf("forward"===o?t.firstChild:t.lastChild),0));let y="numerator-denominator"===t.context.fractionNavigationOrder?"above":"below",O="above"===y?"below":"above";if(f&&("forward"===o&&i===y||"backward"===o&&i===O)){let N=t.removeBranch(y),I=t.removeBranch(O);return f.addChildrenAfter([...N,...I],t),f.removeChild(t),n.position=n.offsetOf(N.length>0?N[N.length-1]:I[0]),!0}return n.position=n.offsetOf("backward"===o?t.leftSibling:t),!0}if(t.isExtensibleSymbol||"msubsup"===t.type){if(!i&&"forward"===o)return!1;if(!i){if(t.subscript||t.superscript){let y="forward"===o?null!=(r=null==(a=t.superscript)?void 0:a[0])?r:null==(s=t.subscript)?void 0:s[0]:null!=(d=null==(l=t.subscript)?void 0:l[0].lastSibling)?d:null==(c=t.superscript)?void 0:c[0].lastSibling;return y&&(n.position=n.offsetOf(y)),!0}return!1}if(i&&t.hasEmptyBranch(i)&&t.removeBranch(i),!t.hasChildren){let y="forward"===o?n.offsetOf(t):Math.max(0,n.offsetOf(t)-1);return t.parent.removeChild(t),n.position=y,!0}if("superscript"===i)if("backward"===o){let y=n.offsetOf(t.firstChild)-1;n.position=y}else n.position=n.offsetOf(t.subscript?t.subscript[0]:t);else"subscript"===i&&(n.position="backward"===o&&t.superscript?n.offsetOf(t.superscript[0].lastSibling):"backward"===o?n.offsetOf(t.firstChild)-1:n.offsetOf(t));return!0}if("genfrac"===f?.type&&!i&&"first"!==t.type){let y=n.offsetOf(t.leftSibling);return f.removeChild(t),f.hasEmptyBranch("above")&&f.hasEmptyBranch("below")?(y=n.offsetOf(f.leftSibling),f.parent.removeChild(f),n.announce("delete",void 0,[f]),n.position=y,!0):(n.announce("delete",void 0,[t]),n.position=y,!0)}return!1}function ko(n,o,t){let i=n.getAtoms(o);if(i.length>0&&i[0].parent){let a=i[0].parent.firstChild;"first"===a.type&&(a=a.rightSibling);let r=i[0];if("first"===r.type&&(r=r.rightSibling),r===a&&i[i.length-1]===i[i.length-1].parent.lastChild){let c=i[0].parent;"root"!==c.type&&(o=[n.offsetOf(c.leftSibling),n.offsetOf(c.rightSibling)])}if(1===i.length&&"placeholder"===i[0].type&&"genfrac"===i[0].parent.type){let c=i[0].parent,d="below"===i[0].treeBranch?"above":"below",f=n.offsetOf(c.leftSibling);return n.deferNotifications({content:!0,selection:!0,type:t},()=>{var y,O;let N=c.removeBranch(d);if(1===N.length&&"placeholder"===N[0].type)null==(O=c.parent)||O.removeChild(c),n.position=Math.max(0,f);else{let I=c.parent.addChildrenAfter(N,c);null==(y=c.parent)||y.removeChild(c),n.position=n.offsetOf(I)}})}}return n.deferNotifications({content:!0,selection:!0,type:t},()=>n.deleteAtoms(o))}function sp(n,o){let i,t=n.at(o);if(t){i=t.mode;let a=t.parent;for(;!i&&a;)a&&(i=a.mode),a=a.parent}return i}function ca(n,o){!n||!o||(Bn(n)?n.forEach(t=>ca(t,o)):"object"==typeof n&&!n.style.color&&!n.style.backgroundColor&&!n.style.fontFamily&&!n.style.fontShape&&!n.style.fontSeries&&!n.style.fontSize&&!n.style.variant&&!n.style.variantStyle&&(n.applyStyle(o),ca(n.body,o),ca(n.above,o),ca(n.below,o),ca(n.subscript,o),ca(n.superscript,o)))}function bd(n,o,t,i){function a(r,l){for(let c of s)if(c.style[r]!==l)return!1;return!0}if((o=n.normalizeRange(o))[0]===o[1])return!1;let s=n.getAtoms(o,{includeChildren:!0});"toggle"===i.operation&&(t.color&&a("color",t.color)&&(t.color="none",t.verbatimColor=void 0),t.backgroundColor&&a("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none",t.verbatimBackgroundColor=void 0),t.fontFamily&&a("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.fontSeries&&a("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.fontShape&&a("fontShape",t.fontShape)&&(t.fontShape="auto"),t.fontSize&&a("fontSize",t.fontSize)&&(t.fontSize=Ea));for(let r of s)r.applyStyle(t);return!0}function vd(n,o,t){if("text"!==n.at(o).mode)return o;let a,i="backward"===t?-1:1;if(xl.test(n.at(o).value)){let r,s=o;do{r="text"===n.at(s).mode&&xl.test(n.at(s).value),s+=i}while(n.at(s)&&r);a=n.at(s)?s-2*i:s-i}else if(/\s/.test(n.at(o).value)){let s=o;for(;n.at(s)&&"text"===n.at(s).mode&&/\s/.test(n.at(s).value);)s+=i;if(n.at(s)){let r=!0;do{r="text"===n.at(s).mode&&!/\s/.test(n.at(s).value),s+=i}while(n.at(s)&&r);a=n.at(s)?s-2*i:s-i}else a=s-i}else{let s=o;for(;n.at(s)&&"text"===n.at(s).mode&&!/\s/.test(n.at(s).value);)s+=i;a=n.at(s)?s:s-i;let r=!0;for(;n.at(s)&&r;)r="text"===n.at(s).mode&&/\s/.test(n.at(s).value),r&&(a=s),s+=i;a=n.at(s)?s-2*i:s-i}return a-(i>0?0:1)}function vs(n,o,t){var i,a,s,r,l,c,d;let f=n.position;null!=(i=t?.extend)&&i||n.collapseSelection(o);let y=n.at(n.position);if("forward"===o&&("msubsup"===y.type?(y=y.rightSibling,y||(y=n.at(n.position+1))):y=n.at(n.position+1)),!y)return n.announce("plonk"),!1;let O=n.offsetOf(y);if(y instanceof _s)O=vd(n,O,o);else if(y instanceof jn)if(y.isSuggestion)for(;y&&y instanceof jn;)y.isSuggestion=!1,O=n.offsetOf(y),y=y.rightSibling;else if("forward"===o){if(y=y.rightSibling,!(y&&y instanceof jn))return n.announce("plonk"),!1;for(;y&&y instanceof jn&&/[a-zA-Z\*]/.test(y.value);)O=n.offsetOf(y),y=y.rightSibling}else{if(y=y.leftSibling,!(y&&y instanceof jn))return n.announce("plonk"),!1;for(;y&&y instanceof jn&&/[a-zA-Z\*]/.test(y.value);)O=n.offsetOf(y),y=y.leftSibling}else if("forward"===o&&"mopen"===y.type){let N=0;do{"mopen"===y.type?N+=1:"mclose"===y.type&&(N-=1),y=y.rightSibling}while(!y.isLastSibling&&0!==N);O=n.offsetOf(y.leftSibling)}else if("backward"===o&&"mclose"===y.type){let N=0;do{"mopen"===y.type?N+=1:"mclose"===y.type&&(N-=1),y=y.leftSibling}while(!y.isFirstSibling&&0!==N);O=n.offsetOf(y)}else if("backward"===o)if("first"===y.type)for(;O>0&&"first"===y.type;)O-=1,y=n.at(O);else{let N=y.type;"msubsup"===y.type&&(O=n.offsetOf(n.at(O).leftSibling)),O-=1;let I=null==(a=n.at(O))?void 0:a.type;for(;O>=0&&I===N;)"msubsup"===(null==(s=n.at(O))?void 0:s.type)?O=n.offsetOf(n.at(O).leftSibling):O-=1,I=n.at(O).type}else{let{type:N}=y,I=null==(r=n.at(O))?void 0:r.type,{lastOffset:z}=n;for(;O<=z&&(I===N||"msubsup"===I);){for(;"msubsup"===(null==(l=n.at(O).rightSibling)?void 0:l.type);)O=n.offsetOf(n.at(O).rightSibling);O+=1,I=null==(c=n.at(O))?void 0:c.type}O-=1}if(null!=(d=t?.extend)&&d){if(!n.setSelection(n.anchor,O))return n.announce("plonk"),!1}else{if(O===n.position)return n.announce("plonk"),!1;n.position=O}return n.announce("move",f),!0}function Uo(n,o,t){var i,a,s,r,l,c,d,f;if(t=t??{extend:!1},"forward"!==o){let[O,N]=J_(n);void 0!==O&&void 0!==N&&n.deleteAtoms([O,N])}if("upward"===o)return function dZ(n,o){var t,i,a,s;let r=null!=(t=o?.extend)&&t;r||n.collapseSelection("backward");let l=n.at(n.position),c=l;for(;c&&"below"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof hn);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof hn){let d=c.parent,f=Math.max(0,c.treeBranch[0]-1);Gl(n,l,d.array[f][c.treeBranch[1]],r,"up")}else{if(!c){let d=!0;return n.suppressChangeNotifications||(d=null==(s=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||s),n.announce(d?"plonk":"line"),d}Gl(n,l,null!=(i=c.parent.branch("above"))?i:c.parent.createBranch("above"),r,"up")}return!0}(n,t);if("downward"===o)return function mZ(n,o){var t,i,a,s;let r=null!=(t=o?.extend)&&t;r||n.collapseSelection("forward");let l=n.at(n.position),c=l;for(;c&&"above"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof hn);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof hn){let d=c.parent,f=Math.min(d.array.length-1,c.treeBranch[0]+1);Gl(n,l,d.array[f][c.treeBranch[1]],r,"down")}else{if(!c){let d=!0;return n.suppressChangeNotifications||(d=null==(s=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||s),n.announce(d?"plonk":"line"),d}Gl(n,l,null!=(i=c.parent.branch("below"))?i:c.parent.createBranch("below"),r,"down")}return!0}(n,t);let y=n.position;if(t.extend)return n.extendSelection(o);if(n.selectionIsPlaceholder)return n.collapseSelection(o),Uo(n,o);if(!n.collapseSelection(o)){let O=n.position+("forward"===o?1:-1),N=n.at(O);if(O>=0&&O<=n.lastOffset)if("forward"===o)if(N.inCaptureSelection){for(;!N.captureSelection;)N=N.parent;O=n.offsetOf(N)}else if(!N.isFirstSibling&&N.isLastSibling&&null!=(i=N.parent)&&i.skipBoundary){if(O+1!==n.lastOffset)return n.position=O,Uo(n,"forward",t);O+=1}else null!=(a=N.parent)&&a.skipBoundary&&null!=(s=N.rightSibling)&&s.isLastSibling?O+=2:null!=(r=N.parent)&&r.skipBoundary&&"first"===N.type?O+=1:N instanceof jn&&N.isSuggestion&&(N.isSuggestion=!1);else if("backward"===o)if(null!=(l=N.parent)&&l.inCaptureSelection){for(;!N.captureSelection;)N=N.parent;O=Math.max(0,n.offsetOf(N.leftSibling))}else(N.skipBoundary||null!=(c=N.parent)&&c.skipBoundary&&"first"===N.type)&&(O=Math.max(0,n.position-2));if(O<0||O>n.lastOffset){let I=!0;return n.suppressChangeNotifications||(I=null==(f=null==(d=n.mathfield.host)?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))||f),I&&n.announce("plonk"),I}n.setPositionHandlingPlaceholder(O)}return n.announce("move",y),!0}function Gl(n,o,t,i,a){let s=Z_(n.mathfield.getHTMLElement(o)).right,r=n.offsetOf(function uZ(n,o,t){let i=1/0,a=0;for(;a<o.length;a++){let s=Z_(n.getHTMLElement(o[a])).right,r=Math.abs(t-s);if(!(r<=i))break;i=r}return o[a-1]}(n.mathfield,t,s));if(i){let d,[l,c]=n.selection.ranges[0];d=r<("up"===a?l:c)?{ranges:[[r,c]],direction:"backward"}:{ranges:[[l,r]],direction:"forward"},n.setSelection(d)}else n.setPositionHandlingPlaceholder(r);n.announce(`move ${a}`)}function rp(n){let o=n.position,t=n.at(o).parent;return t&&"root"!==t.type?(n.position=n.offsetOf(t),n.announce("move",o),!0):(n.announce("plonk"),!1)}function lp(n){var o;if(n.collapseSelection(),function _Z(n){let o=0,t=n.at(n.position),i=!1;for(;t;)(!t.hasEmptyBranch("superscript")||!t.hasEmptyBranch("subscript"))&&(o+=1),t.hasEmptyBranch("superscript")?t.hasEmptyBranch("subscript")||(i=!1):i=!0,t=t.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[1])return n.announce("plonk"),!1;let t=n.at(n.position);return void 0===t.subsupPlacement&&("msubsup"!==(null==(o=t.rightSibling)?void 0:o.type)&&t.parent.addChildAfter(new Gs(n.mathfield,{style:t.computedStyle}),t),t=t.rightSibling),t.createBranch("superscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(t.superscript[0]))),!0}function cp(n){var o;if(n.collapseSelection(),function pZ(n){let o=0,t=n.at(n.position),i=!1;for(;t;)(!t.hasEmptyBranch("superscript")||!t.hasEmptyBranch("subscript"))&&(o+=1),t.hasEmptyBranch("superscript")?t.hasEmptyBranch("subscript")||(i=!0):i=!1,t=t.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[0])return n.announce("plonk"),!1;let t=n.at(n.position);return void 0===t.subsupPlacement&&("msubsup"!==(null==(o=n.at(n.position+1))?void 0:o.type)&&t.parent.addChildAfter(new Gs(n.mathfield,{style:n.at(n.position).computedStyle}),t),t=n.at(n.position+1)),t.createBranch("subscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(t.subscript[0]))),!0}function up(n,o,t=!0){var i,a;let s="forward"===o?1:-1;"placeholder"===n.at(n.anchor).type&&Uo(n,o);let r=n.getAllAtoms(Math.max(n.position+s,0));"backward"===o&&r.reverse();let l=r.filter(y=>"placeholder"===y.type||y.treeDepth>2&&y.isFirstSibling&&y.isLastSibling);if(0===l.length){if(!t||null!=(a=null==(i=n.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))&&!a)return n.announce("plonk"),!1;let y=function hZ(){function o(c){return!(!function t(c){return!(c.disabled||"hidden"===c.type&&"INPUT"===c.tagName.toUpperCase()||function l(c){if(!Ei()||c===document.activeElement||c.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(c).visibility)return!0;let d=c.getBoundingClientRect();if(0===d.width||0===d.height)return!0;for(;c;){if("none"===getComputedStyle(c).display)return!0;c=c.parentElement}return!1}(c))}(c)||function a(c){return"INPUT"===c.tagName.toUpperCase()&&"radio"===c.type&&!function r(c){var d;if(!c.name)return!0;let y=function s(c,d){for(let f of c)if(f.checked&&f.form===d)return f;return null}((null!=(d=c.form)?d:c.ownerDocument).querySelectorAll('input[type="radio"][name="'+c.name+'"]'),c.form);return!y||y===c}(c)}(c)||i(c)<0)}function i(c){var d;let f=Number.parseInt(null!=(d=c.getAttribute("tabindex"))?d:"NaN",10);return Number.isNaN(f)?"true"===c.contentEditable||("AUDIO"===c.nodeName||"VIDEO"===c.nodeName)&&null===c.getAttribute("tabindex")?0:c.tabIndex:f}return Ei()?function n(c){let d=[],f=[];return[...c.querySelectorAll('input, select, textarea, a[href], button,\n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')].filter(o).forEach((y,O)=>{let N=i(y);0===N?d.push(y):f.push({documentOrder:O,tabIndex:N,node:y})}),f.sort((y,O)=>y.tabIndex===O.tabIndex?y.documentOrder-O.documentOrder:y.tabIndex-O.tabIndex).map(y=>y.node).concat(d)}(document.body):[]}();if(!document.activeElement||1===y.length)return n.announce("plonk"),!1;let O=y.indexOf(document.activeElement)+s;return!!(document.activeElement instanceof Pd&&c(document.activeElement,o,s)||(O<0&&(O=y.length-1),O>=y.length&&(O=0),y[O]instanceof Pd&&c(y[O],o,s)))||(y[O].focus(),0!==O||(n.announce("plonk"),!1))}function c(y,O,N){var I,z,$;let Y=[...null!=(z=null==(I=y.shadowRoot)?void 0:I.querySelectorAll("math-field"))?z:[]];if(Y.length){let V=null==($=y.shadowRoot)?void 0:$.activeElement,te=Y.indexOf(V),K=te+N;if(te<0&&"backward"===O&&(K=Y.length-1),K>=0&&K<Y.length)return Y[K].focus(),!0}return!1}let d=n.position,f=n.offsetOf(l[0]);return"placeholder"===l[0].type?n.setSelection(f-1,f):n.position=f,n.announce("move",d),!0}function dp(n){var o,t,i,a,s,r;if("text"===sp(n,n.position)){let l=Math.min(n.anchor,n.position),c=Math.max(n.anchor,n.position),d=!1;for(;!d&&l>0;){let f=n.at(l);"text"===f.mode&&xl.test(f.value)?l-=1:d=!0}for(d=!1;!d&&c<=n.lastOffset;){let f=n.at(c);"text"===f.mode&&xl.test(f.value)?c+=1:d=!0}if(d&&(c-=1),l>=c)return n.setSelection(c-1,c),!0;n.setSelection(l,c)}else{let l=n.at(n.position);if(l.isDigit()){let c=Math.min(n.anchor,n.position),d=Math.max(n.anchor,n.position);for(;null!=(o=n.at(c))&&o.isDigit();)c-=1;for(;null!=(t=n.at(d))&&t.isDigit();)d+=1;n.setSelection(c,d-1)}else if(l.style.variant||l.style.variantStyle){let c=Math.min(n.anchor,n.position),d=Math.max(n.anchor,n.position),f=null==(i=n.at(c))?void 0:i.style;for(;f&&f.variant===l.style.variant&&f.variantStyle===l.style.variantStyle;)c-=1,f=null==(a=n.at(c))?void 0:a.style;for(f=null==(s=n.at(d))?void 0:s.style;f&&f.variant===l.style.variant&&f.variantStyle===l.style.variantStyle;)d+=1,f=null==(r=n.at(d))?void 0:r.style;n.setSelection(c,d-1)}else n.setSelection(n.offsetOf(l.firstSibling),n.offsetOf(l.lastSibling))}return!0}gi({addRowAfter:ip,addColumnAfter:op,addRowBefore:function nZ(n){return!!mn(n,{inputType:"insertText"})&&(Yl(n,"before row"),gn(n,{inputType:"insertText"}),!0)},addColumnBefore:function iZ(n){return!!mn(n,{inputType:"insertText"})&&(Yl(n,"before column"),gn(n,{inputType:"insertText"}),!0)},removeRow:function oZ(n){return!!mn(n,{inputType:"deleteContent"})&&(ap(n,"row"),gn(n,{inputType:"deleteContent"}),!0)},removeColumn:function aZ(n){return!!mn(n,{inputType:"deleteContent"})&&(ap(n,"column"),gn(n,{inputType:"deleteContent"}),!0)}},{target:"model",category:"array-edit"}),gi({deleteAll:n=>mn(n,{inputType:"deleteContent"})&&ko(n,[0,-1],"deleteContent"),deleteForward:n=>function rZ(n){return!!mn(n,{inputType:"deleteContentForward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var o,t;let i=n.at(n.position).rightSibling;if(i&&lr(n,"forward",i))return;if(i){if(n.at(n.position).isLastSibling&&lr(n,"forward",i.parent,i.treeBranch))return}else{if(i=n.at(n.position),i.isLastSibling&&lr(n,"forward",i.parent,i.treeBranch))return;i=void 0}if(n.position===n.lastOffset||!i)return void n.announce("plonk");i.parent.removeChild(i);let a=null==(o=n.at(n.position))?void 0:o.rightSibling;for(;"msubsup"===a?.type;)a.parent.removeChild(a),a=null==(t=n.at(n.position))?void 0:t.rightSibling;n.announce("delete",void 0,[i])}):ko(n,Bi(n.selection),"deleteContentForward"))}(n),deleteBackward:n=>function sZ(n){return!!mn(n,{inputType:"deleteContentBackward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let o=n.at(n.position);if(!o||!lr(n,"backward",o)){if(null!=o&&o.isFirstSibling){if(lr(n,"backward",o.parent,o.treeBranch))return;o=null}if(!o)return void n.announce("plonk");n.position=n.offsetOf(o.leftSibling),o.parent.removeChild(o),n.announce("delete",void 0,[o])}}):ko(n,Bi(n.selection),"deleteContentBackward"))}(n),deleteNextWord:n=>mn(n,{inputType:"deleteWordForward"})&&ko(n,[n.anchor,vd(n,n.position,"forward")],"deleteWordForward"),deletePreviousWord:n=>mn(n,{inputType:"deleteWordBackward"})&&ko(n,[n.anchor,vd(n,n.position,"backward")],"deleteWordBackward"),deleteToGroupStart:n=>mn(n,{inputType:"deleteSoftLineBackward"})&&ko(n,[n.anchor,n.offsetOf(n.at(n.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:n=>mn(n,{inputType:"deleteSoftLineForward"})&&ko(n,[n.anchor,n.offsetOf(n.at(n.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:n=>mn(n,{inputType:"deleteHardLineBackward"})&&ko(n,[n.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:n=>mn(n,{inputType:"deleteHardLineForward"})&&ko(n,[n.anchor,-1],"deleteHardLineForward")},{target:"model",category:"delete"}),gi({moveToOpposite:n=>{let t=n.at(n.position),{parent:i}=t;if(!i)return n.announce("plonk"),!1;let s,a=t.treeBranch;return"string"==typeof a&&(s={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[a]),s?(i.branch(s)||i.createBranch(s),n.setSelection(n.getBranchRange(n.offsetOf(i),s))):t.subsupPlacement?cp(n):lp(n)},moveBeforeParent:n=>{let{parent:o}=n.at(n.position);return o?(n.position=n.offsetOf(o),!0):(n.announce("plonk"),!1)},moveAfterParent:n=>rp(n),moveToNextPlaceholder:n=>up(n,"forward"),moveToPreviousPlaceholder:n=>up(n,"backward"),moveToNextChar:n=>Uo(n,"forward"),moveToPreviousChar:n=>Uo(n,"backward"),moveUp:n=>Uo(n,"upward"),moveDown:n=>Uo(n,"downward"),moveToNextWord:n=>vs(n,"forward"),moveToPreviousWord:n=>vs(n,"backward"),moveToGroupStart:n=>{let o=n.offsetOf(n.at(n.position).firstSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToGroupEnd:n=>{let o=n.offsetOf(n.at(n.position).lastSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToMathfieldStart:n=>0===n.position?(n.announce("plonk"),!1):(n.position=0,!0),moveToMathfieldEnd:n=>n.position===n.lastOffset?(n.announce("plonk"),!1):(n.position=n.lastOffset,!0),moveToSuperscript:n=>lp(n),moveToSubscript:n=>cp(n)},{target:"model",category:"selection-anchor"}),gi({selectGroup:n=>{let o=dp(n);return o||n.announce("plonk"),o},selectAll:n=>n.setSelection(0,n.lastOffset),extendSelectionForward:n=>{let o=n.extendSelection("forward");return o||n.announce("plonk"),o},extendSelectionBackward:n=>{let o=n.extendSelection("backward");return o||n.announce("plonk"),o},extendToNextWord:n=>vs(n,"forward",{extend:!0}),extendToPreviousWord:n=>vs(n,"backward",{extend:!0}),extendSelectionUpward:n=>Uo(n,"upward",{extend:!0}),extendSelectionDownward:n=>Uo(n,"downward",{extend:!0}),extendToNextBoundary:n=>vs(n,"forward",{extend:!0}),extendToPreviousBoundary:n=>vs(n,"backward",{extend:!0}),extendToGroupStart:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).firstSibling));return o||n.announce("plonk"),o},extendToGroupEnd:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).lastSibling));return o||n.announce("plonk"),o},extendToMathFieldStart:n=>{let o=n.setSelection(n.anchor,0);return o||n.announce("plonk"),o},extendToMathFieldEnd:n=>{let o=n.setSelection(n.anchor,n.lastOffset);return o||n.announce("plonk"),o}},{target:"model",category:"selection-extend"});var ys=class{constructor(n){var o,t;this.preventOverlayClose=null!=(o=n?.preventOverlayClose)&&o,this.translucent=null!=(t=n?.translucent)&&t,this.state="closed"}get element(){if(this._element)return this._element;let n=document.createElement("div");return n.setAttribute("role","presentation"),n.style.position="fixed",n.style.contain="content",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.zIndex="var(--scrim-zindex, 10099)",n.style.outline="none",this.translucent?(n.style.background="rgba(255, 255, 255, .2)",n.style.backdropFilter="contrast(40%)"):n.style.background="transparent",this._element=n,n}open(n){var o;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=mp();let{element:t}=this;(null!=(o=n?.root)?o:document.body).appendChild(t),t.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let i=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let a=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${a+i}px`,null!=n&&n.child&&t.append(n.child),this.state="open"}close(){var n,o,t,i;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:a}=this;a.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),a.remove(),document.body.style.overflow=null!=(n=this.savedOverflow)?n:"",document.body.style.marginRight=null!=(o=this.savedMarginRight)?o:"",mp()!==this.savedActiveElement&&(null==(i=null==(t=this.savedActiveElement)?void 0:t.focus)||i.call(t)),a.innerHTML="",this.state="closed"}handleEvent(n){this.preventOverlayClose||(n.target===this._element&&"click"===n.type||n.target===document&&("touchmove"===n.type||"scroll"===n.type))&&(this.close(),n.preventDefault(),n.stopPropagation())}};function mp(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}var gZ=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function _p(n){return!n.ctrlKey&&!n.metaKey&&"Dead"!==n.key&&(""===n.code||gZ.has(n.code))}function pp(n){n=function T7(n){if(n.code)return n;let o=Object.entries(ir().mapping),t=!1,i=!1,a="";for(let s=0;s<4;s++){for(let[r,l]of o)if(l[s]===n.key){a=r,3===s?(t=!0,i=!0):2===s?t=!0:1===s&&(i=!0);break}if(a)break}return new KeyboardEvent(n.type,kt(Ze({},n),{altKey:t,shiftKey:i,code:a}))}(n);let o=[];return n.ctrlKey&&o.push("ctrl"),n.metaKey&&o.push("meta"),n.altKey&&o.push("alt"),n.shiftKey&&o.push("shift"),0===o.length?"["+n.code+"]":(o.push("["+n.code+"]"),o.join("+"))}function Wl(n){var o;if(!n)return"";let t;return"Unidentified"===n.key&&n.target&&(t=n.target.value),t=null!=(o=t??n.key)?o:n.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(t)&&(t=""),t}var yd,hp=".ML__keyboard{--hue:206;--keyboard-background:rgba(209, 213, 217);--keyboard-text:#000;--keyboard-text-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-background-border:#ddd;--keycap-background:white;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-alternate-text:var(--keycap-text, #000);--keyboard-alternate-text-active:#fff;--keyboard-alternate-key-length:70px;--keyboard-alternate-key-font-size:30px;--keyboard-alternate-key-aside-font-size:12px;--keyboard-height:calc(276px + env(safe-area-inset-bottom, 0));--keycap-height:52px;--keycap-font-size:20px;--keycap-small-font-size:calc(var(--keycap-font-size) * .8);--keycap-extra-small-font-size:calc(var(--keycap-font-size) / 1.42);--keycap-tt-font-size:calc(var(--keycap-font-size) * 1.5);position:fixed;top:0;left:0;height:100%;width:100%;z-index:var(--keyboard-zindex, 105);pointer-events:none}.ML__keyboard.is-visible .ML__keyboard--plate{transform:translate(0, calc(-1 * var(--keyboard-height, 276px)));opacity:1;visibility:visible;transition-timing-function:cubic-bezier(.4, 0, 1, 1)}.ML__keyboard.alternate-keys{visibility:hidden;max-width:286px;background-color:var(--keyboard-alternate-background);text-align:center;border-radius:6px;position:fixed;bottom:auto;top:0;box-sizing:content-box;transform:none;z-index:calc(var(--keyboard-zindex, 105) + 1);display:flex;flex-direction:row;justify-content:center;align-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:none}@media (max-width: 414px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys.compact{--keyboard-alternate-key-length:50px;--keyboard-alternate-key-font-size:24px;--keyboard-alternate-key-aside-font-size:10px}.ML__keyboard.alternate-keys ul{list-style:none;margin:3px;padding:0;display:flex;flex-flow:row wrap-reverse;justify-content:center}.ML__keyboard.alternate-keys ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;font-size:var(--keyboard-alternate-key-font-size);height:var(--keyboard-alternate-key-length);width:var(--keyboard-alternate-key-length);box-sizing:border-box;margin:0;background:transparent;border:1px solid transparent;border-radius:5px;pointer-events:all;cursor:pointer;color:var(--keyboard-alternate-text);fill:currentColor}@media (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li .ML__mathlive{pointer-events:none}.ML__keyboard.alternate-keys ul>li:hover,.ML__keyboard.alternate-keys ul>li.is-pressed,.ML__keyboard.alternate-keys ul>li.is-active{background:var(--keyboard-alternate-background-active);color:var(--keyboard-alternate-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard.alternate-keys ul>li.small-button{width:42px;height:42px;margin:2px;background:#fbfbfb}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,0.24)}.ML__keyboard.alternate-keys ul>li .warning{min-height:60px;min-width:60px;background:#cd0030;color:white;padding:5px;display:flex;align-items:center;justify-content:center;border-radius:5px}.ML__keyboard.alternate-keys ul>li .warning:hover,.ML__keyboard.alternate-keys ul>li .warning.is-pressed,.ML__keyboard.alternate-keys ul>li .warning.is-active{background:red}.ML__keyboard.alternate-keys ul>li .warning svg.svg-glyph{width:50px;height:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:var(--keyboard-alternate-key-aside-font-size);line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard .ML__keyboard--plate{position:absolute;left:0;bottom:calc(-1 * var(--keyboard-height, 276px));width:100%;margin:0;padding-bottom:env(safe-area-inset-bottom, 0);padding-top:5px;transform:translate(0, 0);opacity:0;visibility:hidden;transition:.28s cubic-bezier(0, 0, .2, 1);transition-property:transform, opacity;touch-action:none;-webkit-user-select:none;user-select:none;pointer-events:all;background-color:var(--keyboard-background);border-top:1px solid var(--keyboard-background-border);font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:16px;font-weight:400;box-sizing:border-box;text-shadow:none;box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23)}.ML__keyboard .ML__keyboard--plate .tex{font-family:'KaTeX_Math',KaTeX_Main,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tex-math{font-family:KaTeX_Math,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tt{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace !important;font-size:var(--keycap-tt-font-size, 30px);font-weight:400}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer{display:none;outline:none}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;width:100%;min-width:736px;max-width:766px}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:20px;width:20px}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{min-width:556px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{width:365px;min-width:365px;max-width:100vw}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.left{position:relative;display:flex;justify-content:flex-start;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.right{display:flex;justify-content:flex-end;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{display:flex;align-items:baseline;justify-content:center;color:var(--keyboard-text);fill:currentColor;background:0;font-size:110%;padding:4px 15px;cursor:pointer;min-height:0;width:max-content;border:none;padding-left:10px;padding-right:10px;margin-top:7px;margin-bottom:8px;margin-left:4px;margin-right:4px;box-shadow:none;border-bottom:2px solid transparent}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled:hover svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled.is-pressed svg{color:var(--keyboard-text);opacity:.2}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{padding-left:4px;padding-right:4px;font-size:90%}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:hover,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-pressed,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-active{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.selected{color:var(--keyboard-text-active);border-bottom-color:var(--keyboard-text-active);padding-bottom:0}.ML__keyboard .ML__keyboard--plate [data-tooltip]{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{position:absolute;display:inline-table;content:attr(data-tooltip);top:inherit;bottom:100%;width:max-content;max-width:200px;padding:8px 8px;background:#616161;color:#fff;text-align:center;z-index:2;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);border-radius:2px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;transition:all .15s cubic-bezier(.4, 0, 1, 1) 1s;opacity:0;transform:scale(.5)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{padding:8px 16px;font-size:16px}}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover::after{opacity:1;transform:scale(1)}.ML__keyboard .ML__keyboard--plate div .rows{border:0;border-collapse:separate;clear:both;margin:auto;display:flex;flex-flow:column;align-items:center}.ML__keyboard .ML__keyboard--plate div .rows>ul{display:flex;flex-flow:row;max-width:100vw;list-style:none;height:var(--keycap-height, 52px);margin:0 0 3px 0;padding:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;--max-width:100px;--margin:6px;margin-right:var(--margin);width:calc(min(var(--max-width), 10vw) - var(--margin));height:var(--keycap-height, 52px);box-sizing:border-box;padding:0;vertical-align:top;text-align:center;float:left;color:var(--keycap-text);fill:currentColor;font-size:var(--keycap-font-size, 20px);background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;cursor:pointer;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .ML__mathlive{pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li:last-child{margin-right:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w0{width:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(min(var(--max-width), 10vw) / 2 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li svg.svg-glyph{padding:8px 0;width:20px;height:20px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:25px;width:25px;min-height:25px;min-width:25px;background:#cd0030;color:white;border-radius:100%;padding:5px;display:flex;align-items:center;justify-content:center;margin-bottom:-2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:16px;height:16px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:16px;width:16px;min-height:16px;min-width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:14px;height:14px}}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.if-wide{display:none}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.is-pressed{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.is-active{transform:translateY(calc(-0.2 * var(--keycap-height, 52px))) scale(1.4, 1.4);z-index:calc(var(--keyboard-zindex, 105) - 5);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.is-active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:18px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:var(--keycap-extra-small-font-size, 14px)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:calc(var(--keycap-extra-small-font-size, 14px) / 1.55)}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{background-color:var(--keycap-modifier-background);border-color:var(--keycap-modifier-border);border-bottom-color:var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-active{color:white}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.w50{font-size:80%;padding-top:10px;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{font-size:9px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:10px;line-height:10px;color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{display:none}}@media (max-width: 768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{--margin:2px;--max-width:74px;--width:34px;min-width:34px}}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{width:calc(10vw - 2px);height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(5vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{width:2px;min-width:2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{font-size:65%}}@media (prefers-color-scheme:dark){.ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:#303030}}body[theme='dark'] .ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:hsl(var(--hue), 19%, 38%)}";function Vl(n,o,t){let i,a;t.default&&(n.dataset.command=JSON.stringify(t.default)),t.alt&&(n.dataset.commandAlt=JSON.stringify(t.alt)),t.shift&&(n.dataset.commandShift=JSON.stringify(t.shift)),t.pressed&&(n.dataset.commandPressed=JSON.stringify(t.pressed)),t.pressAndHoldStart&&(n.dataset.commandPressAndHoldStart=JSON.stringify(t.pressAndHoldStart)),t.pressAndHoldEnd&&(n.dataset.commandPressAndHoldEnd=JSON.stringify(t.pressAndHoldEnd)),oo(n,"pointerdown:passive",s=>{if(1!==s.buttons)return;s.stopPropagation(),i=Date.now(),n.classList.add("is-pressed");let r=s.target;r.hasPointerCapture(s.pointerId)&&r.releasePointerCapture(s.pointerId);let l=n.getAttribute("data-command-pressed");l&&o(JSON.parse(l));let c=n.getAttribute("data-command-press-and-hold-start");c&&(a&&clearTimeout(a),a=setTimeout(()=>{n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),o(JSON.parse(c)))},300))}),oo(n,"pointerenter",s=>{let r=s.target;r.hasPointerCapture(s.pointerId)&&r.releasePointerCapture(s.pointerId),1===s.buttons&&n.classList.add("is-pressed")}),oo(n,"pointercancel",()=>n.classList.remove("is-pressed")),oo(n,"pointerleave",()=>n.classList.remove("is-pressed")),oo(n,"pointerup",s=>{let r=n.classList.contains("is-pressed");n.classList.remove("is-pressed"),n.classList.add("is-active"),setTimeout(()=>n.classList.remove("is-active"),150);let l=Date.now()>=i&&!r?n.getAttribute("data-command-press-and-hold-end"):null;!l&&s.altKey&&(l=n.getAttribute("data-command-alt")),!l&&s.shiftKey&&(l=n.getAttribute("data-command-shift")),l||(l=n.getAttribute("data-command")),l&&o(JSON.parse(l)),s.stopPropagation(),s.preventDefault()})}function cr(){var n;let o=document.querySelector("#mathlive-alternate-keys-panel");return o&&(o.classList.remove("is-visible"),o.innerHTML=""),null==(n=ys.scrim)||n.close(),!1}var fp={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;\u2260\u2208",classes:"tex",layers:["symbols"]}},wd={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'\\char"0190'],"\\rho ":["&#x3A1",'\\char"3A1'],"\\tau ":["&#x3A4;",'\\char"3A4'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'\\char"399'],"\\omicron ":["&#x039F;",'\\char"39F'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'\\char"391'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'\\char"397'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'\\char"39A'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'\\char"396'],"\\chi ":["&Chi;",'\\char"3A7'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'\\char"392'],"\\nu ":["&Nu;",'\\char"39D'],"\\mu ":["&Mu;",'\\char"39C']},ur={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[".",",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",class:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",class:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div","\\%"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\lessgtr","\\nless","\\nleq","\\lesssim","\\precsim","\\prec","\\nprec","\\preccurlyeq","\\lessdot"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\gtrless","\\ngtr","\\ngeq","\\gtrsim","\\succsim","\\succ","\\nsucc","\\succcurlyeq","\\gtrdot"],in:["\\owns"],"!in":["\\backepsilon"],subset:["\\subseteq","\\nsubset","\\nsubseteq"],superset:["\\supseteq","\\nsupset","\\nsupseteq"],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\log_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],underline:["\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"],overline:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}"],xleftarrows:["\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xLeftarrow{#@}","\\xleftharpoonup{#@}","\\xleftharpoondown{#@}","\\xtwoheadleftarrow{#@}","\\xhookleftarrow{#@}","\\xtofrom{#@}","\\xleftequilibrium{#@}","\\xrightleftarrows{#@}"],xrightarrows:["\\xrightarrow{#@}","\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xRightarrow{#@}","\\xrightharpoonup{#@}","\\xrightharpoondown{#@}","\\xtwoheadrightarrow{#@}","\\xrightleftharpoons{#@}","\\xhookrightarrow{#@}","\\xmapsto{#@}","\\xrightequilibrium{#@}","\\xrightleftarrows{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"\u2153 em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"\xbd em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>',command:"deleteAll"}],"->|":[]},ln={},yZ={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='\\exponentialE' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-latex='\\imaginaryI' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='#@^{2}' data-latex='x^2'></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}' data-latex='x^\\placeholder'></li>\n                <li class='keycap tex small' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap small' data-alt-keys='int' data-latex='\\int_0^\\infty'></li>\n                <li class='keycap' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' >,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='xleftarrows' data-latex='\\leftarrow' ></li>\n                <li class='keycap tex small' data-alt-keys='xrightarrows' data-latex='\\rightarrow' ></li>\n                <li class='keycap tex' data-alt-keys='overline' data-latex='\\overline{#@}' data-aside='overline'></li>\n                <li class='keycap tex' data-alt-keys='underline' data-latex='\\underline{#@}' data-aside='underline'></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n\n                <li class='keycap tex' data-alt-keys='in' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!in' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='superset' data-insert='\\supset '>&#x2283;</li>\n\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\left| #0 \\right|' data-latex='\\left| #? \\right|' data-aside='abs'></li>\n\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-latex='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"\\\\char\\\"391\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"0190'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A1'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A4'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"399'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39F'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='\\char\"391'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"397'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39A'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\char\"396'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A7'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='\\char\"392'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39D'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39C'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\cos'></li>\n                <li class='fnbutton' data-latex='\\cos^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log'></li>\n                <li class='fnbutton' data-latex='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-latex='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-latex='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\tan'></li>\n                <li class='fnbutton' data-latex='\\tan^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log_{#?}'></li>\n                <li class='fnbutton' data-latex='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?}' data-latex='x^{#?}'></li>\n                <li class='fnbutton' data-insert='_{#?}' data-latex='x_{#?}'></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#@} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function xp(n,o){n=n.replace(/(^|[^\\])#@/g,"$1#?");let t=Qa(),i=new Me("root",t);return i.body=pi(n,t,{parseMode:"math",args:o}),oa(kl(us(new Re(i.render(new Tt({registers:t.registers},{fontSize:Ea},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function wZ(n,o,t){var i,a,s;let r="<div class='left'>",l=o.replace(/\s+/g," ").split(" ");if(l.length>1){let c=Ze(Ze({},fp),null!=(i=n.customVirtualKeyboards)?i:{});for(let d of l){if(!c[d]){console.error('MathLive: Unknown virtual keyboard "',d,'"');break}r+="<div class='",r+=d===t?"selected ":c[d].command?"action ":"layer-switch ",r+=(null!=(a=c[d].classes)?a:"")+"'",c[d].tooltip&&(r+="data-tooltip='"+(null!=(s=Oa(c[d].tooltip))?s:c[d].tooltip)+"' "),d!==t&&("string"==typeof c[d].command?r+=`data-command='"${c[d].command}"'`:Array.isArray(c[d].command)&&(r+=`data-command='${JSON.stringify(c[d].command)}'`),c[d].layer&&(r+="data-layer='"+c[d].layer+"'")),r+=">"+c[d].label+"</div>"}}return r+="</div>",r+="<div class='ML__toolbar-action right'></div>",r}function CZ(n,o){let t="";if("none"===n.virtualKeyboardToolbar)return"";let i=[];null!=o&&o.model.selectionIsCollapsed?i.push("undo","redo","pasteFromClipboard"):i.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let a={undo:`<div class='action ${!1===o?.canUndo()?"disabled":""}'\n          data-command='"undo"'\n          data-tooltip='${Oa("tooltip.undo")}'>\n          <svg><use xlink:href='#svg-undo' /></svg>\n      </div>`,redo:`<div class='action ${!1===o?.canRedo()?"disabled":""}'\n          data-command='"redo"'\n          data-tooltip='${Oa("tooltip.redo")}'>\n          <svg><use xlink:href='#svg-redo' /></svg>\n      </div>`,cutToClipboard:`\n        <div class='action'\n            data-command='"cutToClipboard"'\n            data-tooltip='${Oa("tooltip.cut to clipboard")}'>\n            <svg><use xlink:href='#svg-cut' /></svg>\n        </div>\n    `,copyToClipboard:`\n        <div class='action'\n            data-command='"copyToClipboard"'\n            data-tooltip='${Oa("tooltip.copy to clipboard")}'>\n            <svg><use xlink:href='#svg-copy' /></svg>\n        </div>\n    `,pasteFromClipboard:`\n        <div class='action'\n            data-command='"pasteFromClipboard"'\n            data-tooltip='${Oa("tooltip.paste from clipboard")}'>\n            <svg><use xlink:href='#svg-paste' /></svg>\n        </div>\n    `};return t+=i.map(s=>a[s]).join(""),t}function bp(n,o,t){var i,a;for(let s of o){let r;s.getAttribute("data-latex")?r=xp(s.getAttribute("data-latex").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):s.getAttribute("data-insert")&&""===s.innerHTML?r=xp(s.getAttribute("data-insert").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):s.getAttribute("data-content")&&(r=s.getAttribute("data-content").replace(/&quot;/g,'"')),s.getAttribute("data-aside")&&(r=(r??"")+"<aside>"+s.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),void 0!==r&&(s.innerHTML=n.options.createHTML(r)),s.getAttribute("data-classes")&&s.classList.add(s.getAttribute("data-classes"));let l=null==(i=s.getAttribute("data-insert"))?void 0:i.replace(/&quot;/g,'"');l&&wd[l]&&(s.dataset.shifted=wd[l][0],s.dataset.shiftedCommand=JSON.stringify(["insertAndUnshiftKeyboardLayer",wd[l][1]]));let c,d=s.getAttribute("data-command");if(d)if(/^[a-zA-Z]+$/.test(d))c=d;else try{c=JSON.parse(d)}catch{}else c=s.getAttribute("data-insert")?["insert",s.getAttribute("data-insert"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:s.getAttribute("data-latex")?["insert",s.getAttribute("data-latex"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",null!=(a=s.getAttribute("data-key"))?a:s.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}];if(c){t&&(c=[t,c]);let f={default:c},y=s.getAttribute("data-alt-keys");y&&ln[y]&&(f={default:c,pressAndHoldStart:["showAlternateKeys",y],pressAndHoldEnd:"hideAlternateKeys"}),Vl(s,O=>n.executeCommand(O),f)}}}function kZ(n,o){var t,i,a,s;let r={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},l=n.virtualKeyboardLayout;if("auto"===l){let O=ir();O&&(l=O.virtualLayout),(!l||"auto"===l)&&(l=null!=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[cn.locale.slice(0,2)])?t:"qwerty")}let f,c=null!=(i=r[l])?i:r.qwerty,d=o;d=d.replace(/<arrows\/>/g,'\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToPreviousChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-left" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToPreviousChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-left\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToNextChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-right" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToNextChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-right\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","commit"]\'>\n        <svg class="svg-glyph"><use xlink:href=\'#svg-commit\' /></svg></li>');let y=d.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;y;){f="";let O=y[2].match(/[a-zA-Z][a-zA-Z\d-]*=(['"])(.*?)\1/g),N={};if(O)for(let z of O){let $=z.match(/([a-zA-Z][a-zA-Z\d-]*)=(['"])(.*?)\2/);$&&(N[$[1]]=$[3])}let I=c[N.name];if(I||(I=r.qwerty[N.name]),I)for(let z of I){let $=null!=(a=N.class)?a:"";$&&($=` ${$}`),"~"===z?(f+="<li class='action font-glyph bottom right ",f+=I.length-(I.match(/ /g)||[]).length/2==10?"w10":"w15",f+='\' data-shifted=\'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deleteBackward"]\'\n                        ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>'):" "===z?f+="<li class='separator w5'></li>":"^"===z?f+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+N["shift-layer"]+'\'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>':"/"===z?f+="<li class='keycap"+$+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":"*"===z?f+="<li class='keycap"+$+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===z?f+="<li class='keycap"+$+"' data-alt-keys='-' data-key='-'>&#x2212;</li>":"."===z?f+="<li class='keycap"+$+"' data-alt-keys='.' data-command='\"insertDecimalSeparator\"'>"+(null!=(s=n.decimalSeparator)?s:".")+"</li>":$.includes("tt")?f+=`<li class='keycap${$}' data-alt-keys='${z}' data-command='["typedText","${z}",{"mode":"latex", "focus":true, "feedback":true}]'>${z}</li>`:f+="<li class='keycap"+$+"' data-alt-keys='"+z+"'>"+z+"</li>"}else console.error("MathLive: Unknown roman keyboard row:",N.name);d=d.replace(new RegExp(y[1]+y[2]+y[3]),f),y=d.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return d}function Xl(n){cr();let o=n.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let t of o){let i=t.getAttribute("data-unshifted-content");i&&(t.innerHTML=n.options.createHTML(i),t.dataset.unshiftedContent="");let a=t.getAttribute("data-unshifted-command");a&&(t.dataset.command=a,t.dataset.unshiftedCommand="")}return!1}function OZ(n){return Object.keys(n).map(o=>`${o} {${function AZ(n){return"string"==typeof n?n:Object.entries(n).map(([o,t])=>`${o}:${t} !important`).join(";")}(n[o])}}`).join("")}function vp(n,o){dr(n),cr(),Xl(n);let t=n?.element.querySelectorAll(".keyboard-layer"),i=!1;for(let a of t)if(a.dataset.layer===o){i=!0;break}if(i)for(let a of t)a.dataset.layer===o?a.classList.add("is-visible"):a.classList.remove("is-visible");return n.focusMathfield(),!0}function dr(n,o=""){let t=n.options.virtualKeyboardContainer;if(!t||!n.stateWillChange(!0))return!1;if(n.element?n.element.classList.add("is-visible"):n.buildAndAttachElement(o),!n.visible){let i=Dn();i.visibleVirtualKeyboard&&Cd(i.visibleVirtualKeyboard),i.visibleVirtualKeyboard=n;let a=t.style.paddingBottom;n.originalContainerBottomPadding=a,t.style.paddingBottom=a?`calc(${a} + var(--keyboard-height, 276px) - 1px)`:"calc(var(--keyboard-height, 276px) - 1px)"}return setTimeout(()=>{var i;null==(i=n.element)||i.classList.add("is-visible"),n.focusMathfield()},1),n.visible=!0,n.stateChanged(),!1}function Cd(n){var o,t,i;let a=n.options.virtualKeyboardContainer;return!a||!n.stateWillChange(!1)||(n.element&&(Dn().visibleVirtualKeyboard=void 0,n.disable(),cr(),n.visible=!1,null==(o=n.coreStylesheet)||o.release(),n.coreStylesheet=null,null==(t=n.virtualKeyboardStylesheet)||t.release(),n.virtualKeyboardStylesheet=null,null==(i=n._element)||i.remove(),n._element=void 0,null!==n.originalContainerBottomPadding&&(a.style.paddingBottom=n.originalContainerBottomPadding)),n.visible=!1,n.stateChanged()),!1}function ec(n,o,t){"function"==typeof o&&(t=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,s="";for(;!a;){let r=n.at(i);a=0===o||void 0===r||"math"!==r.mode||!(/mord|textord|mpunct/.test(r.type)||"mop"===r.type&&/[a-zA-Z]+/.test(r.value))||!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript")||"function"==typeof t&&!t(r),a||(r.mode="text",r.command=r.value,r.verbatimLatex=void 0,s+=r.value),i-=1,o-=1}gn(n,{data:s,inputType:"insertText"})}function mr(n,o,t){"function"==typeof o&&(t=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,s=[];for(;!a;){let r=n.at(i);a=0===o||!r||r.isFirstSibling||"text"!==r.mode||" "===r.value||t&&!t(r),a||(s.push(r.serialize({defaultMode:"math"})),r.mode="math"),i-=1,o-=1}kd(n),gn(n,{data:wn(s),inputType:"insertText"})}function kd(n){var o;let t=n.position-1;for(;t>=0&&"math"===(null==(o=n.at(t))?void 0:o.mode);)t-=1;if(!(t<0)&&"text"===n.at(t).mode&&" "===n.at(t).value&&"math"===n.at(t-1).mode){n.at(t-1).parent.removeChild(n.at(t-1));let i=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,n.position-=1,n.suppressChangeNotifications=i,gn(n,{inputType:"deleteContent"})}}gi({showAlternateKeys:function vZ(n,o){var t,i;let a=ln[o],s=document.createElement("div");s.setAttribute("aria-hidden","true"),s.className="ML__keyboard alternate-keys"+(n.element.classList.contains("material")?" material":""),s.id="mathlive-alternate-keys-panel",s.style.width=a.length>=14?"236px":a.length>=7?"286px":4===a.length||2===a.length?"146px":1===a.length?"86px":"146px",s.style.height="auto";let r="";for(let d of a)r+="<li","string"==typeof d?r+=' data-latex="'+d.replace(/"/g,"&quot;")+'"':(d.latex&&(r+=' data-latex="'+d.latex.replace(/"/g,"&quot;")+'"'),d.content&&(r+=' data-content="'+d.content.replace(/"/g,"&quot;")+'"'),d.insert&&(r+=' data-insert="'+d.insert.replace(/"/g,"&quot;")+'"'),d.command&&(r+="string"==typeof d.command?` data-command="${d.command.replace(/"/g,"&quot;")}"`:" data-command='"+JSON.stringify(d.command).replace(/"/g,"&quot;")+"'"),d.aside&&(r+=` data-aside="${d.aside.replace(/"/g,"&quot;")}"`),d.class&&(r+=` data-classes="${d.class}"`)),r+=">",r+="string"==typeof d?d:null!=(t=d.label)?t:"",r+="</li>";r="<ul>"+r+"</ul>",s.innerHTML=n.options.createHTML(r),bp(n,[...s.querySelectorAll("li")],"performAlternateKeys"),ys.scrim||(ys.scrim=new ys),ys.scrim.open({root:n.options.virtualKeyboardContainer,child:s});let l=null==(i=n?.element)?void 0:i.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+o+'"]'),c=l?.getBoundingClientRect();if(c){c.top-s.clientHeight<0&&(s.style.width="auto",a.length<=6?s.style.height="56px":a.length<=12?s.style.height="108px":a.length<=18?s.style.height="205px":s.classList.add("compact"));let d=(c.top-s.clientHeight+5).toString()+"px",f=Math.max(0,Math.min(window.innerWidth-s.offsetWidth,(c.left+c.right-s.offsetWidth)/2))+"px";s.style.transform="translate("+f+","+d+")",s.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),gi({shiftKeyboardLayer:function SZ(n){let o=n?.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let t of o){if(t.dataset.unshiftedContent)return!1;let i=t.getAttribute("data-shifted");if(i||/^[a-z]$/.test(t.innerHTML)){t.dataset.unshiftedContent=t.innerHTML,i||(i=t.innerHTML.toUpperCase()),t.innerHTML=n.options.createHTML(i);let a=t.getAttribute("data-command");if(a){t.dataset.unshiftedCommand=a;let s=t.getAttribute("data-shifted-command");if(s)t.dataset.command=s;else{let r=JSON.parse(a);Bn(r)&&(r[1]=r[1].toUpperCase()),t.dataset.command=JSON.stringify(r)}}}}return!1}},{target:"virtual-keyboard"}),gi({hideAlternateKeys:()=>cr(),performAlternateKeys:function EZ(n,o){return cr(),n.executeCommand(o)},switchKeyboardLayer:(n,o)=>vp(n,o),unshiftKeyboardLayer:n=>Xl(n),insertAndUnshiftKeyboardLayer:function MZ(n,o){return n.executeCommand(["insert",o]),Xl(n),!0}},{target:"virtual-keyboard"}),gi({toggleVirtualKeyboardAlt:function IZ(n){let o=!1;return null!=n&&n.element&&(o=n?.element.classList.contains("material"),n.disable()),dr(n,o?"":"material"),!1},toggleVirtualKeyboardShift:function LZ(n){var o,t,i;n.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[n.options.virtualKeyboardLayout];let a=null!=(i=null==(t=null==(o=n?.element)?void 0:o.querySelector("div.keyboard-layer.is-visible"))?void 0:t.id)?i:"";return n&&n.disable(),dr(n),a&&vp(n,a),!1}},{target:"virtual-keyboard"}),gi({toggleVirtualKeyboard:(n,o)=>function ZZ(n,o){return n.visible?Cd(n):dr(n,o),!1}(n,o),hideVirtualKeyboard:n=>Cd(n),showVirtualKeyboard:(n,o)=>dr(n,o)},{target:"virtual-keyboard"});var Td,yp="#mathlive-keystroke-caption-panel{visibility:hidden;background:var(--secondary, hsl(var(--hue, 212), 19%, 26%));border-color:var(--secondary-border, hsl(0,0%,91%));box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23);text-align:center;border-radius:6px;padding:16px;position:absolute;z-index:1;display:flex;flex-direction:row-reverse;justify-content:center;--keystroke:white;--on-keystroke:#555;--keystroke-border:#f7f7f7}@media (prefers-color-scheme:dark){body:not([theme='light']) #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}}body[theme='dark'] #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}#mathlive-keystroke-caption-panel>span{min-width:14px;margin:0 8px 0 0;padding:4px;background-color:var(--keystroke);color:var(--on-keystroke);fill:currentColor;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:1em;border-radius:6px;border:2px solid var(--keystroke-border)}",Ad=null,Od=null;function wp(n){return n.keystrokeCaption||(n.keystrokeCaption=O_("mathlive-keystroke-caption-panel"),void 0===Td&&(Td=Qo(yp).toString(36)),Ad=qo(null,yp,Td),Od=qo(null,Co,Qo(Co).toString(36))),n.keystrokeCaption}function UZ(n){if(!n||n.length>1)return null;let o=n[0];return o instanceof Xn&&"("===o.leftDelim&&")"===o.rightDelim?o.removeBranch("body"):null}function tc(n){if(n){for(let o=0;n[o];o++){let t=n[o];if(t instanceof Xn&&"("===t.leftDelim){let i=0,a=0,s=0;for(let r=0;t.body[r];r++)"genfrac"===t.body[r].type&&(i++,a=r),s++;0===s&&1===i&&(n[o]=t.body[a])}}for(let o of n){for(let t of o.branches)if(!o.hasEmptyBranch(t)){tc(o.branch(t));let i=UZ(o.branch(t));i&&o.setChildren(i,t)}if(o instanceof hn)for(let t of o.cells)tc(t)}}}function Cp(n){if(!n)return[];let o=[];for(let t of n){for(let i of t.branches)if(!t.hasEmptyBranch(i)){let a=Cp(t.branch(i));o.push(...a)}t instanceof An&&o.push(t)}return o}function kp(n){return!!/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(n.type)&&!(n.isExtensibleSymbol||n.isFunction)}function Sd(n,o,t){let i=n.at(n.position),{parent:a}=i,s=a instanceof Xn?a.leftDelim+a.rightDelim:"";if("\\lbrace\\rbrace"===s&&(s="{}"),"\\{\\}"===s&&(s="{}"),"\\lparen\\rparen"===s&&(s="()"),"{}"===s&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(o))return Cn.insert("math",n,"\\,\\middle"+o+"\\, ",{format:"latex",style:t}),!0;if(("{"===o||"\\{"===o)&&(o="\\lbrace"),("}"===o||"\\}"===o)&&(o="\\rbrace"),"["===o&&(o="\\lbrack"),"]"===o&&(o="\\rbrack"),$s[o]){let l=a;if("leftright"===l.type&&l.firstChild===i&&("?"===l.leftDelim||"."===l.leftDelim))return l.leftDelim=o,l.isDirty=!0,!0;if(!(a instanceof Xn&&"|"===a.leftDelim)){if(Cn.insert("math",n,`\\left${o}\\right?`,{format:"latex",style:t}),"first"!==i.lastSibling.type){let c=n.offsetOf(i.lastSibling),d=n.extractAtoms([n.position,c]);n.at(n.position).body=d,n.position-=1}return!0}}let r="";if(Object.keys($s).forEach(l=>{o===$s[l]&&(r=l)}),r){if(a instanceof Xn&&i.isLastSibling)return a.isDirty=!0,a.rightDelim=o,n.position+=1,gn(n,{data:o,inputType:"insertText"}),!0;let c,l=n.offsetOf(i.firstSibling);for(c=n.position;c>=l;c--){let y=n.at(c);if(y instanceof Xn&&"?"===y.rightDelim)break}let d=n.at(c);if(c>=l&&d instanceof Xn)return d.rightDelim=o,d.addChildren(n.extractAtoms([c,n.position]),i.treeBranch),n.position=c,gn(n,{data:o,inputType:"insertText"}),!0;if(a instanceof Xn&&"?"===a.rightDelim)return a.isDirty=!0,a.rightDelim=o,a.parent.addChildren(n.extractAtoms([n.position,n.offsetOf(i.lastSibling)]),a.treeBranch),n.position=n.offsetOf(a),gn(n,{data:o,inputType:"insertText"}),!0;let f=a.parent;return!!(f instanceof Xn&&"?"===f.rightDelim&&n.at(n.position).isLastSibling)&&(n.position=n.offsetOf(f),Sd(n,o,t))}return!1}function Tp(n,o,t){var i,a,s,r;let{model:l}=n;!function A7(n){var o,t;if(!n||"Unidentified"===n.key||"Dead"===n.key)return;let i=n.shiftKey&&n.altKey?3:n.altKey?2:n.shiftKey?1:0;for(let a of nr)(null==(o=a.mapping[n.code])?void 0:o[i])===n.key?a.score+=1:null!=(t=a.mapping[n.code])&&t[i]&&(a.score=0);nr.sort((a,s)=>s.score-a.score)}(t);let c=ir();if(n.keyboardLayout!==c.id&&(n.keyboardLayout=c.id,n._keybindings=void 0),clearTimeout(n.inlineShortcutBufferFlushTimer),n.inlineShortcutBufferFlushTimer=0,function DZ(n,o){if(n.options.readOnly||!n.keystrokeCaptionVisible)return;let t=wp(n),i=n.element.getBoundingClientRect();t.style.left=`${i.left}px`,t.style.top=i.top-64+"px",t.innerHTML=n.options.createHTML("<span>"+(nd(o)||o)+"</span>"+t.innerHTML),t.style.visibility="visible",setTimeout(()=>{t.childNodes.length>0&&t.childNodes[t.childNodes.length-1].remove(),0===t.childNodes.length&&(t.style.visibility="hidden")},3e3)}(n,o),t.defaultPrevented)return n.flushInlineShortcutBuffer(),!1;let d,y,f="";if(!n.options.readOnly){if("math"===n.mode)if("[Backspace]"===o)n.inlineShortcutBuffer.pop(),n.flushInlineShortcutBuffer({defer:!0});else if(_p(t)){let I=Wl(t),z=[...null!=(a=null==(i=n.inlineShortcutBuffer[n.inlineShortcutBuffer.length-1])?void 0:i.keystrokes)?a:[],I];n.inlineShortcutBuffer.push({state:l.getState(),keystrokes:z,leftSiblings:BZ(n)});let $=0,Y="";for(;!d&&$<z.length;)y=n.inlineShortcutBuffer.length-(z.length-$),Y=z.slice($).join(""),d=Yu(n.inlineShortcutBuffer[y].leftSiblings,Y,n.options.inlineShortcuts),!d&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(Y)&&(d=n.options.onInlineShortcut(n,Y)),$+=1;n.flushInlineShortcutBuffer({defer:!0})}else n.flushInlineShortcutBuffer();if(n.options.smartMode){let I=n.mode;d?n.mode="math":function jZ(n,o,t){if(n.smartModeSuppressed)return!1;let{model:i}=n;if(!i.at(i.position).isLastSibling||!t||!_p(t))return!1;let a=Wl(t);if(!i.selectionIsCollapsed)return!("text"!==n.mode||!/[/_^]/.test(a));let s=function PZ(n){let o="",t=n.position,i=!1;for(;!i;){let a=n.at(t);i=!(a&&("text"===a.mode||"math"===a.mode&&/mord|textord|mpunct/.test(a.type))),i||(o=a.value+o),t-=1}return o}(i)+a;if("text"===n.mode){if("Esc"===o||/[/\\]/.test(a))return!0;if(/[\^_]/.test(a))return/(^|\s)[a-zA-Z][^_]$/.test(s)&&mr(i,1),!0;let r={")":"(","}":"{","]":"["}[a],{parent:l}=i.at(i.position);if(r&&l instanceof Xn&&l.leftDelim===r)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(s))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(a))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(s))return mr(i,1),!1;if(/\D\.[^\d\s]$/.test(s)){mr(i,1);let c=i.at(i.position);return c.value="\u22c5",c.style.variant="normal",c.command="\\cdot",c.verbatimLatex=void 0,gn(i,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(s)||/\.\d$/.test(s)||/\([\d+\-.]$/.test(s))return mr(i,1),!0;if(/\([a-z][,;]$/.test(s))return mr(i,2),!0;if(/[\d+\-=><*|]$/.test(a))return kd(i),!0}else{if("[Space]"===o)return ec(i,void 0,r=>/[a-z][:,;.]$/.test(r.value)),!0;if(/[a-zA-Z]{3,}$/.test(s)&&!/(dxd|abc|xyz|uvw)$/.test(s))return ec(i,void 0,r=>/[a-zA-Z]/.test(r.value)),!0;if(/(^|\W)(if)$/i.test(s))return ec(i,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(s)&&!/(\u03b1\u03b2\u03b3)$/.test(s))return ec(i,void 0,r=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(r.value)),!0;if("?"===a||"."===a&&!/[\d-+]\.$/.test(s))return!0}return!1}(n,o,t)&&(n.mode={math:"text",text:"math"}[n.mode],f=""),n.mode!==I&&(null!=(s=n.host)&&s.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(n.mode=I))}}if(!d){if(f||(f=function E7(n,o,t){if(0===n.length)return"";let i=Bl(Q_(t));for(let a=n.length-1;a>=0;a--)if(n[a].key===i&&(!n[a].ifMode||n[a].ifMode===o))return n[a].command;return""}(n.keybindings,n.mode,o)),!f&&("[Enter]"===o||"[Return]"===o)){let I=!1;return mn(l,{inputType:"insertLineBreak"})&&(n.host&&(I=!n.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),I||t.preventDefault&&(t.preventDefault(),t.stopPropagation()),gn(l,{inputType:"insertLineBreak"})),I}if("math"===n.mode){if("[Space]"===o){if(n.flushInlineShortcutBuffer(),n.options.mathModeSpace)return n.snapshot(),Cn.insert("math",l,n.options.mathModeSpace,{format:"latex"}),f="",n.dirty=!0,n.scrollIntoView(),t.preventDefault&&(t.preventDefault(),t.stopPropagation()),!1;let I=l.at(l.position+1),z=l.at(l.position-1);("text"===I?.mode||"text"===z?.mode)&&(n.snapshot(),Cn.insert("text",l," "),n.dirty=!0)}null!=(r=l.at(l.position))&&r.isDigit()&&","===n.options.decimalSeparator&&","===Wl(t)&&(f="insertDecimalSeparator")}}if(!d&&!f)return!0;let O=l.at(Math.max(l.position,l.anchor)),{parent:N}=O;if("moveAfterParent"===f&&"leftright"===N?.type&&O.isLastSibling&&n.options.smartFence&&Sd(l,".",n.style)&&(f="",En(n)),n.keyboardDelegate.cancelComposition(),f)n.executeCommand(f);else if(d){let I=Ze(Ze({},l.at(l.position).computedStyle),n.style);if(!/^\\({|}|\[|]|@|#|\$|%|&|\^|_|backslash)$/.test(d)){let z=n.mode;Cn.insert(n.mode,l,Wl(t),{suppressChangeNotifications:!0,style:I}),n.snapshot(),l.setState(n.inlineShortcutBuffer[y].state),n.mode=z}l.deferNotifications({content:!0,selection:!0,data:d??null,type:"insertText"},()=>(Cn.insert(n.mode,l,d,{format:"latex",style:I}),kd(n.model),d.endsWith(" ")&&(n.mode="text",Cn.insert("text",l," ",{style:I})),!0)),n.snapshot(),n.dirty=!0,l.announce("replacement")}return n.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1}function Ed(n,o,t){var i;let{model:a}=n;if(n.options.readOnly)return void a.announce("plonk");if((t=t??{}).focus&&n.focus(),t.feedback&&(n.options.keypressVibration&&vu()&&navigator.vibrate(3),n.playSound("keypress")),"string"==typeof t.mode&&n.switchMode(t.mode),t.simulateKeystroke){let c=o.charAt(0),d=new KeyboardEvent("keypress",{key:c});if(!Tp(n,c,d))return}let s=a.at(a.position),r=Ze(Ze({},s.computedStyle),n.style);a.selectionIsCollapsed||(a.deleteAtoms(Bi(a.selection)),n.snapshot());let l=c_(o);if("latex"===n.mode)a.deferNotifications({content:!0,selection:!0,data:o,type:"insertText"},()=>{od(n);for(let c of l)Cn.insert("latex",a,c);zl(n)});else if("text"===n.mode)for(let c of l)Cn.insert("text",a,c,{style:r});else if("math"===n.mode)for(let c of l){let d={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[c];" "===c&&n.options.mathModeSpace&&(d=["insert",n.options.mathModeSpace]),d?n.executeCommand(d):/\d/.test(c)&&n.options.smartSuperscript&&"superscript"===s.treeBranch&&"mop"!==(null==(i=s.parent)?void 0:i.type)&&s.hasNoSiblings?(Cn.insert("math",a,c,{style:r}),rp(a)):("mord"===s.type&&/[a-zA-Z]/.test(s.value)&&/[a-zA-Z]/.test(c)&&(s.style.variant&&(r.variant=s.style.variant),s.style.variantStyle&&(r.variantStyle=s.style.variantStyle)),Cn.insert("math",a,c,{style:r}))}n.snapshotAndCoalesce(),n.dirty=!0,n.scrollIntoView()}function BZ(n){let o=n.model,t=[],i=o.at(Math.min(o.position,o.anchor));for(;"first"!==i.type;)t.push(i),i=i.leftSibling;return t}function Ap(n,o){var t,i,a,s,r,l;let c={};"string"==typeof o.color&&(c.verbatimColor=o.color,c.color=null!=(t=n.colorMap(o.color))?t:"none"),"string"==typeof o.backgroundColor&&(c.verbatimBackgroundColor=o.backgroundColor,c.backgroundColor=null!=(i=n.backgroundColorMap(o.backgroundColor))?i:"none"),"string"==typeof o.fontFamily&&(c.fontFamily=o.fontFamily),"string"==typeof o.series&&(c.fontSeries=o.series),"string"==typeof o.fontSeries&&(c.fontSeries=o.fontSeries.toLowerCase()),c.fontSeries&&(c.fontSeries=null!=(a={bold:"b",medium:"m",normal:"m"}[c.fontSeries])?a:c.fontSeries),"string"==typeof o.shape&&(c.fontShape=o.shape),"string"==typeof o.fontShape&&(c.fontShape=o.fontShape.toLowerCase()),c.fontShape&&(c.fontShape=null!=(s={italic:"it",up:"n",upright:"n",normal:"n"}[c.fontShape])?s:c.fontShape);let d=null!=(r=o.size)?r:o.fontSize;return"number"==typeof d?c.fontSize=Math.max(1,Math.min(10,d)):"string"==typeof d&&(c.fontSize=null!=(l={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[d.toLowerCase()])?l:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[d]),c}new class extends Cn{constructor(){super("math")}onPaste(n,o){if(!o||!mn(n.model,{data:"string"==typeof o?o:null,dataTransfer:"string"==typeof o?null:o,inputType:"insertFromPaste"}))return!1;let t="",i="auto",a="string"!=typeof o?o.getData("application/json+mathlive"):"";if(a)try{let s=JSON.parse(a);if(s&&Array.isArray(s)){n.snapshot();let r=io(s,n),{model:l}=n;l.selectionIsCollapsed||l.deleteAtoms(Bi(l.selection));let c=l.at(l.position);if(c.parent instanceof hn){let d=[],f=[];"first"===r[0].type&&r.shift(),"first"===r[r.length-1].type&&r.pop();for(let I of r)"first"===I.type&&f.length>0?(d.push(f),f=[I]):f.push(I);f.length>0&&d.push(f);let y=Number(c.treeBranch[0]),O=Number(c.treeBranch[1]),N=c.parent.maxColumns;for(;c.parent.colCount-O<d.length&&c.parent.colCount<N;)c.parent.addColumn();c.parent.addChildrenAfter(d[0],c);for(let I=1;I<d.length;I++)O++,O>=N&&(O=0,c.parent.addRowAfter(y),y++),c.parent.setCell(y,O,d[I])}else c.parent.addChildrenAfter(r.filter(d=>"first"!==d.type),c);return l.position=l.offsetOf(r[r.length-1]),gn(l,{inputType:"insertFromPaste"}),En(n),!0}}catch{}if(a="string"!=typeof o?o.getData("application/json"):"",a&&n.computeEngine)try{let s=JSON.parse(a);if("object"==typeof s&&"latex"in s&&s.latex&&(t=s.latex),!t){let r=n.computeEngine.box(s);r&&!r.has("Error")&&(t=r.latex)}t||(i="latex")}catch{}if(!t&&"string"!=typeof o&&(t=o.getData("application/x-latex"),t&&(i="latex")),t||(t="string"==typeof o?o:o.getData("text/plain")),t){let s;return n.snapshot(),[s,t]=Gu(t),"auto"===i&&s&&(i="latex"),this.insert(n.model,t,{format:i})&&En(n),!0}return!1}insert(n,o,t){var i,a;let s="string"==typeof o?o:null!=(a=null==(i=n.mathfield.computeEngine)?void 0:i.box(o).latex)?a:"";if(!t.suppressChangeNotifications&&!mn(n,{data:s,inputType:"insertText"}))return!1;if(t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder"),t.format||(t.format="auto"),n.mathfield.smartFence){if(n.selectionIsCollapsed&&"string"==typeof o&&Sd(n,o,t.style))return!0}else if("replaceAll"!==t.insertionMode){let{parent:K}=n.at(n.position);if(K instanceof Xn&&"?"===K.rightDelim&&n.at(n.position).isLastSibling&&"string"==typeof o&&/^[)}\]|]$/.test(o))return K.isDirty=!0,K.rightDelim=o,n.position+=1,z_(n),gn(n,{data:s,inputType:"insertText"}),!0}let{suppressChangeNotifications:r}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let l=n.suppressChangeNotifications;n.suppressChangeNotifications=!0;let c={};if(c[0]="replaceAll"===t.insertionMode?"":n.getValue(n.selection,"latex-unstyled"),c["?"]="\\placeholder{}",c["@"]=c["?"],"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Bi(n.selection)),n.at(n.position).isLastSibling||"placeholder"!==n.at(n.position+1).type?"placeholder"===n.at(n.position).type&&n.deleteAtoms([n.position-1,n.position]):n.deleteAtoms([n.position,n.position+1]),c[0])c["@"]=c[0];else if("string"==typeof o&&/(^|[^\\])#@/.test(o)){let K=function RZ(n){let o=n.at(n.position);if("text"===o.mode){for(;!o.isFirstSibling&&"text"===o.mode;)o=o.leftSibling;return n.offsetOf(o)}let t=o,i=!1;if("mclose"===o.type){let a=u_[o.value];for(;!o.isFirstSibling&&("mopen"!==o.type||o.value!==a);)o=o.leftSibling;o.isFirstSibling||(o=o.leftSibling),i=!0}else"leftright"===o.type&&(o=o.leftSibling,i=!0);if(i)for(;!o.isFirstSibling&&(o.isFunction||kp(o));)o=o.leftSibling;else{let a=[];for(;!o.isFirstSibling&&(kp(o)||a.length>0);)"mclose"===o.type&&a.unshift(o.value),"mopen"===o.type&&a.length>0&&o.value===u_[a[0]]&&a.shift(),o=o.leftSibling}return t===o?-1:n.offsetOf(o)}(n);K>=0&&(c["@"]=n.getValue(K,n.position,"latex-unstyled"),n.deleteAtoms([K,n.position]))}c[0]||(c[0]=c["?"]);let d=!1,[y,O]=function FZ(n,o,t,i){var a;let s,r=[];if("string"!=typeof o||"math-json"===i.format){if(!n.mathfield.computeEngine)return["math-json",[]];[s,o]=["latex",n.mathfield.computeEngine.box(o).latex],r=pi(o,n.mathfield,{parseMode:"math"})}else"string"==typeof o&&"ascii-math"===i.format?([s,o]=ql(o,{format:"ascii-math",inlineShortcuts:n.mathfield.options.inlineShortcuts}),r=pi(o,n.mathfield,{parseMode:"math"}),"latex"!==s&&n.options.removeExtraneousParentheses&&tc(r)):("auto"===i.format||null!=(a=i.format)&&a.startsWith("latex"))&&("auto"===i.format&&([s,o]=ql(o,{format:"auto",inlineShortcuts:n.mathfield.options.inlineShortcuts})),"latex"===i.format&&([,o]=Gu(o)),r=pi(o,n.mathfield,{parseMode:"math",args:t}),"latex"!==i.format&&n.options.removeExtraneousParentheses&&tc(r));return ca(r,i.style),[s??"latex",r]}(n,o,K=>(d=!0,c[K]),t);if(!O)return!1;let N=Cp(O),I=N.filter(K=>K.placeholderId&&!n.mathfield.placeholders.has(K.placeholderId)),z=N.map(K=>K.placeholderId);[...n.mathfield.placeholders.keys()].filter(K=>!z.includes(K)).forEach(K=>{var X;n.mathfield.placeholders.has(K)&&(null==(X=n.mathfield.placeholders.get(K))||X.field.remove(),n.mathfield.placeholders.delete(K))}),I.forEach(K=>{var X,ye;K.placeholderId&&n.mathfield.placeholders.has(K.placeholderId);let ae=n.mathfield.options.virtualKeyboardMode;"manual"===ae&&(ae="onfocus");let oe=new Pd(kt(Ze({},n.mathfield.options),{virtualKeyboardMode:ae,readOnly:!1})),pe=K.defaultValue?Me.serialize(K.defaultValue,{defaultMode:"math"}):"";oe.value=pe,oe.addEventListener("input",()=>{(function Z7(n,o){n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new CustomEvent("placeholder-change",{detail:{placeholderId:o},bubbles:!0,composed:!0})),n.suppressChangeNotifications=!1)})(n,K.placeholderId),setTimeout(()=>En(n.mathfield))}),null==(ye=null==(X=n.mathfield.element)?void 0:X.querySelector(".ML__placeholdercontainer"))||ye.appendChild(oe),n.mathfield.placeholders.set(K.placeholderId,{atom:K,field:oe})});let{parent:$}=n.at(n.position);if("latex"!==y&&n.options.removeExtraneousParentheses&&$ instanceof Xn&&"("===$.leftDelim&&$.hasEmptyBranch("body")&&1===O.length&&"genfrac"===O[0].type){let K=$.parent,X=$.treeBranch;K.removeChild($),K.setChildren(O,X)}let Y=$.hasEmptyBranch("body"),V=n.at(n.position);V.parent.addChildrenAfter(O,V),"latex"===y&&"string"==typeof o&&"root"===$.type&&Y&&!d&&($.verbatimLatex=o),n.suppressChangeNotifications=l;let te=O[O.length-1];if("placeholder"===t.selectionMode){let K=O.reduce((X,ye)=>[...X,...ye.children.filter(ae=>"placeholder"===ae.type)],[]);if(K.length>0){let X=n.offsetOf(K[0]);n.setSelection(X-1,X),n.announce("move")}else te&&(n.position=n.offsetOf(te))}else"before"===t.selectionMode||("after"===t.selectionMode?te&&(n.position=n.offsetOf(te)):"item"===t.selectionMode&&n.setSelection(n.anchor,n.offsetOf(te)));return gn(n,{data:s,inputType:"insertText"}),n.suppressChangeNotifications=r,!0}},gi({undo:n=>(Ba(n,"accept"),n.undo(),!0),redo:n=>(Ba(n,"accept"),n.redo(),!0),scrollIntoView:n=>(n.scrollIntoView(),!0),scrollToStart:n=>(n.field.scroll(0,0),!0),scrollToEnd:n=>{let o=n.field.getBoundingClientRect();return n.field.scroll(o.left-window.scrollX,0),!0},toggleKeystrokeCaption:function NZ(n){return n.keystrokeCaptionVisible=!n.keystrokeCaptionVisible,n.keystrokeCaptionVisible?(n.keystrokeCaption=wp(n),n.keystrokeCaption.innerHTML=""):n.keystrokeCaption&&(n.keystrokeCaption.style.visibility="hidden"),!1},plonk:n=>(n.model.announce("plonk"),!0),switchMode:(n,o,t,i)=>(n.switchMode(o,t,i),!0),insert:(n,o,t)=>n.insert(o,t),typedText:(n,o,t)=>(Ed(n,o,t),!0),insertDecimalSeparator:n=>{if("math"===n.mode&&","===n.options.decimalSeparator){let o=n.model;if(o.at(Math.max(o.position,o.anchor)).isDigit())return n.snapshot(),n.insert("{,}",{format:"latex"}),!0}return n.insert("."),!0},commit:n=>{var o;return mn(n.model,{inputType:"insertLineBreak"})&&(null==(o=n.host)||o.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),gn(n.model,{inputType:"insertLineBreak"})),!0}}),gi({copyToClipboard:n=>(n.focus(),n.model.selectionIsCollapsed&&n.select(),document.queryCommandSupported("copy")?document.execCommand("copy"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1),cutToClipboard:n=>(n.focus(),document.queryCommandSupported("cut")?document.execCommand("cut"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:n=>(n.focus(),document.queryCommandSupported("paste")?document.execCommand("paste"):navigator.clipboard.readText().then(o=>{o&&mn(n.model,{inputType:"insertFromPaste",data:o})?(n.snapshot(),n.insert(o)&&(gn(n.model,{inputType:"insertFromPaste"}),En(n))):n.model.announce("plonk")}),!0)},{target:"mathfield",category:"clipboard"}),gi({applyStyle:function zZ(n,o){n.flushInlineShortcutBuffer();let t=Ap(n,o),{model:i}=n;return i.selectionIsCollapsed?(n.style.fontSeries&&t.fontSeries===n.style.fontSeries&&(t.fontSeries="auto"),t.fontShape&&t.fontShape===n.style.fontShape&&(t.fontShape="auto"),t.color&&t.color===n.style.color&&(t.color="none"),t.backgroundColor&&t.backgroundColor===n.style.backgroundColor&&(t.backgroundColor="none"),t.fontSize&&t.fontSize===n.style.fontSize&&(t.fontSize="auto"),n.style=Ze(Ze({},n.style),t)):n.model.deferNotifications({content:!0,type:"insertText"},()=>{i.selection.ranges.forEach(a=>bd(i,a,t,{operation:"toggle"})),n.snapshot()}),!0}},{target:"mathfield"});var Ja=null,_r=0;function Op(n){return n instanceof PointerEvent}function JZ(n,o,t){if(n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom)return 0;let i=n-(t.left+t.right)/2,a=o-(t.top+t.bottom)/2;return i*i+a*a}function Ep(n,o,t,i,a){if(!t.id)return[1/0,null];if(o.has(t.id))return o.get(t.id);let s=tr(n,t);if(!s)return[1/0,null];let r=[1/0,null];if(t.hasChildren&&!t.captureSelection&&i>=s.left&&i<=s.right)for(let l of t.children){let c=Ep(n,o,l,i,a);c[0]<=r[0]&&(r=c)}return r[1]||(r=[JZ(i,a,s),t]),o.set(t.id,r),r}function HZ(n,o,t){let[,i]=Ep(n,new Map,n.model.root,o,t);return i}function pr(n,o,t,i){var a;let s=n.fieldContent.getBoundingClientRect();if(o>s.right||t>s.bottom+8)return n.model.lastOffset;if(o<s.left||t<s.top-8)return 0;(i=i??{}).bias=null!=(a=i.bias)?a:0;let r=HZ(n,o,t),l=[],c=r;for(;c;)l.unshift(c),c=c.parent;for(let f of l)if(f.captureSelection){r=f;break}let d=n.model.offsetOf(r);if(d<0)return-1;if(r.leftSibling)if(0===i.bias&&"placeholder"!==r.type){let f=tr(n,r);f&&o<(f.left+f.right)/2&&(d=n.model.offsetOf(r.leftSibling))}else i.bias<0&&(d=n.model.offsetOf(r.leftSibling));return d}new class extends Cn{constructor(){super("text")}onPaste(n,o){if(!o)return!1;let t="string"==typeof o?o:o.getData("text/plain");return!(!t||!mn(n.model,{inputType:"insertFromPaste",data:t})||(n.snapshot(),this.insert(n.model,t)&&(gn(n.model,{inputType:"insertFromPaste"}),En(n)),0))}insert(n,o,t={}){if(!mn(n,{data:o,inputType:"insertText"}))return!1;t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder"),t.format||(t.format="auto");let{suppressChangeNotifications:i}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Bi(n.selection));let s=function $Z(n,o){return pi(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),o,{parseMode:"text"})}(o,n.mathfield);if(ca(s,t.style),!s)return!1;let r=n.at(n.position),l=r.parent.addChildrenAfter(s,r);return n.suppressChangeNotifications=a,"before"===t.selectionMode||("item"===t.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),gn(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var Md,Id,nc="mathlive#remote-virtual-keyboard-message";function hr(n){if("object"!=typeof n)return{};let o={};return n.fontsDirectory&&(o.fontsDirectory=n.fontsDirectory),n.soundsDirectory&&(o.soundsDirectory=n.soundsDirectory),n.virtualKeyboards&&(o.virtualKeyboards=n.virtualKeyboards),n.virtualKeyboardLayout&&(o.virtualKeyboardLayout=n.virtualKeyboardLayout),n.customVirtualKeyboardLayers&&(o.customVirtualKeyboardLayers=n.customVirtualKeyboardLayers),n.customVirtualKeyboards&&(o.customVirtualKeyboards=n.customVirtualKeyboards),n.virtualKeyboardTheme&&(o.virtualKeyboardTheme=n.virtualKeyboardTheme),n.keypressVibration&&(o.keypressVibration=n.keypressVibration),n.keypressSound&&(o.keypressSound=n.keypressSound),n.plonkSound&&(o.plonkSound=n.plonkSound),n.virtualKeyboardToolbar&&(o.virtualKeyboardToolbar=n.virtualKeyboardToolbar),n.targetOrigin&&(o.targetOrigin=n.targetOrigin),n.originValidator&&(o.originValidator=n.originValidator),o}Ei()||console.error('MathLive: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var Ld=Ei()?document.createElement("template"):null;Ld&&(Ld.innerHTML='<style>\n:host { display: block; position: relative; overflow: hidden auto;}\n:host([hidden]) { display: none; }\n:host([disabled]) { opacity:  .5; }\n:host(:focus), :host(:focus-within) {\n  outline: Highlight auto 1px;    /* For Firefox */\n  outline: -webkit-focus-ring-color auto 1px;\n}\n:host([readonly]), :host([read-only]) { outline: none; }\n</style>\n<div></div><slot style="display:none"></slot>');var Gt=new WeakMap,ao=class extends HTMLElement{constructor(n){super(),Zd()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open"}),this.shadowRoot.append(Ld.content.cloneNode(!0));let o=this.shadowRoot.querySelector("slot:not([name])");this._slotValue=o.assignedNodes().map(t=>3===t.nodeType?t.textContent:"").join("").trim(),n&&this.setOptions(n),this.shadowRoot.host.addEventListener("pointerdown",t=>this.onPointerDown(),!0),this.shadowRoot.host.addEventListener("focus",()=>{var t;return null==(t=this._mathfield)?void 0:t.focus()},!0),this.shadowRoot.host.addEventListener("blur",()=>{var t;return null==(t=this._mathfield)?void 0:t.blur()},!0)}static get formAssociated(){return Zd()}static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","sounds-directory":"string","horizontal-spacing-scale":"string","math-mode-space":"string","inline-shortcut-timeout":"string","keypress-vibration":"on/off","keypress-sound":"string","plonk-sound":"string","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string","use-shared-virtual-keyboard":"boolean","shared-virtual-keyboard-target-origin":"string"}}static get observedAttributes(){return[...Object.keys(ao.optionsAttributes),"disabled","readonly","read-only"]}onPointerDown(){window.addEventListener("pointerup",n=>{n.target===this&&this.dispatchEvent(new MouseEvent("click",{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,metaKey:n.metaKey,movementX:n.movementX,movementY:n.movementY,relatedTarget:n.relatedTarget,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey}))},{once:!0})}getPlaceholderField(n){var o;return null==(o=this._mathfield)?void 0:o.getPlaceholderField(n)}addEventListener(n,o,t){return super.addEventListener(n,o,t)}removeEventListener(n,o,t){super.removeEventListener(n,o,t)}get form(){var n;return null==(n=this._internals)?void 0:n.form}get name(){var n;return null!=(n=this.getAttribute("name"))?n:""}get type(){return this.localName}get mode(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.mode)?o:"math"}set mode(n){this._mathfield&&(this._mathfield.mode=n)}get computeEngine(){if(this._mathfield)return this._mathfield.computeEngine}set computeEngine(n){this._mathfield&&this._mathfield.setOptions({computeEngine:n})}get expression(){if(this._mathfield)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._mathfield.expression}set expression(n){var o,t;if(!this._mathfield)return;let i=null!=(t=null==(o=this.computeEngine)?void 0:o.box(n).latex)?t:null;null!==i&&this._mathfield.setValue(i),globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"')}get errors(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.errors)?o:[]}get placeholders(){if(!this._mathfield)return{};let n={};for(let[o,t]of this._mathfield.placeholders)n[o]=t.field;return n}getOptions(n){return this._mathfield?bs(this._mathfield.options,n):Gt.has(this)?bs(ud(dd(),Gt.get(this).options),n):null}getOption(n){return this.getOptions([n])[n]}setOptions(n){if(this._mathfield)this._mathfield.setOptions(n),this._mathfield.placeholders.forEach(o=>{o.field.setOptions(kt(Ze({},n),{readOnly:!1}))});else if(Gt.has(this)){let o=Ze(Ze({},Gt.get(this).options),n);Gt.set(this,kt(Ze({},Gt.get(this)),{selection:{ranges:o.readOnly?[[0,0]]:[[0,-1]]},options:o}))}else Gt.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:n});!function VZ(n){let o=dd(),t=n.getOptions();Object.keys(ao.optionsAttributes).forEach(i=>{let a=To(i);"on/off"===ao.optionsAttributes[i]?o[a]!==t[a]?n.setAttribute(i,t[a]?"on":"off"):n.removeAttribute(i):o[a]!==t[a]&&("boolean"===ao.optionsAttributes[i]?t[a]?n.setAttribute(i,""):n.removeAttribute(i):("string"==typeof t[a]||"number"==typeof t[a])&&n.setAttribute(i,t[a].toString()))})}(this)}executeCommand(n){var o,t;return null!=(t=null==(o=this._mathfield)?void 0:o.executeCommand(n))&&t}getValue(n,o,t){var i,a;if(this._mathfield)return this._mathfield.model.getValue(n,o,t);if(Gt.has(this)){let s,r,l;if($l(n)?([s,r]=n.ranges[0],l=o):Kl(n)?([s,r]=n,l=o):la(n)&&la(o)?(s=n,r=o,l=t):(s=0,r=-1,l=n),(void 0===l||"latex"===l)&&0===s&&-1===r)return null!=(a=null!=(i=Gt.get(this).value)?i:this.textContent)?a:""}return""}setValue(n,o){if(this._mathfield&&void 0!==n)return o||(o={suppressChangeNotifications:!0}),void this._mathfield.setValue(n,o);if(Gt.has(this)){let i=Gt.get(this).options;return void Gt.set(this,{value:n,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i})}let t=ic(this);Gt.set(this,{value:n,selection:{ranges:t.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:t})}hasFocus(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.hasFocus())&&o}get virtualKeyboardState(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.virtualKeyboardState)?o:"hidden"}set virtualKeyboardState(n){this._mathfield&&(this._mathfield.virtualKeyboardState=n)}focus(){super.focus()}blur(){var n;null==(n=this._mathfield)||n.blur(),super.blur()}select(){var n;null==(n=this._mathfield)||n.select()}insert(n,o){var t,i;return null!=(i=null==(t=this._mathfield)?void 0:t.insert(n,o))&&i}applyStyle(n,o){var t;return null==(t=this._mathfield)?void 0:t.applyStyle(n,o)}get caretPoint(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.getCaretPoint())?o:null}set caretPoint(n){var o;n&&(null==(o=this._mathfield)||o.setCaretPoint(n.x,n.y))}setCaretPoint(n,o){var t,i;return null!=(i=null==(t=this._mathfield)?void 0:t.setCaretPoint(n,o))&&i}offsetFromPoint(n,o,t){return this._mathfield?pr(this._mathfield,n,o,t):-1}hitboxFromOffset(n){if(!this._mathfield)return null;let o=this._mathfield.model.at(n);if(!o)return null;let t=tr(this._mathfield,o);return t?new DOMRect(t.left,t.top,t.right-t.left,t.bottom-t.top):null}resetUndo(){var n;null==(n=this._mathfield)||n.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}connectedCallback(){var n,o,t;Zd()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let i=this.shadowRoot.querySelector("slot:not([name])");try{this._style=i.assignedElements().filter(s=>"style"===s.tagName.toLowerCase()).map(s=>s.textContent).join("")}catch{}if(this._style){let s=document.createElement("style");s.textContent=this._style,this.shadowRoot.appendChild(s)}try{let s=i.assignedElements().filter(r=>"script"===r.tagName.toLowerCase()&&"application/json"===r.type).map(r=>r.textContent).join("");s&&this.setOptions(JSON.parse(s))}catch{}let a="";if(a=this.hasAttribute("value")?null!=(n=this.getAttribute("value"))?n:"":null!=(o=i?.assignedNodes().map(s=>3===s.nodeType?s.textContent:"").join("").trim())?o:"",this._mathfield=new class{constructor(n,o){var t,i,a;this.focusBlurInProgress=!1,this.stylesheets=[],this.audioBuffers={},this.options=ud(kt(Ze({},dd()),{registers:x_(this)}),o.readOnly?kt(Ze({},o),{virtualKeyboardMode:"off"}):Ze({plonkSound:"plonk.wav",keypressSound:{spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"}},o)),"auto"===this.options.virtualKeyboardMode&&(this.options.virtualKeyboardMode=Km()?"onfocus":"off"),void 0!==this.options.computeEngine&&(this._computeEngine=o.computeEngine),o.eventSink&&(this.host=o.eventSink),this.placeholders=new Map,this.element=n,n.mathfield=this,null!==this.options.fontsDirectory&&hd(this.options.fontsDirectory),Md||(Md=Qo(Co).toString(36)),this.stylesheets.push(qo(n,Co,Md)),Id||(Id=Qo(W_).toString(36)),this.stylesheets.push(qo(n,W_,Id));let s=[];if(s.push(`<span contenteditable=true class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=${null!=(t=n.tabIndex)?t:0}></span>`),s.push("<span part=container class=ML__container aria-hidden=true>"),s.push("<span part=content class=ML__content></span>"),s.push(`<div part='virtual-keyboard-toggle' class=ML__virtual-keyboard-toggle role=button data-ML__tooltip="${Oa("tooltip.toggle virtual keyboard")}">`),s.push(null!=(i=this.options.virtualKeyboardToggleGlyph)?i:G_),s.push("</div>"),s.push("<div class=ML__placeholdercontainer></div>"),s.push("</span>"),s.push("<div class=ML__sr-only>"),s.push("<span role=status aria-live=assertive aria-atomic=true></span>"),s.push("<span class=accessibleMathML></span>"),s.push("</div>"),this.element.innerHTML=this.options.createHTML(s.join("")),!this.element.children)return void console.error("%cMathLive: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include 'runtimeCompiler: true' in your Vue configuration. Theremay a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",l=>l.stopImmediatePropagation(),{capture:!1}),this.field.addEventListener("wheel",this,{passive:!1}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this):this.field.addEventListener("mousedown",this),this.virtualKeyboardToggle=this.element.querySelector("[part=virtual-keyboard-toggle]"),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),Vl(this.virtualKeyboardToggle,l=>this.executeCommand(l),{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.accessibleMathML=this.element.querySelector(".accessibleMathML"),this.keystrokeCaptionVisible=!1,this.popoverVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.mode=md(this.options),this.smartModeSuppressed=!1,this.style={},this.options.readOnly?this.element.classList.add("ML__isReadOnly"):this.element.classList.remove("ML__isReadOnly"),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.blurred=!0,this.keyboardDelegate=function fZ(n,o,t){let i=null,a=null,s=!1,r=!1,l=!1;return n.addEventListener("keydown",c=>{s||"Process"===c.key||"CapsLock"===c.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(c.code)?i=null:(i=c,a=null,t.onKeystroke(pp(c),c)||(i=null,n.textContent=""))},!0),n.addEventListener("keypress",c=>{s||(i&&a&&t.onKeystroke(pp(i),i),a=c)},!0),n.addEventListener("compositionstart",c=>{n.textContent="",s=!0,t.onCompositionStart(c.data)},!0),n.addEventListener("compositionupdate",c=>{s&&t.onCompositionUpdate(c.data)},!0),n.addEventListener("compositionend",c=>{n.textContent="",s&&(s=!1,t.onCompositionEnd(c.data))},!0),n.addEventListener("beforeinput",c=>c.stopImmediatePropagation()),n.addEventListener("input",c=>{var d;if(!s&&(n.textContent="","insertCompositionText"!==c.inputType)){if("insertFromPaste"===c.inputType)return c.preventDefault(),void c.stopPropagation();t.onInput(null!=(d=c.data)?d:""),c.preventDefault(),c.stopPropagation()}}),n.addEventListener("paste",c=>{n.focus(),n.textContent="",t.onPaste(c)||c.preventDefault(),c.stopImmediatePropagation()},!0),n.addEventListener("cut",c=>t.onCut(c),!0),n.addEventListener("copy",c=>t.onCopy(c),!0),n.addEventListener("blur",c=>{var d,f,y,O;if((null==(f=null==(d=c.relatedTarget)?void 0:d._mathfield)?void 0:f.element)===o)return n.focus(),c.preventDefault(),void c.stopPropagation();let N=null==(y=ys.scrim)?void 0:y.state;return"open"===N||"opening"===N||c.relatedTarget===c.target.getRootNode().host?(c.preventDefault(),void c.stopPropagation()):void(l||r||(l=!0,i=null,a=null,null==(O=t.onBlur)||O.call(t),l=!1,c.stopPropagation()))},!0),n.addEventListener("focus",c=>{var d;l||r||(r=!0,null==(d=t.onFocus)||d.call(t),r=!1,c.stopPropagation())},!0),{cancelComposition:()=>{s&&(n.blur(),requestAnimationFrame(()=>n.focus()))},blur:()=>{"function"==typeof n.blur&&n.blur()},focus:()=>{!r&&"function"==typeof n.focus&&n.focus()},hasFocus:()=>function xZ(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}()===n,setAriaLabel:c=>n.setAttribute("aria-label",c),setValue:c=>{var d;n.innerText=c,n.style.top="-1000px",null==(d=window.getSelection())||d.selectAllChildren(n)},moveTo:(c,d)=>{n.style.top=`${d}px`,n.style.left=`${c}px`}}}(this.element.querySelector(".ML__keyboard-sink"),this.element,{onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),onInput:l=>Ed(this,l),onKeystroke:(l,c)=>Tp(this,l,c),onCompositionStart:l=>this.onCompositionStart(l),onCompositionUpdate:l=>this.onCompositionUpdate(l),onCompositionEnd:l=>this.onCompositionEnd(l),onCut:l=>{this.options.readOnly?this.model.announce("plonk"):mn(this.model,{inputType:"deleteByCut"})&&(this.snapshot(),Cn.onCopy(this,l),ko(this.model,Bi(this.model.selection),"deleteByCut"),En(this))},onCopy:l=>Cn.onCopy(this,l),onPaste:l=>{let c=!this.options.readOnly;return c&&(c=Cn.onPaste(this.model.at(this.model.position).mode,this,l.clipboardData)),c||this.model.announce("plonk"),l.preventDefault(),l.stopPropagation(),c}}),window.addEventListener("resize",this),window.addEventListener("blur",()=>{Ua(this)&&this.hasFocus()&&window.addEventListener("focus",l=>{l.target===window&&Ua(this)&&this.focus()},{once:!0})},{capture:!0}),this.model=new class{constructor(n,o,t){this.options=n,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.mathfield=t,this.suppressChangeNotifications=!1,this.root=new Me("root",t,{mode:n.mode}),this.root.body=[],this.setListeners(o)}get atoms(){return this.root.children}get selection(){return this._selection}set selection(n){this.setSelection(n)}setSelection(n,o){return this.deferNotifications({selection:!0},()=>{let t=this.normalizeSelection(n,o);if(void 0===t)throw new TypeError("Invalid selection");if(1===t.ranges.length&&t.ranges[0][0]===t.ranges[0][1]){let i=t.ranges[0][0];this._position=i,this._anchor=i,this._selection=t}else{let i=Bi(t);"backward"===t.direction?[this._position,this._anchor]=i:[this._anchor,this._position]=i;let a=this.at(i[0]+1),s=this.at(i[1]);Me.commonAncestor(a,s),this._selection={ranges:[i],direction:t.direction}}})}setPositionHandlingPlaceholder(n){var o,t,i;"placeholder"===(null==(o=this.at(n))?void 0:o.type)?this.setSelection(n-1,n):"placeholder"===(null==(i=null==(t=this.at(n))?void 0:t.rightSibling)?void 0:i.type)?this.setSelection(n,n+1):this.position=n}getState(){return{content:this.root.toJson(),selection:this.selection}}setState(n,o){var t;let i=this.suppressChangeNotifications;this.suppressChangeNotifications=null==(t=o?.suppressChangeNotifications)||t;let a={};"undo"===o?.type&&(a={inputType:"historyUndo"}),"redo"===o?.type&&(a={inputType:"historyRedo"}),mn(this,a)&&(this.root=io(n.content,this.mathfield),this.selection=n.selection,gn(this,a)),this.suppressChangeNotifications=i}get position(){return this._position}set position(n){this.setSelection(n,n)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(n="forward"){return this._anchor!==this._position&&(this.position="backward"===n?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(n){return this.atoms[n]}offsetOf(n){return this.atoms.indexOf(n)}getSiblingsRange(n){let o=this.at(n),{parent:t}=o;if(!t)return[0,this.lastOffset];let i=o.parent.branch(o.treeBranch);return[this.offsetOf(i[0]),this.offsetOf(i[i.length-1])]}getBranchRange(n,o){let t=this.at(n).branch(o);return[this.offsetOf(t[0]),this.offsetOf(t[t.length-1])]}getAtoms(n,o,t){let a,s,i=t??{};if($l(n)){if(i=o??{},n.ranges.length>1)return n.ranges.reduce((d,f)=>[...d,...this.getAtoms(f,i)],[]);n=n.ranges[0]}if(la(n)){if(a=n,!la(o))return[];s=o}else[a,s]=n,i=o??{};if(!Number.isFinite(a))return[];void 0===i.includeChildren&&(i.includeChildren=!1),a<0&&(a=this.lastOffset-a+1),s<0&&(s=this.lastOffset-s+1);let r=Math.min(a,s)+1,l=Math.max(a,s);if(1===r&&l===this.lastOffset)return[this.root];let c=[];for(let d=r;d<=l;d++){let f=this.atoms[d];np(this,f,r,l)&&c.push(f)}return i.includeChildren||(c=c.filter(d=>{let f=!1,{parent:y}=d;for(;y&&!f;)f=np(this,y,r,l),y=y.parent;return!f})),c}getAllAtoms(n){let o=[],t=this.lastOffset;for(let i=n;i<=t;i++)o.push(this.atoms[i]);for(let i=0;i<n;i++)o.push(this.atoms[i]);return o}extractAtoms(n){let o=this.getAtoms(n);1===o.length&&"root"===o[0].type&&(o=o[0].children);for(let t of o)t.parent.removeChild(t);return o}deleteAtoms(n){this.extractAtoms(n),this.position=n[0]}atomToString(n,o){let t=o??"latex";if(t.startsWith("latex"))return ia.serialize([n],{expandMacro:"latex-expanded"===t,skipStyles:"latex-unstyled"===t,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===t)return Yt(n,this.mathfield.options);if("spoken"===t)return gs(n,this.mathfield.options);if("spoken-text"===t){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="";let a=gs(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("spoken-ssml"===t||"spoken-ssml-with-highlighting"===t){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="ssml";let a=gs(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("math-json"===t){if(!this.mathfield.computeEngine)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),'["Error", "compute-engine-not-available"]';try{let i=this.mathfield.computeEngine.parse(Me.serialize(n,{expandMacro:!1,defaultMode:"math"}));return JSON.stringify(i.json)}catch(i){return JSON.stringify(["Error",`'${i.toString()}'`])}}return"ascii-math"===t?Mn(n):(console.error("MathLive: Unknown format :",t),"")}getValue(n,o,t){if(void 0===n)return this.atomToString(this.root,"latex");if("string"==typeof n)return this.atomToString(this.root,n);let i,a;if(la(n)&&la(o)?(i=[this.normalizeRange([n,o])],a=t??"latex"):Kl(n)?(i=[this.normalizeRange(n)],a=o):$l(n)?(i=n.ranges,a=o):(i=[],a="latex"),a.startsWith("latex")){let s={expandMacro:"latex-expanded"===a,skipStyles:"latex-unstyled"===a,defaultMode:this.mathfield.options.defaultMode};return wn(i.map(r=>Me.serialize(this.getAtoms(r),s)))}return i.map(s=>this.getAtoms(s).map(r=>this.atomToString(r,a)).join("")).join("")}extendSelection(n){let o=this._anchor;if("forward"===n){let i=this._position;do{let a=this.at(i+1);if(null!=a&&a.inCaptureSelection){for(;!a.captureSelection;)a=a.parent;i=this.offsetOf(a?.lastChild)+1}else i+=1}while(i<=this.lastOffset&&this.at(i).isFirstSibling);return i===o-1&&"first"===this.at(o).type&&(i=o),this.extendSelectionTo(o,i)}let t=this._position-1;if(t<0)return!1;for(;t>=0&&this.at(t).isLastSibling;){let i=this.at(t);if(null!=i&&i.inCaptureSelection){for(;!i.captureSelection;)i=i.parent;t=this.offsetOf(i.firstChild)-1}else t-=1}return t<0&&(t=0),t===o+1&&"first"===this.at(t).type&&(o=t),this.extendSelectionTo(o,t)}extendSelectionTo(n,o){return this.deferNotifications({selection:!0},()=>{let t=this.normalizeRange([n,o]),[i,a]=t,{parent:s}=this.at(a);if(s&&("genfrac"===s.type||"msubsup"===s.type))for(;s!==this.root&&xd(this,s,[i,a]);)a=this.offsetOf(s),s=s.parent;for(s=this.at(i).parent;s!==this.root&&xd(this,s,[i,a]);)i=this.offsetOf(s.leftSibling),s=s.parent;if(s=this.at(a).parent,"genfrac"===s?.type)for(;s!==this.root&&xd(this,s,[i,a]);)a=this.offsetOf(s),s=s.parent;this._position=this.normalizeOffset(o),this._selection={ranges:[[i,a]],direction:"none"}})}setListeners(n){this.listeners=n}announce(n,o,t=[]){var i,a;(null==(a=null==(i=this.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("announce",{detail:{command:n,previousPosition:o,atoms:t},cancelable:!0,bubbles:!0,composed:!0})))||a)&&function V7(n,o,t,i){let a="";"plonk"===o?(n.playSound("plonk"),n.flushInlineShortcutBuffer()):"delete"===o?a=xs(n.options,"deleted: ",i):"focus"===o||o.includes("move")?a=function X7(n,o){if(Number.isNaN(o))return"";let t=n.at(o);if(!t||t.treeDepth<=n.at(n.position).treeDepth)return"";let i="",a=t.parent,s=n.at(n.position).parent;for(;a!==n.root&&a!==s;)i+=`out of ${tp(a)};`,a=a.parent;return i}(n.model,t)+(n.model.selectionIsCollapsed?"":"selected: ")+function eZ(n,o){if(!n.selectionIsCollapsed)return xs(o,"",n.getAtoms(n.selection));let t="",i=n.at(n.position),a=tp(i);return i.isFirstSibling&&(t=(a?"start of "+a:"unknown")+": "),i.isLastSibling?i.isFirstSibling||(t+=a?"end of "+a:"unknown"):t+=xs(o,"",i),t}(n.model,n.options):"replacement"===o?a=xs(n.options,"",n.model.at(n.model.position)):"line"===o?(a=xs(n.options,"",n.model.root),n.keyboardDelegate.setAriaLabel("after: "+a)):a=i?xs(n.options,o+" ",i):o;let s=n.ariaLiveText.textContent.includes("\xa0")?" \u202f ":" \xa0 ";n.ariaLiveText.textContent=a+s}(this.mathfield,n,o,t)}deferNotifications(n,o){let t=this._selection,i=this._anchor,a=this._position,s=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;let r=this.root.changeCounter;o();let l=this.root.changeCounter!==r,c=i!==this._anchor||a!==this._position||"different"===function F9(n,o){if(n.direction===o.direction){let t=n.ranges.length;if(o.ranges.length===t){let i=0;for(;i<t&&"equal"===U9(n.ranges[i],o.ranges[i]);)i++;return i===t?"equal":"different"}}return"different"}(this._selection,t);return this.suppressChangeNotifications=s,n.content&&l&&gn(this,{inputType:n.type}),n.selection&&c&&z_(this),l||c}normalizeOffset(n){return n>0?n=Math.min(n,this.lastOffset):n<0&&(n=this.lastOffset+n+1),n}normalizeRange(n){let[o,t]=n;return o=this.normalizeOffset(o),t=this.normalizeOffset(t),o<t?[o,t]:[t,o]}normalizeSelection(n,o){var t;let i;if(la(n)){let a=this.normalizeOffset(n);if(la(o)){let s=this.normalizeOffset(o);i=a<=s?{ranges:[[a,s]],direction:"none"}:{ranges:[[s,a]],direction:"backward"}}else i={ranges:[[a,a]],direction:"none"}}else if(Kl(n)){let a=this.normalizeOffset(n[0]),s=this.normalizeOffset(n[1]);i=a<=s?{ranges:[[a,s]],direction:"none"}:{ranges:[[s,a]],direction:"backward"}}else $l(n)&&(i={ranges:n.ranges.map(a=>this.normalizeRange(a)),direction:null!=(t=n.direction)?t:"none"});return i}}({mode:md(this.options),macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onSelectionDidChange:()=>this._onSelectionDidChange()},this),this.undoManager=new class{constructor(n){this.recording=!1,this.canCoalesce=!1,this.model=n,this.reset()}get maximumDepth(){return 1e3}reset(){this.stack=[],this.index=-1}startRecording(){this.recording=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{suppressChangeNotifications:!1,type:"undo"}),this.index-=1,this.canCoalesce=!1,!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{suppressChangeNotifications:!1,type:"redo"}),this.canCoalesce=!1,!0)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(){return!!this.recording&&(this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),this.canCoalesce=!1,!0)}snapshotAndCoalesce(){if(!this.recording)return!1;this.canCoalesce&&this.pop();let n=this.snapshot();return this.canCoalesce=!0,n}}(this.model);let r=null!=(a=o.value)?a:this.element.textContent;r&&(r=r.trim()),r&&Cn.insert("math",this.model,r,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),this.undoManager.startRecording(),this.undoManager.snapshot(),Ra&&!this.options.locale.startsWith(Ra.locale)&&F_(this.options.locale),En(this),document.fonts.ready.then(()=>za(this))}get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}get colorMap(){return n=>{var o;let t;return"function"==typeof(null==(o=this.options)?void 0:o.colorMap)&&(t=this.options.colorMap(n)),t||(t=gl(n)),t}}get backgroundColorMap(){return n=>{var o;let t;return"function"==typeof(null==(o=this.options)?void 0:o.backgroundColorMap)&&(t=this.options.backgroundColorMap(n)),!t&&"function"==typeof this.options.colorMap&&(t=this.options.colorMap(n)),t||(t=yu(n)),t}}get fractionNavigationOrder(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.fractionNavigationOrder)?o:"numerator-denominator"}get placeholderSymbol(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.placeholderSymbol)?o:"\u25a2"}get smartFence(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.smartFence)&&o}get letterShapeStyle(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.letterShapeStyle)?o:"tex"}get registers(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.registers)?o:{}}getDefinition(n,o="math"){return Hu(n,o)}getMacro(n){return b_(n,this.options.macros)}get virtualKeyboard(){if(!this.options.readOnly)return this._virtualKeyboard||(this._virtualKeyboard=this.options.useSharedVirtualKeyboard||Dn().sharedVirtualKeyboard?new class{constructor(n){var o,t,i;this.targetOrigin=null!=(t=null!=(o=n.targetOrigin)?o:globalThis.origin)?t:"*",this.originValidator=null!=(i=n.originValidator)?i:"same-origin",this._mathfield=n.mathfield}get visible(){var n,o;return null!=(o=null==(n=Dn().sharedVirtualKeyboard)?void 0:n.visible)&&o}set visible(n){Dn().sharedVirtualKeyboard&&(Dn().sharedVirtualKeyboard.visible=n)}setOptions(n){this.sendMessage("set-options",{options:JSON.stringify(hr(n))})}create(){}dispose(){this.disable()}enable(){this.enabled||(this.enabled=!0,globalThis.addEventListener("message",this),this.updateToolbar())}disable(){this.enabled&&(globalThis.removeEventListener("message",this),this.enabled=!1)}executeCommand(n){var o,t,i;return"virtual-keyboard"===sr(n)?(this._mathfield&&(this.setOptions(hr(this._mathfield.getOptions())),("showVirtualKeyboard"===n||"toggleVirtualKeyboard"===n&&!1===this.visible)&&(null==(t=(o=this._mathfield).focus)||t.call(o))),this.sendMessage("execute-command",{command:n}),requestAnimationFrame(()=>this.updateToolbar()),!1):null==(i=this._mathfield)?void 0:i.executeCommand(n)}focusMathfield(){}blurMathfield(){}stateWillChange(n){return!0}stateChanged(){}updateToolbar(){var n;null==(n=Dn().sharedVirtualKeyboard)||n.updateToolbar(this._mathfield)}handleEvent(n){var o,t,i,a;if("message"===n.type&&n.data&&n.data.type===nc){if(!function L_(n,o){return"*"===n||"none"===o||("same-origin"===o?!globalThis.origin||n===globalThis.origin:"function"==typeof o&&o(n))}(n.origin,this.originValidator))throw new Error(`Message from unknown origin (${n.origin}) cannot be handled`);let{action:s}=n.data;if("execute-command"===s){if("virtual-keyboard"===sr(n.data.command)&&window===globalThis.parent)return;this.executeCommand(n.data.command)}else"update-state"===s?(this.visible=n.data.state.visible,this.height=n.data.state.height):"focus"===s?null==(t=null==(o=this._mathfield)?void 0:o.focus)||t.call(o):"blur"===s?null==(a=null==(i=this._mathfield)?void 0:i.blur)||a.call(i):"update-toolbar"===s&&this.updateToolbar()}}sendMessage(n,o={}){return!!globalThis.parent&&(globalThis.parent.postMessage(Ze({type:nc,action:n},o),this.targetOrigin),!0)}}({targetOrigin:this.options.sharedVirtualKeyboardTargetOrigin,originValidator:this.options.originValidator,mathfield:this}):new class{constructor(n,o){this.originalContainerBottomPadding=null,this.options=n,this.visible=!1,this._mathfield=o,this.coreStylesheet=null,this.virtualKeyboardStylesheet=null}setOptions(n){var o,t;let i="";if(this._element){let a=this._element.querySelector("div.keyboard-layer.is-visible");a&&(i=null!=(o=a.getAttribute("data-layer"))?o:""),this._element.remove(),this._element=void 0}if(this.options=n,this.visible){this.buildAndAttachElement(n.virtualKeyboardTheme);let a=this.element.querySelector(`.keyboard-layer[data-layer="${i}"]`);a&&(null==(t=this.element.querySelector(".keyboard-layer.is-visible"))||t.classList.remove("is-visible"),a.classList.add("is-visible")),this.element.classList.add("is-visible")}}get element(){return this._element}set element(n){var o;this._element!==n&&(null==(o=this._element)||o.remove(),this._element=n)}get visible(){return this._visible}set visible(n){this._visible=n}get height(){var n,o;return null!=(o=null==(n=this.element)?void 0:n.offsetHeight)?o:0}buildAndAttachElement(n){var o;this.element=function TZ(n,o){var t,i,a,s;let r='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n    <symbol id="svg-delete-backward" viewBox="0 0 576 512">\n      <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>\n    </symbol>\n\n    <symbol id="svg-shift" viewBox="0 0 384 512">\n      <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>\n    </symbol>\n\n    <symbol id="svg-commit" viewBox="0 0 512 512">\n      <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>\n    </symbol>\n\n    <symbol id="svg-command" viewBox="0 0 640 512">\n      <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n    </symbol>\n\n    <symbol id="svg-undo" viewBox="0 0 512 512">\n      <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n    </symbol>\n    <symbol id="svg-redo" viewBox="0 0 512 512">\n      <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-arrow-left" viewBox="0 0 320 512">\n      <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>\n    </symbol>\n    <symbol id="svg-arrow-right" viewBox="0 0 320 512">\n      <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>\n    </symbol>\n    <symbol id="svg-tab" viewBox="0 0 448 512">\n      <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>\n    <symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>\n    <symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>\n    </symbol>\n    <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n      <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n    </symbol>\n    <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n      <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n    </symbol>\n    <symbol id="svg-trash" viewBox="0 0 448 512">\n      <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n    </symbol>\n</svg>\n        ';n.create(),ur["foreground-color"]=[];for(let K of Object.keys(hl))ur["foreground-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+hl[K]+'"></span>',command:["applyStyle",{color:K}]});ur["background-color"]=[];for(let K of Object.keys(pl))ur["background-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+pl[K]+'"></span>',command:["applyStyle",{backgroundColor:K}]});ln=Ze({},ur);for(let K of Object.keys(ln))ln[K]=ln[K].slice();for(let K=0;K<26;K++){let X="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[K];ln[X]||(ln[X]=[]),ln[X].unshift({latex:"\\mathbb{"+X+"}",aside:"blackboard",insert:"\\mathbb{"+X+"}"}),ln[X].unshift({latex:"\\mathbf{"+X+"}",aside:"bold",insert:"\\mathbf{"+X+"}"}),ln[X].unshift({latex:"\\mathsf{"+X+"}",aside:"sans",insert:"\\mathsf{"+X+"}"}),ln[X].unshift({latex:"\\mathtt{"+X+"}",aside:"monospace",insert:"\\mathtt{"+X+"}"}),ln[X].unshift({latex:"\\mathcal{"+X+"}",aside:"calligraphy",insert:"\\mathcal{"+X+"}"}),ln[X].unshift({latex:"\\mathfrak{"+X+"}",aside:"fraktur",insert:"\\mathfrak{"+X+"}"})}for(let K=0;K<=26;K++){let X="abcdefghijklmnopqrstuvwxyz"[K];ln[X]||(ln[X]=[]),ln[X].unshift({latex:"\\mathsf{"+X+"}",aside:"sans",insert:"\\mathsf{"+X+"}"}),ln[X].unshift({latex:"\\mathbf{"+X+"}",aside:"bold",insert:"\\mathbf{"+X+"}"}),ln[X].unshift({latex:"\\mathtt{"+X+"}",aside:"monospace",insert:"\\mathtt{"+X+"}"}),ln[X].unshift({latex:"\\mathfrak{"+X+"}",aside:"fraktur",insert:"\\mathfrak{"+X+"}"})}for(let K=0;K<10;K++){let X="0123456789"[K];ln[X]||(ln[X]=[]),ln[X].unshift({latex:"\\mathbf{"+X+"}",aside:"bold",insert:"\\mathbf{"+X+"}"}),ln[X].unshift({latex:"\\mathsf{"+X+"}",aside:"sans",insert:"\\mathsf{"+X+"}"}),ln[X].unshift({latex:"\\mathtt{"+X+"}",aside:"monospace",insert:"\\mathtt{"+X+"}"}),ln[X].unshift({latex:"\\mathcal{"+X+"}",aside:"script",insert:"\\mathcal{"+X+"}"}),ln[X].unshift({latex:"\\mathfrak{"+X+"}",aside:"fraktur",insert:"\\mathfrak{"+X+"}"})}let f=n.options.virtualKeyboards;f||(f="all"),f=f.replace(/\ball\b/i,"numeric functions symbols roman greek");let y=Ze(Ze({},yZ),null!=(t=n.options.customVirtualKeyboardLayers)?t:{}),O=Ze(Ze({},fp),null!=(i=n.options.customVirtualKeyboards)?i:{}),N=f.replace(/\s+/g," ").split(" ");for(let K of N){if(!O[K]){console.error('MathLive: Unknown virtual keyboard "'+K+'"');continue}let X=null!=(a=O[K].layers)?a:[];O[K].layer&&X.push(O[K].layer),X=[...new Set(X)];for(let ye of X){if(!y[ye]){console.error('MathLive: Unknown virtual keyboard layer: "',ye,'"');break}if("object"==typeof y[ye]){let oe=y[ye],pe="";if("string"==typeof oe.styles?pe+=`<style>${oe.styles}</style>`:"object"==typeof oe.styles&&(pe+=`<style>${OZ(oe.styles)}</style>`),oe.backdrop&&(pe+=`<div class='${oe.backdrop}'>`),oe.container&&(pe+=`<div class='${oe.container}'>`),oe.rows){pe+="<div class='rows'>";for(let je of oe.rows){pe+="<ul>";for(let Le of je){if(pe+="<li",Le.class){let st=Le.class;Le.layer&&!/layer-switch/.test(st)&&(st+=" layer-switch"),/separator/.test(st)||(st+=" keycap"),pe+=` class="${st}"`}else pe+=' class="keycap"';if(Le.key&&(pe+=` data-key="${Le.key}"`),Le.command&&("string"==typeof Le.command?pe+=` data-command='"${Le.command}"'`:(pe+=" data-command='",pe+=JSON.stringify(Le.command),pe+="'")),Le.insert&&(pe+=` data-insert="${Le.insert}"`),Le.latex&&(pe+=` data-latex="${Le.latex}"`),Le.aside&&(pe+=` data-aside="${Le.aside}"`),Le.variants){let st=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);ln[st]=Le.variants,pe+=` data-alt-keys="${st}"`}Le.shifted&&(pe+=` data-shifted="${Le.shifted}"`),Le.shiftedCommand&&(pe+=` data-shifted-command="${Le.shiftedCommand}"`),Le.layer&&(pe+=` data-layer="${Le.layer}"`),pe+=`>${Le.label?Le.label:""}</li>`}pe+="</ul>"}pe+="</div>"}oe.container&&(pe+="</div>"),oe.backdrop&&(pe+="</div>"),y[ye]=pe}r+=`<div tabindex="-1" class='keyboard-layer' data-layer='${ye}'>`,r+=`<div class='keyboard-toolbar' role='toolbar'>${wZ(n.options,f,K)}</div>`;let ae=y[ye];"string"==typeof ae&&(r+=kZ(n.options,ae)),r+="</div>"}}let I=document.createElement("div");I.className="ML__keyboard",o?I.classList.add(o):n.options.virtualKeyboardTheme&&I.classList.add(n.options.virtualKeyboardTheme);let z=document.createElement("div");z.className="ML__keyboard--plate",z.innerHTML=n.options.createHTML(r),I.appendChild(z);let $=I.querySelectorAll(".ML__toolbar-action");if($)for(let K of $)K.addEventListener("click",X=>{var ye,ae;let oe=X.target,pe="";for(;oe&&!pe;)pe=null!=(ye=oe?.getAttribute("data-command"))?ye:"",oe=null!=(ae=oe?.parentElement)?ae:null;pe&&n.executeCommand(JSON.parse(pe))});let Y=I.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton");for(let K of Y)K.id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);bp(n,[...Y]);let V=I.querySelectorAll(".layer-switch");for(let K of V)K.classList.contains("shift")?Vl(K,X=>n.executeCommand(X),{pressed:"shiftKeyboardLayer",default:["switchKeyboardLayer",K.getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):Vl(K,X=>n.executeCommand(X),{default:["switchKeyboardLayer",K.getAttribute("data-layer")]});let te=I.querySelectorAll(".keyboard-layer");for(let K of te)K.addEventListener("mousedown",X=>X.preventDefault());return null==(s=te[0])||s.classList.add("is-visible"),I}(this,n??""),oo(this.element,"mousedown",()=>this.focusMathfield()),null==(o=this.options.virtualKeyboardContainer)||o.appendChild(this.element)}handleEvent(n){if(this.element)switch(n.type){case"mouseup":case"blur":case"touchend":case"touchcancel":document.body.style.userSelect="",Xl(this)}}focusMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.focus)||o.call(n)}blurMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.blur)||o.call(n)}stateWillChange(n){var o,t;return(null==(t=null==(o=this._mathfield)?void 0:o.host)?void 0:t.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:n},bubbles:!0,cancelable:!0,composed:!0})))??!0}stateChanged(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.host)||o.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1,composed:!0}))}updateToolbar(n){var o;let t=null==(o=this._element)?void 0:o.querySelectorAll(".ML__toolbar-action");if(t)for(let i of t)i.innerHTML=CZ(this.options,n)}executeCommand(n){var o,t,i;let a,s=[];return Bn(n)?(a=n[0],s=n.slice(1)):a=n,a=a.replace(/-\w/g,r=>r[1].toUpperCase()),"virtual-keyboard"===(null==(o=Fo[a])?void 0:o.target)?Fo[a].fn(this,...s):null!=(i=null==(t=this._mathfield)?void 0:t.executeCommand(n))&&i}create(){this.virtualKeyboardStylesheet||(yd||(yd=Qo(hp).toString(36)),this.virtualKeyboardStylesheet=qo(null,hp,yd)),this.coreStylesheet||(this.coreStylesheet=qo(null,Co,Qo(Co).toString(36))),null!==this.options.fontsDirectory&&hd(this.options.fontsDirectory)}enable(){window.addEventListener("mouseup",this),window.addEventListener("blur",this)}disable(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this)}dispose(){}}(this.options,this)),this._virtualKeyboard}get computeEngine(){var n,o;if(void 0===this._computeEngine){let t=null==(n=globalThis[Symbol.for("io.cortexjs.compute-engine")])?void 0:n.ComputeEngine;t?this._computeEngine=new t:console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._computeEngine&&","===this.options.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(o=this._computeEngine)?o:null}get virtualKeyboardState(){var n;return null!=(n=this.virtualKeyboard)&&n.visible?"visible":"hidden"}set virtualKeyboardState(n){this.virtualKeyboard&&("hidden"===n?this.virtualKeyboard.executeCommand("hideVirtualKeyboard"):"visible"===n&&this.virtualKeyboard.executeCommand("showVirtualKeyboard"))}get keybindings(){var n,o;if(this._keybindings)return this._keybindings;let[t,i]=function L7(n,o){let t=[],i=[];for(let a of n)try{let s=I7(a,o);if(s){let r=t.filter(l=>l.key===s.key&&l.ifMode===s.ifMode);if(r.length>0)throw new Error(`Ambiguous key binding ${a.key} (${id(a.command)}) matches ${r[0].key} (${id(r[0].command)}) with the ${o.displayName} keyboard layout`);t.push(s)}}catch(s){s instanceof Error&&i.push(s.message)}return[t,i]}(this.options.keybindings,null!=(n=ir())?n:q_);return(null==(o=ir())?void 0:o.score)>0&&(this._keybindings=t,i.length>0&&console.error("MathLive: Invalid keybindings for current keyboard layout",i)),t}setOptions(n){var o,t;if(this.options=ud(this.options,n),"computeEngine"in n&&(this._computeEngine=this.options.computeEngine),this._computeEngine&&"decimalSeparator"in n&&(this._computeEngine.latexOptions.decimalMarker=","===this.options.decimalSeparator?"{,}":"."),this.model.setListeners({onSelectionDidChange:a=>this._onSelectionDidChange()}),this.model.options.macros=this.options.macros,Ra&&!this.options.locale.startsWith(Ra.locale)&&F_(this.options.locale),this._keybindings=void 0,("soundsDirectory"in n||"plonkSound"in n||"keypressSound"in n||"spacebarKeypressSound"in n||"returnKeypressSound"in n||"deleteKeypressSound"in n)&&(this.audioBuffers={}),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.options.readOnly?(this.hasFocus()&&"visible"===this.virtualKeyboardState&&this.executeCommand("hideVirtualKeyboard"),this.onBlur(),this.element.classList.add("ML__isReadOnly")):this.element.classList.remove("ML__isReadOnly"),null==(o=this.virtualKeyboard)||o.setOptions(this.options),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),"virtualKeyboardToggleGlyph"in n){let a=null==(t=this.element)?void 0:t.querySelector(".ML__virtual-keyboard-toggle");a&&(a.innerHTML=this.options.createHTML(this.options.virtualKeyboardToggleGlyph))}let i=Me.serialize(this.model.root,{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in n||this.model.getValue()!==i)&&Cn.insert("math",this.model,i,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),En(this)}getOptions(n){return bs(this.options,n)}getOption(n){return bs(this.options,n)}handleEvent(n){if(Ua(this))switch(n.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function Sp(n,o){var t;n.atomBoundsCache=new Map;let a,i=n,s=!1,r=!1,l="none";if(o.buttons>1)return;let c=!1,d=!1,f=o.clientX,y=o.clientY,O=Date.now(),N=i.field,I=setInterval(()=>{c?N.scroll({top:0,left:N.scrollLeft-16}):d&&N.scroll({top:0,left:N.scrollLeft+16})},32);function z(V){"PointerEvent"in window?(Rl(N,"pointermove",$),Rl(N,"pointerup pointercancel",z),V instanceof PointerEvent&&N.releasePointerCapture(V.pointerId)):(Rl(window,"mousemove",$),Rl(window,"mouseup blur",z)),s=!1,clearInterval(I),n.element.classList.remove("tracking"),V&&V.preventDefault()}function $(V){if(!i.hasFocus())return void z(null);let te=V.clientX,K=V.clientY,X=Op(V)&&"touch"===V.pointerType?20:5;if(Date.now()<O+500&&Math.abs(f-te)<X&&Math.abs(y-K)<X)return V.preventDefault(),void V.stopPropagation();let ye=N.getBoundingClientRect();d=te>ye.right,c=te<ye.left;let ae=a;Op(V)&&(V.isPrimary||(ae=pr(i,V.clientX,V.clientY,{bias:0})));let oe=pr(i,te,K,{bias:te<=f?te===f?0:-1:1});ae>=0&&oe>=0&&(i.model.extendSelectionTo(ae,oe),En(n)),V.preventDefault(),V.stopPropagation()}Ja&&Math.abs(Ja.x-f)<5&&Math.abs(Ja.y-y)<5&&Date.now()<Ja.time+500?(_r+=1,Ja.time=O):(Ja={x:f,y,time:O},_r=1);let Y=N.getBoundingClientRect();if(f>=Y.left&&f<=Y.right&&y>=Y.top&&y<=Y.bottom){if(n.hasFocus()||(l="all",n.focus({scrollIntoView:!1})),n.flushInlineShortcutBuffer(),n.smartModeSuppressed=!1,a=pr(n,f,y,{bias:0}),a>=0){if(n.element.classList.add("tracking"),o.shiftKey){let V=n.model.selectionIsCollapsed;n.model.extendSelectionTo(n.model.anchor,a),l=H_(n.model)||V?"all":"selection"}else"placeholder"===n.model.at(a).type?(n.model.setSelection(a-1,a),l="selection"):"placeholder"===(null==(t=n.model.at(a).rightSibling)?void 0:t.type)?(n.model.setSelection(a,a+1),l="selection"):(n.model.position=a,l=H_(n.model)?"all":"selection");n.style={},3===o.detail||_r>2?(z(o),(3===o.detail||3===_r)&&(n.model.selection={ranges:[[0,n.model.lastOffset]]},l="all")):s||(s=!0,"PointerEvent"in window?(oo(N,"pointermove",$),oo(N,"pointerup pointercancel",z),o instanceof PointerEvent&&N.setPointerCapture(o.pointerId)):(oo(window,"blur",z),oo(window,"mousemove",$),oo(window,"mouseup",z)),(2===o.detail||2===_r)&&(r=!0,dp(n.model),l="all"))}}else Ja=null;"none"!==l&&(n.model.selectionIsCollapsed&&(l="all"),En(n)),o.preventDefault()}(this,n);break;case"resize":this.resizeTimer&&cancelAnimationFrame(this.resizeTimer),this.resizeTimer=requestAnimationFrame(()=>Ua(this)&&this.onResize());break;case"wheel":this.onWheel(n);break;default:console.warn("Unexpected event type",n.type)}}dispose(){if(!Ua(this))return;let n=this.element;delete this.element,delete n.mathfield,n.innerHTML=this.model.getValue(),n.removeEventListener("pointerdown",this),n.removeEventListener("mousedown",this),n.removeEventListener("focus",this),n.removeEventListener("blur",this),window.removeEventListener("resize",this),window.removeEventListener("blur",this,{capture:!0}),delete this.accessibleMathML,delete this.ariaLiveText,delete this.field,delete this.fieldContent,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,this._virtualKeyboard&&(this._virtualKeyboard.dispose(),delete this._virtualKeyboard),function q7(n){S_(n.popover),sd&&sd.release(),rd&&rd.release(),delete n.popover}(this),function QZ(n){S_(n.keystrokeCaption),Ad&&Ad.release(),Od&&Od.release(),delete n.keystrokeCaption}(this),this.stylesheets.forEach(o=>o?.release())}flushInlineShortcutBuffer(n){if(null!=n||(n={defer:!1}),!n.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(n){var o,t;return"virtual-keyboard"===sr(n)?null!=(t=null==(o=this.virtualKeyboard)?void 0:o.executeCommand(n))&&t:function B7(n,o){var t,i,a;if(!o)return!1;let s,r=[],l=!1,c=!1;Bn(o)?(s=o[0],r=o.slice(1)):s=o,s=s.replace(/-\w/g,f=>f[1].toUpperCase());let d=null==(t=Fo[s])?void 0:t.target;if("model"===d){if(n.options.readOnly&&/^(paste|cut|insert|delete|transpose|add)/.test(s))return n.model.announce("plonk"),!1;/^(delete|transpose|add)/.test(s)&&"deleteBackward"!==s&&n.flushInlineShortcutBuffer(),/^(delete|transpose|add)/.test(s)&&"latex"!==n.mode&&(n.popUndoStack(),n.snapshot()),"latex"===n.mode&&!/^(complete)/.test(s)&&od(n),Fo[s].fn(n.model,...r),"latex"!==n.mode&&/^(delete|transpose|add)/.test(s)&&n.snapshot(),"latex"===n.mode&&zl(n),c=!0,l=!0}else if("virtual-keyboard"===d)c=null!=(a=null==(i=n.virtualKeyboard)?void 0:i.executeCommand(o))&&a,l=!0;else{if(!Fo[s])throw new Error(`Unknown command "${s}"`);/^(undo|redo)/.test(s)&&n.flushInlineShortcutBuffer(),c=Fo[s].fn(n,...r),l=!0}return"virtual-keyboard"!==d&&(!n.model.selectionIsCollapsed||/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(s))&&(n.flushInlineShortcutBuffer(),n.style={}),c&&En(n),l}(this,n)}get errors(){return function h_(n,o,t){var i;let a=new Ll(ds(n,null),o,{args:null,mathstyle:"displaystyle",parseMode:null!=(i=t?.parseMode)?i:"math"});for(;!a.end();)a.parse();return a.errors}(this.model.getValue(),this)}getValue(n,o,t){return this.model.getValue(n,o,t)}setValue(n,o){var t;void 0===(o=o??{mode:"math"}).insertionMode&&(o.insertionMode="replaceAll"),(void 0===o.format||"auto"===o.format)&&(o.format="latex");let i="math";(void 0===o.mode||"auto"===o.mode)&&(i=null!=(t=sp(this.model,this.model.position))?t:"math"),Cn.insert(i,this.model,n,o)&&(this.undoManager.snapshot(),En(this))}get expression(){let n=this.computeEngine;return n?n.box(n.parse(this.model.getValue())):null}loadSound(n){var o=this;return(0,$n.Z)(function*(){var t,i,a,s,r,l,c;delete o.audioBuffers[n];let d="";switch(n){case"keypress":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null==(t=o.options.keypressSound)?void 0:t.default;break;case"spacebar":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(s=null==(i=o.options.keypressSound)?void 0:i.spacebar)?s:null==(a=o.options.keypressSound)?void 0:a.default;break;case"delete":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(c=null==(r=o.options.keypressSound)?void 0:r.delete)?c:null==(l=o.options.keypressSound)?void 0:l.default;break;case"plonk":d=o.options.plonkSound}if("string"!=typeof d)return;d=d.trim();let f=o.options.soundsDirectory;if(null==f||"null"===f||"none"===d||"null"===d)return;let y=yield(yield fetch(yield ep(f+"/"+d))).arrayBuffer(),O=yield o.audioContext.decodeAudioData(y);o.audioBuffers[n]=O})()}playSound(n){var o=this;return(0,$n.Z)(function*(){if(o.audioBuffers[n]||(yield o.loadSound(n)),!o.audioBuffers[n])return;let t=o.audioContext.createBufferSource();t.buffer=o.audioBuffers[n];let i=o.audioContext.createGain();i.gain.value=.5,t.connect(i).connect(o.audioContext.destination),t.start()})()}scrollIntoView(){var n;if(!this.element)return;null==(n=this.host)||n.scrollIntoView({block:"nearest",inline:"nearest"}),this.dirty&&za(this,{interactive:!0});let o=this.field.getBoundingClientRect(),t=null;if(this.model.selectionIsCollapsed)t=er(this.field);else{let i=I_(this);if(i.length>0){let a=-1/0,s=-1/0;for(let r of i)r.right>a&&(a=r.right),r.top<s&&(s=r.top);t={x:a+o.left-this.field.scrollLeft,y:s+o.top-this.field.scrollTop,height:0}}}if(this.host&&t){let i=this.host.getBoundingClientRect(),a=t.y,s=this.host.scrollTop;a<i.top?s=a-i.top+this.host.scrollTop:a>i.bottom&&(s=a-i.bottom+this.host.scrollTop+t.height),this.host.scroll({top:s,left:0})}if(t){let i=t.x-window.scrollX,a=this.field.scrollLeft;i<o.left?a=i-o.left+this.field.scrollLeft-20:i>o.right&&(a=i-o.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:a})}}insert(n,o){if("string"==typeof n&&n.length>0){if(this.flushInlineShortcutBuffer(),(o=o??{mode:"math"}).focus&&this.focus(),o.feedback&&(this.options.keypressVibration&&vu()&&navigator.vibrate(3),this.playSound("keypress")),o.scrollIntoView&&this.scrollIntoView(),"\\\\"===n)ip(this.model);else if("&"===n)op(this.model);else{let t=this.style;Cn.insert(this.mode,this.model,n,Ze({style:this.model.at(this.model.position).computedStyle},o)),o.resetStyle&&(this.style=t)}return this.undoManager.snapshot(),En(this),!0}return!1}switchMode(n,o="",t=""){var i;if(this.mode===n||this.options.readOnly||null==(i=this.host)||!i.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0})))return;let a=this.mode,{model:s}=this;s.deferNotifications({content:!!t||!!o,selection:!0,type:"insertText"},()=>{let r=!1;if(this.flushInlineShortcutBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(n),o&&"latex"!==n){let l=pi(o,this,{parseMode:n});s.collapseSelection("forward");let c=s.at(s.position);s.position=s.offsetOf(c.parent.addChildrenAfter(l,c)),r=!0}if(this.mode=n,"latex"===n){let l=s.selectionIsCollapsed;Ba(this,"accept");let c,d=s.at(s.position);if(l)c="\\";else{let y=Bi(s.selection);c=this.model.getValue(y,"latex");let O=this.model.extractAtoms(y);1===O.length&&O[0]instanceof An&&(c=o,l=!0),d=s.at(y[0])}let f=new aa(c,this);d.parent.addChildAfter(f,d),l?s.position=s.offsetOf(f.lastChild):s.setSelection(s.offsetOf(f.firstChild),s.offsetOf(f.lastChild))}else or(s).forEach(l=>{l.isError=!1});if(t){let l=pi(t,this,{parseMode:a});s.collapseSelection("forward");let c=s.at(s.position);s.position=s.offsetOf(c.parent.addChildrenAfter(l,c)),r=!0}return En(this),r}),this.mode=n}hasFocus(){return this.keyboardDelegate.hasFocus()}focus(n){var o;this.hasFocus()||(this.keyboardDelegate.focus(),this.model.announce("line"),(null==(o=n?.scrollIntoView)||o)&&this.scrollIntoView())}blur(){this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(n,o={}){var t,i;let a={operation:"set",suppressChangeNotifications:!1};Kl(o)?a.range=o:(a.range=o.range,a.suppressChangeNotifications=null!=(t=o.suppressChangeNotifications)&&t);let s=Ap(this,n),r=null!=(i=a.operation)?i:"set";this.model.deferNotifications({content:!a.suppressChangeNotifications,type:"insertText"},()=>{void 0===a.range?this.model.selection.ranges.forEach(l=>bd(this.model,l,s,{operation:r})):bd(this.model,a.range,s,{operation:r})}),En(this)}getCaretPoint(){let n=er(this.field);return n?{x:n.x,y:n.y}:null}setCaretPoint(n,o){let t=pr(this,n,o,{bias:0});if(t<0)return!1;let i=this.model.position;return this.model.position=t,this.model.announce("move",i),En(this),!0}getPlaceholderField(n){var o;return null==(o=this.placeholders.get(n))?void 0:o.field}attachNestedMathfield(){let n=!1,o=this.field.getBoundingClientRect();this.placeholders.forEach((t,i)=>{var a,s;let r=this.field.querySelector(`[data-placeholder-id="${i}"]`);if(!r)return;let l=r.getBoundingClientRect(),d=l.left-o.left+(null!=(a=this.element.offsetLeft)?a:0);(!t.field.style.left||Math.abs(d-parseFloat(t.field.style.left))>=1)&&(n=!0,t.field.style.left=`${d}px`);let f=l.top-o.top+(null!=(s=this.element.offsetTop)?s:0);(!t.field.style.top||Math.abs(f-parseFloat(t.field.style.top))>=1)&&(n=!0,t.field.style.top=`${f}px`)}),n&&En(this)}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){var n,o;this.undoManager.snapshot()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}snapshotAndCoalesce(){var n,o;this.undoManager.snapshotAndCoalesce()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}undo(){var n,o;this.undoManager.undo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var n,o;this.undoManager.redo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var n;null==(n=this.undoManager)||n.reset()}_onSelectionDidChange(){var n,o,t;let i=this.model;this.keyboardDelegate.setValue(this.model.getValue(this.model.selection,"latex-expanded"));let a=i.getAtoms(i.selection);if(1===a.length&&"placeholder"===a[0].type){let s=a[0];this.placeholders.has(s.placeholderId)&&(null==(n=this.placeholders.get(s.placeholderId))||n.field.focus())}{let s=i.at(i.position),r=null!=(o=s.mode)?o:md(this.options);this.mode!==r&&("latex"===this.mode?(Ba(this,"accept",{mode:r}),i.position=i.offsetOf(s)):this.switchMode(r))}null==(t=this.host)||t.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0}))}onFocus(){var n,o,t;this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),null==(n=this.virtualKeyboard)||n.setOptions(this.options),null==(o=this.virtualKeyboard)||o.enable(),"onfocus"===this.options.virtualKeyboardMode&&this.executeCommand("showVirtualKeyboard"),Jl(this),za(this,{interactive:!0}),null==(t=this.host)||t.dispatchEvent(new FocusEvent("focus",{bubbles:!1,composed:!0})),this.valueOnFocus=this.model.getValue(),this.focusBlurInProgress=!1)}onBlur(){var n,o,t,i;this.focusBlurInProgress||this.blurred||(this.focusBlurInProgress=!0,this.blurred=!0,this.ariaLiveText.textContent="",Ba(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(n=this.host)||n.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),/onfocus|manual/.test(this.options.virtualKeyboardMode)&&!Dn().sharedVirtualKeyboard&&this.executeCommand("hideVirtualKeyboard"),null==(o=this.virtualKeyboard)||o.disable(),null==(t=this.host)||t.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(i=this.host)||i.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),En(this),this.focusBlurInProgress=!1)}onCompositionStart(n){this.model.deleteAtoms(Bi(this.model.selection));let o=er(this.field);o&&requestAnimationFrame(()=>{za(this),this.keyboardDelegate.moveTo(o.x,o.y-o.height)})}onCompositionUpdate(n){(function lZ(n,o){let t=n.at(n.position);if("composition"===t.type)t.value=o;else{let{caret:i}=t;t.caret="";let a=new Fu(o,n.mathfield,{mode:t.mode});a.caret=i,t.parent.addChildAfter(a,t),n.position+=1}})(this.model,n),En(this)}onCompositionEnd(n){(function cZ(n){let o=n.at(n.position);"composition"===o.type&&(o.parent.removeChild(o),n.position-=1)})(this.model),Ed(this,n,{simulateKeystroke:!0})}onResize(){Jl(this)}onWheel(n){let o=5*n.deltaX;if(!Number.isFinite(o)||0===o)return;let t=this.field;o<0&&0===t.scrollLeft||o>0&&t.offsetWidth+t.scrollLeft>=t.scrollWidth||(t.scrollBy({top:0,left:o}),n.preventDefault(),n.stopPropagation())}getHTMLElement(n){let o=n;for(;!o.id&&o.hasChildren;)o=n.children[0];if(o.id)return this.fieldContent.querySelector(`[data-atom-id="${o.id}"]`);throw new TypeError("Could not get an ID from atom")}}(this.shadowRoot.querySelector(":host > div"),kt(Ze({},Gt.has(this)?Gt.get(this).options:ic(this)),{eventSink:this,value:a})),!Gt.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let s of Object.keys(ao.optionsAttributes))this.upgradeProperty(To(s))}null!=(t=this._mathfield)&&t.model?(Gt.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let s=Gt.get(this).value;void 0!==s&&this._mathfield.setValue(s),this._mathfield.model.selection=Gt.get(this).selection,Gt.delete(this)}),i.addEventListener("slotchange",s=>{if(s.target!==i)return;let r=i.assignedNodes().map(l=>3===l.nodeType?l.textContent:"").join("").trim();r!==this._slotValue&&(this._mathfield?this._mathfield.setValue(r):this.value=r)}),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))):this._mathfield=null}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})),!this._mathfield)return;let n=bs(this._mathfield.options,Object.keys(ao.optionsAttributes).map(o=>To(o)));Gt.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:n}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(n){if(this.hasOwnProperty(n)){let o=this[n];delete this[n],("readonly"===n||"read-only"===n)&&(n="readOnly"),this[n]=o}}attributeChangedCallback(n,o,t){if(o===t)return;let i=null!==t;switch(n){case"disabled":this.disabled=i;break;case"read-only":case"readonly":this.readOnly=i}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(n){let o=!!n;o?(this.setAttribute("readonly",""),this.setAttribute("disabled",""),this.setAttribute("aria-readonly","true")):(this.removeAttribute("readonly"),this.removeAttribute("read-only"),this.removeAttribute("disabled"),this.removeAttribute("aria-readonly")),this.setOptions({readOnly:o})}get disabled(){return this.hasAttribute("disabled")}set disabled(n){let o=!!n;o?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",o?"true":"false"),this.setOptions({readOnly:o})}get value(){return this.getValue()}set value(n){this.setValue(n)}get defaultMode(){return this.getOption("defaultMode")}set defaultMode(n){this.setOptions({defaultMode:n})}get fontsDirectory(){return this.getOption("fontsDirectory")}set fontsDirectory(n){this.setOptions({fontsDirectory:n})}get mathModeSpace(){return this.getOption("mathModeSpace")}set mathModeSpace(n){this.setOptions({mathModeSpace:n})}get inlineShortcutTimeout(){return this.getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(n){this.setOptions({inlineShortcutTimeout:n})}get keypressVibration(){return this.getOption("keypressVibration")}set keypressVibration(n){this.setOptions({keypressVibration:n})}get keypressSound(){return this.getOption("keypressSound")}set keypressSound(n){this.setOptions({keypressSound:n})}get plonkSound(){var n;return null!=(n=this.getOption("plonkSound"))?n:null}set plonkSound(n){this.setOptions({plonkSound:n})}get letterShapeStyle(){return this.getOption("letterShapeStyle")}set letterShapeStyle(n){this.setOptions({letterShapeStyle:n})}get locale(){return this.getOption("locale")}set locale(n){this.setOptions({locale:n})}get readOnly(){return this.getOption("readOnly")}set readOnly(n){this.setOptions({readOnly:n})}get removeExtraneousParentheses(){return this.getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(n){this.setOptions({removeExtraneousParentheses:n})}get smartFence(){return this.getOption("smartFence")}set smartFence(n){this.setOptions({smartFence:n})}get smartMode(){return this.getOption("smartMode")}set smartMode(n){this.setOptions({smartMode:n})}get smartSuperscript(){return this.getOption("smartSuperscript")}set smartSuperscript(n){this.setOptions({smartSuperscript:n})}get speechEngine(){return this.getOption("speechEngine")}set speechEngine(n){this.setOptions({speechEngine:n})}get speechEngineRate(){return this.getOption("speechEngineRate")}set speechEngineRate(n){this.setOptions({speechEngineRate:n})}get speechEngineVoice(){return this.getOption("speechEngineVoice")}set speechEngineVoice(n){this.setOptions({speechEngineVoice:n})}get textToSpeechMarkup(){return this.getOption("textToSpeechMarkup")}set textToSpeechMarkup(n){this.setOptions({textToSpeechMarkup:n})}get textToSpeechRules(){return this.getOption("textToSpeechRules")}set textToSpeechRule(n){this.setOptions({textToSpeechRules:n})}get virtualKeyboardLayout(){return this.getOption("virtualKeyboardLayout")}set virtualKeyboardLayout(n){this.setOptions({virtualKeyboardLayout:n})}get virtualKeyboardMode(){return this.getOption("virtualKeyboardMode")}set virtualKeyboardMode(n){this.setOptions({virtualKeyboardMode:n})}get virtualKeyboardTheme(){return this.getOption("virtualKeyboardTheme")}set virtualKeyboardTheme(n){this.setOptions({virtualKeyboardTheme:n})}get virtualKeyboards(){return this.getOption("virtualKeyboards")}set virtualKeyboards(n){this.setOptions({virtualKeyboards:n})}get useSharedVirtualKeyboard(){return this.getOption("useSharedVirtualKeyboard")}set useSharedVirtualKeyboard(n){this.setOptions({useSharedVirtualKeyboard:n})}get sharedVirtualKeyboardTargetOrigin(){return this.getOption("sharedVirtualKeyboardTargetOrigin")}set sharedVirtualKeyboardTargetOrigin(n){this.setOptions({sharedVirtualKeyboardTargetOrigin:n})}get selection(){return this._mathfield?this._mathfield.model.selection:Gt.has(this)?Gt.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(n){"number"==typeof n&&(n={ranges:[[n,n]]}),this._mathfield?this._mathfield.model.selection=n:Gt.has(this)?Gt.set(this,kt(Ze({},Gt.get(this)),{selection:n})):Gt.set(this,{value:void 0,selection:n,options:ic(this)})}get selectionIsCollapsed(){let n=this.selection;return 1===n.ranges.length&&n.ranges[0][0]===n.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Gt.has(this)?Gt.get(this).selection.ranges[0][0]:0}set position(n){this._mathfield&&(this._mathfield.model.position=n),Gt.has(this)?Gt.set(this,kt(Ze({},Gt.get(this)),{selection:{ranges:[[n,n]]}})):Gt.set(this,{value:void 0,selection:{ranges:[[n,n]]},options:ic(this)})}getOffsetDepth(n){var o;return this._mathfield?(null==(o=this._mathfield.model.at(n))?void 0:o.treeDepth)-2:0}get lastOffset(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.model.lastOffset)?o:-1}};function To(n){return n.toLowerCase().replace(/[^a-zA-Z\d]+(.)/g,(o,t)=>t.toUpperCase())}function ic(n){let o={},t=ao.optionsAttributes;return Object.keys(t).forEach(i=>{if(n.hasAttribute(i)){let a=n.getAttribute(i);o[To(i)]="boolean"===t[i]||("on/off"===t[i]?"on"===a||"off"!==a&&void 0:"number"===t[i]?Number.parseFloat(a??"0"):a)}else"boolean"===t[i]&&(o[To(i)]=!1)}),o}function Zd(){return!(!window.ElementInternals||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var Ip,Lp,Zp,Pd=ao;!Ei()||null!=(Ip=window.customElements)&&Ip.get("math-field")||(null!=globalThis[Lp=Symbol.for("io.cortexjs.mathlive")]||(globalThis[Lp]={}),globalThis[Symbol.for("io.cortexjs.mathlive")].version="0.89.4",window.MathfieldElement=ao,null==(Zp=window.customElements)||Zp.define("math-field",ao));var at=1200,On=3e3,oi=4e3;function Fe(n,o,t=On,i="$0"){for(let a of o)xo[a]&&(xo[a].frequency=t,xo[a].category=n,xo[a].template=i.replace(/\$0/g,a)),bo[a]&&(bo[a]=kt(Ze({},bo[a]),{frequency:t,category:n,template:i.replace(/\$0/g,a)}))}function Dn(){var n;return null!=globalThis[n=Symbol.for("io.cortexjs.mathlive")]||(globalThis[n]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}Fe("Trigonometry",["\\cos","\\sin","\\tan"],oi),Fe("Trigonometry",["\\arccos","\\arcsin","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),Fe("Functions",["\\ln","\\log","\\exp","\\lim"],oi),Fe("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],On),Fe("Functions",["\\hom"],at),Fe("Decoration",["\\rule"],200,"$0{2em}{1em}"),Fe("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),Fe("Decoration",["\\overline","\\underline"],On,"$0{\\placeholder{}}"),Fe("Decoration",["\\enclose"],at,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),Fe("Decoration",["\\fcolorbox"],at,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),Fe("Decoration",["\\colorbox"],at,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),Fe("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],at,"$0{\\placeholder{}}"),Fe("Decoration",["\\bbox"],at,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),Fe("Styling",["\\mathbb"],oi,"$0{Don Knuth}"),Fe("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],On,"$0{Don Knuth}"),Fe("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId","\\htmlData","\\htmlStyle"],at,"{$0 Don Knuth}"),Fe("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],at,"\\text{$0 Don Knuth}"),Fe("Styling",["\\class","\\cssId"],at,"$0{testIdentifier}{Don Knuth}"),Fe("Styling",["\\fontseries"],at,"\\text{$0{b}Don Knuth}"),Fe("Styling",["\\fontfamily"],at,"\\text{$0{cmtt}Don Knuth}"),Fe("Styling",["\\fontshape"],at,"\\text{$0{sc}Don Knuth}"),Fe("Styling",["\\selectfont"],at,"\\text{$0}"),Fe("Styling",["\\emph"],at,"Don$0{Knuth}"),Fe("Styling",["\\em"],at,"Don{$0 Knuth}"),Fe("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],at,"x=$0{arg}=0"),Fe("Layout",["\\middle"],at,"\\left\\{x$0|x>0\\right\\}"),Fe("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],at,"$0{arg}{x=0}"),Fe("Layout",["\\rlap","\\mathrlap"],at,"$0{/}0"),Fe("Layout",["\\llap","\\mathllap"],at,"o$0{/}"),Fe("Fractions",["\\frac"],oi,"$0{\\placeholder{}}{\\placeholder{}}"),Fe("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],at,"$0{\\placeholder{}}{\\placeholder{}}"),Fe("Fractions",["\\over","\\atop","\\choose"],at,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),Fe("Fractions",["\\overwithdelims","\\atopwithdelims"],at,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),Fe("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],oi),Fe("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],On),Fe("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],at),Fe("Accents",["\\vec"],oi),Fe("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],On,"$0{\\placeholder{}}"),Fe("Accents",["\\^","\\`","\\'"],at,"$0{e}"),Fe("Accents",["\\c"],at,"$0{c}"),Fe("Accents",["\\~"],at,"$0{n}"),Fe("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],at,"$0{\\placeholder{}}"),Fe("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],On,"$0{ABC}"),Fe("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],On,"$0{ABC}"),Fe("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],at,"$0{x=0}"),Fe("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],at,"$0($0)"),Fe("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],at,"$0("),Fe("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],at,"$0)"),Fe("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],at,"$0|"),Fe("Letterlike Symbols",["\\nabla","\\partial","\\N","\\R","\\Q","\\C","\\Z","\\exponentialE","\\forall","\\exists","\\nexists"],oi),Fe("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\doubleStruckCapitalN","\\doubleStruckCapitalR","\\doubleStruckCapitalQ","\\doubleStruckCapitalC","\\doubleStruckCapitalZ","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im","\\$","\\%","\\And","\\degree"],On),Fe("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],at),Fe("Crosses",["\\dagger","\\dag"],oi),Fe("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],at),Fe("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],at),Fe("Various",["\\unicode"],at,'$0{"2B1A}'),Fe("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],oi),Fe("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],On),Fe("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],at),Fe("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),Fe("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],at),Fe("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],at,"$0[below]{above}=0"),Fe("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],at),Fe("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],at),Fe("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],oi),Fe("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],On),Fe("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],at),Fe("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],oi),Fe("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],On),Fe("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],at),Fe("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],oi),Fe("Logic",["\\models","\\vdash"],On),Fe("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],at),Fe("Operators",["+","-","*","\\cdot"],oi),Fe("Operators",["\\sqrt"],oi,"$0{\\placeholder{}}"),Fe("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],On),Fe("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],at),Fe("Logic",["\\wedge","\\vee","\\neg"],oi),Fe("Logic",["\\lnot"],On),Fe("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],at),Fe("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],On),Fe("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],oi),Fe("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],On),Fe("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],at),Fe("Spacing",["\\space","\\quad","\\qquad"],On,'\\unicode{"203A}$0\\unicode{"2039}'),Fe("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],at,'\\unicode{"203A}$0\\unicode{"2039}'),Fe("Spacing",["\\hspace","\\hspace*"],at,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),Fe("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],On),Fe("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],at),Fe("Boxes",["\\square","\\Box"],On),Fe("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],at),Fe("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],On),Fe("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],at),Fe("Triangles",["\\triangle","\\triangleq"],On),Fe("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],at),Fe("Shapes",["\\ast","\\star"],On),Fe("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],at);let hP=(()=>{class n extends W.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(){this.inp&&(this.inp.str=this.mfe.value,this.onInsertLatex.emit(this.inp))}ngAfterViewInit(){const t=document.getElementById("formula-mathtype-editor");this.mfe.value=(this.inp?.str.includes("<math xmlns")?this.commonService.convertMathtypeToLatex(this.inp?.str??""):this.inp?.str)??"",this.mfe.style.fontSize="35px",this.mfe.style.padding="10px",this.mfe.setOptions({fontsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/fonts",soundsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/sounds",virtualKeyboardMode:"onfocus",virtualKeyboardLayout:"dvorak"}),t?.appendChild(this.mfe),this.mfe.focus()}constructor(t){super(),this.commonService=t,this.onClose=new e.vpe,this.onInsertLatex=new e.vpe,this.isMobile=!1,this.isLoadLib=!1,this.mfe=new ao}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rt.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mathtype-editor"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsertLatex:"onInsertLatex"},features:[e.qOj],decls:18,vars:9,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body"],["id","formula-mathtype-editor"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","mathTypeEditor-QurJasjSBOm",1,"btn","btn-primary","w-24",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5),e._UZ(11,"div",6),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"div",8),e.TgZ(14,"div",9)(15,"button",10),e.NdJ("click",function(){return i.actionInsert()}),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(2),e.Gre("box dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,5,"lang_auto_soan_thao_cong_thuc")," "),e.xp6(11),e.hij(" ",e.lcZ(17,7,"lang_auto_chen")," "))},dependencies:[vn.Hw,re.bT],styles:["body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}"]}),n})(),gP=(()=>{class n extends W.Q{constructor(){super(...arguments),this.id_content="",this.onDropFile=new e.vpe}onFileSelected(t){let s=t.target.files,r=!!s&&s[0];0!=r&&this.onDropFile.emit(r)}setupDropFile(){const t=jQuery("#frame_inp_editor_"+this.id_content);t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.onDropFile.emit(i.originalEvent.dataTransfer.files[0])})}ngAfterViewInit(){this.setupDropFile()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["question-dropper"]],inputs:{id_content:"id_content"},outputs:{onDropFile:"onDropFile"},features:[e.qOj],decls:13,vars:7,consts:[["azt-track-service","question-dropper-qkcT8PYGlf",1,"editor-drop-file",3,"id","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending","mx-auto"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"link"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.NdJ("click",function(){e.CHM(a);const r=e.MAs(12);return e.KtG(r.click())}),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4),e.qZA(),e.kcU(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"span",5),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"input",6,7),e.NdJ("change",function(r){return i.onFileSelected(r)}),e.qZA()}2&t&&(e.MGl("id","frame_inp_editor_",i.id_content,""),e.xp6(6),e.hij("",e.lcZ(7,3,"lang_auto_keo_tha_fiel_vao_day_hoc_bam_vao")," "),e.xp6(3),e.Oqu(e.lcZ(10,5,"lang_auto_chon_file")+" ..."))},dependencies:[re.bT],styles:[".editor-drop-file[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border:1px dotted #2462ae;padding:20px;border-radius:5px;-webkit-user-select:none;user-select:none}.editor-drop-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.editor-drop-file[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#2462ae}.is-dragover[_ngcontent-%COMP%]{background-color:#2462ae6a}"]}),n})();var Np=S(56291);let fP=(()=>{class n extends W.Q{actionClose(){this.onClose.emit()}actionFinish(){this.onPushImage.emit({element:this.el_target,source:this.src_source,output:this.editor._imgCtx.canvas.toDataURL("image/png",1)})}startLoad(){this.is_load_libs=!1,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"}]).then(()=>{if(this.is_load_libs=!0,this.el_target){this.src_source=this.el_target.getAttribute("src")||"";var t=document.createElement("img");this.el?.appendChild(t),t.onload=()=>{const i=mnpaint.getInstance();i.startSession(t),i.config.width=this.el?.clientWidth,i.config.height=this.el?.clientHeight,i.config.resizable=!1,i.config.stopWhenClickOutsize=!1,i.config.stopWhenClickOutside=!1,i.config.autoUpdateSource="change",this.editor=i},t.src=this.src_source}})}uploadImageAction(){this.editor._fileInput.click()}addTextAction(){this.editor._addText()}cropAction(){this.editor._setSelectionType("crop")}undoAction(){this.editor._undo()}redoAction(){this.editor._redo()}zoomAction(t){t?this.editor.zoomIn():this.editor.zoomOut()}ngAfterViewInit(){this.el=document.getElementById("only-image-editor_image__process"),this.startLoad()}constructor(t){super(),this.cdnService=t,this.onClose=new e.vpe,this.onPushImage=new e.vpe,this.el=null,this.src_source="",this.is_load_libs=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(xt.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["only-image-editor"]],inputs:{el_target:"el_target"},outputs:{onClose:"onClose",onPushImage:"onPushImage"},features:[e.qOj],decls:66,vars:6,consts:[[1,"box-dialog"],["azt-track-service","imageEditor-E8qc0UaMWsA",1,"dialog-overlay",3,"click"],[1,"dialog","box"],[1,"dialog-body"],[1,"img-editor-bx"],[1,"bx-content"],[1,"az-editor"],[1,"az-editor-top-bar"],[1,"top-bar-tool",2,"width","55px"],[1,"top-bar-tool"],[1,"top-bar-tool-item"],["azt-track-service","imageEditor-Z62bVA0hAQV","matTooltip","Undo",1,"btn-az-text","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M3 7v6h6"],["d","M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"],["azt-track-service","imageEditor-_e7HTV21HlD","matTooltip","Redo",1,"btn-az-text",3,"click"],["d","M21 7v6h-6"],["d","M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"],["azt-track-service","imageEditor-z4iVO06Ys6H","matTooltip","Zoom +",1,"btn-az-text","mr-2",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["azt-track-service","imageEditor-690dZE83J6L","matTooltip","Zoom -",1,"btn-az-text",3,"click"],[1,"az-editor-body"],[1,"az-editor-slide-bar"],[1,"az-tool"],["azt-track-service","imageEditor-qzyGDqt8nDW",1,"az-tool-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"az-tool-icon"],["d","M6 2v14a2 2 0 0 0 2 2h14"],["d","M18 22V8a2 2 0 0 0-2-2H2"],["azt-track-service","imageEditor-RUdGS0nAto3",1,"az-tool-item",3,"click"],["points","4 7 4 4 20 4 20 7"],["x1","9","y1","20","x2","15","y2","20"],["x1","12","y1","4","x2","12","y2","20"],["azt-track-service","imageEditor-efAq1HoIGbC",1,"az-tool-item",3,"click"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"az-editor-main"],["id","only-image-editor_image__process",1,"az-editor-content"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","imageEditor-DcXjxkUVcBd",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","imageEditor-GDQpZCPJRZZ",1,"btn","btn-primary","w-20",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"div",8),e.TgZ(9,"div",9)(10,"div",10)(11,"button",11),e.NdJ("click",function(){return i.undoAction()}),e.O4$(),e.TgZ(12,"svg",12),e._UZ(13,"path",13)(14,"path",14),e.qZA()(),e.kcU(),e.TgZ(15,"button",15),e.NdJ("click",function(){return i.redoAction()}),e.O4$(),e.TgZ(16,"svg",12),e._UZ(17,"path",16)(18,"path",17),e.qZA()()()(),e.kcU(),e.TgZ(19,"div",9)(20,"div",10)(21,"button",18),e.NdJ("click",function(){return i.zoomAction(!0)}),e.O4$(),e.TgZ(22,"svg",12),e._UZ(23,"circle",19)(24,"line",20)(25,"line",21)(26,"line",22),e.qZA()(),e.kcU(),e.TgZ(27,"button",23),e.NdJ("click",function(){return i.zoomAction()}),e.O4$(),e.TgZ(28,"svg",12),e._UZ(29,"circle",19)(30,"line",20)(31,"line",22),e.qZA()()()()(),e.kcU(),e.TgZ(32,"div",24)(33,"div",25)(34,"nav",26)(35,"button",27),e.NdJ("click",function(){return i.cropAction()}),e.O4$(),e.TgZ(36,"svg",28),e._UZ(37,"path",29)(38,"path",30),e.qZA(),e.kcU(),e.TgZ(39,"span"),e._uU(40,"Crop"),e.qZA()(),e.TgZ(41,"button",31),e.NdJ("click",function(){return i.addTextAction()}),e.O4$(),e.TgZ(42,"svg",28),e._UZ(43,"polyline",32)(44,"line",33)(45,"line",34),e.qZA(),e.kcU(),e.TgZ(46,"span"),e._uU(47,"Text"),e.qZA()(),e.TgZ(48,"button",35),e.NdJ("click",function(){return i.uploadImageAction()}),e.O4$(),e.TgZ(49,"svg",28),e._UZ(50,"path",36)(51,"path",37)(52,"path",38),e.qZA(),e.kcU(),e.TgZ(53,"span"),e._uU(54,"Upload"),e.qZA()()()(),e.TgZ(55,"div",39),e._UZ(56,"div",40),e.qZA()()()()()(),e.TgZ(57,"div",41),e._UZ(58,"div",42),e.TgZ(59,"div",43)(60,"button",44),e.NdJ("click",function(){return i.actionClose()}),e._uU(61),e.ALo(62,"mytranslate"),e.qZA(),e.TgZ(63,"button",45),e.NdJ("click",function(){return i.actionFinish()}),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(61),e.hij(" ",e.lcZ(62,2,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(65,4,"lang_auto_luu")," "))},dependencies:[Zt.gM,re.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:90vw;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #dfe0e5;justify-content:space-between;align-items:center}.az-editor[_ngcontent-%COMP%]{width:100%}.az-editor-top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #dfe0e5;padding:10px}.az-editor-body[_ngcontent-%COMP%]{display:flex}.az-editor-slide-bar[_ngcontent-%COMP%]{border-right:1px solid #dfe0e5;border-top:0px;flex-direction:column;flex-shrink:0;height:70vh;width:80px;overflow:hidden auto}.az-editor-main[_ngcontent-%COMP%]{background:#f7f7f8;width:100%;overflow:auto;max-height:75vh}.az-editor-content[_ngcontent-%COMP%]{width:100%;height:100%}.az-editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.top-bar-tool[_ngcontent-%COMP%]{display:flex;margin-right:20px}.top-bar-tool-item[_ngcontent-%COMP%]{display:flex;align-items:center;color:#5d647b;font-size:12px}.top-bar-tool-input[_ngcontent-%COMP%]{border:1px solid #dfe0e5;border-radius:5px;width:50px;color:#5d647b;margin-left:5px;padding-left:3px;padding-right:3px}.az-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column}.az-tool-item[_ngcontent-%COMP%]{padding:10px 24px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#5d647b;background:transparent;border:none;-webkit-user-select:none;user-select:none;text-transform:initial;transition:all .5s}.az-tool-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.az-tool-item[_ngcontent-%COMP%]:hover{color:#1e41af;font-weight:500}.az-tool-icon[_ngcontent-%COMP%]{width:24px;height:24px}.az-tool[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#1e41af;font-weight:500}.btn-az-text[_ngcontent-%COMP%]{border:none;background:transparent;color:#5d647b;transition:all .5s}.btn-az-text[_ngcontent-%COMP%]:hover:not([disabled]){color:#1e41af}.btn-az-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px}.btn-az-text[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 768px){.top-bar-tool[_ngcontent-%COMP%]{margin-right:10px}.top-bar-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]}),n})();var ks=S(26236);function xP(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_cms_common_loading")))}function bP(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_cau_hoi_nao")))}function vP(n,o){if(1&n&&(e.TgZ(0,"mat-icon",18),e.ALo(1,"mytranslate"),e.ALo(2,"mytranslate"),e._uU(3," push_pin"),e.qZA()),2&n){const t=e.oxw().$implicit;e.s9C("matTooltip",t.isFixGroup?e.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):e.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function yP(n,o){1&n&&(e.TgZ(0,"div",19)(1,"span",20),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"tieu_de_nhom")))}function wP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"app-quest-header",22),e.NdJ("onChooseSimilar",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.actionInsert(a))})("onError",function(a){e.CHM(t);const s=e.oxw(2);return e.KtG(s.commonService.snackError(a))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("q",t)("similar",!0)}}function CP(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function kP(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,CP,2,1,"span",6),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isCorrect)}}function TP(n,o){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,kP,2,1,"span",29),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an_dung")+":"),e.xp6(2),e.Q6J("ngForOf",t.quest.answers)}}function AP(n,o){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function OP(n,o){if(1&n&&(e.TgZ(0,"div",30)(1,"span",31),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,AP,2,1,"span",32),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an")+":"),e.xp6(2),e.Q6J("ngForOf",t.strAns)}}function SP(n,o){1&n&&(e.TgZ(0,"span",38),e._UZ(1,"div",39)(2,"div",40),e.qZA())}const Qp=function(n){return{"an-true":n}};function EP(n,o){if(1&n&&(e.TgZ(0,"div",34),e.YNc(1,SP,3,0,"span",35),e.TgZ(2,"div",36),e._uU(3),e.qZA(),e._UZ(4,"div",37),e.ALo(5,"safeContentQuestion"),e.ALo(6,"async"),e.ALo(7,"mathJaxContent"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.ans.isCorrect),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Qp,t.ans.isCorrect)),e.xp6(1),e.hij(" ",t.ans.label,""),e.xp6(1),e.Q6J("innerHTML",e.lcZ(5,5,e.lcZ(6,7,e.lcZ(7,9,t.renderedStr))),e.oJD)("ngClass",e.VKq(13,Qp,t.ans.isCorrect))}}function MP(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,TP,5,4,"div",6),e.YNc(2,OP,5,4,"div",27),e.YNc(3,EP,8,15,"div",28),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.Gre("box-ans quest-ans-ver-",t.v,""),e.xp6(1),e.Q6J("ngIf","pdf-1-0"==t.v),e.xp6(1),e.Q6J("ngIf",4==t.type&&t.strAns),e.xp6(1),e.Q6J("ngForOf",t.answers)}}const IP=function(n){return{"padding-mobile":n}};function LP(n,o){if(1&n&&(e.TgZ(0,"div",41)(1,"div",42)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e._UZ(5,"div",43),e.ALo(6,"safeContentQuestion"),e.ALo(7,"async"),e.ALo(8,"mathJaxContent"),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.Gre("box-help quest-help-ver-",t.v,""),e.Q6J("ngClass",e.VKq(14,IP,i.isMobile)),e.xp6(3),e.Oqu(e.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(6,8,e.lcZ(7,10,e.lcZ(8,12,t.helpRenderedStr))),e.oJD)}}function ZP(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"div",24),e.ALo(2,"safeContentQuestion"),e.ALo(3,"async"),e.ALo(4,"mathJaxContent"),e.ALo(5,"removeBracket"),e.YNc(6,MP,4,6,"div",25),e.YNc(7,LP,9,16,"div",26),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Gre("tex2jax_process box-content quest-ver-",t.v,""),e.Q6J("innerHTML",e.lcZ(2,6,e.lcZ(3,8,e.lcZ(4,10,e.lcZ(5,12,t.renderedStr)))),e.oJD),e.xp6(5),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.helpRenderedStr)}}function PP(n,o){if(1&n&&(e._UZ(0,"div",44),e.ALo(1,"safeContentQuestion")),2&n){const t=e.oxw().$implicit;e.Q6J("innerHTML",e.lcZ(1,1,t.err),e.oJD)}}function jP(n,o){1&n&&e._UZ(0,"div",45)}function DP(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9),e.YNc(2,vP,4,5,"mat-icon",10),e._UZ(3,"div",11),e.ALo(4,"safeContentQuestion"),e.YNc(5,yP,4,3,"div",12),e.YNc(6,wP,2,2,"div",13),e.TgZ(7,"div",14)(8,"div"),e.YNc(9,ZP,8,14,"div",15),e.YNc(10,PP,2,3,"div",16),e.qZA()()(),e.YNc(11,jP,1,0,"div",17),e.qZA()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isFixGroup||t.quest.isFixAns),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,7,i.errorQuestionView.makeErr(t,i.lstQuest)),e.oJD),e.xp6(2),e.Q6J("ngIf",t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(3),e.Q6J("ngIf",!t.err),e.xp6(1),e.Q6J("ngIf",t.err),e.xp6(1),e.Q6J("ngIf",0==i.lstQuest.length)}}const NP=function(n){return{"max-height":n}};let QP=(()=>{class n extends W.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(t){t.v="similar",this.onInsert.emit(t)}constructor(){super(),this.onClose=new e.vpe,this.onInsert=new e.vpe,this.onChooseSimilar=new e.vpe,this.isMobile=!1,this.lstQuest=[],this.errorQuestionView=new fi(this.commonService)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["similar-quest"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsert:"onInsert",onChooseSimilar:"onChooseSimilar"},features:[e.qOj],decls:14,vars:12,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[4,"ngIf"],["class","question-content",4,"ngFor","ngForOf"],[1,"question-content"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],[1,"box-service-header","w-full"],[3,"q","similar","onChooseSimilar","onError"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"innerHTML"],[3,"class",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"ngClass"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"innerHTML","ngClass"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"innerHTML"],[1,"exam-box",3,"innerHTML"],[1,"skeleton-box-loading","h-100","w-100"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5),e.YNc(11,xP,3,3,"div",6),e.YNc(12,bP,3,3,"div",6),e.YNc(13,DP,12,9,"div",7),e.qZA()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_auto_doi_cau_khac")," "),e.xp6(5),e.Q6J("ngStyle",e.VKq(10,NP,i.isMobile?"75vh":"500px")),e.xp6(1),e.Q6J("ngIf",!i.inp),e.xp6(1),e.Q6J("ngIf",i.inp&&0==i.inp.length),e.xp6(1),e.Q6J("ngForOf",i.inp))},dependencies:[M.mk,M.sg,M.O5,M.PC,ks.Zt,ks.Bh,vn.Hw,Zt.gM,Np.X,M.Ov,re.bT,re.QA,re.Ev,re.vw],styles:['body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{overflow:auto;position:relative}.question-content[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .quest-err{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .quest-err:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}']}),n})();function qP(n,o){if(1&n&&(e.TgZ(0,"li",8),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}const FP=function(n){return{"max-height":n}};let UP=(()=>{class n extends W.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}get lstMsgErrors(){return this.lstErrors.map(t=>t.split("|")).map(t=>`${this.stringTrans} ${t[0]}: ${t[1]}`)}constructor(){super(),this.onClose=new e.vpe,this.lstErrors=[],this.isMobile=!1,this.stringTrans=this.commonService.myTranslateInstant("lang_auto_line")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["show-errors-quests"]],inputs:{lstErrors:"lstErrors"},outputs:{onClose:"onClose"},features:[e.qOj],decls:13,vars:10,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[1,"lst-errs"],["class","lst-err-item",4,"ngFor","ngForOf"],[1,"lst-err-item"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5)(11,"ul",6),e.YNc(12,qP,2,1,"li",7),e.qZA()()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,6,"lang_auto_vui_long_kiem_tra_lai_cac_noi_dung_sau")," "),e.xp6(5),e.Q6J("ngStyle",e.VKq(8,FP,i.isMobile?"75vh":"500px")),e.xp6(2),e.Q6J("ngForOf",i.lstMsgErrors))},dependencies:[M.sg,M.PC,ks.Zt,ks.Bh,vn.Hw,re.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}"]}),n})();function RP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onHandleNextQuestion(s.nextToQuest))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function BP(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"lowercase"),e.qZA(),e.TgZ(5,"td",15),e._uU(6),e.qZA(),e.TgZ(7,"td",16),e.YNc(8,RP,2,1,"span",17),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.AsE("",e.lcZ(3,4,"lang_testbank_test_config_total_number_question")," ",e.lcZ(4,6,t.type),""),e.xp6(4),e.Oqu(t.countQuest),e.xp6(2),e.Q6J("ngForOf",t.lstQuest)}}function zP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onHandleNextQuestion(s.nextToQuest))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function JP(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"lowercase"),e.ALo(5,"mytranslate"),e.ALo(6,"lowercase"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"td",15),e._uU(9),e.qZA(),e.TgZ(10,"td",16),e.YNc(11,zP,2,1,"span",17),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.HOy("",e.lcZ(3,6,"lang_auto_tong_so_cau_trac_nghiem")," ",e.lcZ(4,8,e.lcZ(5,10,"lang_auto_co"))," ",t.numberAns," ",e.lcZ(6,12,e.lcZ(7,14,"lang_auto_dap_an")),""),e.xp6(7),e.Oqu(t.countQuest),e.xp6(2),e.Q6J("ngForOf",t.lstQuest)}}function HP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",18),e.NdJ("click",function(){const s=e.CHM(t).$implicit,r=e.oxw(2);return e.KtG(r.onHandleNextQuestion(s.nextToQuest))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function KP(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",19),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",15),e._uU(5),e.qZA(),e.TgZ(6,"td",16),e.YNc(7,HP,2,1,"span",17),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_testbank_editor_the_question_without_a_solution_guide")),e.xp6(3),e.Oqu(t.showMore.countQuestNoHelp.countQuest),e.xp6(2),e.Q6J("ngForOf",t.showMore.countQuestNoHelp.lstQuest)}}let $P=(()=>{class n extends W.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),this.makeInfo(),this.showMore={...this.info,typeQuests:this.info.typeQuests.filter(t=>t.lstQuest.length>0)}}makeInfo(){const t={totalQuest:this.lstQuest.filter(i=>!i.quest.isGroup).length,typeQuests:[],ansCountQuest:[],countQuestNoHelp:{countQuest:0,lstQuest:[]}};this.lstQuest.filter(i=>!i.quest.isGroup).forEach(i=>{let a=t.typeQuests.findIndex(s=>s.typeNumber===i.type);if(-1===a&&(a=t.typeQuests.push({type:this.getNameTypeQuestion(i.type??-1),typeNumber:i.type??-1,countQuest:0,lstQuest:[]})-1),t.typeQuests[a].countQuest++,1===t.typeQuests[a].typeNumber){let s=t.ansCountQuest.findIndex(r=>r.numberAns===i.answers.length);-1===s&&(s=t.ansCountQuest.push({numberAns:i.answers.length,countQuest:0,lstQuest:[]})-1),t.ansCountQuest[s].countQuest++,t.ansCountQuest[s].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)})}else t.typeQuests[a].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)});i.helpRenderedStr||(t.countQuestNoHelp.countQuest++,t.countQuestNoHelp.lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)}))}),t.ansCountQuest.sort((i,a)=>a.numberAns-i.numberAns),this.info=t}getNameTypeQuestion(t){switch(t){case 1:return this.commonService.myTranslateInstant("lang_auto_trac_nghiem")??"";case 3:return this.commonService.myTranslateInstant("lang_testbank_create_exam_width_file_docx_essay")??"";case 4:return this.commonService.myTranslateInstant("lang_auto_dien_tu")??""}return""}extractNumberFromString(t){const a=t.match(/\d+/g);return a?parseInt(a[0]):0}actionClose(){this.onClose.emit()}onHandleNextQuestion(t){this.onNextQuestion.emit(t)}constructor(){super(),this.onClose=new e.vpe,this.onNextQuestion=new e.vpe,this.isMobile=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["show-info-quests"]],inputs:{lstQuest:"lstQuest"},outputs:{onClose:"onClose",onNextQuestion:"onNextQuestion"},features:[e.qOj],decls:33,vars:27,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto","max-height","70vh"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"],[2,"white-space","nowrap"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5)(11,"div",6)(12,"p",7),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"lowercase"),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"table",8)(18,"thead")(19,"tr",9)(20,"td",10),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"td",11),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"td",12),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,BP,9,8,"tr",13),e.YNc(31,JP,12,16,"tr",13),e.YNc(32,KP,8,5,"tr",14),e.qZA()()()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,13,"lang_auto_thong_tin_de_thi")," "),e.xp6(8),e.lnq("",e.lcZ(14,15,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.info.totalQuest," ",e.lcZ(15,17,e.lcZ(16,19,"lang_auto_cau")),""),e.xp6(8),e.Oqu(e.lcZ(22,21,"lang_auto_thong_tin")),e.xp6(3),e.Oqu(e.lcZ(25,23,"lang_auto_so_luong")),e.xp6(3),e.Oqu(e.lcZ(28,25,"lang_auto_danh_sach_cac_cau")),e.xp6(3),e.Q6J("ngForOf",i.showMore.typeQuests),e.xp6(1),e.Q6J("ngForOf",i.showMore.ansCountQuest),e.xp6(1),e.Q6J("ngIf",i.showMore.countQuestNoHelp.countQuest))},dependencies:[M.sg,M.O5,ks.Zt,ks.Bh,vn.Hw,M.i8,re.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var jd=S(60932),YP=S(46876);const GP=["perfectScroll"];function WP(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"span",25),e.ALo(2,"mytranslate"),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("innerHtml",e.lcZ(2,1,i.commonService.replaceAll(t.messageChat.trim(),"\n",'<span class="break-message-line"></span>')),e.oJD)}}function VP(n,o){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"img",23),e.ALo(2,"mycdn"),e.ALo(3,"convertRawLinkOfGitHub"),e.TgZ(4,"p"),e.YNc(5,WP,3,3,"ng-container",24),e.qZA()()),2&n){const t=o.$implicit;e.Tol(t.userObj.id?"sent":"replies"),e.xp6(1),e.Q6J("src",t.userObj.id?e.lcZ(2,4,t.userObj.avatar):e.lcZ(3,6,"azota_assets/images/azotaAI.png"),e.LSH),e.xp6(4),e.Q6J("ngIf","text"==t.type)}}function XP(n,o){1&n&&(e.TgZ(0,"li",26)(1,"p"),e.O4$(),e.TgZ(2,"svg",27)(3,"circle",28),e._UZ(4,"animate",29)(5,"animate",30),e.qZA(),e.TgZ(6,"circle",31),e._UZ(7,"animate",32)(8,"animate",33),e.qZA(),e.TgZ(9,"circle",34),e._UZ(10,"animate",29)(11,"animate",30),e.qZA()()()())}let tj=(()=>{class n extends W.Q{constructor(t,i,a){super(),this.aiService=t,this.messageService=i,this.userService=a,this.questList=[],this.close=new e.vpe,this.createQuestion=new e.vpe,this.promptCreateExam=new p.NI("",[p.kI.required,Ai._.noWhiteSpace]),this.lastUserMessageId=0,this.loadingMessageChatAI=!1,this.listChatContentData=[]}sendDataCreateQuestion(){this.initStatusObj(),this.loadingMessageChatAI=!0;let t={text:this.promptCreateExam.value??""};this.pushMessageToListChat(!1,"text",this.promptCreateExam.value??""),this.processAnalysisCommand(t).subscribe(i=>{if(1===i.success)this.createQuestion.emit(i.data?.objs??[]),this.successStatusObj();else{this.loadingMessageChatAI=!1;let a=this.commonService.myTranslateInstant(i.message);this.pushMessageToListChat(!0,"text",a),this.errorStatusObj(i.message)}})}analysisCommand(t){const i=/-(\w+)\s+\[([^\]]+)\]|-(\w+)\s+\{([^}]*)\}|-(\w+)\s+([^-\s]+)/g,a={};let s;for(;null!==(s=i.exec(t));){const r=s[1]||s[3]||s[5],l=s[2]||s[4]||s[6];if(l.startsWith("{")&&l.endsWith("}")){const c=l.slice(1,-1).split(","),d={};c.forEach(f=>{const[y,O]=f.split(":").map(N=>N.trim());d[y]=O}),a[r]=d}else a[r]=l}return a}getCommandByText(t){return new bi.y(i=>{this.saveMessageChatApi(t.text??"",!1).pipe((0,jd.g)(100)).subscribe(a=>{this.promptCreateExam.setValue(""),this.lastUserMessageId=a,this.aiService.apiAiCmdPost(t).subscribe(s=>{if(1===s.success)i.next(s);else{this.loadingMessageChatAI=!1;let r=this.commonService.myTranslateInstant(s.message);this.pushMessageToListChat(!0,"text",r),this.errorStatusObj(s.message),i.error()}})})})}saveMessageChatApi(t,i){return new bi.y(a=>{this.messageService.chatApiMessagesPost({content:t,parentId:i?this.lastUserMessageId:void 0,conversationId:0,type:1}).subscribe(l=>{l?a.next(l.id):(a.next(0),this.showErrorSnack("lang_cms_error_lost_connect_to_server"))})})}processAnalysisCommand(t){return new bi.y(i=>{this.getCommandByText(t).pipe((0,jd.g)(200)).subscribe(a=>{if(1===a.success)this.saveMessageChatApi(a.data?.text??"",!0).pipe((0,jd.g)(100)).subscribe(()=>{const s=a.data?.text??"",r=s.trimStart().split(" ")[0],l=this.analysisCommand(s);switch(r){case"create_test_by_purpose":this.createQuestionByGenerateExam(l).subscribe(d=>{i.next(d)});break;case"create_test_by_knowledge":this.createQuestionByKnowledge(l).subscribe(d=>{i.next(d)});break;default:i.next({success:0,message:"lang_testbank_please_enter_the_purpose_of_creating_the_exam_in_more_detail",version:"v1.0",detailMessage:"",code:400})}});else{this.loadingMessageChatAI=!1;let s=this.commonService.myTranslateInstant(a.message);this.pushMessageToListChat(!0,"text",s),this.errorStatusObj(a.message)}})})}createQuestionByKnowledge(t){return new bi.y(i=>{const s=t.knowledge?.match(/\[(.*?)\]: (\d+)/g);let r=[];s?s.forEach(c=>{r.push(c)}):r.push(t.knowledge??"");const l=new U.Q(1);r?.forEach(c=>{l.addTask(this,this.callApiKnowledge,[c,t])}),l.start().then(c=>{let d=[];c.datas.forEach(y=>{d=d?.concat(y)}),i.next({success:1,message:"",version:"v1.0",detailMessage:"",code:200,data:{objs:d}}),i.complete()})})}callApiKnowledge(t,i){return this.loadingMessageChatAI=!0,new Promise(a=>{let s=parseInt(t.split(":")[1])??5,r=t.split(":")[0]??"";const c=/\((.*?)\)/.exec(r.trim()??"All"),d=c?c[1]:"";let f={schoolLevelId:i.class?Number(i.class):void 0,schoolSubjectName:i.subject??"",promptText:r.trim()??"All",numberOfQuestion:s,difficulty:d};this.aiService.apiAiListKnowledgeQuestionsPost(f).subscribe(y=>{this.loadingMessageChatAI=!1;let O=this.commonService.myTranslateInstant(y.message);1==y.success&&(O+=this.questList.length>0?`\n T\xf4i \u0111\xe3 th\xeam ${y.data?.objs.length} c\xe2u h\u1ecfi t\u1eeb c\xe2u ${this.questList.filter(N=>!N.quest.isGroup).length+1} \u0111\u1ebfn c\xe2u s\u1ed1 ${this.questList.filter(N=>!N.quest.isGroup).length+(y.data?.objs.length??0)} v\xe0o \u0111\u1ec1 c\u1ee7a b\u1ea1n`:`\n T\xf4i \u0111\xe3 th\xeam ${y.data?.objs.length} c\xe2u h\u1ecfi v\xe0o \u0111\u1ec1 c\u1ee7a b\u1ea1n`),this.pushMessageToListChat(!0,"text",O),a(1==y.success?y.data?.objs??[]:[])})})}createQuestionByGenerateExam(t){let i=t.type?t.type.toLowerCase():"";return t.type&&t.type.includes(",")&&(i=t.type.split(",")[0]?.toLocaleLowerCase()??""),new bi.y(a=>{const s={schoolLevelId:t.class?Number(t.class):void 0,schoolSubjectName:t.subject??"",numberOfQuestion:5,type:i};this.subscriptions.add(this.aiService.apiAiListPurposeQuestionsPost(s).subscribe(r=>{if(1===r.success)a.next(r);else{this.loadingMessageChatAI=!1;let l=this.commonService.myTranslateInstant(r.message);this.pushMessageToListChat(!0,"text",l),this.errorStatusObj(r.message),a.error()}}))})}closeDialog(){this.close.emit(!0)}pushMessageToListChat(t,i,a,s){let r=this.createMessageContent(t,i,a,s);return this.listChatContentData.push(r),this.scrollToPosition(),r}createMessageContent(t,i,a,s){return{userObj:t?this.getAIUserObj():this.userService.getUserObj(),messageChat:a??"",fileData:s,type:i}}getAIUserObj(){return{id:0,password:"",amount:0,gender:0,fullName:"AzotaAI",avatar:"azota_assets/images/azotaAI.png"}}initChatAI(){let t=(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_1")??"Ch\xe0o ")+this.userService.getUserObj().fullName+(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_2")??", t\xf4i c\xf3 th\u1ec3 gi\xfap g\xec cho b\u1ea1n?");this.pushMessageToListChat(!0,"text",t)}scrollToPosition(t){setTimeout(()=>{try{this.perfectScroll&&this.perfectScroll.scrollTo({top:t??this.perfectScroll.viewport.contentHeight})}catch{}})}ngOnInit(){this.initChatAI()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yi.p),e.Y36(YP.ez),e.Y36(Qe.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-ai-chatbox"]],viewQuery:function(t,i){if(1&t&&e.Gf(GP,5),2&t){let a;e.iGM(a=e.CRH())&&(i.perfectScroll=a.first)}},inputs:{questList:"questList"},outputs:{close:"close",createQuestion:"createQuestion"},features:[e.qOj],decls:29,vars:15,consts:[[1,"box-dialog"],[1,"dialog","box"],[1,"dialog-header","flex","items-center","p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"dialog-title"],[1,"w-6","h-5","inline-block","mr-1"],["src","https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/images/azotaAI.png",1,"w-full","h-full","inline-block"],["azt-track-service","ai-chatbox-65UAr2QT0",1,"dialog-close","ml-auto",3,"click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"p-0"],["pointerEventsMethod","scrollbar",1,"messages",2,"height","250px","padding-bottom","10px","margin-right","5px",3,"visibility"],["perfectScroll",""],[1,"p-3"],[1,"mr-2"],[3,"class",4,"ngFor","ngForOf"],["class","replies","style","margin-left: auto; margin-right: auto",4,"ngIf"],[1,"dialog-body","p-3"],[1,"border","border-slate-200","dark:border-darkmode-600","p-2","rounded-md"],["value","",1,"chat__box__input","form-control","dark:bg-darkmode-600","px-1","h-16","resize-none","border-transparent","shadow-none","focus:border-transparent","focus:ring-0",3,"formControl","autofocus","placeholder","enterKey"],[1,"mt-2","flex","items-center"],[1,"upload-file","relative"],[1,"ml-auto"],["azt-track-service","ai-chatbox-8tp_7gRUQe",1,"btn","btn-sm","btn-primary","w-30",3,"disabled","click"],["alt","",3,"src"],[4,"ngIf"],[3,"innerHtml"],[1,"replies",2,"margin-left","auto","margin-right","auto"],["width","25","viewBox","0 0 120 30","xmlns","http://www.w3.org/2000/svg","fill","currentColor",1,"w-4","h-4"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"img",5),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.closeDialog()}),e.TgZ(9,"span",7),e._UZ(10,"lucide-icon",8),e.qZA()()(),e.TgZ(11,"div",9)(12,"ng-scrollbar",10,11)(14,"div",12)(15,"ul",13),e.YNc(16,VP,6,8,"li",14),e.YNc(17,XP,12,0,"li",15),e.qZA()()()(),e.TgZ(18,"div",16)(19,"div",17)(20,"textarea",18),e.NdJ("enterKey",function(){return i.sendDataCreateQuestion()}),e.ALo(21,"mytranslate"),e._uU(22,"\t\t\t\t"),e.qZA(),e.TgZ(23,"div",19),e._UZ(24,"div",20),e.TgZ(25,"div",21)(26,"button",22),e.NdJ("click",function(){return i.sendDataCreateQuestion()}),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()()()()),2&t&&(e.xp6(6),e.hij(" ",e.lcZ(7,9,"lang_testbank_create_a_question_with_azota_ai")," "),e.xp6(6),e.Q6J("visibility","hover"),e.xp6(4),e.Q6J("ngForOf",i.listChatContentData),e.xp6(1),e.Q6J("ngIf",i.loadingMessageChatAI),e.xp6(3),e.s9C("placeholder",e.lcZ(21,11,"lang_testbank_enter_the_purpose_of_the_test_azota_ai_will_help_you_create_the_test_you_want")),e.Q6J("formControl",i.promptCreateExam)("autofocus",!0),e.xp6(6),e.Q6J("disabled",i.statusObj.loading||i.loadingMessageChatAI||i.promptCreateExam.errors),e.xp6(1),e.hij(" ",e.lcZ(28,13,"lang_cms_create_question_title")," "))},dependencies:[M.sg,M.O5,p.Fj,p.JJ,p.oH,x.KC,h.Nh5,Wr,re.bT,re.GT,re.C7],styles:[".dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:100%;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.shadow-none[_ngcontent-%COMP%]{box-shadow:none}.border-transparent[_ngcontent-%COMP%]{border-color:transparent}.focus\\:ring-0[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 rgba(0, 0, 0, 0))}.focus\\:border-transparent[_ngcontent-%COMP%]:focus{border-color:transparent;outline:none;box-shadow:none}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;clear:both;float:left;margin:10px 15px 5px;width:calc(100% - 15px);font-size:.9em}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:20px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:6px 8px 0 0}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#f5f5f5;word-break:break-word;--tw-text-opacity: 1;color:rgb(var(--color-slate-700)/var(--tw-text-opacity))}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){float:right;margin:6px 0 0 8px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#1e3fb0;color:#fff;float:right}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){width:22px;border-radius:50%;float:left}img.file-img[_ngcontent-%COMP%]{width:35px!important;margin-right:10px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;padding:10px 15px;border-radius:20px;max-width:calc(100% - 130px);line-height:1.5}@media (max-width: 640px){.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:230px}}.cursor[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;align-content:center;width:10px;height:15px;margin-left:3px;background-color:rgb(var(--color-slate-500)/var(--tw-text-opacity));animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}"]}),n})(),nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[M.JJ],imports:[T.Bz,M.ez,k.j,x.kb,g.Z_,b8,p.u5,p.UX,j.Is,E.Z,m.xC,b.QG,_.SD,w.W,Sc,A.d,h.qyJ.pick(h.ciZ),u.vI]}),n})();e.B6R(ni,function(){return[M.mk,M.sg,M.O5,M.PC,vn.Hw,en.VK,en.p6,Zt.gM,p.Fj,p.wV,p.JJ,p.qQ,p.On,Vi.Y,gL.C,OL,hP,gP,Np.X,Mm,fP,QP,UP,$P,tj,Ue.Z,h.Nh5,Pr,bn,hL]},function(){return[M.Ov,re.bT,re.QA,re.Ev,re.AS,re.C7,re.vw]})},56291:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>QuestHeaderComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65879),src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39621),src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(10548),src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8415),angular_shepherd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18758),src_app_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31518),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(96814),_angular_material_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23680),_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22557),_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30617),_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77988),_angular_material_select__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(98525),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(92596),_angular_forms__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(56223),_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61811),_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11964);const _c0=["markInput"],_c1=["inpAudioUpload"];function QuestHeaderComponent_div_3_common_tooltip_9_Template(ce,q){1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"common-tooltip")(1,"em")(2,"mark"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3,"Ctr + Enter"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,1,"lang_auto_de_tu_dong_nhap_diem_cho_cac_cau_con_lai_trong_nhom_bang_dot")," "))}const _c2=function(ce){return{hide:ce}};function QuestHeaderComponent_div_3_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",17)(1,"div",18)(2,"span",19),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.showMarkInput())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(4,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"div",20)(7,"input",21,22),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("keyup",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.checkKeyup(p))})("focus",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.enableTooltip())})("focusout",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.disableTooltip())})("ngModelChange",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.q.point=p)}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_div_3_common_tooltip_9_Template,6,3,"common-tooltip",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(10,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(12,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let M;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(13,_c2,S.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",S.q.point&&+S.q.point>0?S.q.point+" "+_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(4,7,"lang_auto_diem"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,9,"lang_auto_nhap_diem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(15,_c2,!S.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("size",(null==S.q.point||null==(M=S.q.point.toString())?null:M.length)||2)("ngModel",S.q.point),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.isTooltipPoint),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(12,11,"lang_auto_diem")," ")}}function QuestHeaderComponent_div_4_div_1_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S),_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(4);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.click())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(1,"svg",29),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(2,"path",30),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3," Audio "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_2_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",39),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.removeAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"[X]"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_3_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",40),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(S.audioName)}}function QuestHeaderComponent_div_4_div_2_span_4_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(S.audioName)}}function QuestHeaderComponent_div_4_div_2_mat_icon_5_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",41),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.loadAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cached"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&ce&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"lang_auto_tai_lai_audio"))}function QuestHeaderComponent_div_4_div_2_mat_icon_6_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",42),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.stopAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"pause "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_mat_icon_7_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",43),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.playAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1," play_circle"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_i_8_Template(ce,q){1&ce&&_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(0,"i",44)}function QuestHeaderComponent_div_4_div_2_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",31)(1,"span",32),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_span_2_Template,2,0,"span",33),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_4_div_2_span_3_Template,2,1,"span",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_div_2_span_4_Template,2,1,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_4_div_2_mat_icon_5_Template,3,3,"mat-icon",35),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_4_div_2_mat_icon_6_Template,2,0,"mat-icon",36),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(7,QuestHeaderComponent_div_4_div_2_mat_icon_7_Template,2,0,"mat-icon",37),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(8,QuestHeaderComponent_div_4_div_2_i_8_Template,1,0,"i",38),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let M;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matTooltip",S.audioName),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(M=S.q.quest.parts[0].text.trim())&&M.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.isLoadFalseAudio&&S.isLoadedAudio&&S.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.isLoadFalseAudio&&S.isLoadedAudio&&!S.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.isLoadedAudio)}}function QuestHeaderComponent_div_4_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(1,QuestHeaderComponent_div_4_div_1_Template,4,0,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_Template,9,8,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"input",26,27),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("input",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.selectFileAudio(p))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let M;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(S.isHasAudio||null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(M=S.q.quest.parts[0].text.trim())&&M.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.isHasAudio)}}function QuestHeaderComponent_div_5_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-select",46)(3,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(9,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(11,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngModel",S.q.type)("disabled",!0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,8,"lang_testbank_create_exam_width_file_docx_essay")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,10,"lang_auto_trac_nghiem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(11,12,"lang_auto_dien_tu")," ")}}function QuestHeaderComponent_div_6_button_6_Template(ce,q){1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",50)(1,"mat-icon",51),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()())}function QuestHeaderComponent_div_6_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-chip-listbox")(3,"mat-chip",48),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("removed",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.setTag())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_button_6_Template,3,0,"button",49),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(),M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);let p;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",M),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,3,"azt_lang_tag_"+S.q.tag[0].code)," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(p=S.q.quest.parts[0].text.trim())&&p.startsWith("[@")))}}function QuestHeaderComponent_button_9_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",52),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.chooseQuest(p.q))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(2,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(2,1,"lang_auto_chon")," "))}function QuestHeaderComponent_button_10_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",53),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",55)(4,"path",56),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&ce){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",S)}}function QuestHeaderComponent_button_11_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",57),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.randomQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(4,"path",59)(5,"path",60)(6,"path",61)(7,"path",62)(8,"path",63),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&ce&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"azt_lang_editor_random_again"))}function QuestHeaderComponent_button_12_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",64)(1,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",65)(4,"circle",66)(5,"circle",67),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&ce){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(14);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",S)}}function QuestHeaderComponent_li_17_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",68),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.setFixAns())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"line",70)(4,"path",71),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(9,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}if(2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.AsE("",S.q.quest.isFixAns?_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,2,"lang_auto_bo_co_dinh"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,4,"lang_auto_co_dinh")," ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(9,6,"lang_auto_dap_an"),"")}}function QuestHeaderComponent_li_18_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",72),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.copyContent(p))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"rect",74)(4,"path",75),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,1,"lang_auto_copy_noi_dung")," "))}function QuestHeaderComponent_li_19_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",76),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.cut(p))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",77)(4,"circle",78)(5,"line",79)(6,"line",80)(7,"line",81),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(10,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(10,1,"lang_auto_cat")," "))}function QuestHeaderComponent_li_20_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",82),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(p){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(j.del(p))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",83)(4,"path",84)(5,"path",85),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,1,"lang_auto_xoa")," "))}function QuestHeaderComponent_li_21_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",86),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",87)(4,"path",88)(5,"path",89),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&ce){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",S),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,2,"lang_auto_gan_nhan")," ")}}function QuestHeaderComponent_div_24_li_2_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",91),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){const j=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S).$implicit,T=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(T.setTag(j))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&ce){const S=q.$implicit,M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let p;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",null!==(p=S[M.commonService.getCurrentLang()+"Name"])&&void 0!==p?p:S.enName," ")}}function QuestHeaderComponent_div_24_li_3_Template(ce,q){1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(1,"hr",92),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA())}function QuestHeaderComponent_div_24_li_4_Template(ce,q){if(1&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"button",93),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(S);const p=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let j;return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(p.applyTagAll(null!==(j=p.q.tag)&&void 0!==j?j:[]))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(3,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("disabled",!S.q.tag),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(3,2,"lang_auto_ap_dung_cho_cac_cau_con_lai")," ")}}function QuestHeaderComponent_div_24_Template(ce,q){if(1&ce&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",12)(1,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_24_li_2_Template,3,1,"li",90),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_24_li_3_Template,2,0,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_24_li_4_Template,4,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&ce){const S=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngForOf",S.questionTags),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit)}}let QuestHeaderComponent=(()=>{class QuestHeaderComponent extends src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(ce,q,S){super(),this.cdnService=ce,this.shepherdService=q,this.browserStorageService=S,this.index=0,this.notOnlyQuestEdit=!0,this.showType=!0,this.similar=!1,this.questionTags=[],this.onLabelClick=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onHotKeyPointSync=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onApplyAllTag=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onError=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCopy=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCut=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChooseSimilar=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onDel=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChangeQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onRandomQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onExtraInfo=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.isHasAudio=!1,this.isLoadedAudio=!1,this.isLoadFalseAudio=!1,this.audioName="",this.audioMime="",this.audioUrl="",this.isTooltipPoint=!1,this.isPlayingAudio=!1,this.showPointInput=!1,this.isMobile=!1,this.q={label:"",quest:{label:0,answers:[],parts:[]},answers:[],renderedStr:""}}chooseQuest(ce){this.onChooseSimilar.emit(ce)}ngAfterViewInit(){setTimeout(()=>{const ce=document.getElementById("azt_tour_1"),q=[{attachTo:{element:"#azt_tour_1",on:"bottom"},buttons:[{action(){return this.cancel()},classes:"btn btn-primary w-20",text:this.commonService.myTranslateInstant("lang_buttom_close")}],classes:"box",id:"intro",title:this.commonService.myTranslateInstant("lang_core_change_to_the_same_question"),text:this.commonService.myTranslateInstant("lang_core_click_here_to_select_a_similar_question_from_the_general_bank_of_azota")}],S=this.browserStorageService.getSimpleStorage("show_tour_quest_header");0===this.index&&!S&&!this.shepherdService.isActive&&ce&&(this.shepherdService.defaultStepOptions={classes:"box",scrollTo:!0,cancelIcon:{enabled:!1}},this.shepherdService.requiredElements=[{selector:"#azt_tour_1"}],this.shepherdService.modal=!0,this.shepherdService.addSteps(q),this.shepherdService.start(),this.browserStorageService.saveSimpleStorage("show_tour_quest_header","1"))},500)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable();let ce=this.commonService.willDeleteParseJson(this.q.attachments||"[]");this.q.audio?(this.isHasAudio=!0,this.audioName=this.q.audio.name,this.isLoadedAudio=!0,this.isLoadFalseAudio=!1):ce.forEach(q=>{(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(q.mimes||"")&&(this.isHasAudio=!0,this.audioUrl=q.url||"",this.audioName=q.name||"",this.audioMime=q.mimes||""),this.audioUrl&&this.loadAudio()})}loadAudio(){this.isLoadedAudio=!1,fetch(this.cdnService.getRawCdnLink(this.audioUrl)).then(ce=>{if(!ce.ok)throw new Error("Something went wrong");ce.blob().then(q=>{this.q.audio=new File([q],this.audioName,{type:this.audioMime}),this.isLoadedAudio=!0,this.isLoadFalseAudio=!1})}).catch(()=>{this.isLoadedAudio=!0,this.isLoadFalseAudio=!0;let ce=this.commonService.myTranslateInstant("lang_auto_khong_the_tai_tep_audio_cho"),q=this.commonService.myTranslateInstant("lang_auto_vui_long_thu_lai");this.showErrorSnack(`${ce} ${this.q.label} ${q}`)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}changeQuest(){this.shepherdService.isActive&&this.shepherdService.cancel(),this.onChangeQuest.emit(this.q)}randomQuest(){this.onRandomQuest.emit()}removeAudio(){this.q.attachments=void 0,this.stopAudio(),this.q.audio=void 0,this.isHasAudio=!1,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio}),this.inpAudioUpload&&(this.inpAudioUpload.nativeElement.value=null)}selectFileAudio(ce){(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(ce.target.files[0].type)?(this.stopAudio(),this.q.audio=ce.target.files[0],this.audioName=this.q.audio?.name??"",this.isLoadedAudio=!0,this.isLoadFalseAudio=!1,this.isHasAudio=!0,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio})):this.showErrorSnack("lang_auto_file_dinh_kem_phai_la_mot_audio")}showMarkInput(){this.showPointInput=!0,setTimeout(()=>{this.markInput?.nativeElement.focus()},50)}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.showPointInput&&this.onExtraInfo.emit({q:this.q,type:"point",data:this.q.point}),this.isTooltipPoint=!1,this.showPointInput=!1}setFixAns(){this.q.quest.isFixAns=!this.q.quest.isFixAns,this.onExtraInfo.emit({q:this.q,type:"fix",data:this.q.quest.isFixAns})}setTag(ce){this.q.tag=ce?[ce]:[],this.onExtraInfo.emit({q:this.q,type:"tag",data:this.q.tag})}applyTagAll(ce){this.onApplyAllTag.emit(ce)}copyContent(ce){this.onCopy.emit(this.q)}cut(ce){this.onCut.emit(this.q)}del(ce){this.onDel.emit(this.q)}getTagName(ce){return ce.toUpperCase().split(" ").map(q=>q[0]??"").join("")}checkKeyup(ev){if("Enter"==ev.code){let v=this.markInput?.nativeElement.value;if(!/^[\d\.\+\-\*\/\s\(\)]+$/.test(v)){let ce=this.commonService.myTranslateInstant("lang_auto_du_lieu_diem_ban_nhap_khong_hop_le_dot");return void this.onError.emit(ce)}if(v=eval(v),this.q.point=Math.round(100*v)/100,ev.ctrlKey)this.isTooltipPoint=!1,this.showPointInput=!1,this.onHotKeyPointSync.emit(this.q.point);else{window.focus();let ce=document.activeElement;ce&&ce.blur()}}}isPlayAudio(){return!(!window.playMedia||window.playMedia.id!==this.q?.quest.label||!window.playMedia.played)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0,this.isPlayingAudio=!1)}playAudio(){window.playMedia&&window.playMedia.pause(),this.q.audio&&(window.playMedia=new Audio(URL.createObjectURL(this.q.audio)),window.playMedia.id=this.q?.quest.label,window.playMedia.play(),this.isPlayingAudio=!0)}labelClick(){this.onLabelClick.emit(this.q?.quest.parts)}}return QuestHeaderComponent.\u0275fac=function ce(q){return new(q||QuestHeaderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__.U),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(angular_shepherd__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__.z))},QuestHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Xpm({type:QuestHeaderComponent,selectors:[["app-quest-header"]],viewQuery:function ce(q,S){if(1&q&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c1,5)),2&q){let M;_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(S.markInput=M.first),_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(S.inpAudioUpload=M.first)}},inputs:{q:"q",index:"index",notOnlyQuestEdit:"notOnlyQuestEdit",showType:"showType",similar:"similar",questionTags:"questionTags"},outputs:{onLabelClick:"onLabelClick",onHotKeyPointSync:"onHotKeyPointSync",onApplyAllTag:"onApplyAllTag",onError:"onError",onCopy:"onCopy",onCut:"onCut",onChooseSimilar:"onChooseSimilar",onDel:"onDel",onChangeQuest:"onChangeQuest",onRandomQuest:"onRandomQuest",onExtraInfo:"onExtraInfo"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_6__.qOj],decls:25,vars:15,consts:[[1,"box-service-question"],["azt-track-service","quest-header-7xvJmr2fh",1,"box-service-question-name",3,"click"],["class","box-service-inp-point",4,"ngIf"],["class","box-service-attach-files cursor-pointer",4,"ngIf"],["class","box-service-type",4,"ngIf"],[1,"box-service-type",2,"padding-right","0px","padding-left","0px"],[1,"first-text","ml-2","sm:ml-0"],["azt-track-service","quest-header-QjB4b6i1y","class","btn btn-primary w-20","style","vertical-align: middle;",3,"click",4,"ngIf"],["class","btn btn-transparent",3,"matMenuTriggerFor","matTooltip",4,"ngIf"],["azt-track-service","quest-header-HExiRUm87","style","width: 30px","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["style","width: 30px","class","btn btn-transparent",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngIf"],["tags","matMenu"],["class","dropdown-menu show relative w-56",4,"ngIf"],[1,"box-service-inp-point"],[1,"first-text","cursor-pointer"],["azt-track-service","quest-header-1hL1VYrnNh",3,"ngClass","click"],[1,"inp-point",3,"ngClass"],[3,"size","ngModel","keyup","focus","focusout","ngModelChange"],["markInput",""],[1,"box-service-attach-files","cursor-pointer"],["azt-track-service","quest-header-i7a1qGxHBu","class","first-text","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","first-text",4,"ngIf"],["type","file","accept","audio/ogg;audio/mpeg;audio/wav",1,"hide",3,"input"],["inpAudioUpload",""],["azt-track-service","quest-header-i7a1qGxHBu",1,"first-text",2,"white-space","nowrap",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"],[1,"first-text"],[1,"name-audio",3,"matTooltip"],["azt-track-service","quest-header-bBZd9Ohvof","class","delete",3,"click",4,"ngIf"],["style","\n            color: #9e9e9e;\n            text-decoration: line-through;",4,"ngIf"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click",4,"ngIf"],["azt-track-service","quest-header-SjZKht1L9l",3,"click",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["azt-track-service","quest-header-bBZd9Ohvof",1,"delete",3,"click"],[2,"color","#9e9e9e","text-decoration","line-through"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click"],["azt-track-service","quest-header-SjZKht1L9l",3,"click"],[1,"fa","fa-spinner","fa-spin"],[1,"box-service-type"],[3,"ngModel","disabled"],[3,"value"],[1,"tag-chip",3,"matMenuTriggerFor","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"font-size","15px"],["azt-track-service","quest-header-QjB4b6i1y",1,"btn","btn-primary","w-20",2,"vertical-align","middle",3,"click"],[1,"btn","btn-transparent",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],["d","M7 7h.01"],["azt-track-service","quest-header-HExiRUm87",1,"btn","btn-transparent",2,"width","30px",3,"matTooltip","click"],[1,"w-5","h-5","inline-block"],["d","m17 2 4 4-4 4"],["d","M3 11v-1a4 4 0 0 1 4-4h14"],["d","m7 22-4-4 4-4"],["d","M21 13v1a4 4 0 0 1-4 4H3"],["d","M11 10h1v4"],[1,"btn","btn-transparent",2,"width","30px",3,"matMenuTriggerFor"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["azt-track-service","quest-header-NheQ3Js3Ya",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-5","lucide","mr-2"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["azt-track-service","quest-header-gKmo4Y1J7u",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","quest-header-Y1KbHn_mie",1,"dropdown-item",3,"click"],["cx","6","cy","6","r","3"],["cx","6","cy","18","r","3"],["x1","20","y1","4","x2","8.12","y2","15.88"],["x1","14.47","y1","14.48","x2","20","y2","20"],["x1","8.12","y1","8.12","x2","12","y2","12"],["azt-track-service","quest-header-84pgUW5VoW",1,"dropdown-item",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["mat-menu-item","",1,"dropdown-item",3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[4,"ngFor","ngForOf"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","quest-header-RiQa-w8Jwo",1,"dropdown-item","w-full",3,"disabled","click"]],template:function ce(q,S){if(1&q&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){return S.labelClick()}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_3_Template,13,17,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_Template,5,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_5_Template,12,14,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_Template,7,5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(7,"div",5)(8,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_button_9_Template,3,3,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(10,QuestHeaderComponent_button_10_Template,5,4,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(11,QuestHeaderComponent_button_11_Template,9,3,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(12,QuestHeaderComponent_button_12_Template,6,1,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(13,"mat-menu",null,11)(15,"div",12)(16,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(17,QuestHeaderComponent_li_17_Template,10,8,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(18,QuestHeaderComponent_li_18_Template,8,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(19,QuestHeaderComponent_li_19_Template,11,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(20,QuestHeaderComponent_li_20_Template,9,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(21,QuestHeaderComponent_li_21_Template,9,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(22,"mat-menu",null,15),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(24,QuestHeaderComponent_div_24_Template,5,3,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&q){let M,p,j;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(S.q.label),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit&&!S.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.isMobile&&!S.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.showType),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.q.tag&&S.q.tag.length>0&&!S.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(S.q.tag&&0!=S.q.tag.length||S.similar)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.similar&&S.q.changeable),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!S.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",1===S.q.type&&!(null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(M=S.q.quest.parts[0].text.trim())&&M.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",S.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(p=S.q.quest.parts[0].text.trim())&&p.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=S.q.quest.parts[0]&&null!=S.q.quest.parts[0].text&&null!=(j=S.q.quest.parts[0].text.trim())&&j.startsWith("[@")))}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_8__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_8__.O5,_angular_material_core__WEBPACK_IMPORTED_MODULE_9__.ey,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.HS,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.z2,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.qH,_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__.Hw,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.VK,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.OP,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.p6,_angular_material_select__WEBPACK_IMPORTED_MODULE_13__.gD,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__.gM,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.On,_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__.S,_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__.bT],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.box-service-pin-ans[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}.delete[_ngcontent-%COMP%]{color:red}  .mat-select-arrow-wrapper{margin-left:5px}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.name-audio[_ngcontent-%COMP%]{max-width:100px;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1}.name-audio[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding-right:5px}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}"]}),QuestHeaderComponent})()},61811:(ce,q,S)=>{"use strict";S.d(q,{S:()=>g});var M=S(39621),p=S(65879);const j=function(_,h){return{left:_,bottom:h}},T=function(){return{}},u=["*"];let g=(()=>{class _ extends M.Q{constructor(){super(...arguments),this.isConfig=!0,this.bottom=-60,this.left=-5}}return _.\u0275fac=function(){let h;return function(b){return(h||(h=p.n5z(_)))(b||_)}}(),_.\u0275cmp=p.Xpm({type:_,selectors:[["common-tooltip"]],inputs:{isConfig:"isConfig",bottom:"bottom",left:"left"},features:[p.qOj],ngContentSelectors:u,decls:3,vars:6,consts:[[1,"qv_tooltip"],[1,"content_tooltip"]],template:function(m,b){1&m&&(p.F$t(),p.TgZ(0,"span",0)(1,"span",1),p.Hsn(2),p.qZA()()),2&m&&p.Akn(b.isConfig?p.WLB(2,j,b.left+"px",b.bottom+"px"):p.DdM(5,T))},styles:['.qv_tooltip[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px;position:absolute;z-index:999;width:400px;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #faebd7}']}),_})()},87482:(ce,q,S)=>{var M=S(39698),p=S(78955);function T(_){return null==_}function g(_){(_=function u(_){var h={};for(var m in _)h[m]=_[m];return h}(_||{})).whiteList=_.whiteList||M.whiteList,_.onAttr=_.onAttr||M.onAttr,_.onIgnoreAttr=_.onIgnoreAttr||M.onIgnoreAttr,_.safeAttrValue=_.safeAttrValue||M.safeAttrValue,this.options=_}S(53034),g.prototype.process=function(_){if(!(_=(_=_||"").toString()))return"";var m=this.options,b=m.whiteList,x=m.onAttr,w=m.onIgnoreAttr,E=m.safeAttrValue;return p(_,function(A,C,P,D,Q){var U=b[P],R=!1;if(!0===U?R=U:"function"==typeof U?R=U(D):U instanceof RegExp&&(R=U.test(D)),!0!==R&&(R=!1),D=E(P,D)){var H,J={position:C,sourcePosition:A,source:Q,isWhite:R};if(R)return T(H=x(P,D,J))?P+":"+D:H;if(!T(H=w(P,D,J)))return H}})},ce.exports=g},39698:(ce,q)=>{function S(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var j=/javascript\s*\:/gim;q.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},q.getDefaultWhiteList=S,q.onAttr=function M(u,g,_){},q.onIgnoreAttr=function p(u,g,_){},q.safeAttrValue=function T(u,g){return j.test(g)?"":g}},51474:(ce,q,S)=>{var M=S(39698),p=S(87482);for(var T in(q=ce.exports=function j(u,g){return new p(g).process(u)}).FilterCSS=p,M)q[T]=M[T];typeof window<"u"&&(window.filterCSS=ce.exports)},78955:(ce,q,S)=>{var M=S(53034);ce.exports=function p(j,T){";"!==(j=M.trimRight(j))[j.length-1]&&(j+=";");var u=j.length,g=!1,_=0,h=0,m="";function b(){if(!g){var E=M.trim(j.slice(_,h)),k=E.indexOf(":");if(-1!==k){var A=M.trim(E.slice(0,k)),C=M.trim(E.slice(k+1));if(A){var P=T(_,m.length,A,C,E);P&&(m+=P+"; ")}}}_=h+1}for(;h<u;h++){var x=j[h];if("/"===x&&"*"===j[h+1]){var w=j.indexOf("*/",h+2);if(-1===w)break;_=(h=w+1)+1,g=!1}else"("===x?g=!0:")"===x?g=!1:";"===x?g||b():"\n"===x&&b()}return M.trim(m)}},53034:ce=>{ce.exports={indexOf:function(q,S){var M,p;if(Array.prototype.indexOf)return q.indexOf(S);for(M=0,p=q.length;M<p;M++)if(q[M]===S)return M;return-1},forEach:function(q,S,M){var p,j;if(Array.prototype.forEach)return q.forEach(S,M);for(p=0,j=q.length;p<j;p++)S.call(M,q[p],p,q)},trim:function(q){return String.prototype.trim?q.trim():q.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(q){return String.prototype.trimRight?q.trimRight():q.replace(/(\s*$)/g,"")}}},73021:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.FileParser=void 0;const M=S(96999),p=S(13649),j=S(21084),T=S(45962);q.FileParser=class u{constructor(){this.services=[],this.conf=""}loadConf(_){this.conf=_}init(){this.registerService(new T.WordService),this.registerService(new p.PdfService),this.registerService(new M.ImageService),this.registerService(new j.TableService)}registerService(_){_.loadConf(this.conf),this.services.push(_)}start(_){return new Promise((h,m)=>{let b=0;for(let x=0;x<this.services.length;x++)this.services[x].start(_).then(E=>{b++,E.supported?h(E):b===this.services.length&&m()})})}loadAllLibs(_){return new Promise(h=>{let m=0;const b=()=>{if(m===_.length)h(!0);else{const x=_[m];if(document.getElementById(x.name))m++,b();else{const E=document.createElement("script");E.setAttribute("src",x.link),E.setAttribute("id",x.name),E.setAttribute("async","false"),E.addEventListener("load",()=>{m++,b()},!1),document.body.appendChild(E)}}};b()})}}},22299:(ce,q,S)=>{"use strict";q.uD=void 0;const p=S(73021);Object.defineProperty(q,"uD",{enumerable:!0,get:function(){return p.FileParser}});S(17618)},17618:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DocxParser=void 0;class S{constructor(){this.arrayBuffer=null,this.numberID=0}start(p){this.wmf||(this.wmf=new WMFConverter),this.file=p}reset(){this.file=void 0,this.arrayBuffer=void 0}load(){return new Promise(p=>{if(this.file){const j=this.file.name.split(".").pop();if("docx"===j?.toLocaleLowerCase()){const T=new FileReader;T.onloadend=()=>{this.arrayBuffer=T.result,p(!0)},T.readAsArrayBuffer(this.file)}else p(!1)}else p(!1)})}toTextLines(){return new Promise((p,j)=>{this.load().then(T=>{if(T){const u=[],g=[];mammoth.convertToMarkdown({arrayBuffer:this.arrayBuffer},{styleMap:["b => ","i => ","u => "]}).then(m=>{m.value.split("\n").forEach(x=>{x.length>0&&(0===x.indexOf("\t")&&(x=x.substring(1)),x=this.convertImageString(x,g),u.push(x.replace(/\t/g,"    ").replace(/\\./g,".")))}),g.forEach(x=>{this.processImageWmf(x)}),p({str:u,maps:g})})}else j({msg:"File kh\xf4ng h\u1ed7 tr\u1ee3."})})})}processImageWmf(p){(p.link.indexOf("image/x-wmf")>=0||p.link.indexOf("image/x-emf")>=0)&&(p.link=this.wmf.toPNG(p.link))}convertImageString(p,j){for(;-1!==p.indexOf(S.IMG_MD_START);){const T="ha"+this.numberID,u=p.indexOf(S.IMG_MD_START),g=p.indexOf(")",u+1),_=p.substring(u+S.IMG_MD_START.length,g);j.push({id:T,link:_}),p=p.substring(0,u)+"[!img:"+T+"]"+p.substring(g+1,p.length),this.numberID++}return p}}q.DocxParser=S,S.IMG_MD_START="![]("},96999:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ImageService=void 0,q.ImageService=class S{constructor(){this.conf=""}toBase64(p){return new Promise((j,T)=>{const u=new FileReader;u.onload=()=>{j(u.result)},u.onerror=g=>{T(g)},u.readAsDataURL(p)})}isFileImage(p){return p&&"image"===p.type.split("/")[0]}generateIdRequired(p){let j="";for(let g=0;g<p;g++)j+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+j}loadConf(p){this.conf=p}start(p){return new Promise(j=>{this.isFileImage(p)?this.toBase64(p).then(T=>{const u="ih"+this.generateIdRequired(3),g={maps:[],str:[]};g.maps.push({id:u,link:T}),g.str.push("[!img:"+u+"]"),j({type:"image",supported:!0,data:g})}).catch(()=>{j({type:"image",supported:!1,data:{str:[],maps:[]}})}):j({type:"image",supported:!1,data:{str:[],maps:[]}})})}}},13649:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PdfService=void 0,q.PdfService=class S{constructor(){this.conf=""}isPdfDocument(p){return/^(?:application\/pdf)$/i.test(p.type)}loadConf(p){this.conf=p}start(p){return new Promise(j=>{this.isPdfDocument(p)?j({type:"pdf",supported:!0,data:{str:[],maps:[]}}):j({type:"pdf",supported:!1,data:{str:[],maps:[]}})})}cropQuestionContent(p,j){const T=[];let u=Number.MAX_VALUE;return p.answers.forEach(_=>{T.push({label:this.mergeContentCanvas(_.remove,j),content:this.mergeContentsCanvas(_.positions,j),conf:_}),u>_.positions[0].top&&(u=_.positions[0].top)}),p.positions[p.positions.length-1].heigh=u-p.positions[p.positions.length-1].top,{label:this.mergeContentCanvas(p.remove,j),content:this.mergeContentsCanvas(p.positions,j),ans:T,conf:p}}mergeContentsCanvas(p,j){let T=0,u=0,g=[];p.forEach(b=>{const x=this.mergeContentCanvas(b,j);T=x.width,u+=x.height,g.push(x)});const _=document.createElement("canvas");_.width=T,_.height=u;const h=_.getContext("2d");let m=0;return g.forEach(b=>{h?.drawImage(b,0,m,b.width,b.height,0,0,b.width,b.height),m+=b.height}),_}mergeContentCanvas(p,j){const T=j[p.pageIndex].canvas,u=document.createElement("canvas");u.width=p.width,u.height=p.heigh;const g=u.getContext("2d");return g?.drawImage(T,p.left,p.top,p.width,p.heigh,0,0,p.width,p.heigh),u}}},21084:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.TableService=void 0;const M=S(17618);q.TableService=class p{constructor(){this.conf="",this.docxParser=new M.DocxParser}loadConf(T){}start(T){return new Promise(u=>{u("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==T.type||"application/vnd.ms-excel"==T.type||".csv"==T.type?{type:"xlsx",supported:!0,data:{str:[],maps:[]}}:{type:"xlsx",supported:!1,data:{str:[],maps:[]}})})}}},45962:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.WordService=void 0;const M=S(17618);q.WordService=class p{constructor(){this.pattern_remove=/<a id="[^"]+"><\/a>/g,this.conf="",this.docxParser=new M.DocxParser}loadConf(T){}start(T){return new Promise(u=>{this.docxParser.start(T),this.docxParser.toTextLines().then(g=>{for(let _=0;_<g.str.length;_++)g.str[_]=g.str[_].replace(this.pattern_remove,"");u({type:"docx",supported:!0,data:g})}).catch(g=>{u({type:"docx",supported:!1,data:{str:[],maps:[]}})})})}}},65364:(ce,q,S)=>{var M,p;self,ce.exports=(M=S(74825),p=S(74456),function(){var j={"./src/plugin/hyperlinks.js":
/*!**********************************!*\
                  !*** ./src/plugin/hyperlinks.js ***!
                  \**********************************/function(_,h,m){"use strict";m.r(h),m(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),m(
/*! core-js/modules/es.string.link.js */
"./node_modules/core-js/modules/es.string.link.js");var k=m(
/*! ../worker.js */
"./src/worker.js"),A=m(
/*! ../utils.js */
"./src/utils.js"),C=[],P={toContainer:k.default.prototype.toContainer,toPdf:k.default.prototype.toPdf};k.default.prototype.toContainer=function(){return P.toContainer.call(this).then(function(){if(this.opt.enableLinks){var U=this.prop.container,R=U.querySelectorAll("a"),J=(0,A.unitConvert)(U.getBoundingClientRect(),this.prop.pageSize.k);C=[],Array.prototype.forEach.call(R,function(H){for(var ne=H.getClientRects(),ee=0;ee<ne.length;ee++){var W=(0,A.unitConvert)(ne[ee],this.prop.pageSize.k);W.left-=J.left,W.top-=J.top;var xe=Math.floor(W.top/this.prop.pageSize.inner.height)+1;C.push({page:xe,top:this.opt.margin[0]+W.top%this.prop.pageSize.inner.height,left:this.opt.margin[1]+W.left,clientRect:W,link:H})}},this)}})},k.default.prototype.toPdf=function(){return P.toPdf.call(this).then(function(){if(this.opt.enableLinks){C.forEach(function(R){this.prop.pdf.setPage(R.page),this.prop.pdf.link(R.left,R.top,R.clientRect.width,R.clientRect.height,{url:R.link.href})},this);var U=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(U)}})}},"./src/plugin/jspdf-plugin.js":
/*!************************************!*\
                  !*** ./src/plugin/jspdf-plugin.js ***!
                  \************************************/function(_,h,m){"use strict";m.r(h),m(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),m(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),m(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),m(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),m(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),m(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),m(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var ne=m(
/*! jspdf */
"jspdf");function W(xe){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(xe)}ne.jsPDF.getPageSize=function(xe,Ce,fe){if("object"===W(xe)){var be=xe;xe=be.orientation,Ce=be.unit||Ce,fe=be.format||fe}Ce=Ce||"mm",fe=fe||"a4",xe=(""+(xe||"P")).toLowerCase();var he=(""+fe).toLowerCase(),Te={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ce){case"pt":var me=1;break;case"mm":me=72/25.4;break;case"cm":me=72/2.54;break;case"in":me=72;break;case"px":me=.75;break;case"pc":case"em":me=12;break;case"ex":me=6;break;default:throw"Invalid unit: "+Ce}if(Te.hasOwnProperty(he))var se=Te[he][1]/me,_e=Te[he][0]/me;else try{se=fe[1],_e=fe[0]}catch{throw new Error("Invalid format: "+fe)}if("p"===xe||"portrait"===xe){if(xe="p",_e>se){var de=_e;_e=se,se=de}}else{if("l"!==xe&&"landscape"!==xe)throw"Invalid orientation: "+xe;xe="l",se>_e&&(de=_e,_e=se,se=de)}return{width:_e,height:se,unit:Ce,k:me}},h.default=ne.jsPDF},"./src/plugin/pagebreaks.js":
/*!**********************************!*\
                  !*** ./src/plugin/pagebreaks.js ***!
                  \**********************************/function(_,h,m){"use strict";m.r(h),m(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),m(
/*! core-js/modules/es.array.slice.js */
"./node_modules/core-js/modules/es.array.slice.js"),m(
/*! core-js/modules/es.array.join.js */
"./node_modules/core-js/modules/es.array.join.js"),m(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),m(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js");var U=m(
/*! ../worker.js */
"./src/worker.js"),R=m(
/*! ../utils.js */
"./src/utils.js"),J={toContainer:U.default.prototype.toContainer};U.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},U.default.prototype.toContainer=function(){return J.toContainer.call(this).then(function(){var ee=this.prop.container,W=this.prop.pageSize.inner.px.height,xe=[].concat(this.opt.pagebreak.mode),Ce={avoidAll:-1!==xe.indexOf("avoid-all"),css:-1!==xe.indexOf("css"),legacy:-1!==xe.indexOf("legacy")},fe={},be=this;["before","after","avoid"].forEach(function(me){fe[me]=Ce.avoidAll&&"avoid"===me?[]:[].concat(be.opt.pagebreak[me]||[]),fe[me].length>0&&(fe[me]=Array.prototype.slice.call(ee.querySelectorAll(fe[me].join(", "))))});var he=ee.querySelectorAll(".html2pdf__page-break");he=Array.prototype.slice.call(he);var Te=ee.querySelectorAll("*");Array.prototype.forEach.call(Te,function(se){var _e={before:!1,after:Ce.legacy&&-1!==he.indexOf(se),avoid:Ce.avoidAll};if(Ce.css){var de=window.getComputedStyle(se),Ae=["always","page","left","right"];_e={before:_e.before||-1!==Ae.indexOf(de.breakBefore||de.pageBreakBefore),after:_e.after||-1!==Ae.indexOf(de.breakAfter||de.pageBreakAfter),avoid:_e.avoid||-1!==["avoid","avoid-page"].indexOf(de.breakInside||de.pageBreakInside)}}Object.keys(_e).forEach(function(qe){_e[qe]=_e[qe]||-1!==fe[qe].indexOf(se)});var Oe=se.getBoundingClientRect();if(_e.avoid&&!_e.before){var Ye=Math.floor(Oe.top/W),pt=Math.floor(Oe.bottom/W),ft=Math.abs(Oe.bottom-Oe.top)/W;pt!==Ye&&ft<=1&&(_e.before=!0)}if(_e.before){var $e=(0,R.createElement)("div",{style:{display:"block",height:W-Oe.top%W+"px"}});se.parentNode.insertBefore($e,se)}_e.after&&($e=(0,R.createElement)("div",{style:{display:"block",height:W-Oe.bottom%W+"px"}}),se.parentNode.insertBefore($e,se.nextSibling))})})}},"./src/utils.js":
/*!**********************!*\
                  !*** ./src/utils.js ***!
                  \**********************/function(_,h,m){"use strict";function W(Te){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(se){return typeof se}:function(se){return se&&"function"==typeof Symbol&&se.constructor===Symbol&&se!==Symbol.prototype?"symbol":typeof se})(Te)}m.r(h),m.d(h,{objType:function(){return xe},createElement:function(){return Ce},cloneNode:function(){return fe},unitConvert:function(){return be},toPx:function(){return he}}),m(
/*! core-js/modules/es.number.constructor.js */
"./node_modules/core-js/modules/es.number.constructor.js"),m(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),m(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),m(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),m(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),m(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),m(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),m(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var xe=function(me){var se=W(me);return"undefined"===se?"undefined":"string"===se||me instanceof String?"string":"number"===se||me instanceof Number?"number":"function"===se||me instanceof Function?"function":me&&me.constructor===Array?"array":me&&1===me.nodeType?"element":"object"===se?"object":"unknown"},Ce=function(me,se){var _e=document.createElement(me);if(se.className&&(_e.className=se.className),se.innerHTML){_e.innerHTML=se.innerHTML;for(var de=_e.getElementsByTagName("script"),Ae=de.length;Ae-- >0;null)de[Ae].parentNode.removeChild(de[Ae])}for(var Se in se.style)_e.style[Se]=se.style[Se];return _e},fe=function Te(me,se){for(var _e=3===me.nodeType?document.createTextNode(me.nodeValue):me.cloneNode(!1),de=me.firstChild;de;de=de.nextSibling)(!0===se||1!==de.nodeType||"SCRIPT"!==de.nodeName)&&_e.appendChild(Te(de,se));return 1===me.nodeType&&("CANVAS"===me.nodeName?(_e.width=me.width,_e.height=me.height,_e.getContext("2d").drawImage(me,0,0)):("TEXTAREA"===me.nodeName||"SELECT"===me.nodeName)&&(_e.value=me.value),_e.addEventListener("load",function(){_e.scrollTop=me.scrollTop,_e.scrollLeft=me.scrollLeft},!0)),_e},be=function(me,se){if("number"===xe(me))return 72*me/96/se;var _e={};for(var de in me)_e[de]=72*me[de]/96/se;return _e},he=function(me,se){return Math.floor(me*se/72*96)}},"./src/worker.js":
/*!***********************!*\
                  !*** ./src/worker.js ***!
                  \***********************/function(_,h,m){"use strict";m.r(h),m(
/*! core-js/modules/es.object.assign.js */
"./node_modules/core-js/modules/es.object.assign.js"),m(
/*! core-js/modules/es.array.map.js */
"./node_modules/core-js/modules/es.array.map.js"),m(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js"),m(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),m(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),m(
/*! core-js/modules/es.regexp.to-string.js */
"./node_modules/core-js/modules/es.regexp.to-string.js"),m(
/*! core-js/modules/es.function.name.js */
"./node_modules/core-js/modules/es.function.name.js"),m(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js");var W=m(
/*! jspdf */
"jspdf"),Ce=m(
/*! html2canvas */
"html2canvas"),be=m(
/*! ./utils.js */
"./src/utils.js"),he=m(
/*! es6-promise */
"./node_modules/es6-promise/dist/es6-promise.js"),me=m.n(he)().Promise,se=function _e(de){var Ae=Object.assign(_e.convert(me.resolve()),JSON.parse(JSON.stringify(_e.template))),Se=_e.convert(me.resolve(),Ae);return(Se=Se.setProgress(1,_e,1,[_e])).set(de)};(se.prototype=Object.create(me.prototype)).constructor=se,se.convert=function(de,Ae){return de.__proto__=Ae||se.prototype,de},se.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},se.prototype.from=function(de,Ae){return this.then(function(){switch(Ae=Ae||function Se(Oe){switch((0,be.objType)(Oe)){case"string":return"string";case"element":return"canvas"===Oe.nodeName.toLowerCase?"canvas":"element";default:return"unknown"}}(de)){case"string":return this.set({src:(0,be.createElement)("div",{innerHTML:de})});case"element":return this.set({src:de});case"canvas":return this.set({canvas:de});case"img":return this.set({img:de});default:return this.error("Unknown source type.")}})},se.prototype.to=function(de){switch(de){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},se.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Se={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},Oe={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};Se.opacity=0;var Ye=(0,be.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,be.createElement)("div",{className:"html2pdf__overlay",style:Se}),this.prop.container=(0,be.createElement)("div",{className:"html2pdf__container",style:Oe}),this.prop.container.appendChild(Ye),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},se.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(function(){var Se=Object.assign({},this.opt.html2canvas);return delete Se.onrendered,Ce(this.prop.container,Se)}).then(function(Se){(this.opt.html2canvas.onrendered||function(){})(Se),this.prop.canvas=Se,document.body.removeChild(this.prop.overlay)})},se.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Se=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Se})},se.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Se=this.prop.canvas,Oe=this.opt,Ye=Se.height,pt=Math.floor(Se.width*this.prop.pageSize.inner.ratio),ft=Math.ceil(Ye/pt),$e=this.prop.pageSize.inner.height,qe=document.createElement("canvas"),it=qe.getContext("2d");qe.width=Se.width,qe.height=pt,this.prop.pdf=this.prop.pdf||new W.jsPDF(Oe.jsPDF);for(var He=0;He<ft;He++){He===ft-1&&Ye%pt!=0&&(qe.height=Ye%pt,$e=qe.height*this.prop.pageSize.inner.width/qe.width);var We=qe.width,Be=qe.height;it.fillStyle="white",it.fillRect(0,0,We,Be),it.drawImage(Se,0,He*pt,We,Be,0,0,We,Be),He&&this.prop.pdf.addPage();var ut=qe.toDataURL("image/"+Oe.image.type,Oe.image.quality);this.prop.pdf.addImage(ut,Oe.image.type,Oe.margin[1],Oe.margin[0],this.prop.pageSize.inner.width,$e)}})},se.prototype.output=function(de,Ae,Se){return"img"===(Se=Se||"pdf").toLowerCase()||"image"===Se.toLowerCase()?this.outputImg(de,Ae):this.outputPdf(de,Ae)},se.prototype.outputPdf=function(de,Ae){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(de,Ae)})},se.prototype.outputImg=function(de,Ae){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(de){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+de+'" is not supported.'}})},se.prototype.save=function(de){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(de?{filename:de}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},se.prototype.set=function(de){if("object"!==(0,be.objType)(de))return this;var Ae=Object.keys(de||{}).map(function(Se){switch(Se){case"margin":return this.setMargin.bind(this,de.margin);case"jsPDF":return function(){return this.opt.jsPDF=de.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,de.pageSize);default:return Se in se.template.prop?function(){this.prop[Se]=de[Se]}:function(){this.opt[Se]=de[Se]}}},this);return this.then(function(){return this.thenList(Ae)})},se.prototype.get=function(de,Ae){return this.then(function(){var Oe=de in se.template.prop?this.prop[de]:this.opt[de];return Ae?Ae(Oe):Oe})},se.prototype.setMargin=function(de){return this.then(function(){switch((0,be.objType)(de)){case"number":de=[de,de,de,de];case"array":if(2===de.length&&(de=[de[0],de[1],de[0],de[1]]),4===de.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=de}).then(this.setPageSize)},se.prototype.setPageSize=function(de){return this.then(function(){(de=de||W.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(de.inner={width:de.width-this.opt.margin[1]-this.opt.margin[3],height:de.height-this.opt.margin[0]-this.opt.margin[2]},de.inner.px={width:(0,be.toPx)(de.inner.width,de.k),height:(0,be.toPx)(de.inner.height,de.k)},de.inner.ratio=de.inner.height/de.inner.width),this.prop.pageSize=de})},se.prototype.setProgress=function(de,Ae,Se,Oe){return null!=de&&(this.progress.val=de),null!=Ae&&(this.progress.state=Ae),null!=Se&&(this.progress.n=Se),null!=Oe&&(this.progress.stack=Oe),this.progress.ratio=this.progress.val/this.progress.state,this},se.prototype.updateProgress=function(de,Ae,Se,Oe){return this.setProgress(de?this.progress.val+de:null,Ae||null,Se?this.progress.n+Se:null,Oe?this.progress.stack.concat(Oe):null)},se.prototype.then=function(de,Ae){var Se=this;return this.thenCore(de,Ae,function(Ye,pt){return Se.updateProgress(null,null,1,[Ye]),me.prototype.then.call(this,function($e){return Se.updateProgress(null,Ye),$e}).then(Ye,pt).then(function($e){return Se.updateProgress(1),$e})})},se.prototype.thenCore=function(de,Ae,Se){Se=Se||me.prototype.then;var Oe=this;de&&(de=de.bind(Oe)),Ae&&(Ae=Ae.bind(Oe));var pt=-1!==me.toString().indexOf("[native code]")&&"Promise"===me.name?Oe:se.convert(Object.assign({},Oe),me.prototype),ft=Se.call(pt,de,Ae);return se.convert(ft,Oe.__proto__)},se.prototype.thenExternal=function(de,Ae){return me.prototype.then.call(this,de,Ae)},se.prototype.thenList=function(de){var Ae=this;return de.forEach(function(Oe){Ae=Ae.thenCore(Oe)}),Ae},se.prototype.catch=function(_e){_e&&(_e=_e.bind(this));var de=me.prototype.catch.call(this,_e);return se.convert(de,this)},se.prototype.catchExternal=function(de){return me.prototype.catch.call(this,de)},se.prototype.error=function(de){return this.then(function(){throw new Error(de)})},se.prototype.using=se.prototype.set,se.prototype.saveAs=se.prototype.save,se.prototype.export=se.prototype.output,se.prototype.run=se.prototype.then,h.default=se},"./node_modules/core-js/internals/a-function.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/a-function.js ***!
                  \******************************************************/function(_){_.exports=function(h){if("function"!=typeof h)throw TypeError(String(h)+" is not a function");return h}},"./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
                  \****************************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");_.exports=function(x){if(!b(x)&&null!==x)throw TypeError("Can't set "+String(x)+" as a prototype");return x}},"./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
                  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
                  \**************************************************************/function(_,h,m){var b=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),x=m(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),w=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),E=b("unscopables"),k=Array.prototype;null==k[E]&&w.f(k,E,{configurable:!0,value:x(null)}),_.exports=function(A){k[E][A]=!0}},"./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/an-object.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");_.exports=function(x){if(!b(x))throw TypeError(String(x)+" is not an object");return x}},"./node_modules/core-js/internals/array-for-each.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-for-each.js ***!
                  \**********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,w=m(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js")("forEach");_.exports=w?[].forEach:function(k){return b(this,k,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-includes.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),x=m(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),w=m(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),E=function(k){return function(A,C,P){var R,D=b(A),Q=x(D.length),U=w(P,Q);if(k&&C!=C){for(;Q>U;)if((R=D[U++])!=R)return!0}else for(;Q>U;U++)if((k||U in D)&&D[U]===C)return k||U||0;return!k&&-1}};_.exports={includes:E(!0),indexOf:E(!1)}},"./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-iteration.js ***!
                  \***********************************************************/function(_,h,m){var b=m(
/*! ../internals/function-bind-context */
"./node_modules/core-js/internals/function-bind-context.js"),x=m(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),w=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),E=m(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),k=m(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),A=[].push,C=function(P){var D=1==P,Q=2==P,U=3==P,R=4==P,J=6==P,H=7==P,ne=5==P||J;return function(ee,W,xe,Ce){for(var de,Ae,fe=w(ee),be=x(fe),he=b(W,xe,3),Te=E(be.length),me=0,se=Ce||k,_e=D?se(ee,Te):Q||H?se(ee,0):void 0;Te>me;me++)if((ne||me in be)&&(Ae=he(de=be[me],me,fe),P))if(D)_e[me]=Ae;else if(Ae)switch(P){case 3:return!0;case 5:return de;case 6:return me;case 2:A.call(_e,de)}else switch(P){case 4:return!1;case 7:A.call(_e,de)}return J?-1:U||R?R:_e}};_.exports={forEach:C(0),map:C(1),filter:C(2),some:C(3),every:C(4),find:C(5),findIndex:C(6),filterReject:C(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":
/*!****************************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-method-has-species-support.js ***!
                  \****************************************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),x=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),w=m(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),E=x("species");_.exports=function(k){return w>=51||!b(function(){var A=[];return(A.constructor={})[E]=function(){return{foo:1}},1!==A[k](Boolean).foo})}},"./node_modules/core-js/internals/array-method-is-strict.js":
/*!******************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-method-is-strict.js ***!
                  \******************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");_.exports=function(x,w){var E=[][x];return!!E&&b(function(){E.call(null,w||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
                  \*********************************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),x=m(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),E=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("species");_.exports=function(k){var A;return x(k)&&("function"!=typeof(A=k.constructor)||A!==Array&&!x(A.prototype)?b(A)&&null===(A=A[E])&&(A=void 0):A=void 0),void 0===A?Array:A}},"./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-species-create.js ***!
                  \****************************************************************/function(_,h,m){var b=m(
/*! ../internals/array-species-constructor */
"./node_modules/core-js/internals/array-species-constructor.js");_.exports=function(x,w){return new(b(x))(0===w?0:w)}},"./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/classof-raw.js ***!
                  \*******************************************************/function(_){var h={}.toString;_.exports=function(m){return h.call(m).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/internals/classof.js ***!
                  \***************************************************/function(_,h,m){var b=m(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),x=m(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),E=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),k="Arguments"==x(function(){return arguments}());_.exports=b?x:function(C){var P,D,Q;return void 0===C?"Undefined":null===C?"Null":"string"==typeof(D=function(C,P){try{return C[P]}catch{}}(P=Object(C),E))?D:k?x(P):"Object"==(Q=x(P))&&"function"==typeof P.callee?"Arguments":Q}},"./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
                  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
                  \***********************************************************************/function(_,h,m){var b=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),x=m(
/*! ../internals/own-keys */
"./node_modules/core-js/internals/own-keys.js"),w=m(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),E=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js");_.exports=function(k,A){for(var C=x(A),P=E.f,D=w.f,Q=0;Q<C.length;Q++){var U=C[Q];b(k,U)||P(k,U,D(A,U))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/correct-prototype-getter.js ***!
                  \********************************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");_.exports=!b(function(){function x(){}return x.prototype.constructor=null,Object.getPrototypeOf(new x)!==x.prototype})},"./node_modules/core-js/internals/create-html.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/create-html.js ***!
                  \*******************************************************/function(_,h,m){var b=m(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),x=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),w=/"/g;_.exports=function(E,k,A,C){var P=x(b(E)),D="<"+k;return""!==A&&(D+=" "+A+'="'+x(C).replace(w,"&quot;")+'"'),D+">"+P+"</"+k+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":
/*!***********************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-iterator-constructor.js ***!
                  \***********************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,x=m(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),w=m(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),E=m(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),k=m(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),A=function(){return this};_.exports=function(C,P,D){var Q=P+" Iterator";return C.prototype=x(b,{next:w(1,D)}),E(C,Q,!1,!0),k[Q]=A,C}},"./node_modules/core-js/internals/create-non-enumerable-property.js":
/*!**************************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
                  \**************************************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),w=m(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");_.exports=b?function(E,k,A){return x.f(E,k,w(1,A))}:function(E,k,A){return E[k]=A,E}},"./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
                  \**********************************************************************/function(_){_.exports=function(h,m){return{enumerable:!(1&h),configurable:!(2&h),writable:!(4&h),value:m}}},"./node_modules/core-js/internals/create-property.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/create-property.js ***!
                  \***********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),x=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),w=m(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");_.exports=function(E,k,A){var C=b(k);C in E?x.f(E,C,w(0,A)):E[C]=A}},"./node_modules/core-js/internals/define-iterator.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/define-iterator.js ***!
                  \***********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/create-iterator-constructor */
"./node_modules/core-js/internals/create-iterator-constructor.js"),w=m(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),E=m(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js"),k=m(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),A=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),C=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),P=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),D=m(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),Q=m(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),U=m(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js"),R=U.IteratorPrototype,J=U.BUGGY_SAFARI_ITERATORS,H=P("iterator"),ee="values",W="entries",xe=function(){return this};_.exports=function(Ce,fe,be,he,Te,me,se){x(be,fe,he);var ft,$e,qe,_e=function(it){if(it===Te&&Ye)return Ye;if(!J&&it in Se)return Se[it];switch(it){case"keys":case ee:case W:return function(){return new be(this,it)}}return function(){return new be(this)}},de=fe+" Iterator",Ae=!1,Se=Ce.prototype,Oe=Se[H]||Se["@@iterator"]||Te&&Se[Te],Ye=!J&&Oe||_e(Te),pt="Array"==fe&&Se.entries||Oe;if(pt&&(ft=w(pt.call(new Ce)),R!==Object.prototype&&ft.next&&(!D&&w(ft)!==R&&(E?E(ft,R):"function"!=typeof ft[H]&&A(ft,H,xe)),k(ft,de,!0,!0),D&&(Q[de]=xe))),Te==ee&&Oe&&Oe.name!==ee&&(Ae=!0,Ye=function(){return Oe.call(this)}),(!D||se)&&Se[H]!==Ye&&A(Se,H,Ye),Q[fe]=Ye,Te)if($e={values:_e(ee),keys:me?Ye:_e("keys"),entries:_e(W)},se)for(qe in $e)(J||Ae||!(qe in Se))&&C(Se,qe,$e[qe]);else b({target:fe,proto:!0,forced:J||Ae},$e);return $e}},"./node_modules/core-js/internals/define-well-known-symbol.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/define-well-known-symbol.js ***!
                  \********************************************************************/function(_,h,m){var b=m(
/*! ../internals/path */
"./node_modules/core-js/internals/path.js"),x=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),w=m(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),E=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f;_.exports=function(k){var A=b.Symbol||(b.Symbol={});x(A,k)||E(A,k,{value:w.f(k)})}},"./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/descriptors.js ***!
                  \*******************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");_.exports=!b(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},"./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/document-create-element.js ***!
                  \*******************************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),w=b.document,E=x(w)&&x(w.createElement);_.exports=function(k){return E?w.createElement(k):{}}},"./node_modules/core-js/internals/dom-iterables.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/dom-iterables.js ***!
                  \*********************************************************/function(_){_.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/engine-user-agent.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");_.exports=b("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/engine-v8-version.js ***!
                  \*************************************************************/function(_,h,m){var C,P,b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/engine-user-agent */
"./node_modules/core-js/internals/engine-user-agent.js"),w=b.process,E=b.Deno,k=w&&w.versions||E&&E.version,A=k&&k.v8;A?P=(C=A.split("."))[0]<4?1:C[0]+C[1]:x&&(!(C=x.match(/Edge\/(\d+)/))||C[1]>=74)&&(C=x.match(/Chrome\/(\d+)/))&&(P=C[1]),_.exports=P&&+P},"./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
                  \*********************************************************/function(_){_.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/export.js ***!
                  \**************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,w=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),E=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),k=m(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),A=m(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),C=m(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js");_.exports=function(P,D){var H,ne,ee,W,xe,Q=P.target,U=P.global,R=P.stat;if(H=U?b:R?b[Q]||k(Q,{}):(b[Q]||{}).prototype)for(ne in D){if(W=D[ne],ee=P.noTargetGet?(xe=x(H,ne))&&xe.value:H[ne],!C(U?ne:Q+(R?".":"#")+ne,P.forced)&&void 0!==ee){if(typeof W==typeof ee)continue;A(W,ee)}(P.sham||ee&&ee.sham)&&w(W,"sham",!0),E(H,ne,W,P)}}},"./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
                  !*** ./node_modules/core-js/internals/fails.js ***!
                  \*************************************************/function(_){_.exports=function(h){try{return!!h()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
                  \*****************************************************************/function(_,h,m){var b=m(
/*! ../internals/a-function */
"./node_modules/core-js/internals/a-function.js");_.exports=function(x,w,E){if(b(x),void 0===w)return x;switch(E){case 0:return function(){return x.call(w)};case 1:return function(k){return x.call(w,k)};case 2:return function(k,A){return x.call(w,k,A)};case 3:return function(k,A,C){return x.call(w,k,A,C)}}return function(){return x.apply(w,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/get-built-in.js ***!
                  \********************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");_.exports=function(w,E){return arguments.length<2?function(w){return"function"==typeof w?w:void 0}(b[w]):b[w]&&b[w][E]}},"./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/global.js ***!
                  \**************************************************/function(_){var h=function(m){return m&&m.Math==Math&&m};_.exports=h("object"==typeof globalThis&&globalThis)||h("object"==typeof window&&window)||h("object"==typeof self&&self)||h("object"==typeof global&&global)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":
/*!***********************************************!*\
                  !*** ./node_modules/core-js/internals/has.js ***!
                  \***********************************************/function(_,h,m){var b=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),x={}.hasOwnProperty;_.exports=Object.hasOwn||function(E,k){return x.call(b(E),k)}},"./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
                  \*******************************************************/function(_){_.exports={}},"./node_modules/core-js/internals/html.js":
/*!************************************************!*\
                  !*** ./node_modules/core-js/internals/html.js ***!
                  \************************************************/function(_,h,m){var b=m(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");_.exports=b("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),w=m(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js");_.exports=!b&&!x(function(){return 7!=Object.defineProperty(w("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/indexed-object.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),x=m(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),w="".split;_.exports=b(function(){return!Object("z").propertyIsEnumerable(0)})?function(E){return"String"==x(E)?w.call(E,""):Object(E)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/internals/inherit-if-required.js ***!
                  \***************************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),x=m(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js");_.exports=function(w,E,k){var A,C;return x&&"function"==typeof(A=E.constructor)&&A!==k&&b(C=A.prototype)&&C!==k.prototype&&x(w,C),w}},"./node_modules/core-js/internals/inspect-source.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/inspect-source.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),x=Function.toString;"function"!=typeof b.inspectSource&&(b.inspectSource=function(w){return x.call(w)}),_.exports=b.inspectSource},"./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/internal-state.js ***!
                  \**********************************************************/function(_,h,m){var U,R,J,b=m(
/*! ../internals/native-weak-map */
"./node_modules/core-js/internals/native-weak-map.js"),x=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),w=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),E=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),k=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),A=m(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),C=m(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),P=m(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),D="Object already initialized";if(b||A.state){var ee=A.state||(A.state=new(0,x.WeakMap)),W=ee.get,xe=ee.has,Ce=ee.set;U=function(be,he){if(xe.call(ee,be))throw new TypeError(D);return he.facade=be,Ce.call(ee,be,he),he},R=function(be){return W.call(ee,be)||{}},J=function(be){return xe.call(ee,be)}}else{var fe=C("state");P[fe]=!0,U=function(be,he){if(k(be,fe))throw new TypeError(D);return he.facade=be,E(be,fe,he),he},R=function(be){return k(be,fe)?be[fe]:{}},J=function(be){return k(be,fe)}}_.exports={set:U,get:R,has:J,enforce:function(be){return J(be)?R(be):U(be,{})},getterFor:function(be){return function(he){var Te;if(!w(he)||(Te=R(he)).type!==be)throw TypeError("Incompatible receiver, "+be+" required");return Te}}}},"./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-array.js ***!
                  \****************************************************/function(_,h,m){var b=m(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js");_.exports=Array.isArray||function(w){return"Array"==b(w)}},"./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-forced.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),x=/#|\.prototype\./,w=function(P,D){var Q=k[E(P)];return Q==C||Q!=A&&("function"==typeof D?b(D):!!D)},E=w.normalize=function(P){return String(P).replace(x,".").toLowerCase()},k=w.data={},A=w.NATIVE="N",C=w.POLYFILL="P";_.exports=w},"./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-object.js ***!
                  \*****************************************************/function(_){_.exports=function(h){return"object"==typeof h?null!==h:"function"==typeof h}},"./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/internals/is-pure.js ***!
                  \***************************************************/function(_){_.exports=!1},"./node_modules/core-js/internals/is-symbol.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-symbol.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),x=m(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js");_.exports=x?function(w){return"symbol"==typeof w}:function(w){var E=b("Symbol");return"function"==typeof E&&Object(w)instanceof E}},"./node_modules/core-js/internals/iterators-core.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/iterators-core.js ***!
                  \**********************************************************/function(_,h,m){"use strict";var Q,U,R,b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),x=m(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),w=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),E=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),k=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),A=m(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),C=k("iterator"),P=!1;[].keys&&("next"in(R=[].keys())?(U=x(x(R)))!==Object.prototype&&(Q=U):P=!0);var J=null==Q||b(function(){var H={};return Q[C].call(H)!==H});J&&(Q={}),(!A||J)&&!E(Q,C)&&w(Q,C,function(){return this}),_.exports={IteratorPrototype:Q,BUGGY_SAFARI_ITERATORS:P}},"./node_modules/core-js/internals/iterators.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/iterators.js ***!
                  \*****************************************************/function(_){_.exports={}},"./node_modules/core-js/internals/native-symbol.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/native-symbol.js ***!
                  \*********************************************************/function(_,h,m){var b=m(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),x=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");_.exports=!!Object.getOwnPropertySymbols&&!x(function(){var w=Symbol();return!String(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&b&&b<41})},"./node_modules/core-js/internals/native-weak-map.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/native-weak-map.js ***!
                  \***********************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),w=b.WeakMap;_.exports="function"==typeof w&&/native code/.test(x(w))},"./node_modules/core-js/internals/object-assign.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/object-assign.js ***!
                  \*********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),w=m(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),E=m(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),k=m(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),A=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),C=m(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),P=Object.assign,D=Object.defineProperty;_.exports=!P||x(function(){if(b&&1!==P({b:1},P(D({},"a",{enumerable:!0,get:function(){D(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Q={},U={},R=Symbol(),J="abcdefghijklmnopqrst";return Q[R]=7,J.split("").forEach(function(H){U[H]=H}),7!=P({},Q)[R]||w(P({},U)).join("")!=J})?function(U,R){for(var J=A(U),H=arguments.length,ne=1,ee=E.f,W=k.f;H>ne;)for(var he,xe=C(arguments[ne++]),Ce=ee?w(xe).concat(ee(xe)):w(xe),fe=Ce.length,be=0;fe>be;)he=Ce[be++],(!b||W.call(xe,he))&&(J[he]=xe[he]);return J}:P},"./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/object-create.js ***!
                  \*********************************************************/function(_,h,m){var W,b=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),x=m(
/*! ../internals/object-define-properties */
"./node_modules/core-js/internals/object-define-properties.js"),w=m(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js"),E=m(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),k=m(
/*! ../internals/html */
"./node_modules/core-js/internals/html.js"),A=m(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js"),C=m(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),Q="prototype",U="script",R=C("IE_PROTO"),J=function(){},H=function(Ce){return"<"+U+">"+Ce+"</"+U+">"},ne=function(Ce){Ce.write(H("")),Ce.close();var fe=Ce.parentWindow.Object;return Ce=null,fe},xe=function(){try{W=new ActiveXObject("htmlfile")}catch{}xe=document.domain&&W?ne(W):function(){var be,Ce=A("iframe"),fe="java"+U+":";if(Ce.style)return Ce.style.display="none",k.appendChild(Ce),Ce.src=String(fe),(be=Ce.contentWindow.document).open(),be.write(H("document.F=Object")),be.close(),be.F}()||ne(W);for(var Ce=w.length;Ce--;)delete xe[Q][w[Ce]];return xe()};E[R]=!0,_.exports=Object.create||function(fe,be){var he;return null!==fe?(J[Q]=b(fe),he=new J,J[Q]=null,he[R]=fe):he=xe(),void 0===be?he:x(he,be)}},"./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
                  \********************************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),w=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),E=m(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");_.exports=b?Object.defineProperties:function(A,C){w(A);for(var U,P=E(C),D=P.length,Q=0;D>Q;)x.f(A,U=P[Q++],C[U]);return A}},"./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-define-property.js ***!
                  \******************************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),w=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),E=m(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),k=Object.defineProperty;h.f=b?k:function(C,P,D){if(w(C),P=E(P),w(D),x)try{return k(C,P,D)}catch{}if("get"in D||"set"in D)throw TypeError("Accessors not supported");return"value"in D&&(C[P]=D.value),C}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
                  \******************************************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),w=m(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),E=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),k=m(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),A=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),C=m(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),P=Object.getOwnPropertyDescriptor;h.f=b?P:function(Q,U){if(Q=E(Q),U=k(U),C)try{return P(Q,U)}catch{}if(A(Q,U))return w(!x.f.call(Q,U),Q[U])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":
/*!**********************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-names-external.js ***!
                  \**********************************************************************************/function(_,h,m){var b=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),x=m(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,w={}.toString,E="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];_.exports.f=function(C){return E&&"[object Window]"==w.call(C)?function(A){try{return x(A)}catch{return E.slice()}}(C):x(b(C))}},"./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
                  \*************************************************************************/function(_,h,m){var b=m(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),w=m(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");h.f=Object.getOwnPropertyNames||function(k){return b(k,w)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
                  \***************************************************************************/function(_,h){h.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-prototype-of.js ***!
                  \*******************************************************************/function(_,h,m){var b=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),x=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),w=m(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),E=m(
/*! ../internals/correct-prototype-getter */
"./node_modules/core-js/internals/correct-prototype-getter.js"),k=w("IE_PROTO"),A=Object.prototype;_.exports=E?Object.getPrototypeOf:function(C){return C=x(C),b(C,k)?C[k]:"function"==typeof C.constructor&&C instanceof C.constructor?C.constructor.prototype:C instanceof Object?A:null}},"./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
                  \****************************************************************/function(_,h,m){var b=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),x=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),w=m(
/*! ../internals/array-includes */
"./node_modules/core-js/internals/array-includes.js").indexOf,E=m(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js");_.exports=function(k,A){var Q,C=x(k),P=0,D=[];for(Q in C)!b(E,Q)&&b(C,Q)&&D.push(Q);for(;A.length>P;)b(C,Q=A[P++])&&(~w(D,Q)||D.push(Q));return D}},"./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/object-keys.js ***!
                  \*******************************************************/function(_,h,m){var b=m(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),x=m(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js");_.exports=Object.keys||function(E){return b(E,x)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
                  \*************************************************************************/function(_,h){"use strict";var m={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,x=b&&!m.call({1:2},1);h.f=x?function(E){var k=b(this,E);return!!k&&k.enumerable}:m},"./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
                  \*******************************************************************/function(_,h,m){var b=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),x=m(
/*! ../internals/a-possible-prototype */
"./node_modules/core-js/internals/a-possible-prototype.js");_.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var k,w=!1,E={};try{(k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(E,[]),w=E instanceof Array}catch{}return function(C,P){return b(C),x(P),w?k.call(C,P):C.__proto__=P,C}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-to-string.js ***!
                  \************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),x=m(
/*! ../internals/classof */
"./node_modules/core-js/internals/classof.js");_.exports=b?{}.toString:function(){return"[object "+x(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/ordinary-to-primitive.js ***!
                  \*****************************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");_.exports=function(x,w){var E,k;if("string"===w&&"function"==typeof(E=x.toString)&&!b(k=E.call(x))||"function"==typeof(E=x.valueOf)&&!b(k=E.call(x))||"string"!==w&&"function"==typeof(E=x.toString)&&!b(k=E.call(x)))return k;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/own-keys.js ***!
                  \****************************************************/function(_,h,m){var b=m(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),x=m(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),w=m(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),E=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");_.exports=b("Reflect","ownKeys")||function(A){var C=x.f(E(A)),P=w.f;return P?C.concat(P(A)):C}},"./node_modules/core-js/internals/path.js":
/*!************************************************!*\
                  !*** ./node_modules/core-js/internals/path.js ***!
                  \************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");_.exports=b},"./node_modules/core-js/internals/redefine.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/redefine.js ***!
                  \****************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),w=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),E=m(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),k=m(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),A=m(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),C=A.get,P=A.enforce,D=String(String).split("String");(_.exports=function(Q,U,R,J){var W,H=!!J&&!!J.unsafe,ne=!!J&&!!J.enumerable,ee=!!J&&!!J.noTargetGet;"function"==typeof R&&("string"==typeof U&&!w(R,"name")&&x(R,"name",U),(W=P(R)).source||(W.source=D.join("string"==typeof U?U:""))),Q!==b?(H?!ee&&Q[U]&&(ne=!0):delete Q[U],ne?Q[U]=R:x(Q,U,R)):ne?Q[U]=R:E(U,R)})(Function.prototype,"toString",function(){return"function"==typeof this&&C(this).source||k(this)})},"./node_modules/core-js/internals/regexp-flags.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/regexp-flags.js ***!
                  \********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");_.exports=function(){var x=b(this),w="";return x.global&&(w+="g"),x.ignoreCase&&(w+="i"),x.multiline&&(w+="m"),x.dotAll&&(w+="s"),x.unicode&&(w+="u"),x.sticky&&(w+="y"),w}},"./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
                  \********************************************************************/function(_){_.exports=function(h){if(null==h)throw TypeError("Can't call method on "+h);return h}},"./node_modules/core-js/internals/set-global.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/set-global.js ***!
                  \******************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");_.exports=function(x,w){try{Object.defineProperty(b,x,{value:w,configurable:!0,writable:!0})}catch{b[x]=w}return w}},"./node_modules/core-js/internals/set-to-string-tag.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/set-to-string-tag.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,x=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),E=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");_.exports=function(k,A,C){k&&!x(k=C?k:k.prototype,E)&&b(k,E,{configurable:!0,value:A})}},"./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/shared-key.js ***!
                  \******************************************************/function(_,h,m){var b=m(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),x=m(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),w=b("keys");_.exports=function(E){return w[E]||(w[E]=x(E))}},"./node_modules/core-js/internals/shared-store.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/shared-store.js ***!
                  \********************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),w="__core-js_shared__",E=b[w]||x(w,{});_.exports=E},"./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/shared.js ***!
                  \**************************************************/function(_,h,m){var b=m(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),x=m(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js");(_.exports=function(w,E){return x[w]||(x[w]=void 0!==E?E:{})})("versions",[]).push({version:"3.16.0",mode:b?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":
/*!**************************************************************!*\
                  !*** ./node_modules/core-js/internals/string-html-forced.js ***!
                  \**************************************************************/function(_,h,m){var b=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");_.exports=function(x){return b(function(){var w=""[x]('"');return w!==w.toLowerCase()||w.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/internals/string-multibyte.js ***!
                  \************************************************************/function(_,h,m){var b=m(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),x=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),w=m(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),E=function(k){return function(A,C){var U,R,P=x(w(A)),D=b(C),Q=P.length;return D<0||D>=Q?k?"":void 0:(U=P.charCodeAt(D))<55296||U>56319||D+1===Q||(R=P.charCodeAt(D+1))<56320||R>57343?k?P.charAt(D):U:k?P.slice(D,D+2):R-56320+(U-55296<<10)+65536}};_.exports={codeAt:E(!1),charAt:E(!0)}},"./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/string-trim.js ***!
                  \*******************************************************/function(_,h,m){var b=m(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),x=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),E="["+m(
/*! ../internals/whitespaces */
"./node_modules/core-js/internals/whitespaces.js")+"]",k=RegExp("^"+E+E+"*"),A=RegExp(E+E+"*$"),C=function(P){return function(D){var Q=x(b(D));return 1&P&&(Q=Q.replace(k,"")),2&P&&(Q=Q.replace(A,"")),Q}};_.exports={start:C(1),end:C(2),trim:C(3)}},"./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),x=Math.max,w=Math.min;_.exports=function(E,k){var A=b(E);return A<0?x(A+k,0):w(A,k)}},"./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),x=m(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");_.exports=function(w){return b(x(w))}},"./node_modules/core-js/internals/to-integer.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/to-integer.js ***!
                  \******************************************************/function(_){var h=Math.ceil,m=Math.floor;_.exports=function(b){return isNaN(b=+b)?0:(b>0?m:h)(b)}},"./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-length.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),x=Math.min;_.exports=function(w){return w>0?x(b(w),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-object.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");_.exports=function(x){return Object(b(x))}},"./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/to-primitive.js ***!
                  \********************************************************/function(_,h,m){var b=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),x=m(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),w=m(
/*! ../internals/ordinary-to-primitive */
"./node_modules/core-js/internals/ordinary-to-primitive.js"),k=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");_.exports=function(A,C){if(!b(A)||x(A))return A;var D,P=A[k];if(void 0!==P){if(void 0===C&&(C="default"),D=P.call(A,C),!b(D)||x(D))return D;throw TypeError("Can't convert object to primitive value")}return void 0===C&&(C="number"),w(A,C)}},"./node_modules/core-js/internals/to-property-key.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/to-property-key.js ***!
                  \***********************************************************/function(_,h,m){var b=m(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),x=m(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");_.exports=function(w){var E=b(w,"string");return x(E)?E:String(E)}},"./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
                  \*****************************************************************/function(_,h,m){var w={};w[m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",_.exports="[object z]"===String(w)},"./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-string.js ***!
                  \*****************************************************/function(_,h,m){var b=m(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");_.exports=function(x){if(b(x))throw TypeError("Cannot convert a Symbol value to a string");return String(x)}},"./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
                  !*** ./node_modules/core-js/internals/uid.js ***!
                  \***********************************************/function(_){var h=0,m=Math.random();_.exports=function(b){return"Symbol("+String(void 0===b?"":b)+")_"+(++h+m).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/use-symbol-as-uid.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js");_.exports=b&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":
/*!*********************************************************************!*\
                  !*** ./node_modules/core-js/internals/well-known-symbol-wrapped.js ***!
                  \*********************************************************************/function(_,h,m){var b=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js");h.f=b},"./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),w=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),E=m(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),k=m(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),A=m(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js"),C=x("wks"),P=b.Symbol,D=A?P:P&&P.withoutSetter||E;_.exports=function(Q){return(!w(C,Q)||!(k||"string"==typeof C[Q]))&&(C[Q]=k&&w(P,Q)?P[Q]:D("Symbol."+Q)),C[Q]}},"./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/whitespaces.js ***!
                  \*******************************************************/function(_){_.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.concat.js ***!
                  \*********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),w=m(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),E=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),k=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),A=m(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),C=m(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),P=m(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),D=m(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js"),Q=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),U=m(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),R=Q("isConcatSpreadable"),J=9007199254740991,H="Maximum allowed index exceeded",ne=U>=51||!x(function(){var Ce=[];return Ce[R]=!1,Ce.concat()[0]!==Ce}),ee=D("concat"),W=function(Ce){if(!E(Ce))return!1;var fe=Ce[R];return void 0!==fe?!!fe:w(Ce)};b({target:"Array",proto:!0,forced:!ne||!ee},{concat:function(fe){var me,se,_e,de,Ae,be=k(this),he=P(be,0),Te=0;for(me=-1,_e=arguments.length;me<_e;me++)if(W(Ae=-1===me?be:arguments[me])){if(Te+(de=A(Ae.length))>J)throw TypeError(H);for(se=0;se<de;se++,Te++)se in Ae&&C(he,Te,Ae[se])}else{if(Te>=J)throw TypeError(H);C(he,Te++,Ae)}return he.length=Te,he}})},"./node_modules/core-js/modules/es.array.iterator.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.iterator.js ***!
                  \***********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),x=m(
/*! ../internals/add-to-unscopables */
"./node_modules/core-js/internals/add-to-unscopables.js"),w=m(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),E=m(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),k=m(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),A="Array Iterator",C=E.set,P=E.getterFor(A);_.exports=k(Array,"Array",function(D,Q){C(this,{type:A,target:b(D),index:0,kind:Q})},function(){var D=P(this),Q=D.target,U=D.kind,R=D.index++;return!Q||R>=Q.length?(D.target=void 0,{value:void 0,done:!0}):"keys"==U?{value:R,done:!1}:"values"==U?{value:Q[R],done:!1}:{value:[R,Q[R]],done:!1}},"values"),w.Arguments=w.Array,x("keys"),x("values"),x("entries")},"./node_modules/core-js/modules/es.array.join.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.join.js ***!
                  \*******************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),w=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),E=m(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js"),k=[].join,A=x!=Object,C=E("join",",");b({target:"Array",proto:!0,forced:A||!C},{join:function(D){return k.call(w(this),void 0===D?",":D)}})},"./node_modules/core-js/modules/es.array.map.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.map.js ***!
                  \******************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").map;b({target:"Array",proto:!0,forced:!m(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(A){return x(this,A,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.slice.js ***!
                  \********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),w=m(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),E=m(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),k=m(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),A=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),C=m(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),P=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),Q=m(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),U=P("species"),R=[].slice,J=Math.max;b({target:"Array",proto:!0,forced:!Q},{slice:function(ne,ee){var be,he,Te,W=A(this),xe=k(W.length),Ce=E(ne,xe),fe=E(void 0===ee?xe:ee,xe);if(w(W)&&("function"!=typeof(be=W.constructor)||be!==Array&&!w(be.prototype)?x(be)&&null===(be=be[U])&&(be=void 0):be=void 0,be===Array||void 0===be))return R.call(W,Ce,fe);for(he=new(void 0===be?Array:be)(J(fe-Ce,0)),Te=0;Ce<fe;Ce++,Te++)Ce in W&&C(he,Te,W[Ce]);return he.length=Te,he}})},"./node_modules/core-js/modules/es.function.name.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.function.name.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,w=Function.prototype,E=w.toString,k=/^\s*function ([^ (]*)/,A="name";b&&!(A in w)&&x(w,A,{configurable:!0,get:function(){try{return E.call(this).match(k)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.number.constructor.js ***!
                  \***************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),x=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),w=m(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js"),E=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),k=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),A=m(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),C=m(
/*! ../internals/inherit-if-required */
"./node_modules/core-js/internals/inherit-if-required.js"),P=m(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),D=m(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),Q=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),U=m(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),R=m(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,J=m(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,H=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,ne=m(
/*! ../internals/string-trim */
"./node_modules/core-js/internals/string-trim.js").trim,ee="Number",W=x[ee],xe=W.prototype,Ce=A(U(xe))==ee,fe=function(se){if(P(se))throw TypeError("Cannot convert a Symbol value to a number");var de,Ae,Se,Oe,Ye,pt,ft,$e,_e=D(se,"number");if("string"==typeof _e&&_e.length>2)if(43===(de=(_e=ne(_e)).charCodeAt(0))||45===de){if(88===(Ae=_e.charCodeAt(2))||120===Ae)return NaN}else if(48===de){switch(_e.charCodeAt(1)){case 66:case 98:Se=2,Oe=49;break;case 79:case 111:Se=8,Oe=55;break;default:return+_e}for(pt=(Ye=_e.slice(2)).length,ft=0;ft<pt;ft++)if(($e=Ye.charCodeAt(ft))<48||$e>Oe)return NaN;return parseInt(Ye,Se)}return+_e};if(w(ee,!W(" 0o1")||!W("0b1")||W("+0x1"))){for(var me,be=function(_e){var de=arguments.length<1?0:_e,Ae=this;return Ae instanceof be&&(Ce?Q(function(){xe.valueOf.call(Ae)}):A(Ae)!=ee)?C(new W(fe(de)),Ae,be):fe(de)},he=b?R(W):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Te=0;he.length>Te;Te++)k(W,me=he[Te])&&!k(be,me)&&H(be,me,J(W,me));be.prototype=xe,xe.constructor=be,E(x,ee,be)}},"./node_modules/core-js/modules/es.object.assign.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.assign.js ***!
                  \**********************************************************/function(_,h,m){var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/object-assign */
"./node_modules/core-js/internals/object-assign.js");b({target:"Object",stat:!0,forced:Object.assign!==x},{assign:x})},"./node_modules/core-js/modules/es.object.keys.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.keys.js ***!
                  \********************************************************/function(_,h,m){var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),w=m(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");b({target:"Object",stat:!0,forced:m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js")(function(){w(1)})},{keys:function(C){return w(x(C))}})},"./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
                  \*************************************************************/function(_,h,m){var b=m(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),x=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),w=m(
/*! ../internals/object-to-string */
"./node_modules/core-js/internals/object-to-string.js");b||x(Object.prototype,"toString",w,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.regexp.to-string.js ***!
                  \*************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),x=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),w=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),E=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),k=m(
/*! ../internals/regexp-flags */
"./node_modules/core-js/internals/regexp-flags.js"),A="toString",C=RegExp.prototype,P=C[A];(E(function(){return"/a/b"!=P.call({source:"a",flags:"b"})})||P.name!=A)&&b(RegExp.prototype,A,function(){var R=x(this),J=w(R.source),H=R.flags;return"/"+J+"/"+w(void 0===H&&R instanceof RegExp&&!("flags"in C)?k.call(R):H)},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.string.iterator.js ***!
                  \************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/string-multibyte */
"./node_modules/core-js/internals/string-multibyte.js").charAt,x=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),w=m(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),E=m(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),k="String Iterator",A=w.set,C=w.getterFor(k);E(String,"String",function(P){A(this,{type:k,string:x(P),index:0})},function(){var R,D=C(this),Q=D.string,U=D.index;return U>=Q.length?{value:void 0,done:!0}:(R=b(Q,U),D.index+=R.length,{value:R,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.string.link.js ***!
                  \********************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/create-html */
"./node_modules/core-js/internals/create-html.js");b({target:"String",proto:!0,forced:m(
/*! ../internals/string-html-forced */
"./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(k){return x(this,"a","href",k)}})},"./node_modules/core-js/modules/es.symbol.description.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.description.js ***!
                  \***************************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),w=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),E=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),k=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),A=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,C=m(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),P=w.Symbol;if(x&&"function"==typeof P&&(!("description"in P.prototype)||void 0!==P().description)){var D={},Q=function(){var ee=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),W=this instanceof Q?new P(ee):void 0===ee?P():P(ee);return""===ee&&(D[W]=!0),W};C(Q,P);var U=Q.prototype=P.prototype;U.constructor=Q;var R=U.toString,J="Symbol(test)"==String(P("test")),H=/^Symbol\((.*)\)[^)]+$/;A(U,"description",{configurable:!0,get:function(){var ee=k(this)?this.valueOf():this,W=R.call(ee);if(E(D,ee))return"";var xe=J?W.slice(7,-1):W.replace(H,"$1");return""===xe?void 0:xe}}),b({global:!0,forced:!0},{Symbol:Q})}},"./node_modules/core-js/modules/es.symbol.iterator.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.iterator.js ***!
                  \************************************************************/function(_,h,m){m(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.js ***!
                  \***************************************************/function(_,h,m){"use strict";var b=m(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),x=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),w=m(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),E=m(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),k=m(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),A=m(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),C=m(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),P=m(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),D=m(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),Q=m(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),U=m(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),R=m(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),J=m(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),H=m(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),ne=m(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),ee=m(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),W=m(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),xe=m(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),Ce=m(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),fe=m(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),be=m(
/*! ../internals/object-get-own-property-names-external */
"./node_modules/core-js/internals/object-get-own-property-names-external.js"),he=m(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),Te=m(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),me=m(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),se=m(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),_e=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),de=m(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),Ae=m(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),Se=m(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),Oe=m(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),Ye=m(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),pt=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),ft=m(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),$e=m(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js"),qe=m(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),it=m(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),He=m(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,We=Se("hidden"),Be="Symbol",ut="prototype",yt=pt("toPrimitive"),e=it.set,xt=it.getterFor(Be),St=Object[ut],Kt=x.Symbol,Ut=w("JSON","stringify"),Nn=Te.f,Jn=me.f,Rt=be.f,Ao=se.f,Ln=Ae("symbols"),si=Ae("op-symbols"),Ve=Ae("string-to-symbol-registry"),fn=Ae("symbol-to-string-registry"),da=Ae("wks"),we=x.QObject,De=!we||!we[ut]||!we[ut].findChild,Qe=k&&C(function(){return 7!=xe(Jn({},"a",{get:function(){return Jn(this,"a",{value:7}).a}})).a})?function(Ft,tt,_t){var Et=Nn(St,tt);Et&&delete St[tt],Jn(Ft,tt,_t),Et&&Ft!==St&&Jn(St,tt,Et)}:Jn,Ge=function(Ft,tt){var _t=Ln[Ft]=xe(Kt[ut]);return e(_t,{type:Be,tag:Ft,description:tt}),k||(_t.description=tt),_t},lt=function(tt,_t,Et){tt===St&&lt(si,_t,Et),R(tt);var Jt=ne(_t);return R(Et),P(Ln,Jt)?(Et.enumerable?(P(tt,We)&&tt[We][Jt]&&(tt[We][Jt]=!1),Et=xe(Et,{enumerable:W(0,!1)})):(P(tt,We)||Jn(tt,We,W(1,{})),tt[We][Jt]=!0),Qe(tt,Jt,Et)):Jn(tt,Jt,Et)},gt=function(tt,_t){R(tt);var Et=H(_t),Jt=Ce(Et).concat(zi(Et));return He(Jt,function(Un){(!k||xn.call(Et,Un))&&lt(tt,Un,Et[Un])}),tt},xn=function(tt){var _t=ne(tt),Et=Ao.call(this,_t);return!(this===St&&P(Ln,_t)&&!P(si,_t))&&(!(Et||!P(this,_t)||!P(Ln,_t)||P(this,We)&&this[We][_t])||Et)},Pi=function(tt,_t){var Et=H(tt),Jt=ne(_t);if(Et!==St||!P(Ln,Jt)||P(si,Jt)){var Un=Nn(Et,Jt);return Un&&P(Ln,Jt)&&!(P(Et,We)&&Et[We][Jt])&&(Un.enumerable=!0),Un}},ki=function(tt){var _t=Rt(H(tt)),Et=[];return He(_t,function(Jt){!P(Ln,Jt)&&!P(Oe,Jt)&&Et.push(Jt)}),Et},zi=function(tt){var _t=tt===St,Et=Rt(_t?si:H(tt)),Jt=[];return He(Et,function(Un){P(Ln,Un)&&(!_t||P(St,Un))&&Jt.push(Ln[Un])}),Jt};A||(Kt=function(){if(this instanceof Kt)throw TypeError("Symbol is not a constructor");var tt=arguments.length&&void 0!==arguments[0]?ee(arguments[0]):void 0,_t=Ye(tt),Et=function(Jt){this===St&&Et.call(si,Jt),P(this,We)&&P(this[We],_t)&&(this[We][_t]=!1),Qe(this,_t,W(1,Jt))};return k&&De&&Qe(St,_t,{configurable:!0,set:Et}),Ge(_t,tt)},de(Kt[ut],"toString",function(){return xt(this).tag}),de(Kt,"withoutSetter",function(Ft){return Ge(Ye(Ft),Ft)}),se.f=xn,me.f=lt,Te.f=Pi,fe.f=be.f=ki,he.f=zi,ft.f=function(Ft){return Ge(pt(Ft),Ft)},k&&(Jn(Kt[ut],"description",{configurable:!0,get:function(){return xt(this).description}}),E||de(St,"propertyIsEnumerable",xn,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Kt}),He(Ce(da),function(Ft){$e(Ft)}),b({target:Be,stat:!0,forced:!A},{for:function(Ft){var tt=ee(Ft);if(P(Ve,tt))return Ve[tt];var _t=Kt(tt);return Ve[tt]=_t,fn[_t]=tt,_t},keyFor:function(tt){if(!U(tt))throw TypeError(tt+" is not a symbol");if(P(fn,tt))return fn[tt]},useSetter:function(){De=!0},useSimple:function(){De=!1}}),b({target:"Object",stat:!0,forced:!A,sham:!k},{create:function(tt,_t){return void 0===_t?xe(tt):gt(xe(tt),_t)},defineProperty:lt,defineProperties:gt,getOwnPropertyDescriptor:Pi}),b({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:ki,getOwnPropertySymbols:zi}),b({target:"Object",stat:!0,forced:C(function(){he.f(1)})},{getOwnPropertySymbols:function(tt){return he.f(J(tt))}}),Ut&&b({target:"JSON",stat:!0,forced:!A||C(function(){var Ft=Kt();return"[null]"!=Ut([Ft])||"{}"!=Ut({a:Ft})||"{}"!=Ut(Object(Ft))})},{stringify:function(tt,_t,Et){for(var Ro,Jt=[tt],Un=1;arguments.length>Un;)Jt.push(arguments[Un++]);if(Ro=_t,(Q(_t)||void 0!==tt)&&!U(tt))return D(_t)||(_t=function(Ha,Ti){if("function"==typeof Ro&&(Ti=Ro.call(this,Ha,Ti)),!U(Ti))return Ti}),Jt[1]=_t,Ut.apply(null,Jt)}}),Kt[ut][yt]||_e(Kt[ut],yt,Kt[ut].valueOf),qe(Kt,Be),Oe[We]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/modules/web.dom-collections.for-each.js ***!
                  \**********************************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),w=m(
/*! ../internals/array-for-each */
"./node_modules/core-js/internals/array-for-each.js"),E=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js");for(var k in x){var A=b[k],C=A&&A.prototype;if(C&&C.forEach!==w)try{E(C,"forEach",w)}catch{C.forEach=w}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/modules/web.dom-collections.iterator.js ***!
                  \**********************************************************************/function(_,h,m){var b=m(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),x=m(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),w=m(
/*! ../modules/es.array.iterator */
"./node_modules/core-js/modules/es.array.iterator.js"),E=m(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),k=m(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),A=k("iterator"),C=k("toStringTag"),P=w.values;for(var D in x){var Q=b[D],U=Q&&Q.prototype;if(U){if(U[A]!==P)try{E(U,A,P)}catch{U[A]=P}if(U[C]||E(U,C,D),x[D])for(var R in w)if(U[R]!==w[R])try{E(U,R,w[R])}catch{U[R]=w[R]}}}},"./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
                  !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
                  \******************************************************/function(_){var m;m=function(){"use strict";function m(we){return"function"==typeof we}var x=Array.isArray?Array.isArray:function(we){return"[object Array]"===Object.prototype.toString.call(we)},w=0,E=void 0,k=void 0,A=function(De,Qe){Ce[w]=De,Ce[w+1]=Qe,2===(w+=2)&&(k?k(fe):he())};var D=typeof window<"u"?window:void 0,Q=D||{},U=Q.MutationObserver||Q.WebKitMutationObserver,R=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),J=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function xe(){var we=setTimeout;return function(){return we(fe,1)}}var Ce=new Array(1e3);function fe(){for(var we=0;we<w;we+=2)(0,Ce[we])(Ce[we+1]),Ce[we]=void 0,Ce[we+1]=void 0;w=0}var he=void 0;function Te(we,De){var Qe=this,Ge=new this.constructor(_e);void 0===Ge[se]&&Ut(Ge);var lt=Qe._state;if(lt){var gt=arguments[lt-1];A(function(){return e(lt,Ge,gt,Qe._result)})}else ut(Qe,Ge,we,De);return Ge}function me(we){if(we&&"object"==typeof we&&we.constructor===this)return we;var Qe=new this(_e);return it(Qe,we),Qe}he=R?function H(){return function(){return process.nextTick(fe)}}():U?function ee(){var we=0,De=new U(fe),Qe=document.createTextNode("");return De.observe(Qe,{characterData:!0}),function(){Qe.data=we=++we%2}}():J?function W(){var we=new MessageChannel;return we.port1.onmessage=fe,function(){return we.port2.postMessage(0)}}():void 0===D?function be(){try{var we=Function("return this")().require("vertx");return E=we.runOnLoop||we.runOnContext,function ne(){return typeof E<"u"?function(){E(fe)}:xe()}()}catch{return xe()}}():xe();var se=Math.random().toString(36).substring(2);function _e(){}var de=void 0,Ae=1,Se=2;function qe(we,De,Qe){De.constructor===we.constructor&&Qe===Te&&De.constructor.resolve===me?function $e(we,De){De._state===Ae?We(we,De._result):De._state===Se?Be(we,De._result):ut(De,void 0,function(Qe){return it(we,Qe)},function(Qe){return Be(we,Qe)})}(we,De):void 0===Qe?We(we,De):m(Qe)?function ft(we,De,Qe){A(function(Ge){var lt=!1,gt=function pt(we,De,Qe,Ge){try{we.call(De,Qe,Ge)}catch(lt){return lt}}(Qe,De,function($t){lt||(lt=!0,De!==$t?it(Ge,$t):We(Ge,$t))},function($t){lt||(lt=!0,Be(Ge,$t))});!lt&&gt&&(lt=!0,Be(Ge,gt))},we)}(we,De,Qe):We(we,De)}function it(we,De){if(we===De)Be(we,function Oe(){return new TypeError("You cannot resolve a promise with itself")}());else if(function h(we){var De=typeof we;return null!==we&&("object"===De||"function"===De)}(De)){var Qe=void 0;try{Qe=De.then}catch(Ge){return void Be(we,Ge)}qe(we,De,Qe)}else We(we,De)}function He(we){we._onerror&&we._onerror(we._result),yt(we)}function We(we,De){we._state===de&&(we._result=De,we._state=Ae,0!==we._subscribers.length&&A(yt,we))}function Be(we,De){we._state===de&&(we._state=Se,we._result=De,A(He,we))}function ut(we,De,Qe,Ge){var lt=we._subscribers,gt=lt.length;we._onerror=null,lt[gt]=De,lt[gt+Ae]=Qe,lt[gt+Se]=Ge,0===gt&&we._state&&A(yt,we)}function yt(we){var De=we._subscribers,Qe=we._state;if(0!==De.length){for(var Ge=void 0,lt=void 0,gt=we._result,$t=0;$t<De.length;$t+=3)lt=De[$t+Qe],(Ge=De[$t])?e(Qe,Ge,lt,gt):lt(gt);we._subscribers.length=0}}function e(we,De,Qe,Ge){var lt=m(Qe),gt=void 0,$t=void 0,xn=!0;if(lt){try{gt=Qe(Ge)}catch(Pi){xn=!1,$t=Pi}if(De===gt)return void Be(De,function Ye(){return new TypeError("A promises callback cannot return that same promise.")}())}else gt=Ge;De._state!==de||(lt&&xn?it(De,gt):!1===xn?Be(De,$t):we===Ae?We(De,gt):we===Se&&Be(De,gt))}var St=0;function Ut(we){we[se]=St++,we._state=void 0,we._result=void 0,we._subscribers=[]}var Jn=function(){function we(De,Qe){this._instanceConstructor=De,this.promise=new De(_e),this.promise[se]||Ut(this.promise),x(Qe)?(this.length=Qe.length,this._remaining=Qe.length,this._result=new Array(this.length),0===this.length?We(this.promise,this._result):(this.length=this.length||0,this._enumerate(Qe),0===this._remaining&&We(this.promise,this._result))):Be(this.promise,function Nn(){return new Error("Array Methods must be provided an Array")}())}return we.prototype._enumerate=function(Qe){for(var Ge=0;this._state===de&&Ge<Qe.length;Ge++)this._eachEntry(Qe[Ge],Ge)},we.prototype._eachEntry=function(Qe,Ge){var lt=this._instanceConstructor,gt=lt.resolve;if(gt===me){var $t=void 0,xn=void 0,Pi=!1;try{$t=Qe.then}catch(zi){Pi=!0,xn=zi}if($t===Te&&Qe._state!==de)this._settledAt(Qe._state,Ge,Qe._result);else if("function"!=typeof $t)this._remaining--,this._result[Ge]=Qe;else if(lt===fn){var ki=new lt(_e);Pi?Be(ki,xn):qe(ki,Qe,$t),this._willSettleAt(ki,Ge)}else this._willSettleAt(new lt(function(zi){return zi(Qe)}),Ge)}else this._willSettleAt(gt(Qe),Ge)},we.prototype._settledAt=function(Qe,Ge,lt){var gt=this.promise;gt._state===de&&(this._remaining--,Qe===Se?Be(gt,lt):this._result[Ge]=lt),0===this._remaining&&We(gt,this._result)},we.prototype._willSettleAt=function(Qe,Ge){var lt=this;ut(Qe,void 0,function(gt){return lt._settledAt(Ae,Ge,gt)},function(gt){return lt._settledAt(Se,Ge,gt)})},we}();var fn=function(){function we(De){this[se]=function Kt(){return St++}(),this._result=this._state=void 0,this._subscribers=[],_e!==De&&("function"!=typeof De&&function si(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof we?function xt(we,De){try{De(function(Ge){it(we,Ge)},function(Ge){Be(we,Ge)})}catch(Qe){Be(we,Qe)}}(this,De):function Ve(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return we.prototype.catch=function(Qe){return this.then(null,Qe)},we.prototype.finally=function(Qe){var lt=this.constructor;return m(Qe)?this.then(function(gt){return lt.resolve(Qe()).then(function(){return gt})},function(gt){return lt.resolve(Qe()).then(function(){throw gt})}):this.then(Qe,Qe)},we}();return fn.prototype.then=Te,fn.all=function Rt(we){return new Jn(this,we).promise},fn.race=function Ao(we){var De=this;return x(we)?new De(function(Qe,Ge){for(var lt=we.length,gt=0;gt<lt;gt++)De.resolve(we[gt]).then(Qe,Ge)}):new De(function(Qe,Ge){return Ge(new TypeError("You must pass an array to race."))})},fn.resolve=me,fn.reject=function Ln(we){var Qe=new this(_e);return Be(Qe,we),Qe},fn._setScheduler=function C(we){k=we},fn._setAsap=function P(we){A=we},fn._asap=A,fn.polyfill=function da(){var we=void 0;if(typeof global<"u")we=global;else if(typeof self<"u")we=self;else try{we=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var De=we.Promise;if(De){var Qe=null;try{Qe=Object.prototype.toString.call(De.resolve())}catch{}if("[object Promise]"===Qe&&!De.cast)return}we.Promise=fn},fn.Promise=fn,fn},_.exports=m()},html2canvas:
/*!******************************!*\
                  !*** external "html2canvas" ***!
                  \******************************/function(_){"use strict";_.exports=p},jspdf:
/*!************************!*\
                  !*** external "jspdf" ***!
                  \************************/function(_){"use strict";_.exports=M}},T={};function u(_){var h=T[_];if(void 0!==h)return h.exports;var m=T[_]={exports:{}};return j[_].call(m.exports,m,m.exports,u),m.exports}u.n=function(_){var h=_&&_.__esModule?function(){return _.default}:function(){return _};return u.d(h,{a:h}),h},u.d=function(_,h){for(var m in h)u.o(h,m)&&!u.o(_,m)&&Object.defineProperty(_,m,{enumerable:!0,get:h[m]})},u.o=function(_,h){return Object.prototype.hasOwnProperty.call(_,h)},u.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var g={};return function(){"use strict";u.r(g);var _=u(
/*! ./worker.js */
"./src/worker.js"),x=(u(
/*! ./plugin/jspdf-plugin.js */
"./src/plugin/jspdf-plugin.js"),u(
/*! ./plugin/pagebreaks.js */
"./src/plugin/pagebreaks.js"),u(
/*! ./plugin/hyperlinks.js */
"./src/plugin/hyperlinks.js"),function w(E,k){var A=new w.Worker(k);return E?A.from(E).save():A});x.Worker=_.default,g.default=x}(),g.default}())},8897:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Utils=q.CONST=void 0;class S{static load(j){let T=JSON.parse(j);Object.assign(this,T)}}q.CONST=S,S.RENDER_SCALE=2,S.LINE_SMALL_HEIGHT=7*S.RENDER_SCALE,S.SPLIT_MARGIN=3*S.RENDER_SCALE,S.INTERSEC_MARGIN=20*S.RENDER_SCALE,S.LINE_MAGIN=2*S.RENDER_SCALE,S.MARGIN_LEFT=2*S.RENDER_SCALE,S.ENABLE_IMAGE_PROCESS=!0,S.STEP_SIZE=2,S.CROP_FULL_WIDTH=!0,S.OVERLAP=.5,S.QUESTION_PATTERN=[],S.QUESTION_PATTERN2=[],S.BREAK_LINE_PATTERN=[],S.SECTION_PATTERN_LOWER=[],S.SECTION_PATTERN_NORMAL=[],S.KICK_PATTERN=[],S.TVCN_CHAR=[],S.HET_PATTERN=[],S.DAPAN_PATTERN=[],S.HUONGDAN_PATTERN=[],S.MULTIPLE_ANS_PATTERN=[],S.DRAW_RESULT="",S.SKIP_CHAR=[],S.FOOTER_PATTERN=[],S.HELP_ANS_PATTERN=[],q.Utils=class M{static capitalizeFirstLetter(j){return j.charAt(0).toUpperCase()+j.slice(1)}static tagLang(j){let T=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return T.has(j)?T.get(j):j}static parseInclude(j){var T;let u=j.split("=>"),g=u.length>1?u[1]:-1,x=u[0];x=x.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let R,w=x.split("."),E=[],k=[],A=[],C=[],P=[],D=[],Q=[],U=[],J=[],H=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),ne=[];for(let W=w.length-1;W>=0;W--){let xe=w[W].trim();if(/^\d*$/.test(xe)){R=+xe;continue}let Ce=xe.split(",");for(let fe of Ce){let be=fe.split(":"),he=be[0],Te=null!==(T=be[1])&&void 0!==T?T:"";if(/^G[\-\d]+$/.test(he.trim()))E.push(+he.trim().substring(1));else if(/^Q[\-\d]+$/.test(he.trim()))A.push(+he.trim().substring(1)),U.push(Te),ne.push({type:"QUEST",id:+he.trim().substring(1)});else if(/^C[\-\d]+$/.test(he.trim())){let me=+he.trim().substring(1);C.push(me),D.push(Te),ne.push({type:""!=Te?"SHARE":"CATEGORY",id:me})}else if(/^K[\-\d]+$/.test(he.trim())){let me=+he.trim().substring(1);C.push(me),D.push(Te),ne.push({type:""!=Te?"SHARE":"KNOWLEDGE",id:me})}else if(/^T[\-\d]+$/.test(he.trim()))k.push(+he.trim().substring(1)),Q.push(Te),ne.push({type:"EXAM",id:+he.trim().substring(1),groupIds:E});else if(/^F:/.test(fe.trim())){let me=fe.trim().substring(2);J.push(H.has(me)?H.get(me):me)}}if(ne.length>0){if(J.length>0){let fe=["TL","TN","\u0110T","ES","MC","FB"];for(let be of ne)be.tags=J.filter(he=>fe.indexOf(he)<0),be.answerTypes=J.filter(he=>fe.indexOf(he)>=0).map(he=>"TL"==he||"ES"==he?3:"TN"==he||"MC"==he?1:4)}break}}return A.length>0&&(R=A.length),P.push(...D),P.push(...Q),P.push(...U),{paths:ne,shareTypes:P,catId:C,examId:k,tag:J,groupId:E,questId:A,getNum:R,idx:g}}static getNumberFromStr(j){let T=j.match(/(\d+)/);return T?T[0]:""}static removeAccents(j){let T=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const u of T){let g=new RegExp("["+u.substring(1)+"]","g");j=j.replace(g,u[0])}return j}static zeroPad(j,T){return j=j||2,(new Array(j).join("0")+T).slice(-1*j)}}},81874:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ExamParser=void 0;const M=S(8897),p=S(53781),j=S(34143),T=S(13826),u=S(51453),g=S(54716),_=S(7411),h=S(52169),m=S(71598),b=S(60987),x=S(2630),w=S(37805),E=S(2721);q.ExamParser=class k{constructor(C){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",M.CONST.load(C)}setLang(C){this.lang=C,this.DEF_QUEST_NAME="vi"==C?"c\xe2u ":"question "}parse(C,P,D){var Q,U,R,J,H,ne,ee,W,xe,Ce;let fe=this.findItems(C,D);P&&console.log("items",fe);let be=new Map,he=[],Te=null,me=0,se="main",_e=0,de=0,Ae=[],Se=!0,Oe=new Map;for(let $e=0;$e<fe.length;$e++){let qe=fe[$e],it=$e==fe.length-1?void 0:fe[$e+1],He=this.getPartInfo(C,qe,it);if(this.loadText(C,He),qe.type==m.SectionParser.TYPE_NAME&&"main"==se&&(me++,he.push({label:me,parts:He,answers:[],isGroup:!0})),qe.type==h.QuestionParser.TYPE_NAME){if(it&&it.type==p.AnswerParser.TYPE_NAME&&it.pos[2]>0){let ut;for(let yt=$e+1;yt<fe.length;yt++)if(fe[yt].type!=p.AnswerParser.TYPE_NAME){ut=fe[yt];break}He=this.getPartInfo(C,qe,ut),this.loadText(C,He)}let We=qe.label?+qe.label:0,Be=be.get(We);Be&&"main"!=se?(Be.help=He,Te=Be):"main"==se&&(Be={label:We,olabel:qe.olabel,answers:[],parts:He},me>0&&(Be.group=me),be.set(We,Be),he.push(Be),Te=Be)}if(qe.type==p.AnswerParser.TYPE_NAME&&Te){let We=!1;if(1==He.length){let xt=C[He[0].lineIdx].replace(/\|/g,"").trim().match(M.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=xt&&xt.length>0&&(We=!0)}let Be=""==qe.olabel;qe.pos[2]>0&&(He=[He[0]],He[0].e=qe.pos[2],this.loadText(C,He),Be=!0);let ut={label:null!==(Q=qe.label)&&void 0!==Q?Q:"",isCorrect:"*"==qe.extInfo,parts:Be?[He[0]]:He,isInline:Be,olabel:qe.olabel};Te.answers.push(ut),Te.isFixAns=Be||We}if(qe.type==_.IncludeParser.TYPE_NAME)if(qe.label&&/\.\d*$/.test(qe.label)){let We=qe.label.split("."),Be=+We[We.length-1],ut=null!==(U=He[0].text)&&void 0!==U?U:"",yt=null!==(R=Oe.get(ut))&&void 0!==R?R:-1;if(yt++,Oe.set(ut,yt),0==Be){me++;let St=ut+"=>"+yt+"-0",Kt=[];Kt.push(...He),Kt[0]={lineIdx:He[0].lineIdx,s:0,b:0,text:St},he.push({label:me,parts:Kt,answers:[],isGroup:!0});continue}let e=Te?Te.label:0,xt=0;for(let St=0;St<Be;St++){xt++;let Kt=ut+"=>"+yt+"-"+St,Ut=[];Ut.push(...He),Ut[0]={lineIdx:He[0].lineIdx,s:0,b:0,text:Kt};let Nn={label:e+xt,olabel:Te?null===(J=Te.olabel)||void 0===J?void 0:J.replace(/\d+/,e+xt+""):this.DEF_QUEST_NAME+(e+xt)+".",answers:[],parts:Ut};be.set(Nn.label,Nn),he.push(Nn),Te=Nn}}else if(qe.label&&/\.Q\d+(,Q\d+)*$/.test(qe.label)){let Be=qe.label.split(".").pop(),ut=null!==(H=Be?.split(",").length)&&void 0!==H?H:0;for(let yt=0;yt<ut;yt++){let e={lineIdx:He[0].lineIdx,s:0,b:0,text:He[0].text+"=>0-"+yt},xt=Te?Te.label:0,St={label:xt+1,olabel:Te?null===(ne=Te.olabel)||void 0===ne?void 0:ne.replace(/\d+/,xt+1+""):this.DEF_QUEST_NAME+(xt+1)+".",answers:[],parts:[e]};be.set(St.label,St),he.push(St),Te=St}}qe.type==g.HuongDanParser.TYPE_NAME&&Te&&(He.splice(0,1),it&&it.type==h.QuestionParser.TYPE_NAME&&it.label&&!be.has(+it.label)||!it||it.type==m.SectionParser.TYPE_NAME?"main"==se&&(Te.help=He):"main"==se&&(se="info",_e=null!==(ee=qe.lineIdx)&&void 0!==ee?ee:0),_e>0&&0==de&&(de=null!==(W=qe.lineIdx)&&void 0!==W?W:0)),(qe.type==u.HetParser.TYPE_NAME||qe.type==T.DapAnParser.TYPE_NAME)&&(se="info",_e=null!==(xe=qe.lineIdx)&&void 0!==xe?xe:0),qe.type==j.DapAnChiTietParser.TYPE_NAME&&Se&&Ae.push(qe),qe.type!=j.DapAnChiTietParser.TYPE_NAME&&Ae.length>0&&(Se=!1)}let Ye=new j.DapAnChiTietParser,pt=Ye.getAnsMC(C,Ae),ft=new Map;if(_e>0){let $e=de>0?C.slice(_e,de):C.slice(_e);ft=Ye.getAnsStr($e)}for(const $e of he){if($e.isGroup)continue;let qe=pt.get($e.label),it=ft.get($e.label),He=null;if($e.help&&(He=Ye.getAnsFromHelp($e.help,C)),$e.answers.length>0){let We=$e.answers.filter(Be=>Be.isCorrect);for(let Be=1;Be<We.length;Be++)We[Be].isCorrect=!1;if(0==We.length){let Be=null!==(Ce=qe??He)&&void 0!==Ce?Ce:it?it[0]:"";for(const ut of $e.answers)if(ut.label==Be){ut.isCorrect=!0;break}}}else $e.strAns=it}return P&&console.log("lstQuest",he),he}cleanRes(C){for(const P of C){for(let D=P.parts.length-1;D>=0;D--)""==P.parts[D].text&&P.parts.splice(D,1);for(const D of P.answers)for(let Q=D.parts.length-1;Q>=0;Q--)""==D.parts[Q].text&&D.parts.splice(Q,1);if(P.help)for(let D=P.help.length-1;D>=0;D--)""==P.help[D].text&&P.help.splice(D,1)}}getPartInfo(C,P,D){var Q,U;let R=null!==(Q=P.lineIdx)&&void 0!==Q?Q:0,J=null!==(U=D?.lineIdx)&&void 0!==U?U:C.length-1;if(R==J)return D?[{lineIdx:R,b:P.pos[0],s:P.pos[1],e:D?.pos[0]}]:[{lineIdx:R,b:P.pos[0],s:P.pos[1]}];{let H=[];H.push({lineIdx:R,b:P.pos[0],s:P.pos[1]});for(let ne=R+1;ne<J;ne++)H.push({lineIdx:ne,b:0,s:0});if(D){let ne=D?.pos[0];""!=C[J].substring(0,ne).replace(/\|/g,"").trim()&&H.push({lineIdx:J,b:0,s:0,e:ne})}else H.push({lineIdx:J,b:0,s:0});return H}}loadText(C,P){for(const D of P)D.text=C[D.lineIdx].substring(D.s,D.e)}findItems(C,P){let D=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];P&&(D=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let Q=[new w.RemoveRule,new b.ModifyAnsRule,new E.SameKindRule,new x.RemoveDupRule],U=[{parser:new j.DapAnChiTietParser,also:[2]},{parser:new m.SectionParser,from:[0],to:[1],also:[3]},{parser:new h.QuestionParser,from:[0],to:[1],also:[3]},{parser:new p.AnswerParser},{parser:new u.HetParser,to:[2]},{parser:new T.DapAnParser,to:[2],also:[6]},{parser:new g.HuongDanParser},{parser:new _.IncludeParser,from:[0],to:[1]}],R=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],J=R[0],H=[],ne=0;for(const xe of C)if(""!=xe){for(const Ce of J.expect){let fe=U[Ce],be=fe.parser.parse(xe);if(be.length>0){if(be.forEach(he=>he.lineIdx=ne),H.push(...be),fe.parser.TYPE==g.HuongDanParser.TYPE_NAME){let he=H.filter(se=>se.type==h.QuestionParser.TYPE_NAME).length,Te=H.filter(se=>se.type==g.HuongDanParser.TYPE_NAME).length,me=H.filter(se=>se.type==T.DapAnParser.TYPE_NAME).length;if(J.name==R[1].name&&he>1&&0==Te){J=R[2];let se=R[2].expect.indexOf(6);se>=0&&R[2].expect.splice(se,1)}else if(J.name==R[2].name){me>0&&U[0].parser.off();let se=R[2].expect.indexOf(6);se>=0&&R[2].expect.splice(se,1)}}if(fe.to){let he=0;for(const Te of fe.to)(fe.from&&R[fe.from[he]]==J||!fe.from)&&(J=R[Te])}if(fe.also)for(const he of fe.also){let me=H[H.length-1].pos[1],se=U[he].parser.parse(xe.substring(me));se.length>0&&(se.forEach(_e=>{_e.lineIdx=ne;for(let de=0;de<_e.pos.length;de++)_e.pos[de]=_e.pos[de]+me}),H.push(...se))}break}}ne++}else ne++;let ee=[];for(const xe of D)for(const Ce of Q){let fe=Ce.load(xe);if(fe){ee.push(fe);break}}let W=0;for(;W<H.length;){for(const xe of ee){let Ce=H.length;if(xe.run(H,W)){let fe=Ce-H.length;fe>0&&(W-=fe+1);break}}W++}return H}}},99737:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.EditorApiService=void 0,q.EditorApiService=class S{}},71834:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ExamIntellisense=void 0;const M=S(81874),p=S(91765),j=S(74375),T=S(50270),u=S(96701),g=S(65344),_=S(30549);q.ExamIntellisense=class h{constructor(b){this.conf=b,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new M.ExamParser(b),this.apiService=null}setSingleMode(b){this.singleMode=b}setLines(b){this._lines=b}setApiService(b){this.apiService=b}parse(){return this._lstQuest=this.exParser.parse(this._lines,!0,!0),this._lstQuest}getAutofillValue(b,x,w){var E;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[b].trim()))return[];let A=[],C=this.getCurPos(b,x),P=C[0],D=C[1],Q=C[2],U=this._lines[b>0?b-1:0];if(P&&P.parts.length>0&&null!==(E=P.parts[0].text)&&void 0!==E&&E.trim().startsWith("[@"),U.startsWith("[@")||""==U.trim())return[];if(D&&P){let R="ABCDEFGHIJKLMN",J=R.indexOf(D.label),H=R[J+1]+D.olabel+" ",ne=D.label+D.olabel+" ";if(!this.singleMode&&this._lines[D.parts[0].lineIdx].trim()==ne.trim()&&D.parts[0].lineIdx!=b){let ee=P.parts[0],xe=this._lines[ee.lineIdx].substring(ee.b,ee.s).replace(/\d+/,P.label+1+"")+" ";return A.push(`${D.parts[0].lineIdx}|0|${ne.length}|`),A.push(`${b}|${x}|${x}|${xe}`),A}if(D.label<"D"&&("enter"!=w||b>0&&""!=this._lines[b-1].trim()&&D.parts[0].lineIdx!=b))return A.push(`${b}|${x}|${x}|${H}`),A;if(!this.singleMode&&D.label>="D"&&D.parts[0].lineIdx!=b&&"enter"==w&&b==this._lines.length-1){let ee=P.parts[0],xe=this._lines[ee.lineIdx].substring(ee.b,ee.s).replace(/\d+/,P.label+1+"")+" ";return A.push(`${b}|${x}|${x}|\n${xe}`),A}}if(!D&&!Q&&P&&"enter"==w&&""==this._lines[b].trim()&&b>0&&""!=this._lines[b-1].trim()){let R=P.parts[0],J=this._lines[R.lineIdx].substring(R.s).trim();if(this.singleMode||""!=J)if(0==P.answers.length)A.push(`${b}|${x}|${x}|A. `);else if(!this.singleMode){let H=P.parts[0],ee=this._lines[H.lineIdx].substring(H.b,H.s).replace(/\d+/,P.label+1+"")+" ";A.push(`${b}|${x}|${x}|${ee}`)}return A}return A}getSuggestions(b,x,w,E){return new Promise(k=>{var A,C;let P=null!==(A=E?.substring(0,x))&&void 0!==A?A:"",D=this.singleMode?[new p.AnsSugg,new T.EndSugg,new j.ChooseSugg]:[new u.IncludeSugg(this.apiService,k),new g.QuestSugg,new p.AnsSugg,new _.SectionSugg,new T.EndSugg,new j.ChooseSugg],Q=[],U=this.getCurPos(b,x),R=U[0],J=U[1],ee=R?{type:U[2]?"h":J?"a":"q",quest:R,ansLabel:J?J.label:void 0,secLabel:R.group?null===(C=this._lstQuest.filter(W=>W.isGroup).pop())||void 0===C?void 0:C.parts[0].text:void 0,lineIdx:b,col:x}:void 0;for(let W of D){let xe=W.run(P,w,ee);if(1==xe.length&&"-1"==xe[0])return;Q.push(...xe)}k(Q)})}getEditHint(){let x=0,w=[],E=!1;for(const k of this._lstQuest){if(k.isGroup)continue;let A="",C="A".charCodeAt(0)-1,P=!1;for(const D of k.answers){if(""==D.olabel)break;if(A+=D.label,!P&&!"ABCDEFGHIJKLMN".startsWith(A)&&(P=!0),C++,P){let Q=D.parts[0],U="*"==this._lines[Q.lineIdx].substring(Q.b,Q.b+1)?1:0;w.push(`${Q.lineIdx}|${Q.b+U}|${Q.b+U+1}|${String.fromCharCode(C)}`)}}if(!E&&k.label-x<=0&&x>0&&(E=!0),E){let D=k.parts[0],U=this._lines[D.lineIdx].substring(D.b,D.s).replace(/\d+/,x+1+"");w.push(`${D.lineIdx}|${D.b}|${D.s}|${U}`),x++}else x=k.label}return w}getCurPos(b,x){var w,E;let k=!1,A=null,C=null,P=!1,D=!1;for(const Q of this._lstQuest)if(!Q.isGroup){for(const U of Q.parts)if(U.lineIdx==b){k=!0,A=Q,C=null,Q.parts.length>0&&null!==(w=Q.parts[0].text)&&void 0!==w&&w.trim().startsWith("[@")&&(D=!0,k=!1);break}if(D&&Q.parts.length>0&&(null===(E=Q.parts[0].text)||void 0===E||!E.trim().startsWith("[@")))break;for(const U of Q.answers)for(const R of U.parts)if(R.lineIdx==b&&R.s<=x&&(!R.e||R.e>=x)){k=!0,A=Q,C=U;break}if(k)break;if(Q.help)for(const U of Q.help)if(U.lineIdx==b&&U.s<=x&&(!U.e||U.e>=x)){k=!0,A=Q,C=null,P=!0;break}if(k)break}return[A,C,P]}}},91765:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.AnsSugg=void 0;const M=S(47078);q.AnsSugg=class p extends M.Sugg{run(T,u,g){if(!g||"h"==g.type||/^\[?\s*@/.test(T))return[];let _=g.ansLabel?String.fromCharCode(g.ansLabel.charCodeAt(0)+1)+".":"A.";return[_+"|"+_+" "]}}},74375:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ChooseSugg=void 0;const M=S(47078);q.ChooseSugg=class p extends M.Sugg{run(T,u,g){if(T!=u||!g)return[];let _=[];if("h"==g.type&&g.quest)for(let h of g.quest.answers)_.push(`azt_lang_sugg_choose ${h.label}|azt_lang_sugg_choose ${h.label}`);return _}}},50270:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.EndSugg=void 0;const M=S(47078);q.EndSugg=class p extends M.Sugg{run(T,u){return T!=u?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},96701:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IncludeSugg=void 0;const M=S(8897),p=S(47078);q.IncludeSugg=class j extends p.Sugg{constructor(u,g){super(),this.apiService=u,this.resolve=g}run(u){let g=u;if(g.startsWith("@[")&&(g=g.substring(1)),/^\[?\s*@/.test(g)&&null!=this.apiService){let _=g.replace("]..","].").split("].").map(D=>D.replace("]","").replace("[","").replace("@","").trim()),h=_[_.length-1],m=0,b=!0,x="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",w="azt_lang_sugg_get_all|[ALL]|snippet",E=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],k="",A="",P=g.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let D=P.next();if(D.done)break;A="user_"+D.value[1]}if(_.length>1){h.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(h)&&(k=h.substring(0,1),h="");let D=_[_.length-2];if(D.startsWith("F:"))return this.resolve([x]),["-1"];if(D.indexOf(",")>=0){let Q=[];return""==k&&Q.push(x),Q.push(...E),this.resolve(Q),["-1"]}if(h.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(h))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(D))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(D)&&(m=+D.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(D)&&(A="user")),/^T[\-\d]+:/.test(D)&&(m=+D.split(":")[0].trim().substring(1),b=!1),/^G[\-\d]+:/.test(D)){let Q=D.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${g}[azt_lang_sugg_get_all ${Q} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+g+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(D)||/^Q[\-\d]+:/.test(h))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(D)||/^Q[\-\d]+:/.test(h))return this.resolve([]),["-1"]}if(b)return"F"==k?(this.resolve(E),["-1"]):(this.apiService.searchRes(A,m).then(D=>{let Q="";-1==m&&(Q=":user-"),(0==m||-1==m)&&(x="");let U=D.map(R=>{let J=R.name;return J=J.replaceAll(/[\[\],\.\-]+/g,""),`${J}|[@${("cat"==R.type?"C":"T")+R.id}:${Q}${J}].|${"cat"==R.type?"folder":"file"}`});""!=x&&""==k&&(U.push(x),U.push(...E)),this.resolve(U)}),["-1"]);if(g.endsWith(".")||g.endsWith(",")){let D=Math.abs(m);return this.apiService.getQuestion(D).then(Q=>{let U=Q.map(H=>{let ne=("group"==H.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+H.label,ee=("group"==H.type?"G":"Q")+H.id,W="group"==H.type?".":"",xe=H.content,Ce="group"==H.type?"class":"function",fe="group"==H.type?Q.filter(me=>me.groupId==H.id).length+"-":"",be="group"!=H.type&&H.groupId?"G"+M.Utils.zeroPad(3,H.groupId):"G000";return"group"==H.type&&(be="G"+M.Utils.zeroPad(3,H.id)),{name:ne,code:ee,groupQnum:fe,posfix:W,icon:Ce,sort:`${be}-${"group"==H.type?"G"+M.Utils.zeroPad(3,H.id):"Q"+M.Utils.zeroPad(10,H.id)}`,doc:xe}});U.sort((H,ne)=>H.sort>ne.sort?1:-1);let R=U.map(H=>`${H.name}|[@${H.code}:${H.groupQnum}${H.name}]${H.posfix}|${H.icon}|${H.sort}|${H.doc}`),J=[];if(""!=x){""==k&&(J.push(x),J.push(...E));let H=w.split("|");H[1]=U.map((ne,ee)=>(0==ee?"":g)+`[@${ne.code}:${ne.groupQnum}${ne.name}]`+(ne.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),J.push(H.join("|"))}J.push(...R),"F"==k&&(J=E),this.resolve(J)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},65344:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QuestSugg=void 0;const M=S(8897),p=S(47078);q.QuestSugg=class j extends p.Sugg{run(u,g,_){var h;if(u!=g)return[];if(!_)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let m=null!==(h=_.quest.olabel)&&void 0!==h?h:"azt_lang_sugg_question_cc 1.",b=+M.Utils.getNumberFromStr(m),x=m.replace(/\d+/,b+1+"");return x=_.quest.olabel?M.Utils.capitalizeFirstLetter(x):x,[M.Utils.removeAccents(x)+"|"+x+" ",x+"|"+x+" "]}}},30549:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SectionSugg=q.toArabic=q.isRoman=q.toRoman=q.BaseNumbers=q.RomanNumber=void 0;const M=S(8897),p=S(47078);class j{constructor(m,b){this.baseUnits=0,this.thousands=0,this.num=m,this.str=b}}function T(h){let m,b;if(h<=0||h>3999)return"";{m=0;let x="";for(h=Math.floor(h);h>0;)b=q.BaseNumbers[m],0===Math.floor(h/b.num)?++m:(x+=b.str,h-=b.num);return x}}function u(h){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(h)}function g(h){let m=h.toUpperCase();if(!u(m))return null;let b=0,x=0;for(;m.length>0&&x<q.BaseNumbers.length;){const w=q.BaseNumbers[x];m.startsWith(w.str)?(b+=w.num,m=m.substring(w.str.length)):x++}return m.length>0?null:b}q.RomanNumber=j,q.BaseNumbers=[new j(1e3,"M"),new j(900,"CM"),new j(500,"D"),new j(400,"CD"),new j(100,"C"),new j(90,"XC"),new j(50,"L"),new j(40,"XL"),new j(10,"X"),new j(9,"IX"),new j(5,"V"),new j(4,"IV"),new j(1,"I")],q.toRoman=T,q.isRoman=u,q.toArabic=g,q.SectionSugg=class _ extends p.Sugg{run(m,b,x){var w,E;if(m!=b)return[];if(!x)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==x.type||!x.secLabel)return[];let k="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(x.secLabel.toLowerCase())){let A=x.secLabel.split("."),C=+M.Utils.getNumberFromStr(A[0]);k=A[0].replace(/\d+/,C+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(x.secLabel.toLowerCase())){let C=x.secLabel.split(".")[0].split(" "),D=T((null!==(w=g(C.pop()))&&void 0!==w?w:0)+1);C.push(D),k=C.join(" ")+"."}else/^[ivx]+\./.test(x.secLabel.toLowerCase())&&(k=T((null!==(E=g(x.secLabel.split(".")[0]))&&void 0!==E?E:0)+1)+".");return[M.Utils.removeAccents(k)+"|"+k+" ",k+"|"+k+" "]}}},47078:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Sugg=void 0,q.Sugg=class S{constructor(){this.lang="vi"}setLang(p){this.lang=p}}},69623:function(ce,q,S){"use strict";var M=this&&this.__createBinding||(Object.create?function(j,T,u,g){void 0===g&&(g=u);var _=Object.getOwnPropertyDescriptor(T,u);(!_||("get"in _?!T.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return T[u]}}),Object.defineProperty(j,g,_)}:function(j,T,u,g){void 0===g&&(g=u),j[g]=T[u]}),p=this&&this.__exportStar||function(j,T){for(var u in j)"default"!==u&&!Object.prototype.hasOwnProperty.call(T,u)&&M(T,j,u)};Object.defineProperty(q,"__esModule",{value:!0}),p(S(71834),q),p(S(99737),q),p(S(81874),q),p(S(99422),q),p(S(8897),q)},37274:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.CanvasUtil=void 0;const M=S(8897);class p{static drawPoint(T,u,g){null!=T&&(T.fillStyle=u,T.beginPath(),T.arc(g.left,g.top,5,0,2*Math.PI),T.fill())}static drawBox(T,u,g,_){null!=T&&(_?(T.fillStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.fill()):(T.strokeStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.stroke()))}static drawBox2(T,u,g,_,h){null!=T&&(T.strokeStyle=u,T.beginPath(),T.rect(h[4],h[5],g,_),T.stroke())}static drawLine(T,u,g,_){null!=T&&(T.strokeStyle=u,T.beginPath(),T.moveTo(g,_),T.lineTo(T.canvas.width-10,_),T.stroke())}static drawText(T,u,g,_){null!=T&&(T.font="11px Arial",T.fillStyle=u,T.fillText(_,g[4],g[5]))}static isLineIntersec(T,u){let g=T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height,_=u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height,h=T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN,m=u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN,b=this.isSameLine(T,u);return(g||_)&&(h||m)&&!b}static isLineVIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN)&&Math.abs(u.transform[4]-T.transform[4])>M.CONST.INTERSEC_MARGIN/2}static isSameLine(T,u){return Math.abs(T.transform[5]+T.height-(u.transform[5]+u.height))<=M.CONST.LINE_MAGIN}static isObjIntersec(T,u){return T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height}static isObjFullIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width)}static isFirstLineOfPage(T,u){return!(T<0||T>=u.length||0!=T&&u[T-1].pageIndex==u[T].pageIndex)}static isLastLineOfPage(T,u){return!(T<0||T>=u.length||T!=u.length-1&&u[T+1].pageIndex==u[T].pageIndex)}static getTopLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5],E=0,k=3*b;if(!p.isFirstLineOfPage(u,g)){let C=p.isSameLine(g[u-1],_);p.isLineIntersec(g[u-1],_)?(w=g[u-1].transform[5]+g[u-1].height,E=g[u-1].transform[5],g[u-1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E-=2*M.CONST.MARGIN_LEFT:E+=g[u-1].height*x,b=1,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u-2>=0?g[u-2].transform[5]+g[u-2].height*x:g[u-1].transform[5]+g[u-1].height*x,C&&p.isFirstLineOfPage(u-1,g)&&(E=0))}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w>E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w+=k),w-=b}}return[_.transform[5],1]}static arrContains(T,u){for(const g of u)if(g==T)return!0;return!1}static getBottomLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5]+_.height,E=9999,k=3*b;if(!p.isLastLineOfPage(u,g)){let C=p.isSameLine(g[u+1],_);p.isLineIntersec(g[u+1],_)?(w=g[u+1].transform[5],E=g[u+1].transform[5]+g[u+1].height,g[u+1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E+=2*M.CONST.MARGIN_LEFT:E-=g[u+1].height*x,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u+2<g.length?g[u+2].transform[5]+g[u+2].height-g[u+2].height*x:g[u+1].transform[5]+g[u+1].height-g[u+1].height*x,C&&p.isLastLineOfPage(u+1,g)&&(E=9999));let P=g[u+1].top;if(P&&w>=P&&!C)return[P,0]}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w<E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w-=k),w+=b}}return[_.transform[5]+_.height,1]}static hasColor(T,u,g,_,h){let m=Math.round(u),b=Math.round(m+_),x=Math.round(g),w=Math.round(x+h);for(let P=x;P<w;P++)for(let D=m;D<b;D++){let Q=4*(P*T.width+D);if((T.data[Q]+T.data[Q+1]+T.data[Q+2])/3<150)return!0}return!1}static calIndexPos2(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0;for(const R of T){P=this.isObjIntersec(T[0],R),E=R.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=R.str.trim()||k!=R.transform[5]?1:0),C=E+2*M.CONST.MARGIN_LEFT>=w;let J=R.transform[4]+R.width;if(P&&(w=J),J>x&&P&&(x=J),b+=R.str.length,b>_&&C&&P){R.transform.forEach(W=>{m.push(W)}),m[3]=R.height,m[2]=A,m[1]=R.str.length-b+_;let H=R.str.substr(0,R.str.length-b+_+1);if(H.length==R.str.length){m[4]=m[4]+R.width;break}var Q=u[R.fontName].fontFamily,U=Math.hypot(R.transform[2],R.transform[3]);g.font=`${U}px ${Q}`;let ne=g.measureText(H).width,ee=g.measureText(R.str).width;m[4]=m[4]+R.width*ne/ee;break}P&&(k=R.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static calIndexPos(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0,D="";for(const J of T){P=this.isObjIntersec(T[0],J),E=J.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?1:0,D+=(E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?"|":"")+J.str),C=E+2*M.CONST.MARGIN_LEFT>=w;let H=J.transform[4]+J.width;if(P&&(w=H),H>x&&P&&(x=H),b+=J.str.length,b>_&&C&&P){let ne=J.str.substr(0,J.str.length-b+_);var U=u[J.fontName].fontFamily,R=Math.hypot(J.transform[2],J.transform[3]);g.font=`${R}px ${U}`;let ee=g.measureText(ne).width,W=g.measureText(J.str).width;J.transform.forEach(xe=>{m.push(xe)}),m[4]=m[4]+J.width*ee/W,m[3]=J.height,m[2]=A,m[1]=J.str.length-b+_;break}P&&(k=J.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static getTextBottom(T,u,g,_){let h=Math.atan2(T[1],T[0]);u.vertical&&(h+=Math.PI/2);const m=Math.hypot(T[2],T[3]),b=m*p.getAscent(u.fontFamily,g,_);let x=T[5],w=0;w=0===h?b:b*Math.cos(h);let E=0*w;return x=T[5]-w-E,[x,m+E]}static getAscent(T,u,g){const m=g.get(T);if(m)return m;u.save(),u.font=`30px ${T}`;const b=u.measureText("");let x=b.fontBoundingBoxAscent,w=Math.abs(b.fontBoundingBoxDescent);if(x){u.restore();const k=x/(x+w);return g.set(T,k),k}u.strokeStyle="red",u.clearRect(0,0,30,30),u.strokeText("g",0,0);let E=u.getImageData(0,0,30,30).data;w=0;for(let k=E.length-1-3;k>=0;k-=4)if(E[k]>0){w=Math.ceil(k/4/30);break}u.clearRect(0,0,30,30),u.strokeText("A",0,30),E=u.getImageData(0,0,30,30).data,x=0;for(let k=0,A=E.length;k<A;k+=4)if(E[k]>0){x=30-Math.floor(k/4/30);break}if(u.restore(),x){const k=x/(x+w);return g.set(T,k),k}return g.set(T,.8),.8}static getMaxLineRight(T,u){let g=0;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4]+_.width;h>g&&(g=h)}return g}static getMinLineLeft(T,u){let g=99999;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4];h<g&&(g=h)}return g}}q.CanvasUtil=p},55072:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PdfUtils=void 0;const M=S(8897),p=S(37274);class j{constructor(){let u=document.createElement("canvas");this.tempCanvas=u.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(u,g){let h={url:URL.createObjectURL(u),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const m=pdfjsLib.getDocument(h);let b=[],x=this;m.promise.then(function(w){x.optionalContentConfigPromise=w.getOptionalContentConfig();let E=w._pdfInfo.numPages;for(let k=1;k<=E;k++)w.getPage(k).then(A=>{b.push(A),b.length==E&&(b=b.sort((C,P)=>C._pageIndex>P._pageIndex?1:-1),g(b))})},function(w){console.error(w)})}getImages(u,g){let _=[];if("function"!=typeof u.objs.getAll)return _;let h=u.objs.getAll(),m=Object.keys(h);for(const b of m)h[b].data.pageIndex=g,_.push(h[b].data);return _}isImageObj(u){return-999==u.transform[0]&&"img"==u.str}getLines(u,g,_,h){let m=h.scale,b=u.items.length;for(let A=0;A<b;A++){let C=u.items[A];this.isImageObj(C)||(C.transform=j.transform(h.transform,C.transform),C.width=C.width*m),C.transform[4]+C.width>_.canvas.width&&(C.width=_.canvas.width-C.transform[4]-20);let P=this.isImageObj(C)?[C.transform[5],C.height]:p.CanvasUtil.getTextBottom(C.transform,u.styles[C.fontName],this.tempCanvas,this.ascentCache);C.height=P[1];let D=Math.ceil(P[0]);C.transform[5]=D}u.items.sort((A,C)=>1e6*Math.floor(A.transform[5])-A.transform[4]<1e6*Math.floor(C.transform[5])-C.transform[4]?-1:1);let E,x=[],w=0;this.imageCache[g]?E=this.imageCache[g]:(E=_.getImageData(0,0,_.canvas.width,_.canvas.height),this.imageCache[g]=E);let k={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let A=0;A<b;A++){let C=u.items[A];if(this.isImageObj(C))for(let D=0;D<b;D++){let Q=u.items[D];if(!this.isImageObj(Q)&&A!=D&&p.CanvasUtil.isObjIntersec(C,Q)&&""!=Q.str.trim()&&!/^[\sA-K\.\|]+$/g.test(Q.str)){C.str="";break}}if(p.CanvasUtil.arrContains(C.str.trim(),M.CONST.SKIP_CHAR))continue;let P=Math.floor(C.transform[5]+C.height);0!=w?w-P>=-M.CONST.LINE_MAGIN?this.addTxtToLine(k,C):0!=k.textObjs.length&&(x.push(k),k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height)):(k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height))}x.push(k);for(const A of x)this.calculateSize(A);this.findAndMergeAnsQuestBlock(x,"ans"),this.findAndMergeAnsQuestBlock(x,"quest"),this.findAndMergeBlock(x),this.mergeIntersecLine(x),this.mergeSmallLine(x,E);for(const A of x)this.calculateSize(A);return x}mergeIntersecLine(u){let g=0;for(;g<u.length;){let _=u[g];g++,g<u.length&&p.CanvasUtil.isLineVIntersec(_,u[g])&&(this.mergeLine(_,u[g]),u.splice(g,1),g--)}}findAndSplitQuestAnsLine(u,g,_){let h=0,m=[],b=M.CONST.BREAK_LINE_PATTERN.join("|");for(const x of u){x.top=void 0,x.bottom=void 0;let w=x.strLine.replace(/\|/g,"").trim().match(b);if(null!=w&&w.length>0){let E=/[\s\|\.]+[B\u0412][\s\|]*\./g,k=x.strLine.trim().toUpperCase().match(E);if(null!=k&&k.length>0){let A=w[0].toUpperCase().indexOf("A");m.push({lineIndex:h,strIndex:A})}}h++}for(let x=m.length-1;x>=0;x--){let w=m[x].lineIndex;this.splitLine(w,g[u[w].pageIndex],_[u[w].pageIndex],m[x].strIndex,u)}}mergeSmallLine(u,g){let _=0,h=1.2*M.CONST.LINE_SMALL_HEIGHT;for(;_<u.length;){let m=u[_];if(!m||!this.isSmallLine(m)){_++;continue}_-1>=0&&!u[_-1].bottom&&(u[_-1].bottom=p.CanvasUtil.getBottomLine(g,_-1,u)[0]),_+1<u.length&&!u[_+1].top&&(u[_+1].top=p.CanvasUtil.getTopLine(g,_+1,u)[0]);let b=_-1<0?-9999:this.getLineTop(m)-this.getLineBot(u[_-1]),x=_+1>=u.length?-9999:this.getLineTop(u[_+1])-this.getLineBot(m),w=_-1>=0&&u[_-1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_-1].transform[4]+u[_-1].width,E=_+1<u.length&&u[_+1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_+1].transform[4]+u[_+1].width;if(0==_&&x<=h&&E){this.mergeLine(u[_+1],m),u.splice(_,1),_--;continue}if(_==u.length-1&&b<=h&&w){this.mergeLine(u[_-1],m),u.splice(_,1),_--;continue}let k=-1;b>x&&E&&x<=h?k=_+1:b<=x&&w&&b<=h?k=_-1:b<=x&&E&&x<=h?k=_+1:b>x&&w&&b<=h&&(k=_-1),k>=0?(this.mergeLine(u[k],m),u.splice(_,1),_--):_++}}isSmallLine(u){return u.height<M.CONST.LINE_SMALL_HEIGHT}mergeLine(u,g){for(const _ of g.textObjs)this.addTxtToLine(u,_)}findAndMergeAnsQuestBlock(u,g){let h=0;for(;h<u.length;){if("ans"==g&&this.isAnsLine(u[h])||"quest"==g&&this.isQuestLine(u[h])){let b=h,x=-1,w=1,E=[];for(;w<=10;){if(b=h+x*w,b<0){x=1,w=1;continue}if(b>=u.length)break;let k=this.isAnsLine(u[b]),A=k||this.isQuestLine(u[b]),C="ans"==g&&k&&p.CanvasUtil.isSameLine(u[h],u[b]),P=!A&&p.CanvasUtil.isLineIntersec(u[h],u[b])&&u[b].transform[4]>u[h].transform[4];if((C||P)&&E.push(b),w++,A&&1==x)break;(w>10||A)&&-1==x&&(x=1,w=1)}E.sort((k,A)=>k<A?1:-1);for(const k of E)for(const A of u[k].textObjs)this.addTxtToLine(u[h],A);for(const k of E)u.splice(k,1),k<h&&h--}h++}}findAndMergeBlock(u){let g=0;for(;g<u.length;){if(this.isAnsLine(u[g])||this.isQuestLine(u[g])){g++;continue}let h=g+1;for(;h<u.length&&u[g].pageIndex==u[h].pageIndex;){let m=this.isAnsLine(u[h])||this.isQuestLine(u[h]);if(p.CanvasUtil.isLineIntersec(u[g],u[h])&&!m||p.CanvasUtil.isSameLine(u[g],u[h])){for(const b of u[h].textObjs)this.addTxtToLine(u[g],b);u.splice(h,1),h=g}h++}g++}}isAnsLine(u){let _=u.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=_&&_.length>0}isQuestLine(u){let g=M.CONST.QUESTION_PATTERN.join("|"),_=u.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=_&&_.length>0}encodeLines(u,g){let _="",h=0;for(const m of g){if(m.height<M.CONST.LINE_SMALL_HEIGHT){h-1>=0&&!g[h-1].bottom&&(g[h-1].bottom=p.CanvasUtil.getBottomLine(u,h-1,g)[0]),h+1<g.length&&!g[h+1].top&&(g[h+1].top=p.CanvasUtil.getTopLine(u,h+1,g)[0]);let b=h-1<0?-9999:this.getLineTop(m)-this.getLineBot(g[h-1]),x=h+1>=g.length?-9999:this.getLineTop(g[h+1])-this.getLineBot(m),w=h-1>=0&&g[h-1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h-1].transform[4]+g[h-1].width,E=h+1<g.length&&g[h+1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h+1].transform[4]+g[h+1].width,k=1.2*M.CONST.LINE_SMALL_HEIGHT;Math.abs(b)>=k&&Math.abs(x)>=k?_+="L":_+=-9999==b?"3":-9999==x?"4":b>x&&E?"2":b<=x&&w?"1":b<=x&&E?"2":b>x&&w?"1":"L"}else _+="L";h++}return _}getLineTop(u){return u.top?u.top:u.transform[5]}getLineBot(u){return u.bottom?u.bottom:u.transform[5]+u.height}splitLine(u,g,_,h,m){let b=m[u],x=p.CanvasUtil.calIndexPos(b.textObjs,g,_,h,!0),w=this.newLine(b.textObjs[0],b.pageIndex),E=x[2],k=x[1],A=b.textObjs[E],C=A.transform,P={str:A.str.substr(0,k),width:x[4]-C[4],height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],C[4],C[5]]},D={str:A.str.substr(k),width:A.width-P.width,height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],x[4],C[5]]},Q=b.textObjs;b.textObjs=[],w.textObjs=[];for(let U=0;U<Q.length;U++)U<E?this.addTxtToLine(b,Q[U]):U>E?this.addTxtToLine(w,Q[U]):(this.addTxtToLine(b,P),this.addTxtToLine(w,D));return this.calculateSize(b),this.calculateSize(w),u==m.length-1?m.push(w):m.splice(u+1,0,w),w}findAndMergeSmallLine(u,g,_){let h=0,m=u.matchAll(_),b=[];for(;;){let x=m.next();if(x.done)break;let w=x.value[0],E=x.value.index,k=0,A=[];for(let C=0;C<w.length;C++)"L"==w[C]?k=E+C:A.push(E+C);for(const C of A){for(const P of g[C].textObjs)this.addTxtToLine(g[k],P);g[k].top=void 0,g[k].bottom=void 0,b.push(C)}h++}b.sort((x,w)=>x<w?1:-1);for(const x of b)g.splice(x,1);return h}newLine(u,g){let _={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return _.transform[4]=u.transform[4],_.transform[5]=u.transform[5],_.height=u.height,_.width=u.width,_.txtLength=u.str.length,_.textObjs.push(u),_}addTxtToLine(u,g){g.transform[4]<u.transform[4]&&(u.transform[4]=g.transform[4]),g.transform[5]<u.transform[5]&&(u.transform[5]=g.transform[5]),g.transform[5]+g.height>u.transform[5]+u.height&&(u.height=g.transform[5]+g.height-u.transform[5]),g.transform[4]+g.width>u.transform[4]+u.width&&(u.width=g.transform[4]+g.width-u.transform[4]),u.txtLength+=g.str.length,u.textObjs.push(g);let _=u.transform[4]+u.width,h=u.height;for(const m of u.textObjs)m.transform[4]+m.width>_&&(_=m.transform[4]+m.width),m.transform[5]+m.height>u.transform[5]+h&&(h=m.transform[5]+m.height-u.transform[5]);u.width=_-u.transform[4],u.height=h}static transform(u,g){return pdfjsLib.Util.transform(u,g)}render(u,g,_,h){var m;let b=this,x=u.length;for(let w=0;w<x;w++){let E=document.createElement("div");E.className="pdf-page",E.id="page-"+w,null===(m=document.getElementById(g))||void 0===m||m.appendChild(E),b.renderPage(u[w],_,h)}}calculateSize(u){if(0==u.textObjs.length)return;u.textObjs.sort((A,C)=>1e6*Math.floor(A.transform[4])+A.transform[5]>1e6*Math.floor(C.transform[4])+C.transform[5]?1:-1),u.strLine="";let g=0,_=0,h=0,m=0,b=9999,x=0,w=9999;for(const A of u.textObjs){let C=p.CanvasUtil.isObjIntersec(u.textObjs[0],A);h=A.transform[4];let P=h-_>M.CONST.SPLIT_MARGIN&&""!=A.str.trim()||m!=A.transform[5]?"|":"";u.strLine+=P+A.str,h<w&&(w=h);let D=A.transform[4]+A.width;C&&(_=D),D>g&&C&&(g=D),C&&(m=A.transform[5]),A.transform[5]<b&&(b=A.transform[5]),A.transform[5]+A.height>x&&(x=A.transform[5]+A.height)}u.transform[4]=w,u.transform[5]=b,u.width=g-w,u.height=x-b,u.transform[0]=b,u.transform[1]=x;let E=M.CONST.TVCN_CHAR,k=u.strLine;for(const A of E)k=k.replace(new RegExp(A[0],"g"),A[1]);u.strLine=k}renderPage(u,g,_){let h=u._pageIndex,m=u.getViewport({scale:g}),b=.8*m.width,x=document.createElement("canvas"),w=document.getElementById("page-"+h);w?.appendChild(x),x.id="canvas"+h;let E=x.getContext("2d",{alpha:!1});x.height=m.height,x.width=m.width,x.style.height=m.height*b/m.width+"px",x.style.width=b+"px",w&&(w.style.width=x.style.width,w.style.height=x.style.height);const A={canvasContext:E,transform:[1,0,0,1,0,0],viewport:m,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};u.render(A).promise.then(function(){_&&_(E,u._pageIndex,m)})}}q.PdfUtils=j},99422:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Process=void 0;const M=S(8897),p=S(81874),j=S(12273),T=S(37274),u=S(55072);q.Process=class g{constructor(h){var m,b;this.config=h,M.CONST.load(h);let x=JSON.parse(h);M.CONST.LINE_SMALL_HEIGHT=x.LINE_SMALL_HEIGHT*M.CONST.RENDER_SCALE,M.CONST.SPLIT_MARGIN=x.SPLIT_MARGIN*M.CONST.RENDER_SCALE,M.CONST.INTERSEC_MARGIN=x.INTERSEC_MARGIN*M.CONST.RENDER_SCALE,M.CONST.LINE_MAGIN=x.LINE_MAGIN*M.CONST.RENDER_SCALE,M.CONST.MARGIN_LEFT=x.MARGIN_LEFT*M.CONST.RENDER_SCALE,M.CONST.FOOTER_PATTERN=null!==(m=x.FOOTER_PATTERN)&&void 0!==m?m:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],M.CONST.HELP_ANS_PATTERN=null!==(b=x.HELP_ANS_PATTERN)&&void 0!==b?b:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(h){this.updateStatusCallback=h}setOncompleteCallback(h){this.onCompleteCallback=h}getOverview(h){let m=h.filter(C=>C.isGroup).length,b=h.filter(C=>!C.isGroup).length,x=h.filter(C=>C.answers.length>0).length,w=h.filter(C=>!C.isGroup&&0==C.answers.length).length,E=h.filter(C=>C.answers.length>4),k=E.length+"|"+E.map(C=>C.num).join(",");return E=h.filter(C=>C.answers.length<4&&C.answers.length>0),{groupNum:m+"",questNum:b+"",tnNum:x+"",tlNum:w+"",tnGt4:k,tnLt4:E.length+"|"+E.map(C=>C.num).join(",")}}parsePdf(h){let m=new u.PdfUtils;m.loadPdf(h,b=>{const x=b.length;let w=[],E=[],k=document.createElement("div");k.id="hiddenWrapper",k.style.width="1px",k.style.height="1px",k.style.overflow="hidden",k.style.opacity="0",k.style.zIndex="-9999",k.style.position="fixed",k.style.top="0",k.style.left="0",document.body.appendChild(k);let A=document.createElement("div"),C="canvasWrapper";A.id=C,k.appendChild(A);const P=(new Date).getTime();let D=[];m.render(b,C,M.CONST.RENDER_SCALE,(Q,U,R)=>{if(null!=Q&&(w[U]=Q,E[U]=R),D.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${D.length}/${x}`),D.length==x){const J=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(J-P)/1e3+" secs"),this.startAnalyze(w,E,b)}})})}imgToTextObj(h,m){return{str:"img",fontName:m,width:h.paintWidth,height:h.paintHeight,transform:[-999,0,0,0,-h.left,-h.top-h.paintHeight]}}startAnalyze(h,m,b){const x=b.length;let w=[],E=[],k=[],A=new u.PdfUtils;const C=(new Date).getTime();for(let P=0;P<x;P++){const D=P;let Q=A.getImages(b[P],D);b[P].getTextContent().then(U=>{for(const J of Q)U.items.push(this.imgToTextObj(J,U.items.length>0?U.items[0].fontName:""));let R=A.getLines(U,D,h[D],m[D]);if(E=E.concat(R),k[D]=U.styles,w.push(1),w.length==x){E.sort((fe,be)=>1e7*fe.pageIndex+(fe.transform.length>0?fe.transform[5]:0)-(1e7*be.pageIndex+(be.transform.length>0?be.transform[5]:0))),A.findAndSplitQuestAnsLine(E,k,h);let J=new j.FooterParser,H=0;for(const fe of E){if((E.length-1==H||H+1<E.length-1&&fe.pageIndex!=E[H+1].pageIndex)&&(fe.isLastLine=!0),fe.isLastLine&&J.parse(fe.strLine).length>0){fe.isFooter=!0;let be=T.CanvasUtil.getBottomLine(A.imageCache[E[H-1].pageIndex],H-1,E);fe.top=be[0]+M.CONST.MARGIN_LEFT}H++}let ne=new p.ExamParser(this.config),ee=E.map(fe=>fe.strLine),W=ne.parse(ee),xe=this.getQuestionInfo(W,E,k,h,A.imageCache);const Ce=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(Ce-C)/1e3+" secs"),this.showOnCanvas(xe,h,M.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(xe,h)}})}}getPosInfo(h,m,b,x,w,E,k,A,C){if(!b.top){let Q=T.CanvasUtil.getTopLine(w,E,x);b.top=Q[0],b.isIntersec=Q[1]}if(!b.bottom){let Q=T.CanvasUtil.getBottomLine(w,E,x);b.bottom=Q[0],b.isIntersec=Q[1]}return{str:"",pageIndex:b.pageIndex,lineIndex:E,transform:"a"==h?T.CanvasUtil.calIndexPos2(b.textObjs,A,k,C?C-1:0):b.transform,startLeft:m>=0?T.CanvasUtil.calIndexPos2(b.textObjs,A,k,m-1):void 0,type:h}}getQuestionInfo(h,m,b,x,w){let E=[];for(const k of h){let A=k.parts[0].lineIdx,C=m[A],P=this.getPosInfo("q",k.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]),D=null;if(A=k.parts[k.parts.length-1].lineIdx,k.answers.length>0){let Q=k.answers[k.answers.length-1];Q.parts.length>0&&(A=Q.parts[Q.parts.length-1].lineIdx)}if(A+=1,A<m.length&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex])),k.isGroup)E.push({num:k.label,answers:[],remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),isGroup:!0,text:k.parts.map(Q=>m[Q.lineIdx])});else{let Q={num:k.label,answers:[],remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),group:k.group,strAns:k.strAns,isFixAns:k.isFixAns,text:k.parts.map(R=>m[R.lineIdx])};E.push(Q);let U=0;for(const R of k.answers){let J={pageIndex:Q.remove.pageIndex,top:Q.remove.top-1,left:Q.remove.left-1,width:1,heigh:1};if(R.parts.length>0){if(A=R.parts[0].lineIdx,C=m[A],1==C.isIntersec&&(Q.isFixAns=!0),R.parts.length>1&&(Q.isFixAns=!0),P=this.getPosInfo("a",R.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex],R.parts[0].b),D=null,U<k.answers.length-1){let ee=k.answers[U+1];A=ee.parts[0].lineIdx,C=m[A],D=this.getPosInfo("a",ee.parts[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex],ee.parts[0].b)}else A=R.parts[R.parts.length-1].lineIdx+1,A<m.length-1&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]));let H=this.getAnsRemoveBox(P,m),ne={label:R.label,remove:H,isCorrect:R.isCorrect,positions:R.isInline?[H]:this.getAnsBoxes(P,m,D,x[C.pageIndex].canvas.height)};Q.answers.push(ne)}else Q.answers.push({label:R.label,remove:J,isCorrect:R.isCorrect,positions:[J]});U++}k.help&&k.help.length>0&&(A=k.help[0].lineIdx,C=m[A],P=this.getPosInfo("q",k.help[0].s,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex]),D=null,A=k.help[k.help.length-1].lineIdx+1,A<m.length&&(C=m[A],D=this.getPosInfo("q",-1,C,m,w[C.pageIndex],A,x[C.pageIndex],b[C.pageIndex])),Q.help={num:k.label,remove:this.getQuestRemoveBox(P,m),positions:this.getQuestBoxes(P,m,D,x[C.pageIndex].canvas.height),text:k.help.map(R=>m[R.lineIdx])})}}return E}showHidden(){let h=document.getElementById("hiddenWrapper");h&&(h.style.opacity="1",h.style.width="",h.style.height="",h.style.overflow="",h.style.position="")}showOnCanvas(h,m,b){const x=(new Date).getTime(),w=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(b.indexOf("quest")>=0)for(const k of h){for(const A of k.positions)T.CanvasUtil.drawBox(m[A.pageIndex],k.isGroup?"black":"red",A);T.CanvasUtil.drawBox(m[k.remove.pageIndex],"yellow",k.remove);for(const A of k.answers){for(const C of A.positions)T.CanvasUtil.drawBox(m[C.pageIndex],w.get(A.label)+"",C,!0);T.CanvasUtil.drawBox(m[A.remove.pageIndex],"yellow",A.remove),A.isCorrect&&T.CanvasUtil.drawPoint(m[A.positions[0].pageIndex],"green",A.positions[0])}if(k.help){for(const A of k.help.positions)T.CanvasUtil.drawBox(m[A.pageIndex],"orange",A);k.help.remove&&T.CanvasUtil.drawBox(m[k.help.remove.pageIndex],"yellow",k.help.remove)}}const E=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(E-x)/1e3+" secs")}getAnsRemoveBox(h,m){let b=h.startLeft?h.startLeft[5]-2:m[h.lineIndex].top,x=h.transform[4]-M.CONST.MARGIN_LEFT,w=h.startLeft?h.startLeft[5]+h.startLeft[3]:m[h.lineIndex].bottom;return{pageIndex:h.pageIndex,top:b||20,left:x,heigh:w&&b?w-b:0,width:(h.startLeft?h.startLeft[4]:0)-x}}getAnsBoxes(h,m,b,x){const w=x,E=M.CONST.MARGIN_LEFT;let k=[],A=m[h.lineIndex].top,C=m[h.lineIndex].bottom;if(!A||!C)return[];let D=C,Q=h.transform[4]-E,U=b&&h.lineIndex==b.lineIndex?b.transform[4]-E:m[h.lineIndex].transform[4]+m[h.lineIndex].width+E;if(k.push({pageIndex:h.pageIndex,top:A,left:Q,width:U-Q,heigh:C-A}),b&&b.lineIndex==h.lineIndex)return k;A=C,C=w,U=0;let R=h.pageIndex,J=0;for(J=h.lineIndex+1;J<m.length;J++){if(C==w&&T.CanvasUtil.isLastLineOfPage(J,m)){let ne=m[J].isFooter?m[J-1]:m[J];C=ne.transform[5]+ne.height+20}let H=m[J].top;if(J>h.lineIndex+1&&!m[J-1].isFooter){let ne=m[J-1].transform[4]+m[J-1].width+E;ne>U&&(U=ne);let ee=m[J-1].transform[4]-E;ee<Q&&(Q=ee)}if(m[J].isFooter&&H)J-h.lineIndex>1?(C=m[J-1].transform[5]+m[J-1].height+M.CONST.LINE_MAGIN,Q=m[h.lineIndex+1].transform[4]-E):C=m[h.lineIndex].bottom;else if(m[J].pageIndex>R&&(C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&J-h.lineIndex>1&&k.push({pageIndex:R,top:A,left:Q,width:U-Q,heigh:C-A}),A=20,D=A),R=m[J].pageIndex,H){C=H;break}}if(J>=m.length&&(J=m.length-1),J-h.lineIndex>1&&m[J-1].transform[5]>D&&!T.CanvasUtil.isFirstLineOfPage(J,m)){let H=20==A?m[J].transform[4]:m[h.lineIndex+1].transform[4];if(20!=A)for(let ne=h.lineIndex+2;ne<=J;ne++)m[ne].transform[4]<H&&(H=m[ne].transform[4]);C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&k.push({pageIndex:R,top:A,left:H,width:U-H,heigh:C-A})}b&&"a"==b.type&&b.transform[4]>m[b.lineIndex].transform[4]+10*M.CONST.RENDER_SCALE&&(U=b.transform[4]-E,A=m[b.lineIndex].top,Q=m[b.lineIndex].transform[4]-E,C=m[b.lineIndex].bottom,A&&C&&C-A>M.CONST.LINE_SMALL_HEIGHT&&k.push({pageIndex:R,top:A,left:Q,width:U-Q,heigh:C-A}));for(let H=k.length-1;H>=1;H--)k[H].left-(k[H-1].left+k[H-1].width)>=20*M.CONST.RENDER_SCALE&&k.splice(H,1);return k}getQuestRemoveBox(h,m){let b=h.startLeft?h.startLeft[5]:m[h.lineIndex].top,x=h.transform[4]-M.CONST.MARGIN_LEFT,w=h.startLeft?h.startLeft[5]+h.startLeft[3]:m[h.lineIndex].bottom;return{pageIndex:h.pageIndex,top:b||20,left:x,heigh:w&&b?w-b:0,width:(h.startLeft?h.startLeft[4]:0)-x}}getQuestBoxes(h,m,b,x){let w=x;for(let J=h.lineIndex;J<m.length;J++)if(T.CanvasUtil.isLastLineOfPage(J,m)){let H=m[J].isFooter?m[J-1]:m[J];w=H.transform[5]+H.height+20;break}let E=[],k=h.pageIndex,A=b?b.lineIndex:m.length-1,C=m[h.lineIndex].transform[4]-M.CONST.MARGIN_LEFT,P=m[h.lineIndex].top;if(!P)return[];let D=M.CONST.CROP_FULL_WIDTH?T.CanvasUtil.getMaxLineRight(-1,m)+2*M.CONST.MARGIN_LEFT:m[h.lineIndex].transform[4]+m[h.lineIndex].width+2*M.CONST.MARGIN_LEFT,Q=w,U=k,R=h.lineIndex+1;for(;R<=A;R++){let J=m[R].top;if(R==m.length-1&&!b&&(J=m[R].bottom),!M.CONST.CROP_FULL_WIDTH){let ne=m[R-1].transform[4]+m[R-1].width+2*M.CONST.MARGIN_LEFT;ne>D&&(D=ne)}let H=m[R-1].transform[4]-M.CONST.MARGIN_LEFT;H<C&&(C=H),m[R].isFooter&&J?Q=J:(m[R].pageIndex>U&&(m[R-1].isFooter||(Q=w),E.push({pageIndex:U,top:P,left:C,width:D-C,heigh:Q-P}),P=20,C=T.CanvasUtil.getMinLineLeft(m[R].pageIndex,m)-M.CONST.MARGIN_LEFT),U=m[R].pageIndex,J&&(Q=J))}if(R-=1,!b&&T.CanvasUtil.isLastLineOfPage(R,m)){let J=m[R].isFooter?m[R-1]:m[R];Q=J.transform[5]+J.height+20}return T.CanvasUtil.isFirstLineOfPage(R,m)||E.push({pageIndex:U,top:P,left:C,width:D-C,heigh:Q-P}),E}}},53781:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.AnswerParser=void 0;const M=S(86563);class p extends M.Parser{constructor(T){super(),null!=T&&(this.isOn=T),this.TYPE=p.TYPE_NAME}do(T){let u=[],g="|"+T,_=/([\s\|\.\]]+\*?[A-H][\s\|]*[\.\)])/g,h=this.matchPos(g,_,!1);0==h.length&&(h=this.matchPos(g,_,!0));let m=!1;0==h.length&&/^\|?\s*\*?[A-H\s\|]+$/g.test(g)&&(m=!0,h=this.matchPos(g,/\*?[A-H]/g,!1));let b=!1;if(0==h.length&&(m=!0,b=!0,h=this.matchPos(g,/\[\*?[A-H]:[^\]]+\]/g,!1)),h.length>0)for(const x of h){let w=x.index+x.value.length-1,E=-9999,k=x.value.replace(/\*?[\sA-H\|]/g,"");b&&(E=x.index+x.value.length-2,x.index=x.index+1,w=x.index+1+(x.value.startsWith("[*")?1:0),k=".");let A={type:this.TYPE,pos:[x.index-1,w,E]},C=T.substring(A.pos[0]);!m&&!/^\|?\s*\*?[A-Himg\s\|\.]+$/g.test(g)&&C.trim()==x.value.trim()||(A.label=T.substring(A.pos[0],A.pos[0]+1),"*"==A.label&&(A.label=T.substring(A.pos[0]+1,A.pos[0]+2),A.extInfo="*"),A.olabel=k,A.score=1,""==T.substring(0,A.pos[0]).replace(/[\s\|]/g,"")&&(A.score=2),u.push(A))}return u}matchPos(T,u,g){let _=g?T.toUpperCase():T,h=/[\s\|\.\]]/,m=_.matchAll(u),b=[];for(;;){let x=m.next();if(x.done)break;let w=0;for(let k=x.value.index;k<_.length&&h.test(_[k]);k++)w++;let E=x.value[0].substr(w,1);"A"==E&&!_.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("A")||"*A"==E&&!_.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("*A")||b.push({value:x.value[0].substr(w),index:x.value.index+w})}return b}}q.AnswerParser=p,p.TYPE_NAME="answer"},34143:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnChiTietParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),this.TYPE=j.TYPE_NAME,null!=u&&(this.isOn=u)}do(u){let _=this.cleanLine(u);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(_)&&_.length>=2?[{type:j.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(u){let g=[/\|/g,/[\s\.\-:,;!\[\]@\*\$\(\)]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],_=u;_=_.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),_=_.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const h of g)_=_.replaceAll(h,"");return _=_.replaceAll("\\n"," "),_}getAnsMC(u,g){var _;let h=[];for(const E of g)h.push(u[null!==(_=E.lineIdx)&&void 0!==_?_:0]);let m=h.join(""),b=this.cleanLine(m),x=this.getResultMC(b.toUpperCase()),w=new Map;for(const E of x)w.set(E.num,E.str);return w}getAnsStr(u){let g=u.join("\n");g=g.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),g=g.replaceAll(/\[![!iucsbp]+:!!\]/g,""),g=g.replaceAll("[*","").replaceAll("*]","");let _=this.getResultStr(g),h=new Map;for(const m of _)h.set(m.num,m.str);return h}getAnsFromHelp(u,g){let _=[];for(const m of u){let b=g[m.lineIdx];b=b.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),b=b.replaceAll(/\[![!iucsbp]+:!!\]/g,""),_.push(b)}let h=0;for(const m of _){let b=m.trim().match(M.CONST.HELP_ANS_PATTERN.join("|"));if(null!=b)for(const x of b)if(null!=x&&1==x.length)return u.splice(h,1),x;h++}return""}getResultStr(u){let g=[],_=u.replace(/\n/g,"\n"),h=M.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),m=_.matchAll(new RegExp(h,"ig"));for(;;){let k=m.next();if(k.done)break;let A=k.value[0],C=M.Utils.getNumberFromStr(A);_=_.replace(A,C+".")}let E,x=_.matchAll(/\d+[.-][^|]/g),w=-1;for(;;){let k=x.next();if(k.done)break;if(-1==w)w=k.value.index,E=k;else{let A=_.substr(w,k.value.index-w);g.push(this.toAns(A,E)),w=k.value.index,E=k}}if(w>=0&&E){let k=_.substr(w);g.push(this.toAns(k,E))}return g}toAns(u,g){let _=g.value[0].length-1;return{num:+g.value[0].substr(0,_-1),str:u.substring(_).replace(/\s+/g," ").trim()}}getResultMC(u){let g=[],_="",h=[],m=!1;for(let b=0;b<u.length;b++){let x=u.charCodeAt(b),w=x>=65&&x<=72;if(w&&""==_)return[];w!=m&&(h.push(_),_=""),m=w,_+=u[b]}""!=_&&h.push(_);for(let b=1;b<h.length;b+=2){let x=0,w=Math.floor(h[b-1].length/h[b].length),E=+h[b-1].substring(x,w),k=E;for(let A=0;A<h[b].length;A++){if(A>=h[b-1].length)return[];if(E=+h[b-1].substring(x,x+w),E!=k)return[];g.push({num:E,str:h[b][A]}),x+=w,k=E+1,w=k.toString().length}}return g}}q.DapAnChiTietParser=j,j.TYPE_NAME="chitietdapan"},13826:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.DAPAN_PATTERN)}static getAnsFromHelp(u){for(const g of u){let _=g.replace(/\|/g,"").trim().match(M.CONST.HELP_ANS_PATTERN.join("|"));if(null!=_)for(const h of _)if(null!=h&&1==h.length)return h}return""}}q.DapAnParser=j,j.TYPE_NAME="dapan"},12273:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.FooterParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.FOOTER_PATTERN)}}q.FooterParser=j,j.TYPE_NAME="footer"},51453:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HetParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.HET_PATTERN)}}q.HetParser=j,j.TYPE_NAME="end"},54716:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HuongDanParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){return this.match(u,M.CONST.HUONGDAN_PATTERN)}}q.HuongDanParser=j,j.TYPE_NAME="huongdan"},7411:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.IncludeParser=void 0;const M=S(86563);class p extends M.Parser{constructor(T){super(),null!=T&&(this.isOn=T),this.TYPE=p.TYPE_NAME}do(T){let u=T.replace(/\|/g,"").trim(),_=/\[@([CTQG]\d+):[^\]]*\]/g,h=/\[@(F:[^\]]*)\]/g,m=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,b=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(u)){let x=u;return x=x.replaceAll(_,"$1").replaceAll(h,"$1").replaceAll(m,"$1").replaceAll(b,""),[{type:this.TYPE,pos:[0,0],label:"@@."+x}]}return[]}}q.IncludeParser=p,p.TYPE_NAME="include"},86563:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Parser=void 0,q.Parser=class S{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(p){return this.isOn?this.do(p):[]}match(p,j){let T=p.replace(/\|/g,"").trim().match(j.join("|"));return null!=T&&T.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},52169:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QuestionParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){let g=this.matchPos(u);if(g.value){let _=null;for(let E=g.value.length-1;E>=0;E--)if(g.value[E]){_=g.value[E];break}if(null==_)return[];let h=u.replace(/\|/g,"").toLowerCase().indexOf(_),m=h,b="",x=u.toLowerCase();for((_.endsWith("(")||_.endsWith("["))&&(_=_.substring(0,_.length-1));m<x.length&&("|"!=x[m]&&(b+=x[m]),m++,b!=_););let w={type:this.TYPE,pos:[h,m]};return w.label=this.getNumberFromStr(u.substring(w.pos[0],w.pos[1])),w.olabel=_,[w]}return[]}matchPos(u){let g=u.replace(/\|/g,"").toLowerCase().trim(),_=M.CONST.QUESTION_PATTERN.join("|"),h=g.matchAll(_).next();return h.value||(_=M.CONST.QUESTION_PATTERN2.join("|"),h=g.matchAll(_).next()),h}getNumberFromStr(u){let g=u.match(/(\d+)/);return g?g[0]:""}}q.QuestionParser=j,j.TYPE_NAME="question"},71598:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SectionParser=void 0;const M=S(8897),p=S(86563);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}do(u){let g=u.replace(/\|/g,"");g=g.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let _=g.toLowerCase().trim().match(M.CONST.SECTION_PATTERN_LOWER.join("|")),h=null!=_&&_.length>0;return h||(_=g.trim().match(M.CONST.SECTION_PATTERN_NORMAL.join("|")),h=null!=_&&_.length>0),h&&_?[{type:this.TYPE,pos:[0,0],label:g}]:[]}}q.SectionParser=j,j.TYPE_NAME="section"},60987:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.ModifyAnsRule=void 0;const M=S(56446);class p extends M.Rule{constructor(T){super(T??"","modify:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)&&this.checkVal(T,u)){for(const _ of this.data){let h=_.split(":"),m=u-+h[0],b=T[m].label;T[m].label=h[1],T[m].err=b+" -> "+h[1]}return!0}return!1}}q.ModifyAnsRule=p},2630:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.RemoveDupRule=void 0;const M=S(56446);class p extends M.Rule{constructor(T){super(T??"","rmdup:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){var g,_;if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)){let m=null!==(g=T[u].score)&&void 0!==g?g:0,b=null!==(_=T[u-1].score)&&void 0!==_?_:0;if(T[u].label==T[u-1].label)return T.splice(m>b?u-1:u,1),!0}return!1}}q.RemoveDupRule=p},37805:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.RemoveRule=void 0;const M=S(56446);class p extends M.Rule{constructor(T){super(T??"","remove:")}load(T){let u=new p(T);return""!=u.pattern?u:null}run(T,u){if(""==this.pattern)return!1;if(this.getStack(T,u).endsWith(this.pattern)&&this.checkVal(T,u)){for(const _ of this.data)T.splice(u-+_,1);return!0}return!1}}q.RemoveRule=p},56446:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Rule=void 0,q.Rule=class S{constructor(p,j){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=j,!p.startsWith(this.TYPE))return;let u=p.substring(this.TYPE.length).split("=>"),g=u[0].split(":");this.pattern=g[0].trim(),this.valPattern=g.length>1?g[1].trim():"",this.data=u[1].split(",").map(_=>_.trim())}checkVal(p,j){var T;if(""==this.valPattern)return!0;let g=[];for(let h=Math.ceil(this.pattern.length/2);h>0;h--)g.push(null===(T=p[j-h+1].label)||void 0===T?void 0:T.trim());let _=g.join("-");return new RegExp(this.valPattern).test(_)}getStack(p,j){let T="",u=j-10>=0?j-10:0;for(;u<=j;u++)T+="-"+p[u].type[0];return T}}},2721:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SameKindRule=void 0;const M=S(8897),p=S(13826),j=S(51453),T=S(54716),u=S(56446);class g extends u.Rule{constructor(h){super(h??"","same:")}load(h){let m=new g(h);return""!=m.pattern?m:null}run(h,m){var b,x,w;if(""==this.pattern)return!1;let E=h[m];if(E.type[0]!=this.pattern)return!1;let k=[],A=[],C="";for(let P=0;P<m;P++){let D=h[P];(D.type==j.HetParser.TYPE_NAME||D.type==p.DapAnParser.TYPE_NAME)&&(C="da"),D.type==T.HuongDanParser.TYPE_NAME&&"da"==C&&(C="hd")}if("da"==C)return!1;for(let P=m-1;P>=0;P--){let D=h[P];if(D.type==j.HetParser.TYPE_NAME||D.type==p.DapAnParser.TYPE_NAME||"hd"==C&&D.type==T.HuongDanParser.TYPE_NAME||(D.type[0]==this.pattern&&D.olabel&&(k.push(D.olabel),A.push(D.label)),2==k.length))break}if(k.length>=1){let P=k[0],D=2==k.length?k[1]:P,Q=null!==(b=E.olabel)&&void 0!==b?b:"";if("a"==this.pattern&&(""==P&&(P="."),""==D&&(D="."),""==Q&&(Q=".")),""==this.valPattern){if(P==D&&Q!=P)return h.splice(m,1),!0}else{let U=this.valPattern.split(",");for(const R of U){let J=R.trim(),ne=new RegExp(M.CONST[J].join("|"));if(ne.test(P)&&ne.test(D)&&!ne.test(Q)&&+(null!==(x=A[0])&&void 0!==x?x:"0")+1!=+(null!==(w=E.label)&&void 0!==w?w:"0"))return h.splice(m,1),!0}}}return!1}}q.SameKindRule=g},4159:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.AnswerParser=void 0;const M=S(48089),p=S(37403),j=S(15025);class T extends j.Parser{constructor(){super(),this.TYPE=T.TYPE_NAME}parse(g,_,h,m,b,x){var w=[],E=this.matchPos(_.strLine,!1);if(0==E.length&&(E=this.matchPos(_.strLine,!0)),E.length>0)for(const k of E)w.push({str:k.value,pageIndex:_.pageIndex,lineIndex:h,transform:M.CanvasUtil.calIndexPos(_.textObjs,b,x,k.index),startLeft:M.CanvasUtil.calIndexPos2(_.textObjs,b,x,k.index+1),type:this.TYPE});return w}static getRemoveBox(g,_){let h=g.startLeft?g.startLeft[5]-2:_[g.lineIndex].top,m=g.transform[4]-p.CONST.MARGIN_LEFT,b=g.startLeft?g.startLeft[5]+g.startLeft[3]:_[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:h||20,left:m,heigh:b&&h?b-h:0,width:(g.startLeft?g.startLeft[4]:0)-m}}static getBoxes(g,_,h,m){const b=m,x=p.CONST.MARGIN_LEFT;let w=[],E=_[g.lineIndex].top,k=_[g.lineIndex].bottom;if(!E||!k)return[];let C=k,P=g.transform[4]-x,D=h&&g.lineIndex==h.lineIndex?h.transform[4]-x:_[g.lineIndex].transform[4]+_[g.lineIndex].width+x;if(w.push({pageIndex:g.pageIndex,top:E,left:P,width:D-P,heigh:k-E}),h&&h.lineIndex==g.lineIndex)return w;E=k,k=b,D=0;let Q=g.pageIndex,U=0;for(U=g.lineIndex+1;U<_.length;U++){if(k==b&&M.CanvasUtil.isLastLineOfPage(U,_)){let J=_[U].isFooter?_[U-1]:_[U];k=J.transform[5]+J.height+20}let R=_[U].top;if(U>g.lineIndex+1&&!_[U-1].isFooter){let J=_[U-1].transform[4]+_[U-1].width+x;J>D&&(D=J);let H=_[U-1].transform[4]-x;H<P&&(P=H)}if(_[U].isFooter&&R)U-g.lineIndex>1?(k=_[U-1].transform[5]+_[U-1].height+p.CONST.LINE_MAGIN,P=_[g.lineIndex+1].transform[4]-x):k=_[g.lineIndex].bottom;else if(_[U].pageIndex>Q&&(k&&k-E>p.CONST.LINE_SMALL_HEIGHT&&U-g.lineIndex>1&&w.push({pageIndex:Q,top:E,left:P,width:D-P,heigh:k-E}),E=20,C=E),Q=_[U].pageIndex,R){k=R;break}}if(U>=_.length&&(U=_.length-1),U-g.lineIndex>1&&_[U-1].transform[5]>C&&!M.CanvasUtil.isFirstLineOfPage(U,_)){let R=20==E?_[U].transform[4]:_[g.lineIndex+1].transform[4];k&&k-E>p.CONST.LINE_SMALL_HEIGHT&&w.push({pageIndex:Q,top:E,left:R,width:D-R,heigh:k-E})}h&&h.type==T.TYPE_NAME&&h.transform[4]>_[h.lineIndex].transform[4]+25*p.CONST.RENDER_SCALE&&(D=h.transform[4]-x,E=_[h.lineIndex].top,P=_[h.lineIndex].transform[4]-x,k=_[h.lineIndex].bottom,E&&k&&k-E>p.CONST.LINE_SMALL_HEIGHT&&w.push({pageIndex:Q,top:E,left:P,width:D-P,heigh:k-E}));for(let R=w.length-1;R>=1;R--)w[R].left-(w[R-1].left+w[R-1].width)>=20*p.CONST.RENDER_SCALE&&w.splice(R,1);return w}matchPos(g,_){for(var h=_?g.toUpperCase():g,m=p.CONST.ANS_PATTERN,b=new RegExp("[\\s\\|\\.]"),x=h.matchAll(m),w=[];;){var E=x.next();if(E.done)break;for(var k=0,A=E.value.index;A<h.length&&b.test(h[A]);A++)k++;let C=E.value[0].substr(k,1);"A"==C&&!h.replace(/\|/g,"").trim().startsWith("A")||w.push({value:C,index:E.value.index+k})}return w}}q.AnswerParser=T,T.TYPE_NAME="answer"},48089:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.CanvasUtil=void 0;const M=S(37403);class p{static drawPoint(T,u,g){null!=T&&(T.fillStyle=u,T.beginPath(),T.arc(g.left,g.top,5,0,2*Math.PI),T.fill())}static drawBox(T,u,g,_){null!=T&&(_?(T.fillStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.fill()):(T.strokeStyle=u,T.beginPath(),T.rect(g.left,g.top,g.width,g.heigh),T.stroke()))}static drawBox2(T,u,g,_,h){null!=T&&(T.strokeStyle=u,T.beginPath(),T.rect(h[4],h[5],g,_),T.stroke())}static drawLine(T,u,g,_){null!=T&&(T.strokeStyle=u,T.beginPath(),T.moveTo(g,_),T.lineTo(T.canvas.width-10,_),T.stroke())}static drawText(T,u,g,_){null!=T&&(T.font="11px Arial",T.fillStyle=u,T.fillText(_,g[4],g[5]))}static isLineIntersec(T,u){let g=T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height,_=u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height,h=T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN,m=u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN,b=this.isSameLine(T,u);return(g||_)&&(h||m)&&!b}static isLineVIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width+M.CONST.INTERSEC_MARGIN||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width+M.CONST.INTERSEC_MARGIN)&&Math.abs(u.transform[4]-T.transform[4])>M.CONST.INTERSEC_MARGIN/2}static isSameLine(T,u){return Math.abs(T.transform[5]+T.height-(u.transform[5]+u.height))<=M.CONST.LINE_MAGIN}static isObjIntersec(T,u){return T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height}static isObjFullIntersec(T,u){return(T.transform[5]<=u.transform[5]&&u.transform[5]<=T.transform[5]+T.height||u.transform[5]<=T.transform[5]&&T.transform[5]<=u.transform[5]+u.height)&&(T.transform[4]<=u.transform[4]&&u.transform[4]<=T.transform[4]+T.width||u.transform[4]<=T.transform[4]&&T.transform[4]<=u.transform[4]+u.width)}static isFirstLineOfPage(T,u){return!(T<0||T>=u.length||0!=T&&u[T-1].pageIndex==u[T].pageIndex)}static isLastLineOfPage(T,u){return!(T<0||T>=u.length||T!=u.length-1&&u[T+1].pageIndex==u[T].pageIndex)}static getTopLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5],E=0,k=3*b;if(!p.isFirstLineOfPage(u,g)){let C=p.isSameLine(g[u-1],_);p.isLineIntersec(g[u-1],_)?(w=g[u-1].transform[5]+g[u-1].height,E=g[u-1].transform[5],g[u-1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E-=2*M.CONST.MARGIN_LEFT:E+=g[u-1].height*x,b=1,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u-2>=0?g[u-2].transform[5]+g[u-2].height*x:g[u-1].transform[5]+g[u-1].height*x,C&&p.isFirstLineOfPage(u-1,g)&&(E=0))}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w>E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w+=k),w-=b}}return[_.transform[5],1]}static arrContains(T,u){for(const g of u)if(g==T)return!0;return!1}static getBottomLine(T,u,g){let _=g[u],h=[[M.CONST.STEP_SIZE,M.CONST.OVERLAP],[1,M.CONST.OVERLAP],[1,.3]];for(const m of h){let b=m[0],x=m[1],w=_.transform[5]+_.height,E=9999,k=3*b;if(!p.isLastLineOfPage(u,g)){let C=p.isSameLine(g[u+1],_);p.isLineIntersec(g[u+1],_)?(w=g[u+1].transform[5],E=g[u+1].transform[5]+g[u+1].height,g[u+1].transform[4]>g[u].transform[4]+2*M.CONST.MARGIN_LEFT?E+=2*M.CONST.MARGIN_LEFT:E-=g[u+1].height*x,k=g[u].transform[5]+g[u].height/2-w):(E=C&&u+2<g.length?g[u+2].transform[5]+g[u+2].height-g[u+2].height*x:g[u+1].transform[5]+g[u+1].height-g[u+1].height*x,C&&p.isLastLineOfPage(u+1,g)&&(E=9999));let P=g[u+1].top;if(P&&w>=P&&!C)return[P,0]}if(!M.CONST.ENABLE_IMAGE_PROCESS)return[w,0];let A=!1;for(;w<E;){if(!p.hasColor(T,_.transform[4],w,_.width,b))return[w,0];A||(A=!0,w-=k),w+=b}}return[_.transform[5]+_.height,1]}static hasColor(T,u,g,_,h){let m=Math.round(u),b=Math.round(m+_),x=Math.round(g),w=Math.round(x+h);for(let P=x;P<w;P++)for(let D=m;D<b;D++){let Q=4*(P*T.width+D);if((T.data[Q]+T.data[Q+1]+T.data[Q+2])/3<150)return!0}return!1}static calIndexPos2(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0;for(const R of T){P=this.isObjIntersec(T[0],R),E=R.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=R.str.trim()||k!=R.transform[5]?1:0),C=E+2*M.CONST.MARGIN_LEFT>=w;let J=R.transform[4]+R.width;if(P&&(w=J),J>x&&P&&(x=J),b+=R.str.length,b>_&&C&&P){R.transform.forEach(W=>{m.push(W)}),m[3]=R.height,m[2]=A,m[1]=R.str.length-b+_;let H=R.str.substr(0,R.str.length-b+_+1);if(H.length==R.str.length){m[4]=m[4]+R.width;break}var Q=u[R.fontName].fontFamily,U=Math.hypot(R.transform[2],R.transform[3]);g.font=`${U}px ${Q}`;let ne=g.measureText(H).width,ee=g.measureText(R.str).width;m[4]=m[4]+R.width*ne/ee;break}P&&(k=R.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static calIndexPos(T,u,g,_,h){let m=[],b=0,x=0,w=0,E=0,k=0,A=0,C=!0,P=!0,D="";for(const J of T){P=this.isObjIntersec(T[0],J),E=J.transform[4],h||(b+=E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?1:0,D+=(E-w>M.CONST.SPLIT_MARGIN&&""!=J.str.trim()||k!=J.transform[5]?"|":"")+J.str),C=E+2*M.CONST.MARGIN_LEFT>=w;let H=J.transform[4]+J.width;if(P&&(w=H),H>x&&P&&(x=H),b+=J.str.length,b>_&&C&&P){let ne=J.str.substr(0,J.str.length-b+_);var U=u[J.fontName].fontFamily,R=Math.hypot(J.transform[2],J.transform[3]);g.font=`${R}px ${U}`;let ee=g.measureText(ne).width,W=g.measureText(J.str).width;J.transform.forEach(xe=>{m.push(xe)}),m[4]=m[4]+J.width*ee/W,m[3]=J.height,m[2]=A,m[1]=J.str.length-b+_;break}P&&(k=J.transform[5]),A++}return 0==m.length&&(m=[0,T[T.length-1].length-1,T.length-1,T[0].height,x,T[0].transform[5]]),m}static getTextBottom(T,u,g,_){let h=Math.atan2(T[1],T[0]);u.vertical&&(h+=Math.PI/2);const m=Math.hypot(T[2],T[3]),b=m*p.getAscent(u.fontFamily,g,_);let x=T[5],w=0;w=0===h?b:b*Math.cos(h);let E=0*w;return x=T[5]-w-E,[x,m+E]}static getAscent(T,u,g){const m=g.get(T);if(m)return m;u.save(),u.font=`30px ${T}`;const b=u.measureText("");let x=b.fontBoundingBoxAscent,w=Math.abs(b.fontBoundingBoxDescent);if(x){u.restore();const k=x/(x+w);return g.set(T,k),k}u.strokeStyle="red",u.clearRect(0,0,30,30),u.strokeText("g",0,0);let E=u.getImageData(0,0,30,30).data;w=0;for(let k=E.length-1-3;k>=0;k-=4)if(E[k]>0){w=Math.ceil(k/4/30);break}u.clearRect(0,0,30,30),u.strokeText("A",0,30),E=u.getImageData(0,0,30,30).data,x=0;for(let k=0,A=E.length;k<A;k+=4)if(E[k]>0){x=30-Math.floor(k/4/30);break}if(u.restore(),x){const k=x/(x+w);return g.set(T,k),k}return g.set(T,.8),.8}static getMaxLineRight(T,u){let g=0;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4]+_.width;h>g&&(g=h)}return g}static getMinLineLeft(T,u){let g=99999;for(const _ of u)if(_.pageIndex==T||-1==T){let h=_.transform[4];h<g&&(g=h)}return g}}q.CanvasUtil=p},37403:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.CONST=void 0;class S{}q.CONST=S,S.RENDER_SCALE=2,S.LINE_SMALL_HEIGHT=7*S.RENDER_SCALE,S.SPLIT_MARGIN=3*S.RENDER_SCALE,S.INTERSEC_MARGIN=20*S.RENDER_SCALE,S.LINE_MAGIN=2*S.RENDER_SCALE,S.MARGIN_LEFT=2*S.RENDER_SCALE,S.ENABLE_IMAGE_PROCESS=!0,S.STEP_SIZE=2,S.CROP_FULL_WIDTH=!0,S.OVERLAP=.5,S.QUESTION_PATTERN=[],S.QUESTION_PATTERN2=[],S.BREAK_LINE_PATTERN=[],S.SECTION_PATTERN_LOWER=[],S.SECTION_PATTERN_NORMAL=[],S.KICK_PATTERN=[],S.TVCN_CHAR=[],S.HET_PATTERN=[],S.DAPAN_PATTERN=[],S.HUONGDAN_PATTERN=[],S.MULTIPLE_ANS_PATTERN=[],S.DRAW_RESULT="",S.SKIP_CHAR=[],S.FOOTER_PATTERN=[],S.HELP_ANS_PATTERN=[],S.ANS_PATTERN=[]},66933:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnChiTietParser=void 0;const M=S(15025);class p extends M.Parser{constructor(T,u){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=p.TYPE_NAME,null!=T&&(this.isOn=T),this.offCalback=u}parse(T,u,g,_,h,m){var x=u.strLine.replace(/\|/g,"").replace(/\s*\.*\-*:*,*;*/g,"");return x=(x=(x=(x=(x=x.replace(/C\xe2u/g,"")).replace(/\u0110\xe1p\xe1n/g,"")).replace(/\u0110\xe1p/g,"")).replace(/\xe1n/g,"")).replace(/\u0110\/A/g,""),/^[0-9ABCDEFGHabcdefgh]+$/g.test(x)&&x.length>=2&&(null==this.firstLine&&(this.firstLine=u,this.lineIdx=g),this.str+=x),[]}static getBoxes(T,u,g,_){return[]}getResult(T){let u=[],g="",_=[],h=!1;for(let m=0;m<T.length;m++){let b=T.charCodeAt(m),x=b>=65&&b<=72;if(x&&""==g)return[];x!=h&&(_.push(g),g=""),h=x,g+=T[m]}""!=g&&_.push(g);for(let m=1;m<_.length;m+=2){let b=0,x=Math.floor(_[m-1].length/_[m].length),w=+_[m-1].substr(b,x),E=w;for(let k=0;k<_[m].length;k++){if(k>=_[m-1].length)return[];if(w=+_[m-1].substr(b,x),w!=E)return[];u.push({num:w,str:_[m][k]}),b+=x,E=w+1,x=E.toString().length}}return u}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var T=this.getResult(this.str.toUpperCase());if(T.length>0){let u=JSON.stringify({main:T,sub:[]});this.offCalback([{str:u,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}q.DapAnChiTietParser=p,p.TYPE_NAME="dapanchitiet"},94081:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnDienTuParser=void 0;const M=S(37403),p=S(93494),j=S(2101),T=S(15025);class u extends T.Parser{constructor(_,h){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=u.TYPE_NAME,null!=_&&(this.isOn=_),this.offCalback=h}parse(_,h,m,b,x,w){let E=[new p.FooterParser,new j.HuongDanParser];for(const A of E)if(A.parse(_,h,m,b,x,w).length>0)return[];var k=h.strLine;return null==this.firstLine&&(this.firstLine=h,this.lineIdx=m),this.str+=k+"\n",[]}static getBoxes(_,h,m,b){return[]}getResult(_){let h=[],m=_.replace(/\n/g,"\n|"),b=M.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"(\\|"),x=m.matchAll(new RegExp(b,"ig"));for(;;){let C=x.next();if(C.done)break;let P=C.value[0],D=this.getNumberFromStr(P);m=m.replace(P,D+".")}let A,E=m.matchAll(/\d+[\.\-]/g),k=-1;for(;;){let C=E.next();if(C.done)break;if(-1==k)k=C.value.index,A=C;else{let P=m.substr(k,C.value.index-k);h.push(this.toAns(P,A)),k=C.value.index,A=C}}if(k>=0&&A){let C=m.substr(k);h.push(this.toAns(C,A))}return h}toAns(_,h){let m=h.value[0].length;return{num:+h.value[0].substr(0,m-1),str:_.substr(m).replace(/\|/g," ").replace(/ +/g," ").trim()}}getNumberFromStr(_){var h=_.match(/(\d+)/);return h?h[0]:""}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var _=this.getResult(this.str);if(_.length>0){let h=JSON.stringify({main:[],sub:_});this.offCalback([{str:h,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}q.DapAnDienTuParser=u,u.TYPE_NAME="dapandientu"},44123:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.DapAnParser=void 0;const M=S(37403),p=S(15025);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}parse(u,g,_,h,m,b){let x=g.strLine.replace(/\|/g,"").trim().match(M.CONST.DAPAN_PATTERN.join("|"));return null!=x&&x.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:_,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,_,h){return[]}static getAnsFromHelp(u){for(const g of u){let _=g.strLine.replace(/\|/g,"").trim().match(M.CONST.HELP_ANS_PATTERN.join("|"));if(null!=_)for(let h=0;h<_.length;h++)if(null!=_[h]&&1==_[h].length)return _[h]}return""}strContains(u,g){var _=u;for(const h of g)if(_.indexOf(h)>=0)return!0;return!1}}q.DapAnParser=j,j.TYPE_NAME="dapan"},93494:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.FooterParser=void 0;const M=S(37403),p=S(15025);class j extends p.Parser{constructor(){super(),this.TYPE=j.TYPE_NAME}parse(u,g,_,h,m,b){if(!g.isLastLine||h&&g.transform[5]<h.transform[5]+h.height)return[];var w=g.strLine.replace(/\|/g,"").trim().match(M.CONST.FOOTER_PATTERN.join("|"));return null!=w&&w.length>0?[{str:w[0],pageIndex:g.pageIndex,lineIndex:_,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,_,h){return[]}}q.FooterParser=j,j.TYPE_NAME="footer"},15251:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HetParser=void 0;const M=S(37403),p=S(15025);class j extends p.Parser{constructor(u){super(),null!=u&&(this.isOn=u),this.TYPE=j.TYPE_NAME}parse(u,g,_,h,m,b){let x=g.strLine.replace(/\|/g,"").trim().match(M.CONST.HET_PATTERN.join("|"));return null!=x&&x.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:_,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(u,g,_,h){return[]}strContains(u,g){for(const _ of g)if(u.indexOf(_)>=0)return!0;return!1}}q.HetParser=j,j.TYPE_NAME="het"},2101:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.HuongDanParser=void 0;const M=S(37403),p=S(15025),j=S(82130);class T extends p.Parser{constructor(){super(),this.TYPE=T.TYPE_NAME}parse(g,_,h,m,b,x){let w=_.strLine.replace(/\|/g,"").trim().match(M.CONST.HUONGDAN_PATTERN.join("|"));return null!=w&&w.length>0?[{str:_.strLine,pageIndex:_.pageIndex,lineIndex:h,transform:_.transform,type:this.TYPE}]:[]}static getBoxes(g,_,h,m){return j.QuestionParser.getBoxes(g,_,h,m)}strContains(g,_){var h=g;for(const m of _)if(h.indexOf(m)>=0)return!0;return!1}}q.HuongDanParser=T,T.TYPE_NAME="huongdan"},15025:(ce,q)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Parser=void 0,q.Parser=class S{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}process(p,j,T,u,g,_){return this.isOn?this.parse(p,j,T,u,g,_):[]}}},15119:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.PdfRender=void 0;const M=S(48089),p=S(37403);class j{constructor(){let u=document.createElement("canvas");this.tempCanvas=u.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(u,g){var _=URL.createObjectURL(u);const m=pdfjsLib.getDocument({url:_,cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1});var b=[];let x=this;m.promise.then(function(w){x.optionalContentConfigPromise=w.getOptionalContentConfig();for(var E=w._pdfInfo.numPages,k=1;k<=E;k++)w.getPage(k).then(A=>{b.push(A),b.length==E&&(b=b.sort((C,P)=>C._pageIndex>P._pageIndex?1:-1),g(b))})},function(w){console.error(w)})}getImages(u,g){let _=[];if("function"!=typeof u.objs.getAll)return console.log("Unable to read img"),_;let h=u.objs.getAll(),m=Object.keys(h);for(const b of m)h[b].data.pageIndex=g,_.push(h[b].data);return _}isImageObj(u){return-999==u.transform[0]&&"img"==u.str}getLines(u,g,_,h){let m=h.scale,b=u.items.length;for(let A=0;A<b;A++){let C=u.items[A];this.isImageObj(C)||(C.transform=j.transform(h.transform,C.transform),C.width=C.width*m),C.transform[4]+C.width>_.canvas.width&&(C.width=_.canvas.width-C.transform[4]-20);let P=this.isImageObj(C)?[C.transform[5],C.height]:M.CanvasUtil.getTextBottom(C.transform,u.styles[C.fontName],this.tempCanvas,this.ascentCache);C.height=P[1];let D=Math.ceil(P[0]);C.transform[5]=D}u.items.sort((A,C)=>1e6*Math.floor(A.transform[5])-A.transform[4]<1e6*Math.floor(C.transform[5])-C.transform[4]?-1:1);let E,x=[],w=0;this.imageCache[g]?E=this.imageCache[g]:(E=_.getImageData(0,0,_.canvas.width,_.canvas.height),this.imageCache[g]=E);var k={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let A=0;A<b;A++){let C=u.items[A];if(this.isImageObj(C))for(let D=0;D<b;D++)if(A!=D&&M.CanvasUtil.isObjIntersec(C,u.items[D])){C.str="";break}if(M.CanvasUtil.arrContains(C.str.trim(),p.CONST.SKIP_CHAR))continue;let P=Math.floor(C.transform[5]+C.height);0!=w?w-P>=-p.CONST.LINE_MAGIN?this.addTxtToLine(k,C):0!=k.textObjs.length&&(x.push(k),k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height)):(k=this.newLine(C,g),w=Math.floor(k.transform[5]+k.height))}x.push(k);for(const A of x)this.calculateSize(A);this.findAndMergeAnsQuestBlock(x,"ans"),this.findAndMergeAnsQuestBlock(x,"quest"),this.findAndMergeBlock(x),this.mergeIntersecLine(x),this.mergeSmallLine(x,E);for(const A of x)this.calculateSize(A);return x}mergeIntersecLine(u){let g=0;for(;g<u.length;){let _=u[g];g++,g<u.length&&M.CanvasUtil.isLineVIntersec(_,u[g])&&(this.mergeLine(_,u[g]),u.splice(g,1),g--)}}findAndSplitQuestAnsLine(u,g,_){let h=0,m=[],b=p.CONST.BREAK_LINE_PATTERN.join("|");for(const w of u){w.top=void 0,w.bottom=void 0;var x=w.strLine.replace(/\|/g,"").trim().match(b);if(null!=x&&x.length>0){let E=/[\s\|\.]+[B\u0412][\s\|]*\./g,k=w.strLine.trim().toUpperCase().match(E);if(null!=k&&k.length>0){let A=x[0].toUpperCase().indexOf("A");m.push({lineIndex:h,strIndex:A})}}h++}for(let w=m.length-1;w>=0;w--){let E=m[w].lineIndex;this.splitLine(E,g[u[E].pageIndex],_[u[E].pageIndex],m[w].strIndex,u)}}mergeSmallLine(u,g){let _=0,h=1.2*p.CONST.LINE_SMALL_HEIGHT;for(;_<u.length;){let m=u[_];if(!m||!this.isSmallLine(m)){_++;continue}_-1>=0&&!u[_-1].bottom&&(u[_-1].bottom=M.CanvasUtil.getBottomLine(g,_-1,u)[0]),_+1<u.length&&!u[_+1].top&&(u[_+1].top=M.CanvasUtil.getTopLine(g,_+1,u)[0]);let b=_-1<0?-9999:this.getLineTop(m)-this.getLineBot(u[_-1]),x=_+1>=u.length?-9999:this.getLineTop(u[_+1])-this.getLineBot(m),w=_-1>=0&&u[_-1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_-1].transform[4]+u[_-1].width,E=_+1<u.length&&u[_+1].transform[4]<=m.transform[4]&&m.transform[4]<=u[_+1].transform[4]+u[_+1].width;if(0==_&&x<=h&&E){this.mergeLine(u[_+1],m),u.splice(_,1),_--;continue}if(_==u.length-1&&b<=h&&w){this.mergeLine(u[_-1],m),u.splice(_,1),_--;continue}let k=-1;b>x&&E&&x<=h?k=_+1:b<=x&&w&&b<=h?k=_-1:b<=x&&E&&x<=h?k=_+1:b>x&&w&&b<=h&&(k=_-1),k>=0?(this.mergeLine(u[k],m),u.splice(_,1),_--):_++}}isSmallLine(u){return u.height<p.CONST.LINE_SMALL_HEIGHT}mergeLine(u,g){for(const _ of g.textObjs)this.addTxtToLine(u,_)}findAndMergeAnsQuestBlock(u,g){let h=0;for(;h<u.length;){if("ans"==g&&this.isAnsLine(u[h])||"quest"==g&&this.isQuestLine(u[h])){let b=h,x=-1,w=1,E=[];for(;w<=10;){if(b=h+x*w,b<0){x=1,w=1;continue}if(b>=u.length)break;let k=this.isAnsLine(u[b]),A=k||this.isQuestLine(u[b]),C="ans"==g&&k&&M.CanvasUtil.isSameLine(u[h],u[b]),P=!A&&M.CanvasUtil.isLineIntersec(u[h],u[b])&&u[b].transform[4]>u[h].transform[4];if((C||P)&&E.push(b),w++,A&&1==x)break;(w>10||A)&&-1==x&&(x=1,w=1)}E.sort((k,A)=>k<A?1:-1);for(const k of E)for(const A of u[k].textObjs)this.addTxtToLine(u[h],A);for(const k of E)u.splice(k,1),k<h&&h--}h++}}findAndMergeBlock(u){let g=0;for(;g<u.length;){if(this.isAnsLine(u[g])||this.isQuestLine(u[g])){g++;continue}let h=g+1;for(;h<u.length&&u[g].pageIndex==u[h].pageIndex;){let m=this.isAnsLine(u[h])||this.isQuestLine(u[h]);if(M.CanvasUtil.isLineIntersec(u[g],u[h])&&!m||M.CanvasUtil.isSameLine(u[g],u[h])){for(const b of u[h].textObjs)this.addTxtToLine(u[g],b);u.splice(h,1),h=g}h++}g++}}isAnsLine(u){let _=u.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=_&&_.length>0}isQuestLine(u){let g=p.CONST.QUESTION_PATTERN.join("|"),_=u.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=_&&_.length>0}encodeLines(u,g){let _="",h=0;for(const m of g){if(m.height<p.CONST.LINE_SMALL_HEIGHT){h-1>=0&&!g[h-1].bottom&&(g[h-1].bottom=M.CanvasUtil.getBottomLine(u,h-1,g)[0]),h+1<g.length&&!g[h+1].top&&(g[h+1].top=M.CanvasUtil.getTopLine(u,h+1,g)[0]);let b=h-1<0?-9999:this.getLineTop(m)-this.getLineBot(g[h-1]),x=h+1>=g.length?-9999:this.getLineTop(g[h+1])-this.getLineBot(m),w=h-1>=0&&g[h-1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h-1].transform[4]+g[h-1].width,E=h+1<g.length&&g[h+1].transform[4]<=m.transform[4]&&m.transform[4]+m.width<=g[h+1].transform[4]+g[h+1].width,k=1.2*p.CONST.LINE_SMALL_HEIGHT;Math.abs(b)>=k&&Math.abs(x)>=k?_+="L":_+=-9999==b?"3":-9999==x?"4":b>x&&E?"2":b<=x&&w?"1":b<=x&&E?"2":b>x&&w?"1":"L"}else _+="L";h++}return _}getLineTop(u){return u.top?u.top:u.transform[5]}getLineBot(u){return u.bottom?u.bottom:u.transform[5]+u.height}splitLine(u,g,_,h,m){let b=m[u],x=M.CanvasUtil.calIndexPos(b.textObjs,g,_,h,!0),w=this.newLine(b.textObjs[0],b.pageIndex),E=x[2],k=x[1],A=b.textObjs[E],C=A.transform,P={str:A.str.substr(0,k),width:x[4]-C[4],height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],C[4],C[5]]},D={str:A.str.substr(k),width:A.width-P.width,height:A.height,fontName:A.fontName,transform:[C[0],C[1],C[2],C[3],x[4],C[5]]},Q=b.textObjs;b.textObjs=[],w.textObjs=[];for(let U=0;U<Q.length;U++)U<E?this.addTxtToLine(b,Q[U]):U>E?this.addTxtToLine(w,Q[U]):(this.addTxtToLine(b,P),this.addTxtToLine(w,D));return this.calculateSize(b),this.calculateSize(w),u==m.length-1?m.push(w):m.splice(u+1,0,w),w}findAndMergeSmallLine(u,g,_){let h=0,m=u.matchAll(_),b=[];for(;;){let x=m.next();if(x.done)break;let w=x.value[0],E=x.value.index,k=0,A=[];for(let C=0;C<w.length;C++)"L"==w[C]?k=E+C:A.push(E+C);for(const C of A){for(const P of g[C].textObjs)this.addTxtToLine(g[k],P);g[k].top=void 0,g[k].bottom=void 0,b.push(C)}h++}b.sort((x,w)=>x<w?1:-1);for(const x of b)g.splice(x,1);return h}newLine(u,g){let _={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return _.transform[4]=u.transform[4],_.transform[5]=u.transform[5],_.height=u.height,_.width=u.width,_.txtLength=u.str.length,_.textObjs.push(u),_}addTxtToLine(u,g){g.transform[4]<u.transform[4]&&(u.transform[4]=g.transform[4]),g.transform[5]<u.transform[5]&&(u.transform[5]=g.transform[5]),g.transform[5]+g.height>u.transform[5]+u.height&&(u.height=g.transform[5]+g.height-u.transform[5]),g.transform[4]+g.width>u.transform[4]+u.width&&(u.width=g.transform[4]+g.width-u.transform[4]),u.txtLength+=g.str.length,u.textObjs.push(g);let _=u.transform[4]+u.width,h=u.height;for(const m of u.textObjs)m.transform[4]+m.width>_&&(_=m.transform[4]+m.width),m.transform[5]+m.height>u.transform[5]+h&&(h=m.transform[5]+m.height-u.transform[5]);u.width=_-u.transform[4],u.height=h}static transform(u,g){return pdfjsLib.Util.transform(u,g)}render(u,g,_,h){for(var m,x=u.length,w=0;w<x;w++){var E=document.createElement("div");E.className="pdf-page",E.id="page-"+w,null===(m=document.getElementById(g))||void 0===m||m.appendChild(E),this.renderPage(u[w],_,h)}}calculateSize(u){if(0==u.textObjs.length)return;u.textObjs.sort((A,C)=>1e6*Math.floor(A.transform[4])+A.transform[5]>1e6*Math.floor(C.transform[4])+C.transform[5]?1:-1),u.strLine="";let g=0,_=0,h=0,m=0,b=9999,x=0,w=9999;for(const A of u.textObjs){let C=M.CanvasUtil.isObjIntersec(u.textObjs[0],A);h=A.transform[4];let P=h-_>p.CONST.SPLIT_MARGIN&&""!=A.str.trim()||m!=A.transform[5]?"|":"";u.strLine+=P+A.str,h<w&&(w=h);let D=A.transform[4]+A.width;C&&(_=D),D>g&&C&&(g=D),C&&(m=A.transform[5]),A.transform[5]<b&&(b=A.transform[5]),A.transform[5]+A.height>x&&(x=A.transform[5]+A.height)}u.transform[4]=w,u.transform[5]=b,u.width=g-w,u.height=x-b,u.transform[0]=b,u.transform[1]=x;let E=p.CONST.TVCN_CHAR,k=u.strLine;for(const A of E)k=k.replace(new RegExp(A[0],"g"),A[1]);u.strLine=k}renderPage(u,g,_){var h=u._pageIndex,m=u.getViewport({scale:g});let b=.8*m.width;var x=document.createElement("canvas"),w=document.getElementById("page-"+h);w?.appendChild(x),x.id="canvas"+h;var E=x.getContext("2d",{alpha:!1});x.height=m.height,x.width=m.width,x.style.height=m.height*b/m.width+"px",x.style.width=b+"px",w&&(w.style.width=x.style.width,w.style.height=x.style.height);const C={canvasContext:E,transform:[1,0,0,1,0,0],viewport:m,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};u.render(C).promise.then(function(){_&&_(E,u._pageIndex,m)})}}q.PdfRender=j},52280:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.Process=void 0;const M=S(4159),p=S(48089),j=S(37403),T=S(66933),u=S(44123),g=S(93494),_=S(15251),h=S(2101),m=S(15119),b=S(82130),x=S(94904),w=S(94081);q.Process=class E{constructor(A){var C,P,D;let Q=JSON.parse(A);j.CONST.RENDER_SCALE=Q.RENDER_SCALE,j.CONST.LINE_SMALL_HEIGHT=Q.LINE_SMALL_HEIGHT*j.CONST.RENDER_SCALE,j.CONST.SPLIT_MARGIN=Q.SPLIT_MARGIN*j.CONST.RENDER_SCALE,j.CONST.INTERSEC_MARGIN=Q.INTERSEC_MARGIN*j.CONST.RENDER_SCALE,j.CONST.LINE_MAGIN=Q.LINE_MAGIN*j.CONST.RENDER_SCALE,j.CONST.MARGIN_LEFT=Q.MARGIN_LEFT*j.CONST.RENDER_SCALE,j.CONST.ENABLE_IMAGE_PROCESS=Q.ENABLE_IMAGE_PROCESS,j.CONST.STEP_SIZE=Q.STEP_SIZE,j.CONST.CROP_FULL_WIDTH=Q.CROP_FULL_WIDTH,j.CONST.OVERLAP=Q.OVERLAP,j.CONST.QUESTION_PATTERN=Q.QUESTION_PATTERN,j.CONST.QUESTION_PATTERN2=Q.QUESTION_PATTERN2,j.CONST.BREAK_LINE_PATTERN=Q.BREAK_LINE_PATTERN,j.CONST.SECTION_PATTERN_LOWER=Q.SECTION_PATTERN_LOWER,j.CONST.SECTION_PATTERN_NORMAL=Q.SECTION_PATTERN_NORMAL,j.CONST.KICK_PATTERN=Q.KICK_PATTERN,j.CONST.TVCN_CHAR=Q.TVCN_CHAR,j.CONST.HET_PATTERN=Q.HET_PATTERN,j.CONST.DAPAN_PATTERN=Q.DAPAN_PATTERN,j.CONST.HUONGDAN_PATTERN=Q.HUONGDAN_PATTERN,j.CONST.MULTIPLE_ANS_PATTERN=Q.MULTIPLE_ANS_PATTERN,j.CONST.DRAW_RESULT=Q.DRAW_RESULT,j.CONST.SKIP_CHAR=Q.SKIP_CHAR,j.CONST.FOOTER_PATTERN=null!==(C=Q.FOOTER_PATTERN)&&void 0!==C?C:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],j.CONST.HELP_ANS_PATTERN=null!==(P=Q.HELP_ANS_PATTERN)&&void 0!==P?P:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"],j.CONST.ANS_PATTERN=null!==(D=Q.ANS_PATTERN)&&void 0!==D?D:["([\\s\\|\\.]+[ABCDEFGHIJK][\\s\\|]*[\\.\\)])"]}setUpdateStatusCallback(A){this.updateStatusCallback=A}setOncompleteCallback(A){this.onCompleteCallback=A}parsePdf(A){let C=new m.PdfRender;C.loadPdf(A,P=>{const D=P.length;let Q=[],U=[],R=document.createElement("div");R.id="hiddenWrapper",R.style.width="1px",R.style.height="1px",R.style.overflow="hidden",R.style.opacity="0",R.style.zIndex="-9999",R.style.position="fixed",R.style.top="0",R.style.left="0",document.body.appendChild(R);let J=document.createElement("div"),H="canvasWrapper";J.id=H,R.appendChild(J);const ne=(new Date).getTime();let ee=[];C.render(P,H,j.CONST.RENDER_SCALE,(W,xe,Ce)=>{if(null!=W&&(Q[xe]=W,U[xe]=Ce),ee.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${ee.length}/${D}`),ee.length==D){const fe=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(fe-ne)/1e3+" secs"),this.startAnalyze(Q,U,P)}})})}showHidden(){let A=document.getElementById("hiddenWrapper");A&&(A.style.opacity="1",A.style.width="",A.style.height="",A.style.overflow="",A.style.position="")}imgToTextObj(A,C){return{str:"img",fontName:C,width:A.paintWidth,height:A.paintHeight,transform:[-999,0,0,0,-A.left,-A.top-A.paintHeight]}}startAnalyze(A,C,P){const D=P.length;let Q=[],U=[],R=[],J=[],H=new m.PdfRender;const ne=(new Date).getTime();for(let ee=0;ee<D;ee++){const W=ee;let xe=H.getImages(P[ee],W);for(const Ce of xe)J.push(Ce);P[ee].getTextContent().then(Ce=>{var fe;for(const he of xe)Ce.items.push(this.imgToTextObj(he,Ce.items.length>0?Ce.items[0].fontName:""));var be=H.getLines(Ce,W,A[W],C[W]);if(U=U.concat(be),R[W]=Ce.styles,Q.push(1),Q.length==D){U.sort((Oe,Ye)=>1e7*Oe.pageIndex+(Oe.transform.length>0?Oe.transform[5]:0)-(1e7*Ye.pageIndex+(Ye.transform.length>0?Ye.transform[5]:0))),H.findAndSplitQuestAnsLine(U,R,A),""!=j.CONST.DRAW_RESULT&&console.log(U);let he=this.findEntityPos(U,R,A,H.imageCache,0);console.log("lstPos",he);let Te=!1;for(const Oe of he)if(Oe.type==b.QuestionParser.TYPE_NAME){Te=!0;break}if(Te||(he=this.findEntityPos(U,R,A,H.imageCache,1)),0==he.length)return void(this.onCompleteCallback&&this.onCompleteCallback([],A));let me=he[0].type==T.DapAnChiTietParser.TYPE_NAME,se=me?JSON.parse(he[0].str):null,_e=new Map,de=new Map;if(me){for(const Oe of se.main)_e.set(Oe.num,Oe.str);for(const Oe of se.sub)de.set(Oe.num,Oe.str)}let Ae=this.getQuestionInfo(he,U,A,_e);Ae.forEach(Oe=>{if(!_e.has(Oe.num)&&!de.has(Oe.num)&&Oe.help&&Oe.help.text){let Ye=u.DapAnParser.getAnsFromHelp(Oe.help.text);""!=Ye&&de.set(Oe.num,Ye)}});for(const Oe of Ae){if(!Oe.isGroup&&0==Oe.answers.length&&_e.has(Oe.num)){let Ye={pageIndex:Oe.remove.pageIndex,top:Oe.remove.top-1,left:Oe.remove.left-1,width:1,heigh:1};for(const pt of["A","B","C","D"]){let ft={label:pt,remove:Ye,positions:[Ye]};_e.get(Oe.num)==pt&&(ft.isCorrect=!0),Oe.answers.push(ft)}Oe.isFixAns=!0}if(!Oe.isGroup&&0==Oe.answers.length&&!_e.has(Oe.num)&&de.has(Oe.num)&&(Oe.strAns=de.get(Oe.num)),!Oe.isGroup&&Oe.answers.length>0&&!_e.has(Oe.num)&&de.has(Oe.num))for(const Ye of Oe.answers)Ye.label==(null===(fe=de.get(Oe.num))||void 0===fe?void 0:fe.toUpperCase().substring(0,1))&&(Ye.isCorrect=!0)}const Se=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(Se-ne)/1e3+" secs"),this.showOnCanvas(Ae,he,U,A,J,j.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(Ae,A)}})}}findEntityPos(A,C,P,D,Q){let U=[],H=!1;var ee=[{parser:new x.SectionParser,on:[],off:[]},{parser:new b.QuestionParser(Q),on:[3,4],off:[6]},{parser:new M.AnswerParser,on:[3,6],off:[]},{parser:new _.HetParser(!1),on:[6,8],off:[0,2]},{parser:new u.DapAnParser(!1),on:[6,8],off:[0,2,4]},{parser:new h.HuongDanParser,on:[],off:[8]},{parser:new T.DapAnChiTietParser(!1,he=>{for(const Te of he)U.unshift(Te)}),on:[],off:[2]},{parser:new g.FooterParser,on:[],off:[]},{parser:new w.DapAnDienTuParser(!1,he=>{if(0!=he.length)if(U.length>0&&U[0].type==T.DapAnChiTietParser.TYPE_NAME){let Te=JSON.parse(he[0].str),me=JSON.parse(U[0].str);me.sub=Te.sub,U[0].str=JSON.stringify(me)}else he[0].type=T.DapAnChiTietParser.TYPE_NAME,U.unshift(he[0])}),on:[],off:[2]}],W=[8,0,1,2,3,4,5,6,7],xe=null;let Ce=0,fe="";for(const he of A){(Ce==A.length-1||he.pageIndex<A[Ce+1].pageIndex)&&(he.isLastLine=!0);for(const Te of W){let me=ee[Te];var be=me.parser.process(U,he,Ce,xe,C[he.pageIndex],P[he.pageIndex]);if(be.length>0){for(const se of be){if(se.type!=M.AnswerParser.TYPE_NAME&&se.type!=g.FooterParser.TYPE_NAME&&(fe=""),se.type==M.AnswerParser.TYPE_NAME){if(!"ABCDEFGH".startsWith(fe+se.str))continue;fe+=se.str;for(let _e=U.length-1;_e>=0&&U[_e].type==x.SectionParser.TYPE_NAME;_e--)U.splice(_e,1)}se.type==g.FooterParser.TYPE_NAME&&(he.isFooter=!0),se.type==u.DapAnParser.TYPE_NAME&&(H=!0),se.type==h.HuongDanParser.TYPE_NAME&&H&&ee[5].parser.off(),U.push(se)}for(const se of me.on)ee[se].parser.on();for(const se of me.off)ee[se].parser.off();break}}xe=he,Ce++}for(const he of ee)he.parser.off();return U.forEach(he=>{if(!A[he.lineIndex].top){let me=p.CanvasUtil.getTopLine(D[he.pageIndex],he.lineIndex,A);A[he.lineIndex].top=me[0],1!=he.isIntersec&&(he.isIntersec=me[1])}}),U.forEach(he=>{if(!A[he.lineIndex].bottom){let me=p.CanvasUtil.getBottomLine(D[he.pageIndex],he.lineIndex,A);A[he.lineIndex].bottom=me[0],1!=he.isIntersec&&(he.isIntersec=me[0])}}),U}showOnCanvas(A,C,P,D,Q,U){const R=(new Date).getTime(),J=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]),H=new Map([[b.QuestionParser.TYPE_NAME,"red"],[M.AnswerParser.TYPE_NAME,"blue"],[_.HetParser.TYPE_NAME,"gray"],[T.DapAnChiTietParser.TYPE_NAME,"green"],[u.DapAnParser.TYPE_NAME,"orange"],[h.HuongDanParser.TYPE_NAME,"pink"],[g.FooterParser.TYPE_NAME,"yellow"],[x.SectionParser.TYPE_NAME,"black"]]);if(U.indexOf("quest")>=0)for(const ee of A){for(const W of ee.positions)p.CanvasUtil.drawBox(D[W.pageIndex],ee.isGroup?"black":"red",W);p.CanvasUtil.drawBox(D[ee.remove.pageIndex],"yellow",ee.remove);for(const W of ee.answers){for(const xe of W.positions)p.CanvasUtil.drawBox(D[xe.pageIndex],J.get(W.label)+"",xe,!0);p.CanvasUtil.drawBox(D[W.remove.pageIndex],"yellow",W.remove),W.isCorrect&&p.CanvasUtil.drawPoint(D[W.positions[0].pageIndex],"green",W.positions[0])}if(ee.help){for(const W of ee.help.positions)p.CanvasUtil.drawBox(D[W.pageIndex],"orange",W);ee.help.remove&&p.CanvasUtil.drawBox(D[ee.help.remove.pageIndex],"yellow",ee.help.remove)}}if(U.indexOf("line")>=0)for(const ee of P)p.CanvasUtil.drawBox2(D[ee.pageIndex],ee.height<j.CONST.LINE_SMALL_HEIGHT?"red":"rgba(50, 58, 168, 0.4)",ee.width,ee.height,ee.transform);if(U.indexOf("txt")>=0)for(const ee of P)for(const W of ee.textObjs)""!=W.str.trim()&&p.CanvasUtil.drawBox2(D[ee.pageIndex],ee.height<j.CONST.LINE_SMALL_HEIGHT?"red":"rgba(132, 0, 137, 0.2)",W.width,W.height,W.transform);if(U.indexOf("img")>=0)for(const ee of Q)p.CanvasUtil.drawBox2(D[ee.pageIndex],"green",ee.paintWidth,ee.paintHeight,[0,0,0,0,-ee.left,-ee.top-ee.paintHeight]);if(U.indexOf("pos")>=0)for(const ee of C){let W={top:ee.transform[5],left:ee.transform[4],width:0,heigh:0,pageIndex:ee.pageIndex};p.CanvasUtil.drawPoint(D[ee.pageIndex],H.get(ee.type)+"",W)}const ne=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(ne-R)/1e3+" secs")}getQuestionInfo(A,C,P,D){if(0==A.length)return[];let Q=0,U=[],R=new Map,J="",H=!1,ne=!1,ee=0;A.forEach((W,xe)=>{xe>0&&null==A[xe-1].text&&(A[xe-1].text=C.slice(A[xe-1].lineIndex,W.lineIndex)),xe==A.length-1&&(A[xe].text=C.slice(A[xe].lineIndex,C.length))}),A.forEach(W=>{let xe=":"+W.type;!H&&(W.type==_.HetParser.TYPE_NAME||W.type==u.DapAnParser.TYPE_NAME)&&(H=!0);let Ce=null;for(let be=Q+1;be<A.length;be++)if((W.type!=b.QuestionParser.TYPE_NAME||A[be].type!=M.AnswerParser.TYPE_NAME)&&A[be].type!=g.FooterParser.TYPE_NAME){Ce=A[be];break}let fe=P[W.pageIndex].canvas.height-20;if(!H&&W.type==x.SectionParser.TYPE_NAME&&(ee++,U.push({num:ee,answers:[],remove:x.SectionParser.getRemoveBox(W,C),positions:x.SectionParser.getBoxes(W,C,Ce,fe),isGroup:!0,text:W.text})),!H&&W.type==b.QuestionParser.TYPE_NAME&&U.push({num:+W.str,answers:[],remove:b.QuestionParser.getRemoveBox(W,C),positions:b.QuestionParser.getBoxes(W,C,Ce,fe),group:ee,text:W.text}),!H&&W.type==M.AnswerParser.TYPE_NAME&&U.length>0){let be=U[U.length-1].num,he={label:W.str,remove:M.AnswerParser.getRemoveBox(W,C),positions:M.AnswerParser.getBoxes(W,C,Ce,fe)};D.size>0&&D.get(be)==he.label&&(he.isCorrect=!0),U[U.length-1].answers.push(he);let Te=C[W.lineIndex].strLine.replace(/\|/g,"").trim().match(j.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Te&&Te.length>0&&(U[U.length-1].isFixAns=!0),1==W.isIntersec&&(U[U.length-1].isFixAns=!0)}if(!ne&&W.type==h.HuongDanParser.TYPE_NAME&&1==U.length&&J.endsWith(`:${b.QuestionParser.TYPE_NAME}:${M.AnswerParser.TYPE_NAME}`)&&(ne=!0),W.type==h.HuongDanParser.TYPE_NAME&&ne){let be=U[U.length-1].num;R.set(be,{num:be,positions:h.HuongDanParser.getBoxes(W,C,Ce,fe),text:W.text})}if(W.type==h.HuongDanParser.TYPE_NAME&&!ne&&(R.clear(),H=!0),H&&W.type==b.QuestionParser.TYPE_NAME){let be=+W.str;R.get(be)||R.set(be,{num:be,positions:b.QuestionParser.getBoxes(W,C,Ce,fe),remove:b.QuestionParser.getRemoveBox(W,C),text:W.text})}!J.endsWith(xe)&&W.type!=g.FooterParser.TYPE_NAME&&(J+=xe),Q++});for(const W of U)W.isGroup||(W.help=R.get(W.num),1==W.answers.length&&(W.answers=[]));return U}}},82130:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.QuestionParser=void 0;const M=S(48089),p=S(37403),j=S(15025);class T extends j.Parser{constructor(g){super(),this.TYPE=T.TYPE_NAME,this.questType=g}parse(g,_,h,m,b,x){var w=this.matchPos(_.strLine);if(w.value){let E=null;for(let D=w.value.length-1;D>=0;D--)if(w.value[D]){E=w.value[D];break}if(null==E)return[];let A=E.matchAll(/\d+/g).next(),C=E.length;!A.done&&!E.trim().endsWith(".")&&!E.trim().endsWith(":")&&(C=A.value.index+A.value[0].length);let P=_.strLine.replace(/\|/g,"").toLowerCase().indexOf(E)+C-1;return[{str:this.getNumberFromStr(E),pageIndex:_.pageIndex,lineIndex:h,transform:_.transform,startLeft:M.CanvasUtil.calIndexPos2(_.textObjs,b,x,P,!0),type:this.TYPE}]}return[]}matchPos(g){let _=g.replace(/\|/g,"").toLowerCase().trim();if(0==this.questType){let h=p.CONST.QUESTION_PATTERN.join("|");return _.matchAll(h).next()}{let h=p.CONST.QUESTION_PATTERN2.join("|");return _.matchAll(h).next()}}getNumberFromStr(g){var _=g.match(/(\d+)/);return _?_[0]:""}static getRemoveBox(g,_){let h=g.startLeft?g.startLeft[5]:_[g.lineIndex].top,m=g.transform[4]-p.CONST.MARGIN_LEFT,b=g.startLeft?g.startLeft[5]+g.startLeft[3]:_[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:h||20,left:m,heigh:b&&h?b-h:0,width:(g.startLeft?g.startLeft[4]:0)-m}}static getBoxes(g,_,h,m){let b=m;for(let U=g.lineIndex;U<_.length;U++)if(M.CanvasUtil.isLastLineOfPage(U,_)){let R=_[U].isFooter?_[U-1]:_[U];b=R.transform[5]+R.height+20;break}let x=[],w=g.pageIndex,E=h?h.lineIndex:_.length-1,k=_[g.lineIndex].transform[4]-p.CONST.MARGIN_LEFT,A=_[g.lineIndex].top;if(!A)return[];let C=p.CONST.CROP_FULL_WIDTH?M.CanvasUtil.getMaxLineRight(-1,_)+2*p.CONST.MARGIN_LEFT:_[g.lineIndex].transform[4]+_[g.lineIndex].width+2*p.CONST.MARGIN_LEFT,P=b,D=w,Q=g.lineIndex+1;for(;Q<=E;Q++){let U=_[Q].top;if(Q==_.length-1&&!h&&(U=_[Q].bottom),!p.CONST.CROP_FULL_WIDTH){let J=_[Q-1].transform[4]+_[Q-1].width+2*p.CONST.MARGIN_LEFT;J>C&&(C=J)}let R=_[Q-1].transform[4]-p.CONST.MARGIN_LEFT;R<k&&(k=R),_[Q].isFooter&&U?P=U:(_[Q].pageIndex>D&&(_[Q-1].isFooter||(P=b),x.push({pageIndex:D,top:A,left:k,width:C-k,heigh:P-A}),A=20,k=M.CanvasUtil.getMinLineLeft(_[Q].pageIndex,_)-p.CONST.MARGIN_LEFT),D=_[Q].pageIndex,U&&(P=U))}if(Q-=1,!h&&M.CanvasUtil.isLastLineOfPage(Q,_)){let U=_[Q].isFooter?_[Q-1]:_[Q];P=U.transform[5]+U.height+20}return M.CanvasUtil.isFirstLineOfPage(Q,_)||x.push({pageIndex:D,top:A,left:k,width:C-k,heigh:P-A}),x}}q.QuestionParser=T,T.TYPE_NAME="question"},94904:(ce,q,S)=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0}),q.SectionParser=void 0;const M=S(48089),p=S(37403),j=S(15025),T=S(82130);class u extends j.Parser{constructor(){super(),this.TYPE=u.TYPE_NAME}parse(_,h,m,b,x,w){let E=h.strLine.replace(/\|/g,"").toLowerCase().trim().match(p.CONST.SECTION_PATTERN_LOWER.join("|")),k=null!=E&&E.length>0;if(k||(E=h.strLine.replace(/\|/g,"").trim().match(p.CONST.SECTION_PATTERN_NORMAL.join("|")),k=null!=E&&E.length>0),k&&E){let A=h.strLine.indexOf(E[0])+E[0].length+1,C=[E[0][0]];for(let P=_.length-1;P>=0;P--){if(_[P].type==T.QuestionParser.TYPE_NAME){C.push(".Q");break}C.push(_[P].str[0])}return"HGFEDCBA.Q".endsWith(C.join(""))?[]:[{str:E[0],pageIndex:h.pageIndex,lineIndex:m,transform:h.transform,startLeft:M.CanvasUtil.calIndexPos(h.textObjs,x,w,A,!0),type:this.TYPE}]}return[]}static getRemoveBox(_,h){let m=h[_.lineIndex].top,b=_.transform[4]-p.CONST.MARGIN_LEFT,x=h[_.lineIndex].bottom;return{pageIndex:_.pageIndex,top:m||20,left:b,heigh:x&&m?x-m:0,width:b-b}}static getBoxes(_,h,m,b){const x=b;let w=[],E=_.pageIndex,k=m?m.lineIndex:h.length-1,A=M.CanvasUtil.getMinLineLeft(-1,h)-p.CONST.MARGIN_LEFT,C=h[_.lineIndex].top;if(!C)return[];let P=M.CanvasUtil.getMaxLineRight(-1,h)+2*p.CONST.MARGIN_LEFT,D=x,Q=E,U=_.lineIndex+1;for(;U<=k;U++){let R=h[U].top;if(h[U].isFooter&&R)D=R;else if(h[U].pageIndex>Q&&(w.push({pageIndex:Q,top:C,left:A,width:P-A,heigh:D-C}),C=20),Q=h[U].pageIndex,R){D=R;break}}return U>=h.length&&(U=h.length-1),M.CanvasUtil.isFirstLineOfPage(U,h)||w.push({pageIndex:Q,top:C,left:A,width:P-A,heigh:D-C}),w}}q.SectionParser=u,u.TYPE_NAME="section"},62180:function(ce,q,S){"use strict";var M=this&&this.__createBinding||(Object.create?function(j,T,u,g){void 0===g&&(g=u),Object.defineProperty(j,g,{enumerable:!0,get:function(){return T[u]}})}:function(j,T,u,g){void 0===g&&(g=u),j[g]=T[u]}),p=this&&this.__exportStar||function(j,T){for(var u in j)"default"!==u&&!Object.prototype.hasOwnProperty.call(T,u)&&M(T,j,u)};Object.defineProperty(q,"__esModule",{value:!0}),p(S(52280),q)},85129:(ce,q,S)=>{var M=S(51474).FilterCSS,p=S(51474).getDefaultWhiteList,j=S(98735);var u=new M;function b(me){return me.replace(w,"&lt;").replace(E,"&gt;")}var w=/</g,E=/>/g,k=/"/g,A=/&quot;/g,C=/&#([a-zA-Z0-9]*);?/gim,P=/&colon;?/gim,D=/&newline;?/gim,Q=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,U=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,R=/u\s*r\s*l\s*\(.*/gi;function J(me){return me.replace(k,"&quot;")}function H(me){return me.replace(A,'"')}function ne(me){return me.replace(C,function(_e,de){return String.fromCharCode("x"===de[0]||"X"===de[0]?parseInt(de.substr(1),16):parseInt(de,10))})}function ee(me){return me.replace(P,":").replace(D," ")}function W(me){for(var se="",_e=0,de=me.length;_e<de;_e++)se+=me.charCodeAt(_e)<32?" ":me.charAt(_e);return j.trim(se)}function xe(me){return W(me=ee(me=ne(me=H(me))))}function Ce(me){return b(me=J(me))}q.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},q.getDefaultWhiteList=function T(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},q.onTag=function g(me,se,_e){},q.onIgnoreTag=function _(me,se,_e){},q.onTagAttr=function h(me,se,_e){},q.onIgnoreTagAttr=function m(me,se,_e){},q.safeAttrValue=function x(me,se,_e,de){if(_e=xe(_e),"href"===se||"src"===se){if("#"===(_e=j.trim(_e)))return"#";if("http://"!==_e.substr(0,7)&&"https://"!==_e.substr(0,8)&&"mailto:"!==_e.substr(0,7)&&"tel:"!==_e.substr(0,4)&&"data:image/"!==_e.substr(0,11)&&"ftp://"!==_e.substr(0,6)&&"./"!==_e.substr(0,2)&&"../"!==_e.substr(0,3)&&"#"!==_e[0]&&"/"!==_e[0])return""}else if("background"===se){if(Q.lastIndex=0,Q.test(_e))return""}else if("style"===se){if(U.lastIndex=0,U.test(_e)||(R.lastIndex=0,R.test(_e)&&(Q.lastIndex=0,Q.test(_e))))return"";!1!==de&&(_e=(de=de||u).process(_e))}return Ce(_e)},q.escapeHtml=b,q.escapeQuote=J,q.unescapeQuote=H,q.escapeHtmlEntities=ne,q.escapeDangerHtml5Entities=ee,q.clearNonPrintableCharacter=W,q.friendlyAttrValue=xe,q.escapeAttrValue=Ce,q.onIgnoreTagStripAll=function fe(){return""},q.StripTagBody=function be(me,se){"function"!=typeof se&&(se=function(){});var _e=!Array.isArray(me),Ae=[],Se=!1;return{onIgnoreTag:function(Oe,Ye,pt){if(function de(Oe){return!!_e||-1!==j.indexOf(me,Oe)}(Oe)){if(pt.isClosing){return Ae.push([!1!==Se?Se:pt.position,pt.position+10]),Se=!1,"[/removed]"}return Se||(Se=pt.position),"[removed]"}return se(Oe,Ye,pt)},remove:function(Oe){var Ye="",pt=0;return j.forEach(Ae,function(ft){Ye+=Oe.slice(pt,ft[0]),pt=ft[1]}),Ye+=Oe.slice(pt)}}},q.stripCommentTag=function he(me){for(var se="",_e=0;_e<me.length;){var de=me.indexOf("\x3c!--",_e);if(-1===de){se+=me.slice(_e);break}se+=me.slice(_e,de);var Ae=me.indexOf("--\x3e",de);if(-1===Ae)break;_e=Ae+3}return se},q.stripBlankChar=function Te(me){var se=me.split("");return(se=se.filter(function(_e){var de=_e.charCodeAt(0);return!(127===de||de<=31&&10!==de&&13!==de)})).join("")},q.cssFilter=u,q.getDefaultCSSWhiteList=p},77424:(ce,q,S)=>{var M=S(85129),p=S(74469),j=S(69278);function T(g,_){return new j(_).process(g)}(q=ce.exports=T).filterXSS=T,q.FilterXSS=j,function(){for(var g in M)q[g]=M[g];for(var _ in p)q[_]=p[_]}(),typeof window<"u"&&(window.filterXSS=ce.exports),function u(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}()&&(self.filterXSS=ce.exports)},74469:(ce,q,S)=>{var M=S(98735);function p(w){var k,E=M.spaceIndex(w);return k=w.slice(1,-1===E?-1:E+1),"/"===(k=M.trim(k).toLowerCase()).slice(0,1)&&(k=k.slice(1)),"/"===k.slice(-1)&&(k=k.slice(0,-1)),k}function j(w){return"</"===w.slice(0,2)}var u=/[^a-zA-Z0-9\\_:.-]/gim;function _(w,E){for(;E<w.length;E++){var k=w[E];if(" "!==k)return"="===k?E:-1}}function h(w,E){for(;E<w.length;E++){var k=w[E];if(" "!==k)return"'"===k||'"'===k?E:-1}}function m(w,E){for(;E>0;E--){var k=w[E];if(" "!==k)return"="===k?E:-1}}function x(w){return function b(w){return'"'===w[0]&&'"'===w[w.length-1]||"'"===w[0]&&"'"===w[w.length-1]}(w)?w.substr(1,w.length-2):w}q.parseTag=function T(w,E,k){"use strict";var A="",C=0,P=!1,D=!1,Q=0,U=w.length,R="",J="";e:for(Q=0;Q<U;Q++){var H=w.charAt(Q);if(!1===P){if("<"===H){P=Q;continue}}else if(!1===D){if("<"===H){A+=k(w.slice(C,Q)),P=Q,C=Q;continue}if(">"===H||Q===U-1){A+=k(w.slice(C,P)),R=p(J=w.slice(P,Q+1)),A+=E(P,A.length,R,J,j(J)),C=Q+1,P=!1;continue}if('"'===H||"'"===H)for(var ne=1,ee=w.charAt(Q-ne);""===ee.trim()||"="===ee;){if("="===ee){D=H;continue e}ee=w.charAt(Q-++ne)}}else if(H===D){D=!1;continue}}return C<U&&(A+=k(w.substr(C))),A},q.parseAttr=function g(w,E){"use strict";var k=0,A=0,C=[],P=!1,D=w.length;function Q(ne,ee){if(!((ne=(ne=M.trim(ne)).replace(u,"").toLowerCase()).length<1)){var W=E(ne,ee||"");W&&C.push(W)}}for(var U=0;U<D;U++){var H,R=w.charAt(U);if(!1!==P||"="!==R)if(!1===P||U!==A){if(/\s|\n|\t/.test(R)){if(w=w.replace(/\s|\n|\t/g," "),!1===P){if(-1===(H=_(w,U))){Q(M.trim(w.slice(k,U))),P=!1,k=U+1;continue}U=H-1;continue}if(-1===(H=m(w,U-1))){Q(P,x(M.trim(w.slice(k,U)))),P=!1,k=U+1;continue}}}else{if(-1===(H=w.indexOf(R,U+1)))break;Q(P,M.trim(w.slice(A+1,H))),P=!1,k=(U=H)+1}else P=w.slice(k,U),A='"'===w.charAt(k=U+1)||"'"===w.charAt(k)?k:h(w,U+1)}return k<w.length&&(!1===P?Q(w.slice(k)):Q(P,x(M.trim(w.slice(k))))),M.trim(C.join(" "))}},98735:ce=>{ce.exports={indexOf:function(q,S){var M,p;if(Array.prototype.indexOf)return q.indexOf(S);for(M=0,p=q.length;M<p;M++)if(q[M]===S)return M;return-1},forEach:function(q,S,M){var p,j;if(Array.prototype.forEach)return q.forEach(S,M);for(p=0,j=q.length;p<j;p++)S.call(M,q[p],p,q)},trim:function(q){return String.prototype.trim?q.trim():q.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(q){var M=/\s|\n|\t/.exec(q);return M?M.index:-1}}},69278:(ce,q,S)=>{var M=S(51474).FilterCSS,p=S(85129),j=S(74469),T=j.parseTag,u=j.parseAttr,g=S(98735);function _(w){return null==w}function x(w){(w=function m(w){var E={};for(var k in w)E[k]=w[k];return E}(w||{})).stripIgnoreTag&&(w.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),w.onIgnoreTag=p.onIgnoreTagStripAll),w.whiteList=w.whiteList||w.allowList?function b(w){var E={};for(var k in w)Array.isArray(w[k])?E[k.toLowerCase()]=w[k].map(function(A){return A.toLowerCase()}):E[k.toLowerCase()]=w[k];return E}(w.whiteList||w.allowList):p.whiteList,w.onTag=w.onTag||p.onTag,w.onTagAttr=w.onTagAttr||p.onTagAttr,w.onIgnoreTag=w.onIgnoreTag||p.onIgnoreTag,w.onIgnoreTagAttr=w.onIgnoreTagAttr||p.onIgnoreTagAttr,w.safeAttrValue=w.safeAttrValue||p.safeAttrValue,w.escapeHtml=w.escapeHtml||p.escapeHtml,this.options=w,!1===w.css?this.cssFilter=!1:(w.css=w.css||{},this.cssFilter=new M(w.css))}x.prototype.process=function(w){if(!(w=(w=w||"").toString()))return"";var k=this.options,A=k.whiteList,C=k.onTag,P=k.onIgnoreTag,D=k.onTagAttr,Q=k.onIgnoreTagAttr,U=k.safeAttrValue,R=k.escapeHtml,J=this.cssFilter;k.stripBlankChar&&(w=p.stripBlankChar(w)),k.allowCommentTag||(w=p.stripCommentTag(w));var H=!1;k.stripIgnoreTagBody&&(H=p.StripTagBody(k.stripIgnoreTagBody,P),P=H.onIgnoreTag);var ne=T(w,function(ee,W,xe,Ce,fe){var be={sourcePosition:ee,position:W,isClosing:fe,isWhite:Object.prototype.hasOwnProperty.call(A,xe)},he=C(xe,Ce,be);if(!_(he))return he;if(be.isWhite){if(be.isClosing)return"</"+xe+">";var Te=function h(w){var E=g.spaceIndex(w);if(-1===E)return{html:"",closing:"/"===w[w.length-2]};var k="/"===(w=g.trim(w.slice(E+1,-1)))[w.length-1];return k&&(w=g.trim(w.slice(0,-1))),{html:w,closing:k}}(Ce),me=A[xe],se=u(Te.html,function(_e,de){var Ae=-1!==g.indexOf(me,_e),Se=D(xe,_e,de,Ae);return _(Se)?Ae?(de=U(xe,_e,de,J))?_e+'="'+de+'"':_e:_(Se=Q(xe,_e,de,Ae))?void 0:Se:Se});return Ce="<"+xe,se&&(Ce+=" "+se),Te.closing&&(Ce+=" /"),Ce+">"}return _(he=P(xe,Ce,be))?R(Ce):he},R);return H&&(ne=H.remove(ne)),ne},ce.exports=x},18758:(ce,q,S)=>{"use strict";S.d(q,{a:()=>Xc});var M=S(65879),p=S(49671),j=function(Z){return function T(L){return!!L&&"object"==typeof L}(Z)&&!function u(L){var Z=Object.prototype.toString.call(L);return"[object RegExp]"===Z||"[object Date]"===Z||function h(L){return L.$$typeof===_}(L)}(Z)},_="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function b(L,Z){return!1!==Z.clone&&Z.isMergeableObject(L)?D(function m(L){return Array.isArray(L)?[]:{}}(L),L,Z):L}function x(L,Z,F){return L.concat(Z).map(function(B){return b(B,F)})}function k(L){return Object.keys(L).concat(function E(L){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(L).filter(function(Z){return Object.propertyIsEnumerable.call(L,Z)}):[]}(L))}function A(L,Z){try{return Z in L}catch{return!1}}function D(L,Z,F){(F=F||{}).arrayMerge=F.arrayMerge||x,F.isMergeableObject=F.isMergeableObject||j,F.cloneUnlessOtherwiseSpecified=b;var B=Array.isArray(Z);return B===Array.isArray(L)?B?F.arrayMerge(L,Z,F):function P(L,Z,F){var B={};return F.isMergeableObject(L)&&k(L).forEach(function(G){B[G]=b(L[G],F)}),k(Z).forEach(function(G){(function C(L,Z){return A(L,Z)&&!(Object.hasOwnProperty.call(L,Z)&&Object.propertyIsEnumerable.call(L,Z))})(L,G)||(B[G]=A(L,G)&&F.isMergeableObject(Z[G])?function w(L,Z){if(!Z.customMerge)return D;var F=Z.customMerge(L);return"function"==typeof F?F:D}(G,F)(L[G],Z[G],F):b(Z[G],F))}),B}(L,Z,F):b(Z,F)}D.all=function(Z,F){if(!Array.isArray(Z))throw new Error("first argument should be an array");return Z.reduce(function(B,G){return D(B,G,F)},{})};var U=D;function J(L){return L instanceof HTMLElement}function H(L){return"function"==typeof L}function ne(L){return"string"==typeof L}function ee(L){return void 0===L}class W{on(Z,F,B,G){return void 0===G&&(G=!1),ee(this.bindings)&&(this.bindings={}),ee(this.bindings[Z])&&(this.bindings[Z]=[]),this.bindings[Z].push({handler:F,ctx:B,once:G}),this}once(Z,F,B){return this.on(Z,F,B,!0)}off(Z,F){return ee(this.bindings)||ee(this.bindings[Z])||(ee(F)?delete this.bindings[Z]:this.bindings[Z].forEach((B,G)=>{B.handler===F&&this.bindings[Z].splice(G,1)})),this}trigger(Z){for(var F=arguments.length,B=new Array(F>1?F-1:0),G=1;G<F;G++)B[G-1]=arguments[G];return!ee(this.bindings)&&this.bindings[Z]&&this.bindings[Z].forEach((ie,le)=>{const{ctx:ge,handler:ke,once:Ie}=ie;ke.apply(ge||this,B),Ie&&this.bindings[Z].splice(le,1)}),this}}function xe(L){const Z=Object.getOwnPropertyNames(L.constructor.prototype);for(let F=0;F<Z.length;F++){const B=Z[F],G=L[B];"constructor"!==B&&"function"==typeof G&&(L[B]=G.bind(L))}return L}function be(L){return ne(L)&&""!==L?"-"!==L.charAt(L.length-1)?`${L}-`:L:""}function Te(L){return null==L||!L.element||!L.on}function me(){let L=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Z=>{const F=(L+16*Math.random())%16|0;return L=Math.floor(L/16),("x"==Z?F:3&F|8).toString(16)})}function se(){return se=Object.assign?Object.assign.bind():function(L){for(var Z=1;Z<arguments.length;Z++){var F=arguments[Z];for(var B in F)Object.prototype.hasOwnProperty.call(F,B)&&(L[B]=F[B])}return L},se.apply(this,arguments)}function _e(L,Z){if(null==L)return{};var G,ie,F={},B=Object.keys(L);for(ie=0;ie<B.length;ie++)!(Z.indexOf(G=B[ie])>=0)&&(F[G]=L[G]);return F}const de=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Ae=["mainAxis","crossAxis","limiter"];function Se(L){return L.split("-")[1]}function Oe(L){return"y"===L?"height":"width"}function Ye(L){return L.split("-")[0]}function pt(L){return["top","bottom"].includes(Ye(L))?"x":"y"}function ft(L,Z,F){let{reference:B,floating:G}=L;const ie=B.x+B.width/2-G.width/2,le=B.y+B.height/2-G.height/2,ge=pt(Z),ke=Oe(ge),Ie=B[ke]/2-G[ke]/2,Ue="x"===ge;let Ne;switch(Ye(Z)){case"top":Ne={x:ie,y:B.y-G.height};break;case"bottom":Ne={x:ie,y:B.y+B.height};break;case"right":Ne={x:B.x+B.width,y:le};break;case"left":Ne={x:B.x-G.width,y:le};break;default:Ne={x:B.x,y:B.y}}switch(Se(Z)){case"start":Ne[ge]-=Ie*(F&&Ue?-1:1);break;case"end":Ne[ge]+=Ie*(F&&Ue?-1:1)}return Ne}const $e=function(){var L=(0,p.Z)(function*(Z,F,B){const{placement:G="bottom",strategy:ie="absolute",middleware:le=[],platform:ge}=B,ke=le.filter(Boolean),Ie=yield null==ge.isRTL?void 0:ge.isRTL(F);let ze=yield ge.getElementRects({reference:Z,floating:F,strategy:ie}),{x:Ue,y:Ne}=ft(ze,G,Ie),nt=G,et={},bt=0;for(let an=0;an<ke.length;an++){const{name:Dt,fn:Vt}=ke[an],{x:Xt,y:ot,data:Xe,reset:wt}=yield Vt({x:Ue,y:Ne,initialPlacement:G,placement:nt,strategy:ie,middlewareData:et,rects:ze,platform:ge,elements:{reference:Z,floating:F}});Ue=Xt??Ue,Ne=ot??Ne,et=se({},et,{[Dt]:se({},et[Dt],Xe)}),wt&&bt<=50&&(bt++,"object"==typeof wt&&(wt.placement&&(nt=wt.placement),wt.rects&&(ze=!0===wt.rects?yield ge.getElementRects({reference:Z,floating:F,strategy:ie}):wt.rects),({x:Ue,y:Ne}=ft(ze,nt,Ie))),an=-1)}return{x:Ue,y:Ne,placement:nt,strategy:ie,middlewareData:et}});return function(F,B,G){return L.apply(this,arguments)}}();function it(L){return"number"!=typeof L?function qe(L){return se({top:0,right:0,bottom:0,left:0},L)}(L):{top:L,right:L,bottom:L,left:L}}function He(L){return se({},L,{top:L.y,left:L.x,right:L.x+L.width,bottom:L.y+L.height})}function We(L,Z){return Be.apply(this,arguments)}function Be(){return(Be=(0,p.Z)(function*(L,Z){var F;void 0===Z&&(Z={});const{x:B,y:G,platform:ie,rects:le,elements:ge,strategy:ke}=L,{boundary:Ie="clippingAncestors",rootBoundary:ze="viewport",elementContext:Ue="floating",altBoundary:Ne=!1,padding:nt=0}=Z,et=it(nt),an=ge[Ne?"floating"===Ue?"reference":"floating":Ue],Dt=He(yield ie.getClippingRect({element:null==(F=yield null==ie.isElement?void 0:ie.isElement(an))||F?an:an.contextElement||(yield null==ie.getDocumentElement?void 0:ie.getDocumentElement(ge.floating)),boundary:Ie,rootBoundary:ze,strategy:ke})),Vt="floating"===Ue?se({},le.floating,{x:B,y:G}):le.reference,Xt=yield null==ie.getOffsetParent?void 0:ie.getOffsetParent(ge.floating),ot=(yield null==ie.isElement?void 0:ie.isElement(Xt))&&(yield null==ie.getScale?void 0:ie.getScale(Xt))||{x:1,y:1},Xe=He(ie.convertOffsetParentRelativeRectToViewportRelativeRect?yield ie.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Vt,offsetParent:Xt,strategy:ke}):Vt);return{top:(Dt.top-Xe.top+et.top)/ot.y,bottom:(Xe.bottom-Dt.bottom+et.bottom)/ot.y,left:(Dt.left-Xe.left+et.left)/ot.x,right:(Xe.right-Dt.right+et.right)/ot.x}})).apply(this,arguments)}const ut=Math.min,yt=Math.max;function e(L,Z,F){return yt(L,ut(Z,F))}const St={left:"right",right:"left",bottom:"top",top:"bottom"};function Kt(L){return L.replace(/left|right|bottom|top/g,Z=>St[Z])}const Nn={start:"end",end:"start"};function Jn(L){return L.replace(/start|end/g,Z=>Nn[Z])}function Ve(L){return"x"===L?"y":"x"}const da=function(Z){return void 0===Z&&(Z={}),{options:Z,fn(F){const{x:B,y:G,placement:ie,rects:le,middlewareData:ge}=F,{offset:ke=0,mainAxis:Ie=!0,crossAxis:ze=!0}=Z,Ue={x:B,y:G},Ne=pt(ie),nt=Ve(Ne);let et=Ue[Ne],bt=Ue[nt];const an="function"==typeof ke?ke(F):ke,Dt="number"==typeof an?{mainAxis:an,crossAxis:0}:se({mainAxis:0,crossAxis:0},an);if(Ie){const ot="y"===Ne?"height":"width",Xe=le.reference[Ne]-le.floating[ot]+Dt.mainAxis,wt=le.reference[Ne]+le.reference[ot]-Dt.mainAxis;et<Xe?et=Xe:et>wt&&(et=wt)}if(ze){var Vt,Xt;const ot="y"===Ne?"width":"height",Xe=["top","left"].includes(Ye(ie)),wt=le.reference[nt]-le.floating[ot]+(Xe&&(null==(Vt=ge.offset)?void 0:Vt[nt])||0)+(Xe?0:Dt.crossAxis),Yn=le.reference[nt]+le.reference[ot]+(Xe?0:(null==(Xt=ge.offset)?void 0:Xt[nt])||0)-(Xe?Dt.crossAxis:0);bt<wt?bt=wt:bt>Yn&&(bt=Yn)}return{[Ne]:et,[nt]:bt}}}};function we(L){var Z;return(null==(Z=L.ownerDocument)?void 0:Z.defaultView)||window}function De(L){return we(L).getComputedStyle(L)}function Qe(L){return L instanceof we(L).Node}function Ge(L){return Qe(L)?(L.nodeName||"").toLowerCase():""}let lt;function gt(){if(lt)return lt;const L=navigator.userAgentData;return L&&Array.isArray(L.brands)?(lt=L.brands.map(Z=>Z.brand+"/"+Z.version).join(" "),lt):navigator.userAgent}function $t(L){return L instanceof we(L).HTMLElement}function xn(L){return L instanceof we(L).Element}function Pi(L){return!(typeof ShadowRoot>"u")&&(L instanceof we(L).ShadowRoot||L instanceof ShadowRoot)}function ki(L){const{overflow:Z,overflowX:F,overflowY:B,display:G}=De(L);return/auto|scroll|overlay|hidden|clip/.test(Z+B+F)&&!["inline","contents"].includes(G)}function zi(L){return["table","td","th"].includes(Ge(L))}function ma(L){const Z=/firefox/i.test(gt()),F=De(L),B=F.backdropFilter||F.WebkitBackdropFilter;return"none"!==F.transform||"none"!==F.perspective||!!B&&"none"!==B||Z&&"filter"===F.willChange||Z&&!!F.filter&&"none"!==F.filter||["transform","perspective"].some(G=>F.willChange.includes(G))||["paint","layout","strict","content"].some(G=>{const ie=F.contain;return null!=ie&&ie.includes(G)})}function Ft(){return/^((?!chrome|android).)*safari/i.test(gt())}function tt(L){return["html","body","#document"].includes(Ge(L))}const _t=Math.min,Et=Math.max,Jt=Math.round;function Un(L){const Z=De(L);let F=parseFloat(Z.width),B=parseFloat(Z.height);const G=$t(L),ie=G?L.offsetWidth:F,le=G?L.offsetHeight:B,ge=Jt(F)!==ie||Jt(B)!==le;return ge&&(F=ie,B=le),{width:F,height:B,fallback:ge}}function Ro(L){return xn(L)?L:L.contextElement}const Ha={x:1,y:1};function Ti(L){const Z=Ro(L);if(!$t(Z))return Ha;const F=Z.getBoundingClientRect(),{width:B,height:G,fallback:ie}=Un(Z);let le=(ie?Jt(F.width):F.width)/B,ge=(ie?Jt(F.height):F.height)/G;return(!le||!Number.isFinite(le))&&(le=1),(!ge||!Number.isFinite(ge))&&(ge=1),{x:le,y:ge}}function Oo(L,Z,F,B){var G,ie;void 0===Z&&(Z=!1),void 0===F&&(F=!1);const le=L.getBoundingClientRect(),ge=Ro(L);let ke=Ha;Z&&(B?xn(B)&&(ke=Ti(B)):ke=Ti(L));const Ie=ge?we(ge):window,ze=Ft()&&F;let Ue=(le.left+(ze&&(null==(G=Ie.visualViewport)?void 0:G.offsetLeft)||0))/ke.x,Ne=(le.top+(ze&&(null==(ie=Ie.visualViewport)?void 0:ie.offsetTop)||0))/ke.y,nt=le.width/ke.x,et=le.height/ke.y;if(ge){const bt=we(ge),an=B&&xn(B)?we(B):B;let Dt=bt.frameElement;for(;Dt&&B&&an!==bt;){const Vt=Ti(Dt),Xt=Dt.getBoundingClientRect(),ot=getComputedStyle(Dt);Xt.x+=(Dt.clientLeft+parseFloat(ot.paddingLeft))*Vt.x,Xt.y+=(Dt.clientTop+parseFloat(ot.paddingTop))*Vt.y,Ue*=Vt.x,Ne*=Vt.y,nt*=Vt.x,et*=Vt.y,Ue+=Xt.x,Ne+=Xt.y,Dt=we(Dt).frameElement}}return He({width:nt,height:et,x:Ue,y:Ne})}function lo(L){return((Qe(L)?L.ownerDocument:L.document)||window.document).documentElement}function Ka(L){return xn(L)?{scrollLeft:L.scrollLeft,scrollTop:L.scrollTop}:{scrollLeft:L.pageXOffset,scrollTop:L.pageYOffset}}function vr(L){return Oo(lo(L)).left+Ka(L).scrollLeft}function _a(L){if("html"===Ge(L))return L;const Z=L.assignedSlot||L.parentNode||Pi(L)&&L.host||lo(L);return Pi(Z)?Z.host:Z}function wr(L){const Z=_a(L);return tt(Z)?Z.ownerDocument.body:$t(Z)&&ki(Z)?Z:wr(Z)}function pa(L,Z){var F;void 0===Z&&(Z=[]);const B=wr(L),G=B===(null==(F=L.ownerDocument)?void 0:F.body),ie=we(B);return G?Z.concat(ie,ie.visualViewport||[],ki(B)?B:[]):Z.concat(B,pa(B))}function Cr(L,Z,F){let B;if("viewport"===Z)B=function lc(L,Z){const F=we(L),B=lo(L),G=F.visualViewport;let ie=B.clientWidth,le=B.clientHeight,ge=0,ke=0;if(G){ie=G.width,le=G.height;const Ie=Ft();(!Ie||Ie&&"fixed"===Z)&&(ge=G.offsetLeft,ke=G.offsetTop)}return{width:ie,height:le,x:ge,y:ke}}(L,F);else if("document"===Z)B=function yr(L){const Z=lo(L),F=Ka(L),B=L.ownerDocument.body,G=Et(Z.scrollWidth,Z.clientWidth,B.scrollWidth,B.clientWidth),ie=Et(Z.scrollHeight,Z.clientHeight,B.scrollHeight,B.clientHeight);let le=-F.scrollLeft+vr(L);const ge=-F.scrollTop;return"rtl"===De(B).direction&&(le+=Et(Z.clientWidth,B.clientWidth)-G),{width:G,height:ie,x:le,y:ge}}(lo(L));else if(xn(Z))B=function cc(L,Z){const F=Oo(L,!0,"fixed"===Z),B=F.top+L.clientTop,G=F.left+L.clientLeft,ie=$t(L)?Ti(L):{x:1,y:1};return{width:L.clientWidth*ie.x,height:L.clientHeight*ie.y,x:G*ie.x,y:B*ie.y}}(Z,F);else{const le=se({},Z);if(Ft()){var G,ie;const ge=we(L);le.x-=(null==(G=ge.visualViewport)?void 0:G.offsetLeft)||0,le.y-=(null==(ie=ge.visualViewport)?void 0:ie.offsetTop)||0}B=le}return He(B)}function uc(L,Z){const F=Z.get(L);if(F)return F;let B=pa(L).filter(ge=>xn(ge)&&"body"!==Ge(ge)),G=null;const ie="fixed"===De(L).position;let le=ie?_a(L):L;for(;xn(le)&&!tt(le);){const ge=De(le),ke=ma(le);"fixed"===ge.position?G=null:(ie?ke||G:ke||"static"!==ge.position||!G||!["absolute","fixed"].includes(G.position))?G=ge:B=B.filter(Ue=>Ue!==le),le=_a(le)}return Z.set(L,B),B}function kr(L,Z){return $t(L)&&"fixed"!==De(L).position?Z?Z(L):L.offsetParent:null}function Tr(L,Z){const F=we(L);if(!$t(L))return F;let B=kr(L,Z);for(;B&&zi(B)&&"static"===De(B).position;)B=kr(B,Z);return B&&("html"===Ge(B)||"body"===Ge(B)&&"static"===De(B).position&&!ma(B))?F:B||function _c(L){let Z=_a(L);for(;$t(Z)&&!tt(Z);){if(ma(Z))return Z;Z=_a(Z)}return null}(L)||F}function pc(L,Z,F){const B=$t(Z),G=lo(Z),ie=Oo(L,!0,"fixed"===F,Z);let le={scrollLeft:0,scrollTop:0};const ge={x:0,y:0};if(B||!B&&"fixed"!==F)if(("body"!==Ge(Z)||ki(G))&&(le=Ka(Z)),$t(Z)){const ke=Oo(Z,!0);ge.x=ke.x+Z.clientLeft,ge.y=ke.y+Z.clientTop}else G&&(ge.x=vr(G));return{x:ie.left+le.scrollLeft-ge.x,y:ie.top+le.scrollTop-ge.y,width:ie.width,height:ie.height}}const hc={getClippingRect:function dc(L){let{element:Z,boundary:F,rootBoundary:B,strategy:G}=L;const le=[..."clippingAncestors"===F?uc(Z,this._c):[].concat(F),B],ke=le.reduce((Ie,ze)=>{const Ue=Cr(Z,ze,G);return Ie.top=Et(Ue.top,Ie.top),Ie.right=_t(Ue.right,Ie.right),Ie.bottom=_t(Ue.bottom,Ie.bottom),Ie.left=Et(Ue.left,Ie.left),Ie},Cr(Z,le[0],G));return{width:ke.right-ke.left,height:ke.bottom-ke.top,x:ke.left,y:ke.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function rc(L){let{rect:Z,offsetParent:F,strategy:B}=L;const G=$t(F),ie=lo(F);if(F===ie)return Z;let le={scrollLeft:0,scrollTop:0},ge={x:1,y:1};const ke={x:0,y:0};if((G||!G&&"fixed"!==B)&&(("body"!==Ge(F)||ki(ie))&&(le=Ka(F)),$t(F))){const Ie=Oo(F);ge=Ti(F),ke.x=Ie.x+F.clientLeft,ke.y=Ie.y+F.clientTop}return{width:Z.width*ge.x,height:Z.height*ge.y,x:Z.x*ge.x-le.scrollLeft*ge.x+ke.x,y:Z.y*ge.y-le.scrollTop*ge.y+ke.y}},isElement:xn,getDimensions:function mc(L){return Un(L)},getOffsetParent:Tr,getDocumentElement:lo,getScale:Ti,getElementRects(L){var Z=this;return(0,p.Z)(function*(){let{reference:F,floating:B,strategy:G}=L;const ie=Z.getOffsetParent||Tr,le=Z.getDimensions;return{reference:pc(F,yield ie(B),G),floating:se({x:0,y:0},yield le(B))}})()},getClientRects:L=>Array.from(L.getClientRects()),isRTL:L=>"rtl"===De(L).direction};function xc(L){L.cleanup&&L.cleanup();const Z=L._getResolvedAttachToOptions();let F=Z.element;const B=function kc(L,Z){const F={strategy:"absolute",middleware:[]},B=function Tc(L){return!(!L.options.arrow||!L.el)&&L.el.querySelector(".shepherd-arrow")}(Z);return Te(L)||(F.middleware.push(function(Z){return void 0===Z&&(Z={}),{name:"flip",options:Z,fn:F=>(0,p.Z)(function*(){var B;const{placement:G,middlewareData:ie,rects:le,initialPlacement:ge,platform:ke,elements:Ie}=F,{mainAxis:ze=!0,crossAxis:Ue=!0,fallbackPlacements:Ne,fallbackStrategy:nt="bestFit",fallbackAxisSideDirection:et="none",flipAlignment:bt=!0}=Z,an=_e(Z,de),Dt=Ye(G),Vt=Ye(ge)===ge,Xt=yield null==ke.isRTL?void 0:ke.isRTL(Ie.floating),ot=Ne||(Vt||!bt?[Kt(ge)]:function Rt(L){const Z=Kt(L);return[Jn(L),Z,Jn(Z)]}(ge));!Ne&&"none"!==et&&ot.push(...function Ln(L,Z,F,B){const G=Se(L);let ie=function Ao(L,Z,F){const B=["left","right"],G=["right","left"],ie=["top","bottom"],le=["bottom","top"];switch(L){case"top":case"bottom":return F?Z?G:B:Z?B:G;case"left":case"right":return Z?ie:le;default:return[]}}(Ye(L),"start"===F,B);return G&&(ie=ie.map(le=>le+"-"+G),Z&&(ie=ie.concat(ie.map(Jn)))),ie}(ge,bt,et,Xt));const Xe=[ge,...ot],wt=yield We(F,an),Yn=[];let Gn=(null==(B=ie.flip)?void 0:B.overflows)||[];if(ze&&Yn.push(wt[Dt]),Ue){const{main:Xi,cross:Yo}=function Ut(L,Z,F){void 0===F&&(F=!1);const B=Se(L),G=pt(L),ie=Oe(G);let le="x"===G?B===(F?"end":"start")?"right":"left":"start"===B?"bottom":"top";return Z.reference[ie]>Z.floating[ie]&&(le=Kt(le)),{main:le,cross:Kt(le)}}(G,le,Xt);Yn.push(wt[Xi],wt[Yo])}if(Gn=[...Gn,{placement:G,overflows:Yn}],!Yn.every(Xi=>Xi<=0)){var jo,xi;const Xi=((null==(jo=ie.flip)?void 0:jo.index)||0)+1,Yo=Xe[Xi];if(Yo)return{data:{index:Xi,overflows:Gn},reset:{placement:Yo}};let ya=null==(xi=Gn.filter(Go=>Go.overflows[0]<=0).sort((Go,Wo)=>Go.overflows[1]-Wo.overflows[1])[0])?void 0:xi.placement;if(!ya)switch(nt){case"bestFit":{var mo;const Go=null==(mo=Gn.map(Wo=>[Wo.placement,Wo.overflows.filter(wa=>wa>0).reduce((wa,eu)=>wa+eu,0)]).sort((Wo,wa)=>Wo[1]-wa[1])[0])?void 0:mo[0];Go&&(ya=Go);break}case"initialPlacement":ya=ge}if(G!==ya)return{reset:{placement:ya}}}return{}})()}}(),function(Z){return void 0===Z&&(Z={}),{name:"shift",options:Z,fn:F=>(0,p.Z)(function*(){const{x:B,y:G,placement:ie}=F,{mainAxis:le=!0,crossAxis:ge=!1,limiter:ke={fn:Dt=>{let{x:Vt,y:Xt}=Dt;return{x:Vt,y:Xt}}}}=Z,Ie=_e(Z,Ae),ze={x:B,y:G},Ue=yield We(F,Ie),Ne=pt(Ye(ie)),nt=Ve(Ne);let et=ze[Ne],bt=ze[nt];le&&(et=e(et+Ue["y"===Ne?"top":"left"],et,et-Ue["y"===Ne?"bottom":"right"])),ge&&(bt=e(bt+Ue["y"===nt?"top":"left"],bt,bt-Ue["y"===nt?"bottom":"right"]));const an=ke.fn(se({},F,{[Ne]:et,[nt]:bt}));return se({},an,{data:{x:an.x-B,y:an.y-G}})})()}}({limiter:da(),crossAxis:!0})),B&&F.middleware.push((L=>({name:"arrow",options:L,fn:Z=>(0,p.Z)(function*(){const{element:F,padding:B=0}=L||{},{x:G,y:ie,placement:le,rects:ge,platform:ke,elements:Ie}=Z;if(null==F)return{};const ze=it(B),Ue={x:G,y:ie},Ne=pt(le),nt=Oe(Ne),et=yield ke.getDimensions(F),bt="y"===Ne,an=bt?"top":"left",Dt=bt?"bottom":"right",Vt=bt?"clientHeight":"clientWidth",Xt=ge.reference[nt]+ge.reference[Ne]-Ue[Ne]-ge.floating[nt],ot=Ue[Ne]-ge.reference[Ne],Xe=yield null==ke.getOffsetParent?void 0:ke.getOffsetParent(F);let wt=Xe?Xe[Vt]:0;(!wt||!(yield null==ke.isElement?void 0:ke.isElement(Xe)))&&(wt=Ie.floating[Vt]||ge.floating[nt]);const Gn=ze[an],jo=wt-et[nt]-ze[Dt],xi=wt/2-et[nt]/2+(Xt/2-ot/2),mo=e(Gn,xi,jo),Yo=null!=Se(le)&&xi!=mo&&ge.reference[nt]/2-(xi<Gn?ze[an]:ze[Dt])-et[nt]/2<0?xi<Gn?Gn-xi:jo-xi:0;return{[Ne]:Ue[Ne]-Yo,data:{[Ne]:mo,centerOffset:xi-mo}}})()}))({element:B})),F.placement=L.on),U(Z.options.floatingUIOptions||{},F)}(Z,L),G=Te(Z);return G&&(F=document.body,L.shepherdElementComponent.getElement().classList.add("shepherd-centered")),L.cleanup=function gc(L,Z,F,B){void 0===B&&(B={});const{ancestorScroll:G=!0,ancestorResize:ie=!0,elementResize:le=!0,animationFrame:ge=!1}=B,ke=G&&!ge,Ie=ke||ie?[...xn(L)?pa(L):L.contextElement?pa(L.contextElement):[],...pa(Z)]:[];Ie.forEach(et=>{ke&&et.addEventListener("scroll",F,{passive:!0}),ie&&et.addEventListener("resize",F)});let ze=null;le&&(ze=new ResizeObserver(()=>{F()}),xn(L)&&!ge&&ze.observe(L),!xn(L)&&L.contextElement&&!ge&&ze.observe(L.contextElement),ze.observe(Z));let Ue,Ne=ge?Oo(L):null;return ge&&function nt(){const et=Oo(L);Ne&&(et.x!==Ne.x||et.y!==Ne.y||et.width!==Ne.width||et.height!==Ne.height)&&F(),Ne=et,Ue=requestAnimationFrame(nt)}(),F(),()=>{var et;Ie.forEach(bt=>{ke&&bt.removeEventListener("scroll",F),ie&&bt.removeEventListener("resize",F)}),null==(et=ze)||et.disconnect(),ze=null,ge&&cancelAnimationFrame(Ue)}}(F,L.el,()=>{L.el?function yc(L,Z,F,B){((L,Z,F)=>{const B=new Map,G=se({platform:hc},F),ie=se({},G.platform,{_c:B});return $e(L,Z,se({},G,{platform:ie}))})(L,Z.el,F).then(function wc(L,Z){return F=>{let{x:B,y:G,placement:ie,middlewareData:le}=F;return L.el&&(Object.assign(L.el.style,Z?{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}:{position:"absolute",left:`${B}px`,top:`${G}px`}),L.el.dataset.popperPlacement=ie,function Cc(L,Z){const F=L.querySelector(".shepherd-arrow");if(F&&Z.arrow){const{x:B,y:G}=Z.arrow;Object.assign(F.style,{left:null!=B?`${B}px`:"",top:null!=G?`${G}px`:""})}}(L.el,le)),L}}(Z,B)).then(G=>new Promise(ie=>{setTimeout(()=>ie(G),300)})).then(G=>{G&&G.el&&G.el.focus({preventScroll:!0})})}(F,L,B,G):L.cleanup()}),L.target=Z.element,B}function ri(){}function Ac(L,Z){for(const F in Z)L[F]=Z[F];return L}function Ar(L){return L()}function Or(){return Object.create(null)}function ha(L){L.forEach(Ar)}function Ts(L){return"function"==typeof L}function Ji(L,Z){return L!=L?Z==Z:L!==Z||L&&"object"==typeof L||"function"==typeof L}function Bo(L,Z){L.appendChild(Z)}function fi(L,Z,F){L.insertBefore(Z,F||null)}function ni(L){L.parentNode&&L.parentNode.removeChild(L)}function Tn(L){return document.createElement(L)}function ga(L){return document.createElementNS("http://www.w3.org/2000/svg",L)}function ji(L){return document.createTextNode(L)}function So(){return ji(" ")}function Zn(L,Z,F,B){return L.addEventListener(Z,F,B),()=>L.removeEventListener(Z,F,B)}function Mt(L,Z,F){null==F?L.removeAttribute(Z):L.getAttribute(Z)!==F&&L.setAttribute(Z,F)}function zo(L,Z){const F=Object.getOwnPropertyDescriptors(L.__proto__);for(const B in Z)null==Z[B]?L.removeAttribute(B):"style"===B?L.style.cssText=Z[B]:"__value"===B?L.value=L[B]=Z[B]:F[B]&&F[B].set?L[B]=Z[B]:Mt(L,B,Z[B])}function Hi(L,Z,F){L.classList[F?"add":"remove"](Z)}let Ki;function Jo(L){Ki=L}function $i(){if(!Ki)throw new Error("Function called outside component initialization");return Ki}function Kn(L){$i().$$.after_update.push(L)}const Zt=[],jt=[];let Bt=[];const Ho=[],fa=Promise.resolve();let re=!1;function Os(L){Bt.push(L)}const Ss=new Set;let Ko=0;function Sr(){if(0!==Ko)return;const L=Ki;do{try{for(;Ko<Zt.length;){const Z=Zt[Ko];Ko++,Jo(Z),Mc(Z.$$)}}catch(Z){throw Zt.length=0,Ko=0,Z}for(Jo(null),Zt.length=0,Ko=0;jt.length;)jt.pop()();for(let Z=0;Z<Bt.length;Z+=1){const F=Bt[Z];Ss.has(F)||(Ss.add(F),F())}Bt.length=0}while(Zt.length);for(;Ho.length;)Ho.pop()();re=!1,Ss.clear(),Jo(L)}function Mc(L){if(null!==L.fragment){L.update(),ha(L.before_update);const Z=L.dirty;L.dirty=[-1],L.fragment&&L.fragment.p(L.ctx,Z),L.after_update.forEach(Os)}}const Ya=new Set;let Eo;function Mo(){Eo={r:0,c:[],p:Eo}}function Io(){Eo.r||ha(Eo.c),Eo=Eo.p}function Wt(L,Z){L&&L.i&&(Ya.delete(L),L.i(Z))}function bn(L,Z,F,B){if(L&&L.o){if(Ya.has(L))return;Ya.add(L),Eo.c.push(()=>{Ya.delete(L),B&&(F&&L.d(1),B())}),L.o(Z)}else B&&B()}function Lo(L){L&&L.c()}function Yi(L,Z,F,B){const{fragment:G,after_update:ie}=L.$$;G&&G.m(Z,F),B||Os(()=>{const le=L.$$.on_mount.map(Ar).filter(Ts);L.$$.on_destroy?L.$$.on_destroy.push(...le):ha(le),L.$$.on_mount=[]}),ie.forEach(Os)}function co(L,Z){const F=L.$$;null!==F.fragment&&(function Ic(L){const Z=[],F=[];Bt.forEach(B=>-1===L.indexOf(B)?Z.push(B):F.push(B)),F.forEach(B=>B()),Bt=Z}(F.after_update),ha(F.on_destroy),F.fragment&&F.fragment.d(Z),F.on_destroy=F.fragment=null,F.ctx=[])}function Gi(L,Z,F,B,G,ie,le,ge){void 0===ge&&(ge=[-1]);const ke=Ki;Jo(L);const Ie=L.$$={fragment:null,ctx:[],props:ie,update:ri,not_equal:G,bound:Or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Z.context||(ke?ke.$$.context:[])),callbacks:Or(),dirty:ge,skip_bound:!1,root:Z.target||ke.$$.root};le&&le(Ie.root);let ze=!1;if(Ie.ctx=F?F(L,Z.props||{},function(Ue,Ne){const nt=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:Ne;return Ie.ctx&&G(Ie.ctx[Ue],Ie.ctx[Ue]=nt)&&(!Ie.skip_bound&&Ie.bound[Ue]&&Ie.bound[Ue](nt),ze&&function Zc(L,Z){-1===L.$$.dirty[0]&&(Zt.push(L),function Ec(){re||(re=!0,fa.then(Sr))}(),L.$$.dirty.fill(0)),L.$$.dirty[Z/31|0]|=1<<Z%31}(L,Ue)),Ne}):[],Ie.update(),ze=!0,ha(Ie.before_update),Ie.fragment=!!B&&B(Ie.ctx),Z.target){if(Z.hydrate){const Ue=function Ai(L){return Array.from(L.childNodes)}(Z.target);Ie.fragment&&Ie.fragment.l(Ue),Ue.forEach(ni)}else Ie.fragment&&Ie.fragment.c();Z.intro&&Wt(L.$$.fragment),Yi(L,Z.target,Z.anchor,Z.customElement),Sr()}Jo(ke)}class Wi{$destroy(){co(this,1),this.$destroy=ri}$on(Z,F){if(!Ts(F))return ri;const B=this.$$.callbacks[Z]||(this.$$.callbacks[Z]=[]);return B.push(F),()=>{const G=B.indexOf(F);-1!==G&&B.splice(G,1)}}$set(Z){this.$$set&&!function Oc(L){return 0===Object.keys(L).length}(Z)&&(this.$$.skip_bound=!0,this.$$set(Z),this.$$.skip_bound=!1)}}function Pc(L){let Z,F,B,G,ie;return{c(){Z=Tn("button"),Mt(Z,"aria-label",F=L[3]?L[3]:null),Mt(Z,"class",B=`${L[1]||""} shepherd-button ${L[4]?"shepherd-button-secondary":""}`),Z.disabled=L[2],Mt(Z,"tabindex","0")},m(le,ge){fi(le,Z,ge),Z.innerHTML=L[5],G||(ie=Zn(Z,"click",function(){Ts(L[0])&&L[0].apply(this,arguments)}),G=!0)},p(le,ge){let[ke]=ge;L=le,32&ke&&(Z.innerHTML=L[5]),8&ke&&F!==(F=L[3]?L[3]:null)&&Mt(Z,"aria-label",F),18&ke&&B!==(B=`${L[1]||""} shepherd-button ${L[4]?"shepherd-button-secondary":""}`)&&Mt(Z,"class",B),4&ke&&(Z.disabled=L[2])},i:ri,o:ri,d(le){le&&ni(Z),G=!1,ie()}}}function jc(L,Z,F){let ie,le,ge,ke,Ie,ze,{config:B,step:G}=Z;function Ue(Ne){return H(Ne)?Ne=Ne.call(G):Ne}return L.$$set=Ne=>{"config"in Ne&&F(6,B=Ne.config),"step"in Ne&&F(7,G=Ne.step)},L.$$.update=()=>{192&L.$$.dirty&&(F(0,ie=B.action?B.action.bind(G.tour):null),F(1,le=B.classes),F(2,ge=!!B.disabled&&Ue(B.disabled)),F(3,ke=B.label?Ue(B.label):null),F(4,Ie=B.secondary),F(5,ze=B.text?Ue(B.text):null))},[ie,le,ge,ke,Ie,ze,B,G]}class Ga extends Wi{constructor(Z){super(),Gi(this,Z,jc,Pc,Ji,{config:6,step:7})}}function Er(L,Z,F){const B=L.slice();return B[2]=Z[F],B}function Mr(L){let Z,F,B=L[1],G=[];for(let le=0;le<B.length;le+=1)G[le]=Ir(Er(L,B,le));const ie=le=>bn(G[le],1,1,()=>{G[le]=null});return{c(){for(let le=0;le<G.length;le+=1)G[le].c();Z=function $a(){return ji("")}()},m(le,ge){for(let ke=0;ke<G.length;ke+=1)G[ke]&&G[ke].m(le,ge);fi(le,Z,ge),F=!0},p(le,ge){if(3&ge){let ke;for(B=le[1],ke=0;ke<B.length;ke+=1){const Ie=Er(le,B,ke);G[ke]?(G[ke].p(Ie,ge),Wt(G[ke],1)):(G[ke]=Ir(Ie),G[ke].c(),Wt(G[ke],1),G[ke].m(Z.parentNode,Z))}for(Mo(),ke=B.length;ke<G.length;ke+=1)ie(ke);Io()}},i(le){if(!F){for(let ge=0;ge<B.length;ge+=1)Wt(G[ge]);F=!0}},o(le){G=G.filter(Boolean);for(let ge=0;ge<G.length;ge+=1)bn(G[ge]);F=!1},d(le){(function Sc(L,Z){for(let F=0;F<L.length;F+=1)L[F]&&L[F].d(Z)})(G,le),le&&ni(Z)}}}function Ir(L){let Z,F;return Z=new Ga({props:{config:L[2],step:L[0]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};2&G&&(ie.config=B[2]),1&G&&(ie.step=B[0]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function Dc(L){let Z,F,B=L[1]&&Mr(L);return{c(){Z=Tn("footer"),B&&B.c(),Mt(Z,"class","shepherd-footer")},m(G,ie){fi(G,Z,ie),B&&B.m(Z,null),F=!0},p(G,ie){let[le]=ie;G[1]?B?(B.p(G,le),2&le&&Wt(B,1)):(B=Mr(G),B.c(),Wt(B,1),B.m(Z,null)):B&&(Mo(),bn(B,1,1,()=>{B=null}),Io())},i(G){F||(Wt(B),F=!0)},o(G){bn(B),F=!1},d(G){G&&ni(Z),B&&B.d()}}}function Nc(L,Z,F){let B,{step:G}=Z;return L.$$set=ie=>{"step"in ie&&F(0,G=ie.step)},L.$$.update=()=>{1&L.$$.dirty&&F(1,B=G.options.buttons)},[G,B]}class Qc extends Wi{constructor(Z){super(),Gi(this,Z,Nc,Dc,Ji,{step:0})}}function Lr(L){let Z,F,B,G,ie;return{c(){Z=Tn("button"),F=Tn("span"),F.textContent="\xd7",Mt(F,"aria-hidden","true"),Mt(Z,"aria-label",B=L[0].label?L[0].label:"Close Tour"),Mt(Z,"class","shepherd-cancel-icon"),Mt(Z,"type","button")},m(le,ge){fi(le,Z,ge),Bo(Z,F),G||(ie=Zn(Z,"click",L[1]),G=!0)},p(le,ge){let[ke]=ge;1&ke&&B!==(B=le[0].label?le[0].label:"Close Tour")&&Mt(Z,"aria-label",B)},i:ri,o:ri,d(le){le&&ni(Z),G=!1,ie()}}}function qc(L,Z,F){let{cancelIcon:B,step:G}=Z;return L.$$set=le=>{"cancelIcon"in le&&F(0,B=le.cancelIcon),"step"in le&&F(2,G=le.step)},[B,le=>{le.preventDefault(),G.cancel()},G]}class Fc extends Wi{constructor(Z){super(),Gi(this,Z,qc,Lr,Ji,{cancelIcon:0,step:2})}}function Uc(L){let Z;return{c(){Z=Tn("h3"),Mt(Z,"id",L[1]),Mt(Z,"class","shepherd-title")},m(F,B){fi(F,Z,B),L[3](Z)},p(F,B){let[G]=B;2&G&&Mt(Z,"id",F[1])},i:ri,o:ri,d(F){F&&ni(Z),L[3](null)}}}function Rc(L,Z,F){let{labelId:B,element:G,title:ie}=Z;return Kn(()=>{H(ie)&&F(2,ie=ie()),F(0,G.innerHTML=ie,G)}),L.$$set=ge=>{"labelId"in ge&&F(1,B=ge.labelId),"element"in ge&&F(0,G=ge.element),"title"in ge&&F(2,ie=ge.title)},[G,B,ie,function le(ge){jt[ge?"unshift":"push"](()=>{G=ge,F(0,G)})}]}class Zr extends Wi{constructor(Z){super(),Gi(this,Z,Rc,Uc,Ji,{labelId:1,element:0,title:2})}}function Pr(L){let Z,F;return Z=new Zr({props:{labelId:L[0],title:L[2]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};1&G&&(ie.labelId=B[0]),4&G&&(ie.title=B[2]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function xa(L){let Z,F;return Z=new Fc({props:{cancelIcon:L[3],step:L[1]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};8&G&&(ie.cancelIcon=B[3]),2&G&&(ie.step=B[1]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function Bc(L){let Z,F,B,G=L[2]&&Pr(L),ie=L[3]&&L[3].enabled&&xa(L);return{c(){Z=Tn("header"),G&&G.c(),F=So(),ie&&ie.c(),Mt(Z,"class","shepherd-header")},m(le,ge){fi(le,Z,ge),G&&G.m(Z,null),Bo(Z,F),ie&&ie.m(Z,null),B=!0},p(le,ge){let[ke]=ge;le[2]?G?(G.p(le,ke),4&ke&&Wt(G,1)):(G=Pr(le),G.c(),Wt(G,1),G.m(Z,F)):G&&(Mo(),bn(G,1,1,()=>{G=null}),Io()),le[3]&&le[3].enabled?ie?(ie.p(le,ke),8&ke&&Wt(ie,1)):(ie=xa(le),ie.c(),Wt(ie,1),ie.m(Z,null)):ie&&(Mo(),bn(ie,1,1,()=>{ie=null}),Io())},i(le){B||(Wt(G),Wt(ie),B=!0)},o(le){bn(G),bn(ie),B=!1},d(le){le&&ni(Z),G&&G.d(),ie&&ie.d()}}}function $n(L,Z,F){let ie,le,{labelId:B,step:G}=Z;return L.$$set=ge=>{"labelId"in ge&&F(0,B=ge.labelId),"step"in ge&&F(1,G=ge.step)},L.$$.update=()=>{2&L.$$.dirty&&(F(2,ie=G.options.title),F(3,le=G.options.cancelIcon))},[B,G,ie,le]}class Zo extends Wi{constructor(Z){super(),Gi(this,Z,$n,Bc,Ji,{labelId:0,step:1})}}function zc(L){let Z;return{c(){Z=Tn("div"),Mt(Z,"class","shepherd-text"),Mt(Z,"id",L[1])},m(F,B){fi(F,Z,B),L[3](Z)},p(F,B){let[G]=B;2&G&&Mt(Z,"id",F[1])},i:ri,o:ri,d(F){F&&ni(Z),L[3](null)}}}function Jc(L,Z,F){let{descriptionId:B,element:G,step:ie}=Z;return Kn(()=>{let{text:ge}=ie.options;H(ge)&&(ge=ge.call(ie)),J(ge)?G.appendChild(ge):F(0,G.innerHTML=ge,G)}),L.$$set=ge=>{"descriptionId"in ge&&F(1,B=ge.descriptionId),"element"in ge&&F(0,G=ge.element),"step"in ge&&F(2,ie=ge.step)},[G,B,ie,function le(ge){jt[ge?"unshift":"push"](()=>{G=ge,F(0,G)})}]}class Es extends Wi{constructor(Z){super(),Gi(this,Z,Jc,zc,Ji,{descriptionId:1,element:0,step:2})}}function Po(L){let Z,F;return Z=new Zo({props:{labelId:L[1],step:L[2]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};2&G&&(ie.labelId=B[1]),4&G&&(ie.step=B[2]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function ba(L){let Z,F;return Z=new Es({props:{descriptionId:L[0],step:L[2]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};1&G&&(ie.descriptionId=B[0]),4&G&&(ie.step=B[2]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function va(L){let Z,F;return Z=new Qc({props:{step:L[2]}}),{c(){Lo(Z.$$.fragment)},m(B,G){Yi(Z,B,G),F=!0},p(B,G){const ie={};4&G&&(ie.step=B[2]),Z.$set(ie)},i(B){F||(Wt(Z.$$.fragment,B),F=!0)},o(B){bn(Z.$$.fragment,B),F=!1},d(B){co(Z,B)}}}function Oi(L){let Z,B,ie,ge,F=!ee(L[2].options.title)||L[2].options.cancelIcon&&L[2].options.cancelIcon.enabled,G=!ee(L[2].options.text),le=Array.isArray(L[2].options.buttons)&&L[2].options.buttons.length,ke=F&&Po(L),Ie=G&&ba(L),ze=le&&va(L);return{c(){Z=Tn("div"),ke&&ke.c(),B=So(),Ie&&Ie.c(),ie=So(),ze&&ze.c(),Mt(Z,"class","shepherd-content")},m(Ue,Ne){fi(Ue,Z,Ne),ke&&ke.m(Z,null),Bo(Z,B),Ie&&Ie.m(Z,null),Bo(Z,ie),ze&&ze.m(Z,null),ge=!0},p(Ue,Ne){let[nt]=Ne;4&nt&&(F=!ee(Ue[2].options.title)||Ue[2].options.cancelIcon&&Ue[2].options.cancelIcon.enabled),F?ke?(ke.p(Ue,nt),4&nt&&Wt(ke,1)):(ke=Po(Ue),ke.c(),Wt(ke,1),ke.m(Z,B)):ke&&(Mo(),bn(ke,1,1,()=>{ke=null}),Io()),4&nt&&(G=!ee(Ue[2].options.text)),G?Ie?(Ie.p(Ue,nt),4&nt&&Wt(Ie,1)):(Ie=ba(Ue),Ie.c(),Wt(Ie,1),Ie.m(Z,ie)):Ie&&(Mo(),bn(Ie,1,1,()=>{Ie=null}),Io()),4&nt&&(le=Array.isArray(Ue[2].options.buttons)&&Ue[2].options.buttons.length),le?ze?(ze.p(Ue,nt),4&nt&&Wt(ze,1)):(ze=va(Ue),ze.c(),Wt(ze,1),ze.m(Z,null)):ze&&(Mo(),bn(ze,1,1,()=>{ze=null}),Io())},i(Ue){ge||(Wt(ke),Wt(Ie),Wt(ze),ge=!0)},o(Ue){bn(ke),bn(Ie),bn(ze),ge=!1},d(Ue){Ue&&ni(Z),ke&&ke.d(),Ie&&Ie.d(),ze&&ze.d()}}}function vn(L,Z,F){let{descriptionId:B,labelId:G,step:ie}=Z;return L.$$set=le=>{"descriptionId"in le&&F(0,B=le.descriptionId),"labelId"in le&&F(1,G=le.labelId),"step"in le&&F(2,ie=le.step)},[B,G,ie]}class Hc extends Wi{constructor(Z){super(),Gi(this,Z,vn,Oi,Ji,{descriptionId:0,labelId:1,step:2})}}function jr(L){let Z;return{c(){Z=Tn("div"),Mt(Z,"class","shepherd-arrow"),Mt(Z,"data-popper-arrow","")},m(F,B){fi(F,Z,B)},d(F){F&&ni(Z)}}}function Dr(L){let Z,F,B,G,ie,le,ge,ke,Ie=L[4].options.arrow&&L[4].options.attachTo&&L[4].options.attachTo.element&&L[4].options.attachTo.on&&jr();B=new Hc({props:{descriptionId:L[2],labelId:L[3],step:L[4]}});let ze=[{"aria-describedby":G=ee(L[4].options.text)?null:L[2]},{"aria-labelledby":ie=L[4].options.title?L[3]:null},L[1],{role:"dialog"},{tabindex:"0"}],Ue={};for(let Ne=0;Ne<ze.length;Ne+=1)Ue=Ac(Ue,ze[Ne]);return{c(){Z=Tn("div"),Ie&&Ie.c(),F=So(),Lo(B.$$.fragment),zo(Z,Ue),Hi(Z,"shepherd-has-cancel-icon",L[5]),Hi(Z,"shepherd-has-title",L[6]),Hi(Z,"shepherd-element",!0)},m(Ne,nt){fi(Ne,Z,nt),Ie&&Ie.m(Z,null),Bo(Z,F),Yi(B,Z,null),L[13](Z),le=!0,ge||(ke=Zn(Z,"keydown",L[7]),ge=!0)},p(Ne,nt){let[et]=nt;Ne[4].options.arrow&&Ne[4].options.attachTo&&Ne[4].options.attachTo.element&&Ne[4].options.attachTo.on?Ie||(Ie=jr(),Ie.c(),Ie.m(Z,F)):Ie&&(Ie.d(1),Ie=null);const bt={};4&et&&(bt.descriptionId=Ne[2]),8&et&&(bt.labelId=Ne[3]),16&et&&(bt.step=Ne[4]),B.$set(bt),zo(Z,Ue=function Lc(L,Z){const F={},B={},G={$$scope:1};let ie=L.length;for(;ie--;){const le=L[ie],ge=Z[ie];if(ge){for(const ke in le)ke in ge||(B[ke]=1);for(const ke in ge)G[ke]||(F[ke]=ge[ke],G[ke]=1);L[ie]=ge}else for(const ke in le)G[ke]=1}for(const le in B)le in F||(F[le]=void 0);return F}(ze,[(!le||20&et&&G!==(G=ee(Ne[4].options.text)?null:Ne[2]))&&{"aria-describedby":G},(!le||24&et&&ie!==(ie=Ne[4].options.title?Ne[3]:null))&&{"aria-labelledby":ie},2&et&&Ne[1],{role:"dialog"},{tabindex:"0"}])),Hi(Z,"shepherd-has-cancel-icon",Ne[5]),Hi(Z,"shepherd-has-title",Ne[6]),Hi(Z,"shepherd-element",!0)},i(Ne){le||(Wt(B.$$.fragment,Ne),le=!0)},o(Ne){bn(B.$$.fragment,Ne),le=!1},d(Ne){Ne&&ni(Z),Ie&&Ie.d(),co(B),L[13](null),ge=!1,ke()}}}function Kc(L){return L.split(" ").filter(Z=>!!Z.length)}function Wa(L,Z,F){let Ne,nt,et,{classPrefix:B,element:G,descriptionId:ie,firstFocusableElement:le,focusableElements:ge,labelId:ke,lastFocusableElement:Ie,step:ze,dataStepId:Ue}=Z;return function As(L){$i().$$.on_mount.push(L)}(()=>{F(1,Ue={[`data-${B}shepherd-step-id`]:ze.id}),F(9,ge=G.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),F(8,le=ge[0]),F(10,Ie=ge[ge.length-1])}),Kn(()=>{et!==ze.options.classes&&function an(){(function Dt(Xe){if(ne(Xe)){const wt=Kc(Xe);wt.length&&G.classList.remove(...wt)}})(et),et=ze.options.classes,function Vt(Xe){if(ne(Xe)){const wt=Kc(Xe);wt.length&&G.classList.add(...wt)}}(et)}()}),L.$$set=Xe=>{"classPrefix"in Xe&&F(11,B=Xe.classPrefix),"element"in Xe&&F(0,G=Xe.element),"descriptionId"in Xe&&F(2,ie=Xe.descriptionId),"firstFocusableElement"in Xe&&F(8,le=Xe.firstFocusableElement),"focusableElements"in Xe&&F(9,ge=Xe.focusableElements),"labelId"in Xe&&F(3,ke=Xe.labelId),"lastFocusableElement"in Xe&&F(10,Ie=Xe.lastFocusableElement),"step"in Xe&&F(4,ze=Xe.step),"dataStepId"in Xe&&F(1,Ue=Xe.dataStepId)},L.$$.update=()=>{16&L.$$.dirty&&(F(5,Ne=ze.options&&ze.options.cancelIcon&&ze.options.cancelIcon.enabled),F(6,nt=ze.options&&ze.options.title))},[G,Ue,ie,ke,ze,Ne,nt,Xe=>{const{tour:wt}=ze;switch(Xe.keyCode){case 9:if(0===ge.length){Xe.preventDefault();break}Xe.shiftKey?(document.activeElement===le||document.activeElement.classList.contains("shepherd-element"))&&(Xe.preventDefault(),Ie.focus()):document.activeElement===Ie&&(Xe.preventDefault(),le.focus());break;case 27:wt.options.exitOnEsc&&ze.cancel();break;case 37:wt.options.keyboardNavigation&&wt.back();break;case 39:wt.options.keyboardNavigation&&wt.next()}},le,ge,Ie,B,()=>G,function ot(Xe){jt[Xe?"unshift":"push"](()=>{G=Xe,F(0,G)})}]}class li extends Wi{constructor(Z){super(),Gi(this,Z,Wa,Dr,Ji,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class Ms extends W{constructor(Z,F){return void 0===F&&(F={}),super(Z,F),this.tour=Z,this.classPrefix=this.tour.options?be(this.tour.options.classPrefix):"",this.styles=Z.styles,this._resolvedAttachTo=null,xe(this),this._setOptions(F),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){(function vc(L){L.cleanup&&L.cleanup(),L.cleanup=null})(this),J(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=function he(L){const Z=L.options.attachTo||{},F=Object.assign({},Z);if(H(F.element)&&(F.element=F.element.call(L)),ne(F.element)){try{F.element=document.querySelector(F.element)}catch{}F.element||console.error(`The element for this Shepherd step was not found ${Z.element}`)}return F}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!(!this.el||this.el.hidden)}show(){return H(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(Z){Object.assign(this.options,Z),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){return this.shepherdElementComponent=new li({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:`${this.id}-description`,labelId:`${this.id}-label`,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(Z){const{element:F}=this._getResolvedAttachToOptions();H(this.options.scrollToHandler)?this.options.scrollToHandler(F):function R(L){return L instanceof Element}(F)&&"function"==typeof F.scrollIntoView&&F.scrollIntoView(Z)}_getClassOptions(Z){const F=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,G=F&&F.classes?F.classes:"",ie=[...(Z.classes?Z.classes:"").split(" "),...G.split(" ")],le=new Set(ie);return Array.from(le).join(" ").trim()}_setOptions(Z){void 0===Z&&(Z={});let F=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;F=U({},F||{}),this.options=Object.assign({arrow:!0},F,Z,function bc(L,Z){return{floatingUIOptions:U(L.floatingUIOptions||{},Z.floatingUIOptions||{})}}(F,Z));const{when:B}=this.options;this.options.classes=this._getClassOptions(Z),this.destroy(),this.id=this.options.id||`step-${me()}`,B&&Object.keys(B).forEach(G=>{this.on(G,B[G],this)})}_setupElements(){ee(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function fe(L){const{event:Z,selector:F}=L.options.advanceOn||{};if(!Z)return console.error("advanceOn was defined, but no event name was passed.");{const B=function Ce(L,Z){return F=>{if(Z.isOpen()){const B=Z.el&&F.currentTarget===Z.el;(!ee(L)&&F.currentTarget.matches(L)||B)&&Z.tour.next()}}}(F,L);let G;try{G=document.querySelector(F)}catch{}if(!ee(F)&&!G)return console.error(`No element was found for the selector supplied to advanceOn: ${F}`);G?(G.addEventListener(Z,B),L.on("destroy",()=>G.removeEventListener(Z,B))):(document.body.addEventListener(Z,B,!0),L.on("destroy",()=>document.body.removeEventListener(Z,B,!0)))}}(this),xc(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;const Z=this.shepherdElementComponent.getElement(),F=this.target||document.body;F.classList.add(`${this.classPrefix}shepherd-enabled`),F.classList.add(`${this.classPrefix}shepherd-target`),Z.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep(Z){const F=Z.target;F&&(Z.options.highlightClass&&F.classList.add(Z.options.highlightClass),F.classList.remove("shepherd-target-click-disabled"),!1===Z.options.canClickTarget&&F.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){const Z=this.target||document.body;this.options.highlightClass&&Z.classList.remove(this.options.highlightClass),Z.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}}function Fr(L){let Z,F,B,G,ie;return{c(){Z=ga("svg"),F=ga("path"),Mt(F,"d",L[2]),Mt(Z,"class",B=(L[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")},m(le,ge){fi(le,Z,ge),Bo(Z,F),L[11](Z),G||(ie=Zn(Z,"touchmove",L[3]),G=!0)},p(le,ge){let[ke]=ge;4&ke&&Mt(F,"d",le[2]),2&ke&&B!==(B=(le[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Mt(Z,"class",B)},i:ri,o:ri,d(le){le&&ni(Z),L[11](null),G=!1,ie()}}}function Ur(L){if(!L)return null;const F=L instanceof HTMLElement&&window.getComputedStyle(L).overflowY;return"hidden"!==F&&"visible"!==F&&L.scrollHeight>=L.clientHeight?L:Ur(L.parentElement)}function Di(L,Z,F){let{element:B,openingProperties:G}=Z;me();let le,ge,ie=!1;function Ie(){F(4,G={width:0,height:0,x:0,y:0,r:0})}function ze(){F(1,ie=!1),Dt()}function Ue(ot,Xe,wt,Yn){if(void 0===ot&&(ot=0),void 0===Xe&&(Xe=0),Yn){const{y:Gn,height:jo}=function Va(L,Z){const F=L.getBoundingClientRect();let B=F.y||F.top,G=F.bottom||B+F.height;if(Z){const le=Z.getBoundingClientRect(),ge=le.y||le.top,ke=le.bottom||ge+le.height;B=Math.max(B,ge),G=Math.min(G,ke)}return{y:B,height:Math.max(G-B,0)}}(Yn,wt),{x:xi,width:mo,left:Xi}=Yn.getBoundingClientRect();F(4,G={width:mo+2*ot,height:jo+2*ot,x:(xi||Xi)-ot,y:Gn-ot,r:Xe})}else Ie()}function nt(){F(1,ie=!0)}Ie();const et=ot=>{ot.preventDefault()};function Dt(){le&&(cancelAnimationFrame(le),le=void 0),window.removeEventListener("touchmove",et,{passive:!1})}return L.$$set=ot=>{"element"in ot&&F(0,B=ot.element),"openingProperties"in ot&&F(4,G=ot.openingProperties)},L.$$.update=()=>{16&L.$$.dirty&&F(2,ge=function $o(L){let{width:Z,height:F,x:B=0,y:G=0,r:ie=0}=L;const{innerWidth:le,innerHeight:ge}=window,{topLeft:ke=0,topRight:Ie=0,bottomRight:ze=0,bottomLeft:Ue=0}="number"==typeof ie?{topLeft:ie,topRight:ie,bottomRight:ie,bottomLeft:ie}:ie;return`M${le},${ge}H0V0H${le}V${ge}ZM${B+ke},${G}a${ke},${ke},0,0,0-${ke},${ke}V${F+G-Ue}a${Ue},${Ue},0,0,0,${Ue},${Ue}H${Z+B-ze}a${ze},${ze},0,0,0,${ze}-${ze}V${G+Ie}a${Ie},${Ie},0,0,0-${Ie}-${Ie}Z`}(G))},[B,ie,ge,ot=>{ot.stopPropagation()},G,()=>B,Ie,ze,Ue,function Ne(ot){Dt(),ot.tour.options.useModalOverlay?(function Vt(ot){const{modalOverlayOpeningPadding:Xe,modalOverlayOpeningRadius:wt}=ot.options,Yn=Ur(ot.target),Gn=()=>{le=void 0,Ue(Xe,wt,Yn,ot.target),le=requestAnimationFrame(Gn)};Gn(),function an(){window.addEventListener("touchmove",et,{passive:!1})}()}(ot),nt()):ze()},nt,function Xt(ot){jt[ot?"unshift":"push"](()=>{B=ot,F(0,B)})}]}class Yc extends Wi{constructor(Z){super(),Gi(this,Z,Di,Fr,Ji,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}const uo=new W,Vi=typeof window>"u";class Rr{constructor(){}}function Vc(L){const{classes:Z,disabled:F,label:B,secondary:G,type:ie,text:le}=L;if(!ie)return L;if(-1===["back","cancel","next"].indexOf(ie))throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[ie].bind(this),classes:Z,disabled:F,label:B,secondary:G,text:le}}Object.assign(uo,Vi?{Tour:Rr,Step:Rr}:{Tour:class Gc extends W{constructor(Z){return void 0===Z&&(Z={}),super(Z),xe(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},Z),this.classPrefix=be(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(G=>{(ie=>{this.on(ie,le=>{(le=le||{}).tour=this,uo.trigger(ie,le)})})(G)}),this._setTourID(),this}addStep(Z,F){let B=Z;return B instanceof Ms?B.tour=this:B=new Ms(this,B),ee(F)?this.steps.push(B):this.steps.splice(F,0,B),B}addSteps(Z){return Array.isArray(Z)&&Z.forEach(F=>{this.addStep(F)}),this}back(){const Z=this.steps.indexOf(this.currentStep);this.show(Z-1,!1)}cancel(){var Z=this;return(0,p.Z)(function*(){if(Z.options.confirmCancel){const B=Z.options.confirmCancelMessage||"Are you sure you want to stop the tour?";("function"==typeof Z.options.confirmCancel?yield Z.options.confirmCancel():window.confirm(B))&&Z._done("cancel")}else Z._done("cancel")})()}complete(){this._done("complete")}getById(Z){return this.steps.find(F=>F.id===Z)}getCurrentStep(){return this.currentStep}hide(){const Z=this.getCurrentStep();if(Z)return Z.hide()}isActive(){return uo.activeTour===this}next(){const Z=this.steps.indexOf(this.currentStep);Z===this.steps.length-1?this.complete():this.show(Z+1,!0)}removeStep(Z){const F=this.getCurrentStep();this.steps.some((B,G)=>{if(B.id===Z)return B.isOpen()&&B.hide(),B.destroy(),this.steps.splice(G,1),!0}),F&&F.id===Z&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(Z,F){void 0===Z&&(Z=0),void 0===F&&(F=!0);const B=ne(Z)?this.getById(Z):this.steps[Z];B&&(this._updateStateBeforeShow(),H(B.options.showOn)&&!B.options.showOn()?this._skipStep(B,F):(this.trigger("show",{step:B,previous:this.currentStep}),this.currentStep=B,B.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done(Z){const F=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(B=>B.destroy()),function $c(L){if(L){const{steps:Z}=L;Z.forEach(F=>{F.options&&!1===F.options.canClickTarget&&F.options.attachTo&&F.target instanceof HTMLElement&&F.target.classList.remove("shepherd-target-click-disabled")})}}(this),this.trigger(Z,{index:F}),uo.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===Z||"complete"===Z)&&this.modal){const B=document.querySelector(".shepherd-modal-overlay-container");B&&B.remove()}J(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),uo.activeTour=this}_setupModal(){this.modal=new Yc({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(Z,F){const B=this.steps.indexOf(Z);B===this.steps.length-1?this.complete():this.show(F?B+1:B-1,F)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){this.id=`${this.options.tourName||"tour"}--${me()}`}},Step:Ms});let Xc=(()=>{class L{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(F){this.tourObject.show(F)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(F){this.isActive=!1}addSteps(F){this._initialize();const B=this.tourObject;if(F&&Array.isArray(F)&&0!==F.length){if(!this.requiredElementsPresent())return void B.addStep({buttons:[{text:"Exit",action:B.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});F.forEach(G=>{G.buttons&&(G.buttons=G.buttons.map(Vc.bind(this),this)),B.addStep(G)})}}requiredElementsPresent(){let F=!0;return this.requiredElements.forEach(B=>{const G=document.querySelector(B.selector);F&&(!G||function Wc(L){return 0===L.offsetWidth&&0===L.offsetHeight}(G))&&(F=!1,this.errorTitle=B.title,this.messageForUser=B.message)}),F}_initialize(){const F=new uo.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal});F.on("complete",this.onTourFinish.bind(this,"complete")),F.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=F}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=M.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})()}}]);