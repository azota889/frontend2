"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[874],{46527:(Q,I,n)=>{n.d(I,{S:()=>J});var t=n(65879),i=n(39621),T=n(11530),D=n(96814),p=n(11964);const e=["table"];function f(S,k){if(1&S&&(t.TgZ(0,"td",6),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()),2&S){const A=k.$implicit,M=k.index;t.uIk("excelRow",1)("excelColumn",M+1),t.xp6(1),t.hij(" ",t.lcZ(2,3,null==A?null:A.offlineMixQuestionHashId)," ")}}function a(S,k){if(1&S&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&S){const A=t.oxw(2).$implicit,M=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,A.offlineQuestionObjs[M].answer)," ")}}function _(S,k){1&S&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&S&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_essay_question")," "))}function y(S,k){if(1&S&&(t.TgZ(0,"span"),t.YNc(1,a,3,3,"span",7),t.YNc(2,_,3,3,"span",7),t.qZA()),2&S){const A=t.oxw().$implicit,M=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=A.offlineQuestionObjs&&null!=A.offlineQuestionObjs[M]&&A.offlineQuestionObjs[M].isEssay)),t.xp6(1),t.Q6J("ngIf",null==A.offlineQuestionObjs||null==A.offlineQuestionObjs[M]?null:A.offlineQuestionObjs[M].isEssay)}}function w(S,k){if(1&S&&(t.TgZ(0,"td",6),t.YNc(1,y,3,2,"span",7),t.qZA()),2&S){const A=k.$implicit,M=k.index,L=t.oxw().$implicit;let W;t.uIk("excelRow",L+2)("excelColumn",M+1),t.xp6(1),t.Q6J("ngIf",(null!==(W=null==A.offlineQuestionObjs?null:A.offlineQuestionObjs.length)&&void 0!==W?W:0)>L)}}const P=function(){return[]};function o(S,k){if(1&S&&(t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.YNc(3,w,2,3,"td",4),t.qZA()),2&S){const A=k.$implicit,M=t.oxw();let L;t.xp6(1),t.uIk("excelRow",A+2)("excelColumn",0),t.xp6(1),t.hij(" ",A+M.startQuestionIndex," "),t.xp6(1),t.Q6J("ngForOf",null!==(L=null==M.obj?null:M.obj.offlineMixQuestionObjs)&&void 0!==L?L:t.DdM(4,P))}}let J=(()=>{class S extends i.Q{calculateMaxQuestion(){let A=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(M=>{A<(M.offlineQuestionObjs?.length??0)&&(A=M.offlineQuestionObjs?.length??0)}),A}ngOnChanges(){this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}ngOnInit(){super.ngOnInit()}constructor(A){super(),this.exportExcelService=A,this.startQuestionIndex=1,this.exportDataDone=new t.vpe,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1}}return S.\u0275fac=function(A){return new(A||S)(t.Y36(T.L))},S.\u0275cmp=t.Xpm({type:S,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(A,M){if(1&A&&t.Gf(e,5),2&A){let L;t.iGM(L=t.CRH())&&(M.table=L.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},features:[t.qOj,t.TTD],decls:14,vars:16,consts:[[1,"table","table-bordered",2,"display","none"],["table",""],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(A,M){if(1&A&&(t.TgZ(0,"table",0,1)(2,"tbody")(3,"tr")(4,"td",2),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",3),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()(),t.TgZ(10,"tr"),t.YNc(11,f,3,5,"td",4),t.qZA(),t.YNc(12,o,4,5,"tr",5),t.ALo(13,"createEmptyArray"),t.qZA()()),2&A){let L;t.xp6(4),t.uIk("excelRow",0)("excelColumn",0),t.xp6(1),t.hij(" ",t.lcZ(6,9,"lang_testbank_answersheet_question_title")," "),t.xp6(2),t.uIk("colspan",M.totalExamCode)("excelRow",0)("excelColumn",1),t.xp6(1),t.hij(" ",t.lcZ(9,11,"lang_auto_ma_de_thi")," "),t.xp6(3),t.Q6J("ngForOf",null!==(L=null==M.obj?null:M.obj.offlineMixQuestionObjs)&&void 0!==L?L:t.DdM(15,P)),t.xp6(1),t.Q6J("ngForOf",t.lcZ(13,13,M.maxQuestionIndex))}},dependencies:[D.sg,D.O5,p.JV,p.Aw,p.ib],encapsulation:2}),S})()},78585:(Q,I,n)=>{n.d(I,{h:()=>Z});var t=n(56223),i=n(19347),T=n(35187),D=n(217),p=n(90241),e=n(65879),f=n(41719),a=n(79107),_=n(96814),y=n(70342),w=n(87466),P=n(95545),o=n(37722),J=n(775),S=n(10463),k=n(74438),A=n(11964);function M(x,z){1&x&&(e.TgZ(0,"div",8)(1,"div",9)(2,"span",10),e._uU(3,"Loading..."),e.qZA()()())}function L(x,z){1&x&&(e.TgZ(0,"div",32),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&x&&(e.xp6(1),e.hij("*** ",e.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class"),""))}function W(x,z){if(1&x&&(e.TgZ(0,"div",30),e.YNc(1,L,3,3,"div",31),e.qZA()),2&x){const m=e.oxw(3);e.xp6(1),e.Q6J("ngIf",m.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow)}}function Y(x,z){if(1&x){const m=e.EpF();e.TgZ(0,"div",33)(1,"span",34),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",35),e.NdJ("click",function(){e.CHM(m);const c=e.oxw(3);return e.KtG(c.showCopySuccess())}),e.TgZ(5,"div",36),e._UZ(6,"lucide-icon",37),e.qZA(),e._uU(7," Copy link "),e.qZA()()}if(2&x){const m=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_copy_link_gui_cho_hoc_sinh")),e.xp6(2),e.Q6J("cdkCopyToClipboard",m.copyLinkToClipboard())("disabled",2==m.form.controls.chooseOption.value&&(null==m.form.controls.classroomIds.errors?null:m.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow))}}function K(x,z){1&x&&(e.TgZ(0,"div",38)(1,"p",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&x&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}const R=function(x){return{"h-56-important":x}};function G(x,z){if(1&x){const m=e.EpF();e.ynx(0),e.TgZ(1,"div",15)(2,"mat-radio-group",16),e.NdJ("change",function(){e.CHM(m);const c=e.oxw(2);return e.KtG(c.changeStatusOfflineShare(void 0))}),e.TgZ(3,"mat-radio-button",17),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"mat-radio-button",18),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"mat-radio-button",19),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()(),e.TgZ(12,"div",20)(13,"div",21)(14,"azt-list-classroom-checkall",22),e.NdJ("changeCheckboxEvent",function(c){e.CHM(m);const s=e.oxw(2);return e.KtG(s.changeStatusOfflineShare(c))}),e.qZA()(),e.TgZ(15,"div",23)(16,"ng-scrollbar",24)(17,"azt-list-classroom-checkbox",25),e.NdJ("changeCheckboxEvent",function(c){e.CHM(m);const s=e.oxw(2);return e.KtG(s.changeStatusOfflineShare(c))}),e.qZA()()()(),e.YNc(18,W,2,1,"div",26),e.TgZ(19,"div",27),e.YNc(20,Y,8,5,"div",28),e.qZA(),e.YNc(21,K,4,3,"div",29),e.ALo(22,"fullPermission"),e.BQk()}if(2&x){const m=e.oxw(2);e.xp6(3),e.Q6J("checked",0==m.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(5,20,"lang_auto_khong")),e.xp6(2),e.Q6J("checked",1==m.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(8,22,"lang_auto_tat_ca_cac_lop")),e.xp6(2),e.Q6J("checked",2==m.form.controls.chooseOption.value),e.xp6(1),e.Oqu(e.lcZ(11,24,"lang_auto_tuy_chon_theo_lop")),e.xp6(2),e.Q6J("hidden",2!=m.form.controls.chooseOption.value),e.xp6(2),e.Q6J("form",m.form)("objs",m.classroomObjs)("permissionName",m.permissionTypes.exam),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",e.VKq(29,R,m.isMobileWebView)),e.xp6(1),e.Q6J("form",m.form)("objs",m.classroomObjs)("shareClassroomIds",m.shareClassroomIds)("permissionName",m.permissionTypes.exam),e.xp6(1),e.Q6J("ngIf",m.form.controls.classroomIds.errors&&2==m.form.controls.chooseOption.value),e.xp6(2),e.Q6J("ngIf",0!=m.form.controls.chooseOption.value),e.xp6(1),e.Q6J("ngIf",!e.xi3(22,26,m.examWithPermissionObj,"exam"))}}function v(x,z){1&x&&(e.TgZ(0,"div",41)(1,"p",39),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&x&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function N(x,z){if(1&x&&(e.YNc(0,v,4,3,"div",40),e.ALo(1,"fullPermission")),2&x){const m=e.oxw(2);e.Q6J("ngIf",!e.xi3(1,1,m.examWithPermissionObj,"exam"))}}function C(x,z){if(1&x&&(e.TgZ(0,"form",11)(1,"div",12),e.YNc(2,G,23,31,"ng-container",13),e.ALo(3,"fullPermission"),e.YNc(4,N,2,4,"ng-template",null,14,e.W1O),e.qZA()()),2&x){const m=e.MAs(5),h=e.oxw();e.Q6J("formGroup",h.form),e.xp6(2),e.Q6J("ngIf",e.xi3(3,3,h.examWithPermissionObj,"exam"))("ngIfElse",m)}}function b(x,z){if(1&x){const m=e.EpF();e.TgZ(0,"div",42)(1,"button",43),e.NdJ("click",function(){e.CHM(m);const c=e.oxw();return e.KtG(c.btnCloseDialog(!1))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&x&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dong")," "))}let Z=(()=>{class x extends p.e{btnCloseDialog(m){this.dialogRef.close(m)}copyLinkToClipboard(){let m=this.commonService.getCurrentDomain();return this.linkCopy=`${m}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.subscriptions.add(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(m=>{1==m.success?(this.offlineCode=m.data?.shareHashId??"",this.classroomObjs=m.data?.classroomObjs??[],this.shareClassroomIds=m.data?.shareClassroomIds??[],this.examWithPermissionObj=m.data?.examObj,this.form.controls.chooseOption.setValue(m.data?.showOfflineResult),this.successStatusObj()):this.errorStatusObj(m.message??"",!0)}))}changeStatusOfflineShare(m){if(2==this.form.controls.chooseOption.value&&this.form.controls.classroomIds.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let h=this.form.controls.chooseOption.value;var c=this.sAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,T.y.homework);c.push(0);const s=2!=h?[]:this.sAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,c,this.form.controls.classroomIds.value);this.subscriptions.add(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:h,classroomIds:s}).subscribe(E=>{1==E.success?this.offlineCode=E.data?.shareHashId??"":this.errorStatusObj(E.message??"",!0)}))}ngOnInit(){this.getCodeOfflineShare(),this.form=this.formBuilder.group({chooseOption:new t.p4(0),classroomIds:this.formBuilder.array([])},{validators:[D.h.classroomCheckBoxValidatorWithoutWhoAllow]}),super.ngOnInit()}constructor(m,h,c,s,g){super(s,c),this.offlineShareService=m,this.formBuilder=h,this.dialogRef=c,this.sAztClassroomCheckboxService=g,this.examHashId="",this.useDialog=!1,this.form=new t.nJ({}),this.permissionTypes=T.y,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomObjs=[],this.shareClassroomIds=[],this.examHashId=s.examHashId?s.examHashId:this.examHashId,this.useDialog=s?s.useDialog:this.useDialog}}return x.\u0275fac=function(m){return new(m||x)(e.Y36(f.kN),e.Y36(t.QS),e.Y36(i.so,8),e.Y36(i.WI,8),e.Y36(a.f))},x.\u0275cmp=e.Xpm({type:x,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},features:[e.qOj],decls:12,vars:6,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],["class","d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["doneLoading",""],["class","text-right mt-3",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[3,"formGroup"],[1,"block-body"],[4,"ngIf","ngIfElse"],["noFullPermission",""],[1,"input-toggle"],["color","primary","formControlName","chooseOption",2,"flex-direction","column",3,"change"],["value","0",3,"checked"],["value","1",1,"mt-1",3,"checked"],["value","2",1,"mt-1",3,"checked"],[1,"block-main-classroom",3,"hidden"],[1,"classroom_check_all"],["formArrayName","classroomIds",3,"form","objs","permissionName","changeCheckboxEvent"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","shareClassroomIds","permissionName","changeCheckboxEvent"],["class","col-12 pl-0 pt-3",4,"ngIf"],[1,"block-main","mt-2"],["class","block-copy",4,"ngIf"],["class","block-else",4,"ngIf"],[1,"col-12","pl-0","pt-3"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"block-copy"],[1,"title-copy","mr-2"],["azt-track-service","azt-offline-share-6FNwLsA2D",1,"btn","btn-primary",3,"cdkCopyToClipboard","disabled","click"],[1,"w-4","h-4","mr-2"],["name","copy"],[1,"block-else"],[1,"note"],["class","block-else text-center",4,"ngIf"],[1,"block-else","text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(m,h){if(1&m&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3),e.YNc(8,M,4,0,"div",5),e.YNc(9,C,6,6,"ng-template",null,6,e.W1O),e.qZA(),e.YNc(11,b,4,3,"div",7),e.qZA()()()),2&m){const c=e.MAs(10);e.xp6(5),e.Oqu(e.lcZ(6,4,"lang_auto_tra_ket_qua_thi_offline")),e.xp6(3),e.Q6J("ngIf",h.statusObj.loading)("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",h.useDialog)}},dependencies:[_.mk,_.O5,y.i3,w.VQ,w.U0,t._Y,t.JJ,t.JL,t.sg,t.u,t.CE,P.KC,o.Nh5,J.M,S.B,k.V,A.JV,A.NK],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;width:500px;min-height:180px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:rgba(211,211,211,.58)}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}.classroom-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),x})()},36937:(Q,I,n)=>{n.d(I,{H:()=>m});var t=n(65879),i=n(19347),T=n(60013),D=n(56443),p=n(86670),e=n(90241),f=n(32839),a=n(14845),_=n(94281),y=n(96790),w=n(82898),P=n(41719),o=n(52630),J=n(96814),S=n(70342),k=n(77988),A=n(92596),M=n(37722),L=n(51969),W=n(20787),Y=n(30251),K=n(46527),R=n(11964);function G(h,c){if(1&h&&(t.TgZ(0,"a",28),t.ALo(1,"mytranslate"),t.TgZ(2,"span",19),t._UZ(3,"lucide-icon",29),t.qZA()()),2&h){t.oxw(2);const s=t.MAs(3);t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_tai_ve")),t.Q6J("matMenuTriggerFor",s)}}function v(h,c){if(1&h){const s=t.EpF();t.TgZ(0,"a",30),t.NdJ("click",function(){t.CHM(s);const E=t.oxw(2);return t.KtG(E.showCopySuccess())}),t.ALo(1,"mytranslate"),t.TgZ(2,"span",5),t._UZ(3,"lucide-icon",31),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&h){const s=t.oxw(2);t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_copy_link_de_thi")),t.Q6J("cdkCopyToClipboard",s.copyLinkExam()),t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_auto_copy_link"))}}function N(h,c){1&h&&(t.TgZ(0,"div",32)(1,"div",33)(2,"span",34),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&h&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function C(h,c){if(1&h&&t._UZ(0,"azt-loaded-img",35),2&h){const s=t.oxw(2);t.Q6J("imgSrc",s.data.obj.examHeader)}}function b(h,c){if(1&h&&t._UZ(0,"azt-question-standalone-for-preview",37),2&h){const s=t.oxw(),g=s.$implicit,E=s.index,B=t.oxw(2);t.Q6J("examObj",B.examObj)("questionObj",g)("follower",B.followerRenderQuest)("curQuestionIndex",E)}}function Z(h,c){if(1&h&&(t.ynx(0),t.YNc(1,b,1,4,"azt-question-standalone-for-preview",36),t.BQk()),2&h){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.examObj)}}function x(h,c){if(1&h&&(t.ynx(0),t.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14),t.YNc(6,G,4,4,"a",15),t.ALo(7,"globalCopyPermission"),t.YNc(8,v,7,7,"a",16),t.ALo(9,"globalCopyPermission"),t.qZA()(),t.TgZ(10,"div",17)(11,"a",18)(12,"span",19),t._UZ(13,"lucide-icon",20),t.qZA()()()(),t.TgZ(14,"azt-mat-dialog-content",21),t.YNc(15,N,5,3,"div",22),t.TgZ(16,"div",23),t._UZ(17,"div",24),t.YNc(18,C,1,1,"azt-loaded-img",25),t.YNc(19,Z,2,1,"ng-container",26),t._UZ(20,"div",27),t.qZA()()()(),t.BQk()),2&h){const s=t.oxw();t.xp6(6),t.Q6J("ngIf",!t.xi3(7,6,null==s.data?null:s.data.obj,"exam")),t.xp6(2),t.Q6J("ngIf",0==(null==s.data?null:s.data.isOnLib)&&!t.xi3(9,9,null==s.data?null:s.data.obj,"exam")),t.xp6(6),t.Q6J("defaultHeight",70),t.xp6(1),t.Q6J("ngIf",s.statusObj.loading),t.xp6(3),t.Q6J("ngIf",null==s.data||null==s.data.obj?null:s.data.obj.examHeader),t.xp6(1),t.Q6J("ngForOf",s.questionList)}}function z(h,c){if(1&h){const s=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",38),t.NdJ("exportDataDone",function(E){t.CHM(s);const B=t.oxw();return t.KtG(B.exportDataDone(E))}),t.qZA()}if(2&h){const s=t.oxw();let g;t.Q6J("startQuestionIndex",null!==(g=null==s.examObj?null:s.examObj.startQuestionIndex)&&void 0!==g?g:1)("obj",s.exportExcelData)}}let m=(()=>{class h extends e.e{btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(){let s=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"";T.G.openLoadingEffect(`${s}...`);let g={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""},E=this.printAddInfo.templateType??0;this.data.obj&&(this.data.obj.hideGroupQuestion=0,this.exportSAztDocxService.downloadExam(!1,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,g,E,void 0,void 0,void 0,!0).catch(B=>{this.showErrorSnack(B.message)}))}getData(s){this.initStatusObj(),this.permissionService.hasViewPermission("exam",s)||this.permissionService.hasOnlyCopyPermission("exam",s)?this.examService.apiExamGetQuestionsIdGet(s?.id??0).subscribe(g=>{const E=this.commonService.castJsonToClassObjs(p.v,JSON.stringify(g.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(E.length),this.addRoleQuestion(E),this.cloneQuestionList=this.commonService.myClone(E),this.questionList=E,this.examObj=g.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(s){for(let g=0;g<s.length;g++)s[g].isRoleTeacher=!0}downloadExamAnswer(){this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(s=>{if(1===s.success){let g=s.data?.obj;g?.offlineMixQuestionObjs&&g.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(g))}else this.errorStatusObj(s.message??"")}))}exportDataDone(s){let g=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(s,g)}createNameExam(s,g){let E="";E="answersheet"==s?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",""):"answerexcel"==s?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0),g&&(E=this.commonService.replaceAll(E,"_","-")??"");let B=".docx";return B="answersheet"==s?".pdf":B,B="answerexcel"==s?".xlsx":B,E+B}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),super.ngOnInit()}constructor(s,g,E,B,H,u,j,r,l){super(l,r),this.shareFileFlutterService=s,this.baseApiService=g,this.permissionService=E,this.exportSAztDocxService=B,this.examService=H,this.offlineExamExportService=u,this.printAnswersheetService=j,this.dialogRef=r,this.data=l,this.closeDialog=new t.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new D.p,this.printAddInfo={}}}return h.\u0275fac=function(s){return new(s||h)(t.Y36(f.g),t.Y36(a.V),t.Y36(_.j),t.Y36(y.F),t.Y36(w.O),t.Y36(P.qr),t.Y36(o.s),t.Y36(i.so,8),t.Y36(i.WI,8))},h.\u0275cmp=t.Xpm({type:h,selectors:[["azt-preview-exam"]],outputs:{closeDialog:"closeDialog"},features:[t.qOj,t.TTD],decls:19,vars:11,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],["class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3",3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],["name","download"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","cdkCopyToClipboard","click"],["name","copy"],[1,"flex","justify-center","items-center","h-40"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(s,g){1&s&&(t.YNc(0,x,21,12,"ng-container",0),t.ALo(1,"viewPermission"),t.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),t.NdJ("click",function(){return g.downloadExam()}),t.TgZ(8,"span",5),t._UZ(9,"lucide-icon",6),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"li")(13,"a",7),t.NdJ("click",function(){return g.downloadExamAnswer()}),t.TgZ(14,"span",5),t._UZ(15,"lucide-icon",8),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()(),t.YNc(18,z,1,2,"azt-export-excel-for-answersheet",9)),2&s&&(t.Q6J("ngIf",t.xi3(1,4,null==g.data?null:g.data.obj,"exam")||(null==g.data?null:g.data.globalLadingPage)),t.xp6(10),t.hij(" ",t.lcZ(11,7,"lang_auto_tai_xuong_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(17,9,"lang_auto_tai_xuong_dap_an_de_thi")," "),t.xp6(2),t.Q6J("ngIf",null!=g.exportExcelData))},dependencies:[J.sg,J.O5,S.i3,i.ZT,k.VK,k.p6,A.gM,M.Nh5,L.y,W.A,Y.R,K.S,R.JV,R.J7,R.O7],encapsulation:2}),h})()},79638:(Q,I,n)=>{n.d(I,{Y:()=>i});var t=n(65879);let i=(()=>{class T{constructor(p){this.el=p,this.enterKey=new t.vpe}onKeyDown(p){"Enter"===p.key&&!p.shiftKey&&(p.preventDefault(),this.enterKey.emit())}}return T.\u0275fac=function(p){return new(p||T)(t.Y36(t.SBq))},T.\u0275dir=t.lG2({type:T,selectors:[["","enterKey",""]],hostBindings:function(p,e){1&p&&t.NdJ("keydown",function(a){return e.onKeyDown(a)})},outputs:{enterKey:"enterKey"}}),T})()},14099:(Q,I,n)=>{n.d(I,{h:()=>t});var t=function(i){return i.COPY="copy",i.CUT="cut",i.DELETE="delete",i}(t||{})},36058:(Q,I,n)=>{n.d(I,{Y:()=>t});var t=function(i){return i[i.EXAM_CATEGORY=0]="EXAM_CATEGORY",i[i.EXAM=1]="EXAM",i}(t||{})},43151:(Q,I,n)=>{n.d(I,{e:()=>D});var t=n(14099),i=n(36058),T=n(65879);let D=(()=>{class p{constructor(){this.clipboardObjs=[]}setActionToClipboard(f,a,_,y){var w={id:f,name:y,type:a,action:_};this.clipboardObjs.filter(o=>o.id==w.id&&o.type==w.type).length>0?this.clipboardObjs.forEach(o=>{o.id==w.id&&o.type==w.type&&(o.action=w.action)}):this.clipboardObjs.push(w)}hasInClipboard(f,a){return this.clipboardObjs.filter(y=>y.id==f&&y.type==a).length>0}hasCopyFolderActionInClipboard(){var f=!1;return this.clipboardObjs.forEach(a=>{a.type==i.Y.EXAM_CATEGORY&&a.action==t.h.COPY&&(f=!0)}),f}getActionOfDocumentObj(f,a){var _=this.clipboardObjs.filter(y=>y.id==f&&y.type==a);if(_&&_.length>0)return _[0].action}removeDocumentInClipboard(f,a){for(var _=0;_<this.clipboardObjs.length;_++)this.clipboardObjs[_].id==f&&this.clipboardObjs[_].type==a&&this.clipboardObjs.splice(_,1)}isPasteToSelfFolder(f){var a=!1;return this.clipboardObjs.forEach(_=>{_.id==f&&_.type==i.Y.EXAM_CATEGORY&&_.action==t.h.COPY&&(a=!0)}),a}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return p.\u0275fac=function(f){return new(f||p)},p.\u0275prov=T.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},83746:(Q,I,n)=>{n.d(I,{M:()=>t});class t{static studentCheckBoxValidator(T){const D=T.get("whoAllow"),p=T.get("studentIds");return D&&p?3==D?.value&&t.countCheckBox(p.value)<1?(p?.setErrors({checkboxValidator:!0}),{identityRevealed:!0}):(p?.setErrors(null),null):null}static countCheckBox(T){for(var D=0,p=0;p<T.length;p++)T[p].listStudents?.length&&T[p].listStudents?.forEach(e=>{e.choose&&(D+=1)});return D}}},88135:(Q,I,n)=>{n.d(I,{Y:()=>z});var t=n(29023),i=n(56223),T=n(73445),D=n(23680),p=n(19347),e=n(16019),f=n(88620),a=n(35187),_=n(35318),y=n(217),w=n(83746),P=n(90241),o=n(65879),J=n(51488),S=n(94281),k=n(79107),A=n(96814),M=n(95545),L=n(775),W=n(10463),Y=n(74438),K=n(65110),R=n(11964);function G(m,h){1&m&&(o.TgZ(0,"div",5),o.O4$(),o.TgZ(1,"svg",6)(2,"g",7)(3,"g",8),o._UZ(4,"circle",9),o.TgZ(5,"path",10),o._UZ(6,"animateTransform",11),o.qZA()()()()())}function v(m,h){1&m&&(o.TgZ(0,"div",45),o._uU(1),o.ALo(2,"mytranslate"),o.qZA()),2&m&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function N(m,h){if(1&m&&(o.TgZ(0,"div",43),o.YNc(1,v,3,3,"div",44),o.qZA()),2&m){const c=o.oxw(2);o.xp6(1),o.Q6J("ngIf",c.form.controls.classroomIds.errors.checkboxValidator)}}function C(m,h){1&m&&(o.TgZ(0,"div",45),o._uU(1),o.ALo(2,"mytranslate"),o.qZA()),2&m&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"lang_testbank_test_config_you_not_yet_student")," "))}function b(m,h){if(1&m&&(o.TgZ(0,"div",43),o.YNc(1,C,3,3,"div",44),o.qZA()),2&m){const c=o.oxw(2);o.xp6(1),o.Q6J("ngIf",c.form.controls.studentIds.errors.checkboxValidator)}}const Z=function(m){return{"h-56-important":m}};function x(m,h){if(1&m){const c=o.EpF();o.TgZ(0,"div",12)(1,"form",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),o._uU(6),o.ALo(7,"mytranslate"),o.qZA()(),o.TgZ(8,"div",18)(9,"div",19)(10,"div",20)(11,"input",21),o.NdJ("change",function(){o.CHM(c);const g=o.oxw();return o.KtG(g.clearAllCheckBox(0))}),o.qZA(),o.TgZ(12,"label",22),o._uU(13),o.ALo(14,"mytranslate"),o.qZA()(),o.TgZ(15,"div",23)(16,"input",24),o.NdJ("change",function(){o.CHM(c);const g=o.oxw();return o.KtG(g.clearAllCheckBox(2))}),o.qZA(),o.TgZ(17,"label",25),o._uU(18),o.ALo(19,"mytranslate"),o.qZA()(),o.TgZ(20,"div",26)(21,"input",27),o.NdJ("change",function(){o.CHM(c);const g=o.oxw();return o.KtG(g.clearAllCheckBox(3))}),o.qZA(),o.TgZ(22,"label",28),o._uU(23),o.ALo(24,"mytranslate"),o.qZA()()()(),o.TgZ(25,"div",29)(26,"div",30)(27,"div",31)(28,"div",32),o._UZ(29,"azt-list-classroom-checkall",33),o.qZA()(),o.TgZ(30,"div",34)(31,"ng-scrollbar",35)(32,"azt-list-classroom-checkbox",36),o.NdJ("objsChange",function(g){o.CHM(c);const E=o.oxw();return o.KtG(E.classroomObjs=g)}),o.qZA()()()()(),o.YNc(33,N,2,1,"div",37),o.TgZ(34,"div",29)(35,"div",30)(36,"div",31)(37,"h3",38),o._uU(38),o.ALo(39,"mytranslate"),o.qZA()(),o.TgZ(40,"div",34)(41,"ng-scrollbar",35),o._UZ(42,"list-student-checkbox",39),o.qZA()()()(),o.YNc(43,b,2,1,"div",37),o.qZA()()()(),o.TgZ(44,"div",40)(45,"button",41),o.NdJ("click",function(){o.CHM(c);const g=o.oxw();return o.KtG(g.closeDialog())}),o._uU(46),o.ALo(47,"mytranslate"),o.qZA(),o.TgZ(48,"button",42),o.NdJ("click",function(){o.CHM(c);const g=o.oxw();return o.KtG(g.savePublishExam("save"))}),o._uU(49),o.ALo(50,"mytranslate"),o.qZA()()}if(2&m){const c=o.oxw();o.xp6(1),o.Q6J("formGroup",c.form),o.xp6(5),o.hij(" ",o.lcZ(7,31,"lang_testbank_test_config_who_tested")," "),o.xp6(7),o.hij(" ",o.lcZ(14,33,"lang_testbank_test_config_all_people")," "),o.xp6(5),o.hij(" ",o.lcZ(19,35,"lang_testbank_test_config_assigne_class")," "),o.xp6(5),o.hij(" ",o.lcZ(24,37,"lang_testbank_test_config_assigne_student")," "),o.xp6(2),o.Q6J("hidden",2!=c.form.controls.whoAllow.value),o.xp6(4),o.Q6J("form",c.form)("objs",c.classroomObjs)("permissionName",c.permissionTypes.exam),o.xp6(2),o.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",o.VKq(45,Z,c.isMobileWebView)),o.xp6(1),o.Q6J("form",c.form)("objs",c.classroomObjs)("examClassroomObjs",c.examClassroomObjs)("permissionName",c.permissionTypes.exam),o.xp6(1),o.Q6J("ngIf",c.form.controls.classroomIds.errors),o.xp6(1),o.Q6J("hidden",3!=c.form.controls.whoAllow.value),o.xp6(4),o.hij(" ",o.lcZ(39,39,"lang_test_config_student_list")," "),o.xp6(3),o.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",o.VKq(47,Z,c.isMobileWebView)),o.xp6(1),o.Q6J("form",c.form)("formArrayName","studentIds")("objs",c.classroomObjs)("examStudentObjs",c.data.examStudents)("permissionName",c.permissionTypes.exam),o.xp6(1),o.Q6J("ngIf",3==c.form.controls.whoAllow.value&&c.form.controls.studentIds.errors),o.xp6(3),o.hij(" ",o.lcZ(47,41,"lang_auto_huy")," "),o.xp6(2),o.Q6J("disabled",1==c.form.controls.whoAllow.value&&c.form.invalid||2==c.form.controls.whoAllow.value&&!c.hasClassroomIdChecked||3==c.form.controls.whoAllow.value&&c.form.controls.studentIds.errors),o.xp6(1),o.hij(" ",o.lcZ(50,43,"lang_auto_luu")," ")}}let z=(()=>{class m extends P.e{clearAllCheckBox(c){1==c?this.isSelectClassroom=!1:2==c&&(this.isSelectClassroom=!0)}closeDialog(c){this.dialogRef.close(c)}get hasClassroomIdChecked(){var c=this.commonService.getFormObj(this.form);let s=!1;for(let g=0;g<c.classroomIds.length;g++)if(c.classroomIds[g]){s=!0;break}return s}savePublishExam(c){if(1==this.form.controls.whoAllow.value&&this.form.invalid||2==this.form.controls.whoAllow.value&&!this.hasClassroomIdChecked)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");this.initStatusObj();let s="publish"===c?1:void 0;var g=this.commonService.getFormObj(this.form),E=this.sAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,a.y.exam);const B=this.sAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,E,g.classroomIds);let H=[];3==g.whoAllow&&g.studentIds&&g.studentIds.length?g.studentIds.forEach(l=>{let d={classroomId:l.classroomId??0,assignStudentIds:[]};l.listStudents?.forEach(O=>{O.id&&O.choose&&d.assignStudentIds?.push(O.id)}),d.assignStudentIds?.length&&H?.push(d)}):H=void 0;let u={whoAllow:g.whoAllow,isPublished:s??void 0,classroomIds:B,assignStudents:H,isSaveConfig:0};var j=this.permissionService.hasEditPermission("exam",this.obj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,u):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,u);this.subscriptions.add(j.subscribe(r=>{1==r.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(r.data?.obj)):this.errorStatusObj(r.message??"",!0)}))}getExamDataByHashId(c){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomGet(c).subscribe(s=>{if(1==s.success){if(null!=s.data){var E,g=s.data?.examObj;if(!(E=this.castObj(g)))return;E.limitQuestionGroupsParse=this.commonService.myParseJson(g.limitQuestionGroups??""),this.obj=E,this.hashId=this.obj.hashId??"",this.classroomObjs=s.data.classroomObjs??new Array,this.examClassroomObjs=s.data.examClassroomObjs??[],this.form.patchValue({whoAllow:String(this.obj.whoAllow)}),this.isSelectClassroom="2"==String(this.obj.whoAllow),this.successStatusObj()}}else this.errorStatusObj(s.message??"",!0)}))}ngOnInit(){this.form=this.formBuilder.group({whoAllow:new i.p4("0"),classroomIds:this.formBuilder.array([]),studentIds:this.formBuilder.array([])},{validators:[y.h.classroomCheckBoxValidator,w.M.studentCheckBoxValidator]}),this.form.valueChanges.subscribe(c=>{let s=JSON.stringify(c);s!=this.prevData&&(this.prevData=s,this.form.patchValue(c))}),this.getExamDataByHashId(this.hashId),super.ngOnInit()}constructor(c,s,g,E,B,H){super(B,E),this.formBuilder=c,this.documentConfigService=s,this.permissionService=g,this.dialogRef=E,this.data=B,this.sAztClassroomCheckboxService=H,this.form=new i.nJ({}),this.permissionTypes=a.y,this.checkDialogFastContent=[],this.prevData="",this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.hashId=B.hashId}}return m.\u0275fac=function(c){return new(c||m)(o.Y36(i.QS),o.Y36(J.C),o.Y36(S.j),o.Y36(p.so,8),o.Y36(p.WI,8),o.Y36(k.f))},m.\u0275cmp=o.Xpm({type:m,selectors:[["config-online-exam-dialog"]],features:[o._Bn([{provide:t.fM,useClass:e.WG,deps:[D.Ad,T.o8]},{provide:t.ab,useFactory:f.hx,deps:[_.D]}]),o.qOj],decls:6,vars:2,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"loading","flex","items-center","justify-center"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-8","h-8"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3","pr-2"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-5"],["id","config-who-all","formControlName","whoAllow","type","radio","value","0",1,"form-check-input",3,"change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0","mr-5"],["id","config-who-class","formControlName","whoAllow","type","radio","value","2",1,"form-check-input",3,"change"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio","value","3",1,"form-check-input",3,"change"],["for","config-who-student",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"mr-auto"],[3,"form","formArrayName","objs","examStudentObjs","permissionName"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"]],template:function(c,s){if(1&c&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o.YNc(3,G,7,0,"div",3),o.YNc(4,x,51,49,"ng-template",null,4,o.W1O),o.qZA()()()),2&c){const g=o.MAs(5);o.xp6(3),o.Q6J("ngIf",s.statusObj.loading)("ngIfElse",g)}},dependencies:[A.mk,A.O5,M.KC,i._Y,i.Fj,i._,i.JJ,i.JL,i.sg,i.u,i.CE,L.M,W.B,Y.V,K.V,R.JV],styles:["input[_ngcontent-%COMP%]::placeholder{color:#b2b2b2!important}.test-config[_ngcontent-%COMP%]{width:620px}.loading[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.setting-title[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:5px;font-size:14px;color:#2262ae}.setting-block[_ngcontent-%COMP%]{background:#fff}.setting-item[_ngcontent-%COMP%]{margin-bottom:15px}.setting-input[_ngcontent-%COMP%]{height:100%;border-left:0px;border-top-left-radius:0;border-bottom-left-radius:0}.setting-label[_ngcontent-%COMP%]{padding:15px;align-self:center;line-height:1.5;color:#495057;background-color:#e9ecef;border:1px solid #ced4da;border-bottom-left-radius:5px;border-top-left-radius:5px}.setting-form-input[_ngcontent-%COMP%]{padding:8.3px 15px;line-height:1.5;font-size:1rem;color:#495057;background-color:#fff;border:1px solid #ced4da;border-bottom-right-radius:.25rem;border-top-right-radius:.25rem}.setting-field-time[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:3px;text-align:center;padding:0}.p-custom[_ngcontent-%COMP%]{padding:12.8px 15px}.setting-advanced[_ngcontent-%COMP%]{margin-top:20px}.setting-head[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center}.setting-label-textarea[_ngcontent-%COMP%]{align-self:initial;display:flex;justify-content:center;align-items:center}.setting-textarea[_ngcontent-%COMP%]{height:120px}.picker-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:16px;height:0;font-size:16px;right:0}.btn-transparent[_ngcontent-%COMP%]{display:flex;align-items:center;border:none;background:transparent}.btn-transparent[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:20px;color:#2262ae}.more-link[_ngcontent-%COMP%]{color:#2262ae;transition:all .5s}.more-link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#103767}.label-custom[_ngcontent-%COMP%]{padding:45px 15px}  .mat-checkbox-layout{margin-bottom:0}small[_ngcontent-%COMP%]{color:#0006}.box-input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;height:24px;border-radius:3px;padding-left:5px;width:60px}.full-width[_ngcontent-%COMP%]{width:100%;max-width:100%}.w-92[_ngcontent-%COMP%]{width:92%!important}.w-9325[_ngcontent-%COMP%]{width:93.25%!important}.info_field[_ngcontent-%COMP%]{margin:8px 0}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;padding:5px 8px}.custom-input[_ngcontent-%COMP%], .custom-input-btn[_ngcontent-%COMP%]{border:none;width:100%;padding:5px;margin-left:5px}.border-auto[_ngcontent-%COMP%]{border:1px solid #dc3545}.custom-input[_ngcontent-%COMP%]:hover{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.custom-input[_ngcontent-%COMP%]:focus{outline-width:1px}.form-custom[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}@media only screen and (max-width: 1196px){  .mat-radio-label-content{white-space:normal}}@media only screen and (max-width: 350px){.test-config__box--grid[_ngcontent-%COMP%]{display:grid}}[type=number][_ngcontent-%COMP%]{appearance:none;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.word-wrap[_ngcontent-%COMP%]{word-break:break-word}.school-info_bg[_ngcontent-%COMP%]{width:100%}.note[_ngcontent-%COMP%]{font-style:italic;font-size:13px;font-weight:600}.dialog-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-align:center}.infor_box[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin:8px 0}.no_select[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.custom-mix-question-height[_ngcontent-%COMP%]{height:160px}.custom-invalid-mix-form[_ngcontent-%COMP%]{border-color:#dc3545}.custom-mix-group-question[_ngcontent-%COMP%]{background-color:#e9ecef;padding-left:0!important;padding-right:0!important;margin-left:0!important;margin-right:0!important;padding-bottom:0!important;border:1px solid #ced4da;border-radius:.25rem}.test-config__formMixQuestion[_ngcontent-%COMP%]{border:none;border-left:1px solid #ced4da}.no-border[_ngcontent-%COMP%]{border:none}.btn-offline[_ngcontent-%COMP%]{background:#ec9b00;color:#fff;transition:all .5s}.btn-offline[_ngcontent-%COMP%]:hover{background:#c8860b}.custom-select[_ngcontent-%COMP%]{height:100%;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.custom-select-md[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem}.btn-width[_ngcontent-%COMP%]{width:140px}.classroom_list[_ngcontent-%COMP%]{height:220px;white-space:nowrap;padding-left:2px;overflow:hidden}.badge-info[_ngcontent-%COMP%]{color:#fff;background-color:#2361ae}.setting-block-mix[_ngcontent-%COMP%]{height:180px;overflow:hidden;padding-bottom:40px}.hiddenTooltip[_ngcontent-%COMP%]{position:absolute;visibility:hidden;left:140px;width:0;top:3em}  .mat-checkbox-layout .mat-checkbox-label{font-weight:400}.px-15[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}.flex-around[_ngcontent-%COMP%]{justify-content:space-around}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center;padding-right:0}.setting-block-mix-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:20px}.py-azt-4[_ngcontent-%COMP%]{padding:30px 15px}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}.block-icon[_ngcontent-%COMP%]{right:20px}}@media screen and (max-width: 768px){.setting-label[_ngcontent-%COMP%]{color:#495057;background-color:transparent;border:none;padding:0;font-weight:500;text-align:left;margin-bottom:10px}.classroom_list[_ngcontent-%COMP%]{white-space:pre-wrap;padding-left:2px;overflow:auto}.setting-form-input[_ngcontent-%COMP%]{padding:10px 15px;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.setting-input[_ngcontent-%COMP%]{border-radius:.25rem;border:1px solid #ced4da;min-height:65px}.btn-azt-block[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.px-15[_ngcontent-%COMP%]{padding-right:0}.flex-around[_ngcontent-%COMP%]{justify-content:flex-start}.mt-md-10[_ngcontent-%COMP%]{margin-top:10px}.setting-block-mix[_ngcontent-%COMP%]{height:auto}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center}.setting-field-time[_ngcontent-%COMP%]{margin-top:10px}.paddingCustom[_ngcontent-%COMP%]{padding:0!important}.setting-block-mix-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.py-azt-4[_ngcontent-%COMP%]{padding:0}.setting-label-textarea[_ngcontent-%COMP%]{justify-content:flex-start}.test-config[_ngcontent-%COMP%]{width:auto}}"]}),m})()},65110:(Q,I,n)=>{n.d(I,{V:()=>H});var t=n(65879),i=n(56223),T=n(65592),D=n(35187),p=n(39621),e=n(19347),f=n(90241),a=n(96814),_=n(92596),y=n(775),w=n(30251),P=n(10134),o=n(11964);function J(u,j){1&u&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.BQk()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_remove_all")," "))}function S(u,j){1&u&&(t._uU(0),t.ALo(1,"mytranslate")),2&u&&t.hij(" ",t.lcZ(1,1,"lang_select_all")," ")}function k(u,j){if(1&u){const r=t.EpF();t.TgZ(0,"span")(1,"div",15)(2,"input",16),t.NdJ("change",function(){t.CHM(r);const d=t.oxw(3).$implicit,O=t.oxw(2);let U;return t.KtG(O.selectAllStudentOfClass(null==(U=d.get("classroomId"))?null:U.value))}),t.qZA(),t.TgZ(3,"label",17),t.YNc(4,J,3,3,"ng-container",13),t.YNc(5,S,2,3,"ng-template",null,18,t.W1O),t.qZA()()()}if(2&u){const r=t.MAs(6),l=t.oxw(3).$implicit;let d;t.xp6(2),t.Q6J("checked",null==(d=l.get("selectAll"))?null:d.value),t.xp6(2),t.Q6J("ngIf",l.get("selectAll").value)("ngIfElse",r)}}function A(u,j){1&u&&(t.ynx(0),t.TgZ(1,"div",19)(2,"div",20),t._UZ(3,"azt-loading-ui",21),t.qZA()(),t.BQk()),2&u&&(t.xp6(3),t.Q6J("type","oval"))}function M(u,j){1&u&&(t.ynx(0),t.TgZ(1,"div",23)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.BQk()),2&u&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"lang_core_class_has_no_student")))}function L(u,j){if(1&u){const r=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"input",30),t.NdJ("change",function(d){t.CHM(r);const O=t.oxw(6).$implicit,U=t.oxw(2);let F;return t.KtG(U.selectStudent(d,null==(F=O.get("classroomId"))?null:F.value))}),t.qZA(),t.TgZ(3,"label",31),t.ALo(4,"mytranslate"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}if(2&u){const r=j.$implicit;let l,d,O,U;t.xp6(1),t.Q6J("formGroup",r),t.xp6(1),t.s9C("id","azt-checkbox-student-"+(null==(l=r.get("id"))?null:l.value)),t.xp6(1),t.s9C("for","azt-checkbox-student-"+(null==(d=r.get("id"))?null:d.value)),t.Q6J("matTooltip",t.lcZ(4,5,null==(O=r.get("name"))?null:O.value)),t.xp6(2),t.Oqu(t.lcZ(6,7,null==(U=r.get("name"))?null:U.value))}}function W(u,j){if(1&u&&(t.TgZ(0,"div",26),t.YNc(1,L,7,9,"div",27),t.qZA()),2&u){const r=t.oxw(5).$implicit;let l;t.xp6(1),t.Q6J("ngForOf",null==(l=r.get("listStudents"))?null:l.controls)}}function Y(u,j){if(1&u&&(t.TgZ(0,"azt-mat-dialog-content",24),t.YNc(1,W,2,1,"div",25),t.qZA()),2&u){const r=t.oxw(4).$implicit;let l;t.Q6J("defaultHeight",60),t.xp6(1),t.Q6J("ngIf",(null==(l=r.get("show"))?null:l.value)&&(null==(l=r.get("listStudents"))?null:l.controls.length))}}function K(u,j){if(1&u&&(t.YNc(0,M,5,3,"ng-container",13),t.YNc(1,Y,2,2,"ng-template",null,22,t.W1O)),2&u){const r=t.MAs(2),l=t.oxw(3).$implicit;let d;t.Q6J("ngIf",(null==(d=l.get("show"))?null:d.value)&&!(null!=(d=l.get("listStudents"))&&d.controls.length))("ngIfElse",r)}}function R(u,j){if(1&u&&(t.TgZ(0,"div",10)(1,"div",11)(2,"div",12),t._uU(3),t.qZA(),t.YNc(4,k,7,3,"span",8),t.qZA(),t.YNc(5,A,4,1,"ng-container",13),t.YNc(6,K,3,2,"ng-template",null,14,t.W1O),t.qZA()),2&u){const r=t.MAs(7),l=t.oxw(2).$implicit,d=t.oxw(2);let O,U;t.Q6J("formGroup",l),t.xp6(3),t.hij(" ",d.data.classroomName," "),t.xp6(1),t.Q6J("ngIf",null==(O=l.get("listStudents"))?null:O.controls.length),t.xp6(1),t.Q6J("ngIf",null==(U=l.get("loadingStudents"))?null:U.value)("ngIfElse",r)}}const G=function(u){return{permissionObj:u}};function v(u,j){if(1&u&&(t.TgZ(0,"div"),t.YNc(1,R,8,5,"div",9),t.ALo(2,"createPermission"),t.qZA()),2&u){const r=t.oxw().$implicit,l=t.oxw(2);let d;t.xp6(1),t.Q6J("ngIf",null!=(null==(d=r.get("permissionObjs"))?null:d.value)&&t.xi3(2,1,t.VKq(4,G,null==(d=r.get("permissionObjs"))?null:d.value),l.listPermissionTypes[l.data.permissionName]))}}function N(u,j){if(1&u&&(t.ynx(0,7),t.YNc(1,v,3,6,"div",8),t.BQk()),2&u){const r=j.$implicit;let l;t.xp6(1),t.Q6J("ngIf",null==(l=r.get("show"))?null:l.value)}}function C(u,j){if(1&u){const r=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t.YNc(3,N,2,1,"ng-container",4),t.qZA()(),t.TgZ(4,"div",5)(5,"button",6),t.NdJ("click",function(){t.CHM(r);const d=t.oxw();return t.KtG(d.btnCloseDialog())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()}if(2&u){const r=t.oxw();let l;t.xp6(2),t.Q6J("formGroup",r.data.form),t.xp6(1),t.Q6J("ngForOf",null==(l=r.data.form.get("studentIds"))?null:l.controls),t.xp6(3),t.hij(" ",t.lcZ(7,3,"lang_auto_dong")," ")}}let b=(()=>{class u extends f.e{constructor(r,l){super(l,r),this.dialogRef=r,this.data=l,this.listPermissionTypes=D.y,this.formArray=l.formArray}btnCloseDialog(){this.dialogRef.close()}selectAllStudentOfClass(r){this.formArray.controls.forEach(l=>{if(l instanceof i.cw&&l.controls.classroomId.value==r&&l.controls.listStudents instanceof i.Oe&&l.controls.listStudents.length)if(0==l.controls.selectAll.value){for(let d=0;d<l.controls.listStudents.controls.length;d++)l.controls.listStudents.controls[d].get("choose")?.setValue(!0);l.controls.countSelect.setValue(l.controls.listStudents.controls.length),l.controls.selectAll.setValue(!0)}else{for(let d=0;d<l.controls.listStudents.controls.length;d++)l.controls.listStudents.controls[d].get("choose")?.setValue(!1);l.controls.countSelect.setValue(0),l.controls.selectAll.setValue(!1)}},this.formArray.controls)}selectStudent(r,l){this.formArray.controls.forEach(d=>{if(d instanceof i.cw&&d.controls.classroomId.value==l){let O=d.controls.countSelect.value;r.target.checked?(O++,d.controls.countSelect.setValue(O)):(O--,d.controls.countSelect.setValue(O)),d.controls.listStudents instanceof i.Oe&&d.controls.listStudents.length&&d.controls.selectAll.setValue(O==d.controls.listStudents.controls.length)}},this.formArray.controls)}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(e.so,8),t.Y36(e.WI,8))},u.\u0275cmp=t.Xpm({type:u,selectors:[["azt-list-student-dialog"]],features:[t.qOj],decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0",3,"formGroup"],["formArrayName","studentIds",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],["formArrayName","studentIds"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"font-medium","mr-auto"],[4,"ngIf","ngIfElse"],["doneLoadStudents",""],[1,"form-check"],["id","selected-all","type","checkbox",1,"form-check-input",3,"checked","change"],["for","selected-all",1,"form-check-label"],["elseTemplate",""],[1,"flex","items-center","justify-center","p-5"],[1,"w-5","h-5"],[3,"type"],["hasStudents",""],[1,"w-full","text-center","p-5"],[3,"defaultHeight"],["class","grid grid-cols-12 gap-3 p-3","formArrayName","listStudents",4,"ngIf"],["formArrayName","listStudents",1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4"],[1,"azt-checkbox-item",3,"formGroup"],["type","checkbox","formControlName","choose",1,"form-check-input",3,"id","change"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","for"]],template:function(r,l){1&r&&t.YNc(0,C,8,5,"div",0),2&r&&t.Q6J("ngIf",l.data.form)},dependencies:[a.sg,a.O5,_.gM,i.Wl,i.JJ,i.JL,i.sg,i.u,i.CE,y.M,w.R,P.n,o.JV,o.nq],encapsulation:2}),u})();var Z=n(61675),x=n(79430),z=n(37722);function m(u,j){if(1&u&&(t.TgZ(0,"span",11),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&u){const r=t.oxw().$implicit;let l,d;t.s9C("matTooltip",null==(l=r.get("classroomName"))?null:l.value),t.xp6(1),t.hij(" ",t.Dn7(2,2,null==(d=r.get("classroomName"))?null:d.value,0,30)+"..."," ")}}function h(u,j){if(1&u&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&u){const r=t.oxw().$implicit;let l;t.xp6(1),t.hij(" ",null==(l=r.get("classroomName"))?null:l.value," ")}}function c(u,j){1&u&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}const s=function(u){return{"text-primary font-medium":u}},g=function(u){return{permissionObj:u}};function E(u,j){if(1&u){const r=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t.NdJ("click",function(){const O=t.CHM(r).$implicit,U=t.oxw(2);let F;return t.KtG(U.showListStudentInClassroom(null==(F=O.get("classroomId"))?null:F.value,null==(F=O.get("classroomName"))?null:F.value))}),t.TgZ(2,"span",6),t._UZ(3,"lucide-icon",7),t.qZA(),t.YNc(4,m,3,6,"span",8),t.YNc(5,h,2,1,"span",0),t.YNc(6,c,3,3,"span",9),t.ALo(7,"fullPermission"),t.TgZ(8,"span",10),t._uU(9),t.qZA()()()}if(2&u){const r=j.$implicit;let l,d,O,U,F;t.xp6(1),t.Q6J("ngClass",t.VKq(8,s,null==(l=r.get("countSelect"))?null:l.value)),t.xp6(3),t.Q6J("ngIf",(null==(d=r.get("classroomName"))||null==d.value?null:d.value.length)>30),t.xp6(1),t.Q6J("ngIf",(null==(O=r.get("classroomName"))||null==O.value?null:O.value.length)<=30),t.xp6(1),t.Q6J("ngIf",!t.xi3(7,5,t.VKq(10,g,null==(U=r.get("permissionObjs"))?null:U.value),"classroom")),t.xp6(3),t.hij(" (",(null==(F=r.get("countSelect"))?null:F.value)+"/"+(null==(F=r.get("countStudents"))?null:F.value),") ")}}function B(u,j){if(1&u&&(t.TgZ(0,"div")(1,"form",1)(2,"div",2),t.YNc(3,E,10,12,"div",3),t.qZA()()()),2&u){const r=t.oxw();let l;t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(2),t.Q6J("ngForOf",null==(l=r.form.get("studentIds"))?null:l.controls)}}let H=(()=>{class u extends p.Q{initClassroomCheckbox(){this.formArray.clear();for(let d=0;d<this.objs.length;d++){let O=this.fb.group({classroomId:new i.NI(this.objs[d].id),classroomName:new i.NI(this.objs[d].name),permissionObjs:new i.NI(this.objs[d].permissionObj),listStudents:new i.Oe([]),countStudents:new i.NI(this.objs[d].countStudents),show:new i.NI(!1),loadingStudents:new i.NI(!1),selectAll:new i.NI(!1),countSelect:new i.NI(0)});this.formArray.push(O)}let r=[],l=[];if(this.examStudentObjs.length)for(let d=0;d<this.examStudentObjs.length;d++){let O=this.examStudentObjs[d].classroomId,U=this.examStudentObjs[d].studentId;O&&!this.commonService.filterArray(l,O)&&l.push(O),U&&!this.commonService.filterArray(r,U)&&r.push(U)}if(l)for(let d=0;d<l.length;d++)this.showListStudentOfClassroom(l[d],r);else this.objs.length&&this.objs[0].id&&this.showListStudentOfClassroom(this.objs[0].id)}addStudentToFormArr(r,l,d){this.formArray.controls.forEach(O=>{if(O instanceof i.cw&&O.controls.classroomId.value==l){let U=O.controls.countSelect.value;r.forEach(F=>{let V=this.commonService.filterArray(d,F.id),q=this.fb.group({id:new i.NI(F.id),name:new i.NI(F.fullName),choose:new i.NI(!!V)});V&&(U++,O.controls.countSelect.setValue(U)),O.controls.listStudents.push(q),U==r.length&&O.controls.selectAll.setValue(!0)}),O.controls.loadingStudents.setValue(!1)}},this.formArray.controls)}getStudentListByClass(r){return new T.y(l=>{this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(r).subscribe(d=>{1==d.success?(l.next(d.data?.studentObjs),l.complete()):(l.next([]),l.complete())}))})}showListStudentOfClassroom(r,l){this.formArray.controls.forEach(d=>{d instanceof i.cw&&d.controls.classroomId.value==r&&d.controls.listStudents instanceof i.Oe&&!d.controls.listStudents.length&&(d.controls.loadingStudents.setValue(!0),this.getStudentListByClass(r).subscribe(O=>{O.length?this.addStudentToFormArr(O,r,l??[]):d.controls.loadingStudents.setValue(!1)}))},this.formArray.controls)}showListStudentInClassroom(r,l){this.formArray.controls.forEach(O=>{O instanceof i.cw&&O.controls.classroomId.value==r&&O.controls.show.setValue(!0)}),this.showListStudentOfClassroom(r),this.sAztDialogService.open(b,{data:{form:this.form,classroomId:r,classroomName:l,permissionName:this.permissionName,formArray:this.formArray},width:"1000px",autoFocus:!1}).afterClosed().subscribe(()=>{this.formArray.controls.forEach(O=>{O.controls.show.setValue(!1)})})}ngOnInit(){super.ngOnInit();for(var r=0;r<this.objs.length;r++)this.objs[r].name=this.commonService.myTranslateInstant(this.objs[r].name)??"";this.formArray=this.form?.get(this.formArrayName),this.formArray&&this.initClassroomCheckbox()}constructor(r,l,d){super(),this.fb=r,this.sAztDialogService=l,this.studentProfileV2Service=d,this.changeCheckboxEvent=new t.vpe,this.formArrayName="",this.objs=[],this.examStudentObjs=[],this.permissionName=D.y.exam,this.listPermissionTypes=D.y,this.loadingStudentList=!1}}return u.\u0275fac=function(r){return new(r||u)(t.Y36(i.qu),t.Y36(Z.C),t.Y36(x.LU))},u.\u0275cmp=t.Xpm({type:u,selectors:[["list-student-checkbox"]],inputs:{form:"form",formArrayName:"formArrayName",objs:"objs",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-6 mt-2","formArrayName","studentIds",4,"ngFor","ngForOf"],["formArrayName","studentIds",1,"col-span-12","md:col-span-6","mt-2"],[1,"flex","cursor-pointer","items-center",2,"vertical-align","middle",3,"ngClass","click"],[1,"w-4","h-4","inline-block","mr-2"],["name","align-justify"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-2"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(r,l){1&r&&t.YNc(0,B,4,2,"div",0),2&r&&t.Q6J("ngIf",l.form)},dependencies:[a.mk,a.sg,a.O5,_.gM,i._Y,i.JL,i.sg,i.CE,z.Nh5,a.OU,o.JV,o.NK],encapsulation:2}),u})()},20254:(Q,I,n)=>{n.d(I,{Q:()=>_});var t=n(65592),i=n(78585),T=n(36937),D=n(88135),p=n(20760),e=n(65879),f=n(87384),a=n(61675);let _=(()=>{class y{doExamAction(P,o){switch(o){case p.F.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(P);case p.F.SHOW_EXAM_DETAIL:this.showExamDetailDialog(P);break;case p.F.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(P);break;case p.F.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(P){return new t.y(o=>{this.sAztDialogService.open(D.Y,{width:"750px",data:{hashId:P.examObj.hashId,examStudents:P.examObj?.examStudents??[]},restoreFocus:!1}).afterClosed().subscribe(S=>{S?(o.next({reloadData:!0}),o.complete()):(o.next(void 0),o.complete())})})}showExamDetailDialog(P){let o={obj:{...P.examObj,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0},globalLadingPage:P.globalLadingPage,curCateId:P.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.sAztDialogService.open(T.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:o,restoreFocus:!1}).afterClosed().subscribe(S=>{})}showOfflineShareDialog(P){this.sAztDialogService.open(i.h,{width:"600px",data:{examHashId:P.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new t.y(P=>{P.next(void 0),P.complete()})}constructor(P,o){this.commonService=P,this.sAztDialogService=o}}return y.\u0275fac=function(P){return new(P||y)(e.LFG(f.z),e.LFG(a.C))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},11560:(Q,I,n)=>{n.d(I,{Q:()=>G});var t=n(65592),i=n(56223),T=n(19347),D=n(90241),p=n(5961),e=n(65879),f=n(71284),a=n(96814),_=n(775),y=n(79638),w=n(11964);function P(v,N){1&v&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&v&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function o(v,N){1&v&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&v&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function J(v,N){if(1&v&&(e.TgZ(0,"div",12),e.YNc(1,P,3,3,"span",13),e.YNc(2,o,3,3,"span",13),e.qZA()),2&v){const C=e.oxw();e.xp6(1),e.Q6J("ngIf",C.form.controls.folderName.errors.maxLength),e.xp6(1),e.Q6J("ngIf",C.form.controls.folderName.errors.noWhiteSpace)}}function S(v,N){1&v&&(e.O4$(),e.TgZ(0,"svg",14)(1,"g",15)(2,"g",16)(3,"circle",17),e._UZ(4,"animate",18),e.qZA(),e.TgZ(5,"circle",19),e._UZ(6,"animate",20),e.qZA(),e.TgZ(7,"circle",21),e._UZ(8,"animate",22),e.qZA(),e.TgZ(9,"circle",23),e._UZ(10,"animate",24),e.qZA(),e.TgZ(11,"circle",25),e._UZ(12,"animate",26),e.qZA(),e.TgZ(13,"circle",27),e._UZ(14,"animate",28),e.qZA(),e.TgZ(15,"circle",29),e._UZ(16,"animate",30),e.qZA(),e.TgZ(17,"circle",31),e._UZ(18,"animate",32),e.qZA()()()())}let k=(()=>{class v extends D.e{confirmAction(){var C=this.commonService.getFormObj(this.form);this.initStatusObj(),this.form.valid&&1==this.data.type&&this.subscriptions.add(this.examCategoryService.apiExamCategorySaveObjPost({name:C.folderName,parentId:this.data.categoryId??0}).subscribe(Z=>{1==Z.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_create_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(Z.message??"",!0))}))}btnCloseDialog(C){this.dialogRef.close(C||!1)}ngOnInit(){this.form=this.fb.group({folderName:new i.p4("",[i.kI.required,i.kI.maxLength(255),p._.noWhiteSpace])}),super.ngOnInit()}constructor(C,b,Z,x){super(x,Z),this.fb=C,this.examCategoryService=b,this.dialogRef=Z,this.data=x,this.form=new i.nJ({})}}return v.\u0275fac=function(C){return new(C||v)(e.Y36(i.QS),e.Y36(f.F1),e.Y36(T.so,8),e.Y36(T.WI))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-create-folder"]],features:[e.qOj],decls:19,vars:16,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-2"],["type","text","formControlName","folderName",1,"form-control",3,"placeholder","enterKey"],["class","text-danger text-xs fade mt-2",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-folder-dialog-o4xZcHZdWw",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-folder-dialog-mbrsr9XCgZ",1,"btn","w-24","btn-primary",3,"disabled","click"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg","class","w-4 h-4 ml-2",4,"ngIf"],[1,"text-danger","text-xs","fade","mt-2"],[4,"ngIf"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","ml-2"],["fill","none","fill-rule","evenodd"],["transform","translate(2 1)","stroke","white","stroke-width","1.5"],["cx","42.601","cy","11.462","r","5","fill-opacity","1","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","1;0;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","49.063","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;1;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","42.601","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;1;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","49.125","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;1;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;1;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","4.938","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;1;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","11.462","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;1;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","5","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;0;1","calcMode","linear","repeatCount","indefinite"]],template:function(C,b){1&C&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",5)(8,"input",6),e.NdJ("enterKey",function(){return b.confirmAction()}),e.ALo(9,"mytranslate"),e.qZA(),e.YNc(10,J,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",8)(12,"button",9),e.NdJ("click",function(){return b.btnCloseDialog(!1)}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return b.confirmAction()}),e.YNc(16,S,19,0,"svg",11),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()()),2&C&&(e.xp6(1),e.Q6J("formGroup",b.form),e.xp6(4),e.hij(" ",e.lcZ(6,8,"lang_cms_utils_create_folder")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(9,10,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",b.form.controls.folderName.errors&&b.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(14,12,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",b.statusObj.loading||b.form.invalid),e.xp6(1),e.Q6J("ngIf",b.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(18,14,"lang_auto_luu")," "))},dependencies:[a.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,_.M,y.Y,w.JV],encapsulation:2}),v})();function A(v,N){1&v&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&v&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function M(v,N){1&v&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&v&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function L(v,N){if(1&v&&(e.TgZ(0,"div",12),e.YNc(1,A,3,3,"div",11),e.YNc(2,M,3,3,"div",11),e.qZA()),2&v){const C=e.oxw();e.xp6(1),e.Q6J("ngIf",C.form.controls.folderName.errors.maxlength),e.xp6(1),e.Q6J("ngIf",C.form.controls.folderName.errors.noWhiteSpace)}}function W(v,N){1&v&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",13)(2,"g",14)(3,"g",15),e._UZ(4,"circle",16),e.TgZ(5,"path",17),e._UZ(6,"animateTransform",18),e.qZA()()()()())}let Y=(()=>{class v extends D.e{confirmAction(){var C=this.commonService.getFormObj(this.form);this.initStatusObj(),this.form.valid&&1==this.data.type&&this.subscriptions.add(this.examCategoryService.apiExamCategoryUpdateObjPost({id:this.data.obj?.id,name:C.folderName,parentId:0}).subscribe(Z=>{1==Z.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_update_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(Z.message??"",!0))}))}btnCloseDialog(C){this.dialogRef.close(C)}ngOnInit(){this.data.obj&&(this.form=this.fb.group({folderName:new i.p4(this.data.obj.name,[i.kI.required,p._.noWhiteSpace])})),super.ngOnInit()}constructor(C,b,Z,x){super(x,Z),this.fb=C,this.examCategoryService=b,this.dialogRef=Z,this.data=x,this.form=new i.nJ({}),this.typeString="",this.type=0}}return v.\u0275fac=function(C){return new(C||v)(e.Y36(i.QS),e.Y36(f.F1),e.Y36(T.so,8),e.Y36(T.WI,8))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-update-folder"]],features:[e.qOj],decls:20,vars:16,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal","text-center",3,"formGroup"],["type","text","formControlName","folderName",1,"form-control","mt-2",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],[1,"text-right","mt-3"],["azt-track-service","update-folder-dialog--iPi41TKU",1,"btn","w-20","btn-secondary","mr-2",3,"click"],["azt-track-service","update-folder-dialog-84k7o8Ic_c",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"alert","alert-danger"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(C,b){1&C&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"form",5),e._UZ(9,"input",6),e.ALo(10,"mytranslate"),e.YNc(11,L,3,2,"div",7),e.qZA()(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return b.btnCloseDialog(!1)}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return b.confirmAction()}),e.YNc(17,W,7,0,"span",11),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()()),2&C&&(e.xp6(5),e.Oqu(e.lcZ(6,8,"lang_cms_utils_update_folder")),e.xp6(3),e.Q6J("formGroup",b.form),e.xp6(1),e.s9C("placeholder",e.lcZ(10,10,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",b.form.controls.folderName.errors&&b.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(15,12,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",b.statusObj.loading||b.form.invalid),e.xp6(1),e.Q6J("ngIf",b.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(19,14,"lang_cms_common_confirm_btn")," "))},dependencies:[a.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,_.M,w.JV],encapsulation:2}),v})();var K=n(33086),R=n(61675);let G=(()=>{class v{doExamCategoryAction(C,b){switch(b){case K.o.ADD_FOLDER:return this.showAddFolderDialog(C);case K.o.EDIT_FOLDER:return this.showEditFolderDialog(C)}}showAddFolderDialog(C){return new t.y(b=>{this.sAztDialogService.open(k,{width:"600px",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{categoryId:C.categoryId,type:1,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(z=>{z?(b.next({reloadData:!0}),b.complete()):(b.next({reloadData:!1}),b.complete())})})}showEditFolderDialog(C){return new t.y(b=>{C.examCategoryObj?this.sAztDialogService.open(Y,{data:{obj:C.examCategoryObj,categoryId:0,type:1,isShow:!0},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(z=>{z?(b.next({reloadData:!0}),b.complete()):(b.next({reloadData:!1}),b.complete())}):(b.next({reloadData:!1}),b.complete())})}constructor(C){this.sAztDialogService=C}}return v.\u0275fac=function(C){return new(C||v)(e.LFG(R.C))},v.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},12123:(Q,I,n)=>{n.d(I,{V:()=>p});var t=n(31810),i=n(65879),T=n(87384),D=n(67854);let p=(()=>{class e{redirectByAction(a,_){switch(_){case t.T.OFFLINE_CONFIG:this.goToOfflineConfigPage(a);break;case t.T.CONFIG_EXAM:this.goToConfigExamPage(a);break;case t.T.EDIT_EXAM:this.goToEditExamPage(a);break;case t.T.POWER_POINT:this.goToPowerPointPage(a);break;case t.T.STATISTIC:this.goToStatisticPage(a);break;case t.T.TESTED_LIST:this.goToTestedListPage(a)}}goToOfflineConfigPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+a.categoryId+"/"+a.examObj.hashId,"?backto="+encodeURIComponent(_))}goToConfigExamPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.homeworkExamService.isOfflineExam(a.examObj)?this.commonService.myNavigationWithQueryString("/admin/testbank/config-exam-offline/"+a.categoryId+"/"+a.examObj.hashId,"?backto="+encodeURIComponent(_)):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+a.categoryId+"/"+a.examObj.hashId,"?backto="+encodeURIComponent(_))}goToEditExamPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString((a.examObj.orcLogId??0)<0?"/admin/testbank/add-code-exam-offline/"+a.categoryId+"/"+a.examObj.hashId:"/admin/testbank/update-exam/"+a.categoryId+"/"+a.examObj.id,"?backto="+encodeURIComponent(_))}goToPowerPointPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/powerpoint/"+a.categoryId+"/"+a.examObj.id,"?backto="+encodeURIComponent(_))}goToStatisticPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${a.examObj.categoryId?a.examObj.categoryId:0}/${a.examObj.id}`,"?backto="+encodeURIComponent(_))}goToTestedListPage(a){let _=`/admin/testbank/document-management/0/${a.categoryId}/${a.currentPage}`+(a.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:a.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+a.categoryId+"/"+a.examObj.id+"/0","?backto="+encodeURIComponent(_))}constructor(a,_){this.commonService=a,this.homeworkExamService=_}}return e.\u0275fac=function(a){return new(a||e)(i.LFG(T.z),i.LFG(D.v))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},27722:(Q,I,n)=>{n.d(I,{d:()=>D});var t=n(25690),i=n(65879),T=n(87384);let D=(()=>{class p{sortExamByColumn(f,a,_){return a==t.H.BY_NAME?this.sortExamByName(f,_):a==t.H.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(f,_):a==t.H.BY_UPDATED_DATE?this.sortExamByDateUpdated(f,_):a==t.H.BY_ATTENDED?this.sortExamByAttended(f,_):this.sortExamByName(f,_)}sortExamByName(f,a){var _=[...f.rootCategoryObjs??[]],y=[...f.rootDocumentObjs??[]];return 1==a?{categoryObjs:this._sortCateByName(_),documentObjs:this._sortDocumentByName(y)}:{categoryObjs:this._sortCateByName(_).reverse(),documentObjs:this._sortDocumentByName(y).reverse()}}sortExamByPublishStatus(f,a){var _=[...f.rootDocumentObjs??[]];return 1==a?{categoryObjs:f.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(_,_?.length)}:{categoryObjs:f.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(_,_?.length).reverse()}}sortExamByDateUpdated(f,a){var _=this.commonService.castObj(f.rootCategoryObjs),y=this.commonService.castObj(f.rootDocumentObjs);return 1==a?{categoryObjs:this._sortCateByDateUpdateExam(_??[]),documentObjs:this._sortDocumentByUpdateTime(y??[])}:{categoryObjs:this._sortCateByDateUpdateExam(_??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(y??[]).reverse()}}sortExamByAttended(f,a){var _=this.commonService.castObj(f.rootDocumentObjs);return 1==a?{categoryObjs:f.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(_??[])}:{categoryObjs:f.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(_??[]).reverse()}}_sortCateByName(f){return f?.sort((a,_)=>(a.name?.trim()??"").localeCompare(_.name?.trim()??""))??[]}_sortDocumentByName(f){return f?.sort((a,_)=>(a.name?.trim()??"").localeCompare(_.name?.trim()??""))??[]}_sortDocumentByPublish(f,a){let _=[],y=[];for(let w=0;w<(a??0);w++)0==f?.[w].isPublished&&_.push(f[w]),1==f?.[w].isPublished&&y.push(f[w]);return _.concat(y)}_sortCateByDateUpdateExam(f){return f.sort((a,_)=>Number(new Date(a.updatedAt??""))-Number(new Date(_.updatedAt??""))),f}_sortDocumentByUpdateTime(f){return f?.sort((a,_)=>Number(new Date(a.updatedAt??""))-Number(new Date(_.updatedAt??"")))}_sortDocumentByAttended(f){return f?.sort((a,_)=>Number(a.attended)-Number(_.attended))}constructor(f){this.commonService=f}}return p.\u0275fac=function(f){return new(f||p)(i.LFG(T.z))},p.\u0275prov=i.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},20760:(Q,I,n)=>{n.d(I,{F:()=>t});var t=function(i){return i[i.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",i[i.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",i[i.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",i[i.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",i}(t||{})},33086:(Q,I,n)=>{n.d(I,{o:()=>t});var t=function(i){return i[i.ADD_FOLDER=0]="ADD_FOLDER",i[i.EDIT_FOLDER=1]="EDIT_FOLDER",i}(t||{})},31810:(Q,I,n)=>{n.d(I,{T:()=>t});var t=function(i){return i[i.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",i[i.CONFIG_EXAM=1]="CONFIG_EXAM",i[i.EDIT_EXAM=2]="EDIT_EXAM",i[i.POWER_POINT=3]="POWER_POINT",i[i.STATISTIC=4]="STATISTIC",i[i.TESTED_LIST=5]="TESTED_LIST",i}(t||{})},25690:(Q,I,n)=>{n.d(I,{H:()=>t});var t=function(i){return i[i.BY_NAME=0]="BY_NAME",i[i.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",i[i.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",i[i.BY_ATTENDED=3]="BY_ATTENDED",i}(t||{})}}]);