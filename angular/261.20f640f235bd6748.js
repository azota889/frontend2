"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[261],{92910:(A,m,r)=>{r.d(m,{d:()=>f});var s=r(591),h=r(5e3);let f=(()=>{class u{constructor(){this.hasDataChanged=new s.X(!1),this.currentMessage=this.hasDataChanged.asObservable()}changeStatus(p){this.hasDataChanged.next(p)}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},41261:(A,m,r)=>{r.d(m,{u:()=>Q});var s=r(93075),h=r(48966),f=r(55330),u=r(41303),e=r(5e3),p=r(50690),Z=r(41281),E=r(92910),C=r(69808),P=r(25245),D=r(49692),I=r(85736),g=r(1033);function M(n,_){if(1&n&&(e.TgZ(0,"p",36)(1,"span",37),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_teacher_group_add_teacher_success")),e.xp6(2),e.AsE(": ",t.errorData.saveSuccess,"\xa0",e.lcZ(5,5,"lang_teacher_group_add_teacher_teacher"),"")}}function j(n,_){if(1&n&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_invalid_phones")),e.xp6(2),e.hij(": ",null==t.errorData.invalidPhones?null:t.errorData.invalidPhones.join(", "),"")}}function S(n,_){if(1&n&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_invalid_emails")),e.xp6(2),e.hij(": ",null==t.errorData.invalidEmails?null:t.errorData.invalidEmails.join(", "),"")}}function U(n,_){if(1&n&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_duplicate_phones")),e.xp6(2),e.hij(": ",null==t.errorData.duplicatePhones?null:t.errorData.duplicatePhones.join(", "),"")}}function G(n,_){if(1&n&&(e.TgZ(0,"p")(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_duplicate_emails")),e.xp6(2),e.hij(": ",null==t.errorData.duplicateEmails?null:t.errorData.duplicateEmails.join(", "),"")}}function y(n,_){if(1&n&&(e.TgZ(0,"div",34),e.YNc(1,M,6,7,"p",35),e.YNc(2,j,5,4,"p",35),e.YNc(3,S,5,4,"p",35),e.YNc(4,U,5,4,"p",35),e.YNc(5,G,5,4,"p",33),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.errorData?null:t.errorData.saveSuccess),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.invalidPhones?null:t.errorData.invalidPhones.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.invalidEmails?null:t.errorData.invalidEmails.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.duplicatePhones?null:t.errorData.duplicatePhones.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.duplicateEmails?null:t.errorData.duplicateEmails.length)}}function L(n,_){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_co_file_duoc_chon")))}function N(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",41),e._UZ(3,"img",42),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"div",43),e._uU(6),e.qZA(),e.TgZ(7,"div",44)(8,"button",45),e.NdJ("click",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.removeFile(o))}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,3,"azota_assets/images/excel.png"),e.LSH),e.xp6(3),e.Oqu(t.file?t.file.name:""),e.xp6(3),e.Oqu(e.lcZ(10,5,"lang_auto_xoa"))}}function q(n,_){1&n&&(e.TgZ(0,"span",46),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto__click_de_chon_file_excel")))}function k(n,_){1&n&&(e.TgZ(0,"div",47)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_cms_utils_folder_name_validate_space"),"!"))}function w(n,_){if(1&n&&(e.TgZ(0,"div",47),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.errValidateEmailOrPhone," ")}}function J(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"a",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showImportExcel())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,t.isShowImportExcel?"lang_teacher_group_add_teacher_back":"lang_teacher_group_add_teacher_from_excel_file"))}}function z(n,_){1&n&&(e.TgZ(0,"span"),e._UZ(1,"span",49),e._uU(2,"\xa0"),e.qZA())}function W(n,_){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_save")))}function Y(n,_){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_update")))}let Q=(()=>{class n extends f.Q{constructor(t,a,o,i,l,c){super(a),this.fb=t,this.commonService=a,this.teacherGroupService=o,this.dialogRef=i,this.data=l,this.aztTeacherGroupService=c,this.form=new s.nJ({}),this.isShowImportExcel=!1,this.errValidateEmailOrPhone="",this.errorData=void 0,this.obj=l.obj,this.file=null}checkValidateEmailOrPhone(){if(this.errValidateEmailOrPhone="",this.form.controls.phone.value.length>0){if(isNaN(Number(this.form.controls.phone.value))){if(!this.validateEmail(this.form.controls.phone.value))return this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_dinh_dang_email").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0}else if(this.validatePhone())return this.commonService.getTranslate("lang_auto_so_dien_thoai_phai_la_10_so").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0}else if(this.getErrorType("phone","required"))return this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_sdt_hoac_email").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0;return!1}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}validatePhone(){return this.form.controls.phone.value.length<10||this.form.controls.phone.value.length>10}getErrorType(t,a){var o;return!(!this.form.controls[t]||!this.form.controls[t].errors||null===(o=this.form.controls[t].errors)||void 0===o||!o[a])}onFileSelected(t){let i=t.target.files;this.file=i?i[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)||(this.file=null,this.commonService.snackError("lang_auto_vui_long_chon_dung_tep_tin_excel"))}removeFile(t){t.stopPropagation(),this.file=null}showImportExcel(){this.isShowImportExcel=!this.isShowImportExcel}getDownloadFileName(t){return this.commonService.createFileNameExportFile([t])+".xlsx"}confirmAction(){var t;let a=this.commonService.getFormObj(this.form);if(this.initStatusObj(),this.isShowImportExcel)this.errorData=void 0,this.subscriptions.add(this.teacherGroupService.apiTeacherGroupAddTeacherIntoTeamWithExcelPostForm(this.file).subscribe(o=>{var i,l,c,d,v,x,b,O,T;1==o.success?(null===(l=null===(i=o.data)||void 0===i?void 0:i.invalidEmails)||void 0===l?void 0:l.length)||(null===(d=null===(c=o.data)||void 0===c?void 0:c.invalidPhones)||void 0===d?void 0:d.length)||(null===(x=null===(v=o.data)||void 0===v?void 0:v.duplicateEmails)||void 0===x?void 0:x.length)||(null===(O=null===(b=o.data)||void 0===b?void 0:b.duplicateEmails)||void 0===O?void 0:O.length)?(o.data.saveSuccess&&this.aztTeacherGroupService.changeStatus(!0),this.errorData=o.data,this.stopStatusObj()):(this.successStatusObj("lang_auto_them_giao_vien_vao_danh_ba_thanh_cong",!0),this.btnCloseDialog(0)):(this.btnCloseDialog(void 0),this.errorStatusObj(null!==(T=o.message)&&void 0!==T?T:"",!0))}));else if(this.obj)if(this.form.valid){let o={id:null===(t=this.obj)||void 0===t?void 0:t.id,phoneOrEmail:a.phone,fullname:a.fullName};this.subscriptions.add(this.teacherGroupService.apiTeacherGroupUpdateTeacherWithTeamPost(o).subscribe(i=>{var l,c,d;1==i.success?(this.btnCloseDialog(null===(c=null===(l=i.data)||void 0===l?void 0:l.obj)||void 0===c?void 0:c.id),this.successStatusObj("lang_auto_sua_thong_tin_giao_vien_thanh_cong",!0)):(this.btnCloseDialog(void 0),this.errorStatusObj(null!==(d=i.message)&&void 0!==d?d:"",!0))}))}else this.stopStatusObj();else this.form.valid?this.subscriptions.add(this.teacherGroupService.apiTeacherGroupAddTeacherWithTeamPost({phoneOrEmail:a.phone,fullname:a.fullName}).subscribe(i=>{var l,c,d;1===i.success?(this.btnCloseDialog(null===(c=null===(l=i.data)||void 0===l?void 0:l.obj)||void 0===c?void 0:c.id),this.successStatusObj("lang_auto_them_giao_vien_thanh_cong",!0)):this.errorStatusObj(null!==(d=i.message)&&void 0!==d?d:"",!0)})):this.stopStatusObj()}btnCloseDialog(t){this.dialogRef.close(t)}ngOnInit(){var t,a,o,i,l,c;this.form=this.fb.group({phone:["",[s.kI.required]],fullName:new s.p4("",[s.kI.required,u._.noWhiteSpace]),File:new s.p4("")}),this.obj&&(this.form.controls.phone.setValue((null!==(o=null===(a=null===(t=this.obj)||void 0===t?void 0:t.phone)||void 0===a?void 0:a.length)&&void 0!==o?o:0)>0?null===(i=this.obj)||void 0===i?void 0:i.phone:null===(l=this.obj)||void 0===l?void 0:l.email),this.form.controls.fullName.setValue(null===(c=this.obj)||void 0===c?void 0:c.fullName)),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.QS),e.Y36(p.v),e.Y36(Z.Kq),e.Y36(h.so,8),e.Y36(h.WI,8),e.Y36(E.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-teacher-to-group"]],features:[e.qOj],decls:61,vars:41,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[1,"p-3"],[1,"azt-form-group",3,"hidden"],["class","col-span-12 box mb-3 p-3",4,"ngIf"],[1,"col-span-12","text-center","v-dragndrop","dropzone","dz-started","cur-po",2,"min-height","auto",3,"click"],[1,"px-4","py-3","rounded"],[1,"file",2,"cursor","pointer"],["id","select-upload-file",1,"self-center","select","dz-clickable"],["type","file","formControlName","File","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"form-control","file-input",3,"change"],["fileSelect",""],[4,"ngIf","ngIfElse"],["exitsFile",""],["class","block mt-2 text-dark-green",4,"ngIf"],[1,"text-center","file","mt-2"],["target","_self",1,"dz-clickable",3,"href","download"],[3,"hidden"],[1,"azt-form-group"],[1,"col-span-12"],["for","full-name",1,"form-label"],[1,"input-group","mb-3"],["type","text","id","full-name","formControlName","fullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-1 mb-2 font-medium",4,"ngIf"],["for","number-phone",1,"form-label"],["type","text","formControlName","phone",1,"form-control",3,"placeholder"],[1,"p-3","flex","items-center"],["class","btn-text-primary font-medium",3,"click",4,"ngIf"],[1,"azt-block-button","ml-auto"],["type","button",1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"btn","w-32","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"col-span-12","box","mb-3","p-3"],["class","mb-1",4,"ngIf"],[1,"mb-1"],[1,"text-success"],[1,"text-danger"],[1,"flex","items-center","justify-center","m-3"],[1,"fileinfo","p-3",3,"click"],[1,"title"],["alt","excel icon",1,"img-fluid",3,"src"],[1,"file-name"],[1,"action"],[1,"btn-remove",3,"click"],[1,"block","mt-2","text-dark-green"],[1,"text-danger","text-xs","mt-1","mb-2","font-medium"],[1,"btn-text-primary","font-medium",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"azt-mat-dialog-content")(9,"div",5)(10,"div",6),e.YNc(11,y,6,5,"div",7),e.TgZ(12,"div",8),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(19);return e.KtG(l.click())}),e.TgZ(13,"div",9)(14,"div",10)(15,"a",11)(16,"mat-icon"),e._uU(17,"cloud_upload"),e.qZA()(),e.TgZ(18,"input",12,13),e.NdJ("change",function(l){return a.onFileSelected(l)}),e.qZA(),e.YNc(20,L,3,3,"span",14),e.YNc(21,N,11,7,"ng-template",null,15,e.W1O),e.YNc(23,q,3,3,"span",16),e.qZA()()(),e.TgZ(24,"div",17)(25,"a",18),e.ALo(26,"convertRawLinkOfGitHubWithLocale"),e.TgZ(27,"span"),e._uU(28),e.ALo(29,"mytranslate"),e.qZA(),e.TgZ(30,"mat-icon"),e._uU(31,"save_alt"),e.qZA()()()(),e.TgZ(32,"div",19)(33,"div",20)(34,"div",21)(35,"label",22),e._uU(36),e.ALo(37,"mytranslate"),e.qZA(),e.TgZ(38,"div",23),e._UZ(39,"input",24),e.ALo(40,"mytranslate"),e.qZA(),e.YNc(41,k,4,3,"div",25),e.qZA()(),e.TgZ(42,"div",20)(43,"div",21)(44,"label",26),e._uU(45),e.ALo(46,"mytranslate"),e.qZA(),e.TgZ(47,"div",23),e._UZ(48,"input",27),e.ALo(49,"mytranslate"),e.qZA(),e.YNc(50,w,2,1,"div",25),e.qZA()()()()()(),e.TgZ(51,"div",28),e.YNc(52,J,4,3,"a",29),e.TgZ(53,"div",30)(54,"button",31),e.NdJ("click",function(){return a.btnCloseDialog(void 0)}),e._uU(55),e.ALo(56,"mytranslate"),e.qZA(),e.TgZ(57,"button",32),e.NdJ("click",function(){return a.confirmAction()}),e.YNc(58,z,3,0,"span",33),e.YNc(59,W,3,3,"span",33),e.YNc(60,Y,3,3,"span",33),e.qZA()()()()()}if(2&t){const o=e.MAs(22);e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(4),e.hij(" ",a.obj?e.lcZ(7,25,"lang_auto_sua_giao_vien"):e.lcZ(6,23,"lang_auto_them_giao_vien")," "),e.xp6(5),e.Q6J("hidden",!a.isShowImportExcel),e.xp6(1),e.Q6J("ngIf",a.errorData),e.xp6(9),e.Q6J("ngIf",!a.file)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",!a.file),e.xp6(2),e.s9C("download",a.getDownloadFileName("excel_add_teacher_exp_v5")),e.Q6J("href",e.lcZ(26,27,"blob/master/azota_assets/medias_[LANG]/excel_add_teacher_exp_v5.xlsx?raw=true"),e.LSH),e.xp6(3),e.hij("",e.lcZ(29,29,"lang_auto_tai_file_bieu_mau")," "),e.xp6(4),e.Q6J("hidden",a.isShowImportExcel),e.xp6(4),e.Oqu(e.lcZ(37,31,"lang_auto_ho_va_ten")),e.xp6(3),e.s9C("placeholder",e.lcZ(40,33,"lang_auto_ho_va_ten")),e.xp6(2),e.Q6J("ngIf",a.form.controls.fullName.errors&&a.form.controls.fullName.dirty),e.xp6(4),e.Oqu(e.lcZ(46,35,"lang_auto_nhap_sdt_hoac_email")),e.xp6(3),e.s9C("placeholder",e.lcZ(49,37,"lang_auto_nhap_sdt_hoac_email")),e.xp6(2),e.Q6J("ngIf",a.form.controls.phone.dirty&&a.checkValidateEmailOrPhone()),e.xp6(2),e.Q6J("ngIf",!a.obj),e.xp6(3),e.hij(" ",e.lcZ(56,39,"lang_buttom_cancel")," "),e.xp6(2),e.Q6J("disabled",a.statusObj.loading||(a.getErrorType("fullName","noWhiteSpace")||a.checkValidateEmailOrPhone())&&!a.isShowImportExcel||1==a.isShowImportExcel&&null==a.file),e.xp6(1),e.Q6J("ngIf",a.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!a.obj),e.xp6(1),e.Q6J("ngIf",a.obj)}},dependencies:[C.O5,P.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,D.M,I.O,g.bT,g.Jc,g.Rh],styles:[".file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;vertical-align:super}.v-dragndrop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:rgba(27,171,161,.05);border:1px dashed #1baba1}.v-dragndrop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.file-input[_ngcontent-%COMP%]{display:none}.dz-clickable[_ngcontent-%COMP%]{cursor:pointer;color:#007bff}.font-size-1[_ngcontent-%COMP%]{font-size:15px}.fileinfo[_ngcontent-%COMP%]{width:200px;border:1px dashed #1baba1;background:aliceblue}.fileinfo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.fileinfo[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.fileinfo[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#f71414;color:#fff;padding:2px 20px;border:none;border-radius:5px;margin-top:5px}"]}),n})()}}]);