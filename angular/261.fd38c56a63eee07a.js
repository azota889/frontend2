"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[261],{92910:(Z,h,r)=>{r.d(h,{d:()=>f});var _=r(61135),p=r(39300),m=r(94650);let f=(()=>{class e{constructor(){this.hasDataChanged=new _.X(!1)}getCurrentMessage(){return this.hasDataChanged=new _.X(!1),this.hasDataChanged.asObservable().pipe((0,p.h)(u=>!1!==u))}changeStatus(u){this.hasDataChanged.next(u)}}return e.\u0275fac=function(u){return new(u||e)},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},41261:(Z,h,r)=>{r.d(h,{u:()=>K});var _=r(24006),p=r(35559),m=r(55330),f=r(41303),e=r(94650),g=r(50690),u=r(85794),C=r(92910),E=r(36895),P=r(97392),D=r(49692),I=r(85736),v=r(1033);function M(a,c){if(1&a&&(e.TgZ(0,"p",36)(1,"span",37),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_teacher_group_add_teacher_success")),e.xp6(2),e.AsE(": ",t.errorData.saveSuccess,"\xa0",e.lcZ(5,5,"lang_teacher_group_add_teacher_teacher"),"")}}function y(a,c){if(1&a&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_invalid_phones")),e.xp6(2),e.hij(": ",null==t.errorData.invalidPhones?null:t.errorData.invalidPhones.join(", "),"")}}function j(a,c){if(1&a&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_invalid_emails")),e.xp6(2),e.hij(": ",null==t.errorData.invalidEmails?null:t.errorData.invalidEmails.join(", "),"")}}function U(a,c){if(1&a&&(e.TgZ(0,"p",36)(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_duplicate_phones")),e.xp6(2),e.hij(": ",null==t.errorData.duplicatePhones?null:t.errorData.duplicatePhones.join(", "),"")}}function G(a,c){if(1&a&&(e.TgZ(0,"p")(1,"span",38),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_teacher_group_add_teacher_duplicate_emails")),e.xp6(2),e.hij(": ",null==t.errorData.duplicateEmails?null:t.errorData.duplicateEmails.join(", "),"")}}function L(a,c){if(1&a&&(e.TgZ(0,"div",34),e.YNc(1,M,6,7,"p",35),e.YNc(2,y,5,4,"p",35),e.YNc(3,j,5,4,"p",35),e.YNc(4,U,5,4,"p",35),e.YNc(5,G,5,4,"p",33),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.errorData?null:t.errorData.saveSuccess),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.invalidPhones?null:t.errorData.invalidPhones.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.invalidEmails?null:t.errorData.invalidEmails.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.duplicatePhones?null:t.errorData.duplicatePhones.length),e.xp6(1),e.Q6J("ngIf",null==t.errorData||null==t.errorData.duplicateEmails?null:t.errorData.duplicateEmails.length)}}function S(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_co_file_duoc_chon")))}function w(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40),e.NdJ("click",function(o){return o.stopPropagation()}),e.TgZ(2,"div",41),e._UZ(3,"img",42),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"div",43),e._uU(6),e.qZA(),e.TgZ(7,"div",44)(8,"button",45),e.NdJ("click",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.removeFile(o))}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,3,"azota_assets/images/excel.png"),e.LSH),e.xp6(3),e.Oqu(t.file?t.file.name:""),e.xp6(3),e.Oqu(e.lcZ(10,5,"lang_auto_xoa"))}}function k(a,c){1&a&&(e.TgZ(0,"span",46),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto__click_de_chon_file_excel")))}function q(a,c){if(1&a&&(e.TgZ(0,"div",47)(1,"a",48),e.ALo(2,"convertRawLinkOfGitHubWithLocale"),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"mat-icon"),e._uU(7,"save_alt"),e.qZA()()()),2&a){const t=e.oxw();e.xp6(1),e.s9C("download",t.getDownloadFileName("excel_add_teacher_exp_v5")),e.Q6J("href",e.lcZ(2,3,"blob/master/azota_assets/medias_[LANG]/excel_add_teacher_exp_v5.xlsx?raw=true"),e.LSH),e.xp6(3),e.hij("",e.lcZ(5,5,"lang_auto_tai_file_bieu_mau")," ")}}function N(a,c){1&a&&(e.TgZ(0,"div",49)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_cms_utils_folder_name_validate_space"),"!"))}function J(a,c){if(1&a&&(e.TgZ(0,"div",49),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",t.errValidateEmailOrPhone," ")}}function z(a,c){if(1&a){const t=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showImportExcel())}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,t.isShowImportExcel?"lang_teacher_group_add_teacher_back":"lang_teacher_group_add_teacher_from_excel_file"))}}function Y(a,c){1&a&&(e.TgZ(0,"span"),e._UZ(1,"span",51),e._uU(2,"\xa0"),e.qZA())}function Q(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_save")))}function W(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_buttom_update")))}const F=function(a){return{"justify-start-webview":a}};let K=(()=>{class a extends m.Q{checkValidateEmailOrPhone(){if(this.errValidateEmailOrPhone="",this.form.controls.phone.value.length>0){if(isNaN(Number(this.form.controls.phone.value))){if(!this.validateEmail(this.form.controls.phone.value))return this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_dinh_dang_email").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0}else if(this.validatePhone())return this.commonService.getTranslate("lang_auto_so_dien_thoai_phai_la_10_so").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0}else if(this.getErrorType("phone","required"))return this.commonService.getTranslate("lang_auto_vui_long_nhap_dung_sdt_hoac_email").subscribe(t=>{this.errValidateEmailOrPhone=t}),!0;return!1}validateEmail(t){return t.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}validatePhone(){return this.form.controls.phone.value.length<10||this.form.controls.phone.value.length>10}getErrorType(t,n){var o;return!(!this.form.controls[t]||!this.form.controls[t].errors||null===(o=this.form.controls[t].errors)||void 0===o||!o[n])}onFileSelected(t){let i=t.target.files;this.file=i?i[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)||(this.file=null,this.commonService.snackError("lang_auto_vui_long_chon_dung_tep_tin_excel"))}removeFile(t){t.stopPropagation(),this.file=null}showImportExcel(){this.isShowImportExcel=!this.isShowImportExcel}getDownloadFileName(t){return this.commonService.createFileNameExportFile([t])+".xlsx"}confirmAction(){var t;let n=this.commonService.getFormObj(this.form);if(this.initStatusObj(),this.isShowImportExcel)this.errorData=void 0,this.subscriptions.add(this.teacherGroupService.apiTeacherGroupAddTeacherIntoTeamWithExcelPostForm(this.file).subscribe(o=>{var i,l,s,d,x,b,O,T,A;1==o.success?null!==(l=null===(i=o.data)||void 0===i?void 0:i.invalidEmails)&&void 0!==l&&l.length||null!==(d=null===(s=o.data)||void 0===s?void 0:s.invalidPhones)&&void 0!==d&&d.length||null!==(b=null===(x=o.data)||void 0===x?void 0:x.duplicateEmails)&&void 0!==b&&b.length||null!==(T=null===(O=o.data)||void 0===O?void 0:O.duplicateEmails)&&void 0!==T&&T.length?(o.data.saveSuccess&&this.aztTeacherGroupService.changeStatus(!0),this.errorData=o.data,this.stopStatusObj()):(this.successStatusObj("lang_auto_them_giao_vien_vao_danh_ba_thanh_cong",!0),this.btnCloseDialog(0)):(this.btnCloseDialog(void 0),this.errorStatusObj(null!==(A=o.message)&&void 0!==A?A:"",!0))}));else if(this.obj)if(this.form.valid){let o={id:null===(t=this.obj)||void 0===t?void 0:t.id,phoneOrEmail:n.phone,fullname:n.fullName};this.subscriptions.add(this.teacherGroupService.apiTeacherGroupUpdateTeacherWithTeamPost(o).subscribe(i=>{var l,s,d;1==i.success?(this.btnCloseDialog(null===(s=null===(l=i.data)||void 0===l?void 0:l.obj)||void 0===s?void 0:s.id),this.successStatusObj("lang_auto_sua_thong_tin_giao_vien_thanh_cong",!0)):(this.btnCloseDialog(void 0),this.errorStatusObj(null!==(d=i.message)&&void 0!==d?d:"",!0))}))}else this.stopStatusObj();else this.form.valid?this.subscriptions.add(this.teacherGroupService.apiTeacherGroupAddTeacherWithTeamPost({phoneOrEmail:n.phone,fullname:n.fullName}).subscribe(i=>{var l,s,d;1===i.success?(this.btnCloseDialog(null===(s=null===(l=i.data)||void 0===l?void 0:l.obj)||void 0===s?void 0:s.id),this.successStatusObj("lang_auto_them_giao_vien_thanh_cong",!0)):this.errorStatusObj(null!==(d=i.message)&&void 0!==d?d:"",!0)})):this.stopStatusObj()}btnCloseDialog(t){this.dialogRef.close(t)}ngOnInit(){var t,n,o,i,l,s;this.form=this.fb.group({phone:["",[_.kI.required]],fullName:new _.p4("",[_.kI.required,f._.noWhiteSpace]),File:new _.p4("")}),this.obj&&(this.form.controls.phone.setValue((null!==(o=null===(n=null===(t=this.obj)||void 0===t?void 0:t.phone)||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0?null===(i=this.obj)||void 0===i?void 0:i.phone:null===(l=this.obj)||void 0===l?void 0:l.email),this.form.controls.fullName.setValue(null===(s=this.obj)||void 0===s?void 0:s.fullName)),super.ngOnInit()}constructor(t,n,o,i,l,s){super(n),this.fb=t,this.commonService=n,this.teacherGroupService=o,this.dialogRef=i,this.data=l,this.aztTeacherGroupService=s,this.form=new _.nJ({}),this.isShowImportExcel=!1,this.errValidateEmailOrPhone="",this.errorData=void 0,this.obj=l.obj,this.file=null}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.QS),e.Y36(g.v),e.Y36(u.Kq),e.Y36(p.hV,8),e.Y36(p.eJ,8),e.Y36(C.d))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-teacher-to-group"]],features:[e.qOj],decls:55,vars:38,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[1,"p-3"],[1,"azt-form-group",3,"hidden"],["class","col-span-12 box mb-3 p-3 overflow-y-auto","style","max-height: 200px",4,"ngIf"],["azt-track-service","add_teacher-LaywJqryElG",1,"col-span-12","text-center","v-dragndrop","dropzone","dz-started","cur-po",2,"min-height","auto",3,"click"],[1,"px-4","py-3","rounded"],[1,"file",2,"cursor","pointer"],["id","select-upload-file",1,"self-center","select","dz-clickable"],["type","file","formControlName","File","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"form-control","file-input",3,"change"],["fileSelect",""],[4,"ngIf","ngIfElse"],["exitsFile",""],["class","block mt-2 text-dark-green",4,"ngIf"],["class","text-center file mt-2",4,"ngIf"],[3,"hidden"],[1,"azt-form-group"],[1,"col-span-12"],["for","full-name",1,"form-label"],[1,"input-group","mb-3"],["type","text","id","full-name","formControlName","fullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-1 mb-2 font-medium",4,"ngIf"],["for","number-phone",1,"form-label"],["type","text","formControlName","phone",1,"form-control",3,"placeholder"],[1,"p-3","grid","grid-cols-12","gap-2","items-center"],[1,"col-span-12","md:col-span-4"],["azt-track-service","add_teacher-FtuIQNEoHHq","class","btn-text-primary font-medium",3,"click",4,"ngIf"],[1,"col-span-12","md:col-span-8","azt-block-button","flex","ml-auto","w-full","justify-end-web",3,"ngClass"],["azt-track-service","add_teacher-62L-8vj1FEs","type","button",1,"btn","btn-secondary","w-32","mr-2",3,"click"],["azt-track-service","add_teacher-yDxPDSo4A40",1,"btn","w-32","btn-primary",3,"disabled","click"],[4,"ngIf"],[1,"col-span-12","box","mb-3","p-3","overflow-y-auto",2,"max-height","200px"],["class","mb-1",4,"ngIf"],[1,"mb-1"],[1,"text-success"],[1,"text-danger"],[1,"flex","items-center","justify-center","m-3"],["azt-track-service","add_teacher-fB5ihhpYelT",1,"fileinfo","p-3",3,"click"],[1,"title"],["alt","excel icon",1,"img-fluid",3,"src"],[1,"file-name"],[1,"action"],["azt-track-service","add_teacher-5zxfYY02MU2",1,"btn-remove",3,"click"],[1,"block","mt-2","text-dark-green"],[1,"text-center","file","mt-2"],["azt-track-service","add_teacher-2XyUIOzK4XE","target","_self",1,"dz-clickable",3,"href","download"],[1,"text-danger","text-xs","mt-1","mb-2","font-medium"],["azt-track-service","add_teacher-FtuIQNEoHHq",1,"btn-text-primary","font-medium",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"azt-mat-dialog-content")(9,"div",5)(10,"div",6),e.YNc(11,L,6,5,"div",7),e.TgZ(12,"div",8),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(19);return e.KtG(l.click())}),e.TgZ(13,"div",9)(14,"div",10)(15,"a",11)(16,"mat-icon"),e._uU(17,"cloud_upload"),e.qZA()(),e.TgZ(18,"input",12,13),e.NdJ("change",function(l){return n.onFileSelected(l)}),e.qZA(),e.YNc(20,S,3,3,"span",14),e.YNc(21,w,11,7,"ng-template",null,15,e.W1O),e.YNc(23,k,3,3,"span",16),e.qZA()()(),e.YNc(24,q,8,7,"div",17),e.qZA(),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20)(28,"label",21),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.TgZ(31,"div",22),e._UZ(32,"input",23),e.ALo(33,"mytranslate"),e.qZA(),e.YNc(34,N,4,3,"div",24),e.qZA()(),e.TgZ(35,"div",19)(36,"div",20)(37,"label",25),e._uU(38),e.ALo(39,"mytranslate"),e.qZA(),e.TgZ(40,"div",22),e._UZ(41,"input",26),e.ALo(42,"mytranslate"),e.qZA(),e.YNc(43,J,2,1,"div",24),e.qZA()()()()()(),e.TgZ(44,"div",27)(45,"div",28),e.YNc(46,z,4,3,"a",29),e.qZA(),e.TgZ(47,"div",30)(48,"button",31),e.NdJ("click",function(){return n.btnCloseDialog(void 0)}),e._uU(49),e.ALo(50,"mytranslate"),e.qZA(),e.TgZ(51,"button",32),e.NdJ("click",function(){return n.confirmAction()}),e.YNc(52,Y,3,0,"span",33),e.YNc(53,Q,3,3,"span",33),e.YNc(54,W,3,3,"span",33),e.qZA()()()()()}if(2&t){const o=e.MAs(22);e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(4),e.hij(" ",n.obj?e.lcZ(7,24,"lang_auto_sua_giao_vien"):e.lcZ(6,22,"lang_auto_them_giao_vien")," "),e.xp6(5),e.Q6J("hidden",!n.isShowImportExcel),e.xp6(1),e.Q6J("ngIf",n.errorData),e.xp6(9),e.Q6J("ngIf",!n.file)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",!n.file),e.xp6(1),e.Q6J("ngIf",!n.isMobileWebView),e.xp6(1),e.Q6J("hidden",n.isShowImportExcel),e.xp6(4),e.Oqu(e.lcZ(30,26,"lang_auto_ho_va_ten")),e.xp6(3),e.s9C("placeholder",e.lcZ(33,28,"lang_auto_ho_va_ten")),e.xp6(2),e.Q6J("ngIf",n.form.controls.fullName.errors&&n.form.controls.fullName.dirty),e.xp6(4),e.Oqu(e.lcZ(39,30,"lang_auto_nhap_sdt_hoac_email")),e.xp6(3),e.s9C("placeholder",e.lcZ(42,32,"lang_auto_nhap_sdt_hoac_email")),e.xp6(2),e.Q6J("ngIf",n.form.controls.phone.dirty&&n.checkValidateEmailOrPhone()),e.xp6(3),e.Q6J("ngIf",!n.obj),e.xp6(1),e.Q6J("ngClass",e.VKq(36,F,!n.obj&&n.isMobileWebView)),e.xp6(2),e.hij(" ",e.lcZ(50,34,"lang_buttom_cancel")," "),e.xp6(2),e.Q6J("disabled",n.statusObj.loading||(n.getErrorType("fullName","noWhiteSpace")||n.checkValidateEmailOrPhone())&&!n.isShowImportExcel||1==n.isShowImportExcel&&null==n.file),e.xp6(1),e.Q6J("ngIf",n.statusObj.loading),e.xp6(1),e.Q6J("ngIf",!n.obj),e.xp6(1),e.Q6J("ngIf",n.obj)}},dependencies:[E.mk,E.O5,P.Hw,_._Y,_.Fj,_.JJ,_.JL,_.sg,_.u,D.M,I.O,v.bT,v.Jc,v.Rh],styles:[".file[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;vertical-align:super}.v-dragndrop[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:rgba(27,171,161,.05);border:1px dashed #1baba1}.v-dragndrop[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:500}.file-input[_ngcontent-%COMP%]{display:none}.dz-clickable[_ngcontent-%COMP%]{cursor:pointer;color:#007bff}.font-size-1[_ngcontent-%COMP%]{font-size:15px}.fileinfo[_ngcontent-%COMP%]{width:200px;border:1px dashed #1baba1;background:aliceblue}.fileinfo[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.fileinfo[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.fileinfo[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:#f71414;color:#fff;padding:2px 20px;border:none;border-radius:5px;margin-top:5px}.justify-end-web[_ngcontent-%COMP%]{justify-content:end}.justify-start-webview[_ngcontent-%COMP%]{justify-content:start!important}"]}),a})()}}]);