"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[615],{86294:(C,S,i)=>{i.d(S,{P:()=>I});var e=i(37398),t=i(39621),s=i(65879),g=i(32839),a=i(87384),d=i(69862),c=i(96814),m=i(75203);function L(f,v){if(1&f){const u=s.EpF();s.ynx(0),s.TgZ(1,"a",2),s.NdJ("click",function(){s.CHM(u);const l=s.oxw();return s.KtG(l.shareFileToFlutter())}),s.TgZ(2,"span"),s._uU(3),s.ALo(4,"mytranslate"),s.qZA(),s.Hsn(5),s.qZA(),s.BQk()}if(2&f){const u=s.oxw();s.xp6(1),s.Akn(u.style),s.Tol(u.classStyle),s.s9C("target",u.target),s.xp6(2),s.Oqu(s.lcZ(4,7,u.fileDescription))}}function y(f,v){if(1&f&&(s.TgZ(0,"a",3)(1,"span"),s._uU(2),s.ALo(3,"mytranslate"),s.qZA(),s.Hsn(4,1),s.qZA()),2&f){const u=s.oxw();s.Akn(u.style),s.Tol(u.classStyle),s.s9C("href",u.dataUrl,s.LSH),s.s9C("target",u.target),s.s9C("download",u.fileName),s.xp6(2),s.Oqu(s.lcZ(3,9,u.fileDescription))}}const j=["*","*"];let I=(()=>{class f extends t.Q{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,e.U)(u=>u))}shareFileToFlutter(){this.downloadFile().subscribe(u=>{this.shareFileFlutterService.shareFileWithBlob(u,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(u,h,l){super(),this.shareFileFlutterService=u,this.commonService=h,this.http=l,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return f.\u0275fac=function(u){return new(u||f)(s.Y36(g.g),s.Y36(a.z),s.Y36(d.eN))},f.\u0275cmp=s.Xpm({type:f,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},features:[s.qOj],ngContentSelectors:j,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["NormalWeb",""],[3,"target","click"],[3,"href","target","download"]],template:function(u,h){if(1&u&&(s.F$t(j),s.YNc(0,L,6,9,"ng-container",0),s.YNc(1,y,5,11,"ng-template",null,1,s.W1O)),2&u){const l=s.MAs(2);s.Q6J("ngIf",h.isMobileWebView)("ngIfElse",l)}},dependencies:[c.O5,m.JV],encapsulation:2}),f})()},53903:(C,S,i)=>{i.d(S,{Z:()=>h});var e=i(65879),t=i(39621),s=i(77848),g=i(96814),a=i(23680),d=i(64170),c=i(98525),m=i(56223),L=i(775),y=i(75203);let j=(()=>{class l{transform(o,n){if(!o)return"";const p=o.find(_=>_.id==n);return p?p.key??"":""}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275pipe=e.Yjl({name:"aztFindSchoolSubjectById",type:l,pure:!0}),l})();function I(l,r){if(1&l&&(e.TgZ(0,"mat-option",15),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&l){const o=r.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,o.key)," ")}}function f(l,r){if(1&l&&(e.TgZ(0,"mat-option",15),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&l){const o=r.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",e.lcZ(2,2,o.key)," ")}}function v(l,r){1&l&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function u(l,r){if(1&l){const o=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.ALo(7,"aztFindSchoolSubjectById"),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.ALo(10,"aztFindSchoolSubjectById"),e.qZA(),e.TgZ(11,"a",19),e.NdJ("click",function(){e.CHM(o);const p=e.oxw();return e.KtG(p.changeSubjectIdByPredict())}),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()}if(2&l){const o=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_please_double_check_the_subject_for_accuracy")+". "+e.lcZ(5,4,"lang_testbank_the_system_recognizes_your_subject_as_a_subject")+" "+e.lcZ(6,6,e.xi3(7,8,o.schoolSubjectObjs,o.predictSchoolSubjectId))+", "+e.lcZ(8,11,"lang_testbank_you_are_choosing_subject")+" "+e.lcZ(9,13,e.xi3(10,15,o.schoolSubjectObjs,o.form.controls.schoolSubject.value))+". "," "),e.xp6(9),e.hij(" ",e.lcZ(13,18,"lang_testbank_click_here_to_change_it_to_the_correct_one")+"."," ")}}let h=(()=>{class l extends t.Q{filterSchoolSubject(o){this.filterSubject(o??1)}changeSubjectIdByPredict(){const o=this.schoolSubjectObjs.find(b=>b.id==this.predictSchoolSubjectId),n=this.form?.controls.schoolLevel.value??0;let p=0;o&&o.from&&o.to&&(Number(n)>=o.from||Number(n)<=o.to?(p=this.getSubjectIdFilter(this.subjectSelectedList),this.form?.controls.schoolSubject.setValue(p)):(this.form?.controls.schoolLevel.setValue(o.from),this.filterSchoolSubject(this.form?.controls.schoolLevel.value),p=this.getSubjectIdFilter(this.subjectSelectedList),this.form?.controls.schoolSubject.setValue(p)),this.predictLogRequestObj.acceptPredictStatus=1,this.sendLogPredictSubject.emit(this.predictLogRequestObj))}predictSchoolSubjectByQuestionContent(){this.initStatusObj(),this.subscriptions.add(this.aiService.apiAiPredictSubjectPost({questionContents:this.questionContents}).subscribe(n=>{1===n.success?(this.predictSchoolSubjectId=n.data?.schoolSubjectId??0,this.predictSchoolSubjectId&&(this.checkPredictSchoolSubject=this.checkPredictSubject(),this.predictLogRequestObj={predictSchoolSubjectId:this.predictSchoolSubjectId,acceptPredictStatus:-1!=this.predictSchoolSubjectId&&this.showPredictSchoolSubject&&!this.checkPredictSchoolSubject?0:2,predictByTotalQuestion:this.questionContents.length},this.sendLogPredictSubject.emit(this.predictLogRequestObj)),this.successStatusObj()):this.errorStatusObj(n.message??"",!0)}))}getArrayIdSubject(){const o=this.getKeySubjectById(this.predictSchoolSubjectId,this.schoolSubjectObjs);return this.convertSubjectList(this.schoolSubjectObjs)[o]}getSubjectIdFilter(o){const n=this.getArrayIdSubject();let p=0;for(let b=0;b<o.length;b++){const _=o[b];if(_.id&&n.includes(_.id)){p=_.id;break}}return p}filterSubject(o){let n=this.commonService.myClone(this.schoolSubjectObjs);this.subjectSelectedList=n.filter(_=>!(_.from&&_.to&&o)||o>=_.from&&o<=_.to);let p=this.form?.controls.schoolSubject.value,b=this.subjectSelectedList.filter(_=>_.id==p);(!b||!b.length)&&this.form?.controls.schoolSubject.setValue(0)}checkPredictSubject(){const o=this.getArrayIdSubject(),n=Number(this.form?.controls.schoolSubject.value)??0;return o?.includes(n)}convertSubjectList(o){const n={};return o.forEach(p=>{p.key&&(n[p.key]||(n[p.key]=[]),n[p.key].push(p.id))}),n}getKeySubjectById(o,n){const p=n.find(_=>_.id==o);return p?p.key??"":""}renderData(){0==this.typeView?this.examSchoolLogObj?.id?(this.filterSchoolSubject(this.examSchoolLogObj?.lastSchoolLevelId??0??this.schoolLevelObjs[0].id),this.isSetValueByLog&&(this.form?.controls.schoolLevel.setValue(this.examSchoolLogObj?.lastSchoolLevelId??0),this.form?.controls.schoolSubject.setValue(this.examSchoolLogObj?.lastSchoolSubjectId??0))):this.filterSchoolSubject(0):this.filterSchoolSubject(this.form?.controls.schoolLevel.value)}checkSubjectIdInLevel(){const o=this.form.controls.schoolSubject.value;for(let n=0;n<this.subjectSelectedList.length;n++)if(this.subjectSelectedList[n].id==o)return!0;return!1}ngOnChanges(){(this.schoolLevelObjs||this.subjectSelectedList)&&this.renderData()}ngOnInit(){this.renderData(),this.showPredictSchoolSubject&&this.predictSchoolSubjectByQuestionContent(),this.isSubjectIdInList=this.checkSubjectIdInLevel(),this.idSubjectInLevel.emit(this.isSubjectIdInList),this.form?.controls.schoolSubject?.valueChanges.subscribe(()=>{this.predictSchoolSubjectId&&(this.checkPredictSchoolSubject=this.checkPredictSubject(),this.predictLogRequestObj.acceptPredictStatus=-1!=this.predictSchoolSubjectId&&this.showPredictSchoolSubject&&!this.checkPredictSchoolSubject?0:2,this.sendLogPredictSubject.emit(this.predictLogRequestObj)),this.isSubjectIdInList=this.checkSubjectIdInLevel(),this.idSubjectInLevel.emit(this.isSubjectIdInList)})}constructor(o){super(),this.aiService=o,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.formControlName="",this.typeView=0,this.questionContents=[],this.showPredictSchoolSubject=!1,this.isSetValueByLog=!0,this.sendLogPredictSubject=new e.vpe,this.idSubjectInLevel=new e.vpe,this.subjectSelectedList=[],this.targetExamGroupObjs=[],this.checkPredictSchoolSubject=!1,this.predictSchoolSubjectId=-1,this.predictLogRequestObj={predictSchoolSubjectId:0,acceptPredictStatus:0,predictByTotalQuestion:0},this.isSubjectIdInList=!0}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(s.p))},l.\u0275cmp=e.Xpm({type:l,selectors:[["config-level-subject"]],inputs:{form:"form",schoolLevelObjs:"schoolLevelObjs",schoolSubjectObjs:"schoolSubjectObjs",examSchoolLogObj:"examSchoolLogObj",formControlName:"formControlName",typeView:"typeView",questionContents:"questionContents",showPredictSchoolSubject:"showPredictSchoolSubject",isSetValueByLog:"isSetValueByLog"},outputs:{sendLogPredictSubject:"sendLogPredictSubject",idSubjectInLevel:"idSubjectInLevel"},features:[e.qOj,e.TTD],decls:28,vars:19,consts:[[1,"config-level-subject"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["appearance","outline"],["formControlName","schoolLevel","name","schoolLevel",3,"selectionChange"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubject",1,"form-label","flex","items-center"],["id","schoolSubject","formControlName","schoolSubject","name","schoolSubject"],[1,"col-span-12",2,"margin-top","-20px"],["class","text-xs mt-2 text-danger",4,"ngIf"],["class","col-span-12","style","margin-top: -32px;",4,"ngIf"],[3,"value"],[1,"text-xs","mt-2","text-danger"],[1,"col-span-12",2,"margin-top","-32px"],[1,"text-xs","text-pending","font-medium"],[1,"btn-text-primary","font-medium",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"mat-form-field",6)(9,"mat-select",7),e.NdJ("selectionChange",function(){return n.filterSchoolSubject(n.form.controls.schoolLevel.value)}),e.TgZ(10,"mat-option",8),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.YNc(13,I,3,4,"mat-option",9),e.qZA()()(),e.TgZ(14,"div",3)(15,"div",4)(16,"label",10),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"mat-form-field",6)(20,"mat-select",11)(21,"mat-option",8),e._uU(22),e.ALo(23,"mytranslate"),e.qZA(),e.YNc(24,f,3,4,"mat-option",9),e.qZA()()(),e.TgZ(25,"div",12),e.YNc(26,v,3,3,"div",13),e.qZA(),e.YNc(27,u,14,20,"div",14),e.qZA()()()),2&o&&(e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(5),e.hij(" ",e.lcZ(7,11,"lang_auto_khoi_hoc")," "),e.xp6(4),e.Q6J("value",0),e.xp6(1),e.hij("",e.lcZ(12,13,"lang_auto_---chon_khoi"),"---"),e.xp6(2),e.Q6J("ngForOf",n.schoolLevelObjs),e.xp6(4),e.hij(" ",e.lcZ(18,15,"lang_auto_mon_hoc")," "),e.xp6(4),e.Q6J("value",0),e.xp6(1),e.hij("",e.lcZ(23,17,"lang_auto_---chon_mon"),"---"),e.xp6(2),e.Q6J("ngForOf",n.subjectSelectedList),e.xp6(2),e.Q6J("ngIf",0==(null==n.form||null==n.form.controls||null==n.form.controls.schoolLevel?null:n.form.controls.schoolLevel.value)||0==(null==n.form||null==n.form.controls||null==n.form.controls.schoolSubject?null:n.form.controls.schoolSubject.value)||!n.isSubjectIdInList),e.xp6(1),e.Q6J("ngIf",-1!=n.predictSchoolSubjectId&&n.showPredictSchoolSubject&&!n.checkPredictSchoolSubject&&0!=(null==n.form||null==n.form.controls||null==n.form.controls.schoolSubject?null:n.form.controls.schoolSubject.value)&&!n.statusObj.loading))},dependencies:[g.sg,g.O5,a.ey,d.KE,c.gD,m._Y,m.JJ,m.JL,m.sg,m.u,L.M,y.JV,j],encapsulation:2}),l})()},10766:(C,S,i)=>{i.d(S,{u:()=>u});var e=i(39621),t=i(65879),s=i(96814),g=i(23680),a=i(64170),d=i(98525),c=i(56223),m=i(775),L=i(75203);function y(h,l){if(1&h&&(t.TgZ(0,"mat-option",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&h){const r=l.$implicit;t.Q6J("value",r.id),t.xp6(1),t.hij(" ",t.lcZ(2,2,r.code)," ")}}function j(h,l){if(1&h&&(t.TgZ(0,"mat-optgroup",12),t.ALo(1,"mytranslate"),t.YNc(2,y,3,4,"mat-option",13),t.qZA()),2&h){const r=l.$implicit;t.s9C("label",t.lcZ(1,2,r.groupName)),t.xp6(2),t.Q6J("ngForOf",r.purposeListInGroup)}}function I(h,l){1&h&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&h&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_choose_purpose_exam")," "))}function f(h,l){1&h&&(t.TgZ(0,"div",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&h&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_purpose_create_exam")," "))}function v(h,l){if(1&h&&(t.TgZ(0,"div",3)(1,"div",4)(2,"label",16),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",17),t._UZ(6,"input",18),t.ALo(7,"mytranslate"),t.qZA(),t.YNc(8,f,3,3,"div",10),t.qZA()),2&h){const r=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_enter_create_exam_target")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(7,5,"lang_testbank_enter_create_exam_target")+" ..."),t.xp6(2),t.Q6J("ngIf",(4==(null==r.form.controls.purposeExam?null:r.form.controls.purposeExam.value)||8==(null==r.form.controls.purposeExam?null:r.form.controls.purposeExam.value)||12==(null==r.form.controls.purposeExam?null:r.form.controls.purposeExam.value))&&""===(null==r.form.controls.purposeNote||null==r.form.controls.purposeNote.value?null:r.form.controls.purposeNote.value.trim()))}}let u=(()=>{class h extends e.Q{convertPurposeList(){this.targetExamGroupObjs=[],this.purposeList.forEach(r=>{const{semester:o}=r;let n=this.targetExamGroupObjs.find(p=>p.semester===o);n||(n={semester:o,groupName:this.getGroupNamePurpose(r.semester??1),purposeListInGroup:[]},this.targetExamGroupObjs.push(n)),n.purposeListInGroup?.push(r)})}getGroupNamePurpose(r){switch(r){case 1:default:return"lang_testbank_semester_one";case 2:return"lang_testbank_semester_two";case 3:return"lang_testbank_another_purpose"}}ngOnInit(){this.convertPurposeList()}constructor(){super(),this.purposeList=[],this.targetExamGroupObjs=[]}}return h.\u0275fac=function(r){return new(r||h)},h.\u0275cmp=t.Xpm({type:h,selectors:[["config-purpose-exam"]],inputs:{form:"form",purposeList:"purposeList"},features:[t.qOj],decls:16,vars:11,consts:[[1,"config-purpose-exan"],[3,"formGroup"],["id","azt-config-purpose-exam",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"font-medium"],[1,"form-label","flex","items-center"],["appearance","outline"],["formControlName","purposeExam","name","purposeExam"],["disabled","",3,"value"],[3,"label",4,"ngFor","ngForOf"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","col-span-12",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-2","text-danger","text-xs"],["for","enter_target_create_exam",1,"form-label","flex","items-center"],[1,"setting-input"],["id","enter_target_create_exam","formControlName","purposeNote","type","text",1,"form-control",3,"placeholder"]],template:function(r,o){1&r&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"mat-form-field",6)(9,"mat-select",7)(10,"mat-option",8),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.YNc(13,j,3,4,"mat-optgroup",9),t.qZA()(),t.YNc(14,I,3,3,"div",10),t.qZA(),t.YNc(15,v,9,7,"div",11),t.qZA()()()),2&r&&(t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(5),t.hij(" ",t.lcZ(7,7,"lang_testbank_target_exam")," "),t.xp6(4),t.Q6J("value",0),t.xp6(1),t.hij("---",t.lcZ(12,9,"lang_testbank_choose_purpose"),"---"),t.xp6(2),t.Q6J("ngForOf",o.targetExamGroupObjs),t.xp6(1),t.Q6J("ngIf",0==o.form.controls.purposeExam.value),t.xp6(1),t.Q6J("ngIf",4==(null==o.form.controls.purposeExam?null:o.form.controls.purposeExam.value)||8==(null==o.form.controls.purposeExam?null:o.form.controls.purposeExam.value)||12==(null==o.form.controls.purposeExam?null:o.form.controls.purposeExam.value)))},dependencies:[s.sg,s.O5,g.ey,g.Nv,a.KE,d.gD,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,m.M,L.JV],encapsulation:2}),h})()},24052:(C,S,i)=>{i.d(S,{i:()=>t});var e=i(65879);let t=(()=>{class s{constructor(){this.fileDrop=new e.vpe,this.preventBodyDrop=!0,this.active=!1}onDrop(a){a.preventDefault(),this.active=!1;const{dataTransfer:d}=a;if(d?.items){const c=[];for(let m=0;m<d.items.length;m++)"file"===d.items[m].kind&&d.items[m].getAsFile()&&c.push(d.items[m].getAsFile());d.items.clear(),Array.isArray(c)&&this.fileDrop.emit(this.removeNullFile(c))}else{const c=d?.files;d?.clearData(),c&&this.fileDrop.emit(Array.from(c))}}removeNullFile(a){for(var d=[],c=0;c<a.length;c++)a[c]&&d.push(a[c]);return d}onDragOver(a){a.stopPropagation(),a.preventDefault(),this.active=!0}onDragLeave(a){this.active=!1}onBodyDragOver(a){this.preventBodyDrop&&(a.preventDefault(),a.stopPropagation())}onBodyDrop(a){this.preventBodyDrop&&a.preventDefault()}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275dir=e.lG2({type:s,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(a,d){1&a&&e.NdJ("drop",function(m){return d.onDrop(m)})("dragover",function(m){return d.onDragOver(m)})("dragleave",function(m){return d.onDragLeave(m)})("dragover",function(m){return d.onBodyDragOver(m)},!1,e.pYS)("drop",function(m){return d.onBodyDrop(m)},!1,e.pYS),2&a&&e.ekj("drop-zone-active",d.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),s})()},42047:(C,S,i)=>{i.d(S,{Z:()=>e});class e{constructor(s,g,a,d,c,m=1,L=!1,y=!1,j,I){this.id=s,this.pr=g,this.type=a,this.shareType=d,this.item=c,this.level=m,this.expandable=L,this.isLoading=y,this.prNode=j,this.isLeaf=I}}}}]);