"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[751],{10731:(ht,tt,l)=>{l.d(tt,{x:()=>E});class E{constructor(){this.answerConfigParse=[],this.questionContentParse=[],this.answerLabelsMockup={}}}},296:(ht,tt,l)=>{l.d(tt,{S:()=>z});var E=l(70655),g=l(10731),U=l(5e3),J=l(50690),ot=l(15043),H=l(90893),it=l(20814);let z=(()=>{class Q{constructor(h,f,b,A){this.commonService=h,this.cdnService=f,this.customQuestionAnswerConfig=b,this.exportPdfUtilsService=A}processEssayResultToBase64(h){var f,b,A,M,S;return(0,E.mG)(this,void 0,void 0,function*(){for(const O of null!==(f=h.pages)&&void 0!==f?f:[]){if(O.draw){this.cdnService.isViettelCDN(null!==(A=null===(b=h.pages)||void 0===b?void 0:b[0].backgroundImage)&&void 0!==A?A:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const L=yield this.exportPdfUtilsService.convertAndRetryToBase64(O.draw);O.draw=L}if(this.cdnService.isViettelCDN(null!==(S=null===(M=h.pages)||void 0===M?void 0:M[0].backgroundImage)&&void 0!==S?S:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),O.backgroundImage){const L=yield this.exportPdfUtilsService.convertAndRetryToBase64(O.backgroundImage);O.backgroundImage=L}}if(h.commentEmoji&&h.commentEmoji.length){let O="https://azota889.github.io/storage_public/mnote/",L=h.commentEmoji.length;for(let q=0;q<L;q++){let W=O+h.commentEmoji[q];const at=yield this.exportPdfUtilsService.convertAndRetryToBase64(W);h.commentEmoji[q]=at}}return h})}processGroupImagesToBase64(h,f){var b,A,M;return(0,E.mG)(this,void 0,void 0,function*(){if(h&&(null===(b=null==h?void 0:h[0].name)||void 0===b?void 0:b.startsWith("[PDFv2]")))for(const S of h)if(h[0].questionContentParse&&this.cdnService.isViettelCDN(null!==(A=h[0].questionContentParse[0].groupUrl)&&void 0!==A?A:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500)),S.questionContentParse&&S.questionContentParse[0].groupUrl&&f.includes(null!==(M=S.indexLabel)&&void 0!==M?M:-1)){const O=yield this.exportPdfUtilsService.convertAndRetryToBase64(S.questionContentParse[0].groupUrl);S.questionContentParse[0].groupUrl=O}})}processQuestionImagesToBase64(h){var f,b,A,M;return(0,E.mG)(this,void 0,void 0,function*(){if(1==h[0].isImage)for(const S of h){this.cdnService.isViettelCDN(null!==(b=null===(f=h[0].questionContentParse)||void 0===f?void 0:f[0].url)&&void 0!==b?b:"")&&(yield this.exportPdfUtilsService.asyncTimeout(500));const O=yield this.exportPdfUtilsService.convertAndRetryToBase64(null!==(M=null===(A=S.questionContentParse)||void 0===A?void 0:A[0].url)&&void 0!==M?M:"");S.questionContentParse&&(S.questionContentParse[0].url=O)}})}processQuestionDocxContentToBase64(h){var f,b,A,M;return(0,E.mG)(this,void 0,void 0,function*(){if(0==h[0].isImage)for(const O of h){var S=this.exportPdfUtilsService.findImageSrcInContent(null!==(b=null===(f=O.questionContentParse)||void 0===f?void 0:f[0].content)&&void 0!==b?b:"");if(this.cdnService.isViettelCDN(S)&&(yield this.exportPdfUtilsService.asyncTimeout(500)),S&&!S.includes(";base64")){const L=yield this.exportPdfUtilsService.convertAndRetryToBase64(S);(null===(M=null===(A=O.questionContentParse)||void 0===A?void 0:A[0].content)||void 0===M?void 0:M.includes("img"))&&L&&(O.questionContentParse[0].content=O.questionContentParse[0].content.replace(S,L))}}})}convertAnswersArr(h,f){0!=h.length&&h.forEach(b=>{b.QuestionId&&b.AnswerContent&&b.AnswerContent[0]&&b.AnswerContent[0].Content&&(f[`id_${b.QuestionId}`]=b.AnswerContent[0].Content)})}parseQuestionsFor_PDFv2(h,f){var b,A;let M=this.commonService.castJsonToClassObjs(g.x,JSON.stringify(null===(b=f.data)||void 0===b?void 0:b.questionObjs));h=this.customQuestionAnswerConfig.changeQuestionContent(null!=M?M:[],!0);for(let S=0;S<h.length;S++)h[S].indexLabel=S,h[S].correctAnswer=this.commonService.filterArray(null===(A=f.data)||void 0===A?void 0:A.correctQuestionIds,h[S].id);return h}findScaleDirection(h,f){return h/f>=.7070707070707071?"w":"h"}}return Q.\u0275fac=function(h){return new(h||Q)(U.LFG(J.v),U.LFG(ot.U),U.LFG(H.U),U.LFG(it.V))},Q.\u0275prov=U.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},20814:(ht,tt,l)=>{l.d(tt,{V:()=>it});var E=l(70655),g=l(5e3),U=l(50690),J=l(15043),ot=l(88161),H=(()=>{return(z=H||(H={}))[z.Cdn=0]="Cdn",z[z.CdnTimestamp=1]="CdnTimestamp",z[z.Rawlink=2]="Rawlink",z[z.RawlinkTimestamp=3]="RawlinkTimestamp",H;var z})();let it=(()=>{class z{constructor(_,h,f){this.commonService=_,this.cdnService=h,this.answerTypeService=f}get blockCropItemClass(){return"__CANVAS_CROP_ITEM"}get blockEssayCropItemClass(){return"_ESSAY"}isSupportedBrowser(){let _=this.commonService.getBrowserType().toString();return!(!["chrome"].includes(_.split(" ")[0].toLowerCase())||parseInt(_.split(" ")[1],10)<80)}getExtensionFile(_){if(!_)return"";var h=_.split(".");return h.length<=1?"":h[h.length-1].toLocaleLowerCase().split("_")[0]}translateMetaTitle(_){var h,f,b,A;let M="Export PDF: ";this.commonService.translateMetaData({title:M+(null===(f=null===(h=_.data)||void 0===h?void 0:h.examObj)||void 0===f?void 0:f.name),description:M+(null===(A=null===(b=_.data)||void 0===b?void 0:b.examObj)||void 0===A?void 0:A.name),image:"lang_cms_test_image"})}findImageSrcInContent(_){var h="";if(_.includes("img")){var f=_.indexOf("img"),b=_.indexOf("src=",f),A=_.indexOf('"',Number(b)+5);h=_.substring(Number(b)+5,Number(A))}return h}asyncTimeout(_){return(0,E.mG)(this,void 0,void 0,function*(){return`Waited ${yield new Promise(f=>{setTimeout(()=>f(_),_)})} miliseconds`})}parseEssayMarkResult(_,h,f){var b;let A=_.filter(O=>this.answerTypeService.isEssayAnswer(O.answerType));if(0!=A.length){if(h&&h.essayResult){var M=this.commonService.willDeleteParseJson(h.essayResult);if(M){var S=Object.entries(M);for(let O=0;O<A.length;O++)A[O].essayMarkParsed=S[O][1]}}for(let O=0;O<A.length;O++){let L=A[O].id,q=f.filter(at=>at.questionId==L)[0],W=this.commonService.willDeleteParseJson(null!==(b=q.config)&&void 0!==b?b:"");A[O].scorePerQuestion=W?Number(W.ScorePerQuestion):0}}}convertToBase64(_,h){return(0,E.mG)(this,void 0,void 0,function*(){let f=_;switch(h){case H.Cdn:f=this.cdnService.getMyCdn(_);break;case H.CdnTimestamp:f=this.cdnService.getMyCdn(_)+"?t="+Date.now();break;case H.RawlinkTimestamp:f=_+"?t="+Date.now()}const A=yield(yield fetch(f)).blob(),M=yield new Promise(S=>{const O=new FileReader;O.readAsDataURL(A),O.onloadend=()=>{S(O.result)}});return M&&"string"==typeof M?M:_})}convertAndRetryToBase64(_){return(0,E.mG)(this,void 0,void 0,function*(){let h=this.getExtensionFile(_);if(["pdf","jpg","jpeg","png","gif"].includes(h)){let f;const b=[H.Cdn,H.CdnTimestamp,H.Rawlink,H.RawlinkTimestamp];if(this.cdnService.isViettelCDN(_))try{f=yield this.convertToBase64(_,b[0])}catch(A){try{yield this.asyncTimeout(500),f=yield this.convertToBase64(_,b[1])}catch(M){f=_}}else try{f=yield this.convertToBase64(_,b[0])}catch(A){try{f=yield this.convertToBase64(_,b[1])}catch(M){try{f=yield this.convertToBase64(_,b[2])}catch(S){try{f=yield this.convertToBase64(_,b[3])}catch(O){console.log("Kh\xf4ng th\u1ec3 convert url n\xe0y th\xe0nh base64 sau v\xe0i l\u1ea7n retry: "+_),f=_}}}}return f}return _})}eraseCanvas(_){_&&(_.beginPath(),_.rect(0,0,_.canvas.width,_.canvas.height),_.fillStyle="white",_.fill())}addContentToPdf(_,h){_.addImage(h,"JPEG",0,0,_.internal.pageSize.getWidth(),_.internal.pageSize.getHeight())}drawTextWrap(_,h,f,b,A){let M=_.split(" "),S=[],O=M[0];if(h){h.font=A||`${b}px Arial`;for(let L=1;L<M.length;L++){let q=M[L];h.measureText(O+" "+q).width<f?O+=" "+q:(S.push(O),O=q)}S.push(O)}return S}essayText2LinesArr(_,h,f,b,A){var M;let S=new RegExp("(<br>|<br/>)+","igm"),L=(null!==(M=this.commonService.replaceAllByRegExp(_,S,"<br>"))&&void 0!==M?M:"").split("<br>"),q=[];for(let W=0;W<L.length;W++)q.push(this.drawTextWrap(L[W],h,f,b,A));return q}}return z.\u0275fac=function(_){return new(_||z)(g.LFG(U.v),g.LFG(J.U),g.LFG(ot.T))},z.\u0275prov=g.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},63382:(ht,tt,l)=>{l.d(tt,{X:()=>U});var E=l(5e3),g=l(50690);let U=(()=>{class J{constructor(H){this.commonService=H}isInIframe(){try{return window.self!==window.top}catch(H){return!0}}sendMessageToParentIframe(H){try{window.parent.postMessage(H,"*")}catch(it){}}sendMessageToIFrame(H,it){const z=document.getElementById(H),Q=z?z.contentWindow:null;null!=Q&&Q.postMessage(it,"*")}}return J.\u0275fac=function(H){return new(H||J)(E.LFG(g.v))},J.\u0275prov=E.Yz7({token:J,factory:J.\u0275fac,providedIn:"root"}),J})()},10579:(ht,tt,l)=>{l.r(tt),l.d(tt,{HomeworkModule:()=>an});var E=l(69808),g=l(93075),U=l(48966),J=l(74202),ot=l(51908),H=l(66574),it=l(1737),z=l(36853),Q=l(44841),_=l(47470),h=l(75658),f=l(14030),b=l(8785),A=l(37389),M=l(6834),S=l(70024),O=l(40520),L=l(53170),q=l(90508),W=l(36053),at=l(30502),ie=l(24149),re=l(96551),Zt=l(85053),$=l(50690),X=l(55330),ae=l(1574),se=l(41303),ft=l(51442),t=l(5e3),le=l(57521),bt=l(41281),wt=l(12813),gt=l(1218),Mt=l(72491),ce=l(88386),jt=l(34782),de=l(79001),ue=l(50136),xt=l(67322),me=l(77531),kt=l(87238),_t=l(91350),pt=l(49692),he=l(16883),ge=l(73727),Nt=l(20371),Y=l(1033);function _e(r,i){1&r&&t._UZ(0,"azt-loading-effect")}function pe(r,i){1&r&&(t.TgZ(0,"div",94),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function ve(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function fe(r,i){1&r&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function be(r,i){1&r&&(t.TgZ(0,"div",95),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function we(r,i){1&r&&(t.TgZ(0,"div",96),t.O4$(),t.TgZ(1,"svg",97)(2,"g",98)(3,"g",99),t._UZ(4,"circle",100),t.TgZ(5,"path",101),t._UZ(6,"animateTransform",102),t.qZA()()()()())}function xe(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",103)(1,"button",104),t.NdJ("click",function(){const a=t.CHM(e).index,s=t.oxw(2);return t.KtG(!!s.formHomework.files&&s.formHomework.files.splice(a,1))}),t.O4$(),t.TgZ(2,"svg",27),t._UZ(3,"line",105)(4,"line",106),t.qZA()(),t.kcU(),t.TgZ(5,"a",107),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onShowFile(a,-1))}),t.TgZ(6,"span",108),t._uU(7),t.qZA()()()}if(2&r){const e=i.$implicit;t.xp6(6),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function ke(r,i){1&r&&(t.TgZ(0,"div",111),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function ye(r,i){if(1&r&&(t.TgZ(0,"div",109),t.YNc(1,ke,3,3,"div",110),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow)}}const Ce=function(r){return{suppressScrollX:!0,suppressScrollY:r}};function Te(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",12),t._UZ(15,"input",13),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,pe,3,3,"div",14),t.qZA()(),t.TgZ(18,"div",15)(19,"div",16)(20,"label",17),t._uU(21),t.ALo(22,"mytranslate"),t.O4$(),t.TgZ(23,"svg",18),t.ALo(24,"mytranslate"),t._UZ(25,"circle",19)(26,"line",20)(27,"line",21),t.qZA()()(),t.kcU(),t.TgZ(28,"div",16)(29,"div",22)(30,"div",23)(31,"mat-form-field",24)(32,"input",25),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(43);return t.KtG(n.open())}),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",26),t.NdJ("click",function(n){return t.CHM(e),t.MAs(43).open(),t.KtG(n.stopPropagation())}),t.O4$(),t.TgZ(35,"svg",27),t._UZ(36,"path",28)(37,"path",29)(38,"path",30)(39,"path",31)(40,"path",32)(41,"path",33),t.qZA()(),t.kcU(),t.TgZ(42,"ngx-mat-datetime-picker",null,34),t.YNc(44,ve,2,0,"ng-template"),t.qZA()()(),t.TgZ(45,"div",23)(46,"mat-form-field",24)(47,"input",35),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(58);return t.KtG(n.open())}),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"button",26),t.NdJ("click",function(n){return t.CHM(e),t.MAs(58).open(),t.KtG(n.stopPropagation())}),t.O4$(),t.TgZ(50,"svg",27),t._UZ(51,"path",28)(52,"path",29)(53,"path",30)(54,"path",31)(55,"path",32)(56,"path",33),t.qZA()(),t.kcU(),t.TgZ(57,"ngx-mat-datetime-picker",null,36),t.YNc(59,fe,2,0,"ng-template"),t.qZA()()(),t.TgZ(60,"div",37)(61,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearTime())}),t.O4$(),t.TgZ(62,"svg",39),t._UZ(63,"path",40)(64,"path",41)(65,"path",42)(66,"path",43),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(69,"div",44)(70,"div",45),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.YNc(73,be,3,3,"div",46),t.qZA()()(),t.TgZ(74,"div",47)(75,"div",10)(76,"h3",48),t._uU(77),t.ALo(78,"mytranslate"),t.qZA()(),t.TgZ(79,"div",49)(80,"div",50)(81,"input",51,52),t.NdJ("change",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelected(n))}),t.qZA(),t.TgZ(83,"a",53),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(82);return t.KtG(n.click())}),t.O4$(),t.TgZ(84,"svg",54),t._UZ(85,"line",55)(86,"line",56),t.qZA(),t.kcU(),t.TgZ(87,"span"),t._uU(88),t.ALo(89,"mytranslate"),t.qZA()(),t.YNc(90,we,7,0,"div",57),t.TgZ(91,"div",58),t._uU(92),t.ALo(93,"mytranslate"),t.qZA(),t.YNc(94,xe,8,2,"div",59),t.qZA(),t.TgZ(95,"editor",60),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.formHomework.content=n)}),t.qZA()()(),t.TgZ(96,"div",61)(97,"div",62)(98,"label",63),t._uU(99),t.ALo(100,"mytranslate"),t.qZA()(),t.TgZ(101,"div",64)(102,"div",65)(103,"div",66),t._UZ(104,"input",67),t.TgZ(105,"label",68),t._uU(106),t.ALo(107,"mytranslate"),t.qZA()(),t.TgZ(108,"div",69),t._UZ(109,"input",70),t.TgZ(110,"label",71),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()()()()(),t.TgZ(113,"div",72)(114,"div",62)(115,"label",63),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()(),t.TgZ(118,"div",64)(119,"div",65)(120,"div",66),t._UZ(121,"input",73),t.TgZ(122,"label",74),t._uU(123),t.ALo(124,"mytranslate"),t.qZA()(),t.TgZ(125,"div",69),t._UZ(126,"input",75),t.TgZ(127,"label",76),t._uU(128),t.ALo(129,"mytranslate"),t.qZA()()()()(),t.TgZ(130,"div",77)(131,"div",78)(132,"div",79),t._uU(133),t.ALo(134,"mytranslate"),t.qZA()(),t.TgZ(135,"div",80)(136,"div",81)(137,"div",82)(138,"h3",83),t._uU(139),t.ALo(140,"mytranslate"),t.qZA(),t.TgZ(141,"div",84),t._UZ(142,"azt-list-classroom-checkall",85),t.qZA()(),t.TgZ(143,"div",86)(144,"perfect-scrollbar",87),t.ALo(145,"isMobileOrTable"),t._UZ(146,"azt-list-classroom-checkbox",88),t.qZA()()()(),t.YNc(147,ye,2,1,"div",89),t.qZA()(),t.TgZ(148,"div",90)(149,"div",91)(150,"button",92),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveHomework(0))}),t._uU(151),t.ALo(152,"mytranslate"),t.qZA(),t.TgZ(153,"button",93),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.saveHomework(1))}),t._uU(154),t.ALo(155,"mytranslate"),t.qZA()()()()()()()}if(2&r){const e=t.MAs(43),o=t.MAs(58),n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.form),t.xp6(4),t.hij(" ",t.lcZ(6,43,"lang_auto_tao_bai_tap_moi")," "),t.xp6(6),t.hij(" ",t.lcZ(12,45,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,47,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",n.form.controls.homeworkName.errors),t.xp6(4),t.hij(" ",t.lcZ(22,49,"lang_testbank_test_config_time_assigne_homework")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(24,51,"lang_homework_add_home_work_startDate_introduce")),t.xp6(9),t.s9C("placeholder",t.lcZ(33,53,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(15),t.s9C("placeholder",t.lcZ(48,55,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",o),t.xp6(20),t.hij(" ",t.lcZ(68,57,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(72,59,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(2),t.Q6J("ngIf",n.calculatorTimeValidate(n.form.controls.homeworkDeadline.value,n.form.controls.homeworkStartDate.value)<0),t.xp6(4),t.hij(" ",t.lcZ(78,61,"lang_auto_noi_dung")," "),t.xp6(11),t.Oqu(t.lcZ(89,63,"lang_homework_add_home_work_add_file_homework")),t.xp6(2),t.Q6J("ngIf",n.loadingUpload),t.xp6(2),t.Oqu(t.lcZ(93,65,"lang_cms_add_homework_input_file")),t.xp6(2),t.Q6J("ngForOf",n.formHomework.files),t.xp6(1),t.Q6J("ngModel",n.formHomework.content)("init",n.initDataEditor),t.xp6(4),t.hij(" ",t.lcZ(100,67,"lang_auto_cho_xem_ket_qua")," "),t.xp6(7),t.hij(" ",t.lcZ(107,69,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(112,71,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(117,73,"lang_auto_dang_nhap_de_nop_bai")," "),t.xp6(7),t.hij(" ",t.lcZ(124,75,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(129,77,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(134,79,"lang_auto_giao_cho_lop")," "),t.xp6(6),t.hij(" ",t.lcZ(140,81,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",n.form)("objs",n.classroomObjs)("permissionName",n.permissionTypes.homework),t.xp6(2),t.Q6J("config",t.VKq(89,Ce,t.lcZ(145,83,"")))("scrollIndicators",!0),t.xp6(2),t.Q6J("form",n.form)("objs",n.classroomObjs)("homeworkObj",void 0)("permissionName",n.permissionTypes.homework),t.xp6(1),t.Q6J("ngIf",n.form.controls.classroomIds.errors),t.xp6(3),t.Q6J("disabled",n.form.invalid||n.checkDeadLineValid(n.form.controls.homeworkStartDate.value,n.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(152,85,"lang_auto_luu_nhap")," "),t.xp6(2),t.Q6J("disabled",n.form.invalid||n.checkDeadLineValid(n.form.controls.homeworkStartDate.value,n.form.controls.homeworkDeadline.value)<0),t.xp6(1),t.hij(" ",t.lcZ(155,87,"lang_auto_xuat_ban")," ")}}let Ae=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c,d,u,C,x,p,k,T){super(n),this.dialog=e,this.activeRoute=o,this.commonService=n,this.fb=a,this.homeworkService=s,this.classroomService=c,this.apiUploadService=d,this.zipDataService=u,this.timeService=C,this.userService=x,this.browserStorageService=p,this.sEAztClassroomCheckboxService=k,this.uploadImageOfHomeworkService=T,this.form=new g.nJ({}),this.permissionTypes=Zt.$,this.formHomework={files:[],content:""},this.classroomObjs=[],this.prevData="",this.cateId="",this.listIds="",this.backToLink="",this.uploadProgress=-1,this.loadingUpload=!1,this.homeWorkContent="",this.initDataEditor={}}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}checkDeadLineValid(e,o){return""!=e&&""!=o?this.timeService.getDiffFromTwoDate(o,e):0}onFileSelected(e){let n=e.target,a=n.files,s=!!a&&a[0];0!=s&&((0,ft.C0)(s.type)?(0,ft.ml)(s.type)?this.showErrorSnack("lang_auto_file_gap_loi: "+s.name+"lang_auto__kieu: "+s.type+"lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,ft.hv)(s).then(c=>{this.apiUploadService.uploadToCdnForHomework(c).subscribe(d=>{var u;d.type!=O.dt.UploadProgress&&(1==d.success?(this.formHomework.files&&!Array.isArray(this.formHomework.files)&&(this.formHomework.files=[]),null===(u=this.formHomework.files)||void 0===u||u.push(Object.assign({},d.data)),this.loadingUpload=!1,this.uploadProgress=-1):(this.loadingUpload=!1,this.showErrorSnack("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi[SPLIT_LANG] [SPLIT_LANG]"+d.message)))})})):this.showErrorSnack("lang_cms_add_homework_not_support_file_upload")),n.files=null}onShowFile(e,o){let n=Object.assign(Object.assign({},e),{index:o});this.dialog.open(at.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:n}})}saveHomework(e){var o;this.initStatusObj(),this.homeWorkContent=null!==(o=this.formHomework.content)&&void 0!==o?o:"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(n=>{null==n.errorMessage?(this.homeWorkContent=n.content,this.callApiToSaveHomework(e)):(this.showErrorSnack(n.errorMessage),this.stopStatusObj())})}callApiToSaveHomework(e){let o=this.commonService.getFormObj(this.form);o.homeworkStartDate=""===o.homeworkStartDate||null===o.homeworkStartDate?null:(0,E.p6)(o.homeworkStartDate,"yyyy-MM-ddTHH:mm:00","en_vn"),o.homeworkDeadline=""===o.homeworkDeadline||null===o.homeworkDeadline?null:(0,E.p6)(o.homeworkDeadline,"yyyy-MM-ddTHH:mm:00","en_vn"),o.mustVerified=1!=o.mustVerified?0:1,o.whenShowAnswer=1!=o.whenShowAnswer?0:1,this.homeWorkContent=this.zipDataService.convertContentGzip(this.homeWorkContent);let n=this.userService.getUserObj(),a=JSON.stringify({type:"homework",id:0,user:n.id}),s=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Zt.$.homework);const c=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,s,o.classroomIds);let d={name:o.homeworkName,content:this.homeWorkContent,startDate:o.homeworkStartDate,deadline:o.homeworkDeadline,testbankExams:"",files:JSON.stringify(this.formHomework.files),mustVerified:o.mustVerified,whenShowAnswer:o.whenShowAnswer,isPublished:e,categoryId:this.cateId?Number(this.cateId):void 0,classroomIds:c};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(d,a).subscribe(u=>{var C,x,p,k,T;if(1==u.success){if(e){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);let Z=[];if(null!==(C=u.data)&&void 0!==C&&C.objs)for(let I=0;I<u.data.objs.length;I++)Z.push(null===(x=u.data)||void 0===x?void 0:x.objs[I].hashId);this.listIds=JSON.stringify(Z);let N=`/admin/homework/add-new-homework/${null!==(p=this.cateId)&&void 0!==p?p:0}?backto=`+this.backToLink;this.commonService.myNavigationWithQueryString("/admin/testbank/publish-document/1/"+(null!==(k=this.cateId)&&void 0!==k?k:0)+"/"+this.listIds,"?backto="+encodeURIComponent(N))}else this.commonService.myNavigation(this.backToLink?this.backToLink:"/admin/testbank/document-management/1/0/1"),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(null!==(T=u.message)&&void 0!==T?T:"",!0)}))}getHomework(){this.subscriptions.add(this.homeworkService.apiHomeworkGetObjGet("add_new").subscribe(e=>{var o,n,a;1==e.success?(this.classroomObjs=null!==(n=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.classroomObjs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"",!0)}))}checkModeUiEditor(e){this.initDataEditor="dark"==e?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}calculatorTimeValidate(e,o){return""!=e&&""!=o?this.timeService.calculationHomeworkTime(e,o):0}ngOnChanges(){var e;let o=""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light";this.checkModeUiEditor(o)}ngOnInit(){var e;this.initStatusObj();let o=""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light";this.checkModeUiEditor(o),(0,W.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var n,a;this.backToLink=null!==(n=this.commonService.getMyQueryParam("backto"))&&void 0!==n?n:"",this.cateId=null!==(a=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==a?a:"",this.getHomework()}),this.form=this.fb.group({homeworkName:new g.p4("",[g.kI.required,g.kI.maxLength(180),se._.noWhiteSpace]),homeworkStartDate:new g.p4(""),homeworkDeadline:new g.p4(""),mustVerified:new g.p4("0"),whenShowAnswer:new g.p4("0"),classroomIds:this.fb.array([]),whoAllow:new g.p4("2")},{validators:[ae.h.classroomCheckBoxValidatorWithoutWhoAllow]}),this.form.valueChanges.subscribe(n=>{let a=JSON.stringify(n);a!=this.prevData&&(this.prevData=a,this.form.patchValue(n))}),this.commonService.translateMetaData({title:"lang_cms_homework_add_exercise_title",description:"lang_cms_homework_add_exercise_description",image:"lang_cms_test_image"})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.uw),t.Y36(J.gz),t.Y36($.v),t.Y36(g.QS),t.Y36(le.L),t.Y36(bt.um),t.Y36(wt.$),t.Y36(gt.D),t.Y36(Mt.O),t.Y36(ce.K),t.Y36(jt.z),t.Y36(de.L),t.Y36(ue.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-home-work"]],features:[t._Bn([{provide:S.fM,useClass:ie.HF,deps:[q.Ad,L.o8]},{provide:S.ab,useFactory:re.hx,deps:[$.v]}]),t.qOj,t.TTD],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],["startTime",""],["matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["endTime",""],[1,"col-span-6","md:col-span-2"],[1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],[1,"grid","grid-cols-12","mt-4"],[1,"text-md","font-medium"],[1,"col-span-12","lg:col-span-12","mt-3"],[1,"col-md-12"],["type","file","name","fileHomework",2,"display","none",3,"change"],["formChoseFile",""],[1,"btn","btn-sm","btn-primary-soft",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["class","flex justify-center my-2",4,"ngIf"],[1,"text-slate-600","text-xs","mt-2","mb-2"],["class","flex items-center mt-3 mb-3",4,"ngFor","ngForOf"],["apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"ngModel","init","ngModelChange"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified","value","0",1,"form-check-input"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified","value","1",1,"form-check-input"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","mt-4","intro-y"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],[3,"config","scrollIndicators"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"my-5"],[1,"text-right"],[1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"],[1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"flex","justify-center","my-2"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-6","h-6"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"flex","items-center","mt-3","mb-3"],[1,"text-slate-600","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[3,"click"],[1,"text-slate-600",3,"title"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"]],template:function(e,o){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,_e,1,0,"azt-loading-effect",1),t.YNc(2,Te,156,91,"ng-template",null,2,t.W1O),t.qZA()),2&e){const n=t.MAs(3);t.Q6J("headerBackTolink","/admin/testbank/document-management/1/0/1"),t.xp6(1),t.Q6J("ngIf",1==o.statusObj.loading)("ngIfElse",n)}},dependencies:[E.sg,E.O5,Q.Vv,xt.KE,xt.R9,me.Nt,kt.gM,S.AB,S.g2,ot.PG,g._Y,g.Fj,g._,g.JJ,g.JL,g.On,g.sg,g.u,g.CE,_t.Q,pt.M,he.o,ge.g,Nt._,Y.bT,Y.bd],encapsulation:2}),r})();var dt=l(24096),Oe=l(43767),ut=l(25245),Se=l(74107),Ze=l(63910);function Me(r,i){if(1&r&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function je(r,i){1&r&&t._UZ(0,"azt-loading-effect")}function Ne(r,i){1&r&&(t.TgZ(0,"div",18)(1,"span",19),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&r&&(t.xp6(2),t.hij("",t.lcZ(3,1,"lang_homework_content_store_not_found_search"),"!"))}function Pe(r,i){1&r&&(t.TgZ(0,"div",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_content_store_free")))}function De(r,i){if(1&r&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"number"),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e.amount)," Azo")}}function Ee(r,i){1&r&&(t.TgZ(0,"div",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_content_store_bought")))}function Ie(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"a",36),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.downloadFrontFileContent(n.id?n.id:0))}),t.TgZ(1,"mat-icon",37),t._uU(2,"save_alt"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_homework_content_store_download")," "))}function Ue(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.openBuyContentDialog(n,a.userObj&&a.userObj.amount?a.userObj.amount:0))}),t.TgZ(1,"mat-icon",37),t._uU(2,"shopping_cart"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_buttom_buy")," "))}function He(r,i){if(1&r&&(t.TgZ(0,"div",22)(1,"div",23),t._UZ(2,"img",24),t.ALo(3,"mycdn"),t.TgZ(4,"div",25)(5,"p",26),t._uU(6),t.qZA(),t.TgZ(7,"div",27),t.YNc(8,Pe,3,3,"div",28),t.YNc(9,De,3,3,"div",29),t.YNc(10,Ee,3,3,"div",30),t.YNc(11,Ie,5,3,"a",31),t.YNc(12,Ue,5,3,"a",32),t.qZA()()()()),2&r){const e=i.$implicit;t.xp6(2),t.s9C("src",t.lcZ(3,7,e.thumb),t.LSH),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",0==e.amount),t.xp6(1),t.Q6J("ngIf",0!=e.amount&&-1!=e.amount),t.xp6(1),t.Q6J("ngIf",-1==e.amount),t.xp6(1),t.Q6J("ngIf",0==e.amount||-1==e.amount),t.xp6(1),t.Q6J("ngIf",(e&&e.amount?e.amount:0)>0)}}function ze(r,i){if(1&r&&(t.TgZ(0,"div",20),t.YNc(1,He,13,9,"div",21),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.objs)}}function Le(r,i){if(1&r&&(t.YNc(0,Ne,4,3,"div",16),t.YNc(1,ze,2,1,"ng-template",null,17,t.W1O)),2&r){const e=t.MAs(2),o=t.oxw();t.Q6J("ngIf",o.isNullData)("ngIfElse",e)}}function Je(r,i){if(1&r&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p")(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"span",14),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"span",15),t._uU(11),t.ALo(12,"number"),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"lang_homework_content_store_definitely_want_to_buy")),t.xp6(4),t.hij(" ",e.content.name,""),t.xp6(2),t.hij(" ",t.lcZ(9,7,"lang_homework_content_store_with_price")," "),t.xp6(3),t.hij("",t.lcZ(12,9,e.content.amount)," Azo"),t.xp6(2),t.hij(" ",t.lcZ(14,11,"lang_homework_content_store_not"),"?")}}function Ge(r,i){if(1&r&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p")(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"span",14),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"span",15),t._uU(11),t.ALo(12,"number"),t.qZA()()()),2&r){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_homework_content_store_not_enough_azo")),t.xp6(4),t.hij(" ",e.content.name,""),t.xp6(2),t.hij(" ",t.lcZ(9,6,"lang_homework_content_store_with_price")," "),t.xp6(3),t.hij("",t.lcZ(12,8,e.content.amount)," Azo")}}function Be(r,i){1&r&&(t.TgZ(0,"div",4)(1,"span",16),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&r&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_homework_content_store_please"),"!"))}function Fe(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.buyContent())}),t.TgZ(1,"mat-icon",18),t._uU(2,"shopping_cart"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_buttom_buy")," "))}function qe(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.gotoPack())}),t.TgZ(1,"mat-icon",18),t._uU(2,"account_balance_wallet"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_homework_content_store_recharge")," "))}let Re=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c){super(o),this.activeRoute=e,this.commonService=o,this.userInfoService=n,this.frontFileContentService=a,this.formBuilder=s,this.dialog=c,this.options={path:"https://assets8.lottiefiles.com/packages/lf20_eebdoe5f.json"},this.isNullData=!1,this.form=new g.nJ({}),this.subscriptions=new dt.w,this.objs=[],this.categories=[],this.userObj={},this.selectedValue=""}getData(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(e=>{var o,n,a;1==e.success?(this.objs=null!==(n=null===(o=e.data)||void 0===o?void 0:o.objs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"")}))}getInfo(){this.initStatusObj(),this.subscriptions.add(this.userInfoService.apiUserInfoInfoGet().subscribe(e=>{var o,n;1==e.success?(this.userObj=null!==(o=e.data)&&void 0!==o?o:{},this.successStatusObj()):this.errorStatusObj(null!==(n=e.message)&&void 0!==n?n:"")}))}getCategories(){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetCategoriesObjsGet().subscribe(e=>{var o,n,a;1==e.success?(this.categories=null!==(n=null===(o=e.data)||void 0===o?void 0:o.objs)&&void 0!==n?n:new Array,this.successStatusObj()):this.errorStatusObj(null!==(a=e.message)&&void 0!==a?a:"")}))}openBuyContentDialog(e,o){this.openDialog(!(e.amount&&e.amount>o),e,o)}openDialog(e,o,n){this.dialog.open(Ye,{width:"380px",panelClass:"buyContentDialogBox",data:{status:e,content:o,userAmount:n}}).afterClosed().subscribe(s=>{})}selectValue(e){this.initStatusObj(),this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(void 0,e).subscribe(o=>{var n,a,s,c,d;1==o.success?(null===(n=o.data)||void 0===n?void 0:n.objs)&&(null===(a=o.data)||void 0===a?void 0:a.objs.length)>0?(this.isNullData=!1,this.objs=null!==(c=null===(s=o.data)||void 0===s?void 0:s.objs)&&void 0!==c?c:new Array,this.successStatusObj()):(this.isNullData=!0,this.stopStatusObj()):this.errorStatusObj(null!==(d=o.message)&&void 0!==d?d:"")}))}onSearch(){var e=this.commonService.getFormObj(this.form);this.initStatusObj(),""==e.searchContent?(this.isNullData=!1,this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet().subscribe(o=>{var n,a,s;1==o.success?(this.objs=null!==(a=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==a?a:new Array,this.successStatusObj()):this.errorStatusObj(null!==(s=o.message)&&void 0!==s?s:"")}))):this.subscriptions.add(this.frontFileContentService.apiFrontFileContentGetObjsGet(e.searchContent).subscribe(o=>{var n,a,s,c,d;1==o.success?((null===(n=o.data)||void 0===n?void 0:n.objs)&&0==(null===(a=o.data)||void 0===a?void 0:a.objs.length)?this.isNullData=!0:this.objs=null!==(c=null===(s=o.data)||void 0===s?void 0:s.objs)&&void 0!==c?c:new Array,this.successStatusObj()):this.errorStatusObj(null!==(d=o.message)&&void 0!==d?d:"")}))}downloadFrontFileContent(e){this.frontFileContentService.apiFrontFileContentGetFileLinkGet(e).subscribe(o=>{var n,a;if(1==o.success){var s=document.createElement("a");document.body.appendChild(s),s.href=null!==(a=null===(n=o.data)||void 0===n?void 0:n.link)&&void 0!==a?a:"",s.click()}else this.showErrorSnack("lang_cms_content_store_download_fail")})}ngOnInit(){(0,W.aj)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([e,o])=>{this.getData(),this.getInfo(),this.getCategories()}),this.form=this.formBuilder.group({searchContent:new g.p4("",g.kI.required)}),this.commonService.translateMetaData({title:"lang_cms_homework_content_store_title",description:"lang_cms_homework_content_store_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngOnDestroy()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J.gz),t.Y36($.v),t.Y36(bt.$C),t.Y36(Oe.c),t.Y36(g.QS),t.Y36(U.uw))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-content-store"]],features:[t.qOj],decls:21,vars:14,consts:[[3,"headerTitle","headerBackTolink"],[1,"container-fluid","component-wrap","W1200","m-auto","mt-3","pb-mb-80","pb-4"],[3,"formGroup"],[1,"flex",2,"justify-content","space-between"],[2,"width","60%","margin-top","5px"],[1,"search-bar","form-group"],[1,"input-group-append"],["type","text","formControlName","searchContent",1,"form-control",3,"placeholder","keyup.enter"],["id","basic-addon2",1,"btn","btn-primary","ml-2",3,"click"],[1,"content-store-select",2,"width","38%"],["appearance","fill"],["name","category",3,"placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"value"],["class","text-center mt-3 mb-3",4,"ngIf","ngIfElse"],["HasData",""],[1,"text-center","mt-3","mb-3"],[1,"h3"],[1,"grid","grid-cols-12","gap-5","mt-2"],["class","box col-span-12 md:col-span-4 sm:col-span-6 mb-2","style","margin: auto",4,"ngFor","ngForOf"],[1,"box","col-span-12","md:col-span-4","sm:col-span-6","mb-2",2,"margin","auto"],[1,"card"],["alt","thumbnail",1,"card-img-top",2,"width","80vw",3,"src"],[1,"card-body"],[1,"truncate","p-2","card-text"],[1,"actionZone","p-2"],["class","azo-price text-warning",4,"ngIf"],["class","azo-price text-danger",4,"ngIf"],["class","azo-price",4,"ngIf"],["class","actionBtn clickable",3,"click",4,"ngIf"],["class","actionBtn","style","cursor: pointer",3,"click",4,"ngIf"],[1,"azo-price","text-warning"],[1,"azo-price","text-danger"],[1,"azo-price"],[1,"actionBtn","clickable",3,"click"],[2,"vertical-align","sub"],[1,"actionBtn",2,"cursor","pointer",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),t.NdJ("keyup.enter",function(){return o.onSearch()}),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",8),t.NdJ("click",function(){return o.onSearch()}),t.TgZ(11,"mat-icon"),t._uU(12,"search"),t.qZA()()()()(),t.TgZ(13,"div",9)(14,"mat-form-field",10)(15,"mat-select",11),t.NdJ("selectionChange",function(a){return o.selectValue(a.value)}),t.ALo(16,"mytranslate"),t.YNc(17,Me,2,2,"mat-option",12),t.qZA()()()()(),t.YNc(18,je,1,0,"azt-loading-effect",13),t.YNc(19,Le,3,2,"ng-template",null,14,t.W1O),t.qZA()()),2&e){const n=t.MAs(20);t.Q6J("headerTitle",t.lcZ(1,8,"lang_homework_content_store_content_bank"))("headerBackTolink","/admin/dashboard"),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(5),t.s9C("placeholder",t.lcZ(9,10,"lang_homework_content_store_search")),t.xp6(7),t.s9C("placeholder",t.lcZ(16,12,"lang_homework_content_store_all")),t.xp6(2),t.Q6J("ngForOf",o.categories),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",n)}},dependencies:[E.sg,E.O5,q.ey,ut.Hw,xt.KE,Se.gD,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,_t.Q,pt.M,Nt._,E.JJ,Y.bT,Y.GT],styles:[".dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;border-radius:5px}.input-group-append[_ngcontent-%COMP%]{display:flex}.border-test[_ngcontent-%COMP%]{border:1px solid red;min-height:50px}.azo-price[_ngcontent-%COMP%]{padding-top:5px;font-weight:500;font-size:1.2rem}.content-store-select[_ngcontent-%COMP%]{margin-top:5px}.card-text[_ngcontent-%COMP%]{display:block!important;max-width:245px!important}.content-header[_ngcontent-%COMP%]{background:inherit;background-color:#0089a7;padding:20px 0}.user_amount[_ngcontent-%COMP%]{background:inherit;background-color:#009cbe;border:none;border-radius:5px;padding:10px;box-shadow:none}.user_amount[_ngcontent-%COMP%]:hover{text-decoration:none}.mat-card-avatar[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;flex-shrink:0;object-fit:cover}@media (max-width: 992px){.dashboard__header[_ngcontent-%COMP%]{background-color:#0089a7;margin-top:-15px;margin-left:-15px;margin-right:-15px;border-radius:0}}.actionZone[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  .mat-form-field-underline{position:initial!important}@media (max-width: 768px){.card-text[_ngcontent-%COMP%]{display:block!important;max-width:120px}.header-col-center[_ngcontent-%COMP%]{text-align:center!important;display:block!important}.header-col-center[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-left:auto!important;margin-right:auto!important;margin-bottom:10px!important;text-align:center!important;display:inline-flex!important}.user_amount[_ngcontent-%COMP%]{margin-left:0!important;margin-bottom:10px!important}.content-header[_ngcontent-%COMP%]{padding:20px 0 0}}"]}),r})(),Ye=(()=>{class r extends X.Q{constructor(e,o,n,a){super(n),this.dialogRef=e,this.paymentService=o,this.commonService=n,this.data=a,this.subscriptions=new dt.w,this.content={}}getData(){this.initStatusObj(),this.data.content?(this.content=this.data.content,this.successStatusObj()):this.errorStatusObj("lang_auto_khong_tai_duoc_du_lieu")}buyContent(){this.initStatusObj(),this.subscriptions.add(this.paymentService.apiPaymentBuyFileContentByAzoPost(this.content.id).subscribe(e=>{var o;1==e.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_ban_da_mua_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3)):(this.errorStatusObj(null!==(o=e.message)&&void 0!==o?o:"",!0),this.showErrorSnack("lang_auto_thanh_toan_khong_thanh_cong"),this.onNoClick(),setTimeout(()=>{document.location.reload()},3e3))}))}gotoPack(){this.onNoClick(),this.commonService.myNavigation("/payment/azo-pack")}ngOnInit(){this.getData(),super.ngOnInit()}onNoClick(){this.dialogRef.close()}ngOnDestroy(){this.subscriptions.unsubscribe(),super.ngOnDestroy()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.so),t.Y36(Ze.t),t.Y36($.v),t.Y36(U.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["buy-content-dialog"]],features:[t.qOj],decls:21,vars:16,consts:[[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"text-center"],[1,"h5"],["class","text-left","style","border: 1px dashed red; padding: 10px 5px; border-radius: 5px;",4,"ngIf"],["class","text-center",4,"ngIf"],["mat-dialog-actions","",1,"float-right"],[1,"azt-block-button"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"btn","btn-secondary",2,"margin-left","15px",3,"click"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger"],[1,"h5","mt-1"],[1,"text-danger"],[1,"h6","mt-2","mb-1"],[1,"btn","btn-primary",3,"click"],[2,"font-size","23px","vertical-align","sub"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4,"..."),t.qZA()()()(),t.TgZ(5,"div",0)(6,"div",4)(7,"p",5),t._uU(8),t.ALo(9,"mytranslate"),t.ALo(10,"number"),t.qZA()(),t.YNc(11,Je,15,13,"div",6),t.YNc(12,Ge,13,10,"div",6),t.YNc(13,Be,4,3,"div",7),t.qZA(),t.TgZ(14,"div",8)(15,"div",9),t.YNc(16,Fe,5,3,"button",10),t.YNc(17,qe,5,3,"button",10),t.qZA(),t.TgZ(18,"button",11),t.NdJ("click",function(){return o.onNoClick()}),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()()),2&e&&(t.Q6J("hidden",!o.statusObj.loading),t.xp6(5),t.Q6J("hidden",o.statusObj.loading),t.xp6(3),t.AsE("",t.lcZ(9,10,"lang_homework_content_store_having")," ",t.lcZ(10,12,o.data.userAmount)," Azo"),t.xp6(3),t.Q6J("ngIf",o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(3),t.Q6J("ngIf",o.data.status),t.xp6(1),t.Q6J("ngIf",!o.data.status),t.xp6(2),t.Oqu(t.lcZ(20,14,"lang_buttom_cancel")))},dependencies:[E.O5,U.H8,ut.Hw,E.JJ,Y.bT],encapsulation:2}),r})();var B=l(70655),Qe=l(94327),Pt=l(25650),vt=l(37234),Ve=l(296),Ke=l(16031),We=l(20814),yt=l(15043),$e=l(35191),Xe=l(1643),Dt=l(37104),to=l(77446);function eo(r,i){1&r&&t._UZ(0,"azt-loading-effect")}function oo(r,i){1&r&&t._UZ(0,"span",31)}function no(r,i){if(1&r&&(t.TgZ(0,"div",11),t.YNc(1,oo,1,0,"span",30),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&r){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.countDonePdf<((null==e.curExportArr?null:e.curExportArr.length)||-1)),t.xp6(1),t.lnq(" ",t.lcZ(3,4,"lang_homework_export_homework_request"),"",e.countDonePdf," / ",null==e.curExportArr?null:e.curExportArr.length," ")}}function io(r,i){if(1&r&&(t.TgZ(0,"div",11)(1,"mat-icon",32),t._uU(2," check_circle "),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&r){const e=t.oxw(4);let o;t.xp6(3),t.lnq(" ",t.lcZ(4,3,"lang_homework_export_homework_complete")," ",e.countDonePdf," / ",null!==(o=null==e.curExportArr?null:e.curExportArr.length)&&void 0!==o?o:0," ")}}const ro=function(){return{fontFamily:"font_chu_dam"}};function ao(r,i){if(1&r&&(t.TgZ(0,"div",33)(1,"span",34),t._UZ(2,"azt-check-mark",35),t.qZA(),t.TgZ(3,"span",28),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&r){const e=t.oxw(4);t.Q6J("ngClass",e.curAnswer.resultParse.hideMark?"":"display")("hidden",e.curAnswer.resultParse.hideMark),t.xp6(1),t.Q6J("ngStyle",t.DdM(7,ro)),t.xp6(1),t.Q6J("mark",e.curAnswer.resultParse.point),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_point"))}}const so=function(r){return{"font-family":r}};function lo(r,i){if(1&r&&t._UZ(0,"p",36),2&r){const e=t.oxw(4);t.Q6J("ngStyle",t.VKq(2,so,null!=e.curAnswer.resultParse&&null!=e.curAnswer.resultParse.staticTextConfigParse&&e.curAnswer.resultParse.staticTextConfigParse.txtCommentFont?null==e.curAnswer.resultParse||null==e.curAnswer.resultParse.staticTextConfigParse?null:e.curAnswer.resultParse.staticTextConfigParse.txtCommentFont:"font_chu_dep"))("innerHtml",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.comment,t.oJD)}}function co(r,i){if(1&r&&(t.ynx(0),t._UZ(1,"img",39),t.BQk()),2&r){const e=i.$implicit,o=i.index,n=t.oxw(5);t.xp6(1),t.s9C("id","imgEmoji_"+o),t.s9C("src",n.isBase64ImageToExport?e:n.linkCdnGitHub+e,t.LSH)}}function uo(r,i){if(1&r&&(t.TgZ(0,"div",37),t.YNc(1,co,2,2,"ng-container",38),t.qZA()),2&r){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.commentEmoji)}}const mo=function(){return{}};function ho(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"h1",10),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",11),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"div",11)(12,"button",12),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.openDialog(n.submitedStudents))}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.YNc(15,no,4,6,"div",13),t.YNc(16,io,5,5,"div",13),t.TgZ(17,"div",14)(18,"div",15)(19,"h2",16)(20,"span"),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",17)(24,"div",18)(25,"h3",19),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"h3",19),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",20)(32,"h3",19),t._uU(33),t.ALo(34,"mytranslate"),t.qZA()()(),t.TgZ(35,"div",21)(36,"div",22),t.YNc(37,ao,6,8,"div",23),t.TgZ(38,"div",24)(39,"div",25),t.YNc(40,lo,1,4,"p",26),t.YNc(41,uo,2,1,"div",27),t.qZA(),t.TgZ(42,"span",28),t._uU(43),t.ALo(44,"mytranslate"),t.qZA()()()()(),t._UZ(45,"br")(46,"azt-export-essay-template",29),t.ALo(47,"mytranslate"),t.qZA()()()()()()}if(2&r){const e=t.oxw(3);let o;t.xp6(6),t.Oqu(t.lcZ(7,21,"lang_homework_export_homework_export_pdf")),t.xp6(3),t.AsE(" ",t.lcZ(10,23,"lang_homework_export_homework_number_student_dotted"),": ",e.submitedStudents.length," "),t.xp6(3),t.Q6J("disabled",e.loadingExportBtn),t.xp6(1),t.hij(" ",t.lcZ(14,25,"lang_homework_export_homework_continue")," "),t.xp6(2),t.Q6J("ngIf",e.isProcessingPdf),t.xp6(1),t.Q6J("ngIf",((null==e.curExportArr?null:e.curExportArr.length)||-1)>0&&e.countDonePdf===(null!==(o=null==e.curExportArr?null:e.curExportArr.length)&&void 0!==o?o:0)),t.xp6(5),t.AsE("",t.lcZ(22,27,"lang_first_and_last_name"),": ",e.curAnswer.fullName,""),t.xp6(5),t.AsE("",t.lcZ(27,29,"lang_homework_export_homework_class"),": ",null==e.data.classroomObj?null:e.data.classroomObj.name,""),t.xp6(3),t.AsE("",t.lcZ(30,31,"lang_homework_export_homework_home_work"),": ",null==e.data.homeworkObj?null:e.data.homeworkObj.name,""),t.xp6(4),t.AsE("",t.lcZ(34,33,"lang_homework_export_homework_code"),": ",e.curAnswer.id,""),t.xp6(4),t.Q6J("ngIf",e.curAnswer.resultParse),t.xp6(3),t.Q6J("ngIf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.comment),t.xp6(1),t.Q6J("ngIf",null==e.curAnswer.resultParse?null:e.curAnswer.resultParse.commentEmoji),t.xp6(2),t.Oqu(t.lcZ(44,35,"lang_homework_export_homework_comment_of_teacher")),t.xp6(3),t.Q6J("title",t.lcZ(47,37,"lang_homework_export_homework_assignment"))("result",e.curAnswer.resultParse||t.DdM(39,mo))}}function go(r,i){1&r&&(t.TgZ(0,"div",40)(1,"div",41),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_homework_export_homework_request_marking")))}function _o(r,i){if(1&r&&(t.YNc(0,ho,48,40,"div",3),t.YNc(1,go,4,3,"ng-template",null,4,t.W1O)),2&r){const e=t.MAs(2),o=t.oxw(2);t.Q6J("ngIf",o.submitedStudents.length>0)("ngIfElse",e)}}function po(r,i){if(1&r&&(t.ynx(0),t.YNc(1,eo,1,0,"azt-loading-effect",0),t.YNc(2,_o,3,2,"ng-template",null,2,t.W1O),t.BQk()),2&r){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",e)}}function vo(r,i){1&r&&(t.TgZ(0,"div",42),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_export_homework_request_browser")))}function fo(r,i){if(1&r&&(t.TgZ(0,"mat-checkbox",12),t._uU(1),t.qZA()),2&r){const e=i.index,o=t.oxw();t.Q6J("checked",o.form.value.exports[e])("formControlName",e),t.xp6(1),t.AsE(" ",e+1,". ",o.data.resultsArr[e].fullName," ")}}const bo=function(r){return{selects:r}};let wo=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c,d,u,C,x,p,k){super(a),this.cdr=e,this.answerService=o,this.dialog=n,this.commonService=a,this.activeRoute=s,this.exportPdfConvertDataService=c,this.newPdfExportService=d,this.exportPdfUtilsService=u,this.zipDataService=C,this.cdnService=x,this.timeService=p,this.homeworkExamService=k,this.folderName="results",this.homeworkHashId="",this.homeworkId="",this.countDonePdf=0,this.isProcessingPdf=!1,this.data={},this.curAnswer={},this.submitedStudents=[],this.myZip=new Pt,this.linkCdnGitHub="https://azota889.github.io/storage_public/mnote/",this.isBase64ImageToExport=!1,this.loadingExportBtn=!1}askBeforeCloseWindow(e){return!this.isProcessingPdf||(e.returnValue=!1)}openDialog(e){this.dialog.open(xo,{width:"1100px",data:{resultsArr:e}}).afterClosed().subscribe(n=>{if(n){const a=[];for(let s=0;s<n.selects.length;s++)n.selects[s]&&a.push(e[s]);this.zipAll(a)}})}finalSaveAll(){this.myZip.generateAsync({type:"blob"}).then(e=>{var o,n,a,s;this.countDonePdf++;let c=this.commonService.createFileNameExportFile([null!==(n=null===(o=this.data.classroomObj)||void 0===o?void 0:o.name)&&void 0!==n?n:"",null!==(s=null===(a=this.data.homeworkObj)||void 0===a?void 0:a.name)&&void 0!==s?s:""])+"_homework_result.zip";(0,Qe.saveAs)(e,c),console.log("after save"),this.isProcessingPdf=!1,this.cdr.detectChanges()},e=>{console.log(e)})}zipAll(e){var o,n,a,s,c,d;return(0,B.mG)(this,void 0,void 0,function*(){this.isProcessingPdf=!0,this.loadingExportBtn=!0,document.body.style.overflow="hidden",this.countDonePdf=0,this.curExportArr=e,this.myZip=new Pt;for(const x of e){const p=yield this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null===(o=x.answer)||void 0===o?void 0:o.id).toPromise();if(1==p.success){this.zipDataService.convertSubmittedAnswersObj(null===(n=p.data)||void 0===n?void 0:n.answerObj);var u=this.homeworkExamService.parserHomeworkIframeResult(null===(a=p.data)||void 0===a?void 0:a.answerObj);this.curAnswer=u||{},this.curAnswer.fullName=null!==(c=this.commonService.convertVietnameseToEnglish(null!==(s=x.fullName)&&void 0!==s?s:""))&&void 0!==c?c:"",this.curAnswer.resultParse=this.curAnswer.resultParse?yield this.exportPdfConvertDataService.processEssayResultToBase64(this.curAnswer.resultParse):this.curAnswer.resultParse,this.isBase64ImageToExport=!0;try{yield this.exportPdfUtilsService.asyncTimeout(3e3);var C=this.timeService.getCurrentSecond();console.log("Start export for "+this.curAnswer.fullName+": 0 seconds");const k=yield this.newPdfExportService.homeworkToPdf();console.log("End export: "+(this.timeService.getCurrentSecond()-C)+" seconds"),this.myZip.file(`${this.folderName}/${this.commonService.convertVietnameseToEnglish(this.curAnswer.fullName)}_${this.curAnswer.id}.pdf`,k)}catch(k){console.log(k)}this.countDonePdf<e.length-1&&this.countDonePdf++}else this.errorStatusObj(null!==(d=p.message)&&void 0!==d?d:"",!0)}this.finalSaveAll(),document.body.style.overflow="auto",setTimeout(()=>{this.loadingExportBtn=!1},2e3)})}getData(){this.homeworkId?this.answerService.apiAnswerGetStudentsHomeworkGet(parseInt(this.homeworkId,10),this.homeworkHashId).subscribe(e=>{var o,n,a,s,c,d,u,C;1==e.success?(this.zipDataService.convertStudentsHomeworkObj(null===(o=e.data)||void 0===o?void 0:o.studentObjs),this.data=null!==(n=e.data)&&void 0!==n?n:{},this.submitedStudents=e.data&&Array.isArray(null===(a=e.data)||void 0===a?void 0:a.studentObjs)?null===(s=e.data)||void 0===s?void 0:s.studentObjs.filter(x=>x.confirmedAt):new Array,this.submitedStudents.length>0?this.answerService.apiAnswerGetObjGet(this.homeworkHashId,null!==(u=null===(d=null===(c=this.submitedStudents[0])||void 0===c?void 0:c.answer)||void 0===d?void 0:d.id)&&void 0!==u?u:0).subscribe(x=>{var p,k,T;if(1==x.success){this.zipDataService.convertSubmittedAnswersObj(null===(p=x.data)||void 0===p?void 0:p.answerObj);var Z=this.homeworkExamService.parserHomeworkIframeResult(null===(k=x.data)||void 0===k?void 0:k.answerObj),N=this.commonService.myClone(Z);console.log(N),this.curAnswer=Z||{},this.curAnswer.fullName=this.submitedStudents[0].fullName,this.successStatusObj()}else this.errorStatusObj(null!==(T=e.message)&&void 0!==T?T:"",!0)}):this.stopStatusObj()):this.errorStatusObj(null!==(C=e.message)&&void 0!==C?C:"",!0)}):(this.stopStatusObj(),this.showErrorSnack("lang_cms_export_homework_cannot_get_data"))}ngOnInit(){var e,o;if(this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.isSupportedBrowser=this.exportPdfUtilsService.isSupportedBrowser(),this.homeworkId=null!==(o=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==o?o:"",this.isSupportedBrowser){this.initStatusObj();var n=[{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/html2pdf.bundle.js?v=28092021"),name:"html2pdf.bundle.js"}];this.commonService.loadScriptPromises(n).then(()=>{this.commonService.translateMetaData({title:"lang_cms_export_homework_title",description:"lang_cms_export_homework_description",image:"lang_cms_test_image"}),this.getData()})}super.ngOnInit()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.sBO),t.Y36(vt.P),t.Y36(U.uw),t.Y36($.v),t.Y36(J.gz),t.Y36(Ve.S),t.Y36(Ke.I),t.Y36(We.V),t.Y36(gt.D),t.Y36(yt.U),t.Y36(Mt.O),t.Y36($e.j))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-export-homework"]],hostBindings:function(e,o){1&e&&t.NdJ("beforeunload",function(a){return o.askBeforeCloseWindow(a)},!1,t.Jf7)},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notBrowserSupport",""],["doneLoading",""],["id","test_review_container","class","container-fluid mt-2",4,"ngIf","ngIfElse"],["noSubmit",""],["id","test_review_container",1,"container-fluid","mt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px!important","margin","0 auto"],["id","mbTestContent"],[1,"text-center","font-bold","mb-2",2,"font-size","18px"],[1,"buttons-area","mb-3","text-center"],[1,"btn","btn-primary",3,"disabled","click"],["class","buttons-area mb-3 text-center",4,"ngIf"],["id","multipleChoiceWrap",1,"exportPdfModeIndex",2,"padding","30px"],["id","multipleChoiceWrapHeader"],["id","mainTitle",1,"mb-1","text-center","font-bold",2,"font-size","18px"],["id","detailInfo",1,"flex",2,"justify-content","space-between","font-size","16px"],["id","colLeftInfo"],[1,"mb-0"],["id","colRightInfo"],["id","teacherMessage",2,"padding-top","3rem"],[1,"contentNote"],["class","box-point",3,"ngClass","hidden",4,"ngIf"],[1,"box-msg"],[1,"note"],[3,"ngStyle","innerHtml",4,"ngIf"],["class","box-emoji",4,"ngIf"],[1,"cap"],[3,"title","result"],["style","color: darkgrey;","class","spinner-border spinner-border-sm","role","status",4,"ngIf"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","darkgrey"],[2,"color","green","vertical-align","bottom"],[1,"box-point",3,"ngClass","hidden"],[1,"point",3,"ngStyle"],[3,"mark"],[3,"ngStyle","innerHtml"],[1,"box-emoji"],[4,"ngFor","ngForOf"],["alt","icon-emoji",1,"comment-emoji","img-fluid","mr-2",3,"id","src"],[2,"padding","50px"],[1,"alert","alert-info"],[1,"p-5","text-center","alert","alert-danger"]],template:function(e,o){if(1&e&&(t.YNc(0,po,4,2,"ng-container",0),t.YNc(1,vo,3,3,"ng-template",null,1,t.W1O)),2&e){const n=t.MAs(2);t.Q6J("ngIf",o.isSupportedBrowser)("ngIfElse",n)}},dependencies:[E.mk,E.sg,E.O5,E.PC,ut.Hw,_t.Q,Xe.p,Dt.B,Y.bT],styles:["#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px;align-items:center}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}#multipleChoiceWrapHeader[_ngcontent-%COMP%]{padding-left:30px;padding-right:30px}#unsupportFallback[_ngcontent-%COMP%]{width:750px;height:350px;border:1px solid grey;border-radius:3px;display:flex;align-items:center;justify-content:center}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]{display:flex}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{position:absolute;top:-30px;font-family:font_chu_dep;font-weight:700;font-size:25px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]{width:200px;min-width:200px;min-height:200px;border:2px solid #333;border-right:none;position:relative;display:flex;align-items:center;justify-content:center;padding:15px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-point[_ngcontent-%COMP%]   span.point[_ngcontent-%COMP%]{color:red;font-size:60px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]{border:2px solid #333;padding:15px;position:relative;flex:auto;min-height:200px}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{width:100%;height:100%;border:none;color:red;font-size:24px;line-height:1.5}#teacherMessage[_ngcontent-%COMP%]   .contentNote[_ngcontent-%COMP%]   .box-msg[_ngcontent-%COMP%]   .cap[_ngcontent-%COMP%]{left:300px}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:-4px;z-index:2}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}#col_examContent_wrap[_ngcontent-%COMP%]{width:1100px;margin:0 auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{position:fixed;right:5px;top:50%;z-index:3;font-size:35px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background-color:#c9c9c97a;border-radius:50%;color:#fff;margin-top:-20px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:5px}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}#multipleChoiceWrap[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;padding-top:5px}}.buttons-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:none!important}.box-emoji[_ngcontent-%COMP%]{margin-top:5px;padding:5px;width:88px;display:flex}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}"]}),r})(),xo=(()=>{class r extends X.Q{constructor(e,o,n,a){super(o),this.dialogRef=e,this.commonService=o,this.fb=n,this.data=a,this.form=new g.nJ({}),this.isSelectAll=new g.p4(!1)}get exportsFormArray(){return this.form.controls.exports}get countSelected(){return this.exportsFormArray.value.filter(e=>!0===e).length}selectAll(){const e=[];this.data.resultsArr.forEach(()=>{e.push(this.isSelectAll.value)}),this.form.controls.exports.setValue(e)}ngOnInit(){this.form=this.fb.group({exports:new g.vC([],ko(1))}),this.data.resultsArr.forEach(()=>{this.exportsFormArray.push(new g.p4(!1))}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.so),t.Y36($.v),t.Y36(g.QS),t.Y36(U.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["what-export-dialog"]],features:[t.qOj],decls:28,vars:28,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto","text-center"],[1,"clickable","d-flex","align-items-center",2,"font-weight","500"],["color","primary",1,"example-margin",3,"formControl","change"],[3,"formGroup"],["formArrayName","exports","ngFor","",3,"ngForOf"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"disabled","mat-dialog-close"],["color","primary",1,"mr-2","mb-2",3,"checked","formControlName"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",3)(9,"p")(10,"i"),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"span",5)(15,"mat-checkbox",6),t.NdJ("change",function(){return o.selectAll()}),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"form",7),t.YNc(20,fo,2,4,"ng-template",8),t.qZA()(),t.TgZ(21,"div",9)(22,"button",10),t.NdJ("click",function(){return o.onNoClick()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"button",11),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.hij("",t.lcZ(6,12,"lang_homework_export_homework_select_students_export_pdf"),"!"),t.xp6(6),t.lnq("*** ",t.lcZ(12,14,"lang_homework_export_homework_tutorial")," (",t.lcZ(13,16,"lang_homework_export_homework_choose"),": ",o.countSelected,")"),t.xp6(4),t.Q6J("formControl",o.isSelectAll),t.xp6(1),t.Oqu(o.isSelectAll.value?t.lcZ(17,18,"lang_homework_export_homework_clear_select_all"):t.lcZ(18,20,"lang_homework_export_homework_select_all")),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("ngForOf",o.exportsFormArray.controls),t.xp6(3),t.hij("",t.lcZ(24,22,"lang_buttom_cancel_clear")," "),t.xp6(2),t.Q6J("disabled",!o.form.valid)("mat-dialog-close",t.VKq(26,bo,o.exportsFormArray.value)),t.xp6(1),t.hij("",t.lcZ(27,24,"lang_buttom_agree")," "))},dependencies:[E.sg,to.oG,U.ZT,g._Y,g.JJ,g.JL,g.oH,g.sg,g.u,g.CE,pt.M,Y.bT],encapsulation:2}),r})();function ko(r=1){return e=>e.controls.map(n=>n.value).reduce((n,a)=>a?n+a:n,0)>=r?null:{required:!0}}let Et=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c){super(s),this.dialogRef=e,this.answerService=o,this.activeRoute=n,this.fb=a,this.commonService=s,this.data=c,this.subscriptions=new dt.w,this.form=new g.nJ({}),this.result=!1,this.homeworkHashId=""}getData(){this.initStatusObj(),this.data.status?this.successStatusObj():this.stopStatusObj()}cleanResult(){var e=this.commonService.getFormObj(this.form),o={homeworkHashId:this.data.itemHomework.hashId,id:this.data.ans_id,resendNote:e.reason};this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerResendAnswerPost(o).subscribe(n=>{var a;1==n.success?(this.showSuccessSnack("lang_cms_send_request_success"),this.result=!0,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.data.redirect&&this.commonService.myNavigation("/admin/testbank/homework-results-list/"+this.data.classID+"/"+this.data.itemHomework.id+"/"+this.homeworkHashId),this.successStatusObj()):(this.showErrorSnack("lang_cms_send_request_error"),this.result=!1,this.onSubmit({result:this.result,id:this.data.ans_id,itemHomework:this.data.itemHomework}),this.errorStatusObj(null!==(a=n.message)&&void 0!==a?a:""))}))}ngOnInit(){var e;this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.getData(),this.form=this.fb.group({reason:new g.p4("",g.kI.required)}),super.ngOnInit()}onNoClick(){this.dialogRef.close()}onSubmit(e){this.dialogRef.close(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.so),t.Y36(bt.P6),t.Y36(J.gz),t.Y36(g.QS),t.Y36($.v),t.Y36(U.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["clean-result-dialog"]],features:[t.qOj],decls:43,vars:32,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto","text-center"],[3,"hidden"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],[1,"intro-y",3,"hidden"],["enctype","multipart/form-data",1,"form-horizontal","text-center",3,"formGroup"],[1,"text-left",2,"border","1px dashed red","padding","10px 5px","border-radius","5px"],[1,"h5","text-danger","text-center"],[1,"h5","mb-1"],[1,"text-danger"],[1,"h5","text-danger","mt-1","mb-1"],["type","text","id","reason","formControlName","reason",1,"form-control","mt-2"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"span",8),t._uU(12,"..."),t.qZA()()()(),t.TgZ(13,"div",9)(14,"form",10)(15,"div",11)(16,"p",12),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"p",13),t._uU(20),t.ALo(21,"mytranslate"),t.TgZ(22,"span",14),t._uU(23),t.qZA(),t._uU(24),t.ALo(25,"mytranslate"),t.TgZ(26,"span",14),t._uU(27),t.ALo(28,"localizedDate"),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t._UZ(31,"hr"),t.TgZ(32,"p",15),t._uU(33),t.ALo(34,"mytranslate"),t.qZA(),t._UZ(35,"input",16),t.qZA()()(),t.TgZ(36,"div",17)(37,"button",18),t.NdJ("click",function(){return o.onNoClick()}),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"button",19),t.NdJ("click",function(){return o.cleanResult()}),t._uU(41),t.ALo(42,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,13,"lang_homework_mark_exercise_utils_request_resubmit")),t.xp6(3),t.Q6J("hidden",!o.statusObj.loading),t.xp6(5),t.Q6J("hidden",o.statusObj.loading),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(3),t.hij("(*) ",t.lcZ(18,15,"lang_homework_mark_exercise_utils_note"),":"),t.xp6(3),t.hij("",t.lcZ(21,17,"lang_homework_mark_exercise_utils_request")," "),t.xp6(3),t.hij(" ",o.data.name," "),t.xp6(1),t.hij(" ",t.lcZ(25,19,"lang_homework_mark_exercise_utils_in_homework"),"\xa0"),t.xp6(3),t.Oqu(t.xi3(28,21,o.data.deadline?o.data.deadline:o.data.itemHomework.createdAt,!1)),t.xp6(2),t.hij("\xa0",t.lcZ(30,24,"lang_homework_mark_exercise_utils_will_be_deleted"),"!"),t.xp6(4),t.Oqu(t.lcZ(34,26,"lang_homework_mark_exercise_utils_coment_request_resubmit")),t.xp6(5),t.hij(" ",t.lcZ(39,28,"lang_buttom_cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(42,30,"lang_buttom_confirm")," "))},dependencies:[g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,pt.M,Y.bT,Y.gG],encapsulation:2}),r})(),It=(()=>{class r extends X.Q{constructor(e,o,n,a){super(n),this.dialogRef=e,this.answerService=o,this.commonService=n,this.data=a,this.success=!1}ngOnInit(){this.success=this.data.status}checkNextAns(){this.dialogRef.close(),this.answerService.apiAnswerGetNextObjByHomeworkGet(this.data.homeworkHashId).subscribe(e=>{var o,n;0!=e.success?(this.commonService.myNavigationWithQueryString("/admin/homework/mark-exercise/"+(null===(n=null===(o=e.data)||void 0===o?void 0:o.obj)||void 0===n?void 0:n.id)+"/"+this.data.homeworkHashId,"?backto="+encodeURIComponent(this.data.backToLink)),setTimeout(()=>{document.location.reload()},500)):this.commonService.myNavigation("/admin/testbank/homework-results-list/"+this.data.classID+"/"+this.data.homeWorkID+"/"+this.data.homeworkHashId)})}onNoClick(){this.dialogRef.close()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(U.so),t.Y36(vt.P),t.Y36($.v),t.Y36(U.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["notice-dialog"]],features:[t.qOj],decls:22,vars:10,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"mr-1",2,"color","green"],[2,"color","red","font-size","120%","font-weight","500"],[3,"mark"],[1,"text-right","mt-3"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4)(5,"mat-icon",5),t._uU(6,"check_circle"),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t._UZ(9,"br"),t.TgZ(10,"div",3),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"span",6),t._UZ(14,"azt-check-mark",7),t.qZA()(),t._UZ(15,"br"),t.TgZ(16,"div",8)(17,"button",9),t.NdJ("click",function(){return o.onNoClick()}),t._uU(18,"Ok"),t.qZA(),t.TgZ(19,"button",10),t.NdJ("click",function(){return o.checkNextAns()}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,4,"lang_homework_mark_exercise_utils_mark_success"),""),t.xp6(4),t.hij(" ",t.lcZ(12,6,"lang_homework_mark_exercise_utils_assignment_marking")," "),t.xp6(3),t.Q6J("mark",o.data.score),t.xp6(6),t.Oqu(t.lcZ(21,8,"lang_homework_mark_exercise_utils_mark_continue")))},dependencies:[ut.Hw,Dt.B,Y.bT],styles:["#ok[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}#next[_ngcontent-%COMP%]:hover{background-color:#1e579d!important}"]}),r})();var st,Ut=l(43147),Ht=l(15431),zt=l(41752),Lt=l(64123),Ct=l(44409),mt=l(29461);class yo{constructor(){this._cBind={}}pushBind(i,e){this._cBind[i]||(this._cBind[i]=[]);var o=e.prototype.className;!o||(this._cBind[i].push({c:e,name:o}),window[i]&&this.doBind(i))}doBind(i){if(this._cBind[i]&&Array.isArray(this._cBind[i])&&window[i])for(var e=this._cBind[i];e.length>0;){var o=e.pop(),n=window[i][o.name];if(n){var a=Object.getOwnPropertyDescriptors(n.prototype);for(var s in a)"function"==typeof a[s].set&&Object.defineProperty(o.c.prototype,s,{set:a[s].set,enumerable:!0,configurable:!0}),"function"==typeof a[s].get&&Object.defineProperty(o.c.prototype,s,{get:a[s].get,enumerable:!0,configurable:!0}),a[s].value&&"function"==typeof a[s].value&&(o.c.prototype[s]=n.prototype[s]);for(var s in n)o.c[s]=n[s]}}}}function F(r,i){return function(e,o){!e.prototype.className||window.NoteGlobal.binder.pushBind(r,e)}}window.NoteGlobal||(window.NoteGlobal=new class Co{constructor(){this.binder=new yo,this.cacheJs={},this.cacheCss={},this.fonts={}}loadJs(i){}loadCss(i){}loadFont(i){}});const V="nCore";let Tt=st=class{constructor(){this._id=st.genId(this.classType),this._events={}}static genId(i){let e="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o.length;for(var a=0;a<6;a++)e+=o.charAt(Math.floor(Math.random()*n));return st._count=st._count>=Number.MAX_VALUE?0:st._count+1,e=i+"_"+st._count+"_"+e+"_"+(new Date).getTime(),e}on(i,e,o){}removeListener(i,e,o){}emit(i,...e){}getId(){}get className(){return"ClassBase"}get classType(){}};Tt=st=(0,B.gn)([F(V)],Tt);let lt=class extends Tt{init(){}getData(){}setData(i){}export(){}setHis(i){}getHis(){}getDescriptor(){}setNote(i){}getNote(){}getConfig(){}log(...i){}renderName(){}renderTags(){}setTag(i){}removeTag(i){}hasTag(i){}set name(i){}get name(){}set tags(i){}get tags(){}get className(){return"ClassNote"}get classType(){}get note(){}};lt=(0,B.gn)([F(V)],lt);let Jt=class extends lt{get className(){return"Cmd"}get classType(){}};Jt=(0,B.gn)([F(V)],Jt);let Gt=class{};Gt=(0,B.gn)([F(V)],Gt);let Bt=class{};Bt=(0,B.gn)([F(V)],Bt);let Ft=class{};Ft=(0,B.gn)([F(V)],Ft);let qt=class{static classDes(){}static removeProDes(i){}static number(i){}static string(i){}static stringColor(i){}static stringDateTime(i){}static boolean(i){}static object(i){}static array(i){}static render(i){}static scrColor(){}static srcDateTime(){}static src(i){}static notSet(){}static notExpo(){}static notGet(){}static language(){}static funchandler(){}static funcrender(){}static funcget(){}static funcset(){}};qt=(0,B.gn)([F(V)],qt);let Rt=class extends lt{start(){}stop(){}isRunning(){}set autoStart(i){}get autoStart(){}get className(){return"Handler"}get classType(){}};Rt=(0,B.gn)([F(V)],Rt);let At=class{get className(){return"Logger"}get getType(){}};At=(0,B.gn)([F(V)],At);let Ot=class extends lt{constructor(i){super(),console.log("Initing Note Version "+(null==i?void 0:i.version)),null!=i&&i.coreUrl?this.loadCore((null==i?void 0:i.coreUrl)+"?ver="+(null==i?void 0:i.version),()=>{this.initNote(i)}):this.initNote(i)}defaultCheckTouchCapable(i){}defaultCheckIsMobile(i){}defaultCheckIsWebview(i){}loadCore(i,e){console.log("load module note core "+i);var o=document.createElement("script");o.onload=()=>{window,window.NoteGlobal&&window.NoteGlobal.binder.doBind("nCore"),e()},o.onerror=()=>{console.log("Load module core error !")},o.src=i,document.head.appendChild(o)}initNote(i){}_parseModuleConfig(i){}_mergeModuleData(i,e){}addModule(i){}loadModule(i){}getStatusModule(i){}checkDependenciesModuleLoaded(i){}_findAndLoadModule(){}_loadJs(i){}_onLoadModuleFinish(i,e,o){}_doBindModule(i){}get version(){}_start(){}_initUI(){}get render(){}appendHandlerRender(i){}removeHandlerRender(i){}setTextFocus(i){}getTextFocus(){}load(i){}export(){}setClipboardData(i,e){}getClipboardData(i){}getHis(){}setHis(i){}onPageChange(i){}saveHistory(i){}undo(){}redo(){}getRegisterInstance(){}setConfig(i){}getConfig(){}get config(){}_applyConfig(){}set zoom(i){}get zoom(){}get width(){}get height(){}isTouchCapable(){}isMobile(){}isWebview(){}enableLog(){}disableLog(){}setLogger(i){}log(...i){}registerCmd(i,e){}unregisterCmd(i){}registerCmds(i){}unregisterCmds(i){}getAllRegisterCmdName(){}getRegisterCmd(){}doCmd(i,e){}registerHandler(i,e){}unregisterHandler(i){}registerHandlers(i){}unregisterHandlers(i){}getHandlerByName(i){}getAllHandler(){}getAllRegisterHandlerName(){}registerNode(i,e){}unregisterNode(i){}registerNodes(i){}unregisterNodes(i){}getAllRegisterNodeName(){}addNode(i,e){}getNodeSelected(){}setNodeSelected(i){}createNode(i){}getIdsOfListNode(i){}compareListNode(i,e){}addPage(i,e){}removePage(i){}removeAllPage(){}getIndexPage(i){}swapIndexPage(i,e){}getPageSelected(){}setPageSelected(i){}getPages(){}_initKeyboard(){}_onkeypress(i){}_onkeydown(i){}_onkeyup(i){}get keydowns(){}get key_shift(){}get key_meta(){}get key_ctrl(){}get key_alt(){}get className(){return"Note"}get classType(){}};Ot=(0,B.gn)([F(V)],Ot);let Yt=class extends At{log(...i){}get className(){return"TimestampLogger"}};Yt=(0,B.gn)([F(V)],Yt);let rt=class extends lt{init(){}renderAll(){}getData(){}setData(i){}export(){}getHis(){}setHis(i){}addChild(i){}addToParent(i){}addChilds(i){}getParent(){}removeFromParent(){}removeChild(i){}removeAllChild(){}getChild(){}clone(){}get render(){}moveable(){}rotateable(){}anchorable(){}getThumb(){}calSize(){}set childData(i){}get childData(){}set childIds(i){}get childIds(){}css(i,e){}getCss(i){}renderStyle(){}renderCssClass(){}renderSize(){}renderTransform(){}renderTransformOrigin(){}setSize(i,e){}setTransformOriginPoint(i,e){}setTransformOrigin(i,e){}onResize(){}onTransform(){}set x(i){}get x(){}set y(i){}get y(){}set width(i){}get width(){}set height(i){}get height(){}set originX(i){}get originX(){}set originY(i){}get originY(){}set scale(i){}get scale(){}set rotate(i){}get rotate(){}set opacity(i){}get opacity(){}set visible(i){}get visible(){}set zIndex(i){}get zIndex(){}set lock(i){}get lock(){}set style(i){}get style(){}set cssClass(i){}get cssClass(){}get rWidth(){}get rHeight(){}get originPoint(){}get centerPoint(){}get topPoint(){}get rightPoint(){}get bottomPoint(){}get leftPoint(){}get boundingBox(){}initEventListener(){}addMouseEvent(){}removeMouseEvent(){}_mouseover(i){}_mouseout(i){}_mousemove(i){}_mousedown(i){}_mouseup(i){}_click(i){}_dblclick(i){}get className(){return"UINode"}get classType(){}};rt=(0,B.gn)([F(V)],rt);let Qt=class{get className(){return"Utils"}static notNull(i){}static isNull(i){}static randrom(i,e){}static merge(i,e){}static deepMerge(i,e){}static deepClone(i){}static mergeNotNull(i,e){}static mergePartial(i,e){}static toArr(i){}static getTransformValue(i){}static transformToCss(i){}static loadJs(i,e,o){}static loadCss(i){}static inserClassCss(i,e){}static removeAllChildHTMLElement(i,e){}static getDistance(i,e,o,n){}static getBoundingBox(i,e){}static getOriginBoxOfBoundingBox(i,e){}static pointInRect(i,e,o){}static rectInRect(i,e){}static pointRighAngle(i,e,o,n,a,s){}static pointRighAngleRotate(i,e,o,n,a){}static angleTo180(i){}static pointLineInOrder(i,e,o,n,a,s){}static angleOf(i,e,o,n){}static getPointRotate(i,e,o,n,a){}static getRectRotate(i,e,o,n){}static getNodeConner(i){}static createPointTest(i,e,o,n,a){}};Qt=(0,B.gn)([F(V)],Qt);const ct="nNode";let Vt=class extends rt{initRender(){}anchorable(){}calSize(){}setData(i){}get className(){return"UIGroup"}};Vt=(0,B.gn)([F(ct)],Vt);let Kt=class extends rt{initRender(){}getData(){}calSize(){}renderAll(){}setSize(i,e){}anchorable(){}set src(i){}get src(){}set keepRatio(i){}get keepRatio(){}get className(){return"UIImage"}};Kt=(0,B.gn)([F(ct)],Kt);let Wt=class extends rt{init(){}initRender(){}calSize(){}setSize(i,e){}getData(){}renderAll(){}anchorable(){}get className(){return"UILayer"}};Wt=(0,B.gn)([F(ct)],Wt);var nt=(()=>{return(r=nt||(nt={})).FIT_BACKGROUND="FIT_BACKGROUND",r.FIT_WIDTH="FIT_WIDTH",r.FIT_HEIGHT="FIT_HEIGHT",r.FIT_PAGE="FIT_PAGE",r.FIT_ALL="FIT_ALL",nt;var r})();let $t=class extends rt{init(){}getData(){}initRender(){}initBackgroundRender(){}renderAll(){}renderBackgroundImage(){}anchorable(){}setSize(i,e){}onResize(){}upateSize(){}set backgroundImageSrc(i){}get backgroundImageSrc(){}set backgroundSizeMode(i){}get backgroundSizeMode(){}set backgroundVerticalAlign(i){}get backgroundVerticalAlign(){}set backgroundHorizonAlign(i){}get backgroundHorizonAlign(){}set pageSizeType(i){}get pageSizeType(){}get className(){return"UIPage"}get classType(){}};$t=(0,B.gn)([F(ct)],$t);let Xt=class extends rt{init(){}initRender(){}calSize(){}setSize(i,e){}getData(){}renderAll(){}anchorable(){}get className(){return"UIShape"}};Xt=(0,B.gn)([F(ct)],Xt);let te=class extends rt{init(){}initRender(){}calSize(){}setSize(i,e){}getData(){}anchorable(){}_textFocus(){}_textBlur(){}_textChange(){}renderAll(){}set fontFamily(i){}get fontFamily(){}set textContent(i){}get textContent(){}set fontSize(i){}get fontSize(){}set placeHolder(i){}get placeHolder(){}set fontColor(i){}get fontColor(){}set isBold(i){}get isBold(){}set isItalic(i){}get isItalic(){}set isUnderline(i){}get isUnderline(){}set letterSpacing(i){}get letterSpacing(){}set lineSpacing(i){}get lineSpacing(){}set align(i){}get align(){}set paddingBottom(i){}get paddingBottom(){}get className(){return"UIText"}};te=(0,B.gn)([F(ct)],te);var ee=l(91079),oe=l(47423),To=l(78029);function Ao(r,i){if(1&r&&(t.TgZ(0,"option",71),t._uU(1),t.qZA()),2&r){const e=i.$implicit;t.Q6J("ngValue",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function Oo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"mat-option",72),t.NdJ("optionSelected",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeFontSize())}),t._uU(1),t.qZA()}if(2&r){const e=i.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function So(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeAlignText("center"))}),t.O4$(),t.TgZ(1,"svg",74),t._UZ(2,"path",75),t.qZA()()}}function Zo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeAlignText("right"))}),t.O4$(),t.TgZ(1,"svg",76),t._UZ(2,"path",77),t.qZA()()}}function Mo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeAlignText("left"))}),t.O4$(),t.TgZ(1,"svg",78),t._UZ(2,"path",79),t.qZA()()}}function jo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",73),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeListMode("ul-list"))}),t.O4$(),t.TgZ(1,"svg",80),t._UZ(2,"path",81),t.qZA()()}}function No(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeListMode("ol-list"))}),t.O4$(),t.TgZ(1,"svg",80),t._UZ(2,"path",81),t.qZA()()}}function Po(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.changeListMode("off"))}),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",84)(3,"path",85),t.qZA()()}}const St=function(){return["#fff","#000","#2889e9","#e920e9","#fff500","rgb(236,64,64)"]},et=function(r){return{"azt-toolbar-active":r}};function Do(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",52)(1,"div",3)(2,"select",53),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.textStyleCss.fontFamily=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeFontFamily())}),t.YNc(3,Ao,2,2,"option",54),t.qZA()(),t.TgZ(4,"div",3)(5,"input",55),t.NdJ("ngModelChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.textStyleCss.fontSize=n)})("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeFontSize())}),t.qZA(),t.TgZ(6,"mat-autocomplete",null,56),t.YNc(8,Oo,2,2,"mat-option",57),t.qZA()(),t.TgZ(9,"div",3)(10,"div",58),t.NdJ("colorPickerChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.colorText=n)})("colorPickerChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeColorText())}),t.qZA()(),t.TgZ(11,"div",3)(12,"div",58),t.NdJ("colorPickerChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.colorTextBackground=n)})("colorPickerChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeBackgroundText())}),t.qZA()(),t.TgZ(13,"div",59),t.ALo(14,"mytranslate"),t.YNc(15,So,3,0,"button",60),t.YNc(16,Zo,3,0,"button",60),t.YNc(17,Mo,3,0,"button",60),t.qZA(),t.TgZ(18,"div",59),t.ALo(19,"mytranslate"),t.YNc(20,jo,3,0,"button",60),t.YNc(21,No,3,0,"button",61),t.YNc(22,Po,4,0,"button",61),t.qZA(),t.TgZ(23,"div",59),t.ALo(24,"mytranslate"),t.TgZ(25,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeTextBold())}),t.O4$(),t.TgZ(26,"svg",63),t._UZ(27,"path",64),t.qZA()()(),t.kcU(),t.TgZ(28,"div",59),t.ALo(29,"mytranslate"),t.TgZ(30,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeTextItalic())}),t.O4$(),t.TgZ(31,"svg",65),t._UZ(32,"path",66),t.qZA()()(),t.kcU(),t.TgZ(33,"div",59),t.ALo(34,"mytranslate"),t.TgZ(35,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeTextUnderline())}),t.O4$(),t.TgZ(36,"svg",67),t._UZ(37,"path",68),t.qZA()()(),t.kcU(),t.TgZ(38,"div",59),t.ALo(39,"mytranslate"),t.TgZ(40,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeTextUpperCase())}),t.O4$(),t.TgZ(41,"svg",69),t._UZ(42,"path",70),t.qZA()()()()}if(2&r){const e=t.MAs(7),o=t.oxw();t.xp6(2),t.Q6J("ngModel",o.textStyleCss.fontFamily),t.xp6(1),t.Q6J("ngForOf",o.fontList),t.xp6(2),t.Q6J("matAutocomplete",e)("ngModel",o.textStyleCss.fontSize),t.xp6(3),t.Q6J("ngForOf",o.fontSizeArray),t.xp6(2),t.Udp("background",o.colorText),t.Q6J("cpPresetColors",t.DdM(47,St))("colorPicker",o.colorText),t.xp6(2),t.Udp("background",o.colorTextBackground),t.Q6J("cpPresetColors",t.DdM(48,St))("colorPicker",o.colorTextBackground),t.xp6(1),t.s9C("matTooltip",t.lcZ(14,35,"lang_auto_can_chinh")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngIf","left"==o.textAlign),t.xp6(1),t.Q6J("ngIf","center"==o.textAlign),t.xp6(1),t.Q6J("ngIf","right"==o.textAlign),t.xp6(1),t.s9C("matTooltip",t.lcZ(19,37,"lang_auto_danh_sach")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngIf","off"==o.listStyle),t.xp6(1),t.Q6J("ngIf","ul-list"==o.listStyle),t.xp6(1),t.Q6J("ngIf","ol-list"==o.listStyle),t.xp6(1),t.s9C("matTooltip",t.lcZ(24,39,"lang_auto_in_dam")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngClass",t.VKq(49,et,o.textStyle.bold)),t.xp6(3),t.s9C("matTooltip",t.lcZ(29,41,"lang_auto_in_nghieng")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngClass",t.VKq(51,et,o.textStyle.italic)),t.xp6(3),t.s9C("matTooltip",t.lcZ(34,43,"lang_auto_gach_duoi")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngClass",t.VKq(53,et,o.textStyle.underline)),t.xp6(3),t.s9C("matTooltip",t.lcZ(39,45,"lang_auto_chu_hoa")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(2),t.Q6J("ngClass",t.VKq(55,et,o.textStyle.uppercase))}}function Eo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",86)(1,"div",3),t._UZ(2,"mat-slider",87),t.qZA(),t.TgZ(3,"div",3)(4,"div",58),t.NdJ("colorPickerChange",function(n){t.CHM(e);const a=t.oxw();return t.KtG(a.colorBackground=n)})("colorPickerChange",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.changeColorText())}),t.qZA()(),t.TgZ(5,"div",3)(6,"button",88),t.O4$(),t.TgZ(7,"svg",89),t._UZ(8,"path",90),t.qZA()()(),t.kcU(),t.TgZ(9,"div",3)(10,"button",91),t.O4$(),t.TgZ(11,"svg",92),t._UZ(12,"path",93),t.qZA()()(),t.kcU(),t.TgZ(13,"div",94)(14,"button",91),t.O4$(),t.TgZ(15,"svg",95),t._UZ(16,"rect",96),t.qZA()()(),t.kcU(),t.TgZ(17,"div",3)(18,"button",91),t.O4$(),t.TgZ(19,"svg",95),t._UZ(20,"circle",97),t.qZA()()(),t.kcU(),t.TgZ(21,"div",3)(22,"button",91),t.O4$(),t.TgZ(23,"svg",95),t._UZ(24,"line",48)(25,"polyline",98),t.qZA()()()()}if(2&r){const e=t.oxw();t.xp6(4),t.Udp("background",e.colorBackground),t.Q6J("cpPresetColors",t.DdM(4,St))("colorPicker",e.colorBackground)}}function Io(r,i){1&r&&(t.TgZ(0,"div",99)(1,"div",3),t._UZ(2,"mat-slider",87),t.qZA()())}function Uo(r,i){1&r&&t._UZ(0,"div",99)}function Ho(r,i){1&r&&t._UZ(0,"div",100)}function zo(r,i){1&r&&t._UZ(0,"div",100)}function Lo(r,i){if(1&r&&(t.TgZ(0,"div",101)(1,"div",102),t._UZ(2,"img",103),t.qZA(),t.TgZ(3,"div",104)(4,"span",105),t._uU(5),t.qZA(),t.TgZ(6,"div",106)(7,"button",107),t.O4$(),t.TgZ(8,"svg",95),t._UZ(9,"polyline",108),t.qZA()(),t.kcU(),t.TgZ(10,"button",109),t.O4$(),t.TgZ(11,"svg",95),t._UZ(12,"polyline",110),t.qZA()()()()()),2&r){const e=i.index;t.xp6(5),t.hij(" ",e+1," ")}}function Jo(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",111)(1,"ul",112)(2,"li")(3,"button",113),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.copyHandler())}),t.TgZ(4,"span",114),t._UZ(5,"lucide-icon",115),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"li")(9,"button",116),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.pasteHandler())}),t.TgZ(10,"span",114),t._UZ(11,"lucide-icon",117),t.qZA(),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"li")(15,"button",113),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteSelector())}),t.TgZ(16,"span",114),t._UZ(17,"lucide-icon",118),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"li"),t._UZ(21,"hr",119),t.qZA(),t.TgZ(22,"li")(23,"a",120)(24,"span",114),t._UZ(25,"lucide-icon",121),t.qZA(),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()(),t.TgZ(28,"li"),t._UZ(29,"hr",119),t.qZA()()()}if(2&r){const e=t.oxw();let o,n;t.xp6(3),t.Q6J("disabled",0===(null==e.note||null==(o=e.note.getNodeSelected())?null:o.length)),t.xp6(3),t.hij(" ",t.lcZ(7,6,"lang_auto_copy")," "),t.xp6(6),t.hij(" ",t.lcZ(13,8,"lang_auto_paste")," "),t.xp6(3),t.Q6J("disabled",0===(null==e.note||null==(n=e.note.getNodeSelected())?null:n.length)),t.xp6(3),t.hij(" ",t.lcZ(19,10,"lang_auto_xoa")," "),t.xp6(8),t.hij(" ",t.lcZ(27,12,"lang_auto_nhom")," ")}}function Go(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",122)(1,"div",123)(2,"button",91),t.O4$(),t.TgZ(3,"svg",95),t._UZ(4,"rect",124)(5,"path",125),t.qZA()()(),t.kcU(),t.TgZ(6,"div",123)(7,"button",91),t.O4$(),t.TgZ(8,"svg",126),t._UZ(9,"path",127),t.qZA()()(),t.kcU(),t.TgZ(10,"div",123)(11,"button",73),t.NdJ("click",function(n){t.CHM(e);const a=t.oxw(),s=t.MAs(77);return t.KtG(a.onContextMenu(n,"",s))}),t.O4$(),t.TgZ(12,"svg",95),t._UZ(13,"circle",128)(14,"circle",129)(15,"circle",130),t.qZA()()()()}}const Bo=function(r){return{open:r}},Fo=function(r){return{"open-tool":r}},qo=function(r){return{"active-tool-btn":r}};let Ro=(()=>{class r extends X.Q{constructor(e,o){super(e),this.commonService=e,this.contextMenuService=o,this.colorBackground="#000",this.colorText="#000",this.colorTextBackground="#fff",this.textStyleCss={},this.showSideBar=!1,this.fontList=[],this.mode="",this.textAlign="left",this.listStyle="off",this.textStyle={},this.pageList=[],this.fontSizeArray=[],this.isShowToolEditor=!1,this.configExpandTool=[]}getFontDefault(){this.fontList=[{name:"Arial",fontFamily:"Arial, Helvetica, sans-serif"},{name:"Roboto",fontFamily:"Roboto, Helvetica, sans-serif"},{name:"Times New Roman",fontFamily:"Times New Roman, Arial, sans-serif"},{name:"Helvetica",fontFamily:"Helvetica, Arial, sans-serif"},{name:"Verdana",fontFamily:"Verdana, Geneva, sans-serif"},{name:"Geneva",fontFamily:"Geneva, Verdana, sans-serif"},{name:"Tahoma",fontFamily:"Tahoma, Arial, sans-serif"},{name:"Georgia",fontFamily:"Georgia, Arial, sans-serif"},{name:"Garamond",fontFamily:"Garamond, Arial, sans-serif"},{name:"Courier New",fontFamily:"Courier New, Arial, sans-serif"},{name:"Brush Script MT",fontFamily:"Brush Script MT, Arial, sans-serif"},{name:"Trebuchet MS",fontFamily:"Trebuchet MS, Arial, sans-serif"}]}drop(e){(0,Ct.bA)(this.pageList,e.previousIndex,e.currentIndex)}changeFontFamily(){var e,o,n;null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.fontFamily=null!==(n=this.textStyleCss.fontFamily)&&void 0!==n?n:"Arial")}changeFontSize(){var e,o,n;null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.fontSize=(null!==(n=this.textStyleCss.fontSize)&&void 0!==n?n:"14")+"px")}changeColorText(){var e,o;null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.color=this.colorText)}changeBackgroundText(){var e,o;null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.backgroundColor=this.colorTextBackground)}changeAlignText(e){var o,n;this.textAlign=e,null!==(o=this.EventTarget)&&void 0!==o&&o.target&&((null===(n=this.EventTarget)||void 0===n?void 0:n.target).style.textAlign=this.textAlign)}changeTextBold(){var e,o,n,a;this.textStyle.bold=!this.textStyle.bold,this.textStyle.bold?null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.fontWeight="700"):null!==(n=this.EventTarget)&&void 0!==n&&n.target&&((null===(a=this.EventTarget)||void 0===a?void 0:a.target).style.fontWeight="400")}changeTextItalic(){var e,o,n,a;this.textStyle.italic=!this.textStyle.italic,this.textStyle.italic?null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.fontStyle="italic"):null!==(n=this.EventTarget)&&void 0!==n&&n.target&&((null===(a=this.EventTarget)||void 0===a?void 0:a.target).style.fontStyle="normal")}changeTextUnderline(){var e,o,n,a;this.textStyle.underline=!this.textStyle.underline,this.textStyle.underline?null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.textDecoration="underline"):null!==(n=this.EventTarget)&&void 0!==n&&n.target&&((null===(a=this.EventTarget)||void 0===a?void 0:a.target).style.textDecoration="none")}changeTextUpperCase(){var e,o,n,a;this.textStyle.uppercase=!this.textStyle.uppercase,this.textStyle.uppercase?null!==(e=this.EventTarget)&&void 0!==e&&e.target&&((null===(o=this.EventTarget)||void 0===o?void 0:o.target).style.textTransform="uppercase"):null!==(n=this.EventTarget)&&void 0!==n&&n.target&&((null===(a=this.EventTarget)||void 0===a?void 0:a.target).style.textTransform="none")}toggleSideBar(){this.showSideBar=!this.showSideBar}changeModeEditor(e){this.mode=e}changeListMode(e){this.listStyle=e}onContextMenu(e,o,n){e&&(this.contextMenuService.show.next({anchorElement:null!=e&&e.target?e.target:void 0,contextMenu:n,event:e,item:o}),null==e||e.preventDefault(),null==e||e.stopPropagation())}getStyleElement(e){let o=e.target;if(this.EventTarget=e,o&&"SPAN"==o.children[0].tagName){let a=o.children[0];if(a){let s=this.getStyle(a,"font-size").split("px")[0],c=this.getStyle(a,"font-weight"),d=this.getStyle(a,"font-family"),u=this.getStyle(a,"font-style"),C=this.getStyle(a,"color"),x=this.getStyle(a,"text-align"),p=this.getStyle(a,"background");this.colorText=C,this.colorTextBackground=p,this.textStyleCss.fontFamily=d,this.textStyleCss.fontSize=s,this.textStyleCss.fontWeight=c,this.textStyleCss.fontStyle=u,this.textAlign="start"==x?"left":x}this.mode="text"}}getStyle(e,o){let n;const a=e.ownerDocument.defaultView;return a&&a.getComputedStyle?(o=o.replace(/([A-Z])/g,"-$1").toLowerCase(),a.getComputedStyle(e,null).getPropertyValue(o)):e.currentStyle?(o=o.replace(/\-(\w)/g,function(s,c){return c.toUpperCase()}),n=e.currentStyle[o],n):""}zoomInPage(){var e;null===(e=this.note)||void 0===e||e.doCmd("ZoomIn")}zoomOutPage(){var e;null===(e=this.note)||void 0===e||e.doCmd("ZoomOut")}undoHandler(){var e;null===(e=this.note)||void 0===e||e.doCmd("Undo")}redoHandler(){var e;null===(e=this.note)||void 0===e||e.doCmd("Redo")}copyHandler(){var e;null===(e=this.note)||void 0===e||e.doCmd("Copy")}pasteHandler(){var e;null===(e=this.note)||void 0===e||e.doCmd("Paste")}deleteSelector(){var e;null===(e=this.note)||void 0===e||e.doCmd("Delete")}toggleToolEditor(){this.isShowToolEditor=!this.isShowToolEditor}start(){if(this.note){this.note.log("start !"),this.note.addPage([{backgroundImageSrc:"https://png.pngtree.com/background/20211215/original/pngtree-background-biru-keren-dan-kosong-abstract-untuk-template-desain-ppt-picture-image_1456303.jpg",backgroundSizeMode:nt.FIT_PAGE,style:{backgroundColor:"#CCCC00"},childData:[{className:"UILayer",width:432,height:445,scale:.57,x:300,y:700,rotate:125,style:{backgroundColor:"red"},childData:[{className:"UIShape",x:250,y:50,width:80,height:80,style:{backgroundColor:"yellow"}}]},{className:"UIShape",width:50,height:100,rotate:30,x:200,y:400,style:{backgroundColor:"green"}},{className:"UIText",width:200,style:{}},{className:"UIAudio",src:"https://vnso-zn-5-tf-mp3-s1-m-zmp3.zmdcdn.me/db247c98dfd936876fc8/2889896113433854922?authen=exp=1669802532~acl=/db247c98dfd936876fc8/*~hmac=532c78deed33b1149c04f460deeb6ea1",x:300,y:100}]},{backgroundImageSrc:"https://png.pngtree.com/background/20211215/original/pngtree-background-biru-keren-dan-kosong-abstract-untuk-template-desain-ppt-picture-image_1456303.jpg",backgroundSizeMode:nt.FIT_BACKGROUND,childData:[]},{backgroundImageSrc:"https://png.pngtree.com/background/20211215/original/pngtree-background-biru-keren-dan-kosong-abstract-untuk-template-desain-ppt-picture-image_1456303.jpg",backgroundSizeMode:nt.FIT_PAGE},{backgroundImageSrc:"images/test1.jpg",backgroundSizeMode:nt.FIT_WIDTH},{backgroundImageSrc:"images/test2.jpg",backgroundSizeMode:nt.FIT_WIDTH},{backgroundImageSrc:"images/test3.jpg",backgroundSizeMode:nt.FIT_WIDTH}]);for(var e=0;e<1;e++)this.note.addNode({className:"UIImage",src:"images/addIconPNG.png",width:80,height:80,rotate:10+100*Math.random(),scale:1+.5*Math.random(),x:400+100*Math.random(),y:500+60*Math.random()},0)}}ngOnInit(){super.ngOnInit(),this.getFontDefault(),this.pageList=[{numberPage:1},{numberPage:2}],this.fontSizeArray=[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,22,24,26,28,36,48,72]}ngAfterViewInit(){let e=document.getElementById("nNote");e&&(this.note=new Ot({version:"0.1",coreUrl:"http://localhost:8005/nCore.js",modules:"http://localhost:8005/module.json",backgroundColor:"#CCCCCC",parent:e,width:e.offsetWidth,height:e.offsetHeight,zoom:e.offsetWidth/1e3,onready:()=>{this.start()}}))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36($.v),t.Y36(mt.Lk))},r.\u0275cmp=t.Xpm({type:r,selectors:[["azt-editor-graphic"]],viewQuery:function(e,o){if(1&e&&t.Gf(mt.GI,5),2&e){let n;t.iGM(n=t.CRH())&&(o.basicMenu=n.first)}},features:[t.qOj],decls:82,vars:35,consts:[[1,"box","relative","azt-graphic"],[1,"toolbar-list","box","border-b","border-slate-200","dark:border-darkmode-400"],[1,"flex","items-center","border-b","border-slate-200","dark:border-darkmode-400","p-2"],[1,"toolbar-item"],["mat-button","",1,"btn-icon",3,"click"],[1,"w-5","h-5","inline-block"],["name","menu"],["name","zoom-in"],["name","zoom-out"],["name","undo"],[1,"toolbar-item",3,"click"],["mat-button","",1,"btn-icon"],["name","redo"],[1,"toolbar-item",2,"margin-left","auto"],["name","settings"],[1,"overflow-x-auto","toolbar-list-bottom",2,"width","100%"],["class","toolbar-child flex items-center","id","toolbar-child-text",4,"ngIf"],["class","toolbar-child flex items-center","id","toolbar-child-pen",4,"ngIf"],["class","toolbar-child flex items-center","id","toolbar-child-eraser",4,"ngIf"],["class","toolbar-child flex items-center","id","toolbar-child-touch",4,"ngIf"],[1,"azt-graphic-main"],["cdkDropList","",1,"side-bar","border-r","border-slate-200","dark:border-darkmode-400","box",3,"ngClass","cdkDropListDropped"],["class","side-bar-item","cdkDrag","",4,"ngFor","ngForOf"],["id","nMainContent",1,"azt-graphic-content","relative","w-full","h-full"],["id","nNote",1,"w-full","h-full",3,"contextMenu"],[1,"tool-editor","flex","items-center"],[1,"tool-editor-list","box",3,"ngClass"],[1,"flex","items-center","tool-editor-list-main"],["mat-icon-button","",1,"btn-icon",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-hand-index","w-5","h-5","lucide"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 1 0 1 0V6.435a4.9 4.9 0 0 1 .106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 0 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.035a.5.5 0 0 1-.416-.223l-1.433-2.15a1.5 1.5 0 0 1-.243-.666l-.345-3.105a.5.5 0 0 1 .399-.546L5 8.11V9a.5.5 0 0 0 1 0V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v5.34l-1.2.24a1.5 1.5 0 0 0-1.196 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"lucide","w-5","h-5"],["d","m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"],["d","M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547 3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"],["d","M1.5 2.5A1.5 1.5 0 0 1 3 1h10a1.5 1.5 0 0 1 1.5 1.5v3.563a2 2 0 0 1 0 3.874V13.5A1.5 1.5 0 0 1 13 15H3a1.5 1.5 0 0 1-1.5-1.5V9.937a2 2 0 0 1 0-3.874V2.5zm1 3.563a2 2 0 0 1 0 3.874V13.5a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V9.937a2 2 0 0 1 0-3.874V2.5A.5.5 0 0 0 13 2H3a.5.5 0 0 0-.5.5v3.563zM2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"],["d","M11.434 4H4.566L4.5 5.994h.386c.21-1.252.612-1.446 2.173-1.495l.343-.011v6.343c0 .537-.116.665-1.049.748V12h3.294v-.421c-.938-.083-1.054-.21-1.054-.748V4.488l.348.01c1.56.05 1.963.244 2.173 1.496h.386L11.434 4z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7"],["x1","16","y1","5","x2","22","y2","5"],["x1","19","y1","2","x2","19","y2","8"],["cx","9","cy","9","r","2"],["d","m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chat-left-dots","w-5","h-5","lucide"],["d","M14 1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4.414A2 2 0 0 0 3 11.586l-2 2V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12.793a.5.5 0 0 0 .854.353l2.853-2.853A1 1 0 0 1 4.414 12H14a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"],[1,"btn","btn-primary","rounded-full","p-3","btn-show-tool",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["basicMenu",""],["contextMenuItem",""],["chooseMenu",""],["id","toolbar-child-text",1,"toolbar-child","flex","items-center"],[1,"form-select","form-select-sm",2,"min-width","110px",3,"ngModel","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],["type","number","value","16",1,"form-control","form-control-sm",2,"width","54px",3,"matAutocomplete","ngModel","ngModelChange","change"],["auto","matAutocomplete"],[3,"value","optionSelected",4,"ngFor","ngForOf"],[1,"rounded-full","w-6","h-6","cursor-pointer","border","border-slate-200","dark:border-darkmode-400",3,"cpPresetColors","colorPicker","colorPickerChange"],[1,"toolbar-item",3,"matTooltip","matTooltipShowDelay"],["mat-button","","class","btn-icon btn-icon-child",3,"click",4,"ngIf"],["mat-button","","class","btn-icon btn-icon-child azt-toolbar-active",3,"click",4,"ngIf"],["mat-button","",1,"btn-icon","btn-icon-child",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-type-bold","w-5","h-5","lucide"],["d","M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13H8.21zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-type-italic","w-5","h-5","lucide"],["d","M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-type-underline","w-5","h-5","lucide"],["d","M5.313 3.136h-1.23V9.54c0 2.105 1.47 3.623 3.917 3.623s3.917-1.518 3.917-3.623V3.136h-1.23v6.323c0 1.49-.978 2.57-2.687 2.57-1.709 0-2.687-1.08-2.687-2.57V3.136zM12.5 15h-9v-1h9v1z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-type","w-5","h-5","lucide"],["d","m2.244 13.081.943-2.803H6.66l.944 2.803H8.86L5.54 3.75H4.322L1 13.081h1.244zm2.7-7.923L6.34 9.314H3.51l1.4-4.156h.034zm9.146 7.027h.035v.896h1.128V8.125c0-1.51-1.114-2.345-2.646-2.345-1.736 0-2.59.916-2.666 2.174h1.108c.068-.718.595-1.19 1.517-1.19.971 0 1.518.52 1.518 1.464v.731H12.19c-1.647.007-2.522.8-2.522 2.058 0 1.319.957 2.18 2.345 2.18 1.06 0 1.716-.43 2.078-1.011zm-1.763.035c-.752 0-1.456-.397-1.456-1.244 0-.65.424-1.115 1.408-1.115h1.805v.834c0 .896-.752 1.525-1.757 1.525z"],[3,"ngValue"],[3,"value","optionSelected"],["mat-button","",1,"btn-icon","btn-icon-child",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-text-left","w-5","h-5","lucide"],["fill-rule","evenodd","d","M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-text-center","w-5","h-5","lucide"],["fill-rule","evenodd","d","M4 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-text-right","w-5","h-5","lucide"],["fill-rule","evenodd","d","M6 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm4-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-4-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-list-ul","lucide","w-5","h-5"],["fill-rule","evenodd","d","M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"],["mat-button","",1,"btn-icon","btn-icon-child","azt-toolbar-active",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-list-ol","w-5","h-5","lucide"],["fill-rule","evenodd","d","M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"],["d","M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338v.041zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635V5z"],["id","toolbar-child-pen",1,"toolbar-child","flex","items-center"],["color","primary","tickInterval","1","thumbLabel","","step","1","min","1","max","100","aria-label","units"],["mat-button","",1,"btn-icon","btn-icon-child","azt-toolbar-active"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-brush"],["d","M15.825.12a.5.5 0 0 1 .132.584c-1.53 3.43-4.743 8.17-7.095 10.64a6.067 6.067 0 0 1-2.373 1.534c-.018.227-.06.538-.16.868-.201.659-.667 1.479-1.708 1.74a8.118 8.118 0 0 1-3.078.132 3.659 3.659 0 0 1-.562-.135 1.382 1.382 0 0 1-.466-.247.714.714 0 0 1-.204-.288.622.622 0 0 1 .004-.443c.095-.245.316-.38.461-.452.394-.197.625-.453.867-.826.095-.144.184-.297.287-.472l.117-.198c.151-.255.326-.54.546-.848.528-.739 1.201-.925 1.746-.896.126.007.243.025.348.048.062-.172.142-.38.238-.608.261-.619.658-1.419 1.187-2.069 2.176-2.67 6.18-6.206 9.117-8.104a.5.5 0 0 1 .596.04zM4.705 11.912a1.23 1.23 0 0 0-.419-.1c-.246-.013-.573.05-.879.479-.197.275-.355.532-.5.777l-.105.177c-.106.181-.213.362-.32.528a3.39 3.39 0 0 1-.76.861c.69.112 1.736.111 2.657-.12.559-.139.843-.569.993-1.06a3.122 3.122 0 0 0 .126-.75l-.793-.792zm1.44.026c.12-.04.277-.1.458-.183a5.068 5.068 0 0 0 1.535-1.1c1.9-1.996 4.412-5.57 6.052-8.631-2.59 1.927-5.566 4.66-7.302 6.792-.442.543-.795 1.243-1.042 1.826-.121.288-.214.54-.275.72v.001l.575.575zm-4.973 3.04.007-.005a.031.031 0 0 1-.007.004zm3.582-3.043.002.001h-.002z"],["mat-button","",1,"btn-icon","btn-icon-child"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-dash-lg"],["fill-rule","evenodd","d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"],["mat-button","",1,"toolbar-item"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x","2","y","6","width","20","height","12","rx","2"],["cx","12","cy","12","r","10"],["points","12 5 19 12 12 19"],["id","toolbar-child-eraser",1,"toolbar-child","flex","items-center"],["id","toolbar-child-touch",1,"toolbar-child","flex","items-center"],["cdkDrag","",1,"side-bar-item"],[1,"page"],["src","https://media-cdn-v2.laodong.vn/Storage/NewsPortal/2022/7/7/1065050/De2.jpg","alt","",2,"width","100%"],[1,"page-number","mt-1","flex","items-center"],[1,"font-medium","text-xs"],[1,"ml-auto","flex","items-center"],[1,"btn","p-0","btn-sm","btn-transparent","mr-2"],["points","18 15 12 9 6 15"],[1,"btn","p-0","btn-sm","btn-transparent"],["points","6 9 12 15 18 9"],[1,"dropdown-menu","w-72","show","relative","p-3"],[1,"dropdown-content"],[1,"dropdown-item","w-full",3,"disabled","click"],[1,"w-5","h-5","mr-2"],["name","copy"],[1,"dropdown-item","w-full",3,"click"],["name","clipboard"],["name","trash-2"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[1,"dropdown-item"],["name","component"],[1,"box","flex","items-center","p-2"],[1,"mx-1"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24",1,"w-5","h-5","lucide"],["fill","currentColor","d","M8 5a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3h4.25a.75.75 0 1 1 0 1.5H19V18a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V6.5H3.75a.75.75 0 0 1 0-1.5H8zM6.5 6.5V18c0 .83.67 1.5 1.5 1.5h8c.83 0 1.5-.67 1.5-1.5V6.5h-11zm3-1.5h5c0-.83-.67-1.5-1.5-1.5h-2c-.83 0-1.5.67-1.5 1.5zm-.25 4h1.5v8h-1.5V9zm4 0h1.5v8h-1.5V9z"],["cx","12","cy","12","r","1"],["cx","19","cy","12","r","1"],["cx","5","cy","12","r","1"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return o.toggleSideBar()}),t.TgZ(5,"span",5),t._UZ(6,"lucide-icon",6),t.qZA()()(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return o.zoomInPage()}),t.TgZ(9,"span",5),t._UZ(10,"lucide-icon",7),t.qZA()()(),t.TgZ(11,"div",3)(12,"button",4),t.NdJ("click",function(){return o.zoomOutPage()}),t.TgZ(13,"span",5),t._UZ(14,"lucide-icon",8),t.qZA()()(),t.TgZ(15,"div",3)(16,"button",4),t.NdJ("click",function(){return o.undoHandler()}),t.TgZ(17,"span",5),t._UZ(18,"lucide-icon",9),t.qZA()()(),t.TgZ(19,"div",10),t.NdJ("click",function(){return o.redoHandler()}),t.TgZ(20,"button",11)(21,"span",5),t._UZ(22,"lucide-icon",12),t.qZA()()(),t.TgZ(23,"div",13)(24,"button",11)(25,"span",5),t._UZ(26,"lucide-icon",14),t.qZA()()()(),t.TgZ(27,"div",15),t.YNc(28,Do,43,57,"div",16),t.YNc(29,Eo,26,5,"div",17),t.YNc(30,Io,3,0,"div",18),t.YNc(31,Uo,1,0,"div",18),t.YNc(32,Ho,1,0,"div",19),t.YNc(33,zo,1,0,"div",19),t.qZA()(),t.TgZ(34,"div",20)(35,"div",21),t.NdJ("cdkDropListDropped",function(a){return o.drop(a)}),t.YNc(36,Lo,13,1,"div",22),t.qZA(),t.TgZ(37,"div",23),t._UZ(38,"div",24),t.qZA()(),t.TgZ(39,"div",25)(40,"div",26)(41,"div",27)(42,"div",3)(43,"button",28),t.NdJ("click",function(){return o.changeModeEditor("touch")}),t.O4$(),t.TgZ(44,"svg",29),t._UZ(45,"path",30),t.qZA()()(),t.kcU(),t.TgZ(46,"div",3)(47,"button",28),t.NdJ("click",function(){return o.changeModeEditor("pen")}),t.O4$(),t.TgZ(48,"svg",31),t._UZ(49,"path",32),t.qZA()()(),t.kcU(),t.TgZ(50,"div",3)(51,"button",28),t.NdJ("click",function(){return o.changeModeEditor("eraser")}),t.O4$(),t.TgZ(52,"svg",31),t._UZ(53,"path",33),t.qZA()()(),t.kcU(),t.TgZ(54,"div",3)(55,"button",28),t.NdJ("click",function(){return o.changeModeEditor("text")}),t.O4$(),t.TgZ(56,"svg",31),t._UZ(57,"path",34)(58,"path",35),t.qZA()()(),t.kcU(),t.TgZ(59,"div",3)(60,"button",28),t.NdJ("click",function(){return o.changeModeEditor("image")}),t.O4$(),t.TgZ(61,"svg",36),t._UZ(62,"path",37)(63,"line",38)(64,"line",39)(65,"circle",40)(66,"path",41),t.qZA()()(),t.kcU(),t.TgZ(67,"div",3)(68,"button",28),t.NdJ("click",function(){return o.changeModeEditor("comment")}),t.O4$(),t.TgZ(69,"svg",42),t._UZ(70,"path",43)(71,"path",44),t.qZA()()()()(),t.kcU(),t.TgZ(72,"button",45),t.NdJ("click",function(){return o.toggleToolEditor()}),t.O4$(),t.TgZ(73,"svg",46),t._UZ(74,"line",47)(75,"line",48),t.qZA()()()(),t.kcU(),t.TgZ(76,"context-menu",null,49),t.YNc(78,Jo,30,14,"ng-template",50),t.qZA(),t.TgZ(79,"context-menu",null,51),t.YNc(81,Go,16,0,"ng-template",50),t.qZA()),2&e){const n=t.MAs(77);t.xp6(28),t.Q6J("ngIf","text"==o.mode),t.xp6(1),t.Q6J("ngIf","pen"==o.mode),t.xp6(1),t.Q6J("ngIf","eraser"==o.mode),t.xp6(1),t.Q6J("ngIf","image"==o.mode),t.xp6(1),t.Q6J("ngIf","touch"==o.mode),t.xp6(1),t.Q6J("ngIf","comment"==o.mode),t.xp6(2),t.Q6J("ngClass",t.VKq(17,Bo,o.showSideBar)),t.xp6(1),t.Q6J("ngForOf",o.pageList),t.xp6(2),t.Q6J("contextMenu",n),t.xp6(2),t.Q6J("ngClass",t.VKq(19,Fo,o.isShowToolEditor)),t.xp6(3),t.Q6J("ngClass",t.VKq(21,et,"touch"==o.mode)),t.xp6(4),t.Q6J("ngClass",t.VKq(23,et,"pen"==o.mode)),t.xp6(4),t.Q6J("ngClass",t.VKq(25,et,"eraser"==o.mode)),t.xp6(4),t.Q6J("ngClass",t.VKq(27,et,"text"==o.mode)),t.xp6(5),t.Q6J("ngClass",t.VKq(29,et,"image"==o.mode)),t.xp6(8),t.Q6J("ngClass",t.VKq(31,et,"comment"==o.mode)),t.xp6(4),t.Q6J("ngClass",t.VKq(33,qo,o.isShowToolEditor))}},dependencies:[E.mk,E.sg,E.O5,Ct.Wj,Ct.Zt,ee.XC,ee.ZL,q.ey,oe.lW,To.pH,kt.gM,g.YN,g.Kr,g.Fj,g.wV,g.EJ,g.JJ,g.On,H.Nh5,z.Kk,mt.HW,mt.GI,mt.n5,Y.bT],styles:[".azt-graphic[_ngcontent-%COMP%]{min-height:90vh;padding-top:110px}.azt-graphic-main[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 110px)}.toolbar-list[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;left:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.toolbar-list-bottom[_ngcontent-%COMP%]{height:54px;padding:8px}.btn-icon[_ngcontent-%COMP%]{padding:10px;min-width:auto;line-height:initial}.toolbar-item[_ngcontent-%COMP%]{margin:0 3px}.toolbar-item[_ngcontent-%COMP%]:first-child{margin-left:0}.btn-icon-child[_ngcontent-%COMP%]{padding:5px}.azt-toolbar-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(var(--color-slate-200)/var(--tw-bg-opacity))}  .dark .azt-toolbar-active{--tw-bg-opacity: 1;background-color:rgb(var(--color-darkmode-400)/var(--tw-bg-opacity))}.side-bar[_ngcontent-%COMP%]{width:0;padding:0;opacity:0;height:calc(100% - 110px);box-shadow:0 3px 20px #0000000b;position:absolute;transition-property:all;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1);z-index:9;border-radius:0;top:110px}.open[_ngcontent-%COMP%]{width:20%;opacity:1;padding:10px;flex:none}.side-bar-item[_ngcontent-%COMP%]{margin-bottom:30px;cursor:move;padding:5px}.page[_ngcontent-%COMP%]{cursor:pointer;height:20vh;overflow:hidden;border-radius:3px}.page-active[_ngcontent-%COMP%]{border:1px solid rgb(var(--color-primary)/var(--tw-bg-opacity))}.new-blank[_ngcontent-%COMP%]{border:1px dashed rgb(var(--color-primary)/var(--tw-bg-opacity));display:flex;justify-content:center;align-items:center;color:rgb(var(--color-primary)/var(--tw-bg-opacity))}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.tool-editor[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:30px}.tool-editor-list[_ngcontent-%COMP%]{position:relative;padding:.5rem;border:1px solid rgb(var(--color-slate-200)/var(--tw-bg-opacity));border-radius:28px;width:58px;margin-right:-54px;overflow:hidden;z-index:-1;transition-property:all;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.tool-editor-list-main[_ngcontent-%COMP%]{opacity:0;transition:all .5s}.open-tool[_ngcontent-%COMP%]{padding-right:54px;margin-right:-54px;width:auto;visibility:visible;overflow:auto}.open-tool[_ngcontent-%COMP%]   .tool-editor-list-main[_ngcontent-%COMP%]{opacity:1;transition:all .5s}.btn-show-tool[_ngcontent-%COMP%]{transition:.3s transform ease-in-out,.3s opacity ease-in-out}.active-tool-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transition-property:all;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1);transform:rotate(135deg)}.extend-bar[_ngcontent-%COMP%]{width:30%;padding:10px;flex:none;height:calc(100% - 104px);box-shadow:0 3px 20px #0000000b;position:absolute;transition-property:all;transition-duration:.3s;transition-timing-function:cubic-bezier(.4,0,.2,1);z-index:9;border-radius:0;top:104px;right:0}@media screen and (max-width: 768px){.open[_ngcontent-%COMP%]{width:70%}}"]}),r})();var Yo=l(29225);let Qo=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c,d,u,C,x,p,k,T){super(a),this.activeRoute=e,this.answerService=o,this.baseApiService=n,this.commonService=a,this.permissionService=s,this.dialog=c,this.cdnService=d,this.zipDataService=u,this.envService=C,this.apiUploadService=x,this.browserStorageService=p,this.vcRef=k,this.cpService=T,this.subscriptions=new dt.w,this.result={},this.answerId=0,this.homeworkID="",this.historyId="",this.iframeSrc="",this.isMarked=!1,this.jsonData={},this.errorMessage="",this.files=[],this.classID="",this.homeworkObj={},this.studentName="",this.markedByObj={},this.studentObj={},this.classroomObj={},this.score=0,this.mnoteJsonData={},this.pagesCount=0,this.backToLink="",this.hasSendDataToIframe=!1,this.hasLoadedData=!1,this.historyAnswerObjs=[],this.countLoad=1,this.homeworkHashId="",this.useNewDashboard=!1,this.initDataEditor={},this.color="#000",this.handleIframe=Z=>{var N;"MNoteJson"==Z.data.cmd&&(this.initStatusObj(),this.mnoteJsonData=Z.data.data,this.uploadAll(null!==(N=this.mnoteJsonData.pages)&&void 0!==N?N:[],Z.data.data.point)),"MNoteReSubmit"==Z.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==Z.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,""==this.historyId?this.sendDataToIframe():this.sendDataToIframeHistory()):this.hasSendDataToIframe=!1)}}onPopState(e){this.goBack()}uploadDrawBase64ToCDN(e,o,n){let a=this.baseApiService.dataURItoBlob(e);this.apiUploadService.commonUploadForMarkResult(a,`essay_note_${o}_${this.answerId}.png`,"image/png",1e4).subscribe(s=>{var c,d;s.type!=O.dt.UploadProgress&&(1==s.success?(!(null===(c=this.mnoteJsonData.pages)||void 0===c)&&c[o]&&(this.mnoteJsonData.pages[o].draw=null===(d=s.data)||void 0===d?void 0:d.url),this.pagesCount--,0==this.pagesCount&&this.remark(this.answerId,n,this.mnoteJsonData)):(this.showErrorSnack("lang_cms_cannot_save_data_marked"),this.stopStatusObj()))})}uploadAll(e,o){this.pagesCount=0;for(let n=0;n<e.length;n++)e[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(this.answerId,o,this.mnoteJsonData);else for(let n=0;n<e.length;n++)e[n].draw&&this.uploadDrawBase64ToCDN(e[n].draw,n,o)}reloadPage(){location.reload()}sendDataToIframe(){var e,o,n,a,s,c,d,u,C,x,p,k,T,Z,N;const I=document.getElementById("mNote"),P=I?I.contentWindow:null;if(null!==P){let m=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let v=this.commonService.willDeleteParseJson(null!==(o=m.result)&&void 0!==o?o:"");if(null!=v){let j=null!==(a=null===(n=v.pages)||void 0===n?void 0:n.length)&&void 0!==a?a:0;for(let R=0;R<j;R++)!(null===(s=null==v?void 0:v.pages)||void 0===s)&&s[R].backgroundImage&&(v.pages[R].backgroundImage=this.cdnService.getMyCdn(null!==(c=v.pages[R].backgroundImage)&&void 0!==c?c:"")),null!==(d=v.pages)&&void 0!==d&&d[R].draw&&(v.pages[R].draw=this.cdnService.getMyCdn(v.pages[R].draw));v=JSON.stringify(v),m.result=v}let D=this.commonService.willDeleteParseJson(null!==(u=m.files)&&void 0!==u?u:"");if(null!=D){for(let j=0;j<D.length;j++)D[j].url&&(D[j].url=this.cdnService.getMyCdn(D[j].url)),D[j].thumb&&(D[j].thumb=this.cdnService.getMyCdn(D[j].thumb));D=JSON.stringify(D),m.files=D}}let w=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},y=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},K=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},G=this.commonService.myParseJson(null!==(C=m.result)&&void 0!==C?C:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let v=0;v<(null!==(p=null===(x=this.jsonData.pages)||void 0===x?void 0:x.length)&&void 0!==p?p:0);v++)!(null===(k=this.jsonData.pages)||void 0===k)&&k[v].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[v].backgroundImage=this.cdnService.getMyCdn(null!==(T=this.jsonData.pages[v].backgroundImage)&&void 0!==T?T:"")),null!==(Z=this.jsonData.pages)&&void 0!==Z&&Z[v].hasOwnProperty("draw")&&(this.jsonData.pages[v].draw=this.cdnService.getMyCdn(null!==(N=this.jsonData.pages[v].draw)&&void 0!==N?N:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=m,this.jsonData.student_obj=w,this.jsonData.classroom_obj=y,this.jsonData.homework_obj=K,G&&G.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=G.hideMark),P.postMessage(this.jsonData,"*");else{let v=[];this.files.forEach(j=>{v.push({backgroundImage:j.url})});let D={cmd:"initMNote",mode:"edit",pages:v,answer_obj:m,student_obj:w,classroom_obj:y,homework_obj:K};G&&G.hasOwnProperty("hideMark")&&(D.hideMark=G.hideMark),P.postMessage(D,"*")}}}sendDataToIframeHistory(){var e,o,n,a,s,c,d,u,C,x;const p=document.getElementById("mNote");p&&1==this.countLoad&&(p.src+="");const k=p?p.contentWindow:null;if(null!==k){let T=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let m=this.commonService.willDeleteParseJson(null!==(o=T.result)&&void 0!==o?o:"");if(null!=m){for(let y=0;y<m.pages.length;y++)m.pages[y].backgroundImage&&(m.pages[y].backgroundImage=this.cdnService.getMyCdn(m.pages[y].backgroundImage)),m.pages[y].draw&&(m.pages[y].draw=this.cdnService.getMyCdn(m.pages[y].draw));m=JSON.stringify(m),T.result=m}let w=this.commonService.willDeleteParseJson(null!==(n=T.files)&&void 0!==n?n:"");if(null!=w){for(let y=0;y<w.length;y++)w[y].url&&(w[y].url=this.cdnService.getMyCdn(w[y].url)),w[y].thumb&&(w[y].thumb=this.cdnService.getMyCdn(w[y].thumb));w=JSON.stringify(w),T.files=w}}let Z=this.studentObj,N=this.classroomObj,I=this.homeworkObj,P=this.commonService.willDeleteParseJson(null!==(a=T.result)&&void 0!==a?a:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let m=0;m<(null!==(c=null===(s=this.jsonData.pages)||void 0===s?void 0:s.length)&&void 0!==c?c:0);m++)!(null===(d=this.jsonData.pages)||void 0===d)&&d[m].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[m].backgroundImage=this.cdnService.getMyCdn(null!==(u=this.jsonData.pages[m].backgroundImage)&&void 0!==u?u:"")),null!==(C=this.jsonData.pages)&&void 0!==C&&C[m].hasOwnProperty("draw")&&(this.jsonData.pages[m].draw=this.cdnService.getMyCdn(null!==(x=this.jsonData.pages[m].draw)&&void 0!==x?x:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=T,this.jsonData.student_obj=Z,this.jsonData.classroom_obj=N,this.jsonData.homework_obj=I,P&&P.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=P.hideMark),k.postMessage(this.jsonData,"*");else{let m=[];this.files.forEach(y=>{m.push({backgroundImage:y.url})});let w={cmd:"initMNote",mode:"view",pages:m,answer_obj:T,student_obj:Z,classroom_obj:N,homework_obj:I};P&&P.hasOwnProperty("hideMark")&&(w.hideMark=P.hideMark),k.postMessage(w,"*")}}}getHistoryObjs(e){this.initStatusObj(),this.answerService.apiAnswerGetHistoryObjsGet(this.homeworkHashId,e).subscribe(o=>{var n,a,s;1==o.success?this.historyAnswerObjs=null!==(a=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==a?a:new Array:this.errorMessage=null!==(s=o.message)&&void 0!==s?s:"",this.stopStatusObj()})}getDataHistory(e){this.historyId=e,this.errorMessage="",this.countLoad=1,this.answerService.apiAnswerGetHistoryObjGet(this.homeworkHashId,this.answerId,parseInt(e,10)).subscribe(o=>{var n,a,s,c,d,u,C,x,p,k,T,Z,N,I,P,m;if(1==o.success){if(this.zipDataService.convertSubmittedAnswersHistoryObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),this.result=null!==(a=o.data)&&void 0!==a?a:{},this.markedByObj=null!==(c=null===(s=o.data)||void 0===s?void 0:s.markedByObj)&&void 0!==c?c:{},this.score=null!==(C=null===(u=null===(d=o.data)||void 0===d?void 0:d.answerObj)||void 0===u?void 0:u.point)&&void 0!==C?C:0,this.files=null!==(T=this.commonService.myParseJson(null!==(k=null===(p=null===(x=o.data)||void 0===x?void 0:x.answerObj)||void 0===p?void 0:p.files)&&void 0!==k?k:""))&&void 0!==T?T:[],null!=this.files)for(let w=0;w<this.files.length;w++)this.files[w].url=this.cdnService.getMyCdn(null!==(N=null===(Z=this.files)||void 0===Z?void 0:Z[w].url)&&void 0!==N?N:""),this.files[w].thumb=this.cdnService.getMyCdn(null!==(P=null===(I=this.files)||void 0===I?void 0:I[w].thumb)&&void 0!==P?P:"");this.handleJsonData(),this.hasLoadedData=!0,1==this.countLoad&&(this.hasSendDataToIframe=!1),0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframeHistory()),this.successStatusObj(),this.countLoad++}else this.errorMessage=null!==(m=o.message)&&void 0!==m?m:"",this.stopStatusObj()})}handleJsonData(){var e,o,n,a,s,c,d;if(this.jsonData={},null!==(o=null===(e=this.result)||void 0===e?void 0:e.answerObj)&&void 0!==o&&o.confirmedAt||null!==(a=null===(n=this.result)||void 0===n?void 0:n.answerObj)&&void 0!==a&&a.result||(this.isMarked=!1),null!==(s=this.result.answerObj)&&void 0!==s&&s.confirmedAt){this.isMarked=!0;var u=this.commonService.myParseJson(null!==(d=null===(c=this.result.answerObj)||void 0===c?void 0:c.result)&&void 0!==d?d:"");u&&(this.jsonData=u,null==this.jsonData&&(this.isMarked=!1))}}getData(e){this.initStatusObj(),this.errorMessage="",this.answerId=e,this.answerService.apiAnswerGetObjGet(this.homeworkHashId,e).subscribe(o=>{var n,a,s,c,d,u,C,x,p,k,T,Z,N,I,P,m,w,y,K,G,v,D;if(1==o.success)if(this.zipDataService.convertSubmittedAnswersObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),(null===(a=o.data)||void 0===a?void 0:a.hasOwnProperty("studentObj"))&&null!=(null===(s=o.data)||void 0===s?void 0:s.studentObj)){if(this.result=o.data,this.markedByObj=null!==(c=o.data.markedByObj)&&void 0!==c?c:{},this.score=null!==(C=null===(u=null===(d=o.data)||void 0===d?void 0:d.answerObj)||void 0===u?void 0:u.point)&&void 0!==C?C:0,this.homeworkID=null!==(p=null===(x=o.data.homeworkObj)||void 0===x?void 0:x.id)&&void 0!==p?p:0,this.classID=null!==(T=null===(k=o.data.classroomObj)||void 0===k?void 0:k.id)&&void 0!==T?T:0,this.files=null!==(I=this.commonService.myParseJson(null!==(N=null===(Z=o.data.answerObj)||void 0===Z?void 0:Z.files)&&void 0!==N?N:""))&&void 0!==I?I:[],this.studentObj=o.data.studentObj,this.classroomObj=null!==(P=o.data.classroomObj)&&void 0!==P?P:{},null!=this.files)for(let j=0;j<this.files.length;j++)this.files[j].url=this.cdnService.getMyCdn(null!==(w=null===(m=this.files)||void 0===m?void 0:m[j].url)&&void 0!==w?w:""),this.files[j].thumb=this.cdnService.getMyCdn(null!==(K=null===(y=this.files)||void 0===y?void 0:y[j].thumb)&&void 0!==K?K:"");this.homeworkObj=null!==(G=o.data.homeworkObj)&&void 0!==G?G:{},this.studentName=null!==(v=o.data.studentObj.fullName)&&void 0!==v?v:"",this.handleJsonData(),this.hasLoadedData=!0,0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframe()),this.successStatusObj()}else this.errorMessage="lang_core_not_found_student",this.stopStatusObj();else this.errorMessage=null!==(D=o.message)&&void 0!==D?D:"",this.stopStatusObj()})}openDialog(e,o){this.dialog.open(It,{width:"280px",autoFocus:!1,data:{score:o,status:e,homeWorkID:this.homeworkID,homeworkHashId:this.homeworkHashId,classID:this.classID,backToLink:this.backToLink}}).afterClosed().subscribe(a=>{})}handleOpenReSubmit(){var e;this.openDialogReSubmit(!0,null!==(e=this.homeworkObj.deadline)&&void 0!==e?e:void 0,this.homeworkObj,this.answerId,this.studentName)}openDialogReSubmit(e,o,n,a,s){this.dialog.open(Et,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:e,deadline:o,itemHomework:n,ans_id:a,name:s,redirect:!0,classID:this.classID}}).afterClosed().subscribe(d=>{})}remark(e,o,n){let a=JSON.stringify({type:"homework",id:this.homeworkObj.id,user:this.homeworkObj.tenantId});if(""==this.historyId)if(1==this.permissionService.hasMarkPointPermission("homework",this.homeworkObj.permissionObj)){let s={id:e,comment:n.comment,hideMark:n.hideMark?1:0,point:o?parseFloat(o.replace(",",".")):0,result:this.zipDataService.convertContentGzip(JSON.stringify(n)),homeworkHashId:this.homeworkHashId};this.answerService.apiAnswerSaveResultPost(s,a).subscribe(c=>{var d,u;1==c.success?(this.openDialog(!0,null===(u=null===(d=c.data)||void 0===d?void 0:d.obj)||void 0===u?void 0:u.point),this.successStatusObj()):(this.stopStatusObj(),this.showErrorSnack("lang_cms_mark_fail"))})}else this.showErrorSnack("lang_cms_no_permission_on_homework"),this.stopStatusObj();else this.stopStatusObj(),this.showErrorSnack("lang_cms_cannot_remark_student_history_result")}goBack(){var e;this.backToLink?this.backToLink.includes("shareType")?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation(this.backToLink):this.commonService.myNavigation(this.useNewDashboard?"/admin/testbank/homework-results-list/"+(null!==(e=this.homeworkObj.categoryId)&&void 0!==e?e:"0")+"/"+this.homeworkID+"/"+this.homeworkObj.hashId:"/admin/testbank/homework-results-list/"+this.classID+"/"+this.homeworkID+"/"+this.homeworkObj.hashId)}checkModeUiEditor(e){this.initDataEditor="dark"==e?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}ngOnInit(){var e,o,n,a;this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"";const s=this.commonService.getMyParam(this.activeRoute,"id")?Number(this.commonService.getMyParam(this.activeRoute,"id")):0,c=null!==(o=this.commonService.getMyParam(this.activeRoute,"historyId"))&&void 0!==o?o:"";this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"";let d=this.commonService.getMyQueryParam("backto");this.backToLink=d?d.includes("shareType")?decodeURIComponent(d):d:"",console.log(this.backToLink),this.getData(s),this.getHistoryObjs(s),c&&this.getDataHistory(c);let u=""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(a=this.browserStorageService.getStorage("mode_ui"))&&void 0!==a?a:"light";this.checkModeUiEditor(u),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.goBack(),window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J.gz),t.Y36(vt.P),t.Y36(Ut._),t.Y36($.v),t.Y36(Ht.$),t.Y36(U.uw),t.Y36(yt.U),t.Y36(gt.D),t.Y36(zt.D),t.Y36(wt.$),t.Y36(jt.z),t.Y36(t.s_b),t.Y36(z.ee))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mark-exercise-new"]],features:[t.qOj],decls:94,vars:25,consts:[[3,"headerBackTolink"],[1,"content"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12","md:col-span-4","mark-general"],[1,"box","p-2"],[1,"box-head"],[1,"font-medium"],[1,"flex","items-center","mt-2"],[1,"info-student","flex","items-center"],[3,"nameCreateAvatar","size"],[1,"info","ml-2"],[1,"text-md"],[1,"text-xs"],[1,"score","ml-auto"],["type","text",1,"form-control"],[1,"bg-slate-200","dark:bg-darkmode-400","p-2","text-center","rounded","mt-3"],[1,"choose-score","mt-3"],[1,"score-list-one","grid","grid-cols-10","gap-3"],[1,"score-item","col-span-2"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-full","btn-score"],[1,"comment","mt-3"],[1,"font-medium","text-md"],[1,"comment-editor","mt-2"],["apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"init"],[1,"flex","items-center","mt-3"],[1,"form-check","form-switch"],["id","show-score","type","checkbox",1,"form-check-input","mr-2"],["for","show-score",1,"form-check-label","ml-0"],[1,"ml-auto"],[1,"btn","btn-pending"],[1,"grid","grid-cols-2","gap-3","mt-3"],[1,"btn","btn-secondary"],[1,"btn","btn-primary"],[1,"col-span-12","md:col-span-8","mark-editor"]],template:function(e,o){1&e&&(t.TgZ(0,"editor-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),t._uU(7),t.qZA(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"azt-create-avatar",9),t.TgZ(11,"div",10)(12,"p",11),t._uU(13),t.qZA(),t.TgZ(14,"p",12),t._uU(15),t.qZA()()(),t.TgZ(16,"div",13),t._UZ(17,"input",14),t.qZA()()(),t.TgZ(18,"div",15)(19,"span"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()(),t.TgZ(22,"div",16)(23,"div",17)(24,"div",18)(25,"button",19),t._uU(26,"\u0110"),t.qZA()(),t.TgZ(27,"div",18)(28,"button",19),t._uU(29,"C\u0110"),t.qZA()(),t.TgZ(30,"div",18)(31,"button",19),t._uU(32,"HT"),t.qZA()(),t.TgZ(33,"div",18)(34,"button",19),t._uU(35,"CHT"),t.qZA()(),t.TgZ(36,"div",18)(37,"button",19),t._uU(38,"HTT"),t.qZA()(),t.TgZ(39,"div",18)(40,"button",19),t._uU(41,"1"),t.qZA()(),t.TgZ(42,"div",18)(43,"button",19),t._uU(44,"2"),t.qZA()(),t.TgZ(45,"div",18)(46,"button",19),t._uU(47,"3"),t.qZA()(),t.TgZ(48,"div",18)(49,"button",19),t._uU(50,"4"),t.qZA()(),t.TgZ(51,"div",18)(52,"button",19),t._uU(53,"5"),t.qZA()(),t.TgZ(54,"div",18)(55,"button",19),t._uU(56,"6"),t.qZA()(),t.TgZ(57,"div",18)(58,"button",19),t._uU(59,"7"),t.qZA()(),t.TgZ(60,"div",18)(61,"button",19),t._uU(62,"8"),t.qZA()(),t.TgZ(63,"div",18)(64,"button",19),t._uU(65,"9"),t.qZA()(),t.TgZ(66,"div",18)(67,"button",19),t._uU(68,"10"),t.qZA()()()(),t.TgZ(69,"div",20)(70,"p",21),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.TgZ(73,"div",22),t._UZ(74,"editor",23),t.qZA()(),t.TgZ(75,"div",24)(76,"div",25),t._UZ(77,"input",26),t.TgZ(78,"label",27),t._uU(79),t.ALo(80,"mytranslate"),t.qZA()(),t.TgZ(81,"div",28)(82,"button",29),t._uU(83),t.ALo(84,"mytranslate"),t.qZA()()(),t.TgZ(85,"div",30)(86,"button",31),t._uU(87),t.ALo(88,"mytranslate"),t.qZA(),t.TgZ(89,"button",32),t._uU(90),t.ALo(91,"mytranslate"),t.qZA()()()(),t.TgZ(92,"div",33),t._UZ(93,"azt-editor-graphic"),t.qZA()()()()),2&e&&(t.Q6J("headerBackTolink",o.backToLink),t.xp6(7),t.hij(" ",o.homeworkObj.name," "),t.xp6(3),t.Q6J("nameCreateAvatar",o.studentObj.fullName)("size",35),t.xp6(3),t.hij(" ",o.studentObj.fullName," "),t.xp6(2),t.hij(" ",o.classroomObj.name," "),t.xp6(5),t.hij("",t.lcZ(21,13,"lang_auto_tra_loi_dung")+" "," 6/6"),t.xp6(51),t.hij(" ",t.lcZ(72,15,"lang_auto_nhan_xet")," "),t.xp6(3),t.Q6J("init",o.initDataEditor),t.xp6(5),t.hij(" ",t.lcZ(80,17,"lang_auto_hien_thi_diem")," "),t.xp6(4),t.hij(" ",t.lcZ(84,19,"lang_auto_yeu_cau_nop_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(88,21,"lang_auto_quay_lai")," "),t.xp6(3),t.hij(" ",t.lcZ(91,23,"lang_auto_luu_du_lieu")," "))},dependencies:[ot.PG,Lt.g,Ro,Yo.Z,Y.bT],styles:[".btn-score[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}.choose-score[_ngcontent-%COMP%]{max-width:60%;margin-left:auto;margin-right:auto}.toolbar-list[_ngcontent-%COMP%]{width:100%;padding:5px;position:absolute;top:0;left:0;display:flex;align-items:center;border-bottom-left-radius:0;border-bottom-right-radius:0}.btn-icon[_ngcontent-%COMP%]{padding:10px;min-width:auto;line-height:initial}.toolbar-item[_ngcontent-%COMP%]{margin:0 3px}.toolbar-item[_ngcontent-%COMP%]:first-child{margin-left:0}.btn-icon-child[_ngcontent-%COMP%]{padding:5px}.azt-toolbar-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(var(--color-slate-200)/var(--tw-bg-opacity))}  .dark .azt-toolbar-active{--tw-bg-opacity: 1;background-color:rgb(var(--color-darkmode-400)/var(--tw-bg-opacity))}.mark-general[_ngcontent-%COMP%]{order:1}.mark-editor[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.choose-score[_ngcontent-%COMP%]{max-width:80%}.mark-general[_ngcontent-%COMP%]{order:2}.mark-editor[_ngcontent-%COMP%]{order:1}}"]}),r})();var ne=l(92181);function Vo(r,i){if(1&r&&(t.TgZ(0,"button",15),t.ALo(1,"mytranslate"),t.TgZ(2,"mat-icon"),t._uU(3,"history"),t.qZA()()),2&r){t.oxw();const e=t.MAs(8);t.s9C("matTooltip",t.lcZ(1,2,"lang_homework_mark_exercise_history_submit")),t.Q6J("matMenuTriggerFor",e)}}function Ko(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"li")(1,"button",8),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.getDataHistory(a.id?a.id.toString():""))}),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"localizedDate"),t.qZA()()()}if(2&r){const e=i.$implicit,o=i.index;t.xp6(3),t.lnq("",t.lcZ(4,3,"lang_homework_mark_exercise_times")," ",o+1," - ",t.xi3(5,5,e.createdAt,!0),"")}}function Wo(r,i){if(1&r&&(t.TgZ(0,"span"),t._UZ(1,"azt-create-avatar",17),t.ALo(2,"mytranslate"),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hYB("matTooltip","",t.lcZ(2,5,"lang_homework_mark_exercise_teacher_mark")," ",": "+e.markedByObj.fullName,""),t.Q6J("nameCreateAvatar",e.markedByObj.fullName)("size",25)("linkAvatar",e.markedByObj.avatar)}}function $o(r,i){if(1&r&&(t.TgZ(0,"h4",16),t.YNc(1,Wo,3,7,"span",13),t._uU(2),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isMarked),t.xp6(1),t.AsE(" ",e.studentObj.fullName,", ",e.classroomObj.name," ")}}function Xo(r,i){1&r&&(t._UZ(0,"azt-loading-effect",18),t.ALo(1,"mytranslate")),2&r&&t.Q6J("customText",t.lcZ(1,1,"lang_homework_mark_exercise_loading_data_mark"))}function tn(r,i){if(1&r&&(t.TgZ(0,"div")(1,"div",19)(2,"div",20)(3,"div",21),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&r){const e=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,1,e.errorMessage))}}function en(r,i){if(1&r&&(t.TgZ(0,"div",22),t._UZ(1,"iframe",23),t.ALo(2,"safe"),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("src",t.lcZ(2,1,e.iframeSrc),t.uOi)}}let on=(()=>{class r extends X.Q{constructor(e,o,n,a,s,c,d,u,C,x){super(a),this.activeRoute=e,this.answerService=o,this.baseApiService=n,this.commonService=a,this.permissionService=s,this.dialog=c,this.cdnService=d,this.zipDataService=u,this.envService=C,this.apiUploadService=x,this.subscriptions=new dt.w,this.result={},this.answerId=0,this.homeworkID="",this.historyId="",this.iframeSrc="",this.isMarked=!1,this.jsonData={},this.errorMessage="",this.files=[],this.classID="",this.homeworkObj={},this.studentName="",this.markedByObj={},this.studentObj={},this.classroomObj={},this.score=0,this.mnoteJsonData={},this.pagesCount=0,this.backToLink="",this.hasSendDataToIframe=!1,this.hasLoadedData=!1,this.historyAnswerObjs=[],this.countLoad=1,this.homeworkHashId="",this.useNewDashboard=!1,this.handleIframe=p=>{var k;"MNoteJson"==p.data.cmd&&(this.initStatusObj(),this.mnoteJsonData=p.data.data,this.uploadAll(null!==(k=this.mnoteJsonData.pages)&&void 0!==k?k:[],p.data.data.point)),"MNoteReSubmit"==p.data.cmd&&(console.log("listend res submit"),this.handleOpenReSubmit()),"MNoteLoadComplete"==p.data&&(this.hasLoadedData?(this.hasSendDataToIframe=!0,""==this.historyId?this.sendDataToIframe():this.sendDataToIframeHistory()):this.hasSendDataToIframe=!1)}}onPopState(e){this.goBack()}uploadDrawBase64ToCDN(e,o,n){let a=this.baseApiService.dataURItoBlob(e);this.apiUploadService.commonUploadForMarkResult(a,`essay_note_${o}_${this.answerId}.png`,"image/png",1e4).subscribe(s=>{var c,d;s.type!=O.dt.UploadProgress&&(1==s.success?(!(null===(c=this.mnoteJsonData.pages)||void 0===c)&&c[o]&&(this.mnoteJsonData.pages[o].draw=null===(d=s.data)||void 0===d?void 0:d.url),this.pagesCount--,0==this.pagesCount&&this.remark(this.answerId,n,this.mnoteJsonData)):(this.showErrorSnack("lang_cms_cannot_save_data_marked"),this.stopStatusObj()))})}uploadAll(e,o){this.pagesCount=0;for(let n=0;n<e.length;n++)e[n].draw&&this.pagesCount++;if(0==this.pagesCount)this.remark(this.answerId,o,this.mnoteJsonData);else for(let n=0;n<e.length;n++)e[n].draw&&this.uploadDrawBase64ToCDN(e[n].draw,n,o)}reloadPage(){location.reload()}sendDataToIframe(){var e,o,n,a,s,c,d,u,C,x,p,k,T,Z,N;const I=document.getElementById("mNote"),P=I?I.contentWindow:null;if(null!==P){let m=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let v=this.commonService.willDeleteParseJson(null!==(o=m.result)&&void 0!==o?o:"");if(null!=v){let j=null!==(a=null===(n=v.pages)||void 0===n?void 0:n.length)&&void 0!==a?a:0;for(let R=0;R<j;R++)!(null===(s=null==v?void 0:v.pages)||void 0===s)&&s[R].backgroundImage&&(v.pages[R].backgroundImage=this.cdnService.getMyCdn(null!==(c=v.pages[R].backgroundImage)&&void 0!==c?c:"")),null!==(d=v.pages)&&void 0!==d&&d[R].draw&&(v.pages[R].draw=this.cdnService.getMyCdn(v.pages[R].draw));v=JSON.stringify(v),m.result=v}let D=this.commonService.willDeleteParseJson(null!==(u=m.files)&&void 0!==u?u:"");if(null!=D){for(let j=0;j<D.length;j++)D[j].url&&(D[j].url=this.cdnService.getMyCdn(D[j].url)),D[j].thumb&&(D[j].thumb=this.cdnService.getMyCdn(D[j].thumb));D=JSON.stringify(D),m.files=D}}let w=this.result.hasOwnProperty("studentObj")?this.result.studentObj:{},y=this.result.hasOwnProperty("classroomObj")?this.result.classroomObj:{},K=this.result.hasOwnProperty("homeworkObj")?this.result.homeworkObj:{},G=this.commonService.myParseJson(null!==(C=m.result)&&void 0!==C?C:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let v=0;v<(null!==(p=null===(x=this.jsonData.pages)||void 0===x?void 0:x.length)&&void 0!==p?p:0);v++)!(null===(k=this.jsonData.pages)||void 0===k)&&k[v].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[v].backgroundImage=this.cdnService.getMyCdn(null!==(T=this.jsonData.pages[v].backgroundImage)&&void 0!==T?T:"")),null!==(Z=this.jsonData.pages)&&void 0!==Z&&Z[v].hasOwnProperty("draw")&&(this.jsonData.pages[v].draw=this.cdnService.getMyCdn(null!==(N=this.jsonData.pages[v].draw)&&void 0!==N?N:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=m,this.jsonData.student_obj=w,this.jsonData.classroom_obj=y,this.jsonData.homework_obj=K,G&&G.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=G.hideMark),P.postMessage(this.jsonData,"*");else{let v=[];this.files.forEach(j=>{v.push({backgroundImage:j.url})});let D={cmd:"initMNote",mode:"edit",pages:v,answer_obj:m,student_obj:w,classroom_obj:y,homework_obj:K};G&&G.hasOwnProperty("hideMark")&&(D.hideMark=G.hideMark),P.postMessage(D,"*")}}}sendDataToIframeHistory(){var e,o,n,a,s,c,d,u,C,x;const p=document.getElementById("mNote");p&&1==this.countLoad&&(p.src+="");const k=p?p.contentWindow:null;if(null!==k){let T=this.result.hasOwnProperty("answerObj")&&null!==(e=this.castObj(this.result.answerObj))&&void 0!==e?e:{};if(this.result.hasOwnProperty("answerObj")){let m=this.commonService.willDeleteParseJson(null!==(o=T.result)&&void 0!==o?o:"");if(null!=m){for(let y=0;y<m.pages.length;y++)m.pages[y].backgroundImage&&(m.pages[y].backgroundImage=this.cdnService.getMyCdn(m.pages[y].backgroundImage)),m.pages[y].draw&&(m.pages[y].draw=this.cdnService.getMyCdn(m.pages[y].draw));m=JSON.stringify(m),T.result=m}let w=this.commonService.willDeleteParseJson(null!==(n=T.files)&&void 0!==n?n:"");if(null!=w){for(let y=0;y<w.length;y++)w[y].url&&(w[y].url=this.cdnService.getMyCdn(w[y].url)),w[y].thumb&&(w[y].thumb=this.cdnService.getMyCdn(w[y].thumb));w=JSON.stringify(w),T.files=w}}let Z=this.studentObj,N=this.classroomObj,I=this.homeworkObj,P=this.commonService.willDeleteParseJson(null!==(a=T.result)&&void 0!==a?a:"");if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let m=0;m<(null!==(c=null===(s=this.jsonData.pages)||void 0===s?void 0:s.length)&&void 0!==c?c:0);m++)!(null===(d=this.jsonData.pages)||void 0===d)&&d[m].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[m].backgroundImage=this.cdnService.getMyCdn(null!==(u=this.jsonData.pages[m].backgroundImage)&&void 0!==u?u:"")),null!==(C=this.jsonData.pages)&&void 0!==C&&C[m].hasOwnProperty("draw")&&(this.jsonData.pages[m].draw=this.cdnService.getMyCdn(null!==(x=this.jsonData.pages[m].draw)&&void 0!==x?x:""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=T,this.jsonData.student_obj=Z,this.jsonData.classroom_obj=N,this.jsonData.homework_obj=I,P&&P.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=P.hideMark),k.postMessage(this.jsonData,"*");else{let m=[];this.files.forEach(y=>{m.push({backgroundImage:y.url})});let w={cmd:"initMNote",mode:"view",pages:m,answer_obj:T,student_obj:Z,classroom_obj:N,homework_obj:I};P&&P.hasOwnProperty("hideMark")&&(w.hideMark=P.hideMark),k.postMessage(w,"*")}}}getHistoryObjs(e){this.initStatusObj(),this.answerService.apiAnswerGetHistoryObjsGet(this.homeworkHashId,e).subscribe(o=>{var n,a,s;1==o.success?this.historyAnswerObjs=null!==(a=null===(n=o.data)||void 0===n?void 0:n.objs)&&void 0!==a?a:new Array:this.errorMessage=null!==(s=o.message)&&void 0!==s?s:"",this.stopStatusObj()})}getDataHistory(e){this.historyId=e,this.errorMessage="",this.countLoad=1,this.answerService.apiAnswerGetHistoryObjGet(this.homeworkHashId,this.answerId,parseInt(e,10)).subscribe(o=>{var n,a,s,c,d,u,C,x,p,k,T,Z,N,I,P,m;if(1==o.success){if(this.zipDataService.convertSubmittedAnswersHistoryObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),this.result=null!==(a=o.data)&&void 0!==a?a:{},this.markedByObj=null!==(c=null===(s=o.data)||void 0===s?void 0:s.markedByObj)&&void 0!==c?c:{},this.score=null!==(C=null===(u=null===(d=o.data)||void 0===d?void 0:d.answerObj)||void 0===u?void 0:u.point)&&void 0!==C?C:0,this.files=null!==(T=this.commonService.myParseJson(null!==(k=null===(p=null===(x=o.data)||void 0===x?void 0:x.answerObj)||void 0===p?void 0:p.files)&&void 0!==k?k:""))&&void 0!==T?T:[],null!=this.files)for(let w=0;w<this.files.length;w++)this.files[w].url=this.cdnService.getMyCdn(null!==(N=null===(Z=this.files)||void 0===Z?void 0:Z[w].url)&&void 0!==N?N:""),this.files[w].thumb=this.cdnService.getMyCdn(null!==(P=null===(I=this.files)||void 0===I?void 0:I[w].thumb)&&void 0!==P?P:"");this.handleJsonData(),this.hasLoadedData=!0,1==this.countLoad&&(this.hasSendDataToIframe=!1),0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframeHistory()),this.successStatusObj(),this.countLoad++}else this.errorMessage=null!==(m=o.message)&&void 0!==m?m:"",this.stopStatusObj()})}handleJsonData(){var e,o,n,a,s,c,d;if(this.jsonData={},null!==(o=null===(e=this.result)||void 0===e?void 0:e.answerObj)&&void 0!==o&&o.confirmedAt||null!==(a=null===(n=this.result)||void 0===n?void 0:n.answerObj)&&void 0!==a&&a.result||(this.isMarked=!1),null!==(s=this.result.answerObj)&&void 0!==s&&s.confirmedAt){this.isMarked=!0;var u=this.commonService.myParseJson(null!==(d=null===(c=this.result.answerObj)||void 0===c?void 0:c.result)&&void 0!==d?d:"");u&&(this.jsonData=u,null==this.jsonData&&(this.isMarked=!1))}}getData(e){this.initStatusObj(),this.errorMessage="",this.answerId=e,this.answerService.apiAnswerGetObjGet(this.homeworkHashId,e).subscribe(o=>{var n,a,s,c,d,u,C,x,p,k,T,Z,N,I,P,m,w,y,K,G,v,D;if(1==o.success)if(this.zipDataService.convertSubmittedAnswersObj(null===(n=o.data)||void 0===n?void 0:n.answerObj),(null===(a=o.data)||void 0===a?void 0:a.hasOwnProperty("studentObj"))&&null!=(null===(s=o.data)||void 0===s?void 0:s.studentObj)){if(this.result=o.data,this.markedByObj=null!==(c=o.data.markedByObj)&&void 0!==c?c:{},this.score=null!==(C=null===(u=null===(d=o.data)||void 0===d?void 0:d.answerObj)||void 0===u?void 0:u.point)&&void 0!==C?C:0,this.homeworkID=null!==(p=null===(x=o.data.homeworkObj)||void 0===x?void 0:x.id)&&void 0!==p?p:0,this.classID=null!==(T=null===(k=o.data.classroomObj)||void 0===k?void 0:k.id)&&void 0!==T?T:0,this.files=null!==(I=this.commonService.myParseJson(null!==(N=null===(Z=o.data.answerObj)||void 0===Z?void 0:Z.files)&&void 0!==N?N:""))&&void 0!==I?I:[],this.studentObj=o.data.studentObj,this.classroomObj=null!==(P=o.data.classroomObj)&&void 0!==P?P:{},null!=this.files)for(let j=0;j<this.files.length;j++)this.files[j].url=this.cdnService.getMyCdn(null!==(w=null===(m=this.files)||void 0===m?void 0:m[j].url)&&void 0!==w?w:""),this.files[j].thumb=this.cdnService.getMyCdn(null!==(K=null===(y=this.files)||void 0===y?void 0:y[j].thumb)&&void 0!==K?K:"");this.homeworkObj=null!==(G=o.data.homeworkObj)&&void 0!==G?G:{},this.studentName=null!==(v=o.data.studentObj.fullName)&&void 0!==v?v:"",this.handleJsonData(),this.hasLoadedData=!0,0==this.hasSendDataToIframe&&(this.hasSendDataToIframe=!0,this.sendDataToIframe()),this.successStatusObj()}else this.errorMessage="lang_core_not_found_student",this.stopStatusObj();else this.errorMessage=null!==(D=o.message)&&void 0!==D?D:"",this.stopStatusObj()})}openDialog(e,o){this.dialog.open(It,{width:"280px",autoFocus:!1,data:{score:o,status:e,homeWorkID:this.homeworkID,homeworkHashId:this.homeworkHashId,classID:this.classID,backToLink:this.backToLink}}).afterClosed().subscribe(a=>{})}handleOpenReSubmit(){var e;this.openDialogReSubmit(!0,null!==(e=this.homeworkObj.deadline)&&void 0!==e?e:void 0,this.homeworkObj,this.answerId,this.studentName)}openDialogReSubmit(e,o,n,a,s){this.dialog.open(Et,{width:"380px",panelClass:"cleanResultDialogBox",data:{status:e,deadline:o,itemHomework:n,ans_id:a,name:s,redirect:!0,classID:this.classID}}).afterClosed().subscribe(d=>{})}remark(e,o,n){let a=JSON.stringify({type:"homework",id:this.homeworkObj.id,user:this.homeworkObj.tenantId});if(""==this.historyId)if(1==this.permissionService.hasMarkPointPermission("homework",this.homeworkObj.permissionObj)){let s={id:e,comment:n.comment,hideMark:n.hideMark?1:0,point:o?parseFloat(o.replace(",",".")):0,result:this.zipDataService.convertContentGzip(JSON.stringify(n)),homeworkHashId:this.homeworkHashId};this.answerService.apiAnswerSaveResultPost(s,a).subscribe(c=>{var d,u;1==c.success?(this.openDialog(!0,null===(u=null===(d=c.data)||void 0===d?void 0:d.obj)||void 0===u?void 0:u.point),this.successStatusObj()):(this.stopStatusObj(),this.showErrorSnack("lang_cms_mark_fail"))})}else this.showErrorSnack("lang_cms_no_permission_on_homework"),this.stopStatusObj();else this.stopStatusObj(),this.showErrorSnack("lang_cms_cannot_remark_student_history_result")}goBack(){var e;this.backToLink?this.backToLink.includes("shareType")?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation(this.backToLink):this.commonService.myNavigation(this.useNewDashboard?"/admin/testbank/homework-results-list/"+(null!==(e=this.homeworkObj.categoryId)&&void 0!==e?e:"0")+"/"+this.homeworkID+"/"+this.homeworkObj.hashId:"/admin/testbank/homework-results-list/"+this.classID+"/"+this.homeworkID+"/"+this.homeworkObj.hashId);let o=document.body,n=document.getElementById("azota-app-html");null==n||n.classList.remove("overflow-hidden"),null==n||n.classList.remove("height-100"),o.classList.remove("overflow-hidden"),o.classList.remove("height-100")}ngOnInit(){var e,o,n;let a=document.body,s=document.getElementById("azota-app-html");null==s||s.classList.add("overflow-hidden"),null==s||s.classList.add("height-100"),a.classList.add("overflow-hidden"),a.classList.add("height-100"),this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"";const c=this.commonService.getMyParam(this.activeRoute,"id")?Number(this.commonService.getMyParam(this.activeRoute,"id")):0,d=null!==(o=this.commonService.getMyParam(this.activeRoute,"historyId"))&&void 0!==o?o:"";this.homeworkHashId=null!==(n=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==n?n:"";let u=this.commonService.getMyQueryParam("backto");this.backToLink=u?u.includes("shareType")?decodeURIComponent(u):u:"",console.log(this.backToLink),this.getData(c),this.getHistoryObjs(c),d&&this.getDataHistory(d),this.commonService.translateMetaData({title:"lang_cms_homework_mark_exercise_title",description:"lang_cms_homework_mark_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnDestroy(){this.goBack(),window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(J.gz),t.Y36(vt.P),t.Y36(Ut._),t.Y36($.v),t.Y36(Ht.$),t.Y36(U.uw),t.Y36(yt.U),t.Y36(gt.D),t.Y36(zt.D),t.Y36(wt.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mark-exericse"]],hostBindings:function(e,o){1&e&&t.NdJ("popstate",function(a){return o.onPopState(a)},!1,t.Jf7)},features:[t.qOj],decls:22,vars:13,consts:[["id","markContainer",1,"maxW1000"],["id","titleRow"],[1,"block-left"],["mat-button","",3,"title","click"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],[1,"dropdown-item","w-full",3,"click"],[4,"ngFor","ngForOf"],["class","studentInfo","style","padding-right: 10px; color: #fff",4,"ngIf"],[3,"customText",4,"ngIf"],[3,"hidden"],[4,"ngIf"],["class","card-box listPhotos",4,"ngIf"],["mat-icon-button","",3,"matTooltip","matMenuTriggerFor"],[1,"studentInfo",2,"padding-right","10px","color","#fff"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],[3,"customText"],[1,"row","justify-content-center","py-5"],[1,"col-12","text-center"],[1,"alert","alert-danger"],[1,"card-box","listPhotos"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),t.NdJ("click",function(){return o.goBack()}),t.ALo(4,"mytranslate"),t._uU(5,"keyboard_arrow_left"),t.qZA(),t.YNc(6,Vo,4,4,"button",4),t.TgZ(7,"mat-menu",null,5)(9,"div",6)(10,"ul",7)(11,"li")(12,"button",8),t.NdJ("click",function(){return o.reloadPage()}),t.TgZ(13,"span"),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()(),t.YNc(16,Ko,6,8,"li",9),t.qZA()()()(),t.YNc(17,$o,3,3,"h4",10),t.qZA(),t.YNc(18,Xo,2,3,"azt-loading-effect",11),t.TgZ(19,"div",12),t.YNc(20,tn,6,3,"div",13),t.YNc(21,en,3,3,"div",14),t.qZA()()),2&e&&(t.xp6(3),t.s9C("title",t.lcZ(4,9,"lang_buttom_back")),t.xp6(3),t.Q6J("ngIf",null!=o.historyAnswerObjs&&o.historyAnswerObjs.length>0),t.xp6(8),t.Oqu(t.lcZ(15,11,"lang_homework_mark_exercise_last")),t.xp6(2),t.Q6J("ngForOf",o.historyAnswerObjs),t.xp6(1),t.Q6J("ngIf",o.classroomObj),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading),t.xp6(1),t.Q6J("hidden",o.statusObj.loading),t.xp6(1),t.Q6J("ngIf",""!=o.errorMessage),t.xp6(1),t.Q6J("ngIf",""==o.errorMessage))},dependencies:[E.sg,E.O5,oe.lW,ut.Hw,ne.VK,ne.p6,kt.gM,_t.Q,Lt.g,Y.bT,Y.yl,Y.gG],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}  .studentInfo img{display:inline-flex!important}#titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;position:relative;align-items:center;display:flex;justify-content:space-between;color:#fff}#titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}#titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}.block-left[_ngcontent-%COMP%]{display:flex;align-items:center}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]}),r})();const nn=[{path:"",component:(()=>{class r extends X.Q{constructor(e){super(e),this.commonService=e}ngOnInit(){super.ngOnInit()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36($.v))},r.\u0275cmp=t.Xpm({type:r,selectors:[["homework-master-page"]],features:[t.qOj],decls:2,vars:0,consts:[["id","homework-layout"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[J.lC],encapsulation:2}),r})(),canActivate:[M.v],children:[{path:"add-new-homework/:cat_id",component:Ae},{path:"mark-exercise/:id/:hash_id",component:on},{path:"mark-exercise-new/:id/:hash_id",component:Qo},{path:"export-homework/:class_id/:id/:hash_id",component:wo},{path:"content-store",component:Re}]}];let rn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[J.Bz.forChild(nn),J.Bz,A.fQ]}),r})(),an=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Q.Xd,J.Bz,E.ez,f.j,ot.Z_,rn,g.u5,g.UX,U.Is,h.Z,it.xC,_.W,b.d,z.e4,H.qyJ.pick(H.ciZ)]}),r})()}}]);