"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[787],{4779:(y,g,u)=>{u.d(g,{K:()=>a});var d=u(65879),e=u(25112),m=u(88131),v=u(88489),t=u(27161);let a=(()=>{class o{_saveSortTypeOfSetting(r){this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,r)}_removeSortTypeOfSetting(){this.browserStorageService.removeSimpleStorage(this.sortByStorageKey)}_getSortTypeOfSetting(r){return this.browserStorageService.getSimpleStorage(this.sortByStorageKey)==r}_getCurrentSortTypeOfSetting(){return this._getSortTypeOfSetting("isSortByNameAsc")?"isSortByNameAsc":this._getSortTypeOfSetting("isSortByMarkDesc")?"isSortByMarkDesc":this._getSortTypeOfSetting("isSortByTimeDesc")?"isSortByTimeDesc":void 0}_filterExamResultObjsByFilterSettingObjByClassroom(r,n){var s=[];return n.forEach(i=>{i.results=this._filterExamResultObjsByFilterSettingObjNotInClassroom(r,i.results??new Array),s.push(i)}),s}_filterExamResultObjsByFilterSettingObjNotInClassroom(r,n){var s=[];if(r.isMarked||r.isNotMarked||r.isOnTest||r.isNotSubmit||r.isNotTested)for(var i of n){let c=!1,l=r.isOnTest||r.isNotSubmit;r.isMarked&&1==i.isMarked&&(!l||!(1!=i.status&&(i.isMarked||i.isNotMarked)))&&(c=!0),r.isNotMarked&&1==i.isNotMarked&&(!l||!(1!=i.status&&(i.isMarked||i.isNotMarked)))&&(c=!0),r.isOnTest&&(1==i.isOnTest||0==i.status&&(i.isMarked||i.isNotMarked))&&(c=!0),r.isNotTested&&1==i.isNotTested&&(c=!0),r.isNotSubmit&&(1==i.isNotSubmit||-1==i.status&&(i.isMarked||i.isNotMarked))&&(c=!0),c&&s.push(i)}else s=n;return s}_searchExamResultObjsByFullNameInClassroom(r,n){var s=[];return this.commonService.myClone(r).forEach(c=>{var l=this._searchExamResultObjsByFullNameNotInClassroom(c.results??[],n);l.length>0&&(c.results=l,s.push(c))}),s}_searchExamResultObjsByFullNameNotInClassroom(r,n){n=this.commonService.convertVietnameseToEnglish(n).toLowerCase();var s=[];return r.forEach(i=>{-1!=this.commonService.convertVietnameseToEnglish(i.fullName??"").toLowerCase().indexOf(n)&&s.push(i)}),s}_sortExamResultObjsBySettingObjByClassroom(r,n,s){return"isSortByNameAsc"==s?this.sortService.sortFirstNameStudentsInClass(r):"isSortByTimeDesc"==s?this.sortService.sortTimeStudentsInClass(r,1):"isSortByMarkDesc"==s?this.sortService.sortMarkStudentsInClass(r,1,n):this._sortExamResultObjsBySortTypeOfClassroom(r)}_sortExamResultObjsBySettingObjNotInClassroom(r,n,s){return"isSortByNameAsc"==s?this.sortService.sortFirstNameStudents(r):"isSortByTimeDesc"==s?this.sortService.sortTimeDESC(r):"isSortByMarkDesc"==s?this.sortService.sortMarkDESC(r,n):r}_sortExamResultObjsBySortTypeOfClassroom(r){var n=this.commonService.myClone(r);return n.forEach((s,i)=>{s.results=0==s.classObj?.sortType?this.sortService.sortFirstNameStudents(s.results??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(s.results??[],"pos","id"),n[i]=s}),n}_changeExamResultStatusForAllClassroom(r,n,s){var i=[];return r.forEach((c,l)=>{c.results=this._changeExamResultStatusForOneClassroom(c.results??new Array,n),c={indexCounter:l,...c,countSubmitted:s?c.classObj?.countSubmitted:this._countTotalSubmittedOfExamResultObjs(c.results??new Array)},i.push(c)}),i}_changeExamResultStatusForOneClassroom(r,n){var s=[...r];return s.forEach((i,c)=>{i.confirmedAt&&""!=i.confirmedAt&&i.resultId&&i.resultId>0?i.isMarked=!0:i.resultId&&i.resultId>0&&(!i.confirmedAt||""==i.confirmedAt)?i.isNotMarked=!0:i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||0!=i.status?i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||-1!=i.status?null==i.startedTest&&(i.isNotTested=!0):i.isNotSubmit=!0:i.isOnTest=!0,s[c]=i}),s.forEach((i,c)=>{i.files&&""!=i.files&&!Array.isArray(i.files)&&(i.filesParse=this.commonService.myParseJson(i.files)),s[c]=i}),s}_countTotalSubmittedOfExamResultObjs(r){var n=0;return r.forEach(s=>{(s.isMarked||s.isNotMarked)&&n++}),n}_counterTotalEssayOfQuestionObjs(r){let n=0;return r.forEach(s=>{this.answerTypeService.isEssayAnswer(s)&&n++}),n}_checkCounterEssayQuestionObjs(r){let n=0;return r.forEach(s=>{s.isEssay&&n++}),n}constructor(r,n,s,i){this.commonService=r,this.sortService=n,this.browserStorageService=s,this.answerTypeService=i,this.sortByStorageKey="exam_list_sort_by"}static#t=this.\u0275fac=function(n){return new(n||o)(d.LFG(e.z),d.LFG(m.V),d.LFG(v.n),d.LFG(t.i))};static#e=this.\u0275prov=d.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()},76024:(y,g,u)=>{u.d(g,{Y:()=>e});var d=u(65879);let e=(()=>{class m{constructor(t){this.el=t,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=t.nativeElement}ngOnChanges(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){const a=Number(this.min);this.min=isNaN(a)?-1/0:a}if(t.max){const a=Number(this.max);this.max=isNaN(a)?1/0:a}}onBeforeInput(t){if(isNaN(Number(t.data))){if(t.data===this.decimalSeparator1||t.data===this.decimalSeparator2||t.data===this.negativeSign&&this.allowNegatives)return;t.preventDefault(),t.stopPropagation()}}onKeyDown(t){if(this.navigationKeys.indexOf(t.key)>-1||("a"===t.key||"KeyA"===t.code)&&!0===t.ctrlKey||("c"===t.key||"KeyC"===t.code)&&!0===t.ctrlKey||("v"===t.key||"KeyV"===t.code)&&!0===t.ctrlKey||("x"===t.key||"KeyX"===t.code)&&!0===t.ctrlKey||("a"===t.key||"KeyA"===t.code)&&!0===t.metaKey||("c"===t.key||"KeyC"===t.code)&&!0===t.metaKey||("v"===t.key||"KeyV"===t.code)&&!0===t.metaKey||("x"===t.key||"KeyX"===t.code)&&!0===t.metaKey)return;let a="";var o=t.key;if(t.key===this.decimalSeparator2&&(o=this.decimalSeparator1),this.decimal&&o===this.decimalSeparator1)return a=this.forecastValue(o),a.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=a.indexOf(this.decimalSeparator1)>-1,this.setNewValue(o)),void t.preventDefault();if(o===this.negativeSign&&this.allowNegatives)return a=this.forecastValue(o),a.charAt(0)!==this.negativeSign||a.split(this.negativeSign).length>2?void t.preventDefault():void(this.hasNegativeSign=a.split(this.negativeSign).length>-1);if(" "===o||isNaN(Number(o)))return void t.preventDefault();if(a=a||this.forecastValue(o),this.regex&&!this.regex.test(a))return void t.preventDefault();const h=Number(a);(h>this.max||h<this.min)&&t.preventDefault()}onPaste(t){if(!0===this.allowPaste){let a="";window.clipboardData?a=window.clipboardData.getData("text"):t.clipboardData&&t.clipboardData.getData&&(a=t.clipboardData.getData("text/plain")),this.pasteData(a),t.preventDefault()}else t.preventDefault(),t.stopPropagation()}onDrop(t){const a=t.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(a),t.preventDefault()}pasteData(t){t=t.replace(",",".");const a=this.sanitizeInput(t);if(!a.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,a))if(this.inputElement.setRangeText){const{selectionStart:h,selectionEnd:r}=this.inputElement;this.inputElement.setRangeText(a,h??0,r??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,a);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(t){t=t.replace(",","."),this.insertAtCursor(this.inputElement,t),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(t,a){const o=t.selectionStart??0,h=t.selectionEnd??0;t.value=t.value.substring(0,o)+a+t.value.substring(h,t.value.length);const r=o+a.length;t.focus(),t.setSelectionRange(r,r),this.triggerEvent(t,"input")}triggerEvent(t,a){if("createEvent"in document){const o=document.createEvent("HTMLEvents");o.initEvent(a,!1,!0),t.dispatchEvent(o)}}sanitizeInput(t){let o,a="";o=this.decimal&&this.isValidDecimal(t)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),a=t.replace(o,"");const h=this.inputElement.maxLength;if(h>0){const r=h-this.inputElement.value.length+(a.includes(`${this.negativeSign}`)?1:0);a=r>0?a.substring(0,r):""}return a}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(t){if(this.hasDecimalPoint){const a=this.getSelection();return a&&a.indexOf(this.decimalSeparator1)>-1?t.split(this.decimalSeparator1).length<=2:t.indexOf(this.decimalSeparator1)<0}return t.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(t){const o=this.inputElement.selectionEnd??0,h=this.inputElement.value;return h.substring(0,this.inputElement.selectionStart??0)+t+h.substring(o)}static#t=this.\u0275fac=function(a){return new(a||m)(d.Y36(d.SBq))};static#e=this.\u0275dir=d.lG2({type:m,selectors:[["","appOnlyNumber",""]],hostBindings:function(a,o){1&a&&d.NdJ("beforeinput",function(r){return o.onBeforeInput(r)})("keydown",function(r){return o.onKeyDown(r)})("paste",function(r){return o.onPaste(r)})("drop",function(r){return o.onDrop(r)})},inputs:{decimal:"decimal",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[d.TTD]})}return m})()},37783:(y,g,u)=>{u.d(g,{W:()=>s});var d=u(47496),e=u(65879),m=u(96814),v=u(70342),t=u(77988),a=u(92596),o=u(44589),h=u(28380);function r(i,c){if(1&i){const l=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"div",24)(2,"p",25),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"p",25),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",26),e._UZ(9,"input",27),e.TgZ(10,"button",28),e.NdJ("click",function(){e.CHM(l);const p=e.oxw();return e.KtG(p.showCopySuccess())}),e.O4$(),e.TgZ(11,"svg",29),e._UZ(12,"rect",30)(13,"path",31),e.qZA(),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()(),e.BQk()}if(2&i){const l=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_auto_hoac")),e.xp6(3),e.Oqu(e.lcZ(7,7,"lang_classroom_QR_join_link_copy")),e.xp6(3),e.Q6J("value",l.linkUrl),e.xp6(1),e.Q6J("cdkCopyToClipboard",l.copyLinkToClipboard(l.linkUrl)),e.xp6(4),e.hij(" ",e.lcZ(15,9,"lang_auto_sao_chep")," ")}}const n=function(i){return{"w-80":i}};let s=(()=>{class i extends d.Q{constructor(){super(...arguments),this.id="",this.linkUrl="",this.fileName="",this.showLink=!1,this.qrCodeDownloadLink=""}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}copyLinkToClipboard(l){return l}onChangeURL(l){this.qrCodeDownloadLink=l}downloadQrCode(){try{var l=document.createElement("a");document.body.appendChild(l),l.setAttribute("href",this.qrCodeDownloadLink.changingThisBreaksApplicationSecurity),l.setAttribute("download",""!=this.fileName?this.commonService.createFileNameExportFile([this.fileName])+".jpg":this.commonService.createFileNameExportFile(["azota-qr-code-"])+".jpg"),l.click()}catch{console.log("Download qrcode error")}}static#t=this.\u0275fac=function(){let l;return function(p){return(l||(l=e.n5z(i)))(p||i)}}();static#e=this.\u0275cmp=e.Xpm({type:i,selectors:[["azt-download-qr-code"]],inputs:{id:"id",linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},features:[e.qOj],decls:28,vars:16,consts:[["azt-track-service","download-qr-code-hiQXy_iTc",1,"btn","btn-outline-primary","btn-transparent","p-1",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6"],["x","3","y","3","width","5","height","5","rx","1"],["x","16","y","3","width","5","height","5","rx","1"],["x","3","y","16","width","5","height","5","rx","1"],["d","M21 16h-3a2 2 0 0 0-2 2v3"],["d","M21 21v.01"],["d","M12 7v3a2 2 0 0 1-2 2H7"],["d","M3 12h.01"],["d","M12 3h.01"],["d","M12 16v.01"],["d","M16 12h1"],["d","M21 12v.01"],["d","M12 21v-1"],["showQrCode","matMenu"],["azt-track-service","download-qr-code-9t-9Wiu2xv",1,"box","p-3","text-center",3,"ngClass","click"],[2,"background","#fff","padding","5px"],["colorDark","#2361ad","imageSrc","https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/Azota-For-QrCode-01.png",3,"allowEmptyString","qrdata","elementType","width","errorCorrectionLevel","qrCodeURL"],["azt-track-service","download-qr-code-RqVBz6g1z7",1,"btn","btn-outline-primary","btn-transparent","btn-sm","mx-auto","mt-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[4,"ngIf"],[1,"text-center"],[1,"h5","mt-2","font-medium"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","download-qr-code-yW-aFu0tO",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"]],template:function(_,p){if(1&_&&(e.TgZ(0,"button",0),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",1),e._UZ(3,"rect",2)(4,"rect",3)(5,"rect",4)(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8)(10,"path",9)(11,"path",10)(12,"path",11)(13,"path",12)(14,"path",13),e.qZA()(),e.kcU(),e.TgZ(15,"mat-menu",null,14)(17,"div",15),e.NdJ("click",function(S){return S.stopPropagation()}),e.TgZ(18,"div",16)(19,"qrcode",17),e.NdJ("qrCodeURL",function(S){return p.onChangeURL(S)}),e.qZA()(),e.TgZ(20,"a",18),e.NdJ("click",function(){return p.downloadQrCode()}),e.O4$(),e.TgZ(21,"svg",19),e._UZ(22,"path",20)(23,"polyline",21)(24,"line",22),e.qZA(),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.YNc(27,r,16,11,"ng-container",23),e.qZA()()),2&_){const f=e.MAs(16);e.s9C("matTooltip",e.lcZ(1,10,"lang_auto_quet_hoac_tai_ma_qr_code")),e.Q6J("matMenuTriggerFor",f),e.xp6(17),e.Q6J("ngClass",e.VKq(14,n,p.showLink)),e.xp6(2),e.Q6J("allowEmptyString",!0)("qrdata",p.linkUrl)("elementType","url")("width",128)("errorCorrectionLevel","M"),e.xp6(6),e.hij(" ",e.lcZ(26,12,"lang_auto_tai_ve_may")," "),e.xp6(2),e.Q6J("ngIf",p.showLink)}},dependencies:[m.mk,m.O5,v.i3,t.VK,t.p6,a.gM,o.V,h.JV],encapsulation:2})}return i})()}}]);