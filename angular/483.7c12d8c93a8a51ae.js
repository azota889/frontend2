"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[483],{91404:(p,d,r)=>{r.d(d,{W:()=>o,l:()=>e});var m=r(7468);class e{constructor(h,t,s,a){this.type=h,this.data=t,this.message=s,this.questionNumber=a}}class o{initService(){const h=new m.$(this.cdnService,this.commonService,this.configRenderService,(t,s)=>{this.callbackPushImage&&this.caller&&this.callbackPushImage.call(this.caller,t,s)},t=>{this.callbackFall&&this.caller&&this.callbackFall.call(this.caller,t)});h.isCropImage=this.configRenderService.getIsCropImage(),this.services.push(h)}render(h,t){return this.services.forEach(s=>{h=s.render(h??"",[],void 0,t)}),h??""}constructor(h,t,s,a){this.cdnService=h,this.commonService=t,this.configRenderService=s,this.callbackFall=a,this.services=[],this.initService()}}},5647:(p,d,r)=>{r.d(d,{l:()=>l});var m=r(39621),e=r(65879),o=r(96814),i=r(16007),h=r(46721);function t(c,g){if(1&c&&(e.O4$(),e.kcU(),e._UZ(0,"mat-progress-bar",10)),2&c){const _=e.oxw();e.Q6J("value",_.progress_value)}}function s(c,g){if(1&c&&(e.O4$(),e.kcU(),e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&c){const _=e.oxw();e.xp6(1),e.Oqu(_.getMsg())}}function a(c,g){if(1&c){const _=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"a",13),e.NdJ("click",function(){e.CHM(_);const f=e.oxw();return e.KtG(f.isShowErrorsBox=!f.isShowErrorsBox)}),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()()}if(2&c){const _=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_da_xay_ra_loi_trong_qua_trinh_trao_doi_du_lieu_")," "),e.xp6(3),e.hij(" ",_.isShowErrorsBox?e.lcZ(5,4,"lang_auto_an_chi_tiet"):e.lcZ(6,6,"lang_auto_xem_chi_tiet")," ")}}function u(c,g){if(1&c&&(e.O4$(),e.kcU(),e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&c){const _=e.oxw();e.xp6(1),e.hij(" ",_.LogErrorsRequest," ")}}function n(c,g){if(1&c&&(e.O4$(),e.kcU(),e.TgZ(0,"div",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&c){const _=e.oxw();e.xp6(1),e.Oqu(_.customText?_.customText:e.lcZ(2,1,"lang_auto_dang_tai_du_lieu")+"...")}}let l=(()=>{class c extends m.Q{constructor(){super(...arguments),this.progress_value=-1,this.LogErrorsRequest=!1,this.customText="",this.isShowErrorsBox=!1}getMsg(){let _="";return 100==this.progress_value||0==this.progress_value?(_=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly")??"",`${_} ...`):(_=this.commonService.myTranslateInstant("lang_auto_dang_tai_tep_tin_len_he_thong")??"",`${_}... ${this.progress_value} %`)}}return c.\u0275fac=function(){let g;return function(v){return(g||(g=e.n5z(c)))(v||c)}}(),c.\u0275cmp=e.Xpm({type:c,selectors:[["azt-loading-effect"]],inputs:{progress_value:"progress_value",LogErrorsRequest:"LogErrorsRequest",customText:"customText"},features:[e.qOj],decls:12,vars:5,consts:[[1,"box-loading","h-full"],[1,"text-center","py-4"],["version","1.1","id","jobing-j-drawit","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 109 92.9",0,"xml","space","preserve",1,"w-12","mx-auto",2,"enable-background","new 0 0 109 92.9"],["d","M90.8,52c3.5,6.2,7.1,11.7,9.8,17.7c4.4,9.7-2.9,20.7-13.8,20.9c-11.8,0.2-23.7,0.2-35.5,0 c-11-0.1-17.6-12.2-12-21.7c0.4-0.8,1.8-1.4,2.7-1.4c9.9-0.1,19.7-0.1,29.6-0.1c9.8,0,15.9-4.6,18.7-14C90.4,53.2,90.5,52.9,90.8,52 z",1,"azt-svg-loading","jobing-j"],["d","M39.6,90.3c-6.8,0-13.8,0.8-20.5-0.2c-9.7-1.4-15-12.8-10.3-21.3c5.9-10.9,12.1-21.6,18.5-32.2 c5.5-9,18.6-8.7,24.2,0.2c0.7,1.1,0.8,1.9,0.1,3.1C46.7,48.3,42,57,36.8,65.3c-5.3,8.4-3.8,18.8,2.5,24.6 C39.5,89.9,39.5,90.2,39.6,90.3z",1,"azt-svg-loading","jobing-j"],["d","M32.5,27.3c3.3-5.7,6.1-11,9.4-16c5.9-9.1,19.4-9.2,25.1,0c6.5,10.4,12.6,21,18.3,31.7 c4.8,9-1.5,19.9-11.5,20.7c-1.6,0.1-2.6-0.2-3.5-1.8c-4.8-8.6-9.8-17.1-14.7-25.6c-4.7-8.3-12.5-11.6-21.7-9.2 C33.6,27.1,33.3,27.1,32.5,27.3z",1,"azt-svg-loading","jobing-j"],["style","margin-bottom: 30px; border-radius: 5px","mode","buffer",3,"value",4,"ngIf"],["class","note text-center font-weight-bold",4,"ngIf","ngIfElse"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],["notLoading",""],["mode","buffer",2,"margin-bottom","30px","border-radius","5px",3,"value"],[1,"note","text-center","font-weight-bold"],["role","alert",1,"alert","alert-danger","mt-3"],["azt-track-service","loading-effect-5TYv52U-wgq","href","javscript:void(0)",3,"click"],[1,"note","text-center","font-medium"]],template:function(_,v){if(1&_&&(e.TgZ(0,"div",0)(1,"div",1),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"path",3)(4,"path",4)(5,"path",5),e.qZA()(),e.YNc(6,t,1,1,"mat-progress-bar",6),e.YNc(7,s,2,1,"div",7),e.YNc(8,a,7,8,"div",8),e.YNc(9,u,2,1,"div",8),e.YNc(10,n,3,3,"ng-template",null,9,e.W1O),e.qZA()),2&_){const f=e.MAs(11);e.xp6(6),e.Q6J("ngIf",-1!=v.progress_value),e.xp6(1),e.Q6J("ngIf",-1!=v.progress_value)("ngIfElse",f),e.xp6(1),e.Q6J("ngIf",!1!==v.LogErrorsRequest),e.xp6(1),e.Q6J("ngIf",v.isShowErrorsBox)}},dependencies:[o.O5,i.pW,h.JV],encapsulation:2}),c})()},90241:(p,d,r)=>{r.d(d,{e:()=>i});var m=r(19347),e=r(39621),o=r(65879);let i=(()=>{class h extends e.Q{constructor(s,a){super(),this.data=s,this.dialogRef=a}}return h.\u0275fac=function(s){return new(s||h)(o.Y36(m.WI),o.Y36(m.so))},h.\u0275cmp=o.Xpm({type:h,selectors:[["ng-component"]],features:[o.qOj],decls:0,vars:0,template:function(s,a){},encapsulation:2}),h})()},61675:(p,d,r)=>{r.d(d,{C:()=>o});var m=r(65879),e=r(19347);let o=(()=>{class i{constructor(t){this.dialog=t,this.open=(s,a)=>this.dialog.open(s,a)}}return i.\u0275fac=function(t){return new(t||i)(m.LFG(e.uw))},i.\u0275prov=m.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},7468:(p,d,r)=>{r.d(d,{$:()=>h});var m=r(60723),e=r(23353),o=r(91404),i=r(92381);class h extends i.N{constructor(s,a,u,n,l){super(),this.cdnService=s,this.commonService=a,this.configRenderService=u,this.callBack=n,this.callbackFall=l}render(s,a,u,n){if(s.indexOf("@[]")<0)return n&&n(),s;let _,l=/@\[\]\{[^@]+\}@\[\]/g,c=s,g=new Map;for(;null!==(_=l.exec(s));){let v=_[0],f=v.split("@[]")[1],E=this.commonService.willDeleteParseJson(f),C=E.link,I=m.G.generateIdRequired(10);c=c.replace(v,`<div id='${I}' class='img-docx skeleton-box-loading' style='width: ${E.data.width*this.ratioImage}px;height: ${E.data.height*this.ratioImage}px'></div>`),g.has(C)?g.get(C)?.push({id:I,data:E.data}):g.set(C,[{id:I,data:E.data}])}return this.startLoadImage(g).then(()=>{n&&n()}).catch(v=>{this.callbackFall&&this.callbackFall(v)}),c}startLoadImage(s){return new Promise((a,u)=>{var n=0;s.size>0?s.forEach((l,c)=>{this.loadImage(c,this.cdnService).then(g=>{if(this.processImageQuestion(g,l,u),this.loadingManager.delete(g.id),this.callBack)for(let _ of l)this.callBack(_.id,_.renderStr);++n===s.size&&a()}).catch(()=>{const g=c.split("/");var _=this.commonService.myTranslateInstant("lang_testbank_render_cant_download_the_image")??"";u(new o.l("LOAD_IMAGE",[g[g.length-1]],_))})}):a()})}processImageQuestion(s,a,u){a.forEach(n=>{try{const l=document.createElement("canvas");n.data.width=-1===n.data.width?s.width:n.data.width,n.data.height=-1===n.data.height?s.height:n.data.height,l.width=n.data.width,l.height=n.data.height,l.getContext("2d")?.drawImage(s,n.data.x,n.data.y,n.data.width,n.data.height,0,0,l.width,l.height);let g=this.isCropImage?e.rj.cropCanvas(l):l;g=this.isCanvasEmpty(g)?l:g,n.renderStr=`<img id='${n.id}' class='img-docx' alt='error...' src='${g.toDataURL()}' style='width: ${g.width*this.ratioImage}px;height: auto'>`}catch{const c=s.src;return void u(new o.l("CROP_IMAGE",[c[c.length-1]],"Kh\xf4ng c\u1eaft \u0111\u01b0\u1ee3c n\u1ed9i dung trong h\xecnh \u1ea3nh"))}})}isCanvasEmpty(s){const a=document.createElement("canvas");return a.width=s.width,a.height=s.height,s.toDataURL()===a.toDataURL()}}},92381:(p,d,r)=>{r.d(d,{N:()=>i});var m=r(60723),e=r(23353),o=r(10548);class i{constructor(){this.isCropImage=!0,this.loadingManager=new Map,this.ratioImage=.65}setCallback(t){}setApiCache(t){}setLoadingManager(t){this.loadingManager=t}loadImage(t,s){return new Promise((a,u)=>{let n=m.G.generateIdRequired(10);this.loadingManager.set(n,t),(0,o.dr)(t,s).then(l=>{a(l),this.loadingManager.delete(n)}).catch(()=>{this.loadingManager.delete(n),u(new Error)})})}loadImageToBase64(t,s){return new Promise((a,u)=>{const n=new Image;n.crossOrigin="anonymous",n.setAttribute("count","1");let l=m.G.generateIdRequired(10);this.loadingManager.set(l,t),n.onload=()=>{const c=document.createElement("canvas");c.width=n.width,c.height=n.height,c.getContext("2d")?.drawImage(n,0,0,n.width,n.height,0,0,c.width,c.height);const _=this.isCropImage?e.rj.cropCanvas(c):c;let v=`<img id='${l}' class='img-docx' alt='error...' src='${_.toDataURL()}' style='width: ${_.width*this.ratioImage}px;height: auto'>`;a(v),this.loadingManager.delete(l)},n.onerror=()=>{this.loadingManager.delete(l);const c=n.getAttribute("count");c&&1==Number(c)?(n.src=s.getMyCdn(t),n.setAttribute("count","2")):c&&Number(c)<5?(n.setAttribute("count",c+1),n.src=s.getRawCdnLink(t)+"?t="+(new Date).getTime()):u(new Error)},n.src=s.getRawCdnLink(t)})}}},60723:(p,d)=>{d.G=void 0,d.G=class m{static generateIdRequired(o){let i="";for(let s=0;s<o;s++)i+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+i}}},65097:(p,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PartsParser=void 0;const m=r(49288),e=r(90957),o=r(39963),i=r(15647),h=r(42292),t=r(58446);class s{constructor(u){this.__idCssElement="qv_style_element",this.baseConfigEventListener=[],this.imgMaps=[],this.services=new Array;const n=this.__pushServices([new e.FirstPartService(this.baseConfigEventListener),new m.ImagePartService(this.baseConfigEventListener),new h.DocxImagePartService(this.baseConfigEventListener),new i.LibrariesPartService(this.baseConfigEventListener,u),new o.FindAnsPartService(this.baseConfigEventListener),new t.LatexPartService(this.baseConfigEventListener)]);this.__pushCss(n)}__pushCss(u){if(!document.getElementById(this.__idCssElement)&&document.head){const l=document.createElement("style");l.id=this.__idCssElement,l.innerHTML=u.replace(/  /g," ").replace(/\n/g," ").replace(/\t/g," "),document.head.appendChild(l)}}__pushServices(u){let n="";return u.forEach(l=>{l.outCss().forEach(g=>{n+=`.${g.className} { ${g.content} } \n`}),this.services.push(l)}),n}start(u){const n=document.createElement("div");return u.forEach(l=>{const c=document.createElement("p");c.classList.add("qv_line"),this.services.forEach(g=>{g.pushImages(this.imgMaps),l=g.parse(l)}),c.innerHTML=l.text||"",n.appendChild(c)}),0===n.innerText.indexOf(s.IgnoreChar)?n.innerText.replace(s.IgnoreChar,""):n.outerHTML}register(u){this.imgMaps=u}configEventListener(u){u.forEach(n=>{-1===this.baseConfigEventListener.findIndex(l=>l.eventName===n.eventName)&&this.baseConfigEventListener.push(n)})}doneRenderQuestions(){this.services.forEach(u=>{u.onEndAll()})}}d.PartsParser=s,s.IgnoreChar="{!ignore}"},94235:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BaseCaller=void 0,d.BaseCaller=class r{getQuestion(e,o,i,h,t,s){return new Promise(a=>{a([])})}}},20926:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.BeautyImageCrop=void 0;class r{static getRGB(e,o,i,h){return{red:h[4*(i.width*o+e)],green:h[4*(i.width*o+e)+1],blue:h[4*(i.width*o+e)+2],opacity:h[4*(i.width*o+e)+3]}}static isEmpty(e){return 255==e.red&&255==e.green&&255==e.blue||0===e.opacity}static scanX(e,o,i){for(var h=e?1:-1,t=e?0:o.width-1;e?t<o.width:t>-1;t+=h)for(var s=0;s<o.height;s++)if(!r.isEmpty(r.getRGB(t,s,o,i.data)))return t;return 0}static scanY(e,o,i){for(var h=e?1:-1,t=e?0:o.height-1;e?t<o.height:t>-1;t+=h)for(var s=0;s<o.width;s++)if(!r.isEmpty(r.getRGB(s,t,o,i.data)))return t;return 0}static cropImage(e,o,i){const t=e.canvas,s=document.createElement("canvas"),a=s.getContext("2d");var u=r.scanY(!0,t,o)-5,n=r.scanY(!1,t,o)+5,l=r.scanX(!0,t,o)-5,c=r.scanX(!1,t,o)+5;i&&(i.top||(n=0),i.bottom||(n=t.height),i.left||i.right?(i.left||(n=0),i.right||(n=t.width)):c=t.width+l);var g=c-l,_=n-u;return s.width=g,s.height=_,a?.drawImage(t,l,u,g,_,0,0,g,_),s}static removeBg(e){const o=document.createElement("canvas"),i=o.getContext("2d");if(i){o.width=e.width,o.height=e.height,i.drawImage(e,0,0);for(var h=i.getImageData(0,0,o.width,o.height),t=h.data,s=0;s<t.length;s+=4)t[s]>=185&&t[s+1]>=185&&t[s+2]>=185&&(t[s+3]=0);i.putImageData(h,0,0)}return o}static cropCanvas(e,o){const i=e.getContext("2d");if(i){var h=i.getImageData(0,0,e.width,e.height);return r.cropImage(i,h,o)}return e}}d.BeautyImageCrop=r},23353:(p,d,r)=>{d.rj=void 0;r(94235);const o=r(20926);Object.defineProperty(d,"rj",{enumerable:!0,get:function(){return o.BeautyImageCrop}});r(65097)},42292:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DocxImagePartService=void 0;class r{constructor(e){this.pattern_check=/@\[\]{"link":"[^"]+","data":{[^}]+}}@\[\]/i,this.images=[],this.indexImageLink=[],this.style=document.createElement("style"),this.baseConfigEventListener=e,document.head.appendChild(this.style)}parse(e){let h,o=0,i=e.text||"";for(;null!==(h=this.pattern_check.exec(i));){try{var t=JSON.parse(h[0].split("@[]")[1]);t.data={x:Math.floor(t.data.x),y:Math.floor(t.data.y),width:Math.floor(t.data.width),height:Math.floor(t.data.height)},this.indexImageLink.push(t.link),i=i.replace(this.pattern_check,`<div class="background_question_${this.indexImageLink.length-1}"><img width="1024" height="1024" src="${t.link}"></div>`),this.style.textContent+=`.background_question_${this.indexImageLink.length-1} {margin: 0 3px; width: ${t.data.width}px; height: ${t.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${this.indexImageLink.length-1} img { margin-top: -${t.data.y}px; margin-left: -${t.data.x}px;}`}catch{i=i.replace(this.pattern_check,"")}o++>1e4&&(i="")}return Object.assign(Object.assign({},e),{text:i})}outCss(){return[]}pushImages(e){this.images=e}onEndAll(){}}d.DocxImagePartService=r,r.NAME_SERVICE="image_part:"},39963:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FindAnsPartService=void 0,d.FindAnsPartService=class r{constructor(e){this.pattern_check=/\[[ABCDEFGHI]:[^\]]+\]/i,this.images=[],this.baseConfigEventListener=e}parse(e){let h,o=0,i=e.text||"";for(;null!==(h=this.pattern_check.exec(i));){const t=h[0].replace("[","").replace("]",""),s=t.substring(0,1),a=document.createElement("span");a.classList.add("qv_string_eng_ans"),a.innerHTML=s;const u=t.substring(2),n=document.createElement("span");n.classList.add("qv_string_eng"),n.innerHTML=u,n.appendChild(a),i=i.replace(this.pattern_check,n.outerHTML),o++>1e4&&(i="")}return Object.assign(Object.assign({},e),{text:i})}outCss(){return[{className:"qv_string_eng",content:"\n                    cursor: pointer;\n                    padding: 0 5px;\n                    font-weight: bold;\n                    text-decoration: underline;\n                    position: relative;\n                    height: 40px;\n                    display: inline-block;\n                "},{className:"qv_string_eng_ans",content:"\n                    position: absolute;\n                    top: 20px;\n                    left: 45%;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}},90957:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.FirstPartService=void 0,d.FirstPartService=class r{constructor(e){this.images=[],this.baseConfigEventListener=e}parse(e){return Object.assign({},e)}outCss(){return[{className:"qv_line",content:"\n                    margin: 0 !important;\n                "},{className:"qv_qts_image",content:"\n                    width: 100%;\n                "},{className:"qv_ats_image",content:"\n                    width: 60%;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}},49288:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.ImagePartService=void 0;class r{constructor(e){this.pattern_check=/\[!img:[afhci]+[\dABCDEFGHI]+\]/i,this.images=[],this.baseConfigEventListener=e}parse(e){let h,o=0,i=e.text||"";for(;null!==(h=this.pattern_check.exec(i));){const t=h[0].replace("[!img:","").replace("]",""),s=this.images.find(a=>a.id===t);if(s){const a=document.createElement("img");a.crossOrigin="anonymous",a.classList.add(0===t.indexOf("af")?"qv_full_a_img":0===t.indexOf("f")?"qv_full_img":"qv_img"),a.src=s.link,i=i.replace(this.pattern_check,a.outerHTML)}else{const a=document.createElement("span");a.innerHTML="(Th\xeam h\xecnh \u1ea3nh)",a.classList.add("qv_none_image"),i=i.replace(this.pattern_check,a.outerHTML)}o++>1e4&&(i="")}return Object.assign(Object.assign({},e),{text:i})}outCss(){return[{className:"qv_full_a_img",content:"\n                    cursor: pointer;\n                    width: 60%\n                "},{className:"qv_full_img",content:"\n                    cursor: pointer;\n                    width: 100%\n                "},{className:"qv_img",content:"\n                    cursor: pointer;\n                    height: 25px;\n                "},{className:"qv_none_image",content:"\n                    display: inline-block;\n                    color: #2262ae;\n                    cursor: pointer;\n                "}]}pushImages(e){this.images=e}onEndAll(){}}d.ImagePartService=r,r.NAME_SERVICE="image_part:"},58446:(p,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LatexPartService=void 0;class r{constructor(e){this.images=[],this.baseConfigEventListener=e}parse(e){let o=e.text||"";return Object.assign(Object.assign({},e),{text:o})}outCss(){return[]}pushImages(e){this.images=e}onEndAll(){}}d.LatexPartService=r,r.NAME_SERVICE="latex:"},15647:(p,d,r)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.LibrariesHelper=d.LibrariesPartService=void 0;const m=r(65097);class e{constructor(t,s){this.pattern_check=/^(\[@[CTG]\d+:[^\]]+\]\.)+((\[@Q\d+:[^\]]+\])|(\[[^@:]+\]))$/i,this.pattern_content=/\[(.*?)\]/i,this.images=[],this.baseConfigEventListener=[],this.baseConfigEventListener=t,this.cacheProcess=new i(s,this.baseConfigEventListener)}parse(t){let s=0,a=t.text||"";if(this.pattern_check.test(a)){let u=[];for(;null!==this.pattern_content.exec(a);){const c=this.pattern_content.exec(a);if(!c)break;u.push(c[1]),a=a.substring(0,c.index)+a.substring(c.index+c[0].length)}const n=o.convertStringToTypeObject(u),l={numberQuestion:1,path:n[0],useCache:!0};"Random"===n[0].type?("G"===n[1].type?(l.groupId=n[1].id,l.examId=n[2].id):(l.catId="C"===n[1].type?n[1].id:void 0,l.examId="T"===n[1].type?n[1].id:void 0,l.questionId="Q"===n[1].type?n[1].id:void 0),l.numberQuestion=n[0].id):l.questionId=n[0].id,a=m.PartsParser.IgnoreChar+this.cacheProcess.pushCaller(l),s++>1e4&&(a="")}return Object.assign(Object.assign({},t),{text:a})}outCss(){return[]}pushImages(t){this.images=t}onEndAll(){this.cacheProcess.startCaller()}}d.LibrariesPartService=e,e.NAME_SERVICE="libraries_part:";class o{static convertStringToTypeObject(t){const s=[];return t.forEach(a=>{let u=a.substring(1,2),n=Number(o.pattern_number.exec(a)),l="";if(o.char_types.includes(u)){let c=a.indexOf(":");-1!==c&&(l=a.substring(c))}else u="Random";s.push({name:l,id:n,type:u,content:a})}),s.reverse()}}d.LibrariesHelper=o,o.pattern_number=/\d+/i,o.char_types="CTGQH";class i{constructor(t,s){this.eventDoneKey=e.NAME_SERVICE+"done",this.cacheObjs=[],this.baseCaller=t,this.baseConfigEventListener=s}pushEventValue(){const t=this.baseConfigEventListener.filter(a=>0===a.eventName.indexOf(this.eventDoneKey));let s=[];t.forEach(a=>{const u=this.cacheObjs.filter(l=>"done"===l.step);a.func.call(a.caller,u)&&s.push(a.eventName)}),s.forEach(a=>{const u=this.baseConfigEventListener.findIndex(n=>n.eventName===a);-1!==u&&this.baseConfigEventListener.splice(u,1)})}pushCaller(t){const s=t.catId+"_"+t.examId+"_"+t.groupId+"_"+t.questionId+"_"+t.numberQuestion;var a=this.cacheObjs.find(u=>u.key===s);return a||this.cacheObjs.push(a={key:s,value:[],step:"init",pars:t,count:0}),a.count++,s+"_"+a?.count}startCaller(){this.cacheObjs.forEach(t=>{t.count=0,"init"===t.step?(t.step="call",this.baseCaller.getQuestion(t.pars.numberQuestion,t.pars.useCache,t.pars.catId,t.pars.examId,t.pars.questionId,t.pars.groupId).then(s=>{t.step="done",t.value=s,this.pushEventValue()})):"done"===t.step&&this.pushEventValue()})}}}}]);