"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[136],{25442:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Utils=J.CONST=void 0;class A{static load(z){let w=JSON.parse(z);Object.assign(this,w)}}J.CONST=A,A.RENDER_SCALE=2,A.LINE_SMALL_HEIGHT=7*A.RENDER_SCALE,A.SPLIT_MARGIN=3*A.RENDER_SCALE,A.INTERSEC_MARGIN=20*A.RENDER_SCALE,A.LINE_MAGIN=2*A.RENDER_SCALE,A.MARGIN_LEFT=2*A.RENDER_SCALE,A.ENABLE_IMAGE_PROCESS=!0,A.STEP_SIZE=2,A.CROP_FULL_WIDTH=!0,A.OVERLAP=.5,A.QUESTION_PATTERN=[],A.QUESTION_PATTERN2=[],A.BREAK_LINE_PATTERN=[],A.SECTION_PATTERN_LOWER=[],A.SECTION_PATTERN_NORMAL=[],A.KICK_PATTERN=[],A.TVCN_CHAR=[],A.HET_PATTERN=[],A.DAPAN_PATTERN=[],A.HUONGDAN_PATTERN=[],A.MULTIPLE_ANS_PATTERN=[],A.DRAW_RESULT="",A.SKIP_CHAR=[],A.FOOTER_PATTERN=[],A.HELP_ANS_PATTERN=[],J.Utils=class E{static capitalizeFirstLetter(z){return z.charAt(0).toUpperCase()+z.slice(1)}static tagLang(z){let w=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return w.has(z)?w.get(z):z}static parseInclude(z){var w;let _=z.split("=>"),g=_.length>1?_[1]:-1,T=_[0];T=T.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let X,P=T.split("."),j=[],Z=[],M=[],O=[],K=[],H=[],G=[],nt=[],it=[],ot=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),ft=[];for(let st=P.length-1;st>=0;st--){let Mt=P[st].trim();if(/^\d*$/.test(Mt)){X=+Mt;continue}let ee=Mt.split(",");for(let St of ee){let Jt=St.split(":"),yt=Jt[0],qt=null!==(w=Jt[1])&&void 0!==w?w:"";if(/^G[\-\d]+$/.test(yt.trim()))j.push(+yt.trim().substring(1));else if(/^Q[\-\d]+$/.test(yt.trim()))M.push(+yt.trim().substring(1)),nt.push(qt),ft.push({type:"QUEST",id:+yt.trim().substring(1)});else if(/^C[\-\d]+$/.test(yt.trim())){let Yt=+yt.trim().substring(1);O.push(Yt),H.push(qt),ft.push({type:""!=qt?"SHARE":"CATEGORY",id:Yt})}else if(/^K[\-\d]+$/.test(yt.trim())){let Yt=+yt.trim().substring(1);O.push(Yt),H.push(qt),ft.push({type:""!=qt?"SHARE":"KNOWLEDGE",id:Yt})}else if(/^T[\-\d]+$/.test(yt.trim()))Z.push(+yt.trim().substring(1)),G.push(qt),ft.push({type:"EXAM",id:+yt.trim().substring(1),groupIds:j});else if(/^F:/.test(St.trim())){let Yt=St.trim().substring(2);it.push(ot.has(Yt)?ot.get(Yt):Yt)}}if(ft.length>0){if(it.length>0){let St=["TL","TN","\u0110T","ES","MC","FB"];for(let Jt of ft)Jt.tags=it.filter(yt=>St.indexOf(yt)<0),Jt.answerTypes=it.filter(yt=>St.indexOf(yt)>=0).map(yt=>"TL"==yt||"ES"==yt?3:"TN"==yt||"MC"==yt?1:4)}break}}return M.length>0&&(X=M.length),K.push(...H),K.push(...G),K.push(...nt),{paths:ft,shareTypes:K,catId:O,examId:Z,tag:it,groupId:j,questId:M,getNum:X,idx:g}}static getNumberFromStr(z){let w=z.match(/(\d+)/);return w?w[0]:""}static removeAccents(z){let w=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const _ of w){let g=new RegExp("["+_.substring(1)+"]","g");z=z.replace(g,_[0])}return z}static zeroPad(z,w){return z=z||2,(new Array(z).join("0")+w).slice(-1*z)}}},17585:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ExamParser=void 0;const E=A(25442),h=A(70432),z=A(99739),w=A(80983),_=A(65465),g=A(72687),x=A(29688),f=A(49362),k=A(50610),S=A(85215),T=A(72617),P=A(69504),j=A(633);J.ExamParser=class Z{constructor(O){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",E.CONST.load(O)}setLang(O){this.lang=O,this.DEF_QUEST_NAME="vi"==O?"c\xe2u ":"question "}parse(O,K,H){var G,nt,X,it,ot,ft,xt,st,Mt,ee;let St=this.findItems(O,H);K&&console.log("items",St);let Jt=new Map,yt=[],qt=null,Yt=0,Ft="main",pe=0,Me=0,Bn=[],jn=!0,oe=new Map;for(let he=0;he<St.length;he++){let $t=St[he],Ie=he==St.length-1?void 0:St[he+1],Vt=this.getPartInfo(O,$t,Ie);if(this.loadText(O,Vt),$t.type==k.SectionParser.TYPE_NAME&&"main"==Ft&&(Yt++,yt.push({label:Yt,parts:Vt,answers:[],isGroup:!0})),$t.type==f.QuestionParser.TYPE_NAME){if(Ie&&Ie.type==h.AnswerParser.TYPE_NAME&&Ie.pos[2]>0){let t;for(let le=he+1;le<St.length;le++)if(St[le].type!=h.AnswerParser.TYPE_NAME){t=St[le];break}Vt=this.getPartInfo(O,$t,t),this.loadText(O,Vt)}let be=$t.label?+$t.label:0,Gt=Jt.get(be);Gt&&"main"!=Ft?(Gt.help=Vt,qt=Gt):"main"==Ft&&(Gt={label:be,olabel:$t.olabel,answers:[],parts:Vt},Yt>0&&(Gt.group=Yt),Jt.set(be,Gt),yt.push(Gt),qt=Gt)}if($t.type==h.AnswerParser.TYPE_NAME&&qt){let be=!1;if(1==Vt.length){let $e=O[Vt[0].lineIdx].replace(/\|/g,"").trim().match(E.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=$e&&$e.length>0&&(be=!0)}let Gt=""==$t.olabel;$t.pos[2]>0&&(Vt=[Vt[0]],Vt[0].e=$t.pos[2],this.loadText(O,Vt),Gt=!0);let t={label:null!==(G=$t.label)&&void 0!==G?G:"",isCorrect:"*"==$t.extInfo,parts:Gt?[Vt[0]]:Vt,isInline:Gt,olabel:$t.olabel};qt.answers.push(t),qt.isFixAns=Gt||be}if($t.type==x.IncludeParser.TYPE_NAME)if($t.label&&/\.\d*$/.test($t.label)){let be=$t.label.split("."),Gt=+be[be.length-1],t=null!==(nt=Vt[0].text)&&void 0!==nt?nt:"",le=null!==(X=oe.get(t))&&void 0!==X?X:-1;if(le++,oe.set(t,le),0==Gt){Yt++;let Ce=t+"=>"+le+"-0",On=[];On.push(...Vt),On[0]={lineIdx:Vt[0].lineIdx,s:0,b:0,text:Ce},yt.push({label:Yt,parts:On,answers:[],isGroup:!0});continue}let Ln=qt?qt.label:0,$e=0;for(let Ce=0;Ce<Gt;Ce++){$e++;let On=t+"=>"+le+"-"+Ce,Zn=[];Zn.push(...Vt),Zn[0]={lineIdx:Vt[0].lineIdx,s:0,b:0,text:On};let si={label:Ln+$e,olabel:qt?null===(it=qt.olabel)||void 0===it?void 0:it.replace(/\d+/,Ln+$e+""):this.DEF_QUEST_NAME+(Ln+$e)+".",answers:[],parts:Zn};Jt.set(si.label,si),yt.push(si),qt=si}}else if($t.label&&/\.Q\d+(,Q\d+)*$/.test($t.label)){let t=null!==(ot=$t.label.split(".").pop()?.split(",").length)&&void 0!==ot?ot:0;for(let le=0;le<t;le++){let Ln={lineIdx:Vt[0].lineIdx,s:0,b:0,text:Vt[0].text+"=>0-"+le},$e=qt?qt.label:0,Ce={label:$e+1,olabel:qt?null===(ft=qt.olabel)||void 0===ft?void 0:ft.replace(/\d+/,$e+1+""):this.DEF_QUEST_NAME+($e+1)+".",answers:[],parts:[Ln]};Jt.set(Ce.label,Ce),yt.push(Ce),qt=Ce}}$t.type==g.HuongDanParser.TYPE_NAME&&qt&&(Vt.splice(0,1),Ie&&Ie.type==f.QuestionParser.TYPE_NAME&&Ie.label&&!Jt.has(+Ie.label)||!Ie||Ie.type==k.SectionParser.TYPE_NAME?"main"==Ft&&(qt.help=Vt):"main"==Ft&&(Ft="info",pe=null!==(xt=$t.lineIdx)&&void 0!==xt?xt:0),pe>0&&0==Me&&(Me=null!==(st=$t.lineIdx)&&void 0!==st?st:0)),($t.type==_.HetParser.TYPE_NAME||$t.type==w.DapAnParser.TYPE_NAME)&&(Ft="info",pe=null!==(Mt=$t.lineIdx)&&void 0!==Mt?Mt:0),$t.type==z.DapAnChiTietParser.TYPE_NAME&&jn&&Bn.push($t),$t.type!=z.DapAnChiTietParser.TYPE_NAME&&Bn.length>0&&(jn=!1)}let Be=new z.DapAnChiTietParser,Wn=Be.getAnsMC(O,Bn),yi=new Map;if(pe>0){let he=Me>0?O.slice(pe,Me):O.slice(pe);yi=Be.getAnsStr(he)}for(const he of yt){if(he.isGroup)continue;let $t=Wn.get(he.label),Ie=yi.get(he.label),Vt=null;if(he.help&&(Vt=Be.getAnsFromHelp(he.help,O)),he.answers.length>0){let be=he.answers.filter(Gt=>Gt.isCorrect);for(let Gt=1;Gt<be.length;Gt++)be[Gt].isCorrect=!1;if(0==be.length){let Gt=null!==(ee=$t??Vt)&&void 0!==ee?ee:Ie?Ie[0]:"";for(const t of he.answers)if(t.label==Gt){t.isCorrect=!0;break}}}else he.strAns=Ie}return K&&console.log("lstQuest",yt),yt}cleanRes(O){for(const K of O){for(let H=K.parts.length-1;H>=0;H--)""==K.parts[H].text&&K.parts.splice(H,1);for(const H of K.answers)for(let G=H.parts.length-1;G>=0;G--)""==H.parts[G].text&&H.parts.splice(G,1);if(K.help)for(let H=K.help.length-1;H>=0;H--)""==K.help[H].text&&K.help.splice(H,1)}}getPartInfo(O,K,H){var G,nt;let X=null!==(G=K.lineIdx)&&void 0!==G?G:0,it=null!==(nt=H?.lineIdx)&&void 0!==nt?nt:O.length-1;if(X==it)return H?[{lineIdx:X,b:K.pos[0],s:K.pos[1],e:H?.pos[0]}]:[{lineIdx:X,b:K.pos[0],s:K.pos[1]}];{let ot=[];ot.push({lineIdx:X,b:K.pos[0],s:K.pos[1]});for(let ft=X+1;ft<it;ft++)ot.push({lineIdx:ft,b:0,s:0});if(H){let ft=H?.pos[0];""!=O[it].substring(0,ft).replace(/\|/g,"").trim()&&ot.push({lineIdx:it,b:0,s:0,e:ft})}else ot.push({lineIdx:it,b:0,s:0});return ot}}loadText(O,K){for(const H of K)H.text=O[H.lineIdx].substring(H.s,H.e)}findItems(O,K){let H=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];K&&(H=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let G=[new P.RemoveRule,new S.ModifyAnsRule,new j.SameKindRule,new T.RemoveDupRule],nt=[{parser:new z.DapAnChiTietParser,also:[2]},{parser:new k.SectionParser,from:[0],to:[1],also:[3]},{parser:new f.QuestionParser,from:[0],to:[1],also:[3]},{parser:new h.AnswerParser},{parser:new _.HetParser,to:[2]},{parser:new w.DapAnParser,to:[2],also:[6]},{parser:new g.HuongDanParser},{parser:new x.IncludeParser,from:[0],to:[1]}],X=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],it=X[0],ot=[],ft=0;for(const Mt of O)if(""!=Mt){for(const ee of it.expect){let St=nt[ee],Jt=St.parser.parse(Mt);if(Jt.length>0){if(Jt.forEach(yt=>yt.lineIdx=ft),ot.push(...Jt),St.parser.TYPE==g.HuongDanParser.TYPE_NAME){let yt=ot.filter(Ft=>Ft.type==f.QuestionParser.TYPE_NAME).length,qt=ot.filter(Ft=>Ft.type==g.HuongDanParser.TYPE_NAME).length,Yt=ot.filter(Ft=>Ft.type==w.DapAnParser.TYPE_NAME).length;if(it.name==X[1].name&&yt>1&&0==qt){it=X[2];let Ft=X[2].expect.indexOf(6);Ft>=0&&X[2].expect.splice(Ft,1)}else if(it.name==X[2].name){Yt>0&&nt[0].parser.off();let Ft=X[2].expect.indexOf(6);Ft>=0&&X[2].expect.splice(Ft,1)}}if(St.to){let yt=0;for(const qt of St.to)(St.from&&X[St.from[yt]]==it||!St.from)&&(it=X[qt])}if(St.also)for(const yt of St.also){let Yt=ot[ot.length-1].pos[1],Ft=nt[yt].parser.parse(Mt.substring(Yt));Ft.length>0&&(Ft.forEach(pe=>{pe.lineIdx=ft;for(let Me=0;Me<pe.pos.length;Me++)pe.pos[Me]=pe.pos[Me]+Yt}),ot.push(...Ft))}break}}ft++}else ft++;let xt=[];for(const Mt of H)for(const ee of G){let St=ee.load(Mt);if(St){xt.push(St);break}}let st=0;for(;st<ot.length;){for(const Mt of xt){let ee=ot.length;if(Mt.run(ot,st)){let St=ee-ot.length;St>0&&(st-=St+1);break}}st++}return ot}}},82439:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.EditorApiService=void 0,J.EditorApiService=class A{}},86855:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ExamIntellisense=void 0;const E=A(17585),h=A(71063),z=A(82910),w=A(68954),_=A(82642),g=A(59615),x=A(82781);J.ExamIntellisense=class f{constructor(S){this.conf=S,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new E.ExamParser(S),this.apiService=null}setSingleMode(S){this.singleMode=S}setLines(S){this._lines=S}setApiService(S){this.apiService=S}parse(){return this._lstQuest=this.exParser.parse(this._lines,!0,!0),this._lstQuest}getAutofillValue(S,T,P){var j;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[S].trim()))return[];let M=[],O=this.getCurPos(S,T),K=O[0],H=O[1],G=O[2],nt=this._lines[S>0?S-1:0];if(K&&K.parts.length>0&&null!==(j=K.parts[0].text)&&void 0!==j&&j.trim().startsWith("[@"),nt.startsWith("[@")||""==nt.trim())return[];if(H&&K){let X="ABCDEFGHIJKLMN",it=X.indexOf(H.label),ot=X[it+1]+H.olabel+" ",ft=H.label+H.olabel+" ";if(!this.singleMode&&this._lines[H.parts[0].lineIdx].trim()==ft.trim()&&H.parts[0].lineIdx!=S){let xt=K.parts[0],Mt=this._lines[xt.lineIdx].substring(xt.b,xt.s).replace(/\d+/,K.label+1+"")+" ";return M.push(`${H.parts[0].lineIdx}|0|${ft.length}|`),M.push(`${S}|${T}|${T}|${Mt}`),M}if(H.label<"D"&&("enter"!=P||S>0&&""!=this._lines[S-1].trim()&&H.parts[0].lineIdx!=S))return M.push(`${S}|${T}|${T}|${ot}`),M;if(!this.singleMode&&H.label>="D"&&H.parts[0].lineIdx!=S&&"enter"==P&&S==this._lines.length-1){let xt=K.parts[0],Mt=this._lines[xt.lineIdx].substring(xt.b,xt.s).replace(/\d+/,K.label+1+"")+" ";return M.push(`${S}|${T}|${T}|\n${Mt}`),M}}if(!H&&!G&&K&&"enter"==P&&""==this._lines[S].trim()&&S>0&&""!=this._lines[S-1].trim()){let X=K.parts[0],it=this._lines[X.lineIdx].substring(X.s).trim();if(this.singleMode||""!=it)if(0==K.answers.length)M.push(`${S}|${T}|${T}|A. `);else if(!this.singleMode){let ot=K.parts[0],xt=this._lines[ot.lineIdx].substring(ot.b,ot.s).replace(/\d+/,K.label+1+"")+" ";M.push(`${S}|${T}|${T}|${xt}`)}return M}return M}getSuggestions(S,T,P,j){return new Promise(Z=>{var M,O;let K=null!==(M=j?.substring(0,T))&&void 0!==M?M:"",H=this.singleMode?[new h.AnsSugg,new w.EndSugg,new z.ChooseSugg]:[new _.IncludeSugg(this.apiService,Z),new g.QuestSugg,new h.AnsSugg,new x.SectionSugg,new w.EndSugg,new z.ChooseSugg],G=[],nt=this.getCurPos(S,T),X=nt[0],it=nt[1],xt=X?{type:nt[2]?"h":it?"a":"q",quest:X,ansLabel:it?it.label:void 0,secLabel:X.group?null===(O=this._lstQuest.filter(st=>st.isGroup).pop())||void 0===O?void 0:O.parts[0].text:void 0,lineIdx:S,col:T}:void 0;for(let st of H){let Mt=st.run(K,P,xt);if(1==Mt.length&&"-1"==Mt[0])return;G.push(...Mt)}Z(G)})}getEditHint(){let T=0,P=[],j=!1;for(const Z of this._lstQuest){if(Z.isGroup)continue;let M="",O="A".charCodeAt(0)-1,K=!1;for(const H of Z.answers){if(""==H.olabel)break;if(M+=H.label,!K&&!"ABCDEFGHIJKLMN".startsWith(M)&&(K=!0),O++,K){let G=H.parts[0],nt="*"==this._lines[G.lineIdx].substring(G.b,G.b+1)?1:0;P.push(`${G.lineIdx}|${G.b+nt}|${G.b+nt+1}|${String.fromCharCode(O)}`)}}if(!j&&Z.label-T<=0&&T>0&&(j=!0),j){let H=Z.parts[0],nt=this._lines[H.lineIdx].substring(H.b,H.s).replace(/\d+/,T+1+"");P.push(`${H.lineIdx}|${H.b}|${H.s}|${nt}`),T++}else T=Z.label}return P}getCurPos(S,T){var P,j;let Z=!1,M=null,O=null,K=!1,H=!1;for(const G of this._lstQuest)if(!G.isGroup){for(const nt of G.parts)if(nt.lineIdx==S){Z=!0,M=G,O=null,G.parts.length>0&&null!==(P=G.parts[0].text)&&void 0!==P&&P.trim().startsWith("[@")&&(H=!0,Z=!1);break}if(H&&G.parts.length>0&&(null===(j=G.parts[0].text)||void 0===j||!j.trim().startsWith("[@")))break;for(const nt of G.answers)for(const X of nt.parts)if(X.lineIdx==S&&X.s<=T&&(!X.e||X.e>=T)){Z=!0,M=G,O=nt;break}if(Z)break;if(G.help)for(const nt of G.help)if(nt.lineIdx==S&&nt.s<=T&&(!nt.e||nt.e>=T)){Z=!0,M=G,O=null,K=!0;break}if(Z)break}return[M,O,K]}}},71063:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnsSugg=void 0;const E=A(30033);J.AnsSugg=class h extends E.Sugg{run(w,_,g){if(!g||"h"==g.type||/^\[?\s*@/.test(w))return[];let x=g.ansLabel?String.fromCharCode(g.ansLabel.charCodeAt(0)+1)+".":"A.";return[x+"|"+x+" "]}}},82910:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ChooseSugg=void 0;const E=A(30033);J.ChooseSugg=class h extends E.Sugg{run(w,_,g){if(w!=_||!g)return[];let x=[];if("h"==g.type&&g.quest)for(let f of g.quest.answers)x.push(`azt_lang_sugg_choose ${f.label}|azt_lang_sugg_choose ${f.label}`);return x}}},68954:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.EndSugg=void 0;const E=A(30033);J.EndSugg=class h extends E.Sugg{run(w,_){return w!=_?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},82642:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.IncludeSugg=void 0;const E=A(25442),h=A(30033);J.IncludeSugg=class z extends h.Sugg{constructor(_,g){super(),this.apiService=_,this.resolve=g}run(_){let g=_;if(g.startsWith("@[")&&(g=g.substring(1)),/^\[?\s*@/.test(g)&&null!=this.apiService){let x=g.replace("]..","].").split("].").map(H=>H.replace("]","").replace("[","").replace("@","").trim()),f=x[x.length-1],k=0,S=!0,T="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",P="azt_lang_sugg_get_all|[ALL]|snippet",j=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],Z="",M="",K=g.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let H=K.next();if(H.done)break;M="user_"+H.value[1]}if(x.length>1){f.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(f)&&(Z=f.substring(0,1),f="");let H=x[x.length-2];if(H.startsWith("F:"))return this.resolve([T]),["-1"];if(H.indexOf(",")>=0){let G=[];return""==Z&&G.push(T),G.push(...j),this.resolve(G),["-1"]}if(f.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(f))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(H))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(H)&&(k=+H.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(H)&&(M="user")),/^T[\-\d]+:/.test(H)&&(k=+H.split(":")[0].trim().substring(1),S=!1),/^G[\-\d]+:/.test(H)){let G=H.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${g}[azt_lang_sugg_get_all ${G} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+g+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(H)||/^Q[\-\d]+:/.test(f))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(H)||/^Q[\-\d]+:/.test(f))return this.resolve([]),["-1"]}if(S)return"F"==Z?(this.resolve(j),["-1"]):(this.apiService.searchRes(M,k).then(H=>{let G="";-1==k&&(G=":user-"),(0==k||-1==k)&&(T="");let nt=H.map(X=>{let it=X.name;return it=it.replaceAll(/[\[\],\.\-]+/g,""),`${it}|[@${("cat"==X.type?"C":"T")+X.id}:${G}${it}].|${"cat"==X.type?"folder":"file"}`});""!=T&&""==Z&&(nt.push(T),nt.push(...j)),this.resolve(nt)}),["-1"]);if(g.endsWith(".")||g.endsWith(",")){let H=Math.abs(k);return this.apiService.getQuestion(H).then(G=>{let nt=G.map(ot=>{let ft=("group"==ot.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+ot.label,xt=("group"==ot.type?"G":"Q")+ot.id,st="group"==ot.type?".":"",Mt=ot.content,ee="group"==ot.type?"class":"function",St="group"==ot.type?G.filter(Yt=>Yt.groupId==ot.id).length+"-":"",Jt="group"!=ot.type&&ot.groupId?"G"+E.Utils.zeroPad(3,ot.groupId):"G000";return"group"==ot.type&&(Jt="G"+E.Utils.zeroPad(3,ot.id)),{name:ft,code:xt,groupQnum:St,posfix:st,icon:ee,sort:`${Jt}-${"group"==ot.type?"G"+E.Utils.zeroPad(3,ot.id):"Q"+E.Utils.zeroPad(10,ot.id)}`,doc:Mt}});nt.sort((ot,ft)=>ot.sort>ft.sort?1:-1);let X=nt.map(ot=>`${ot.name}|[@${ot.code}:${ot.groupQnum}${ot.name}]${ot.posfix}|${ot.icon}|${ot.sort}|${ot.doc}`),it=[];if(""!=T){""==Z&&(it.push(T),it.push(...j));let ot=P.split("|");ot[1]=nt.map((ft,xt)=>(0==xt?"":g)+`[@${ft.code}:${ft.groupQnum}${ft.name}]`+(ft.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),it.push(ot.join("|"))}it.push(...X),"F"==Z&&(it=j),this.resolve(it)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},59615:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.QuestSugg=void 0;const E=A(25442),h=A(30033);J.QuestSugg=class z extends h.Sugg{run(_,g,x){var f;if(_!=g)return[];if(!x)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let k=null!==(f=x.quest.olabel)&&void 0!==f?f:"azt_lang_sugg_question_cc 1.",S=+E.Utils.getNumberFromStr(k),T=k.replace(/\d+/,S+1+"");return T=x.quest.olabel?E.Utils.capitalizeFirstLetter(T):T,[E.Utils.removeAccents(T)+"|"+T+" ",T+"|"+T+" "]}}},82781:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SectionSugg=J.toArabic=J.isRoman=J.toRoman=J.BaseNumbers=J.RomanNumber=void 0;const E=A(25442),h=A(30033);class z{constructor(k,S){this.baseUnits=0,this.thousands=0,this.num=k,this.str=S}}function w(f){let k,S;if(f<=0||f>3999)return"";{k=0;let T="";for(f=Math.floor(f);f>0;)S=J.BaseNumbers[k],0===Math.floor(f/S.num)?++k:(T+=S.str,f-=S.num);return T}}function _(f){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(f)}function g(f){let k=f.toUpperCase();if(!_(k))return null;let S=0,T=0;for(;k.length>0&&T<J.BaseNumbers.length;){const P=J.BaseNumbers[T];k.startsWith(P.str)?(S+=P.num,k=k.substring(P.str.length)):T++}return k.length>0?null:S}J.RomanNumber=z,J.BaseNumbers=[new z(1e3,"M"),new z(900,"CM"),new z(500,"D"),new z(400,"CD"),new z(100,"C"),new z(90,"XC"),new z(50,"L"),new z(40,"XL"),new z(10,"X"),new z(9,"IX"),new z(5,"V"),new z(4,"IV"),new z(1,"I")],J.toRoman=w,J.isRoman=_,J.toArabic=g,J.SectionSugg=class x extends h.Sugg{run(k,S,T){var P,j;if(k!=S)return[];if(!T)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==T.type||!T.secLabel)return[];let Z="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(T.secLabel.toLowerCase())){let M=T.secLabel.split("."),O=+E.Utils.getNumberFromStr(M[0]);Z=M[0].replace(/\d+/,O+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(T.secLabel.toLowerCase())){let O=T.secLabel.split(".")[0].split(" "),H=w((null!==(P=g(O.pop()))&&void 0!==P?P:0)+1);O.push(H),Z=O.join(" ")+"."}else/^[ivx]+\./.test(T.secLabel.toLowerCase())&&(Z=w((null!==(j=g(T.secLabel.split(".")[0]))&&void 0!==j?j:0)+1)+".");return[E.Utils.removeAccents(Z)+"|"+Z+" ",Z+"|"+Z+" "]}}},30033:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Sugg=void 0,J.Sugg=class A{constructor(){this.lang="vi"}setLang(h){this.lang=h}}},25034:function(ut,J,A){var E=this&&this.__createBinding||(Object.create?function(z,w,_,g){void 0===g&&(g=_);var x=Object.getOwnPropertyDescriptor(w,_);(!x||("get"in x?!w.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return w[_]}}),Object.defineProperty(z,g,x)}:function(z,w,_,g){void 0===g&&(g=_),z[g]=w[_]}),h=this&&this.__exportStar||function(z,w){for(var _ in z)"default"!==_&&!Object.prototype.hasOwnProperty.call(w,_)&&E(w,z,_)};Object.defineProperty(J,"__esModule",{value:!0}),h(A(86855),J),h(A(82439),J),h(A(17585),J),h(A(22161),J),h(A(25442),J)},24363:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.CanvasUtil=void 0;const E=A(25442);class h{static drawPoint(w,_,g){null!=w&&(w.fillStyle=_,w.beginPath(),w.arc(g.left,g.top,5,0,2*Math.PI),w.fill())}static drawBox(w,_,g,x){null!=w&&(x?(w.fillStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.fill()):(w.strokeStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.stroke()))}static drawBox2(w,_,g,x,f){null!=w&&(w.strokeStyle=_,w.beginPath(),w.rect(f[4],f[5],g,x),w.stroke())}static drawLine(w,_,g,x){null!=w&&(w.strokeStyle=_,w.beginPath(),w.moveTo(g,x),w.lineTo(w.canvas.width-10,x),w.stroke())}static drawText(w,_,g,x){null!=w&&(w.font="11px Arial",w.fillStyle=_,w.fillText(x,g[4],g[5]))}static isLineIntersec(w,_){let g=w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height,x=_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height,f=w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN,k=_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN,S=this.isSameLine(w,_);return(g||x)&&(f||k)&&!S}static isLineVIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN)&&Math.abs(_.transform[4]-w.transform[4])>E.CONST.INTERSEC_MARGIN/2}static isSameLine(w,_){return Math.abs(w.transform[5]+w.height-(_.transform[5]+_.height))<=E.CONST.LINE_MAGIN}static isObjIntersec(w,_){return w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height}static isObjFullIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width)}static isFirstLineOfPage(w,_){return!(w<0||w>=_.length||0!=w&&_[w-1].pageIndex==_[w].pageIndex)}static isLastLineOfPage(w,_){return!(w<0||w>=_.length||w!=_.length-1&&_[w+1].pageIndex==_[w].pageIndex)}static getTopLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5],j=0,Z=3*S;if(!h.isFirstLineOfPage(_,g)){let O=h.isSameLine(g[_-1],x);h.isLineIntersec(g[_-1],x)?(P=g[_-1].transform[5]+g[_-1].height,j=g[_-1].transform[5],g[_-1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j-=2*E.CONST.MARGIN_LEFT:j+=g[_-1].height*T,S=1,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_-2>=0?g[_-2].transform[5]+g[_-2].height*T:g[_-1].transform[5]+g[_-1].height*T,O&&h.isFirstLineOfPage(_-1,g)&&(j=0))}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P>j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P+=Z),P-=S}}return[x.transform[5],1]}static arrContains(w,_){for(const g of _)if(g==w)return!0;return!1}static getBottomLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5]+x.height,j=9999,Z=3*S;if(!h.isLastLineOfPage(_,g)){let O=h.isSameLine(g[_+1],x);h.isLineIntersec(g[_+1],x)?(P=g[_+1].transform[5],j=g[_+1].transform[5]+g[_+1].height,g[_+1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j+=2*E.CONST.MARGIN_LEFT:j-=g[_+1].height*T,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_+2<g.length?g[_+2].transform[5]+g[_+2].height-g[_+2].height*T:g[_+1].transform[5]+g[_+1].height-g[_+1].height*T,O&&h.isLastLineOfPage(_+1,g)&&(j=9999));let K=g[_+1].top;if(K&&P>=K&&!O)return[K,0]}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P<j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P-=Z),P+=S}}return[x.transform[5]+x.height,1]}static hasColor(w,_,g,x,f){let k=Math.round(_),S=Math.round(k+x),T=Math.round(g),P=Math.round(T+f);for(let K=T;K<P;K++)for(let H=k;H<S;H++){let G=4*(K*w.width+H);if((w.data[G]+w.data[G+1]+w.data[G+2])/3<150)return!0}return!1}static calIndexPos2(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0;for(const X of w){K=this.isObjIntersec(w[0],X),j=X.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=X.str.trim()||Z!=X.transform[5]?1:0),O=j+2*E.CONST.MARGIN_LEFT>=P;let it=X.transform[4]+X.width;if(K&&(P=it),it>T&&K&&(T=it),S+=X.str.length,S>x&&O&&K){X.transform.forEach(st=>{k.push(st)}),k[3]=X.height,k[2]=M,k[1]=X.str.length-S+x;let ot=X.str.substr(0,X.str.length-S+x+1);if(ot.length==X.str.length){k[4]=k[4]+X.width;break}var G=_[X.fontName].fontFamily,nt=Math.hypot(X.transform[2],X.transform[3]);g.font=`${nt}px ${G}`;let ft=g.measureText(ot).width,xt=g.measureText(X.str).width;k[4]=k[4]+X.width*ft/xt;break}K&&(Z=X.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static calIndexPos(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0,H="";for(const it of w){K=this.isObjIntersec(w[0],it),j=it.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?1:0,H+=(j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?"|":"")+it.str),O=j+2*E.CONST.MARGIN_LEFT>=P;let ot=it.transform[4]+it.width;if(K&&(P=ot),ot>T&&K&&(T=ot),S+=it.str.length,S>x&&O&&K){let ft=it.str.substr(0,it.str.length-S+x);var nt=_[it.fontName].fontFamily,X=Math.hypot(it.transform[2],it.transform[3]);g.font=`${X}px ${nt}`;let xt=g.measureText(ft).width,st=g.measureText(it.str).width;it.transform.forEach(Mt=>{k.push(Mt)}),k[4]=k[4]+it.width*xt/st,k[3]=it.height,k[2]=M,k[1]=it.str.length-S+x;break}K&&(Z=it.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static getTextBottom(w,_,g,x){let f=Math.atan2(w[1],w[0]);_.vertical&&(f+=Math.PI/2);const k=Math.hypot(w[2],w[3]),S=k*h.getAscent(_.fontFamily,g,x);let T=w[5],P=0;P=0===f?S:S*Math.cos(f);let j=0*P;return T=w[5]-P-j,[T,k+j]}static getAscent(w,_,g){const k=g.get(w);if(k)return k;_.save(),_.font=`30px ${w}`;const S=_.measureText("");let T=S.fontBoundingBoxAscent,P=Math.abs(S.fontBoundingBoxDescent);if(T){_.restore();const Z=T/(T+P);return g.set(w,Z),Z}_.strokeStyle="red",_.clearRect(0,0,30,30),_.strokeText("g",0,0);let j=_.getImageData(0,0,30,30).data;P=0;for(let Z=j.length-1-3;Z>=0;Z-=4)if(j[Z]>0){P=Math.ceil(Z/4/30);break}_.clearRect(0,0,30,30),_.strokeText("A",0,30),j=_.getImageData(0,0,30,30).data,T=0;for(let Z=0,M=j.length;Z<M;Z+=4)if(j[Z]>0){T=30-Math.floor(Z/4/30);break}if(_.restore(),T){const Z=T/(T+P);return g.set(w,Z),Z}return g.set(w,.8),.8}static getMaxLineRight(w,_){let g=0;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4]+x.width;f>g&&(g=f)}return g}static getMinLineLeft(w,_){let g=99999;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4];f<g&&(g=f)}return g}}J.CanvasUtil=h},95318:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PdfUtils=void 0;const E=A(25442),h=A(24363);class z{constructor(){let _=document.createElement("canvas");this.tempCanvas=_.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(_,g){let f={url:URL.createObjectURL(_),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const k=pdfjsLib.getDocument(f);let S=[],T=this;k.promise.then(function(P){T.optionalContentConfigPromise=P.getOptionalContentConfig();let j=P._pdfInfo.numPages;for(let Z=1;Z<=j;Z++)P.getPage(Z).then(M=>{S.push(M),S.length==j&&(S=S.sort((O,K)=>O._pageIndex>K._pageIndex?1:-1),g(S))})},function(P){console.error(P)})}getImages(_,g){let x=[];if("function"!=typeof _.objs.getAll)return x;let f=_.objs.getAll(),k=Object.keys(f);for(const S of k)f[S].data.pageIndex=g,x.push(f[S].data);return x}isImageObj(_){return-999==_.transform[0]&&"img"==_.str}getLines(_,g,x,f){let k=f.scale,S=_.items.length;for(let M=0;M<S;M++){let O=_.items[M];this.isImageObj(O)||(O.transform=z.transform(f.transform,O.transform),O.width=O.width*k),O.transform[4]+O.width>x.canvas.width&&(O.width=x.canvas.width-O.transform[4]-20);let K=this.isImageObj(O)?[O.transform[5],O.height]:h.CanvasUtil.getTextBottom(O.transform,_.styles[O.fontName],this.tempCanvas,this.ascentCache);O.height=K[1];let H=Math.ceil(K[0]);O.transform[5]=H}_.items.sort((M,O)=>1e6*Math.floor(M.transform[5])-M.transform[4]<1e6*Math.floor(O.transform[5])-O.transform[4]?-1:1);let j,T=[],P=0;this.imageCache[g]?j=this.imageCache[g]:(j=x.getImageData(0,0,x.canvas.width,x.canvas.height),this.imageCache[g]=j);let Z={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let M=0;M<S;M++){let O=_.items[M];if(this.isImageObj(O))for(let H=0;H<S;H++){let G=_.items[H];if(!this.isImageObj(G)&&M!=H&&h.CanvasUtil.isObjIntersec(O,G)&&""!=G.str.trim()&&!/^[\sA-K\.\|]+$/g.test(G.str)){O.str="";break}}if(h.CanvasUtil.arrContains(O.str.trim(),E.CONST.SKIP_CHAR))continue;let K=Math.floor(O.transform[5]+O.height);0!=P?P-K>=-E.CONST.LINE_MAGIN?this.addTxtToLine(Z,O):0!=Z.textObjs.length&&(T.push(Z),Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height)):(Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height))}T.push(Z);for(const M of T)this.calculateSize(M);this.findAndMergeAnsQuestBlock(T,"ans"),this.findAndMergeAnsQuestBlock(T,"quest"),this.findAndMergeBlock(T),this.mergeIntersecLine(T),this.mergeSmallLine(T,j);for(const M of T)this.calculateSize(M);return T}mergeIntersecLine(_){let g=0;for(;g<_.length;){let x=_[g];g++,g<_.length&&h.CanvasUtil.isLineVIntersec(x,_[g])&&(this.mergeLine(x,_[g]),_.splice(g,1),g--)}}findAndSplitQuestAnsLine(_,g,x){let f=0,k=[],S=E.CONST.BREAK_LINE_PATTERN.join("|");for(const T of _){T.top=void 0,T.bottom=void 0;let P=T.strLine.replace(/\|/g,"").trim().match(S);if(null!=P&&P.length>0){let j=/[\s\|\.]+[B\u0412][\s\|]*\./g,Z=T.strLine.trim().toUpperCase().match(j);if(null!=Z&&Z.length>0){let M=P[0].toUpperCase().indexOf("A");k.push({lineIndex:f,strIndex:M})}}f++}for(let T=k.length-1;T>=0;T--){let P=k[T].lineIndex;this.splitLine(P,g[_[P].pageIndex],x[_[P].pageIndex],k[T].strIndex,_)}}mergeSmallLine(_,g){let x=0,f=1.2*E.CONST.LINE_SMALL_HEIGHT;for(;x<_.length;){let k=_[x];if(!k||!this.isSmallLine(k)){x++;continue}x-1>=0&&!_[x-1].bottom&&(_[x-1].bottom=h.CanvasUtil.getBottomLine(g,x-1,_)[0]),x+1<_.length&&!_[x+1].top&&(_[x+1].top=h.CanvasUtil.getTopLine(g,x+1,_)[0]);let S=x-1<0?-9999:this.getLineTop(k)-this.getLineBot(_[x-1]),T=x+1>=_.length?-9999:this.getLineTop(_[x+1])-this.getLineBot(k),P=x-1>=0&&_[x-1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x-1].transform[4]+_[x-1].width,j=x+1<_.length&&_[x+1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x+1].transform[4]+_[x+1].width;if(0==x&&T<=f&&j){this.mergeLine(_[x+1],k),_.splice(x,1),x--;continue}if(x==_.length-1&&S<=f&&P){this.mergeLine(_[x-1],k),_.splice(x,1),x--;continue}let Z=-1;S>T&&j&&T<=f?Z=x+1:S<=T&&P&&S<=f?Z=x-1:S<=T&&j&&T<=f?Z=x+1:S>T&&P&&S<=f&&(Z=x-1),Z>=0?(this.mergeLine(_[Z],k),_.splice(x,1),x--):x++}}isSmallLine(_){return _.height<E.CONST.LINE_SMALL_HEIGHT}mergeLine(_,g){for(const x of g.textObjs)this.addTxtToLine(_,x)}findAndMergeAnsQuestBlock(_,g){let f=0;for(;f<_.length;){if("ans"==g&&this.isAnsLine(_[f])||"quest"==g&&this.isQuestLine(_[f])){let S=f,T=-1,P=1,j=[];for(;P<=10;){if(S=f+T*P,S<0){T=1,P=1;continue}if(S>=_.length)break;let Z=this.isAnsLine(_[S]),M=Z||this.isQuestLine(_[S]),O="ans"==g&&Z&&h.CanvasUtil.isSameLine(_[f],_[S]),K=!M&&h.CanvasUtil.isLineIntersec(_[f],_[S])&&_[S].transform[4]>_[f].transform[4];if((O||K)&&j.push(S),P++,M&&1==T)break;(P>10||M)&&-1==T&&(T=1,P=1)}j.sort((Z,M)=>Z<M?1:-1);for(const Z of j)for(const M of _[Z].textObjs)this.addTxtToLine(_[f],M);for(const Z of j)_.splice(Z,1),Z<f&&f--}f++}}findAndMergeBlock(_){let g=0;for(;g<_.length;){if(this.isAnsLine(_[g])||this.isQuestLine(_[g])){g++;continue}let f=g+1;for(;f<_.length&&_[g].pageIndex==_[f].pageIndex;){let k=this.isAnsLine(_[f])||this.isQuestLine(_[f]);if(h.CanvasUtil.isLineIntersec(_[g],_[f])&&!k||h.CanvasUtil.isSameLine(_[g],_[f])){for(const S of _[f].textObjs)this.addTxtToLine(_[g],S);_.splice(f,1),f=g}f++}g++}}isAnsLine(_){let x=_.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=x&&x.length>0}isQuestLine(_){let g=E.CONST.QUESTION_PATTERN.join("|"),x=_.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=x&&x.length>0}encodeLines(_,g){let x="",f=0;for(const k of g){if(k.height<E.CONST.LINE_SMALL_HEIGHT){f-1>=0&&!g[f-1].bottom&&(g[f-1].bottom=h.CanvasUtil.getBottomLine(_,f-1,g)[0]),f+1<g.length&&!g[f+1].top&&(g[f+1].top=h.CanvasUtil.getTopLine(_,f+1,g)[0]);let S=f-1<0?-9999:this.getLineTop(k)-this.getLineBot(g[f-1]),T=f+1>=g.length?-9999:this.getLineTop(g[f+1])-this.getLineBot(k),P=f-1>=0&&g[f-1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f-1].transform[4]+g[f-1].width,j=f+1<g.length&&g[f+1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f+1].transform[4]+g[f+1].width,Z=1.2*E.CONST.LINE_SMALL_HEIGHT;Math.abs(S)>=Z&&Math.abs(T)>=Z?x+="L":x+=-9999==S?"3":-9999==T?"4":S>T&&j?"2":S<=T&&P?"1":S<=T&&j?"2":S>T&&P?"1":"L"}else x+="L";f++}return x}getLineTop(_){return _.top?_.top:_.transform[5]}getLineBot(_){return _.bottom?_.bottom:_.transform[5]+_.height}splitLine(_,g,x,f,k){let S=k[_],T=h.CanvasUtil.calIndexPos(S.textObjs,g,x,f,!0),P=this.newLine(S.textObjs[0],S.pageIndex),j=T[2],Z=T[1],M=S.textObjs[j],O=M.transform,K={str:M.str.substr(0,Z),width:T[4]-O[4],height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],O[4],O[5]]},H={str:M.str.substr(Z),width:M.width-K.width,height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],T[4],O[5]]},G=S.textObjs;S.textObjs=[],P.textObjs=[];for(let nt=0;nt<G.length;nt++)nt<j?this.addTxtToLine(S,G[nt]):nt>j?this.addTxtToLine(P,G[nt]):(this.addTxtToLine(S,K),this.addTxtToLine(P,H));return this.calculateSize(S),this.calculateSize(P),_==k.length-1?k.push(P):k.splice(_+1,0,P),P}findAndMergeSmallLine(_,g,x){let f=0,k=_.matchAll(x),S=[];for(;;){let T=k.next();if(T.done)break;let P=T.value[0],j=T.value.index,Z=0,M=[];for(let O=0;O<P.length;O++)"L"==P[O]?Z=j+O:M.push(j+O);for(const O of M){for(const K of g[O].textObjs)this.addTxtToLine(g[Z],K);g[Z].top=void 0,g[Z].bottom=void 0,S.push(O)}f++}S.sort((T,P)=>T<P?1:-1);for(const T of S)g.splice(T,1);return f}newLine(_,g){let x={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return x.transform[4]=_.transform[4],x.transform[5]=_.transform[5],x.height=_.height,x.width=_.width,x.txtLength=_.str.length,x.textObjs.push(_),x}addTxtToLine(_,g){g.transform[4]<_.transform[4]&&(_.transform[4]=g.transform[4]),g.transform[5]<_.transform[5]&&(_.transform[5]=g.transform[5]),g.transform[5]+g.height>_.transform[5]+_.height&&(_.height=g.transform[5]+g.height-_.transform[5]),g.transform[4]+g.width>_.transform[4]+_.width&&(_.width=g.transform[4]+g.width-_.transform[4]),_.txtLength+=g.str.length,_.textObjs.push(g);let x=_.transform[4]+_.width,f=_.height;for(const k of _.textObjs)k.transform[4]+k.width>x&&(x=k.transform[4]+k.width),k.transform[5]+k.height>_.transform[5]+f&&(f=k.transform[5]+k.height-_.transform[5]);_.width=x-_.transform[4],_.height=f}static transform(_,g){return pdfjsLib.Util.transform(_,g)}render(_,g,x,f){var k;let S=this,T=_.length;for(let P=0;P<T;P++){let j=document.createElement("div");j.className="pdf-page",j.id="page-"+P,null===(k=document.getElementById(g))||void 0===k||k.appendChild(j),S.renderPage(_[P],x,f)}}calculateSize(_){if(0==_.textObjs.length)return;_.textObjs.sort((M,O)=>1e6*Math.floor(M.transform[4])+M.transform[5]>1e6*Math.floor(O.transform[4])+O.transform[5]?1:-1),_.strLine="";let g=0,x=0,f=0,k=0,S=9999,T=0,P=9999;for(const M of _.textObjs){let O=h.CanvasUtil.isObjIntersec(_.textObjs[0],M);f=M.transform[4];let K=f-x>E.CONST.SPLIT_MARGIN&&""!=M.str.trim()||k!=M.transform[5]?"|":"";_.strLine+=K+M.str,f<P&&(P=f);let H=M.transform[4]+M.width;O&&(x=H),H>g&&O&&(g=H),O&&(k=M.transform[5]),M.transform[5]<S&&(S=M.transform[5]),M.transform[5]+M.height>T&&(T=M.transform[5]+M.height)}_.transform[4]=P,_.transform[5]=S,_.width=g-P,_.height=T-S,_.transform[0]=S,_.transform[1]=T;let j=E.CONST.TVCN_CHAR,Z=_.strLine;for(const M of j)Z=Z.replace(new RegExp(M[0],"g"),M[1]);_.strLine=Z}renderPage(_,g,x){let f=_._pageIndex,k=_.getViewport({scale:g}),S=.8*k.width,T=document.createElement("canvas"),P=document.getElementById("page-"+f);P?.appendChild(T),T.id="canvas"+f;let j=T.getContext("2d",{alpha:!1});T.height=k.height,T.width=k.width,T.style.height=k.height*S/k.width+"px",T.style.width=S+"px",P&&(P.style.width=T.style.width,P.style.height=T.style.height);const M={canvasContext:j,transform:[1,0,0,1,0,0],viewport:k,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};_.render(M).promise.then(function(){x&&x(j,_._pageIndex,k)})}}J.PdfUtils=z},22161:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Process=void 0;const E=A(25442),h=A(17585),z=A(82700),w=A(24363),_=A(95318);J.Process=class g{constructor(f){var k,S;this.config=f,E.CONST.load(f);let T=JSON.parse(f);E.CONST.LINE_SMALL_HEIGHT=T.LINE_SMALL_HEIGHT*E.CONST.RENDER_SCALE,E.CONST.SPLIT_MARGIN=T.SPLIT_MARGIN*E.CONST.RENDER_SCALE,E.CONST.INTERSEC_MARGIN=T.INTERSEC_MARGIN*E.CONST.RENDER_SCALE,E.CONST.LINE_MAGIN=T.LINE_MAGIN*E.CONST.RENDER_SCALE,E.CONST.MARGIN_LEFT=T.MARGIN_LEFT*E.CONST.RENDER_SCALE,E.CONST.FOOTER_PATTERN=null!==(k=T.FOOTER_PATTERN)&&void 0!==k?k:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],E.CONST.HELP_ANS_PATTERN=null!==(S=T.HELP_ANS_PATTERN)&&void 0!==S?S:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(f){this.updateStatusCallback=f}setOncompleteCallback(f){this.onCompleteCallback=f}getOverview(f){let k=f.filter(O=>O.isGroup).length,S=f.filter(O=>!O.isGroup).length,T=f.filter(O=>O.answers.length>0).length,P=f.filter(O=>!O.isGroup&&0==O.answers.length).length,j=f.filter(O=>O.answers.length>4),Z=j.length+"|"+j.map(O=>O.num).join(",");return j=f.filter(O=>O.answers.length<4&&O.answers.length>0),{groupNum:k+"",questNum:S+"",tnNum:T+"",tlNum:P+"",tnGt4:Z,tnLt4:j.length+"|"+j.map(O=>O.num).join(",")}}parsePdf(f){let k=new _.PdfUtils;k.loadPdf(f,S=>{const T=S.length;let P=[],j=[],Z=document.createElement("div");Z.id="hiddenWrapper",Z.style.width="1px",Z.style.height="1px",Z.style.overflow="hidden",Z.style.opacity="0",Z.style.zIndex="-9999",Z.style.position="fixed",Z.style.top="0",Z.style.left="0",document.body.appendChild(Z);let M=document.createElement("div"),O="canvasWrapper";M.id=O,Z.appendChild(M);const K=(new Date).getTime();let H=[];k.render(S,O,E.CONST.RENDER_SCALE,(G,nt,X)=>{if(null!=G&&(P[nt]=G,j[nt]=X),H.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${H.length}/${T}`),H.length==T){const it=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(it-K)/1e3+" secs"),this.startAnalyze(P,j,S)}})})}imgToTextObj(f,k){return{str:"img",fontName:k,width:f.paintWidth,height:f.paintHeight,transform:[-999,0,0,0,-f.left,-f.top-f.paintHeight]}}startAnalyze(f,k,S){const T=S.length;let P=[],j=[],Z=[],M=new _.PdfUtils;const O=(new Date).getTime();for(let K=0;K<T;K++){const H=K;let G=M.getImages(S[K],H);S[K].getTextContent().then(nt=>{for(const it of G)nt.items.push(this.imgToTextObj(it,nt.items.length>0?nt.items[0].fontName:""));let X=M.getLines(nt,H,f[H],k[H]);if(j=j.concat(X),Z[H]=nt.styles,P.push(1),P.length==T){j.sort((St,Jt)=>1e7*St.pageIndex+(St.transform.length>0?St.transform[5]:0)-(1e7*Jt.pageIndex+(Jt.transform.length>0?Jt.transform[5]:0))),M.findAndSplitQuestAnsLine(j,Z,f);let it=new z.FooterParser,ot=0;for(const St of j){if((j.length-1==ot||ot+1<j.length-1&&St.pageIndex!=j[ot+1].pageIndex)&&(St.isLastLine=!0),St.isLastLine&&it.parse(St.strLine).length>0){St.isFooter=!0;let Jt=w.CanvasUtil.getBottomLine(M.imageCache[j[ot-1].pageIndex],ot-1,j);St.top=Jt[0]+E.CONST.MARGIN_LEFT}ot++}let ft=new h.ExamParser(this.config),xt=j.map(St=>St.strLine),st=ft.parse(xt),Mt=this.getQuestionInfo(st,j,Z,f,M.imageCache);const ee=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(ee-O)/1e3+" secs"),this.showOnCanvas(Mt,f,E.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(Mt,f)}})}}getPosInfo(f,k,S,T,P,j,Z,M,O){if(!S.top){let G=w.CanvasUtil.getTopLine(P,j,T);S.top=G[0],S.isIntersec=G[1]}if(!S.bottom){let G=w.CanvasUtil.getBottomLine(P,j,T);S.bottom=G[0],S.isIntersec=G[1]}return{str:"",pageIndex:S.pageIndex,lineIndex:j,transform:"a"==f?w.CanvasUtil.calIndexPos2(S.textObjs,M,Z,O?O-1:0):S.transform,startLeft:k>=0?w.CanvasUtil.calIndexPos2(S.textObjs,M,Z,k-1):void 0,type:f}}getQuestionInfo(f,k,S,T,P){let j=[];for(const Z of f){let M=Z.parts[0].lineIdx,O=k[M],K=this.getPosInfo("q",Z.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]),H=null;if(M=Z.parts[Z.parts.length-1].lineIdx,Z.answers.length>0){let G=Z.answers[Z.answers.length-1];G.parts.length>0&&(M=G.parts[G.parts.length-1].lineIdx)}if(M+=1,M<k.length&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex])),Z.isGroup)j.push({num:Z.label,answers:[],remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),isGroup:!0,text:Z.parts.map(G=>k[G.lineIdx])});else{let G={num:Z.label,answers:[],remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),group:Z.group,strAns:Z.strAns,isFixAns:Z.isFixAns,text:Z.parts.map(X=>k[X.lineIdx])};j.push(G);let nt=0;for(const X of Z.answers){let it={pageIndex:G.remove.pageIndex,top:G.remove.top-1,left:G.remove.left-1,width:1,heigh:1};if(X.parts.length>0){if(M=X.parts[0].lineIdx,O=k[M],1==O.isIntersec&&(G.isFixAns=!0),X.parts.length>1&&(G.isFixAns=!0),K=this.getPosInfo("a",X.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex],X.parts[0].b),H=null,nt<Z.answers.length-1){let xt=Z.answers[nt+1];M=xt.parts[0].lineIdx,O=k[M],H=this.getPosInfo("a",xt.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex],xt.parts[0].b)}else M=X.parts[X.parts.length-1].lineIdx+1,M<k.length-1&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]));let ot=this.getAnsRemoveBox(K,k),ft={label:X.label,remove:ot,isCorrect:X.isCorrect,positions:X.isInline?[ot]:this.getAnsBoxes(K,k,H,T[O.pageIndex].canvas.height)};G.answers.push(ft)}else G.answers.push({label:X.label,remove:it,isCorrect:X.isCorrect,positions:[it]});nt++}Z.help&&Z.help.length>0&&(M=Z.help[0].lineIdx,O=k[M],K=this.getPosInfo("q",Z.help[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]),H=null,M=Z.help[Z.help.length-1].lineIdx+1,M<k.length&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex])),G.help={num:Z.label,remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),text:Z.help.map(X=>k[X.lineIdx])})}}return j}showHidden(){let f=document.getElementById("hiddenWrapper");f&&(f.style.opacity="1",f.style.width="",f.style.height="",f.style.overflow="",f.style.position="")}showOnCanvas(f,k,S){const T=(new Date).getTime(),P=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(S.indexOf("quest")>=0)for(const Z of f){for(const M of Z.positions)w.CanvasUtil.drawBox(k[M.pageIndex],Z.isGroup?"black":"red",M);w.CanvasUtil.drawBox(k[Z.remove.pageIndex],"yellow",Z.remove);for(const M of Z.answers){for(const O of M.positions)w.CanvasUtil.drawBox(k[O.pageIndex],P.get(M.label)+"",O,!0);w.CanvasUtil.drawBox(k[M.remove.pageIndex],"yellow",M.remove),M.isCorrect&&w.CanvasUtil.drawPoint(k[M.positions[0].pageIndex],"green",M.positions[0])}if(Z.help){for(const M of Z.help.positions)w.CanvasUtil.drawBox(k[M.pageIndex],"orange",M);Z.help.remove&&w.CanvasUtil.drawBox(k[Z.help.remove.pageIndex],"yellow",Z.help.remove)}}const j=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(j-T)/1e3+" secs")}getAnsRemoveBox(f,k){let S=f.startLeft?f.startLeft[5]-2:k[f.lineIndex].top,T=f.transform[4]-E.CONST.MARGIN_LEFT,P=f.startLeft?f.startLeft[5]+f.startLeft[3]:k[f.lineIndex].bottom;return{pageIndex:f.pageIndex,top:S||20,left:T,heigh:P&&S?P-S:0,width:(f.startLeft?f.startLeft[4]:0)-T}}getAnsBoxes(f,k,S,T){const P=T,j=E.CONST.MARGIN_LEFT;let Z=[],M=k[f.lineIndex].top,O=k[f.lineIndex].bottom;if(!M||!O)return[];let H=O,G=f.transform[4]-j,nt=S&&f.lineIndex==S.lineIndex?S.transform[4]-j:k[f.lineIndex].transform[4]+k[f.lineIndex].width+j;if(Z.push({pageIndex:f.pageIndex,top:M,left:G,width:nt-G,heigh:O-M}),S&&S.lineIndex==f.lineIndex)return Z;M=O,O=P,nt=0;let X=f.pageIndex,it=0;for(it=f.lineIndex+1;it<k.length;it++){if(O==P&&w.CanvasUtil.isLastLineOfPage(it,k)){let ft=k[it].isFooter?k[it-1]:k[it];O=ft.transform[5]+ft.height+20}let ot=k[it].top;if(it>f.lineIndex+1&&!k[it-1].isFooter){let ft=k[it-1].transform[4]+k[it-1].width+j;ft>nt&&(nt=ft);let xt=k[it-1].transform[4]-j;xt<G&&(G=xt)}if(k[it].isFooter&&ot)it-f.lineIndex>1?(O=k[it-1].transform[5]+k[it-1].height+E.CONST.LINE_MAGIN,G=k[f.lineIndex+1].transform[4]-j):O=k[f.lineIndex].bottom;else if(k[it].pageIndex>X&&(O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&it-f.lineIndex>1&&Z.push({pageIndex:X,top:M,left:G,width:nt-G,heigh:O-M}),M=20,H=M),X=k[it].pageIndex,ot){O=ot;break}}if(it>=k.length&&(it=k.length-1),it-f.lineIndex>1&&k[it-1].transform[5]>H&&!w.CanvasUtil.isFirstLineOfPage(it,k)){let ot=20==M?k[it].transform[4]:k[f.lineIndex+1].transform[4];if(20!=M)for(let ft=f.lineIndex+2;ft<=it;ft++)k[ft].transform[4]<ot&&(ot=k[ft].transform[4]);O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&Z.push({pageIndex:X,top:M,left:ot,width:nt-ot,heigh:O-M})}S&&"a"==S.type&&S.transform[4]>k[S.lineIndex].transform[4]+10*E.CONST.RENDER_SCALE&&(nt=S.transform[4]-j,M=k[S.lineIndex].top,G=k[S.lineIndex].transform[4]-j,O=k[S.lineIndex].bottom,M&&O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&Z.push({pageIndex:X,top:M,left:G,width:nt-G,heigh:O-M}));for(let ot=Z.length-1;ot>=1;ot--)Z[ot].left-(Z[ot-1].left+Z[ot-1].width)>=20*E.CONST.RENDER_SCALE&&Z.splice(ot,1);return Z}getQuestRemoveBox(f,k){let S=f.startLeft?f.startLeft[5]:k[f.lineIndex].top,T=f.transform[4]-E.CONST.MARGIN_LEFT,P=f.startLeft?f.startLeft[5]+f.startLeft[3]:k[f.lineIndex].bottom;return{pageIndex:f.pageIndex,top:S||20,left:T,heigh:P&&S?P-S:0,width:(f.startLeft?f.startLeft[4]:0)-T}}getQuestBoxes(f,k,S,T){let P=T;for(let it=f.lineIndex;it<k.length;it++)if(w.CanvasUtil.isLastLineOfPage(it,k)){let ot=k[it].isFooter?k[it-1]:k[it];P=ot.transform[5]+ot.height+20;break}let j=[],Z=f.pageIndex,M=S?S.lineIndex:k.length-1,O=k[f.lineIndex].transform[4]-E.CONST.MARGIN_LEFT,K=k[f.lineIndex].top;if(!K)return[];let H=E.CONST.CROP_FULL_WIDTH?w.CanvasUtil.getMaxLineRight(-1,k)+2*E.CONST.MARGIN_LEFT:k[f.lineIndex].transform[4]+k[f.lineIndex].width+2*E.CONST.MARGIN_LEFT,G=P,nt=Z,X=f.lineIndex+1;for(;X<=M;X++){let it=k[X].top;if(X==k.length-1&&!S&&(it=k[X].bottom),!E.CONST.CROP_FULL_WIDTH){let ft=k[X-1].transform[4]+k[X-1].width+2*E.CONST.MARGIN_LEFT;ft>H&&(H=ft)}let ot=k[X-1].transform[4]-E.CONST.MARGIN_LEFT;ot<O&&(O=ot),k[X].isFooter&&it?G=it:(k[X].pageIndex>nt&&(k[X-1].isFooter||(G=P),j.push({pageIndex:nt,top:K,left:O,width:H-O,heigh:G-K}),K=20,O=w.CanvasUtil.getMinLineLeft(k[X].pageIndex,k)-E.CONST.MARGIN_LEFT),nt=k[X].pageIndex,it&&(G=it))}if(X-=1,!S&&w.CanvasUtil.isLastLineOfPage(X,k)){let it=k[X].isFooter?k[X-1]:k[X];G=it.transform[5]+it.height+20}return w.CanvasUtil.isFirstLineOfPage(X,k)||j.push({pageIndex:nt,top:K,left:O,width:H-O,heigh:G-K}),j}}},70432:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnswerParser=void 0;const E=A(20430);class h extends E.Parser{constructor(w){super(),null!=w&&(this.isOn=w),this.TYPE=h.TYPE_NAME}do(w){let _=[],g="|"+w,x=/([\s\|\.\]]+\*?[A-H][\s\|]*[\.\)])/g,f=this.matchPos(g,x,!1);0==f.length&&(f=this.matchPos(g,x,!0));let k=!1;0==f.length&&/^\|?\s*\*?[A-H\s\|]+$/g.test(g)&&(k=!0,f=this.matchPos(g,/\*?[A-H]/g,!1));let S=!1;if(0==f.length&&(k=!0,S=!0,f=this.matchPos(g,/\[\*?[A-H]:[^\]]+\]/g,!1)),f.length>0)for(const T of f){let P=T.index+T.value.length-1,j=-9999,Z=T.value.replace(/\*?[\sA-H\|]/g,"");S&&(j=T.index+T.value.length-2,T.index=T.index+1,P=T.index+1+(T.value.startsWith("[*")?1:0),Z=".");let M={type:this.TYPE,pos:[T.index-1,P,j]},O=w.substring(M.pos[0]);!k&&!/^\|?\s*\*?[A-Himg\s\|\.]+$/g.test(g)&&O.trim()==T.value.trim()||(M.label=w.substring(M.pos[0],M.pos[0]+1),"*"==M.label&&(M.label=w.substring(M.pos[0]+1,M.pos[0]+2),M.extInfo="*"),M.olabel=Z,M.score=1,""==w.substring(0,M.pos[0]).replace(/[\s\|]/g,"")&&(M.score=2),_.push(M))}return _}matchPos(w,_,g){let x=g?w.toUpperCase():w,f=/[\s\|\.\]]/,k=x.matchAll(_),S=[];for(;;){let T=k.next();if(T.done)break;let P=0;for(let Z=T.value.index;Z<x.length&&f.test(x[Z]);Z++)P++;let j=T.value[0].substr(P,1);"A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("A")||"*A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("*A")||S.push({value:T.value[0].substr(P),index:T.value.index+P})}return S}}J.AnswerParser=h,h.TYPE_NAME="answer"},99739:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnChiTietParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),this.TYPE=z.TYPE_NAME,null!=_&&(this.isOn=_)}do(_){let x=this.cleanLine(_);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(x)&&x.length>=2?[{type:z.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(_){let g=[/\|/g,/[\s\.\-:,;!\[\]@\*\$\(\)]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],x=_;x=x.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),x=x.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const f of g)x=x.replaceAll(f,"");return x=x.replaceAll("\\n"," "),x}getAnsMC(_,g){var x;let f=[];for(const j of g)f.push(_[null!==(x=j.lineIdx)&&void 0!==x?x:0]);let k=f.join(""),S=this.cleanLine(k),T=this.getResultMC(S.toUpperCase()),P=new Map;for(const j of T)P.set(j.num,j.str);return P}getAnsStr(_){let g=_.join("\n");g=g.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),g=g.replaceAll(/\[![!iucsbp]+:!!\]/g,""),g=g.replaceAll("[*","").replaceAll("*]","");let x=this.getResultStr(g),f=new Map;for(const k of x)f.set(k.num,k.str);return f}getAnsFromHelp(_,g){let x=[];for(const k of _){let S=g[k.lineIdx];S=S.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),S=S.replaceAll(/\[![!iucsbp]+:!!\]/g,""),x.push(S)}let f=0;for(const k of x){let S=k.trim().match(E.CONST.HELP_ANS_PATTERN.join("|"));if(null!=S)for(const T of S)if(null!=T&&1==T.length)return _.splice(f,1),T;f++}return""}getResultStr(_){let g=[],x=_.replace(/\n/g,"\n"),f=E.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),k=x.matchAll(new RegExp(f,"ig"));for(;;){let Z=k.next();if(Z.done)break;let M=Z.value[0],O=E.Utils.getNumberFromStr(M);x=x.replace(M,O+".")}let j,T=x.matchAll(/\d+[\.\-]/g),P=-1;for(;;){let Z=T.next();if(Z.done)break;if(-1==P)P=Z.value.index,j=Z;else{let M=x.substr(P,Z.value.index-P);g.push(this.toAns(M,j)),P=Z.value.index,j=Z}}if(P>=0&&j){let Z=x.substr(P);g.push(this.toAns(Z,j))}return g}toAns(_,g){let x=g.value[0].length;return{num:+g.value[0].substr(0,x-1),str:_.substring(x).replace(/\s+/g," ").trim()}}getResultMC(_){let g=[],x="",f=[],k=!1;for(let S=0;S<_.length;S++){let T=_.charCodeAt(S),P=T>=65&&T<=72;if(P&&""==x)return[];P!=k&&(f.push(x),x=""),k=P,x+=_[S]}""!=x&&f.push(x);for(let S=1;S<f.length;S+=2){let T=0,P=Math.floor(f[S-1].length/f[S].length),j=+f[S-1].substring(T,P),Z=j;for(let M=0;M<f[S].length;M++){if(M>=f[S-1].length)return[];if(j=+f[S-1].substring(T,T+P),j!=Z)return[];g.push({num:j,str:f[S][M]}),T+=P,Z=j+1,P=Z.toString().length}}return g}}J.DapAnChiTietParser=z,z.TYPE_NAME="chitietdapan"},80983:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.DAPAN_PATTERN)}static getAnsFromHelp(_){for(const g of _){let x=g.replace(/\|/g,"").trim().match(E.CONST.HELP_ANS_PATTERN.join("|"));if(null!=x)for(const f of x)if(null!=f&&1==f.length)return f}return""}}J.DapAnParser=z,z.TYPE_NAME="dapan"},82700:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FooterParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.FOOTER_PATTERN)}}J.FooterParser=z,z.TYPE_NAME="footer"},65465:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HetParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.HET_PATTERN)}}J.HetParser=z,z.TYPE_NAME="end"},72687:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HuongDanParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.HUONGDAN_PATTERN)}}J.HuongDanParser=z,z.TYPE_NAME="huongdan"},29688:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.IncludeParser=void 0;const E=A(20430);class h extends E.Parser{constructor(w){super(),null!=w&&(this.isOn=w),this.TYPE=h.TYPE_NAME}do(w){let _=w.replace(/\|/g,"").trim(),x=/\[@([CTQG]\d+):[^\]]*\]/g,f=/\[@(F:[^\]]*)\]/g,k=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,S=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(_)){let T=_;return T=T.replaceAll(x,"$1").replaceAll(f,"$1").replaceAll(k,"$1").replaceAll(S,""),[{type:this.TYPE,pos:[0,0],label:"@@."+T}]}return[]}}J.IncludeParser=h,h.TYPE_NAME="include"},20430:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Parser=void 0,J.Parser=class A{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(h){return this.isOn?this.do(h):[]}match(h,z){let w=h.replace(/\|/g,"").trim().match(z.join("|"));return null!=w&&w.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},49362:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.QuestionParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){let g=this.matchPos(_);if(g.value){let x=null;for(let j=g.value.length-1;j>=0;j--)if(g.value[j]){x=g.value[j];break}if(null==x)return[];let f=_.replace(/\|/g,"").toLowerCase().indexOf(x),k=f,S="",T=_.toLowerCase();for((x.endsWith("(")||x.endsWith("["))&&(x=x.substring(0,x.length-1));k<T.length&&("|"!=T[k]&&(S+=T[k]),k++,S!=x););let P={type:this.TYPE,pos:[f,k]};return P.label=this.getNumberFromStr(_.substring(P.pos[0],P.pos[1])),P.olabel=x,[P]}return[]}matchPos(_){let g=_.replace(/\|/g,"").toLowerCase().trim(),x=E.CONST.QUESTION_PATTERN.join("|"),f=g.matchAll(x).next();return f.value||(x=E.CONST.QUESTION_PATTERN2.join("|"),f=g.matchAll(x).next()),f}getNumberFromStr(_){let g=_.match(/(\d+)/);return g?g[0]:""}}J.QuestionParser=z,z.TYPE_NAME="question"},50610:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SectionParser=void 0;const E=A(25442),h=A(20430);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){let g=_.replace(/\|/g,"");g=g.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let x=g.toLowerCase().trim().match(E.CONST.SECTION_PATTERN_LOWER.join("|")),f=null!=x&&x.length>0;return f||(x=g.trim().match(E.CONST.SECTION_PATTERN_NORMAL.join("|")),f=null!=x&&x.length>0),f&&x?[{type:this.TYPE,pos:[0,0],label:g}]:[]}}J.SectionParser=z,z.TYPE_NAME="section"},85215:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ModifyAnsRule=void 0;const E=A(36994);class h extends E.Rule{constructor(w){super(w??"","modify:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)&&this.checkVal(w,_)){for(const x of this.data){let f=x.split(":"),k=_-+f[0],S=w[k].label;w[k].label=f[1],w[k].err=S+" -> "+f[1]}return!0}return!1}}J.ModifyAnsRule=h},72617:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.RemoveDupRule=void 0;const E=A(36994);class h extends E.Rule{constructor(w){super(w??"","rmdup:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){var g,x;if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)){let k=null!==(g=w[_].score)&&void 0!==g?g:0,S=null!==(x=w[_-1].score)&&void 0!==x?x:0;if(w[_].label==w[_-1].label)return w.splice(k>S?_-1:_,1),!0}return!1}}J.RemoveDupRule=h},69504:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.RemoveRule=void 0;const E=A(36994);class h extends E.Rule{constructor(w){super(w??"","remove:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)&&this.checkVal(w,_)){for(const x of this.data)w.splice(_-+x,1);return!0}return!1}}J.RemoveRule=h},36994:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Rule=void 0,J.Rule=class A{constructor(h,z){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=z,!h.startsWith(this.TYPE))return;let _=h.substring(this.TYPE.length).split("=>"),g=_[0].split(":");this.pattern=g[0].trim(),this.valPattern=g.length>1?g[1].trim():"",this.data=_[1].split(",").map(x=>x.trim())}checkVal(h,z){var w;if(""==this.valPattern)return!0;let g=[];for(let f=Math.ceil(this.pattern.length/2);f>0;f--)g.push(null===(w=h[z-f+1].label)||void 0===w?void 0:w.trim());let x=g.join("-");return new RegExp(this.valPattern).test(x)}getStack(h,z){let w="",_=z-10>=0?z-10:0;for(;_<=z;_++)w+="-"+h[_].type[0];return w}}},633:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SameKindRule=void 0;const E=A(25442),h=A(80983),z=A(65465),w=A(72687),_=A(36994);class g extends _.Rule{constructor(f){super(f??"","same:")}load(f){let k=new g(f);return""!=k.pattern?k:null}run(f,k){var S,T,P;if(""==this.pattern)return!1;let j=f[k];if(j.type[0]!=this.pattern)return!1;let Z=[],M=[],O="";for(let K=0;K<k;K++){let H=f[K];(H.type==z.HetParser.TYPE_NAME||H.type==h.DapAnParser.TYPE_NAME)&&(O="da"),H.type==w.HuongDanParser.TYPE_NAME&&"da"==O&&(O="hd")}if("da"==O)return!1;for(let K=k-1;K>=0;K--){let H=f[K];if(H.type==z.HetParser.TYPE_NAME||H.type==h.DapAnParser.TYPE_NAME||"hd"==O&&H.type==w.HuongDanParser.TYPE_NAME||(H.type[0]==this.pattern&&H.olabel&&(Z.push(H.olabel),M.push(H.label)),2==Z.length))break}if(Z.length>=1){let K=Z[0],H=2==Z.length?Z[1]:K,G=null!==(S=j.olabel)&&void 0!==S?S:"";if("a"==this.pattern&&(""==K&&(K="."),""==H&&(H="."),""==G&&(G=".")),""==this.valPattern){if(K==H&&G!=K)return f.splice(k,1),!0}else{let nt=this.valPattern.split(",");for(const X of nt){let it=X.trim(),ft=new RegExp(E.CONST[it].join("|"));if(ft.test(K)&&ft.test(H)&&!ft.test(G)&&+(null!==(T=M[0])&&void 0!==T?T:"0")+1!=+(null!==(P=j.label)&&void 0!==P?P:"0"))return f.splice(k,1),!0}}}return!1}}J.SameKindRule=g},61136:(ut,J,A)=>{A.r(J),A.d(J,{TestbankModule:()=>XZ});var E=A(36895),h=A(24006),z=A(76619),w=A(34793),_=A(750),g=A(39102),x=A(37020),f=A(93194),k=A(1737),S=A(43189),T=A(63728),P=A(59650),j=A(47470),Z=A(75658),M=A(3974),O=A(8785),K=A(80529),H=A(28091),G=A(23231),nt=A(39841),X=A(36221);function it(n,a,e=8,i=[]){if(a<=1)return i.push(n),i;let o=i.push(parseFloat((n/a).toPrecision(e)));return it(n-i[o-1],a-1,e,i)}var ot=A(51442),ft=A(64341);class xt extends G.EditorApiService{constructor(a,e,i,o,s){super(),this.questionHelper=a,this.apiUploadService=e,this.documentService=i,this.examService=o,this.questionService=s,this.treeData=[],this.treeQuestion=[],this.saveTreeData=[],this.saveTreeQuestion=[],this.saveTreeResponse=[]}loadData(a,e){return console.log("search",a,e),new Promise(i=>{this.saveTreeData.includes(e)?i():(this.saveTreeData.push(e),this.documentService.apiDocumentsGet(e,void 0,""!=a?a:void 0,"exam_online",void 0,1,1,-1).subscribe(o=>{1===o.success&&o.data&&((o.data.categoryObjs||[]).forEach(l=>{this.treeData.push({id:l.id||0,name:l.name||"",type:"cat",pr:e})}),(o.data.documentObjs||[]).forEach(l=>{l.exam&&this.treeData.push({id:l.exam.id||0,name:l.exam.name||"",type:"test",pr:e})})),i()}))})}getTotalQuest(a){return this.treeQuestion.filter(e=>e.pr===a&&"quest"===e.type).length}loadQuestion(a){return new Promise(e=>{this.saveTreeQuestion.includes(a)?e():(this.saveTreeQuestion.push(a),this.examService.apiExamGetExamWithQuestionObjsIdGet(a).subscribe(i=>{if(1===i.success&&i.data){let s=[];(i.data.questionObjs||[]).forEach(r=>{var l;this.treeQuestion.push({id:r.id||0,label:(null!==(l=r.rawIndex)&&void 0!==l?l:0)+1,content:this.questionHelper.renderContent(r),groupId:r.groupId,type:"quest",pr:a}),s.includes(r.groupId||0)||s.push(r.groupId||0)}),s.length>1&&s.forEach(r=>{this.treeQuestion.push({id:r,label:r,content:"Nh\xf3m "+(r+1),type:"group",pr:a})}),e()}}))})}searchRes(a,e){return new Promise(i=>{this.loadData(a,e).then(()=>{i(this.treeData.filter(o=>o.pr===e))})})}getQuestion(a){return new Promise(e=>{this.loadQuestion(a).then(()=>{e(this.treeQuestion.filter(i=>i.pr===a))})})}convertQuestionInfo(a){return{id:a.id||0,label:Number(a.label)||0,content:"C\xe2u"+a.label,type:"quest"}}apiQuestionsGet(a,e,i,o,s,r){return new Promise(l=>{const c=i+"_"+o+"_"+r+"_"+s+"_"+a,u=this.saveTreeResponse.find(d=>d.key===c);u&&e?l(u.questions):this.questionService.apiQuestionsGet(i+"",o+"",r+"","",void 0,s+"","",void 0,void 0,void 0,a).subscribe(d=>{if(1===d.success&&d.data&&d.data.questions&&d.data.questions.length>0){const m=this.saveTreeResponse.findIndex(p=>p.key===c);return-1===m?this.saveTreeResponse.push({key:c,questions:d.data.questions}):this.saveTreeResponse[m].questions=d.data.questions,void l(d.data.questions)}l([])})})}randomQuestToFull(a,e,i,o,s,r){return new Promise(l=>{this.apiQuestionsGet(a,e,i,o,s,r).then(c=>{l(c)})})}randomQuest(a,e,i,o,s,r){return new Promise(l=>{this.apiQuestionsGet(a,e,i,o,s,r).then(c=>{l(c.map(u=>this.convertQuestionInfo(u)))})})}uploadToCdnForHomework(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnForHomework(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForExamQuestionContent(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionResult(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionResult(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankQuestionAttachment(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankPdf(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankPdf(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}uploadToCdnProgressForTestbankDocx(a){return new Promise((e,i)=>{this.apiUploadService.uploadToCdnProgressForTestbankDocx(a).subscribe(o=>{1==o.success&&o.data?e(JSON.stringify(o.data)):i(new Error("Not upload file"))})})}}var st=A(55330),Mt=A(81721);class ee{static loadImageToBase64(a,e){return new Promise((i,o)=>{const s=new Image;s.crossOrigin="anonymous",s.setAttribute("count","1"),s.onload=()=>{const r=document.createElement("canvas");r.width=s.width,r.height=s.height,r.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,r.width,r.height);let u=r.toDataURL();i(u)},s.onerror=()=>{const r=s.getAttribute("count");r&&1==Number(r)?(s.src=e.getMyCdn(a),s.setAttribute("count","2")):r&&Number(r)<5?(s.setAttribute("count",r+1),s.src=e.getRawCdnLink(a)+"?t="+(new Date).getTime()):o(new Error)},s.src=e.getRawCdnLink(a)})}}class St{constructor(a,e){this.editorOutputDataService=a,this.commonService=e,this.typeMatrix="user",this.startIndex=0,this.backToLink="",this.title="",this.editor={show:!0},this.examSave={},this.homeworkSave={},this.mathEditor={},this.similarQuest={},this.showErrorsQuests={},this.showInfomationQuests={},this.imageEditor={},this.logConfig={},this.heightContent=600,this.inputMoveToQuestion=!1,this.inputMoveToQuestionValue="1",this.inputMoveToQuestionTooltip=!1}showEditor(){this.disAll(),this.reSetBackToLink(),this.editor.show=!0}showHomework(){var a;this.disAll(),this.backToLink="",this.title=null!==(a=this.commonService.myTranslateInstant("lang_cms_config_homework_title"))&&void 0!==a?a:"",this.homeworkSave.show=!0}showExam(){var a;this.disAll(),this.title=null!==(a=this.commonService.myTranslateInstant("lang_auto_cau_hinh_de_thi"))&&void 0!==a?a:"",this.backToLink="",this.examSave.show=!0}disAll(){this.title="",this.examSave.show=!1,this.homeworkSave.show=!1,this.editor.show=!1}reSetBackToLink(){var a;this.title=null!==(a=this.commonService.myTranslateInstant("lang_auto_cong_cu_soan_thao_noi_dung"))&&void 0!==a?a:"",this.backToLink=this.sourceBackToLink?this.sourceBackToLink:"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0)}getBackLink(){return this.matrix&&this.matrix.matrix.length>0?(this.editorOutputDataService.setMatrixData(this.matrix,!0),`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/${this.typeMatrix}/0`):this.backToLink}}class Jt{constructor(a,e){this.editorCommonService=a,this.commonService=e,this.wmf=new WMFConverter}readFileInputEventAsArrayBuffer(a,e){var i=new FileReader;i.onload=function(o){e(o.target.result)},i.readAsArrayBuffer(a)}handleFileSelect(a,e,i){let o=this,s=(c,u)=>{if(i){let d=this.commonService.myTranslateInstant("lang_auto_cong_thuc");i(c,u,d)}},l=new X.Q(30,{function:i?(c,u)=>{if(i){let d=this.commonService.myTranslateInstant("lang_auto_image");i(c,u,d)}}:()=>{}});this.readFileInputEventAsArrayBuffer(a,function(c){azotaDocx.readDocx(c,s).then(function(u){for(let d of u.data)"img"==d.type&&("image/x-wmf"==d.contentType||"image/x-emf"==d.contentType?l.addTask(o,o.convert,[d]):d.value="data:"+d.contentType+";base64, "+d.value,!d.cssStyle&&d.height&&d.width&&"EMU"==d.measureUnit)&&(d.cssStyle=`width:${+d.width/12700}pt;height:${+d.height/12700}pt;margin-top:0px;`);l.start().then(()=>{let d=new Map,m=0;for(let p of u.data)"img"==p.type&&p.cropInfo&&d.set(m,1),m++;if(e&&0==d.size)e(u);else{m=0;for(let p of u.data){if("img"==p.type&&p.cropInfo){const b=m,y=document.createElement("img");y.src=p.value,y.onload=()=>{o.cropImage(p,y),d.delete(b),0==d.size&&e&&e(u)},y.onerror=()=>{d.delete(b),0==d.size&&e&&e(u)}}m++}}})})})}convert(a){return new Promise(e=>{if("image/x-wmf"==a.contentType)a.value=this.wmf.toPNG("data:"+a.contentType+";base64, "+a.value),e();else{let r=new ToContext2D(0,1),l=this.decodeBase64(a.value);try{FromEMF.Parse(l,r)}catch{}var i=this.scaleCanvas(r.canvas,200,200);a.value=i.toDataURL(),e()}})}decodeBase64(a){return Uint8Array.from(atob(a),function(e){return e.charCodeAt(0)})}scaleCanvas(a,e,i){let o=document.createElement("canvas");return o.width=e,o.height=i,o.getContext("2d")?.drawImage(a,0,0,a.width,a.height,0,0,e,i),o}cropImage(a,e){if(!a.cropInfo)return;let i=a.cropInfo.left?+a.cropInfo.left:0,o=a.cropInfo.top?+a.cropInfo.top:0,s=a.cropInfo.right?+a.cropInfo.right:0,r=a.cropInfo.bottom?+a.cropInfo.bottom:0;if(i+o+s+r==0)return;let l=e.width,c=e.height,u=i*l/1e5,d=o*c/1e5,b=l-s*l/1e5-u,y=c-r*c/1e5-d;const C=document.createElement("canvas");C.width=b,C.height=y,C.getContext("2d")?.drawImage(e,u,d,b,y,0,0,b,y),a.value=C.toDataURL()}}class yt{parse(a){let e=["NB_SOCH","TH_SOCH","VD_SOCH","VDC_SOCH","DIEM"],i=[],o=[],s=[];for(let b of a){s=[];for(let y of b.content){if("POS"==y.indexName&&""!=y.value){let q=y.value.trim();q=q.replaceAll("C",""),s=q.split(",")}if(y.isMerge||""==y.value.trim()||e.indexOf(y.indexName)<0)continue;let C=a.filter(q=>q.obj.id==y.id).map(q=>({id:q.obj.id,type:q.obj.type[0].toUpperCase(),name:q.obj.item,shareType:this.getShareType(q.obj)})),I=y.value;I=I.replace(/\d+/g,"").trim();let D=[y.indexName.split("_")[0]];""!=I?D.push(...I.split(",").map(q=>q.trim())):D.push("TN","DT");let U=G.Utils.getNumberFromStr(y.value),B={value:U,tag:D,items:[...C],point:0,pos:s.splice(0,U)};for(let q of y.mergeId){let R=a.filter(et=>et.index==q).map(et=>({id:et.obj.id,type:et.obj.type[0].toUpperCase(),name:et.obj.item,shareType:this.getShareType(et.obj)}));B.items.push(...R)}"DIEM"==B.tag[0]?o.push(B):i.push(B)}}for(let b of o){let y=0;for(let C of i)b.items.filter(D=>C.items.filter(U=>U.id==D.id).length>0).length>0&&(y+=+C.value);y>0&&(b.point=Math.round(+b.value/10*100/y)/100);for(let C of i)b.items.filter(D=>C.items.filter(U=>U.id==D.id).length>0).length>0&&(C.point=b.point)}let r=[],l=[],c=new Map,u=["NB","TH","VD","VDC"];i.sort((b,y)=>u.indexOf(b.tag[0])-u.indexOf(y.tag[0]));let d=1,m=0;for(let b of i)m+=+b.value;for(let b of i){let y=[],C=b.items.map(B=>`[@${B.type}${B.id}:${"user"==B.shareType?`:${B.shareType}-`:""}${B.name}]`).join(",")+".";y.push(C);let I=b.tag.map(B=>`[@F:azt_lang_tag_${B}]`).join(",");y.push(`${I}.`),y.push("[azt_lang_sugg_random $__d_value__$ azt_lang_sugg_question]");let D=y.join(""),U=+b.value;for(let B=0;B<U;B++)c.set(D+"=>"+B,{d:b.point});for(let B=0;B<U;B++){let q={txt:D.replace("$__d_value__$","1"),idx:b.pos[B]?+b.pos[B].trim():d};b.pos[B]&&q.idx<=m?r.push(q):l.push(q),d++}}r=r.sort((b,y)=>b.idx-y.idx),l=l.sort((b,y)=>b.idx-y.idx);let p=[];for(let b=1;b<=m;b++)r.length>0&&r[0].idx==b?p.push(r.splice(0,1)[0]):l.length>0&&p.push(l.splice(0,1)[0]);return r.length>0&&p.push(...r),l.length>0&&p.push(...l),{text:p.map(b=>b.txt).join("\n"),extra:c}}getShareType(a){var e;let i=null===(e=a.prNode)||void 0===e?void 0:e.prNode,o="",s=[];for(a.prNode&&s.push(a.prNode.id);i;)o=`[@C${i.id}:-].`+o,s.push(i.id),i=i.prNode;let r="";return 1==s.length&&-1==s[0]&&(r="user"),s.length>1&&-1==s[s.length-1]&&(r="user_"+s[s.length-2]),r}}class qt{process(a){let e=/^\s*#(\d)\s*\[[A-Z0-9\-\[\]\$!:b]+\]/g,i=["NB","TH","VD","VDC"],o=0,s=!1,r=1;for(let l of a){let u=l.matchAll(e).next();if(!u.done){let m=+u.value[1]-1;m<i.length&&(a[o]=l.replace(u.value[0],`C\xe2u ${r++}. (${i[m]})`)),s=!0}s&&"GY"==l.trim()&&(a[o]="L\u1eddi gi\u1ea3i"),o++}}}var Yt=A(40794),Ft=A(82782);class pe extends Ft.N{constructor(){super(...arguments),this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}render(a,e,i){if(a.trim().startsWith("[@"))return a;let o=a,s=this.chemBase.join("|"),r=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?(${s})+\\d*(${s}|\\d+|\\(|\\))*(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|$)`,"g"),l=o.matchAll(r),c=[];for(;;){let d=l.next();if(d.done)break;let m=0==d.value.index?d.value[0]:d.value[0].substring(1);m.replace("(","").replace(")","").length<=1||c.push({s:0==d.value.index?0:d.value.index+1,len:m.length,val:this.autoFormat(m)})}if(c.sort((d,m)=>d.s>m.s?-1:1),c.filter(d=>/\d+/.test(d.val)).length>0)for(let d of c)o=o.substring(0,d.s)+"\\("+d.val+"\\)"+o.substring(d.s+d.len);return o}autoFormat(a){return a.replaceAll(/([^\(])(\d+)/g,"$1_{$2}")}}var Me=A(46282);class Bn extends Ft.N{constructor(a){super(),this.cdnService=a}render(a,e,i){var o;if(a.indexOf("[img:")<0)return a;let r=a,l=r.matchAll(/\[img:\$[a-zA-Z0-9_]+\$\]/g);for(;;){let c=l.next();if(c.done)break;let u=c.value[0];const d=u.replace("[img:$","").replace("$]","");if(e){const m=e.find(p=>p.id===d);if(m){const p=document.createElement("img");p.id=d,p.classList.add(0===d.indexOf("af")?"qv_full_a_img":0===d.indexOf("f")?"qv_full_img":"qv_img"),p.crossOrigin="anonymous",p.style.cssText=null!==(o=m.cssStyle)&&void 0!==o?o:"";let b=Me.G.generateIdRequired(10),y=this.cdnService.getRawCdnLink(m.link);this.loadingManager.set(b,y),p.onload=()=>{this.loadingManager.delete(b)},p.onerror=()=>{this.loadingManager.delete(b)},p.src=y,r=r.replace(u,p.outerHTML)}}}return r}}var jn=A(44823),oe=A(94358),Be=A(2197);class Wn extends Ft.N{constructor(a,e,i,o,s,r,l,c,u,d){var m;super(),this.cdnService=a,this.commonService=e,this.callBack=i,this.apiCallbackCache=o,this.editor=s,this.onError=r,this.loadedQuestIds=l,this.apiDataCache=c,this.matrixData=u,this.discoveryService=d,this.getOne=!1,this.trans={err_empty_quest:""},this.trans.err_empty_quest=null!==(m=this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_cau_hoi_tu_ngan_hang"))&&void 0!==m?m:""}getSimilar(a,e,i){var o;let s={text:a,maxRate:.99},r=Me.G.generateIdRequired(10);return this.loadingManager.set(r,a),null===(o=this.discoveryService)||void 0===o||o.apiDiscoveryQuestionsInfoPost(s).subscribe(l=>{let c=[];1===l.success&&l.data&&l.data.objs&&l.data.objs.length>0&&(c=l.data.objs),this.apiCallbackCache=new Map;let u=0;for(let d of c){let m={i:u,call:this.callBack,err:this.onError};u++;let p=this.apiCallbackCache.get(r);p?p.push(m):this.apiCallbackCache.set(r,[m])}0==c.length&&this.onError&&this.onError("NO_DATA"),setTimeout(()=>{this.processApiResponse(c,r,!1)},400),this.loadingManager.delete(r)}),"Loading...|0"}render(a,e,i){var o,s,r,l;let c=a.split("<br>")[0].trim(),u=c.split("=>"),d=u.length>1?+u[1].split("-")[1]:0,m=u.length>1?+u[1].split("-")[0]:0;if(!this.callBack||!/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])+$/.test(u[0].trim())&&!/^\[@Q[\-\d]+:[^\]]+\](\s*,\s*\[@Q[\-\d]+:[^\]]+\])*$/.test(u[0].trim()))return a;let y=u[0]+"=>"+m,C=oe.Utils.parseInclude(c);if(this.apiDataCache){let R=this.apiDataCache.get(c);if(R&&this.callBack)return setTimeout(()=>{R&&this.callBack&&this.callBack(R)},50),"Loading...|"+C.questId.join(",")}if(this.apiCallbackCache){let q={i:d,call:this.callBack,err:this.onError},R=this.apiCallbackCache.get(y);if(R)return R.push(q),"Loading...|"+C.questId.join(",");this.apiCallbackCache.set(y,[q])}let I=this.loadedQuestIds&&0==C.questId.length?this.loadedQuestIds:[],D=!1;0==C.getNum&&C.groupId.length>0&&(D=!0,C.getNum=1,I=C.questId.length>0?I:[]),this.getOne&&C.getNum&&C.getNum>1&&(C.getNum=1);let U=Me.G.generateIdRequired(10),B=null===(o=this.matrixData)||void 0===o?void 0:o.filter(q=>q.key==y)[0];if(B)setTimeout(()=>{var q;this.processApiResponse(null!==(q=B?.questions)&&void 0!==q?q:[],y,D)},400);else{this.loadingManager.set(U,c);let q={exceptQuestionIds:I,matrix:[]};null===(s=q.matrix)||void 0===s||s.push({number:C.getNum,key:y,paths:C.paths.map(Q=>({type:Q.type,id:Q.id,groupIds:Q.groupIds,tags:Q.tags,answerTypes:Q.answerTypes}))});let et=null!==(l=null===(r=q.matrix)||void 0===r?void 0:r.filter(Q=>{var V,Y;return null!==(Y=null===(V=Q.paths)||void 0===V?void 0:V.filter(at=>"KNOWLEDGE"==at.type).length)&&void 0!==Y&&Y}).length)&&void 0!==l&&l?i?.apiQuestionsMatrixGlobalPost(q):i?.apiQuestionsMatrixPost(q);et&&et.subscribe(Q=>{let V=[];1===Q.success&&Q.data&&Q.data[0]&&Q.data[0].questions&&Q.data[0].questions.length>0&&(V=Q.data[0].questions),setTimeout(()=>{this.processApiResponse(V,y,D)},400),this.loadingManager.delete(U)})}return"Loading...|"+C.questId}setGetOne(a){this.getOne=a}processApiResponse(a,e,i){var o,s,r,l,c,u,d,m;let p=a??[],b=null===(o=this.apiCallbackCache)||void 0===o?void 0:o.get(e);if(b)for(const y of b){let C=this.getOne?0:y.i;if(p.length<=C){y.err&&y.err(this.trans.err_empty_quest);continue}let I=p[C];const D=this.commonService.willDeleteParseJson(null!==(s=I.content)&&void 0!==s?s:"[]"),U={type:"bank",sourceId:I.id};if(D&&D.length>0&&D[0].vMetaEditor&&(U.heightLabel=D[0].vMetaEditor.heightLabel),i){let R=this.commonService.willDeleteParseJson(I.content||"[]"),et="",Q={renderedStr:et,label:"",quest:{label:0,isGroup:!0,parts:[],answers:[]},answers:[],isFixGroup:"1"===I.groupType,meta:U};if(1==I.isImage&&R[0].groupUrl){let V=Me.G.generateIdRequired(10);this.loadingManager.set(V,R[0].groupUrl),this.loadImage(R[0].groupUrl,this.cdnService).then(Y=>{var at;const tt=document.createElement("canvas");tt.width=Y.width,tt.height=Y.height,null===(at=tt.getContext("2d"))||void 0===at||at.drawImage(Y,0,0,Y.width,Y.height);const rt=document.createElement("img");rt.src=tt.toDataURL(),rt.classList.add("qv_img-group-content"),Q.renderedStr=rt.outerHTML,y.call(Q),this.loadingManager.delete(V)}).catch(Y=>{Q.renderedStr="Load image error",y.call(Q),this.loadingManager.delete(V)})}else et=null!==(r=R[0].groupContent)&&void 0!==r?r:"",Q.renderedStr=et,y.call(Q);this.apiDataCache&&this.apiDataCache.set(e+"-"+y.i,Q);continue}let B=4==I.answerType&&I.answerResult?this.commonService.willDeleteParseJson(I.answerResult):[],q="text";if(1===I.isImage&&(q=this.commonService.willDeleteParseJson(I.content||"")[0].url?"image":q),"image"===q){let R=this.commonService.willDeleteParseJson(I.content||""),et=R[0].metaData,Q={renderedStr:"",label:"",attachments:I.attachments,quest:{isFixAns:1==I.isFixAns,label:0,parts:[],answers:et&&et.answers?et.answers.map(Y=>{var at;return{label:Y.label,isCorrect:-1!==(null===(at=I.answerResult)||void 0===at?void 0:at.indexOf(Y.label)),parts:[]}}):(null!==(c=this.commonService.willDeleteParseJson(null!==(l=I.answerConfig)&&void 0!==l?l:"").answer)&&void 0!==c?c:[]).map(Y=>{var at;return{label:Y,isCorrect:-1!==(null===(at=I.answerResult)||void 0===at?void 0:at.indexOf(Y)),parts:[]}})},strAns:B.length>0?B:void 0,answers:[],v:et?"pdf-2-0":"pdf-1-0",id:I.id,meta:U};Q.originCorrectAns=null===(u=Q.quest.answers.find(Y=>Y.isCorrect))||void 0===u?void 0:u.label,I.tags&&(Q.tag=I.tags.map(Y=>({id:Y.id,code:Y.code,viName:Y.viName,enName:Y.enName})));let V=Me.G.generateIdRequired(10);this.loadingManager.set(V,R[0].url),this.loadImage(R[0].url,this.cdnService).then(Y=>{this.processImageQuestion(Y,R,Q),I.answerMedia?this.loadImageToBase64(I.answerMedia,this.cdnService).then(at=>{Q.helpRenderedStr=at,y.call(Q)}):y.call(Q),this.apiDataCache&&this.apiDataCache.set(e+"-"+y.i,Q),this.loadingManager.delete(V)}).catch(Y=>{Q.renderedStr="Load image error",y.call(Q),this.loadingManager.delete(V)})}else{let R=this.commonService.willDeleteParseJson(I.content||"[]"),et=this.commonService.willDeleteParseJson(I.answerConfig||"[]"),Q={renderedStr:"",label:"",attachments:I.attachments,quest:{isFixAns:1==I.isFixAns,label:0,parts:[],answers:et?et.map(V=>{var Y;return{label:V.key,isCorrect:-1!==(null===(Y=I.answerResult)||void 0===Y?void 0:Y.indexOf(V.key)),parts:[]}}):[]},strAns:B.length>0?B:void 0,answers:[],v:"docx",id:I.id,meta:U};Q.originCorrectAns=null===(d=Q.quest.answers.find(V=>V.isCorrect))||void 0===d?void 0:d.label,R.length>0&&(Q.renderedStr=R[0].content),I.answerMedia&&(Q.helpRenderedStr=I.answerMedia),I.tags&&(Q.tag=I.tags.map(V=>({id:V.id,code:V.code,viName:V.viName,enName:V.enName}))),Q.answers=Q.quest.answers.map((V,Y)=>({renderedStr:et[Y].content,ans:V})),this.apiDataCache&&this.apiDataCache.set(e+"-"+y.i,Q),y.call(Q)}}null===(m=this.apiCallbackCache)||void 0===m||m.delete(e)}setCallback(a){this.callBack=a}setApiCache(a){this.apiCallbackCache=a}processImageQuestion(a,e,i){const o=e[0].metaData;if(o){const s={x:0,y:0,w:o.question.width,h:o.question.height};let r=o.question.height;o.answers&&o.answers.forEach((c,u)=>{let d="";if(1!==c.width||1!==c.height){const m=this.cropImageWithPos({x:c.x,y:c.y,w:c.width,h:c.height},{x:c.remove.x,y:c.remove.y,w:c.remove.width,h:c.remove.height},a);m.classList.add("qv_ats_image"),r>c.y&&(s.h=c.y,r=c.y),d=m.outerHTML}i.answers.push({renderedStr:d,ans:i.quest.answers[u]})}),s.h<5&&(s.h=1,s.h=1);const l=this.cropImageWithPos(s,{x:o.question.remove.x,y:o.question.remove.y,w:o.question.remove.width,h:o.question.remove.height},a,!0);l.classList.add("qv_qts_image"),i.renderedStr=l.outerHTML,i.meta&&(i.meta.heightLabel=this.calculateHeightLabel(a,o.question.remove))}else i.renderedStr=a.outerHTML}cropImageWithPos(a,e,i,o,s){const r=document.createElement("canvas");r.width=a.w,r.height=a.h;const l=r.getContext("2d"),c=document.createElement("img");l?.drawImage(i,a.x,a.y,a.w,a.h,0,0,a.w,a.h),l&&(l.fillStyle="#fff"),l?.fillRect(e.x-a.x,e.y-a.y,e.w,e.h);const d=Be.rj.cropCanvas(r,void 0);return s?d:(c.src=d.toDataURL(),c.style.width=d.width*this.ratioImage+"px",c)}calculateHeightLabel(a,e){return this.cropImageWithPos({x:e.x,y:e.y,w:e.width,h:e.height},{x:0,y:0,w:0,h:0},a,!1,!0).height}}class yi extends Ft.N{constructor(a){super(),this.mathMap=a}render(a,e,i){let o=a,r=o.matchAll(/\[!m:\$(([^\]]|[^\$]\])+)\$\]/g);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],u=l.value[1],d=this.mathMap.get(u),m="";const p=document.createElement("span");p.classList.add("tex2jax_process"),p.classList.add("azt-mathml"),p.id=u,d&&(p.innerHTML=d.str,d.raw&&p.setAttribute("data-azt-math-raw",d.raw)),m=p.outerHTML,o=o.replace(c,m)}return o}}class he extends Ft.N{render(a,e,i){let o=this.bypassChild(a);return o=o.replaceAll(/\\\)\s*\\\(/g,""),o}bypassChild(a,e="\\(",i="\\)"){if(e.length!==i.length)return"";const o=[];let s=0;for(;;){let c=a.indexOf(e,s);if(-1===c)break;o.push("s_"+c),s=c+1}for(s=0;;){let c=a.indexOf(i,s);if(-1===c)break;o.push("e_"+c),s=c+1}o.sort(function(c,u){return parseInt(c.substr(2))-parseInt(u.substring(2))});let r=[];const l=[];return o.forEach(c=>{if("s"===c.substring(0,1))r.push(parseInt(c.substring(2)));else if(1==r.length)r=[];else{let u=r.pop();if(u){let d=parseInt(c.substring(2));l.push(u),l.push(d)}}}),l.sort(function(c,u){return c-u}).reverse().forEach(c=>{a=a.substring(0,c)+a.substring(c+e.length)}),a}}class $t extends Ft.N{render(a){let e=a,i=e.split("<br>"),o=0,s=/\[![!aibucsbphl]+:!!\]/;for(let c of i){if(s.test(c)){let d=c.split(":!!]")[0].split("["),m=d[d.length-1].split(":")[0];i[o]=c.startsWith("[*")?"[* ["+m+":$"+c.replace(s,"$]").substring(2):"["+m+":$"+c.replace(s,"$]")}o++}e=i.join("<br>"),e=e.replaceAll(/\[![!aibucsbphl]+:\$\$\]/g,"");let l=e.matchAll(/\[![!aibucsbphl]+:\$(([^\$]|\$[^\]])+)\$\]/g);for(;;){let c=l.next();if(c.done)break;let u=c.value[0],d=c.value[1],m=u.split(":")[0].split("!");m.shift(),m.filter(p=>"a"==p).length>0&&(d=d.toUpperCase());for(let p=m.length-1;p>=0;p--){let b=m[p];d="hl"==b?d:`<${b}>${d}</${b}>`}e=e.replace(u,d)}return e}}class Ie extends Ft.N{render(a,e,i){let o=a,s=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let r of s)o=o.replaceAll(r[0],r[1]);return o}}class Vt extends Ft.N{render(a,e,i){let s=a.split("<br>"),r=[],l=[];for(let c of s)if(c.trim().startsWith("[*")&&c.trim().endsWith("*]")){let u=c.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");u=u.replaceAll("|","</td><td>"),l.push(u)}else l.length>0&&(r.push('<table class="q-table">'+l.join("")+"</table>"),l=[]),r.push(c.replaceAll("\\n","<br>"));return l.length>0&&r.push('<table class="q-table">'+l.join("")+"</table>"),r.join("<br>")}}class be extends Ft.N{render(a,e,i){let o=a,r=o.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let u=r.next();if(u.done)break;let d=u.value[0],p=d.substring(1,d.length-1).split(":");2==p[0].length&&(p[0]=p[0].substring(1)),o=o.replace(d,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${p[1]} <span style='position: absolute;top: 20px;left: 45%;'>${p[0]}</span></span>`)}return o}revert(a,e){let i=a;return i=i.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),i=i.replace("["+e+":","[*"+e+":"),i}}let Gt=(()=>{class n{}return n.EXAM_FULL=["Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. (VDC) T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\n------H\u1ebeT------\nB\u1ea2NG \u0110\xc1P \xc1N\n1A 2B 3C\nH\u01b0\u1edbng d\u1eabn gi\u1ea3i\nC\xe2u 1 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nC\xe2u 2 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nC\xe2u 3 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nC\xe2u 4 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1.(VD) Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nCh\u1ecdn C\n\nC\xe2u 2.(NB) N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nCh\u1ecdn A\n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nCh\u1ecdn C\n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\n\nQuestion 5. The apple ___ the table.\n\nANSWER KEYS\n1b 2d 3a 4b\n5. on | On | ON","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c."],n.EXAM_FULL_EN=["Question 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Part 1. Answer from 1 - 2\nQuestion 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nPart 2. Answer from 2 - 4\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\nANSWER KEYS\n1b 2d 3a 4b","Question 1.I used to __________ in Germany when I was 7.\n*A. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \n*B. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \n*C. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \n*D. to clean\n------THE END------\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4"],n})();var t=A(94650),le=A(15043);let Ln=(()=>{class n{constructor(e){this.cdnService=e}renderContent(e){const i=JSON.parse(e.questionContent||"{}");if("image"==(e.isImage&&i[0].url?"image":"text"))return`<img width="700" src="${this.cdnService.getRawCdnLink(i[0].url)}">`;{const s=/@\[\][^@\[\]]+@\[\]/g;let r=`<p>${i[0].content.replace(s,"[h\xecnh]")}</p>`;return JSON.parse(e.answerConfig||"[]").forEach(c=>{r+=`<p><b>${c.key}.</b>${c.content.replace(s,"[h\xecnh]")}</p>`}),r}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(le.U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$e=(()=>{class n{static generate(e){const i=n._DEFAULT;if(void 0!==e)for(const o in i)Object.hasOwnProperty.call(i,o)&&Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=e[o]);return i}}return n._DEFAULT={is_select_cell:!0,is_select_row:!0},n})();class Ce{constructor(a,e,i,o,s,r,l){this.commonService=a,this.noteAction=e,this.questionService=i,this.callbackOnChange=l,this.name="table_matrix",this.class_active="select",this.first_matrix=null,this.last_matrix=null,this.max_row=0,this.max_col=0,this.menuElement=null,this.list=[],this.menuMode=[],this.lstNode=[],this.isErrSum=!1,this.statusDisable=!1,this.table__main=o,this.table__element=s,this.option=r,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1,this.list=[],this.startAddEvent(),this.setupMenuMode(),window.addEventListener("mouseup",()=>{this.endCheck()})}get isErrNumPos(){return this.lstNode.filter(a=>a.content.filter(e=>e.isErr).length>0).length>0}setDisable(a){this.statusDisable=a,this.reBuild()}pushNode(a){return a=Object.assign({},a),new Promise(e=>{if(this.statusDisable)e();else{const i=this.pushTrElement(a);i&&this.reqCheck(i).then(()=>{e()})}})}getResult(){return this.lstNode.length>0?this.lstNode.map(a=>(a.content=a.content.map(e=>Object.assign(Object.assign({},e),{value:"POS"===e.indexName?e.value.replace("&nbsp;","").trim().toUpperCase():this.getResultOfString(e.value)})),a)):[]}resetAndPushList(a){return new Promise(e=>{this.lstNode=a.map(o=>{if("knowledge"===o.obj.type&&o.obj.item.endsWith(")")&&(o.obj.item=o.obj.item.substring(0,o.obj.item.lastIndexOf("(")),o.obj.prNode&&o.obj.prNode.item.endsWith(")")&&(o.obj.prNode.item=o.obj.prNode.item.substring(0,o.obj.prNode.item.lastIndexOf("(")))),o.content.length!==this.colName().length){const s=this.colName();let r=o.content.map(l=>l.indexName);s.forEach((l,c)=>{r.includes(l)||o.content.unshift(this.createEmptyContentWithName(c,o.content[0].id))}),o.content=o.content.map(l=>Object.assign(Object.assign({},l),{index:this.colNameToIndex(l.indexName)}))}return o.content=o.content.map(s=>(s.totalTL=0,s.totalTN=0,s.tempTotalTL=0,s.tempTotalTN=0,s)),o});const i=new X.Q(2);this.lstNode.forEach(o=>{i.addTask(this,this.reqCheck,[o])}),i.start().then(()=>{this.lstNode.forEach(o=>{o.content.forEach(s=>{s.mergeId.length>0&&(s.tempTotalTL=s.totalTL,s.tempTotalTN=s.totalTN,s.mergeId.forEach(r=>{const l=this.lstNode.findIndex(c=>c.index===r);-1!==l&&this.lstNode[l].content[s.index]&&(s.totalTL+=this.lstNode[l].content[s.index].totalTL,s.totalTN+=this.lstNode[l].content[s.index].totalTN)}))})}),this.reBuild(),e()})})}getSumQuestion(){let a=0;return this.lstNode.forEach(e=>{const i=this.sumParamOfColName(e.content,"SOCH_TL"),o=this.sumParamOfColName(e.content,"SOCH_TN");a+=i+o}),a}sumParamOfColName(a,e){const i={SOCH_TN:0,SOCH_TL:0,TGP:0};return a.forEach(o=>{var s,r,l;o.indexName.indexOf("SOCH")>0&&(-1!==o.value.toUpperCase().indexOf("TL")?i.SOCH_TL+=null!==(s=Ce.selectNumberOfString(o.value))&&void 0!==s?s:0:i.SOCH_TN+=null!==(r=Ce.selectNumberOfString(o.value))&&void 0!==r?r:0),o.indexName.indexOf("TGP")>0&&(i.TGP+=null!==(l=Ce.selectNumberOfString(o.value))&&void 0!==l?l:0)}),i[e]}reqCheck(a){return new Promise(e=>{var i;let o,s,r;"test"===a.obj.type&&(s=a.obj.id.toString(),a.obj.shareType=a.obj.prNode?a.obj.prNode.shareType:void 0),"cate"===a.obj.type&&(o=a.obj.id.toString(),"-1"===o&&(a.obj.shareType="user")),"knowledge"===a.obj.type&&(r=a.obj.id.toString());let l=null!==(i=this.commonService.myTranslateInstant("lang_auto_don_vi"))&&void 0!==i?i:"",c=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_hoi_duoc_gan_nhan");this.questionService.apiQuestionsSummarizeTagsTypesGet(o,s,void 0,void 0,a.obj.shareType,r).subscribe(u=>{var d;a.disLoading=!0,1===u.success&&u.data?0===u.data.reduce((p,b)=>{var y;return p+(null!==(y=b.total)&&void 0!==y?y:0)},0)?(a.obj.item=null!==(d=this.commonService.myTranslateInstant(a.obj.item))&&void 0!==d?d:"",this.noteAction(l+': "'+a.obj.item+'":'+c,!0),a.content.forEach(p=>{p.disabled=!0})):a.content.forEach(p=>{var b,y,C,I,D;const U=null===(b=u.data)||void 0===b?void 0:b.map(R=>{var et;return{answerType:R.answerType,tags:null===(et=R.tags)||void 0===et?void 0:et.filter(Q=>Q.code==p.indexName.split("_")[0])}}),B=U?.find(R=>3===R.answerType),q=U?.find(R=>1===R.answerType||4===R.answerType);p.totalTL=null!==(C=null===(y=B?.tags)||void 0===y?void 0:y.reduce((R,et)=>{var Q;return R+(null!==(Q=et.total)&&void 0!==Q?Q:0)},0))&&void 0!==C?C:0,p.totalTN=null!==(D=null===(I=q?.tags)||void 0===I?void 0:I.reduce((R,et)=>{var Q;return R+(null!==(Q=et.total)&&void 0!==Q?Q:0)},0))&&void 0!==D?D:0}):(this.noteAction(l+': "'+a.obj.item+'":'+c,!0),a.content.forEach(m=>{m.disabled=!0})),this.reBuild(),e()})})}getResultOfString(a){a=a.replace("&nbsp;","").trim().toUpperCase();let e=!1;const i=Ce.selectNumberOfString(a);return i?(["TN","TL"].forEach(o=>{-1!==a.indexOf(o)&&(e=!0,a=i.toString()+o)}),e?a:i.toString()):""}pushChangeEvent(){this.callbackOnChange&&this.callbackOnChange(this.lstNode)}startAddEvent(){if(this.getMatrixTable(),this.statusDisable)return;const a=c=>{this.startCheck(c)},e=c=>(c.preventDefault(),this.startRightCheck(c),!1),i=c=>{this.flag&&(c.preventDefault(),this.moveCheck(c.target))},o=c=>{this.validateInput(c)},s=c=>{this.checkHotKey(c)},r=c=>{this.checkHotKeyEnd(c)};for(let c=0;c<this.max_row;c++)for(let u=0;u<this.max_col;u++){const d=this.getElWithMatrix(u,c);d&&d.classList.contains("edit-item-tb")&&(d.setAttribute("row_index",c.toString()),d.setAttribute("col_index",u.toString()),d.addEventListener("mousedown",a),d.addEventListener("contextmenu",e,!1),d.addEventListener("mouseover",i),d.addEventListener("input",o),d.addEventListener("keydown",s),d.addEventListener("keyup",r))}const l=document.getElementsByClassName("tb-matrix-editor-trash-node");for(let c=0;c<l.length;c++){const u=l[c];u.addEventListener("click",()=>{const d=this.getNodeWithElement(u);if(d){if(d.isMergeCate){const m=this.getRootMerge(d,"Cate");m&&m.numMergeCate--}else if(d.numMergeCate>1){const m=this.lstNode[this.lstNode.indexOf(d)+1];m&&(m.isMergeCate=!1,m.numMergeCate=d.numMergeCate-1)}d.content.forEach(m=>{if(m.isMerge){const p=this.findContentRootOfMerge(m,d.index);p&&p.mergeId.splice(p.mergeId.indexOf(d.index),1)}else if(m.mergeId.length>0){const p=this.findContentNextMerge(m);p&&(m.mergeId.splice(0,1),p.isMerge=!1,p.mergeId=m.mergeId)}}),this.lstNode.splice(this.lstNode.indexOf(d),1)}this.reBuild()})}}findContentRootOfMerge(a,e){let i;return this.lstNode.forEach(o=>{o.content.forEach(s=>{s.index==a.index&&s.mergeId.includes(e)&&(i=s)})}),i}findContentNextMerge(a){const e=this.lstNode.find(i=>i.index==a.mergeId[0]);if(e&&e.content[a.index])return e.content[a.index]}checkHotKeyEnd(a){return 16===a.keyCode&&(a.preventDefault(),this.list.length>1&&this.openMenu("select")),!1}checkHotKey(a){const e=(s,r)=>{if(this.flag_shift&&r){const l=this.getElWithMatrix(s.cell,s.row);l&&(0===this.list.length&&this.checkList(a.target),this.checkList(l))}else this.removeAllList(),this.focusMatrix(s);return!1},i=0===this.list.length?a.target:this.list[this.list.length-1],o=this.getMatrixEl(i);return 40===a.keyCode?(a.preventDefault(),e(Object.assign(Object.assign({},o),{row:o.row+1}),this.option.is_select_row)):38===a.keyCode?(a.preventDefault(),e(Object.assign(Object.assign({},o),{row:o.row-i.rowSpan}),this.option.is_select_row)):37===a.keyCode?(a.preventDefault(),e({row:o.row-i.rowSpan+1,cell:o.cell-1},this.option.is_select_cell)):39===a.keyCode?(a.preventDefault(),e({row:o.row-i.rowSpan+1,cell:o.cell+1},this.option.is_select_cell)):13===a.keyCode?(a.preventDefault(),this.flag_un_merge?(this.startUnMergeAction(),!1):this.flag_merge?(this.startMergeAction(),!1):this.flag_shift?(this.startRightCheck(a),!1):e(Object.assign(Object.assign({},o),{row:o.row+1}),this.option.is_select_row)):(16===a.keyCode&&(a.preventDefault(),this.flag_shift=!0),!1)}focusMatrix(a){const e=this.getElWithMatrix(a.cell,a.row);e&&e.focus()}startRightCheck(a){const e=a.target;e.rowSpan>1&&(this.flag_right=!0,this.flag=!1,this.list=[e],this.openMenu("right"),this.flag_un_merge=!0)}startCheck(a){this.removeAllList(),this.flag=!0,this.checkList(a.target)}moveCheck(a){this.toggleCursor(!0),this.checkList(a)}endCheck(){this.flag_right||(this.toggleCursor(!1),this.flag=!1,this.stepMenu()||this.removeAllList())}checkList(a){0===this.list.length?this.first_matrix=this.getMatrixEl(a):this.last_matrix=this.getMatrixEl(a),this.getList(),this.loopList(),this.flag_merge=!0}removeAllList(){this.closeMenu(),this.removeSelectList(),this.first_matrix=null,this.last_matrix=null,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1}getMatrixEl(a){return{cell:Number(a.getAttribute("col_index")),row:Number(a.getAttribute("row_index"))}}getMatrixTable(){this.table__element.innerHTML=this.table__element.innerHTML,this.max_row=this.table__element.rows.length,this.max_col=16}getList(){if(this.removeSelectList(),this.first_matrix&&this.last_matrix){let a=0,e=0,i=0,o=0;this.first_matrix.cell<this.last_matrix.cell?(a=this.first_matrix.cell,e=this.last_matrix.cell):(a=this.last_matrix.cell,e=this.first_matrix.cell),this.first_matrix.row<this.last_matrix.row?(i=this.first_matrix.row,o=this.last_matrix.row):(i=this.last_matrix.row,o=this.first_matrix.row);for(let s=a;s<=e;s++)for(let r=i;r<=o;r++){let l=!1;this.option.is_select_cell&&this.option.is_select_row?l=!0:this.option.is_select_row?a===e&&(l=!0):i===o&&(l=!0),l?this.pushList(this.getElWithMatrix(s,r)):this.endCheck()}}else this.first_matrix&&this.pushList(this.getElWithMatrix(this.first_matrix.cell,this.first_matrix.row))}loopList(){this.list.forEach(a=>{a.classList.add(this.class_active)})}getElWithMatrix(a,e){var o,s,r,l,c,u,d,i=[];for(d=0;d<this.table__element.rows.length;d++)for(o=this.table__element.rows[d],u=0;u<o.cells.length;u++){for(s=o.cells[u],r=u;i[d]&&i[d][r];++r);for(l=r;l<r+s.colSpan;++l)for(c=d;c<d+s.rowSpan;++c)i[c]||(i[c]=[]),i[c][l]=!0;if(r<=a&&a<r+s.colSpan&&d<=e&&e<d+s.rowSpan)return s}}pushList(a){a&&this.list.push(a)}removeSelectList(){this.list.forEach(a=>{a.classList.remove(this.class_active)}),this.list=[]}toggleCursor(a){document.body.style.cursor=a?"crosshair":"auto"}setupMenuMode(){this.menuMode.push({id:"__merge",mode:"select",action:this.startMergeAction}),this.menuMode.push({id:"__un_merge",mode:"right",action:this.startUnMergeAction})}generateMenu(a){this.menuElement||(this.menuElement=document.getElementById("menu__excel_editor"),this.menuMode.forEach(e=>{var i;const o=document.getElementById((null===(i=this.menuElement)||void 0===i?void 0:i.id)+e.id);o&&o.addEventListener("click",s=>{e.action.call(this)})})),this.menuMode.forEach(e=>{var i;const o=document.getElementById((null===(i=this.menuElement)||void 0===i?void 0:i.id)+e.id);o&&(o.style.display=e.mode===a?"flex":"none")})}stepMenu(){return this.list.length>1&&(this.openMenu("select"),!0)}openMenu(a){if(this.list.length>0){this.generateMenu(a);const e=this.getPosWithParent(this.list[this.list.length-1]);this.menuElement&&(this.menuElement.style.top=e.top+Math.floor(e.height/2)+"px",this.menuElement.style.left=e.left+Math.floor(e.width/2)+"px",this.menuElement.style.display="block")}}closeMenu(){this.menuElement&&(this.menuElement.style.display="none")}getPosWithParent(a){const e=this.table__main.getBoundingClientRect(),i=a.getBoundingClientRect();return{top:i.top-e.top,left:i.left-e.left,width:i.width,height:i.height}}startMergeAction(){let a;var e,i;for(let s=0;s<this.list.length;s++){const r=this.list[s];if(r){const l=this.getNodeWithElement(r);if(l){const c=this.getContentOfNodeWithElement(r,l);c&&(0===s?(a=this.getMatrixEl(r),i=l,(e=c).tempTotalTL=e.totalTL,e.tempTotalTN=e.totalTN):r.parentElement&&e&&(e.mergeId.push(l.index),c.isMerge=!0,c.value=""))}}}let o=[];if(i&&e&&e.mergeId.length>0){const s=[i];e.mergeId.forEach(r=>{const l=this.getNodeWithIndex(r);l&&s.push(l)}),o=this.getLstNodeParent(s)}if(e&&o.length>0)for(let s=0;s<this.list.length;s++){const r=this.list[s];if(r){const l=this.getNodeWithElement(r);if(l&&o.filter(c=>c.obj.id===l.obj.id).length>0){const c=this.getContentOfNodeWithElement(r,l);c&&0!==s&&(e.totalTL+=c.totalTL,e.totalTN+=c.totalTN)}}}this.reBuild(),a&&this.focusMatrix(a)}startUnMergeAction(){const a=this.list[0],e=this.getMatrixEl(a),i=this.getNodeWithElement(a);if(i){const o=this.getContentOfNodeWithElement(a,i);o&&(o.totalTL=o.tempTotalTL,o.totalTN=o.tempTotalTN,o.mergeId.forEach(s=>{const r=this.lstNode.find(l=>l.index==s);if(r){const l=r.content[o.index];l&&(l.isMerge=!1)}}),o.mergeId=[])}this.reBuild(),this.focusMatrix(e)}getCellOfCNode(a,e){for(let i=0;i<this.table__element.rows.length;i++){const o=this.table__element.rows[i];if(o.getAttribute("data-index")===a.index)for(let s=0;s<o.cells.length;s++){const r=o.cells[s];if(r.getAttribute("data-index")===e.index.toString())return r}}}getNodeWithElement(a){if(a.parentElement&&"TR"==a.parentElement.tagName.toUpperCase()){const e=a.parentElement.getAttribute("data-index");if(e){const i=e;return this.lstNode.find(o=>o.index===i)}}}getNodeWithIndex(a){return this.lstNode.find(e=>e.index===a)}isChildWithMatrix(a,e){if(a.obj.prNode)for(var i=this.commonService.myClone(a.obj.prNode);i;){if(e.includes(i.id))return!0;i=i.prNode}return!1}getLstNodeParent(a){const e=[],i=[];return a.forEach(o=>{e.push(o.obj.id)}),a.forEach(o=>{this.isChildWithMatrix(o,e)||0===i.filter(s=>s.obj.id===o.obj.id).length&&i.push(o)}),i}getContentOfNodeWithElement(a,e){const i=a.getAttribute("data-index");if(i&&i?.length>0)return e.content[parseInt(i)]}selectNumberWithElement(a){return Ce.selectNumberOfString(a.innerText)}static selectNumberOfString(a){var e=a.replace(/([0-9]+)T/g,"$1");if(!isNaN(Number(e)))return Number(e);var i=a.replace(/([0-9]+)TL/g,"$1");if(!isNaN(Number(i)))return Number(i);var o=a.replace(/([0-9]+)TN/g,"$1");if(!isNaN(Number(o)))return Number(o);var s=a.replace(/([0-9]+)%/g,"$1");return isNaN(Number(s))?void 0:Number(s)}validateInput(a){var e,i,o,s,r,l;const c=a.target,d=this.getNodeWithElement(c)?.content.find(b=>b.indexName===c.getAttribute("data-name"));if(0===(null!==(e=c.getAttribute("data-name"))&&void 0!==e?e:"").indexOf("POS")&&(c.classList.remove("border-err"),c.classList.remove("common-warning-item")),0==c.innerText.length)return d&&0===(null!==(i=c.getAttribute("data-name"))&&void 0!==i?i:"").indexOf("POS")&&(d.isErr=!1),void this.pushValueWithElement(c);if(c.innerText=c.innerText.replace(/(\r\n|\n|\r)/gm,"").trim().toUpperCase(),-1!==(null!==(o=c.getAttribute("data-name"))&&void 0!==o?o:"").indexOf("_SOCH")&&(null==this.selectNumberWithElement(c)||c.innerText.includes(".")||c.innerText.includes(","))&&(c.innerHTML="&nbsp;",this.snackErrElement(c)),-1!==(null!==(s=c.getAttribute("data-name"))&&void 0!==s?s:"").indexOf("_TGP")&&isNaN(Number(c.innerText))&&(c.innerText.includes(".")||c.innerText.includes(","))&&(c.innerHTML="&nbsp;",this.snackErrElement(c)),0===(null!==(r=c.getAttribute("data-name"))&&void 0!==r?r:"").indexOf("DIEM")){let b=c.innerText.replace("%","");isNaN(Number(b))?(c.innerHTML="&nbsp;",this.snackErrElement(c)):c.innerText=b}if(0===(null!==(l=c.getAttribute("data-name"))&&void 0!==l?l:"").indexOf("POS")){const b=Number(c.getAttribute("data-total-input-number"));this.getNoteValidatePos(b,c.innerText,d).isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}""==c.innerText&&(c.innerHTML="&nbsp;");const m=window.getSelection(),p=document.createRange();m.removeAllRanges(),p.selectNodeContents(c),p.collapse(!1),m.addRange(p),c.focus(),this.pushValueWithElement(c)}pushValueWithElement(a){const e=this.getNodeWithElement(a);if(e){const i=this.getContentOfNodeWithElement(a,e);i&&(i.value=a.innerText+("DIEM"===i.indexName?"%":""),this.isNodeWarning(i)?a.classList.add(...this.getWarMsg(i).split(" ")):a.classList.remove("warning-item","wn-empty","wn-over-tn","wn-over-tl"))}this.sumAll()}sumAll(){let a=" ".repeat(this.colName().length).split("").map(()=>0);this.lstNode.forEach(s=>{s.content.forEach(r=>{var l;if(["SOCH_TN","SOCH_TL","TGP"].includes(r.indexName)){r.value=this.sumParamOfColName(s.content,r.indexName).toString();const c=this.getCellOfCNode(s,r);c&&(c.innerText=r.value)}void 0!==a[r.index]&&!r.isMerge&&0!==r.index&&(a[r.index]+=null!==(l=Ce.selectNumberOfString(r.value))&&void 0!==l?l:0)})});var e="";a.forEach((s,r)=>{r===a.length-1?(this.isErrSum=Number(s)>100,e+=`<td class="text-center">${s>0?s.toString()+"%":""}</td>`):e+=0===r?'<td class="text-center"></td>':`<td class="text-center">${s>0?s.toString():""}</td>`});const o=`<tr class="dis-item-tb"><td colspan="4" class="text-center">${this.commonService.myTranslateInstant("lang_auto_tong")}</td>${e}</tr>`;this.table__element.tFoot&&(this.table__element.tFoot.innerHTML=o),this.lstNode.forEach(s=>{s.content.forEach(r=>{if("POS"===r.indexName){let l=this.countTotalNumQuestRow(s);const c=document.getElementById(`total_input_number_${r.index}${r.id}`);if(c){c.classList.remove("border-err"),c.classList.remove("common-warning-item"),c.setAttribute("data-total-input-number",l.toString());let u=this.getNoteValidatePos(l,r.value,r);c.setAttribute("common-note-trans",u.str),u.isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}}})})}indexToColName(a){var e;return null!==(e=this.colName()[a])&&void 0!==e?e:""}colNameToIndex(a){return this.colName().findIndex(e=>e===a)}colName(){return["POS","NB_SOCH","NB_TGP","TH_SOCH","TH_TGP","VD_SOCH","VD_TGP","VDC_SOCH","VDC_TGP","SOCH_TN","SOCH_TL","TGP","DIEM"]}snackErrElement(a,e=!0){var i;let o=null!==(i=this.commonService.myTranslateInstant("lang_auto_du_lieu_nhap_vao_khong_hop_le"))&&void 0!==i?i:"";this.noteAction(o,!0),a.classList.add("border-err"),e&&setTimeout(()=>{a.classList.remove("border-err")},1200)}hiddenNoteEmpty(){if(0===this.lstNode.length){let a=this.commonService.myTranslateInstant("lang_auto_matrix_content_text");this.table__element.tBodies[0].innerHTML=`<tr class="text-center"><td colspan="16">${a}</td></tr>`}}getRootMerge(a,e){let i=this.lstNode.findIndex(o=>o.index===a.index);for(let o=i;o>=0;o--)if(!this.lstNode[o]["isMerge"+e])return this.lstNode[o];return a}createEmptyContentWithName(a,e){return{totalTL:0,totalTN:0,tempTotalTL:0,tempTotalTN:0,indexName:this.indexToColName(a),index:a,id:e,value:"&nbsp;",mergeId:[],isErr:!1}}pushTrElement(a){var e,i,o=!1;if(this.lstNode.length>0){const r=this.lstNode[this.lstNode.length-1];if(r.obj.id===a.id)return;const l=this.getRootMerge(r,"Cate");(o=(null===(e=r.obj.prNode)||void 0===e?void 0:e.id)===(null===(i=a.prNode)||void 0===i?void 0:i.id))&&l.numMergeCate++}const s={numMergeCate:1,isMergeCate:o,index:this.generateIdRequired(10),obj:a,content:" ".repeat(this.colName().length).split("").map((r,l)=>this.createEmptyContentWithName(l,a.id))};return this.lstNode.push(s),this.reBuild(),s}getNoteValidatePos(a,e,i){var o,s,r,l,c,u;let d={str:null!==(o=this.commonService.myTranslateInstant("lang_auto_validate_empty"))&&void 0!==o?o:"",isErr:!1};const m=null!==(s=this.commonService.myTranslateInstant("lang_auto_khong_qua"))&&void 0!==s?s:"",p=null!==(r=this.commonService.myTranslateInstant("lang_auto_du"))&&void 0!==r?r:"",b=e.replace("&nbsp;","").trim().toUpperCase();if(0===b.length)return i&&(i.isErr=!1),d;let y=b.split(",").map(C=>C.trim());if(!/^[C0-9,]+$/g.test(b)||b.includes(",,")||b.includes("CC")||y.length!==y.filter(C=>""!==C&&0!==Number(C)).length)return d.isErr=!0,i&&(i.isErr=!0),d.str=null!==(l=this.commonService.myTranslateInstant("lang_auto_validate_format"))&&void 0!==l?l:"",d;if(!d.isErr){if(0===y.length)return i&&(i.isErr=!1),d;y.forEach(C=>{var I;d.isErr=!/C([0-9]+)$/.test(C)&&!/([0-9]+)$/.test(C),d.isErr&&(d.str=null!==(I=this.commonService.myTranslateInstant("lang_auto_validate_format"))&&void 0!==I?I:"")})}if(!d.isErr){const C=[];y.forEach(D=>{var U;const B=Number(D.replace("C",""));C.includes(B)&&(d.isErr=!0,d.str=null!==(U=this.commonService.myTranslateInstant("lang_auto_validate_exits"))&&void 0!==U?U:""),C.push(B)});let I=!1;this.lstNode.map(D=>{var U;return null===(U=D.content.find(B=>"POS"===B.indexName&&B.id!==i?.id))||void 0===U?void 0:U.value.split(",").filter(B=>"&nbsp;"!==B).map(B=>Number(B.replace("C","")))}).forEach(D=>{D&&D.forEach(U=>{C.includes(U)&&(I=!0)})}),I&&(d.isErr=!0,d.str=null!==(c=this.commonService.myTranslateInstant("lang_auto_validate_exits"))&&void 0!==c?c:"")}return d.isErr||(d.isErr=y.length!==a,d.isErr&&(d.str=(null!==(u=this.commonService.myTranslateInstant("lang_auto_validate_number"))&&void 0!==u?u:"").replace("${2}",y.length.toString()).replace("${3}",y.length>a?m:p).replace("${1}",a.toString()))),i&&(i.isErr=y.length!==a),d}reBuild(){this.removeAllList();var a="";this.lstNode.forEach((e,i)=>{var o,s,r,l="";l+=`<td class="dis-item-tb text-center">${i+1}</td>`,!e.isMergeCate&&e.obj.prNode&&(e.obj.prNode.item=null!==(o=this.commonService.myTranslateInstant(e.obj.prNode.item))&&void 0!==o?o:"",l+=`<td rowSpan="${e.numMergeCate}" class="dis-item-tb text-center">${null!==(s=e.obj.prNode.item)&&void 0!==s?s:""}</td>`),e.obj.item=null!==(r=this.commonService.myTranslateInstant(e.obj.item))&&void 0!==r?r:"",l+=`<td class="dis-item-tb text-center" colSpan="${e.obj.prNode?1:2}">${e.obj.item}</td>`,l+='<td class="dis-item-tb text-center tb-matrix-editor-trash-node"><i class="fa fa-trash"></i></td>',e.content.forEach(c=>{var u,d,m,p,b,y,C,I;if(["SOCH_TN","SOCH_TL","TGP"].includes(c.indexName))l+=`<td data-index="${c.index}" class="dis-item-tb text-center">${c.value}</td>`;else if("POS"===c.indexName){let D=this.countTotalNumQuestRow(e),U=this.getNoteValidatePos(D,c.value,c);l+=`<td id="total_input_number_${c.index}${c.id}" data-total-input-number="${D}" col-name="${this.getNameCol(c.indexName)}" data-name="${c.indexName}" data-index="${c.index}" class="${this.isNoteEditTable(c)?"note-edit-item-tb":""} ${this.getWarMsg(c)} edit-item-tb text-center common-note-item" common-note-trans="${U.str}" ${this.statusDisable?"":'contenteditable="true"'} ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}>${c.value}</td>`}else if(!c.isMerge)if(e.disLoading){let D=null!==(u=this.commonService.myTranslateInstant("lang_auto_hien_co_trac_nghiem"))&&void 0!==u?u:"",U=null!==(d=this.commonService.myTranslateInstant("lang_auto_tu_luan"))&&void 0!==d?d:"",B=null!==(m=this.commonService.myTranslateInstant("lang_auto_khong_co_cau_hoi_nao"))&&void 0!==m?m:"",q=null!==(p=this.commonService.myTranslateInstant("lang_auto_khong_du_cau_hoi"))&&void 0!==p?p:"",R=q+" "+(null===(b=this.commonService.myTranslateInstant("lang_auto_cau_TL"))||void 0===b?void 0:b.toLowerCase()),et=q+" "+(null===(y=this.commonService.myTranslateInstant("lang_auto_trac_nghiem"))||void 0===y?void 0:y.toLowerCase());l+=`<td col-name="${this.getNameCol(c.indexName)}" num-tl="${null!==(C=c.totalTL)&&void 0!==C?C:0}" num-tn="${null!==(I=c.totalTN)&&void 0!==I?I:0}" data-name="${c.indexName}" first-trans="${D}" last-trans="${U}" over-question-trans-tl="${R}" over-question-trans-tn="${et}" empty-question-trans="${B}" data-index="${c.index}" class="${this.isNoteEditTable(c)?"note-edit-item-tb":""} ${this.getWarMsg(c)} edit-item-tb text-center ${c.value&&(c.value.includes(".")||c.value.includes(","))?"border-err":""}" ${this.statusDisable?"":'contenteditable="true"'} ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}>${c.value}</td>`}else l+=`<td data-name="${c.indexName}" data-index="${c.index}" class="text-center" ${c.mergeId.length>0?'rowSpan="'+(c.mergeId.length+1)+'"':""}><i class="fa fa-spinner fa-spin"></i></td>`}),a+=`<tr data-index="${e.index}">${l}</tr>`}),this.table__element.tBodies[0].innerHTML=a,this.sumAll(),this.startAddEvent(),this.hiddenNoteEmpty(),this.pushChangeEvent()}countTotalNumQuestRow(a){let e=0;return a.content.filter(i=>["SOCH_TN","SOCH_TL"].includes(i.indexName)).forEach(i=>{var o;e+=Number(null!==(o=i.value)&&void 0!==o?o:"0")}),e}isNodeWarning(a){var e;let i=!a.value.includes("TL");const o=null!==(e=Ce.selectNumberOfString(a.value))&&void 0!==e?e:0;return this.isNoteEditTable(a)&&(0===a.totalTL&&0===a.totalTN||i&&o>a.totalTN||!i&&o>a.totalTL||!a.totalTL&&!a.totalTN)}getWarMsg(a){var e;let i=!a.value.includes("TL");const o=null!==(e=Ce.selectNumberOfString(a.value))&&void 0!==e?e:0;if(this.isNoteEditTable(a)){if(0===a.totalTL&&0===a.totalTN||!a.totalTL&&!a.totalTN)return"warning-item wn-empty";if(i&&o>a.totalTN)return"warning-item wn-over-tn";if(!i&&o>a.totalTL)return"warning-item wn-over-tl"}return""}isNoteEditTable(a){return a.indexName.includes("SOCH")&&a.indexName.indexOf("SOCH")>0}getNameCol(a){var e,i,o,s;let r=null!==(e=this.commonService.myTranslateInstant("lang_auto_nhan_biet"))&&void 0!==e?e:"",l=null!==(i=this.commonService.myTranslateInstant("lang_auto_thong_hieu"))&&void 0!==i?i:"",c=null!==(o=this.commonService.myTranslateInstant("lang_auto_van_dung"))&&void 0!==o?o:"",u=null!==(s=this.commonService.myTranslateInstant("lang_auto_van_dung_cao"))&&void 0!==s?s:"";return 0===a.indexOf("NB")?r:0===a.indexOf("TH")?l:0===a.indexOf("VDC")?c:0===a.indexOf("VD")?u:""}generateIdRequired(a){let e="";const i="abcdefghijklmnopqrstuvwxyz0123456789",o=i.length;for(let s=0;s<a;s++)e+=i.charAt(Math.floor(Math.random()*o));return Math.floor(Date.now()/1e3)+e}}var On=A(92340),Zn=A(76056),si=A(81896),Qe=A(51009);let Ka=(()=>{class n{constructor(e,i,o){this.baseApiService=e,this.gzipHelper=i,this.commonService=o,this.apiLink=On.N.print_api+"/convert_img"}convertAction(e){return new Promise((i,o)=>{this.baseApiService.commonHttp(this.apiLink,{"Content-Type":"application/json"},e).subscribe(s=>{s&&s.success?i({id:e.id,base64:s.data}):o(new Error("No load image out"))})})}convertImageService(e){return new Promise((i,o)=>{const s=new X.Q(10);e.forEach(r=>{s.addTask(this,this.convertAction,[r])}),s.start().then(r=>{0==r.errs.length?i(r.datas):o(new Error("L\u1ed7i convert"))})})}pushRankToMatrixBeauty(e,i,o){let s=e.ranks.find(r=>r.name===i);s?s.numQuest+=o:e.ranks.push({name:i,numQuest:o})}makeBeautyMatrixObj(e){var i,o;const s={id:e.id,name:null!==(i=e.name)&&void 0!==i?i:"",numberQuest:0,ranks:[],knowledge:[]};let r=this.gzipHelper.resultContentSupport(null!==(o=e.content)&&void 0!==o?o:"");const l=this.commonService.castJsonToObj(r);return l&&l.forEach(c=>{var u,d,m,p,b,y,C,I;const D=c.content.find(Q=>"NB_SOCH"===Q.indexName);D&&this.pushRankToMatrixBeauty(s,null!==(u=this.commonService.myTranslateInstant("azt_lang_tag_NB"))&&void 0!==u?u:"NB",null!==(d=Ce.selectNumberOfString(D.value))&&void 0!==d?d:0);const U=c.content.find(Q=>"TH_SOCH"===Q.indexName);U&&this.pushRankToMatrixBeauty(s,null!==(m=this.commonService.myTranslateInstant("azt_lang_tag_TH"))&&void 0!==m?m:"TH",null!==(p=Ce.selectNumberOfString(U.value))&&void 0!==p?p:0);const B=c.content.find(Q=>"VD_SOCH"===Q.indexName);B&&this.pushRankToMatrixBeauty(s,null!==(b=this.commonService.myTranslateInstant("azt_lang_tag_VD"))&&void 0!==b?b:"VD",null!==(y=Ce.selectNumberOfString(B.value))&&void 0!==y?y:0);const q=c.content.find(Q=>"VDC_SOCH"===Q.indexName);q&&this.pushRankToMatrixBeauty(s,null!==(C=this.commonService.myTranslateInstant("azt_lang_tag_VDC"))&&void 0!==C?C:"VDC",null!==(I=Ce.selectNumberOfString(q.value))&&void 0!==I?I:0);const R=c.content.find(Q=>"SOCH_TN"===Q.indexName),et=c.content.find(Q=>"SOCH_TL"===Q.indexName);R&&et&&(isNaN(Number(R.value))||(s.numberQuest+=Number(R.value)),isNaN(Number(et.value))||(s.numberQuest+=Number(et.value))),c.obj.item.endsWith(")")&&(c.obj.item=c.obj.item.substring(0,c.obj.item.lastIndexOf("("))),s.knowledge.push(c.obj.item)}),s}getBeautyMatrixObjs(e){let i=[];return e.forEach(o=>{i.push(this.makeBeautyMatrixObj(o))}),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Zn._),t.LFG(si.n),t.LFG(Qe.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Do=A(45511),Bt=A(18752),Ps=A(28555),wi=A(34782);let Rn=(()=>{class n{constructor(e,i){this.browserStorageService=e,this.commonService=i,this.data={}}setMode(e){this.browserStorageService.saveSimpleStorage("__editor:mode_open",e)}getMode(){var e=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),e}setFileProcess(e){this.file=e}getFirstFile(){let e=this.file;return this.file=void 0,e}setOutputData(e){this.data=e}getOutputData(){return this.data}redirectToConfig(e){this.data.homework&&e.showHomework(),(this.data.exam||this.data.examOffline)&&e.showExam()}setMatrixData(e,i){i?this.matrix=e:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(e))}getMatrixData(){var e=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),e?this.commonService.castJsonToObj(e):this.matrix}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(wi.z),t.LFG(Qe.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var qn=A(88386);let Ui=(()=>{class n{constructor(e,i){this.commonService=e,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new X.Q(50,{function:(o,s)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(o,s)}}),this.taskUploadImage=new X.Q(3,{function:(o,s)=>{this.callbackUploadImage&&this.callbackUploadImage(o,s)}})}convertQuestions(e,i,o){return new Promise(s=>{this.reset(),e.forEach(r=>{var l,c,u,d;const m=this.commonService.willDeleteParseJson(r.answerConfig||"[]");!(null===(l=r.questionContent)||void 0===l)&&l.includes("<img ")&&this.replaceImageCdnInContent(r,"questionContent"),!(null===(c=r.questionText)||void 0===c)&&c.includes("<img ")&&this.replaceImageCdnInContent(r,"questionText"),!(null===(u=r.answerMedia)||void 0===u)&&u.includes("<img ")&&this.replaceImageCdnInContent(r,"answerMedia"),!(null===(d=r.mediaMeta)||void 0===d)&&d.includes("<img ")&&this.replaceImageCdnInContent(r,"mediaMeta"),m.forEach(p=>{p.content.includes("<img ")&&this.replaceImageCdnInContent(p,"content")}),this.actionRunAfterConvert.push(()=>{r.answerConfig=JSON.stringify(m)})}),this.imageMaps.forEach(r=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[r])}),this.taskConvertBase64ToCanvas.start().then(r=>{if(r.errs.length>0)o(r.errs,void 0);else{let c=0;const u=[],d=()=>{const m=document.createElement("canvas");m.width=this.sizeDefaultCanvas,m.height=this.sizeDefaultCanvas;const p=m.getContext("2d");p&&(p.fillStyle="white",p.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),u.push({cdn:"",cX:0,cY:0,canvas:m,imgs:[]})};d(),r.datas.forEach((m,p)=>{var b=u[u.length-1];b.cX+m.canvas.width+4>this.sizeDefaultCanvas?(b.cX=4,b.cY+=c+4,c=0):b.cX+=4,b.cY+m.canvas.height>this.sizeDefaultCanvas&&(d(),b=u[u.length-1]);var y=b.canvas.getContext("2d");b.imgs.push({x:b.cX,y:b.cY,width:m.canvas.width,height:m.canvas.height,index:p}),y?.drawImage(m.canvas,0,0,m.canvas.width,m.canvas.height,b.cX,b.cY,m.canvas.width,m.canvas.height),b.cX+=m.canvas.width,c=c<m.canvas.height?m.canvas.height:c}),u[0].imgs.length>0&&u.forEach(m=>{this.taskUploadImage.addTask(this,this.startUploadFile,[m])}),this.taskUploadImage.start().then(m=>{if(m.errs.length>0)o(r.errs,void 0);else{let p=!0;m.datas.forEach(b=>{b.imgs.forEach(y=>{const C=r.datas[y.index];if(C){const I={link:b.cdn,data:{x:y.x,y:y.y,width:y.width,height:y.height}};C.objs.forEach(D=>{if(D[C.path])if(this.commonService.isJson(D[C.path])){const B=this.commonService.willDeleteParseJson(D[C.path]);Object.prototype.hasOwnProperty.call(B,"renderedStr")?(B.renderedStr=B.renderedStr.replace(C.base,`@[]${JSON.stringify(I)}@[]`),D[C.path]=JSON.stringify(B)):D[C.path]=D[C.path].replace(C.base,`@[]${JSON.stringify(I)}@[]`)}else D[C.path]=D[C.path].replace(C.base,`@[]${JSON.stringify(I)}@[]`);else p=!1})}})}),p?(this.actionRunAfterConvert.forEach(b=>{b()}),e.forEach((b,y)=>{let C=this.commonService.willDeleteParseJson(b.mediaMeta||"{}"),I=i[y];const D={id:0,name:b.name,extension:"text",content:b.questionContent,groupContent:C.renderedStr,metaData:{isFixAns:Number(b.isFixAns),forcedFixAns:!1,groupType:b.groupType?Number(b.groupType):void 0}};I&&(D.vMetaEditor=I.meta),b.questionContent=JSON.stringify([D])}),s()):o(r.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(e,i){var o=e[i];if(this.commonService.isJson(e[i])){const l=this.commonService.willDeleteParseJson(e[i]);Object.prototype.hasOwnProperty.call(l,"renderedStr")&&(o=l.renderedStr)}let s=o.matchAll(this.pattern_image);for(;;){let l=s.next();if(l.done)break;let c=l.value[0];var r=this.imageMaps.findIndex(u=>u.base===c&&u.path===i);-1===r?this.imageMaps.push({base:c,cdn:"",data:null,objs:[e],path:i,canvas:document.createElement("canvas")}):this.imageMaps[r].objs.push(e)}}startConvertCanvas(e){return new Promise((i,o)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{let l=1;if(s.width>this.sizeDefaultCanvas&&(l=this.sizeDefaultCanvas/s.width),s.height>this.sizeDefaultCanvas){let u=this.sizeDefaultCanvas/s.height;u<l&&(l=u)}e.canvas.width=s.width*l,e.canvas.height=s.height*l,e.canvas.getContext("2d")?.drawImage(s,0,0,s.width,s.height,0,0,e.canvas.width,e.canvas.height),i(e)},s.onerror=()=>{o(new Error("l\u1ed7i load \u1ea3nh"))};let r=this.pattern_base64.exec(e.base);null!=r?s.src=r[0]:o(new Error("l\u1ed7i regex"))})}startUploadFile(e){return new Promise((i,o)=>{const s=this.dataURLtoFile(e.canvas.toDataURL("image/png",1));(0,ot.hv)(s).then(r=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(r).subscribe(l=>{var c;l.type!=K.dt.UploadProgress&&(1==l.success&&l.data?i(Object.assign(Object.assign({},e),{cdn:l.data.url||""})):o(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",null!==(c=l.message)&&void 0!==c?c:"none"))))})})})}dataURLtoFile(e){let i=this.getFileName(e);for(var o=e.split(","),s=o[0].match(/:(.*?);/),r=atob(o[1]),l=r.length,c=new Uint8Array(l);l--;)c[l]=r.charCodeAt(l);return new File([c],i,{type:s&&s.length>0?s[1]:"png"})}getFileName(e){var i=e.split("").reverse().join(""),o=i.indexOf(";"),s=i.indexOf("/",o);return i.substring(o,s).split("").reverse().join("")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v),t.LFG(Do.$))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ya=A(42247);const Nr=["popupConfirm"],to=["mobileEditor"],ki=["popupOnlyImageEditor"];function Dr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.conf.showInfomationQuests.show=!0)}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"circle",31)(3,"line",32)(4,"line",33),t.qZA(),t.kcU(),t.TgZ(5,"span",34),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.Oqu(t.lcZ(7,1,"lang_auto_thong_tin_de_thi")))}function jr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.conf.showErrorsQuests.show=!0)}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",36)(3,"path",37)(4,"path",38)(5,"path",39),t.qZA(),t.kcU(),t.TgZ(6,"span",34),t._uU(7),t.ALo(8,"replace"),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(7),t.Oqu(t.Dn7(8,1,t.lcZ(9,5,"lang_auto_co_n_loi_khong_the_luu"),"_n_",e.errs.length.toString()))}}const Ga=function(n){return{height40:n}};function Cc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"span",42),t._UZ(3,"lucide-icon",43),t.qZA(),t.TgZ(4,"span",34),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"input",44),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.conf.inputMoveToQuestionValue=o)})("focus",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleSetStatusTooltipQuestionView(!0))})("focusout",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleSetStatusTooltipQuestionView(!1))}),t.qZA(),t.TgZ(8,"button",45),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.handleGotoQuestionView())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(9,Ga,!e.conf.inputMoveToQuestion)),t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_testbank_create_exam_width_file_pdf_go_to")),t.xp6(2),t.Q6J("ngModel",e.conf.inputMoveToQuestionValue)("min",1),t.xp6(2),t.Oqu(t.lcZ(10,7,"lang_auto_den"))}}function Ns(n,a){if(1&n&&(t.TgZ(0,"div",23),t._UZ(1,"div",24),t.TgZ(2,"div",25),t.YNc(3,Dr,8,3,"div",26),t.YNc(4,jr,10,7,"div",27),t.YNc(5,Cc,11,11,"div",28),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.lstQuest.length>0&&0==e.editQuestId),t.xp6(1),t.Q6J("ngIf",e.errs.length>0),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function qr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",55)(2,"button",56),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(4);return t.KtG(!!r.attachFiles&&r.attachFiles.splice(s,1))}),t.TgZ(3,"mat-icon",57),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"span",58),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.onShowFile(s,-1))}),t.TgZ(6,"span",59),t._uU(7),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(6),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function Ds(n,a){if(1&n&&(t.TgZ(0,"div",52)(1,"div",53),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,qr,8,2,"div",54),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_danh_sach_file_dinh_kem")+":"," "),t.xp6(2),t.Q6J("ngForOf",e.attachFiles)}}function Fr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",60)(1,"question-dropper",61),t.NdJ("onDropFile",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.onDropFile(o))}),t.qZA()()}}function pa(n,a){if(1&n&&(t.TgZ(0,"div",46)(1,"div",47)(2,"div",48),t._UZ(3,"div",49),t.ALo(4,"safeContentQuestion"),t.ALo(5,"mathJaxContent"),t.YNc(6,Ds,5,4,"div",50),t.YNc(7,Fr,2,0,"div",51),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,3,t.lcZ(5,5,e.text)),t.oJD),t.xp6(3),t.Q6J("ngIf",e.attachFiles.length>0),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function go(n,a){if(1&n&&(t.TgZ(0,"mat-icon",73),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t._uU(3," push_pin"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.s9C("matTooltip",e.isFixGroup?t.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):t.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function fo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",74)(1,"span",75),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.setFixGroup(o))}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"tieu_de_nhom")),t.xp6(3),t.AsE(" ",e.isFixGroup?t.lcZ(6,5,"lang_auto_bo_co_dinh"):t.lcZ(7,7,"lang_auto_co_dinh")," ",t.lcZ(8,9,"lang_auto_cau_trong_nhom"),"")}}function Wa(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",77)(1,"app-quest-header",78),t.NdJ("onChangeQuest",function(o){t.CHM(e);const s=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.onChangeQuest(o,s))})("onRandomQuest",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(2);return t.KtG(s.onRandomOne(o))})("onApplyAllTag",function(o){t.CHM(e);const s=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.onApplyAllTag(o,s))})("onError",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.commonService.snackError(o))})("onLabelClick",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.editorFocus(o))})("onHotKeyPointSync",function(o){t.CHM(e);const s=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.setPointBelow(o,s))})("onExtraInfo",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setExtra(o))})("onCut",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onCut(o))})("onDel",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onDel(o))})("onCopy",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.onCopy(o))}),t.qZA()()}if(2&n){const e=t.oxw(2),i=e.$implicit,o=e.index,s=t.oxw(2);t.xp6(1),t.Q6J("q",i)("notOnlyQuestEdit",!s.editQuestId)("index",o)("questionTags",s.questionTags)}}function Qr(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function Tc(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Qr,2,1,"span",82),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function ha(n,a){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Tc,2,1,"span",54),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an_dung")+":"),t.xp6(2),t.Q6J("ngForOf",e.quest.answers)}}function Ur(n,a){if(1&n&&(t.TgZ(0,"span",88),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function Ac(n,a){if(1&n&&(t.TgZ(0,"div",85)(1,"span",86),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Ur,2,1,"span",87),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an")+":"),t.xp6(2),t.Q6J("ngForOf",e.strAns)}}function Br(n,a){1&n&&(t.TgZ(0,"span",93),t._UZ(1,"div",94)(2,"div",95),t.qZA())}const Rr=function(n){return{"an-true":n}};function Sc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",89),t.YNc(1,Br,3,0,"span",90),t.TgZ(2,"div",91),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(4).$implicit,l=t.oxw(2);return t.KtG(l.setCorrectAns(r,s.ans))}),t.ALo(3,"mytranslate"),t._uU(4),t.qZA(),t.TgZ(5,"div",92),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(6);return t.KtG(r.editorFocus(s.ans.parts))}),t.ALo(6,"safeContentQuestion"),t.ALo(7,"mathJaxContent"),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(6);t.xp6(1),t.Q6J("ngIf",e.ans.isCorrect),t.xp6(1),t.s9C("matTooltip",i.showTooltip?t.lcZ(3,7,"lang_auto_cick_de_chon_lam_dap_an_dung"):void 0),t.Q6J("matTooltipPosition","right")("ngClass",t.VKq(13,Rr,e.ans.isCorrect)),t.xp6(2),t.hij(" ",e.ans.label,""),t.xp6(1),t.Q6J("innerHTML",t.lcZ(6,9,t.lcZ(7,11,e.renderedStr)),t.oJD)("ngClass",t.VKq(15,Rr,e.ans.isCorrect))}}function Oc(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ha,5,4,"div",82),t.YNc(2,Ac,5,4,"div",83),t.YNc(3,Sc,8,17,"div",84),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.Gre("box-ans quest-ans-ver-",e.v,""),t.xp6(1),t.Q6J("ngIf","pdf-1-0"==e.v),t.xp6(1),t.Q6J("ngIf",4==e.type&&e.strAns),t.xp6(1),t.Q6J("ngForOf",e.answers)}}const zr=function(n){return{"padding-mobile":n}};function ga(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",96)(1,"div",97)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",98),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw(2);return t.KtG(s.editorFocus(o.quest.help))}),t.ALo(6,"safeContentQuestion"),t.ALo(7,"mathJaxContent"),t.qZA()()}if(2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.Gre("box-help quest-help-ver-",e.v,""),t.Q6J("ngClass",t.VKq(12,zr,i.isMobile)),t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),t.xp6(2),t.Q6J("innerHTML",t.lcZ(6,8,t.lcZ(7,10,e.helpRenderedStr)),t.oJD)}}function Ec(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",79)(1,"div",80),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.editorFocus(o.quest.parts))}),t.ALo(2,"safeContentQuestion"),t.ALo(3,"mathJaxContent"),t.ALo(4,"removeBracket"),t.qZA(),t.YNc(5,Oc,4,6,"div",22),t.YNc(6,ga,8,14,"div",81),t.qZA()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Gre("tex2jax_process box-content quest-ver-",e.v,""),t.Q6J("innerHTML",t.lcZ(2,6,t.lcZ(3,8,t.lcZ(4,10,e.renderedStr))),t.oJD),t.xp6(4),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",e.helpRenderedStr)}}function Jr(n,a){if(1&n&&(t._UZ(0,"div",99),t.ALo(1,"safeContentQuestion")),2&n){const e=t.oxw(2).$implicit;t.Q6J("innerHTML",t.lcZ(1,1,e.err),t.oJD)}}function fa(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",100)(1,"button",101),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.showFeedbackQuestionDialog(o))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",102),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_bao_loi")))}function Mc(n,a){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,go,4,5,"mat-icon",65),t._UZ(2,"div",66),t.ALo(3,"safeContentQuestion"),t.YNc(4,fo,9,11,"div",67),t.YNc(5,Wa,2,4,"div",68),t.TgZ(6,"div",69)(7,"div"),t.YNc(8,Ec,7,12,"div",70),t.YNc(9,Jr,2,3,"div",71),t.qZA()(),t.YNc(10,fa,4,3,"div",72),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isFixGroup||e.quest.isFixAns),t.xp6(1),t.Q6J("innerHTML",t.lcZ(3,7,i.errorQuestionView.makeErr(e,i.lstQuest)),t.oJD),t.xp6(2),t.Q6J("ngIf",e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(3),t.Q6J("ngIf",!e.err),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(1),t.Q6J("ngIf",e.id&&"azota"==i.type)}}function Hr(n,a){1&n&&t._UZ(0,"div",103)}const Ic=function(n){return{height:n}};function Lc(n,a){if(1&n&&(t.TgZ(0,"div",62),t.YNc(1,Mc,11,9,"div",63),t.YNc(2,Hr,1,0,"div",64),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2);t.hYB("id","quest",e.quest.isGroup?"-g":"","-",e.quest.label,""),t.Q6J("ngStyle",t.VKq(6,Ic,o.lstQuest.length<o.maxQuestEnableLazy?"auto":e.lazyQuestView&&e.lazyQuestView.curHeight?e.lazyQuestView.curHeight:"200px")),t.uIk("data-idx-quest",i),t.xp6(1),t.Q6J("ngIf",o.lstQuest.length<o.maxQuestEnableLazy||(null==e.lazyQuestView?null:e.lazyQuestView.show)),t.xp6(1),t.Q6J("ngIf",!(o.lstQuest.length<o.maxQuestEnableLazy||null!=e.lazyQuestView&&e.lazyQuestView.show))}}function Zc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",112),t.NdJ("click",function(){t.CHM(e),t.oxw(3);const o=t.MAs(6);return t.KtG(o.click())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",113)(3,"polyline",114)(4,"line",115),t.qZA(),t.kcU(),t.TgZ(5,"span",34),t._uU(6,"Upload File"),t.qZA()()}}function Pc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",116),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openLibrary())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"line",117)(3,"line",118),t.qZA(),t.kcU(),t.TgZ(4,"span",34),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_chon_tu_ngan_hang")," "))}function Nc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",119),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openMathEditor())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",120),t.qZA(),t.kcU(),t.TgZ(3,"span",34),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_chen_cong_thuc")," "))}function Dc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",121),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.saveLocal())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",113)(3,"polyline",122)(4,"line",123),t.qZA(),t.kcU(),t.TgZ(5,"span",34),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_luu_ve_may")," "))}function jc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",139),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.format())}),t.O4$(),t.TgZ(2,"svg",134),t._UZ(3,"rect",140)(4,"rect",141)(5,"path",142),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_format")," "))}function qc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",124)(1,"button",125),t.O4$(),t.TgZ(2,"svg",126),t._UZ(3,"circle",127)(4,"circle",128)(5,"circle",129),t.qZA()(),t.kcU(),t.TgZ(6,"mat-menu",null,130)(8,"div",131)(9,"ul",132)(10,"li")(11,"a",133),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.randomAllAgain())}),t.O4$(),t.TgZ(12,"svg",134),t._UZ(13,"path",135)(14,"path",136)(15,"path",137)(16,"path",138),t.qZA(),t.kcU(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()(),t.YNc(20,jc,9,3,"li",82),t.qZA()()()()}if(2&n){const e=t.MAs(7),i=t.oxw(3);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(17),t.hij(" ",t.lcZ(19,3,"lang_auto_lay_ngau_nhien_lai_toan_bo")," "),t.xp6(2),t.Q6J("ngIf","user"==i.type)}}function Fc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",143)(1,"div",144),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",145),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.loadExample(1,o.commonService.getCurrentLang()))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t._uU(7," | "),t.TgZ(8,"a",146),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.loadExample(2,o.commonService.getCurrentLang()))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t._uU(11," | "),t.TgZ(12,"a",147),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.loadExample(3,o.commonService.getCurrentLang()))}),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"mytranslate"),t.qZA(),t._uU(16," | "),t.TgZ(17,"a",148),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.loadExample(4,o.commonService.getCurrentLang()))}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij("",t.lcZ(3,5,"lang_auto_noi_dung_mau")+": "," "),t.xp6(3),t.Oqu(t.lcZ(6,7,"lang_auto_mau")+" 1"),t.xp6(4),t.Oqu(t.lcZ(10,9,"lang_auto_mau")+" 2"),t.xp6(4),t.Oqu(t.lcZ(14,11,"lang_auto_mau")+" 3 ("+t.lcZ(15,13,"lang_core_there_is_fill_in_the_blank")+")"),t.xp6(5),t.Oqu(t.lcZ(19,15,"lang_auto_mau")+" 4"))}const Qc=function(n){return{height:n}};function Uc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",104)(2,"div",24),t.YNc(3,Zc,7,0,"div",105),t.YNc(4,Pc,7,3,"div",106),t.YNc(5,Nc,6,3,"div",107),t.YNc(6,Dc,8,3,"div",108),t.YNc(7,qc,21,5,"div",109),t.qZA()(),t.TgZ(8,"azt-monaco-editor",110),t.NdJ("onStartProcessFile",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.processFile(o))})("onInit",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.onEditorInitComplete(o))}),t.qZA(),t.YNc(9,Fc,20,17,"div",111),t.qZA()}if(2&n){const e=t.oxw(2);t.Gre("col-editor tex2jax_ignore ",e.isMobile?"azt-order-1":"",""),t.xp6(3),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type),t.xp6(1),t.Q6J("ngIf","user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Akn(t.VKq(14,Qc,e.conf.heightContent+"px")),t.Q6J("config",e.aztLangConfig)("readOnly","azota"==e.type)("editorApiService",e.editorApiService),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function Bc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16),t.YNc(2,Ns,6,3,"div",17),t.TgZ(3,"div",18),t.NdJ("scroll",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onScrollQuest())}),t.YNc(4,pa,8,7,"div",19),t.YNc(5,Lc,3,8,"div",20),t._UZ(6,"div",21),t.qZA()(),t.YNc(7,Uc,10,16,"div",22),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Gre("col-questions box bg-slate-100 dark:bg-darkmode-400 rounded-none ",e.isMobile?"azt-order-2":"",""),t.xp6(1),t.Q6J("ngIf",e.lstQuest.length>0),t.xp6(2),t.Q6J("ngIf",""!=e.text||e.attachFiles.length>0),t.xp6(1),t.Q6J("ngForOf",e.lstQuest),t.xp6(2),t.Q6J("ngIf",""!=e.aztLangConfig)}}function Rc(n,a){if(1&n&&(t.TgZ(0,"div",149)(1,"div",150)(2,"div",151)(3,"span"),t._UZ(4,"span",152),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",153),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,1,e.conf.logConfig.msg))}}function ri(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",154)(1,"app-test-finder",155),t.NdJ("closeTestFinder",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.closeLibrary(o))}),t.qZA()()}if(2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("isFirstTime",null!==(i=e.conf.isFirstTime)&&void 0!==i&&i)}}function zc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mathtype-editor",156),t.NdJ("onClose",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.mathEditor.show=!1)})("onInsertLatex",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onInsertLatex(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("inp",e.conf.mathEditor.latex)}}function $r(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"similar-quest",157),t.NdJ("onClose",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.similarQuest.show=!1)})("onInsert",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.replaceQuest(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("inp",e.lstQuestSimilar)}}function Kr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"show-errors-quests",158),t.NdJ("onClose",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.showErrorsQuests.show=!1)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lstErrors",e.errs)}}function xa(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"show-info-quests",159),t.NdJ("onClose",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.showInfomationQuests.show=!1)})("onNextQuestion",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onInfoQuestionNexQuestion(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lstQuest",e.lstQuest)}}function js(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"only-image-editor",160),t.NdJ("onClose",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.imageEditor.show=!1)})("onPushImage",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onPushImageAction(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("el_target",e.conf.imageEditor.el)}}function eo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",161)(1,"main-config-homework",162),t.NdJ("onBack",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.showEditor())}),t.qZA()()}}function Jc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",163)(1,"app-info-general",162),t.NdJ("onBack",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.conf.showEditor())}),t.qZA()()}}const Go=function(n){return{hidden:n}};class Ci{constructor(a){this.commonService=a,this.check=!1}makeErr(a,e,i){const o=this.isFullNoPoint(e);if(!this.check)return;if(!a.quest.isGroup&&(!a.point||a.point<=0)&&!o){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_diem_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?r:`<span class="quest-err">${r} ${l}</span>`}let s=a.answers.filter(r=>r.ans.isCorrect).length>0;if(1==a.type&&!s){let r=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?r:`<span class="quest-err">${r} ${l}</span>`}}makeFirstErr(a){this.check=!0;for(const e of a)if(void 0!==this.makeErr(e,a,void 0))return e}isFullNoPoint(a){return a.filter(e=>!e.point).length===a.length}}let Vn=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y,C,I){super(),this.questionHelper=e,this.editorCommonService=i,this.apiUploadService=o,this.infoService=s,this.documentService=r,this.examService=l,this.cdnService=c,this.activeRoute=u,this.store=d,this.editorOutputDataService=m,this.userService=p,this.questionSaveService=b,this.questionService=y,this.discoveryService=C,this.dialog=I,this.images=[],this.editedImages=new Map,this.errorQuestionView=new Ci(this.commonService),this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g,this.title=new h.p4,this.lstQuest=[],this.lstQuestReplace=[],this.text="",this.attachFiles=[],this.aztLangConfig="",this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.showTooltip=!0,this.questionTags=[],this.mapEventElement=[],this.configRenderService=new Yt.B,this.maxQuestEnableLazy=20,this.isMobile=!1,this.lastMatrixHash="",this.editQuestId=0,this.editableEventObj={isChange:!1,count:0,addCount:function(){this.count++,this.count>2&&(this.isChange=!0)}},this.type="user",this.timeOutDelayStatus={refresh:!1,timeRefresh:0,limitRefresh:2},this.lstSimilar=[],this.conf=new St(this.editorOutputDataService,this.commonService),this.editorApiService=new xt(e,o,r,l,y),this.fileParser=new H.uD,this.setupEvent();let D=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.questionSaveService.callbackBase64ToCanvas=(U,B)=>{this.conf.logConfig.msg=`${D} ${Math.floor(U/B*100*.7)}%`},this.questionSaveService.callbackUploadImage=(U,B)=>{this.conf.logConfig.msg=`${D} ${Math.floor(U/B*100*.3)+70}%`}}handleGotoQuestionView(){var e;this.revealQuest(this.conf.inputMoveToQuestionValue)||this.showErrorSnack(null!==(e=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den"))&&void 0!==e?e:"")}onInfoQuestionNexQuestion(e){this.conf.showInfomationQuests.show=!1,this.conf.inputMoveToQuestionValue=e.toString(),this.handleGotoQuestionView()}handleSetStatusTooltipQuestionView(e){this.conf.inputMoveToQuestionTooltip=e}handleFileDrop(e){""!==this.text?this.onDropFile(e[0]):this.processFile(e[0])}convertPartItem(e){var i,o;return 0===e.length?"":/^\[@((.)+)\]/g.test(null!==(i=e[0].text)&&void 0!==i?i:"")?e[0].lineIdx+"_____"+(null===(o=e[0].text)||void 0===o?void 0:o.split("]=>")[0])+"]":""}convertQuestion(e,i,o,s,r){return new Promise(l=>{var c,u,d,m;const p=[];o.answers.forEach(I=>{p.push({key:I.ans.label,content:I.renderedStr})});let b=o.answers.find(I=>!0===I.ans.isCorrect);const C={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(s+1),answerType:o.type,categoryId:0,questionContent:o.renderedStr,questionText:o.renderedStr,answerConfig:JSON.stringify(p),groupId:r,answerResult:b?JSON.stringify([b.ans.label]):o.strAns&&(null===(c=o.strAns)||void 0===c?void 0:c.length)>0?JSON.stringify(o.strAns):void 0,totalQuestion:this.lstQuest.length,version:"4",isFixAns:o.quest.isFixAns?1:0,isImage:1,answerMedia:o.helpRenderedStr,mediaMeta:JSON.stringify(e),groupType:e?.isFixGroup?"1":void 0,tags:o.tag&&o.tag.length?o.tag.map(I=>{var D;return null!==(D=I.code)&&void 0!==D?D:""}):[],__path:this.convertPartItem(o.quest.parts)};null===(d=null===(u=i.exam)||void 0===u?void 0:u.questionObj.listQuestions)||void 0===d||d.push(C),null===(m=i.exam)||void 0===m||m.rootQuests.push(o),o.audio&&(0,ot.F0)(o.audio.type)?o.attachments&&"[]"!==o.attachments?(C.attachments=o.attachments,l()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(o.audio).subscribe(I=>{I.type!=K.dt.UploadProgress&&(1==I.success?C.attachments=JSON.stringify([I.data]):this.showErrorSnack("lang_auto_upload_file_audio_that_bai"),l())}):l()})}uploadAttHomeworkFile(e,i,o){return new Promise(s=>{this.apiUploadService.uploadToCdnForHomework(o).subscribe(r=>{1==r.success&&r.data&&(i.push(r.data),i.length===this.attachFiles.length&&e.homework&&(e.homework.files=JSON.stringify(i)),s())})})}uploadFileProcess(e){return new Promise(i=>{this.saveFileProcess?this.apiUploadService.uploadToCdnProgressForTestbankDocx(this.saveFileProcess).subscribe(o=>{var s,r;o.type!=K.dt.UploadProgress&&(1==o.success&&e.exam&&(e.exam.examObj.cdnExamFile=null!==(r=null===(s=o.data)||void 0===s?void 0:s.url)&&void 0!==r?r:""),i())}):i()})}saveAction(){var e;if(this.errs.length>0)this.conf.showErrorsQuests.show=!0;else{if(this.lstQuest.length>0){const i=this.errorQuestionView.makeFirstErr(this.lstQuest);if(null!=i)return this.commonService.snackError(this.errorQuestionView.makeErr(i,this.lstQuest,!0)||""),void this.revealQuest(i.quest.label+"")}this.loadingManager.size>0?null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_msg_confirm_watting_loading").then(i=>{i&&(this.stopAudio(),this.save())}):(this.stopAudio(),this.save())}}parseAzt(e){let i=this;var o=new FileReader;o.readAsText(e,"UTF-8"),o.onload=s=>{var r,l;let c=null!==(r=o.result)&&void 0!==r?r:"",u=JSON.parse(c);if(!u.text)return i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0);i.images=u.imgs,i.mathMap=new Map;for(let d of u.maths)i.mathMap.set(d[0],d[1]);i.extraMap=new Map;for(let d of u.infos)i.extraMap.set(d[0],d[1]);null===(l=i.aztEditor)||void 0===l||l._editor.setValue(u.text),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},o.onerror=s=>{i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}}saveCdn(e){return new Promise(i=>{var o;if(null!==(o=e.exam)&&void 0!==o&&o.examObj){let s=new Date,r=`user-${this.userService.getUserObj().id}-de-azota-${s.getDate()}${s.getMonth()+1}${s.getFullYear()}-${s.getTime()}.azt`;const l=this.generateFileAzt();if(l){const c=new File([l],r,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(c).subscribe(u=>{var d,m;u.type!=K.dt.UploadProgress&&(1==u.success&&u.data&&!(null===(d=e.exam)||void 0===d)&&d.examObj&&(e.exam.examObj.cdnEditorFile=null!==(m=u.data.url)&&void 0!==m?m:""),i())})}else i()}else i()})}saveLocal(){let e=new Date,i=`de-azota-${e.getDate()}${e.getMonth()+1}${e.getFullYear()}-${e.getTime()}.azt`;const o=this.generateFileAzt();if(o)if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(o,i);else{const s=window.document.createElement("a");s.href=window.URL.createObjectURL(o),s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}generateFileAzt(){var e,i;let o=null!==(i=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue().trim())&&void 0!==i?i:"";if(""!=o){let s=[],r=[];for(let u of this.mathMap)s.push(u);for(let u of this.extraMap)r.push(u);let c=JSON.stringify({text:o,imgs:this.images,maths:s,infos:r});return new Blob([c],{type:"text/plain"})}return null}makeExpandInfoObj(){var e,i;const s=this.lstQuest.map(r=>{var l;return null===(l=r.quest.olabel)||void 0===l?void 0:l.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")}).filter(r=>r&&r.length>0);return s.length>0?{label:(r=null!==(e=s[0])&&void 0!==e?e:null!==(i=this.commonService.myTranslateInstant("lang_auto_cau"))&&void 0!==i?i:"",r.charAt(0).toUpperCase()+r.slice(1))}:{};var r}save(){var e;if(this.lstQuest.length>0||""!==this.text){let i=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu");this.conf.logConfig.msg=i,this.conf.logConfig.status=!0;const o=new X.Q(10,{function:(r,l)=>{this.conf.logConfig.msg=`${i} ${Math.floor(r/l*100)}%`}}),s={};if(this.lstQuest.length>0){this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_chuan_bi_du_lieu_de_thi";const l=null!==(e=(this.lstQuest[0].quest.isGroup?this.lstQuest[1]:this.lstQuest[0]).quest.label)&&void 0!==e?e:1;let c,u=[],d=!0;s.exam={examObj:{categoryId:Number(this.conf.cur_cateId),name:this.title.value,startQuestionIndex:l},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},o.addTask(this,this.uploadFileProcess,[s]);const m=this.errorQuestionView.isFullNoPoint(this.lstQuest);let b=it(10,this.lstQuest.filter(y=>!y.quest.isGroup).length);this.lstQuest.forEach((y,C)=>{var I,D,U;if(y.quest.isGroup)c=y,d=!1;else{d||(d=!0,u.push(C-(u.length+1)));const q={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(C-u.length+1),point:m?null!==(I=b[C-u.length])&&void 0!==I?I:1:null!==(D=y.point)&&void 0!==D?D:1};null===(U=s.exam)||void 0===U||U.examConfig.push(q),o.addTask(this,this.convertQuestion,[c,s,y,C-u.length,u.length])}}),0==this.editQuestId&&o.addTask(this,this.saveCdn,[s]),s.exam.examObj.firstInGroupIndexes=JSON.stringify(u),s.exam.examObj.expandInfoObj=this.makeExpandInfoObj()}else if(s.homework={name:this.title.value,content:this.text,deadline:void 0,files:void 0,mustVerified:void 0,whenShowAnswer:void 0,categoryId:void 0,classroomIds:void 0},this.attachFiles.length>0){const r=[];this.attachFiles.forEach(l=>{o.addTask(this,this.uploadAttHomeworkFile,[s,r,l])})}o.start().then(()=>{var r;if(this.editQuestId){let l={exceptQuestionIds:[],matrix:[]};null===(r=l.matrix)||void 0===r||r.push({paths:[{type:"QUEST",id:this.editQuestId}],number:1,key:`[@${this.editQuestId}:Question]=>0`}),this.questionService.apiQuestionsMatrixPost(l).subscribe(c=>{var u,d,m;if(1==c.success&&c.data&&c.data.length>0&&c.data[0].questions&&1===c.data[0].questions.length){const p=c.data[0].questions[0];if(null!==(u=s.exam)&&void 0!==u&&u.questionObj.listQuestions&&1==s.exam.questionObj.listQuestions.length){let b=null!==(d=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de"))&&void 0!==d?d:"";this.questionSaveService.convertQuestions(s.exam.questionObj.listQuestions,s.exam.rootQuests,(y,C=b)=>{this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.showErrorSnack(C)}).then(()=>{var y,C,I,D;if(null!==(y=s.exam)&&void 0!==y&&y.questionObj.listQuestions&&1==s.exam.questionObj.listQuestions.length){const U=s.exam.questionObj.listQuestions[0],B=this.commonService.myParseJson(null!==(C=U.questionContent)&&void 0!==C?C:""),q=this.commonService.myParseJson(null!==(I=p.content)&&void 0!==I?I:"");if(!(B&&B[0]&&q&&q[0]))return this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,void this.showErrorSnack(null!==(D=c.message)&&void 0!==D?D:"");Object.prototype.hasOwnProperty.call(q[0],"groupContent")&&(B[0].groupContent=q[0].groupContent),Object.prototype.hasOwnProperty.call(q[0],"groupUrl")&&(B[0].groupContent=`@[]{"link":"${q[0].groupUrl}","data":${JSON.stringify({x:0,y:0,width:-1,height:-1})}}@[]`),Object.prototype.hasOwnProperty.call(q[0],"name")&&(B[0].name=q[0].name),Object.prototype.hasOwnProperty.call(q[0],"id")&&(B[0].id=q[0].id),Object.prototype.hasOwnProperty.call(p,"groupId")&&(U.groupId=p.groupId),Object.prototype.hasOwnProperty.call(p,"groupType")&&(U.groupType=p.groupType),U.questionContent=JSON.stringify(B),delete U.__path,this.questionService.apiQuestionsIdPut(this.editQuestId,U).subscribe(R=>{var et;if(this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,1==R.success){this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong");let Q=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(Q)}else this.showErrorSnack(null!==(et=R.message)&&void 0!==et?et:"")})}})}}else this.showErrorSnack(null!==(m=c.message)&&void 0!==m?m:"")})}else this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.editorOutputDataService.setOutputData(s),this.editorOutputDataService.redirectToConfig(this.conf)})}else this.showErrorSnack("lang_auto_khong_tim_thay_noi_dung_can_luu")}lengthRealQuest(){return this.lstQuest.filter(e=>!e.quest.isGroup).length}cancelAction(){var e;null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_confirm_destroy_content").then(i=>{i&&location.reload()})}openLibrary(){this.conf.startLibrary=!0}switchFilePdfProcess(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigationWithQueryString("/admin/testbank/create-file-pdf-ver2/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}switchFileXlsxProcess(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigationWithQueryString("/admin/testbank/create-exam-by-excel/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),"?backto="+encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0)))}clearData(){this.images=[],this.editedImages=new Map,this.lstQuest=[],this.text="",this.attachFiles=[],this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.editorParsedData=void 0,this.curQuest=void 0,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.matrixLoadedData=void 0}processFile(e){if(this.editQuestId>0)return;this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_cho_xu_ly_file",this.title=new h.p4(e.name);let i=e.name.split(".").pop();return"docx"==i?.trim().toLowerCase()?(this.clearData(),void this.parseDocx(e)):"azt"==i?.trim().toLowerCase()?(this.clearData(),void this.parseAzt(e)):(0,ot.Or)(e.type)?(this.insertImgFromFile(e),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0)):void this.fileParser.start(e).then(o=>{"pdf"===o.type?this.switchFilePdfProcess(e):"docx"===o.type?(this.images=[],o.data.maps.forEach(s=>{this.images.push(s)}),this.aztEditor&&this.aztEditor._editor.setValue(o.data.str.join("\n"))):"xlsx"===o.type?this.switchFileXlsxProcess(e):(this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0)}).catch(()=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0})}attachImg(e){var i;let o=this.commonService.myTranslateInstant("lang_auto_nhap_noi_dung");null===(i=this.aztEditor)||void 0===i||i._editor.setValue(o),this.onDropFile(e),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}openFile(e){this.processFile(e.target.files[0]),e.target.value=null}parseDocx(e){new Jt(this.editorCommonService,this.commonService).handleFileSelect(e,o=>{var s,r;this.saveFileProcess=e,this.images=[],this.mathMap.clear();let l=[];for(let p of o.data)if("img"==p.type)this.images.push({id:p.key,link:p.value,cssStyle:p.cssStyle}),p.cssStyle&&p.cssStyle.split(";").length>2&&l.push([`^\\[img:\\$${p.key}\\$\\]`,`[img:$${p.key}$]\n`]);else if("mathml"==p.type){let b=+p.key.split("_")[1];this.mathMap.set(p.key,{id:b,str:p.value,raw:p.docx,lineIdx:0,startCol:0,endCol:0}),b>this.curMathId&&(this.curMathId=b)}this.curMathId++;let c=[];for(let p of o.lines){if(0==p.length)continue;let b="";b=Array.isArray(p[0])&&Array.isArray(p[p.length-1])&&Array.isArray(p[Math.floor(p.length/2)])?"[* "+p.map(C=>C.map(I=>I.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":p.join("");for(let C of l)b=b.replaceAll(new RegExp(C[0],"g"),C[1]);let y=b.split("\n");for(let C of y)c.push(C)}(new qt).process(c);let d=this.processStyle(c);this.processMath(d),this.lstQuest=[],this.curQuest=void 0,null===(s=this.aztEditor)||void 0===s||s.setPosition(1,0);let m=d.join("\n");null===(r=this.aztEditor)||void 0===r||r._editor.setValue(m),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},(o,s,r)=>{let l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly");this.conf.logConfig.msg=`${l} ${r}...(${o}/${s})`})}format(){var e,i,o,s,r,l,c,u;let m=(null!==(i=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue())&&void 0!==i?i:"").split("\n"),p=m.length,b=m.length>0?m[m.length-1].length:0,y=null===(s=null===(o=this.aztEditor)||void 0===o?void 0:o.azotaIntel)||void 0===s?void 0:s.examIntel;y?.setLines(m);let C=null!==(r=y?.parse())&&void 0!==r?r:[],I=[],D=[],U=[],B=-999;for(let q of C){if(q.isGroup){let at=q.parts.map(tt=>{var rt;return null!==(rt=tt.text)&&void 0!==rt?rt:""}).join("\n");I.push(at);continue}-999==B&&(B=q.label-1),q.label-B>1&&(q.olabel=null===(l=q.olabel)||void 0===l?void 0:l.replace(q.label+"",B+1+""),q.label=B+1);let R=G.Utils.capitalizeFirstLetter(null!==(c=q.olabel)&&void 0!==c?c:q.label+"")+" ",et=R+q.parts.map(at=>{var tt;return null!==(tt=at.text)&&void 0!==tt?tt:""}).join("\n"),Q=0==q.answers.length||q.answers[0].isInline?void 0:q.answers.map(at=>(at.isCorrect?"   *":"    ")+at.label+". "+at.parts.map(tt=>{var rt;return null!==(rt=tt.text)&&void 0!==rt?rt:""}).join("\n").trim()).join("\n"),V=q.help?R+q.help.map(at=>{var tt;return null!==(tt=at.text)&&void 0!==tt?tt:""}).join("\n"):void 0,Y=q.strAns?R+q.strAns:void 0;I.push(et),Q&&I.push(Q),V&&D.push(V),Y&&U.push(Y),B++}if(I.length>0){(U.length>0||D.length>0)&&I.push("----------------------"+this.commonService.myTranslateInstant("azt_lang_sugg_the_end")+"----------------------"),U.length>0&&(I.push(this.commonService.myTranslateInstant("azt_lang_sugg_ans_table")),I.push(...U)),D.length>0&&(I.push(this.commonService.myTranslateInstant("azt_lang_sugg_instruction")),I.push(...D));let q=I.join("\n");null===(u=this.aztEditor)||void 0===u||u._editor.executeEdits("",[{range:{startLineNumber:0,endLineNumber:p+100,startColumn:0,endColumn:b+100},text:q}])}}processMath(e){let i=0;for(let o of e){let s=o.matchAll(this.MATH_PAT);for(;;){let r=s.next();if(r.done)break;let l=r.value[0],u=this.mathMap.get(r.value[1]);u&&(u.lineIdx=i+1,u.startCol=r.value.index+1,u.endCol=u.startCol+l.length)}i++}}processStyle(e){var i,o,s,r;let l=/\[![!aibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,c=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,u=[],d=0;for(let U of e){c.test(e[d].replaceAll(l,"$1"))&&(e[d]=e[d].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),U=e[d]);let R,B=U.matchAll(l),q=0;for(;;){let et=B.next();if(et.done)break;let Q=et.value[0],V=Q.indexOf(":"),Y=Q.substring(1,V),tt=et.value.index-q,rt=tt+et.value[1].length;R&&tt==R.e&&R.style==Y?R.e=rt:(R={lineIdx:d,s:tt,e:rt,style:Y},u.push(R)),q+=V+4}e[d]=U.replaceAll(l,"$1"),d++}let m=null===(o=null===(i=this.aztEditor)||void 0===i?void 0:i.azotaIntel)||void 0===o?void 0:o.examIntel;m?.setLines(e);let p=null!==(s=m?.parse())&&void 0!==s?s:[],b=[],y=new Map,C=0;for(let U of p){C++;for(let B of U.parts)b.push(B);for(let B of U.answers){let q=this.hasStyleAns(e,B.parts[0],u);""!=q&&y.set(`${U.label}-${U.group}-${B.label}-${C}`,q);for(let R of B.parts)b.push(R)}}for(let U of p)if(U.help)for(let B of U.help)b.push(B);this.applyStyle(e,b,u),m?.setLines(e),p=null!==(r=m?.parse())&&void 0!==r?r:[];let I=[];C=0;for(let U of p){C++;let B=new Map;if(!(U.answers.filter(q=>q.isCorrect).length>0)){for(let q of U.answers){let R=y.get(`${U.label}-${U.group}-${q.label}-${C}`);R&&""!=R&&B.set(R,B.has(R)?void 0:q.parts[0])}for(let q of B)if(q[1]){I.push(q[1]);break}}}for(let U=I.length-1;U>=0;U--){let B=I[U];e[B.lineIdx]=e[B.lineIdx].substring(0,B.b)+"*"+e[B.lineIdx].substring(B.b)}return e=this.processUnderlineAns(e),p.length>0?e.slice(p[0].parts[0].lineIdx):e}processUnderlineAns(e){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,o=0,s=[];for(let r of e){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&o>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),u=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let d=e[o-1].match(i);if(d&&l.length==d.length){for(let p of d)e[o-1]=e[o-1].replace(p,p.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==u?"*":""}${l.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=e[o-1],l=l.substring(1),u++;o++;continue}}}s.push(r),o++}return s}hasStyleAns(e,i,o){if(!i)return"";let s=o.filter(r=>r.lineIdx==i.lineIdx&&r.s<=i.b&&r.e>=i.b);for(let r of s)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(e,i,o){var s;for(let r=i.length-1;r>=0;r--){let l=i[r],c=o.filter(u=>u.lineIdx==l.lineIdx&&u.e>=l.s);for(let u=c.length-1;u>=0;u--){let d=c[u].s>=l.s?c[u].s:l.s,m=c[u].e<=(null!==(s=l.e)&&void 0!==s?s:9999999)?c[u].e:l.e,p=c[u].style.replaceAll("!hl","");if(d<m&&""!=p){let b=e[l.lineIdx],y=b.substring(d,m);""!=y.trim()&&(e[l.lineIdx]=b.substring(0,d)+"["+p+":$"+y+"$]"+b.substring(m))}}}}setCorrectAns(e,i){var o,s;let r=[],l=0,c=0;this.editorFocus(i.parts);for(let u of e.answers){let d=u.ans.parts[0];if(!d)continue;let m=null===(o=this.aztEditor)||void 0===o?void 0:o.getLineText(d.lineIdx+1);d.lineIdx!=c&&(l=0,c=d.lineIdx);let p=m.substring(d.b,d.b+1);"*"==p&&(r.push(`${d.lineIdx}|${d.b+l}|${d.b+l+1}|`),l--),u.ans.label==i.label&&"*"!=p&&(r.push(`${d.lineIdx}|${d.b+l}|${d.b+l}|*`),l++)}null===(s=this.aztEditor)||void 0===s||s.runEditAction(r,this.aztEditor._editor,!0),this.showTooltip=!1}closeLibrary(e){this.conf.startLibrary=!1,this.conf.isFirstTime||(this.conf.isFirstTime=!0),e&&this.aztEditor&&this.aztEditor.insertLine(e.join("\n"))}parseTag(e){let o=e.trim(),r=o.matchAll(/^(\[!info:\d+\]\s*)?(\[[iubhl!]+:\$\s*)?[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g).next();return r.done?["",o]:(o=o.replace(/[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g," "),[r.value[3],o])}trimBr(e){return e.replaceAll("<br>","").trim()}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:this.trimBr(e)};let s=e.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let u=s.next();if(u.done)break;r=u.value[0],l=u.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}setExtra(e,i=!0){var o,s,r,l,c;let u=e.q.quest.parts[0],d=this.parseExtra(null!==(o=u.text)&&void 0!==o?o:"");"0"==d.id&&(d.id=this.curExtraId+"",this.curExtraId++);let m=this.extraMap.get(d.id);if(m||(m={d:e.q.point,audio:e.q.audio,file:void 0,fix:e.q.quest.isFixAns,tag:e.q.tag,replaceIdx:-1},this.extraMap.set(d.id,m)),"point"==e.type&&(m.d=e.data&&e.data>0?e.data:void 0),"audio"==e.type&&(m.audio=e.q.audio?e.q.audio:void 0,m.file=void 0),"fix"==e.type&&(m.fix=e.data?"fix":void 0),"tag"==e.type&&(m.tag=e.data),"replace"==e.type&&(m.replaceIdx=e.data),+d.id>0){let b=u.s+d.idx,y=u.s+d.idx+d.val.length;e.q.quest.isGroup&&""==d.val&&(b=u.s+(null!==(r=null===(s=u.text)||void 0===s?void 0:s.length)&&void 0!==r?r:0)+10,y=b),null===(l=this.aztEditor)||void 0===l||l.runEditAction([`${u.lineIdx}|${b}|${y}|[!info:${d.id}]`],this.aztEditor._editor,i)}return i&&(null===(c=this.aztEditor)||void 0===c||c.setPosition(u.lineIdx+1,0)),d.id}setFixGroup(e){e.isFixGroup=!e.isFixGroup,this.setExtra({q:e,type:"fix",data:e.isFixGroup})}randomAllAgain(){var e,i;this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),this.renderCache.clear(),this.lastMatrixHash="";let o=null===(e=this.aztEditor)||void 0===e?void 0:e._editor.getValue().split("\n"),s=null!==(i=this.editorParsedData)&&void 0!==i?i:[];this.onEditorChangeValue(o,s)}reRender(){this.editorParsedData&&(this.lstQuest=this.editorParsedData.map((e,i)=>this.renderQuest(e,i)),this.text="")}onApplyAllTag(e,i){this.lstQuest.forEach((o,s)=>{s<=i||o.quest.isGroup||(o.tag=e,this.setExtra({type:"tag",data:e,q:this.lstQuest[s]},s==this.lstQuest.length-1))})}showHover(e,i,o){if(this.lstQuest)for(let s of this.lstQuest){let r=o;if(s.quest.parts[0].lineIdx==e-1&&/\[!info:\d+\]/.test(o)){let l=this.parseExtra(o),c="";if("0"!=l.id){let m=this.extraMap.get(l.id);m&&m.replaceIdx>=0&&(c=this.commonService.myTranslateInstant("lang_core_replace")+": "+m.replaceIdx)}let u=r.indexOf("[")+1,d=r.indexOf("]")+1;if(u<=i&&i<=d){let m=[],p=this.commonService.myTranslateInstant("lang_auto_diem"),b=this.commonService.myTranslateInstant("lang_auto_audio_file"),y=this.commonService.myTranslateInstant("lang_auto_file_dinh_kem"),C=this.commonService.myTranslateInstant("lang_auto_nhan"),I=this.commonService.myTranslateInstant("lang_auto_co_dinh");return s.point&&m.push(`${s.point} ${p}`),s.audio&&m.push(b+": "+s.audio.name),s.attachments&&m.push(y+": "+s.attachments),s.tag&&s.tag.length>0&&m.push(C+": "+s.tag.map(D=>D[this.commonService.getCurrentLang()+"Name"]).join(",")),(s.isFixGroup||s.quest.isFixAns)&&m.push(I),""!=c&&m.push(c),{lineIdx:e,s:u,e:d,text:m.join(", ")}}}}}onEditorChangeValue(e,i){clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.onEditorChangeValueExec(e,i)},400)}onEditorChangeValueExec(e,i){var o;if(i&&i.length>0){this.errs=[],null===(o=this.aztEditor)||void 0===o||o.setError([]),this.editorParsedData=i;let s=this.lstQuest.map((r,l)=>r.lazyQuestView&&r.lazyQuestView.show?{i:l,v:r.lazyQuestView}:{i:-1,v:void 0}).filter(r=>r.i>=0);this.lstQuest=[],this.loadMatrixQuest(this.editorParsedData).then(r=>{var l;this.matrixLoadedData=r,this.lstQuest=i.map((u,d)=>this.renderQuest(u,d));for(let u of s){if(u.i>=this.lstQuest.length)break;this.lstQuest[u.i].lazyQuestView=u.v}i.forEach((u,d)=>{var m;let p=null===(m=u.answers.find(b=>b.isCorrect))||void 0===m?void 0:m.label;if(p||(p=this.lstQuest[d].originCorrectAns),p||(p=""),"similar"!=this.lstQuest[d].v)for(let b of this.lstQuest[d].answers)b.ans.isCorrect=b.ans.label==p}),this.text="",setTimeout(()=>{this.revealCurrentQuest()},200),this.validate();let c=null===(l=this.aztEditor)||void 0===l?void 0:l._editor.getValue().split("\n");this.processMath(c)})}else this.lstQuest=[],this.text=this.renderText(e.join("<br>"))}loadMatrixQuest(e){return new Promise((i,o)=>{var s,r,l,c,u,d;let m={exceptQuestionIds:[],matrix:[]},p=new Map;for(let y of e)if(null!==(s=y.parts[0].text)&&void 0!==s&&s.startsWith("[@")){let C=y.parts[0].text.split("=>"),I=C[0]+"=>"+C[1].split("-")[0];if(p.has(I))continue;p.set(I,!0);let D=G.Utils.parseInclude(y.parts[0].text);null===(r=m.matrix)||void 0===r||r.push({number:D.getNum,key:I,paths:D.paths.map(U=>({type:U.type,id:U.id,groupIds:U.groupIds,tags:U.tags,answerTypes:U.answerTypes}))})}let b=null!==(c=null===(l=m.matrix)||void 0===l?void 0:l.map(y=>y.key).join(":"))&&void 0!==c?c:"";b!=this.lastMatrixHash?(this.lastMatrixHash=b,this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),(null!==(d=null===(u=m.matrix)||void 0===u?void 0:u.filter(I=>{var D,U;return null!==(U=null===(D=I.paths)||void 0===D?void 0:D.filter(B=>"KNOWLEDGE"==B.type).length)&&void 0!==U&&U}).length)&&void 0!==d&&d?this.questionService.apiQuestionsMatrixGlobalPost(m):this.questionService.apiQuestionsMatrixPost(m)).subscribe(I=>{i(1===I.success&&I.data?I.data:[])})):i(this.matrixLoadedData?this.matrixLoadedData:[])})}onMobileEditorChange(e){this.mobileEditorContent=e.lines.join("\n"),this.onEditorChangeValue(e.lines,e.data)}onEditorInitComplete(e){if(this.aztEditor=e.azotaEditor,this.aztEditor.setLang(this.commonService),this.aztEditor.setHoverCalback((s,r,l)=>this.showHover(s,r,l)),this.aztEditor.onChange((s,r)=>{var l;if(this.editQuestId>0&&r.length>0){r.length>1&&this.showErrorSnack("lang_auto_khong_the_them_cau_hoi_moi");let c=this.conf.startIndex+1;(r=[r[0]])[0].olabel=null===(l=r[0].olabel)||void 0===l?void 0:l.replace(r[0].label+"",c+""),r[0].label=c}this.onEditorChangeValue(s,r)}),this.aztEditor.onRefreshInclude((s,r)=>{var l,c;if(this.timeOutDelayStatus.refresh){const u=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((null!==(l=this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question"))&&void 0!==l?l:"").replace("@",u.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let u=0;this.matrixLoadedData=[];let d=this.lstQuest.filter(m=>{var p;return(null===(p=m.quest.parts[0].text)||void 0===p?void 0:p.startsWith(s))&&m.quest.parts[0].lineIdx==r-1}).map(m=>{var p;return null!==(p=m.id)&&void 0!==p?p:0});for(let m of this.lstQuest){if(m.quest.parts[0].lineIdx==r-1){const p=null!==(c=m.quest.parts[0].text)&&void 0!==c?c:"",b=u;let y=D=>{this.fillQuest(b,D)},C=D=>{this.fillError(b,D)};this.setExtra({q:this.lstQuest[b],type:"replace",data:-1});let I=new Wn(this.cdnService,this.commonService,y,this.apiCallbackCache,this.aztEditor,C,this.getIncludeIds(d),this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(p),I.render(p,this.images,this.questionService)}u++}setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}),this.aztEditor.onInsertQuestText((s,r)=>{var l,c,u;let d=this.lstQuest.filter(m=>m.quest.parts[0].lineIdx==r-1)[0];if(d){let m=this.getQuestText(d);null===(l=this.aztEditor)||void 0===l||l.setPosition(r,0),null===(c=this.aztEditor)||void 0===c||c.removeText(r,0,999999,!1),null===(u=this.aztEditor)||void 0===u||u.insertAtCurPos(m)}}),this.aztEditor.onInsertDetails((s,r)=>{var l,c,u,d;let m=this.lstQuest.filter(U=>U.quest.parts[0].lineIdx==r-1);if(0==m.length)return;for(let U=0;U<m.length;U++)this.apiDataCache.delete(s+"=>"+U);let p=this.commonService.myTranslateInstant("lang_auto_cau"),b=m.map(U=>`${U.id}: ${p} ${U.quest.label}`),C=(null!==(l=m[0].quest.parts[0].text)&&void 0!==l?l:"").split("=>")[0],I=null===(c=m[0].quest.parts[0].text)||void 0===c?void 0:c.split("=>")[1],D=null===(u=m[m.length-1].quest.parts[0].text)||void 0===u?void 0:u.split("=>")[1];if(I&&D){let U=+I,B=+D,q=C.split("].["),R=q[q.length-1],et=+G.Utils.getNumberFromStr(R),Q=B-U+1;q[q.length-1]=R.replace(" "+et+" "," "+(et-Q)+" ");let Y=q.join("].[");for(let at=B+1;at<et;at++){let tt=this.apiDataCache.get(C+"=>"+at);tt&&this.apiDataCache.set(Y+"=>"+(at-Q),tt)}for(let at=0;at<U;at++){let tt=this.apiDataCache.get(C+"=>"+at);tt&&this.apiDataCache.set(Y+"=>"+at,tt)}}null===(d=this.aztEditor)||void 0===d||d.insertDetails(r,b)}),this.aztEditor.onChangePosition((s,r)=>{var l;this.revealCurrentQuest();let d=(null===(l=this.aztEditor)||void 0===l?void 0:l.getCurLineText()).matchAll(/\[(!m|img):\$([^\$\]]+)\$\]/g);for(;;){let m=d.next();if(m.done)break;let p=m.value[2];if(m.value.index+1<r&&r<m.value.index+m.value[0].length)if(m.value[0].startsWith("[!m:")){let y=this.mathMap.get(p);if(y){this.openMathEditor(y);break}}else this.actionEditImage(document.getElementById(p))}}),window.addEventListener("paste",s=>{var r;if((null===(r=this.aztEditor)||void 0===r?void 0:r._editor).hasTextFocus()){let c=s.clipboardData.getData("text/html")+"",u=s.clipboardData.files[0],m=c.matchAll(/<img [^>]*src="([^"]+)"/g);if(u&&u.type.startsWith("image"))return void this.insertImgFromFile(u);for(;;){let p=m.next();if(p.done)break;this.insertImgFromLink(p.value[1])}}}),this.editQuestId>0){this.aztEditor.setSingleMode(!0);let s=this.commonService.myTranslateInstant("lang_auto_cau_hoi");this.aztEditor._editor.setValue(`[@Q${this.editQuestId}:${s}]`)}const i=this.editorOutputDataService.getFirstFile(),o=this.editorOutputDataService.getMatrixData();i?this.processFile(i):o&&this.processMatrixData(o)}insertImgFromBase64(e){var i;let o=0;for(let s of this.images){let r=+s.id.split("_")[1];r>o&&(o=r)}o++,this.images.push({id:"img_"+o,link:e}),null===(i=this.aztEditor)||void 0===i||i.insertAtCurPos(`[img:$img_${o}$]`)}insertImgFromLink(e){ee.loadImageToBase64(e,this.cdnService).then(i=>{this.insertImgFromBase64(i)})}insertImgFromFile(e){let i=new FileReader;i.onload=()=>{this.insertImgFromBase64(i.result+"")},i.readAsDataURL(e)}processMatrixData(e){var i;let o=new yt;this.conf.matrix=e;let s=o.parse(e.matrix);this.extraMap=s.extra,null===(i=this.aztEditor)||void 0===i||i._editor.setValue(this.commonService.translateString(s.text))}revealCurrentQuest(){var e;if(this.isMobile)return;let i=null===(e=this.aztEditor)||void 0===e?void 0:e.getCurQuest();i?(this.revealQuest((i.isGroup?"g-":"")+i.label),this.curQuest=i):this.revealQuest("1")}revealQuest(e){let i=document.getElementById("quest-"+e);return!!i&&(i.scrollIntoView({behavior:"auto"}),this.onScrollQuest(),!0)}onScrollQuest(){clearTimeout(this.scrollId),this.scrollId=setTimeout(()=>{this.checkElementQuestionLazy()},100)}onRandomOne(e){var i,o;if(this.timeOutDelayStatus.refresh){const s=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((null!==(i=this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question"))&&void 0!==i?i:"").replace("@",s.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[];let s=this.lstQuest.map(p=>{var b;return null!==(b=p.id)&&void 0!==b?b:0}),r=this.lstQuest[e];const l=null!==(o=r.quest.parts[0].text)&&void 0!==o?o:"",c=this.apiDataCache.get(l);let m=new Wn(this.cdnService,this.commonService,p=>{this.fillQuest(e,p)},this.apiCallbackCache,this.aztEditor,p=>{this.showErrorSnack(p),c&&this.apiDataCache.set(l,c)},s,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(l),this.setExtra({q:r,type:"replace",data:-1}),m.setGetOne(!0),m.render(l,this.images,this.questionService),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}onChangeQuest(e,i){var o;if(this.timeOutDelayStatus.refresh){const s=this.timeOutDelayStatus.limitRefresh-Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);this.showErrorSnack((null!==(o=this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question"))&&void 0!==o?o:"").replace("@",s.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let s=this.lstQuest[i],r=s.renderedStr,l=s.answers.findIndex(c=>c.ans.isCorrect);if(-1!=l){let c=s.answers.map(u=>u.renderedStr);r+="\n"+this.commonService.getCorrectAnsTxt(c,l)}r=this.commonService.parseQuestionContent(r),this.openSimilarSearch(r,i),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}setPointBelow(e,i){for(let o=i;o<this.lstQuest.length;o++)this.lstQuest[o].quest.isGroup||(this.lstQuest[o].point=e,this.setExtra({type:"point",data:e,q:this.lstQuest[o]},o==this.lstQuest.length-1))}editorFocus(e){var i;e&&e.length>0&&(null===(i=this.aztEditor)||void 0===i||i.goToLine(e[0].lineIdx+1))}onCopy(e,i){let o=this;i||(i="Copy");let s=r=>{var l;let c=G.Utils.capitalizeFirstLetter(null!==(l=e.quest.olabel)&&void 0!==l?l:"");navigator.clipboard.writeText(o.getQuestText(e));let u=this.commonService.myTranslateInstant("lang_auto_noi_dung"),d=this.commonService.myTranslateInstant("lang_auto_thanh_cong");o.showSuccessSnack(`${i} ${u} ${c} ${d}`)};document.addEventListener("copy",s),document.execCommand("copy"),document.removeEventListener("copy",s)}onCut(e){let i=this.commonService.myTranslateInstant("lang_auto_cat");this.onCopy(e,i),this.onDel(e,i)}onDel(e,i){var o,s,r,l,c,u;let d=[],m=G.Utils.capitalizeFirstLetter(null!==(o=e.quest.olabel)&&void 0!==o?o:""),p=this.commonService.myTranslateInstant("lang_auto_xoa");if(i||(i=p),(null!==(r=null===(s=e.quest.parts[0].text)||void 0===s?void 0:s.indexOf(".[L\u1ea5y ng\u1eabu nhi\xean"))&&void 0!==r?r:-1)>0||(null!==(c=null===(l=e.quest.parts[0].text)||void 0===l?void 0:l.indexOf(".[Random"))&&void 0!==c?c:-1)>0){let b=this.commonService.myTranslateInstant("lang_auto_nam_trong_nhom_lay_ngau_nhien"),y=this.commonService.myTranslateInstant("lang_auto_khong_thanh_cong");return this.showErrorSnack(`${m} ${b}, ${i} ${y}`),-1}d.push(...e.quest.parts.map(b=>b.lineIdx));for(let b of e.quest.answers)d.push(...b.parts.map(y=>y.lineIdx));return e.quest.help&&d.push(...e.quest.help.map(b=>b.lineIdx)),d=d.filter((b,y,C)=>C.indexOf(b)===y),null===(u=this.aztEditor)||void 0===u||u.removeLines(d,!0),d[0]}getQuestText(e,i=!0){var o,s,r;let l=G.Utils.capitalizeFirstLetter(null!==(o=e.quest.olabel)&&void 0!==o?o:"");this.defaultQuestionLabel&&(l=G.Utils.capitalizeFirstLetter(this.defaultQuestionLabel).trim()+" "+e.quest.label+".");let c=this.curExtraId;i&&(this.curExtraId++,this.extraMap.set(c+"",{d:e.point,audio:e.audio,file:e.attachments,fix:e.quest.isFixAns,tag:e.tag}));let d=[`${l}${i?`[!info:${c}]`:""} ${this.formatContent(e.renderedStr)}`],m="";if(e.renderedStr.indexOf('class="qv_string_eng_ans"')<0)for(let y of e.answers)d.push((y.ans.isCorrect?"*":"")+y.ans.label+". "+this.formatContent(y.renderedStr));else m=e.answers.filter(y=>y.ans.isCorrect)[0].ans.label;if(e.quest.strAns){let y=null!==(s=this.commonService.myTranslateInstant("azt_lang_sugg_ans_table_upper"))&&void 0!==s?s:"";d.push(`${y}\n${e.quest.label}. ${e.quest.strAns}`)}if(e.helpRenderedStr){let y=null!==(r=this.commonService.myTranslateInstant("lang_auto_loi_giai"))&&void 0!==r?r:"";d.push(y),d.push(this.formatContent(e.helpRenderedStr))}return(new be).revert(d.join("\n"),m)}formatContent(e){e=e.replaceAll("&lt;","<");let o=document.createElement("div");o.innerHTML=e;let s=o.getElementsByClassName("azt-mathml"),r=o.getElementsByTagName("img");for(let c=s.length-1;c>=0;c--){let u=s[c];if(!u)continue;let d=this.curMathId;this.mathMap.set("mathtype_"+this.curMathId,{id:d,str:u.innerHTML,lineIdx:0,startCol:0,endCol:0}),this.curMathId++;let p=document.createTextNode(`[!m:$mathtype_${d}$]`);o.replaceChild(p,u)}for(let c=r.length-1;c>=0;c--){let u=r[c];if(!u)continue;let d=this.images.length>0?Math.max(...this.images.map(p=>+p.id.split("_")[1]))+1:1;this.images.push({id:"img_"+d,link:u.src,cssStyle:u.style.cssText});let m=document.createTextNode(`[img:$img_${d}$]`);o.replaceChild(m,u)}return o.innerHTML.replaceAll("<br>","\n")}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}validate(){var e;let i=new Map,o=0;this.errs=this.errs.filter(s=>s.indexOf("Tr\xf9ng c\xe2u h\u1ecfi")<0),null===(e=this.aztEditor)||void 0===e||e.setError(this.errs);for(let s of this.lstQuest)"Tr\xf9ng c\xe2u h\u1ecfi"==s.err&&(s.err=void 0),s.id&&(i.has(s.id)&&this.fillError(o,"Tr\xf9ng c\xe2u h\u1ecfi"),i.set(s.id,1),o++)}fillError(e,i){var o;this.lstQuest[e].err=`<span style='color:red'>${i}</span>`;let r=this.lstQuest[e].quest.parts[0].lineIdx+1+"|"+i;-1==this.errs.indexOf(r)&&this.errs.push(r),null===(o=this.aztEditor)||void 0===o||o.setError(this.errs)}fillImg(e,i,o,s,r=!1){var l;let c=new RegExp("<div id='"+i+"'[^>]+></div>","g"),u=r&&this.lstQuestSimilar?this.lstQuestSimilar[e]:this.lstQuest[e];u.renderedStr=u.renderedStr.replace(c,o??"");for(let d of u.answers)d.renderedStr=d.renderedStr.replace(c,o??"");if(u.helpRenderedStr&&(u.helpRenderedStr=u.helpRenderedStr.replace(c,o??"")),s)for(let d of s){let m=this.renderCache.get(d);m&&this.renderCache.set(d,m.replace(c,o??""))}if(this.editQuestId>0){let d=this.getQuestText(u);d.indexOf("img-docx")<0&&(null===(l=this.aztEditor)||void 0===l||l._editor.setValue(d))}}loadSimilar(e,i){if(e){let o=l=>{this.fillQuest(i,l,!0)},s=l=>{"NO_DATA"==l?this.lstQuestSimilar=[]:this.showErrorSnack(l)};this.lstQuestSimilar=void 0,new Wn(this.cdnService,this.commonService,o,void 0,void 0,s,[],void 0,void 0,this.discoveryService).getSimilar(e,this.images,this.questionService)}}fillQuest(e,i,o=!1){var s,r,l,c;let u=this.commonService.myClone(i),d=this.lstQuest[e],m=0;if(o&&(this.lstQuestSimilar||(this.lstQuestSimilar=[]),this.lstQuestSimilar.push(u),m=this.lstQuestSimilar.length-1),d){u.label=d.label,u.point=d.point,u.lazyQuestView=d.lazyQuestView,u.isFixGroup=d.isFixGroup;let p=d.quest.isFixAns||u.quest.isFixAns;if(this.editorParsedData){let I=u.quest.strAns;if(u.quest=this.editorParsedData[e],u.quest.strAns=I,!o){let D=null!==(s=u.originCorrectAns)&&void 0!==s?s:"";for(let U of u.quest.answers)if(U.isCorrect){D=U.label;break}for(let U of u.answers)U.ans.isCorrect=U.ans.label==D}}u.quest.strAns?u.strAns=u.quest.strAns.split(/[\|]/).map(I=>I.trim()):u.strAns&&(u.quest.strAns=u.strAns.join("|"));let b=[];b.push(u.renderedStr),b.push(...u.answers.map(I=>I.renderedStr)),b.push(u.helpRenderedStr);let y=(I,D)=>{this.fillImg(o?m:e,I,D,b,o)};u.renderedStr=this.renderStr(u.renderedStr,"link",y,void 0,void 0,!1);for(const I of u.answers)I.renderedStr=this.renderStr(I.renderedStr,"link",y,void 0,void 0,!1);u.helpRenderedStr&&(u.helpRenderedStr=this.renderStr(u.helpRenderedStr,"link",y,void 0,void 0,!1));let C=3;if(u.answers.length>0&&(C=1),0==u.answers.length&&u.quest.strAns&&(C=4),u.type=C,p&&(u.quest.isFixAns=p),u.changeable=/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(null!==(l=null===(r=u.quest.parts[0].text)||void 0===r?void 0:r.split("=>")[0])&&void 0!==l?l:""),o||(this.lstQuest[e]=u),this.editQuestId>0){let I=this.getQuestText(u);I.indexOf("img-docx")<0&&(null===(c=this.aztEditor)||void 0===c||c._editor.setValue(I))}this.fillQuestCache.set(e+"-"+u.quest.parts[0].text,u),o||this.validate()}}renderText(e){let i=e;return i=this.renderStr(i,"help",(s,r)=>{let l=new RegExp("<div id='"+s+"'[^>]+></div>","g");i=i.replace(l,r??"")}),i}getLoadedIds(){return this.lstQuest.filter(e=>e.id&&e.id>0).map(e=>{var i;return null!==(i=e.id)&&void 0!==i?i:0})}getIncludeIds(e){var i;let l=(null===(i=this.aztEditor)||void 0===i?void 0:i._editor.getValue()).matchAll(/\[@Q(\d+):[^\]]*\]/g),c=[];for(;;){let d=l.next();if(d.done)break;c.push(+d.value[1])}let u=this.getLoadedIds();return c.push(-1),c.push(...u),c.filter(d=>(e??[]).indexOf(d)<0)}renderStr(e,i,o,s,r,l=!0){let c=this.renderCache.get(e);if(c&&!c.startsWith("Loading...|"))return c;let u=l?e.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("&lt;code>","<code>").replaceAll("&lt;/code>","</code>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):e,d=[new pe,new Bn(this.cdnService),new be,new $t,new Ie,new Vt,new yi(this.mathMap),new he,new jn.$(this.cdnService,this.commonService,this.configRenderService,o),new Wn(this.cdnService,this.commonService,s,this.apiCallbackCache,this.aztEditor,r,this.getIncludeIds(),this.apiDataCache,this.matrixLoadedData)];"link"==i&&(d=[new jn.$(this.cdnService,this.commonService,this.configRenderService,o)]),"help"==i&&d.pop();for(const m of d)m.setLoadingManager(this.loadingManager),u=m.render(u,this.images,this.questionService);return this.renderCache.set(e,u),u}renderQuest(e,i){var o,s;let r=3;e.answers.length>0&&(r=1),0==e.answers.length&&e.strAns&&(r=4);let l=(I,D)=>{this.fillImg(i,I,D)},c=I=>{this.fillQuest(i,I)},u=I=>{this.fillError(i,I)},d=e.parts.map(I=>{var D;return null!==(D=I.text)&&void 0!==D?D:""}).join("<br>").trim(),m=this.parseTag(d);""!=m[0]?d=m[1]:e.help&&e.help.length>0&&(m=this.parseTag(null!==(o=e.help[0].text)&&void 0!==o?o:""));let p=this.parseExtra(d);if("0"!=p.id){let I=this.extraMap.get(p.id);if(I&&I.replaceIdx>=0)return this.lstQuestReplace[I.replaceIdx]}""!=p.val&&(d=d.substring(0,p.idx)+d.substring(p.idx+p.val.length));let b=e.help?e.help.map(I=>{var D;return null!==(D=I.text)&&void 0!==D?D:""}).join("<br>").trim():void 0,y=this.lstQuest[i],C={renderedStr:this.renderStr(d,"full",l,c,u),quest:e,type:r,tag:""==m[0]?void 0:[{code:G.Utils.tagLang(m[0])}],lazyQuestView:y?y.lazyQuestView:void 0,strAns:e.strAns?e.strAns.split(/[\|]/).map(I=>I.trim()):void 0,label:this.upperFirst(null!==(s=e.olabel)&&void 0!==s?s:""),helpRenderedStr:b?this.renderStr(b,"full",l,c,u):void 0,answers:e.answers.map(I=>{let D=I.parts.map(U=>{var B;return null!==(B=U.text)&&void 0!==B?B:""}).join("<br>").trim();return{renderedStr:this.renderStr(D,"full",l,c,u),ans:I}})};if(C.renderedStr.startsWith("Loading...|")){let I=C.renderedStr.split("|");if(I[1].indexOf(",")<0){let U=+I[1];U>0&&(C.id=U)}C.renderedStr=I[0];let D=this.fillQuestCache.get(i+"-"+e.parts[0].text);D&&(C=D)}if("0"!=p.id){let I=this.extraMap.get(p.id);I&&(C.point=I.d,C.audio=I.audio,C.attachments=I.file,C.isFixGroup=C.quest.isGroup&&I.fix,C.tag=I.tag,C.quest.isFixAns||(C.quest.isFixAns=!C.quest.isGroup&&I.fix))}return this.editableEventObj.addCount(),C}openSimilarSearch(e,i){this.conf.similarQuest.show=!0,this.conf.similarQuest.txt=e,this.conf.similarQuest.idx=i,this.loadSimilar(e,i)}openMathEditor(e){var i;if(!e){let o=null===(i=this.aztEditor)||void 0===i?void 0:i.getCurPos();e={id:this.curMathId,str:'<math xmlns="http://www.w3.org/1998/Math/MathML"/>',lineIdx:o.lineNumber,startCol:o.column,endCol:o.column}}this.conf.mathEditor.show=!0,this.conf.mathEditor.latex=e}onInsertLatex(e){if(this.conf.mathEditor.show=!1,this.aztEditor){let i="mathtype_"+this.curMathId,o=`[!m:$${i}$]`;this.mathMap.set(i,{id:this.curMathId,str:"\\("+e.str+"\\)",lineIdx:e.lineIdx,startCol:e.startCol,endCol:e.startCol+o.length}),this.aztEditor.removeText(e.lineIdx,e.startCol,e.endCol,!1),this.aztEditor.insertAtCurPos(o),this.curMathId++}}replaceQuest(e){var i,o;let s=null!==(i=this.conf.similarQuest.idx)&&void 0!==i?i:0;this.conf.similarQuest.show=!1;let r=this.setExtra({q:this.lstQuest[s],type:"replace",data:this.lstQuestReplace.length});this.lstQuest[s]=e,e.quest.parts[0].text=(+r>0&&(null===(o=e.quest.parts[0].text)||void 0===o||!o.startsWith("[!info:"))?`[!info:${r}] `:"")+e.quest.parts[0].text,this.lstQuestReplace.push(e)}loadExample(e,i){var o,s;let r="vi"==i?Gt.EXAM_FULL:Gt.EXAM_FULL_EN;this.aztEditor&&""!=this.aztEditor._editor.getValue().trim()?null===(o=this.popupConfirm)||void 0===o||o.startConfirm("lang_auto_azt_edtor_confirm_chang_content").then(l=>{var c;l&&(null===(c=this.aztEditor)||void 0===c||c._editor.setValue(r[e-1]))}):this.aztEditor&&(null===(s=this.aztEditor)||void 0===s||s._editor.setValue(r[e-1]))}onShowFile(e,i){}onDropFile(e){(0,ot.C0)(e.type)?(0,ot.ml)(e.type)?this.showErrorSnack("lang_auto_chua_ho_tro_dinh_dang_video_vui_long_thu_lai"):(0,ot.hv)(e).then(i=>{this.attachFiles.push(i)}):this.showErrorSnack("lang_auto_pleas_upload_file_support")}setupEvent(){this.mapEventElement.push({eventName:"click",className:"img-docx",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_qts_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img-group-content",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_ats_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"azt-mathml",action:this.actionEditMathMl,caller:this})}actionEditImage(e){var i;if(e&&this.images.filter(o=>o.id==e.id).length>0){this.conf.imageEditor.show=!0,this.conf.imageEditor.el=e;let o=null===(i=this.aztEditor)||void 0===i?void 0:i._editor.getValue().split("\n"),s=0,r=0;for(let l of o)if(s++,r=l.indexOf(`[img:$${e.id}$]`),r>=0)break;setTimeout(()=>{var l;null===(l=this.aztEditor)||void 0===l||l.setPosition(s,r+1)},100)}}actionEditMathMl(e){var i;let o=e.id;const s=this.mathMap.get(o);s&&(null===(i=this.aztEditor)||void 0===i?void 0:i._editor.getValue().indexOf(`[!m:$${o}$]`))>=0&&setTimeout(()=>{var r;null===(r=this.aztEditor)||void 0===r||r.setPosition(s.lineIdx,s.startCol+1),this.openMathEditor(s)},100)}onPushImageAction(e){var i;if(this.conf.imageEditor.show=!1,e.element&&e.element.id&&this.aztEditor){let o=this.images.filter(u=>{var d;return u.id==(null===(d=e.element)||void 0===d?void 0:d.id)})[0];if(!o)return;let r="img_"+(this.images.length>0?Math.max(...this.images.map(u=>+u.id.split("_")[1]))+1:1),l=`[img:$${r}$]`;this.images.push({id:r,link:e.output,cssStyle:o?.cssStyle});let c=null===(i=this.aztEditor)||void 0===i?void 0:i.getCurPos();this.aztEditor.removeText(c.lineNumber,c.column,c.column+o.id.length+8,!1),this.aztEditor.insertAtCurPos(l)}}checkElementQuestionLazy(){if(this.lstQuest.length>=this.maxQuestEnableLazy){let e=document.getElementsByClassName("question-content");for(let i=0;i<e.length;i++){const o=e[i],s=null!==o.getAttribute("start_loading")&&"true"===o.getAttribute("start_loading"),r=o.getAttribute("data-idx-quest"),l=this.lstQuest[Number(r)];l&&(l.lazyQuestView||(l.lazyQuestView={show:!1}),s&&null!==r?l.lazyQuestView.show||(l.lazyQuestView.show=!0,l.lazyQuestView.curHeight="auto"):(l.lazyQuestView.curHeight=o.getBoundingClientRect().height+"px",l.lazyQuestView.show=!1))}}}checkTypeActionService(){const e=document.getElementById("list-quest-panel");e&&this.mapEventElement.forEach(i=>{const o=e.getElementsByClassName(i.className);for(let s=0;s<o.length;s++){const r=o[s];r.getAttribute("event_"+i.eventName+"_target")||(r.setAttribute("event_"+i.eventName+"_target","true"),r.addEventListener(i.eventName,()=>{i.action.call(i.caller,r)}))}})}showFeedbackQuestionDialog(e){this.dialog.open(ft.V,{width:"750px",data:{questionObj:e,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(o=>{})}onResize(e){this.conf.isCalculatorHeight=!1,this.actionResize()}actionResize(){const e=document.getElementById("toolbar__editor");e&&(this.conf.heightContent=window.innerHeight-e.getBoundingClientRect().height-96,this.isMobile&&(this.conf.heightContent=this.conf.heightContent/2),this.conf.isCalculatorHeight=!0)}ngOnInit(){super.ngOnInit(),this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_tai_thu_vien",this.isMobile=this.commonService.isMobileOrTable(),this.maxQuestEnableLazy=this.isMobile?1e4:this.maxQuestEnableLazy,(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i;this.conf.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.editQuestId=+(null!==(e=this.commonService.getMyParam(this.activeRoute,"quest_id"))&&void 0!==e?e:"0"),this.type=this.commonService.getMyQueryParamOrDefault("self","user"),this.defaultQuestionLabel=this.commonService.getMyQueryParam("defaultQuestLabel"),this.conf.typeMatrix=this.type,this.conf.sourceBackToLink=this.commonService.getMyQueryParam("backto"),this.conf.startIndex=Number(null!==(i=this.commonService.getMyQueryParam("r"))&&void 0!==i?i:"0"),this.conf.reSetBackToLink()}),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS,EDITOR_TEMPLATE").subscribe(e=>{this.aztLangConfig=e.CROPPDF_PARAMS,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.questionService.apiQuestionGetTagsGet().subscribe(i=>{var o;i.success&&i.data?this.questionTags=null!==(o=i.data.objs)&&void 0!==o?o:[]:this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.fileParser.loadConf(this.aztLangConfig),this.fileParser.init(),this.conf.isConfigInit=!0,"bank"==this.editorOutputDataService.getMode()&&this.openLibrary(),setTimeout(()=>{this.actionResize(),this.setupDropFile()},100)})}).catch(()=>{this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai")})})}ngDoCheck(){this.checkTypeActionService()}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0)}setupDropFile(){const e=window.jQuery("#list-quest-panel");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.handleFileDrop(i.originalEvent.dataTransfer.files)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio(),this.store.dispatch(Mt.qs())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ln),t.Y36(Ka),t.Y36(Do.$),t.Y36(Bt.CM),t.Y36(Bt.Zg),t.Y36(Bt.Oe),t.Y36(le.U),t.Y36(w.gz),t.Y36(Ps.yh),t.Y36(Rn),t.Y36(qn.K),t.Y36(Ui),t.Y36(Bt.aE),t.Y36(Ya.F),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-azota-editor"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Nr,5),t.Gf(to,5),t.Gf(ki,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.popupConfirm=o.first),t.iGM(o=t.CRH())&&(i.mobileEditor=o.first),t.iGM(o=t.CRH())&&(i.popupOnlyImageEditor=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(s){return i.onResize(s)},!1,t.Jf7)},features:[t.qOj],decls:16,vars:20,consts:[[3,"headerBackTolink","checkBackDialog","disableConfirmBtn","confirmTitle","showInput","examName","showConfirmButton","handleBackDialog","handleCancel","handleConfirm"],[1,"main__editor",3,"ngClass"],["class","app-editor",4,"ngIf"],["class","loading-mess",4,"ngIf"],["id","testFinderMask",4,"ngIf"],["type","file",1,"azt-hidden",3,"change"],["fileOpenProcess",""],["popupConfirm",""],[3,"inp","onClose","onInsertLatex",4,"ngIf"],[3,"inp","onClose","onInsert",4,"ngIf"],[3,"lstErrors","onClose",4,"ngIf"],[3,"lstQuest","onClose","onNextQuestion",4,"ngIf"],[3,"el_target","onClose","onPushImage",4,"ngIf"],["class","main__homework-save",4,"ngIf"],["class","main__exam-save",4,"ngIf"],[1,"app-editor"],["id","list-quest-panel"],["class","toolbar-editor box rounded-none","id","toolbar__question",4,"ngIf"],[1,"main-content",3,"scroll"],["class","question-content",4,"ngIf"],["class","question-content","load_effect_lazy","",3,"id","ngStyle",4,"ngFor","ngForOf"],[2,"height","250px"],[3,"class",4,"ngIf"],["id","toolbar__question",1,"toolbar-editor","box","rounded-none"],[1,"toolbar-left"],[1,"toolbar-right"],["azt-track-service","azota-editor-CH8a9F4wc","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-UuiDzppsVL","class","toolbar-btn color-danger",3,"click",4,"ngIf"],["class","toolbar-btn",3,"ngClass",4,"ngIf"],["azt-track-service","azota-editor-CH8a9F4wc",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["cx","12","cy","12","r","10"],["x1","12","x2","12","y1","16","y2","12"],["x1","12","x2","12.01","y1","8","y2","8"],[1,"azt-hidden","md:block"],["azt-track-service","azota-editor-UuiDzppsVL",1,"toolbar-btn","color-danger",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M14 2v6h6"],["d","m3 12.5 5 5"],["d","m8 12.5-5 5"],[1,"toolbar-btn",3,"ngClass"],[1,"toolbar-btn-input-mode"],[1,"w-5","h-5","inline-block","mr-2"],["name","arrow-up-down"],["type","number","appOnlyNumber","",3,"ngModel","min","ngModelChange","focus","focusout"],["azt-track-service","azota-editor-EMOtdhqulZ",1,"btn","btn-goto","btn-primary",3,"click"],[1,"question-content"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],[1,"box-service-content"],[1,"mb-5","tex2jax_process","homework-content",3,"innerHTML"],["class","box-show-files",4,"ngIf"],["class","box-input-file",4,"ngIf"],[1,"box-show-files"],[1,"box-line"],[4,"ngFor","ngForOf"],[1,"box-file"],["azt-track-service","azota-editor-VmAdzC0JVjO",1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],["azt-track-service","azota-editor-YPQZFq3W5pa",3,"click"],[1,"line-file",3,"title"],[1,"box-input-file"],[3,"onDropFile"],["load_effect_lazy","",1,"question-content",3,"id","ngStyle"],["class","box-service box border border-slate-400 dark:border-darkmode-400",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["reportQTakeTest","","class","feedback-btn",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],["azt-track-service","azota-editor-t2MSjyyGi8_",1,"link-option",3,"click"],[1,"box-service-header","w-full"],[3,"q","notOnlyQuestEdit","index","questionTags","onChangeQuest","onRandomQuest","onApplyAllTag","onError","onLabelClick","onHotKeyPointSync","onExtraInfo","onCut","onDel","onCopy"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"innerHTML","click"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"matTooltipPosition","matTooltip","ngClass","click"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"innerHTML","ngClass","click"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"innerHTML","click"],[1,"exam-box",3,"innerHTML"],["reportQTakeTest","",1,"feedback-btn"],["azt-track-service","azota-editor-QmBorNGdB","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],[1,"skeleton-box-loading","h-100","w-100"],["id","toolbar__editor",1,"toolbar-editor","box","rounded-none"],["azt-track-service","azota-editor-PYOwtUkbiHX","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-RriKBPZhZhL","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-SevIBYRKYxI","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-nphQ4dxT9FC","class","toolbar-btn",3,"click",4,"ngIf"],["class","toolbar-btn",4,"ngIf"],[3,"config","readOnly","editorApiService","onStartProcessFile","onInit"],["class","footer-editor",4,"ngIf"],["azt-track-service","azota-editor-PYOwtUkbiHX",1,"toolbar-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["azt-track-service","azota-editor-RriKBPZhZhL",1,"toolbar-btn",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","azota-editor-SevIBYRKYxI",1,"toolbar-btn",3,"click"],["d","M18 7V4H6l6 8-6 8h12v-3"],["azt-track-service","azota-editor-nphQ4dxT9FC",1,"toolbar-btn",3,"click"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"toolbar-btn"],[1,"btn-transpanrent",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","w-56","relative"],[1,"dropdown-content"],["azt-track-service","azota-editor-a3UJXgWi4cK",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","azota-editor-55CS__ezSf3",1,"dropdown-item",3,"click"],["x","6","y","14","width","9","height","6","rx","2"],["x","6","y","4","width","16","height","6","rx","2"],["d","M2 2v20"],[1,"footer-editor"],[1,"footer-item"],["azt-track-service","azota-editor-bC2YM9_C3mx",1,"text-primary",3,"click"],["azt-track-service","azota-editor-ENvq0_KzaKp",1,"text-primary",3,"click"],["azt-track-service","azota-editor-lHk43akYxBc",1,"text-primary",3,"click"],["azt-track-service","azota-editor-zb38B_roeqf",1,"text-primary",3,"click"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"],["id","testFinderMask"],[1,"box","border","border-slate-400","dark:border-darkmode-400",3,"isFirstTime","closeTestFinder"],[3,"inp","onClose","onInsertLatex"],[3,"inp","onClose","onInsert"],[3,"lstErrors","onClose"],[3,"lstQuest","onClose","onNextQuestion"],[3,"el_target","onClose","onPushImage"],[1,"main__homework-save"],[3,"onBack"],[1,"main__exam-save"]],template:function(e,i){1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleBackDialog",function(){return i.conf.showEditor()})("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),t.TgZ(1,"div",1),t.YNc(2,Bc,8,7,"div",2),t.qZA(),t.YNc(3,Rc,9,3,"div",3),t.YNc(4,ri,2,1,"div",4),t.TgZ(5,"input",5,6),t.NdJ("change",function(s){return i.openFile(s)}),t.qZA(),t._UZ(7,"editor-confirm",null,7),t.YNc(9,zc,1,1,"mathtype-editor",8),t.YNc(10,$r,1,1,"similar-quest",9),t.YNc(11,Kr,1,1,"show-errors-quests",10),t.YNc(12,xa,1,1,"show-info-quests",11),t.YNc(13,js,1,1,"only-image-editor",12),t.YNc(14,eo,2,0,"div",13),t.YNc(15,Jc,2,0,"div",14),t.qZA()),2&e&&(t.Q6J("headerBackTolink",i.conf.getBackLink())("checkBackDialog",!i.conf.editor.show)("disableConfirmBtn",i.editQuestId>0&&!i.editableEventObj.isChange)("confirmTitle",0==i.editQuestId?"lang_auto_tiep_tuc":"lang_buttom_save")("showInput",i.conf.editor.show&&!i.editQuestId)("examName",i.title)("showConfirmButton",i.conf.editor.show),t.xp6(1),t.Q6J("ngClass",t.VKq(18,Go,!i.conf.editor.show)),t.xp6(1),t.Q6J("ngIf",i.conf.isConfigInit),t.xp6(1),t.Q6J("ngIf",i.conf.logConfig.status),t.xp6(1),t.Q6J("ngIf",i.conf.startLibrary),t.xp6(5),t.Q6J("ngIf",i.conf.mathEditor.show),t.xp6(1),t.Q6J("ngIf",i.conf.similarQuest.show),t.xp6(1),t.Q6J("ngIf",i.conf.showErrorsQuests.show),t.xp6(1),t.Q6J("ngIf",i.conf.showInfomationQuests.show),t.xp6(1),t.Q6J("ngIf",i.conf.imageEditor.show),t.xp6(1),t.Q6J("ngIf",i.conf.homeworkSave.show),t.xp6(1),t.Q6J("ngIf",i.conf.examSave.show))},styles:['#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{position:relative;padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-mode-normal[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;width:60px;margin-left:10px;font-size:smaller;border-radius:5px}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.toolbar-btn[_ngcontent-%COMP%]   .btn-goto[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{height:30px;margin-left:5px}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0;padding:5px 20px}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.col-questions[_ngcontent-%COMP%]   .toolbar-editor[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:#1b1f230a 0 1px,#ffffff40 0 1px inset}.col-questions[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{height:100%;overflow:auto}.question-content[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .quest-err{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .quest-err:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .height40{height:40px!important}.hover-none[_ngcontent-%COMP%]:hover{background-color:transparent!important}']}),n})();function Hc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.actionClose())}),t.qZA(),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",6),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.actionClose())}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",7),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"div",9),t.TgZ(15,"div",10)(16,"span",11)(17,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.actionClose())}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"button",13),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.actionClose(!0))}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,4,"lang_auto_xac_nhan")," "),t.xp6(6),t.hij(" ",t.lcZ(12,6,e.msgConfirm)," "),t.xp6(7),t.hij(" ",t.lcZ(19,8,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," ")}}let Ti=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.showConfirm=!1,this.msgConfirm=""}actionClose(e){this.showConfirm=!1,this.callback&&this.callback(e||!1)}startConfirm(e){return new Promise(i=>{this.msgConfirm=e,this.showConfirm=!0,this.callback=o=>{i(o)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["editor-confirm"]],features:[t.qOj],decls:1,vars:1,consts:[["class","box-dialog",4,"ngIf"],[1,"box-dialog"],["azt-track-service","confirm-KaF7r9iJd",1,"overlay",3,"click"],[1,"dialog","box"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","confirm-uojtwFwgYyj",1,"dialog-close",3,"click"],[1,"dialog-body"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-confirm"],[1,"mr-3"],["azt-track-service","confirm-IkBjzbPeZUQ",1,"btn","btn-secondary","mr-2","w-24",3,"click"],["azt-track-service","confirm-PuBYMRtw1El",1,"btn","btn-primary","w-24",3,"click"]],template:function(e,i){1&e&&t.YNc(0,Hc,23,12,"div",0),2&e&&t.Q6J("ngIf",i.showConfirm)},styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.dialog[_ngcontent-%COMP%]{margin-top:7vh;width:550px;box-shadow:#0000003d 0 3px 8px}.overlay[_ngcontent-%COMP%]{background-color:#0000004d;width:100%;height:100vh;position:absolute}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}"]}),n})(),qs=(()=>{class n extends st.Q{constructor(e){super(),this.cdnService=e,this.onClose=new t.vpe,this.onPushImage=new t.vpe,this.el=null,this.src_source="",this.is_load_libs=!1}actionClose(){this.onClose.emit()}actionFinish(){this.onPushImage.emit({element:this.el_target,source:this.src_source,output:this.editor._imgCtx.canvas.toDataURL("image/png",1)})}startLoad(){this.is_load_libs=!1,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"}]).then(()=>{var e;if(this.is_load_libs=!0,this.el_target){this.src_source=this.el_target.getAttribute("src")||"";var i=document.createElement("img");null===(e=this.el)||void 0===e||e.appendChild(i),i.onload=()=>{var o,s;const r=mnpaint.getInstance();r.startSession(i),r.config.width=null===(o=this.el)||void 0===o?void 0:o.clientWidth,r.config.height=null===(s=this.el)||void 0===s?void 0:s.clientHeight,r.config.resizable=!1,r.config.stopWhenClickOutsize=!1,r.config.stopWhenClickOutside=!1,r.config.autoUpdateSource="change",this.editor=r},i.src=this.src_source}})}uploadImageAction(){this.editor._fileInput.click()}addTextAction(){this.editor._addText()}cropAction(){this.editor._setSelectionType("crop")}undoAction(){this.editor._undo()}redoAction(){this.editor._redo()}zoomAction(e){e?this.editor.zoomIn():this.editor.zoomOut()}ngAfterViewInit(){this.el=document.getElementById("only-image-editor_image__process"),this.startLoad()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(le.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["only-image-editor"]],inputs:{el_target:"el_target"},outputs:{onClose:"onClose",onPushImage:"onPushImage"},features:[t.qOj],decls:66,vars:6,consts:[[1,"box-dialog"],["azt-track-service","imageEditor-E8qc0UaMWsA",1,"dialog-overlay",3,"click"],[1,"dialog","box"],[1,"dialog-body"],[1,"img-editor-bx"],[1,"bx-content"],[1,"az-editor"],[1,"az-editor-top-bar"],[1,"top-bar-tool",2,"width","55px"],[1,"top-bar-tool"],[1,"top-bar-tool-item"],["azt-track-service","imageEditor-Z62bVA0hAQV","matTooltip","Undo",1,"btn-az-text","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M3 7v6h6"],["d","M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"],["azt-track-service","imageEditor-_e7HTV21HlD","matTooltip","Redo",1,"btn-az-text",3,"click"],["d","M21 7v6h-6"],["d","M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"],["azt-track-service","imageEditor-z4iVO06Ys6H","matTooltip","Zoom +",1,"btn-az-text","mr-2",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["azt-track-service","imageEditor-690dZE83J6L","matTooltip","Zoom -",1,"btn-az-text",3,"click"],[1,"az-editor-body"],[1,"az-editor-slide-bar"],[1,"az-tool"],["azt-track-service","imageEditor-qzyGDqt8nDW",1,"az-tool-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"az-tool-icon"],["d","M6 2v14a2 2 0 0 0 2 2h14"],["d","M18 22V8a2 2 0 0 0-2-2H2"],["azt-track-service","imageEditor-RUdGS0nAto3",1,"az-tool-item",3,"click"],["points","4 7 4 4 20 4 20 7"],["x1","9","y1","20","x2","15","y2","20"],["x1","12","y1","4","x2","12","y2","20"],["azt-track-service","imageEditor-efAq1HoIGbC",1,"az-tool-item",3,"click"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"az-editor-main"],["id","only-image-editor_image__process",1,"az-editor-content"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","imageEditor-DcXjxkUVcBd",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","imageEditor-GDQpZCPJRZZ",1,"btn","btn-primary","w-20",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"div",8),t.TgZ(9,"div",9)(10,"div",10)(11,"button",11),t.NdJ("click",function(){return i.undoAction()}),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"path",14),t.qZA()(),t.kcU(),t.TgZ(15,"button",15),t.NdJ("click",function(){return i.redoAction()}),t.O4$(),t.TgZ(16,"svg",12),t._UZ(17,"path",16)(18,"path",17),t.qZA()()()(),t.kcU(),t.TgZ(19,"div",9)(20,"div",10)(21,"button",18),t.NdJ("click",function(){return i.zoomAction(!0)}),t.O4$(),t.TgZ(22,"svg",12),t._UZ(23,"circle",19)(24,"line",20)(25,"line",21)(26,"line",22),t.qZA()(),t.kcU(),t.TgZ(27,"button",23),t.NdJ("click",function(){return i.zoomAction()}),t.O4$(),t.TgZ(28,"svg",12),t._UZ(29,"circle",19)(30,"line",20)(31,"line",22),t.qZA()()()()(),t.kcU(),t.TgZ(32,"div",24)(33,"div",25)(34,"nav",26)(35,"button",27),t.NdJ("click",function(){return i.cropAction()}),t.O4$(),t.TgZ(36,"svg",28),t._UZ(37,"path",29)(38,"path",30),t.qZA(),t.kcU(),t.TgZ(39,"span"),t._uU(40,"Crop"),t.qZA()(),t.TgZ(41,"button",31),t.NdJ("click",function(){return i.addTextAction()}),t.O4$(),t.TgZ(42,"svg",28),t._UZ(43,"polyline",32)(44,"line",33)(45,"line",34),t.qZA(),t.kcU(),t.TgZ(46,"span"),t._uU(47,"Text"),t.qZA()(),t.TgZ(48,"button",35),t.NdJ("click",function(){return i.uploadImageAction()}),t.O4$(),t.TgZ(49,"svg",28),t._UZ(50,"path",36)(51,"path",37)(52,"path",38),t.qZA(),t.kcU(),t.TgZ(53,"span"),t._uU(54,"Upload"),t.qZA()()()(),t.TgZ(55,"div",39),t._UZ(56,"div",40),t.qZA()()()()()(),t.TgZ(57,"div",41),t._UZ(58,"div",42),t.TgZ(59,"div",43)(60,"button",44),t.NdJ("click",function(){return i.actionClose()}),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"button",45),t.NdJ("click",function(){return i.actionFinish()}),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(61),t.hij(" ",t.lcZ(62,2,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(65,4,"lang_auto_luu")," "))},styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:90vw;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #dfe0e5;justify-content:space-between;align-items:center}.az-editor[_ngcontent-%COMP%]{width:100%}.az-editor-top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #dfe0e5;padding:10px}.az-editor-body[_ngcontent-%COMP%]{display:flex}.az-editor-slide-bar[_ngcontent-%COMP%]{border-right:1px solid #dfe0e5;border-top:0px;flex-direction:column;flex-shrink:0;height:70vh;width:80px;overflow:hidden auto}.az-editor-main[_ngcontent-%COMP%]{background:#f7f7f8;width:100%}.az-editor-content[_ngcontent-%COMP%]{width:100%;height:100%}.az-editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.top-bar-tool[_ngcontent-%COMP%]{display:flex;margin-right:20px}.top-bar-tool-item[_ngcontent-%COMP%]{display:flex;align-items:center;color:#5d647b;font-size:12px}.top-bar-tool-input[_ngcontent-%COMP%]{border:1px solid #dfe0e5;border-radius:5px;width:50px;color:#5d647b;margin-left:5px;padding-left:3px;padding-right:3px}.az-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column}.az-tool-item[_ngcontent-%COMP%]{padding:10px 24px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#5d647b;background:transparent;border:none;-webkit-user-select:none;user-select:none;text-transform:initial;transition:all .5s}.az-tool-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.az-tool-item[_ngcontent-%COMP%]:hover{color:#1e41af;font-weight:500}.az-tool-icon[_ngcontent-%COMP%]{width:24px;height:24px}.az-tool[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#1e41af;font-weight:500}.btn-az-text[_ngcontent-%COMP%]{border:none;background:transparent;color:#5d647b;transition:all .5s}.btn-az-text[_ngcontent-%COMP%]:hover:not([disabled]){color:#1e41af}.btn-az-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px}.btn-az-text[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 768px){.top-bar-tool[_ngcontent-%COMP%]{margin-right:10px}.top-bar-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]}),n})();var Va=A(25631);const Xa=function(n,a){return{left:n,bottom:a}},$c=function(){return{}},ts=["*"];let Re=(()=>{class n extends st.Q{constructor(){super(...arguments),this.isConfig=!0,this.bottom=-60,this.left=-5}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["common-tooltip"]],inputs:{isConfig:"isConfig",bottom:"bottom",left:"left"},features:[t.qOj],ngContentSelectors:ts,decls:3,vars:6,consts:[[1,"qv_tooltip"],[1,"content_tooltip"]],template:function(e,i){1&e&&(t.F$t(),t.TgZ(0,"span",0)(1,"span",1),t.Hsn(2),t.qZA()()),2&e&&t.Akn(i.isConfig?t.WLB(2,Xa,i.left+"px",i.bottom+"px"):t.DdM(5,$c))},styles:['.qv_tooltip[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px;position:absolute;z-index:999;width:400px;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #faebd7}']}),n})();var Bi=A(3238),Xn=A(77331),qe=A(97392),ke=A(28255),no=A(84385),Le=A(10266),_t=A(1033);let Fs=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[E.ez,M.j,h.u5,h.UX,Z.Z,g.Z_]}),n})();t.B6R(Va.X,[E.mk,E.sg,E.O5,Bi.ey,Xn.HS,Xn.z2,Xn.qH,qe.Hw,ke.VK,ke.OP,ke.p6,no.gD,Le.gM,h.Fj,h.JJ,h.On,Re],[_t.bT]),t.B6R(Ti,[E.O5,qe.Hw],[_t.bT]),t.B6R(qs,[Le.gM],[_t.bT]);var jo=A(60139),zn=A(90537),Wo=A(8277),es=A(24149),Qs=A(96551),Ai=A(85053),Si=A(72491),va=A(1574),Ri=A(41303),Vo=A(79001),Us=A(50136),Bs=A(284),Fn=A(59549),xe=A(91350),Pe=A(49692),zi=A(16883),Ne=A(73727);function hn(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Kc(n,a){1&n&&(t.TgZ(0,"div",71),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function qo(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function xo(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function vo(n,a){1&n&&(t.TgZ(0,"div",72),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Yc(n,a){1&n&&(t.TgZ(0,"div",85),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function io(n,a){if(1&n&&(t.TgZ(0,"div",83),t.YNc(1,Yc,3,3,"div",84),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}const oo=function(n){return{"h-56-important":n}};function Gc(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",73)(2,"div",74)(3,"div",75)(4,"h3",76),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",77),t._UZ(8,"azt-list-classroom-checkall",78),t.qZA()(),t.TgZ(9,"div",79)(10,"ng-scrollbar",80),t._UZ(11,"azt-list-classroom-checkbox",81),t.qZA()()()(),t.YNc(12,io,2,1,"div",82),t.BQk()),2&n){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",e.form)("objs",e.classroomObjs)("permissionName",e.permissionTypes.homework),t.xp6(2),t.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",t.VKq(14,oo,e.isMobileWebView)),t.xp6(1),t.Q6J("form",e.form)("objs",e.classroomObjs)("homeworkObj",e.homeworkObj)("permissionName",e.permissionTypes.homework),t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors)}}function Wc(n,a){if(1&n&&(t.TgZ(0,"div",86)(1,"div",87)(2,"span",88),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"span",89),t._uU(6),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_da_giao_bai_tap_cho_lop")+": "," "),t.xp6(3),t.hij(" ",e.classroomObj.name," ")}}function Vc(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",90),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.saveNewOrConfigHomework(0))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.form.invalid||e.checkDeadLineValid(e.form.controls.homeworkStartDate.value,e.form.controls.homeworkDeadline.value)<=0),t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_luu_nhap")," ")}}function Yr(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"h3",6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",9)(14,"div",11),t._UZ(15,"input",12),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,Kc,3,3,"div",13),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"label",16),t._uU(21),t.ALo(22,"mytranslate"),t.O4$(),t.TgZ(23,"svg",17),t.ALo(24,"mytranslate"),t._UZ(25,"circle",18)(26,"line",19)(27,"line",20),t.qZA()()(),t.kcU(),t.TgZ(28,"div",15)(29,"div",21)(30,"div",22)(31,"mat-form-field",23)(32,"input",24),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(43);return t.KtG(o.open())}),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",25),t.NdJ("click",function(o){return t.CHM(e),t.MAs(43).open(),t.KtG(o.stopPropagation())}),t.O4$(),t.TgZ(35,"svg",26),t._UZ(36,"path",27)(37,"path",28)(38,"path",29)(39,"path",30)(40,"path",31)(41,"path",32),t.qZA()(),t.kcU(),t.TgZ(42,"ngx-mat-datetime-picker",null,33),t.YNc(44,qo,2,0,"ng-template"),t.qZA()()(),t.TgZ(45,"div",22)(46,"mat-form-field",23)(47,"input",34),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(58);return t.KtG(o.open())}),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"button",35),t.NdJ("click",function(o){return t.CHM(e),t.MAs(58).open(),t.KtG(o.stopPropagation())}),t.O4$(),t.TgZ(50,"svg",26),t._UZ(51,"path",27)(52,"path",28)(53,"path",29)(54,"path",30)(55,"path",31)(56,"path",32),t.qZA()(),t.kcU(),t.TgZ(57,"ngx-mat-datetime-picker",null,36),t.YNc(59,xo,2,0,"ng-template"),t.qZA()()(),t.TgZ(60,"div",37)(61,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearTime())}),t.O4$(),t.TgZ(62,"svg",39),t._UZ(63,"path",40)(64,"path",41)(65,"path",42)(66,"path",43),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(69,"div",44)(70,"div",45),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.YNc(73,vo,3,3,"div",46),t.qZA()()(),t.TgZ(74,"div",47)(75,"div",48)(76,"label",49),t._uU(77),t.ALo(78,"mytranslate"),t.qZA()(),t.TgZ(79,"div",50)(80,"div",51)(81,"div",52),t._UZ(82,"input",53),t.TgZ(83,"label",54),t._uU(84),t.ALo(85,"mytranslate"),t.qZA()(),t.TgZ(86,"div",55),t._UZ(87,"input",56),t.TgZ(88,"label",57),t._uU(89),t.ALo(90,"mytranslate"),t.qZA()()()()(),t.TgZ(91,"div",58)(92,"div",48)(93,"label",49),t._uU(94),t.ALo(95,"mytranslate"),t.qZA()(),t.TgZ(96,"div",50)(97,"div",51)(98,"div",52),t._UZ(99,"input",59),t.TgZ(100,"label",60),t._uU(101),t.ALo(102,"mytranslate"),t.qZA()(),t.TgZ(103,"div",55),t._UZ(104,"input",61),t.TgZ(105,"label",62),t._uU(106),t.ALo(107,"mytranslate"),t.qZA()()()()(),t.TgZ(108,"div",63)(109,"div",64)(110,"div",65),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()(),t.YNc(113,Gc,13,16,"ng-container",0),t.YNc(114,Wc,7,4,"ng-template",null,66,t.W1O),t.qZA()(),t.TgZ(116,"div",67)(117,"div",68),t.YNc(118,Vc,3,4,"button",69),t.TgZ(119,"button",70),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveNewOrConfigHomework(1))}),t._uU(120),t.ALo(121,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.MAs(43),i=t.MAs(58),o=t.MAs(115),s=t.oxw();t.xp6(1),t.Q6J("formGroup",s.form),t.xp6(4),t.hij(" ",t.lcZ(6,26,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,28,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,30,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",s.form.controls.homeworkName.errors),t.xp6(4),t.hij(" ",t.lcZ(22,32,"lang_testbank_test_config_time_assigne_homework")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(24,34,"lang_homework_add_home_work_startDate_introduce")),t.xp6(9),t.s9C("placeholder",t.lcZ(33,36,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(15),t.s9C("placeholder",t.lcZ(48,38,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",i),t.xp6(20),t.hij(" ",t.lcZ(68,40,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(72,42,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(2),t.Q6J("ngIf",s.calculatorTimeValidate(s.form.controls.homeworkDeadline.value,s.form.controls.homeworkStartDate.value)<=0),t.xp6(4),t.hij(" ",t.lcZ(78,44,"lang_auto_cho_xem_ket_qua")," "),t.xp6(7),t.hij(" ",t.lcZ(85,46,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(90,48,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(95,50,"lang_auto_dang_nhap_de_nop_bai")," "),t.xp6(7),t.hij(" ",t.lcZ(102,52,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(107,54,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(112,56,"lang_auto_giao_cho_lop")," "),t.xp6(2),t.Q6J("ngIf","2"==s.form.controls.whoAllow.value)("ngIfElse",o),t.xp6(5),t.Q6J("ngIf",1!=s.homeworkObj.isPublished),t.xp6(1),t.Q6J("disabled",s.form.invalid||s.checkDeadLineValid(s.form.controls.homeworkStartDate.value,s.form.controls.homeworkDeadline.value)<=0),t.xp6(1),t.hij(" ",t.lcZ(121,58,"lang_auto_xuat_ban")," ")}}let Rs=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d){super(),this.formBuilder=e,this.activeRoute=i,this.timeService=o,this.documentConfigService=s,this.editorOutputDataService=r,this.homeworkService=l,this.userService=c,this.sEAztClassroomCheckboxService=u,this.uploadImageOfHomeworkService=d,this.onBack=new t.vpe,this.form=new h.nJ({}),this.permissionTypes=Ai.$,this.homeworkId=0,this.homeworkHashId="",this.classroomObjs=[],this.classroomObj={},this.homeworkObj={},this.isUpdate=!1,this.homeWorkContent="",this.createHomeworkEditorData={}}redirectBackTo(){this.onBack.emit()}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}clearTimeStart(){this.form.controls.homeworkStartDate.setValue("")}calculatorTimeValidate(e,i){return""!=e&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(e,i):1}checkDeadLineValid(e,i){return""!=e&&""!=i?this.timeService.getDiffFromTwoDateWithZeroSecond(i,e):1}saveNewOrConfigHomework(e){var i,o;this.isUpdate?this.updateHomework(e):(this.initStatusObj(),this.homeWorkContent=null!==(o=null===(i=this.createHomeworkEditorData.homework)||void 0===i?void 0:i.content)&&void 0!==o?o:"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(s=>{null==s.errorMessage?(this.homeWorkContent=s.content,this.createHomework(e)):(this.showErrorSnack(s.errorMessage),this.stopStatusObj())}))}updateHomework(e){let i=this.commonService.getFormObj(this.form);i.homeworkStartDate=""===i.homeworkStartDate||null===i.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate),i.homeworkDeadline=""===i.homeworkDeadline||null===i.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline);var o=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.homework);const s=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,o,i.classroomIds);this.initStatusObj();let r={name:i.homeworkName,startDate:i.homeworkStartDate,deadline:i.homeworkDeadline,mustVerified:i.mustVerified,whenShowAnswer:parseInt(i.whenShowAnswer),enableUpdateDeadLine:1,classroomIds:2==i.whoAllow?s:void 0,isPublished:e||(null!=this.homeworkObj?this.homeworkObj.isPublished:0)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,r).subscribe(l=>{var c,u,d,m;if(1==l.success){let y=null!==(c=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==c?c:"";var p=[];if(null!==(u=l.data)&&void 0!==u&&u.objs)for(var b=0;b<l.data.objs.length;b++)p.push(null===(d=l.data)||void 0===d?void 0:d.objs[b].hashId);let C=`/admin/testbank/config-homework/${y??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${y??0}/${JSON.stringify(p)}`,`?backto=${C}`),this.successStatusObj(r.isPublished?"lang_auto_xuat_ban_thanh_cong":"lang_auto_luu_thanh_cong_chua_xuat_ban",!0)}else this.errorStatusObj(null!==(m=l.message)&&void 0!==m?m:"",!0)}))}createHomework(e){var i,o;let s=this.commonService.getFormObj(this.form);s.homeworkStartDate=""===s.homeworkStartDate||null===s.homeworkStartDate?null:this.timeService.formatDateTimeToPostToServer(s.homeworkStartDate),s.homeworkDeadline=""===s.homeworkDeadline||null===s.homeworkDeadline?null:this.timeService.formatDateTimeToPostToServer(s.homeworkDeadline);var r=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.homework);const l=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,r,s.classroomIds);if(this.form.invalid)this.showErrorSnack(l.length<=0?"lang_auto_please_select_classroom":"lang_auto_vui_long_nhap_day_du_thong_tin");else{this.initStatusObj();let c=this.userService.getUserObj(),u=JSON.stringify({type:"homework",id:this.homeworkId,user:c.id}),d={name:s.homeworkName,content:this.homeWorkContent,files:null!==(o=null===(i=this.createHomeworkEditorData.homework)||void 0===i?void 0:i.files)&&void 0!==o?o:"",startDate:s.homeworkStartDate,deadline:s.homeworkDeadline,mustVerified:s.mustVerified,whenShowAnswer:parseInt(s.whenShowAnswer),classroomIds:l,isPublished:e,categoryId:this.commonService.getMyParam(this.activeRoute,"cat_id")?Number(this.commonService.getMyParam(this.activeRoute,"cat_id")):0};this.subscriptions.add(this.homeworkService.apiHomeworkSaveObjPost(u,d).subscribe(m=>{var p,b,y,C;if(1==m.success){let U=null!==(p=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==p?p:"";if(d.isPublished){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);var I=[];if(null!==(b=m.data)&&void 0!==b&&b.objs)for(var D=0;D<m.data.objs.length;D++)I.push(null===(y=m.data)||void 0===y?void 0:y.objs[D].hashId);let B=`/admin/testbank/config-homework/${U??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${U??0}/${JSON.stringify(I)}`,`?backto=${B}`)}else this.myNavigationWithQueryString("/admin/testbank/document-management/1/0/1",`?backto=/admin/testbank/config-homework/${U??0}/${this.homeworkHashId}`),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(null!==(C=m.message)&&void 0!==C?C:"",!0)}))}}getHomework(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(e,[]).subscribe(i=>{var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R;if(1==i.success){this.classroomObjs=null!==(s=null===(o=i?.data)||void 0===o?void 0:o.classroomObjs)&&void 0!==s?s:new Array,this.homeworkObj=null!==(l=null===(r=i?.data)||void 0===r?void 0:r.homeworkObj)&&void 0!==l?l:{};let et=null!==(u=null===(c=this.homeworkObj)||void 0===c?void 0:c.classroomId)&&void 0!==u?u:0;if(et){for(let V=0;V<this.classroomObjs.length;V++)if(this.classroomObjs[V].id==et){this.classroomObj=this.classroomObjs[V];break}}else this.classroomObj=this.classroomObjs.length>0?this.classroomObjs[0]:{};this.createHomeworkEditorData=this.isUpdate?this.createHomeworkEditorData:this.editorOutputDataService.getOutputData();let Q=null!==(b=null!==(m=null===(d=this.createHomeworkEditorData.homework)||void 0===d?void 0:d.name)&&void 0!==m?m:null===(p=this.homeworkObj)||void 0===p?void 0:p.name)&&void 0!==b?b:"";this.form.patchValue({homeworkName:Q,homeworkStartDate:null!=(null===(y=this.homeworkObj)||void 0===y?void 0:y.startDate)?null===(C=this.homeworkObj)||void 0===C?void 0:C.startDate:"",homeworkDeadline:null!=(null===(I=this.homeworkObj)||void 0===I?void 0:I.deadline)?null===(D=this.homeworkObj)||void 0===D?void 0:D.deadline:"",mustVerified:1==(null===(U=this.homeworkObj)||void 0===U?void 0:U.mustVerified)?"1":"0",whenShowAnswer:1==(null===(B=this.homeworkObj)||void 0===B?void 0:B.whenShowAnswer)?"1":"0",whoAllow:null!==(q=i.data)&&void 0!==q&&q.hasStudentAnswers&&this.isUpdate?"1":"2"}),this.successStatusObj()}else this.errorStatusObj(null!==(R=i.message)&&void 0!==R?R:"",!0)}))}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.homeworkHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",this.homeworkHashId?(this.isUpdate=!0,this.getHomework(this.homeworkHashId)):(this.isUpdate=!1,this.getHomework("add_new")),this.form=this.formBuilder.group({homeworkName:new h.p4("",[h.kI.required,Ri._.noWhiteSpace]),homeworkStartDate:new h.p4(""),homeworkDeadline:new h.p4(""),mustVerified:new h.p4("0"),whoAllow:new h.p4(this.isUpdate?"1":"2"),whenShowAnswer:new h.p4("1"),classroomIds:this.formBuilder.array([])},{validators:[va.h.classroomCheckBoxValidator]})}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(w.gz),t.Y36(Si.O),t.Y36(Bt.Cq),t.Y36(Rn),t.Y36(Bt.Lk),t.Y36(qn.K),t.Y36(Vo.L),t.Y36(Us.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["main-config-homework"]],outputs:{onBack:"onBack"},features:[t._Bn([{provide:zn.fM,useClass:es.HF,deps:[Bi.Ad,Wo.o8]},{provide:zn.ab,useFactory:Qs.hx,deps:[Si.O]}]),t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","main-config-7OYF4TAsq1","matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-wVzabbXyPl2","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],["startTime",""],["azt-track-service","main-config-mBwAoax2xyu","matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","main-config-L6psEhMGCUO","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","main-config-_41QHswfgPw",1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified","value","0",1,"form-check-input"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified","value","1",1,"form-check-input"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],["elseAllowed",""],[1,"my-5"],[1,"text-right"],["azt-track-service","main-config-xaAyYXPj2ZT","class","btn btn-pending w-24 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","main-config-3CEX8CXtLDk",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"col-span-12","mt-4","intro-y"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","homeworkObj","permissionName"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],[1,"col-span-12","mt-4"],[1,"bg-slate-100","dark:bg-darkmode-600","rounded-md","p-3"],[1,"text-md"],[1,"text-md","font-medium"],["azt-track-service","main-config-xaAyYXPj2ZT",1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,hn,1,0,"azt-loading-effect",0),t.YNc(1,Yr,122,60,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.mk,E.O5,Bs.Nt,Fn.KE,Fn.R9,Le.gM,zn.AB,zn.g2,P.KC,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,h.CE,xe.Q,Pe.M,zi.o,Ne.g,_t.bT],encapsulation:2}),n})();var Gr=A(61227),Ji=A(44262);function Xc(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14)(3,"line",15)(4,"line",16)(5,"line",17),t.qZA())}function tu(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14),t.qZA())}function eu(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Xc,6,0,"svg",11),t.YNc(2,tu,3,0,"svg",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==(null==e.dataObj.homework?null:e.dataObj.homework.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.homework?null:e.dataObj.homework.isPublished))}}function nu(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",20),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14)(4,"path",21),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function iu(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",22),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function ou(n,a){if(1&n&&(t.YNc(0,nu,5,3,"svg",18),t.YNc(1,iu,4,3,"svg",19)),2&n){const e=t.oxw();t.Q6J("ngIf",1==(null==e.dataObj.exam?null:e.dataObj.exam.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.exam?null:e.dataObj.exam.isPublished))}}function au(n,a){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_nop_bai"),": ",e.dataObj.deadline?t.lcZ(3,4,e.dataObj.deadline):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function su(n,a){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_lam_bai"),": ",null!=e.dataObj.exam&&e.dataObj.exam.minutes?(null==e.dataObj.exam?null:e.dataObj.exam.minutes)+" "+t.lcZ(3,4,"lang_auto_phut"):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function Wr(n,a){if(1&n&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_luot_lam")),t.xp6(2),t.hij(" ",e.dataObj.submited+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_luot_lam"))}}function Vr(n,a){if(1&n&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_da_nop")),t.xp6(2),t.hij(" ",e.dataObj.submited+"/"+e.dataObj.total+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_da_nop"))}}const ru=function(n){return{"bg-slate-100 dark:bg-darkmode-400":n}};let zs=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.dataObj={},this.showByClass=!1,this.viewType=""}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-file-item"]],inputs:{dataObj:"dataObj",showByClass:"showByClass",viewType:"viewType"},features:[t.qOj],decls:19,vars:19,consts:[[1,"box","p-3","flex","items-center","zoom-in",2,"min-height","102px",3,"ngClass"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],[4,"ngIf","ngIfElse"],["ExamIcon",""],[1,"ml-4","mr-auto","w-2/3"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium"],[3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-primary","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-primary"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["class","w-10 h-10 text-pending lucide","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","text-pending","lucide",3,"matTooltip"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-pending",3,"matTooltip"],[3,"matTooltip"],[1,"azt-hidden"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,eu,3,2,"div",2),t.YNc(3,ou,2,2,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"div",5,6),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(14,au,5,8,"div",8),t.YNc(15,su,5,8,"div",8),t.qZA(),t.TgZ(16,"div",9),t.YNc(17,Wr,6,7,"span",10),t.YNc(18,Vr,6,7,"span",10),t.qZA()()),2&e){const o=t.MAs(4),s=t.MAs(7);t.Q6J("ngClass",t.VKq(17,ru,"classroom"==i.viewType)),t.xp6(2),t.Q6J("ngIf","homework"==i.dataObj.type)("ngIfElse",o),t.xp6(4),t.s9C("matTooltip",i.dataObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),t.xp6(2),t.hij(" ",i.dataObj.name," "),t.xp6(3),t.AsE("",t.lcZ(12,13,"lang_auto_ngay_tao"),": ",t.lcZ(13,15,i.dataObj.createdAt),""),t.xp6(3),t.Q6J("ngIf","homework"==i.dataObj.type),t.xp6(1),t.Q6J("ngIf","exam"==i.dataObj.type),t.xp6(2),t.Q6J("ngIf","exam"==i.dataObj.type),t.xp6(1),t.Q6J("ngIf","homework"==i.dataObj.type)}},dependencies:[E.mk,E.O5,Le.gM,Ji.Q,_t.bT,_t.tO],encapsulation:2}),n})();var ns=A(51178);function lu(n,a){1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const cu=function(n){return[n]},uu=function(n){return{backto:n}};function Xr(n,a){if(1&n&&(t.TgZ(0,"div",17)(1,"a",18),t.ALo(2,"localize"),t._UZ(3,"azt-file-item",19),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw(3);let o;t.xp6(1),t.Q6J("routerLink",t.lcZ(2,5,t.VKq(7,cu,"exam"==e.type?"/admin/testbank/exam-results-list/"+(null!==(o=null==e.exam?null:e.exam.categoryId)&&void 0!==o?o:0)+"/"+(null==e.exam?null:e.exam.id)+"/0":"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(9,uu,"/admin/testbank/document-management/"+("exam"==e.type?"0":"1")+"/"+i.currentCategoryId+"/1")),t.xp6(2),t.Q6J("dataObj",e)("showByClass",!0)("viewType","classroom")}}function tl(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",15),t.YNc(2,Xr,4,11,"div",16),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",e.recommendDataObjs)}}function el(n,a){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_homework_classroom_list_not_found_homework")," "))}const du=function(n){return{cursor:n}};function _u(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6,7),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToClass(s))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.YNc(7,lu,3,3,"span",8),t.ALo(8,"fullPermission"),t.TgZ(9,"div",9)(10,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.viewAllDocumentClass(s))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",11),t.YNc(14,tl,3,1,"div",12),t.YNc(15,el,3,3,"ng-template",null,13,t.W1O),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.MAs(4),o=t.MAs(16),s=t.oxw();t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("ngStyle",t.VKq(16,du,e.id?"pointer":"default"))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,9,e.name)," "),t.xp6(2),t.Q6J("ngIf",0==s.checkPermissionObj(t.xi3(8,11,e.permissionObj,"classroom"))),t.xp6(4),t.hij(" ",t.lcZ(12,14,"lang_auto_xem_tat_ca")," "),t.xp6(3),t.Q6J("ngIf",e.recommendDataObjs&&e.recommendDataObjs.length>0)("ngIfElse",o)}}const mu=function(){return["name"]};let nl=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.activeRoute=e,this.dialog=i,this.documentService=o,this.cateObjs=[],this.classroomWithDocument=[],this.viewType=1,this.isOnLib=0,this.ExistClipboard=!1,this.searchKey="",this.isShowContextmenu=!1,this.isSort=!1,this.isSortByPublish=!1,this.isSortByPrice=!1,this.isSortByDateUpdated=!1,this.isSortByAttended=!1,this.currentCategoryId=0,this.page=0,this.dataDialogWarning={isShow:!1,content:""},this.demoData=[]}checkPermissionObj(e){return e}goToClass(e){e.id&&this.commonService.myNavigationWithQueryString("/admin/student/class-details/"+e.id,"?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.page}`))}viewAllDocumentClass(e){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+e.id+"/1","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.page}`))}getDataForClasses(){this.initStatusObj(),this.documentService.apiDocumentsGet(this.currentCategoryId,"category").subscribe(e=>{var i,o,s;1==e.success?(this.cateObjs=null!==(o=null===(i=e.data)||void 0===i?void 0:i.categoryObjs)&&void 0!==o?o:[],this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"",!0)})}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.page=Number(this.commonService.getMyParam(this.activeRoute,"page"))}),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"})}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(z.uw),t.Y36(Gr.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-folder-and-classes"]],inputs:{classroomWithDocument:"classroomWithDocument",viewType:"viewType",isOnLib:"isOnLib",ExistClipboard:"ExistClipboard",searchKey:"searchKey"},features:[t.qOj],decls:4,vars:7,consts:[["id","contentent-view-2"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3"],[1,"box",2,"min-height","300px"],[1,"flex","items-center","p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-classes-b2nw0JUA5LF",1,"font-medium","truncate","text-md",2,"max-width","40%",3,"ngStyle","matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-auto"],["azt-track-service","folder-and-classes-jpGtWYvPZzj",1,"btn","btn-outline-primary","btn-transparent","p-2",3,"click"],[1,"p-3"],[4,"ngIf","ngIfElse"],["noDocumentData",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12",4,"ngFor","ngForOf"],[1,"col-span-12"],["azt-track-service","folder-and-classes-M4tBKNEyrqt",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-3","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,_u,17,18,"div",2),t.ALo(3,"appFilter"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.gM2(3,1,i.classroomWithDocument,i.searchKey,t.DdM(6,mu),!0)))},dependencies:[w.rH,E.sg,E.O5,E.PC,Le.gM,zs,Ji.Q,ns.lO,_t.bT,_t.gB,_t.Gf],encapsulation:2}),n})();var il=A(85003);let pu=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onNoClick(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["multiple-delete-confirm"]],decls:35,vars:22,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"font-medium"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[2,"text-transform","lowercase"],[1,"p-3","text-right"],["azt-track-service","multiple-delete-dialog-NgJ73bNleKj",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","multiple-delete-dialog-zU2F66X2jAh",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t.kcU(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"span",10),t._uU(14),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"div",11)(18,"p",12)(19,"span"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"span",13),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"span"),t._uU(26),t.ALo(27,"mytranslate"),t.qZA()()()()(),t.TgZ(28,"div",14)(29,"button",15),t.NdJ("click",function(){return i.onNoClick()}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA(),t.TgZ(32,"button",16),t.NdJ("click",function(){return i.onAccept()}),t._uU(33),t.ALo(34,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,8,"lang_auto_ban_co_chac_chan_muon_xoa")," "),t.xp6(3),t.Oqu(i.data.totalSelected+" "),t.xp6(1),t.hij(" ",t.lcZ(16,10,"lang_auto_tai_lieu_vua_chon")," "),t.xp6(5),t.Oqu(t.lcZ(21,12,"lang_auto_khi_xac_nhan")+", "),t.xp6(3),t.hij("",t.lcZ(24,14,"lang_auto_tai_lieu"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(27,16,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),t.xp6(4),t.hij(" ",t.lcZ(31,18,"lang_cms_common_close_btn")," "),t.xp6(3),t.hij(" ",t.lcZ(34,20,"lang_cms_common_confirm_btn")," "))},dependencies:[_t.bT],encapsulation:2}),n})();const hu=["class","html"];let gu=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}onNoClick(){this.dialogRef.close()}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["notice-dialog",8,"html"]],attrs:hu,decls:18,vars:12,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],["azt-track-service","notice-dialog-PKBlnv4_Yy_",1,"clickable","ytb--button","clickable",3,"click"],["alt","",1,"img",3,"src"],[1,"text-right","mt-3"],["azt-track-service","notice-dialog-G9Gqu1HVigF",1,"btn","w-24","btn-secondary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t._UZ(7,"br"),t.TgZ(8,"div",3)(9,"div",5),t.NdJ("click",function(){return i.redirectToYTB()}),t._UZ(10,"img",6),t.ALo(11,"convertCdnLinkOfGitHub"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",7)(15,"button",8),t.NdJ("click",function(){return i.onNoClick()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_testbank_folder_and_file_note_tutorial")),t.xp6(5),t.Q6J("src",t.lcZ(11,6,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(13,8,"lang_testbank_folder_and_file_see_tutorial")," "),t.xp6(4),t.hij("",t.lcZ(17,10,"lang_buttom_close")," "))},dependencies:[_t.bT,_t.Jc],styles:[".img[_ngcontent-%COMP%]{\n    display: initial;\n    vertical-align: middle;\n    margin-right: 5px;\n  }"]}),n})();var fu=A(51541),Fo=A(64425),is=A(89933);function xu(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function Js(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const vu=function(n){return{active:n}},bu=function(n){return{clickable:n}},yu=function(n){return{"truncate-bread":n}};function ol(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",21)(1,"a",22),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goBackParent(s))}),t.TgZ(2,"span",23,24),t.ALo(4,"mytranslate"),t.YNc(5,xu,3,3,"span",10),t.YNc(6,Js,2,1,"span",10),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.MAs(3),o=t.oxw();t.Q6J("ngClass",t.VKq(10,vu,e.id==o.categoryId)),t.xp6(1),t.Q6J("ngClass",t.VKq(12,bu,e.id!=o.categoryId)),t.xp6(1),t.s9C("matTooltip",t.lcZ(4,8,e.name)),t.Q6J("ngClass",t.VKq(14,yu,e.id!=o.categoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(3),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id)}}const wu=function(n){return{"w-full":n}};function ku(n,a){if(1&n&&(t.TgZ(0,"span",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,wu,e.isMobile||e.isMobileWebView)),t.xp6(1),t.AsE("",t.lcZ(2,3,"lang_auto_da_chon")," ",e.totalSelectCopyOrCut,"")}}function Cu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.acceptCopyDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"rect",34)(3,"path",35),t.qZA(),t._uU(4," Copy "),t.qZA()}}function Qo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.acceptCutDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"polyline",37)(3,"polyline",38)(4,"polyline",39)(5,"polyline",40)(6,"line",41)(7,"line",42),t.qZA(),t._uU(8," Cut "),t.qZA()}}function Tu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handlePasteFolder(o.currentCategoryId))}),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"rect",45)(3,"path",46),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_paste")," "))}function Au(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.acceptDeleteDocument())}),t.O4$(),t.TgZ(1,"svg",33),t._UZ(2,"path",48)(3,"path",49)(4,"path",50)(5,"line",51)(6,"line",52),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}const al=function(n){return{"justify-between":n}};function Su(n,a){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,ku,3,7,"span",26),t.YNc(2,Cu,5,0,"button",27),t.YNc(3,Qo,9,0,"button",28),t.YNc(4,Tu,6,3,"button",29),t.YNc(5,Au,9,3,"button",30),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(6,al,e.isMobile||e.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",e.totalSelectCopyOrCut>0),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType)),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType)&&e.hasClipBoard()),t.xp6(1),t.Q6J("ngIf",0==e.isOnLib&&(!e.shareType||"owner"==e.shareType))}}function Ou(n,a){1&n&&(t.TgZ(0,"div",53)(1,"div",54),t.O4$(),t.TgZ(2,"svg",55),t._UZ(3,"path",56)(4,"path",57)(5,"path",58)(6,"path",59),t.qZA(),t.kcU(),t.TgZ(7,"p",60),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(8),t.hij("",t.lcZ(9,1,"lang_not_found_search"),"!"))}function Eu(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(2),r=t.MAs(31);return t.KtG(s.onContextMenu(o,s.currentObj,r))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function L(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",85),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectAllDocument())}),t.qZA()}}function N(n,a){1&n&&t._UZ(0,"input",86),2&n&&t.Q6J("disabled",!0)}const F=function(n){return{"text-primary stroke-width-2.5":n}};function $(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",88),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleSortByAttended(o.isSortByAttended))}),t.TgZ(2,"span",89),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_number_attended")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,F,e.isSortByAttended)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,F,!e.isSortByAttended))}}function W(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",90)(2,"div",91),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleSortByPublish(o.isSortByPublish))}),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_status")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,F,e.isSortByPublish)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,F,!e.isSortByPublish))}}function dt(n,a){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",92),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_folder_and_file_delivery_for")," "))}function pt(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",87)(1,"div",93),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleSortByDateUpdated(o.isSortByDateUpdated))}),t.TgZ(2,"div",94),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",70),t.O4$(),t.TgZ(6,"svg",71),t._UZ(7,"polyline",72),t.qZA(),t.TgZ(8,"svg",73),t._UZ(9,"polyline",74),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_time_update")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,F,e.isSortByDateUpdated)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,F,!e.isSortByDateUpdated))}}function ht(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",111),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(2),l=t.MAs(18);return t.KtG(r.onContextMenu(o,s,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Q6J("disabled",!e.id||e.id<0||"user"==e.shareType)}}function bt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",61)(1,"input",114),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(3).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(o,s.id,0))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function kt(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,bt,2,1,"span",113),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",0==e.controls.type.value&&e.controls.id.value==i.id)}}function Qt(n,a){if(1&n&&(t.TgZ(0,"span",112),t.YNc(1,kt,2,1,"span",78),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function Lt(n,a){1&n&&t._UZ(0,"input",115)}function Pt(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",116),t.ALo(2,"mytranslate"),t._UZ(3,"path",117)(4,"path",118)(5,"path",119),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function Xt(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",120),t._UZ(1,"path",121),t.qZA())}function Wt(n,a){1&n&&(t.TgZ(0,"span",122),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}function Se(n,a){1&n&&(t.TgZ(0,"div",123),t._UZ(1,"div",124),t.qZA())}function ze(n,a){1&n&&(t.TgZ(0,"div",123),t._UZ(1,"div",90),t.qZA())}function Je(n,a){1&n&&(t.TgZ(0,"div",123),t._UZ(1,"div",125),t.qZA())}function gn(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.updatedAt)," ")}}const Ue=function(n,a){return{"col-span-4":n,"col-span-12":a}},ne=function(n,a){return{"ml-5":n,"ml-3":a}};function te(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",95)(1,"div",96)(2,"div",97)(3,"div",98)(4,"div",99)(5,"div",100),t.YNc(6,ht,5,1,"button",101),t.YNc(7,Qt,2,1,"span",102),t.ALo(8,"fullPermission"),t.YNc(9,Lt,1,0,"ng-template",null,103,t.W1O),t.qZA(),t.TgZ(11,"div",104),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.handleOpenFolder(s))}),t.TgZ(12,"div",105),t.YNc(13,Pt,6,3,"span",106),t.YNc(14,Xt,2,0,"ng-template",null,107,t.W1O),t.qZA(),t.TgZ(16,"div",108,24),t.ALo(18,"mytranslate"),t.TgZ(19,"span"),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()(),t.YNc(22,Wt,3,3,"span",109),t.qZA()()(),t.YNc(23,Se,2,0,"div",110),t.YNc(24,ze,2,0,"div",110),t.YNc(25,Je,2,0,"div",110),t.YNc(26,gn,4,3,"div",110),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.MAs(10),o=t.MAs(15),s=t.MAs(17),r=t.oxw(2),l=t.MAs(34),c=t.MAs(18);t.s9C("id","folder_"+e.id),t.Q6J("contextMenu",!e.id||e.id<0||"user"==e.shareType?l:c)("contextMenuSubject",e),t.xp6(3),t.Q6J("ngClass",t.WLB(29,Ue,!r.isMobileWebView,r.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",r.isMobile),t.xp6(1),t.Q6J("ngIf",-1!=e.id&&t.xi3(8,22,e.permissionObj,"exam"))("ngIfElse",i),t.xp6(4),t.Q6J("ngClass",t.WLB(32,ne,!r.isMobileWebView,r.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",e.shared)("ngIfElse",o),t.xp6(3),t.s9C("matTooltip",t.lcZ(18,25,e.name)),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),t.xp6(3),t.Tol(r.isMobileWebView&&-1!=e.id?"azt-wv-item-name":""),t.xp6(1),t.Oqu(t.lcZ(21,27,e.name)),t.xp6(2),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!r.isMobileWebView)}}function ye(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",138),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2),l=t.MAs(21);return t.KtG(r.onContextMenu(o,s.exam,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function Cn(n,a){if(1&n){const e=t.EpF();t.ynx(0,61),t.TgZ(1,"input",139),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(4).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(o,s.exam.id,1))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function bn(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Cn,2,1,"ng-container",113),t.BQk()),2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",1==e.controls.type.value&&e.controls.id.value==i.exam.id)}}function Li(n,a){if(1&n&&(t.TgZ(0,"span",112),t.YNc(1,bn,2,1,"ng-container",78),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function ao(n,a){1&n&&t._UZ(0,"input",140),2&n&&t.Q6J("disabled",!0)}function Uo(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",141),t.ALo(1,"mytranslate"),t._UZ(2,"path",142)(3,"polyline",143)(4,"path",144),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function bo(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",141),t.ALo(1,"mytranslate"),t._UZ(2,"path",142)(3,"polyline",143),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function sl(n,a){if(1&n&&(t.TgZ(0,"span",145),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",e.exam.attended," ")}}function os(n,a){1&n&&(t.TgZ(0,"div",146),t.O4$(),t.TgZ(1,"svg",147),t.ALo(2,"mytranslate"),t._UZ(3,"path",148)(4,"path",149)(5,"path",150),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function ba(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",124)(2,"span",151),t._uU(3),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij(" ",e.exam.attended," ")}}function Mu(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",152)(2,"span",153)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.Oqu(1==e.exam.isPublished?t.lcZ(5,1,"lang_testbank_folder_and_file_published"):t.lcZ(6,3,"lang_testbank_folder_and_file_Unpublished"))}}function ph(n,a){if(1&n&&(t.TgZ(0,"span",156,24),t._uU(2),t.ALo(3,"slice"),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(3).$implicit,o=t.oxw(2);t.Q6J("matTooltip",o.getClassName(i.exam.classrooms).join(", "))("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.Oqu(o.getClassName(i.exam.classrooms).join(", ").length>100?t.Dn7(3,4,o.getClassName(i.exam.classrooms).join(", "),0,100)+"..":o.getClassName(i.exam.classrooms).join(", "))}}function hh(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_tat_ca_moi_nguoi")))}function gh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",154)(2,"span",153),t.YNc(3,ph,4,8,"span",155),t.YNc(4,hh,3,3,"span",10),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.Q6J("ngIf",e.exam.classrooms&&e.exam.classrooms.length>0),t.xp6(1),t.Q6J("ngIf",!e.exam.classrooms||0==e.exam.classrooms.length)}}function fh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.exam.updatedAt)," ")}}function xh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",128)(1,"div",129)(2,"div",97)(3,"div",98)(4,"div",99)(5,"div",100),t.YNc(6,ye,5,0,"button",130),t.YNc(7,Li,2,1,"span",102),t.ALo(8,"fullPermission"),t.ALo(9,"copyPermission"),t.YNc(10,ao,1,1,"ng-template",null,131,t.W1O),t.qZA(),t.TgZ(12,"div",132),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.handleListTestedExam(o.exam))}),t.TgZ(13,"div",133),t.YNc(14,Uo,5,3,"svg",134),t.YNc(15,bo,4,3,"svg",135),t.qZA(),t.TgZ(16,"div",108,24)(18,"span"),t._uU(19),t.qZA(),t.YNc(20,sl,3,4,"span",136),t.qZA(),t.YNc(21,os,6,3,"div",137),t.qZA()()(),t.YNc(22,ba,4,1,"div",110),t.YNc(23,Mu,7,5,"div",110),t.YNc(24,gh,5,2,"div",110),t.YNc(25,fh,4,3,"div",110),t.qZA()()()}if(2&n){const e=t.MAs(11),i=t.MAs(17),o=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(34),l=t.MAs(21);t.s9C("id","exam_"+o.exam.id),t.Q6J("contextMenu",!o.exam.permissionObj||s.isEmptyObj(o.exam.permissionObj)?r:l)("contextMenuSubject",o.exam),t.xp6(3),t.Q6J("ngClass",t.WLB(29,Ue,!s.isMobileWebView,s.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",s.isMobile&&null!=o.exam.permissionObj),t.xp6(1),t.Q6J("ngIf",t.xi3(8,23,o.exam.permissionObj,"exam")||t.xi3(9,26,o.exam.permissionObj,"exam"))("ngIfElse",e),t.xp6(5),t.Q6J("ngClass",t.WLB(32,ne,!s.isMobileWebView,s.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",1==o.exam.isPublished),t.xp6(1),t.Q6J("ngIf",1!=o.exam.isPublished),t.xp6(1),t.s9C("matTooltip",o.exam.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(o.exam.name),t.xp6(1),t.Q6J("ngIf",s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",o.shared),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView)}}function vh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",164),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(2),l=t.MAs(28);return t.KtG(r.onContextMenu(o,s.homework,l))}),t.O4$(),t.TgZ(1,"svg",81),t._UZ(2,"circle",82)(3,"circle",83)(4,"circle",84),t.qZA()()}}function bh(n,a){if(1&n){const e=t.EpF();t.ynx(0,61),t.TgZ(1,"input",114),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(4).$implicit,r=t.oxw(2);return t.KtG(r.selectDocument(o,s.homework.id,2))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function yh(n,a){if(1&n&&(t.ynx(0),t.YNc(1,bh,2,1,"ng-container",113),t.BQk()),2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",2==e.controls.type.value&&e.controls.id.value==i.homework.id)}}function wh(n,a){if(1&n&&(t.TgZ(0,"span",112),t.YNc(1,yh,2,1,"ng-container",78),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.form.controls.clipboardObjs.controls)}}function kh(n,a){1&n&&t._UZ(0,"input",165)}function Ch(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",166),t._UZ(1,"path",167),t.qZA())}function Th(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",168),t._UZ(1,"path",142)(2,"path",169)(3,"path",170),t.qZA())}function Ah(n,a){if(1&n&&(t.TgZ(0,"span",145),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_testbank_folder_and_file_number_attended"),": ",e.homework.count,"/",e.homework.totalStudent," ")}}function Sh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",124)(2,"span",151),t._uU(3),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.AsE(" ",e.homework.count,"/",e.homework.totalStudent," ")}}function Oh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",152)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.Oqu(1==e.homework.isPublished?t.lcZ(4,1,"lang_testbank_folder_and_file_published"):t.lcZ(5,3,"lang_testbank_folder_and_file_Unpublished"))}}function Eh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",171)(2,"span",153)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",e.homework.className?e.homework.className:t.lcZ(5,1,"lang_auto_tat_ca_moi_nguoi"),"")}}function Mh(n,a){if(1&n&&(t.TgZ(0,"div",123)(1,"div",126),t._uU(2),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,e.homework.updatedAt)," ")}}function Ih(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",128)(1,"div",157)(2,"div",97)(3,"div",158)(4,"div",124)(5,"div",100),t.YNc(6,vh,5,0,"button",159),t.YNc(7,wh,2,1,"span",102),t.ALo(8,"fullPermission"),t.ALo(9,"copyPermission"),t.YNc(10,kh,1,0,"ng-template",null,160,t.W1O),t.qZA(),t.TgZ(12,"div",161),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.handleHomeworkScoreList(o.homework))}),t.TgZ(13,"div",133),t.YNc(14,Ch,2,0,"svg",162),t.YNc(15,Th,4,0,"svg",163),t.qZA(),t.TgZ(16,"div",108,24)(18,"span"),t._uU(19),t.qZA(),t.YNc(20,Ah,3,5,"span",136),t.qZA()()()(),t.YNc(21,Sh,4,2,"div",110),t.YNc(22,Oh,6,5,"div",110),t.YNc(23,Eh,6,3,"div",110),t.YNc(24,Mh,4,3,"div",110),t.qZA()()()}if(2&n){const e=t.MAs(11),i=t.MAs(17),o=t.oxw().$implicit,s=t.oxw(2),r=t.MAs(28);t.s9C("id","homework_"+o.homework.id),t.Q6J("contextMenu",r)("contextMenuSubject",o.homework),t.xp6(6),t.Q6J("ngIf",s.isMobile),t.xp6(1),t.Q6J("ngIf",t.xi3(8,21,o.homework.permissionObj,"homework")||t.xi3(9,24,o.homework.permissionObj,"homework"))("ngIfElse",e),t.xp6(5),t.Q6J("ngClass",t.WLB(27,ne,!s.isMobileWebView,s.isMobileWebView)),t.xp6(2),t.Q6J("ngIf",1==o.homework.isPublished),t.xp6(1),t.Q6J("ngIf",1!=o.homework.isPublished),t.xp6(1),t.s9C("matTooltip",o.homework.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(o.homework.name),t.xp6(1),t.Q6J("ngIf",s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!s.isMobileWebView)}}function Lh(n,a){if(1&n&&(t.ynx(0),t.YNc(1,xh,26,35,"div",127),t.YNc(2,Ih,25,30,"div",127),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","exam"==e.type&&e.exam),t.xp6(1),t.Q6J("ngIf","homework"==e.type&&e.homework)}}const Zh=function(n,a){return{"overflow-x-auto":n,"overflow-x-hidden":a}},__=function(n){return{"min-width":n}},as=function(){return["name"]};function Ph(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",61)(2,"div",62)(3,"div",63)(4,"div",64)(5,"div",65),t.YNc(6,Eu,5,0,"button",66),t.YNc(7,L,1,0,"input",67),t.YNc(8,N,1,1,"ng-template",null,68,t.W1O),t.TgZ(10,"div",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSort(o.isSort))}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",70),t.O4$(),t.TgZ(14,"svg",71),t._UZ(15,"polyline",72),t.qZA(),t.TgZ(16,"svg",73),t._UZ(17,"polyline",74),t.qZA()()()(),t.YNc(18,$,10,9,"div",75),t.YNc(19,W,10,9,"div",75),t.YNc(20,dt,4,3,"div",75),t.YNc(21,pt,10,9,"div",75),t.qZA()(),t.kcU(),t.TgZ(22,"div",76),t.YNc(23,te,27,35,"div",77),t.ALo(24,"appFilter"),t.YNc(25,Lh,3,2,"ng-container",78),t.ALo(26,"appFilter"),t.qZA(),t._UZ(27,"div",79),t.qZA()(),t.BQk()}if(2&n){const e=t.MAs(9),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngClass",t.WLB(28,Zh,!i.isMobileWebView,i.isMobileWebView)),t.xp6(1),t.Q6J("ngStyle",t.VKq(31,__,i.isMobileWebView?"":"1100px")),t.xp6(2),t.Q6J("ngClass",t.WLB(33,Ue,!i.isMobileWebView,i.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",i.isMobile),t.xp6(1),t.Q6J("ngIf",-1!=i.currentCategoryId&&(!i.shareType||"owner"==i.shareType))("ngIfElse",e),t.xp6(3),t.Q6J("ngClass",t.WLB(36,ne,!i.isMobileWebView,i.isMobileWebView)),t.xp6(1),t.hij(" ",t.lcZ(12,18,"lang_testbank_folder_and_file_name")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(39,F,i.isSort)),t.xp6(2),t.Q6J("ngClass",t.VKq(41,F,!i.isSort)),t.xp6(2),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngStyle",t.VKq(43,__,i.isMobileWebView?"":"1100px")),t.xp6(1),t.Q6J("ngForOf",t.Dn7(24,20,i.cateObjs,i.searchKey,t.DdM(45,as))),t.xp6(2),t.Q6J("ngForOf",t.Dn7(26,24,i.documentObjs,i.searchKey,t.DdM(46,as)))}}function Nh(n,a){if(1&n&&t._UZ(0,"azt-share",176),2&n){const e=t.oxw(2).$implicit;t.Q6J("objectCodeType",4)("objectCode","CATEGORY")("objectId",e.id)("categoryWithPermissionObj",e)}}function Dh(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",177),t.qZA())}function jh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",178),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleEditFolder(o))}),t.O4$(),t.TgZ(2,"svg",179),t._UZ(3,"path",180)(4,"path",181),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_buttom_edit")," "))}function qh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",182),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCopyFolder(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",183)(4,"path",184),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function Fh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",185),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCutFolder(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&n&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function Qh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",186),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handlePasteFolder(o.id))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",45)(4,"path",46),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function Uh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",187),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.removeAllCutOrCopy())}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"circle",188)(4,"line",189)(5,"line",190),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function Bh(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",177),t.qZA())}function Rh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",191),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleDeleteFolder(o,0))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function zh(n,a){if(1&n&&(t.TgZ(0,"div",173)(1,"ul",174)(2,"li"),t.YNc(3,Nh,1,4,"azt-share",175),t.ALo(4,"sharePermission"),t.qZA(),t.YNc(5,Dh,2,0,"li",10),t.ALo(6,"fullPermission"),t.YNc(7,jh,7,3,"li",10),t.ALo(8,"editPermission"),t.YNc(9,qh,7,3,"li",10),t.ALo(10,"copyPermission"),t.YNc(11,Fh,11,3,"li",10),t.ALo(12,"deletePermission"),t.YNc(13,Qh,7,3,"li",10),t.ALo(14,"editPermission"),t.YNc(15,Uh,8,3,"li",10),t.ALo(16,"editPermission"),t.YNc(17,Bh,2,0,"li",10),t.ALo(18,"fullPermission"),t.YNc(19,Rh,10,3,"li",10),t.ALo(20,"deletePermission"),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(3),t.Q6J("ngIf",t.xi3(4,9,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(6,12,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(8,15,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(10,18,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,21,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,24,1==i.hasClipBoard()&&!i.checkPasteFunc(e.id)&&e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,27,i.hasClipBoard()&&e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,30,e.permissionObj,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,33,e.permissionObj,"category"))}}function Jh(n,a){if(1&n&&t.YNc(0,zh,21,36,"div",172),2&n){const e=t.oxw();t.Q6J("ngIf",0==e.isOnLib)}}function Hh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",197),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleShowExam(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"circle",188)(4,"line",198)(5,"line",199),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_xem_noi_dung_de")," "))}function $h(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",200),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleListTestedExam(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",201)(4,"circle",202)(5,"path",203)(6,"path",204),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function Kh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",205),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCopyLinkExam(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",206)(4,"path",207),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("cdkCopyToClipboard",i.copyLink(e)),t.xp6(4),t.hij(" ",t.lcZ(6,2,"lang_auto_copy_link")," ")}}function Yh(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",177),t.qZA())}function Gh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",208),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleConfigExam(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",209)(4,"path",210)(5,"path",211)(6,"path",212)(7,"path",213)(8,"path",214)(9,"path",215)(10,"path",216)(11,"path",217)(12,"path",218)(13,"path",219)(14,"path",220)(15,"path",221)(16,"path",222),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()}2&n&&(t.xp6(17),t.hij(" ",t.lcZ(18,1,"lang_auto_cai_dat")," "))}function Wh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",223),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw();return t.KtG(s.handleEditExam(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",224)(4,"path",225),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function Vh(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Wh,7,3,"li",10),t.ALo(2,"isOfflineExamWithCustomMixMark"),t.ALo(3,"editPermission"),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e.orcLogId)&&t.xi3(3,3,e.permissionObj,"exam"))}}function Xh(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",226),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw();return t.KtG(s.handleEditExam(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",224)(4,"path",225),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function t0(n,a){if(1&n&&(t.YNc(0,Xh,7,3,"li",10),t.ALo(1,"editPermission")),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.Q6J("ngIf",0==i.isOnLib&&t.xi3(1,1,e.permissionObj,"exam"))}}function e0(n,a){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"polyline",228),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.BQk()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function n0(n,a){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"line",229)(3,"line",230),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.BQk()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function i0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",227),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handlePublishExam(o))}),t.YNc(2,e0,5,3,"ng-container",10),t.YNc(3,n0,6,3,"ng-container",10),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",0==e.isPublished),t.xp6(1),t.Q6J("ngIf",1==e.isPublished)}}function o0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",231),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleStatisticalExam(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",232)(4,"path",233),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_thong_ke")," "))}function a0(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",177),t.qZA())}function s0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",234),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw();return t.KtG(s.handleCopyExam(o))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"rect",34)(4,"path",35),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function r0(n,a){if(1&n&&(t.ynx(0),t.YNc(1,s0,7,3,"li",10),t.ALo(2,"copyPermission"),t.ALo(3,"isOfflineExamWithCustomMixMark"),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",t.xi3(2,1,t.lcZ(3,4,e.orcLogId)&&e.permissionObj,"exam"))}}function l0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",235),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw();return t.KtG(s.handleCopyExam(o))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"rect",34)(4,"path",35),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function c0(n,a){if(1&n&&(t.YNc(0,l0,7,3,"li",10),t.ALo(1,"copyPermission")),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.Q6J("ngIf",t.xi3(1,1,0==i.isOnLib&&e.permissionObj,"exam"))}}function u0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",236),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCutExam(o))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&n&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function d0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",237),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleDeleteExam(o,1))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function _0(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",177),t.qZA())}function m0(n,a){if(1&n&&(t.TgZ(0,"div",194)(1,"ul",174),t.YNc(2,Hh,8,3,"li",10),t.ALo(3,"viewPermission"),t.YNc(4,$h,9,3,"li",10),t.ALo(5,"configAndViewPermission"),t.ALo(6,"configAndMarkPermission"),t.ALo(7,"viewPermission"),t.ALo(8,"configPermission"),t.YNc(9,Kh,7,4,"li",10),t.ALo(10,"viewPermission"),t.ALo(11,"configPermission"),t.ALo(12,"isOfflineExam"),t.YNc(13,Yh,2,0,"li",10),t.ALo(14,"editPermission"),t.ALo(15,"configPermission"),t.YNc(16,Gh,19,3,"li",10),t.ALo(17,"editPermission"),t.YNc(18,Vh,4,6,"ng-container",106),t.ALo(19,"isOfflineExam"),t.YNc(20,t0,2,4,"ng-template",null,195,t.W1O),t.YNc(22,i0,4,2,"li",10),t.ALo(23,"editPermission"),t.YNc(24,o0,7,3,"li",10),t.ALo(25,"statisticalPermission"),t.YNc(26,a0,2,0,"li",10),t.ALo(27,"copyPermission"),t.ALo(28,"fullPermission"),t.ALo(29,"deletePermission"),t.YNc(30,r0,4,6,"ng-container",106),t.ALo(31,"isOfflineExam"),t.YNc(32,c0,2,4,"ng-template",null,196,t.W1O),t.YNc(34,u0,11,3,"li",10),t.ALo(35,"fullPermission"),t.YNc(36,d0,10,3,"li",10),t.ALo(37,"deletePermission"),t.YNc(38,_0,2,0,"li",10),t.ALo(39,"configPermission"),t.qZA()()),2&n){const e=t.MAs(21),i=t.MAs(33),o=t.oxw().$implicit,s=t.oxw();t.xp6(2),t.Q6J("ngIf",t.xi3(3,15,o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==s.isOnLib&&(t.xi3(5,18,o.permissionObj,"exam")||t.xi3(6,21,o.permissionObj,"exam")||t.xi3(7,24,o.permissionObj,"exam")||t.xi3(8,27,o.permissionObj,"exam"))),t.xp6(5),t.Q6J("ngIf",0==s.isOnLib&&(t.xi3(10,30,o.permissionObj,"exam")||t.xi3(11,33,o.permissionObj,"exam"))&&!t.lcZ(12,36,o.orcLogId)),t.xp6(4),t.Q6J("ngIf",0==s.isOnLib&&(t.xi3(14,38,o.permissionObj,"exam")||t.xi3(15,41,o.permissionObj,"exam"))),t.xp6(3),t.Q6J("ngIf",t.xi3(17,44,0==s.isOnLib&&o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.lcZ(19,47,o.orcLogId))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",t.xi3(23,49,0==s.isOnLib&&o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(25,52,0==s.isOnLib&&o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==s.isOnLib&&(t.xi3(27,55,o.permissionObj,"exam")||t.xi3(28,58,o.permissionObj,"exam")||t.xi3(29,61,o.permissionObj,"exam"))),t.xp6(4),t.Q6J("ngIf",t.lcZ(31,64,o.orcLogId))("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",t.xi3(35,66,0==s.isOnLib&&o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(37,69,0==s.isOnLib&&o.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",0==s.isOnLib&&t.xi3(39,72,o.permissionObj,"exam"))}}function p0(n,a){if(1&n&&t.YNc(0,m0,40,75,"div",193),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngIf",null!=e.permissionObj||1==i.isOnLib)}}function h0(n,a){1&n&&(t.TgZ(0,"li")(1,"a",240),t._uU(2),t.ALo(3,"mytranslate"),t.O4$(),t.TgZ(4,"svg",241),t._UZ(5,"polyline",242),t.qZA()()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_them")," "))}function g0(n,a){if(1&n&&(t.TgZ(0,"div",239)(1,"ul",174),t.YNc(2,h0,6,3,"li",10),t.ALo(3,"configPermission"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",t.xi3(3,1,e.permissionObj,"exam"))}}function f0(n,a){if(1&n&&(t.YNc(0,g0,4,4,"div",238),t.ALo(1,"configPermission")),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngIf",0==i.isOnLib&&t.xi3(1,1,e.permissionObj,"exam"))}}function x0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",244),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.handleGoToPowerPoint(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",245)(4,"polygon",246),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_insert_into_powerpoint")," "))}function v0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",247),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.handleConfigClassroom(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"rect",248)(4,"path",249),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_configuration_class")," "))}function b0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",250),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.handleReturnOfflineShare(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",251)(4,"polyline",143)(5,"path",252)(6,"path",253),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function y0(n,a){if(1&n&&(t.TgZ(0,"div",243)(1,"ul",174),t.YNc(2,x0,7,3,"li",10),t.ALo(3,"fullPermission"),t.YNc(4,v0,7,3,"li",10),t.ALo(5,"configPermission"),t.YNc(6,b0,9,3,"li",10),t.ALo(7,"fullPermission"),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",0==i.isOnLib&&t.xi3(3,3,e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(5,6,0==i.isOnLib&&e.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(7,9,0==i.isOnLib&&e.permissionObj,"exam"))}}function w0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",254),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleHomeworkScoreList(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",201)(4,"circle",202)(5,"path",203)(6,"path",204),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function k0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",255),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCopyLinkHomework(o))}),t.O4$(),t.TgZ(2,"svg",192),t._UZ(3,"path",206)(4,"path",207),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("cdkCopyToClipboard",i.copyLinkHomework(e)),t.xp6(4),t.hij(" ",t.lcZ(6,2,"lang_auto_copy_link")," ")}}function C0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",256),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleConfigHomework(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",209)(4,"path",210)(5,"path",211)(6,"path",212)(7,"path",213)(8,"path",214)(9,"path",215)(10,"path",216)(11,"path",217)(12,"path",218)(13,"path",219)(14,"path",220)(15,"path",221)(16,"path",222),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()}2&n&&(t.xp6(17),t.hij(" ",t.lcZ(18,1,"lang_auto_cai_dat")," "))}function T0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",257),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleEditHomework(o))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"path",224)(4,"path",225),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function A0(n,a){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"polyline",228),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.BQk()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function S0(n,a){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",44),t._UZ(2,"line",229)(3,"line",230),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.BQk()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function O0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",258),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handlePublishHomework(o))}),t.YNc(2,A0,5,3,"ng-container",10),t.YNc(3,S0,6,3,"ng-container",10),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",0==e.isPublished),t.xp6(1),t.Q6J("ngIf",1==e.isPublished)}}function E0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",259),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCopyHomework(o))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"rect",34)(4,"path",35),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function M0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",260),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleCutHomework(o))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"polyline",37)(4,"polyline",38)(5,"polyline",39)(6,"polyline",40)(7,"line",41)(8,"line",42),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&n&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function I0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",261),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.handleDeleteHomework(o,2))}),t.O4$(),t.TgZ(2,"svg",33),t._UZ(3,"path",48)(4,"path",49)(5,"path",50)(6,"line",51)(7,"line",52),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_buttom_delete")," "))}function L0(n,a){if(1&n&&(t.TgZ(0,"div",194)(1,"ul",174),t.YNc(2,w0,9,3,"li",10),t.ALo(3,"configAndViewPermission"),t.ALo(4,"configAndMarkPermission"),t.ALo(5,"viewPermission"),t.ALo(6,"configPermission"),t.YNc(7,k0,7,4,"li",10),t.ALo(8,"viewPermission"),t.ALo(9,"configPermission"),t.TgZ(10,"li"),t._UZ(11,"hr",177),t.qZA(),t.YNc(12,C0,19,3,"li",10),t.ALo(13,"editPermission"),t.YNc(14,T0,7,3,"li",10),t.ALo(15,"editPermission"),t.YNc(16,O0,4,2,"li",10),t.ALo(17,"editPermission"),t.TgZ(18,"li"),t._UZ(19,"hr",177),t.qZA(),t.YNc(20,E0,7,3,"li",10),t.ALo(21,"copyPermission"),t.YNc(22,M0,11,3,"li",10),t.ALo(23,"fullPermission"),t.YNc(24,I0,10,3,"li",10),t.ALo(25,"deletePermission"),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",0==i.isOnLib&&(t.xi3(3,8,e.permissionObj,"homework")||t.xi3(4,11,e.permissionObj,"homework")||t.xi3(5,14,e.permissionObj,"homework")||t.xi3(6,17,e.permissionObj,"homework"))),t.xp6(5),t.Q6J("ngIf",0==i.isOnLib&&(t.xi3(8,20,e.permissionObj,"homework")||t.xi3(9,23,e.permissionObj,"homework"))),t.xp6(5),t.Q6J("ngIf",t.xi3(13,26,0==i.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(15,29,0==i.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(17,32,0==i.isOnLib&&e.permissionObj,"homework")),t.xp6(4),t.Q6J("ngIf",t.xi3(21,35,0==i.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(23,38,0==i.isOnLib&&e.permissionObj,"homework")),t.xp6(2),t.Q6J("ngIf",t.xi3(25,41,0==i.isOnLib&&e.permissionObj,"homework"))}}function Z0(n,a){if(1&n&&t.YNc(0,L0,26,44,"div",193),2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngIf",null!=e.permissionObj||1==i.isOnLib)}}function P0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",262),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handlePasteFolder(o.currentCategoryId))}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",45)(4,"path",46),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function N0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",263),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.removeAllCutOrCopy())}),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"circle",188)(4,"line",189)(5,"line",190),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function D0(n,a){if(1&n&&(t.TgZ(0,"div",173)(1,"ul",174),t.YNc(2,P0,7,3,"li",10),t.YNc(3,N0,8,3,"li",10),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.hasClipBoard()),t.xp6(1),t.Q6J("ngIf",e.hasClipBoard())}}const j0=function(){return{hidden:"isShowContextmenu == false"}};let q0=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.contextMenuService=e,this.activeRoute=i,this.dialog=o,this.clipboardService=s,this.browserStorageService=r,this.fb=l,this.viewType=0,this.isOnLib=0,this.categoryId=0,this.ExistClipboard=!1,this.searchKey="",this.listBreadcrumb=[],this.totalExam=0,this.openFolder=new t.vpe,this.editFolder=new t.vpe,this.cutFolder=new t.vpe,this.deleteFolder=new t.vpe,this.pasteFolder=new t.vpe,this.checkClipboard=new t.vpe,this.backToAllCategory=new t.vpe,this.backToParentCategory=new t.vpe,this.showExamDetail=new t.vpe,this.tryExam=new t.vpe,this.offlineExam=new t.vpe,this.copyExam=new t.vpe,this.cutExam=new t.vpe,this.copyLinkExam=new t.vpe,this.listTestedExam=new t.vpe,this.publishExam=new t.vpe,this.configExam=new t.vpe,this.configExamClassroom=new t.vpe,this.editExam=new t.vpe,this.deleteExam=new t.vpe,this.goToPowerPoint=new t.vpe,this.statisticalExam=new t.vpe,this.supervisingCandidatesExam=new t.vpe,this.returnOfflineShare=new t.vpe,this.sort=new t.vpe,this.sortByPublish=new t.vpe,this.sortByPrice=new t.vpe,this.sortByDateUpdated=new t.vpe,this.sortByAttended=new t.vpe,this.previewHomework=new t.vpe,this.homeworkScoreList=new t.vpe,this.homeworkCopyLink=new t.vpe,this.configHomework=new t.vpe,this.editHomework=new t.vpe,this.publishHomework=new t.vpe,this.copyHomework=new t.vpe,this.cutHomework=new t.vpe,this.deleteHomework=new t.vpe,this.deleteMultipleDocument=new t.vpe,this.loadApiData=new t.vpe,this.form=new h.nJ({}),this.totalSelectCopyOrCut=0,this.isShowContextmenu=!1,this.isSort=!1,this.isSortByPublish=!1,this.isSortByPrice=!1,this.isSortByDateUpdated=!1,this.isSortByAttended=!1,this.currentCategoryId=0,this.shareType="",this.isMobile=this.commonService.isMobileDevice(),this.dataDialogWarning={isShow:!1,content:""},this.documentSortSaver={isSort:!1,isSortByPublish:!1,isSortByPrice:!1,isSortByDateUpdated:!1,isSortByAttended:!1},this.demoData=[]}get ClipboardObjsFormControls(){return this.form.get("clipboardObjs").controls}hasClipBoard(){let e=this.clipboardService.checkClipboard(),i=!1;return e.forEach(o=>{("copy"==o.action||"cut"==o.action)&&(i=!0)}),i}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}checkPasteFunc(e){return this.clipboardService.checkSelfPasteFolder(e)}handleSort(e){this.isSort=!this.isSort,this.documentSortSaver.isSort=this.isSort,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sort.emit(this.isSort)}handleSortByPublish(e){this.isSortByPublish=!this.isSortByPublish,this.documentSortSaver.isSortByPublish=this.isSortByPublish,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByPublish.emit(this.isSortByPublish)}handleSortByPrice(e){this.isSortByPrice=!this.isSortByPrice,this.documentSortSaver.isSortByPrice=this.isSortByPrice,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByPrice.emit(this.isSortByPrice)}handleSortByDateUpdated(e){this.isSortByDateUpdated=!this.isSortByDateUpdated,this.documentSortSaver.isSortByDateUpdated=this.isSortByDateUpdated,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByDateUpdated.emit(this.isSortByDateUpdated)}handleSortByAttended(e){this.isSortByAttended=!this.isSortByAttended,this.documentSortSaver.isSortByAttended=this.isSortByAttended,this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.documentSortSaver)),this.sortByAttended.emit(this.isSortByAttended)}handleOpenFolder(e){this.openFolder.emit(e)}handleEditFolder(e){this.editFolder.emit(e)}handleCutFolder(e){let i=document.getElementById("folder_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,0),this.acceptCutDocument()}handleCopyFolder(e){let i=document.getElementById("folder_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,0),this.acceptCopyDocument()}handleDeleteFolder(e,i){let o=this.commonService.getFormObj(this.form.get("clipboardObjs")),s=0;for(let r=0;r<o.length;r++)o[r].id==e.id&&o[r].type==i&&!o[r].checked&&(o[r].checked=!0,this.totalSelectCopyOrCut++),o[r].checked&&("delete"!=o[r].action&&(o[r].action="delete"),s++);if(this.form.controls.clipboardObjs.setValue(o),s>1){let r=document.getElementById("folder_"+e.id);r&&(r.style.opacity="0.6"),this.acceptDeleteDocument()}else this.deleteFolder.emit(e)}handlePasteFolder(e){this.removeStyleOpacity(),this.pasteFolder.emit(e)}handleCheckClipboard(){this.checkClipboard.emit(!0)}handleStatisticalExam(e){this.statisticalExam.emit(e)}handleSupervisingCandidatesExam(e){this.supervisingCandidatesExam.emit(e)}handleReturnOfflineShare(e){this.returnOfflineShare.emit(e)}handleGoToPowerPoint(e){this.goToPowerPoint.emit(e.id)}handleShowExam(e){this.showExamDetail.emit(e)}handleTryExam(e){this.tryExam.emit(e)}handleOfflineExam(e){this.offlineExam.emit(e)}handleCopyExam(e){let i=document.getElementById("exam_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,1),this.acceptCopyDocument()}handleCutExam(e){let i=document.getElementById("exam_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,1),this.acceptCutDocument()}handleCopyLinkExam(e){this.copyLinkExam.emit(this.copyLink(e))}copyLink(e){return`${this.commonService.getCurrentDomain()}/de-thi/${e.hashId}`}handleListTestedExam(e){this.listTestedExam.emit(e)}handlePublishExam(e){this.publishExam.emit(e)}handleConfigExam(e){this.configExam.emit(e)}handleEditExam(e){this.editExam.emit(e)}handleGoToShare(e){this.configExam.emit(e)}handleDeleteExam(e,i){let o=this.commonService.getFormObj(this.form.get("clipboardObjs")),s=0;for(let l=0;l<o.length;l++)o[l].id==e.id&&o[l].type==i&&!o[l].checked&&(o[l].checked=!0,this.totalSelectCopyOrCut++),o[l].checked&&("delete"!=o[l].action&&(o[l].action="delete"),s++);this.form.controls.clipboardObjs.setValue(o);let r=document.getElementById("exam_"+e.id);r&&(r.style.opacity="0.6"),s>1?this.acceptDeleteDocument():this.deleteExam.emit(e)}handleConfigClassroom(e){this.configExamClassroom.emit(e)}handleHomeworkScoreList(e){this.homeworkScoreList.emit(e)}handleCopyLinkHomework(e){this.homeworkCopyLink.emit(this.copyLinkHomework(e))}copyLinkHomework(e){return`${this.commonService.getCurrentDomain()}/bai-tap/${e.hashId}`}handleConfigHomework(e){this.configHomework.emit(e)}handleEditHomework(e){this.editHomework.emit(e)}handlePublishHomework(e){this.publishHomework.emit(e)}handleCopyHomework(e){let i=document.getElementById("homework_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,2),this.acceptCopyDocument()}handleCutHomework(e){let i=document.getElementById("homework_"+e.id);i&&(i.style.opacity="0.6"),this.changeStageClipboardControl(e.id,2),this.acceptCutDocument()}handleDeleteHomework(e,i){let o=this.commonService.getFormObj(this.form.get("clipboardObjs")),s=0;for(let r=0;r<o.length;r++)o[r].id==e.id&&o[r].type==i&&!o[r].checked&&(o[r].checked=!0,this.totalSelectCopyOrCut++),o[r].checked&&("delete"!=o[r].action&&(o[r].action="delete"),s++);if(this.form.controls.clipboardObjs.setValue(o),s>1){let r=document.getElementById("homework_"+e.id);r&&(r.style.opacity="0.6"),this.acceptDeleteDocument()}else this.deleteHomework.emit(e)}openDialog(){this.dialog.open(gu,{width:"70vh",restoreFocus:!1}).afterClosed().subscribe(i=>{})}openDialogWaring(){this.commonService.getTranslate("lang_auto_hien_tinh_nang_thi_offline_chua_ho_tro_de_thi_docx").subscribe(e=>{this.dataDialogWarning={isShow:!0,content:e}})}getClassName(e){let i=[];return e.forEach(o=>{o.name&&!this.commonService.filterArray(i,o.name)&&i.push(o.name)}),i}onContextMenu(e,i,o){e&&(this.contextMenuService.show.next({anchorElement:e?.target?e.target:void 0,contextMenu:o,event:e,item:i}),e?.preventDefault(),e?.stopPropagation())}getHeightParent(e,i){let o=document.getElementById(i+"_"+e);return o?o.offsetHeight+"px":"auto"}changeStageClipboardControl(e,i){let o=this.commonService.getFormObj(this.form.get("clipboardObjs"));for(let s=0;s<o.length;s++)o[s].type==i&&o[s].id==e&&(o[s].checked||(o[s].checked=!0,this.totalSelectCopyOrCut++));this.form.controls.clipboardObjs.setValue(o)}createFormArrayCopyOrCut(){this.cateObjs&&this.cateObjs.length>0&&this.cateObjs.forEach(e=>{if(e.id&&e.id>0){let i=this.clipboardService.checkChooseDocumentClipboard(e.id,0),o=new h.nJ({id:new h.p4(e.id),name:new h.p4(e.name),type:new h.p4(0),action:new h.p4(this.clipboardService.getActionDocument(e.id,0)),documentType:new h.p4(""),checked:new h.p4(i)});i&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(o)}}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(e=>{var i,o,s,r,l,c,u,d,m,p,b,y;if("exam"==e.type&&e.exam){let C=this.clipboardService.checkChooseDocumentClipboard(null!==(o=null===(i=e.exam)||void 0===i?void 0:i.id)&&void 0!==o?o:0,1),I=new h.nJ({id:new h.p4(null===(s=e.exam)||void 0===s?void 0:s.id),name:new h.p4(null===(r=e.exam)||void 0===r?void 0:r.name),type:new h.p4(1),action:new h.p4(this.clipboardService.getActionDocument(null!==(c=null===(l=e.exam)||void 0===l?void 0:l.id)&&void 0!==c?c:0,1)),documentType:new h.p4(""),checked:new h.p4(C)});C&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(I)}else if("homework"==e.type&&e.homework){let C=this.clipboardService.checkChooseDocumentClipboard(null!==(d=null===(u=e.homework)||void 0===u?void 0:u.id)&&void 0!==d?d:0,2),I=new h.nJ({id:new h.p4(null===(m=e.homework)||void 0===m?void 0:m.id),name:new h.p4(null===(p=e.homework)||void 0===p?void 0:p.name),type:new h.p4(2),action:new h.p4(this.clipboardService.getActionDocument(null!==(y=null===(b=e.homework)||void 0===b?void 0:b.id)&&void 0!==y?y:0,2)),documentType:new h.p4("homework"),checked:new h.p4(C)});C&&this.totalSelectCopyOrCut++,this.form.get("clipboardObjs").push(I)}})}selectDocument(e,i,o){let r=document.getElementById((0==o?"folder_":1==o?"exam_":"homework_")+i);e.target.checked?(r&&(r.classList.add("bg-slate-100"),r.classList.add("dark:bg-darkmode-400/70"),r.style.opacity="0.6"),this.totalSelectCopyOrCut++):(this.totalSelectCopyOrCut>0&&this.totalSelectCopyOrCut--,this.clipboardService.removeDocumentOnClipboard(i??0,o),r&&(r.classList.remove("bg-slate-100"),r.classList.remove("dark:bg-darkmode-400/70"),r.style.opacity="1"))}selectAllDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));if(this.commonService.getFormObj(this.form).isSelectAll){this.totalSelectCopyOrCut=0;for(let o=0;o<e.length;o++){let s=0==e[o].type?"folder_":1==e[o].type?"exam_":"homework_";e[o].checked=!0,this.totalSelectCopyOrCut++;let r=document.getElementById(s+e[o].id);r&&(r.style.opacity="0.6")}}else{this.totalSelectCopyOrCut=0;for(let o=0;o<e.length;o++)e[o].checked=!1,this.clipboardService.removeDocumentOnClipboard(e[o].id,e[o].type);this.removeStyleOpacity()}this.form.controls.clipboardObjs.setValue(e)}acceptCopyDocument(){var e;let i=this.commonService.getFormObj(this.form.get("clipboardObjs")),o=0;for(let s=0;s<i.length;s++)i[s].checked&&(this.clipboardService.cutOrCopyObj(i[s].id,i[s].type,"copy",null!==(e=i[s].name)&&void 0!==e?e:void 0),o++);this.commonService.getTranslate("lang_auto_copy_thanh_cong").subscribe(s=>{this.commonService.getTranslate("lang_auto_tai_lieu").subscribe(r=>{this.showSuccessSnack(s+" "+o+" "+r)})})}acceptCutDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs")),i=0;for(let o=0;o<e.length;o++)e[o].checked&&(this.clipboardService.cutOrCopyObj(e[o].id,e[o].type,"cut"),i++);this.commonService.getTranslate("lang_auto_cut_thanh_cong").subscribe(o=>{this.commonService.getTranslate("lang_auto_tai_lieu").subscribe(s=>{this.showSuccessSnack(o+" "+i+" "+s)})})}acceptDeleteDocument(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs")),i=0;for(let o=0;o<e.length;o++)e[o].checked&&(this.clipboardService.cutOrCopyObj(e[o].id,e[o].type,"delete"),i++);i>0&&this.dialog.open(pu,{data:{totalSelected:i},restoreFocus:!1}).afterClosed().subscribe(s=>{!0===s&&this.deleteMultipleDocument.emit(!0)})}removeAllCutOrCopy(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));this.totalSelectCopyOrCut=0;for(let i=0;i<e.length;i++)e[i].checked=!1;this.removeStyleOpacity(),this.form.controls.clipboardObjs.setValue(e),this.clipboardService.donePasteClipboard()}checkCupOrCopyItem(){let e=this.commonService.getFormObj(this.form.get("clipboardObjs"));for(let i=0;i<e.length;i++)if(e[i].checked){let s=document.getElementById((1==e[i].type?"exam_":2==e[i].type?"homework_":"folder_")+e[i].id);s&&(s.style.opacity="0.6")}}removeStyleOpacity(){let e=document.getElementsByClassName("folder-item"),i=document.getElementsByClassName("exam-item"),o=document.getElementsByClassName("homework-item");for(let s=0;s<e.length;s++)e[s].removeAttribute("style");for(let s=0;s<i.length;s++)i[s].removeAttribute("style");for(let s=0;s<o.length;s++)o[s].removeAttribute("style")}backToAllCate(){this.backToAllCategory.emit()}goBackParent(e){this.backToParentCategory.emit(e)}ngOnChanges(){this.currentObj=this.cateObjs,this.isShowContextmenu=this.ExistClipboard}ngOnInit(){this.form=this.fb.group({clipboardObjs:new h.vC([]),isSelectAll:new h.p4(!1)}),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var i;this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.shareType=null!==(i=this.commonService.getMyQueryParam("shareType"))&&void 0!==i?i:"",this.createFormArrayCopyOrCut()});let e=this.browserStorageService.getSimpleSessionStorage("documentSort");if(e){let i=this.commonService.myParseJson(e);i&&(this.documentSortSaver=i,this.documentSortSaver.isSort&&this.handleSort(!0),this.documentSortSaver.isSortByPublish&&this.handleSortByPublish(!0),this.documentSortSaver.isSortByDateUpdated&&this.handleSortByDateUpdated(!0),this.documentSortSaver.isSortByAttended&&this.handleSortByAttended(!0))}}ngAfterViewInit(){this.contextMenuService.closeAllContextMenus({eventType:"cancel"}),this.checkCupOrCopyItem()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.Lk),t.Y36(w.gz),t.Y36(z.uw),t.Y36(fu.Y),t.Y36(wi.z),t.Y36(h.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-folder-and-file-new"]],viewQuery:function(e,i){if(1&e&&(t.Gf(_.GI,5),t.Gf(_.GI,5),t.Gf(_.GI,5),t.Gf(_.GI,5),t.Gf(_.GI,5),t.Gf(_.GI,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.basicMenuCate=o.first),t.iGM(o=t.CRH())&&(i.basicMenuFile=o.first),t.iGM(o=t.CRH())&&(i.basicMenuAll=o.first),t.iGM(o=t.CRH())&&(i.basicMenuCateGrid=o.first),t.iGM(o=t.CRH())&&(i.basicMenuFileGrid=o.first),t.iGM(o=t.CRH())&&(i.basicMenuAllGrid=o.first)}},inputs:{cateObjs:"cateObjs",documentObjs:"documentObjs",viewType:"viewType",isOnLib:"isOnLib",categoryId:"categoryId",ExistClipboard:"ExistClipboard",searchKey:"searchKey",listBreadcrumb:"listBreadcrumb",totalExam:"totalExam"},outputs:{openFolder:"openFolder",editFolder:"editFolder",cutFolder:"cutFolder",deleteFolder:"deleteFolder",pasteFolder:"pasteFolder",checkClipboard:"checkClipboard",backToAllCategory:"backToAllCategory",backToParentCategory:"backToParentCategory",showExamDetail:"showExamDetail",tryExam:"tryExam",offlineExam:"offlineExam",copyExam:"copyExam",cutExam:"cutExam",copyLinkExam:"copyLinkExam",listTestedExam:"listTestedExam",publishExam:"publishExam",configExam:"configExam",configExamClassroom:"configExamClassroom",editExam:"editExam",deleteExam:"deleteExam",goToPowerPoint:"goToPowerPoint",statisticalExam:"statisticalExam",supervisingCandidatesExam:"supervisingCandidatesExam",returnOfflineShare:"returnOfflineShare",sort:"sort",sortByPublish:"sortByPublish",sortByPrice:"sortByPrice",sortByDateUpdated:"sortByDateUpdated",sortByAttended:"sortByAttended",previewHomework:"previewHomework",homeworkScoreList:"homeworkScoreList",homeworkCopyLink:"homeworkCopyLink",configHomework:"configHomework",editHomework:"editHomework",publishHomework:"publishHomework",copyHomework:"copyHomework",cutHomework:"cutHomework",deleteHomework:"deleteHomework",deleteMultipleDocument:"deleteMultipleDocument",loadApiData:"loadApiData"},features:[t.qOj,t.TTD],decls:35,vars:33,consts:[[1,"azt-file-manager"],[1,"mt-3","mb-3","h-auto","sm:h-10","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","folder-and-file-new-F58H12G9GB-",3,"click"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","flex flex-wrap items-center mt-3 sm:mt-0 mr-auto sm:mr-0",3,"ngClass",4,"ngIf"],[1,"table-zone",2,"overflow-x","auto",3,"contextMenu"],["class","box p-5 flex items-center","style","height: 300px; ",4,"ngIf"],[4,"ngIf"],["basicMenuCate",""],["contextMenuItem",""],["basicMenuFile",""],["contextMenuItem","",3,"subMenu"],["subMenuMove",""],["basicMenuHomeworkFile",""],[3,"ngClass","disabled"],["basicMenuAll",""],[3,"disabled"],["disableMenu",""],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","folder-and-file-new-emN2AGc-y20",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","flex-wrap","items-center","mt-3","sm:mt-0","mr-auto","sm:mr-0",3,"ngClass"],["class","inline-block mr-2",3,"ngClass",4,"ngIf"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],[1,"inline-block","mr-2",3,"ngClass"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["points","5 9 2 12 5 15"],["points","9 5 12 2 15 5"],["points","15 19 12 22 9 19"],["points","19 9 22 12 19 15"],["x1","2","y1","12","x2","22","y2","12"],["x1","12","y1","2","x2","12","y2","22"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-primary",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["width","84","height","84","viewBox","0 0 84 84","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M38.5 70H14C12.1435 70 10.363 69.2625 9.05025 67.9497C7.7375 66.637 7 64.8565 7 63V17.5C7 13.65 10.15 10.5 14 10.5H27.755C28.9079 10.506 30.0416 10.7966 31.0552 11.3462C32.0687 11.8957 32.9309 12.6871 33.565 13.65L36.435 17.85C37.0691 18.8129 37.9313 19.6043 38.9448 20.1538C39.9584 20.7034 41.092 20.994 42.245 21H70C71.8565 21 73.637 21.7375 74.9497 23.0503C76.2625 24.363 77 26.1435 77 28V42","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M59.5 70C65.299 70 70 65.299 70 59.5C70 53.701 65.299 49 59.5 49C53.701 49 49 53.701 49 59.5C49 65.299 53.701 70 59.5 70Z","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M73.5 73.5L68.25 68.25","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 26V44.3184M16 50V54.7432V50Z","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"font-medium","mt-2"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","folder-and-file-new-py2iPbmv_K9","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["class","form-check-input","type","checkbox","formControlName","isSelectAll",3,"change",4,"ngIf","ngIfElse"],["onShareFolder",""],["azt-track-service","folder-and-file-new-Fh5Xeywt4Vl",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["points","18 15 12 9 6 15"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","-mt-2",3,"ngClass"],["points","6 9 12 15 18 9"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"id","contextMenu","contextMenuSubject",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],["azt-track-service","folder-and-file-new-py2iPbmv_K9",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"change"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"disabled"],[1,"col-span-2"],["azt-track-service","folder-and-file-new-bTOV6xW1dIT",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"flex","mx-auto"],[1,"w-40"],["azt-track-service","folder-and-file-new-C81T6Hn4LB6",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"lg:w-auto","ml-auto"],["azt-track-service","folder-and-file-new-0OUTvRkSwMy",1,"flex","items-center","cursor-pointer","pl-10",3,"click"],[1,"whitespace-nowrap"],[1,"folder-item",3,"id","contextMenu","contextMenuSubject"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"grid","grid-cols-12","gap-3","items-center","px-5"],[3,"ngClass"],[1,"flex-none","flex","items-center","mr-10"],[1,"flex","items-center","py-3"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"disabled","click",4,"ngIf"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],["shareFolder",""],["azt-track-service","folder-and-file-new-UCBI7ziYKss",1,"flex","items-center","py-3","clickable",3,"ngClass","click"],[1,"image-fit"],[4,"ngIf","ngIfElse"],["noShare",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["class","col-span-2 py-3",4,"ngIf"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"disabled","click"],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox","disabled","",1,"form-check-input"],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","bi","bi-folder-fill",3,"matTooltip"],["d","M9.63852 2H13.62C14.7961 2 15.7183 3.00984 15.6118 4.18107L14.9755 11.1811C14.8818 12.2112 14.0181 13 12.9837 13H2.63653C1.60212 13 0.738391 12.2112 0.64474 11.1811L0.00837643 4.18107C-0.0356793 3.69646 0.0963746 3.23948 0.349653 2.87023L0.310097 2C0.310097 0.895431 1.20553 0 2.3101 0H5.98167C6.5121 0 7.02081 0.210714 7.39588 0.585787L8.22431 1.41421C8.59938 1.78929 9.10809 2 9.63852 2ZM1.31657 2.11964C1.52937 2.04231 1.75945 2 2.00016 2H7.39588L6.68878 1.29289C6.50124 1.10536 6.24689 1 5.98167 1H2.3101C1.76412 1 1.32033 1.43755 1.31027 1.98112L1.31657 2.11964Z","fill","currentColor"],["d","M2.5 12C2.5 12 2 12 2 11.5C2 11 2.5 9.5 5 9.5C7.5 9.5 8 11 8 11.5C8 12 7.5 12 7.5 12H2.5Z","fill","white"],["d","M5 9C5.82843 9 6.5 8.32843 6.5 7.5C6.5 6.67157 5.82843 6 5 6C4.17157 6 3.5 6.67157 3.5 7.5C3.5 8.32843 4.17157 9 5 9Z","fill","white"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","bi","bi-folder-fill"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],[1,"col-span-2","py-3"],[1,"flex-none","flex","items-center","mr-5"],[1,"w-80"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],["class","exam-item",3,"id","contextMenu","contextMenuSubject",4,"ngIf"],[1,"exam-item",3,"id","contextMenu","contextMenuSubject"],[1,"inbox__item","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-VLcxoWQErXD","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["shareExam",""],["azt-track-service","folder-and-file-new-1sDCbpyZRKl",1,"flex","items-center","py-3","clickable",2,"width","100%",3,"ngClass","click"],[1,"w-6","h-6","image-fit"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","folder-and-file-new-VLcxoWQErXD",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["formControlName","checked","type","checkbox",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-4","h-4","lucide","text-slate-200","dark:text-darkmode-400",2,"padding","3px",3,"matTooltip"],["d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"],["d","M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"],[1,"inbox__item--highlight","mx-auto"],[1,"flex-none","flex","items-center"],[1,"inbox__item--highlight"],[1,"lg:w-auto","truncate"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"col-span-4"],["azt-track-service","folder-and-file-new-k6_FrZt9LrK","class","btn btn-transparent btn-outline-secondary p-1 mr-2 -ml-4",3,"click",4,"ngIf"],["shareHomework",""],["azt-track-service","folder-and-file-new-VbsMi66DBFK",1,"flex","items-center","py-3","clickable",2,"width","100%",3,"ngClass","click"],["class","w-6 h-6 text-primary bi bi-file-text-fill","xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",4,"ngIf"],["class","text-primary bi bi-file-earmark-check-fill","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["azt-track-service","folder-and-file-new-k6_FrZt9LrK",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2","-ml-4",3,"click"],["type","checkbox","disabled","",1,"form-check-input","flex-none"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","text-primary","bi","bi-file-text-fill"],["d","M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5 4h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1zm0 2h3a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"text-primary","bi","bi-file-earmark-check-fill"],["d","M12 9v4"],["d","M12 17h.01"],[1,"lg:w-auto"],["class","dropdown-menu show w-60 relative p-3",4,"ngIf"],[1,"dropdown-menu","show","w-60","relative","p-3"],[1,"dropdown-content"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj",4,"ngIf"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-dngdKwgVYql",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],["d","M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],["azt-track-service","folder-and-file-new-dMvAkRVjW8P",1,"dropdown-item",3,"click"],["d","M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],["d","M2 8v11c0 1.1.9 2 2 2h14"],["azt-track-service","folder-and-file-new-Eqyg7w3RWjc",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hh3aACvDlTx",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-dpksjYyWqXr",1,"dropdown-item",3,"click"],["cx","12","cy","12","r","10"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["azt-track-service","folder-and-file-new-73z5tojbR5l",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["class","dropdown-menu w-60 show relative p-3",4,"ngIf"],[1,"dropdown-menu","w-60","show","relative","p-3"],["isOnlineExam",""],["isOnlineExamCopy",""],["azt-track-service","folder-and-file-new-saSjFTRviTc",1,"dropdown-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","folder-and-file-new-0TxDH9uhI5N",1,"dropdown-item",3,"click"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["azt-track-service","folder-and-file-new-Yrb2Iei9P3i",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["azt-track-service","folder-and-file-new-imOSjqX7qwB",1,"dropdown-item",3,"click"],["d","M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],["d","M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],["d","M12 2v2"],["d","M12 22v-2"],["d","m17 20.66-1-1.73"],["d","M11 10.27 7 3.34"],["d","m20.66 17-1.73-1"],["d","m3.34 7 1.73 1"],["d","M14 12h8"],["d","M2 12h2"],["d","m20.66 7-1.73 1"],["d","m3.34 17 1.73-1"],["d","m17 3.34-1 1.73"],["d","m11 13.73-4 6.93"],["azt-track-service","folder-and-file-new-Rw0wdgMyIG",1,"dropdown-item",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","folder-and-file-new-yU7FoiHf8nE",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-IFDWsvZh0l2",1,"dropdown-item",3,"click"],["points","20 6 9 17 4 12"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["azt-track-service","folder-and-file-new-nI3PRUcmMOn",1,"dropdown-item",3,"click"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","folder-and-file-new-oIFmeRUYHl",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-f1MqcshOTmu",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-z4nXVrVuy-s",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-LM51mwt6vZ2",1,"dropdown-item",3,"click"],["class","dropdown-menu show relative p-3","style","margin-top: -38px",4,"ngIf"],[1,"dropdown-menu","show","relative","p-3",2,"margin-top","-38px"],[1,"dropdown-item",2,"cursor","default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-auto"],["points","9 18 15 12 9 6"],[1,"dropdown-menu","show","w-56","relative",2,"margin-left","-5px"],["azt-track-service","folder-and-file-new-PIBIuTYB0c1",1,"dropdown-item",3,"click"],["d","M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],["points","12 15 17 21 7 21 12 15"],["azt-track-service","folder-and-file-new-1pfCD5AevZz",1,"dropdown-item",3,"click"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["azt-track-service","folder-and-file-new-U8OX6yR8aix",1,"dropdown-item",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","folder-and-file-new-v__VS-iYotq",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-jiXhp44NhSY",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["azt-track-service","folder-and-file-new-kV8Cpp2f4yB",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hHK4eqbEIdB",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-kFSsxg0JlA-",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-0sWZoY849CX",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-Cy5tjH-t1d0",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-ByVJRVaby4L",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-wPbmJ8sZGAH",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-or8esZsCIRc",1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),t.NdJ("click",function(){return i.backToAllCate()}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.YNc(8,ol,7,16,"li",6),t.qZA()(),t.YNc(9,Su,6,8,"div",7),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,Ou,10,3,"div",9),t.ALo(12,"appFilter"),t.ALo(13,"appFilter"),t.YNc(14,Ph,28,47,"ng-container",10),t.ALo(15,"appFilter"),t.ALo(16,"appFilter"),t.qZA()(),t.TgZ(17,"context-menu",null,11),t.YNc(19,Jh,1,1,"ng-template",12),t.qZA(),t.TgZ(20,"context-menu",null,13),t.YNc(22,p0,1,1,"ng-template",12),t.YNc(23,f0,2,4,"ng-template",14),t.TgZ(24,"context-menu",null,15),t.YNc(26,y0,8,12,"ng-template",12),t.qZA()(),t.TgZ(27,"context-menu",null,16),t.YNc(29,Z0,1,1,"ng-template",12),t.qZA(),t.TgZ(30,"context-menu",17,18),t.YNc(32,D0,4,2,"ng-template",12),t.qZA(),t._UZ(33,"context-menu",19,20)),2&e){const o=t.MAs(25),s=t.MAs(31);let r,l;t.xp6(6),t.hij(" ",t.lcZ(7,10,"lang_auto_tat_ca")," "),t.xp6(2),t.Q6J("ngForOf",i.listBreadcrumb),t.xp6(1),t.Q6J("ngIf",-1!=i.currentCategoryId&&(i.totalSelectCopyOrCut>0||i.hasClipBoard())),t.xp6(1),t.Q6J("contextMenu",s),t.xp6(1),t.Q6J("ngIf",0==(null==(r=t.Dn7(12,12,i.cateObjs,i.searchKey,t.DdM(28,as)))?null:r.length)&&0==(null==(r=t.Dn7(13,16,i.documentObjs,i.searchKey,t.DdM(29,as)))?null:r.length)),t.xp6(3),t.Q6J("ngIf",0!=(null==(l=t.Dn7(15,20,i.cateObjs,i.searchKey,t.DdM(30,as)))?null:l.length)||0!=(null==(l=t.Dn7(16,24,i.documentObjs,i.searchKey,t.DdM(31,as)))?null:l.length)),t.xp6(9),t.Q6J("subMenu",o),t.xp6(7),t.Q6J("ngClass",t.DdM(32,j0))("disabled",!i.hasClipBoard()),t.xp6(3),t.Q6J("disabled",!0)}},dependencies:[E.mk,E.sg,E.O5,E.PC,Fo.i3,Le.gM,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,Pe.M,Ji.Q,is.I,_.HW,_.GI,_.n5,E.OU,_t.bT,_t.gB,_t.Gf,_t.BU,_t.vL,_t.Pz,_t.Jx,_t.I$,_t.El,_t.cW,_t.QE,_t.HU,_t.r,_t._W,_t.tO],encapsulation:2}),n})();var F0=A(55981),Q0=A(35438);function U0(n,a){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("value",e.id)("selected",e.id==i.form.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function B0(n,a){1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function R0(n,a){if(1&n&&(t.TgZ(0,"option",11),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("value",e.id)("selected",e.id==i.form.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function z0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"select",6),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.filterSchoolSubject(o.form.controls.schoolLevel.value))}),t.TgZ(9,"option",7),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.YNc(12,U0,3,5,"option",8),t.qZA(),t.YNc(13,B0,3,3,"div",9),t.qZA(),t.TgZ(14,"div",3)(15,"div",4)(16,"label",5),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"select",10)(20,"option",7),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.YNc(23,R0,3,5,"option",8),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(5),t.hij(" ",t.lcZ(7,11,"lang_auto_khoi_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.form.controls.schoolLevel.value),t.xp6(1),t.hij("",t.lcZ(11,13,"lang_auto_---chon_khoi"),"---"),t.xp6(2),t.Q6J("ngForOf",e.schoolLevelObjs),t.xp6(1),t.Q6J("ngIf",0==(null==e.form||null==e.form.controls||null==e.form.controls.schoolLevel?null:e.form.controls.schoolLevel.value)||0==(null==e.form||null==e.form.controls||null==e.form.controls.schoolSubject?null:e.form.controls.schoolSubject.value)),t.xp6(4),t.hij(" ",t.lcZ(18,15,"lang_auto_mon_hoc")," "),t.xp6(2),t.uIk("disabled",0==e.form.controls.schoolLevel.value?"":null),t.xp6(1),t.Q6J("selected",0==e.form.controls.schoolSubject.value),t.xp6(1),t.hij("",t.lcZ(22,17,"lang_auto_---chon_mon"),"---"),t.xp6(2),t.Q6J("ngForOf",e.subjectSelectedList)}}let rl=(()=>{class n extends st.Q{constructor(){super(),this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={},this.formControlName="",this.typeView=0,this.subjectSelectedList=[]}filterSchoolSubject(e){var i,o,s;if(0==this.subjectSelectedList.length)this.filterSubject(e??1);else{let r=!1;for(let l=0;l<this.subjectSelectedList.length;l++)e&&(e<(null!==(i=this.subjectSelectedList[l].from)&&void 0!==i?i:0)||e>(null!==(o=this.subjectSelectedList[l].to)&&void 0!==o?o:0))&&(r=!0);r&&(this.filterSubject(e??1),null===(s=this.form)||void 0===s||s.controls.schoolSubject.setValue(0))}}filterSubject(e){let i=this.commonService.myClone(this.schoolSubjectObjs);this.subjectSelectedList=i.filter(o=>!(o.from&&o.to&&e)||e>=o.from&&e<=o.to)}renderData(){var e,i,o,s;if(0==this.typeView)if(this.examSchoolLogObj.id){let r=null!==(e=this.examSchoolLogObj.lastSchoolLevelId)&&void 0!==e?e:0;this.filterSchoolSubject(r??this.schoolLevelObjs[0].id),null===(i=this.form)||void 0===i||i.controls.schoolLevel.setValue(this.examSchoolLogObj.lastSchoolLevelId),null===(o=this.form)||void 0===o||o.controls.schoolSubject.setValue(this.examSchoolLogObj.lastSchoolSubjectId)}else this.filterSchoolSubject(0);else this.filterSchoolSubject(null===(s=this.form)||void 0===s?void 0:s.controls.schoolLevel.value)}ngOnChanges(){(this.schoolLevelObjs||this.subjectSelectedList)&&this.renderData()}ngOnInit(){this.renderData()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["config-level-subject"]],inputs:{form:"form",schoolLevelObjs:"schoolLevelObjs",schoolSubjectObjs:"schoolSubjectObjs",examSchoolLogObj:"examSchoolLogObj",formControlName:"formControlName",typeView:"typeView"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],[1,"form-label","flex","items-center"],["formControlName","schoolLevel",1,"form-select",3,"change"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["class","text-xs mt-2 text-danger",4,"ngIf"],["formControlName","schoolSubject",1,"form-select"],[3,"value","selected"],[1,"text-xs","mt-2","text-danger"]],template:function(e,i){1&e&&t.YNc(0,z0,24,19,"div",0),2&e&&t.Q6J("ngIf",i.form)},dependencies:[E.sg,E.O5,h._Y,h.YN,h.Kr,h.EJ,h.JJ,h.JL,h.sg,h.u,Pe.M,_t.bT],encapsulation:2}),n})();function J0(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function H0(n,a){1&n&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function $0(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",12),t._UZ(15,"input",13),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,H0,3,3,"div",14),t.qZA()(),t.TgZ(18,"div",15),t._UZ(19,"config-level-subject",16),t.qZA(),t.TgZ(20,"div",17)(21,"div",10)(22,"label",18),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.TgZ(25,"div",10)(26,"div",12),t._UZ(27,"textarea",19),t.ALo(28,"mytranslate"),t.qZA()()()(),t.TgZ(29,"div",20)(30,"div",21)(31,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleDestroy())}),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSubmitData())}),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,14,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,16,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,18,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",e.form.controls.generalTitle.errors),t.xp6(2),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("examSchoolLogObj",e.examSchoolLogObj),t.xp6(4),t.hij(" ",t.lcZ(24,20,"lang_auto_mo_ta")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(28,22,"lang_auto_nhap_ten")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(33,24,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||0==e.form.controls.schoolLevel.value||0==e.form.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(36,26,"lang_auto_luu")," ")}}function K0(n,a){if(1&n&&(t.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"span"),t._UZ(4,"span",28),t._uU(5,"\xa0"),t.qZA(),t.TgZ(6,"div",29),t._uU(7),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(7),t.Oqu(e.logConfig.msg)}}let Y0=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d){super(),this.formBuilder=e,this.editorOutputDataService=i,this.activeRoute=o,this.questionService=s,this.examService=r,this.userService=l,this.questionSaveService=c,this.documentConfigService=u,this.dataAztMathRawHelper=d,this.onBack=new t.vpe,this.logConfig={},this.cur_cateId=0,this.backToLink="",this.form=new h.nJ({}),this.dataSave={},this.newListUrls=[],this.base64ContentCount=0,this.countProcess=0,this.actionRunAfterConvert=[],this.saveParts=[],this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={},this.questionSaveService.callbackBase64ToCanvas=(m,p)=>{let b=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${b} ${Math.floor(m/p*100*.7)}%`},this.questionSaveService.callbackUploadImage=(m,p)=>{let b=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${b} ${Math.floor(m/p*100*.3)+70}%`}}ngOnInit(){var e,i,o,s;this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.dataSave=this.editorOutputDataService.getOutputData(),this.GetSubjectAndLevel();let r=null!==(s=null!==(i=null===(e=this.dataSave.exam)||void 0===e?void 0:e.examObj.name)&&void 0!==i?i:null===(o=this.dataSave.homework)||void 0===o?void 0:o.name)&&void 0!==s?s:"";this.form=this.formBuilder.group({generalTitle:new h.p4(r,[h.kI.required,Ri._.noWhiteSpace]),generalDescription:new h.p4(""),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])}),super.ngOnInit()}processSaveQuestions(e,i,o){var s,r,l,c,u,d;if(null!==(s=this.dataSave.exam)&&void 0!==s&&s.questionObj&&null!==(r=this.dataSave.exam)&&void 0!==r&&r.questionObj.listQuestions){var m=null===(l=this.dataSave.exam)||void 0===l?void 0:l.questionObj.listQuestions.length;let p=e+100>m?m:e+100,b=null!==(u=null===(c=this.dataSave.exam)||void 0===c?void 0:c.questionObj.listQuestions.slice(e,p))&&void 0!==u?u:[],y=[];for(const C of b)y.push({categoryId:C.categoryId,groupId:C.groupId,name:null!==(d=C.name)&&void 0!==d?d:"none",metadata:C.metadata,isImage:C.isImage,questionContent:C.questionContent,answerMedia:C.answerMedia,questionText:C.questionText,answerType:C.answerType,answerConfig:C.answerConfig,coordinates:C.coordinates,answerResult:C.answerResult,totalQuestion:C.totalQuestion,tags:C.tags,mediaId:C.mediaId,mediaMeta:C.mediaMeta,attachments:C.attachments,version:C.version,isFixAns:C.isFixAns,groupType:C.groupType,__path:C.__path});y.length>0?this.saveQuestionObjs(y,i).then(C=>{if(C.examConfigs&&C.examConfigs.length>0){let I=o.concat(C.examConfigs);this.processSaveQuestions(p,C.indexSaved,I)}else this.countProcess=0,this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai")}):this.saveExamObj(o)}}saveExamObj(e){if(this.dataSave.exam){let i=!1;this.saveParts=this.saveParts.map(l=>{var c;const u=l.split("_____");return-1!==l.toLocaleLowerCase().indexOf(null!==(c=this.commonService.myTranslateInstant("lang_auto_ngau_nhien"))&&void 0!==c?c:"ng\u1eabu nhi\xean")&&(i=!0),1===u.length?u[0]:u[1]});let o=this.commonService.getFormObj(this.form),s=this.userService.getUserObj(),r=JSON.stringify({type:"exam",id:0,user:s.id});this.dataSave.exam.examObj.scoringMethod="1",this.dataSave.exam.examObj.name=o.generalTitle,this.dataSave.exam.examObj.examConfigs=JSON.stringify(e),this.dataSave.exam.examObj.description=o.generalDescription,this.dataSave.exam.examObj.editorStatus=2,this.dataSave.exam.examObj.metadata=JSON.stringify(this.saveParts),this.dataSave.exam.examObj.isRandomExam=i,this.dataSave.exam.examObj.schoolLevelId=o.schoolLevel,this.dataSave.exam.examObj.schoolSubjectId=o.schoolSubject,this.examService.apiExamSaveObjPost(this.dataSave.exam.examObj,r).subscribe(l=>{var c;if(this.logConfig.status=!1,this.logConfig.msg=void 0,1===l.success){const u=null===(c=l.data)||void 0===c?void 0:c.obj;this.backToLink=`/admin/testbank/azota-editor/${null!=this.cur_cateId?this.cur_cateId:0}`,this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!=this.cur_cateId?this.cur_cateId:0}/${u?.hashId}`,`?backto=${this.backToLink}&isNewDocument=1`)}})}}convertSaveQuestion(e){return new Promise((i,o)=>{const s=new X.Q(3);e.forEach(r=>{s.addTask(this.dataAztMathRawHelper,this.dataAztMathRawHelper.encodeQuestion,[r])}),s.start().then(r=>{0===r.errs.length?i(r.datas):o(r.errs[0])})})}saveQuestionObjs(e,i){return new Promise(o=>{this.convertSaveQuestion(e).then(s=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:s}).subscribe(r=>{var l,c,u;if(this.dataSave.exam&&1===r.success&&null!==(l=r.data)&&void 0!==l&&l.objs){const d=[];r.data.objs.forEach((m,p)=>{var b;const y=null===(b=this.dataSave.exam)||void 0===b?void 0:b.examConfig.find(I=>I.name==m.name);if(d.push({id:m.id,name:m.name,groupId:m.groupId,scorePerQuestion:y?.point||1,totalQuestion:1,sort:p+i}),s[p]){const I=s[p];if(I.__path&&I.__path.length>0){const D=I.__path.split("=>")[0].trim();this.saveParts.includes(D)||this.saveParts.push(D)}else this.saveParts.push(`[@Q${m.id}: C\xe2u ${p+i+1}]`)}}),o({indexSaved:(null===(u=null===(c=r.data)||void 0===c?void 0:c.objs)||void 0===u?void 0:u.length)+i,examConfigs:d})}else o({indexSaved:i,examConfigs:[]})})}).catch(()=>{o({indexSaved:i,examConfigs:[]})})})}startMainProcessSave(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestions(0,0,[])}handleSubmitData(){var e,i;if(this.logConfig.status)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.logConfig.status=!0,this.logConfig.msg=null!==(e=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi"))&&void 0!==e?e:"",this.countProcess=0,this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){const o=this.dataSave.exam.questionObj.listQuestions;let s=null!==(i=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi"))&&void 0!==i?i:"";this.questionSaveService.convertQuestions(o,this.dataSave.exam.rootQuests,(r,l=s,c)=>{this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack(l),c&&this.stopStatusObj()}).then(()=>{this.startMainProcessSave()})}}handleDestroy(){this.onBack.emit()}GetSubjectAndLevel(){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var i,o,s,r,l,c,u;1==e.success?(this.examSchoolLogObj=null!==(o=null===(i=e.data)||void 0===i?void 0:i.examSchoolLogObj)&&void 0!==o?o:{},this.schoolLevelObjs=null!==(r=null===(s=e.data)||void 0===s?void 0:s.schoolLevelObjs)&&void 0!==r?r:[],this.schoolSubjectObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.schoolSubjectObjs)&&void 0!==c?c:[],this.successStatusObj()):this.errorStatusObj(null!==(u=e.message)&&void 0!==u?u:"")}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(Rn),t.Y36(w.gz),t.Y36(Bt.aE),t.Y36(Bt.Oe),t.Y36(qn.K),t.Y36(Ui),t.Y36(Bt.Cq),t.Y36(Q0.n))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-info-general"]],outputs:{onBack:"onBack"},features:[t.qOj],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","generalTitle","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","generalDescription",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"mt-5"],[1,"text-right"],["azt-track-service","info-general-j9RyDEucWp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","info-general-ZAzZ6aTX1b",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"mt-2","text-danger","text-xs","fade"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(e,i){if(1&e&&(t.YNc(0,J0,1,0,"azt-loading-effect",0),t.YNc(1,$0,37,28,"ng-template",null,1,t.W1O),t.YNc(3,K0,8,1,"div",2)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",i.logConfig.status)}},dependencies:[E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,xe.Q,Pe.M,rl,_t.bT],encapsulation:2}),n})();var G0=A(6834),so=A(70655),ya=A(17489),W0=A(30361),V0=A(4128),Iu=A(68675),ss=A(54004),p_=A(81319),h_=A(45646);const g_={a:"rgb(0, 0, 255, 0.2)",b:"rgb(255, 165, 0, 0.2)",c:"rgb(0, 128, 0, 0.2)",d:"rgb(128, 0, 128, 0.2)",e:"rgb(255, 255, 0, 0.2)",f:"rgb(0, 0, 255, 0.2)",g:"rgb(0, 128, 0, 0.2)",h:"rgb(128, 0, 128, 0.2)"},f_={A:"B",B:"C",C:"D",D:"E",E:"F",F:"G",G:"H"},Zi=100;let X0=(()=>{class n{constructor(e,i){this.commonService=e,this.http=i,this.fillColor=(o,s,r,l,c,u)=>{s.fillStyle=o,s.fillRect(Math.round(r),Math.round(l),Math.round(c),Math.round(u))},this.drawRect=(o,s,r,l,c,u)=>{s.beginPath(),s.lineWidth=1,s.strokeStyle=o,s.rect(Math.round(r),Math.round(l),Math.round(c),Math.round(u)),s.stroke()},this.getSingleImgData=(o,s)=>{var r;if(o.inactive){let l=null!==(r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin"))&&void 0!==r?r:"";throw this.commonService.snackError(l),new Error(l)}try{let l=document.createElement("canvas");return l.width=0==o.width?2:Math.round(o.width),l.height=0==o.heigh?2:Math.round(o.heigh),l.getContext("2d")?.drawImage(s[o.pageIndex].canvas,Math.round(o.left),Math.round(o.top),l.width,l.height,0,0,l.width,l.height),l.toDataURL("image/png")}catch(l){return console.log(l),"https://via.placeholder.com/300"}},this.getScatteredImgData=(o,s)=>{var r;const l=o.filter(u=>!u.inactive);if(o.filter(u=>u.inactive).length==o.length){let u=null!==(r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin"))&&void 0!==r?r:"";throw this.commonService.snackError(u),new Error(u)}try{let u=document.createElement("canvas"),d=l.map(b=>b.width);u.width=Math.round(Math.max(...d));let m=0;for(let b=0;b<l.length;b++)m+=l[b].heigh;u.height=Math.round(m);let p=u.getContext("2d");for(let b=0;b<l.length;b++)p?.drawImage(s[l[b].pageIndex].canvas,Math.round(l[b].left),Math.round(l[b].top),Math.round(l[b].width),Math.round(l[b].heigh),0,0==b?0:this.sumHighTo(b,l),Math.round(l[b].width),Math.round(l[b].heigh));return u.toDataURL("image/png")}catch(u){return console.log(u),"https://via.placeholder.com/300"}}}getErrorQtns(e){var i=[];for(let o=0;o<e.length;o++)!e[o].isGroup&&0==e[o].answers.length&&(e[o].strAns&&void 0!==e[o].strAns||i.push(e[o].num));return i}sumHighTo(e,i){let o=0,s=i.filter(r=>!r.inactive);for(let r=0;r<e;r++)o+=Math.round(s[r].heigh);return o}maxWidthTo(e,i){let o=[],s=i.filter(r=>!r.inactive);for(let r=0;r<e;r++)o.push(s[r].width);return Math.round(Math.max(...o))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v),t.LFG(K.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var tg=A(42898),eg=A(58914),wa=A(24029),v_=A(4307),ng=A(93795),cl=A(47957),ro=A(4859),ig=A(56709),b_=A(51572);let og=(()=>{class n{constructor(e){this.ref=e}onInput(e){if(""!=e.target.value){let i=e.target.selectionStart,o=e.target.selectionEnd;if(e.target.value=e.target.value.replace(/[^\d.,]/g,""),""==e.target.value&&(e.target.value="0"),e.target.value.includes(",")&&(e.target.value=e.target.value.replace(",",".")),e.target.setSelectionRange(i,o),e.preventDefault(),!this.lastValue||this.lastValue&&e.target.value.length>0&&this.lastValue!==e.target.value){this.lastValue=this.ref.nativeElement.value=e.target.value;const s=document.createEvent("HTMLEvents");s.initEvent("input",!1,!0),e.target.dispatchEvent(s)}}else e.target.value=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","appReplaceCommas",""]],hostBindings:function(e,i){1&e&&t.NdJ("input",function(s){return i.onInput(s)})}}),n})();var Bo=A(44944);const ag=["myDialogSplitPoint"];function sg(n,a){if(1&n&&(t.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",24),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",26),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_trac_nghiem")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_trac_nghiem")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.multipleQuestion)}}function rg(n,a){if(1&n&&(t.TgZ(0,"div",19)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",27),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",28),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",26),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_dien_tu")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_dien_tu")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.fillQuestion)}}function lg(n,a){if(1&n&&(t.TgZ(0,"div",29)(1,"div",11)(2,"div",20)(3,"div",21)(4,"label",22),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",23),t._UZ(8,"input",30),t.qZA()()(),t.TgZ(9,"div",11)(10,"div",20)(11,"div",21)(12,"label",25),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",23),t._UZ(16,"input",31),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,4,"lang_auto_tong_diem_tu_luan")),t.xp6(3),t.Q6J("decimal",!0),t.xp6(5),t.Oqu(t.lcZ(14,6,"lang_auto_so_cau_tu_luan")),t.xp6(3),t.Q6J("value",null==e.data||null==e.data.obj?null:e.data.obj.essayQuestion)}}function cg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onGlobalClick(o))}),t.TgZ(1,"div",5,6)(3,"div",7)(4,"h2",8),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",7)(8,"div",9)(9,"div",10)(10,"div",11)(11,"p",12),t._uU(12),t.ALo(13,"mytranslate"),t.ALo(14,"number"),t.ALo(15,"numberFloat"),t.ALo(16,"numberFloat"),t.ALo(17,"numberFloat"),t.qZA()()(),t.TgZ(18,"form",13),t.YNc(19,sg,17,8,"div",14),t.YNc(20,rg,17,8,"div",14),t.YNc(21,lg,17,8,"div",15),t.qZA()()(),t.TgZ(22,"div",16)(23,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.btnCloseDialog(!1))}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.setPointData())}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,10,"lang_auto_chia_diem")),t.xp6(7),t.AsE("",t.lcZ(13,12,"lang_auto_tong_diem"),": ",t.xi3(14,14,t.lcZ(15,17,e.form.controls.multiplePoint.value)+t.lcZ(16,19,e.form.controls.fillPoint.value)+t.lcZ(17,21,e.form.controls.essayPoint.value),"1.0-2"),""),t.xp6(6),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.multipleQuestion),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.fillQuestion),t.xp6(1),t.Q6J("ngIf",null==e.data||null==e.data.obj?null:e.data.obj.essayQuestion),t.xp6(3),t.hij(" ",t.lcZ(25,23,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(28,25,"lang_auto_chia")," ")}}let y_=(()=>{class n extends st.Q{constructor(e){super(),this.fb=e,this.closeDialog=new t.vpe,this.setPoint=new t.vpe,this.form=new h.nJ({}),this.essayPoint="",this.multiplePoint="",this.fillPoint=""}onKeydownHandler(e){this.closeDialog.emit()}onGlobalClick(e){var i;null!==(i=this.myDialog)&&void 0!==i&&i.nativeElement.contains(e.target)||this.closeDialog.emit()}btnCloseDialog(e){e?this.closeDialog.emit(e):this.closeDialog.emit()}changeMultipPoint(e){this.multiplePoint=e.target.value}changeEssayPoint(e){this.essayPoint=e.target.value}changeFillPoint(e){this.fillPoint=e.target.value}setPointData(){let e=this.commonService.getFormObj(this.form),i=Number(e.multiplePoint),o=Number(e.essayPoint),s=Number(e.fillPoint);isNaN(i)&&(i=0),isNaN(o)&&(o=0),isNaN(s)&&(s=0);let r={multiplePoint:i.toString(),essayPoint:o.toString(),fillPoint:s.toString()};this.setPoint.emit(r)}ngOnInit(){var e,i,o,s,r,l,c,u;this.form=null!==(i=null===(e=this.data)||void 0===e?void 0:e.obj)&&void 0!==i&&i.essayQuestion?this.fb.group({multiplePoint:new h.p4(10,[h.kI.required,h.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new h.p4(0,[h.kI.required,h.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),fillPoint:new h.p4(0,[h.kI.required,h.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}):this.fb.group({multiplePoint:new h.p4(10,[h.kI.required,h.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)]),essayPoint:new h.p4(0),fillPoint:new h.p4(0,[h.kI.required,h.kI.pattern(/^-?\d*[.,]?\d{0,4}$/)])}),this.form.patchValue({multiplePoint:null===(s=null===(o=this.data)||void 0===o?void 0:o.obj)||void 0===s?void 0:s.multiplePoint,essayPoint:null===(l=null===(r=this.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.essayPoint,fillPoint:null===(u=null===(c=this.data)||void 0===c?void 0:c.obj)||void 0===u?void 0:u.fillPoint}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-split-point"]],viewQuery:function(e,i){if(1&e&&t.Gf(ag,5),2&e){let o;t.iGM(o=t.CRH())&&(i.myDialog=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("keydown.escape",function(s){return i.onKeydownHandler(s)},!1,t.evT)},inputs:{data:"data"},outputs:{closeDialog:"closeDialog",setPoint:"setPoint"},features:[t.qOj],decls:4,vars:1,consts:[[1,"school-info_bg"],[1,"school-info","p-4",2,"border-radius","0.375rem"],[1,"modal-dialog","modal-lg"],["azt-track-service","azt-split-point-riLhb0Qv5Oo","class","modal-content",3,"click",4,"ngIf"],["azt-track-service","azt-split-point-riLhb0Qv5Oo",1,"modal-content",3,"click"],[1,"modal-body"],["myDialogSplitPoint",""],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"block-body"],[1,"row","mt-2"],[1,"col-md-12"],["for","total-point",1,"mr-2"],[1,"form-horizontal",3,"formGroup"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-dWuy_TsMB",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-gBtzvDfAHf",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"row"],[1,"flex","mt-2",2,"justify-content","space-between"],[1,"col-9"],["for","multiple-point"],[1,"col-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","multiplePoint",1,"input-point",3,"decimal"],["for",""],["type","number","readonly","",1,"input-point",3,"value"],["for","fill-point"],["type","text","appOnlyNumber","","id","fill-point","formControlName","fillPoint",1,"input-point",3,"decimal"],[1,"row","mt-3"],["type","text","appOnlyNumber","","id","multiple-point","formControlName","essayPoint",1,"input-point",3,"decimal"],["type","text","readonly","",1,"input-point",3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,cg,29,27,"div",3),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==i.data?null:i.data.isShow))},dependencies:[E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Bo.Y,Pe.M,E.JJ,_t.bT,_t.Hb],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:800px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();const ug=["myDialogExamInfo"];function dg(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_trac_nghiem")),t.xp6(3),t.Oqu(null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.length),t.xp6(2),t.Oqu(null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.join(", "))}}function _g(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_tu_luan")),t.xp6(3),t.Oqu(null==e.examInfo.listEssay?null:e.examInfo.listEssay.length),t.xp6(2),t.Oqu(null==e.examInfo.listEssay?null:e.examInfo.listEssay.join(", "))}}function mg(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_dien_tu")),t.xp6(3),t.Oqu(null==e.examInfo.listFill?null:e.examInfo.listFill.length),t.xp6(2),t.Oqu(null==e.examInfo.listFill?null:e.examInfo.listFill.join(", "))}}function pg(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_co_"+e.key+"_dap_an")),t.xp6(3),t.Oqu(e.value.length),t.xp6(2),t.Oqu(e.value.join(", "))}}function hg(n,a){if(1&n&&(t.ynx(0),t.YNc(1,pg,8,5,"tr",10),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",null==e.value?null:e.value.length)}}function gg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onGlobalClick(o))}),t.TgZ(1,"div",2,3)(3,"div")(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"p",7),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",8)(16,"table",9)(17,"tr")(18,"th"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()(),t.YNc(27,dg,8,5,"tr",10),t.YNc(28,_g,8,5,"tr",10),t.YNc(29,mg,8,5,"tr",10),t.YNc(30,hg,2,1,"ng-container",11),t.ALo(31,"keyvalue"),t.qZA()(),t.TgZ(32,"div",12)(33,"div",13)(34,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.btnCloseDialog(!1))}),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,12,"lang_auto_chi_tiet_de_thi")),t.xp6(5),t.hij(" ",t.lcZ(11,14,"lang_auto_tong_so_cau_cua_de")," : "),t.xp6(3),t.AsE("",e.examInfo.totalQuestion," ",t.lcZ(14,16,"lang_auto_cau"),""),t.xp6(6),t.Oqu(t.lcZ(20,18,"lang_auto_thong_tin")),t.xp6(3),t.Oqu(t.lcZ(23,20,"lang_auto_so_cau")),t.xp6(3),t.Oqu(t.lcZ(26,22,"lang_auto_danh_sach_cac_cau")),t.xp6(2),t.Q6J("ngIf",null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.length),t.xp6(1),t.Q6J("ngIf",null==e.examInfo.listEssay?null:e.examInfo.listEssay.length),t.xp6(1),t.Q6J("ngIf",null==e.examInfo.listFill?null:e.examInfo.listFill.length),t.xp6(1),t.Q6J("ngForOf",t.lcZ(31,24,e.examInfo.listQuestionWithTotalAnswer)),t.xp6(5),t.Oqu(t.lcZ(36,26,"lang_auto_dong"))}}let w_=(()=>{class n extends st.Q{constructor(e){super(),this.answerTypeService=e,this.startIndexQuestion=1,this.data={},this.type="edit",this.closeDialog=new t.vpe,this.questionObjs=[],this.examInfo={}}onKeydownHandler(e){this.closeDialog.emit()}onGlobalClick(e){var i;null!==(i=this.myDialog)&&void 0!==i&&i.nativeElement.contains(e.target)||this.closeDialog.emit()}btnCloseDialog(e){this.closeDialog.emit(e)}initData(){var e;this.questionObjs=null!==(e=this.data.obj)&&void 0!==e?e:[],this.filterQuestion()}filterQuestion(){if(this.examInfo.listEssay=[],this.examInfo.listMultiple=[],this.examInfo.listFill=[],this.examInfo.listQuestionWithTotalAnswer={},"edit"==this.type){let e=0;this.questionObjs.forEach(i=>{var o,s,r;e++,this.answerTypeService.isEssayAnswer(i.answerType)?null!=i.rawIndex&&(null===(o=this.examInfo.listEssay)||void 0===o||o.push(i.rawIndex+this.startIndexQuestion)):null!=i.rawIndex&&!this.answerTypeService.isFillAnswer(i.answerType)&&(null===(s=this.examInfo.listMultiple)||void 0===s||s.push(i.rawIndex+this.startIndexQuestion)),this.answerTypeService.isFillAnswer(i.answerType)&&null!=i.rawIndex&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(i.rawIndex+this.startIndexQuestion)),(this.answerTypeService.isOneChoiceAnswer(i.answerType)||this.answerTypeService.isMultipleChoiceAnswer(i.answerType))&&i.answers&&null!=i.rawIndex&&this.countTotalAnswerOfQuestion(i.answers.length,i.rawIndex+this.startIndexQuestion)}),this.examInfo.totalQuestion=e}if("createPDF"==this.type){let e=0;this.questionObjs.forEach(i=>{var o,s,r;1==i.tempData.isSelect&&(e++,this.answerTypeService.isEssayAnswer(i.tempData.answerType)?null!=i.index&&(null===(o=this.examInfo.listEssay)||void 0===o||o.push(i.index+this.startIndexQuestion)):null!=i.index&&!this.answerTypeService.isFillAnswer(i.tempData.answerType)&&(null===(s=this.examInfo.listMultiple)||void 0===s||s.push(i.index+this.startIndexQuestion)),this.answerTypeService.isFillAnswer(i.tempData.answerType)&&null!=i.index&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(i.index+this.startIndexQuestion)),(this.answerTypeService.isOneChoiceAnswer(i.tempData.answerType)||this.answerTypeService.isMultipleChoiceAnswer(i.tempData.answerType))&&i.answers&&null!=i.index&&this.countTotalAnswerOfQuestion(i.answers.length,i.index+this.startIndexQuestion))}),this.examInfo.totalQuestion=e}if("createDocx"==this.type){let e=0;this.questionObjs.forEach(i=>{var o,s,r;e++,this.answerTypeService.isEssayAnswer(i.typeQuestion)?null!=i.numberQuestion&&(null===(o=this.examInfo.listEssay)||void 0===o||o.push(i.numberQuestion)):null!=i.numberQuestion&&!this.answerTypeService.isFillAnswer(i.typeQuestion)&&(null===(s=this.examInfo.listMultiple)||void 0===s||s.push(i.numberQuestion)),this.answerTypeService.isFillAnswer(i.typeQuestion)&&null!=i.numberQuestion&&(null===(r=this.examInfo.listFill)||void 0===r||r.push(i.numberQuestion)),(this.answerTypeService.isOneChoiceAnswer(i.typeQuestion)||this.answerTypeService.isMultipleChoiceAnswer(i.typeQuestion))&&i.answers&&null!=i.numberQuestion&&this.countTotalAnswerOfQuestion(i.answers.length,i.numberQuestion)}),this.examInfo.totalQuestion=e}}countTotalAnswerOfQuestion(e,i){var o;this.examInfo.listQuestionWithTotalAnswer&&(!(null===(o=this.examInfo.listQuestionWithTotalAnswer)||void 0===o)&&o.hasOwnProperty(e)||(this.examInfo.listQuestionWithTotalAnswer[e]=[]),this.examInfo.listQuestionWithTotalAnswer[e].push(i))}ngOnInit(){this.initData(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(wa.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-exam-info"]],viewQuery:function(e,i){if(1&e&&t.Gf(ug,5),2&e){let o;t.iGM(o=t.CRH())&&(i.myDialog=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("keydown.escape",function(s){return i.onKeydownHandler(s)},!1,t.evT)},inputs:{startIndexQuestion:"startIndexQuestion",data:"data",type:"type"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:1,vars:1,consts:[["azt-track-service","azt-exam-info-HVPPdz9Jrco","class","school-info_bg",3,"click",4,"ngIf"],["azt-track-service","azt-exam-info-HVPPdz9Jrco",1,"school-info_bg",3,"click"],[1,"school-info","box","px-4","py-4"],["myDialogExamInfo",""],[1,"text-base","font-medium","mr-auto"],[1,"intro"],[1,"block-main"],[1,"text-right","mb-2"],[1,"table-responsive","table-height"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"flex","mt-3",2,"justify-content","flex-end"],[1,"azt-block-button"],["azt-track-service","azt-exam-info-MSBs6dcNIww",1,"btn","btn-secondary",3,"click"]],template:function(e,i){1&e&&t.YNc(0,gg,37,28,"div",0),2&e&&t.Q6J("ngIf",null==i.data?null:i.data.isShow)},dependencies:[E.sg,E.O5,E.Nd,_t.bT],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:600px;width:950px;margin-left:auto;margin-right:auto}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.block-text[_ngcontent-%COMP%]{margin-bottom:15px}.title[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.btn-icon[_ngcontent-%COMP%]{background:transparent;color:#333;border:none;display:flex;align-items:center;text-transform:inherit;padding:0;transition:all .3s}.btn-icon[_ngcontent-%COMP%]:hover{color:#2361ae}.block-show[_ngcontent-%COMP%]{background:#f4f5f7;border-radius:5px;margin-top:5px;padding:10px;max-width:100%;height:0;transition:opacity .3s;overflow:hidden;opacity:0;visibility:hidden;display:none}.show-active[_ngcontent-%COMP%]{display:block;height:auto;overflow:auto;opacity:1;visibility:visible}.table-height[_ngcontent-%COMP%]{height:350px;overflow:auto}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();var k_=A(69690),ul=A(29225);function fg(n,a){1&n&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cropper_edit_explain_error"),"\n"))}function xg(n,a){1&n&&t._UZ(0,"azt-loading-effect")}let vg=(()=>{class n{constructor(e,i,o){this.commonService=e,this.activeRoute=i,this.dialog=o,this.headerPosition={},this.listQuestion=[],this.listCanvas=[],this.applyEdit=new t.vpe,this.listOriginalQuestion=[],this.originalHeaderPostion={},this.loadingAssets=!1,this.isApplying=!1}addHeaderPiece(){let e=document.createElement("div");e.setAttribute("class","box-crop-info header-piece"),e.dataInfo=this.headerPosition,e.style.width=this.headerPosition.width+"px",e.style.height=this.headerPosition.heigh+"px",e.style.left=this.headerPosition.left+"px",e.style.top=this.headerPosition.top+"px",document.getElementById("canvas_edit_page_"+this.headerPosition.pageIndex)?.appendChild(e),this.addInteractiveElement(e)}processInfo(){this.addHeaderPiece();for(let e=0;e<this.listQuestion.length;e++){for(let r=0;r<this.listQuestion[e].positions.length;r++){const l=this.listQuestion[e].positions[r];let c=document.createElement("div");if(c.setAttribute("class",`box-crop-info question-piece question-piece-of-${e}`),l.inactive&&c.classList.add("inactive"),c.dataInfo=l,c.style.width=l.width+"px",c.style.height=l.heigh+"px",c.style.left=l.left+"px",c.style.top=l.top+"px",0==r){let m=document.createElement("div");if(m.setAttribute("class",`question-stt question-stt-${e} clickable`),m.textContent=`#${e+1}`,c.appendChild(m),!this.listQuestion[e].isGroup){let p=document.createElement("div");p.setAttribute("class",`question-ans-add question-ans-add-${e} clickable`),p.textContent="+",p.addEventListener("click",()=>{const b=this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].label;let y=document.createElement("div");y.setAttribute("class",`answer-append box-crop-info answer-piece answer-piece-${f_[b].toLowerCase()}`);let C=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");y.setAttribute("tittle",C);let I=Object.assign(Object.assign({},this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0]),{left:this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].left+this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].width});y.style.width=I.width+"px",y.style.height=I.heigh+"px",y.style.top=I.top+"px",y.style.left=I.left+"px",y.style.backgroundColor=g_[f_[b].toLowerCase()],y.dataInfo=I;let D=document.getElementById("canvas_edit_page_"+I.pageIndex);D?.appendChild(y),this.addInteractiveElement(y);let U=document.createElement("div");U.setAttribute("class","box-crop-info answer-label"),U.setAttribute("tittle",C);let B=Object.assign(Object.assign({},this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].remove),{left:I.left,top:I.top});U.style.width=B.width+"px",U.style.height=B.heigh+"px",U.style.top=B.top+"px",U.style.left=B.left+"px",U.dataInfo=B,D?.appendChild(U),this.addInteractiveElement(U)}),c.appendChild(p)}}document.getElementById("canvas_edit_page_"+l.pageIndex)?.appendChild(c),this.addInteractiveElement(c)}let i=document.createElement("div");i.setAttribute("class","box-crop-info question-label"),i.dataInfo=this.listQuestion[e].remove,i.style.width=this.listQuestion[e].remove.width+"px",i.style.height=this.listQuestion[e].remove.heigh+"px",i.style.left=this.listQuestion[e].remove.left+"px",i.style.top=this.listQuestion[e].remove.top+"px",this.listQuestion[e].answers.forEach(r=>{r.positions.forEach(d=>{let m=document.createElement("div");m.setAttribute("class",`box-crop-info ${!0===d.inactive?"inactive":""} answer-piece answer-piece-${r.label.toLowerCase()}`);let p=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");m.setAttribute("tittle",p),m.inactive&&m.classList.add("inactive"),m.dataInfo=d,m.style.width=d.width+"px",m.style.height=d.heigh+"px",m.style.left=d.left+"px",m.style.top=d.top+"px",m.style.backgroundColor=g_[r.label.toLowerCase()],document.getElementById("canvas_edit_page_"+d.pageIndex)?.appendChild(m),this.addInteractiveElement(m)});let l=document.createElement("div");l.setAttribute("class","box-crop-info answer-label"),l.dataInfo=r.remove,l.style.width=r.remove.width+"px",l.style.height=r.remove.heigh+"px",l.style.left=r.remove.left+"px",l.style.top=r.remove.top+"px",document.getElementById("canvas_edit_page_"+r.remove.pageIndex)?.appendChild(l),this.addInteractiveElement(l)}),document.getElementById("canvas_edit_page_"+this.listQuestion[e].remove.pageIndex)?.appendChild(i),this.addInteractiveElement(i)}}processRender(){var e;for(let i=0;i<this.listCanvas.length;i++){const o=this.listCanvas[i];let s=document.createElement("div");s.setAttribute("id","canvas_edit_page_"+i),s.classList.add("mb-3"),s.style.width=o.width+"px",s.style.height=o.height+"px",s.style.position="relative",s.style.margin="0 auto",s.style.boxShadow="3px 2px 3px 2px #ccc";let r=document.createElement("canvas"),l=document.createElement("span");l.textContent=`Page ${i+1} of ${this.listCanvas.length}`,l.style.position="absolute",l.style.bottom="10px",l.style.right="10px",l.style.fontSize="12px",l.style.color="#ccc",r.width=o.width,r.height=o.height,s.appendChild(r),s.appendChild(l),r.getContext("2d")?.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height),null===(e=document.getElementById("boxEdit"))||void 0===e||e.appendChild(s);let u=document.getElementById("tipsTrick");u&&(u.style.width=o.width+"px")}}dragMoveListener(e){let i=e.target,o=(parseFloat(i.getAttribute("data-x"))||0)+e.dx,s=(parseFloat(i.getAttribute("data-y"))||0)+e.dy;i.style.top=s+"px",i.style.left=o+"px",i.setAttribute("data-x",o),i.setAttribute("data-y",s),i.dataInfo.left=parseInt(i.style.left),i.dataInfo.top=parseInt(i.style.top)}get invalidPositionsData(){let e=!1;for(let i=0;i<this.listQuestion.length;i++){if(this.listQuestion[i].remove.inactive){e=!0;break}if(this.listQuestion[i].positions.length==this.listQuestion[i].positions.filter(l=>l.inactive).length){e=!0;break}for(let l=0;l<this.listQuestion[i].answers.length;l++)if(this.listQuestion[i].answers[l].positions.length==this.listQuestion[i].answers[l].positions.filter(d=>d.inactive).length){e=!0;break}}return e}addInteractiveElement(e){e.setAttribute("data-x",parseInt(e.style.left)),e.setAttribute("data-y",parseInt(e.style.top)),interact(e).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(i){var o=i.target,s=parseFloat(o.getAttribute("data-x"))||0,r=parseFloat(o.getAttribute("data-y"))||0;o.style.width=i.rect.width+"px",o.style.height=i.rect.height+"px",s+=i.deltaRect.left,o.style.top=(r+=i.deltaRect.top)+"px",o.style.left=s+"px",o.setAttribute("data-x",s),o.setAttribute("data-y",r),o.dataInfo.width=parseInt(o.style.width),o.dataInfo.heigh=parseInt(o.style.height),o.dataInfo.left=parseInt(o.style.left),o.dataInfo.top=parseInt(o.style.top)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:10}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}).on("doubletap",function(i){i.currentTarget.dataInfo.inactive?(i.currentTarget.dataInfo.inactive=!1,i.currentTarget.classList.remove("inactive")):(i.currentTarget.dataInfo.inactive=!0,i.currentTarget.classList.add("inactive")),console.log(i.currentTarget.dataInfo),i.preventDefault()})}handleApply(){this.isApplying=!0,setTimeout(()=>{this.applyEdit.emit({headerPos:this.headerPosition,listQuestion:this.listQuestion})},2e3)}handleCancel(){confirm("Nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb m\u1ea5t, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn?")&&this.applyEdit.emit("")}ngOnInit(){this.listQuestion.length>0&&(this.listOriginalQuestion=ya.cloneDeep(this.listQuestion),this.originalHeaderPostion=ya.cloneDeep(this.headerPosition)),this.processRender(),this.processInfo(),this.loadingAssets=!0}ngAfterViewInit(){window.dragMoveListener=this.dragMoveListener}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v),t.Y36(w.gz),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cropper-edit"]],inputs:{headerPosition:"headerPosition",listQuestion:"listQuestion",listCanvas:"listCanvas",examHeader:"examHeader"},outputs:{applyEdit:"applyEdit"},decls:19,vars:18,consts:[["style","position: fixed; top: 5px; left: 5px; right: 5px; font-size: 20px; z-index: 9999;","class","alert alert-danger p-2 text-center",4,"ngIf"],["id","mainEditArea",3,"hidden"],["id","buttonArea"],[1,"bb-holder","p-3"],["azt-track-service","cropper-edit-eys6rwcK5W","id","buttonApplys",1,"btn","btn-primary","mr-2",3,"disabled","click"],["azt-track-service","cropper-edit-zfl8meDVvX","id","buttonCancels",1,"btn","btn-secondary",3,"click"],["id","tipsTrick",1,"alert","box","p-2","mt-2","text-center",2,"margin-left","auto","margin-right","auto"],[2,"font-weight","500"],["id","boxEdit"],[4,"ngIf"],[1,"alert","alert-danger","p-2","text-center",2,"position","fixed","top","5px","left","5px","right","5px","font-size","20px","z-index","9999"]],template:function(e,i){1&e&&(t.YNc(0,fg,3,3,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return i.handleApply()}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.handleCancel()}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",6)(12,"b",7),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t._UZ(17,"div",8),t.qZA(),t.YNc(18,xg,1,0,"azt-loading-effect",9)),2&e&&(t.Q6J("ngIf",i.invalidPositionsData),t.xp6(1),t.Q6J("hidden",!i.loadingAssets),t.xp6(3),t.Q6J("disabled",i.isApplying),t.xp6(1),t.hij(" ",i.isApplying?t.lcZ(6,8,"lang_testbank_create_exam_width_file_pdf_cropper_edit_loading_apply"):t.lcZ(7,10,"lang_testbank_create_exam_width_file_pdf_cropper_edit_apply")," "),t.xp6(4),t.Oqu(t.lcZ(10,12,"lang_buttom_cancel")),t.xp6(4),t.hij("",t.lcZ(14,14,"lang_testbank_create_exam_width_file_pdf_cropper_edit_tips"),": "),t.xp6(2),t.hij("",t.lcZ(16,16,"lang_testbank_create_exam_width_file_pdf_cropper_edit_note_tip")," "),t.xp6(3),t.Q6J("ngIf",!i.loadingAssets))},dependencies:[E.O5,xe.Q,_t.bT],styles:["#mainEditArea[_ngcontent-%COMP%]{width:1200px;margin:0 auto}#mainEditArea[_ngcontent-%COMP%]   #buttonArea[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),n})();var dl=A(85736);const bg=["hiddenInput"],yg=["iframePdf"],wg=["resizeBar"],kg=["boxLeftFile"],Cg=["parentResize"],Tg=["maskLayer"],_l=function(n){return{color:n}};function Ag(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",50),t.NdJ("keyup.enter",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.handleEnterPage(o))})("ngModelChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.currentPage=o)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,_l,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,_l,e.bottomLazyLoad?"inherit":"#595959"))}}function Sg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help "),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_show_view_all_explain"))}function Og(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help_outlined "),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_hide_view_all_explain"))}function Eg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",55),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.handleClickOption(s.index))}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("value",e.index+i.startQuestion),t.xp6(1),t.hij(" ",e.index+i.startQuestion," ")}}function Mg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",31)(1,"div",32)(2,"mat-checkbox",33),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,Ag,13,16,"div",34),t.TgZ(7,"div")(8,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDialogSpitPoint())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",36),t.YNc(12,Sg,3,3,"mat-icon",37),t.YNc(13,Og,3,3,"mat-icon",38),t.TgZ(14,"mat-icon",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openExamInfoDialog())}),t.ALo(15,"mytranslate"),t._uU(16,"info_outline"),t.qZA()(),t.TgZ(17,"div",40)(18,"span"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"form",41)(22,"input",42),t.NdJ("keyup.enter",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.handleEnterQuestion(o))}),t.qZA(),t.TgZ(23,"mat-autocomplete",43,44),t.YNc(25,Eg,2,2,"mat-option",45),t.ALo(26,"async"),t.qZA()()(),t._UZ(27,"input",46,47),t.TgZ(29,"button",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.editting=!0)}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()}if(2&n){const e=t.MAs(24),i=t.oxw(2);t.xp6(2),t.MGl("matTooltip","",t.lcZ(3,13,"lang_testbank_create_exam_width_file_pdf_note_tutorial_Proofreading"),"."),t.Q6J("formControl",i.debuggingMode),t.xp6(2),t.Oqu(t.lcZ(5,15,"lang_testbank_create_exam_width_file_pdf_Proofreading")),t.xp6(2),t.Q6J("ngIf",i.questionList.length>i.limitLazyLoad),t.xp6(3),t.Oqu(t.lcZ(10,17,"lang_split_points")),t.xp6(3),t.Q6J("ngIf",!i.isShowAllHelp),t.xp6(1),t.Q6J("ngIf",i.isShowAllHelp),t.xp6(1),t.s9C("matTooltip",t.lcZ(15,19,"lang_auto_chi_tiet_de_thi")),t.xp6(5),t.hij("",t.lcZ(20,21,"lang_testbank_create_exam_width_file_pdf_go_to"),": "),t.xp6(3),t.Q6J("formControl",i.myControl)("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(26,23,i.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(31,25,"lang_buttom_edit"))}}function Ig(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=a.$implicit;t.xp6(2),t.hij("",e,"\xa0")}}function Lg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",56)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",58),t.YNc(6,Ig,3,1,"ng-container",59),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.TgZ(9,"div",60)(10,"button",61),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showNote=!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_unrecognizable_one")," "),t.xp6(3),t.Q6J("ngForOf",e.errorQuestions),t.xp6(1),t.hij(" ",t.lcZ(8,6,"lang_testbank_create_exam_width_file_pdf_unrecognizable_twe"),". "),t.xp6(4),t.Oqu(t.lcZ(12,8,"lang_testbank_create_exam_width_file_pdf_understood"))}}function Zg(n,a){1&n&&(t.TgZ(0,"span",65),t._uU(1,",\xa0"),t.qZA())}function Pg(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",63),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(4);let l;return t.KtG(r.goToQuestionAll(null!==(l=s.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,Zg,2,0,"span",64),t.BQk()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw(4);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",e.question.label,""),t.xp6(2),t.Q6J("ngIf",i<o.invalidTypeQuestionConfig.length-1)}}function Ng(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",58),t.YNc(4,Pg,6,8,"ng-container",59),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function Dg(n,a){if(1&n&&(t.TgZ(0,"div",62)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,Ng,5,4,"ng-container",3),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function jg(n,a){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cont_save"),"."))}function qg(n,a){if(1&n&&(t.TgZ(0,"div",62)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t.YNc(3,jg,3,3,"ng-container",3),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim())}}function Fg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",66)(1,"div",67)(2,"div")(3,"mat-icon",68),t._uU(4,"cloud_upload"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div")(9,"azt-download-link-item",69),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isMobileWebView?"":o.stopPropagation())}),t.ALo(10,"convertCdnLinkOfGitHubWithLocale"),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"div")(13,"azt-download-link-item",69),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.isMobileWebView?"":o.stopPropagation())}),t.ALo(14,"convertCdnLinkOfGitHubWithLocale"),t.ALo(15,"mytranslate"),t.qZA()()()()}2&n&&(t.xp6(6),t.Oqu(t.lcZ(7,11,"lang_tutorial_upload_file_exam")),t.xp6(3),t.Akn("color: #5c5c5c"),t.Q6J("dataUrl",t.lcZ(10,13,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",t.lcZ(11,15,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_click_vao_day_de_download_de_mau"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(14,17,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",t.lcZ(15,19,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_de_mau_azota_pdf"))}function Qg(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_exam_header_not_select")))}function Ug(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",74),t.YNc(1,Qg,3,3,"div",75),t.TgZ(2,"mat-icon",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.useHeader=!o.useHeader)}),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t._uU(5,"clear"),t.qZA(),t._UZ(6,"img",77),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.useHeader),t.xp6(1),t.Q6J("matTooltip",e.useHeader?t.lcZ(3,3,"lang_auto_xoa"):t.lcZ(4,5,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("src",e.examHeader,t.LSH)}}function Bg(n,a){1&n&&(t.TgZ(0,"div",103)(1,"mat-icon",57),t._uU(2,"error"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_cau_hoi_nay_khong_co_noi_dung_cac_dap_an_abcd_nen_dot")+"!"," "))}function Rg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",111),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw(3);return t.KtG(s.toggleRemoveAllGroup(o.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_xoa_toan_bo_cau_hoi_trong_nhom"))}function zg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",112),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).$implicit,s=t.oxw(3);return t.KtG(s.toggleRemoveAllGroup(o.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_bo_xoa_toan_bo_cau_hoi_trong_nhom"))}function Jg(n,a){1&n&&t._UZ(0,"div",78)}function Hg(n,a){1&n&&(t.TgZ(0,"div",113),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function $g(n,a){1&n&&(t.TgZ(0,"div",114),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_mix"),"?"))}function Kg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",104),t.YNc(1,Rg,3,3,"mat-icon",105),t.YNc(2,zg,3,3,"mat-icon",106),t.YNc(3,Jg,1,0,"div",75),t.TgZ(4,"div",107),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.toggleMixInGroup(o.group))}),t.YNc(5,Hg,4,6,"div",108),t.YNc(6,$g,3,3,"div",109),t._UZ(7,"img",110),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2),i=e.index,o=e.$implicit,s=t.oxw(3);t.Q6J("hidden",!s.firstInGroupIndexes.includes(i)),t.xp6(1),t.Q6J("ngIf",s.atLeastOneUse(o.group)),t.xp6(1),t.Q6J("ngIf",!s.atLeastOneUse(o.group)),t.xp6(1),t.Q6J("ngIf",!s.atLeastOneUse(o.group)),t.xp6(1),t.Gre("mb-2 img-group image_group_",o.group,""),t.xp6(1),t.Q6J("ngIf",o.groupType),t.xp6(1),t.Q6J("ngIf",!o.groupType),t.xp6(1),t.s9C("matTooltip",o.groupType?t.lcZ(8,11,"lang_testbank_create_exam_width_file_pdf_click_mix_question"):t.lcZ(9,13,"lang_testbank_create_exam_width_file_pdf_click_pin_question")),t.s9C("src",o.groupUrl,t.LSH)}}function Yg(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_question_not_select")))}const Lu=function(n,a){return{"width.%":n,"height.%":a}};function Gg(n,a){if(1&n&&(t.TgZ(0,"div",122)(1,"div",123),t._UZ(2,"img",124)(3,"img",117),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(4,Lu,e.remove.width/i.question.width*100,e.remove.height/i.question.height*100))("src",e.remove.url,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(7,Lu,e.width/i.question.width*100,e.height/i.question.height*100))("src",e.url,t.LSH)}}function Wg(n,a){if(1&n&&(t.TgZ(0,"div",115)(1,"div",116),t._UZ(2,"img",117),t.qZA(),t.TgZ(3,"div",118),t._UZ(4,"img",119),t.qZA(),t.TgZ(5,"div",120),t.YNc(6,Gg,4,10,"div",121),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(6,Lu,e.question.remove.width/e.question.width*100,e.question.remove.height/e.question.height*100))("src",e.question.remove.url,t.LSH),t.xp6(2),t.Q6J("width",e.question.width)("height",e.question.height)("src",e.question.url,t.LSH),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function Vg(n,a){1&n&&t._UZ(0,"div",78)}function Xg(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",127),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.changeAnswerResult(r,s.label))}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.Q6J("ngClass",i.tempData.answerResult.includes(e.label)?"btn-ans-result":""),t.xp6(1),t.Oqu(e.label)}}function tf(n,a){if(1&n&&(t.TgZ(0,"div",125)(1,"span",95),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Xg,2,2,"span",126),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_create_exam_width_file_pdf_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function ef(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",128)(1,"span",129),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.setupFillAnswersQuestion(o))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_create_exam_width_file_pdf_enter_add_answer")," "))}function nf(n,a){1&n&&(t.TgZ(0,"b"),t._uU(1,"\u25b2"),t.qZA())}function of(n,a){1&n&&(t.TgZ(0,"mat-icon",99),t.ALo(1,"mytranslate"),t._uU(2,"shuffle"),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_keep_stable_answer"))}function af(n,a){1&n&&(t.TgZ(0,"mat-icon",99),t.ALo(1,"mytranslate"),t._uU(2,"shuffle_on"),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_tutorial_click_mix_question"))}function sf(n,a){1&n&&(t.ynx(0),t._uU(1,"\xa0|\xa0"),t.BQk())}function rf(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.YNc(3,sf,2,0,"ng-container",3),t.BQk()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(4).$implicit;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i<o.tempData.answerResult.length-1)}}function lf(n,a){if(1&n&&(t.TgZ(0,"div",132),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,rf,4,2,"ng-container",59),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_list_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.tempData.answerResult)}}function cf(n,a){1&n&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_answer")," "))}function uf(n,a){1&n&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_point")," "))}function df(n,a){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"a",134),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_not_identification_answer"),". "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_xem_huong_dan")," "))}function _f(n,a){1&n&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_note_quizzes")," "))}function mf(n,a){1&n&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_enter_max_point")," "))}function pf(n,a){1&n&&(t.TgZ(0,"div",133)(1,"mat-icon",57),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_select_answer")," "))}function hf(n,a){if(1&n&&(t.TgZ(0,"div",137),t._UZ(1,"img",138),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.Q6J("src",e.help.url,t.LSH)}}function gf(n,a){1&n&&(t.TgZ(0,"div",139),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_data_explain")))}function ff(n,a){if(1&n&&(t.ynx(0),t.YNc(1,hf,2,1,"div",135),t.YNc(2,gf,3,3,"ng-template",null,136,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",i.help.url)("ngIfElse",e)}}function xf(n,a){if(1&n&&(t.ynx(0),t.YNc(1,lf,4,4,"div",130),t.ALo(2,"isFillAnswer"),t.YNc(3,cf,5,3,"div",131),t.ALo(4,"isFillAnswer"),t.YNc(5,uf,5,3,"div",131),t.YNc(6,df,8,6,"div",130),t.YNc(7,_f,5,3,"div",131),t.ALo(8,"isOneChoiceAnswer"),t.YNc(9,mf,5,3,"div",131),t.YNc(10,pf,5,3,"div",131),t.ALo(11,"isOneChoiceAnswer"),t.YNc(12,ff,4,2,"ng-container",3),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tempData.answerResult.length>0&&t.lcZ(2,8,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(4,10,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",!e.tempData.point&&!i.isFullNoPoint),t.xp6(1),t.Q6J("ngIf",e.answers.length>0&&1==e.answers[0].width&&1==e.answers[0].height),t.xp6(1),t.Q6J("ngIf",e.answers.length<2&&t.lcZ(8,12,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.point<0),t.xp6(1),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(11,14,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.isShowHelp)}}function vf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",144),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3).index,s=t.oxw(3);return t.KtG(s.clickUploadFile(o))}),t.TgZ(1,"div",128)(2,"mat-icon",68),t._uU(3,"cloud_upload"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"lang_testbank_create_exam_width_file_pdf_attach_file_audio")),t.xp6(3),t.hij("",t.lcZ(9,4,"lang_testbank_create_exam_width_file_docx_click_choose_audio"),"."))}function bf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",147)(1,"audio",148),t._UZ(2,"source",149),t.ALo(3,"mycdn"),t._uU(4," Your browser does not support the audio element. "),t.qZA(),t.TgZ(5,"span",150),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4).$implicit;return t.KtG(o.tempData.questionMedia=[])}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Q6J("src",t.lcZ(3,2,e.url),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(7,4,"lang_auto_xoa")," ")}}function yf(n,a){if(1&n&&(t.TgZ(0,"div",145),t.YNc(1,bf,8,6,"div",146),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngForOf",e.tempData.questionMedia)}}function wf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",140)(1,"input",141),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(2).$implicit,r=t.oxw(3);return t.KtG(r.uploadFileQuestion(s,o))}),t.qZA(),t.YNc(2,vf,10,6,"div",142),t.YNc(3,yf,2,1,"div",143),t.qZA()}if(2&n){const e=t.oxw(2),i=e.index,o=e.$implicit;t.xp6(1),t.Q6J("id","inputFileQuestion_"+i),t.xp6(1),t.Q6J("ngIf",0===o.tempData.questionMedia.length),t.xp6(1),t.Q6J("ngIf",o.tempData.questionMedia.length>0)}}function kf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",81),t.YNc(1,Bg,5,3,"div",82),t.ALo(2,"isOneChoiceAnswer"),t.YNc(3,Kg,10,15,"div",83),t.TgZ(4,"div",84)(5,"mat-icon",85),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw(3);return t.KtG(s.changeSelectTempData(o))}),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t._uU(8,"clear"),t.qZA(),t.YNc(9,Yg,3,3,"div",75),t.YNc(10,Wg,7,9,"div",86),t.qZA(),t.TgZ(11,"div",87)(12,"div",88),t.YNc(13,Vg,1,0,"div",75),t.TgZ(14,"div",89)(15,"span",90),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"select",91),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.changeTypeQuestion(s,o))}),t.TgZ(19,"option",92),t.ALo(20,"isOneChoiceAnswer"),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"option",92),t.ALo(24,"isFillAnswer"),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"option",92),t.ALo(28,"isEssayAnswer"),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()(),t.YNc(31,tf,5,4,"div",93),t.ALo(32,"isOneChoiceAnswer"),t.YNc(33,ef,4,3,"div",94),t.ALo(34,"isFillAnswer"),t.TgZ(35,"div",89)(36,"span",95),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.TgZ(39,"input",96),t.NdJ("input",function(o){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.changeQuestionPoint(s,o))}),t.qZA()(),t.TgZ(40,"mat-icon",97),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.toggleViewHelp(o))}),t.ALo(41,"mytranslate"),t.ALo(42,"mytranslate"),t._uU(43),t.qZA(),t.TgZ(44,"span",98),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.tempData.isShowAttach=!o.tempData.isShowAttach)}),t.TgZ(45,"mat-icon",99),t.ALo(46,"mytranslate"),t._uU(47,"attachment"),t.qZA(),t.YNc(48,nf,2,0,"b",3),t.qZA(),t.TgZ(49,"span",100),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.toogleMixAns(o))}),t.YNc(50,of,3,3,"mat-icon",101),t.YNc(51,af,3,3,"mat-icon",101),t.qZA()()(),t.YNc(52,xf,13,16,"ng-container",3),t.YNc(53,wf,4,3,"div",102),t.qZA()}if(2&n){const e=t.oxw(),i=e.index,o=e.$implicit,s=t.oxw(3);t.uIk("id","box-questions-item-"+i),t.xp6(1),t.Q6J("ngIf",0==o.answers.length&&t.lcZ(2,31,o.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",o.groupUrl),t.xp6(2),t.Q6J("matTooltip",o.tempData.isSelect?t.lcZ(6,33,"lang_auto_xoa"):t.lcZ(7,35,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("ngIf",!o.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",s.debuggingMode.value),t.xp6(2),t.Q6J("ngClass","")("ngClass","border-result"),t.xp6(1),t.Q6J("ngIf",!o.tempData.isSelect),t.xp6(3),t.Oqu(t.lcZ(17,37,"lang_testbank_create_exam_width_file_pdf_question")+" "+o.question.label),t.xp6(3),t.Q6J("value",1)("selected",t.lcZ(20,39,o.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(22,41,"lang_testbank_create_exam_width_file_pdf_select_answer")),t.xp6(2),t.Q6J("value",4)("selected",t.lcZ(24,43,o.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(26,45,"lang_testbank_create_exam_width_file_pdf_enter_blank")),t.xp6(2),t.Q6J("value",3)("selected",t.lcZ(28,47,o.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(30,49,"lang_testbank_create_exam_width_file_docx_essay")),t.xp6(2),t.Q6J("ngIf",t.lcZ(32,51,o.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",t.lcZ(34,53,o.tempData.answerType)),t.xp6(4),t.hij("",t.lcZ(38,55,"lang_point"),": "),t.xp6(2),t.Q6J("value",o.tempData.point.toString().length>8?o.tempData.point.toFixed(8):o.tempData.point),t.xp6(1),t.s9C("matTooltip",o.tempData.isShowHelp?t.lcZ(41,57,"lang_testbank_create_exam_width_file_pdf_hide_view_explain"):t.lcZ(42,59,"lang_testbank_create_exam_width_file_pdf_show_view_explain")),t.xp6(3),t.hij(" ",o.tempData.isShowHelp?"help":"help_outlined"," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(46,61,"lang_testbank_create_exam_width_file_pdf_attach_file_question")),t.xp6(3),t.Q6J("ngIf",o.tempData.isShowAttach),t.xp6(2),t.Q6J("ngIf",1==o.isFixAns),t.xp6(1),t.Q6J("ngIf",0==o.isFixAns),t.xp6(1),t.Q6J("ngIf",o.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",!0===o.tempData.isShowAttach)}}function Cf(n,a){if(1&n&&(t.TgZ(0,"div",79),t.YNc(1,kf,54,63,"div",80),t.qZA()),2&n){const e=a.index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.questionList.length<=i.limitLazyLoad||e>=i.startChunkIndex&&e<i.startChunkIndex+i.lazyLoadSize)}}function Tf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",151)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",50),t.NdJ("keyup.enter",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.handleEnterPage(o))})("ngModelChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.currentPage=o)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",152),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",153),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,_l,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,_l,e.bottomLazyLoad?"inherit":"#595959"))}}function Af(n,a){if(1&n&&(t.TgZ(0,"div",70),t.YNc(1,Ug,7,7,"div",71),t.YNc(2,Cf,2,1,"div",72),t.YNc(3,Tf,13,16,"div",73),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.examHeader),t.xp6(1),t.Q6J("ngForOf",e.questionList),t.xp6(1),t.Q6J("ngIf",e.questionList.length>e.limitLazyLoad)}}function Sf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",154),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t._uU(4),t.ALo(5,"mytranslate"),t._UZ(6,"br"),t.TgZ(7,"mat-icon",155),t._uU(8,"report"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"span",156),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.resetBoxExamQuestions("tryOther"))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_testbank_create_exam_width_file_pdf_not_analysis_exam"),". "),t.xp6(3),t.hij(" ",t.lcZ(5,5,"lang_testbank_create_exam_width_file_pdf_contact_admin"),". "),t.xp6(7),t.Oqu(t.lcZ(12,7,"lang_testbank_create_exam_width_file_pdf_create_exam")))}function Of(n,a){if(1&n&&(t.TgZ(0,"div",162)(1,"span",163),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e)}}function Ef(n,a){if(1&n&&(t.TgZ(0,"div",157)(1,"div",158)(2,"div",159),t._UZ(3,"mat-spinner",160),t.qZA(),t.YNc(4,Of,3,1,"div",161),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("strokeWidth",2)("diameter",30),t.xp6(1),t.Q6J("ngForOf",e.arrStatusFileExam)}}function Mf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",164)(1,"app-cropper-edit",165),t.NdJ("applyEdit",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.applyEditEvent(o))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("listQuestion",e.rootQuestionInfo)("headerPosition",e.rootHeaderPosition)("listCanvas",e.rootCanvases)}}const If=function(n){return{width:n}};function Lf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"editor-layout",5),t.NdJ("handleConfirm",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.rxjsHandleSaveExam())})("handleCancel",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetBoxExamQuestions())}),t.TgZ(2,"div",6)(3,"div",7)(4,"div",8,9)(6,"div",10,11),t._UZ(8,"input",12),t.YNc(9,Mg,32,27,"div",13),t.YNc(10,Lg,13,10,"div",14),t.YNc(11,Dg,6,4,"div",15),t.YNc(12,qg,4,1,"div",15),t.TgZ(13,"div",16),t.YNc(14,Fg,16,21,"div",17),t._UZ(15,"div",18)(16,"div",19),t.YNc(17,Af,4,3,"div",20),t.YNc(18,Sf,13,9,"div",21),t.qZA()(),t.TgZ(19,"div",22,23),t.NdJ("mousedown",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handleMouseDown(o))}),t.qZA(),t.TgZ(21,"div",24,25),t._UZ(23,"div",26,27)(25,"iframe",28),t.ALo(26,"safe"),t.qZA()()(),t.YNc(27,Ef,5,3,"div",29),t.qZA()()(),t.YNc(28,Mf,2,3,"ng-template",30)}if(2&n){const e=t.oxw();t.Q6J("hidden",e.editting),t.xp6(1),t.Q6J("headerBackTolink",e.backToLink)("showInput",!0)("showConfirmButton",!0)("examName",e.nameExamInp),t.xp6(5),t.Q6J("ngStyle",t.VKq(19,If,e.notShowSourceFile?"100%":"calc(60% - 5px)")),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0),t.xp6(1),t.Q6J("ngIf",e.errorQuestions.length>0&&e.showNote),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim()),t.xp6(2),t.Q6J("ngIf",!e.doneAllProccessTasks),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0&&e.cropperDone),t.xp6(1),t.Q6J("ngIf",e.errAnalyzingPdf),t.xp6(3),t.Q6J("hidden",e.notShowSourceFile),t.xp6(4),t.Q6J("src",t.lcZ(26,17,e.examFileUrl),t.uOi),t.xp6(2),t.Q6J("ngIf",e.isShowLoadingFileExam),t.xp6(1),t.Q6J("ngIf",e.editting)}}function Zf(n,a){if(1&n&&(t.TgZ(0,"div",166),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_your_current_browser")," ",""+e.currentBrowserInUsed,". ",t.lcZ(3,5,"lang_auto_no_support_browser"),"\n")}}function Pf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-split-point",167),t.NdJ("closeDialog",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialogSpitPoint())})("setPoint",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.setPointTest(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("data",e.dataSpitPoint)}}function Nf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",168),t.NdJ("closeDialog",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialogExamInfo())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("startIndexQuestion",e.startQuestion)("data",e.dataExamInfo)("type","createPDF")}}const Hs="exam_questions";let Df=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y,C,I){super(),this.cropperService=e,this.activeRoute=i,this.dialog=o,this.questionService=s,this.apiUploadService=r,this.userService=l,this.infoService=c,this.examService=u,this.configService=d,this.cdnService=m,this.answerTypeService=p,this.redirectService=b,this.editorOutputDataService=y,this.browserStorageService=C,this.deviceDetectorService=I,this.x=0,this.y=0,this.leftWidth=0,this.cropperDone=!1,this.startChunkIndex=0,this.currentPage=1,this.editting=!1,this.errAnalyzingPdf=!1,this.categoriesIdParram=+this.commonService.getMyParam(this.activeRoute,"cat_id"),this.examFileUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/file_placeholder.jpg"),this.version="v2.0",this.cur_cateId=0,this.backToLink="",this.nameExamInp=new h.p4(""+Date.now()),this.totalPoint=new h.p4(10),this.isChangePoint=!1,this.isMixture=!1,this.confirmTotalQuestionChange=!1,this.examConfigs=[],this.newQuestionArrSave=[],this.isChangeQuestionPoint=!1,this.isShowLoadingFileExam=!1,this.arrStatusFileExam=[],this.isShowAllHelp=!1,this.curGotoIndex=new h.p4(0),this.showNote=!0,this.debuggingMode=new h.p4(!0),this.message=[],this.errorQuestions=[],this.doneAllProccessTasks=!1,this.notShowSourceFile=!0,this.questionList=[],this.questionConfigList=[],this.rootQuestionInfo=[],this.rootCanvases=[],this.clonedCtxForCreate=[],this.labelHolderSize={width:3500,height:3500},this.labelsBase64s=[],this.labelsUrls=[],this.resultUploadBase64Labels=[],this.abcdLabelPos={},this.questionLabelMap=[],this.maxQuestionLabelHeight=0,this.examHeader="",this.useHeader=!0,this.selects=[],this.nextIndex=0,this.countGroup=0,this.groupImages={},this.groupLengths=[],this.firstInGroupIndexes=[],this.totalInGroupTracking=0,this.countSaveQuestion=0,this.cropPdfConfigParam="",this.countClickApplyEdit=0,this.dataSpitPoint={isShow:!1},this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.multiplePoint=10,this.essayPoint=0,this.fillPoint=0,this.dataExamInfo={isShow:!1},this.startQuestion=1,this.handleMouseUp=D=>{var U,B,q,R,et;this.maskLayer&&(this.maskLayer.nativeElement.style.width="0px"),this.resizeBar&&this.resizeBar.nativeElement.classList.remove("hover"),null===(U=this.resizeBar)||void 0===U||U.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),null===(B=this.iframePdf)||void 0===B||B.nativeElement.style.removeProperty("user-select"),null===(q=this.iframePdf)||void 0===q||q.nativeElement.style.removeProperty("pointer-events"),null===(R=this.boxLeftFile)||void 0===R||R.nativeElement.style.removeProperty("user-select"),null===(et=this.boxLeftFile)||void 0===et||et.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=D=>{if(this.parentResize&&this.iframePdf&&this.boxLeftFile){let U=this.iframePdf.nativeElement,B=this.boxLeftFile.nativeElement;const R=100*(this.leftWidth+(D.clientX-this.x))/this.parentResize.nativeElement.getBoundingClientRect().width;B.style.width=`${R}%`,document.body.style.cursor="col-resize",U.style.userSelect="none",U.style.pointerEvents="none",B.style.userSelect="none",B.style.pointerEvents="none"}},this.myControl=new h.p4(this.startQuestion),this.handleSaveAllExam=()=>{var D,U;let B=null!==(D=this.commonService.myTranslateInstant("lang_auto_luu_xong_tat_ca_cau_hoi_vao_he_thong"))&&void 0!==D?D:"",q=null!==(U=this.commonService.myTranslateInstant("lang_auto_dang_luu_thong_tin_de_thi"))&&void 0!==U?U:"";this.arrStatusFileExam=[B,`${q} ...`];let R=this.userService.getUserObj(),et=JSON.stringify({type:"exam",id:0,user:R.id});var Q={categoryId:this.categoriesIdParram,scoringMethod:"1",name:this.nameExamInp.value,examConfigs:JSON.stringify(this.examConfigs),suggestions:JSON.stringify([]),labelsUrl:JSON.stringify(this.labelsUrls),abcdLabelPos:JSON.stringify(this.abcdLabelPos),questionLabelMap:JSON.stringify(this.questionLabelMap),firstInGroupIndexes:JSON.stringify(this.firstInGroupIndexes),totalExam:1,cdnExamFile:this.examFileUrl,trackEdit:this.countClickApplyEdit>0?JSON.stringify({countClickApplyEdit:this.countClickApplyEdit}):"",examHeader:this.examHeader,cutData:this.rootQuestionInfo,editorStatus:4,startQuestionIndex:this.questionList.length>0&&this.questionList[0].question.label>0?this.questionList[0].question.label:1};this.examService.apiExamSaveObjPost(Q,et).subscribe(V=>{var Y;if(1==V.success){let at=null!==(Y=this.commonService.myTranslateInstant("lang_auto_luu_de_thi_thanh_cong_dang_chuyen_huong"))&&void 0!==Y?Y:"";this.arrStatusFileExam=[`${at} ...`],setTimeout(()=>{var tt,rt;jQuery("html").css("overflow","auto"),this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+(null===(rt=null===(tt=V.data)||void 0===tt?void 0:tt.obj)||void 0===rt?void 0:rt.hashId),"?backto="+encodeURIComponent(`/admin/testbank/document-management/0/${this.categoriesIdParram}/1`))},1500)}else this.showErrorSnack("lang_auto_tao_de_thi_khong_thanh_cong_vui_long_thu_lai"),this.isShowLoadingFileExam=!1})}}get isSupportedBrowser(){let e=this.commonService.getBrowserType().toString();return!(!["chrome","firefox"].includes(e.split(" ")[0].toLowerCase())||parseInt(e.split(" ")[1])<75)}get currentBrowserInUsed(){let e="",i=this.commonService.myTranslateInstant("lang_auto_version");return this.deviceDetectorService.browser&&(e=this.deviceDetectorService.browser+i+this.deviceDetectorService.browser_version),e}atLeastOneUse(e){return this.questionList.filter(i=>i.group===e&&i.tempData.isSelect).length>0}changePage(e){"prev"==e&&(this.topLazyLoad?(this.startChunkIndex-=Zi,this.currentPage--):(this.startChunkIndex=0,this.currentPage=1)),"next"==e&&this.bottomLazyLoad&&(this.startChunkIndex+=Zi,this.currentPage++)}handleMouseDown(e){this.boxLeftFile&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.boxLeftFile.nativeElement.getBoundingClientRect().width,this.maskLayer&&(this.maskLayer.nativeElement.style.width="100%"),this.resizeBar&&this.resizeBar.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}_filter(e){return this.questionList}handleEnterQuestion(e){let i=e.target,o=parseInt(i.value);(o<1||o>this.questionList.length)&&(o=1,this.myControl.setValue(this.startQuestion)),this.questionList.length<=500?this.goToQuestionAll(o-1):1==o?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(o-1)},1e3)):(this.currentPage=Math.ceil(o/Zi),this.startChunkIndex=(this.currentPage-1)*Zi,setTimeout(()=>{this.goToQuestionAll(o-1)},1e3)),i.blur(),this.hiddenInput&&this.hiddenInput.nativeElement.click()}handleEnterPage(e){let i=e.target,o=parseInt(i.value);o<1||o>this.totalPage?(this.startChunkIndex=0,this.currentPage=1):(this.startChunkIndex=(o-1)*Zi,this.currentPage=o),i.blur()}handleClickOption(e){if(e>=this.startChunkIndex&&e<this.startChunkIndex+Zi)this.goToQuestionAll(e);else{let i=e+1;1==i?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)):(this.currentPage=Math.ceil(i/Zi),this.startChunkIndex=(this.currentPage-1)*Zi,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3))}}get totalPage(){return Math.ceil(this.questionList.length/this.lazyLoadSize)}get topLazyLoad(){return this.questionList.length>500&&this.startChunkIndex-Zi>=0}get bottomLazyLoad(){return this.questionList.length>500&&this.startChunkIndex+Zi<=this.questionList.length-1}get placeholderLink(){return this.cdnService.convertCdnLinkOfGitHub("azota_assets/svgs/Img2_dat-01.svg")}get lazyLoadSize(){return Zi}get limitLazyLoad(){return 500}openManualDialog(e){this.dialog.open(jf,{width:"1000px",data:{fromButton:e},restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.browserStorageService.saveStorage("_DONT_SHOW_MANUAL","OK")})}startProcessFile(e){this.nameExamInp.setValue(e.name),this.uploadFilePdf(e),this.processPdf(e)}ngOnInit(){this.isSupportedBrowser&&((0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id");var e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(i=>{this.cropPdfConfigParam=i.CROPPDF_PARAMS,this.loadingFileJs().then(o=>{if(o){const s=this.editorOutputDataService.getFirstFile();s?this.startProcessFile(s):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)),this.listeningDropFileExam()}})})}),this.filteredOptions=this.myControl.valueChanges.pipe((0,Iu.O)(""),(0,ss.U)(e=>this._filter(e||""))))}ngOnDestroy(){jQuery("#hiddenWrapper").remove()}get totalNumberQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&!this.answerTypeService.isEssayAnswer(e.tempData.answerType)).length}get totalTrueFalseQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)).length}get totalFillQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isFillAnswer(e.tempData.answerType)).length}get invalidTypeQuestionConfig(){return this.questionList.filter(e=>e.tempData.isSelect&&(e.tempData.point<0||!isFinite(e.tempData.point)||0==e.tempData.answerResult.length&&this.answerTypeService.isFillAnswer(e.tempData.answerType)||0==e.tempData.answerResult.length&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)||e.answers.length<2&&this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType))||!e.tempData.point&&!this.isFullNoPoint)}get isFullNoPoint(){return this.questionList.filter(e=>!e.tempData.point).length===this.questionList.length}changeQuestionPoint(e,i){for(let o=0;o<this.questionList.length;o++)this.questionList[o].question.label===e.question.label&&(this.questionList[o].tempData.point=Number(i.target.value))}changeAnswerResult(e,i){e.tempData.answerResult=[i]}changeTypeQuestion(e,i){e.tempData.answerType=Number(i.target.value),4==Number(i.target.value)&&(e.tempData.answerResult=[])}uploadFileQuestion(e,i){var o,s=i.target.files[0];let r=this.commonService.myTranslateInstant("lang_auto_dang_tai_len_tep_tin_dinh_kem_cho_cau_hoi");if(!0===(0,ot.Wg)(s.type))this.arrStatusFileExam=[`${r}  (0%)`],this.isShowLoadingFileExam=!0,this.apiUploadService.uploadToCdnProgressForExamQuestionContent(s).subscribe(l=>{var c;if(l.type!=K.dt.UploadProgress)if(1==l.success){e.tempData.questionMedia.push(l.data);let u=null!==(c=this.commonService.myTranslateInstant("lang_auto_tai_len_thanh_cong"))&&void 0!==c?c:"";this.arrStatusFileExam=[u],this.isShowLoadingFileExam=!1}else this.showErrorSnack("lang_auto_upload_that_bai");else if(l.loaded&&l.total){let u=Math.round(l.loaded/l.total*100);this.arrStatusFileExam=[`${r} (${u}%)`]}});else{let l=null!==(o=this.commonService.myTranslateInstant("lang_auto_chi_duoc_dinh_kem_tep_tin_mp_3_hoac_wav"))&&void 0!==o?o:"";this.showErrorSnack(l)}}uploadFilePdf(e){this.apiUploadService.uploadToCdnProgressForTestbankPdf(e).subscribe(i=>{var o,s;i.type!=K.dt.UploadProgress&&(1==i.success?(this.examFileUrl=null!==(s=null===(o=i.data)||void 0===o?void 0:o.url)&&void 0!==s?s:"",this.notShowSourceFile=!1):this.showErrorSnack("lang_auto_upload_that_bai"))})}clickUploadFile(e){jQuery(`#inputFileQuestion_${e}`).trigger("click")}changeIsSelect(e,i){e.tempData.isSelect=i}setupFillAnswersQuestion(e){var i=this.questionList[e];const o=[...i.tempData.answerResult];this.dialog.open(h_.P,{width:"50%",data:{answers:i.tempData.answerResult},restoreFocus:!1}).afterClosed().subscribe(r=>{!1===r&&(i.tempData.answerResult=o)})}listeningDropFileExam(){var e=this,i=jQuery("#box-left-file-drop");i.on("drag dragstart dragend dragover dragenter dragleave drop",function(o){o.preventDefault(),o.stopPropagation()}).on("dragover dragenter",function(){i.addClass("is-dragover")}).on("dragleave dragend drop",function(){i.removeClass("is-dragover")}).on("drop",function(o){e.nameExamInp.setValue(o.originalEvent.dataTransfer.files[0].name),e.uploadFilePdf(o.originalEvent.dataTransfer.files[0]),e.processPdf(o.originalEvent.dataTransfer.files[0])}),jQuery("#box-left-file-input").change(()=>{e.nameExamInp.setValue(jQuery("#box-left-file-input").get(0).files[0].name),e.uploadFilePdf(jQuery("#box-left-file-input").get(0).files[0]),e.processPdf(jQuery("#box-left-file-input").get(0).files[0])}),jQuery(i).click(()=>{jQuery("#box-left-file-input").trigger("click")})}processPdf(e){let i=this.commonService.myTranslateInstant("lang_auto_dang_tien_hanh_phan_tich");window.startLoading=()=>{this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0},this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0,jQuery("#box-left-file-drop").hide();var s=new W0.Process(this.cropPdfConfigParam);s.setUpdateStatusCallback(c=>{c.startsWith("Rendering")?0==this.message.length?this.message.push(c):this.message[this.message.length-1]=c:this.message.push(c)}),s.setOncompleteCallback((c,u)=>{c.length>0?(this.startQuestion=c[0].num,this.myControl.setValue(this.startQuestion),this.labelHolderSize.width=2*u[0].canvas.width,this.rootQuestionInfo=c,this.rootCanvases=u.map(d=>d.canvas),this.rootHeaderPosition={pageIndex:0,top:1,left:c[0].positions[0].left,width:c[0].positions[0].left+c[0].positions[0].width<u[0].canvas.width?c[0].positions[0].width:u[0].canvas.width-c[0].positions[0].left,heigh:c[0].positions[0].top-1},s.showHidden(),this.errorQuestions=this.cropperService.getErrorQtns(c),this.processData()):(this.errAnalyzingPdf=!0,this.isShowLoadingFileExam=!1)}),s.parsePdf(e)}applyEditEvent(e){if(this.questionConfigList=ya.cloneDeep(this.questionList),e){this.countClickApplyEdit++,this.rootQuestionInfo=e.listQuestion,this.rootHeaderPosition=e.headerPos,this.processData();for(let i=0;i<this.questionList.length;i++)this.questionList[i].isFixAns=this.questionConfigList[i].isFixAns,this.questionList[i].groupType=this.questionConfigList[i].groupType,this.questionList[i].tempData.point=this.questionConfigList[i].tempData.point,this.questionList[i].tempData.answerType=this.questionConfigList[i].tempData.answerType,this.questionList[i].tempData.answerResult=this.questionConfigList[i].tempData.answerResult,this.questionList[i].tempData.isSelect=this.questionConfigList[i].tempData.isSelect,this.questionList[i].tempData.isShowHelp=this.questionConfigList[i].tempData.isShowHelp,this.questionList[i].tempData.isShowAttach=this.questionConfigList[i].tempData.isShowAttach,this.questionList[i].tempData.questionMedia=this.questionConfigList[i].tempData.questionMedia;this.editting=!1,this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong")}else this.editting=!1}cloneCanvas(){let e=this.rootCanvases;for(let i=0;i<e.length;i++){const o=e[i];let s=document.createElement("canvas");s.width=o.width,s.height=o.height;let r=document.createElement("canvas");r.width=o.width,r.height=o.height;let l=s.getContext("2d");l?.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height);let c=r.getContext("2d");c?.drawImage(o,0,0,o.width,o.height,0,0,o.width,o.height),l&&c&&this.clonedCtxForCreate.push(c)}}processData(){this.questionList=[],this.abcdLabelPos={},this.groupImages={},this.totalInGroupTracking=0,this.questionLabelMap=[],this.groupLengths=[],this.countGroup=0,this.labelsUrls=[],this.labelsBase64s=[],this.firstInGroupIndexes=[],this.clonedCtxForCreate=[],this.cloneCanvas();const e=this.clonedCtxForCreate[0].canvas.width;this.rootQuestionInfo.forEach(Q=>{Q.positions.forEach(V=>{V.width+V.left>e&&(V.width=e-V.left)})});let i=this.rootQuestionInfo,o=this.clonedCtxForCreate;i.forEach(Q=>{Q.remove.heigh=Math.round(Q.remove.heigh),Q.remove.width=Math.round(Q.remove.width),Q.remove.top=Math.round(Q.remove.top),Q.remove.left=Math.round(Q.remove.left),Q.positions.forEach(V=>{V.heigh=Math.round(V.heigh),V.width=Math.round(V.width),V.top=Math.round(V.top),V.left=Math.round(V.left)}),Q.help&&(Q.help.remove&&(Q.help.remove.heigh=Math.round(Q.help.remove.heigh),Q.help.remove.width=Math.round(Q.help.remove.width),Q.help.remove.left=Math.round(Q.help.remove.left),Q.help.remove.top=Math.round(Q.help.remove.top)),Q.help.positions.forEach(V=>{V.heigh=Math.round(V.heigh),V.width=Math.round(V.width),V.top=Math.round(V.top),V.left=Math.round(V.left)})),Q.answers.length>0&&Q.answers.forEach(V=>{V.remove.heigh=Math.round(V.remove.heigh),V.remove.width=Math.round(V.remove.width),V.remove.top=Math.round(V.remove.top),V.remove.left=Math.round(V.remove.left),V.positions.forEach(Y=>{Y.heigh=Math.round(Y.heigh),Y.width=Math.round(Y.width),Y.top=Math.round(Y.top),Y.left=Math.round(Y.left)})})});let s=document.createElement("canvas");s.width=this.labelHolderSize.width,s.height=this.labelHolderSize.height;let r=s.getContext("2d"),l=0,c=r;const u=()=>{r&&(this.labelsBase64s[l]=r.canvas.toDataURL("image/png"),l++,r.clearRect(0,0,r.canvas.width,r.canvas.height)),m.left=0,m.top=0};let d=0,m={left:0,top:0,locate:0};const p=Q=>{m.left=0,m.top+=Q};let b=[];const y=Q=>{let V=!0;for(let Y=0;Y<Q.length;Y++)if(1==Q[Y].remove.width||1==Q[Y].remove.heigh){V=!1;break}return V};i.forEach(Q=>{b.push(Q.answers.length)});for(let Q=0;Q<i.length;Q++)if(y(i[Q].answers)&&i[Q].answers.length==Math.max(...b)){i[Q].answers.forEach(V=>{c?.drawImage(o[V.remove.pageIndex].canvas,V.remove.left,V.remove.top,V.remove.width,V.remove.heigh,m.left,m.top,V.remove.width,V.remove.heigh),this.abcdLabelPos[V.label]={left:m.left,top:m.top},m.left=m.left+V.remove.width+5});break}this.examHeader=this.cropperService.getSingleImgData(this.rootHeaderPosition,o);for(let Q=0;Q<i.length;Q++){let V={isFixAns:i[Q].isFixAns?1:0,forcedFixAns:!!i[Q].isFixAns,groupType:0,original:"",debugView:"",group:i[Q].group,groupUrl:this.groupImages[`image_group_${i[Q].group}`]?this.groupImages[`image_group_${i[Q].group}`]:"",question:{label:i[Q].num,posit:{top:0,left:0,locate:0},url:"",urlExcludeLabelOnly:"",width:1,height:1,remove:{x:1,y:1,width:1,height:1,url:this.cropperService.getSingleImgData(i[Q].remove,o),left:0,top:0}},answers:[],help:{num:i[Q].num,url:""},tempData:{sort:Q,point:0,answerType:1,answerConfig:{},answerResult:[],isShowAttach:!1,questionMedia:[],isSelect:!0,isShowHelp:!1},rootIndex:Q},Y=i[Q].positions;if(V.original=this.cropperService.getScatteredImgData(Y,o),i[Q].isGroup){this.groupLengths.push(this.totalInGroupTracking),this.totalInGroupTracking=0,this.countGroup++,V.isGroup=!0;var C=this.cropperService.getScatteredImgData(i[Q].positions,o);this.groupImages[`image_group_${i[Q].num}`]=C}else{d++,this.totalInGroupTracking++,c&&0!=d&&m.left+i[Q].remove.width>c.canvas.width?(m.left=0,m.top=m.top+this.maxQuestionLabelHeight+5,this.maxQuestionLabelHeight=0,c&&m.top+i[Q].remove.heigh>c.canvas.height&&u(),c?.drawImage(o[i[Q].remove.pageIndex].canvas,i[Q].remove.left,i[Q].remove.top,i[Q].remove.width,i[Q].remove.heigh,m.left,m.top,i[Q].remove.width,i[Q].remove.heigh),V.question.remove.left=m.left,V.question.remove.top=m.top,this.questionLabelMap.push({locate:l,left:m.left,top:m.top,width:i[Q].remove.width,height:i[Q].remove.heigh}),m.left=m.left+i[Q].remove.width+5):(c&&m.top+i[Q].remove.heigh>c.canvas.height&&u(),c?.drawImage(o[i[Q].remove.pageIndex].canvas,i[Q].remove.left,i[Q].remove.top,i[Q].remove.width,i[Q].remove.heigh,m.left,m.top,i[Q].remove.width,i[Q].remove.heigh),V.question.remove.left=m.left,V.question.remove.top=m.top,this.questionLabelMap.push({locate:l,left:m.left,top:m.top,width:i[Q].remove.width,height:i[Q].remove.heigh}),m.left=m.left+i[Q].remove.width+5,i[Q].remove.heigh>this.maxQuestionLabelHeight&&(this.maxQuestionLabelHeight=i[Q].remove.heigh)),this.cropperService.fillColor("#ffffff",o[i[Q].remove.pageIndex],i[Q].remove.left,i[Q].remove.top,i[Q].remove.width,i[Q].remove.heigh),V.question.urlExcludeLabelOnly=1==Y.length?this.cropperService.getSingleImgData(Y[0],o):this.cropperService.getScatteredImgData(Y,o),V.question.remove.x=i[Q].remove.left-Y[0].left,V.question.remove.y=i[Q].remove.top-Y[0].top,V.question.remove.width=i[Q].remove.width,V.question.remove.height=i[Q].remove.heigh,i[Q].answers.length>0?i[Q].answers.forEach(tt=>{let rt={label:tt.label,posit:{left:0,top:0,locate:0},url:"",x:tt.positions[0].left-Y[0].left,y:tt.positions[0].top-Y[0].top,width:1,height:1,remove:{x:tt.remove.left-Y[0].left,y:tt.remove.top-Y[0].top,xAns:tt.remove.left-tt.positions[0].left,yAns:tt.remove.top-tt.positions[0].top,width:tt.remove.width,height:tt.remove.heigh,url:this.cropperService.getSingleImgData(tt.remove,o),left:0,top:0}};if(Y.length>1&&Y[0].pageIndex!==tt.remove.pageIndex&&(rt.remove.y=tt.remove.top-Y[1].top+Y[0].heigh),this.cropperService.fillColor("#ffffff",o[tt.remove.pageIndex],tt.remove.left,tt.remove.top,tt.remove.width,tt.remove.heigh),Y.length>1)for(let vt=0;vt<Y.length;vt++)if(Y[vt].pageIndex==tt.positions[0].pageIndex){rt.y=0==vt?tt.positions[0].top-Y[vt].top:tt.positions[0].top-Y[vt].top+Y[0].heigh;break}if(tt.isCorrect&&(V.tempData.answerResult=[tt.label]),1==tt.positions.length)rt.url=this.cropperService.getSingleImgData(tt.positions[0],o),rt.width=tt.positions[0].width,rt.height=tt.positions[0].heigh;else{rt.url=this.cropperService.getScatteredImgData(tt.positions,o);let vt=tt.positions.filter(gt=>!gt.inactive);rt.width=this.cropperService.maxWidthTo(vt.length,tt.positions),rt.height=this.cropperService.sumHighTo(vt.length,tt.positions)}V.answers.push(rt),tt.positions.forEach(vt=>{this.cropperService.fillColor("#ffffff",o[vt.pageIndex],vt.left,vt.top,vt.width,vt.heigh)})}):i[Q].strAns&&void 0!==i[Q].strAns?(V.tempData.answerType=4,V.tempData.answerResult.push(i[Q].strAns||"")):V.tempData.answerType=3;let at=i[Q].help;if(at&&(at.remove&&this.cropperService.fillColor("#ffffff",o[at.remove.pageIndex],at.remove.left,at.remove.top,at.remove.width,at.remove.heigh),at.positions&&at.positions.length>0&&(V.help.url=this.cropperService.getScatteredImgData(at.positions,o))),1==Y.length)V.question.url=this.cropperService.getSingleImgData(Y[0],o),V.question.width=Y[0].width,V.question.height=Y[0].heigh;else{V.question.url=this.cropperService.getScatteredImgData(Y,o);let tt=Y.filter(rt=>!rt.inactive);V.question.width=this.cropperService.maxWidthTo(tt.length,Y),V.question.height=this.cropperService.sumHighTo(tt.length,Y)}this.questionList.push(V)}}for(let Q=0;Q<this.questionList.length;Q++)this.questionList[Q].tempData.point=this.totalNumberQuestion?Number(this.totalPoint.value/this.totalNumberQuestion):0,this.questionList[Q].index=Q;let I=0;for(let Q=0;Q<this.groupLengths.length;Q++)this.firstInGroupIndexes.push(I+this.groupLengths[Q]),I+=this.groupLengths[Q];const D=()=>{let Q=0,V=[];for(let Y=0;Y<this.questionList.length;Y++)if(this.questionList[Y].answers.length>0)for(let at=0;at<this.questionList[Y].answers.length;at++){let tt=new Image;tt.crossOrigin="anonymous",tt.setAttribute("indexMap",Y.toString()),tt.setAttribute("ansIndexMap",at.toString()),V.push(tt),tt.onload=()=>{if(Q++,Q==V.length){let rt=[],vt=[],gt=0;for(let ct=0;ct<V.length;ct++){const lt=V[ct];gt+=lt.width+5,gt<=this.labelHolderSize.width?vt.push(lt):(rt.push(vt),vt=[],vt.push(lt),gt=lt.width),ct==V.length-1&&rt.push(vt)}for(let ct=0;ct<rt.length;ct++){const lt=rt[ct];let Et=lt.map(wt=>wt.height),It=Math.max(...Et);for(let wt=0;wt<lt.length;wt++){const jt=lt[wt];c&&m.top+jt.height>c?.canvas.height&&u(),c?.drawImage(jt,m.left,m.top);let Rt=parseInt(jt?.getAttribute("indexMap")),Kt=parseInt(jt?.getAttribute("ansIndexMap"));this.questionList[Rt].answers[Kt].posit.left=m.left,this.questionList[Rt].answers[Kt].posit.top=m.top,this.questionList[Rt].answers[Kt].posit.locate=l,m.left+=jt.width+5,wt==lt.length-1&&ct==rt.length-1&&(this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"))}p(It+5)}}},tt.src=this.questionList[Y].answers[at].url}};let U=this.questionList.filter(Q=>!this.answerTypeService.isOneChoiceAnswer(Q.tempData.answerType)).length;m.left=0,m.top+=this.questionList[this.questionList.length-1].question.remove.height+5;let B=[];for(let Q=0;Q<this.questionList.length;Q++)B.push(Q);let q=[];q=ya.shuffle(B);let R=0,et=[];q.forEach(Q=>{let V=new Image;V.crossOrigin="anonymous",V.setAttribute("indexMap",Q.toString()),et.push(V),V.onload=()=>{if(R++,R==q.length){let Y=ya.chunk(et,2);for(let at=0;at<Y.length;at++){const tt=Y[at];let rt=tt.map(gt=>gt.height),vt=Math.max(...rt);for(let gt=0;gt<tt.length;gt++){const ct=tt[gt];c&&m.top+ct.height>c?.canvas.height&&u(),c?.drawImage(ct,m.left,m.top);let lt=parseInt(ct?.getAttribute("indexMap"));this.questionList[lt].question.posit.left=m.left,this.questionList[lt].question.posit.top=m.top,this.questionList[lt].question.posit.locate=l,m.left+=ct.width+5}p(vt+5)}U==this.questionList.length?this.labelsBase64s[l]=r?.canvas.toDataURL("image/png"):D()}},V.src=this.questionList[Q].question.url}),this.completeCropper()}completeCropper(){this.isShowLoadingFileExam=!1,this.cropperDone=!0,jQuery("#hiddenWrapper").remove();try{this.browserStorageService.getStorage("_DONT_SHOW_MANUAL")||setTimeout(()=>{this.openManualDialog(!1)},2e3)}catch(e){console.log(e)}}toggleViewHelp(e){e.tempData.isShowHelp=!e.tempData.isShowHelp}toogleMixAns(e){e.forcedFixAns?this.commonService.snackError("lang_auto_cau_hoi_nay_phai_co_dinh_dap_an_ban_khong_the_thay_doi"):e.isFixAns=0==e.isFixAns?1:0}toggleMixInGroup(e){for(let i=0;i<this.questionList.length;i++)this.questionList[i].group&&this.questionList[i].group==e&&(1==this.questionList[i].groupType?(this.questionList[i].groupType=0,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_se_bi_dao_thu_tu_khi_de_thi_bi_dao")):(this.questionList[i].groupType=1,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_van_giu_nguyen_thu_tukhi_de_thi_bi_dao")))}toggleRemoveAllGroup(e){let i=this.questionList.filter(o=>o.group&&o.group==e);i.filter(o=>o.tempData.isSelect).length>0?i.forEach(o=>{var s;o.tempData.isSelect=!1,this.changePointWhenDeleteQuestion(null!==(s=o.index)&&void 0!==s?s:0)}):i.forEach(o=>{var s;o.tempData.isSelect=!0,this.changePointWhenDeleteQuestion(null!==(s=o.index)&&void 0!==s?s:0)})}loadingFileJs(){let e=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_cong_cu");this.arrStatusFileExam=[`${e} ...`],this.isShowLoadingFileExam=!0;let i=this.configService.getConfig("dynamicJsVersion");return new Promise(o=>{var s=[{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.js?ver=${i}`),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub(`azota_assets/js/pdf-js-v3/pdf.worker.js?ver=${i}`),name:"pdf-js-v2-pdf.worker.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"}];this.commonService.loadScriptPromises(s).then(r=>{r?(o(!0),this.isShowLoadingFileExam=!1):o(!1)})})}setHeightFullScreen(){var s=jQuery(window).height()-(jQuery("#bxControl").height()+jQuery("#header-app-component").height()+10);jQuery(".box-file-content").height(s)}resetBoxExamQuestions(e){var i,o;let s=null!==(i=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_lai_de_thi"))&&void 0!==i?i:"",r=null!==(o=this.commonService.myTranslateInstant("lang_auto_hanh_dong_khong_the_hoan_tac"))&&void 0!==o?o:"";this.confirmDialog(s,r,"400px",()=>{this.commonService.myNavigation("/admin/testbank/create-new-document/"+this.cur_cateId)})}confirmDialog(e,i,o,s){this.dialog.open(p_.D,{width:o,data:{title:e,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&s()})}handleSaveQuestionError(e){console.log(e),this.isShowLoadingFileExam=!1,this.showErrorSnack("lang_auto_tao_de_khong_thanh_cong_vui_long_thu_lai")}showAllHelp(){this.isShowAllHelp=!this.isShowAllHelp,this.questionList.forEach(e=>{e.tempData.isShowHelp=this.isShowAllHelp})}goToQuestionAll(e,i=150){var o=document.getElementById("box-questions-item-"+e),s=document.getElementById("box-questions-viewer");s&&o&&s.scrollTo({top:Number(o.offsetTop-i)})}rxjsHandleSaveExam(){if(this.isShowLoadingFileExam)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.invalidTypeQuestionConfig.length>0||!this.nameExamInp.value||""==this.nameExamInp.value.trim())this.commonService.snackError("lang_testbank_create_exam_width_file_pdf_cant_save_check_err");else{if(this.isFullNoPoint){const r=it(10,this.questionList.length);this.questionList.forEach((l,c)=>{l.tempData.point=r[c]})}this.isShowLoadingFileExam=!0;let i,e=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");if(this.selects=this.questionList.filter(r=>r.tempData.isSelect),this.arrStatusFileExam=[`${e}: 0/${this.selects.length}`],!ya.isEmpty(this.groupImages)){let r={};for(const l in this.groupImages)r[l]=this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Hs,this.groupImages[l]);i=(0,V0.D)(r)}const o=()=>{this.rxjsConstructQuestionInfo()},s=()=>{this.uploadParallelLabelsImage(0,5,r=>{r.success?(this.labelsUrls=r.urls,i?i.subscribe(l=>{var c,u,d="",m={};for(var p in l){var b=l[p];1==b.success?m[p]=null!==(c=b.data)&&void 0!==c?c:"":d=null!==(u=b.message)&&void 0!==u?u:"Unkown error"}""==d?(this.groupImages=m,o()):this.handleSaveQuestionError(d)}):o()):this.handleSaveQuestionError(r.message)})};this.useHeader&&this.examHeader?this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Hs,this.examHeader).subscribe(r=>{var l;1==r.success?(this.examHeader=null!==(l=r.data)&&void 0!==l?l:"",s()):this.handleSaveQuestionError(r.message)}):(this.examHeader="",s())}}rxjsConstructQuestionInfo(){this.rxJsCallSaveParallelQuestion(0,5,this.selects,e=>{e&&this.rxJsCallApiSaveQuestions(i=>{i&&this.handleSaveAllExam()})})}rxJsCallApiSaveQuestions(e){if(this.newQuestionArrSave.length<=this.limitLazyLoad){var i={listQuestions:this.newQuestionArrSave.sort((o,s)=>o.sortByIndex-s.sortByIndex)};this.questionService.apiQuestionSaveObjsV2Post(i).subscribe(o=>{var s,r,l,c,u;1==o.success&&(null!==(l=null===(r=null===(s=o.data)||void 0===s?void 0:s.objs)||void 0===r?void 0:r.length)&&void 0!==l?l:0)>0?(null===(u=null===(c=o.data)||void 0===c?void 0:c.objs)||void 0===u||u.forEach((d,m)=>{this.examConfigs.push({id:d.id,name:d.name,groupId:d.groupId,scorePerQuestion:this.selects[m].tempData.point,totalQuestion:1,sort:m})}),e(!0)):(this.handleSaveQuestionError(o.message),e(!1))})}else this.saveVeryLongListQuestions(this.newQuestionArrSave,e)}saveVeryLongListQuestions(e,i){var o,s,r,l,c;return(0,so.mG)(this,void 0,void 0,function*(){this.newQuestionArrSave.sort((m,p)=>m.sortByIndex-p.sortByIndex);var u=ya.chunk(this.newQuestionArrSave,Zi);let d=0;try{for(const m of u){let p=yield this.questionService.apiQuestionSaveObjsV2Post({listQuestions:m}).toPromise();if(!(1==p?.success&&(null!==(r=null===(s=null===(o=p?.data)||void 0===o?void 0:o.objs)||void 0===s?void 0:s.length)&&void 0!==r?r:0)>0))throw p?.message;null===(c=null===(l=p.data)||void 0===l?void 0:l.objs)||void 0===c||c.forEach((b,y)=>{let C=Zi*d+y;this.examConfigs.push({id:b.id,name:b.name,groupId:b.groupId,scorePerQuestion:this.selects[C].tempData.point,totalQuestion:1,sort:C})}),d++}i(!0)}catch(m){this.handleSaveQuestionError(m),i(!1)}})}rxJsCallSaveParallelQuestion(e,i,o,s){for(var r=[],l=0;l<i;l++)(c=e+l)<this.selects.length&&r.push(this.selects[c]);for(var u=0,d=r.length,m=0;m<r.length;m++){var c;this.rxjsProcessSaveOneQuestion(r[m],c=e+m,y=>{y?(u+=1)===d&&this.rxJsCallSaveParallelQuestion(e+d,i,o,s):s(!1)})}d<=0&&s(!0)}uploadParallelLabelsImage(e,i,o){for(var s=[],r=0;r<i;r++)(l=e+r)<this.labelsBase64s.length&&s.push(this.labelsBase64s[l]);for(var c=s.length,u=0,d=0;d<s.length;d++){var l;this.uploadOneLabelsImage(s[d],l=e+d,b=>{b.success?(this.resultUploadBase64Labels.push({index:b.index,url:b.url}),(u+=1)===c&&this.uploadParallelLabelsImage(e+c,i,o)):o({success:!1,message:"Fail to upload labels image to cdn"})})}c<=0&&(this.resultUploadBase64Labels.sort((p,b)=>p.index-b.index),o({success:!0,urls:this.resultUploadBase64Labels.map(p=>p.url)}))}uploadOneLabelsImage(e,i,o){this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Hs,e??"").subscribe(s=>{var r;o(s.success?{success:!0,index:i,url:null!==(r=s.data)&&void 0!==r?r:""}:{success:!1})})}rxjsProcessSaveOneQuestion(e,i,o){let s=e;this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Hs,s.original).subscribe(r=>{var l;1==r.success?(s.original=null!==(l=r.data)&&void 0!==l?l:"",this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Hs,s.help.url).subscribe(c=>{var u;if(1==c.success){s.help.url=null!==(u=c.data)&&void 0!==u?u:"";let m=this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)?e.answers.map(y=>({key:y.label,content:JSON.stringify(Object.assign(Object.assign({},y),{label:null,url:null,x:null,y:null,isCorrect:null,remove:null}))})):e.tempData.answerConfig,p="";e.answers.length>0&&(p=e.answers.map(y=>Object.assign(Object.assign({},y),{url:null,remove:Object.assign(Object.assign({},y.remove),{url:null})})));let b={name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,version:"2",isFixAns:e.isFixAns,groupType:e.groupType.toString(),answerConfig:JSON.stringify(m),answerResult:JSON.stringify(e.tempData.answerResult),answerType:e.tempData.answerType,questionText:"",metaData:"",answerMedia:e.help.url,questionMedia:"",attachments:JSON.stringify(e.tempData.questionMedia),questionContent:JSON.stringify(new Array({$id:0,id:0,name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,path:e.original,extension:"png",pimes:null,url:e.original,groupUrl:e.group?this.groupImages[`image_group_${e.group}`]:"",firstInGroupIndexes:null,abcdLabelPos:null,questionLabelMap:null,metaData:Object.assign(Object.assign({},e),{question:Object.assign(Object.assign({},e.question),{url:null,urlExcludeLabelOnly:this.answerTypeService.isOneChoiceAnswer(e.tempData.answerType)?null:e.question.urlExcludeLabelOnly,remove:Object.assign(Object.assign({},e.question.remove),{url:null})}),answers:p,tempData:null,original:null,debugView:null,isGroup:null,help:null,group:null,groupUrl:null,groupType:null})})),questionTags:JSON.stringify(new Array),tags:[],categoryId:0,groupId:e.group,coordinates:"{}",totalQuestion:1,sortByIndex:i};var d=this.newQuestionArrSave.filter(y=>y.name==b.name);if(!d||0==d.length){this.newQuestionArrSave.push(b),this.countSaveQuestion++;let y=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");this.arrStatusFileExam=[`${y}: ${this.countSaveQuestion}/${this.selects.length}`]}o(!0)}else this.handleSaveQuestionError(c.message),o(!1)})):(this.handleSaveQuestionError(r.message),o(!1))})}openDialogSpitPoint(){let e=0,i=0,o=0,s=0,r=0,l=0;for(let c=0;c<this.questionList.length;c++)this.questionList[c].tempData.isSelect&&(this.answerTypeService.isOneChoiceAnswer(this.questionList[c].tempData.answerType)?(e++,i+=this.questionList[c].tempData.point):this.answerTypeService.isFillAnswer(this.questionList[c].tempData.answerType)?(r++,l+=this.questionList[c].tempData.point):(o++,s+=this.questionList[c].tempData.point));if(this.countTrueFalseQuestion=e,this.countFillAnswerQuestion=r,this.dataSpitPoint){let c={multipleQuestion:e,multiplePoint:i.toFixed(4),essayQuestion:o,essayPoint:s.toFixed(4),fillQuestion:r,fillPoint:l.toFixed(4)};this.dataSpitPoint={isShow:!0,obj:c}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointTest(e){var i,o,s;this.multiplePoint=null!==(i=e.multiplePoint)&&void 0!==i?i:0,this.essayPoint=null!==(o=e.essayPoint)&&void 0!==o?o:0,this.fillPoint=null!==(s=e.fillPoint)&&void 0!==s?s:0;let r=Number(this.parseNumberFixed(Number(e.multiplePoint)/this.totalTrueFalseQuestion,8)),l=Number(this.parseNumberFixed(Number(e.fillPoint)/this.totalFillQuestion,8)),c=0,u=this.questionList.filter(d=>d.tempData.isSelect).length;u-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(c=Number(e.essayPoint)/(u-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let d=0;d<this.questionList.length;d++)this.questionList[d].tempData.isSelect&&(this.questionList[d].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[d].tempData.answerType)?r.toString().length>8?Number(this.parseNumberFixed(r,8)):r:this.answerTypeService.isFillAnswer(this.questionList[d].tempData.answerType)?l.toString().length>8?Number(this.parseNumberFixed(l,8)):l:c.toString().length>8?Number(this.parseNumberFixed(c,8)):c);this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1),this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}parseNumberFixed(e,i){let o=Number(parseFloat(e.toString()).toFixed(i));return isNaN(o)?"0":parseFloat(e.toString()).toFixed(i)}changeSelectTempData(e){this.questionList[e].tempData.isSelect=!this.questionList[e].tempData.isSelect,this.changePointWhenDeleteQuestion(e)}changePointWhenDeleteQuestion(e){let i=Number(this.multiplePoint)/this.totalTrueFalseQuestion,o=Number(this.fillPoint)/this.totalFillQuestion,s=0,r=this.questionList.filter(l=>l.tempData.isSelect).length;0==this.essayPoint&&(this.essayPoint=(r-this.totalTrueFalseQuestion-this.totalFillQuestion)*this.questionList[e].tempData.point),r-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(s=Number(this.essayPoint)/(r-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData.answerType)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData.answerType)?o.toString().length>8?Number(this.parseNumberFixed(o,8)):o:s.toString().length>8?Number(this.parseNumberFixed(s,8)):s)}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionList}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(X0),t.Y36(w.gz),t.Y36(z.uw),t.Y36(Bt.aE),t.Y36(Do.$),t.Y36(qn.K),t.Y36(tg.C),t.Y36(Bt.Oe),t.Y36(eg.E),t.Y36(le.U),t.Y36(wa.T),t.Y36(v_.V),t.Y36(Rn),t.Y36(wi.z),t.Y36(ng.x0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cropper"]],viewQuery:function(e,i){if(1&e&&(t.Gf(bg,5),t.Gf(yg,5),t.Gf(wg,5),t.Gf(kg,5),t.Gf(Cg,5),t.Gf(Tg,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.hiddenInput=o.first),t.iGM(o=t.CRH())&&(i.iframePdf=o.first),t.iGM(o=t.CRH())&&(i.resizeBar=o.first),t.iGM(o=t.CRH())&&(i.boxLeftFile=o.first),t.iGM(o=t.CRH())&&(i.parentResize=o.first),t.iGM(o=t.CRH())&&(i.maskLayer=o.first)}},features:[t.qOj],decls:5,vars:4,consts:[["browserSupported",""],["class","alert alert-danger alert-danger-note p-5","style","font-size: 18px",4,"ngIf","ngIfElse"],[3,"data","closeDialog","setPoint",4,"ngIf"],[4,"ngIf"],[3,"hidden"],[3,"headerBackTolink","showInput","showConfirmButton","examName","handleConfirm","handleCancel"],["id","box-create-action"],[1,"container-fluid","mt-3"],[1,"flex","w-full"],["parentResize",""],["id","box-left-file",3,"ngStyle"],["boxLeftFile",""],["id","box-left-file-input","type","file","accept","application/pdf",1,"azt-hidden"],["class","flex justify-between items-center dt-header",4,"ngIf"],["class","p-2 mt-2 mb-2 text-center alert alert-info",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center alert-danger-note",4,"ngIf"],[1,"box-file-content"],["id","box-left-file-drop","class","box-file-content-file_drop",4,"ngIf"],["id","box-left-file-pdf",1,"box-file-content--viewer",2,"display","none"],["id","box-left-file-canvas",1,"box-file-content--viewer",2,"display","none"],["class","box-questions","id","box-questions-viewer","style","width: 100%",4,"ngIf"],["style","width: 100%","class","m-3 pt-5 p-3 alert text-center alert-danger",4,"ngIf"],["id","resizeBar",3,"mousedown"],["resizeBar",""],["id","iframePdf",3,"hidden"],["iframePdf",""],[1,"maskLayer"],["maskLayer",""],["frameBorder","0","scrolling","auto","height","100%","width","100%",3,"src"],["class","box-file-content-file_preview--blur_status","style","\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100vh;\n            background: #2632386b;\n            color: white;\n            z-index: 999;\n          ",4,"ngIf"],[3,"ngIf"],[1,"flex","justify-between","items-center","dt-header"],[1,"box-control"],["color","primary",1,"example-margin",3,"matTooltip","color","formControl"],["class","pagination",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-yF9GeAl2MK",1,"btnTotal",3,"click"],[1,"flex"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8xKwGSyZ8J",1,"clickable","ml-3",3,"matTooltip","click"],[1,"flex","justify-between","items-center"],[1,"form-enter-question","ml-1"],["id","inputQuestionNum","type","number",2,"padding","0",3,"formControl","matAutocomplete","keyup.enter"],["id","cropperFilterQuestion"],["auto","matAutocomplete"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click",4,"ngFor","ngForOf"],["type","hidden"],["hiddenInput",""],["azt-track-service","create-exam-with-file-pdf-E8H8iTfHP6","id","btnEdits","mat-raised-button","",3,"click"],[1,"pagination"],["type","number","name","inputPage","id","",3,"ngModel","keyup.enter","ngModelChange"],["azt-track-service","create-exam-with-file-pdf-j3HtJoLN74",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-i02GVPZfkg",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click"],[1,"p-2","mt-2","mb-2","text-center","alert","alert-info"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],[1,"text-right","mt-1"],["azt-track-service","create-exam-with-file-pdf-8zeZ9XDtb_",1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-iQvwZJTrjj",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-left-file-drop",1,"box-file-content-file_drop"],[1,"box-file-content-file_drop--input"],[1,"box-file-content-file_drop--input-icon"],["id","download-link-item",3,"dataUrl","target","fileName","fileDescription","click"],["id","box-questions-viewer",1,"box-questions",2,"width","100%"],["id","examHeader","class","mb-4","style","padding: 15px; padding-top: 0",4,"ngIf"],["class","box-questions-item",4,"ngFor","ngForOf"],["class","pagination mb-5",4,"ngIf"],["id","examHeader",1,"mb-4",2,"padding","15px","padding-top","0"],["class","remove-layer",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf--HD0um3BB54",1,"clear-icon",3,"matTooltip","click"],["alt","",2,"width","100%",3,"src"],[1,"remove-layer"],[1,"box-questions-item"],["class","w-100 question-wrapper",4,"ngIf"],[1,"w-100","question-wrapper"],["class","alert alert-danger alert-danger-note","style","margin-bottom: -2px",4,"ngIf"],["class","box-questions-item__img group pt-4 mb-2",3,"hidden",4,"ngIf"],[1,"box-questions-item__img"],["azt-track-service","create-exam-with-file-pdf-n9OHfjQzIw6",1,"clear-icon",3,"matTooltip","click"],["class","cr-question-pieces",4,"ngIf"],[1,"box-questions-item__control"],[1,"box-questions-item__control_flex","position-relative","bg-slate-300","dark:bg-darkmode-400",3,"ngClass"],[1,"flex","items-center"],[2,"font-size","16px","margin-right","10px"],[1,"form-select","form-select-sm",2,"width","110px",3,"change"],[3,"value","selected"],["class","text-center flex items-center",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"font-size","16px"],["appReplaceCommas","","type","text",1,"form-control","inp",3,"value","input"],["azt-track-service","create-exam-with-file-pdf-6YL1FMa2jmG",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-bnQZ8KjeH-4",1,"attch-icon","clickable","flex",3,"click"],[1,"box-file-content-file_drop--input-icon",3,"matTooltip"],["azt-track-service","create-exam-with-file-pdf-4SNs7lyxp-f",1,"clickable","flex",3,"click"],["class","box-file-content-file_drop--input-icon",3,"matTooltip",4,"ngIf"],["style","margin-top: -5px; margin-bottom: 5px; border-radius: 5px",4,"ngIf"],[1,"alert","alert-danger","alert-danger-note",2,"margin-bottom","-2px"],[1,"box-questions-item__img","group","pt-4","mb-2",3,"hidden"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-9FChZOhg2jy",3,"click"],["class","mixInGroup",3,"matTooltip",4,"ngIf"],["class","mixInGroupNotif",4,"ngIf"],["loading","lazy","clickable","","alt","",3,"matTooltip","src"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb",1,"clear-icon",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI",1,"clear-icon",3,"matTooltip","click"],[1,"mixInGroup",3,"matTooltip"],[1,"mixInGroupNotif"],[1,"cr-question-pieces"],[1,"cr-question-label","mb-2"],["loading","lazy","alt","",3,"ngStyle","src"],[1,"cr-question","mb-2"],["loading","lazy","alt","",2,"width","100%","height","auto",3,"width","height","src"],[1,"cr-answers"],["class","cr-aswr",4,"ngFor","ngForOf"],[1,"cr-aswr"],[1,"mb-2"],["loading","lazy","alt","",2,"margin-right","10px","margin-bottom","5px",3,"ngStyle","src"],[1,"text-center","flex","items-center"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd","class","btn btn-ans",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd",1,"btn","btn-ans",3,"ngClass","click"],[1,"text-center"],["azt-track-service","create-exam-with-file-pdf-KOgDIAa3KdB",1,"btnAttQuestion",3,"click"],["class","box p-2 mt-2",4,"ngIf"],["class","alert alert-danger alert-danger-note",4,"ngIf"],[1,"box","p-2","mt-2"],[1,"alert","alert-danger","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-AlAR7KqulJm","href","https://docs.azota.vn/docs/trung-tam-tro-giup/tao-de-thi/tao-de-thi-khi-cau-hoi-khong-co-dap-an-de-chon/","target","_blank"],["style","margin-bottom: 50px; opacity: 0.8","class","box-questions-item__img_result",4,"ngIf","ngIfElse"],["noHelp",""],[1,"box-questions-item__img_result",2,"margin-bottom","50px","opacity","0.8"],[3,"src"],[2,"color","rgb(219, 219, 219)","padding","8px 20px"],[2,"margin-top","-5px","margin-bottom","5px","border-radius","5px"],["type","file","name","",1,"azt-hidden",3,"id","change"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4","class","dropFileAttachQuestion",3,"click",4,"ngIf"],["class","dropFileAttachQuestion bg-white",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4",1,"dropFileAttachQuestion",3,"click"],[1,"dropFileAttachQuestion","bg-white"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["controls",""],["type","audio/mpeg",3,"src"],["azt-track-service","create-exam-with-file-pdf-IopYkUBesXC",2,"margin-left","10px","background","#f06292","color","white","padding","0 10px","border-radius","5px","font-size","10px",3,"click"],[1,"pagination","mb-5"],["azt-track-service","create-exam-with-file-pdf-g_6T5-6RWqm",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-lPIlOAl7wnQ",1,"clickable",3,"ngStyle","matTooltip","click"],[1,"m-3","pt-5","p-3","alert","text-center","alert-danger",2,"width","100%"],[2,"font-size","50px","width","50px","height","50px"],["azt-track-service","create-exam-with-file-pdf-RPU348FbyDo",1,"btn","btn-primary",3,"click"],[1,"box-file-content-file_preview--blur_status",2,"position","fixed","top","0","left","0","width","100%","height","100vh","background","#2632386b","color","white","z-index","999"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[2,"display","flex","justify-content","center","margin-top","5rem"],["color","accent",3,"strokeWidth","diameter"],["class","span-status","style","font-size: 20px; margin-top: 30px;",4,"ngFor","ngForOf"],[1,"span-status",2,"font-size","20px","margin-top","30px"],[2,"background","#607d8b","padding","10px","border-radius","5px"],[1,"content","relative",2,"border-radius","0"],[3,"listQuestion","headerPosition","listCanvas","applyEdit"],[1,"alert","alert-danger","alert-danger-note","p-5",2,"font-size","18px"],[3,"data","closeDialog","setPoint"],[3,"startIndexQuestion","data","type","closeDialog"]],template:function(e,i){if(1&e&&(t.YNc(0,Lf,29,21,"ng-template",null,0,t.W1O),t.YNc(2,Zf,4,7,"div",1),t.YNc(3,Pf,1,1,"azt-split-point",2),t.YNc(4,Nf,2,3,"div",3)),2&e){const o=t.MAs(1);t.xp6(2),t.Q6J("ngIf",!i.isSupportedBrowser)("ngIfElse",o),t.xp6(1),t.Q6J("ngIf",null==i.dataSpitPoint?null:i.dataSpitPoint.isShow),t.xp6(1),t.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[E.mk,E.sg,E.O5,E.PC,cl.XC,Bi.ey,cl.ZL,ro.lW,ig.oG,qe.Hw,b_.Ou,Le.gM,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.JJ,h.JL,h.On,h.F,h.oH,og,y_,w_,k_.o,ul.Z,vg,E.Ov,_t.bT,_t.GT,_t.yl,_t.y,_t.DC,_t.Tf,_t.UG],styles:[".span-status[_ngcontent-%COMP%]{font-size:18px;color:#fff}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%;background:rgba(0,0,0,.5882352941);height:100%;padding-top:20%}mat-icon.clear-icon[_ngcontent-%COMP%]{font-size:15px;color:#999;position:absolute;right:5px;z-index:10;top:5px;height:unset;width:unset}mat-icon.clear-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.remove-layer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:8;background-color:#000000d1;display:flex;justify-content:center;align-items:center;color:#fff;font-size:1em}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#examHeader[_ngcontent-%COMP%]{background:#fff;border-radius:7px;overflow:hidden;position:relative}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;margin-top:-15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;box-shadow:none;height:calc(100vh - 110px);display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;overflow-x:hidden;background:#323639;padding:4px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{margin-bottom:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{position:relative;padding:10px;border-radius:5px 5px 0 0;overflow:hidden;background-color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img.group[_ngcontent-%COMP%]{border-radius:5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default;border:1px solid #c0c0c0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:0 0 5px 5px;border:1px solid #414548}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:0 0 5px 5px;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:5px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:70px;text-align:center;border:none;height:25px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{border:none;height:25px;background-color:#e0e0e0;border-radius:5px;background-position:right 0rem center!important;color:#000;padding:0 5px;padding-right:20px!important;font-size:revert!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:55%;left:170px;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:85%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .btnAttQuestion[_ngcontent-%COMP%]{background:#f59c12;height:25px;display:flex;align-items:center;padding:0 10px;border-radius:3px;cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]{display:flex;height:88px;background:#ececec;justify-content:center;align-items:center;border-bottom:1px solid #44beb5;cursor:pointer;border-radius:5px 5px 0 0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{height:40px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:80px;background:white;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:3px;margin-left:5px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{text-align:center}.isShowHelp[_ngcontent-%COMP%]{display:block!important}.question-wrapper[_ngcontent-%COMP%]{position:relative}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;z-index:10;color:#fff!important;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.img-group[_ngcontent-%COMP%]{position:relative}.img-group[_ngcontent-%COMP%]   .mixInGroupNotif[_ngcontent-%COMP%]{display:none}.img-group[_ngcontent-%COMP%]:hover   .mixInGroupNotif[_ngcontent-%COMP%]{display:block;background-color:#d63031}.mixInGroup[_ngcontent-%COMP%], .mixInGroupNotif[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-30px;left:-46px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.dt-header[_ngcontent-%COMP%]{background:#323639;color:#fff;padding:12px}#examNameInput[_ngcontent-%COMP%]{position:absolute;width:110%;left:-10%;top:-18px;border:1px solid #e0e0e0;border-radius:3px;padding:0 5px;height:36px}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:absolute;z-index:9;width:50%;right:-50%;top:-18px}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}#examSaveBtns[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#box-manual[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;position:absolute;z-index:9;width:50%;right:100%;top:-16px}#box-manual[_ngcontent-%COMP%]   #buttonHD[_ngcontent-%COMP%]{color:#2361ae;border:none}.error-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}#btnEdits[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.pagination[_ngcontent-%COMP%]{min-width:130px;display:flex;align-items:center;justify-content:space-between;max-width:230px;color:#fff}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:25px;text-align:center;border:none;background-color:#414548;color:#fff}.pagination.mb-5[_ngcontent-%COMP%]{margin:0 auto}.alert-danger-note[_ngcontent-%COMP%]{display:revert!important;border:1px solid transparent!important;border-radius:.25rem!important;color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important}#inputQuestionNum[_ngcontent-%COMP%]{height:22px;width:100%;text-align:center;border:none;margin-left:5px;min-width:30px;max-width:50px;border-radius:3px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#resizeBar[_ngcontent-%COMP%]{width:5px;transition:background-color .5s}#resizeBar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}#resizeBar.hover[_ngcontent-%COMP%]{background-color:#2262ae}#iframePdf[_ngcontent-%COMP%]{position:relative;flex:auto}#iframePdf[_ngcontent-%COMP%]   .maskLayer[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}span.attch-icon[_ngcontent-%COMP%]{position:relative}span.attch-icon[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-12px;left:50%;margin-left:-7px;color:#ececec}"]}),n})(),jf=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i,this.isNotShowAgain=new h.p4}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["user-manual"]],decls:41,vars:32,consts:[[1,"box","p-5"],[2,"min-height","55vh"],[1,"text-center","mb-2"],[1,"font-medium","text-lg"],[1,"mt-2"],[2,"list-style","inherit","margin","inherit","padding","auto"],["src","assets/images/pdf-debug-v2.png","alt","",1,"mb-2",2,"max-width","100%"],[1,"mb-0"],["align","end"],[1,"flex","items-center","w-full",2,"justify-content","space-between"],[1,"form-check"],["id","is-not-show-again","type","checkbox",1,"form-check-input",3,"formControl"],["for","is-not-show-again",1,"form-check-label"],["azt-track-service","create-exam-with-file-pdf-WfkRk3L46OB",1,"btn","btn-primary","w-24",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"azt-mat-dialog-content")(2,"div",1)(3,"div",2)(4,"span",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",4)(8,"p"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"ul",5)(15,"li"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"li"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"li"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()(),t._UZ(24,"img",6),t.TgZ(25,"p"),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"p",7),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()(),t.TgZ(31,"mat-dialog-actions",8)(32,"div",9)(33,"div",10),t._UZ(34,"input",11),t.TgZ(35,"label",12),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"button",13),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_testbank_create_exam_width_file_pdf_tutorial_pdf")," "),t.xp6(4),t.hij("",t.lcZ(10,14,"lang_testbank_create_exam_width_file_pdf_note_one"),"."),t.xp6(3),t.hij("",t.lcZ(13,16,"lang_testbank_create_exam_width_file_pdf_note_two"),":"),t.xp6(4),t.Oqu(t.lcZ(17,18,"lang_testbank_create_exam_width_file_pdf_label_question")),t.xp6(3),t.Oqu(t.lcZ(20,20,"lang_testbank_create_exam_width_file_pdf_lable_answer")),t.xp6(3),t.Oqu(t.lcZ(23,22,"lang_testbank_create_exam_width_file_pdf_content_area")),t.xp6(4),t.hij("",t.lcZ(27,24,"lang_testbank_create_exam_width_file_pdf_note_three")," "),t.xp6(3),t.hij("",t.lcZ(30,26,"lang_testbank_create_exam_width_file_pdf_note_four"),"."),t.xp6(5),t.Q6J("formControl",i.isNotShowAgain),t.xp6(2),t.hij(" ",t.lcZ(37,28,"lang_testbank_create_exam_width_file_pdf_not_view")," "),t.xp6(2),t.Q6J("mat-dialog-close",i.isNotShowAgain.value),t.xp6(1),t.Oqu(t.lcZ(40,30,"lang_buttom_close")))},dependencies:[z.ZT,z.H8,h.Wl,h.JJ,h.oH,dl.O,_t.bT],encapsulation:2}),n})();var Xe=A(4947),Ro=A(62842),Xo=A(20259),ka=A(43461),ml=A(79695),pl=A(69751);class hl{constructor(a,e){this.shareFileFlutterService=a,this.http=e,this.linkDataFile=""}initPdfData(a){return this.linkDataFile=a,this}createAnswerSheet(){return new pl.y(a=>{a.next({success:1,message:"success"}),a.complete()})}exportPdf(a){this.linkDataFile.includes("https:")?this.downloadFile().subscribe(e=>{this.shareFileFlutterService.shareFileWithBlob(e,a)}):this.shareFileFlutterService.shareFileWithBase64(this.linkDataFile,a)}downloadFile(){return this.http.get(this.linkDataFile,{responseType:"blob"}).pipe((0,ss.U)(a=>a))}}let C_=(()=>{class n{constructor(e,i,o){this.cdnService=e,this.shareFileFlutterService=i,this.http=o}createAnswerSheet(){return new pl.y(e=>{this.creator?this.creator.createAnswerSheet().subscribe(i=>{1===i.success?(e.next({success:1,message:"successful"}),e.complete()):(e.next({success:0,message:i.message}),e.complete())}):(e.next({success:0,message:"Not find creator"}),e.complete())})}createAzotaAnswerSheet_A4(e){const i=new hl(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answersheet_mau_a4__${e&&e<=120?parseInt(e.toString(),10):120}.pdf`)),this}createA4AnswerSheet_35hh(){const e=new hl(this.shareFileFlutterService,this.http);return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a4_35hh.pdf")),this}createA5AnswerSheetFullA4_50(){const e=new hl(this.shareFileFlutterService,this.http);return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a5_50_fulla4.pdf")),this}createA6AnswerSheetFullA4_20(){const e=new hl(this.shareFileFlutterService,this.http);return this.creator=e.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a6_20_full_a4.pdf")),this}exportPdf(e){this.creator&&this.creator.exportPdf(e+".pdf")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(le.U),t.LFG(ka.g),t.LFG(K.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ca=A(1218),T_=A(15816),Zu=A(28293),Pu=A(34890),rs=A(38469),qf=A(44207),Ff=A(32343);function Qf(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function Uf(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span")(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,Qf,2,0,"span",10),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw();t.xp6(2),t.hij(' "',null==e.classroom?null:e.classroom.name,'" '),t.xp6(1),t.Q6J("ngIf",o.classroomErrorObjs.length>1&&i!==o.classroomErrorObjs.length-1)}}function Bf(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",15),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_loi")," "))}function Rf(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",16),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_an_xem_chi_tiet_loi")," "))}function zf(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function Jf(n,a){if(1&n&&(t.TgZ(0,"span",28)(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,zf,2,0,"span",10),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2).$implicit;t.xp6(2),t.hij(' "',e,'" '),t.xp6(1),t.Q6J("ngIf",o.duplicatedStudentCodes&&o.duplicatedStudentCodes.length>1&&i!==o.duplicatedStudentCodes.length-1)}}function Hf(n,a){if(1&n&&(t.TgZ(0,"div",26)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Jf,4,2,"span",27),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ","- "+t.lcZ(3,2,"lang_auto_so_bao_danh_bi_trung")+": ",""),t.xp6(2),t.Q6J("ngForOf",e.duplicatedStudentCodes)}}function $f(n,a){1&n&&(t.TgZ(0,"div",26),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ","- "+t.lcZ(2,1,"lang_auto_hoc_sinh_khong_co_so_bao_danh")," "))}function Kf(n,a){if(1&n&&(t.TgZ(0,"div",23)(1,"div",17)(2,"div",24)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"span",13),t._uU(7),t.qZA()(),t.YNc(8,Hf,5,4,"div",25),t.YNc(9,$f,3,3,"div",25),t.qZA()()),2&n){const e=a.$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,4,"lang_auto_cac_loi_so_bao_danh_trong_lop")+" "," "),t.xp6(3),t.hij(" ",'"'+(null==e.classroom?null:e.classroom.name)+'": '," "),t.xp6(1),t.Q6J("ngIf",e.isDuplicatedStudentCode),t.xp6(1),t.Q6J("ngIf",e.isMissingStudentCode)}}function Yf(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",29),t._UZ(2,"path",30)(3,"path",31)(4,"path",32),t.qZA()())}function Gf(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",33)(2,"g",34)(3,"g",35),t._UZ(4,"circle",36),t.TgZ(5,"path",37),t._UZ(6,"animateTransform",38),t.qZA()()()()())}function Wf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,Kf,10,6,"div",19),t.qZA(),t.TgZ(3,"div",20)(4,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.getStudentListByClassroomIds(o.classroomIds))}),t.YNc(5,Yf,5,0,"span",10),t.YNc(6,Gf,7,0,"span",10),t.TgZ(7,"span",22),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.classroomErrorObjs),t.xp6(3),t.Q6J("ngIf",!e.loadingExport),t.xp6(1),t.Q6J("ngIf",e.loadingExport),t.xp6(2),t.hij(" ",t.lcZ(9,4,"lang_auto_tai_danh_sach_hoc_sinh_loi")," ")}}function Vf(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-student-list",39),t.NdJ("exportDataDone",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.exportStudentListDone(o))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("objs",e.exportStudentObjs)("type",1)}}let Xf=(()=>{class n extends st.Q{constructor(e,i){super(),this.shareFileFlutterService=e,this.studentProfileV2Service=i,this.classroomErrorObjs=[],this.classroomIds="",this.examId=0,this.checkPostParam=!1,this.showExpandError=!1,this.loadingExport=!1}getStudentListByClassroomIds(e){this.loadingExport=!0,this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(e,this.checkPostParam?void 0:this.examId).subscribe(i=>{var o,s,r;if(1===i.success){this.exportStudentObjs=i.data;let l=null!==(s=null===(o=this.exportStudentObjs)||void 0===o?void 0:o.length)&&void 0!==s?s:0;if(this.exportStudentObjs){let c=[],u=[];this.exportStudentObjs.forEach((d,m,p)=>{c.find(b=>b.identificationNumber===d.identificationNumber)?u.push(d):c.push(d)});for(let d=0;d<l;d++)if(this.exportStudentObjs[d].identificationNumber)for(let m=0;m<u.length;m++)this.exportStudentObjs&&this.exportStudentObjs[d].identificationNumber===u[m].identificationNumber&&(this.exportStudentObjs[d].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[d].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let c=0;c<l;c++)if(this.exportStudentObjs[c].identificationNumber)for(let u=c+1;u<l;u++)this.exportStudentObjs&&this.exportStudentObjs[c].identificationNumber===this.exportStudentObjs[u].identificationNumber&&(this.exportStudentObjs[c].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[c].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(null!==(r=i.message)&&void 0!==r?r:"");this.loadingExport=!1}))}exportStudentListDone(e){let i=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(e,i)}toggleExpandErrors(){this.showExpandError=!this.showExpandError}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ka.g),t.Y36(Bt.LU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-errors-identification"]],inputs:{classroomErrorObjs:"classroomErrorObjs",classroomIds:"classroomIds",examId:"examId",checkPostParam:"checkPostParam"},features:[t.qOj],decls:18,vars:11,consts:[[1,"azt-error-block"],[1,"flex","text-pending"],[1,"text-lg"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-triangle","data-lucide","alert-triangle",1,"lucide","lucide-alert-triangle","w-6","h-6","mr-2","flex-none"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[4,"ngFor","ngForOf"],[1,"mt-2","error-detail"],["azt-track-service","azt-errors-identification-ZElYECOq3mc",1,"btn-text-primary","font-medium",3,"click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["points","6 9 12 15 18 9"],["points","18 15 12 9 6 15"],[1,"mt-2"],[1,"alert","alert-outline-danger","show"],["class","text-md",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","azt-errors-identification-85xomF_be8D",1,"btn-text-primary","font-medium",3,"click"],[1,"text-primary"],[1,"text-md"],[1,"az-error-title"],["class","mt-1 text-xs",4,"ngIf"],[1,"mt-1","text-xs"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m8 17 4 4 4-4"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-5","h-5","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"objs","type","exportDataDone"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"line",5)(6,"line",6),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.YNc(9,Uf,4,2,"span",7),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return i.toggleExpandErrors()}),t.YNc(14,Bf,5,3,"span",10),t.YNc(15,Rf,5,3,"span",10),t.qZA(),t.YNc(16,Wf,10,6,"div",11),t.qZA()(),t.YNc(17,Vf,1,2,"azt-export-excel-for-student-list",12)),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,7,"lang_auto_so_bao_danh_cua_hoc_sinh_trong_lop")," "),t.xp6(2),t.Q6J("ngForOf",i.classroomErrorObjs),t.xp6(1),t.hij(" ",t.lcZ(11,9,"lang_auto_dang_bi_trung_hoac_bi_thieu")," "),t.xp6(4),t.Q6J("ngIf",!i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.exportStudentObjs))},dependencies:[E.sg,E.O5,Ff.s,_t.bT],encapsulation:2}),n})();function t1(n,a){1&n&&(t.TgZ(0,"div",2),t.O4$(),t.TgZ(1,"svg",3)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function e1(n,a){1&n&&(t.TgZ(0,"p",16),t.O4$(),t.TgZ(1,"svg",17),t._UZ(2,"path",18)(3,"polyline",19)(4,"path",20)(5,"rect",21)(6,"path",22),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()),2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_file_danh_sach_so_bao_danh")," "))}function n1(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function i1(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",29),t._UZ(1,"path",30)(2,"polyline",31)(3,"line",32),t.qZA())}function o1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",23),t._UZ(1,"input",24),t.TgZ(2,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.printStudentCode())}),t.YNc(3,n1,7,0,"span",26),t.YNc(4,i1,4,0,"ng-template",null,27,t.W1O),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=t.MAs(5),i=t.oxw(3);t.xp6(1),t.s9C("value",i.createExportStudentCodeName(!1)),t.xp6(2),t.Q6J("ngIf",i.isLoadingPrintCodeStudent)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_tai_ve")," ")}}const a1=function(n){return{"text-left":n}};function s1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.clickNumbering())}),t.O4$(),t.TgZ(2,"svg",29),t._UZ(3,"path",35)(4,"path",36)(5,"path",37)(6,"path",38),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(4,a1,1==e.styleView)),t.xp6(7),t.hij(" ",t.lcZ(8,2,"lang_auto_danh_lai_sbd")," ")}}function r1(n,a){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,e1,9,3,"p",13),t.YNc(2,o1,8,6,"div",14),t.YNc(3,s1,9,6,"div",15),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering)}}function l1(n,a){1&n&&(t.TgZ(0,"div",45),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_ban_chua_chon_lop_vui_long_chon_lop_de_in_so_bao_danh")," "))}function c1(n,a){1&n&&(t.TgZ(0,"div",57),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function u1(n,a){if(1&n&&(t.TgZ(0,"div",55),t.YNc(1,c1,3,3,"div",56),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}function d1(n,a){if(1&n&&(t.TgZ(0,"div",46)(1,"div",47)(2,"h3",48),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",49),t._UZ(6,"azt-list-classroom-checkall",50),t.qZA()(),t.TgZ(7,"div",51)(8,"div",52)(9,"ng-scrollbar",53),t._UZ(10,"azt-list-classroom-checkbox",54),t.qZA()(),t.YNc(11,u1,2,1,"div",41),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,10,"lang_auto_danh_so_bao_danh")," "),t.xp6(3),t.Q6J("form",e.form)("objs",e.classroomObjs)("permissionName",e.permissionTypes.exam),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("form",e.form)("objs",e.classroomObjs)("examClassroomObjs",e.examClassroomObjs)("permissionName",e.permissionTypes.exam),t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors)}}function _1(n,a){if(1&n&&(t.TgZ(0,"div",55)(1,"div",57),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,1,e.msgErrorTwo)," ")}}function m1(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",28)(2,"g",4)(3,"g",5),t._UZ(4,"circle",6),t.TgZ(5,"path",7),t._UZ(6,"animateTransform",8),t.qZA()()()()())}function p1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.destroyConfig())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.savePrintExam())}),t.YNc(5,m1,7,0,"span",61),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||!e.validFormIdentify),t.xp6(1),t.Q6J("ngIf",e.loadingConfig),t.xp6(1),t.hij(" ",t.lcZ(7,6,"lang_auto_tiep_tuc")," ")}}function h1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",62),t._UZ(1,"azt-errors-identification",63),t.TgZ(2,"div",64),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",65)(6,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.backToChooseClassroom())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",67),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openAutomaticIdentification())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);let i;t.xp6(1),t.Q6J("classroomErrorObjs",e.classroomErrorObjs)("classroomIds",e.classroomIds)("examId",null!==(i=null==e.examObj?null:e.examObj.id)&&void 0!==i?i:0)("checkPostParam",e.checkPostParam),t.xp6(2),t.hij(" ",t.lcZ(4,7,"lang_auto_vui_long_click_vao_sua_sbd_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(8,9,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(11,11,"lang_auto_sua_sbd")," ")}}function g1(n,a){if(1&n&&(t.YNc(0,l1,3,3,"div",39),t.YNc(1,d1,12,12,"div",40),t.YNc(2,_1,4,3,"div",41),t.TgZ(3,"div",42),t.YNc(4,p1,8,8,"div",43),t.YNc(5,h1,12,13,"div",44),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngIf",""!==e.msgError&&e.form.controls.classroomIds.errors&&0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf",0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf","lang_core_class_has_no_student"===e.msgErrorTwo&&0===e.classroomErrorObjs.length),t.xp6(2),t.Q6J("ngIf",0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf",e.classroomErrorObjs.length>0)}}function f1(n,a){if(1&n&&(t.TgZ(0,"form",9)(1,"div",10),t.YNc(2,r1,4,3,"div",11),t.YNc(3,g1,6,5,"ng-template",null,12,t.W1O),t.qZA()()),2&n){const e=t.MAs(4),i=t.oxw();t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",!i.checkNumbering)("ngIfElse",e)}}let A_=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c){super(),this.documentConfigService=e,this.formBuilder=i,this.dialog=o,this.offlineStudentCodeService=s,this.printAnswersheetService=r,this.sEAztClassroomCheckboxService=l,this.studentProfileV2Service=c,this.form=new h.nJ({}),this.hashId="",this.styleView=0,this.checkStudentCode=!1,this.startStudentCode=1,this.examObj=void 0,this.permissionTypes=Ai.$,this.checkNumbering=!1,this.checkDownloadSBD=!1,this.classroomObjs=[],this.examClassroomObjs=[],this.isLoadingPrintCodeStudent=!1,this.loadingConfig=!1,this.showAdvanceSetting=!1,this.validFormIdentify=!0,this.classroomErrorObjs=[],this.classroomIds="",this.msgError="",this.msgErrorTwo="",this.totalStudent=0,this.checkPostParam=!1}createExportStudentCodeName(e){var i,o,s,r,l,c=this.printAnswersheetService.exportFileNameOfStudentCode(1,null!==(o=null===(i=this.examObj)||void 0===i?void 0:i.name)&&void 0!==o?o:"",null!==(r=null===(s=this.examObj)||void 0===s?void 0:s.hashId)&&void 0!==r?r:"");return e&&(c=null!==(l=this.commonService.replaceAll(c,"_","-"))&&void 0!==l?l:""),c}clickNumbering(){this.checkNumbering=!0}showInputAdvanceSetting(){this.showAdvanceSetting=!this.showAdvanceSetting}backToChooseClassroom(){this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}destroyConfig(){this.checkNumbering=!1,this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}savePrintExam(){var e;this.loadingConfig=!0,this.classroomErrorObjs=[];let i=this.commonService.getFormObj(this.form);var o=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.exam);const s=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,o,i.classroomIds);0===s.length&&this.examClassroomObjs.forEach(l=>{l.classroomId&&s.push(l.classroomId)}),this.classroomIds=s.toString();let r={classroomIds:s,examHashId:null!==(e=this.hashId)&&void 0!==e?e:""};this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost(r).subscribe(l=>{var c,u,d,m;if(1==l.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(null!==(c=this.hashId)&&void 0!==c?c:""),this.msgErrorTwo="";else{let p=null!==(d=null===(u=l?.data)||void 0===u?void 0:u.classrooms)&&void 0!==d?d:[];for(let b=0;b<p.length;b++){const y=p[b];(y.isDuplicatedStudentCode||y.isMissingStudentCode)&&this.classroomErrorObjs.push(y)}this.loadingConfig=!1,this.msgErrorTwo=null!==(m=l.message)&&void 0!==m?m:""}this.checkPostParam=!0})}printStudentCode(){this.isLoadingPrintCodeStudent=!0,this.subscriptions.add(this.offlineStudentCodeService.apiOfflineStudentCodeCreateStudentCodesGet(this.hashId).subscribe(e=>{var i,o,s,r,l,c,u;if(1==e.success)this.printAnswersheetService.printStudentCode(this.examObj,null!==(o=null===(i=e?.data)||void 0===i?void 0:i.objs)&&void 0!==o?o:[]),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!1,this.msgError="",this.classroomErrorObjs=[];else{let d=null!==(l=null===(r=null===(s=e?.data)||void 0===s?void 0:s.examClassroomConfig)||void 0===r?void 0:r.classrooms)&&void 0!==l?l:[],m=[];for(let p=0;p<d.length;p++){const b=d[p];(b.isDuplicatedStudentCode||b.isMissingStudentCode)&&this.classroomErrorObjs.push(b),m.push(null===(c=b.classroom)||void 0===c?void 0:c.id)}this.classroomIds=m.toString(),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!0,this.msgError=null!==(u=e.message)&&void 0!==u?u:""}this.checkPostParam=!1}))}calcMaxIndexInput(){let e=this.commonService.getFormObj(this.form);var i=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.exam);const o=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,i,e.classroomIds);let s=999999;return this.classroomObjs.forEach(r=>{var l;this.commonService.filterArray(o,r.id)&&(s-=null!==(l=r.countStudents)&&void 0!==l?l:0)}),s}checkValidFormIdentify(e){this.validFormIdentify=e.target instanceof HTMLInputElement&&Number(e.target.value)<=this.calcMaxIndexInput()}getExamDataByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var o,s,r;1==i.success?null!=i.data&&(this.examObj=i.data.examObj,this.classroomObjs=null!==(o=i.data.classroomObjs)&&void 0!==o?o:new Array,this.examClassroomObjs=null!==(s=i.data.examClassroomObjs)&&void 0!==s?s:[],this.successStatusObj()):this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"",!0)}))}openAutomaticIdentification(){let e=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.exam),i=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,e,this.form.controls.classroomIds.value);0===i.length&&this.examClassroomObjs.forEach(o=>{o.classroomId&&i.push(o.classroomId)}),this.subscriptions.add(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(i.toString()).subscribe(o=>{var s,r;1===o.success&&(this.totalStudent=null!==(r=null===(s=o.data)||void 0===s?void 0:s.length)&&void 0!==r?r:0,this.dialog.open(qf.p,{data:{type:2,listCheckBox:i,totalStudent:this.totalStudent},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(c=>{c&&this.savePrintExam()}))}))}ngOnInit(){this.hashId&&this.getExamDataByHashId(this.hashId),this.form=this.formBuilder.group({classroomIds:this.formBuilder.array([]),startIdentifyIndex:new h.p4(this.startStudentCode,[h.kI.min(1),h.kI.max(999999),h.kI.pattern(/^[0-9]*$/)]),whoAllow:new h.p4(2)},{validators:[va.h.classroomCheckBoxValidator]}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.Cq),t.Y36(h.qu),t.Y36(z.uw),t.Y36(Bt.MH),t.Y36(ml.Y),t.Y36(Vo.L),t.Y36(Bt.LU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["numbering-identification"]],inputs:{hashId:"hashId",styleView:"styleView",checkStudentCode:"checkStudentCode",startStudentCode:"startStudentCode"},features:[t.qOj],decls:3,vars:2,consts:[["class","w-full flex",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-full","flex"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-8","h-8","mx-auto"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[3,"formGroup"],[1,"app"],["class","app",4,"ngIf","ngIfElse"],["numbering",""],["class","font-medium flex items-center intro-x",4,"ngIf"],["class","relative mt-2 intro-x",4,"ngIf"],["class","mt-3",3,"ngClass",4,"ngIf"],[1,"font-medium","flex","items-center","intro-x"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","text-success"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["points","14 2 14 8 20 8"],["d","M10 12h2v6"],["x","2","y","12","width","4","height","6"],["d","M10 18h4"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","numbering-identification-mO_7BlXNpZ8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[4,"ngIf","ngIfElse"],["donePrintCodeLoading",""],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"mt-3",3,"ngClass"],["azt-track-service","numbering-identification-GfouPhXkxs2",1,"btn","btn-outline-secondary",3,"click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["class","text-danger font-medium mb-4",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","w-full p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-2","justify-between","numbering-identification"],["class","col-span-12 items-center text-right mt-3",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],[1,"text-danger","font-medium","mb-4"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"main-numbering"],[2,"height","250px"],["pointerEventsMethod","scrollbar",3,"visibility"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName"],[1,"w-full","p-2"],["class","text-left text-danger",4,"ngIf"],[1,"text-left","text-danger"],[1,"col-span-12","items-center","text-right","mt-3"],["azt-track-service","numbering-identification-EaHzWOF-ZYD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-422NanET_rP",1,"btn","btn-primary-soft",3,"disabled","click"],[4,"ngIf"],[1,"col-span-12","mt-3"],[3,"classroomErrorObjs","classroomIds","examId","checkPostParam"],[1,"mt-3","font-medium"],[1,"mt-3"],["azt-track-service","numbering-identification-yx-KGOCvWTN",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-_Mu1PflxZjE",1,"btn","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.YNc(0,t1,7,0,"div",0),t.YNc(1,f1,5,3,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.mk,E.O5,P.KC,h._Y,h.JL,h.sg,h.CE,zi.o,Ne.g,Xf,_t.bT],encapsulation:2}),n})(),x1=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.dialog=e,this.dialogRef=i,this.data=o,this.loading=!0}btnCloseDialog(){this.dialogRef.close()}loadImage(){this.loading=!1}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(z.so,8),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["notice-print-a4-paper-dialog"]],features:[t.qOj],decls:25,vars:15,consts:[[1,"box",2,"max-width","650px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex"],[1,"inline-block","w-6","h-6","mr-2","text-pending","flex-none",2,"margin-top","4px"],["name","alert-octagon"],[1,"mb-0","h5"],[1,"p-3"],[1,"font-medium","mb-2"],[1,"text-center","mt-3"],[1,"flex","items-center",2,"max-height","50vh",3,"hidden"],[1,"w-10","h-10","mx-auto"],[3,"type"],[2,"max-height","50vh",3,"hidden"],["alt","",1,"h-auto","mx-auto",3,"src","load"],[1,"p-3","text-right"],["azt-track-service","notice-a4-dialog-ObwBAVC1Evd",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),t._UZ(5,"lucide-icon",5),t.qZA(),t.TgZ(6,"p",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"azt-mat-dialog-content")(10,"div",7)(11,"p",8),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",9)(15,"div",10)(16,"div",11),t._UZ(17,"azt-loading-ui",12),t.qZA()(),t.TgZ(18,"div",13)(19,"img",14),t.NdJ("load",function(){return i.loadImage()}),t.ALo(20,"convertCdnLinkOfGitHubWithLocale"),t.qZA()()()()()(),t.TgZ(21,"div",15)(22,"button",16),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,7,"lang_auto_vui_long_cau_hinh_in_theo_mau_A4_nhu_huong_dan_duoi_day")),t.xp6(5),t.hij(" ",t.lcZ(13,9,"lang_core_after_printing_the_answer_sheet_please_check_that")," "),t.xp6(3),t.Q6J("hidden",!i.loading),t.xp6(2),t.Q6J("type","oval"),t.xp6(1),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("src",t.lcZ(20,11,"azota_assets/medias_[LANG]/a4_template_answer_sheet.png"),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(24,13,"lang_auto_dong")," "))},dependencies:[dl.O,rs.J,f.Nh5,_t.bT,_t.y],encapsulation:2}),n})(),S_=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialog=e,this.commonService=i}showDialog(){this.dialog.open(x1,{data:{},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["notice-print-a4-paper-box"]],features:[t.qOj],decls:3,vars:3,consts:[["azt-track-service","notice-a4-box-8TXulZreMgV",1,"btn-text-primary","ml-2","font-medium",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.showDialog()}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&e&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"lang_testbank_print_a4_notice"),")"))},dependencies:[_t.bT],encapsulation:2}),n})();function v1(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function b1(n,a){1&n&&(t.TgZ(0,"span",30),t._UZ(1,"azt-loading-ui",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function y1(n,a){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"lucide-icon",33),t.qZA())}function w1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.printPdfExam(!1,o.offlineExamObj.hashId,""))}),t.YNc(1,b1,2,1,"span",28),t.YNc(2,y1,2,0,"ng-template",null,29,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function k1(n,a){1&n&&(t.TgZ(0,"span",34),t._UZ(1,"azt-loading-ui",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function C1(n,a){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"lucide-icon",33),t.qZA())}function T1(n,a){1&n&&(t.TgZ(0,"span",34),t._UZ(1,"azt-loading-ui",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function A1(n,a){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"lucide-icon",33),t.qZA())}function S1(n,a){1&n&&(t.TgZ(0,"span",30),t._UZ(1,"azt-loading-ui",31),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function O1(n,a){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"lucide-icon",33),t.qZA())}function E1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.printPdfExam(!0,o.offlineExamObj.hashId,""))}),t.YNc(1,S1,2,1,"span",28),t.YNc(2,O1,2,0,"ng-template",null,29,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function M1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",36),t.NdJ("exportDataDone",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.exportDataDone(o))}),t.qZA()}if(2&n){const e=t.oxw(2);let i;t.Q6J("startQuestionIndex",null!==(i=e.examObj.startQuestionIndex)&&void 0!==i?i:1)("objs",e.exportExcelData)}}function I1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),t._UZ(5,"lucide-icon",7),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t._UZ(8,"div",8),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",10),t.YNc(11,w1,6,5,"button",11),t.qZA()(),t.TgZ(12,"div",12)(13,"p",13)(14,"span",14),t._UZ(15,"lucide-icon",15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t._UZ(18,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(19,"div",9),t._UZ(20,"input",10),t.TgZ(21,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.printExamAnswersheet(o.offlineExamObj.hashId))}),t.YNc(22,k1,2,1,"span",17),t.YNc(23,C1,2,0,"ng-template",null,18,t.W1O),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()(),t.TgZ(27,"div",12)(28,"p",13)(29,"span",19),t._UZ(30,"lucide-icon",20),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA(),t.TgZ(33,"div",9),t._UZ(34,"input",10),t.TgZ(35,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportExcelForAnswerSheet())}),t.YNc(36,T1,2,1,"span",17),t.YNc(37,A1,2,0,"ng-template",null,22,t.W1O),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()(),t.TgZ(41,"div",3)(42,"div",4)(43,"div",5)(44,"span",6),t._UZ(45,"lucide-icon",7),t.qZA(),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()(),t.TgZ(48,"div",9),t._UZ(49,"input",10),t.YNc(50,E1,6,5,"button",23),t.qZA()(),t.TgZ(51,"div",12)(52,"div",24),t._UZ(53,"numbering-identification",25),t.ALo(54,"mustInClassroom"),t.qZA()()(),t.YNc(55,M1,1,2,"azt-export-excel-for-answersheet",26)}if(2&n){const e=t.MAs(24),i=t.MAs(38),o=t.oxw();let s;t.xp6(6),t.hij(" ",t.lcZ(7,20,"lang_auto_file_de_thi")," "),t.xp6(4),t.s9C("value",o.createNameExam("exam",!0)),t.xp6(1),t.Q6J("ngIf",0==o.showFormAddInformation),t.xp6(5),t.hij(" ",t.lcZ(17,22,"lang_auto_file_phieu_tra_loi")," "),t.xp6(4),t.s9C("value",o.createNameExam("answersheet",!0)),t.xp6(2),t.Q6J("ngIf",o.loadingObj.downloadAnswerSheet)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(26,24,"lang_auto_tai_ve")," "),t.xp6(6),t.hij(" ",t.lcZ(32,26,"lang_auto_file_answer_list")," "),t.xp6(3),t.s9C("value",o.createNameExam("answerexcel",!0)),t.xp6(2),t.Q6J("ngIf",o.isLoadingPrintAnswer)("ngIfElse",i),t.xp6(3),t.hij(" ",t.lcZ(40,28,"lang_auto_tai_ve")," "),t.xp6(7),t.hij(" ",t.lcZ(47,30,"lang_auto_file_de_thi_kem_dap_an")," "),t.xp6(3),t.s9C("value",o.createNameExam("answerdocx",!0)),t.xp6(1),t.Q6J("ngIf",0==o.showFormAddInformation),t.xp6(3),t.Q6J("hashId",o.examObj.hashId)("checkStudentCode",t.lcZ(54,32,null!==(s=o.examObj.whoAllow)&&void 0!==s?s:0))("startStudentCode",o.startStudentCode),t.xp6(2),t.Q6J("ngIf",null!=o.exportExcelData)}}let O_=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y){super(),this.shareFileFlutterService=e,this.activeRoute=i,this.fb=o,this.dialog=s,this.printAnswersheetService=r,this.offlineMixQuestionService=l,this.answerSheetHelper=c,this.zipDataService=u,this.cdnService=d,this.exportDocxService=m,this.offlineExamExportService=p,this.exportExcelService=b,this.browserStorageService=y,this.startStudentCode=1,this.examPrintInfoObj={},this.loadingObj={},this.isLoadingLib=!0,this.isLoadingPrintAnswer=!1,this.showFormAddInformation=!1,this.tableAnswerDownload=new h.NI(!1)}closeChangeInformation(e){this.showFormAddInformation=!1,e&&this.printPdfExam(!1,this.offlineExamObj.hashId,"")}createNameExam(e,i){var o,s,r,l,c,u,d,m,p,b,y="";y="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(o=this.examObj.name)&&void 0!==o?o:"",null!==(r=null===(s=this.offlineExamObj)||void 0===s?void 0:s.hashId)&&void 0!==r?r:""):"answerexcel"==e||"answerdocx"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,null!==(l=this.examObj.name)&&void 0!==l?l:"",null!==(u=null===(c=this.offlineExamObj)||void 0===c?void 0:c.hashId)&&void 0!==u?u:""):this.printAnswersheetService.exportFileNameOfExamOffline(0,null!==(d=this.examObj.name)&&void 0!==d?d:"",null!==(p=null===(m=this.offlineExamObj)||void 0===m?void 0:m.hashId)&&void 0!==p?p:"",void 0),i&&(y=null!==(b=this.commonService.replaceAll(y,"_","-"))&&void 0!==b?b:"");var C=".docx";return C="answersheet"==e&&7!=this.offlineExamObj.answersheetTemplate?".pdf":C,y+("answerexcel"==e?".xlsx":C)}printExamAnswersheet(e){var i,o;this.loadingObj.downloadAnswerSheet=!0,this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(null!==(o=null===(i=null==this?void 0:this.examObj)||void 0===i?void 0:i.hashId)&&void 0!==o?o:"",e??"","").subscribe(s=>{var r,l,c,u,d,m,p,b,y,C,I,D,U;if(1===s.success){let B=this.getTotalQuestionInMixQuestionObjs(null!==(l=null===(r=s.data)||void 0===r?void 0:r.mixQuestionObjs)&&void 0!==l?l:[],null!==(u=null===(c=s.data)||void 0===c?void 0:c.questionObjs)&&void 0!==u?u:[]);if(B){let R=null!==(p=null===(m=null===(d=s.data)||void 0===d?void 0:d.offlineExamObj)||void 0===m?void 0:m.answersheetTemplate)&&void 0!==p?p:0,et=null!==(C=null===(y=null===(b=s?.data)||void 0===b?void 0:b.offlineExamObj)||void 0===y?void 0:y.totalQuestionOfAnswersheet)&&void 0!==C?C:void 0;this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,R,B,0,null===(I=s.data)||void 0===I?void 0:I.maxOfflineMixQuestionHashId,et);let Q=this.createNameExam("answersheet",!1);this.answerSheetHelper.createAnswerSheet().subscribe(V=>{var Y;1==V.success?this.answerSheetHelper.exportPdf(Q):this.errorStatusObj(null!==(Y=s.message)&&void 0!==Y?Y:"",!0),this.loadingObj.downloadAnswerSheet=!1})}else this.errorStatusObj(null!==(D=s.message)&&void 0!==D?D:"",!0),this.loadingObj.downloadAnswerSheet=!1}else this.errorStatusObj(null!==(U=s.message)&&void 0!==U?U:"",!0),this.loadingObj.downloadAnswerSheet=!1}))}getTotalQuestionInMixQuestionObjs(e,i){if(e.length>0){let o=0;return e.forEach(s=>{var r,l,c;let u=this.zipDataService.decodeContentGzip(null!==(r=s?.mixDatas)&&void 0!==r?r:""),d=this.castJsonToObj(u);o<(null!==(l=d?.length)&&void 0!==l?l:0)&&(o=null!==(c=d?.length)&&void 0!==c?c:0)}),o}return i.length>0?i.length:void 0}printPdfExam(e,i,o){var s;Ro.G.openLoadingEffect(null!==(s=this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong"))&&void 0!==s?s:""),this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionListMixExamQuestionsGet(this.examObj.hashId,i).subscribe(r=>{var l,c,u,d,m,p,b,y,C,I,D,U,B,q,R;if(1===r.success)if(Ro.G.changeMsgLoadingEffect(null!==(l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu"))&&void 0!==l?l:""),null!==(c=r.data)&&void 0!==c&&c.offlineExamMixQuestions){let et={nameSchool:"",nameSubject:""};this.examPrintInfoObj.status&&(et={nameSchool:null!==(u=this.examPrintInfoObj.schoolName)&&void 0!==u?u:"",nameSubject:null!==(d=this.examPrintInfoObj.subject)&&void 0!==d?d:""});let Q=this.tableAnswerDownload.value?2:0;if(1==(null===(m=r.data)||void 0===m?void 0:m.offlineExamMixQuestions.length)){let V=null!==(y=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify(null!==(b=null===(p=r.data)||void 0===p?void 0:p.offlineExamMixQuestions[0].mixQuestions)&&void 0!==b?b:[])))&&void 0!==y?y:[];this.exportDocxService.downloadExam(e,null!==(C=r.data.exam)&&void 0!==C?C:{},null===(I=r.data)||void 0===I?void 0:I.offlineExam,null===(D=r.data)||void 0===D?void 0:D.offlineExamMixQuestions[0],V,et,Q,Y=>Ro.G.closeLoadingEffect(Y),Y=>{Ro.G.changeMsgLoadingEffect(Y)}).then().catch(Y=>{this.showErrorSnack(Y.message)})}else this.exportDocxService.downloadExamObjs(e,null!==(U=r.data.exam)&&void 0!==U?U:{},null===(B=r.data)||void 0===B?void 0:B.offlineExam,null===(q=r.data)||void 0===q?void 0:q.offlineExamMixQuestions,et,Q,V=>Ro.G.closeLoadingEffect(V),V=>{Ro.G.changeMsgLoadingEffect(V)}).then().catch(V=>{this.showErrorSnack(V.message)})}else Ro.G.closeLoadingEffect(10),this.showErrorSnack("lang_auto_khong_co_du_lieu_dao_de");else this.errorStatusObj(null!==(R=r.message)&&void 0!==R?R:"",!0),Ro.G.closeLoadingEffect(10)}))}exportExcelForAnswerSheet(){var e;this.isLoadingPrintAnswer=!0;let i=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(i).subscribe(o=>{var s,r;if(1==o.success){let l=null===(s=o.data)||void 0===s?void 0:s.objs;l&&l.length>0?this.exportExcelData=this.commonService.myClone(l):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(null!==(r=o.message)&&void 0!==r?r:""),this.isLoadingPrintAnswer=!1}))}exportDataDone(e){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(e,i),this.isLoadingPrintAnswer=!1}ngOnInit(){var e=[{source:this.cdnService.convertCdnLinkOfGitHub("almo/opencv.js"),name:"opencv_crop_white.js"}];this.commonService.loadScriptPromises(e).then(()=>{this.isLoadingLib=!1}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ka.g),t.Y36(w.gz),t.Y36(h.QS),t.Y36(z.uw),t.Y36(ml.Y),t.Y36(Bt.fs),t.Y36(C_),t.Y36(Ca.D),t.Y36(le.U),t.Y36(T_.m),t.Y36(Bt.qr),t.Y36(Zu.O),t.Y36(wi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["print-history-box"]],inputs:{examObj:"examObj",offlineExamObj:"offlineExamObj",startStudentCode:"startStudentCode",examPrintInfoObj:"examPrintInfoObj"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"action-history"],[1,"action-file","mt-4"],[1,"font-medium","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto","flex","items-center"],[1,"inline-block","w-4","h-4","text-pending","mr-2"],["name","file-check"],[1,"form-check","mt-1","md:mt-0"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-031D9RFdQh","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-danger"],["name","file-spreadsheet"],["azt-track-service","print_history-XPpw6jKuAiS",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneAnswerSheetLoading",""],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["doneLoadingPrintAnswer",""],["azt-track-service","print_history-yYG9YXhT8","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"intro-x"],[3,"hashId","checkStudentCode","startStudentCode"],[3,"startQuestionIndex","objs","exportDataDone",4,"ngIf"],["azt-track-service","print_history-031D9RFdQh",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 text-white mr-2",4,"ngIf","ngIfElse"],["doneExamLoading",""],[1,"w-4","h-4","text-white","mr-2"],[3,"type"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[1,"w-4","h-4","mr-2","text-white"],["azt-track-service","print_history-yYG9YXhT8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[3,"startQuestionIndex","objs","exportDataDone"]],template:function(e,i){if(1&e&&(t.YNc(0,v1,1,0,"azt-loading-effect",0),t.YNc(1,I1,56,34,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.isLoadingLib&&null!=i.examObj&&null!=i.offlineExamObj)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,Pu.j,rs.J,f.Nh5,A_,S_,_t.bT,_t.Bm],encapsulation:2}),n})();function L1(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Z1(n,a){1&n&&(t.TgZ(0,"div",36)(1,"h3",37),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",38),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_tao_de_thanh_cong")," \u{1f44f} "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_auto_vui_long_chon_cac_hinh_thuc_ben_duoi")," "))}function P1(n,a){if(1&n&&(t.TgZ(0,"div",11)(1,"h3",39),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"print-history-box",40),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_auto_du_lieu_gan_nhat")," "),t.xp6(2),t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("examPrintInfoObj",e.examPrintInfoObj)("startStudentCode",e.startStudentCode)}}const E_=function(n){return[n]};function N1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.YNc(1,Z1,7,6,"div",4),t.TgZ(2,"div",5)(3,"h3",6),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",7)(7,"span",8),t._UZ(8,"lucide-icon",9),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.TgZ(11,"a",10),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",11)(15,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectConfigTestOnline())}),t.TgZ(16,"span",13),t._UZ(17,"lucide-icon",14),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"p",15),t._uU(21),t.ALo(22,"mytranslate"),t.TgZ(23,"a",16),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()()()(),t.TgZ(26,"div",17)(27,"h3",6),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t.TgZ(30,"div",7)(31,"span",8),t._UZ(32,"lucide-icon",9),t.qZA(),t._uU(33),t.ALo(34,"mytranslate"),t.TgZ(35,"a",18),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"div",11)(39,"div",19)(40,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openDialogExamPrintTicket())}),t.TgZ(41,"span",13),t._UZ(42,"lucide-icon",21),t.qZA(),t.TgZ(43,"span",22),t._uU(44),t.ALo(45,"mytranslate"),t.ALo(46,"mytranslate"),t.qZA()(),t.TgZ(47,"p",15),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()()(),t.YNc(50,P1,5,7,"div",23),t.qZA(),t.TgZ(51,"div",24)(52,"h3",6),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.TgZ(55,"div",7)(56,"span",8),t._UZ(57,"lucide-icon",9),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.TgZ(60,"a",25),t._uU(61),t.ALo(62,"mytranslate"),t.qZA()(),t.TgZ(63,"div",11)(64,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectPowerpoint())}),t.TgZ(65,"span",13),t._UZ(66,"lucide-icon",27),t.qZA(),t._uU(67),t.ALo(68,"mytranslate"),t.qZA(),t.TgZ(69,"p",15),t._uU(70),t.ALo(71,"mytranslate"),t.qZA()()(),t.TgZ(72,"div",28)(73,"div",29)(74,"a",30),t.ALo(75,"mylocalize"),t.TgZ(76,"span",31),t._UZ(77,"lucide-icon",32),t.qZA(),t._uU(78),t.ALo(79,"mytranslate"),t.qZA()(),t.TgZ(80,"div",33)(81,"a",34),t.ALo(82,"mylocalize"),t.TgZ(83,"span",31),t._UZ(84,"lucide-icon",35),t.qZA(),t._uU(85),t.ALo(86,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();let i,o;t.xp6(1),t.Q6J("ngIf",e.isNewDocument),t.xp6(3),t.hij(" ",t.lcZ(5,23,"lang_auto_online")," "),t.xp6(5),t.hij(" ",t.lcZ(10,25,"lang_auto_copy_link_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai_online_ho_tro_ca_trac_nghiem_va_tu_luan")," "),t.xp6(3),t.Oqu(t.lcZ(13,27,"lang_auto_tim_hieu_them")),t.xp6(6),t.hij(" ",t.lcZ(19,29,"lang_auto_cai_dat_lam_bai_online")," "),t.xp6(3),t.hij(" ",t.lcZ(22,31,"lang_auto_thiet_lap_thoi_gian_lam_bai_giam_sat_tu_dong_tao_de_con_cho_phep_xem_diem_doing_xuat_ban_de_tao_link_gui_cho_hoc_sinh_lam_bai_va_nop_bai")," "),t.xp6(3),t.Oqu(t.lcZ(25,33,"lang_auto_tim_hieu_them")),t.xp6(4),t.hij(" ",t.lcZ(29,35,"lang_auto_offline")," "),t.xp6(5),t.hij(" ",t.lcZ(34,37,"lang_auto_in_de_cho_hoc_sinh_lam_tren_giay_scan_hoac_chup_anh_bai_lam_cua_hoc_sinh_va_upload_len_azota_de_cham_tu_dong_hoc_sinh_cung_co_the_tu_chup_lai_bai_lam_cua_minh_va_nop_tren_azota")," "),t.xp6(3),t.Oqu(t.lcZ(37,39,"lang_auto_tim_hieu_them")),t.xp6(8),t.AsE("",t.lcZ(45,41,"lang_auto_in_de_upper")," ",t.lcZ(46,43,"lang_auto_-_co_phieu_tra_loi_trac_nghiem_rieng"),""),t.xp6(4),t.hij(" ",t.lcZ(49,45,"lang_auto_xuat_file_pdf_chua_cac_de_thi_da_duoc_dao_thu_tu_cau_hoi_va_dap_an_tu_de_goc_kem_theo_mot_file_pdf_chua_mau_phieu_tra_loi_trac_nghiem_theo_mau_tuy_chon")," "),t.xp6(2),t.Q6J("ngIf",e.offlineExamObj.hashId),t.xp6(3),t.hij(" ",t.lcZ(54,47,"lang_auto_chen_vao_powerpoint")," "),t.xp6(5),t.hij(" ",t.lcZ(59,49,"lang_auto_chen_noi_dung_cau_hoi_vao_slide_powerpoint_hoc_sinh_co_the_tuong_tac_dot")," "),t.xp6(3),t.Oqu(t.lcZ(62,51,"lang_auto_xem_huong_dan_tai_day")),t.xp6(6),t.hij(" ",t.lcZ(68,53,"lang_auto_chen_vao_powerpoint")," "),t.xp6(3),t.hij(" ",t.lcZ(71,55,"lang_auto_comment_powerpoint_guild")," "),t.xp6(4),t.Q6J("routerLink",t.VKq(65,E_,t.lcZ(75,57,"/admin/testbank/exam-results-list/"+(null!==(i=e.examObj.categoryId)&&void 0!==i?i:0)+"/"+e.examObj.id+"/0"))),t.xp6(4),t.hij(" ",t.lcZ(79,59,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(67,E_,t.lcZ(82,61,"/admin/testbank/document-management/0/"+(e.backToLink.includes("shareType")?0:null!==(o=e.examObj.categoryId)&&void 0!==o?o:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(86,63,"lang_auto_ve_trang_quan_ly_file")," ")}}let D1=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.activeRoute=e,this.dialog=i,this.documentConfigService=o,this.backToLink="",this.paramBackToLink="",this.returnToLink="",this.examObj={},this.examHashId="",this.isNewDocument=!1,this.dataConfigDocument={},this.offlineExamObj={},this.startStudentCode=1,this.examPrintInfoObj={}}redirectConfigTestOnline(){var e,i;let o=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.hashId}`,`?backto=${o}`)}openDialogExamPrintTicket(){var e,i;let o=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/print-exam-and-ticket/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.hashId}`,`?backto=${o}`)}redirectPowerpoint(){var e,i;let o=`/admin/testbank/action-online-offline/${null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/${this.examObj.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/powerpoint/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.id}`,`?backto=${o}`)}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var o,s,r,l,c;1==i.success?(this.dataConfigDocument=null!==(o=i.data)&&void 0!==o?o:{},i.data&&!(null===(s=i.data)||void 0===s)&&s.examObj&&(this.examObj=i.data.examObj,this.offlineExamObj=null!==(r=i.data.offlineExamObj)&&void 0!==r?r:{},this.examPrintInfoObj=null!==(l=i.data.examPrintInfoObj)&&void 0!==l?l:{}),this.successStatusObj()):this.errorStatusObj(null!==(c=i.message)&&void 0!==c?c:"",!0)}))}ngOnInit(){var e,i,o,s;let r=null!==(e=this.commonService.getMyQueryParam("isNewDocument"))&&void 0!==e?e:"";this.isNewDocument="1"==r.toString();var l=null!==(i=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==i?i:"";this.paramBackToLink=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"",this.examHashId=null!==(s=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==s?s:"",this.backToLink=this.paramBackToLink?this.paramBackToLink:`/admin/testbank/document-management/0/${l??0}/1`,this.returnToLink=`/admin/testbank/action-online-offline/${l??0}/${this.examHashId}?backto=`+this.paramBackToLink,this.getExamInfoByHashId(this.examHashId),this.commonService.translateMetaData({title:"lang_cms_action_online_offline_title",description:"lang_cms_action_online_offline_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(z.uw),t.Y36(Bt.Cq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-action-online-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],["class","action-heading mb-4",4,"ngIf"],[1,"action-online"],[1,"text-md","uppercase","font-medium"],[1,"text-md","mt-1"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["azt-track-service","action-online-offline-9sByNv80IwU","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"box","mt-3","p-5"],["azt-track-service","action-online-offline-Ow1f0tm7-at",1,"btn","btn-outline-primary",3,"click"],[1,"w-5","h-5","mr-2"],["name","cog"],[1,"text-xs","mt-2","text-slate-500"],["azt-track-service","action-online-offline-McQDzOjO9G-","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"action-offline","mt-8"],["azt-track-service","action-online-offline-yRjklKAot9b","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-offline/gioi-thieu-tinh-nang-thi-offline/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"azt-offline-print"],["azt-track-service","action-online-offline-IIO1TsHmgjr",1,"btn","btn-outline-primary",3,"click"],["name","printer"],[1,"mr-1"],["class","box mt-3 p-5",4,"ngIf"],[1,"action-online","mt-8"],["azt-track-service","action-online-offline-gcTAKBJcf3U","href","https://www.youtube.com/watch?v=FpcOtHNGMCQ&ab_channel=Azota","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],["azt-track-service","action-online-offline-sbrNKGia_Tt",1,"btn","btn-outline-primary",3,"click"],["name","sidebar"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","action-online-offline-ftSDs5DiFWa",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","action-online-offline-A6xAK9qc23J",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["name","folder"],[1,"action-heading","mb-4"],[1,"text-md","font-medium","mb-1"],[1,"text-md"],[1,"text-md","font-medium","flex","items-center"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,L1,1,0,"azt-loading-effect",1),t.YNc(2,N1,87,69,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[w.rH,E.O5,xe.Q,Xe._,f.Nh5,O_,_t.mp,_t.bT],encapsulation:2}),n})(),j1=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialogRef=e,this.data=i}btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-dialog-danger"]],features:[t.qOj],decls:14,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"w-6","h-6","mr-2","text-danger","inline-block","flex-none"],["name","trash-2"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),t._UZ(5,"lucide-icon",5),t.qZA(),t._UZ(6,"span",6),t.qZA()()(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"button",9),t.NdJ("click",function(){return i.confirmDialog()}),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("innerHtml",i.data.content,t.oJD),t.xp6(3),t.hij(" ",t.lcZ(10,3,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(13,5,"lang_auto_xac_nhan")," "))},dependencies:[f.Nh5,_t.bT],encapsulation:2}),n})();var Ke=A(10261),Ta=A(3848);function q1(n,a){1&n&&(t.TgZ(0,"div",17)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function F1(n,a){if(1&n&&(t.TgZ(0,"div",12)(1,"div",13)(2,"label",14),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",13),t._UZ(6,"input",15),t.ALo(7,"mytranslate"),t.YNc(8,q1,4,3,"div",16),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_ten_de")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(7,5,"lang_auto_nhap_ten_de")+" ..."),t.xp6(2),t.Q6J("ngIf",e.form.controls.nameExam.errors)}}function Q1(n,a){1&n&&(t.TgZ(0,"div",19)(1,"span",20),t._UZ(2,"azt-loading-ui",21),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("type","oval"))}function U1(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Q1,3,1,"div",18),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.type!==e.typeScreenCreateExamOffline.edit)}}function B1(n,a){if(1&n&&(t.TgZ(0,"div",23),t._UZ(1,"config-level-subject",24),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("typeView",1)}}function R1(n,a){if(1&n&&t.YNc(0,B1,2,4,"div",22),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.type!==e.typeScreenCreateExamOffline.edit)}}function z1(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"div",26),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",27)(5,"button",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addItemCodeExam())}),t.TgZ(6,"span",29),t._UZ(7,"lucide-icon",30),t.qZA(),t.TgZ(8,"span",31),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_core_danh_sach_ma_de")," "),t.xp6(7),t.Oqu(t.lcZ(10,4,"lang_auto_them_ma_de")))}function J1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_khong_qua_120_cau")," "))}function H1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function $1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_hoi")," "))}function K1(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,J1,3,3,"span",57),t.YNc(2,H1,3,3,"span",57),t.YNc(3,$1,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.max),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.min),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.required)}}function Y1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_diem_trac_nghiem")," "))}function G1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function W1(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,Y1,3,3,"span",57),t.YNc(2,G1,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionMultiple.errors.required),t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionMultiple.errors.min)}}function V1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")," "))}function X1(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan")," "))}function tx(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,V1,3,3,"span",57),t.YNc(2,X1,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionEssay.errors.max),t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionEssay.errors.required)}}function ex(n,a){1&n&&(t.TgZ(0,"div",56)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_core_enter_essay_score_greater_than_zero")," "))}function nx(n,a){1&n&&(t.TgZ(0,"div",58)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_core_missing_essay_question")," "))}const $s=function(n){return{width:n}};function ix(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw().index,c=t.oxw(2),u=c.index,d=c.$implicit,m=t.oxw(3);return t.KtG(m.chooseAnswerQuestion(u,r+l*d.controls.colTotalItem.value,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("disabled",!0)("ngStyle",t.VKq(6,$s,"TL"!=e?"35px":"80px"))("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ","TL"!=e?e:t.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function ox(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ix,4,8,"ng-container",66),t.BQk()),2&n){const e=t.oxw(7);t.xp6(1),t.Q6J("ngForOf",e.configAnswerData)}}function ax(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw().index,c=t.oxw(2),u=c.index,d=c.$implicit,m=t.oxw(3);return t.KtG(m.chooseAnswerQuestion(u,r+l*d.controls.colTotalItem.value,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("disabled","TL"===e)("ngStyle",t.VKq(6,$s,"TL"!=e?"35px":"80px"))("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ","TL"!=e?e:t.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function sx(n,a){if(1&n&&t.YNc(0,ax,4,8,"ng-container",66),2&n){const e=t.oxw(7);t.Q6J("ngForOf",e.configAnswerData)}}function rx(n,a){if(1&n&&(t.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA()(),t.YNc(7,ox,2,1,"ng-container",5),t.YNc(8,sx,1,1,"ng-template",null,65,t.W1O),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(9),s=t.oxw().index,r=t.oxw(2).$implicit;t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.AsE(" ",t.lcZ(5,5,"lang_auto_cau")+" "+(i+1+s*r.controls.colTotalItem.value)+" "," ","("+e.value.point+" "+t.lcZ(6,7,"lang_auto_diem")+")"," "),t.xp6(3),t.Q6J("ngIf",e.controls.isEssay.value)("ngIfElse",o)}}function lx(n,a){if(1&n&&(t.TgZ(0,"div",59),t.YNc(1,rx,10,9,"div",60),t.qZA()),2&n){const e=a.index,i=t.oxw(2).$implicit;let o;t.xp6(1),t.Q6J("ngForOf",null==(o=i.get("answerList"))?null:o.controls.slice(e*i.controls.colTotalItem.value,e*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function cx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"div",36)(2,"div",37)(3,"div",38)(4,"h3",39)(5,"span",40),t._uU(6),t.ALo(7,"mytranslate"),t.ALo(8,"formatOfflineExamHashIdToNumber"),t.qZA()()()(),t.TgZ(9,"div",41)(10,"div",42)(11,"div",13)(12,"div",12)(13,"div",13)(14,"label",43),t._uU(15),t.ALo(16,"mytranslate"),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"div",13)(20,"input",44),t.NdJ("input",function(){t.CHM(e);const o=t.oxw(),s=o.$implicit,r=o.index,l=t.oxw(3);return t.KtG(l.updateCountQuestion(s,r))}),t.ALo(21,"mytranslate"),t.qZA(),t.YNc(22,K1,4,3,"div",45),t.qZA()()()(),t.TgZ(23,"div",46)(24,"div",47)(25,"div",12)(26,"div",13)(27,"label",48),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.TgZ(30,"div",13)(31,"input",49),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.updateScoreQuestion(o))}),t.ALo(32,"mytranslate"),t.qZA(),t.YNc(33,W1,3,2,"div",45),t.qZA()()(),t.TgZ(34,"div",47)(35,"div",12)(36,"div",13)(37,"label",50),t._uU(38),t.ALo(39,"mytranslate"),t.qZA()(),t.TgZ(40,"div",13)(41,"input",51),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.updateScoreQuestion(o))}),t.ALo(42,"mytranslate"),t.qZA(),t.YNc(43,tx,3,2,"div",45),t.YNc(44,ex,4,3,"div",45),t.YNc(45,nx,4,3,"div",52),t.qZA()()()()(),t.TgZ(46,"div",41)(47,"div",53)(48,"h3",54),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"div",12),t.YNc(52,lx,2,1,"div",55),t.qZA()()()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);let o,s;t.Q6J("formGroup",e),t.xp6(6),t.hij(" ",t.lcZ(7,20,"lang_auto_ma_de")+": "+t.lcZ(8,22,e.controls.codeExam.value)," "),t.xp6(9),t.lnq(" ",t.lcZ(16,24,"lang_core_total_question")," ","("+t.lcZ(17,26,"lang_core_count_multiple_question")+": "+e.controls.totalQuestionMultiple.value+", "," ",t.lcZ(18,28,"lang_core_count_essay_question")+": "+e.controls.totalQuestionEssay.value+") "," "),t.xp6(5),t.s9C("placeholder",t.lcZ(21,30,"lang_auto_nhap_so_cau")+" ..."),t.Q6J("readonly",i.type===i.typeScreenCreateExamOffline.edit),t.xp6(2),t.Q6J("ngIf",(e.controls.totalQuestion.dirty||e.controls.totalQuestion.touched)&&e.controls.totalQuestion.errors),t.xp6(6),t.hij(" ",t.lcZ(29,32,"lang_auto_tong_diem_trac_nghiem")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(32,34,"lang_auto_nhap_so_diem")+" ..."),t.Q6J("decimal",!0),t.xp6(2),t.Q6J("ngIf",(e.controls.scoreQuestionMultiple.dirty||e.controls.scoreQuestionMultiple.touched)&&e.controls.scoreQuestionMultiple.errors),t.xp6(5),t.hij(" ",t.lcZ(39,36,"lang_auto_tong_diem_tu_luan")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(42,38,"lang_auto_nhap_so_diem")+" ..."),t.Q6J("decimal",!0),t.xp6(2),t.Q6J("ngIf",(e.controls.scoreQuestionEssay.dirty||e.controls.scoreQuestionEssay.touched)&&e.controls.scoreQuestionEssay.errors),t.xp6(1),t.Q6J("ngIf",0==e.controls.scoreQuestionEssay.value&&0!=e.controls.totalQuestionEssay.value&&!e.controls.scoreQuestionEssay.errors),t.xp6(1),t.Q6J("ngIf",0==e.controls.totalQuestionEssay.value&&0!=e.controls.scoreQuestionEssay.value&&!e.controls.scoreQuestionEssay.errors),t.xp6(4),t.Oqu(t.lcZ(50,40,"lang_auto_bang_dap_an")),t.xp6(3),t.Q6J("ngForOf",null==(o=e.get("answerList"))?null:o.controls.slice(0,(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value%1==0?(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value:(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value+1))}}function ux(n,a){if(1&n&&(t.TgZ(0,"div",33),t.YNc(1,cx,53,42,"div",34),t.qZA()),2&n){const e=a.index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.selected.value===e)}}function dx(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ux,2,1,"div",32),t.BQk()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.Q6J("ngForOf",null==(i=e.form.get("codeExamList"))?null:i.controls)}}const _x=function(n){return{"text-danger":n}};function mx(n,a){if(1&n&&(t.TgZ(0,"span",71),t.ALo(1,"numberFloat"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(),i=e.$implicit,o=e.index,s=t.oxw(3);t.Q6J("ngClass",t.VKq(6,_x,(i.invalid||i.controls.checkDuplicateError.value&&s.codeExamDuplicateList.includes(t.lcZ(1,2,i.controls.codeExam.value)))&&s.selected.value!==o)),t.xp6(2),t.hij(" ",""!=i.controls.codeExam.value?i.controls.codeExam.value:t.lcZ(3,4,"lang_core_chua_nhap_ma_de")," ")}}function px(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_dau_du_dap_an_cau_hoi")," "))}function hx(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(5).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_nhap_thieu_dap_an_tu_cau")+" "+(null==e.controls||null==e.controls.emptyAnswer||null==e.controls.emptyAnswer.value?null:e.controls.emptyAnswer.value.split(", ")[0])+" "+t.lcZ(3,3,"lang_core_den_cau")+" "+e.controls.emptyAnswer.value.split(", ")[e.controls.emptyAnswer.value.split(", ").length-1]," ")}}function gx(n,a){if(1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n){const e=t.oxw(5).$implicit;t.hij(" ",t.lcZ(1,1,"lang_core_nhung_cau_chua_nhap_dap_an")+": "+e.controls.emptyAnswer.value," ")}}function fx(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,hx,4,5,"span",5),t.YNc(2,gx,2,3,"ng-template",null,81,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(4).$implicit;t.xp6(1),t.Q6J("ngIf",(null==i.controls||null==i.controls.emptyAnswer||null==i.controls.emptyAnswer.value?null:i.controls.emptyAnswer.value.split(", ").length)>10)("ngIfElse",e)}}function xx(n,a){if(1&n&&(t.TgZ(0,"div",80),t.YNc(1,px,3,3,"span",57),t.YNc(2,fx,4,2,"span",57),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf","emptyAll"===(null==e.controls||null==e.controls.emptyAnswer?null:e.controls.emptyAnswer.value)),t.xp6(1),t.Q6J("ngIf","emptyAll"!==(null==e.controls||null==e.controls.emptyAnswer?null:e.controls.emptyAnswer.value)&&"success"!==(null==e.controls||null==e.controls.emptyAnswer?null:e.controls.emptyAnswer.value))}}function vx(n,a){if(1&n&&(t.TgZ(0,"div",78),t.YNc(1,xx,3,2,"div",79),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",null==e.controls||null==e.controls.emptyAnswer?null:e.controls.emptyAnswer.value)}}function bx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ma_de")," "))}function yx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_ma_de_phai_la_so_tu_1"),"",t.lcZ(3,4,"lang_auto_-999_va_toi_da_3_ky_tu")," "))}function wx(n,a){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,bx,3,3,"span",57),t.YNc(2,yx,4,6,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.codeExam.errors.required),t.xp6(1),t.Q6J("ngIf",e.controls.codeExam.errors.min||e.controls.codeExam.errors.max||e.controls.codeExam.errors.maxlength)}}function kx(n,a){1&n&&(t.TgZ(0,"div",17)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_khong_nhap_trung_ma_de")," "))}function Cx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).index,s=t.oxw(3);return t.KtG(s.removeItemCodeExam(o))}),t.TgZ(1,"span",29),t._UZ(2,"lucide-icon",83),t.qZA()()}}function Tx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_khong_qua_120_cau")," "))}function Ax(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Sx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_hoi")," "))}function Ox(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,Tx,3,3,"span",57),t.YNc(2,Ax,3,3,"span",57),t.YNc(3,Sx,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.max),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.min),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.errors.required)}}function Ex(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_diem_trac_nghiem")," "))}function Mx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function Ix(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,Ex,3,3,"span",57),t.YNc(2,Mx,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionMultiple.errors.required),t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionMultiple.errors.min)}}function Lx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")," "))}function Zx(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan")," "))}function Px(n,a){if(1&n&&(t.TgZ(0,"div",56),t.YNc(1,Lx,3,3,"span",57),t.YNc(2,Zx,3,3,"span",57),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionEssay.errors.max),t.xp6(1),t.Q6J("ngIf",e.controls.scoreQuestionEssay.errors.required)}}function Nx(n,a){1&n&&(t.TgZ(0,"div",56)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_core_enter_essay_score_greater_than_zero")," "))}function Dx(n,a){1&n&&(t.TgZ(0,"div",58)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_core_missing_essay_question")," "))}function jx(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3).index,l=t.oxw().index,c=t.oxw(2),u=c.index,d=c.$implicit,m=t.oxw(3);return t.KtG(m.chooseAnswerQuestion(u,r+l*d.controls.colTotalItem.value,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("disabled",!0)("ngStyle",t.VKq(6,$s,"TL"!=e?"35px":"80px"))("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ","TL"!=e?e:t.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function qx(n,a){if(1&n&&(t.ynx(0),t.YNc(1,jx,4,8,"ng-container",66),t.BQk()),2&n){const e=t.oxw(8);t.xp6(1),t.Q6J("ngForOf",e.configAnswerData)}}function Fx(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",67),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3).index,l=t.oxw().index,c=t.oxw(2),u=c.index,d=c.$implicit,m=t.oxw(3);return t.KtG(m.chooseAnswerQuestion(u,r+l*d.controls.colTotalItem.value,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("disabled","TL"===e)("ngStyle",t.VKq(6,$s,"TL"!=e?"35px":"80px"))("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ","TL"!=e?e:t.lcZ(3,4,"lang_offline_question_type_essay")," ")}}function Qx(n,a){if(1&n&&t.YNc(0,Fx,4,8,"ng-container",66),2&n){const e=t.oxw(8);t.Q6J("ngForOf",e.configAnswerData)}}function Ux(n,a){if(1&n&&(t.ynx(0),t.YNc(1,qx,2,1,"ng-container",5),t.YNc(2,Qx,1,1,"ng-template",null,65,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i.controls.isEssay.value)("ngIfElse",e)}}function Bx(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",85),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw().index,c=t.oxw(2),u=c.index,d=c.$implicit,m=t.oxw(3);return t.KtG(m.chooseAnswerQuestion(u,r+l*d.controls.colTotalItem.value,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngStyle",t.VKq(5,$s,"TL"!=e?"35px":"80px"))("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ","TL"!=e?e:t.lcZ(3,3,"lang_offline_question_type_essay")," ")}}function Rx(n,a){if(1&n&&t.YNc(0,Bx,4,7,"ng-container",66),2&n){const e=t.oxw(7);t.Q6J("ngForOf",e.configAnswerData)}}function zx(n,a){if(1&n&&(t.TgZ(0,"div",61)(1,"div",62)(2,"div",63)(3,"div",64),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA()(),t.YNc(7,Ux,4,2,"ng-container",5),t.YNc(8,Rx,1,1,"ng-template",null,84,t.W1O),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(9),s=t.oxw().index,r=t.oxw(2).$implicit,l=t.oxw(3);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.AsE(" ",t.lcZ(5,5,"lang_auto_cau")+" "+(i+1+s*r.controls.colTotalItem.value)+" "," ","("+e.value.point+" "+t.lcZ(6,7,"lang_auto_diem")+")"," "),t.xp6(3),t.Q6J("ngIf",l.type===l.typeScreenCreateExamOffline.add&&(null==r||null==r.controls||null==r.controls.isUpdate?null:r.controls.isUpdate.value))("ngIfElse",o)}}function Jx(n,a){if(1&n&&(t.TgZ(0,"div",59),t.YNc(1,zx,10,9,"div",60),t.qZA()),2&n){const e=a.index,i=t.oxw(2).$implicit;let o;t.xp6(1),t.Q6J("ngForOf",null==(o=i.get("answerList"))?null:o.controls.slice(e*i.controls.colTotalItem.value,e*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function Hx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",72),t.YNc(1,vx,2,1,"div",73),t.TgZ(2,"div",36)(3,"div",74)(4,"div",38)(5,"h3",39)(6,"span",75),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"input",76),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.checkDuplicateCode(o))}),t.ALo(10,"mytranslate"),t.qZA()(),t.YNc(11,wx,3,2,"div",16),t.YNc(12,kx,4,3,"div",16),t.ALo(13,"numberFloat"),t.qZA(),t.TgZ(14,"div",39),t.YNc(15,Cx,3,0,"button",77),t.qZA()(),t.TgZ(16,"div",41)(17,"div",42)(18,"div",13)(19,"div",12)(20,"div",13)(21,"label",43),t._uU(22),t.ALo(23,"mytranslate"),t.ALo(24,"mytranslate"),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",13)(27,"input",44),t.NdJ("input",function(){t.CHM(e);const o=t.oxw(),s=o.$implicit,r=o.index,l=t.oxw(3);return t.KtG(l.updateCountQuestion(s,r))}),t.ALo(28,"mytranslate"),t.qZA(),t.YNc(29,Ox,4,3,"div",45),t.qZA()()()(),t.TgZ(30,"div",46)(31,"div",47)(32,"div",12)(33,"div",13)(34,"label",48),t._uU(35),t.ALo(36,"mytranslate"),t.qZA()(),t.TgZ(37,"div",13)(38,"input",49),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.updateScoreQuestion(o))}),t.ALo(39,"mytranslate"),t.qZA(),t.YNc(40,Ix,3,2,"div",45),t.qZA()()(),t.TgZ(41,"div",47)(42,"div",12)(43,"div",13)(44,"label",50),t._uU(45),t.ALo(46,"mytranslate"),t.qZA()(),t.TgZ(47,"div",13)(48,"input",51),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.updateScoreQuestion(o))}),t.ALo(49,"mytranslate"),t.qZA(),t.YNc(50,Px,3,2,"div",45),t.YNc(51,Nx,4,3,"div",45),t.YNc(52,Dx,4,3,"div",52),t.qZA()()()()(),t.TgZ(53,"div",41)(54,"div",53)(55,"h3",54),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.TgZ(58,"div",12),t.YNc(59,Jx,2,1,"div",55),t.qZA()()()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);let o,s;t.Q6J("formGroup",e),t.xp6(1),t.Q6J("ngIf",e.invalid),t.xp6(6),t.hij(" ",t.lcZ(8,27,"lang_auto_ma_de")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(10,29,"lang_auto_nhap_ma_de")+"..."),t.Q6J("readonly",i.type===i.typeScreenCreateExamOffline.add&&(null==e||null==e.controls||null==e.controls.isUpdate?null:e.controls.isUpdate.value))("maxlength",3),t.xp6(2),t.Q6J("ngIf",e.controls.codeExam.errors&&(e.controls.codeExam.touched||e.controls.codeExam.dirty)),t.xp6(1),t.Q6J("ngIf",e.controls.checkDuplicateError.value&&i.codeExamDuplicateList.includes(t.lcZ(13,31,e.controls.codeExam.value))),t.xp6(3),t.Q6J("ngIf",!(i.type===i.typeScreenCreateExamOffline.add&&null!=e&&null!=e.controls&&null!=e.controls.isUpdate&&e.controls.isUpdate.value)),t.xp6(7),t.lnq(" ",t.lcZ(23,33,"lang_core_total_question")," ","("+t.lcZ(24,35,"lang_core_count_multiple_question")+": "+e.controls.totalQuestionMultiple.value+", "," ",t.lcZ(25,37,"lang_core_count_essay_question")+": "+e.controls.totalQuestionEssay.value+") "," "),t.xp6(5),t.s9C("placeholder",t.lcZ(28,39,"lang_auto_nhap_so_cau")+" ..."),t.Q6J("readonly",i.type===i.typeScreenCreateExamOffline.add&&(null==e||null==e.controls||null==e.controls.isUpdate?null:e.controls.isUpdate.value)),t.xp6(2),t.Q6J("ngIf",(e.controls.totalQuestion.dirty||e.controls.totalQuestion.touched)&&e.controls.totalQuestion.errors),t.xp6(6),t.hij(" ",t.lcZ(36,41,"lang_auto_tong_diem_trac_nghiem")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(39,43,"lang_auto_nhap_so_diem")+" ..."),t.Q6J("decimal",!0),t.xp6(2),t.Q6J("ngIf",(e.controls.scoreQuestionMultiple.dirty||e.controls.scoreQuestionMultiple.touched)&&e.controls.scoreQuestionMultiple.errors||i.type===i.typeScreenCreateExamOffline.excel&&e.controls.scoreQuestionMultiple.errors),t.xp6(5),t.hij(" ",t.lcZ(46,45,"lang_auto_tong_diem_tu_luan")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(49,47,"lang_auto_nhap_so_diem")+" ..."),t.Q6J("decimal",!0),t.xp6(2),t.Q6J("ngIf",(e.controls.scoreQuestionEssay.dirty||e.controls.scoreQuestionEssay.touched)&&e.controls.scoreQuestionEssay.errors||i.type===i.typeScreenCreateExamOffline.excel&&e.controls.scoreQuestionEssay.errors),t.xp6(1),t.Q6J("ngIf",0==e.controls.scoreQuestionEssay.value&&0!=e.controls.totalQuestionEssay.value&&!e.controls.scoreQuestionEssay.errors),t.xp6(1),t.Q6J("ngIf",0==e.controls.totalQuestionEssay.value&&0!=e.controls.scoreQuestionEssay.value&&!e.controls.scoreQuestionEssay.errors),t.xp6(4),t.Oqu(t.lcZ(57,49,"lang_auto_bang_dap_an")),t.xp6(3),t.Q6J("ngForOf",null==(o=e.get("answerList"))?null:o.controls.slice(0,(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value%1==0?(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value:(null==(s=e.get("answerList"))?null:s.controls.length)/e.controls.colTotalItem.value+1))}}function $x(n,a){if(1&n&&(t.TgZ(0,"mat-tab",33),t.YNc(1,mx,4,8,"ng-template",69),t.YNc(2,Hx,60,51,"div",70),t.qZA()),2&n){const e=a.index,i=t.oxw(3);t.xp6(2),t.Q6J("ngIf",i.selected.value===e)}}function Kx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab-group",68),t.NdJ("selectedIndexChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selected.setValue(o))}),t.YNc(1,$x,3,1,"mat-tab",32),t.qZA()}if(2&n){const e=t.oxw(2);let i;t.Q6J("selectedIndex",e.selected.value),t.xp6(1),t.Q6J("ngForOf",null==(i=e.form.get("codeExamList"))?null:i.controls)}}const Yx=function(n,a){return{"mt-3":n,"mt-10":a}},Gx=function(n){return{"px-4 py-4":n}};function Wx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"form",3),t.YNc(3,F1,9,7,"div",4),t.YNc(4,U1,2,1,"ng-container",5),t.YNc(5,R1,1,1,"ng-template",null,6,t.W1O),t.YNc(7,z1,11,6,"div",7),t.YNc(8,dx,2,1,"ng-container",5),t.YNc(9,Kx,2,2,"ng-template",null,8,t.W1O),t.qZA()(),t.TgZ(11,"div",9)(12,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.resetCreateExam())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSaveQuestionAndExam())}),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.qZA()()()}if(2&n){const e=t.MAs(6),i=t.MAs(10),o=t.oxw();let s;t.Q6J("ngClass",t.WLB(18,Yx,!o.isMobileWebView,o.isMobileWebView)),t.xp6(1),t.Q6J("ngClass",t.VKq(21,Gx,o.type!==o.typeScreenCreateExamOffline.edit)),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("ngIf",o.type!==o.typeScreenCreateExamOffline.edit),t.xp6(1),t.Q6J("ngIf",o.loadingSubjectLevel)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",o.type!==o.typeScreenCreateExamOffline.edit),t.xp6(1),t.Q6J("ngIf",o.type===o.typeScreenCreateExamOffline.edit)("ngIfElse",i),t.xp6(5),t.hij(" ",t.lcZ(14,12,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",o.form.invalid||!o.form.controls.schoolSubject.value||!o.form.controls.schoolLevel.value||0===(null==(s=o.form.get("codeExamList"))?null:s.controls.length)),t.xp6(1),t.hij(" ",o.type===o.typeScreenCreateExamOffline.edit||o.type===o.typeScreenCreateExamOffline.add?t.lcZ(17,14,"lang_auto_cap_nhat"):t.lcZ(18,16,"lang_auto_luu")," ")}}const Aa="TL";let fl=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.documentConfigService=e,this.dialog=i,this.formBuilder=o,this.activeRoute=s,this.type=Hi.create,this.handleSaveData=new t.vpe,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.codeExamDuplicateList=[],this.oldAnswerList=[],this.configAnswerData=["A","B","C","D",Aa],this.typeScreenCreateExamOffline=Hi,this.selected=new h.p4(0),this.loadingSubjectLevel=!1,this.infoCodeExamLast={totalQuestion:10,totalQuestionMultiple:10,scoreQuestionMultiple:10,totalQuestionEssay:0,scoreQuestionEssay:0}}getGradeAndSubjectObj(){this.loadingSubjectLevel=!0,this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var i,o,s,r,l,c,u,d,m,p,b,y;if(1==e.success){this.schoolLevelObjs=null!==(o=null===(i=e.data)||void 0===i?void 0:i.schoolLevelObjs)&&void 0!==o?o:[],this.schoolSubjectObjs=null!==(r=null===(s=e.data)||void 0===s?void 0:s.schoolSubjectObjs)&&void 0!==r?r:[];let C=null!==(u=null===(c=null===(l=e.data)||void 0===l?void 0:l.examSchoolLogObj)||void 0===c?void 0:c.lastSchoolLevelId)&&void 0!==u?u:null,I=null!==(p=null===(m=null===(d=e.data)||void 0===d?void 0:d.examSchoolLogObj)||void 0===m?void 0:m.lastSchoolSubjectId)&&void 0!==p?p:null;null===(b=this.form)||void 0===b||b.patchValue({schoolLevel:C??0,schoolSubject:I??0}),this.successStatusObj()}else this.errorStatusObj(null!==(y=e.message)&&void 0!==y?y:"");this.loadingSubjectLevel=!1}))}checkDuplicateCode(e){var i;let s=(null===(i=this.form)||void 0===i?void 0:i.get("codeExamList")).controls.map(l=>Number(l.controls.codeExam.value)?Number(l.controls.codeExam.value):"");s=s.filter(l=>""!==l);let r=s.some((l,c)=>s.indexOf(l)!=c);this.codeExamDuplicateList=s.filter((l,c)=>s.indexOf(l)!==c),e.controls.checkDuplicateError.setValue(r)}chooseAnswerQuestion(e,i,o){var s;const l=(null===(s=this.form)||void 0===s?void 0:s.get("codeExamList")).controls[e],c=l.get("answerList");c.controls[i].controls.answer.setValue(o),c.controls[i].controls.isEssay.setValue(o==Aa),this.oldAnswerList[e]=c.value,this.getTypeQuestionCodeExam(l),this.getEmptyAnswerCodeExam(l),this.fillPointInAnswerList(l),this.getInfoCodeExamLast()}addItemCodeExam(){var e;const i=null===(e=this.form)||void 0===e?void 0:e.get("codeExamList");i.push(this.createItemCodeExam()),this.createAnswerList(i.controls.length-1),this.selected.setValue(i.controls.length-1)}createItemCodeExam(){return this.formBuilder.group({codeExam:new h.p4("",[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3),Ri._.noWhiteSpace]),totalQuestion:new h.p4(10,[h.kI.required,h.kI.min(1),h.kI.max(120)]),totalQuestionMultiple:new h.p4(10),scoreQuestionMultiple:new h.p4(10,[h.kI.required,h.kI.min(1e-8)]),totalQuestionEssay:new h.p4(0),scoreQuestionEssay:new h.p4(0,[h.kI.required,h.kI.max(9.99)]),colTotalItem:new h.p4(3),answerList:this.formBuilder.array([]),emptyAnswer:new h.p4("emptyAll"),checkDuplicateError:new h.p4(!1)})}createAnswerList(e){if(!this.form)return;const i=this.form.get("codeExamList"),o=i.controls[e];o.controls.totalQuestion.setValue(this.infoCodeExamLast.totalQuestion),o.controls.totalQuestionMultiple.setValue(this.infoCodeExamLast.totalQuestionMultiple),o.controls.totalQuestionEssay.setValue(this.infoCodeExamLast.totalQuestionEssay),o.controls.scoreQuestionMultiple.setValue(this.infoCodeExamLast.scoreQuestionMultiple),o.controls.scoreQuestionEssay.setValue(this.infoCodeExamLast.scoreQuestionEssay);const s=Number(o.controls.totalQuestion.value),r=i.controls[i.length-1].get("answerList");if(s<=120){o.controls.colTotalItem.setValue(Math.ceil(s/3));for(let c=0;c<s;c++)r.push(this.createItemAnswer(!1));let l=this.oldAnswerList.length-1;if(this.oldAnswerList.length&&this.oldAnswerList[l]){let c=this.oldAnswerList[l].length;for(let u=0;u<c;u++){let d={isEssay:this.oldAnswerList[l][u].isEssay,answer:this.oldAnswerList[l][u].answer,point:this.oldAnswerList[l][u].point};r.value[u]=d,r.controls[u]&&this.oldAnswerList[l][u].isEssay&&r.controls[u].setValue(d)}}this.fillPointInAnswerList(o)}}createItemAnswer(e){return this.formBuilder.group({answer:new h.p4(e?"TL":"",[h.kI.required]),point:new h.p4(0,[h.kI.required]),isEssay:new h.p4(e)})}updateScoreQuestion(e){this.getInfoCodeExamLast(),this.fillPointInAnswerList(e)}updateCountQuestion(e,i){var o,s,r,l,c,u;const d=e.controls.answerList,m=Number(e.controls.totalQuestion.value);if(this.resetAnswerList(d),m<=120){e.controls.colTotalItem.setValue(Math.ceil(m/3));for(let p=0;p<m;p++)d.push(this.createItemAnswer(!1));if(this.oldAnswerList.length&&this.oldAnswerList[i]){let p=null!==(s=null===(o=this.oldAnswerList)||void 0===o?void 0:o[i].length)&&void 0!==s?s:0;for(let b=0;b<p;b++)d.value[b]=null!==(l=null===(r=this.oldAnswerList)||void 0===r?void 0:r[i][b])&&void 0!==l?l:"",d.controls[b]&&d.controls[b].setValue(null!==(u=null===(c=this.oldAnswerList)||void 0===c?void 0:c[i][b])&&void 0!==u?u:"")}this.getTypeQuestionCodeExam(e),this.getEmptyAnswerCodeExam(e),this.fillPointInAnswerList(e),this.getInfoCodeExamLast()}}resetAnswerList(e){for(;0!==e.length;)e.removeAt(0)}resetCreateExam(){var e;let i=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","480px",()=>{var o;const s=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:`/admin/testbank/create-new-document/${i}`;this.myNavigation(s)})}removeItemCodeExam(e){var i;const o=null===(i=this.form)||void 0===i?void 0:i.get("codeExamList");let s=o.controls[e],r=`${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_so_ma_de")} <b>${s.controls.codeExam.value}</b>`;this.dialog.open(j1,{data:{content:r},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(c=>{c&&(o.removeAt(e),this.oldAnswerList.splice(e,1),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}deleteAnswerQuestion(e,i){var o;const s=null===(o=this.form)||void 0===o?void 0:o.get("codeExamList"),r=s.controls[i],l=s.controls[e].get("answerList");l.removeAt(i),s.controls[e].get("totalQuestionMultiple").setValue(l.controls.length),this.fillPointInAnswerList(r)}confirmDialog(e,i,o,s){this.dialog.open(Ke.DU,{width:o,data:{title:e,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&s()})}handleSaveQuestionAndExam(){var e;if(null!==(e=this.form)&&void 0!==e&&e.invalid)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");let i=this.processDataQuestion(),o=[],s=!1;if(i.length&&i.forEach(r=>{let l=!0;r.offlineQuestionObjs.forEach(c=>{if(0==c.scorePerQuestion){let u=this.commonService.myTranslateInstant("lang_core_score_per_question_greater_than_zero")+": "+r.offlineMixQuestionHashId;return this.showErrorSnack(u),void(s=!0)}c.answer!==Aa&&(l=!1)}),l&&o.push(r.offlineMixQuestionHashId)}),o.length>0){let c=`${this.commonService.myTranslateInstant("lang_core_exam_require_mcq")} (${this.commonService.myTranslateInstant("lang_auto_ma_de")}: ${o.join(", ")})`;this.showErrorSnack(c)}else!s&&0===o.length&&this.handleSaveData.emit(i)}processDataQuestion(){var e;let i=[];return(null===(e=this.form)||void 0===e?void 0:e.get("codeExamList")).controls.forEach(s=>{var r,l,c,u,d,m;const p=s;let b={offlineMixQuestionHashId:Number(p.controls.codeExam.value),offlineQuestionObjs:[],isUpdate:null!==(c=null===(l=null===(r=p.controls)||void 0===r?void 0:r.isUpdate)||void 0===l?void 0:l.value)&&void 0!==c?c:void 0,offlineMixQuestionId:null!==(m=null===(d=null===(u=p.controls)||void 0===u?void 0:u.offlineMixQuestionId)||void 0===d?void 0:d.value)&&void 0!==m?m:void 0};b.offlineMixQuestionHashId=Number(p.controls.codeExam.value);let y=[];p.get("answerList").controls.forEach((I,D)=>{var U,B,q;let et={questionId:null!==(q=null===(B=null===(U=I?.controls)||void 0===U?void 0:U.questionId)||void 0===B?void 0:B.value)&&void 0!==q?q:void 0,answer:I.controls.answer.value,scorePerQuestion:I.controls.point.value,isEssay:I.controls.answer.value===Aa};y.push(et)}),b.offlineQuestionObjs=y,i.push(b)}),i}processDataExamOffline(){var e;if(!this.form||!this.dataExamOffline)return;const i=this.form.get("codeExamList");this.form.controls.nameExam.setValue(this.dataExamOffline.name),null===(e=this.dataExamOffline.updateOfflineMixQuestionObjs)||void 0===e||e.forEach((o,s)=>{var r,l;if(i.push(this.formBuilder.group({codeExam:new h.p4(o.offlineMixQuestionHashId,[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3)]),totalQuestion:new h.p4(0,[h.kI.required,h.kI.min(1),h.kI.max(120)]),totalQuestionMultiple:new h.p4(0),scoreQuestionMultiple:new h.p4(0,[h.kI.required,h.kI.min(.01)]),totalQuestionEssay:new h.p4(0),scoreQuestionEssay:new h.p4(0,[h.kI.required,h.kI.max(9.99)]),colTotalItem:new h.p4(3),answerList:this.formBuilder.array([]),isUpdate:new h.p4(!0),offlineMixQuestionId:new h.p4(o.offlineMixQuestionId),emptyAnswer:new h.p4("success"),checkDuplicateError:new h.p4(!1)})),o.offlineQuestionObjs&&o.offlineQuestionObjs.length){let c=this.formBuilder.array([]),u=i.controls[s],d=null===(r=o.offlineQuestionObjs)||void 0===r?void 0:r.length,m=0,p=0,b=0,y=0;u.controls.colTotalItem.setValue(Math.ceil(d/3)),u.controls.totalQuestion.setValue(d),this.infoCodeExamLast.totalQuestion=d,null===(l=o.offlineQuestionObjs)||void 0===l||l.forEach((D,U)=>{D.isEssay?(m+=1,p+=Number(D.scorePerQuestion)):(b+=1,y+=Number(D.scorePerQuestion)),c.push(this.formBuilder.group({questionId:new h.p4(D.questionId),answer:new h.p4(D.isEssay?Aa:D.answer,[h.kI.required]),point:new h.p4(D.scorePerQuestion,[h.kI.required]),isEssay:new h.p4(D.isEssay)}))});let C=Math.round(100*y)/100,I=Math.round(100*p)/100;c.controls.forEach((D,U)=>{u.controls.answerList.push(D)}),u.controls.totalQuestionMultiple.setValue(b),u.controls.scoreQuestionMultiple.setValue(C),this.infoCodeExamLast.totalQuestionMultiple=b,this.infoCodeExamLast.scoreQuestionMultiple=y,u.controls.totalQuestionEssay.setValue(m),u.controls.scoreQuestionEssay.setValue(I),this.infoCodeExamLast.totalQuestionEssay=m,this.infoCodeExamLast.scoreQuestionEssay=p}}),i.controls.forEach((o,s)=>{const r=o;this.getTypeQuestionCodeExam(r),this.oldAnswerList[s]=r.controls.answerList.value})}processDataOfflineExamByExcel(){var e;if(!this.form||!this.dataExamOfflineByExcel)return;const i=this.form.get("codeExamList");null===(e=this.dataExamOfflineByExcel.excelOfflineMixQuestionObjs)||void 0===e||e.forEach((o,s)=>{var r,l;if(i.push(this.formBuilder.group({codeExam:new h.p4(o.offlineMixQuestionHashId,[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3)]),totalQuestion:new h.p4(0,[h.kI.required,h.kI.min(1),h.kI.max(120)]),totalQuestionMultiple:new h.p4(0),scoreQuestionMultiple:new h.p4(0,[h.kI.required,h.kI.min(.01)]),totalQuestionEssay:new h.p4(0),scoreQuestionEssay:new h.p4(0,[h.kI.required,h.kI.max(9.99)]),colTotalItem:new h.p4(3),answerList:this.formBuilder.array([]),emptyAnswer:new h.p4("success"),checkDuplicateError:new h.p4(!1)})),o.excelOfflineQuestionObjs&&o.excelOfflineQuestionObjs.length){let c=this.formBuilder.array([]),u=i.controls[s],d=null===(r=o.excelOfflineQuestionObjs)||void 0===r?void 0:r.length,m=0,p=0,b=0,y=0;u.controls.colTotalItem.setValue(Math.ceil(d/3)),u.controls.totalQuestion.setValue(d),this.infoCodeExamLast.totalQuestion=d,null===(l=o.excelOfflineQuestionObjs)||void 0===l||l.forEach(D=>{var U,B,q;D.scorePerQuestion=null!==(U=D.scorePerQuestion)&&void 0!==U?U:(null===(B=this.form)||void 0===B?void 0:B.controls.scoreQuestionMultiple.value)/(null===(q=this.form)||void 0===q?void 0:q.controls.totalQuestionMultiple.value),D.isEssay?(m+=1,p+=Number(D.scorePerQuestion)):(b+=1,y+=Number(D.scorePerQuestion)),c.push(this.formBuilder.group({answer:new h.p4(D.isEssay?Aa:D.answer,[h.kI.required]),point:new h.p4(D.scorePerQuestion,[h.kI.required]),isEssay:new h.p4(D.isEssay)}))});let C=Math.round(100*y)/100,I=Math.round(100*p)/100;c.controls.forEach((D,U)=>{u.controls.answerList.push(D)}),u.controls.totalQuestionMultiple.setValue(b),u.controls.scoreQuestionMultiple.setValue(C),this.infoCodeExamLast.totalQuestionMultiple=b,this.infoCodeExamLast.scoreQuestionMultiple=y,u.controls.totalQuestionEssay.setValue(m),u.controls.scoreQuestionEssay.setValue(I),this.infoCodeExamLast.totalQuestionEssay=m,this.infoCodeExamLast.scoreQuestionEssay=p}}),i.controls.forEach((o,s)=>{const r=o;this.getEmptyAnswerCodeExam(r),this.oldAnswerList[s]=r.controls.answerList.value})}getInfoCodeExamLast(){if(!this.form)return;const e=this.form.get("codeExamList"),i=e.controls[e.controls.length-1];this.infoCodeExamLast={totalQuestion:Number(i.controls.totalQuestion.value),totalQuestionMultiple:Number(i.controls.totalQuestionMultiple.value),totalQuestionEssay:Number(i.controls.totalQuestionEssay.value),scoreQuestionMultiple:Number(i.controls.scoreQuestionMultiple.value),scoreQuestionEssay:Number(i.controls.scoreQuestionEssay.value)}}fillPointInAnswerList(e){let i=Number(e.controls.totalQuestionEssay.value),o=Number(e.controls.totalQuestionMultiple.value);const s=e.controls.answerList;let r=e.controls.scoreQuestionEssay.value/i,l=e.controls.scoreQuestionMultiple.value/o;l=this.commonService.parseNumberFixed(l,8),r=this.commonService.parseNumberFixed(r,8),s.controls.forEach(c=>{const u=c;u.controls.isEssay.value?void 0!==r&&u.controls.point.setValue(r):void 0!==l&&u.controls.point.setValue(l)})}getTypeQuestionCodeExam(e){e.controls.totalQuestionMultiple.setValue(0),e.controls.totalQuestionEssay.setValue(0);let i=0,o=0;e.get("answerList").controls.forEach(r=>{r.controls.answer.value===Aa?i++:o++}),e.controls.totalQuestionEssay.setValue(i),e.controls.totalQuestionMultiple.setValue(o)}getEmptyAnswerCodeExam(e){e.controls.emptyAnswer.setValue("");const i=e.get("answerList");let o=[];if(i.controls.forEach((s,r)=>{""===s.controls.answer.value&&o.push(r+1)}),0===o.length)e.controls.emptyAnswer.setValue("success");else{let s=o.join(", ");e.controls.emptyAnswer.setValue(s)}}ngOnInit(){switch(super.ngOnInit(),this.type){case Hi.create:this.addItemCodeExam();break;case Hi.edit:this.processDataExamOffline();break;case Hi.excel:this.processDataOfflineExamByExcel();break;case Hi.add:this.processDataExamOffline()}this.getGradeAndSubjectObj()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.Cq),t.Y36(z.uw),t.Y36(h.QS),t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ui-create-offline-exam"]],inputs:{form:"form",type:"type",dataExamOffline:"dataExamOffline",dataExamOfflineByExcel:"dataExamOfflineByExcel"},outputs:{handleSaveData:"handleSaveData"},features:[t.qOj],decls:1,vars:1,consts:[["class","box",3,"ngClass",4,"ngIf"],[1,"box",3,"ngClass"],[1,"border-b","border-slate-200","dark:border-darkmode-400",3,"ngClass"],[3,"formGroup"],["class","grid grid-cols-12",4,"ngIf"],[4,"ngIf","ngIfElse"],["doneLoadingSubjectLevel",""],["class","mt-5 mb-3 flex items-center",4,"ngIf"],["createTemplate",""],[1,"p-3","text-right"],["azt-track-service","create-exam-by-hand-tlbe3XqUg",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-exam-by-hand-VV_VzsR7QrJ",1,"btn","btn-primary","w-24",3,"disabled","click"],[1,"grid","grid-cols-12"],[1,"col-span-12"],["for","document-name",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","document-name","formControlName","nameExam","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],[1,"mt-2","text-xs","font-medium","text-danger"],["class","mt-4 flex items-center","style","height: 66px",4,"ngIf"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[3,"type"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],[1,"mt-5","mb-3","flex","items-center"],[1,"font-medium","text-lg","mr-auto"],[1,"ml-2"],["azt-track-service","create-exam-by-hand-5qKruBeS5Vi",1,"btn","btn-success","text-white",3,"click"],[1,"w-4","h-4","inline-block"],["name","plus"],[1,"text-white"],["formArrayName","codeExamList","class","tab-title",4,"ngFor","ngForOf"],["formArrayName","codeExamList",1,"tab-title"],["class","mt-5",3,"formGroup",4,"ngIf"],[1,"mt-5",3,"formGroup"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex","items-center"],[1,"font-medium"],[1,"p-3"],[1,"grid","grid-cols-12","gap-5"],["for","quesion-multiple-count",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-multiple-count","appOnlyNumber","","formControlName","totalQuestion","type","text",1,"form-control",3,"readonly","placeholder","input"],["class","text-xs font-medium text-danger mt-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-5","mt-3"],[1,"col-span-12","md:col-span-6"],["for","quesion-multiple-score",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-multiple-score","appOnlyNumber","","formControlName","scoreQuestionMultiple","type","text",1,"form-control",3,"decimal","placeholder","input"],["for","quesion-essay-score",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","quesion-essay-score","appOnlyNumber","","formControlName","scoreQuestionEssay","type","text",1,"form-control",3,"decimal","placeholder","input"],["class","text-xs font-medium text-pending mt-2",4,"ngIf"],[1,"mt-0"],[1,"text-md","font-medium"],["class","col-span-12 lg:col-span-4","formArrayName","answerList",4,"ngFor","ngForOf"],[1,"text-xs","font-medium","text-danger","mt-2"],[4,"ngIf"],[1,"text-xs","font-medium","text-pending","mt-2"],["formArrayName","answerList",1,"col-span-12","lg:col-span-4"],["class","app-item mt-2",4,"ngFor","ngForOf"],[1,"app-item","mt-2"],[1,"answer-item","mb-6","mt-1",3,"formGroup"],[1,"flex","items-center","mb-2"],[1,"block-title","mr-2"],["isMultiple",""],[4,"ngFor","ngForOf"],["azt-track-service","create-exam-by-hand-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px",3,"disabled","ngStyle","ngClass","click"],[3,"selectedIndex","selectedIndexChange"],["mat-tab-label",""],["class","mt-3",3,"formGroup",4,"ngIf"],[3,"ngClass"],[1,"mt-3",3,"formGroup"],["class","error-code-exam mt-2 mb-3",4,"ngIf"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"hidden","sm:block"],["type","text","appOnlyNumber","","formControlName","codeExam",1,"form-control","form-control-sm","w-20","sm:ml-2",2,"width","7rem","text-align","center",3,"readonly","maxlength","placeholder","input"],["azt-track-service","create-exam-by-hand-ZLcxiYuHZw9","class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"error-code-exam","mt-2","mb-3"],["class","text-xs font-medium text-danger",4,"ngIf"],[1,"text-xs","font-medium","text-danger"],["showIndexQuestion",""],["azt-track-service","create-exam-by-hand-ZLcxiYuHZw9",1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2"],["createView",""],["azt-track-service","create-exam-by-hand-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px",3,"ngStyle","ngClass","click"]],template:function(e,i){1&e&&t.YNc(0,Wx,19,23,"div",0),2&e&&t.Q6J("ngIf",i.form)},dependencies:[E.mk,E.sg,E.O5,E.PC,Ta.uD,Ta.uX,Ta.SP,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,h.CE,Bo.Y,Pe.M,rs.J,f.Nh5,rl,_t.bT,_t.Hb,_t.q7],encapsulation:2}),n})();var Hi=(()=>{return(n=Hi||(Hi={}))[n.create=0]="create",n[n.edit=1]="edit",n[n.excel=2]="excel",n[n.add=3]="add",Hi;var n})(),L_=A(20923);function Vx(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Xx(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"ui-create-offline-exam",5),t.NdJ("handleSaveData",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handleUpdateQuestionAndExam(o))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_core_update_exam_offline")," "),t.xp6(2),t.Q6J("form",e.form)("type",e.type)("dataExamOffline",e.dataExamOffline)}}let tv=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.httpClient=e,this.formBuilder=i,this.activeRoute=o,this.offlineExamMixQuestionV2Service=s,this.offlineExamCreatorV2Service=r,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.form=new h.nJ({}),this.backToLink="",this.prevData="",this.type=Hi.add,this.form=i.group({nameExam:new h.p4("",[h.kI.required,Ri._.noWhiteSpace]),codeExamList:i.array([]),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])})}handleUpdateQuestionAndExam(e){var i;let o=[],s=[],r=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"";e.forEach((c,u)=>{c.isUpdate?o.push({offlineMixQuestionId:c.offlineMixQuestionId,offlineQuestionObjs:c.offlineQuestionObjs}):s.push({offlineMixQuestionHashId:c.offlineMixQuestionHashId,offlineQuestionObjs:c.offlineQuestionObjs})}),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,updateOfflineMixQuestionObjs:o,addOfflineMixQuestionObjs:s}).subscribe(c=>{var u,d;if(1===c.success){this.successStatusObj(),this.showSuccessSnack("c\u1eadp nh\u1eadt \u0111\u1ec1 thi th\xe0nh c\xf4ng");const m=null!==(u=this.getMyQueryParam("backto"))&&void 0!==u?u:"admin/testbank/document-management/0/0/1";this.myNavigation(m)}else this.errorStatusObj(null!==(d=c.message)&&void 0!==d?d:"",!0)}))}getData(){var e;this.initStatusObj();let i=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateGet(i).subscribe(o=>{var s,r,l;if(1===o.success){const c=null===(s=o.data)||void 0===s?void 0:s.updateOfflineExamRequest;c&&(this.dataExamOffline.updateOfflineMixQuestionObjs=null!==(r=c.updateOfflineMixQuestionObjs)&&void 0!==r?r:[],this.dataExamOffline.schoolLevelId=c.schoolLevelId,this.dataExamOffline.examHashId=i,this.dataExamOffline.schoolSubjectId=c.schoolSubjectId,this.dataExamOffline.name=c.name),this.successStatusObj()}else this.errorStatusObj(null!==(l=o.message)&&void 0!==l?l:"",!0)}))}ngOnInit(){var e,i;super.ngOnInit();let o=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:`/admin/testbank/create-new-document/${o}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline",description:"lang_core_update_exam_offline",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(s=>{let r=JSON.stringify(s);r!=this.prevData&&(this.prevData=r,this.form.patchValue(s))}),this.getData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K.eN),t.Y36(h.QS),t.Y36(w.gz),t.Y36(Bt.Sr),t.Y36(L_.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-code-exam-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Vx,1,0,"azt-loading-effect",1),t.YNc(2,Xx,5,6,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,Xe._,fl,_t.bT],encapsulation:2}),n})();var xl=A(51176);function nv(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=a.$implicit,i=a.index;t.xp6(1),t.hij(" ",e.numQuest>0?(0==i?"":", ")+e.name+"("+e.numQuest+")":""," ")}}function iv(n,a){if(1&n&&(t.TgZ(0,"li",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e)}}function ov(n,a){if(1&n&&(t.ynx(0),t.YNc(1,iv,2,1,"li",12),t.BQk()),2&n){const e=a.index;t.xp6(1),t.Q6J("ngIf",e<=2)}}function av(n,a){1&n&&(t.TgZ(0,"div",14),t._uU(1," ... "),t.qZA())}function sv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.clickToMatrix(s.id))}),t.TgZ(2,"div",4)(3,"h2",5,6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",7)(8,"h2",8)(9,"b"),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"div",7)(14,"h2",8)(15,"b"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.YNc(18,nv,2,1,"ng-container",9),t.qZA()(),t.TgZ(19,"div",7)(20,"h2",8)(21,"b"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"ul",10),t.YNc(25,ov,2,1,"ng-container",9),t.qZA()()(),t.YNc(26,av,2,0,"div",11),t.qZA()()}if(2&n){const e=a.$implicit,i=t.MAs(4);t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,11,e.name)," "),t.xp6(5),t.hij("",t.lcZ(11,13,"lang_matrix_list_total_question"),":"),t.xp6(2),t.hij(" ",e.numberQuest," "),t.xp6(4),t.hij("",t.lcZ(17,15,"lang_matrix_list_level_list"),":"),t.xp6(2),t.Q6J("ngForOf",e.ranks),t.xp6(4),t.hij("",t.lcZ(23,17,"lang_auto_don_vi_kien_thuc"),":"),t.xp6(3),t.Q6J("ngForOf",e.knowledge),t.xp6(1),t.Q6J("ngIf",e.knowledge.length>3)}}let rv=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.activeRoute=e,this.examBank=i,this.editorCommonService=o,this.matrixList=[],this.chooseMatrix=new t.vpe}clickToMatrix(e){e&&this.chooseMatrix.emit(e)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.SP),t.Y36(Ka))},n.\u0275cmp=t.Xpm({type:n,selectors:[["box-matrix-info"]],inputs:{matrixList:"matrixList"},outputs:{chooseMatrix:"chooseMatrix"},features:[t.qOj],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6 lg:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4"],["azt-track-service","box-matrix-info-61G2BIhvtR",1,"box","p-3","box-matrix-info",3,"click"],[1,"text-left","w-full",2,"align-self","center"],[1,"intro-x","font-bold","text-lg","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-left","w-full","mt-1",2,"align-self","center"],[1,"intro-x","text-md",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"px-1",2,"overflow","hidden","max-height","80px"],["class","text-left w-full pb-1","style","align-self: center;",4,"ngIf"],["style","list-style: circle; list-style-position: inside;",4,"ngIf"],[2,"list-style","circle","list-style-position","inside"],[1,"text-left","w-full","pb-1",2,"align-self","center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,sv,27,19,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.matrixList))},dependencies:[E.sg,E.O5,Le.gM,Ji.Q,_t.bT],encapsulation:2}),n})();function lv(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function cv(n,a){if(1&n&&(t.TgZ(0,"button",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function uv(n,a){if(1&n&&(t.TgZ(0,"button",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function dv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.addSubject(s))}),t.YNc(1,cv,3,3,"button",17),t.YNc(2,uv,3,3,"button",18),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isChoose),t.xp6(1),t.Q6J("ngIf",!e.isChoose)}}function _v(n,a){1&n&&(t.TgZ(0,"mat-label"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chon_mon")))}function mv(n,a){if(1&n&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function pv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"p",23),t._uU(3),t.qZA()(),t.TgZ(4,"div",24)(5,"div",25)(6,"mat-form-field",26),t.YNc(7,_v,3,3,"mat-label",27),t.TgZ(8,"mat-select",28),t.NdJ("ngModelChange",function(o){const r=t.CHM(e).$implicit;return t.KtG(r.subjectsIds=o)})("ngModelChange",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.backUpObjData())}),t.YNc(9,mv,2,2,"mat-option",29),t.qZA()()()()()}if(2&n){const e=a.$implicit,i=t.oxw(3);let o;t.xp6(3),t.Oqu(null==e.class?null:e.class.desc),t.xp6(4),t.Q6J("ngIf",!e.subjectsIds||!e.subjectsIds.length),t.xp6(1),t.Q6J("ngModel",e.subjectsIds),t.xp6(1),t.Q6J("ngForOf",i.valueSubjectSurvey[null!==(o=null==e.class?null:e.class.value)&&void 0!==o?o:0])}}function hv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",10)(8,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.nextStep())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()(),t.TgZ(11,"h3",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",13),t.YNc(15,dv,3,2,"div",14),t.qZA(),t.TgZ(16,"h3",12),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"div",7),t.YNc(20,pv,10,4,"div",15),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"lang_matrix_list_teacher_choose_subject_and_grade")," "),t.xp6(3),t.Q6J("disabled",!e.checkValidChooseGradeAndSubject(e.dataObjs)),t.xp6(1),t.hij(" ",t.lcZ(10,9,"lang_auto_tiep_tuc")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"lang_auto_khoi_day")," "),t.xp6(3),t.Q6J("ngForOf",e.valueSurvey),t.xp6(2),t.hij(" ",t.lcZ(18,13,"lang_auto_mon_day")," "),t.xp6(3),t.Q6J("ngForOf",e.dataObjs)}}function gv(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",32)(2,"h3",33),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",34)(6,"div",35)(7,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.chooseAgain())}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.goToHome())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()(),t.BQk()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_matrix_list_not_have_suggestion")," "),t.xp6(5),t.hij(" ",t.lcZ(9,5,"lang_auto_chon_lai")," "),t.xp6(3),t.hij(" ",t.lcZ(12,7,"lang_cms_publish_test_go_home")," "))}function fv(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"box-matrix-info",47),t.NdJ("chooseMatrix",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.gotoEditMatrix(o))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_suggestion")," "),t.xp6(2),t.Q6J("matrixList",e.matrixSuggestList)}}function xv(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"box-matrix-info",47),t.NdJ("chooseMatrix",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.gotoEditMatrix(o))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_owner_matrix")," "),t.xp6(2),t.Q6J("matrixList",e.matrixOwnerList)}}function vv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",38)(3,"h3",39),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",10)(7,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.createNewMatrix())}),t.O4$(),t.TgZ(8,"svg",41),t._UZ(9,"line",42)(10,"line",43),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()(),t.YNc(13,fv,5,4,"ng-container",27),t.YNc(14,xv,5,4,"ng-container",27),t.kcU(),t.TgZ(15,"div",44)(16,"div",45)(17,"azt-paging",46),t.NdJ("SendPage",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.goToPage(o))}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(4),t.hij(" ",t.lcZ(5,6,"lang_matrix_list_choose_below_to_create_exam")," "),t.xp6(7),t.hij(" ",t.lcZ(12,8,"lang_matrix_list_create_new_matrix")," "),t.xp6(2),t.Q6J("ngIf",e.matrixSuggestList.length>0),t.xp6(1),t.Q6J("ngIf",e.matrixOwnerList.length>0),t.xp6(3),t.Q6J("lengthPage",e.totalPage)("paging",e.curPage)}}function bv(n,a){if(1&n&&(t.TgZ(0,"div",5),t.YNc(1,gv,13,9,"ng-container",1),t.YNc(2,vv,18,10,"ng-template",null,31,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!i.matrixSuggestList.length&&!i.matrixOwnerList.length)("ngIfElse",e)}}function yv(n,a){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,hv,21,15,"div",4),t.YNc(2,bv,4,2,"div",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.step),t.xp6(1),t.Q6J("ngIf",2==e.step)}}let wv=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.activeRoute=e,this.examBank=i,this.editorCommonService=o,this.documentConfigService=s,this.surveyConfigService=r,this.matrixOwnerList=[],this.matrixSuggestList=[],this.backToLink="",this.curPage=1,this.curCate=0,this.totalPage=1,this.totalOwnerMatrix=0,this.sizePage=12,this.step=1,this.valueSurvey=[],this.valueSubjectSurvey=[],this.dataObjs=[],this.oldDataObjs=[],this.classroomGrade=[]}backUpObjData(){this.oldDataObjs=this.dataObjs}addSubject(e){var i,o;e.isChoose=!e.isChoose,this.commonService.filterArray(this.classroomGrade,e)?this.classroomGrade=this.classroomGrade.filter(l=>l.value!=e.value):this.classroomGrade.push(e),this.dataObjs=[];let s=this.oldDataObjs.length,r=this.classroomGrade.length;for(let l=0;l<r;l++)if(this.dataObjs[l]={class:this.classroomGrade[l],subjectsIds:[]},s>0)for(let u=0;u<s;u++)this.dataObjs[l]&&this.oldDataObjs[u]&&(null===(i=this.dataObjs[l].class)||void 0===i?void 0:i.value)==(null===(o=this.oldDataObjs[u].class)||void 0===o?void 0:o.value)&&(this.dataObjs[l]=this.oldDataObjs[u])}checkValidChooseGradeAndSubject(e){let i=!0;return e.length?e.forEach(o=>{(!o.subjectsIds||!o.subjectsIds.length)&&(i=!1)}):i=!1,i}nextStep(){var e,i;let o=[];for(let s=0;s<this.dataObjs.length;s++)if(this.dataObjs[s].subjectsIds&&Array.isArray(this.dataObjs[s].subjectsIds)){let r=null!==(e=this.dataObjs[s].subjectsIds)&&void 0!==e?e:[];if(r.length)for(let l=0;l<r.length;l++){let c={classId:null===(i=this.dataObjs[s].class)||void 0===i?void 0:i.value,subjectId:r[l]};o.push(c)}}o.length>0?(this.initStatusObj(),this.surveyConfigService.apiSurveyConfigSaveSurvey3Post({objs:o}).subscribe(s=>{s&&1==s.success?(this.step=2,this.getData()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})):this.errorStatusObj("lang_matrix_list_choose_grade_and_subject_fail",!0)}chooseAgain(){this.step=1,this.getGradeAndSubjectObj()}goToPage(e){this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.curCate+"/"+e,"?backto="+encodeURIComponent(this.backToLink))}goToHome(){this.commonService.myNavigation("/admin/dashboard")}createNewMatrix(){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/0","?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}gotoEditMatrix(e){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/"+e,"?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.curPage))}getSuggestionMatrix(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","global",1,3).subscribe(e=>{var i,o,s;e&&1==e.success?(this.matrixSuggestList=this.editorCommonService.getBeautyMatrixObjs(null!==(o=null===(i=e.data)||void 0===i?void 0:i.banks)&&void 0!==o?o:[]),this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"",!0)}))}getGradeAndSubjectObj(){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var i,o,s,r,l;if(1==e.success){let c=null!==(o=null===(i=e.data)||void 0===i?void 0:i.schoolLevelObjs)&&void 0!==o?o:[],u=null!==(r=null===(s=e.data)||void 0===s?void 0:s.schoolSubjectObjs)&&void 0!==r?r:[];c.forEach(b=>{let y={value:b.id,desc:this.commonService.myTranslateInstant(b.name)};this.commonService.filterArray(this.valueSurvey,y)||this.valueSurvey.push(y)});let d=[],m=[],p=[];u.forEach(b=>{let y={type:0,id:b.id,name:this.commonService.myTranslateInstant(b.name)};b.from&&b.to&&b.from>=1&&b.to<=5?(y.type=1,this.commonService.filterArray(d,y)||d.push(y)):b.from&&b.to&&b.from>=6&&b.to<=9?(y.type=2,this.commonService.filterArray(m,y)||m.push(y)):(y.type=3,this.commonService.filterArray(p,y)||p.push(y));for(var C=1;C<=5;C++)this.valueSubjectSurvey[C]=d;for(C=6;C<=9;C++)this.valueSubjectSurvey[C]=m;for(C=10;C<=13;C++)this.valueSubjectSurvey[C]=p}),this.successStatusObj()}else this.errorStatusObj(null!==(l=e.message)&&void 0!==l?l:"")}))}getData(){this.subscriptions.add(this.examBank.apiExamBanksGet("knowledge","own",this.curPage,this.sizePage).subscribe(e=>{var i,o,s,r,l;if(e&&1==e.success){this.matrixOwnerList=this.editorCommonService.getBeautyMatrixObjs(null!==(o=null===(i=e.data)||void 0===i?void 0:i.banks)&&void 0!==o?o:[]);let c=null!==(r=null===(s=e.data)||void 0===s?void 0:s.total)&&void 0!==r?r:1;this.totalOwnerMatrix=c,this.totalPage=c%this.sizePage>0?(c-c%this.sizePage)/this.sizePage+1:c>0?c/this.sizePage:1,this.curPage>this.totalPage&&(this.curPage=this.totalPage),this.getSuggestionMatrix()}else this.errorStatusObj(null!==(l=e.message)&&void 0!==l?l:"",!0)}))}checkSurveySubmitted(){this.initStatusObj(),this.surveyConfigService.apiSurveyConfigGetSurvey3Get().subscribe(e=>{var i,o,s,r;e&&1==e.success?null!==(o=null===(i=e.data)||void 0===i?void 0:i.objs)&&void 0!==o&&o.length&&(null===(r=null===(s=e.data)||void 0===s?void 0:s.objs)||void 0===r?void 0:r.length)>0?(this.step=2,this.getData()):this.getGradeAndSubjectObj():this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/document-management/0/0/1",this.curPage=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.curCate=Number(this.commonService.getMyParam(this.activeRoute,"cate")),this.checkSurveySubmitted()}),this.commonService.translateMetaData({title:"lang_matrix_list_title",description:"lang_matrix_list_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.SP),t.Y36(Ka),t.Y36(Bt.Cq),t.Y36(Bt.XG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","py-5"],["class","block-cols-12-full m-0",4,"ngIf"],[1,"block-cols-12-full","m-0"],[1,"action-heading","mb-4"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6","text-left",2,"align-self","center"],[1,"text-lg","font-medium",2,"vertical-align","middle"],[1,"col-span-12","md:col-span-6","text-right"],["azt-track-service","azota-matrix-list-jSDqGYuTf",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"disabled","click"],[1,"text-lg","font-bold","mt-3","mb-3"],[1,"grid","grid-cols-10","gap-3",2,"max-width","620px"],["azt-track-service","azota-matrix-list-idyray5dXY","class","col-span-10 md:col-span-2 text-left",3,"click",4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],["azt-track-service","azota-matrix-list-idyray5dXY",1,"col-span-10","md:col-span-2","text-left",3,"click"],["class","btn btn-secondary shadow-md mr-2 w-full selected-border-box",4,"ngIf"],["class","btn btn-secondary shadow-md mr-2 w-full",4,"ngIf"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full","selected-border-box"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full"],[1,"col-span-12","md:col-span-4"],[1,"text-left"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","mt-2"],[1,"col-span-12"],["appearance","outline"],[4,"ngIf"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["alreadyData",""],[1,"text-center","mx-auto","w-full","py-5"],[1,"text-md","mx-auto"],[1,"mx-auto","mt-3","w-2/5"],[1,"flex","flex-wrap",2,"justify-content","space-around"],["azt-track-service","azota-matrix-list-zYMA7f2mc",1,"btn","btn-primary","text-white","shadow-md","w-40","mb-2",3,"click"],["azt-track-service","azota-matrix-list-RSssWEqyTk",1,"btn","btn-secondary","shadow-md","w-40","mb-2",3,"click"],[1,"col-span-12","md:col-span-6","text-left"],[1,"text-lg","font-bold",2,"vertical-align","middle"],["azt-track-service","azota-matrix-list-h4LcenZp7K",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"col-span-12","flex","flex-wrap","sm:flex-row","sm:flex-nowrap","items-center","mt-5"],[1,"w-full","sm:w-auto","sm:mr-auto"],[3,"lengthPage","paging","SendPage"],[3,"matrixList","chooseMatrix"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,lv,1,0,"azt-loading-effect",1),t.YNc(2,yv,3,2,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.sg,E.O5,Bi.ey,Fn.KE,Fn.hX,no.gD,h.JJ,h.On,xe.Q,xl.L,Xe._,rv,_t.bT],encapsulation:2}),n})();var Ks=A(71572),Nu=A(30502);function kv(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Cv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.answersheetImageLoaded())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("src",e.curAnswersheetImage,t.LSH)}}let Z_=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialog=e,this.cdnService=i,this.answersheetTemplate=11,this.amountAnswersheet=120,this.curAnswersheetImage="",this.previewAnswersheetImageLoading=!0}getAnswersheetImageUrl(e){switch(e.toString()){case"11":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`azota_assets/medias_[LANG]/preview_images_v5/answersheet_mau_a4__${this.amountAnswersheet&&this.amountAnswersheet<=120?parseInt(this.amountAnswersheet.toString(),10):120}.svg`);case"12":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v5/answer_sheet_a5_50_fulla4.png");case"13":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v5/answer_sheet_a4_35hh.png");case"14":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale("azota_assets/medias_[LANG]/preview_images_v5/answer_sheet_a6_20_full_a4.png")}return""}previewAnswersheetImage(){var e={name:"",mimes:"image/jpeg",url:this.getAnswersheetImageUrl(this.answersheetTemplate)};let o=Object.assign(Object.assign({},e),{index:0});this.dialog.open(Nu.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:o,viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})}answersheetImageLoaded(){this.previewAnswersheetImageLoading=!1}initImageUrls(){this.previewAnswersheetImageLoading=!0,this.curAnswersheetImage=this.getAnswersheetImageUrl(this.answersheetTemplate)}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(le.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["preview-answersheet-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate",amountAnswersheet:"amountAnswersheet"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"flex","mx-auto",2,"width","75%","max-height","100%"],["azt-track-service","preivew-answersheet-dialog--hf6Yx84YB",1,"w-full","flex-none","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400",2,"height","100%",3,"click"],[4,"ngIf","ngIfElse"],["doneLoading",""],[2,"height","auto",3,"src","load"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.previewAnswersheetImage()}),t.YNc(2,kv,1,0,"azt-loading-effect",2),t.YNc(3,Cv,1,1,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const o=t.MAs(4);t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q],encapsulation:2}),n})();function Tv(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Av(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Sv(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_nho_hon_120")," "))}function Ov(n,a){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,Tv,3,3,"span",0),t.YNc(2,Av,3,3,"span",0),t.YNc(3,Sv,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors.max)}}function Ev(n,a){if(1&n&&(t.TgZ(0,"div",16)(1,"label",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",18),t.YNc(5,Ov,4,3,"div",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_nhap_so_cau")," "),t.xp6(3),t.Q6J("ngIf",e.form.controls.amountAnswersheet.errors&&(e.form.controls.amountAnswersheet.dirty||e.form.controls.amountAnswersheet.touched))}}function Mv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"form",1)(2,"div",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6)(11,"input",7),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeValueAnswer())}),t.qZA(),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.YNc(15,Ev,6,4,"div",9),t.TgZ(16,"div",6),t._UZ(17,"input",10),t.TgZ(18,"label",11),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"div",6),t._UZ(22,"input",12),t.TgZ(23,"label",13),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",6),t._UZ(27,"input",14),t.TgZ(28,"label",15),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.hij(" ",t.lcZ(4,8,"lang_auto_chon_mau_phieu_tra_loi")," "),t.xp6(4),t.hij(" ",t.lcZ(8,10,"lang_auto_mau_co_sbd_ma_de")," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,"lang_auto_answersheet_mau_a4_azota")," "),t.xp6(2),t.Q6J("ngIf",11==e.form.controls.answersheetTemplate.value),t.xp6(4),t.hij(" ",t.lcZ(20,14,"lang_auto_answersheet_mau_a5_full_a4_50")," "),t.xp6(5),t.hij(" ",t.lcZ(25,16,"lang_auto_answersheet_mau_a6_full_a4_20")," "),t.xp6(5),t.hij(" ",t.lcZ(30,18,"lang_auto_answersheet_mau_a4_35hh")," ")}}let P_=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.formControlName="",this.logAmountAnswersheet=0}ngOnInit(){var e;super.ngOnInit(),this.logAmountAnswersheet=null===(e=this.form)||void 0===e?void 0:e.controls.amountAnswersheet.value}changeValueAnswer(){var e,i,o;7!=(null===(e=this.form)||void 0===e?void 0:e.controls.answersheetTemplate.value)||[120,115,90,75,60,45,30,15].includes(this.form.controls.amountAnswersheet.value)||this.form.controls.amountAnswersheet.setValue(120),(0==(null===(i=this.form)||void 0===i?void 0:i.controls.answersheetTemplate.value)||11==(null===(o=this.form)||void 0===o?void 0:o.controls.answersheetTemplate.value))&&this.form.controls.amountAnswersheet.setValue(this.logAmountAnswersheet)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-choose-answersheet"]],inputs:{form:"form",formControlName:"formControlName"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form-label","font-medium"],[1,"mt-2"],[1,"text-md"],[1,"border","p-2","border-slate-200","dark:border-darkmode-400","rounded","mt-2"],[1,"form-check","mt-2"],["id","sample-1","type","radio","value","11","formControlName","answersheetTemplate",1,"form-check-input",3,"change"],["for","sample-1",1,"form-check-label"],["class","mt-2 mb-4",4,"ngIf"],["id","sample-5","type","radio","value","12","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-5",1,"form-check-label"],["id","sample-4","type","radio","value","14","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-4",1,"form-check-label"],["id","sample-write","type","radio","value","13","formControlName","answersheetTemplate",1,"form-check-input"],["for","sample-write",1,"form-check-label"],[1,"mt-2","mb-4"],["for","input-sample-0",1,"form-label","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","value","1","formControlName","amountAnswersheet",1,"form-control"],["class","mt-2 text-danger text-xs font-medium",4,"ngIf"],[1,"mt-2","text-danger","text-xs","font-medium"]],template:function(e,i){1&e&&t.YNc(0,Mv,31,20,"div",0),2&e&&t.Q6J("ngIf",i.form)},dependencies:[E.O5,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,Bo.Y,Pe.M,_t.bT],encapsulation:2}),n})();function Iv(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Lv(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",43)(1,"g",44)(2,"g",45),t._UZ(3,"circle",46),t.TgZ(4,"path",47),t._UZ(5,"animateTransform",48),t.qZA()()()())}function Zv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",49),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.changeConfigSubjectMark(o))}),t.qZA()}}function Pv(n,a){if(1&n&&(t.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"label",37),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",38),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",39)(10,"div",40),t.YNc(11,Lv,6,0,"svg",41),t.YNc(12,Zv,1,0,"input",42),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,4,"lang_config_create_exam_multiple_component")," "),t.xp6(3),t.hij(" ",t.lcZ(8,6,"lang_config_create_exam_multiple_component_description")," "),t.xp6(4),t.Q6J("ngIf",e.loadingSaveConfigMultiple),t.xp6(1),t.Q6J("ngIf",!e.loadingSaveConfigMultiple)}}function Nv(n,a){1&n&&(t.TgZ(0,"div",59)(1,"div",60)(2,"a",61),t._UZ(3,"img",62),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",63),t._UZ(6,"img",64),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/2928664.svg"),t.LSH))}function Dv(n,a){1&n&&(t.TgZ(0,"p",55),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function jv(n,a){1&n&&(t.TgZ(0,"div",59)(1,"div",65)(2,"p",66)(3,"span",67),t._uU(4,"Google Play"),t.qZA(),t._UZ(5,"azt-download-qr-code",68),t.qZA(),t.TgZ(6,"p",69)(7,"span",67),t._uU(8,"App Store"),t.qZA(),t._UZ(9,"azt-download-qr-code",68),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function qv(n,a){if(1&n&&(t.TgZ(0,"div",50)(1,"div",51)(2,"span",52),t._uU(3," * "),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",53)(7,"div",54)(8,"p",55),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,Nv,8,6,"div",56),t.qZA(),t.TgZ(12,"div",57),t.YNc(13,Dv,3,3,"p",58),t.YNc(14,jv,10,4,"div",56),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),t.xp6(5),t.hij(" ",t.lcZ(10,7,"lang_core_tai_app_tai_day")," "),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView)}}function Fv(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",70),t._UZ(2,"path",71)(3,"polyline",72)(4,"line",73),t.qZA()())}function Qv(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",74)(2,"g",44)(3,"g",45),t._UZ(4,"circle",46),t.TgZ(5,"path",47),t._UZ(6,"animateTransform",48),t.qZA()()()()())}function Uv(n,a){1&n&&(t.TgZ(0,"span",75),t._UZ(1,"azt-loading-ui",76),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function Bv(n,a){1&n&&(t.TgZ(0,"span",77),t._UZ(1,"lucide-icon",78),t.qZA())}function Rv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t._UZ(5,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(6,"div",7)(7,"form",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),t._UZ(13,"app-testbank-choose-answersheet",14),t.qZA(),t.YNc(14,Pv,13,8,"div",15),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"preview-answersheet-dialog",16),t.qZA()()(),t.YNc(17,qv,15,9,"div",17),t.qZA(),t.TgZ(18,"div",18)(19,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.printExamAnswersheet(null==o.dataConfigDocument.offlineExamObj?null:o.dataConfigDocument.offlineExamObj.hashId))}),t.YNc(20,Fv,5,0,"span",20),t.YNc(21,Qv,7,0,"span",20),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()()(),t.TgZ(25,"div",21)(26,"h3",6),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"div",22)(30,"div",23)(31,"div",24)(32,"p",25)(33,"span",26),t._UZ(34,"lucide-icon",27),t.qZA(),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"div",28),t._UZ(38,"input",29),t.TgZ(39,"button",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportExcelForAnswerSheet())}),t.YNc(40,Uv,2,1,"span",31),t.YNc(41,Bv,2,0,"ng-template",null,32,t.W1O),t._uU(43),t.ALo(44,"mytranslate"),t.qZA()()()()()(),t.TgZ(45,"div",21)(46,"h3",6),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"div",22)(50,"div",23),t._UZ(51,"numbering-identification",33),t.ALo(52,"mustInClassroom"),t.qZA()()()()}if(2&n){const e=t.MAs(42),i=t.oxw();let o;t.xp6(3),t.hij(" ",t.lcZ(4,21,"lang_auto_in_phieu_tra_loi")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("form",i.form),t.xp6(1),t.Q6J("ngIf",i.canUseSubjectMark),t.xp6(2),t.Q6J("answersheetTemplate",i.form.controls.answersheetTemplate.value)("amountAnswersheet",i.form.controls.amountAnswersheet.value),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(3),t.Q6J("ngIf",!i.isLoadingPrintTicket),t.xp6(1),t.Q6J("ngIf",i.isLoadingPrintTicket),t.xp6(2),t.Oqu(t.lcZ(24,23,"lang_auto_tai_phieu_tra_loi")),t.xp6(4),t.hij(" ",t.lcZ(28,25,"lang_auto_dap_an_de_thi_offline")," "),t.xp6(8),t.hij(" ",t.lcZ(36,27,"lang_auto_file_answer_list")," "),t.xp6(3),t.s9C("value",i.createNameExam("answerexcel",!0)),t.xp6(2),t.Q6J("ngIf",i.isLoadingPrintAnswer)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(44,29,"lang_auto_tai_ve")," "),t.xp6(4),t.hij(" ",t.lcZ(48,31,"lang_auto_danh_so_bao_danh")," "),t.xp6(4),t.Q6J("hashId",null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.hashId)("checkStudentCode",t.lcZ(52,33,null!==(o=null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.whoAllow)&&void 0!==o?o:0))("styleView",1)("startStudentCode",i.startStudentCode)}}function zv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",79),t.NdJ("exportDataDone",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.exportDataDone(o))}),t.qZA()}if(2&n){const e=t.oxw();let i;t.Q6J("startQuestionIndex",null!==(i=e.examObj.startQuestionIndex)&&void 0!==i?i:1)("objs",e.exportExcelData)}}let Jv=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m){super(),this.offlineMixQuestionService=e,this.shareFileFlutterService=i,this.zipDataService=o,this.formBuilder=s,this.answerSheetHelper=r,this.printAnswersheetService=l,this.documentConfigService=c,this.activeRoute=u,this.dialog=d,this.offlineExamExportService=m,this.form=new h.nJ({}),this.examObj={},this.backLink="",this.isLoadingPrintTicket=!1,this.dataConfigDocument={},this.examHashId="",this.startStudentCode=1,this.canUseSubjectMark=!1,this.isLoadingPrintAnswer=!1,this.loadingSaveConfigMultiple=!1}saveConfig(){return new Promise(e=>{let o={subjectMarks:this.commonService.getFormObj(this.form).subjectMarks?1:0};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,o).subscribe(s=>{e(1==s.success)}))})}printExamAnswersheet(e){var i,o;this.isLoadingPrintTicket=!0,this.subscriptions.add(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(null!==(o=null===(i=this.dataConfigDocument.examObj)||void 0===i?void 0:i.hashId)&&void 0!==o?o:"",e??"","").subscribe(s=>{var r,l,c,u,d,m,p,b,y,C,I,D,U,B;if(1===s.success){let q=this.getTotalQuestionInMixQuestionObjs(null!==(l=null===(r=s.data)||void 0===r?void 0:r.mixQuestionObjs)&&void 0!==l?l:[],null!==(u=null===(c=s.data)||void 0===c?void 0:c.questionObjs)&&void 0!==u?u:[]);if(q){let et=null!==(d=this.form.controls.answersheetTemplate.value)&&void 0!==d?d:0,Q=null!==(m=this.form.controls.amountAnswersheet.value)&&void 0!==m?m:void 0;this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,et,q,0,null===(p=s.data)||void 0===p?void 0:p.maxOfflineMixQuestionHashId,Q);let V=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(y=null===(b=this.dataConfigDocument.examObj)||void 0===b?void 0:b.name)&&void 0!==y?y:"",null!==(D=null===(I=null===(C=s.data)||void 0===C?void 0:C.offlineExamObj)||void 0===I?void 0:I.hashId)&&void 0!==D?D:"");this.answerSheetHelper.createAnswerSheet().subscribe(Y=>{var at;1==Y.success?this.saveConfig().then(tt=>{var rt;tt?this.answerSheetHelper.exportPdf(V):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",null!==(rt=s.message)&&void 0!==rt?rt:"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",null!==(at=s.message)&&void 0!==at?at:"none"),!0),this.isLoadingPrintTicket=!1})}else this.errorStatusObj(null!==(U=s.message)&&void 0!==U?U:"",!0),this.isLoadingPrintTicket=!1}else this.errorStatusObj(null!==(B=s.message)&&void 0!==B?B:"",!0),this.isLoadingPrintTicket=!1}))}getTotalQuestionInMixQuestionObjs(e,i){if(e.length>0){let o=0;return e.forEach(s=>{var r,l,c;let u=this.zipDataService.decodeContentGzip(null!==(r=s?.mixDatas)&&void 0!==r?r:""),d=this.castJsonToObj(u);o<(null!==(l=d?.length)&&void 0!==l?l:0)&&(o=null!==(c=d?.length)&&void 0!==c?c:0)}),o}return i.length>0?i.length:void 0}getExamInfoByHashId(e){var i;this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(o=>{var s,r,l,c,u,d,m,p;1==o.success?(this.dataConfigDocument=null!==(s=o.data)&&void 0!==s?s:{},this.canUseSubjectMark=null!==(l=null===(r=o.data)||void 0===r?void 0:r.canUseSubjectMark)&&void 0!==l&&l,this.examObj=null!==(c=this.dataConfigDocument.examObj)&&void 0!==c?c:{},this.form.controls.amountAnswersheet.setValue(null!==(d=null===(u=this.dataConfigDocument.examObj)||void 0===u?void 0:u.countQuestion)&&void 0!==d?d:1),this.form.controls.subjectMarks.setValue(!(null===(m=this.dataConfigDocument.examObj)||void 0===m||!m.subjectMarks)),this.canUseSubjectMark||this.form.controls.subjectMarks.disable(),this.successStatusObj()):this.errorStatusObj(null!==(p=o.message)&&void 0!==p?p:"",!0)})),this.examHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:""}createNameExam(e,i){var o,s,r,l,c,u,d,m="";m="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(o=this.examObj.name)&&void 0!==o?o:"",null!==(s=this.examHashId)&&void 0!==s?s:""):"answerexcel"==e||"answerdocx"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,null!==(r=this.examObj.name)&&void 0!==r?r:"",null!==(l=this.examHashId)&&void 0!==l?l:""):this.printAnswersheetService.exportFileNameOfExamOffline(0,null!==(c=this.examObj.name)&&void 0!==c?c:"",null!==(u=this.examHashId)&&void 0!==u?u:"",void 0),i&&(m=null!==(d=this.commonService.replaceAll(m,"_","-"))&&void 0!==d?d:"");var p=".docx";return p="answersheet"==e&&7!=this.form.controls.answersheetTemplate.value?".pdf":p,m+("answerexcel"==e?".xlsx":p)}exportExcelForAnswerSheet(){var e;this.isLoadingPrintAnswer=!0;let i=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(i).subscribe(o=>{var s,r;if(1==o.success){let l=null===(s=o.data)||void 0===s?void 0:s.objs;l&&l.length>0?this.exportExcelData=this.commonService.myClone(l):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(null!==(r=o.message)&&void 0!==r?r:""),this.isLoadingPrintAnswer=!1}))}exportDataDone(e){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(e,i),this.isLoadingPrintAnswer=!1}changeConfigSubjectMark(e){if(e.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.commonService.getFormObj(this.form),o={subjectMarks:i.subjectMarks?1:0};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,o).subscribe(s=>{var r;1==s.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(null!==(r=s.message)&&void 0!==r?r:"",!0),this.form.controls.subjectMarks.setValue(!o.subjectMarks))}))}}ngOnInit(){var e,i,o;this.form=this.formBuilder.group({answersheetTemplate:new h.p4("11",[h.kI.required]),amountAnswersheet:new h.p4(1,[h.kI.required,h.kI.min(1),h.kI.max(120)]),subjectMarks:new h.p4({value:!1,disabled:!1})}),this.examHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";let s=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==i?i:0,r=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"";this.backLink=r||"/admin/testbank/document-management/0/"+(s??0)+"/1",this.examHashId&&this.getExamInfoByHashId(this.examHashId)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.fs),t.Y36(ka.g),t.Y36(Ca.D),t.Y36(h.QS),t.Y36(C_),t.Y36(ml.Y),t.Y36(Bt.Cq),t.Y36(w.gz),t.Y36(z.uw),t.Y36(Bt.qr))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-exam-offline"]],features:[t.qOj],decls:5,vars:4,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"startQuestionIndex","objs","exportDataDone",4,"ngIf"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],["formArrayName","answersheetTemplate",3,"form"],["class","mt-3",4,"ngIf"],[3,"answersheetTemplate","amountAnswersheet"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","config-exam-offline--sdRHbNg8Am",1,"btn","btn-primary",3,"click"],[4,"ngIf"],[1,"setting-block","mt-5"],[1,"box","mt-2","p-5"],[1,"mt-2","intro-y"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneLoadingPrintAnswer",""],[3,"hashId","checkStudentCode","styleView","startStudentCode"],[1,"mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],[1,"form-check","form-switch","ml-auto"],["class","show-code ml-auto form-check-input w-5 h-5","width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"show-code","ml-auto","form-check-input","w-5","h-5"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"block"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","config-exam-offline-hLHiZDnMwY","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","config-exam-offline-hD7OkoGz62","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],[1,"w-4","h-4","mr-2","text-white"],[3,"type"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[3,"startQuestionIndex","objs","exportDataDone"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Iv,1,0,"azt-loading-effect",1),t.YNc(2,Rv,53,35,"ng-template",null,2,t.W1O),t.YNc(4,zv,1,2,"azt-export-excel-for-answersheet",3),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",null!=i.exportExcelData)}},dependencies:[E.O5,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,xe.Q,Ks.o,Pe.M,Pu.j,rs.J,Xe._,f.Nh5,A_,Z_,P_,S_,_t.bT,_t.Jc,_t.Bm],encapsulation:2}),n})();class Ys{static customDateTimeValidator(a){const e=a.get("startTime"),i=a.get("endTime");return null!==e&&null!==i&&""!=e.value&&""!=i.value&&null!==e.value&&null!==i.value&&Ys.calculationHomeworkTimeWithZeroSecond(e.value,i.value)<=0?(i?.setErrors({customDateTimeValidator:!0}),{identityRevealed:!0}):(i?.setErrors(null),null)}static calculationHomeworkTimeWithZeroSecond(a,e){let i=new Date(a),o=new Date(1e3*Ys.getSecondOfDateWithZeroSecond(i)),s=e?new Date(e):new Date,r=new Date(1e3*Ys.getSecondOfDateWithZeroSecond(s));return o.getTime()-r.getTime()>0?Math.floor((o.getTime()-r.getTime())/1e3):-1}static getSecondOfDateWithZeroSecond(a){var e=a.getSeconds();return Math.floor(a.getTime()/1e3)-e}}var Hv=A(47982),Du=A(29521);const $v=["tagInput"];function Kv(n,a){1&n&&(t.TgZ(0,"mat-icon",12),t._uU(1,"cancel"),t.qZA())}function Yv(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-row",10),t.NdJ("removed",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.removeTagName(s))}),t._uU(1),t.YNc(2,Kv,2,0,"mat-icon",11),t.qZA()}if(2&n){const e=a.$implicit;t.Q6J("removable",!0),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",!0)}}function Gv(n,a){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Wv=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.form=new h.nJ({}),this.allTagNames=[],this.tagNames=[],this.tagNamesChange=new t.vpe,this.separatorKeysCodes=[Du.K5,Du.OC]}addTagName(e){const i=e.input,o=e.value;(o||"").trim()&&this.tagNames.push(o.trim()),i&&(i.value=""),this.tagNameCtrl.setValue(null)}removeTagName(e){const i=this.tagNames.indexOf(e);i>=0&&this.tagNames.splice(i,1)}selectedTagName(e){this.tagNames.push(e.option.viewValue),this.tagInput&&(this.tagInput.nativeElement.value=""),this.tagNameCtrl.setValue(null)}_filterTagName(e){const i=e.toLowerCase();return this.allTagNames.filter(o=>0===o.toLowerCase().indexOf(i))}ngOnInit(){super.ngOnInit(),this.filteredTags=this.tagNameCtrl.valueChanges.pipe((0,Iu.O)(null),(0,ss.U)(e=>e?this._filterTagName(e):this.allTagNames.slice()))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online-tag"]],viewQuery:function(e,i){if(1&e&&t.Gf($v,5),2&e){let o;t.iGM(o=t.CRH())&&(i.tagInput=o.first)}},inputs:{form:"form",tagNameCtrl:"tagNameCtrl",allTagNames:"allTagNames",tagNames:"tagNames"},outputs:{tagNamesChange:"tagNamesChange"},features:[t.qOj],decls:11,vars:9,consts:[[3,"formGroup"],["appearance","outline",1,"my-chip-list"],["aria-label"," 'lang_cms_utils_choose_tag_name' | mytranslate "],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-chip-grid",2,3),t.YNc(4,Yv,3,3,"mat-chip-row",4),t.TgZ(5,"input",5,6),t.NdJ("matChipInputTokenEnd",function(s){return i.addTagName(s)}),t.qZA()(),t.TgZ(7,"mat-autocomplete",7,8),t.NdJ("optionSelected",function(s){return i.selectedTagName(s)}),t.YNc(9,Gv,2,2,"mat-option",9),t.ALo(10,"async"),t.qZA()()()),2&e){const o=t.MAs(3),s=t.MAs(8);t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("ngForOf",i.tagNames),t.xp6(1),t.Q6J("formControl",i.tagNameCtrl)("matAutocomplete",s)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(10,7,i.filteredTags))}},dependencies:[E.sg,E.O5,cl.XC,Bi.ey,cl.ZL,Xn.RA,Xn.oH,Xn.qH,Xn.z3,qe.Hw,Fn.KE,h._Y,h.Fj,h.JJ,h.JL,h.oH,h.sg,E.Ov],encapsulation:2}),n})();function Vv(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().index;t.xp6(1),t.hij("",e+1,".")}}function Xv(n,a){1&n&&(t.TgZ(0,"span"),t._UZ(1,"input",56),t.qZA())}function t2(n,a){1&n&&(t.TgZ(0,"span"),t._UZ(1,"input",57),t.qZA())}function e2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",48)(1,"div",49),t.YNc(2,Vv,2,1,"span",37),t.YNc(3,Xv,2,0,"span",37),t.YNc(4,t2,2,0,"span",37),t.TgZ(5,"span",50)(6,"input",51),t.NdJ("change",function(o){const r=t.CHM(e).index,l=t.oxw(2).index,c=t.oxw();return t.KtG(c.changeInfoContent(o,l,r))}),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"a",52),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(2).index,l=t.oxw();return t.KtG(l.removeContent(r,s))}),t.O4$(),t.TgZ(9,"svg",53),t._UZ(10,"line",54)(11,"line",55),t.qZA()()()()}if(2&n){const e=a.$implicit,i=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",3==i.type),t.xp6(1),t.Q6J("ngIf",2==i.type),t.xp6(1),t.Q6J("ngIf",1==i.type),t.xp6(2),t.s9C("placeholder",""==e?t.lcZ(7,5,"lang_testbank_test_config_request_enter_name"):""),t.s9C("value",""!=e&&null!=e?e:"")}}function n2(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",39),t._UZ(2,"rect",58)(3,"line",59)(4,"line",60),t.qZA()())}function i2(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",39),t._UZ(2,"circle",61)(3,"line",59)(4,"line",60),t.qZA()())}function o2(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.contents?e.contents.length+1:1,". ")}}function a2(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",33),t.YNc(1,e2,12,7,"div",34),t.TgZ(2,"div",35)(3,"button",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.addMoreContent(o))}),t.YNc(4,n2,5,0,"span",37),t.YNc(5,i2,5,0,"span",37),t.YNc(6,o2,2,1,"span",37),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.addFastContent(o))}),t.O4$(),t.TgZ(10,"svg",39),t._UZ(11,"line",8)(12,"line",9),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(15,"div",40)(16,"div",41)(17,"div",42)(18,"textarea",43),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw().index,r=t.oxw();return t.KtG(r.changeDataFastContent(o,s))}),t.qZA()(),t.TgZ(19,"div",44),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"div",45)(23,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.closeDialogFastContent())}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().index,s=t.oxw();return t.KtG(s.changeInfoFastContent(s.infoContentFast[o],o))}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw(),i=e.$implicit,o=e.index,s=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.contents),t.xp6(3),t.Q6J("ngIf",1==i.type),t.xp6(1),t.Q6J("ngIf",2==i.type),t.xp6(1),t.Q6J("ngIf",3==i.type),t.xp6(1),t.hij(" ",t.lcZ(8,10,"lang_testbank_test_config_more_options")," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,"lang_testbank_test_config_quick_add")," "),t.xp6(2),t.Q6J("ngClass",s.checkDialogFastContent[o]?"":"hidden"),t.xp6(5),t.hij(" * ",t.lcZ(21,14,"lang_testbank_test_config_note")," "),t.xp6(4),t.hij(" ",t.lcZ(25,16,"lang_buttom_cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(28,18,"lang_buttom_confirm")," ")}}const s2=function(n){return{"mb-5":n}},r2=function(n){return{"border-danger":n}};function l2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"div",15),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"input",16),t.NdJ("change",function(o){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeInfoTitle(o,r))}),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()(),t.TgZ(10,"div",17)(11,"mat-form-field",18)(12,"mat-select",19),t.NdJ("selectionChange",function(o){const r=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeTypeField(o,r))}),t.TgZ(13,"mat-option",20),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"mat-option",21),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"mat-option",22),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"mat-option",23),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()(),t.TgZ(25,"div",24)(26,"button",25),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.removeFields(s))}),t.ALo(27,"mytranslate"),t.O4$(),t.TgZ(28,"svg",26),t._UZ(29,"path",27)(30,"path",28)(31,"path",29)(32,"line",30)(33,"line",31),t.qZA()()()(),t.YNc(34,a2,29,20,"div",32),t.qZA()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(32,s2,i!==o.infoFields.length-1)),t.xp6(4),t.AsE(" ",t.lcZ(6,16,"lang_testbank_test_config_information")," ",i+1," "),t.xp6(2),t.s9C("placeholder",e.error?t.lcZ(8,18,"lang_testbank_test_config_request_enter_name"):t.lcZ(9,20,"lang_testbank_test_config_enter_Information_you_want_student_enter")),t.Q6J("ngClass",t.VKq(34,r2,e.error))("readonly",0===i)("value",e.title),t.xp6(5),t.s9C("value",e.type),t.Q6J("disabled",0===i),t.xp6(2),t.hij(" ",t.lcZ(15,22,"lang_testbank_test_config_reply_short"),""),t.xp6(3),t.hij("",t.lcZ(18,24,"lang_testbank_test_config_Checkbox")," "),t.xp6(3),t.Oqu(t.lcZ(21,26,"lang_testbank_test_config_quiz")),t.xp6(3),t.hij(" ",t.lcZ(24,28,"lang_testbank_test_config_drop_down_menu"),""),t.xp6(3),t.s9C("matTooltip",t.lcZ(27,30,"lang_testbank_test_config_delete_information")),t.Q6J("disabled",0===i),t.xp6(8),t.Q6J("ngIf",0!=e.type)}}let c2=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.infoFields=[],this.formInfoInvalid=!1,this.infoFieldsChange=new t.vpe,this.formInfoInvalidChange=new t.vpe,this.infoContentFast=[],this.indexContent=0,this.checkDialogFastContent=[]}removeFields(e){this.infoFields.splice(e,1)}addNewFields(e){let i="";this.commonService.myTranslate(["lang_auto_thong_tin"]).subscribe(s=>{i=s.lang_auto_thong_tin}),this.infoFields.push({type:0,title:i+" "+((this.infoFields?this.infoFields.length:0)+1),contents:[]})}changeTypeField(e,i){this.infoFields[i].type!=e.value&&(this.infoFields[i].type=Number(e.value),this.infoFields[i].error=!1)}changeInfoTitle(e,i){e.target.value&&""==e.target.value?(this.formInfoInvalid=!0,this.infoFields[i].error=!0,this.infoFields[i].title=e.target.value):(this.formInfoInvalid=!1,this.infoFields[i].error=!1,this.infoFields[i].title=e.target.value)}changeInfoContent(e,i,o){e.target.value&&""!=e.target.value?(this.infoFields[i].contents[o]=e.target.value,this.formInfoInvalid=!1):(this.infoFields[i].contents[o]=e.target.value,this.formInfoInvalid=!0)}removeContent(e,i){var o;null===(o=this.infoFields[e].contents)||void 0===o||o.splice(i,1)}addMoreContent(e,i){let o="";this.commonService.myTranslate(["lang_auto_tuy_chon"]).subscribe(r=>{o=r.lang_auto_tuy_chon});let s=this.infoFields[e].contents?this.infoFields[e].contents.length:0;this.infoFields[e].contents&&Array.isArray(this.infoFields[e].contents)||(this.infoFields[e].contents=new Array),this.infoFields[e].contents.push(o+" "+(s+1))}addFastContent(e){this.indexContent=e,this.checkDialogFastContent[this.indexContent]=!0}changeDataFastContent(e,i){e.target.value&&(this.infoContentFast[i]=e.target.value,e.target.value="")}closeDialogFastContent(){this.checkDialogFastContent[this.indexContent]=!1}changeInfoFastContent(e,i){if(""!=e){let o=e.split("\n");o=o.map(s=>s.trim()),o=o.filter(s=>""!=s),this.infoFields[i].contents||(this.infoFields[i].contents=new Array),this.infoFields[i].contents=this.infoFields[i].contents.concat(o)}this.checkDialogFastContent[i]=!1}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online-student-info"]],inputs:{infoFields:"infoFields",formInfoInvalid:"formInfoInvalid"},outputs:{infoFieldsChange:"infoFieldsChange",formInfoInvalidChange:"formInfoInvalidChange"},features:[t.qOj],decls:17,vars:10,consts:[[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"p-5"],["class","info-field",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","config-student-info-FlktZt6AJN",1,"btn","btn-primary","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"inline-block","ml-3","leading-relaxed","text-slate-500","text-xs"],[1,"info-field"],[1,"grid","grid-cols-12","gap-5",3,"ngClass"],[1,"col-span-12","md:col-span-7"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text",1,"form-control",3,"ngClass","readonly","placeholder","value","change"],[1,"col-span-8","md:col-span-3"],["appearance","outline"],[3,"value","disabled","selectionChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"col-span-4","md:col-span-2","text-right"],["azt-track-service","config-student-info-DEsxAq2B3",1,"btn","btn-secondary",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["class","info-content",4,"ngIf"],[1,"info-content"],["class","py-2",4,"ngFor","ngForOf"],[1,"py-2","flex","mb-3"],["azt-track-service","config-student-info-NVQjKt97Fu",1,"btn","btn-secondary","btn-sm","mr-2",3,"click"],[4,"ngIf"],["azt-track-service","config-student-info-OcHEB-Morx",1,"btn","btn-secondary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],[1,"azt-fast-content",3,"ngClass"],[1,"azt-fast","p-4"],[1,"dialog-content"],["rows","4",1,"form-control",3,"change"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"text-right","my-4"],["azt-track-service","config-student-info-8-eIbBQm3W",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["azt-track-service","config-student-info-2A5hJbaAWL",1,"btn","btn-primary","btn-sm",3,"click"],[1,"py-2"],[1,"flex","items-center"],[1,"w-full","mx-2"],["type","text",1,"form-control",2,"border","none","box-shadow","none",3,"placeholder","value","change"],["azt-track-service","config-student-info-QGYSvwSMLT",1,"btn","btn-primary","rounded-full",2,"padding","2px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["type","radio","disabled","",1,"form-check-input","cursor-default"],["type","checkbox","disabled","",1,"form-check-input","cursor-default"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["cx","12","cy","12","r","10"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,l2,35,36,"div",4),t.qZA()(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return i.addNewFields("")}),t.O4$(),t.TgZ(9,"svg",7),t._UZ(10,"line",8)(11,"line",9),t.qZA(),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(14,"span",10),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_test_config_configuration")," "),t.xp6(3),t.Q6J("ngForOf",i.infoFields),t.xp6(6),t.hij(" ",t.lcZ(13,6,"lang_testbank_test_config_add_information")," "),t.xp6(3),t.hij(" *",t.lcZ(16,8,"lang_testbank_test_config_click_add_infomation"),". "))},dependencies:[E.mk,E.sg,E.O5,Bi.ey,Fn.KE,no.gD,Le.gM,_t.bT],encapsulation:2}),n})();var u2=A(97153),ls=A(99568),ta=A(15431),d2=A(70831),Sa=A(48229);function _2(n,a){1&n&&(t.TgZ(0,"div",25)(1,"div",26)(2,"span",27),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function m2(n,a){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"azt-standalone-question",28),t.qZA()),2&n){const e=t.oxw(),i=e.$implicit,o=e.index,s=t.oxw(2);t.xp6(1),t.Q6J("follower",s.followerRenderQuest)("displayScreen",1)("question",i)("index",o)("startQuestionIndex",null==s.examObj?null:s.examObj.startQuestionIndex)("expandInfo",null==s.examObj?null:s.examObj.expandInfo)}}function p2(n,a){if(1&n&&(t.ynx(0),t.YNc(1,m2,2,6,"div",0),t.BQk()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.groupId===i.data.groupId||(null==e.groupInfo?null:e.groupInfo.groupId)===i.data.groupId)}}function h2(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),t._UZ(5,"div",14),t.qZA(),t.TgZ(6,"div",15)(7,"a",16)(8,"span",17),t._UZ(9,"lucide-icon",18),t.qZA()()()(),t.TgZ(10,"azt-mat-dialog-content",19),t.YNc(11,_2,5,3,"div",20),t.TgZ(12,"div",21),t._UZ(13,"div",22),t.YNc(14,p2,2,1,"ng-container",23),t._UZ(15,"div",24),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.statusObj.loading),t.xp6(3),t.Q6J("ngForOf",e.questionList)}}function g2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",29),t.NdJ("exportDataDone",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.exportDataDone(o))}),t.qZA()}if(2&n){const e=t.oxw();let i;t.Q6J("startQuestionIndex",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("objs",e.exportExcelData)}}let f2=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m){super(),this.shareFileFlutterService=e,this.fb=i,this.baseApiService=o,this.permissionService=s,this.exportDocxService=r,this.examService=l,this.offlineExamExportService=c,this.printAnswersheetService=u,this.dialogRef=d,this.data=m,this.closeDialog=new t.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new ls.G,this.isResizeEvent=!0,this.showFormAddInformation=!1,this.printAddInfo={},this.getBase64FromUrl=p=>(0,so.mG)(this,void 0,void 0,function*(){const y=yield(yield fetch(p)).blob();return new Promise(C=>{const I=new FileReader;I.readAsDataURL(y),I.onloadend=()=>{C(I.result)}})})}closeChangeInformation(e){this.showFormAddInformation=!1,e&&setTimeout(()=>{this.downloadExam()},100)}getEmitDataForm(e){e&&(this.printAddInfo=e)}onResize(){let e=document.getElementById("block__view--pdf");this.widthBlockPdf=e?.offsetHeight,this.widthBlockPdf=this.widthBlockPdf/2}btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){var e,i;return`${this.commonService.getCurrentDomain()}/de-thi/${null===(i=null===(e=this.data)||void 0===e?void 0:e.obj)||void 0===i?void 0:i.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(){var e,i,o,s,r;let l=null!==(e=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu"))&&void 0!==e?e:"";Ro.G.openLoadingEffect(`${l}...`);let c={nameSchool:null!==(i=this.printAddInfo.nameSchool)&&void 0!==i?i:"",nameSubject:null!==(o=this.printAddInfo.nameSubject)&&void 0!==o?o:""},u=null!==(s=this.printAddInfo.templateType)&&void 0!==s?s:0;this.data.obj&&(this.data.obj.hideGroupQuestion=0),this.exportDocxService.downloadExam(!1,null!==(r=this.data.obj)&&void 0!==r?r:{},void 0,void 0,this.cloneQuestionList,c,u).catch(d=>{this.showErrorSnack(d.message)})}html2pdfAction(e){var i,o,s;try{u2().set({pagebreak:{mode:"avoid-all"}}).from(e).save("azota_save_"+this.commonService.convertVietnameseToEnglish(null!==(s=null===(o=null===(i=this.data)||void 0===i?void 0:i.obj)||void 0===o?void 0:o.name)&&void 0!==s?s:"")+".pdf")}catch{}}getData(e){var i;this.initStatusObj(),this.permissionService.hasViewPermission("exam",e?.permissionObj)?this.examService.apiExamGetQuestionsIdGet(null!==(i=e?.id)&&void 0!==i?i:0).subscribe(o=>{var s,r,l;const c=null!==(r=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify((null===(s=o.data)||void 0===s?void 0:s.questionObjs)||[])))&&void 0!==r?r:[];this.followerRenderQuest.setNumQuest(c.length),this.addRoleQuestion(c),this.cloneQuestionList=this.commonService.myClone(c),this.questionList=c,this.examObj=null===(l=o.data)||void 0===l?void 0:l.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(e){for(let i=0;i<e.length;i++)e[i].isRoleTeacher=!0}downloadExamAnswer(){var e,i;this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(null!==(i=null===(e=this.examObj)||void 0===e?void 0:e.hashId)&&void 0!==i?i:"").subscribe(o=>{var s,r;if(1===o.success){let l=null===(s=o.data)||void 0===s?void 0:s.objs;l&&l.length>0&&(this.exportExcelData=this.commonService.myClone(l))}else this.errorStatusObj(null!==(r=o.message)&&void 0!==r?r:"")}))}exportDataDone(e){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(e,i)}createNameExam(e,i){var o,s,r,l,c,u,d;let m="";m="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,null!==(s=null===(o=this.examObj)||void 0===o?void 0:o.name)&&void 0!==s?s:"",""):"answerexcel"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,null!==(l=null===(r=this.examObj)||void 0===r?void 0:r.name)&&void 0!==l?l:"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,null!==(u=null===(c=this.examObj)||void 0===c?void 0:c.name)&&void 0!==u?u:"","",void 0),i&&(m=null!==(d=this.commonService.replaceAll(m,"_","-"))&&void 0!==d?d:"");let p=".docx";return p="answersheet"==e?".pdf":p,p="answerexcel"==e?".xlsx":p,m+p}ngOnInit(){var e;!(null===(e=this.data)||void 0===e)&&e.obj&&this.getData(this.data.obj),window.addEventListener("resize",()=>{this.isResizeEvent=!1;let i=this,o=setTimeout(()=>{i.isResizeEvent=!0},250);clearTimeout(o)}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ka.g),t.Y36(h.QS),t.Y36(Zn._),t.Y36(ta.$),t.Y36(T_.m),t.Y36(d2.O),t.Y36(Bt.qr),t.Y36(ml.Y),t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-preview-group-exam"]],hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:19,vars:11,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],[3,"startQuestionIndex","objs","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"flex","justify-center","items-center","h-40"],["role","status",1,"spinner-border"],[1,"sr-only"],[3,"follower","displayScreen","question","index","startQuestionIndex","expandInfo"],[3,"startQuestionIndex","objs","exportDataDone"]],template:function(e,i){1&e&&(t.YNc(0,h2,16,2,"ng-container",0),t.ALo(1,"viewPermission"),t.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),t.NdJ("click",function(){return i.downloadExam()}),t.TgZ(8,"span",5),t._UZ(9,"lucide-icon",6),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"li")(13,"a",7),t.NdJ("click",function(){return i.downloadExamAnswer()}),t.TgZ(14,"span",5),t._UZ(15,"lucide-icon",8),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()(),t.YNc(18,g2,1,2,"azt-export-excel-for-answersheet",9)),2&e&&(t.Q6J("ngIf",t.xi3(1,4,null==i.data||null==i.data.obj?null:i.data.obj.permissionObj,"exam")),t.xp6(10),t.hij(" ",t.lcZ(11,7,"lang_auto_tai_xuong_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(17,9,"lang_auto_tai_xuong_dap_an_de_thi")," "),t.xp6(2),t.Q6J("ngIf",null!=i.exportExcelData))},dependencies:[E.sg,E.O5,z.ZT,ke.VK,f.Nh5,Sa.$,dl.O,Pu.j,_t.bT,_t.Pz],encapsulation:2}),n})();const N_=function(n){return{paddingCustomQuestion:n}};function x2(n,a){if(1&n&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,N_,1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&e.examGroupInfos.length>1)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_nhap_so_luong_cau")," ")}}const v2=function(n){return{"is-invalid":n}};function b2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18),t.NdJ("input",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.validWhenChangeLimitMixquestionValue())}),t.qZA()(),t.TgZ(5,"div",19)(6,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changesMixQuestionGroupType())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngClass",t.VKq(5,v2,e.formControlLimitMixQuestion.invalid||e.checkValidateCountQuestion)),t.xp6(2),t.Q6J("disabled",e.examGroupInfos.length<=1),t.xp6(1),t.hij(" ",t.lcZ(8,3,"lang_testbank_test_config_get_with_group")," ")}}const D_=function(n){return{"border-danger":n}};function y2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",48),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.validateWhenChangeGroupValue(o.controls.groupId))})("keydown",function(o){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.triggerCtrlEnter(o,s.controls.groupId))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(1,D_,!e.valid||!i.totalTakeQuestion))}}function w2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",49),t.NdJ("input",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.validateWhenChangeGroupValue(o.controls.groupId))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(1,D_,!e.valid||!i.totalTakeQuestion))}}function k2(n,a){1&n&&t._UZ(0,"input",50)}function C2(n,a){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score")," "))}function T2(n,a){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function A2(n,a){1&n&&(t.TgZ(0,"div",52),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_the_number_of_sentences_in_the_group_equal_to_0_points_will_not_be_counted")," "))}function S2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",32),t.ynx(1,1),t.TgZ(2,"div",33)(3,"p",34),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",35),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.previewGroupExam(s.controls.groupId.value))}),t.TgZ(8,"span",36),t.ALo(9,"mytranslate"),t._UZ(10,"lucide-icon",37),t.qZA()()(),t.TgZ(11,"div",38),t.YNc(12,y2,1,3,"input",39),t.YNc(13,w2,1,3,"input",40),t.YNc(14,k2,1,0,"input",41),t.TgZ(15,"div",42)(16,"div",43),t.ALo(17,"mytranslate"),t._UZ(18,"label",44),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"input",45),t.NdJ("input",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.validateWhenChangeGroupValue(s.controls.groupId))}),t.qZA()()(),t.YNc(22,C2,3,3,"div",46),t.YNc(23,T2,3,3,"div",46),t.ALo(24,"numberFloat"),t.YNc(25,A2,3,3,"div",47),t.ALo(26,"numberFloat"),t.BQk(),t.qZA()}if(2&n){const e=a.$implicit,i=a.index;t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.HOy(" ",t.lcZ(5,20,"lang_testbank_test_config_group")," ",i+1," (",e.controls.maxQuestion.value," ",t.lcZ(6,22,"lang_testbank_test_config_question"),") "),t.xp6(4),t.s9C("matTooltip",t.lcZ(9,24,"lang_auto_xem_chi_tiet")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(4),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1==e.controls.isFixed.value),t.xp6(2),t.s9C("matTooltip",t.lcZ(17,26,"lang_core_enter_total_group_score")),t.Q6J("matTooltipShowDelay",1e3)("matTooltipDisabled",0!==i),t.xp6(2),t.s9C("for","total_group_score_"+(i+1)),t.xp6(1),t.hij(" ",t.lcZ(20,28,"lang_auto_Diem")," "),t.xp6(2),t.s9C("id","total_group_score_"+(i+1)),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.controls.totalQuestion.value>0&&""==e.controls.totalGroupScore.value&&0!==e.controls.totalGroupScore.value),t.xp6(1),t.Q6J("ngIf",""!==e.controls.totalGroupScore.value&&e.controls.totalQuestion.value>0&&(0===e.controls.totalGroupScore.value||"0"===e.controls.totalGroupScore.value||0===t.lcZ(24,30,e.controls.totalGroupScore.value))),t.xp6(2),t.Q6J("ngIf",0==e.controls.totalQuestion.value&&t.lcZ(26,32,e.controls.totalGroupScore.value)>0)}}function O2(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"div",23),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",24),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",25)(12,"a",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.changesMixQuestionGroupType())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()(),t.TgZ(15,"div",27)(16,"ng-scrollbar",28)(17,"div",29),t.ynx(18,30),t.YNc(19,S2,27,34,"div",31),t.BQk(),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,9,"lang_auto_so_luong_cau_hoi_can_lay")," "),t.xp6(3),t.lnq("(",e.totalTakeQuestion,"/",e.obj.countQuestion," ",t.lcZ(7,11,"lang_auto_cau_brackets"),""),t.xp6(3),t.hij(" ",t.lcZ(10,13,"lang_testbank_total_score_entered")+": "+e.totalPoint," "),t.xp6(4),t.hij(" ",t.lcZ(14,15,"lang_testbank_test_config_cancel_get_with_group")," "),t.xp6(3),t.Q6J("visibility","hover")("autoHeightDisabled",!1),t.xp6(3),t.Q6J("ngForOf",e.formArrayGroupInfos.controls)}}function E2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function M2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function I2(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t._UZ(4,"br"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_vui_long_nhap_nho_hon_tong_so_cau")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_auto_cau_brackets")," ")}}function L2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_nho_hon_hoac_bang_120")," "))}function Z2(n,a){if(1&n&&(t.TgZ(0,"div",53),t.YNc(1,E2,4,3,"span",54),t.YNc(2,M2,4,3,"span",54),t.YNc(3,I2,5,7,"span",54),t.YNc(4,L2,4,3,"span",54),t.qZA()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.Q6J("ngIf",""==e.form.controls.limitMixQuestion.value),t.xp6(1),t.Q6J("ngIf",""!=e.form.controls.limitMixQuestion.value&&e.form.controls.limitMixQuestion.value<=0),t.xp6(1),t.Q6J("ngIf",e.form.controls.limitMixQuestion.value>(null!==(i=e.obj.countQuestion)&&void 0!==i?i:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&e.form.controls.limitMixQuestion.value<e.totalTakeQuestion&&e.form.controls.limitMixQuestion.value>120)}}function P2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_nhap_qua_so_cau_toi_da_trong_nhom")," "))}function N2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_lon_hon_0")," "))}function D2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cac_cau_cua_cac_nhom_lon_hon_tong_so_cau")," "))}function j2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_nho_nhon_hoac_bang_120")," "))}function q2(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function F2(n,a){if(1&n&&(t.TgZ(0,"div",53),t.YNc(1,P2,4,3,"span",54),t.YNc(2,N2,4,3,"span",54),t.YNc(3,D2,4,3,"span",54),t.YNc(4,j2,3,3,"span",54),t.YNc(5,q2,4,3,"span",54),t.qZA()),2&n){const e=t.oxw(2);let i,o,s;t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion&&!(e.totalTakeQuestion>(null!==(i=e.obj.countQuestion)&&void 0!==i?i:0))),t.xp6(1),t.Q6J("ngIf",!e.totalTakeQuestion),t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion>(null!==(o=e.obj.countQuestion)&&void 0!==o?o:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&e.totalTakeQuestion<(null!==(s=e.obj.countQuestion)&&void 0!==s?s:0)&&(null!==(s=e.obj.countQuestion)&&void 0!==s?s:0)>120),t.xp6(1),t.Q6J("ngIf",e.checkEmpty)}}function Q2(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.gL8(" ",t.lcZ(2,6,"lang_testbank_test_config_enter_bigger_number_question_permanent")," (",e.minLimitMixQuestion," ",t.lcZ(3,8,"lang_testbank_test_config_question"),"), ",t.lcZ(4,10,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(5,12,"lang_testbank_test_config_question"),") ")}}function U2(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_testbank_test_config_enter_repuest_bigger_0"),", ",t.lcZ(3,6,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(4,8,"lang_testbank_test_config_question"),") ")}}function B2(n,a){if(1&n&&(t.TgZ(0,"span",58),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_testbank_test_config_validate_number_question_enter")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_testbank_test_config_question"),"). ")}}function R2(n,a){if(1&n&&(t.TgZ(0,"div",55),t.YNc(1,Q2,6,14,"span",54),t.YNc(2,U2,5,10,"span",54),t.YNc(3,B2,4,7,"span",56),t.TgZ(4,"a",57),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&e.minLimitMixQuestion>1&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&1==e.minLimitMixQuestion&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.mixQuestion.value&&e.isGroupMixQuestion),t.xp6(2),t.hij(" ",". "+t.lcZ(6,4,"lang_auto_tim_hieu_them")," ")}}function z2(n,a){1&n&&(t.TgZ(0,"div",59)(1,"p",60),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.TgZ(5,"a",61),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(2),t.AsE(" ",t.lcZ(3,3,"lang_auto_de_con_duoc_tao_tu_mot_luong_cau_hoi_duoc_lay_ngau_nhien_trong_de_goc_vi_du_de_goc_co_1000_cau_hoi")," ",t.lcZ(4,5,"lang_auto_ban_co_the_chi_in_40_cau_ngau_nhien_trong_1000_cau_hoi_do")," "),t.xp6(4),t.hij(" ",t.lcZ(7,7,"lang_auto_tim_hieu_them")," "))}function J2(n,a){if(1&n&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,N_,1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&e.examGroupInfos.length>1)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_testbank_enter_the_total_score_for_subtopics")," ")}}function H2(n,a){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_total_score")," "))}function $2(n,a){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_total_score_greater_than_0")," "))}function K2(n,a){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",62),t._UZ(4,"input",63),t.YNc(5,H2,3,3,"div",46),t.YNc(6,$2,3,3,"div",46),t.ALo(7,"numberFloat"),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",""==e.form.controls.totalPointQuestionNoGroup.value&&0!==e.form.controls.totalPointQuestionNoGroup.value),t.xp6(1),t.Q6J("ngIf",(0===e.form.controls.totalPointQuestionNoGroup.value||"0"===e.form.controls.totalPointQuestionNoGroup.value||0===t.lcZ(7,3,e.form.controls.totalPointQuestionNoGroup.value))&&""!==e.form.controls.totalPointQuestionNoGroup.value)}}const Y2=function(n,a){return{"md:col-span-9 setting-form-input-default-style":n,"col-md-12 setting-form-input-with-no-left-column":a}},G2=function(n,a){return{"md:col-span-9 setting-form-input-default-style mt-4":n,"col-span-12 mt-2 setting-form-input-with-no-left-column":a}};function W2(n,a){if(1&n&&(t.ynx(0,1),t.TgZ(1,"div",2),t.YNc(2,x2,4,6,"div",3),t.TgZ(3,"div",4)(4,"div",5),t.YNc(5,b2,9,7,"div",6),t.YNc(6,O2,20,17,"div",7),t.YNc(7,Z2,5,4,"div",8),t.YNc(8,F2,6,5,"div",8),t.YNc(9,R2,7,6,"div",9),t.YNc(10,z2,8,9,"div",10),t.qZA()(),t.YNc(11,J2,4,6,"div",3),t.TgZ(12,"div",11),t.YNc(13,K2,8,5,"div",6),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngClass",t.WLB(12,Y2,!e.fromPrintOffline,e.fromPrintOffline)),t.xp6(2),t.Q6J("ngIf",!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",e.isGroupMixQuestion&&e.examGroupInfos.length>1),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline),t.xp6(1),t.Q6J("ngIf",!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngClass",t.WLB(15,G2,!e.fromPrintOffline,e.fromPrintOffline)),t.xp6(1),t.Q6J("ngIf",!e.isGroupMixQuestion)}}let j_=(()=>{class n extends st.Q{constructor(e){super(),this.dialog=e,this.fromPrintOffline=!1,this.formArrayGroupInfosName="",this.formControlLimitMixQuestionName="",this.isGroupMixQuestion=!1,this.isGroupMixQuestionChange=new t.vpe,this.checkValidateCountQuestion=!1,this.checkValidateCountQuestionChange=new t.vpe,this.totalTakeQuestion=0,this.totalTakeQuestionChange=new t.vpe,this.hasChangeValueLimitQuestion=new t.vpe,this.isNotNullData=!1,this.isTooltipPoint=!1,this.totalPoint=0,this.checkEmpty=!1}emitDataToparent(){this.isGroupMixQuestionChange.emit(this.isGroupMixQuestion),this.checkValidateCountQuestionChange.emit(this.checkValidateCountQuestion),this.totalTakeQuestionChange.emit(this.totalTakeQuestion)}changeIsGroupMixQuestion(e){this.isGroupMixQuestion=e,this.emitDataToparent()}changeCheckValidateCountQuestion(e){this.checkValidateCountQuestion=e,this.emitDataToparent()}changeTotalTakeQuestion(e){this.totalTakeQuestion=e}changesMixQuestionGroupType(){this.changeIsGroupMixQuestion(!this.isGroupMixQuestion),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue()}setFormQuestion(e,i){let o=this.commonService.getFormObj(this.formArrayGroupInfos),s=this._getGroupMixquestionValue(e),r=this._countNullMixquestionValue();if(null!=s){if(this.commonService.isMobileOrTable())for(let l=0;l<o.length;l++)0==o[l].isFixed&&o[l].groupId!=e&&r>0&&(o[l].totalQuestion=Number(s>o[l].maxQuestion?o[l].maxQuestion:s));else for(let l=0;l<o.length;l++)0==o[l].isFixed&&o[l].groupId!=e&&i&&(o[l].totalQuestion=Number(s>o[l].maxQuestion?o[l].maxQuestion:s));this.formArrayGroupInfos.setValue(o),this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup()}this.isGroupMixQuestion&&this._validGroupMixquestionValue()}validateWhenChangeGroupValue(e){setTimeout(()=>{this.setFormQuestion(e.value,!1)},1500),this.isGroupMixQuestion&&this._validGroupMixquestionValue()}_validGroupMixquestionValue(){var e,i;let o=this._countNullMixquestionValue();if(this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup(),this.checkEmpty=!1,o)return this.changeCheckValidateCountQuestion(!0),this.checkEmpty=!0,!1;if(this.isGroupMixQuestion){let s=this.commonService.getFormObj(this.formArrayGroupInfos);for(let r=0;r<s.length;r++)if(s[r].totalQuestion>s[r].maxQuestion)return this.changeCheckValidateCountQuestion(!0),!1}return this.totalTakeQuestion>(null!==(e=this.obj.countQuestion)&&void 0!==e?e:0)||this.fromPrintOffline&&this.totalTakeQuestion>120||this.totalTakeQuestion<1||this.totalTakeQuestion<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):!(this.totalTakeQuestion>=this.minLimitMixQuestion&&this.totalTakeQuestion<=(null!==(i=this.obj.countQuestion)&&void 0!==i?i:0)&&(this.changeCheckValidateCountQuestion(!1),1))}validWhenChangeLimitMixquestionValue(){var e,i,o=this.form.controls.limitMixQuestion.value;return null!=o?(this.hasChangeValueLimitQuestion.emit(o),Number.isInteger(Number(o))?o>(null!==(e=this.obj.countQuestion)&&void 0!==e?e:0)||this.fromPrintOffline&&o>120||o<1||o<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):(o>=this.minLimitMixQuestion&&o<=(null!==(i=this.obj.countQuestion)&&void 0!==i?i:0)&&this.changeCheckValidateCountQuestion(!1),!0):(this.changeCheckValidateCountQuestion(!0),!1)):(this.changeCheckValidateCountQuestion(!0),!1)}resetFormQuestionGroup(){let e=this.commonService.getFormObj(this.formArrayGroupInfos);for(let i=0;i<e.length;i++)0===e[i].isFixed&&(e[i].totalQuestion=null);this.changeCheckValidateCountQuestion(!0),this.formArrayGroupInfos.setValue(e)}triggerCtrlEnter(e,i){e.ctrlKey&&"Enter"===e.code&&(this.setFormQuestion(i.value,!0),e.preventDefault())}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.isTooltipPoint=!1}_createMixGroupFormArray(e){this.formArrayGroupInfos.clear(),e.forEach(i=>{var o,s,r,l;let c=new h.cw({groupId:new h.p4(i.groupId),isFixed:new h.p4(i.isFixed),totalQuestion:new h.p4(i.limitQuestion,[h.kI.min(0),h.kI.max(null!==(o=i.totalQuestion)&&void 0!==o?o:0)]),maxQuestion:new h.p4(i.totalQuestion),totalGroupScore:new h.p4(null!==(s=i.totalGroupScore)&&void 0!==s?s:"",[h.kI.min(0)]),error:new h.p4(!1)});null===(r=this.formArrayGroupInfos)||void 0===r||r.push(c),this.totalTakeQuestion+=null!==(l=Number(i.limitQuestion))&&void 0!==l?l:0})}_convertExamGroupInfos(e,i,o,s){let r=[],l=0,c=[];return s?.objs&&(c=Object.keys(s?.objs).map(function(u){return s?.objs[u]})),e.forEach((u,d)=>{var m,p,b,y;let C=0;for(let I=l;I<l+c?.[d];I++)C+=null!==(m=s?.marks[I])&&void 0!==m?m:0;l+=null!==(p=c?.[d])&&void 0!==p?p:0,C=Math.round(100*C)/100,o?r.push(Object.assign(Object.assign({},u),{limitQuestion:u.totalQuestion,totalGroupScore:C})):i&&i.hasOwnProperty(null!==(b=u.groupId)&&void 0!==b?b:-1)&&r.push(Object.assign(Object.assign({},u),{limitQuestion:i[null!==(y=u.groupId)&&void 0!==y?y:-1],totalGroupScore:C}))}),r}_getGroupMixquestionValue(e){let i=this.commonService.getFormObj(this.formArrayGroupInfos),o=null;for(let s=0;s<i.length;s++)i[s].groupId==e&&(o=i[s].totalQuestion);return o}_countNullMixquestionValue(){let e=this.commonService.getFormObj(this.formArrayGroupInfos),i=0;for(let o=0;o<e.length;o++)null==e[o].totalQuestion&&i++;return i}_countTotalQuestionInMixGroup(){let e=this.commonService.getFormObj(this.formArrayGroupInfos);var i=0;for(let o=0;o<e.length;o++)e[o].totalQuestion&&e[o].totalQuestion>0&&(i+=Number(e[o].totalQuestion));return i}_countTotalPointInMixGroup(){let e=this.commonService.getFormObj(this.formArrayGroupInfos);var i=0;for(let o=0;o<e.length;o++)e[o].totalGroupScore&&e[o].totalGroupScore>0&&(i+=Number(e[o].totalGroupScore));return i}_checkNullData(){var e,i;return this.form&&(this.formArrayGroupInfos=null===(e=this.form)||void 0===e?void 0:e.get(this.formArrayGroupInfosName),this.formControlLimitMixQuestion=null===(i=this.form)||void 0===i?void 0:i.get(this.formControlLimitMixQuestionName)),!!(this.form&&this.formArrayGroupInfos&&this.formControlLimitMixQuestion&&null!=this.obj&&null!=this.minLimitMixQuestion&&null!=this.examGroupInfos&&null!=this.isGroupMixQuestion&&null!=this.checkValidateCountQuestion)}_initGroupData(){var e,i;this.examGroupInfos.length>0&&(1==(null===(e=this.obj.mixQuestionGroupInfoWithMarkObj)||void 0===e?void 0:e.status)?(this.changeIsGroupMixQuestion(!0),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,this.obj.mixQuestionGroupInfoWithMarkObj))):null!=this.obj.limitQuestionGroups&&0==(null===(i=this.obj.mixQuestionGroupInfoWithMarkObj)||void 0===i?void 0:i.status)?(this.changeIsGroupMixQuestion(!1),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,void 0))):this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,{},!0,void 0)),this.isGroupMixQuestion?this._validGroupMixquestionValue():this.validWhenChangeLimitMixquestionValue())}previewGroupExam(e){var i;let o={obj:this.obj,curCateId:null!==(i=this.obj.categoryId)&&void 0!==i?i:0,isOnLib:0,isShow:!0,showDelete:!1,groupId:e};this.dialog.open(f2,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:o,restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.isNotNullData=this._checkNullData(),this.isNotNullData&&this._initGroupData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online-mix-question"]],inputs:{fromPrintOffline:"fromPrintOffline",form:"form",formArrayGroupInfosName:"formArrayGroupInfosName",formControlLimitMixQuestionName:"formControlLimitMixQuestionName",obj:"obj",minLimitMixQuestion:"minLimitMixQuestion",examGroupInfos:"examGroupInfos"},outputs:{isGroupMixQuestionChange:"isGroupMixQuestionChange",checkValidateCountQuestionChange:"checkValidateCountQuestionChange",totalTakeQuestionChange:"totalTakeQuestionChange",hasChangeValueLimitQuestion:"hasChangeValueLimitQuestion"},features:[t.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","exam-get-mix-question",1,"grid","grid-cols-12","grap-5"],["class","col-span-12 md:col-span-3",3,"ngClass",4,"ngIf"],[1,"col-span-12","mt-2",3,"ngClass"],[1,"setting-block-create-sub","w-100"],["class","setting-block-mix-v1",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","col-span-12 mt-2 text-xs text-danger fade",4,"ngIf"],["class","col-span-12 leading-relaxed text-slate-500 text-xs px-0 mt-1",4,"ngIf"],["class","col-span-12 px-0 mt-2",4,"ngIf"],[3,"ngClass"],[1,"col-span-12","md:col-span-3",3,"ngClass"],[1,"font-medium","mt-5"],[1,"setting-block-mix-v1"],[1,"not-group"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","md:col-span-8","lg:col-span-9"],["type","text","appOnlyNumber","","formControlName","limitMixQuestion",1,"form-control",3,"ngClass","input"],[1,"col-span-6","md:col-span-4","lg:col-span-3"],["azt-track-service","config-mix-question-__RjMpaOvxg",1,"btn","btn-secondary","px-1","w-full",3,"disabled","click"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto"],[1,"mt-1"],[1,"flex"],["azt-track-service","config-mix-question-Bo6mIaGCJ9M",1,"btn","btn-sm","btn-outline-danger","mt-2","md:mt-0",3,"click"],[1,"mix_question_list"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"grid","grid-cols-12","gap-5","mb-5","p-3"],["formArrayName","groupInfos"],["class","col-span-12 md:col-span-6 lg:col-span-4 mt-1 shadow rounded-md p-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","mt-1","shadow","rounded-md","p-1"],[1,"flex","items-center","mb-1"],[1,"pb-0","text-left",2,"font-size","13.5px"],[1,"btn","btn-outline-secondary","btn-sm","btn-transparent","ml-2","p-0",3,"click"],[1,"w-5","h-5","inline-block",3,"matTooltip","matTooltipShowDelay"],["name","eye"],[1,"flex","items-center"],["class","azt-hidden md:block form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input","keydown",4,"ngIf"],["class","block md:hidden form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input",4,"ngIf"],["style"," width: 50%;","type","text","class","form-control","readonly","","formControlName","totalQuestion",4,"ngIf"],[1,"input-group","ml-2"],[1,"input-group-text",3,"matTooltip","matTooltipShowDelay","matTooltipDisabled"],[3,"for"],["type","text","appOnlyNumber","","formControlName","totalGroupScore",1,"form-control",3,"id","decimal","input"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","mt-2 text-pending text-xs",4,"ngIf"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"azt-hidden","md:block","form-control",2,"width","50%",3,"ngClass","input","keydown"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"block","md:hidden","form-control",2,"width","50%",3,"ngClass","input"],["type","text","readonly","","formControlName","totalQuestion",1,"form-control",2,"width","50%"],[1,"mt-2","text-danger","text-xs"],[1,"mt-2","text-pending","text-xs"],[1,"col-span-12","mt-2","text-xs","text-danger","fade"],[4,"ngIf"],[1,"col-span-12","leading-relaxed","text-slate-500","text-xs","px-0","mt-1"],["class","clearfix pt-1 text-left",4,"ngIf"],["href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"clearfix","pt-1","text-left"],[1,"col-span-12","px-0","mt-2"],[1,"text-slate-500","text-xs"],["azt-track-service","config-mix-question-bbIjXerrNkY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"col-span-12"],["type","text","appOnlyNumber","","formControlName","totalPointQuestionNoGroup",1,"form-control",3,"decimal"]],template:function(e,i){1&e&&t.YNc(0,W2,14,18,"ng-container",0),2&e&&t.Q6J("ngIf",i.isNotNullData)},dependencies:[E.mk,E.sg,E.O5,Le.gM,P.KC,h.Fj,h.JJ,h.JL,h.sg,h.u,h.CE,Bo.Y,Pe.M,f.Nh5,_t.bT,_t.Hb],encapsulation:2}),n})();function V2(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function X2(n,a){1&n&&(t.TgZ(0,"div",73),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_thoi_gian")," "))}function tb(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function eb(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"OK"),t.qZA())}function nb(n,a){1&n&&(t.TgZ(0,"div",74),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function ib(n,a){1&n&&(t.TgZ(0,"div",75),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_lua_chon_nay_cho_phep_nhung_hoc_sinh_khong_dang_ky_dang_nhap_tai_khoang_van_co_the_tham_gia_thi")," "))}function ob(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_you_not_yet_class")," "))}function ab(n,a){if(1&n&&(t.TgZ(0,"div",76),t.YNc(1,ob,3,3,"div",77),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.classroomIds.errors.checkboxValidator)}}function sb(n,a){1&n&&(t.TgZ(0,"div",79),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_tao_de_con_giam_sat_tu_dong_an_hien_dap_an_doing")," "))}function rb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",128)(1,"test-config-online-student-info",129),t.NdJ("infoFieldsChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.infoFields=o)})("formInfoInvalidChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.formInfoInvalid=o)}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("infoFields",e.infoFields)("formInfoInvalid",e.formInfoInvalid)}}function lb(n,a){1&n&&(t.TgZ(0,"div",87)(1,"div",82)(2,"label",130),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85),t._UZ(10,"input",131),t.qZA()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function cb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",87)(1,"div",82)(2,"label",132),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"a",133),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",84)(12,"div",45)(13,"div",85)(14,"input",134),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.checkValidateCountQuestion=!1)}),t.qZA()()()()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_dao_cau_hoi_va_dap_an")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_system_auto_mix_question_by_group")," "),t.xp6(3),t.hij(" ",t.lcZ(10,7,"lang_auto_tim_hieu_them")," "))}function ub(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",138)(1,"test-config-online-mix-question",139),t.NdJ("isGroupMixQuestionChange",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.isGroupMixQuestion=o)})("checkValidateCountQuestionChange",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.checkValidateCountQuestion=o)}),t.qZA()()}if(2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos)}}function db(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",87)(1,"div",82)(2,"label",135),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85)(10,"input",136),t.NdJ("change",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.checkValidateCountQuestion=!1)}),t.qZA()()(),t.YNc(11,ub,2,4,"div",137),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,6,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "),t.xp6(4),t.Q6J("disabled",0==e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.isCreateSubTest.value&&1==e.form.controls.mixQuestion.value)}}function _b(n,a){if(1&n&&(t.TgZ(0,"div",91)(1,"div",82)(2,"label",140),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",84)(9,"div",85),t._UZ(10,"input",141),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_co_dinh_cau_hoi_trong_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_khi_bat_chuc_nang_nay_he_thong_se_tu_dong_dao_cac_cau_hoi_dot")," "),t.xp6(4),t.Q6J("disabled",!e.form.controls.isCreateSubTest.value)}}function mb(n,a){1&n&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function pb(n,a){if(1&n&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function hb(n,a){1&n&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function gb(n,a){if(1&n&&(t.TgZ(0,"span",142),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function fb(n,a){1&n&&(t.TgZ(0,"div",143)(1,"div",44)(2,"label",144),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",101)(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",89)(10,"div",15),t._UZ(11,"input",145),t.ALo(12,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_test_config_limit_listing_audio")," "),t.xp6(4),t.Oqu(t.lcZ(8,5,"lang_testbank_test_config_empty_if_not_limit_listen")),t.xp6(4),t.MGl("placeholder"," ",t.lcZ(12,7,"lang_auto_nhap_so_luot_nghe")+" ...",""))}function xb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",80)(1,"div",81)(2,"div",82)(3,"label",83),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",84)(7,"div",85),t._UZ(8,"input",86),t.qZA()()(),t.TgZ(9,"div",87)(10,"div",44)(11,"label",88),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",89)(15,"div",15),t._UZ(16,"input",90),t.ALo(17,"mytranslate"),t.qZA()()(),t.TgZ(18,"div",91)(19,"div",44)(20,"label",42),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",89)(24,"div",45)(25,"div",92),t._UZ(26,"input",93),t.TgZ(27,"label",94),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.TgZ(30,"div",95),t._UZ(31,"input",96),t.TgZ(32,"label",97),t._uU(33),t.ALo(34,"mytranslate"),t.TgZ(35,"span",13),t.ALo(36,"mytranslate"),t._UZ(37,"lucide-icon",14),t.qZA()()(),t.TgZ(38,"div",49),t._UZ(39,"input",98),t.TgZ(40,"label",99),t._uU(41),t.ALo(42,"mytranslate"),t.TgZ(43,"span",13),t.ALo(44,"mytranslate"),t._UZ(45,"lucide-icon",14),t.qZA()()()()()(),t.TgZ(46,"div",87)(47,"div",82)(48,"label",100),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"div",101),t._uU(52),t.ALo(53,"mytranslate"),t.qZA()(),t.TgZ(54,"div",84)(55,"div",102),t._UZ(56,"input",103),t.qZA()(),t.YNc(57,rb,2,2,"div",104),t.qZA(),t.YNc(58,lb,11,6,"div",105),t.YNc(59,cb,15,9,"div",105),t.YNc(60,db,12,8,"div",105),t.YNc(61,_b,11,7,"div",106),t.TgZ(62,"div",87)(63,"div",82)(64,"label",107),t._uU(65),t.ALo(66,"mytranslate"),t.qZA(),t.TgZ(67,"div",101),t._uU(68),t.ALo(69,"mytranslate"),t.qZA()(),t.TgZ(70,"div",84)(71,"div",85),t._UZ(72,"input",108),t.qZA()()(),t.TgZ(73,"div",109)(74,"div",44)(75,"label",42),t._uU(76),t.ALo(77,"mytranslate"),t.qZA(),t.TgZ(78,"div",101),t.YNc(79,mb,3,3,"span",110),t.YNc(80,pb,3,4,"span",110),t.qZA()(),t.TgZ(81,"div",89)(82,"div",45)(83,"div",92),t._UZ(84,"input",111),t.TgZ(85,"label",112),t._uU(86),t.ALo(87,"mytranslate"),t.qZA()(),t.TgZ(88,"div",95),t._UZ(89,"input",113),t.TgZ(90,"label",114),t._uU(91),t.ALo(92,"mytranslate"),t.qZA()(),t.TgZ(93,"div",49),t._UZ(94,"input",115),t.TgZ(95,"label",116),t._uU(96),t.ALo(97,"mytranslate"),t.qZA()()()()(),t.TgZ(98,"div",117)(99,"div",44)(100,"label",42),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"div",101),t.YNc(104,hb,3,3,"span",110),t.YNc(105,gb,3,4,"span",110),t.qZA()(),t.TgZ(106,"div",89)(107,"div",45)(108,"div",92),t._UZ(109,"input",118),t.TgZ(110,"label",119),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()(),t.TgZ(113,"div",95),t._UZ(114,"input",120),t.TgZ(115,"label",121),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()(),t.TgZ(118,"div",49),t._UZ(119,"input",122),t.TgZ(120,"label",123),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()()()()(),t.TgZ(123,"div",124)(124,"div",44)(125,"label",125),t._uU(126),t.ALo(127,"mytranslate"),t.qZA()(),t.TgZ(128,"div",89)(129,"test-config-online-tag",126),t.NdJ("tagNamesChange",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.tagNames=o)}),t.qZA()()(),t.YNc(130,fb,13,9,"div",127),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,36,"lang_auto_chi_cho_phep_thi_mot_lan")," "),t.xp6(8),t.hij(" ",t.lcZ(13,38,"lang_testbank_test_config_password_exam")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(17,40,"lang_auto_nhap_mat_khau")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(22,42,"lang_testbank_test_config_automatic_monitoring")," "),t.xp6(7),t.hij(" ",t.lcZ(29,44,"lang_testbank_test_config_off")," "),t.xp6(5),t.hij(" ",t.lcZ(34,46,"lang_auto_giam_sat_thoat_man_hinh")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(36,48,"lang_auto_azota_se_ghi_lai_cac_lan_hoc_sinh_thoat_dot")),t.xp6(6),t.hij(" ",t.lcZ(42,50,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(44,52,"lang_auto_thuong_su_dung_cho_cac_ky_thi_doi_hoi_bao_mat_cao_hoc_sinh_can_dot")),t.xp6(6),t.hij(" ",t.lcZ(50,54,"lang_testbank_test_config_verify_profile_student")," "),t.xp6(3),t.hij(" ",t.lcZ(53,56,"lang_auto_khi_hoc_sinh_vao_lam_bai_se_phai_khai_bao_them_cac_thong_tin_dot")," "),t.xp6(5),t.Q6J("ngIf",1==e.form.controls.enterInfo.value),t.xp6(1),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&e.enableRandomQuestion||!e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value&&e.form.controls.isCreateSubTest.value),t.xp6(4),t.hij(" ",t.lcZ(66,58,"lang_auto_an_cau_hoi_nhom")," "),t.xp6(3),t.hij(" ",t.lcZ(69,60,"lang_auto_he_thong_se_an_di_phan_tieu_de_cua_moi_nhom_cau_hoi_co_trong_de_thi")," "),t.xp6(8),t.hij(" ",t.lcZ(77,62,"lang_auto_cho_xem_dap_an")," "),t.xp6(3),t.Q6J("ngIf",1==e.form.controls.whenShowAnswer.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.whenShowAnswer.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(87,64,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(92,66,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(97,68,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(102,70,"lang_auto_cho_xem_diem")," "),t.xp6(3),t.Q6J("ngIf",1==e.form.controls.whenShowResult.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.whenShowResult.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(112,72,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(117,74,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(122,76,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(127,78,"lang_testbank_test_config_add_tag")," "),t.xp6(3),t.Q6J("form",e.form)("tagNameCtrl",e.tagNameCtrl)("tagNames",e.tagNames)("allTagNames",e.allTagNames),t.xp6(1),t.Q6J("ngIf",e.isHasAudio)}}function vb(n,a){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui",147),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}function bb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",146),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.savePublishExam(0))}),t.YNc(1,vb,2,1,"span",72),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.checkValidateCountQuestion||e.formInfoInvalid||e.form.controls.classroomIds.errors),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_luu_nhap")," ")}}function yb(n,a){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui",147),t.qZA()),2&n&&(t.xp6(1),t.Q6J("type","oval"))}const wb=function(n){return{"h-56-important":n}};function kb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6)(4,"div",7)(5,"h3",8),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",9),t._UZ(9,"config-level-subject",10),t.TgZ(10,"div",11)(11,"div",5)(12,"label",12),t._uU(13),t.ALo(14,"mytranslate"),t.TgZ(15,"span",13),t.ALo(16,"mytranslate"),t._UZ(17,"lucide-icon",14),t.qZA()()(),t.TgZ(18,"div",5)(19,"div",15),t._UZ(20,"input",16),t.ALo(21,"mytranslate"),t.TgZ(22,"div",17),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.YNc(25,X2,3,3,"div",18),t.qZA()()(),t.TgZ(26,"div",19)(27,"div",5)(28,"label",20),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"span",13),t.ALo(32,"mytranslate"),t._UZ(33,"lucide-icon",14),t.qZA()()(),t.TgZ(34,"div",5)(35,"div",21)(36,"div",22)(37,"mat-form-field",23)(38,"input",24),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(44);return t.KtG(o.open())}),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"button",25),t.NdJ("click",function(o){return t.CHM(e),t.MAs(44).open(),t.KtG(o.stopPropagation())}),t.TgZ(41,"span",26),t._UZ(42,"lucide-icon",27),t.qZA()(),t.TgZ(43,"ngx-mat-datetime-picker",null,28),t.YNc(45,tb,2,0,"ng-template"),t.qZA()()(),t.TgZ(46,"div",22)(47,"mat-form-field",23)(48,"input",29),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(54);return t.KtG(o.open())}),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"button",30),t.NdJ("click",function(o){return t.CHM(e),t.MAs(54).open(),t.KtG(o.stopPropagation())}),t.TgZ(51,"span",26),t._UZ(52,"lucide-icon",27),t.qZA()(),t.TgZ(53,"ngx-mat-datetime-picker",null,31),t.YNc(55,eb,2,0,"ng-template"),t.qZA()()(),t.TgZ(56,"div",32)(57,"button",33),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearTime())}),t.TgZ(58,"span",34),t._UZ(59,"lucide-icon",35),t.qZA(),t._uU(60),t.ALo(61,"mytranslate"),t.qZA()()(),t.TgZ(62,"div",36)(63,"div",37),t._uU(64),t.ALo(65,"mytranslate"),t.qZA(),t.TgZ(66,"div",38),t._uU(67),t.ALo(68,"mytranslate"),t.qZA(),t.YNc(69,nb,3,3,"div",39),t.qZA()()(),t.TgZ(70,"div",40)(71,"div",41)(72,"label",42),t._uU(73),t.ALo(74,"mytranslate"),t.qZA(),t.YNc(75,ib,3,3,"div",43),t.qZA(),t.TgZ(76,"div",44)(77,"div",45)(78,"div",46)(79,"input",47),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearAllCheckBox(0))}),t.qZA(),t.TgZ(80,"label",48),t._uU(81),t.ALo(82,"mytranslate"),t.qZA()(),t.TgZ(83,"div",49)(84,"input",50),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clearAllCheckBox(2))}),t.qZA(),t.TgZ(85,"label",51),t._uU(86),t.ALo(87,"mytranslate"),t.qZA()()()(),t.TgZ(88,"div",52)(89,"div",53)(90,"div",54)(91,"h3",55),t._uU(92),t.ALo(93,"mytranslate"),t.qZA(),t.TgZ(94,"div",56),t._UZ(95,"azt-list-classroom-checkall",57),t.qZA()(),t.TgZ(96,"div",58)(97,"ng-scrollbar",59)(98,"azt-list-classroom-checkbox",60),t.NdJ("objsChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.classroomObjs=o)}),t.qZA()()()()(),t.YNc(99,ab,2,1,"div",61),t.qZA()()(),t.TgZ(100,"div",62)(101,"h3",63),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.toggleAdvancedSetting())}),t.TgZ(102,"span",64),t._uU(103),t.ALo(104,"mytranslate"),t.qZA(),t.TgZ(105,"span",65),t._UZ(106,"lucide-icon",66),t.qZA(),t.YNc(107,sb,3,3,"div",67),t.qZA(),t.YNc(108,xb,131,80,"div",68),t.qZA(),t.TgZ(109,"div",69),t.YNc(110,bb,4,5,"button",70),t.TgZ(111,"button",71),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.savePublishExam(1))}),t.YNc(112,yb,2,1,"span",72),t._uU(113),t.ALo(114,"mytranslate"),t.qZA()()()()()()}if(2&n){const e=t.MAs(44),i=t.MAs(54),o=t.oxw();t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(3),t.hij(" ",t.lcZ(7,46,"lang_auto_cau_hinh_chung")," "),t.xp6(3),t.Q6J("form",o.form)("schoolLevelObjs",o.schoolLevelObjs)("schoolSubjectObjs",o.schoolSubjectObjs)("typeView",1),t.xp6(4),t.hij(" ",t.lcZ(14,48,"lang_testbank_test_config_time_test_minutes")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(16,50,"lang_auto_thoi_gian_lam_bai_cua_hoc_sinh")),t.xp6(5),t.s9C("placeholder",t.lcZ(21,52,"lang_auto_nhap_thoi_gian")+" ..."),t.xp6(3),t.hij(" ",t.lcZ(24,54,"lang_testbank_test_config_enter_0_unlimited_time")," "),t.xp6(2),t.Q6J("ngIf",o.form.controls.minutes.errors),t.xp6(4),t.hij(" ",t.lcZ(30,56,"lang_testbank_test_config_time_assign_exam")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(32,58,"lang_auto_hoc_sinh_lam_bai_online_chi_duoc_lam_bai_vao_thoi_gian_giao_de")),t.xp6(7),t.s9C("placeholder",t.lcZ(39,60,"lang_auto_tu")),t.Q6J("ngxMatDatetimePicker",e),t.xp6(10),t.s9C("placeholder",t.lcZ(49,62,"lang_auto_den")),t.Q6J("ngxMatDatetimePicker",i),t.xp6(12),t.hij(" ",t.lcZ(61,64,"lang_auto_dat_lai")," "),t.xp6(4),t.hij(" ",t.lcZ(65,66,"lang_testbank_test_config_tutorial_time_assigne_exam"),". "),t.xp6(3),t.hij(" ",t.lcZ(68,68,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),". "),t.xp6(2),t.Q6J("ngIf",o.calculatorTimeValidate(o.form.controls.endTime.value,o.form.controls.startTime.value)<=0),t.xp6(4),t.hij(" ",t.lcZ(74,70,"lang_testbank_test_config_who_tested")," "),t.xp6(2),t.Q6J("ngIf",0==o.form.controls.whoAllow.value),t.xp6(6),t.hij(" ",t.lcZ(82,72,"lang_testbank_test_config_all_people")," "),t.xp6(5),t.hij(" ",t.lcZ(87,74,"lang_testbank_test_config_assigne_class")," "),t.xp6(2),t.Q6J("hidden",2!=o.form.controls.whoAllow.value),t.xp6(4),t.hij(" ",t.lcZ(93,76,"lang_auto_danh_sach_cac_lop")," "),t.xp6(3),t.Q6J("form",o.form)("objs",o.classroomObjs)("permissionName",o.permissionTypes.exam),t.xp6(2),t.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",t.VKq(82,wb,o.isMobileWebView)),t.xp6(1),t.Q6J("form",o.form)("objs",o.classroomObjs)("examClassroomObjs",o.examClassroomObjs)("permissionName",o.permissionTypes.exam),t.xp6(1),t.Q6J("ngIf",o.form.controls.classroomIds.errors),t.xp6(4),t.hij(" ",t.lcZ(104,78,"lang_auto_cau_hinh_nang_cao")," "),t.xp6(3),t.s9C("name",o.showAdvancedSetting?"chevron-up":"chevron-down"),t.xp6(1),t.Q6J("ngIf",!o.showAdvancedSetting),t.xp6(1),t.Q6J("ngIf",o.showAdvancedSetting),t.xp6(2),t.Q6J("ngIf",0==o.obj.isPublished),t.xp6(1),t.Q6J("disabled",o.checkValidateCountQuestion||o.formInfoInvalid||o.form.controls.classroomIds.errors),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(114,80,"lang_auto_xuat_ban")," ")}}let Cb=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.formBuilder=e,this.activeRoute=i,this.timeService=o,this.documentConfigService=s,this.sEAztClassroomCheckboxService=r,this.form=new h.nJ({}),this.permissionTypes=Ai.$,this.backToLink="",this.hashId="",this.prevData="",this.isSelectClassroom=!1,this.showAdvancedSetting=!0,this.tagNameCtrl=new h.p4,this.tagNames=[],this.allTagNames=[],this.obj={},this.classroomObjs=[],this.examClassroomObjs=[],this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.hasGroupQuestion=!1,this.minLimitMixQuestion=0,this.examGroupInfos=[],this.enableRandomQuestion=!1,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.infoFields=[],this.formInfoInvalid=!1,this.isHasAudio=0,this.modeView="general"}changModeView(e){var i;this.modeView=e,null===(i=document.getElementById(e))||void 0===i||i.scrollIntoView({behavior:"smooth"})}getGroupMixInfosSubmit(e){let i={},o=[];return e.forEach(r=>{var l;if(!i.hasOwnProperty(r.groupId)){i[r.groupId]=null!==(l=r.totalQuestion)&&void 0!==l?l:0;let c=[],u=Number(r.totalGroupScore)/Number(r.totalQuestion);for(let d=0;d<r.totalQuestion;d++)c.push(u);o=o.concat(c)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:o}}getMixInfoSubmit(e,i){let o=Number(i)/Number(e),s=new Array(Number(e)).fill(o);return{limitMixQuestion:Number(e),marks:s}}clearTime(){this.form.controls.startTime.setValue(""),this.form.controls.endTime.setValue("")}calculateTime(e,i){console.log(e);let o=new Date(e).getTime()+60*i*1e3;return this.timeService.formatFullDateTimeByUserUnit(o)}calculatorTimeValidate(e,i){return""!=e&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(e,i):1}checkInfosField(e){let i="",o="",s="";if(this.commonService.myTranslate(["lang_auto_ho_va_ten"]).subscribe(r=>{i=r.lang_auto_ho_va_ten}),this.commonService.myTranslate(["lang_auto_lop"]).subscribe(r=>{o=r.lang_auto_lop}),this.commonService.myTranslate(["lang_auto_truong"]).subscribe(r=>{s=r.lang_auto_truong}),null==e||""==e)this.infoFields.push({type:0,title:i,contents:[]}),this.infoFields.push({type:0,title:o,contents:[]}),this.infoFields.push({type:0,title:s,contents:[]});else{let r=this.commonService.myParseJson(e);this.infoFields=r??[]}}checkValidInfoField(){for(let e=0;e<this.infoFields.length;e++)if(0!=this.infoFields[e].type){if(!(this.infoFields[e].contents&&this.infoFields[e].contents.length>0)){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}{let i=this.infoFields[e].contents.filter(o=>""==o);if(i&&i.length>0){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}this.formInfoInvalid=!1}}else this.formInfoInvalid=!1}clearAllCheckBox(e){this.isSelectClassroom=2==e}toggleAdvancedSetting(){this.showAdvancedSetting=!this.showAdvancedSetting}redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}savePublishExam(e){var i;let o=null!==(i=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==i?i:0;this.form.controls.isRandomQuestion.value&&(this.form.controls.mixQuestion.setValue(!1),this.form.controls.isCreateSubTest.setValue(!1));let s=this.commonService.getFormObj(this.form);const r=this.tagNameCtrl.value;if(r?.trim()&&this.tagNames.push(r.trim()),this.calculatorTimeValidate(s.endTime,s.startTime)<0)return void this.showErrorSnack("lang_testbank_test_config_end_time_bigger_time_star");if(("1"==s.whenShowAnswer||"1"==s.whenShowResult)&&(!s.endTime||s.minutes<=0))return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian_giao_de_va_thoi_gian_lam_bai_khi_chon_khi_tat_ca_thi_xong");s.startTime=""===s.startTime||null===s.startTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(s.startTime),s.endTime=""===s.endTime||null===s.endTime?null:this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(s.endTime),s.isTakeTestOnce=1!=s.isTakeTestOnce?0:1,s.limitAudio=s.limitAudio>0?s.limitAudio:0,s.mixQuestion=s.mixQuestion?1:0,s.limitMixQuestion=s.limitMixQuestion>0?s.limitMixQuestion:0,s.enterInfo=1!=s.enterInfo?0:1;let l=this.getGroupMixInfosSubmit(s.groupInfos),c=this.getMixInfoSubmit(s.limitMixQuestion,s.totalPointQuestionNoGroup),u=s.isCreateSubTest&&1==s.mixQuestion?2:s.mixQuestion;if(1==s.enterInfo?this.checkValidInfoField():this.formInfoInvalid=!1,s.isCreateSubTest||(this.checkValidateCountQuestion=!1),this.formInfoInvalid||this.checkValidateCountQuestion)return void this.showErrorSnack("lang_auto_loi_hay_chac_chan_ban_da_dien_du_thong_tin");if(this.form.controls.classroomIds.errors)return void this.showErrorSnack("lang_auto_please_select_classroom");var d=this.sEAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,Ai.$.exam);const m=this.sEAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,d,s.classroomIds);if(s.mixQuestion){if(s.isCreateSubTest&&this.isGroupMixQuestion){let y=!1;if(this.form.controls.groupInfos.controls.forEach(C=>{var I,D,U,B,q,R,et,Q,V,Y,at,tt;const rt=C;return null==(null===(D=null===(I=rt.controls)||void 0===I?void 0:I.totalQuestion)||void 0===D?void 0:D.value)||""===(null===(B=null===(U=rt.controls)||void 0===U?void 0:U.totalQuestion)||void 0===B?void 0:B.value)?(this.showErrorSnack("lang_core_not_valid_mix_group_question"),void(y=!0)):null==(null===(R=null===(q=rt.controls)||void 0===q?void 0:q.totalGroupScore)||void 0===R?void 0:R.value)||""===(null===(Q=null===(et=rt.controls)||void 0===et?void 0:et.totalGroupScore)||void 0===Q?void 0:Q.value)||0==Number(null===(Y=null===(V=rt.controls)||void 0===V?void 0:V.totalGroupScore)||void 0===Y?void 0:Y.value)&&Number(null===(tt=null===(at=rt.controls)||void 0===at?void 0:at.totalQuestion)||void 0===tt?void 0:tt.value)>0?(this.showErrorSnack("lang_testbank_please_enter_all_correct_information"),void(y=!0)):void 0}),y)return}if(s.isCreateSubTest&&!this.isGroupMixQuestion&&(0==s.totalPointQuestionNoGroup||""==s.totalPointQuestionNoGroup))return void this.showErrorSnack("lang_testbank_please_enter_all_correct_information")}this.initStatusObj();let p={minutes:s.minutes,password:s.password,startTime:s.startTime,endTime:s.endTime,whenShowAnswer:s.whenShowAnswer,whenShowResult:s.whenShowResult,whoAllow:s.whoAllow,isPublished:e??void 0,autoMonitor:s.autoMonitor,limitAudio:s.limitAudio,tags:this.tagNames,isTakeTestOnce:s.isTakeTestOnce,mixQuestion:u,fixMixQuestion:s.fixMixQuestion?1:0,mixQuestionNotInGroupInfoWithMarkObj:c,isRandomQuestion:this.enableRandomQuestion?s.isRandomQuestion?1:0:void 0,enterInfo:s.enterInfo,classroomIds:m,infoFieldsV2:JSON.stringify(this.infoFields),price:s.price,isSaveConfig:1,hideGroupQuestion:s.hideGroupQuestion?1:0,mixQuestionGroupInfoWithMarkObj:l,schoolLevelId:Number(s.schoolLevel),schoolSubjectId:Number(s.schoolSubject)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,p).subscribe(b=>{var y;if(1==b.success){if(e){let C=`/admin/testbank/config-exam-online/${o??0}/${this.obj.hashId}?backto=`+encodeURIComponent(this.backToLink);this.commonService.myNavigationWithQueryString(`/admin/testbank/publish-document/0/${o??0}/${this.obj.hashId}`,"?backto="+encodeURIComponent(C))}else{let C=this.backToLink.includes("shareType");this.commonService.myNavigation(`/admin/testbank/document-management/0/${C?0:o??0}/1`)}this.successStatusObj()}else this.errorStatusObj(null!==(y=b.message)&&void 0!==y?y:"",!0)}))}getExamDataByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt;if(1==i.success){if(null!=i.data){let rt=null!==(s=null===(o=i.data)||void 0===o?void 0:o.examObj)&&void 0!==s?s:{},vt=null!==(r=this.castObj(rt))&&void 0!==r?r:{};vt.limitQuestionGroupsParse=this.commonService.myParseJson(null!==(l=rt.limitQuestionGroups)&&void 0!==l?l:""),this.obj=vt,this.hasGroupQuestion=!(null===(c=i.data)||void 0===c||!c.hasGroupQuestion),this.minLimitMixQuestion=null!==(u=i.data.minLimitMixQuestion)&&void 0!==u?u:0,this.examGroupInfos=i.data.examGroupInfos&&i.data.examGroupInfos.length>0?i.data.examGroupInfos:this.examGroupInfos,this.enableRandomQuestion=null!==(d=i.data.enableRandomQuestion)&&void 0!==d&&d;let gt=null===(b=null===(p=null===(m=i.data.examObj)||void 0===m?void 0:m.mixQuestionNotInGroupInfoWithMarkObj)||void 0===p?void 0:p.marks)||void 0===b?void 0:b.reduce((wt,jt)=>wt+jt,0);if(gt=Math.round(100*(gt??1))/100,this.classroomObjs=null!==(y=i.data.classroomObjs)&&void 0!==y?y:new Array,this.examClassroomObjs=null!==(C=i.data.examClassroomObjs)&&void 0!==C?C:[],i.data.examTagObjs)for(let wt=0;wt<i.data.examTagObjs.length;wt++)this.tagNames.push(null!==(I=i.data.examTagObjs[wt].name)&&void 0!==I?I:"");if(i.data.allTagObjs)for(let wt=0;wt<i.data.allTagObjs.length;wt++)this.allTagNames.push(null!==(D=i.data.allTagObjs[wt].name)&&void 0!==D?D:"");this.schoolLevelObjs=null!==(U=i.data.schoolLevelObjs)&&void 0!==U?U:[],this.schoolSubjectObjs=null!==(B=i.data.schoolSubjectObjs)&&void 0!==B?B:[];let ct=this.obj.schoolLevelId?this.obj.schoolLevelId:null!==(R=null===(q=i.data.examSchoolLogObj)||void 0===q?void 0:q.lastSchoolLevelId)&&void 0!==R?R:0,lt=this.obj.schoolSubjectId?this.obj.schoolSubjectId:null!==(Q=null===(et=i.data.examSchoolLogObj)||void 0===et?void 0:et.lastSchoolSubjectId)&&void 0!==Q?Q:0;this.hashId=null!==(V=this.obj.hashId)&&void 0!==V?V:"",this.isHasAudio=null!==(Y=i.data.isHasAudio)&&void 0!==Y?Y:0;let Et=2==this.obj.mixQuestion,It=1==this.obj.mixQuestion||2==this.obj.mixQuestion;this.isSelectClassroom="2"==String(this.obj.whoAllow),this.form.patchValue({schoolLevel:ct,schoolSubject:lt,isTakeTestOnce:0!=this.obj.isTakeTestOnce,password:this.obj.password,price:null!=this.obj.price?Number(this.obj.price):0,autoMonitor:String(this.obj.autoMonitor),minutes:this.obj.minutes,startTime:null!=this.obj.startTime?this.obj.startTime:"",endTime:null!=this.obj.endTime?this.obj.endTime:"",whenShowAnswer:String(this.obj.whenShowAnswer),whenShowResult:String(this.obj.whenShowResult),whoAllow:String(this.obj.whoAllow),mixQuestion:It,isRandomQuestion:1===this.obj.isRandomQuestion,isCreateSubTest:Et,limitMixQuestion:this.obj.limitMixQuestion,totalPointQuestionNoGroup:gt,fixMixQuestion:1==this.obj.fixMixQuestion,hideGroupQuestion:1==this.obj.hideGroupQuestion,limitAudio:null!=this.obj.limitAudio?Number(this.obj.limitAudio):0,enterInfo:0!=this.obj.enterInfo}),this.checkInfosField(null!==(at=this.obj.infoFieldsV2)&&void 0!==at?at:""),this.successStatusObj()}}else this.errorStatusObj(null!==(tt=i.message)&&void 0!==tt?tt:"",!0)}))}ngOnInit(){var e,i,o;this.form=this.formBuilder.group({schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required]),minutes:[60,[h.kI.required,h.kI.min(0)]],startTime:new h.p4(""),endTime:new h.p4("",[h.kI.required]),isTakeTestOnce:new h.p4("0"),autoMonitor:new h.p4("0"),password:new h.p4(""),whenShowAnswer:new h.p4("0"),whenShowResult:new h.p4("0"),whoAllow:new h.p4("0"),classroomIds:this.formBuilder.array([]),mixQuestion:new h.p4(!1),isCreateSubTest:new h.p4(!1),limitMixQuestion:new h.p4("",[h.kI.required]),totalPointQuestionNoGroup:new h.p4(10,[h.kI.required]),groupInfos:new h.vC([]),fixMixQuestion:new h.p4(!1),isRandomQuestion:new h.p4(!1),enterInfo:new h.p4(!1),price:new h.p4(0,[h.kI.min(0)]),limitAudio:new h.p4(0,[h.kI.min(0)]),hideGroupQuestion:new h.p4("0")},{validators:[Ys.customDateTimeValidator,va.h.classroomCheckBoxValidator]}),this.form.valueChanges.subscribe(c=>{let u=JSON.stringify(c);u!=this.prevData&&(this.prevData=u,this.form.patchValue(c))}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_test_config_online_description",image:""});let s=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,r=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",l=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"";this.backToLink=l||`/admin/testbank/document-management/0/${s}/1`,this.getExamDataByHashId(r),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(w.gz),t.Y36(Si.O),t.Y36(Hv.C),t.Y36(Vo.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online"]],features:[t._Bn([{provide:zn.fM,useClass:es.HF,deps:[Bi.Ad,Wo.o8]},{provide:zn.ab,useFactory:Qs.hx,deps:[Si.O]}]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12"],[3,"formGroup"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],["id","general",1,"box","p-5","mt-3"],[3,"form","schoolLevelObjs","schoolSubjectObjs","typeView"],["id","azt-config-time-minutes",1,"grid","grid-cols-12","mt-4"],["for","document-time-minutes",1,"form-label","font-medium","flex","items-center"],[1,"w-4","h-4","inline-block","ml-2",3,"matTooltip"],["name","info"],[1,"setting-input"],["id","document-time-minutes","appOnlyNumber","","formControlName","minutes","type","text",1,"form-control",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1"],["class","text-xs text-danger mt-1",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],["for","regular-form-1",1,"form-label","font-medium","flex","items-center"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","config-exam-online-zpjNTbf42S","matInput","","formControlName","startTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-WIIkPQrzu5","matSuffix","",2,"font-size","18px",3,"click"],[1,"w-4","h-4","inline-block"],["name","calendar-clock"],["startTime",""],["azt-track-service","config-exam-online-NFd3Eq4Vq9","matInput","","formControlName","endTime","readonly","",3,"placeholder","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-2LQ7XbEP9P","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","config-exam-online-ceMErvp9Ni",1,"btn","btn-outline-secondary","w-full",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","timer-reset"],[1,"text-xs","mt-2"],[1,"text-slate-500"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"form-label","font-medium","flex","items-center"],["class","leading-relaxed text-slate-500 text-xs mt-2",4,"ngIf"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio","value","0",1,"form-check-input",3,"change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio","value","2",1,"form-check-input",3,"change"],["for","config-who-class",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex"],["formArrayName","classroomIds",3,"form","objs","permissionName"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],["formArrayName","classroomIds",3,"form","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"setting-advanced","mt-5"],[1,"text-md","flex","items-center","font-medium","mr-2","cursor-pointer",3,"click"],[1,"uppercase"],[1,"w-4","h-4","inline-block","ml-2"],[3,"name"],["class","ml-5 text-md text-slate-600 hidden lg:block",4,"ngIf"],["class","box p-5 mt-3","id","advanced",4,"ngIf"],[1,"text-right","mt-5"],["azt-track-service","config-exam-online-w_k87Co86T","class","btn w-24 btn-pending mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","config-exam-online-IJPSsthNNv",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"text-danger","mt-1"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"col-span-12","mt-2","intro-y"],["class","text-xs text-danger",4,"ngIf"],[1,"text-xs","text-danger"],[1,"ml-5","text-md","text-slate-600","hidden","lg:block"],["id","advanced",1,"box","p-5","mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-5"],["for","config-once-test",1,"form-label","font-medium","flex","items-center"],[1,"col-span-2","lg:col-span-7"],[1,"setting-input","form-switch"],["id","config-once-test","formControlName","isTakeTestOnce","type","checkbox",1,"show-code","form-check-input"],[1,"grid","grid-cols-12","mt-4"],["for","config-password",1,"form-label","mt-2","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],["type","text","id","config-password","formControlName","password","type","text",1,"form-control",3,"placeholder"],[1,"grid","grid-cols-12","mt-5"],[1,"form-check","mr-8"],["id","automatic-off","type","radio","formControlName","autoMonitor","value","0",1,"form-check-input"],["for","automatic-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","automatic-exit-monitor","type","radio","formControlName","autoMonitor","value","1",1,"form-check-input"],["for","automatic-exit-monitor",1,"form-check-label","flex","items-center"],["id","automatic-advanced","type","radio","formControlName","autoMonitor","value","3",1,"form-check-input"],["for","automatic-advanced",1,"form-check-label","flex","items-center"],["for","config-verify-student",1,"form-label","font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],[1,"setting-input","form-switch","ml-"],["id","config-verify-student","formControlName","enterInfo","type","checkbox",1,"show-code","form-check-input"],["class","intro-y col-span-12 mt-5",4,"ngIf"],["class","grid grid-cols-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-5",4,"ngIf"],["for","config-hide-group-header",1,"form-label","font-medium","flex","items-center"],["id","config-hide-group-header","formControlName","hideGroupQuestion","type","checkbox",1,"show-code","form-check-input"],["id","whenShowAnswer-block",1,"grid","grid-cols-12","mt-4"],["class","clearfix pt-1",4,"ngIf"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","2",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-advanced",1,"form-check-label","flex","items-center"],["id","whenShowResult-block",1,"grid","grid-cols-12","mt-4"],["id","whenShowResult-off","type","radio","formControlName","whenShowResult","value","2",1,"form-check-input"],["for","whenShowResult-off",1,"form-check-label"],["id","whenShowResult-tested","type","radio","formControlName","whenShowResult","value","0",1,"form-check-input"],["for","whenShowResult-tested",1,"form-check-label","flex","items-center"],["id","whenShowResult-advanced","type","radio","formControlName","whenShowResult","value","1",1,"form-check-input"],["for","whenShowResult-advanced",1,"form-check-label","flex","items-center"],["id","tag-block",1,"grid","grid-cols-12","mt-4"],[1,"form-label","mt-2","font-medium","flex","items-center"],[2,"width","100%",3,"form","tagNameCtrl","tagNames","allTagNames","tagNamesChange"],["class","grid grid-cols-12 mt-4","id","exam-audio",4,"ngIf"],[1,"intro-y","col-span-12","mt-5"],[3,"infoFields","formInfoInvalid","infoFieldsChange","formInfoInvalidChange"],["for","config-random-matrix-question",1,"form-label","font-medium","flex","items-center"],["id","config-random-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-mix-question",1,"form-label","mb-0","font-medium","flex","items-center"],["azt-track-service","config-exam-online-vrhIU4hchP","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/dao-cau-hoi-va-dap-an/","target","_blank",1,"text-primary","font-medium"],["id","config-mix-question","formControlName","mixQuestion","type","checkbox",1,"show-code","form-check-input",3,"change"],["for","config-create-sub",1,"form-label","font-medium","flex","items-center"],["id","config-create-sub","formControlName","isCreateSubTest","type","checkbox",1,"show-code","form-check-input",3,"disabled","change"],["class","col-span-12 mt-4 intro-y",4,"ngIf"],[1,"col-span-12","mt-4","intro-y"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange"],["for","config-fix-mix",1,"form-label","font-medium","flex","items-center"],["id","config-fix-mix","formControlName","fixMixQuestion","type","checkbox",1,"show-code","form-check-input",3,"disabled"],[1,"clearfix","pt-1"],["id","exam-audio",1,"grid","grid-cols-12","mt-4"],["for","config-audio",1,"form-label","mt-2","mb-0","font-medium","flex","items-center"],["type","text","id","config-audio","appOnlyNumber","","formControlName","limitAudio",1,"form-control",3,"placeholder"],["azt-track-service","config-exam-online-w_k87Co86T",1,"btn","w-24","btn-pending","mr-2",3,"disabled","click"],[3,"type"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,V2,1,0,"azt-loading-effect",1),t.YNc(2,kb,115,84,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.mk,E.O5,Bs.Nt,Fn.KE,Fn.R9,Le.gM,zn.AB,zn.g2,P.KC,h._Y,h.Fj,h.Wl,h._,h.JJ,h.JL,h.sg,h.u,h.CE,xe.Q,Bo.Y,Pe.M,zi.o,Ne.g,rs.J,Xe._,f.Nh5,Wv,c2,j_,rl,_t.bT],encapsulation:2}),n})(),q_=(()=>{class n extends st.Q{constructor(e){super(),this.activeRoute=e,this.backToLink="",this.homeworkHashId=""}redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i,o;let s=null!==(e=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==e?e:"";this.homeworkHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",this.backToLink=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"";let r=this.commonService.getMyQueryParam("backto");this.backToLink=r??`/admin/testbank/document-management/1/${s??0}/1`}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-homework"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"headerBackTolink"],[3,"onBack"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"main-config-homework",1),t.NdJ("onBack",function(){return i.redirectBackTo()}),t.qZA()()),2&e&&t.Q6J("headerBackTolink",i.backToLink)},dependencies:[Xe._,Rs]}),n})();var ju=A(50491);let Tb=(()=>{class n extends st.Q{constructor(e){super(),this.activeRoute=e,this.linkCopy="",this.offlineCode="",this.hasOfflineExam=!1,this.checkValueInput=!1,this.form=new h.nJ({}),this.classroomObjs=[],this.isCheckAll=!1,this.shareClassroomIds=[],this.classIdsNotPermission=[],this.hashId="",this.cateId=""}ngOnInit(){var e;this.hashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"0",super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-share-offline-result"]],features:[t.qOj],decls:1,vars:2,consts:[[3,"examHashId","useDialog"]],template:function(e,i){1&e&&t._UZ(0,"azt-offline-share",0),2&e&&t.Q6J("examHashId",i.hashId)("useDialog",!1)},dependencies:[ju.W],styles:[".school-info_bg[_ngcontent-%COMP%]{background:#fff;height:100vh}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:#16236c}"]}),n})();function Ab(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Sb(n,a){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA(),t._uU(5," - "),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_auto_ma_de_loi"),": "),t.xp6(3),t.Oqu(e.rawOfflineMixQuestionHashId),t.xp6(3),t.hij(" ",t.lcZ(8,5,e.error)," ")}}function Ob(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"p",10),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",11)(8,"button",12),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showErrorBlock=!1)}),t.ALo(9,"mytranslate"),t.TgZ(10,"span",13),t._UZ(11,"lucide-icon",14),t.qZA()()()(),t.TgZ(12,"div",15),t.YNc(13,Sb,9,7,"p",16),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.lnq("",t.lcZ(5,5,"lang_testbank_there_is")," ",e.excelErrorObjs.length," ",t.lcZ(6,7,"lang_testbank_error_in_the_excel_file"),""),t.xp6(4),t.s9C("matTooltip",t.lcZ(9,9,"lang_auto_dong")),t.xp6(5),t.Q6J("ngForOf",e.excelErrorObjs)}}function Eb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Ob,14,11,"div",5),t.TgZ(5,"ui-create-offline-exam",6),t.NdJ("handleSaveData",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handleSaveQuestionAndExam(o))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_cms_create_exam_by_excel_title")," "),t.xp6(2),t.Q6J("ngIf",e.excelErrorObjs.length>0&&e.showErrorBlock),t.xp6(1),t.Q6J("form",e.form)("type",e.type)("dataExamOfflineByExcel",e.dataExamOfflineExcel)}}let Mb=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c){super(),this.editorOutputDataService=e,this.activeRoute=i,this.documentConfigService=o,this.formBuilder=s,this.offlineExamParserV2Service=r,this.offlineExamCreatorV2Service=l,this.redirectService=c,this.backToLink="",this.form=new h.nJ({}),this.prevData="",this.categoryId=0,this.type=Hi.excel,this.excelErrorObjs=[],this.showErrorBlock=!0,this.dataExamOfflineExcel={name:"",schoolLevelId:1,schoolSubjectId:1,orcLogId:-1,offlineMixQuestionObjs:[]},this.form=s.group({nameExam:new h.p4("",[h.kI.required,Ri._.noWhiteSpace]),codeExamList:s.array([]),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])})}onFileSelected(e){this.file=e?e[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)?this.processFile():(this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}processFile(){var e;this.initStatusObj();let i=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.subscriptions.add(this.offlineExamParserV2Service.apiOfflineExamParserV2ParserExcelV2PostForm(i,this.file).subscribe(o=>{var s,r,l,c,u,d;1==o.success?(this.dataExamOfflineExcel.excelOfflineMixQuestionObjs=null===(s=o.data)||void 0===s?void 0:s.excelOfflineMixQuestionObjs,this.dataExamOfflineExcel.orcLogId=null!==(l=null===(r=o.data)||void 0===r?void 0:r.orcLogId)&&void 0!==l?l:-1,this.excelErrorObjs=null!==(u=null===(c=o.data)||void 0===c?void 0:c.errors)&&void 0!==u?u:[],this.successStatusObj()):(this.errorStatusObj(null!==(d=o.message)&&void 0!==d?d:"",!0),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}))}handleSaveQuestionAndExam(e){let o={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,orcLogId:-6,offlineMixQuestionObjs:e};this.initStatusObj(),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(o).subscribe(s=>{var r,l,c;if(1===s.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");let u=`/admin/testbank/config-exam-offline/${this.categoryId}/${null===(l=null===(r=s.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.hashId}`;this.myNavigation(u)}else this.errorStatusObj(null!==(c=s.message)&&void 0!==c?c:"")}))}ngOnInit(){var e;super.ngOnInit(),this.categoryId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;var i=this.commonService.getMyQueryParam("backto");this.backToLink=i??"/admin/testbank/create-new-document/"+(null!=this.categoryId?this.categoryId:0),this.commonService.translateMetaData({title:"lang_cms_create_exam_by_excel_title",description:"lang_cms_create_exam_by_excel_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(s=>{let r=JSON.stringify(s);r!=this.prevData&&(this.prevData=r,this.form.patchValue(s))});const o=this.editorOutputDataService.getFirstFile();o?this.onFileSelected([o]):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Rn),t.Y36(w.gz),t.Y36(Bt.Cq),t.Y36(h.QS),t.Y36(Bt.Xe),t.Y36(Bt.Jt),t.Y36(v_.V))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-by-excel"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-lg","font-medium"],["class","col-md-12 mb-4 mt-2",4,"ngIf"],[3,"form","type","dataExamOfflineByExcel","handleSaveData"],[1,"col-md-12","mb-4","mt-2"],[1,"alert","alert-outline-danger","show","mb-2"],[1,"flex","items-center"],[1,"font-medium","text-lg"],[1,"ml-auto"],["azt-track-service","create-exam-by-excel-HGchE1J84tS",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Ab,1,0,"azt-loading-effect",1),t.YNc(2,Eb,6,7,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.sg,E.O5,Le.gM,xe.Q,Xe._,f.Nh5,fl,_t.bT],encapsulation:2}),n})(),Ib=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.activeRoute=e,this.formBuilder=i,this.offlineExamCreatorV2Service=o,this.documentConfigService=s,this.backToLink="",this.form=new h.nJ({}),this.prevData="",this.categoryId=0,this.form=i.group({nameExam:new h.p4("",[h.kI.required,Ri._.noWhiteSpace]),codeExamList:i.array([]),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])})}handleSaveQuestionAndExam(e){const o={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,orcLogId:-5,offlineMixQuestionObjs:e};this.initStatusObj(),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(o).subscribe(s=>{var r,l,c;if(1===s.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const u=`/admin/testbank/config-exam-offline/${this.categoryId}/${null===(l=null===(r=s.data)||void 0===r?void 0:r.obj)||void 0===l?void 0:l.hashId}`;this.myNavigation(u)}else this.errorStatusObj(null!==(c=s.message)&&void 0!==c?c:"")}))}ngOnInit(){var e,i;this.categoryId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:`/admin/testbank/create-new-document/${this.categoryId}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(o=>{let s=JSON.stringify(o);s!=this.prevData&&(this.prevData=s,this.form.patchValue(o))}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(h.QS),t.Y36(Bt.Jt),t.Y36(Bt.Cq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["create-by-hand"]],features:[t.qOj],decls:6,vars:5,consts:[[3,"headerBackTolink"],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","handleSaveData"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"ui-create-offline-exam",3),t.NdJ("handleSaveData",function(s){return i.handleSaveQuestionAndExam(s)}),t.qZA()()()),2&e&&(t.Q6J("headerBackTolink",i.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("form",i.form))},dependencies:[Xe._,fl,_t.bT],encapsulation:2}),n})(),Lb=(()=>{class n{constructor(){this.fileDrop=new t.vpe,this.preventBodyDrop=!0,this.active=!1}onDrop(e){e.preventDefault(),this.active=!1;const{dataTransfer:i}=e;if(i?.items){const o=[];for(let s=0;s<i.items.length;s++)"file"===i.items[s].kind&&i.items[s].getAsFile()&&o.push(i.items[s].getAsFile());i.items.clear(),Array.isArray(o)&&this.fileDrop.emit(this.removeNullFile(o))}else{const o=i?.files;i?.clearData(),o&&this.fileDrop.emit(Array.from(o))}}removeNullFile(e){for(var i=[],o=0;o<e.length;o++)e[o]&&i.push(e[o]);return i}onDragOver(e){e.stopPropagation(),e.preventDefault(),this.active=!0}onDragLeave(e){this.active=!1}onBodyDragOver(e){this.preventBodyDrop&&(e.preventDefault(),e.stopPropagation())}onBodyDrop(e){this.preventBodyDrop&&e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["","appDropZone",""]],hostVars:2,hostBindings:function(e,i){1&e&&t.NdJ("drop",function(s){return i.onDrop(s)})("dragover",function(s){return i.onDragOver(s)})("dragleave",function(s){return i.onDragLeave(s)})("dragover",function(s){return i.onBodyDragOver(s)},!1,t.pYS)("drop",function(s){return i.onBodyDrop(s)},!1,t.pYS),2&e&&t.ekj("drop-zone-active",i.active)},inputs:{preventBodyDrop:"preventBodyDrop"},outputs:{fileDrop:"appDropZone"}}),n})();function Zb(n,a){1&n&&t._UZ(0,"div",48)}let Pb=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.fb=e,this.activeRoute=i,this.editorOutputDataService=o,this.cur_cateId=0,this.backToLink="",this.isChooseFile=!1,this.form=new h.nJ({}),this.isFollowLibParser=!1,this.fileParser=new H.uD,this.isInitConf=!1,this.fileIcon="",this.msgLoading="",this.selectFile=s=>{let c=s.target.files;try{this.changeFileAction(c)}catch(u){alert(u)}}}redirectToMixBank(){this.commonService.myNavigation(`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/user/0`)}redirectToCreateExamOfflineByHand(){this.commonService.myNavigation("/admin/testbank/create-exam-by-hand/"+(null!=this.cur_cateId?this.cur_cateId:0))}redirectToBack(){this.commonService.myNavigation("/testbank")}saveAndSwitch(e){this.editorOutputDataService.setFileProcess(e),this.commonService.myNavigation("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}startParser(e){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(i=>{this.msgLoading=i}),this.saveAndSwitch(e)}changeFileAction(e){if(this.file=void 0,null!==e)for(let i in e)"length"!=i&&"item"!=i&&(console.log("haiau",e[i].name),(0,ot.D_)(e[i].type)||(0,ot._4)(e[i].type)||(0,ot.Or)(e[i].type)||e[i].name.toLowerCase().endsWith(".azt")?(0,ot.EO)(e[i].size)<=200?(this.file=e[i],this.isChooseFile=!0):this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb"):this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"));this.file&&(this.getFileIcon(),this.startParser(this.file))}onDrop(e){try{this.changeFileAction(e)}catch(i){alert(i)}}getFileIcon(){var e,i,o,s;const r=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];this.file&&((0,ot.D_)(null!==(e=this.file.type)&&void 0!==e?e:"")&&!r.includes(null!==(i=this.file.type)&&void 0!==i?i:"")?this.fileIcon="azota_assets/images/word-icon.png":(0,ot._4)(null!==(o=this.file.type)&&void 0!==o?o:"")?this.fileIcon="azota_assets/images/pdf-icon.png":(0,ot.Or)(null!==(s=this.file.type)&&void 0!==s?s:"")?this.fileIcon="azota_assets/images/jpg-icon.png":this.file.type&&r.includes(this.file.type)&&(this.fileIcon="azota_assets/images/excel.png")),this.fileIcon="azota_assets/images/documents.png"}beforeOpenEditor(e="editor"){this.editorOutputDataService.setMode(e),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink="/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.form=this.fb.group({file:new h.p4("",h.kI.required)})}),this.commonService.translateMetaData({title:"lang_cms_test_create_new_title",description:"lang_cms_test_create_new_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(w.gz),t.Y36(Rn))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-new-document"]],features:[t.qOj],decls:109,vars:85,consts:[[3,"headerBackTolink"],[1,"intro-y","flex","items-center","mt-5"],[1,"text-lg","font-medium","mr-auto"],[1,"intro-y","chat","grid","grid-cols-12","gap-5","mt-5"],[1,"intro-y","col-span-12","lg:col-span-8","2xl:col-span-9"],[3,"formGroup","hidden"],["type","file","id","box-left-file-input","formControlName","file",1,"form-control","file-input",3,"change"],["fileSelect",""],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5",3,"appDropZone","click"],[1,"h-full","flex","items-center"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-16","h-16","text-primary"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-FxdEQuAx7G","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-cPk0ISITQT","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["role","alert",1,"alert","alert-secondary-soft","mt-3","p-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-circle","data-lucide","alert-circle",1,"lucide","lucide-alert-circle","w-6","h-6","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"col-span-12","lg:col-span-4","2xl:col-span-3"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane"],[1,"pr-1"],["azt-track-service","create-new-document-eWSFP-ZUFW",1,"box","px-5","py-10","zoom-in",3,"click"],[1,"w-12","h-12","flex-none","image-fit","overflow-hidden","mx-auto"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-pending"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"text-center","mt-3"],[1,"font-medium","text-lg"],[1,"text-slate-500","text-xs","mt-2"],["azt-track-service","create-new-document-ZQ2mrymJc","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tu-soan-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-KJvjOB4efQ",1,"box","px-5","py-10","mt-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-success"],["d","M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"],["azt-track-service","create-new-document-MC5alRfKcY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-PDK9L9LPGj",1,"box","px-5","py-10","mt-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-12","h-12","text-warning"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["class","loading",4,"ngIf"],[1,"loading"]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"form",5)(8,"input",6,7),t.NdJ("change",function(r){return i.selectFile(r)}),t.qZA()(),t.TgZ(10,"div",8),t.NdJ("appDropZone",function(r){return i.onDrop(r)})("click",function(){t.CHM(o);const r=t.MAs(9);return t.KtG(r.click())}),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11),t.O4$(),t.TgZ(14,"svg",12),t._UZ(15,"path",13)(16,"path",14),t.qZA()(),t.kcU(),t.TgZ(17,"div",15)(18,"div",16),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"div",17),t._uU(22),t.ALo(23,"mytranslate"),t._UZ(24,"br"),t._uU(25),t.ALo(26,"mytranslate"),t.TgZ(27,"b"),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t._uU(30,", "),t.TgZ(31,"b"),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t._uU(34),t.ALo(35,"mytranslate"),t.TgZ(36,"b"),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t._uU(39),t.ALo(40,"mytranslate"),t.TgZ(41,"a",18),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA(),t.TgZ(44,"div",19)(45,"azt-download-link-item",20),t.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),t.ALo(46,"convertCdnLinkOfGitHubWithLocale"),t.ALo(47,"mytranslate"),t.qZA(),t._uU(48,"\xa0|\xa0 "),t.TgZ(49,"azt-download-link-item",21),t.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),t.ALo(50,"convertRawLinkOfGitHubWithLocale"),t.ALo(51,"mytranslate"),t.qZA(),t._uU(52,"\xa0|\xa0 "),t.TgZ(53,"azt-download-link-item",22),t.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),t.ALo(54,"convertRawLinkOfGitHubWithLocale"),t.ALo(55,"mytranslate"),t.qZA()()()(),t.TgZ(56,"div",23),t.O4$(),t.TgZ(57,"svg",24),t._UZ(58,"circle",25)(59,"line",26)(60,"line",27),t.qZA(),t._uU(61),t.ALo(62,"mytranslate"),t.kcU(),t.TgZ(63,"b"),t._uU(64,".docx"),t.qZA(),t._uU(65,". "),t.qZA()()()()(),t.TgZ(66,"div",28)(67,"div",29)(68,"div",30)(69,"div",31),t.NdJ("click",function(){return i.beforeOpenEditor()}),t.TgZ(70,"div",32),t.O4$(),t.TgZ(71,"svg",33),t._UZ(72,"path",34)(73,"path",35),t.qZA()(),t.kcU(),t.TgZ(74,"div",36)(75,"div",37),t._uU(76),t.ALo(77,"mytranslate"),t.qZA()()(),t.TgZ(78,"div",38)(79,"span"),t._uU(80),t.ALo(81,"mytranslate"),t.qZA(),t.TgZ(82,"a",39),t._uU(83),t.ALo(84,"mytranslate"),t.qZA()(),t.TgZ(85,"div",40),t.NdJ("click",function(){return i.redirectToMixBank()}),t.TgZ(86,"div",32),t.O4$(),t.TgZ(87,"svg",41),t._UZ(88,"path",42),t.qZA()(),t.kcU(),t.TgZ(89,"div",36)(90,"div",37),t._uU(91),t.ALo(92,"mytranslate"),t.qZA()()(),t.TgZ(93,"div",38)(94,"span"),t._uU(95),t.ALo(96,"mytranslate"),t.qZA(),t.TgZ(97,"a",43),t._uU(98),t.ALo(99,"mytranslate"),t.qZA()(),t.TgZ(100,"div",44),t.NdJ("click",function(){return i.redirectToCreateExamOfflineByHand()}),t.TgZ(101,"div",32),t.O4$(),t.TgZ(102,"svg",45),t._UZ(103,"path",46),t.qZA()(),t.kcU(),t.TgZ(104,"div",36)(105,"div",37),t._uU(106),t.ALo(107,"mytranslate"),t.qZA()()()()()()(),t.YNc(108,Zb,1,0,"div",47),t.qZA()}2&e&&(t.Q6J("headerBackTolink",i.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,37,"lang_auto_tao_de_moi")," "),t.xp6(4),t.Q6J("formGroup",i.form)("hidden",!0),t.xp6(12),t.Oqu(t.lcZ(20,39,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),t.xp6(3),t.hij(" ",t.lcZ(23,41,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),t.xp6(3),t.hij("",t.lcZ(26,43,"lang_auto_can_upload")," "),t.xp6(3),t.Oqu(t.lcZ(29,45,"lang_auto_bai_tap")),t.xp6(4),t.Oqu(t.lcZ(33,47,"lang_auto_de_thi")),t.xp6(2),t.hij(" ",t.lcZ(35,49,"lang_auto_hoac")," "),t.xp6(3),t.Oqu(t.lcZ(38,51,"lang_auto_bang_dap_an")),t.xp6(2),t.hij(" ",t.lcZ(40,53,"lang_auto_de_cham_offline"),". "),t.xp6(3),t.hij(" ",t.lcZ(43,55,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.Q6J("dataUrl",t.lcZ(46,57,"azota_assets/medias_[LANG]/de_mau_azota.zip"))("target","_blank")("fileName",t.lcZ(47,59,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_pdf_model")("classStyle","text-primary"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(50,61,"azota_assets/medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",t.lcZ(51,63,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(54,65,"azota_assets/medias_[LANG]/de_mau_azota_excel_v2_2.xlsx?raw=true"))("target","_self")("fileName",t.lcZ(55,67,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_excel_model")("classStyle","text-primary"),t.xp6(8),t.hij(" ",t.lcZ(62,69,"lang_auto_azota_best_support_file_type")+" "," "),t.xp6(15),t.hij(" ",t.lcZ(77,71,"lang_auto_tu_soan_de_tren_azota")," "),t.xp6(4),t.hij("",t.lcZ(81,73,"lang_auto_su_dung_trinh_soan_thao_de_cua_azota_chinh_sua_tu_cac_mau_co_san_hoac_copy_and_paste_tu_cac_nguon_khac_nhau"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(84,75,"lang_auto_tim_hieu_them")),t.xp6(8),t.hij(" ",t.lcZ(92,77,"lang_auto_tao_ma_tran_de_thi")," "),t.xp6(4),t.hij("",t.lcZ(96,79,"lang_auto_azota_se_sinh_ngau_nhien_de_moi_tu_cac_chuyen_de_so_luong_cau_trong_moi_chuyen_de_cac_muc_do_kho_de_ma_nguoi_dung_lua_chon"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(99,81,"lang_auto_tim_hieu_them")),t.xp6(8),t.hij(" ",t.lcZ(107,83,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("ngIf",i.isFollowLibParser))},dependencies:[E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Pe.M,k_.o,Xe._,Lb,_t.bT,_t.y,_t.Rh],encapsulation:2}),n})();var F_=A(50727);function Nb(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Db(n,a){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"h3",8),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",10),t.TgZ(11,"a",11),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"polyline",14)(15,"line",15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,5,"lang_testbank_create_wibsite_result_header_title")," \u{1f389} "),t.xp6(4),t.hij(" ",t.lcZ(8,7,"lang_testbank_create_wibsite_result_address")," "),t.xp6(3),t.s9C("value",e.linkExerciseExist),t.xp6(1),t.Q6J("href",e.linkExerciseExist,t.LSH),t.xp6(5),t.hij(" ",t.lcZ(17,9,"lang_testbank_create_wibsite_result_Access")," ")}}let jb=(()=>{class n extends st.Q{constructor(e,i){super(),this.activeRoute=e,this.examService=i,this.subscriptions=new F_.w0,this.status_obj={loading:!1,error:!1},this.linkExerciseExist="",this.backToLink=""}getExamDataById(){this.status_obj={loading:!0,error:!1},this.subscriptions.add(this.examService.apiExamGetWebsiteInfoGet().subscribe(e=>{var i,o,s,r;1==e.success?(this.obj=null===(i=e.data)||void 0===i?void 0:i.obj,this.linkExerciseExist=`${null===(s=null===(o=e.data)||void 0===o?void 0:o.obj)||void 0===s?void 0:s.value}`,this.status_obj={loading:!1,error:!1}):(this.showErrorSnack(null!==(r=e.message)&&void 0!==r?r:""),this.status_obj={loading:!1,error:!0})}))}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getExamDataById(),this.backToLink="/admin/testbank/create-website"}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_result_title",description:"lang_cms_test_create_website_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-website-result"]],features:[t.qOj],decls:6,vars:6,consts:[[3,"headerTitle","headerBackTolink"],[1,"py-5","mt-8"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],[1,"azt-copy","relative","mt-3","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","create-website-result-F_Qjh-7fxPs","target","_blank",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1),t.YNc(3,Nb,1,0,"azt-loading-effect",2),t.YNc(4,Db,18,11,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const o=t.MAs(5);t.Q6J("headerTitle",t.lcZ(1,4,"lang_testbank_create_wibsite_result_header_title"))("headerBackTolink",i.backToLink),t.xp6(3),t.Q6J("ngIf",i.status_obj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,Xe._,_t.bT],styles:[".content-box[_ngcontent-%COMP%]{border-width:0px;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dcdcdc;border-radius:4px;box-shadow:none}.click-to-href[_ngcontent-%COMP%], .click-to-href[_ngcontent-%COMP%]:hover{color:#5f5f5f!important}@media only screen and (max-width: 992px){.box[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 768px){.box[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 576px){.box[_ngcontent-%COMP%]{width:90%}}@media only screen and (max-width: 380px){.box[_ngcontent-%COMP%]{width:95%}}"]}),n})();function qb(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Fb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleRunSriptIframe())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",53)(3,"path",54),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_buttom_edit")," "))}function Qb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleCancelEdit())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",56)(3,"polyline",57)(4,"line",58)(5,"line",59),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_buttom_cancel")," "))}function Ub(n,a){1&n&&(t.TgZ(0,"div",60),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()),2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function Bb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleRunSriptIframe())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_buttom_edit")))}function Rb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleCancelEdit())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_buttom_cancel")))}function zb(n,a){1&n&&(t.TgZ(0,"div",66),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(6),t.hij("",t.lcZ(7,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function Jb(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",9)(9,"h3",10)(10,"button",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"mat-menu",null,12)(15,"div",13)(16,"div",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleClickTemplate("templateExample"))}),t.TgZ(17,"div",15),t._UZ(18,"img",16),t.ALo(19,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(20,"h4"),t._uU(21,"Landing Teacher"),t.qZA()()()()()()(),t.TgZ(22,"div",17)(23,"div",18)(24,"div",19)(25,"button",20),t.O4$(),t.TgZ(26,"svg",21),t._UZ(27,"line",22)(28,"line",23)(29,"line",24),t.qZA()(),t.kcU(),t.TgZ(30,"mat-menu",null,25)(32,"div",26)(33,"ul",27)(34,"li"),t.YNc(35,Fb,6,3,"button",28),t.qZA(),t.TgZ(36,"li"),t.YNc(37,Qb,8,3,"button",29),t.qZA(),t.TgZ(38,"li"),t._UZ(39,"hr",30),t.qZA(),t.TgZ(40,"li")(41,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSaveTemplate())}),t.O4$(),t.TgZ(42,"svg",32),t._UZ(43,"path",33)(44,"polyline",34)(45,"polyline",35),t.qZA(),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()()()()()()(),t.kcU(),t.TgZ(48,"div",36)(49,"div",37),t.YNc(50,Ub,7,3,"div",38),t.YNc(51,Bb,3,3,"a",39),t.TgZ(52,"a",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSaveTemplate())}),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.YNc(55,Rb,3,3,"a",41),t.qZA()()(),t.TgZ(56,"div",42),t.YNc(57,zb,8,3,"div",43),t.qZA()(),t.TgZ(58,"div",44)(59,"div",45)(60,"div",46)(61,"div",47)(62,"div",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleClickTemplate("templateExample"))}),t.TgZ(63,"div",15),t._UZ(64,"img",16),t.ALo(65,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(66,"h4"),t._uU(67,"Landing Teacher"),t.qZA()()()()(),t.TgZ(68,"div",49)(69,"div",50),t._UZ(70,"iframe",51),t.ALo(71,"safe"),t.qZA()()()()}if(2&n){const e=t.MAs(14),i=t.MAs(31),o=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,21,"lang_testbank_create_wibsite_Sampling")),t.xp6(4),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(12,23,"lang_testbank_create_wibsite_Sampling")," "),t.xp6(5),t.Gre("template-item ","templateExample"==o.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(19,25,"azota_assets/templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(7),t.Q6J("matMenuTriggerFor",i),t.xp6(10),t.Q6J("ngIf",!o.isEditable),t.xp6(2),t.Q6J("ngIf",o.isEditable),t.xp6(9),t.hij(" ",t.lcZ(47,27,"lang_buttom_save")," "),t.xp6(4),t.Q6J("ngIf",o.isEditable),t.xp6(1),t.Q6J("ngIf",!o.isEditable),t.xp6(2),t.Oqu(t.lcZ(54,29,"lang_buttom_save")),t.xp6(2),t.Q6J("ngIf",o.isEditable),t.xp6(2),t.Q6J("ngIf",o.isEditable),t.xp6(5),t.Gre("template-item ","templateExample"==o.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(65,31,"azota_assets/templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(6),t.Q6J("src",t.lcZ(71,33,o.iframeSrc),t.uOi)}}let Hb=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.usersettingService=e,this.http=i,this.cdnService=o,this.activeRoute=s,this.baseApiService=r,this.apiUploadService=l,this.subscriptions=new F_.w0,this.isLoading=!1,this.isEditable=!1,this.templateName="templateExample",this.iframeSrc="/assets/templates/"+this.templateName+"/index.html",this.websiteUrl="",this.backToLink=""}handleClickTemplate(e){this.iframeSrc="/assets/templates/"+e+"/index.html",this.templateName=e}handleCancelEdit(){this.isEditable=!1,window.location.reload()}handleRunSriptIframe(){this.isEditable=!0;const e=document.getElementById("template-iframe"),i=e?e.contentWindow:null;i&&i.eval(`\n        // *** INSERT THE SCRIPT TAG TO HEAD ***\n        // ---------------------------------------\n        var scriptExist=document.getElementById('ladi');\n        if(!scriptExist){console.log('Script Exist');\n        var script=document.createElement('script');\n        var att=document.createAttribute('src');\n        var attId=document.createAttribute('id');\n        att.value='${this.cdnService.convertCdnLinkOfGitHub("azota_assets/templates/common/ladipage.v3.js")}';\n        attId.value='ladi'; script.setAttributeNode(att);\n        script.setAttributeNode(attId);\n\n        document.head.appendChild(script);}\n        `)}getWebsiteUrl(){this.initStatusObj(),this.subscriptions.add(this.usersettingService.apiUsersettingGetMyDomainGet().subscribe(e=>{var i,o,s;1==e.success?(null!==(i=e.data)&&void 0!==i&&i.obj&&null!==(o=e.data)&&void 0!==o&&o.obj.value?(this.websiteUrl=e.data.obj.value,this.websiteUrl=this.websiteUrl):this.websiteUrl=this.commonService.getLocalRouter(this.commonService.getHostUrl()+"/en/test/category/"+this.baseApiService.getUserObj().id+"/0/1"),this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"",!0)}))}handleSaveTemplate(){const e=document.getElementById("template-iframe"),i=e?e.contentWindow:null;if(i){i.eval("\n        // *** REMOVE LADI JS SCRIPT TAG ***\n        // ---------------------------------\n        const myScript = document.getElementById('ladi');\n        if(myScript){myScript.remove();}\n\n        // *** REMOVE INPUT FILE TAG  ***\n        // ------------------------------\n        var inputFiles = document.querySelectorAll('.tpl-input-file');\n        inputFiles.forEach(input=>{jQuery(input).unwrap(); input.remove();});\n\n        // *** REMOVE demo test iframe  ***\n        var demoTestIMG = document.getElementById('demo_test_iframe');\n        if(demoTestIMG){demoTestIMG.remove();}\n        \n        // *** CHANGE ALL CONTENTEDITABLE TO FALSE ***\n        // -------------------------------------------\n        var editables=document.querySelectorAll('[contentEditable=true]');\n        editables.forEach(e=>{e.setAttribute('contentEditable','false');});\n        "),this.isLoading=!0;var o=i.document.body.outerHTML;this.apiUploadService.commonUploadLadipageFile(o,this.templateName,o.length).subscribe(s=>{var r,l;s.type!=K.dt.UploadProgress&&(1==s.success&&null!==(r=s?.data)&&void 0!==r&&r.url?this.usersettingService.apiUsersettingSaveMyDomainPost({path:null===(l=s?.data)||void 0===l?void 0:l.url}).subscribe(c=>{1==c.success?this.commonService.myNavigation("/admin/testbank/create-website-result"):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong"))}):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong")))})}}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink="/admin/dashboard",this.getWebsiteUrl()}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_title",description:"lang_cms_test_create_website_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.nb),t.Y36(K.eN),t.Y36(le.U),t.Y36(w.gz),t.Y36(Zn._),t.Y36(Do.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-website"]],features:[t.qOj],decls:5,vars:6,consts:[[3,"headerTitle","headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-builder","container-fluid","mt-3","pb-mb-80"],[1,"grid","grid-cols-12","gap-3","button-row","justify-between","mb-4"],[1,"col-span-4",2,"align-self","center"],[1,"button-bar","mb-0"],[1,"azt-hidden","lg:block"],[1,"text-md","font-medium",2,"padding-top","10px","padding-left","10px"],[1,"block","xl:hidden"],[1,"text-md","font-medium"],[1,"btn","btn-secondary",3,"matMenuTriggerFor"],["choose","matMenu"],[1,"box","dialog-landing"],["azt-track-service","create-website-m7o0z0tNGZ",3,"click"],[1,"tpl-avatar"],["alt","",3,"src"],[1,"col-span-8","pt-0","pb-0","text-right","w-full"],[1,"flex","justify-end","sm:hidden"],[1,"button-bar","flex","justify-end"],[1,"btn","btn-outline-secondary",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["reorder","matMenu"],[1,"dropdown-menu","w-56","show","relative","p-3"],[1,"dropdown-content"],["azt-track-service","create-website-KcLlwJbhLJ","class","dropdown-item w-full",3,"click",4,"ngIf"],["azt-track-service","create-website-hPK4dUWUNk","class","dropdown-item w-full",3,"click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","create-website-kAw_1A0pwF",1,"dropdown-item","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"azt-hidden","sm:block"],[1,"button-bar","justify-end"],["class","alert alert-info mr-3 mb-0 items-center flex p-2",4,"ngIf"],["azt-track-service","create-website-5leCyaUy9M","class","btn btn-secondary mr-2 w-20",3,"click",4,"ngIf"],["azt-track-service","create-website-JeQ8h6dSA5",1,"btn","btn-primary","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU","class","btn btn-secondary ml-2 w-20",3,"click",4,"ngIf"],[1,"col-span-12","block","sm:hidden"],["class","alert alert-info mr-1 mb-0 items-center flex text-left p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","content-row"],[1,"col-span-2","hidden","lg:block"],[1,"list-template"],[1,"wrap-layer"],["azt-track-service","create-website-bnKcSD98XWU",3,"click"],[1,"col","col-span-12","sm:col-span-12","md:col-span-10"],[1,"wrap-layer","w-full"],["id","template-iframe","frameborder","0",2,"width","100%","height","100%",3,"src"],["azt-track-service","create-website-KcLlwJbhLJ",1,"dropdown-item","w-full",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","create-website-hPK4dUWUNk",1,"dropdown-item","w-full",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","9.5","y1","12.5","x2","14.5","y2","17.5"],["x1","14.5","y1","12.5","x2","9.5","y2","17.5"],[1,"alert","alert-info","mr-3","mb-0","items-center","flex","p-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","create-website-5leCyaUy9M",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU",1,"btn","btn-secondary","ml-2","w-20",3,"click"],[1,"alert","alert-info","mr-1","mb-0","items-center","flex","text-left","p-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,qb,1,0,"azt-loading-effect",1),t.YNc(3,Jb,72,35,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(4);t.Q6J("headerTitle",t.lcZ(1,4,"lang_testbank_create_wibsite_header_title"))("headerBackTolink","/admin/dashboard"),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,ke.VK,ke.p6,xe.Q,Xe._,_t.bT,_t.yl,_t.Jc],styles:[".container-builder[_ngcontent-%COMP%]{height:calc(100vh - 72px);overflow:hidden;display:flex;flex-direction:column}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;height:38px;display:flex;justify-content:center;align-items:center}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{background:white;padding:15px;flex:auto;border:1px solid #ececec;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   #template-iframe[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:15px;border:1px solid #ccc;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]{padding-right:0}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{overflow-y:auto}.container-builder[_ngcontent-%COMP%]   .list-template[_ngcontent-%COMP%]{height:100%}.button-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.button-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:auto;margin-bottom:0;text-align:center}.template-item[_ngcontent-%COMP%]:hover{cursor:pointer}.template-item[_ngcontent-%COMP%]:hover   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]{width:100%;height:0;padding-top:66.6666666667%;position:relative;overflow:hidden}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:auto;width:100%;top:0;left:0;transition:all .5s}.template-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-top:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999999;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#414141}.dialog-landing[_ngcontent-%COMP%]{width:280px;padding:20px}"]}),n})();function $b(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Kb(n,a){1&n&&(t.TgZ(0,"span",21),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const Yb=function(n){return[n]},Gb=function(n){return{backto:n}};function Wb(n,a){if(1&n&&(t.TgZ(0,"div",24)(1,"a",25),t.ALo(2,"localize"),t._UZ(3,"azt-file-item",26),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw(3);let o;t.xp6(1),t.Q6J("routerLink",t.lcZ(2,5,t.VKq(7,Yb,"exam"==e.type?"/admin/testbank/exam-results-list/"+(null!==(o=null==e.exam?null:e.exam.categoryId)&&void 0!==o?o:0)+"/"+(null==e.exam?null:e.exam.id)+"/0":"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(9,Gb,"/admin/testbank/all-documents-in-class/"+i.classroomId+"/"+i.cur_page)),t.xp6(2),t.Q6J("dataObj",e)("showByClass",!0)("viewType","classroom")}}const Vb=function(){return["name"]};function Xb(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",22),t.YNc(2,Wb,4,11,"div",23),t.ALo(3,"appFilter"),t.qZA()()),2&n){const e=t.oxw(2);let i;t.xp6(2),t.Q6J("ngForOf",t.Dn7(3,1,e.documentData,null==(i=e.form.get("searchContent"))?null:i.value,t.DdM(5,Vb)))}}function t3(n,a){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_homework_homework_list_not_found")," "))}function e3(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"a",6),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,Kb,3,3,"span",7),t.ALo(6,"fullPermission"),t.qZA(),t.TgZ(7,"div",8)(8,"form",9),t.O4$(),t.TgZ(9,"svg",10),t._UZ(10,"circle",11)(11,"line",12),t.qZA(),t.kcU(),t._UZ(12,"input",13),t.ALo(13,"mytranslate"),t.qZA()()(),t.TgZ(14,"div",14),t.YNc(15,Xb,4,6,"div",2),t.YNc(16,t3,3,3,"ng-template",null,15,t.W1O),t.qZA()(),t.TgZ(18,"div",16)(19,"div",17)(20,"azt-paging",18),t.NdJ("SendPage",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.goToPage(o))}),t.qZA()(),t.TgZ(21,"div",19)(22,"p",20),t._uU(23),t.ALo(24,"number"),t.ALo(25,"mytranslate"),t.qZA()()()}if(2&n){const e=t.MAs(17),i=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,9,i.classroomObj.name)," "),t.xp6(2),t.Q6J("ngIf",!t.xi3(6,11,i.classroomObj.permissionObj,"classroom")),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(4),t.s9C("placeholder",t.lcZ(13,14,"lang_homework_homework_list_search")),t.xp6(3),t.Q6J("ngIf",i.documentData.length>0)("ngIfElse",e),t.xp6(5),t.Q6J("lengthPage",i.total_page)("paging",i.cur_page),t.xp6(3),t.Oqu(t.lcZ(24,16,i.totalDocument)+" "+t.lcZ(25,18,"lang_testbank_test_list_document"))}}let n3=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.activeRoute=e,this.documentService=i,this.fb=o,this.classroomService=s,this.form=new h.nJ({}),this.backToLink="",this.classroomId=0,this.classroomObj={},this.documentData=[],this.totalDocument=0,this.totalObjs=1,this.item_per_page_admin=24,this.cur_page=1,this.start_page=1,this.end_page=1,this.total_page=1,this.limit_page=5,this.show_pages=[]}getClassroomName(e){var i=[];return e.forEach(o=>{o.name&&!this.commonService.filterArray(i,o.name)&&i.push(o.name)}),i}convertIAztTestbankDocumentRecommendData(e){var i=[];return e.forEach(o=>{var s;if(o.exam){var r={id:o.exam.id,hashId:o.exam.hashId,name:o.exam.name,deadline:o.exam.endTime,type:"exam",createdAt:o.exam.createdAt,submited:o.exam.attended,delivery:this.getClassroomName(null!==(s=o.exam.classrooms)&&void 0!==s?s:[]),exam:o.exam};i.push(r)}else o.homework&&(r={id:o.homework.id,hashId:o.homework.hashId,classroomId:o.homework.classroomId,name:o.homework.name,type:"homework",createdAt:o.homework.createdAt,deadline:o.homework.deadline,submited:o.homework.count,total:o.homework.totalStudent,delivery:o.homework.className?[o.homework.className]:new Array,homework:o.homework},i.push(r))}),i}goToPage(e){this.commonService.myNavigationWithQueryString("/admin/testbank/all-documents-in-class/"+this.classroomId+"/"+e,"?backto="+this.backToLink)}getClassroomObj(){this.subscriptions.add(this.classroomService.apiClassroomGetObjGet(this.classroomId).subscribe(e=>{var i,o,s;1==e.success?(this.classroomObj=null!==(o=null===(i=e.data)||void 0===i?void 0:i.obj)&&void 0!==o?o:{},this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"",!0)}))}getData(){this.initStatusObj(),this.subscriptions.add(this.documentService.apiDocumentsGet(void 0,"file",void 0,"homework",this.classroomId,void 0,this.cur_page).subscribe(e=>{var i,o,s,r,l,c,u;if(1==e.success){this.documentData=this.convertIAztTestbankDocumentRecommendData(null!==(o=null===(i=e.data)||void 0===i?void 0:i.documentObjs)&&void 0!==o?o:[]),this.totalDocument=null!==(r=null===(s=e.data)||void 0===s?void 0:s.totalDocument)&&void 0!==r?r:0,this.totalObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.total)&&void 0!==c?c:0,this.total_page=this.totalObjs%this.item_per_page_admin>0?(this.totalObjs-this.totalObjs%this.item_per_page_admin)/this.item_per_page_admin+1:this.totalObjs>0?this.totalObjs/this.item_per_page_admin:1,-1==this.classroomId&&(this.total_page=this.totalDocument%this.item_per_page_admin>0?(this.totalDocument-this.totalDocument%this.item_per_page_admin)/this.item_per_page_admin+1:this.totalDocument>0?this.totalDocument/this.item_per_page_admin:1),this.start_page=this.cur_page-this.limit_page>=1?this.cur_page-this.limit_page:1,this.end_page=this.start_page+2*this.limit_page>this.total_page?this.total_page:this.start_page+2*this.limit_page;for(var d=[],m=this.start_page;m<=this.end_page;m++)d.push(m);if(this.show_pages=d,this.classroomId>0)this.getClassroomObj();else{let p=this.commonService.myTranslateInstant("lang_auto_tu_do");this.classroomObj={id:this.classroomId,name:p},this.successStatusObj()}}else this.errorStatusObj(null!==(u=e.message)&&void 0!==u?u:"",!0)}))}ngOnInit(){this.form=this.fb.group({searchContent:new h.p4("",h.kI.required)}),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"/admin/testbank/document-management/1/0/1",this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"classroom_id")),this.cur_page=Number(this.commonService.getMyParam(this.activeRoute,"page")),this.getData()}),this.commonService.translateMetaData({title:"lang_cms_all_document_class_title",description:"lang_cms_all_document_class_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.Zg),t.Y36(h.QS),t.Y36(Bt.um))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-all-document-class"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"headerBackTolink"],[1,"mb-2","mt-3"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box",2,"min-height","300px"],[1,"flex","lg:items-center","flex-col","lg:flex-row","p-5","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"font-medium","truncate","text-md","mr-2"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-0","lg:ml-auto","relative","mt-2","lg:mt-0","mr-2"],[3,"formGroup"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","absolute","my-auto","inset-y-0","ml-3","left-0","z-10","text-slate-500"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["type","text","formControlName","searchContent",1,"form-control","w-full","sm:w-72","box","px-10","bg-slate-200","dark:bg-darkmode-400",3,"placeholder"],[1,"p-5"],["noDocumentData",""],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"text-right","mt-2"],[1,"text-md"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-5"],["class","col-span-12 md:col-span-6 xl:col-span-4 2xl:col-span-3 intro-y",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","xl:col-span-4","2xl:col-span-3","intro-y"],["azt-track-service","all-document-class-KetDqkKFvjH",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-5","text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.YNc(2,$b,1,0,"azt-loading-effect",2),t.YNc(3,e3,26,20,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const o=t.MAs(4);t.Q6J("headerBackTolink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[w.rH,E.sg,E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,xe.Q,xl.L,Pe.M,zs,Xe._,E.JJ,ns.lO,_t.bT,_t.gB,_t.Gf],encapsulation:2}),n})();var ea=A(86317),vl=A(91153),Oa=A(61886);let i3=(()=>{class n{constructor(e,i,o,s,r,l){this.commonService=e,this.examPageResultService=i,this.permissionService=o,this.globalService=s,this.browserStorageService=r,this.gzipHelper=l}getTestedUserObjs(e,i,o){return this.globalService.startIntervalFunc(e),this.getTestedOfExamResult(e,i,"default",o)}getTestedOfExamResult(e,i,o,s){return new pl.y(r=>{var l;let c="tested_list_result_v2_"+i,u=null!==(l=this.browserStorageService.getSimpleStorage(c))&&void 0!==l?l:"",d=this.gzipHelper.resultContentSupport(u),m=d&&this.commonService.willDeleteParseJson(d)?this.commonService.willDeleteParseJson(d):void 0;s&&m?(r.next({status:200,success:1,data:m,message:"successful"}),r.complete()):this.examPageResultService.apiExamPageResultGetObjV3Get(i).subscribe(p=>{var b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct,lt;if(1==p.success){let It=null!==(y=null===(b=p.data)||void 0===b?void 0:b.examObj)&&void 0!==y?y:{},wt=null!==(I=null===(C=p.data)||void 0===C?void 0:C.classrooms)&&void 0!==I?I:[],jt=null!==(U=null===(D=p.data)||void 0===D?void 0:D.totalAttended)&&void 0!==U?U:0,Rt=null===(B=p.data)||void 0===B?void 0:B.examCreatorObj,Kt=null===(q=p.data)||void 0===q?void 0:q.offlineExamObj,Dt=null===(R=p.data)||void 0===R?void 0:R.offlineMixQuestionObjs,re=null===(et=p.data)||void 0===et?void 0:et.canResetStudentCode,Ut=null===(Q=p.data)||void 0===Q?void 0:Q.hasCreateStudentCode,ni=null!==(Y=null===(V=p.data)||void 0===V?void 0:V.fileTypeStr)&&void 0!==Y?Y:"";if(this.permissionService.hasViewExamPermission("exam",It.permissionObj)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",It.permissionObj)){let ii=[];if(wt.length>0)for(let Un=0;Un<wt.length;Un++){let gi={id:wt[Un].id,name:null!==(at=wt[Un].name)&&void 0!==at?at:"lang_auto_tu_do",totalTested:wt[Un].totalTested,countStudents:wt[Un].totalRegister,countSubmitted:wt[Un].totalTested};ii.push({classObj:gi,results:[]})}let Xi={studentsInClassResults:ii.length>0?ii:[],studentsNotInClassResults:[],totalAttended:jt,totalUsers:0,examCreatorObj:Rt,offlineMixQuestionObjs:Dt,examObj:It,offlineExamObj:Kt,canResetStudentCode:re,hasCreateStudentCode:Ut,fileTypeStr:ni,errorConfigClassroomPermission:null===(tt=p.data)||void 0===tt?void 0:tt.errorConfigClassroomPermission,errorMessage:null===(rt=p.data)||void 0===rt?void 0:rt.errorMessage};if("export_tool"!=e){(this.browserStorageService.getSizeOfStorageByKey("tested_list_result_v2")>2||this.browserStorageService.getSizeOfStorage()>4.5)&&this.browserStorageService.removeSimpleStorageByKey("tested_list_result_v2");let Un=this.gzipHelper.zipBigContent(JSON.stringify(Xi));this.browserStorageService.saveSimpleStorage(c,Un)}r.next({status:200,success:1,data:Xi,message:"successful"}),r.complete()}else{var Et={studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:jt,totalUsers:0,examCreatorObj:Rt,offlineMixQuestionObjs:Dt,examObj:It,offlineExamObj:Kt,canResetStudentCode:re,hasCreateStudentCode:Ut,fileTypeStr:null===(vt=p.data)||void 0===vt?void 0:vt.fileTypeStr,errorConfigClassroomPermission:null===(gt=p.data)||void 0===gt?void 0:gt.errorConfigClassroomPermission,errorMessage:null===(ct=p.data)||void 0===ct?void 0:ct.errorMessage,maxGroupId:0};r.next({status:200,success:1,data:Et,message:"successful"}),r.complete()}}else r.next({status:p.code,success:0,data:null,message:null!==(lt=p.message)&&void 0!==lt?lt:""}),r.complete()})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v),t.LFG(Bt.DR),t.LFG(ta.$),t.LFG(Oa.U),t.LFG(wi.z),t.LFG(si.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yo=A(72201),lo=A(35191),qu=A(88974),Gs=A(11526);let Fu=(()=>{class n{constructor(e,i){this.commonService=e,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_exam_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}getDefaultFilterObj(){var e,i=this._getInitFilterObj(),o=this.commonService.castJsonToObj(null!==(e=this.browserStorageService.getSimpleStorage(this.localStorageSlug))&&void 0!==e?e:"");return o&&(i=o),i}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var i=0;for(var o in e)!0===e[o]&&(i+=1);return i}_getInitFilterObj(){return{isMarked:!1,isNotMarked:!1,isOnTest:!1,isNotSubmit:!1,isNotTested:!1}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v),t.LFG(wi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Q_=A(84817),Qu=A(68272),Uu=A(92114),li=A(23267);function o3(n,a){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span"),t._UZ(4,"span",5),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",6),t._UZ(7,"div",7),t.qZA()()()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("innerHTML",e.msg,t.oJD)}}let Ws=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.show=!1,this.msg=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-export-docx-loading-box"]],inputs:{show:"show",msg:"msg",percent:"percent"},features:[t.qOj],decls:2,vars:1,consts:[[1,"export-docx-frame"],["class","loading-box",4,"ngIf"],[1,"loading-box"],[1,"loading-box-wrapper"],[2,"margin-bottom","10px"],["role","status",1,"spinner-border","spinner-border-lg"],[1,"loading-box-lines"],[1,"loading-box-lines-content",3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,o3,8,1,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.show))},dependencies:[E.O5],styles:[".export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9999;top:0;left:0;display:flex;justify-content:center;background-color:#000c}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{margin-top:100px;text-align:center;color:#fafafa;font-weight:400}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#fafafa;color:#000;height:-moz-fit-content;height:fit-content;width:500px;border-radius:5px}@media screen and (max-width: 520px){.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{padding:10px}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{width:100%}}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines-content[_ngcontent-%COMP%]{padding:20px}  .export-docx-frame .loading-box .loading-box-lines p{padding-top:10px}  .export-docx-frame .loading-box .loading-box-lines p:first-child{padding-top:0}"]}),n})();const a3=["TABLE"];function s3(n,a){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.uIk("excelWidth",15)("excelRow",5)("excelColumn",14)("excelStyle",e.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(2,5,"lang_testbank_testted_list_essay_score"))}}function r3(n,a){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.index,i=t.oxw(2);t.uIk("excelWidth",15)("excelRow",5)("excelColumn",(i.hasEssayQuestion?16:15)+e)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(2,5,"lang_combine_exam_component")+(e+1))}}function l3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,r3,3,7,"th",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(3))}}function c3(n,a){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2);t.uIk("excelWidth",10)("excelRow",5)("excelColumn",(o.hasEssayQuestion?16:15)+(o.examObj.subjectMarks?3:0)+i)("excelStyle",o.styleThNormal),t.xp6(1),t.AsE("",t.lcZ(2,6,"lang_testbank_test_config_group"),"\xa0",e<9?"0"+(e+1):e+1,"")}}function u3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,c3,3,8,"th",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function d3(n,a){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.index,i=t.oxw();let o;t.uIk("excelWidth",8)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1)+(e+1))("excelStyle",i.styleThNormal),t.xp6(1),t.AsE("",t.lcZ(2,6,"lang_testbank_testted_list_question"),"\xa0",e+(null!==(o=i.examObj.startQuestionIndex)&&void 0!==o?o:0)<9?"0"+(e+(null!==(o=i.examObj.startQuestionIndex)&&void 0!==o?o:1)):e+(null!==(o=i.examObj.startQuestionIndex)&&void 0!==o?o:1),"")}}function _3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;let i;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0)-e.countEssayQuestion:(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0))}}function m3(n,a){1&n&&(t.TgZ(0,"td",13),t._uU(1,"0"),t.qZA())}function p3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,i.checkStatusStudent(e)))}}function h3(n,a){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function g3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,h3,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.subjectMarkValues)}}function f3(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function x3(n,a){if(1&n&&t.YNc(0,f3,2,1,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(3))}}function v3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,g3,2,1,"ng-container",16),t.YNc(2,x3,1,1,"ng-template",null,17,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",e)}}function b3(n,a){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function y3(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function w3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,y3,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-e.groupPoints.length))}}function k3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,b3,3,4,"th",15),t.YNc(2,w3,2,1,"ng-container",8),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<i.maxGroupQuestion)}}function C3(n,a){1&n&&t._UZ(0,"th",13)}function T3(n,a){if(1&n&&t.YNc(0,C3,1,0,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function A3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,k3,3,2,"ng-container",16),t.YNc(2,T3,1,1,"ng-template",null,18,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",e)}}function S3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function O3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA(),t.TgZ(2,"td",13),t._uU(3),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function E3(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA(),t.TgZ(5,"td",13),t._uU(6),t.ALo(7,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(8,"td",13),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"td",13),t._uU(13),t.ALo(14,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(15,"td",13),t._uU(16),t.ALo(17,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(18,"td",13),t._uU(19),t.qZA(),t.TgZ(20,"td",13),t._uU(21),t.qZA(),t.TgZ(22,"td",13),t._uU(23),t.ALo(24,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(25,"td",13),t._uU(26),t.ALo(27,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(28,"td",13),t._uU(29),t.qZA(),t.TgZ(30,"td",13),t._uU(31),t.qZA(),t.YNc(32,_3,2,1,"td",14),t.YNc(33,m3,2,0,"td",14),t.TgZ(34,"td",13),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.YNc(37,p3,3,3,"td",14),t.TgZ(38,"td",13),t._uU(39),t.qZA(),t.YNc(40,v3,4,2,"ng-container",8),t.YNc(41,A3,4,2,"ng-container",8),t.TgZ(42,"td",13),t._uU(43),t.qZA(),t.YNc(44,S3,2,1,"td",15),t.YNc(45,O3,4,2,"ng-template",10),t.qZA()),2&n){const e=a.$implicit,i=t.oxw().$implicit,o=t.oxw();let s,r;t.xp6(2),t.Oqu(e.fullName),t.xp6(2),t.Oqu(null==i.classObj?null:i.classObj.name),t.xp6(2),t.Oqu(t.lcZ(7,22,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(10,24,"lang_gender_female"):1==e.gender?t.lcZ(11,26,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(14,28,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(17,31,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:null==e.allResultObjs?null:e.allResultObjs.length),t.xp6(2),t.Oqu(t.lcZ(24,34,null!==(s=e.startedTest)&&void 0!==s?s:"")),t.xp6(3),t.Oqu(t.lcZ(27,36,null!==(r=e.createdAt)&&void 0!==r?r:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":o.calculationTime(e.startedTest,e.createdAt||"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(36,38,o.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",o.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",o.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",o.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}const M3=function(){return[]};function I3(n,a){if(1&n&&t.YNc(0,E3,46,40,"tr",11),2&n){const e=a.$implicit,i=t.oxw();let o;t.Q6J("ngForOf",i.checkSortListStudent(null!==(o=null==e.classObj?null:e.classObj.sortType)&&void 0!==o?o:0,e.results||t.DdM(1,M3)))}}function L3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;let i;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0)-e.countEssayQuestion:(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0))}}function Z3(n,a){1&n&&(t.TgZ(0,"td",13),t._uU(1,"0"),t.qZA())}function P3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,i.checkStatusStudent(e)))}}function N3(n,a){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function D3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,N3,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",e.subjectMarkValues)}}function j3(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function q3(n,a){if(1&n&&t.YNc(0,j3,2,1,"th",15),2&n){const e=t.oxw(3);t.Q6J("ngForOf",e.createFakeArr(3))}}function F3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,D3,2,1,"ng-container",16),t.YNc(2,q3,1,1,"ng-template",null,17,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",e)}}function Q3(n,a){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function U3(n,a){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function B3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,U3,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(3).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-e.groupPoints.length))}}function R3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Q3,3,4,"th",15),t.YNc(2,B3,2,1,"ng-container",8),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<i.maxGroupQuestion)}}function z3(n,a){1&n&&t._UZ(0,"th",13)}function J3(n,a){if(1&n&&t.YNc(0,z3,1,0,"th",15),2&n){const e=t.oxw(3);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function H3(n,a){if(1&n&&(t.ynx(0),t.YNc(1,R3,3,2,"ng-container",16),t.YNc(2,J3,1,1,"ng-template",null,19,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",e)}}function $3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function K3(n,a){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA(),t.TgZ(2,"td",13),t._uU(3),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function Y3(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",13),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.ALo(9,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(10,"td",13),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"td",13),t._uU(15),t.ALo(16,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(17,"td",13),t._uU(18),t.ALo(19,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(20,"td",13),t._uU(21),t.qZA(),t.TgZ(22,"td",13),t._uU(23),t.qZA(),t.TgZ(24,"td",13),t._uU(25),t.ALo(26,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(27,"td",13),t._uU(28),t.ALo(29,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(30,"td",13),t._uU(31),t.qZA(),t.TgZ(32,"td",13),t._uU(33),t.qZA(),t.YNc(34,L3,2,1,"td",14),t.YNc(35,Z3,2,0,"td",14),t.TgZ(36,"td",13),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.YNc(39,P3,3,3,"td",14),t.TgZ(40,"td",13),t._uU(41),t.qZA(),t.YNc(42,F3,4,2,"ng-container",8),t.YNc(43,H3,4,2,"ng-container",8),t.TgZ(44,"td",13),t._uU(45),t.qZA(),t.YNc(46,$3,2,1,"td",15),t.YNc(47,K3,4,2,"ng-template",10),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();let o,s;t.xp6(2),t.Oqu(e.fullName||t.lcZ(3,22,"lang_auto_thi_sinh_thi_offline")+e.resultId),t.xp6(3),t.Oqu(t.lcZ(6,24,"lang_auto_tu_do")),t.xp6(3),t.Oqu(t.lcZ(9,26,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(12,28,"lang_gender_female"):1==e.gender?t.lcZ(13,30,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(16,32,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(19,35,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:null==e.allResultObjs?null:e.allResultObjs.length),t.xp6(2),t.Oqu(t.lcZ(26,38,null!==(o=e.startedTest)&&void 0!==o?o:"")),t.xp6(3),t.Oqu(t.lcZ(29,40,null!==(s=e.createdAt)&&void 0!==s?s:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":i.calculationTime(e.startedTest,e.createdAt||"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(38,42,i.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",i.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",i.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}let U_=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.timeService=e,this.sortService=i,this.exportExcelService=o,this.examObj={},this.dataScore=[],this.dataScoreByClass=[],this.exportQuestionObjs=[],this.tableType="lastTime",this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalQuestion=0,this.maxGroupQuestion=0,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.currentDate=new Date,this.styleThNormal='{"border": {"top": { "style": "thin", "color": { "rgb": "ff3c8dbc" } },"bottom": { "style": "thin", "color": { "rgb": "ff3c8dbc" } }, "left": { "style": "thin", "color": { "rgb": "ffffffff" } }, "right": { "style": "thin", "color": { "rgb": "ffffffff" } } },"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}'}getCurrentColumnIndexForExcel(e){let i=this.hasEssayQuestion?16:15;return this.examObj.subjectMarks&&(i+=3),this.maxGroupQuestion>0&&(i+=this.maxGroupQuestion),1==e||2==e&&(i+=1,this.totalQuestion&&(i+=this.totalQuestion)),i}exportToExcel(){var e;let i=this.examObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([null!==(e=this.examObj.name)&&void 0!==e?e:"",this.tableType,"-ScoreSheet"])+".xlsx":this.commonService.createFileNameExportFile([this.tableType,"ScoreSheet"])+".xlsx";this.exportExcelService.exportHtmlTableToExcelStyleOnlyHeaderRow(this.TABLE,!0,i,5)}createFakeArr(e){let i=[];for(let o=0;o<e;o++)i.push(o);return i}checkStatusStudent(e){return e.isNotMarked?"lang_auto_chua_cham":e.isOnTest?"lang_auto_dang_thi":e.isNotSubmit?"lang_auto_chua_nop_bai":e.isNotTested?"lang_auto_chua_thi":""}checkTypeTable(){return"lastTime"==this.tableType?"lang_auto_last_time":"firstTime"==this.tableType?"lang_auto_first_time":"highest"==this.tableType?"lang_auto_highest":"allTime"==this.tableType?"lang_auto_allTime":"lang_auto_last_time"}calculationTime(e,i){return this.timeService.calculationTimeExamTested(e,i)}checkSortListStudent(e,i){return this.isSortByMark?this.sortService.sortMarkDESC(this.commonService.myClone(i),this.hasEssayQuestion):this.isSortByTime?this.sortService.sortTimeDESC(this.commonService.myClone(i)):0==e||this.isSortByName?this.sortService.sortFirstNameStudents(this.commonService.myClone(i)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(i),"pos","id")}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O),t.Y36(ea.K),t.Y36(Zu.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-excel-score-sheet"]],viewQuery:function(e,i){if(1&e&&t.Gf(a3,5),2&e){let o;t.iGM(o=t.CRH())&&(i.TABLE=o.first)}},inputs:{examObj:"examObj",dataScore:"dataScore",dataScoreByClass:"dataScoreByClass",exportQuestionObjs:"exportQuestionObjs",tableType:"tableType",hasEssayQuestion:"hasEssayQuestion",countEssayQuestion:"countEssayQuestion",totalQuestion:"totalQuestion",maxGroupQuestion:"maxGroupQuestion",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName"},features:[t.qOj],decls:102,vars:156,consts:[["azt-track-service","excel-score-sheet-b3JV23esL",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],["colspan","3"],["colspan","2"],[1,"border-table","azt-excel-cell"],["class","border-table azt-excel-cell",4,"ngIf"],[4,"ngIf"],["class","border-table azt-excel-cell",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],[4,"ngFor","ngForOf"],[1,"border-table",2,"width","150px"],[1,"border-table"],["class","border-table",4,"ngIf"],["class","border-table",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["NoSubjectMarkValues",""],["NoGroupPoints",""],["NoGroupPointsFree",""]],template:function(e,i){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return i.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr")(8,"th",4),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"th",5),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"th",4),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.TgZ(17,"th",5),t._uU(18),t.qZA()(),t.TgZ(19,"tr")(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"tr")(27,"th",3),t._uU(28),t.ALo(29,"mytranslate"),t.ALo(30,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(31,"tr"),t._UZ(32,"th"),t.qZA(),t.TgZ(33,"tr")(34,"th",6),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"th",6),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"th",6),t._uU(41),t.ALo(42,"mytranslate"),t.qZA(),t.TgZ(43,"th",6),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.TgZ(46,"th",6),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"th",6),t._uU(50),t.ALo(51,"mytranslate"),t.qZA(),t.TgZ(52,"th",6),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.TgZ(55,"th",6),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.TgZ(58,"th",6),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.TgZ(61,"th",6),t._uU(62),t.ALo(63,"mytranslate"),t.qZA(),t.TgZ(64,"th",6),t._uU(65),t.ALo(66,"mytranslate"),t.qZA(),t.TgZ(67,"th",6),t._uU(68),t.ALo(69,"mytranslate"),t.qZA(),t.TgZ(70,"th",6),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.TgZ(73,"th",6),t._uU(74),t.ALo(75,"mytranslate"),t.qZA(),t.YNc(76,s3,3,7,"th",7),t.TgZ(77,"th",6),t._uU(78),t.ALo(79,"mytranslate"),t.qZA(),t.YNc(80,l3,2,1,"ng-container",8),t.YNc(81,u3,2,1,"ng-container",8),t.TgZ(82,"th",6),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.YNc(85,d3,3,8,"th",9),t.TgZ(86,"th",6),t._uU(87),t.ALo(88,"mytranslate"),t.qZA()()(),t.TgZ(89,"tbody"),t.YNc(90,I3,1,2,"ng-template",10),t.YNc(91,Y3,48,44,"tr",11),t._UZ(92,"tr"),t.TgZ(93,"tr"),t._UZ(94,"td")(95,"td")(96,"td")(97,"td"),t.TgZ(98,"td",5),t._uU(99),t.ALo(100,"mytranslate"),t.qZA(),t._UZ(101,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",i.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,104,"lang_testbank_testted_list_subject_exam"),": ",i.examObj.name,""),t.xp6(4),t.hij("",t.lcZ(10,106,"lang_testbank_testted_list_time_exam"),":"),t.xp6(3),t.AsE("",i.examObj.minutes," ",t.lcZ(13,108,"lang_testbank_testted_list_minute"),""),t.xp6(3),t.hij("",t.lcZ(16,110,"lang_testbank_testted_list_total_question"),":"),t.xp6(3),t.Oqu(2==i.examObj.mixQuestion?i.examObj.limitMixQuestion:i.examObj.countQuestion),t.xp6(3),t.hij("",t.lcZ(22,112,"lang_auto_kieu_export"),":"),t.xp6(3),t.Oqu(t.lcZ(25,114,i.checkTypeTable())),t.xp6(4),t.AsE("",t.lcZ(29,116,"lang_testbank_testted_list_time_export"),": ",t.lcZ(30,118,i.currentDate),""),t.xp6(6),t.uIk("excelWidth",25)("excelRow",5)("excelColumn",0)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(36,120,"lang_first_and_last_name")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(39,122,"lang_testbank_testted_list_class")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(42,124,"lang_birthday")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",3)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(45,126,"lang_gender")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",4)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(48,128,"lang_auto_so_bao_danh")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",5)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(51,130,"lang_auto_ma_de_thi")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",6)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(54,132,"lang_testbank_testted_tested_time_exams")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",7)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(57,134,"lang_testbank_testted_list_number_exams")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",8)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(60,136,"lang_testbank_testted_list_time_start")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",9)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(63,138,"lang_testbank_testted_list_time_end")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",10)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(66,140,"lang_testbank_testted_list_time_homework")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",11)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(69,142,"lang_testbank_testted_list_number_success")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",12)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(72,144,"lang_testbank_testted_list_error")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",13)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(75,146,"lang_testbank_testted_list_test_score")),t.xp6(2),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.hasEssayQuestion?15:14)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(79,148,"lang_testbank_testted_list_total_point")),t.xp6(2),t.Q6J("ngIf",i.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",i.maxGroupQuestion>0),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1))("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(84,150,"lang_testbank_testted_list_exit_full_screen")),t.xp6(2),t.Q6J("ngForOf",i.createFakeArr(i.totalQuestion)),t.xp6(1),t.uIk("excelWidth",50)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(2))("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(88,152,"lang_testbank_testted_list_additional_information")),t.xp6(3),t.Q6J("ngForOf",i.dataScoreByClass),t.xp6(1),t.Q6J("ngForOf",i.dataScore),t.xp6(8),t.hij("",t.lcZ(100,154,"lang_testbank_testted_list_teacher_confirmed"),":"))},dependencies:[E.sg,E.O5,E.JJ,_t.bT,_t.t9,_t.q7,_t.tO,_t._I],encapsulation:2}),n})();class G3{constructor(){this.x=0,this.y=0}toBase64String(){return(new Pi).writeCvPoint2u(this).toBase64String()}}class cs{constructor(){this.x=0,this.y=0}toBase64String(){return(new Pi).writeCvPoint2f(this).toBase64String()}}class Bu{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new Pi).writeCvRect2f(this).toBase64String()}}class W3{constructor(){this.center=new cs,this.filled=!1}toBase64String(){return(new Pi).writeAnswerCircle(this).toBase64String()}}class bl{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Pi).writeTableAnswer(this).toBase64String()}}class B_{constructor(){this.top=new cs,this.left=new cs,this.bottom=new cs,this.right=new cs}toBase64String(){return(new Pi).writeResultRect(this).toBase64String()}}class V3{constructor(){this.id=0,this.region=new Bu}toBase64String(){return(new Pi).writeCropRegion(this).toBase64String()}}class X3{constructor(){this.existed=!1,this.image=[],this.answer=0,this.answerRegion=new Bu}toBase64String(){return(new Pi).writeHandwrittenRect(this).toBase64String()}}class t4{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new B_,this.studentId=new bl,this.examId=new bl,this.answerTable=new bl,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.examIdNum=0,this.teacherScore=0,this.cropRegion=[],this.answersHandwritten=[],this.teacherScoreTb=[]}toBase64String(){return(new Pi).writeResultOutput(this).toBase64String()}}class e4{constructor(){this.imageType=0,this.templateType=0,this.imageWidth=0,this.imageHeight=0,this.imageLength=0,this.numOfQuestion=0}toBase64String(){return(new Pi).writeAnswerSheetInput(this).toBase64String()}}class R_{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new Pi).writeSmallAnswerCircle(this).toBase64String()}}class us{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Pi).writeSmallTableAnswer(this).toBase64String()}}class z_{constructor(){this.studentId=new us,this.examId=new us,this.answerTable=new us}toBase64String(){return(new Pi).writeDrawData(this).toBase64String()}}class n4{constructor(a){this.bytes=a,this.cursor=0,this.length=a.byteLength}updateCursor(a){if(this.cursor=this.cursor+a,this.cursor>=this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let a=this.bytes[this.cursor];return this.updateCursor(1),a}parseInt(){let a=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(a).getInt32(0)}parseDouble(){let a=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(a).getFloat64(0,!0)}parseString(){let a=new TextDecoder("utf-8"),e=this.cursor,i=this.bytes[this.cursor];for(;0!=i;)this.updateCursor(1),i=this.bytes[this.cursor];let o=this.bytes.slice(e,this.cursor),s=a.decode(o);return this.updateCursor(1),s}parseBool(){let a=this.bytes[this.cursor];return this.updateCursor(1),a>0}parseCvPoint2u(){let a=new G3;return a.x=this.parseUchar(),a.y=this.parseUchar(),a}parseCvPoint2f(){let a=new cs;return a.x=this.parseDouble(),a.y=this.parseDouble(),a}parseCvRect2f(){let a=new Bu;return a.x=this.parseDouble(),a.y=this.parseDouble(),a.width=this.parseDouble(),a.height=this.parseDouble(),a}parseAnswerCircle(){let a=new W3;return a.center=this.parseCvPoint2f(),a.filled=this.parseBool(),a}parseTableAnswer(){let a=new bl,e=0;a.rows=this.parseInt(),a.cols=this.parseInt(),a.radius=this.parseInt(),e=this.parseInt();for(let i=0;i<e;i++)a.answers.push(this.parseAnswerCircle());return a}parseResultRect(){let a=new B_;return a.top=this.parseCvPoint2f(),a.left=this.parseCvPoint2f(),a.bottom=this.parseCvPoint2f(),a.right=this.parseCvPoint2f(),a}parseCropRegion(){let a=new V3;return a.id=this.parseInt(),a.region=this.parseCvRect2f(),a}parseHandwrittenRect(){let a=new X3,e=0;a.existed=this.parseBool(),e=this.parseInt();for(let i=0;i<e;i++)a.image.push(this.parseUchar());return a.answer=this.parseInt(),a.answerRegion=this.parseCvRect2f(),a}parseResultOutput(){let a=new t4,e=0;a.type=this.parseInt(),a.errorCode=this.parseInt(),a.paperCorner=this.parseResultRect(),a.studentId=this.parseTableAnswer(),a.examId=this.parseTableAnswer(),a.answerTable=this.parseTableAnswer(),a.imageWidth=this.parseInt(),a.imageHeight=this.parseInt(),a.imageSize=this.parseInt(),a.examIdNum=this.parseInt(),a.teacherScore=this.parseDouble(),e=this.parseInt();for(let i=0;i<e;i++)a.cropRegion.push(this.parseCropRegion());e=this.parseInt();for(let i=0;i<e;i++)a.answersHandwritten.push(this.parseHandwrittenRect());e=this.parseInt();for(let i=0;i<e;i++)a.teacherScoreTb.push(this.parseAnswerCircle());return a}parseAnswerSheetInput(){let a=new e4;return a.imageType=this.parseInt(),a.templateType=this.parseInt(),a.imageWidth=this.parseInt(),a.imageHeight=this.parseInt(),a.imageLength=this.parseInt(),a.numOfQuestion=this.parseInt(),a}parseSmallAnswerCircle(){let a=new R_;return a.position=this.parseUchar(),a.x=this.parseUchar(),a.y=this.parseUchar(),a.filledCols=this.parseUchar(),a.rows=this.parseUchar(),a}parseSmallTableAnswer(){let a=new us,e=0;a.rows=this.parseUchar(),a.cols=this.parseUchar(),a.radius=this.parseUchar(),e=this.parseInt();for(let i=0;i<e;i++)a.answers.push(this.parseSmallAnswerCircle());return a}parseDrawData(){let a=new z_;return a.studentId=this.parseSmallTableAnswer(),a.examId=this.parseSmallTableAnswer(),a.answerTable=this.parseSmallTableAnswer(),a}}const zo=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class Pi{constructor(){this.bytes=[]}writeUchar(a){return this.bytes.push(a),this}writeUint8Array(a){for(let e=0;e<a.length;e++)this.bytes.push(a[e]);return this}writeArrayBuffer(a){let e=new Uint8Array(a);return this.writeUint8Array(e),this}writeInt(a){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,a,!1),this.writeArrayBuffer(e),this}writeDouble(a){let e=new ArrayBuffer(8);return new DataView(e).setFloat64(0,a,!0),this.writeArrayBuffer(e),this}writeString(a){let i=(new TextEncoder).encode(a);return this.writeUint8Array(i),this.writeUchar(0),this}writeBool(a){return this.writeUchar(a?1:0),this}toBase64String(){return function i4(n){let e,a="",i=n.length;for(e=2;e<i;e+=3)a+=zo[n[e-2]>>2],a+=zo[(3&n[e-2])<<4|n[e-1]>>4],a+=zo[(15&n[e-1])<<2|n[e]>>6],a+=zo[63&n[e]];return e===i+1&&(a+=zo[n[e-2]>>2],a+=zo[(3&n[e-2])<<4],a+="=="),e===i&&(a+=zo[n[e-2]>>2],a+=zo[(3&n[e-2])<<4|n[e-1]>>4],a+=zo[(15&n[e-1])<<2],a+="="),a}(new Uint8Array(this.bytes))}writeCvPoint2u(a){return this.writeUchar(a.x),this.writeUchar(a.y),this}writeCvPoint2f(a){return this.writeDouble(a.x),this.writeDouble(a.y),this}writeCvRect2f(a){return this.writeDouble(a.x),this.writeDouble(a.y),this.writeDouble(a.width),this.writeDouble(a.height),this}writeAnswerCircle(a){return this.writeCvPoint2f(a.center),this.writeBool(a.filled),this}writeTableAnswer(a){this.writeInt(a.rows),this.writeInt(a.cols),this.writeInt(a.radius),this.writeInt(a.answers.length);for(let e of a.answers)this.writeAnswerCircle(e);return this}writeResultRect(a){return this.writeCvPoint2f(a.top),this.writeCvPoint2f(a.left),this.writeCvPoint2f(a.bottom),this.writeCvPoint2f(a.right),this}writeCropRegion(a){return this.writeInt(a.id),this.writeCvRect2f(a.region),this}writeHandwrittenRect(a){this.writeBool(a.existed),this.writeInt(a.image.length);for(let e of a.image)this.writeUchar(e);return this.writeInt(a.answer),this.writeCvRect2f(a.answerRegion),this}writeResultOutput(a){this.writeInt(a.type),this.writeInt(a.errorCode),this.writeResultRect(a.paperCorner),this.writeTableAnswer(a.studentId),this.writeTableAnswer(a.examId),this.writeTableAnswer(a.answerTable),this.writeInt(a.imageWidth),this.writeInt(a.imageHeight),this.writeInt(a.imageSize),this.writeInt(a.examIdNum),this.writeDouble(a.teacherScore),this.writeInt(a.cropRegion.length);for(let e of a.cropRegion)this.writeCropRegion(e);this.writeInt(a.answersHandwritten.length);for(let e of a.answersHandwritten)this.writeHandwrittenRect(e);this.writeInt(a.teacherScoreTb.length);for(let e of a.teacherScoreTb)this.writeAnswerCircle(e);return this}writeAnswerSheetInput(a){return this.writeInt(a.imageType),this.writeInt(a.templateType),this.writeInt(a.imageWidth),this.writeInt(a.imageHeight),this.writeInt(a.imageLength),this.writeInt(a.numOfQuestion),this}writeSmallAnswerCircle(a){return this.writeUchar(a.position),this.writeUchar(a.x),this.writeUchar(a.y),this.writeUchar(a.filledCols),this.writeUchar(a.rows),this}writeSmallTableAnswer(a){this.writeUchar(a.rows),this.writeUchar(a.cols),this.writeUchar(a.radius),this.writeInt(a.answers.length);for(let e of a.answers)this.writeSmallAnswerCircle(e);return this}writeDrawData(a){return this.writeSmallTableAnswer(a.studentId),this.writeSmallTableAnswer(a.examId),this.writeSmallTableAnswer(a.answerTable),this}}const o4=["fileInput"],a4=["fileInputMobile"];function s4(n,a){1&n&&(t.TgZ(0,"p",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_he_thong_dang_tai_cong_cu_doing")))}function r4(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_quet_bai_tu_phieu_scan_doing")))}function l4(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_quet_thanh_cong")," "))}function c4(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"span",24),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_auto_he_thong_dang_luu_bai_vui_long_khong_thoat_trinh_duyet"),"\xa0"))}function u4(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_thanh_cong")," "))}function d4(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_khong_thanh_cong")," "))}function _4(n,a){if(1&n&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.doneFileScan-e.uploadFileScanError.length,"/",e.totalFileScan,"")}}function m4(n,a){if(1&n&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.saveSuccessCount,"/",e.totalFileScan,"")}}function p4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p",26)(1,"a",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showStudentList())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_danh_sach")," "))}function h4(n,a){if(1&n&&(t.TgZ(0,"div",18)(1,"p",19),t.YNc(2,r4,3,3,"span",20),t.YNc(3,l4,3,3,"span",20),t.YNc(4,c4,4,3,"span",20),t.YNc(5,u4,3,3,"span",20),t.YNc(6,d4,3,3,"span",20),t.YNc(7,_4,2,2,"b",21),t.YNc(8,m4,2,2,"b",21),t.qZA(),t.YNc(9,p4,4,3,"p",22),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.scanningStatus.isScanning),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isScanDone&&!e.scanningStatus.isSavingDone&&!e.scanningStatus.isSaving&&!e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSaving),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",!e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone)}}function g4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"b",29),t._uU(5),t.qZA(),t._uU(6," file. \xa0"),t.qZA(),t.TgZ(7,"a",30),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showScanFalseFiles())}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,4,"lang_auto_da_xay_ra_loi_scan_o")," "),t.xp6(3),t.AsE("",e.uploadFileScanError.length,"/",e.totalFileScan," "),t.xp6(3),t.hij(" ",t.lcZ(9,6,"lang_auto_xem_chi_tiet")," ")}}function f4(n,a){if(1&n&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(2);let o;t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_ma_de"),": ",i.replaceDigit(null!==(o=e.offlineMixquestionHashId)&&void 0!==o?o:0,!1)," ",t.lcZ(3,6,"lang_auto_-_so_bao_danh"),": ",i.replaceDigit(null!==(o=e.studentCode)&&void 0!==o?o:0,!0)," ")}}function x4(n,a){if(1&n&&(t.TgZ(0,"div",31)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",32),t.YNc(5,f4,4,8,"p",33),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_du_lieu_luu_loi"),":"),t.xp6(3),t.Q6J("ngForOf",e.invalidDataCallMarkObjs)}}function v4(n,a){1&n&&(t.TgZ(0,"p",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_scan_file_support_v2")))}function b4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectFileClick())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chon_thu_muc_file_scan")," "))}function y4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"p",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,v4,3,3,"p",36),t.YNc(5,b4,3,3,"button",37),t.TgZ(6,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.selectFileClick(!0))}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobile),t.xp6(2),t.hij(" ",t.lcZ(8,6,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function w4(n,a){1&n&&(t.TgZ(0,"p",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_scan_file_support_v2")))}function k4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectFileClick())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_chon_thu_muc_file_scan")," "))}const C4=function(n){return{"pl-0":n}};function T4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"p",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,w4,3,3,"p",36),t.TgZ(5,"div",41),t.YNc(6,k4,4,3,"div",42),t.TgZ(7,"div",43)(8,"button",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.selectFileClick(!0))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobile),t.xp6(1),t.Q6J("ngClass",t.VKq(9,C4,!e.isMobile)),t.xp6(2),t.hij(" ",t.lcZ(10,7,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function A4(n,a){1&n&&(t.TgZ(0,"mat-icon",52),t._uU(1,"double_arrow"),t.qZA())}function S4(n,a){if(1&n&&(t.TgZ(0,"div",47)(1,"div",48),t._UZ(2,"div",49),t.YNc(3,A4,2,0,"mat-icon",50),t._UZ(4,"div",51),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.doneFileScan>0)}}function O4(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function E4(n,a){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13)(3,"div",14),t.qZA()()),2&n){const e=t.oxw().index;t.xp6(2),t.s9C("id","processFileScan"+e),t.xp6(1),t.s9C("id","doneFileScan"+e)}}function M4(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,E4,4,2,"div",10),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2);t.xp6(2),t.AsE("",i+1,".\xa0",t.lcZ(3,3,o.getErrorCode(e.errorMessage?e.errorMessage:"")),""),t.xp6(2),t.Q6J("ngIf",e.img_in||e.img_out)}}function I4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.YNc(6,M4,5,5,"div",6),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onNoClick())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"lang_auto_anh_scan_loi")," "),t.xp6(2),t.Q6J("ngForOf",e.data),t.xp6(3),t.hij(" ",t.lcZ(10,5,"lang_auto_dong")," ")}}const Ru=".has-bg[_ngcontent-%COMP%]{background:inherit;background-color:#f1f1f1;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dfdfdf;border-radius:4px;box-shadow:none}.btn-custom-file-scan[_ngcontent-%COMP%]{display:block;background:#2361ae!important;color:#fff!important;transition:all .5s}.link__color[_ngcontent-%COMP%]{color:#0eafc0!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}.status_saving[_ngcontent-%COMP%]{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:#0000007b}.scan-file-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;transform:translate(-50%,-50%)}.scan-file-body[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;max-height:70vh}@media (max-width: 820px){.btn-custom-file-scan[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 768px){.scan-file-body[_ngcontent-%COMP%]{height:calc(100vh - 250px);position:relative}.scan-file-content[_ngcontent-%COMP%]{transform:none!important;top:0;left:0;height:100%}.arrow_icon[_ngcontent-%COMP%]{margin-left:5px!important;width:100%!important}}";function L4(n,a){1&n&&(t.TgZ(0,"div",0)(1,"p",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_khong_the_tao_de_thi_offline_voi_de_dang_docx")))}function Z4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",0)(1,"p",6),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectToCreateOfflineTest())}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_tested_list_no_exam_offline_scan"),"\xa0 "),t.xp6(3),t.Oqu(t.lcZ(6,4,"lang_testbank_test_list_scan_tutorial_click_here")))}const Oi=270,P4=["lang_auto_khong_trang_giay_nao_duoc_tim_thay","lang_auto_trang_giay_qua_nho_camera_dat_qua_xa_trang_giay","lang_auto_khong_nhan_dien_duoc_loai_mau_nao_trong_trang_giay","","lang_auto_khong_tim_thay_duoc_bang_dap_an","lang_auto_bang_dap_an_qua_xa_camera","lang_auto_ma_de_loi_sai_cau_truc_bang_viet_tay","lang_auto_danh_sach_anh_tra_ra_bi_thieu","lang_auto_qua_trinh_nhan_dien_ma_de_loi"];let J_=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c){super(),this.fb=e,this.offlineExamResultService=i,this.baseApiService=o,this.cdnService=s,this.uploadApiService=r,this.permissionService=l,this.dialog=c,this.openSelectFile=!1,this.examObj={},this.loadedJs=!1,this.hasExamOffline=!1,this.tokenScan="",this.examOfflineMessage="",this.backToLink="",this.saveStudentMarkEmit=new t.vpe,this.showStudentMarkEmit=new t.vpe,this.firstSuccessResultId=new t.vpe,this.form=new h.nJ({}),this.scanningStatus={isSaving:!1,isSavingDone:!1,isScanDone:!1,isScanning:!1,isSavingFail:!1},this.loadingFileJS=!1,this.isSelectedFile=!1,this.firstTimeScan=!0,this.isMobile=!1,this.queueUploadFileScan=[],this.uploadFileScanError=[],this.isProcessingFileScan=!1,this.doneFileScan=0,this.totalFileScan=0,this.queueSaveMarkObj=[],this.listMapStudentCodeAndExamId=[],this.isProcessingSaveMark=!1,this.doneFileScanMarked=0,this.totalFileScanMarked=0,this.saveSuccessCount=0,this.arrDataCallMarkObjs=[],this.invalidDataCallMarkObjs=[],this.countRetryLoadJS=0,this.isSaving=!1,this.moreThanMaxSaved=0,this.selectFileDirectory=u=>(0,so.mG)(this,void 0,void 0,function*(){let p=u.target.files;try{let I=0;var b=[];for(var y in p)if("length"!=y&&"item"!=y){var C=p[y];C.webkitRelativePath.indexOf("._")<0&&(C.webkitRelativePath.indexOf(".jpg")>0||C.webkitRelativePath.indexOf(".png")>0||C.webkitRelativePath.indexOf(".tiff")>0||C.webkitRelativePath.indexOf(".tif")>0||C.webkitRelativePath.indexOf(".jpeg")>0)?b.push(C):I++}!p||!p.length||I>=p?.length?this.showErrorSnack("lang_auto_thu_muc_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(b.forEach(D=>{this.getFileLocal(D)}),this.firstTimeScan=!1)}catch(I){console.log(I)}}),this.selectFile=u=>(0,so.mG)(this,void 0,void 0,function*(){let p=u.target.files;try{let I=0,D=!1;var b=[];for(var y in p)if("length"!=y&&"item"!=y){var C=p[y];C.name.indexOf("._")<0&&(C.name.indexOf(".jpg")>0||C.name.indexOf(".png")>0||C.name.indexOf(".tiff")>0||C.name.indexOf(".tif")>0||C.name.indexOf(".jpeg")>0)?b.push(C):((C.name.indexOf(".heic")>0||C.name.indexOf(".heif")>0)&&(D=!0),I++)}!p||I>=p?.length?this.showErrorSnack(D?"lang_auto_file_chon_co_heic_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai":"lang_auto_file_chon_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(b.forEach(U=>{this.getFileLocal(U)}),this.firstTimeScan=!1)}catch(I){console.log(I)}}),this.processSaveMarkObj=u=>(0,so.mG)(this,void 0,void 0,function*(){var d,m,p,b;this.isProcessingSaveMark=!0;try{if(u.page){var y={offlineMixquestionHashId:this.convertStringToNumber(u.ExamId),studentCode:this.convertStringToNumber(u.StudentId),studentCodeLength:u.StudentId?u.StudentId.split(",").length-1:0,offlineMixquestionHashIdLength:u.ExamId?u.ExamId.split(",").length-1:0,images:{url:"",width:u.img_out.naturalWidth<720?720:u.img_out.naturalWidth,height:u.img_out.naturalHeight<1038?1038:u.img_out.naturalHeight},imagesData:{content:this.getScanAnswerContent(u.Answers),pos:this.getScanFilePos(u.page)},templateType:u.page.type,objScan:u};0==u.code&&!this.existStudentCodeAndExamId(null!==(d=y.studentCode)&&void 0!==d?d:0,null!==(m=y.offlineMixquestionHashId)&&void 0!==m?m:0)&&(this.listMapStudentCodeAndExamId.push({studentCode:null!==(p=y.studentCode)&&void 0!==p?p:0,examId:null!==(b=y.offlineMixquestionHashId)&&void 0!==b?b:0}),y.index=this.arrDataCallMarkObjs.length,this.arrDataCallMarkObjs.push(y)),this.doneFileScanMarked++}let C=this.totalFileScan-this.uploadFileScanError.length;this.totalFileScan<=Oi&&this.scanningStatus.isScanDone&&this.doneFileScanMarked>=C?(this.scanningStatus.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj()})):this.doneFileScanMarked>=Oi?this.isSaving||(this.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj(!0)})):C>Oi&&C%Oi>0&&this.doneFileScanMarked==C-Oi*this.moreThanMaxSaved&&this.moreThanMaxSaved==Math.floor(C/Oi)?(this.scanningStatus.isSaving=!0,this.getNamePosForStudent().then(()=>{this.callSaveMarkObj()})):(this.isSaving||(this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),console.log("processQueueSaveMarkObj",this.totalFileScan+"|"+this.scanningStatus.isScanDone+"|"+this.doneFileScanMarked+"|"+(this.totalFileScan-this.uploadFileScanError.length)+"|"+this.uploadFileScanError.length,this.saveSuccessCount)),this.isProcessingSaveMark=!1}catch(C){throw C}})}selectFileClick(e){var i;this.hasExamOffline?this.permissionService.hasMarkPointPermission("exam",null===(i=this.examObj)||void 0===i?void 0:i.permissionObj)?this.loadedJs?this.fileInput&&(this.doneFileScan=0,this.doneFileScanMarked=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0)):this.loadingFileJs().then(()=>{this.loadingFileJS=!1,this.fileInput&&(this.doneFileScan=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.doneFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0))}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay"):this.examOfflineMessage&&""!=this.examOfflineMessage?this.showErrorSnack(this.examOfflineMessage):this.dialog.open(D4,{width:"60vw",restoreFocus:!1,data:{examObj:this.examObj,backToLink:this.backToLink}}).afterClosed().subscribe(s=>{})}getFileLocal(e){var i=new FileReader;i.onload=()=>{if(i.result&&"string"!=typeof i.result){var s=new Uint8Array(i.result);this.totalFileScan++,this.isSelectedFile=!0,this.scanningStatus.isScanning=!0,this.addQueueFileScan(s)}},i.readAsArrayBuffer(e)}addQueueFileScan(e){this.queueUploadFileScan.push(e),this.processQueueFileScan()}processQueueFileScan(){if(!this.isProcessingFileScan&&0!=this.queueUploadFileScan.length&&!this.isSaving){var e=this.queueUploadFileScan.shift();e&&this.processImg(e)}}processImg(e){var i,o;return(0,so.mG)(this,void 0,void 0,function*(){this.isProcessingFileScan=!0;try{if(null!=typeof imgsdk&&window.hasOwnProperty("imgsdk")){yield imgsdk.init();var s=this.baseApiService.getUserObj(),r=yield imgsdk.processAnswerSheet({src:e,width:720,height:1280,token:this.tokenScan,uid:null===(i=s.id)||void 0===i?void 0:i.toString()});r&&(this.doneFileScan++,r.Result&&(r.page=new n4(r.Result).parseResultOutput()),console.log("angular Obj",r)),0==this.queueUploadFileScan.length&&(this.scanningStatus.isScanning=!1,this.scanningStatus.isScanDone=!0),(0!=r.code||this.existStudentCodeAndExamId(this.convertStringToNumber(r.StudentId),this.convertStringToNumber(r.ExamId)))&&(0!=r.code?r.errorMessage=null!==(o=P4[r.code-1])&&void 0!==o?o:"process_scan_false":this.existStudentCodeAndExamId(this.convertStringToNumber(r.StudentId),this.convertStringToNumber(r.ExamId))&&(r.errorMessage="exist_exam_id_and_student_code"),r.img_in&&this.uploadFileToCdn(r.img_in,0,!0),this.uploadFileScanError.push(r)),this.addQueueSaveMarkObj(r),this.showOutput(r)}}catch{}this.isProcessingFileScan=!1,this.processQueueFileScan()})}showOutput(e){var i=document.getElementById("processFileScan"),o=document.getElementById("doneFileScan");i&&o&&(i.innerHTML="",o.innerHTML="",e.img_in.width=144,e.img_in.height=207,i.appendChild(e.img_in),e.img_out&&(e.img_out.width=144,e.img_out.height=207,e.img_out.style.marginLeft=this.isMobile?"20px":"30px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle",o.appendChild(e.img_out)))}addQueueSaveMarkObj(e){e&&(this.queueSaveMarkObj.push(e),this.totalFileScanMarked++),this.isSaving||this.processQueueSaveMarkObj()}processQueueSaveMarkObj(){if(!this.isProcessingSaveMark&&0!=this.queueSaveMarkObj.length&&!this.isSaving){var e=this.queueSaveMarkObj.shift();e&&this.processSaveMarkObj(e)}}callSaveMarkObj(e){var i;this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultMarkObjsV2Post(null!==(i=this.examObj.hashId)&&void 0!==i?i:"",this.removeObjScanToSaveObjs(this.arrDataCallMarkObjs)).subscribe(o=>{var s,r,l,c,u,d,m;if(o&&1==o.success){var p=null!==(r=null===(s=o.data)||void 0===s?void 0:s.studentCodeToSuccessIds)&&void 0!==r?r:{};this.firstSuccessResultId.emit(null===(l=o.data)||void 0===l?void 0:l.firstSuccessResultId),!(null===(c=o.data)||void 0===c)&&c.invalidData&&(null===(u=o.data)||void 0===u?void 0:u.invalidData.length)>0&&(this.invalidDataCallMarkObjs=null===(d=o.data)||void 0===d?void 0:d.invalidData),Object.keys(p).length>0?this.getUrlForImgScan(p).then(b=>{this.updateImgUrlForScan(b,e)}):e?(this.arrDataCallMarkObjs.splice(0,Oi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len"))}else e?(this.arrDataCallMarkObjs.splice(0,Oi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack(null!==(m=o.message)&&void 0!==m?m:""))}))}removeObjScanToSaveObjs(e){for(var i=[],o=e.length<Oi?e.length:Oi,s=0;s<o;s++)i.push({index:e[s].index,studentCode:e[s].studentCode,offlineMixquestionHashId:e[s].offlineMixquestionHashId,studentCodeLength:e[s].studentCodeLength,offlineMixquestionHashIdLength:e[s].offlineMixquestionHashIdLength,images:e[s].images,imagesData:e[s].imagesData,nameImages:e[s].nameImages,templateType:e[s].templateType});return i}getNamePosForStudent(){return new Promise(e=>{var i,o,s,r;if(this.arrDataCallMarkObjs.length>0){var l=this.arrDataCallMarkObjs.length<=Oi?this.arrDataCallMarkObjs.length:Oi,c=document.createElement("canvas");const b=c.getContext("2d");if(c.width=this.arrDataCallMarkObjs.length<9?250*this.arrDataCallMarkObjs.length:2250,this.arrDataCallMarkObjs.length<9)c.height=50;else if(this.arrDataCallMarkObjs.length<Oi){let y=Math.floor(this.arrDataCallMarkObjs.length/9);c.height=50*(y+(this.arrDataCallMarkObjs.length%9>0?1:0))}else c.height=1500;for(var u=0,d=0,m=0;m<l;m++)if(this.arrDataCallMarkObjs[m].objScan.page.cropRegion.length>0){m>0&&m%9==0&&(u++,d=0);var p=50*u;let y=null!==(i=this.arrDataCallMarkObjs[m].objScan.page.cropRegion[0].region.x)&&void 0!==i?i:210,C=null!==(o=this.arrDataCallMarkObjs[m].objScan.page.cropRegion[0].region.y)&&void 0!==o?o:210,I=null!==(s=this.arrDataCallMarkObjs[m].objScan.page.cropRegion[0].region.width)&&void 0!==s?s:250,D=null!==(r=this.arrDataCallMarkObjs[m].objScan.page.cropRegion[0].region.height)&&void 0!==r?r:50;b?.drawImage(this.arrDataCallMarkObjs[m].objScan.img_out,y,C,I,D,250*d,p,250,50),this.arrDataCallMarkObjs[m].nameImages={url:"",width:c.width,height:c.height,position:{x:250*d,y:p,width:250,height:50}},d++}c.toBlob(y=>{let I=(new Date).getTime();var D=this.commonService.getRandomNumber(1e6,9999999);const U=new File([y],`azo_file_name_scan_${D}_${I}.jpeg`,{type:"image/jpeg"});this.uploadApiService.uploadToCdnForFileScanNameExamOffline(U).subscribe(B=>{var q,R,et;if(B&&1==B.success)for(var Q=0;Q<l;Q++)this.arrDataCallMarkObjs[Q].nameImages={url:null!==(R=null===(q=B.data)||void 0===q?void 0:q.url)&&void 0!==R?R:"",width:c.width,height:c.height,position:null===(et=this.arrDataCallMarkObjs[Q].nameImages)||void 0===et?void 0:et.position};e()})},"image/jpeg",.9)}else e()})}getUrlForImgScan(e){return new Promise(i=>{var o=[];for(var s in e)if(e.hasOwnProperty(s)){var r=this.arrDataCallMarkObjs.filter(l=>{var c;return(null===(c=l.index)||void 0===c?void 0:c.toString())==s});r&&r.length>0&&this.uploadFileToCdn(r[0].objScan.img_out,e[s],!1).then(l=>{o.push({id:l.id,images:{url:l.imgUrl,width:r[0].objScan.img_out.naturalWidth<720?720:r[0].objScan.img_out.naturalWidth,height:r[0].objScan.img_out.naturalHeight<1038?1038:r[0].objScan.img_out.naturalHeight}}),o.length==Object.keys(e).length&&i(o)})}})}updateImgUrlForScan(e,i){var o;this.subscriptions.add(this.offlineExamResultService.apiOfflineExamResultUpdateImagesPost(null!==(o=this.examObj.hashId)&&void 0!==o?o:"",e).subscribe(s=>{var r;s&&1==s.success?(this.saveSuccessCount+=e.length,i?(this.arrDataCallMarkObjs.splice(0,Oi),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!1,this.scanningStatus.isSavingDone=!0,this.showSuccessSnack("lang_auto_luu_thanh_cong")),this.saveStudentMarkEmit.emit(!0)):(i&&(this.isSaving=!1,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!0,this.showErrorSnack(null!==(r=s.message)&&void 0!==r?r:""))}))}uploadFileToCdn(e,i,o){return new Promise(s=>{this.drawImgOutToCanvas(e).then(r=>{var l;r?o?this.uploadApiService.uploadToCdnForFileScanError(r,null!==(l=this.examObj.hashId)&&void 0!==l?l:"").subscribe(c=>{var u,d;s(c&&1==c.success?{id:i,imgUrl:null!==(d=null===(u=c.data)||void 0===u?void 0:u.url)&&void 0!==d?d:""}:{id:i,imgUrl:""})}):this.uploadApiService.uploadToCdnForFileScanExamOffline(r).subscribe(c=>{var u,d;s(c&&1==c.success?{id:i,imgUrl:null!==(d=null===(u=c.data)||void 0===u?void 0:u.url)&&void 0!==d?d:""}:{id:i,imgUrl:""})}):s({id:i,imgUrl:""})})})}drawImgOutToCanvas(e){return new Promise(i=>{var o=document.createElement("canvas");o.width=e.naturalWidth,o.height=e.naturalHeight,o.getContext("2d")?.drawImage(e,0,0,o.width,o.height),o.toBlob(r=>{let c=(new Date).getTime();var u=this.commonService.getRandomNumber(1e6,9999999);const d=new File([r],`azo_file_scan_${u}_${c}.jpeg`,{type:"image/jpeg"});i(d)},"image/jpeg",.9)})}replaceDigit(e,i){var o=e.toString(),s=6;for(i||(s=3);o.length<s;)o="0"+o;return o}convertStringToNumber(e){for(var i=e.split(","),o="",s=0,r=0;r<i.length;r++)""!=i[r]?o+=i[r]:s++;return""!=o&&s<=1?parseInt(o,10):0}getScanFilePos(e){var i={version:"2.0"};return i.resultFilledPos=this.convertScanResult(e),JSON.stringify(i)}convertScanResult(e){let i=new z_;return i.examId=this.convertTableAnswerToSmallTableAnswer(e.examId),i.studentId=this.convertTableAnswerToSmallTableAnswer(e.studentId),i.answerTable=this.convertTableAnswerToSmallTableAnswer(e.answerTable),i.toBase64String()}convertTableAnswerToSmallTableAnswer(e){let i=new us;if(i.cols=e.cols,i.rows=e.rows,0==e.cols&&e.answers.length>0)return new us;i.radius=e.radius,i.answers=[];let o=e.answers;for(var s=0;s<o.length;s++){let c=o[s],u=new R_;var r=Math.floor(c.center.x),l=Math.floor(c.center.y);u.position=16*Math.floor(r/256)+Math.floor(l/256),u.x=r%256,u.y=l%256,u.filledCols=128*(c.filled?1:0)+s%e.cols,u.rows=Math.floor(s/e.cols),i.answers.push(u)}return i}existStudentCodeAndExamId(e,i){var o=0;if(0!=e&&0!=i)for(var s=0;s<this.listMapStudentCodeAndExamId.length;s++)if(this.listMapStudentCodeAndExamId[s].studentCode==e&&this.listMapStudentCodeAndExamId[s].examId==i){o++;break}return o>0}getScanAnswerContent(e){return e?e.split(","):[]}showScanFalseFiles(){this.dialog.open(N4,{width:"80vw",data:this.uploadFileScanError,restoreFocus:!1}).afterClosed().subscribe(i=>{})}showStudentList(){this.openSelectFile=!1,this.showStudentMarkEmit.emit(!0)}askBeforeCloseWindow(e){return!this.scanningStatus.isSaving||(e.returnValue=!1)}loadingFileJs(){return this.loadingFileJS=!0,new Promise((e,i)=>{var o=[{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(o).then(()=>(0,so.mG)(this,void 0,void 0,function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&e(!0),i(new Error)):(this.countRetryLoadJS++,this.countRetryLoadJS>3?i(new Error("T\u1ea3i th\u01b0 vi\u1ec7n kh\xf4ng th\xe0nh c\xf4ng")):this.loadingFileJs())},1e3)}))})}ngOnChanges(){this.openSelectFile&&this.selectFileClick()}ngOnInit(){this.form=this.fb.group({fileScanner:new h.p4(""),fileScannerMobile:new h.p4("")}),this.openSelectFile&&this.selectFileClick(),this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(Bt.$4),t.Y36(Zn._),t.Y36(le.U),t.Y36(Do.$),t.Y36(ta.$),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-file-scan-offline-exam-new"]],viewQuery:function(e,i){if(1&e&&(t.Gf(o4,5),t.Gf(a4,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.fileInput=o.first),t.iGM(o=t.CRH())&&(i.fileInputMobile=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("beforeunload",function(s){return i.askBeforeCloseWindow(s)},!1,t.Jf7)},inputs:{openSelectFile:"openSelectFile",examObj:"examObj",loadedJs:"loadedJs",hasExamOffline:"hasExamOffline",tokenScan:"tokenScan",examOfflineMessage:"examOfflineMessage",backToLink:"backToLink"},outputs:{saveStudentMarkEmit:"saveStudentMarkEmit",showStudentMarkEmit:"showStudentMarkEmit",firstSuccessResultId:"firstSuccessResultId"},features:[t.qOj,t.TTD],decls:18,vars:9,consts:[[1,"absolute","h-full","w-full","bg-white","dark:bg-darkmode-600","top-0","left-0","z-50"],[1,"scan-file-body"],[1,"scan-file-content"],[3,"formGroup","hidden"],["type","file","formControlName","fileScanner","webkitdirectory","","multiple","",1,"form-control",3,"change"],["fileInput",""],["type","file","formControlName","fileScannerMobile","accept","image/*","multiple","",1,"form-control",3,"change"],["fileInputMobile",""],[1,"mx-auto","px-4"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-5","self-center"],["class","h5",4,"ngIf"],["class","flex items-center",4,"ngIf"],["class","items-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-12 align-self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-right",4,"ngIf"],[1,"h5"],[1,"flex","items-center"],[1,"h6"],["class","mb-1 mr-1","style","font-weight: 400;",4,"ngIf"],["style","font-size: 15px; font-weight: 550;",4,"ngIf"],["class","ml-2",4,"ngIf"],[1,"mb-1","mr-1",2,"font-weight","400"],["role","status",1,"spinner-border","spinner-border-sm"],[2,"font-size","15px","font-weight","550"],[1,"ml-2"],["azt-track-service","file-scan-offline-UDkBx5P8HR",1,"link__color","link__hover",3,"click"],[1,"mb-0",2,"font-size","14px","font-weight","400"],[2,"color","#DD0000","font-size","15px"],["azt-track-service","file-scan-offline-Y3xSQzwONg",1,"link__color","link__hover",3,"click"],[1,"items-center"],[1,"items-center",2,"max-height","150px","overflow-y","auto"],["class","mb-0","style","font-size: 14px; font-weight: 400",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-7","self-center","text-center"],[1,"mb-1",2,"font-size","14px"],["class","mb-1","style","font-size: 14px;",4,"ngIf"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","","class","btn-custom-file-scan","style","text-transform: none; margin-left: auto!important; margin-right: auto!important;",3,"click",4,"ngIf"],["azt-track-service","file-scan-offline-rLjSHvBSxk","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important","margin-top","0.75rem!important",3,"click"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important",3,"click"],[1,"col-span-12","md:col-span-12","align-self-center","text-center"],[1,"flex","flex-col","md:flex-row","mx-auto",2,"justify-content","center"],["class","mt-3 mr-3",4,"ngIf"],[1,"mt-3",3,"ngClass"],["azt-track-service","file-scan-offline-QP5Xn4YbcL",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"mt-3","mr-3"],["azt-track-service","file-scan-offline-rjEiLoTin7",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"col-span-12","md:col-span-7","self-center","text-right"],[1,"inline-flex","w-full","items-center","justify-end"],["id","processFileScan"],["style","vertical-align: middle; margin-left: 30px; color: #2361ae",4,"ngIf"],["id","doneFileScan"],[2,"vertical-align","middle","margin-left","30px","color","#2361ae"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"input",4,5),t.NdJ("change",function(s){return i.selectFileDirectory(s)}),t.qZA(),t.TgZ(6,"input",6,7),t.NdJ("change",function(s){return i.selectFile(s)}),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"div",10),t.YNc(11,s4,3,3,"p",11),t.YNc(12,h4,10,8,"div",12),t.YNc(13,g4,10,8,"div",12),t.YNc(14,x4,6,4,"div",13),t.qZA(),t.YNc(15,y4,9,8,"div",14),t.YNc(16,T4,11,11,"div",15),t.YNc(17,S4,5,1,"div",16),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.form)("hidden",!0),t.xp6(8),t.Q6J("ngIf",i.loadingFileJS),t.xp6(1),t.Q6J("ngIf",i.isSelectedFile),t.xp6(1),t.Q6J("ngIf",i.uploadFileScanError.length>0),t.xp6(1),t.Q6J("ngIf",i.invalidDataCallMarkObjs.length>0),t.xp6(1),t.Q6J("ngIf",(i.scanningStatus.isSavingDone||i.scanningStatus.isSavingFail)&&!i.scanningStatus.isSaving&&!i.firstTimeScan),t.xp6(1),t.Q6J("ngIf",i.firstTimeScan),t.xp6(1),t.Q6J("ngIf",i.isSelectedFile&&!i.scanningStatus.isSavingDone&&!i.scanningStatus.isSavingFail))},dependencies:[E.mk,E.sg,E.O5,ro.lW,qe.Hw,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Pe.M,_t.bT],styles:[Ru]}),n})(),N4=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialogRef=e,this.data=i,this.isMobile=!1}getErrorCode(e){return"not_found_exam_id"==e?"lang_auto_khong_quet_duoc_ma_de":"not_found_student_code"==e?"lang_auto_khong_quet_duoc_so_bao_danh_hoc_sinh":"exist_exam_id_and_student_code"==e?"lang_auto_ma_de_ma_hoc_sinh_khong_ton_tai_dot":"process_scan_false"==e?"lang_auto_loi_trong_qua_tring_scan_khong_hien_thi_anh_ket_qua":e}processData(){this.data.forEach((e,i)=>{var o=document.getElementById("processFileScan"+i),s=document.getElementById("doneFileScan"+i);o&&s&&(e.img_in.width=.7*e.img_in.naturalWidth,e.img_in.style.height="auto",e.img_in.style.maxWidth="60%",e.img_in.classList.add("img-fluid"),o.appendChild(e.img_in),e.img_out&&(e.img_out.width=.7*e.img_in.naturalWidth,e.img_out.classList.add("img-fluid"),e.img_out.style.marginLeft=this.isMobile?"5px":"15px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle"))})}onNoClick(){this.dialogRef.close(!1)}ngAfterViewInit(){var e=document.getElementById("processFileScan0");document.getElementById("doneFileScan0")&&e&&this.processData()}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["scan-false-dialog-new"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"text-xl","font-medium","items-center","my-2"],["class","mt-2 mx-auto",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-QIrwUMpnlE",1,"btn","w-24","btn-secondary",3,"click"],[1,"mt-2","mx-auto"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"inline-flex","w-full","items-center"],[1,"w-full","border","border-slate-200/60","rounded","mx-auto",3,"id"],[3,"id"]],template:function(e,i){if(1&e&&(t.YNc(0,O4,1,0,"azt-loading-effect",0),t.YNc(1,I4,11,7,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",1==i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.sg,E.O5,xe.Q,_t.bT],styles:[Ru]}),n})(),D4=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.permissionService=e,this.dialogRef=i,this.data=o}redirectToCreateOfflineTest(){var e,i,o,s,r;this.permissionService.hasFullPermission("exam",null===(e=this.data.examObj)||void 0===e?void 0:e.permissionObj)?(this.commonService.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!==(i=this.data.examObj)&&void 0!==i&&i.categoryId?null===(o=this.data.examObj)||void 0===o?void 0:o.categoryId:0}/${null===(s=this.data.examObj)||void 0===s?void 0:s.hashId}`,"?backto="+encodeURIComponent(null!==(r=this.data.backToLink)&&void 0!==r?r:"")),this.dialogRef.close(!1)):this.showErrorSnack("lang_auto_ban_khong_co_quyen_tao_bai_thi_offline_cho_de_thi_nay")}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ta.$),t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["no-exam-offline-dialog"]],features:[t.qOj],decls:16,vars:13,consts:[[1,"mt-1","text-center"],[1,"h5"],[1,"mt-2"],["class","mt-1 text-center",4,"ngIf"],["align","end"],["azt-track-service","file-scan-offline-tvKJ1-tcNU","mat-raised-button","","color","basic",3,"click"],[1,"h6",2,"font-size","13px","color","#ACACAC"],["azt-track-service","file-scan-offline-_MOe_cWXcO",1,"link__color","link__hover",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"p",1),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",2)(6,"p"),t._uU(7),t.qZA()(),t.YNc(8,L4,4,3,"div",3),t.ALo(9,"isDocxOnly"),t.YNc(10,Z4,7,6,"div",3),t.ALo(11,"isPdfOnly"),t.qZA(),t.TgZ(12,"mat-dialog-actions",4)(13,"button",5),t.NdJ("click",function(){return i.onNoClick()}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()),2&e){let o,s;t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_cham_diem_thi_offline")),t.xp6(4),t.hij(" * ","lang_auto_note_use_case_file_scan_in_exam_offline"," "),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,7,null!==(o=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==o?o:0)),t.xp6(2),t.Q6J("ngIf",t.lcZ(11,9,null!==(s=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==s?s:0)),t.xp6(4),t.Oqu(t.lcZ(15,11,"lang_auto_dong"))}},dependencies:[E.O5,ro.lW,z.xY,z.H8,_t.bT,_t.t5,_t.yb],styles:[Ru]}),n})(),wl=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialogRef=e,this.data=i}btnCloseDialog(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-dialog-warning"]],features:[t.qOj],decls:16,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8),t._UZ(11,"div",9),t.qZA()()(),t.TgZ(12,"div",10)(13,"button",11),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,3,"lang_auto_canh_bao")," "),t.xp6(3),t.Q6J("innerHtml",i.data.content,t.oJD),t.xp6(3),t.hij(" ",t.lcZ(15,5,"lang_auto_dong")," "))},dependencies:[_t.bT],encapsulation:2}),n})();var H_=A(24985),kl=A(33776),j4=A(76244);const Vs=function(n){return{opacity:n}};function q4(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"li",34),t.ALo(1,"viewPermission"),t.TgZ(2,"a",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleReturnOfflineShare(o.initData.examObj))}),t.O4$(),t.TgZ(3,"svg",65),t._UZ(4,"path",66)(5,"polyline",22)(6,"path",67)(7,"path",68),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(7,Vs,t.xi3(1,2,null==e.initData.examObj?null:e.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(9,5,"lang_auto_tra_ket_qua_thi_offline")," ")}}function F4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",69),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",70)(3,"path",71),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function Q4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",74)(1,"a",75,4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.redirectToClassDetail(o))}),t._uU(3),t.qZA()()}if(2&n){const e=t.MAs(2),i=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",null==i.classObj?null:i.classObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.hij(" ",null==i.classObj?null:i.classObj.name," ")}}function U4(n,a){if(1&n&&(t.ynx(0),t.YNc(1,Q4,4,4,"div",73),t.BQk()),2&n){const e=a.$implicit;let i;t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e.classObj?null:e.classObj.id)&&void 0!==i?i:0)>0)}}function B4(n,a){if(1&n&&(t.ynx(0),t.YNc(1,U4,2,1,"ng-container",72),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function R4(n,a){1&n&&(t.TgZ(0,"div",76)(1,"a",77),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function z4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.redirectToUpdateExam())}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",70)(3,"path",71),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function J4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDialogExamDetail())}),t.O4$(),t.TgZ(1,"svg",80),t._UZ(2,"path",81)(3,"polyline",22)(4,"line",82)(5,"line",83)(6,"line",84),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xem_chi_tiet")," "))}function H4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",30)(1,"h3",31),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",32)(5,"ul",33)(6,"li",34),t.ALo(7,"deletePermission"),t.TgZ(8,"a",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openDeleteExam())}),t.O4$(),t.TgZ(9,"svg",12),t._UZ(10,"path",36)(11,"path",37)(12,"path",38)(13,"line",39)(14,"line",40),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(17,"li",34),t.ALo(18,"editPermission"),t.TgZ(19,"a",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectToActionOnlOff())}),t.O4$(),t.TgZ(20,"svg",12),t._UZ(21,"path",42)(22,"circle",43),t.qZA(),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(25,"li",34),t.ALo(26,"statisticalPermission"),t.TgZ(27,"a",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectToStatistical())}),t.O4$(),t.TgZ(28,"svg",45),t._UZ(29,"path",46)(30,"path",47),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(33,"li",34),t.ALo(34,"viewPermission"),t.TgZ(35,"a",48),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openVideoMonitor())}),t.O4$(),t.TgZ(36,"svg",12),t._UZ(37,"circle",49)(38,"circle",50)(39,"path",51)(40,"path",52),t.qZA(),t._uU(41),t.ALo(42,"mytranslate"),t.qZA()(),t.YNc(43,q4,10,9,"li",53),t.qZA()()(),t.kcU(),t.TgZ(44,"div",54)(45,"div",55)(46,"h3",31),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.YNc(49,F4,6,3,"button",56),t.ALo(50,"editPermission"),t.ALo(51,"configPermission"),t.qZA(),t.TgZ(52,"div",57),t.YNc(53,B4,2,1,"ng-container",58),t.YNc(54,R4,4,3,"ng-template",null,59,t.W1O),t.qZA()(),t.TgZ(56,"div",60)(57,"div",55)(58,"h3",31),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.YNc(61,z4,6,3,"button",61),t.ALo(62,"editPermission"),t.qZA(),t.TgZ(63,"div",62),t.YNc(64,J4,9,3,"button",63),t.ALo(65,"viewPermission"),t.qZA()()}if(2&n){const e=t.MAs(55),i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,17,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(55,Vs,t.xi3(7,19,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(9),t.hij(" ",t.lcZ(16,22,"lang_auto_xoa")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(57,Vs,t.xi3(18,24,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(24,27,"lang_auto_cai_dat")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(59,Vs,t.xi3(26,29,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(32,32,"lang_auto_thong_ke")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(61,Vs,t.xi3(34,34,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(42,37,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.Q6J("ngIf",!i.isNotTestedYet),t.xp6(4),t.hij(" ",t.lcZ(48,39,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(50,41,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")||t.xi3(51,44,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==i.initData.examObj?null:i.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(60,47,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(62,49,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(65,52,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam"))}}function $4(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",85),t._UZ(2,"polyline",86),t.qZA()())}function K4(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",85),t._UZ(2,"polyline",87),t.qZA()())}let $_=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.dialog=e,this.permissionService=i,this.monitorService=o,this.baseApiService=s,this.fireStoreService=r,this.homeworkExamService=l,this.initData={studentsNotInClassResults:[]},this.userList=[],this.isNotTestedYet=!1,this.reloadApi=new t.vpe,this.isShowActions=!0,this.linkExam="",this.nextPage="",this.examDetailDialog={obj:{},curCateId:-1,isOnLib:-1,isShow:!1},this.loadingObj={},this.allQuestionObjs=[],this.dataMixQuestionObjs=[],this.offlineMixQuestionObjs=[],this.isLoadingLib=!1,this.checkFullDescription=!1}toggleShowActions(){this.isShowActions=!this.isShowActions}copyLinkToClipboard(){return this.linkExam}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.dialog.open(wl,{data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteExam(){var e;this.permissionService.hasDeletePermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(kl.h,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogExamConfig(e){var i;this.dialog.open(jo.Y,{width:"750px",data:{hashId:null===(i=this.initData.examObj)||void 0===i?void 0:i.hashId},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.initData.examObj=s,this.reloadApi.emit())})}openDialogExamDetail(){var e,i,o;this.permissionService.hasViewPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?(this.examDetailDialog={obj:this.initData.examObj,curCateId:null!==(i=this.initData.examObj)&&void 0!==i&&i.categoryId?null===(o=this.initData.examObj)||void 0===o?void 0:o.categoryId:0,isOnLib:0,isShow:!0},this.dialog.open(H_.l,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:this.examDetailDialog,restoreFocus:!1}).afterClosed().subscribe(l=>{})):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}handleReturnOfflineShare(e){e?this.permissionService.hasViewPermission("exam",e.permissionObj)?this.dialog.open(ju.W,{width:"600px",data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToActionOnlOff(){var e,i,o,s,r,l,c,u,d,m,p;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let y=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,C=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";C&&C.includes("shareType")&&(y=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(C)),this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${null!==(m=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==m?m:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.hashId}`,`?backto=${encodeURIComponent(y)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectConfigExamOnline(){var e,i,o,s,r,l,c,u,d,m,p;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let y=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,C=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";C&&C.includes("shareType")&&(y=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(C)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${null!==(m=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==m?m:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.hashId}`,`?backto=${encodeURIComponent(y)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){var e,i,o,s,r,l,c,u,d,m;if(this.permissionService.hasStatisticalPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let b=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,y=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";y&&y.includes("shareType")&&(b=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(y)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${null!==(d=this.initData.examObj)&&void 0!==d&&d.categoryId?this.initData.examObj.categoryId:0}/${null===(m=this.initData.examObj)||void 0===m?void 0:m.id}`,"?backto="+encodeURIComponent(b))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openVideoMonitor(){var e,i,o,s,r,l;if(3!=(null===(e=this.initData.examObj)||void 0===e?void 0:e.autoMonitor)&&(this.permissionService.hasFullPermission("exam",null===(i=this.initData.examObj)||void 0===i?void 0:i.permissionObj)&&this.permissionService.hasViewPermission("exam",null===(o=this.initData.examObj)||void 0===o?void 0:o.permissionObj)?this.openDialogWaring("lang_auto_chua_bat_giam_sat_moi"):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")),3==(null===(s=this.initData.examObj)||void 0===s?void 0:s.autoMonitor)&&this.permissionService.hasViewPermission("exam",this.initData.examObj.permissionObj)&&this.monitorService.checkValidForSetUpMonitor()){var u=this.baseApiService.getUserObj();if(typeof aztExam<"u"&&aztExam&&(aztExam.ver=this.monitorService.getMNoteVer(),aztExam.showMonitorTeacher)){var d={user:{token:u.rememberToken,userid:u.id,username:u.fullName},config:{domainApi:On.N.base_api,urlGetPublicForLive:"s3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"s3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:null===(r=this.initData.examObj)||void 0===r?void 0:r.hashId,examid:null===(l=this.initData.examObj)||void 0===l?void 0:l.id,userlist:this.userList,examconfig:this.initData.examObj,firebaseApp:this.fireStoreService,filetypeStr:this.initData.fileTypeStr};aztExam.showMonitorTeacher(d)}}}redirectToClassDetail(e){var i,o,s,r,l,c,u,d;let m=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,p=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";p&&p.includes("shareType")&&(m=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(p)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(d=e.classObj)||void 0===d?void 0:d.id}`,`?backto=${m}`)}toggleFullDescription(){this.checkFullDescription=!this.checkFullDescription}redirectToUpdateExam(){var e,i,o,s,r,l,c,u,d,m;let p=`/admin/testbank/exam-results-list/${null!==(i=null===(e=this.initData.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/${null===(o=this.initData.examObj)||void 0===o?void 0:o.id}/0`,b=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"";b&&b.includes("shareType")&&(p=`/admin/testbank/exam-results-list/${null!==(l=null===(r=this.initData.examObj)||void 0===r?void 0:r.categoryId)&&void 0!==l?l:0}/${null===(c=this.initData.examObj)||void 0===c?void 0:c.id}/0?backto=`+encodeURIComponent(b)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${null!==(d=null===(u=this.initData.examObj)||void 0===u?void 0:u.categoryId)&&void 0!==d?d:0}/${null===(m=this.initData.examObj)||void 0===m?void 0:m.id}`,`?backto=${encodeURIComponent(p)}`)}ngOnInit(){var e;let i=this.commonService.getCurrentDomain();this.linkExam=`${i}/de-thi/${null===(e=this.initData.examObj)||void 0===e?void 0:e.hashId}`,super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(ta.$),t.Y36(qu.M),t.Y36(Zn._),t.Y36(j4.C),t.Y36(lo.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-online-test"]],inputs:{initData:"initData",userList:"userList",isNotTestedYet:"isNotTestedYet"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:47,vars:31,consts:[[1,"box","p-3",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","flex",2,"min-width","135px"],["azt-track-service","menu-online-test-e8RvVr3HPMz",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-online-test-JuzsQFkbn-n",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-online-test-353h1DUlYNc",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-online-test-gvg0oBjKoz0",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-online-test--xkt2Oho69C",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-online-test-SyHOcHV1qRi",1,"dropdown-item",3,"click"],["cx","12","cy","10","r","8"],["cx","12","cy","10","r","3"],["d","M7 22h10"],["d","M12 22v-4"],[3,"ngStyle",4,"ngIf"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],["azt-track-service","menu-online-test-B-MAROi1YQ-","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-online-test-IOoMXZJczdx","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-2"],["azt-track-service","menu-online-test-WA9SAv4z5tk","class","btn-text-primary font-medium",3,"click",4,"ngIf"],["azt-track-service","menu-online-test-A5ZKlgHQbp",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-online-test-B-MAROi1YQ-",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-6 md:col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-6","md:col-span-4","2lg:col-span-3"],["azt-track-service","menu-online-test-z2H-5NP7SkD",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-online-test-IOoMXZJczdx",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["azt-track-service","menu-online-test-WA9SAv4z5tk",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.showCopySuccess()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"rect",8)(10,"path",9),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.kcU(),t._UZ(13,"azt-download-qr-code",10),t.qZA()(),t.TgZ(14,"div",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),t.qZA(),t.kcU(),t.TgZ(20,"span",17),t._uU(21),t.ALo(22,"mytranslate"),t.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(24,"div",11),t.O4$(),t.TgZ(25,"svg",12),t._UZ(26,"path",18)(27,"circle",19),t.qZA(),t.kcU(),t.TgZ(28,"span",17),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",11),t.O4$(),t.TgZ(32,"svg",20),t._UZ(33,"path",21)(34,"polyline",22)(35,"path",23),t.qZA(),t.kcU(),t.TgZ(36,"span",17),t._uU(37),t.ALo(38,"mytranslate"),t.ALo(39,"number"),t.qZA()(),t.TgZ(40,"div",24),t._UZ(41,"azt-share",25),t.qZA()(),t.YNc(42,H4,66,63,"ng-template",26),t.TgZ(43,"div",27)(44,"button",28),t.NdJ("click",function(){return i.toggleShowActions()}),t.YNc(45,$4,3,0,"span",29),t.YNc(46,K4,3,0,"span",29),t.qZA()()()),2&e){const o=t.MAs(4);let s;t.xp6(3),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),t.xp6(2),t.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard()),t.xp6(4),t.hij(" ",t.lcZ(12,19,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_exam_qrcode_"+(null==i.initData.examObj?null:i.initData.examObj.hashId))("linkUrl",i.copyLinkToClipboard()),t.xp6(8),t.hij(" ",t.lcZ(22,21,"lang_testbank_tested_list_date_create")+": "+t.lcZ(23,23,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(30,25,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(38,27,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:t.lcZ(39,29,0))," "),t.xp6(4),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(s=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==s?s:0)("examWithPermissionObj",i.initData.examObj),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(3),t.Q6J("ngIf",i.isShowActions),t.xp6(1),t.Q6J("ngIf",!i.isShowActions)}},dependencies:[E.sg,E.O5,E.PC,Fo.i3,Le.gM,Ks.o,Ji.Q,is.I,E.JJ,_t.bT,_t.BU,_t.vL,_t.Pz,_t.El,_t._W,_t.tO],encapsulation:2}),n})();const Y4=function(n){return{"btn-primary":n}};function G4(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw();return t.KtG(s.changeViewHashId(o.offlineMixQuestionHashId))}),t._uU(2),t.ALo(3,"formatOfflineExamHashIdToNumber"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,Y4,i.hashId==e.offlineMixQuestionHashId&&"normal"==i.type)),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.offlineMixQuestionHashId)," ")}}function W4(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw();return t.KtG(s.changeViewHashId(o.offlineMixQuestionHashId))}),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.offlineMixQuestionHashId)," ")}}function V4(n,a){if(1&n&&t.YNc(0,W4,3,3,"button",16),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("ngIf",e.offlineMixQuestionHashId===i.hashId)}}function X4(n,a){if(1&n&&(t.ynx(0),t.YNc(1,G4,4,6,"ng-container",13),t.YNc(2,V4,1,1,"ng-template",null,14,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf","normal"==i.type)("ngIfElse",e)}}function ty(n,a){if(1&n&&(t.TgZ(0,"div",21)(1,"button",22),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=a.$implicit,i=a.index;t.xp6(2),t.hij(" ",i+1+"-"+t.lcZ(3,1,e)," ")}}function ey(n,a){if(1&n&&(t.TgZ(0,"div",19),t.YNc(1,ty,4,3,"div",20),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.rightAnswers)}}function ny(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ey,2,1,"div",18),t.BQk()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.offlineMixQuestionHashId===i.hashId)}}function iy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dong")," "))}let K_=(()=>{class n extends st.Q{constructor(e,i){var o,s;super(),this.dialogRef=e,this.data=i,this.offlineData={},this.offlineExportObjs=[],this.type="",this.hashId=0,this.totalQuestionAnswer=0,this.examObj={},i&&(this.offlineData=i.offlineItem,this.offlineExportObjs=i.offlineExportObjs,this.type=i.type,this.hashId=null!==(o=i.offlineItem.hashId)&&void 0!==o?o:0,this.examObj=null!==(s=i.examObj)&&void 0!==s?s:{})}closeDialog(){this.dialogRef.close()}changeViewHashId(e){this.hashId=e??1,this.checkTotalQuestion()}checkTotalQuestion(){var e,i;let o=this.offlineExportObjs.length;for(let s=0;s<o;s++){const r=this.offlineExportObjs[s];this.hashId===r.offlineMixQuestionHashId&&(this.totalQuestionAnswer=null!==(i=null===(e=r.rightAnswers)||void 0===e?void 0:e.length)&&void 0!==i?i:0)}}updateCodeExam(){var e,i,o,s,r,l,c,u;let d=`/admin/testbank/exam-results-list/${null!==(i=null===(e=this.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/${null===(o=this.examObj)||void 0===o?void 0:o.id}/0`,m=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"";m&&m.includes("shareType")&&(d=`/admin/testbank/exam-results-list/${null!==(l=null===(r=this.examObj)||void 0===r?void 0:r.categoryId)&&void 0!==l?l:0}/${null===(c=this.examObj)||void 0===c?void 0:c.id}/0?backto=`+encodeURIComponent(m)),this.myNavigationWithQueryString(`/admin/testbank/update-exam-offline/${null!==(u=this.examObj.categoryId)&&void 0!==u?u:0}/${this.examObj.hashId}/${this.offlineData.id}`,`?backto=${encodeURIComponent(d)}`),this.closeDialog()}ngOnInit(){this.checkTotalQuestion()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["preview-offline-exam"]],inputs:{offlineExportObjs:"offlineExportObjs",type:"type",hashId:"hashId"},features:[t.qOj],decls:24,vars:18,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center","mt-2"],[1,"text-md","font-medium","inline-block","mr-2"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-4","overflow-auto",2,"height","50vh"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"text-md","px-3","mt-3"],[1,"inline-block","ml-1"],[1,"lowercase"],["class","text-right mt-4",4,"ngIf"],[4,"ngIf","ngIfElse"],["elseTemplate",""],["azt-track-service","preview-offline-exam-Lnr2h-iZa9H",1,"btn","inline-block","border","border-slate-200","dark:border-darkmode-400","p-1","mr-2","text-center","w-12",3,"ngClass","click"],["azt-track-service","preview-offline-exam-06Q137OqH7a","class","btn box inline-block border border-slate-200 dark:border-darkmode-400 p-1 mr-2 text-center w-12",3,"click",4,"ngIf"],["azt-track-service","preview-offline-exam-06Q137OqH7a",1,"btn","box","inline-block","border","border-slate-200","dark:border-darkmode-400","p-1","mr-2","text-center","w-12",3,"click"],["class","flex items-center p-3","style","flex-wrap: wrap; padding-right: 0;",4,"ngIf"],[1,"flex","items-center","p-3",2,"flex-wrap","wrap","padding-right","0"],["class","mr-3 mb-3",4,"ngFor","ngForOf"],[1,"mr-3","mb-3"],[1,"btn","btn-secondary","btn-sm","w-full",2,"min-width","78px"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-outline-secondary","w-24",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,X4,4,2,"ng-container",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.updateCodeExam()}),t.TgZ(7,"span",5),t._UZ(8,"lucide-icon",6),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",7)(12,"ng-scrollbar",8)(13,"p",9),t._uU(14),t.ALo(15,"mytranslate"),t.TgZ(16,"span",10),t._uU(17),t.TgZ(18,"span",11),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t._uU(21,") "),t.qZA()(),t.YNc(22,ny,2,1,"ng-container",3),t.qZA()(),t.YNc(23,iy,4,3,"div",12),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,10,"lang_auto_ma_de")+": "," "),t.xp6(2),t.Q6J("ngForOf",i.offlineExportObjs),t.xp6(4),t.hij(" ",t.lcZ(10,12,"lang_auto_sua")," "),t.xp6(3),t.Q6J("visibility","hover")("autoHeightDisabled",!1),t.xp6(2),t.hij(" ",t.lcZ(15,14,"lang_auto_bang_dap_an")," "),t.xp6(3),t.hij(" (",i.totalQuestionAnswer," "),t.xp6(2),t.Oqu(t.lcZ(20,16,"lang_auto_cau")),t.xp6(3),t.Q6J("ngForOf",i.offlineExportObjs),t.xp6(1),t.Q6J("ngIf","dialog"==i.type))},dependencies:[E.mk,E.sg,E.O5,P.KC,f.Nh5,_t.bT,_t.q7],encapsulation:2}),n})();function oy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDeleteExam())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",39)(3,"path",40)(4,"path",41)(5,"line",42)(6,"line",43),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}function ay(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.redirectToSettingExamOffline())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",45)(3,"circle",46),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_cai_dat")," "))}function sy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.redirectToStatistical())}),t.O4$(),t.TgZ(1,"svg",48),t._UZ(2,"path",49)(3,"path",50),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_thong_ke")," "))}function ry(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleReturnOfflineShare(o.initData.examObj))}),t.O4$(),t.TgZ(2,"svg",52),t._UZ(3,"path",53)(4,"polyline",16)(5,"path",54)(6,"path",55),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function ly(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",57)(3,"path",58),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function cy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",61)(1,"a",62),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.redirectToClassDetail(o))}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",null==e.classObj?null:e.classObj.name),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function uy(n,a){if(1&n&&(t.ynx(0),t.YNc(1,cy,3,2,"div",60),t.BQk()),2&n){const e=a.$implicit;let i;t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e.classObj?null:e.classObj.id)&&void 0!==i?i:0)>0)}}function dy(n,a){if(1&n&&(t.ynx(0),t.YNc(1,uy,2,1,"ng-container",59),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function _y(n,a){1&n&&(t.TgZ(0,"div",63)(1,"a",64),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function my(n,a){1&n&&(t.ynx(0),t.TgZ(1,"div",65)(2,"div",66)(3,"span",67),t._UZ(4,"azt-loading-ui",68),t.qZA()()(),t.BQk()),2&n&&(t.xp6(4),t.Q6J("type","oval"))}function py(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.redirectToAddCodeExam())}),t.TgZ(1,"span",73),t._UZ(2,"lucide-icon",74),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_sua")," "))}function hy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",76)(1,"button",77),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.openDialogPreview(s))}),t.O4$(),t.TgZ(2,"svg",78),t._UZ(3,"path",79)(4,"polyline",16)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.ALo(10,"formatOfflineExamHashIdToNumber"),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(8),t.AsE(" ",t.lcZ(9,2,"lang_auto_ma_de")," ",t.xi3(10,4,e.hashId,3)," ")}}function gy(n,a){if(1&n&&(t.ynx(0),t.YNc(1,hy,11,7,"div",75),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.initData.offlineMixQuestionObjs)}}function fy(n,a){}function xy(n,a){if(1&n&&(t.TgZ(0,"div",65)(1,"div",2)(2,"h3",26),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,py,5,3,"button",69),t.ALo(6,"editPermission"),t.ALo(7,"isOfflineExamWithCustomMixMark"),t.qZA(),t.TgZ(8,"div",70),t.YNc(9,gy,2,1,"ng-container",35),t.YNc(10,fy,0,0,"ng-template",null,71,t.W1O),t.qZA()()),2&n){const e=t.MAs(11),i=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(6,6,null==i.initData.examObj?null:i.initData.examObj.permissionObj,"exam")&&t.lcZ(7,9,null==i.initData.examObj?null:i.initData.examObj.orcLogId)),t.xp6(4),t.Q6J("ngIf",null==i.initData.offlineMixQuestionObjs?null:i.initData.offlineMixQuestionObjs.length)("ngIfElse",e)}}function vy(n,a){if(1&n&&(t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",27)(5,"ul",28)(6,"li"),t.YNc(7,oy,9,3,"a",29),t.ALo(8,"deletePermission"),t.qZA(),t.TgZ(9,"li"),t.YNc(10,ay,6,3,"a",30),t.ALo(11,"editPermission"),t.qZA(),t.TgZ(12,"li"),t.YNc(13,sy,6,3,"a",31),t.ALo(14,"statisticalPermission"),t.qZA(),t.YNc(15,ry,9,3,"li",23),t.ALo(16,"viewPermission"),t.qZA()()(),t.TgZ(17,"div",32)(18,"div",2)(19,"h3",26),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.YNc(22,ly,6,3,"button",33),t.ALo(23,"editPermission"),t.ALo(24,"configPermission"),t.qZA(),t.TgZ(25,"div",34),t.YNc(26,dy,2,1,"ng-container",35),t.YNc(27,_y,4,3,"ng-template",null,36,t.W1O),t.qZA()(),t.YNc(29,my,5,1,"ng-container",35),t.YNc(30,xy,12,11,"ng-template",null,37,t.W1O)),2&n){const e=t.MAs(28),i=t.MAs(31),o=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,11,"lang_auto_menu")," "),t.xp6(5),t.Q6J("ngIf",t.xi3(8,13,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(11,16,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(14,19,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",!o.isNotTestedYet&&t.xi3(16,22,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")),t.xp6(5),t.hij(" ",t.lcZ(21,25,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(23,27,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")||t.xi3(24,30,null==o.initData.examObj?null:o.initData.examObj.permissionObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==o.initData.examObj?null:o.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",i)}}function by(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"polyline",84),t.qZA()())}function yy(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"polyline",85),t.qZA()())}function wy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-preview-exam",86),t.NdJ("closeDialog",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.closeDialogPreviewExam(o))}),t.qZA()}}let Y_=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.dialog=e,this.offlineExamExportService=i,this.permissionService=o,this.homeworkExamService=s,this.initData={studentsNotInClassResults:[]},this.isNotTestedYet=!1,this.reloadApi=new t.vpe,this.examDetailDialog={obj:{},curCateId:-1,isOnLib:-1,isShow:!1},this.dataDeleteDialog={obj:{},type:0,isShow:!1},this.linkExam="",this.isShowActions=!0,this.offlineExportObjs=[],this.dataDialogWarning={isShow:!1,content:""}}toggleShowActions(){this.isShowActions=!this.isShowActions}openDialogExamConfig(e){var i;this.dialog.open(jo.Y,{width:"750px",data:{hashId:null===(i=this.initData.examObj)||void 0===i?void 0:i.hashId},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.initData.examObj=s,this.reloadApi.emit())})}openDialogPreview(e){this.dialog.open(K_,{width:"766px",data:{offlineItem:e,offlineExportObjs:this.offlineExportObjs,type:"dialog",examObj:this.initData.examObj},restoreFocus:!1})}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.dialog.open(wl,{data:{isShow:!0,content:i},restoreFocus:!1})})}closeDialogPreviewExam(e){this.examDetailDialog={obj:{},isShow:!1}}openDeleteExam(){var e;this.permissionService.hasViewPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(kl.h,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.commonService.getTranslate("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay").subscribe(o=>{this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")})}closeDeleteExam(e){e?(this.dataDeleteDialog={obj:{},type:0,isShow:!1},this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.dataDeleteDialog={obj:{},type:0,isShow:!1}}handleReturnOfflineShare(e){e?this.permissionService.hasViewPermission("exam",e.permissionObj)?this.dialog.open(ju.W,{width:"600px",data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToSettingExamOffline(){var e,i,o,s,r,l,c,u,d,m,p;if(this.permissionService.hasEditPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let y=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,C=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";C&&C.includes("shareType")&&(y=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(C)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${null!==(m=null===(d=this.initData.examObj)||void 0===d?void 0:d.categoryId)&&void 0!==m?m:0}/${null===(p=this.initData.examObj)||void 0===p?void 0:p.hashId}`,`?backto=${encodeURIComponent(y)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){var e,i,o,s,r,l,c,u,d,m;if(this.permissionService.hasStatisticalPermission("exam",null===(e=this.initData.examObj)||void 0===e?void 0:e.permissionObj)){let b=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,y=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";y&&y.includes("shareType")&&(b=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(y)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${null!==(d=this.initData.examObj)&&void 0!==d&&d.categoryId?this.initData.examObj.categoryId:0}/${null===(m=this.initData.examObj)||void 0===m?void 0:m.id}`,"?backto="+encodeURIComponent(b))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToClassDetail(e){var i,o,s,r,l,c,u,d;let m=`/admin/testbank/exam-results-list/${null!==(o=null===(i=this.initData.examObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.examObj)||void 0===s?void 0:s.id}/0`,p=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";p&&p.includes("shareType")&&(m=`/admin/testbank/exam-results-list/${null!==(c=null===(l=this.initData.examObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.examObj)||void 0===u?void 0:u.id}/0?backto=`+encodeURIComponent(p)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(d=e.classObj)||void 0===d?void 0:d.id}`,`?backto=${m}`)}redirectToAddCodeExam(){var e,i,o,s,r,l,c,u,d,m;let p=`/admin/testbank/exam-results-list/${null!==(i=null===(e=this.initData.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/${null===(o=this.initData.examObj)||void 0===o?void 0:o.id}/0`,b=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"";b&&b.includes("shareType")&&(p=`/admin/testbank/exam-results-list/${null!==(l=null===(r=this.initData.examObj)||void 0===r?void 0:r.categoryId)&&void 0!==l?l:0}/${null===(c=this.initData.examObj)||void 0===c?void 0:c.id}/0?backto=`+encodeURIComponent(b)),this.myNavigationWithQueryString(`/admin/testbank/add-code-exam-offline/${null!==(d=null===(u=this.initData.examObj)||void 0===u?void 0:u.categoryId)&&void 0!==d?d:0}/${null===(m=this.initData.examObj)||void 0===m?void 0:m.hashId}`,`?backto=${encodeURIComponent(p)}`)}getAnswerOffline(e){this.initStatusObj(),this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(e).subscribe(i=>{var o,s,r;1==i.success?(this.offlineExportObjs=null!==(s=null===(o=i.data)||void 0===o?void 0:o.objs)&&void 0!==s?s:[],this.successStatusObj()):this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"",!0)}))}ngOnInit(){var e,i,o;let s=this.commonService.getCurrentDomain();this.linkExam=`${s}/de-thi/${null===(e=this.initData.examObj)||void 0===e?void 0:e.hashId}`,!(null===(i=this.initData.examObj)||void 0===i)&&i.hashId&&this.getAnswerOffline(null===(o=this.initData.examObj)||void 0===o?void 0:o.hashId),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(Bt.qr),t.Y36(ta.$),t.Y36(lo.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-offline-test"]],inputs:{initData:"initData",isNotTestedYet:"isNotTestedYet"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:40,vars:26,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",2,"max-width","90%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-offline-test-C7d866E60NA",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"closeDialog",4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],["azt-track-service","menu-offline-test-v0ibVgHaHZp","class","dropdown-item text-danger",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-boVa6dq1W1j","class","dropdown-item",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-C_QDr7XeJG-","class","dropdown-item",3,"click",4,"ngIf"],[1,"azt-document-who","mt-4"],["azt-track-service","menu-offline-test-l07YIWF2M_z","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],["doneLoading",""],["azt-track-service","menu-offline-test-v0ibVgHaHZp",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-offline-test-boVa6dq1W1j",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-offline-test-C_QDr7XeJG-",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-offline-test-yp0Mu41Mr",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-offline-test-l07YIWF2M_z",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-4","2lg:col-span-3"],["azt-track-service","menu-offline-test-4CoI06cv-3-",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],[1,"azt-document-list-code","mt-4"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[3,"type"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","mt-3"],["noExamOffline",""],["azt-track-service","menu-offline-test-Q_qGX1X8E2W",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],["class","col-span-6",4,"ngFor","ngForOf"],[1,"col-span-6"],["azt-track-service","menu-offline-test-Md6K9sfq64w",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],[3,"closeDialog"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5),t.O4$(),t.TgZ(7,"svg",6),t._UZ(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),t.qZA(),t.kcU(),t.TgZ(12,"span",11),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(16,"div",5),t.O4$(),t.TgZ(17,"svg",6),t._UZ(18,"path",12)(19,"circle",13),t.qZA(),t.kcU(),t.TgZ(20,"span",11),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",5),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"polyline",16)(27,"path",17),t.qZA(),t.kcU(),t.TgZ(28,"span",11),t._uU(29),t.ALo(30,"mytranslate"),t.ALo(31,"number"),t.qZA()(),t.TgZ(32,"div",18),t._UZ(33,"azt-share",19),t.qZA()(),t.YNc(34,vy,32,33,"ng-template",20),t.TgZ(35,"div",21)(36,"button",22),t.NdJ("click",function(){return i.toggleShowActions()}),t.YNc(37,by,3,0,"span",23),t.YNc(38,yy,3,0,"span",23),t.qZA()()(),t.YNc(39,wy,1,0,"azt-preview-exam",24)),2&e){const o=t.MAs(4);let s;t.xp6(3),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),t.xp6(2),t.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),t.xp6(8),t.hij(" ",t.lcZ(14,16,"lang_testbank_tested_list_date_create")+": "+t.lcZ(15,18,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(22,20,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(30,22,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:t.lcZ(31,24,0))," "),t.xp6(4),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(s=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==s?s:0)("examWithPermissionObj",i.initData.examObj),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(3),t.Q6J("ngIf",i.isShowActions),t.xp6(1),t.Q6J("ngIf",!i.isShowActions),t.xp6(1),t.Q6J("ngIf",i.examDetailDialog.isShow)}},dependencies:[E.sg,E.O5,Le.gM,H_.l,Ji.Q,rs.J,is.I,f.Nh5,E.JJ,_t.bT,_t.BU,_t.vL,_t.Pz,_t.El,_t.r,_t.q7,_t._W,_t.tO],encapsulation:2}),n})();var G_=A(49272),ky=A(60023),Xs=A(64123),ds=A(13953);const Cy=["student",""];function Ty(n,a){1&n&&(t.TgZ(0,"span",20),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function Ay(n,a){1&n&&(t.TgZ(0,"span",20),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function Sy(n,a){if(1&n&&(t.TgZ(0,"div",17)(1,"span",18),t._uU(2),t.qZA(),t.YNc(3,Ty,4,6,"span",19),t.YNc(4,Ay,4,6,"span",19),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.student.fullName),t.xp6(1),t.Q6J("ngIf",0==e.student.status&&(e.student.isMarked||e.student.isNotMarked)),t.xp6(1),t.Q6J("ngIf",-1==e.student.status&&(e.student.isMarked||e.student.isNotMarked))}}function Oy(n,a){if(1&n&&t._UZ(0,"img",21),2&n){const e=t.oxw();t.Q6J("nameImages",e.student.nameImages)}}function Ey(n,a){1&n&&(t.TgZ(0,"span",22),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_test_result_not_marked_essay")))}function My(n,a){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_thi")))}function Iy(n,a){1&n&&(t.TgZ(0,"span",24),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function Ly(n,a){1&n&&(t.TgZ(0,"span",25),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_thi"),""))}function Zy(n,a){1&n&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_point")+": "," "))}function Py(n,a){if(1&n&&(t.TgZ(0,"span",27),t._uU(1),t.qZA()),2&n){const e=t.oxw();let i;t.xp6(1),t.hij(" ",null!==(i=e.student.mark)&&void 0!==i?i:0," ")}}function Ny(n,a){1&n&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function Dy(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.timeService.calculationTestedTime(e.student.startedTest||void 0,e.student.createdAt||void 0)," ")}}function jy(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.timeService.calculationTestedTime(e.student.startedTest||void 0)," ")}}function qy(n,a){1&n&&(t.TgZ(0,"p",38),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+": "," "))}function Fy(n,a){if(1&n&&(t.TgZ(0,"p",39),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);let i;t.xp6(1),t.hij(" ",null!==(i=null==e.student.filesParse?null:e.student.filesParse.length)&&void 0!==i?i:0," ")}}function Qy(n,a){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,qy,3,3,"p",36),t.YNc(2,Fy,2,1,"p",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}function Uy(n,a){if(1&n&&(t.TgZ(0,"div",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function By(n,a){if(1&n&&(t.TgZ(0,"div",35)(1,"p",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Uy,3,3,"div",40),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_thoi_gian_nop_bai")+": "," "),t.xp6(2),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}const Ry=function(n){return[n]},zy=function(n){return{backto:n}};function Jy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",28),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleSelectExamResult())}),t.ALo(1,"mylocalize"),t.TgZ(2,"div",29),t.YNc(3,Ny,3,3,"div",30),t.TgZ(4,"div",31),t.YNc(5,Dy,2,1,"span",32),t.YNc(6,jy,2,1,"span",32),t.qZA()(),t.YNc(7,Qy,3,2,"div",33),t.YNc(8,By,5,4,"div",33),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(9,Ry,t.lcZ(1,7,"/admin/testbank/test-review/"+e.examId+"/"+e.student.userId+"/"+e.student.studentId+"/"+e.student.resultId)))("queryParams",t.VKq(11,zy,e.backLink)),t.xp6(3),t.Q6J("ngIf",!e.student.isNotTested),t.xp6(2),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.student.isOnTest||e.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.hasEssayQuestion),t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}function Hy(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleRemoveExamResult())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",42),t._UZ(3,"path",43)(4,"path",44)(5,"path",45)(6,"line",46)(7,"line",47),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_remove_offline_result"))}const $y=function(n,a){return{"zoom-in":n,"flex items-center":a}},Ky=function(n){return{"border-b border-slate-200 dark:border-darkmode-400":n}};let Yy=(()=>{class n extends st.Q{constructor(e,i){super(),this.timeService=e,this.dialog=i,this.hasEssayQuestion=!1,this.onHandleRemove=new t.vpe,this.onHandleSelect=new t.vpe}ngOnInit(){super.ngOnInit()}handleSelectExamResult(){this.onHandleSelect.emit()}handleRemoveExamResult(){var e,i;this.dialog.open(ky.V,{data:{examHashId:null!==(e=this.examHashId)&&void 0!==e?e:"",examResultId:null!==(i=this.student.resultId)&&void 0!==i?i:0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.onHandleRemove.emit()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-exam-result-student-exam-result-box","student",""]],inputs:{student:"student",examHashId:"examHashId",examId:"examId",backLink:"backLink",hasEssayQuestion:"hasEssayQuestion"},outputs:{onHandleRemove:"onHandleRemove",onHandleSelect:"onHandleSelect"},features:[t.qOj],attrs:Cy,decls:17,vars:20,consts:[[1,"rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px","height","100%","position","relative",3,"ngClass"],["azt-track-service","student_exam_result_box-sBts0o9YG",1,"flex","items-center","p-3","student-exam-result-up",3,"ngClass","click"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc( 100% - 3.5rem )"],["class","azt-student-name flex items-center","style","flex-wrap: wrap;",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending font-medium",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-slate-500 font-medium",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["azt-track-service","student_exam_result_box-exJlVgNrtS","class","py-3",3,"routerLink","queryParams","click",4,"ngIf"],["azt-track-service","student_exam_result_box-0z-vC1cAnO","class","student-exam-result-delete",3,"matTooltip","click",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending","font-medium"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-slate-500","font-medium"],[1,"text-black","font-medium"],["azt-track-service","student_exam_result_box-exJlVgNrtS",1,"py-3",3,"routerLink","queryParams","click"],[1,"flex","items-center","px-3","py-2"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs","font-medium"],[4,"ngIf"],["class","flex items-center px-3 pb-2",4,"ngIf"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"flex","items-center","px-3","pb-2"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],["class","text-xs text-slate-500 font-medium",4,"ngIf"],[1,"mr-auto","text-xs","text-slate-500"],[1,"text-xs","text-slate-500","font-medium"],["class","text-slate-500 text-right text-xs font-medium",4,"ngIf"],["azt-track-service","student_exam_result_box-0z-vC1cAnO",1,"student-exam-result-delete",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-trash-2"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","x2","10","y1","11","y2","17"],["x1","14","x2","14","y1","11","y2","17"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.handleSelectExamResult()}),t.TgZ(2,"div",2),t._UZ(3,"azt-create-avatar",3),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,Sy,5,3,"div",5),t.YNc(6,Oy,1,1,"img",6),t.TgZ(7,"div",7)(8,"div",8),t.YNc(9,Ey,3,3,"span",9),t.YNc(10,My,3,3,"span",10),t.YNc(11,Iy,4,6,"span",11),t.YNc(12,Ly,3,3,"span",12),t.YNc(13,Zy,3,3,"span",13),t.YNc(14,Py,2,1,"span",14),t.qZA()()()(),t.YNc(15,Jy,9,13,"a",15),t.YNc(16,Hy,8,3,"div",16),t.qZA()),2&e){let o,s,r;t.Q6J("ngClass",t.WLB(15,$y,i.student.resultId,!i.student.resultId)),t.xp6(1),t.Q6J("ngClass",t.VKq(18,Ky,i.student.resultId)),t.xp6(2),t.Q6J("linkAvatar",null!==(o=i.student.avatar)&&void 0!==o?o:"")("nameCreateAvatar",i.student.fullName)("size",40),t.xp6(2),t.Q6J("ngIf",!i.student.nameImages||(null!==(s=i.student.studentId)&&void 0!==s?s:0)>0),t.xp6(1),t.Q6J("ngIf",i.student.nameImages&&(null!==(r=i.student.studentId)&&void 0!==r?r:0)<=0),t.xp6(3),t.Q6J("ngIf",i.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",i.student.isOnTest),t.xp6(1),t.Q6J("ngIf",i.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",i.student.isNotTested),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.resultId),t.xp6(1),t.Q6J("ngIf",i.student.resultId&&(-1===i.student.userId||i.student.nameImages))}},dependencies:[w.rH,E.mk,E.O5,Le.gM,Xs.g,ds.L,_t.mp,_t.bT],encapsulation:2}),n})();function Gy(n,a){if(1&n&&t.GkF(0,10),2&n){t.oxw();const e=t.MAs(14);t.Q6J("ngTemplateOutlet",e)}}function Wy(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Vy(n,a){if(1&n&&(t.TgZ(0,"div",13),t.GkF(1,10),t.qZA()),2&n){t.oxw(2);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function Xy(n,a){if(1&n&&(t.TgZ(0,"div"),t.GkF(1,10),t.TgZ(2,"div",14)(3,"ng-scrollbar",15)(4,"div",16),t.GkF(5,10),t.qZA()()()()),2&n){t.oxw(2);const e=t.MAs(8),i=t.MAs(12);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("ngTemplateOutlet",i)}}function tw(n,a){if(1&n&&(t.YNc(0,Vy,2,1,"div",11),t.YNc(1,Xy,6,3,"div",12)),2&n){const e=t.oxw();t.Q6J("ngIf",e.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!e.isNotTestedYet&&e.obj)}}const W_=function(n){return{"col-span-2":n}};function ew(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectClassroomToShowEvent(null==o.examResultObjsOfSelectedClassroom.classObj?null:o.examResultObjsOfSelectedClassroom.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(8,W_,e.isOpenSideNav)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,4,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,6,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")"," ")}}const nw=function(n){return{active:n}};function iw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.selectClassroomToShowEvent(null==o.classObj?null:o.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(9,W_,i.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(11,nw,(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)==(null==e.classObj?null:e.classObj.id))),t.xp6(1),t.Q6J("matTooltip",t.lcZ(3,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,7,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function ow(n,a){if(1&n&&(t.ynx(0),t.YNc(1,iw,6,13,"div",18),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);let o;t.xp6(1),t.Q6J("ngIf",e.indexCounter<i.showNumberClassroom||e.indexCounter<=i.showNumberClassroom&&(null!==(o=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==o?o:0)<=i.showNumberClassroom)}}function aw(n,a){if(1&n&&(t.ynx(0),t.YNc(1,ow,2,1,"ng-container",12),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter)}}function sw(n,a){if(1&n&&t.GkF(0,10),2&n){t.oxw(2);const e=t.MAs(10);t.Q6J("ngTemplateOutlet",e)}}function rw(n,a){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,ew,6,10,"div",18),t.YNc(2,aw,2,1,"ng-container",19),t.YNc(3,sw,1,1,"ng-container",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!=e.examResultObjsOfSelectedClassroom.indexCounter&&e.examResultObjsOfSelectedClassroom.indexCounter>e.showNumberClassroom),t.xp6(1),t.Q6J("ngForOf",e.examResultObjsByClassroom),t.xp6(1),t.Q6J("ngIf",e.examResultObjsByClassroom.length>e.showNumberClassroom+1)}}function lw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(2);return t.KtG(s.selectClassroomToShowEvent(null==o.classObj?null:o.classObj.id))}),t.TgZ(2,"span",22),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,3,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","left"),t.xp6(2),t.hij(" ",t.lcZ(5,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function cw(n,a){if(1&n&&(t.ynx(0),t.YNc(1,lw,6,7,"li",12),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);let o;t.xp6(1),t.Q6J("ngIf",e.indexCounter>i.showNumberClassroom||e.indexCounter>=i.showNumberClassroom&&(null!==(o=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==o?o:0)>i.showNumberClassroom)}}function uw(n,a){if(1&n&&(t.ynx(0),t.YNc(1,cw,2,1,"ng-container",12),t.BQk()),2&n){const e=a.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter&&(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)!=(null==e.classObj?null:e.classObj.id))}}function dw(n,a){if(1&n&&(t.TgZ(0,"div",24)(1,"button",25)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(5,"svg",26),t._UZ(6,"polyline",27),t.qZA()(),t.kcU(),t.TgZ(7,"mat-menu",null,28)(9,"div",29)(10,"ul",30),t.YNc(11,uw,2,1,"ng-container",19),t.qZA()()()()),2&n){const e=t.MAs(8),i=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(2),t.Oqu(t.lcZ(4,3,"lang_auto_xem_them")),t.xp6(8),t.Q6J("ngForOf",i.examResultObjsByClassroom)}}const _w=function(n){return{"lg:col-span-3":n}};function mw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"testbank-exam-result-student-exam-result-box",36),t.NdJ("onHandleSelect",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.handleSelectExamResult(s))})("onHandleRemove",function(){const s=t.CHM(e).index,r=t.oxw(2);return t.KtG(r.handleRemoveExamResult(s))}),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(6,_w,!i.isOpenSideNav&&!i.isMobile)),t.xp6(1),t.Q6J("student",e)("examHashId",null==i.obj?null:i.obj.hashId)("examId",null==i.obj?null:i.obj.id)("backLink",i.backToLink)("hasEssayQuestion",i.hasEssayQuestion)}}function pw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",39)(1,"azt-paging",40),t.NdJ("SendPage",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.selectPageEvent(o))}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("lengthPage",e.totalPage)("paging",e.curPage)}}function hw(n,a){if(1&n&&(t.TgZ(0,"div",37),t.YNc(1,pw,2,2,"div",38),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.totalPage>1)}}function gw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",41)(2,"button",42),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.selectPageWithClassroomId())}),t._uU(3),t.ALo(4,"mytranslate"),t.O4$(),t.TgZ(5,"svg",43),t._UZ(6,"polyline",27),t.qZA()()()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_xem_them"),"\xa0 "))}function fw(n,a){if(1&n&&(t.TgZ(0,"div",32),t.YNc(1,mw,2,8,"div",33),t.YNc(2,hw,2,1,"div",34),t.YNc(3,gw,7,3,"div",34),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.lstStudentResults),t.xp6(1),t.Q6J("ngIf",-1==(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.id)&&!e.onRefactorMode),t.xp6(1),t.Q6J("ngIf",e.onRefactorMode&&e.checkShowLoadMore(-1==(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.id)?e.examResultObjsByPage.length:null==e.examResultObjsOfSelectedClassroom.results?null:e.examResultObjsOfSelectedClassroom.results.length))}}function xw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",48),t._UZ(2,"path",49)(3,"circle",50),t.qZA(),t.kcU(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function vw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",48),t._UZ(2,"line",52)(3,"path",53)(4,"path",54)(5,"path",55),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"lang_auto_huy_cham_file_scan")))}function bw(n,a){if(1&n&&(t.TgZ(0,"p",44),t._uU(1),t.qZA(),t.YNc(2,xw,7,3,"a",45),t.YNc(3,vw,9,3,"a",46)),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.headerTitle," "),t.xp6(1),t.Q6J("ngIf",!e.showFileScan&&!e.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",e.showFileScan)}}function yw(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_note_scan_file_in_student_exam_result_for_only_offline_exam")," "))}function ww(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_auto_note_scan_file_in_student_exam_result_for_online_and_offline_exam")," ")}function kw(n,a){if(1&n&&(t.TgZ(0,"div",64),t.YNc(1,yw,3,3,"div",3),t.ALo(2,"isOfflineExam"),t.YNc(3,ww,2,3,"ng-template",null,65,t.W1O),t.qZA()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,null==i.obj?null:i.obj.orcLogId))("ngIfElse",e)}}function Cw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",66)(1,"div",67)(2,"a",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showSelectFileScan())}),t.O4$(),t.TgZ(3,"svg",69),t._UZ(4,"path",49)(5,"circle",50),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",70)(10,"a",71),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showCopySuccess())}),t.O4$(),t.TgZ(11,"svg",69),t._UZ(12,"circle",72)(13,"circle",73)(14,"circle",74)(15,"line",75)(16,"line",76),t.qZA(),t.kcU(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(7),t.Oqu(t.lcZ(8,3,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan")),t.xp6(3),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(19,5,"lang_auto_copy_link_de_thi"))}}function Tw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",70)(1,"a",77),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showSelectFileScan())}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",49)(4,"circle",50),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function Aw(n,a){1&n&&(t.TgZ(0,"p",78),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_hoac")))}function Sw(n,a){1&n&&(t.TgZ(0,"p",79),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_tai_app_azota_de_cham_bai_bang_camera_cua_dien_thoai_tai_app_tai_day")," "))}function Ow(n,a){1&n&&(t.TgZ(0,"div",80)(1,"div",81)(2,"a",82),t._UZ(3,"img",83),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",84),t._UZ(6,"img",85),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/2928664.svg"),t.LSH))}function Ew(n,a){1&n&&(t.ynx(0),t.TgZ(1,"p",78),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",86),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",80)(8,"div",87)(9,"p",88)(10,"span",89),t._uU(11,"Google Play"),t.qZA(),t._UZ(12,"azt-download-qr-code",90),t.qZA(),t.TgZ(13,"p",91)(14,"span",89),t._uU(15,"App Store"),t.qZA(),t._UZ(16,"azt-download-qr-code",90),t.qZA()()(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_hoac")),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),t.xp6(7),t.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function Mw(n,a){if(1&n&&(t.TgZ(0,"div",56)(1,"h3",57),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,kw,5,4,"div",58),t.YNc(5,Cw,20,7,"div",59),t.ALo(6,"isOfflineExam"),t.YNc(7,Tw,8,3,"ng-template",null,60,t.W1O),t.YNc(9,Aw,3,3,"p",61),t.YNc(10,Sw,3,3,"p",62),t.YNc(11,Ow,8,6,"div",63),t.YNc(12,Ew,17,10,"ng-container",12),t.qZA()),2&n){const e=t.MAs(8),i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(2),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!t.lcZ(6,10,null==i.obj?null:i.obj.orcLogId))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobile)}}const Iw=function(n){return{"py-2":n}},Lw=["*"];let V_=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.timeService=e,this.browserStorageService=i,this.mobileWebviewService=o,this.isOpenSideNav=!0,this.isMobile=!1,this.backToLink="",this.onRefactorMode=!1,this.scanLoading=!1,this.showFileScan=!1,this.mustShownResultId=0,this.headerTitle="",this.notTestedOpenFileScan=new t.vpe,this.selectTabClassroomEmitter=new t.vpe,this.selectPageClassroomEmitter=new t.vpe,this.removeOfflineResultEmitter=new t.vpe,this.obj=void 0,this.examResultObjsByClassroom=[],this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.examResultObjsOfSelectedClassroom={},this.testbankClassroomSelectedStoreKey="exam_results_shown_class_",this.showNumberClassroom=(this.isMobile?1:3)-1,this.examResultObjsByPage=[],this.totalPage=0,this.curPage=1,this.sizePage=100}copyLinkToClipboard(){var e;return`${this.commonService.getCurrentDomain()}/de-thi/${null===(e=this.obj)||void 0===e?void 0:e.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}showSelectFileScan(){var e,i;this.isMobileWebView?this.mobileWebviewService.sendMarkOfflineExamObj(null!==(i=null===(e=this.obj)||void 0===e?void 0:e.hashId)&&void 0!==i?i:""):(this.showFileScan=!this.showFileScan,this.notTestedOpenFileScan.emit(this.showFileScan))}selectPageEvent(e){var i,o;this.examResultObjsByPage=[],this.curPage=e;let s=100,r=this.examResultObjsByClassroom.find(l=>{var c;return-1==(null===(c=l.classObj)||void 0===c?void 0:c.id)});if(r&&null!==(i=r.results)&&void 0!==i&&i.length){let l=null!==(o=r.results)&&void 0!==o?o:[],c=l.length;if(this.totalPage=Math.ceil(c/s),c>s)for(let u=(e-1)*s;u<e*s;u++)l.length-1>=u&&this.examResultObjsByPage.push(l[u]);else this.examResultObjsByPage=l}}selectPageWithClassroomId(){var e,i,o,s=null!==(o=this.commonService.myParseJson(null!==(i=this.browserStorageService.getSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+(null===(e=this.obj)||void 0===e?void 0:e.hashId)))&&void 0!==i?i:""))&&void 0!==o?o:{};s&&(this.curPage+=1,this.selectPageClassroomEmitter.emit({classroomId:s.classroomId,page:this.curPage}))}checkShowLoadMore(e){return!!e&&e%this.sizePage==0}selectClassroomToShowEvent(e){var i;this.browserStorageService.saveSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(i=this.obj)||void 0===i?void 0:i.hashId),(e??-1).toString()),this.initDataForClassroom(),this.selectTabClassroomEmitter.emit(e)}findClassroomIdByExamResultId(e,i){var o,s,r;for(var l of e)for(var c of null!==(o=l.results)&&void 0!==o?o:[])if((null===(s=c.id)||void 0===s?void 0:s.toString())==i.toString()&&null!==(r=l.classObj)&&void 0!==r&&r.id)return l.classObj.id}findClassroomDataByClassroomId(e,i){var o,s;for(var r of e)if((null===(s=null===(o=r.classObj)||void 0===o?void 0:o.id)||void 0===s?void 0:s.toString())==i)return r;return e.length>0?e[0]:void 0}initDataForClassroom(){var e,i,o,s=this.browserStorageService.getSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(e=this.obj)||void 0===e?void 0:e.hashId));if(!s){var r=null===(o=null===(i=this.examResultObjsByClassroom)||void 0===i?void 0:i[0].classObj)||void 0===o?void 0:o.id;s=r?r.toString():"-1"}var l=this.findClassroomDataByClassroomId(this.examResultObjsByClassroom,s);l&&(this.examResultObjsOfSelectedClassroom=l)}handleSelectExamResult(e){var i;e.resultId&&this.commonService.myNavigationWithQueryString(`/admin/testbank/test-review/${null===(i=this.obj)||void 0===i?void 0:i.id}/${e.userId}/${e.studentId}/${e.resultId}`,`?backto=${this.backToLink}`)}handleRemoveExamResult(e){this.onRefactorMode?this.removeOfflineResultEmitter.emit(!0):(this.lstStudentResults.splice(e,1),this.commonService.refresh())}ngOnChanges(){var e;if(this.examResultObjsByClassroom.length){if(this.mustShownResultId){var i=this.findClassroomIdByExamResultId(this.examResultObjsByClassroom,this.mustShownResultId);i&&this.browserStorageService.saveSimpleSessionStorage(this.testbankClassroomSelectedStoreKey+(null===(e=this.obj)||void 0===e?void 0:e.hashId),i.toString())}this.initDataForClassroom(),this.selectPageEvent(this.curPage)}}ngOnInit(){this.examResultObjsByClassroom.length&&(this.initDataForClassroom(),this.selectPageEvent(this.curPage)),super.ngOnInit()}get lstStudentResults(){var e,i;return null!==(i=-1==(null===(e=this.examResultObjsOfSelectedClassroom.classObj)||void 0===e?void 0:e.id)?this.examResultObjsByPage:this.examResultObjsOfSelectedClassroom.results)&&void 0!==i?i:[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O),t.Y36(wi.z),t.Y36(Uu.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-exam-result-new"]],inputs:{isOpenSideNav:"isOpenSideNav",isMobile:"isMobile",backToLink:"backToLink",onRefactorMode:"onRefactorMode",scanLoading:"scanLoading",showFileScan:"showFileScan",mustShownResultId:"mustShownResultId",headerTitle:"headerTitle",obj:"obj",examResultObjsByClassroom:"examResultObjsByClassroom",isNotTestedYet:"isNotTestedYet",hasEssayQuestion:"hasEssayQuestion"},outputs:{notTestedOpenFileScan:"notTestedOpenFileScan",selectTabClassroomEmitter:"selectTabClassroomEmitter",selectPageClassroomEmitter:"selectPageClassroomEmitter",removeOfflineResultEmitter:"removeOfflineResultEmitter"},features:[t.qOj,t.TTD],ngContentSelectors:Lw,decls:17,vars:6,consts:[[1,"flex","items-center"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"box","mt-2","relative",2,"min-height","90vh",3,"ngClass"],[4,"ngIf","ngIfElse"],["noLoading",""],["showClassroomTabTmp",""],["seeMoreTabOnWebTmp",""],["showExamResultInOneClassroom",""],["examResultHeaderTmp",""],["notTestYetTmp",""],[3,"ngTemplateOutlet"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],[1,"scrollable-content","flex","items-center"],[1,"azt-student-list","scrollable-content",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"mt-4","p-2"],[1,"nav","nav-link-tabs","grid","grid-cols-12","grap-3","p-2"],["class","col-span-6 md:col-span-3 nav-item",3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","nav-item",3,"ngClass"],["azt-track-service","student-exam-result-new-MSaafbzaB",1,"active","nav-link","w-full","py-1",3,"click"],[1,"truncate",3,"matTooltip","matTooltipPosition"],["azt-track-service","student-exam-result-new-_LwxxkAKE2",1,"nav-link","w-full","py-1",3,"ngClass","click"],[1,"col-span-3","nav-item"],[1,"nav-link","flex","items-center","w-full","py-1",2,"border","none",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-2"],["points","6 9 12 15 18 9"],["listActiveMenu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","student-exam-result-new-UODUmv0qb5",1,"dropdown-item",3,"click"],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],["class","col-span-12 mt-2",4,"ngIf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"w-full",3,"student","examHashId","examId","backLink","hasEssayQuestion","onHandleSelect","onHandleRemove"],[1,"col-span-12","mt-2"],["class","text-left mt-2",4,"ngIf"],[1,"text-left","mt-2"],[3,"lengthPage","paging","SendPage"],[1,"text-center","mt-3"],["azt-track-service","student-exam-result-new-QpFPWsrS4","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-md","font-medium","mr-auto"],["azt-track-service","student-exam-result-new-YugzQx7amV","style","height: 43px;font-size: 13px;","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-UfMbOZaVPI","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-YugzQx7amV",1,"btn","btn-pending-soft","btn-sm",2,"height","43px","font-size","13px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],["cx","12","cy","13","r","3"],["azt-track-service","student-exam-result-new-UfMbOZaVPI",1,"btn","btn-pending-soft","btn-sm",3,"click"],["x1","2","y1","2","x2","22","y2","22"],["d","M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],["d","M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],["d","M14.121 15.121A3 3 0 1 1 9.88 10.88"],[1,"text-center","mt-3","mx-auto","p-3",2,"max-width","28rem"],[1,"font-medium","text-lg"],["class","mt-3 mx-auto",4,"ngIf"],["class","flex flex-col md:flex-row mx-auto",4,"ngIf","ngIfElse"],["OfflineExam",""],["class","h5 mt-2 font-medium",4,"ngIf"],["class","mt-2 ml-auto mr-auto w-4/5",4,"ngIf"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"mt-3","mx-auto"],["notOfflineExam",""],[1,"flex","flex-col","md:flex-row","mx-auto"],[1,"mt-3","lg:mr-auto"],["azt-track-service","student-exam-result-new-Kn62V1VJ1o",1,"btn","btn-secondary-soft",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],[1,"mt-3","lg:ml-auto"],["azt-track-service","student-exam-result-new-9Vqr3K2yC9",1,"btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],["azt-track-service","student-exam-result-new-xsQoGzCGKe",1,"btn","btn-secondary-soft",3,"click"],[1,"h5","mt-2","font-medium"],[1,"mt-2","ml-auto","mr-auto","w-4/5"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","student-exam-result-new-OSvgGR80G","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","student-exam-result-new-bJncs5ICRt","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"mt-2","ml-auto","mr-auto","w-80"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(e,i){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,Gy,1,1,"ng-container",1),t.qZA(),t.TgZ(2,"div",2),t.Hsn(3),t.YNc(4,Wy,1,0,"azt-loading-effect",3),t.YNc(5,tw,2,2,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(7,rw,4,3,"ng-template",null,5,t.W1O),t.YNc(9,dw,12,5,"ng-template",null,6,t.W1O),t.YNc(11,fw,4,3,"ng-template",null,7,t.W1O),t.YNc(13,bw,4,3,"ng-template",null,8,t.W1O),t.YNc(15,Mw,13,12,"ng-template",null,9,t.W1O)),2&e){const o=t.MAs(6);t.xp6(1),t.Q6J("ngIf",i.obj),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Iw,!i.showFileScan)),t.xp6(2),t.Q6J("ngIf",i.scanLoading)("ngIfElse",o)}},dependencies:[E.mk,E.sg,E.O5,E.tP,Fo.i3,ro.lW,ke.VK,ke.p6,Le.gM,P.KC,xe.Q,xl.L,Ks.o,Yy,_t.bT,_t.HU,_t.Jc],encapsulation:2}),n})();function Zw(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",25)(1,"span",26),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.examResultFilterService.totalCustomFilter)}}function Pw(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",29),t._uU(3),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.examResultFilterService.totalCustomFilter)}}function Nw(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",27),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,Pw,4,1,"span",28),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_testted_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.examResultFilterService.totalCustomFilter>0)}}let X_=(()=>{class n extends st.Q{constructor(e){super(),this.examResultFilterService=e,this.changeFilterEvent=new t.vpe}changeFilter(){this.examResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.examResultFilterService.filterObj)}clearFilter(){this.examResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-exam-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:50,vars:29,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-Csh-AtPhLM","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-jvAvKjPSPr","for","isNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-WpYAtInmdW","for","isOnTest",1,"dropdown-item","cursor-pointer",3,"click"],["id","isOnTest","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-5kYvJjf6Vu","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-qExv_PlJpt","for","isNotTested",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotTested","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-ezDcdMX5-k",3,"click"],["azt-track-service","filter-menu-B7m4rnfcVw1",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,Zw,3,1,"span",3),t.YNc(4,Nw,4,4,"span",4),t.qZA(),t.kcU(),t.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",10)(14,"input",11),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isMarked=!i.examResultFilterService.filterObj.isMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(15,"li")(16,"label",12),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(17),t.ALo(18,"mytranslate"),t.TgZ(19,"div",10)(20,"input",13),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotMarked=!i.examResultFilterService.filterObj.isNotMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(21,"li")(22,"label",14),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(23),t.ALo(24,"mytranslate"),t.TgZ(25,"div",10)(26,"input",15),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isOnTest=!i.examResultFilterService.filterObj.isOnTest,i.changeFilter()}),t.qZA()()()(),t.TgZ(27,"li")(28,"label",16),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"div",10)(32,"input",17),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotSubmit=!i.examResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),t.qZA()()()(),t.TgZ(33,"li")(34,"label",18),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(35),t.ALo(36,"mytranslate"),t.TgZ(37,"div",10)(38,"input",19),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotTested=!i.examResultFilterService.filterObj.isNotTested,i.changeFilter()}),t.qZA()()()(),t.TgZ(39,"li"),t._UZ(40,"hr",20),t.qZA(),t.TgZ(41,"li")(42,"div",21)(43,"button",22),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.TgZ(46,"div",23),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(47,"button",24),t.NdJ("click",function(){return i.clearFilter()}),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()()()()()()()),2&e){const o=t.MAs(6);t.Q6J("matMenuTriggerFor",o),t.xp6(3),t.Q6J("ngIf",i.examResultFilterService.totalCustomFilter>0),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(12,15,"lang_testbank_testted_list_show_student_marking")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(18,17,"lang_testbank_testted_list_student_not_marking")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isNotMarked),t.xp6(3),t.hij(" ",t.lcZ(24,19,"lang_testbank_testted_list_show_student_taking_exam")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isOnTest),t.xp6(3),t.hij(" ",t.lcZ(30,21,"lang_testbank_testted_list_show_student_not_submit_exam")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isNotSubmit),t.xp6(3),t.hij(" ",t.lcZ(36,23,"lang_testbank_testted_list_show_student_not_yet_exam")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isNotTested),t.xp6(6),t.Oqu(t.lcZ(45,25,"lang_buttom_close")),t.xp6(4),t.Oqu(t.lcZ(49,27,"lang_buttom_delete"))}},dependencies:[E.O5,ke.VK,ke.p6,_t.bT],encapsulation:2}),n})();const Dw=["drawer"];function jw(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function qw(n,a){1&n&&t._UZ(0,"status-loading-effect-component")}function Fw(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"menu-offline-test",54),t.NdJ("reloadApi",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.reloadApi())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)}}function Qw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"menu-online-test",55),t.NdJ("reloadApi",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.reloadApi())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)("userList",e.allUserObjsForMonitorModule)}}function Uw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",59),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function Bw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",61),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function Rw(n,a){1&n&&(t.TgZ(0,"div",62)(1,"div",63)(2,"p",64),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function zw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-file-scan-offline-exam-new",67),t.NdJ("saveStudentMarkEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.scanMarkObjs(o))})("firstSuccessResultId",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.foundClassOfSuccessScanResult(o))})("showStudentMarkEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.closeScanFile(o))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("backToLink",e.backFromStudentView)("examObj",e.examObj)("loadedJs",e.loadedJs)("tokenScan",e.tokenScanExamOffline)("hasExamOffline",e.hasExamOffline)("examOfflineMessage",e.examOfflineMessage)}}function Jw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-student-exam-result-new",65),t.NdJ("removeOfflineResultEmitter",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.afterRemoveOfflineResult(o))})("selectTabClassroomEmitter",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectTabClassroomShow(o))})("selectPageClassroomEmitter",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectPageClassroomShow(o))})("notTestedOpenFileScan",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.openFileScan(o))}),t.YNc(1,zw,1,6,"app-file-scan-offline-exam-new",66),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("backToLink",e.backFromStudentView)("examResultObjsByClassroom",e.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",e.isNotTestedYet)("isOpenSideNav",e.isOpenSideNav)("hasEssayQuestion",e.hasEssayQuestion)("showFileScan",e.showFileScan)("obj",e.examObj)("scanLoading",e.scanLoading)("isMobile",e.isMobile)("headerTitle",e.headerTitle)("mustShownResultId",e.mustShownResultId)("onRefactorMode",!0),t.xp6(1),t.Q6J("ngIf",e.showFileScan)}}const Hw=function(n,a){return{"w-85":n,"w-30":a}},$w=function(n){return{"ml-5":n}},Kw=function(n){return{"px-0":n}};function Yw(n,a){if(1&n){const e=t.EpF();t._UZ(0,"azt-export-docx-loading-box",25),t.YNc(1,qw,1,0,"status-loading-effect-component",8),t.TgZ(2,"div",26)(3,"mat-drawer-container",27)(4,"mat-drawer",28,29),t.NdJ("closedStart",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeStatusNav())}),t.TgZ(6,"ng-scrollbar",30),t.YNc(7,Fw,2,2,"ng-container",1),t.YNc(8,Qw,1,3,"ng-template",null,31,t.W1O),t.qZA()(),t.TgZ(10,"mat-drawer-content")(11,"div",32)(12,"div",33),t.YNc(13,Uw,6,3,"button",34),t.YNc(14,Bw,6,3,"button",35),t.TgZ(15,"div",36)(16,"div",37)(17,"form",6)(18,"input",38),t.NdJ("keyup.enter",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search())}),t.ALo(19,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(20,"svg",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search())}),t._UZ(21,"circle",40)(22,"line",41),t.qZA()()(),t.kcU(),t.TgZ(23,"div",42)(24,"testbank-exam-result-filter-menu",43),t.NdJ("changeFilterEvent",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeFilterEvent())}),t.qZA()(),t.TgZ(25,"div",44)(26,"button",45),t.O4$(),t.TgZ(27,"svg",46),t._UZ(28,"line",47)(29,"line",48)(30,"line",49),t.qZA()()()()(),t.kcU(),t.TgZ(31,"div",50),t.YNc(32,Rw,5,3,"div",51),t.YNc(33,Jw,2,13,"ng-template",null,52,t.W1O),t.qZA()(),t._UZ(35,"app-excel-score-sheet",53)(36,"app-excel-score-sheet",53)(37,"app-excel-score-sheet",53)(38,"app-excel-score-sheet",53),t.qZA()()()}if(2&n){const e=t.MAs(9),i=t.MAs(34),o=t.oxw(),s=t.MAs(5);t.Q6J("msg",o.exportResultService.keyLoading)("show",o.exportResultService.isLoading)("percent",o.exportResultService.percent),t.xp6(1),t.Q6J("ngIf",o.exportLoading),t.xp6(2),t.Q6J("hasBackdrop",o.hasBackdrop),t.xp6(1),t.s9C("opened",o.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(66,Hw,o.isMobile,!o.isMobile))("mode",o.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("ngIf",o.isOfflineExam)("ngIfElse",e),t.xp6(4),t.Q6J("ngClass",t.VKq(69,$w,!o.isMobile&&o.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!o.isOpenSideNav||o.isMobile),t.xp6(1),t.Q6J("ngIf",o.isOpenSideNav&&!o.isMobile),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(1),t.s9C("placeholder",t.lcZ(19,64,"lang_testbank_testted_list_search")),t.xp6(8),t.Q6J("matMenuTriggerFor",s),t.xp6(5),t.Q6J("ngClass",t.VKq(71,Kw,o.isMobile||!o.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",o.noDataSearch&&0==o.allViewExamResultObjsOfStudentByClassroom.length&&0!=o.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",i),t.xp6(3),t.Q6J("dataScore",o.highestMark)("dataScoreByClass",o.dataExportHighestMark)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("exportQuestionObjs",o.exportQuestionObjs)("tableType","highest")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.exportToExcelObjs)("dataScoreByClass",o.dataExportLastTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("exportQuestionObjs",o.exportQuestionObjs)("tableType","lastTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.firstMark)("dataScoreByClass",o.dataExportFirstTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("exportQuestionObjs",o.exportQuestionObjs)("tableType","firstTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.allTimeMark)("dataScoreByClass",o.dataExportAllTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("exportQuestionObjs",o.exportQuestionObjs)("tableType","allTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion)}}function Gw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("lastTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_last_exam")," "))}function Ww(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("highest"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_highest_point")," "))}function Vw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",74),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("firstTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_first_time_score")," "))}function Xw(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",75),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("allTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_all_exam")," "))}function t6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF())}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_last")," "))}function e6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",83),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF("highest"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_point_bigger")," "))}function n6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",84),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF("first"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_fisrt")," "))}let i6=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B){super(),this.fb=e,this.sortService=i,this.examFilterService=o,this.examPageResultService=s,this.testedListApiNewService=r,this.testedListApiService=l,this.offlineExamResultService=c,this.homeworkExamService=u,this.globalService=d,this.activeRoute=m,this.monitorService=p,this.cdnService=b,this.exportResultService=y,this.examResultFilterService=C,this.examResultListSortService=I,this.gaService=D,this.mobileWebviewService=U,this.browserStorageService=B,this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.form=new h.cw({}),this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.examObj={},this.allUserObjsForMonitorModule=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.sizePage=100,this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.headerTitle="",this.noDataSearch=!1,this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.currentDate=new Date,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0,this.currentSelectClassroomId=-1}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam");this.isOpenSideNav=!e||"close"!=e}}_viewDataBySortSearchAndFilter(){var e,i;let o=this.commonService.myClone(this.allRawExamResultObjsOfStudentByClassroom);var s=this.examResultFilterService.getDefaultFilterObj();o=this.examResultListSortService._filterExamResultObjsByFilterSettingObjByClassroom(s,o);var r=null===(i=null===(e=this.form.controls.searchContent.value)||void 0===e?void 0:e.toString())||void 0===i?void 0:i.trim();""!=r&&(o=this.examResultListSortService._searchExamResultObjsByFullNameInClassroom(o,r));var l=this.examResultListSortService._getCurrentSortTypeOfSetting();o=this.examResultListSortService._sortExamResultObjsBySettingObjByClassroom(o,this.hasEssayQuestion,l),this.allViewExamResultObjsOfStudentByClassroom=o}search(){this.getStudentResultByPage(1,!0)}changeFilterEvent(){this._viewDataBySortSearchAndFilter()}changeSortEvent(e){let i=!1;"isSortByNameAsc"==e&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),i=!0),"isSortByMarkDesc"==e&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),i=!0),"isSortByTimeDesc"==e&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),i=!0),i?this.examResultListSortService._saveSortTypeOfSetting(e):this.examResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(e){var i=[];return e.forEach(o=>{var s;o.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(s=o.results)&&void 0!==s?s:new Array),this.exportQuestionObjs),o.results=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(o.results),this.hasEssayQuestion),i.push(o)}),i}isNewInfoFieldFormatInExportExcel(e){var i=!1;if(null!=e)for(var o=0;o<e.length;o++)if(e[o].hasOwnProperty("contents")){i=!0;break}return i}parseInfoFieldForStudentObjsInExportExcel(e){var i,o,s,r,l=[];for(let d=0;d<e.length;d++){var c=null!==(o=this.commonService.myParseJson(null!==(i=e[d].infors)&&void 0!==i?i:""))&&void 0!==o?o:[];if(this.isNewInfoFieldFormatInExportExcel(c))if(null!=c){var u=new Array;c.forEach(m=>{m.contents&&1==m.contents.length?u.push({key:m.title,value:m.contents[0]}):m.contents&&m.contents.length>1&&u.push({key:m.title,value:m.contents.join(", ")})}),e[d].inforsParse=u}else e[d].inforsParse=new Array;else e[d].inforsParse=null!==(r=this.commonService.myParseJson(null!==(s=e[d].infors)&&void 0!==s?s:""))&&void 0!==r?r:[];l.push(e[d])}return l}mapQuestionWithAnswerForExportExcel(e,i){var o=[];return e.forEach(s=>{if(""!=s.answers&&null!=s.answers&&"[]"!=s.answers){var r=this.commonService.willDeleteParseJson(s.answers),l=[];i.forEach(c=>{for(var u={QuestionId:c.questionId,Answer:"",index:c.sort},d=0;d<r.length;d++)if(r[d].QuestionId==c.questionId&&r[d].AnswerContent&&r[d].AnswerContent.length>0){u.Answer=r[d].AnswerContent[0].Content;break}l.push(u)}),o.push(Object.assign(Object.assign({},s),{results:l}))}else l=[],i.forEach(u=>{l.push({QuestionId:u.questionId,Answer:"",index:u.sort})}),o.push(Object.assign(Object.assign({},s),{results:l}))}),o}exportToExcel(e){let i="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(o=>{i=o.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,Ke.AX.openLoadingEffect(i),"lastTime"==e?this.subscriptions.add(this.testedListApiService.getTestedLastMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt;Array.isArray(o)||1!=o.success?(this.showErrorSnack(null!==(vt=o.message)&&void 0!==vt?vt:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1):(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(gt=>{i=gt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.exportToExcelObjs=null!==(c=null===(l=o.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(u=o.data)||void 0===u?void 0:u.maxGroupId)&&void 0!==d?d:0,this.exportToExcelObjs=null!==(p=null===(m=this.form.controls)||void 0===m?void 0:m.sortByMarkDESC)&&void 0!==p&&p.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(y=null===(b=o.data)||void 0===b?void 0:b.studentsNotInClassResults)&&void 0!==y?y:[],this.hasEssayQuestion),null!==(I=null===(C=o.data)||void 0===C?void 0:C.questionObjs)&&void 0!==I?I:[]):null!==(U=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==U&&U.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(B=o.data)||void 0===B?void 0:B.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(et=null===(R=o.data)||void 0===R?void 0:R.questionObjs)&&void 0!==et?et:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.studentsNotInClassResults)&&void 0!==V?V:[]),null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.questionObjs)&&void 0!==at?at:[]),this.exportToExcelObjs=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.exportToExcelObjs),this.hasEssayQuestion),this.dataExportLastTime=this.processDataForExcel(null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.studentsInClassResults)&&void 0!==rt?rt:[]),setTimeout(()=>{var gt;null===(gt=document.getElementById("table_"+e))||void 0===gt||gt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e4),this.successStatusObj())})):"highest"==e?this.subscriptions.add(this.testedListApiService.getTestedHighestMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(gt=>{i=gt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.highestMark=null!==(c=null===(l=o.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(u=o.data)||void 0===u?void 0:u.maxGroupId)&&void 0!==d?d:0,this.highestMark=null!==(p=null===(m=this.form.controls)||void 0===m?void 0:m.isSortByMarkDesc)&&void 0!==p&&p.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(y=null===(b=o.data)||void 0===b?void 0:b.studentsNotInClassResults)&&void 0!==y?y:[],this.hasEssayQuestion),null!==(I=null===(C=o.data)||void 0===C?void 0:C.questionObjs)&&void 0!==I?I:[]):null!==(U=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==U&&U.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(B=o.data)||void 0===B?void 0:B.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(et=null===(R=o.data)||void 0===R?void 0:R.questionObjs)&&void 0!==et?et:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.studentsNotInClassResults)&&void 0!==V?V:[]),null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.questionObjs)&&void 0!==at?at:[]),this.highestMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.highestMark),this.hasEssayQuestion),this.dataExportHighestMark=this.processDataForExcel(null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.studentsInClassResults)&&void 0!==rt?rt:[]),setTimeout(()=>{var gt;null===(gt=document.getElementById("table_"+e))||void 0===gt||gt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(vt=o.message)&&void 0!==vt?vt:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"firstTime"==e?this.subscriptions.add(this.testedListApiService.getTestedFirstMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(gt=>{i=gt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.firstMark=null!==(c=null===(l=o.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(u=o.data)||void 0===u?void 0:u.maxGroupId)&&void 0!==d?d:0,this.firstMark=null!==(p=null===(m=this.form.controls)||void 0===m?void 0:m.isSortByMarkDesc)&&void 0!==p&&p.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(y=null===(b=o.data)||void 0===b?void 0:b.studentsNotInClassResults)&&void 0!==y?y:[],this.hasEssayQuestion),null!==(I=null===(C=o.data)||void 0===C?void 0:C.questionObjs)&&void 0!==I?I:[]):null!==(U=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==U&&U.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(B=o.data)||void 0===B?void 0:B.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(et=null===(R=o.data)||void 0===R?void 0:R.questionObjs)&&void 0!==et?et:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.studentsNotInClassResults)&&void 0!==V?V:[]),null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.questionObjs)&&void 0!==at?at:[]),this.firstMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.firstMark),this.hasEssayQuestion),this.dataExportFirstTime=this.processDataForExcel(null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.studentsInClassResults)&&void 0!==rt?rt:[]),setTimeout(()=>{var gt;null===(gt=document.getElementById("table_"+e))||void 0===gt||gt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(vt=o.message)&&void 0!==vt?vt:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"allTime"==e&&this.subscriptions.add(this.testedListApiService.getTestedAllResult("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(gt=>{i=gt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.allTimeMark=null!==(c=null===(l=o.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.maxGroupQuestion=null!==(d=null===(u=o.data)||void 0===u?void 0:u.maxGroupId)&&void 0!==d?d:0,this.allTimeMark=null!==(p=null===(m=this.form.controls)||void 0===m?void 0:m.isSortByMarkDesc)&&void 0!==p&&p.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(y=null===(b=o.data)||void 0===b?void 0:b.studentsNotInClassResults)&&void 0!==y?y:[],this.hasEssayQuestion),null!==(I=null===(C=o.data)||void 0===C?void 0:C.questionObjs)&&void 0!==I?I:[]):null!==(U=null===(D=this.form.controls)||void 0===D?void 0:D.isSortByTimeDesc)&&void 0!==U&&U.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(q=null===(B=o.data)||void 0===B?void 0:B.studentsNotInClassResults)&&void 0!==q?q:[]),null!==(et=null===(R=o.data)||void 0===R?void 0:R.questionObjs)&&void 0!==et?et:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.studentsNotInClassResults)&&void 0!==V?V:[]),null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.questionObjs)&&void 0!==at?at:[]),this.allTimeMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.allTimeMark),this.hasEssayQuestion),this.dataExportAllTime=this.processDataForExcel(null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.studentsInClassResults)&&void 0!==rt?rt:[]),setTimeout(()=>{var gt;null===(gt=document.getElementById("table_"+e))||void 0===gt||gt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(vt=o.message)&&void 0!==vt?vt:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)}))}exportToPDF(e){var i;this.exportResultService.processClasses(null!==(i=this.examObj.id)&&void 0!==i?i:0,e).then(()=>{}).catch(o=>{this.commonService.snackError("string"==typeof o?o:o.message)})}scanMarkObjs(e){e&&(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData())}closeScanFile(e){e&&(this.showFileScan=!1,0==this.allViewExamResultObjsOfStudentByClassroom.length&&this.selectTabClassroomShow(-1))}openFileScan(e){this.showFileScan=!(!e||!this.loadedJs)&&e}checkHasExamOffline(e){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(e).subscribe(i=>{var o,s,r,l;1==i.success?null!==(o=i.data)&&void 0!==o&&o.value&&this.homeworkExamService.isPdfExam(null!==(s=this.examObj.examType)&&void 0!==s?s:0)?(this.hasExamOffline=!0,this.tokenScanExamOffline=null===(r=i.data)||void 0===r?void 0:r.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=null!==(l=i.message)&&void 0!==l?l:""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(e){e&&(this.mustShownResultId=e)}parseAllUserObjsForMonitorModule(e,i){let o=this.examResultListSortService._changeExamResultStatusForAllClassroom(e,this.hasEssayQuestion,!0),s=this.examResultListSortService._changeExamResultStatusForOneClassroom(i,this.hasEssayQuestion),r=[];return o.forEach(l=>{l.results&&l.results.length>0&&l.results.forEach(c=>{var d={userid:c.userId,studentid:c.studentId,username:null,studentname:c.fullName,status:c.isOnTest?1:c.isNotMarked?2:c.isMarked?3:0};this.commonService.filterArray(r,d)||r.push(d)})}),s.forEach(l=>{var u={userid:l.userId,studentid:l.studentId,username:l.fullName,studentname:l.fullName,status:l.isOnTest?1:l.isNotMarked?2:l.isMarked?3:0};this.commonService.filterArray(r,u)||r.push(u)}),r}changeHeaderTitle(){var e=0,i=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(o=>{var s,r,l,c;e+=null!==(r=null===(s=o.classObj)||void 0===s?void 0:s.countStudents)&&void 0!==r?r:0,i+=null!==(c=null===(l=o.classObj)||void 0===l?void 0:l.totalTested)&&void 0!==c?c:0}),this.totalSubmitted=i,this.totalStudents=e,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(o=>{this.headerTitle=o+" ("+this.totalSubmitted+"/"+this.totalStudents+")"})}reloadApi(){this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData()}selectTabClassroomShow(e){this.currentSelectClassroomId=e,this.getStudentResultByPage(1)}selectPageClassroomShow(e){var i,o;this.currentSelectClassroomId=null!==(i=e.classroomId)&&void 0!==i?i:-1,this.getStudentResultByPage(null!==(o=e.page)&&void 0!==o?o:1)}getStudentResultByPage(e,i){let o=this.commonService.getFormObj(this.form);this.examPageResultService.apiExamPageResultListResultsGet(this.examId,this.currentSelectClassroomId,o.searchContent?o.searchContent:void 0,void 0,1,this.sizePage*e).subscribe(s=>{var r,l,c,u;s.success&&null!==(r=s.data)&&void 0!==r&&r.objs&&null!==(l=s.data)&&void 0!==l&&l.objs.length?(this.allRawExamResultObjsOfStudentByClassroom.forEach(p=>{var b,y,C;(null===(b=p.classObj)||void 0===b?void 0:b.id)==this.currentSelectClassroomId&&(p.results=this.convertStudentResults(null!==(C=null===(y=s.data)||void 0===y?void 0:y.objs)&&void 0!==C?C:[]))},this.allRawExamResultObjsOfStudentByClassroom),this.browserStorageService.saveSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj.hashId,this.commonService.serializeJson({classroomId:this.currentSelectClassroomId,page:e})),this.allRawExamResultObjsOfStudentByClassroom=this.examResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0),this.changeFilterEvent(),this.checkHasExamOffline(null!==(c=this.examObj.hashId)&&void 0!==c?c:""),this.scanLoading=!1,this.isNotTestedYet=!1,i&&(this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter(),this.noDataSearch=!1),this.successStatusObj()):(this.checkHasExamOffline(null!==(u=this.examObj.hashId)&&void 0!==u?u:""),this.scanLoading=!1,i?(this.allViewExamResultObjsOfStudentByClassroom=[],this.noDataSearch=!0):this.isNotTestedYet=!0,this.stopStatusObj())})}convertStudentResults(e){let i=[];return e.forEach(o=>{var s;let r={id:o.studentId,resultId:o.id,studentId:o.studentId,classroomIds:[null!==(s=o.classroomId)&&void 0!==s?s:-1],userId:o.userId,fullName:o.attendeeName,nameImages:o.attendeeNameImage,birthday:o.attendeeBirthDay,mark:o.mark,startedTest:o.startedTest,confirmedAt:o.confirmedAt,status:o.testStatus,createdAt:o.savedAt,avatar:o.attendeeAvatar};i.push(r)}),i}afterRemoveOfflineResult(e){e&&this.reloadApi()}getData(){this.testedListApiNewService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(e=>{var i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R;if(1==e.success){this.initDataTestedList=null!==(i=e.data)&&void 0!==i?i:{studentsNotInClassResults:[]},this.examObj=null!==(s=null===(o=e.data)||void 0===o?void 0:o.examObj)&&void 0!==s?s:{},this.maxGroupQuestion=null!==(l=null===(r=e.data)||void 0===r?void 0:r.maxGroupId)&&void 0!==l?l:0;let et=null!==(c=this.commonService.getMyQueryParam("backto"))&&void 0!==c?c:"";if(this.backToLink=et||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj.orcLogId),this.countEssayQuestion=this.examResultListSortService._counterTotalEssayOfQuestionObjs(null!==(d=null===(u=e.data)||void 0===u?void 0:u.questionObjs)&&void 0!==d?d:[]),this.hasEssayQuestion=!!this.countEssayQuestion,null!==(m=e.data)&&void 0!==m&&m.studentsInClassResults&&(null===(p=e.data)||void 0===p?void 0:p.studentsInClassResults.length)>0){this.allRawExamResultObjsOfStudentByClassroom=null===(b=e.data)||void 0===b?void 0:b.studentsInClassResults;let Q=this.browserStorageService.getSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj.hashId);if(Q){let V=this.commonService.myParseJson(Q);this.currentSelectClassroomId=null!==(y=V?.classroomId)&&void 0!==y?y:-1,this.getStudentResultByPage(null!==(C=V?.page)&&void 0!==C?C:1)}else this.currentSelectClassroomId=null!==(U=null===(D=null===(I=e.data)||void 0===I?void 0:I.studentsInClassResults[0].classObj)||void 0===D?void 0:D.id)&&void 0!==U?U:-1,this.getStudentResultByPage(1)}else this.isNotTestedYet=!0,this.scanLoading=!1,this.successStatusObj()}else if(this.scanLoading=!1,this.isNotTestedYet=!0,e.data&&e.data.errorConfigClassroomPermission)this.examObj=null!==(B=e.data.examObj)&&void 0!==B?B:{},this.stopStatusObj();else{let et=null!==(q=this.commonService.getMyQueryParam("backto"))&&void 0!==q?q:"";this.backToLink=et||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(null!==(R=e.message)&&void 0!==R?R:"")}})}loadingFileJs(){return new Promise((e,i)=>{var o=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(o).then(()=>(0,so.mG)(this,void 0,void 0,function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&e(!0),i(new Error)):(this.countRetryLoadJS++,this.countRetryLoadJS>3?i(new Error("T\u1ea3i th\u01b0 vi\u1ec7n kh\xf4ng th\xe0nh c\xf4ng")):this.loadingFileJs())},1e3)}))})}ngOnInit(){this.initStatusObj(),this.getStatusSideNav(),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i,o,s;this.form=this.fb.group({searchContent:new h.NI("",h.kI.required),isSortByNameAsc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByNameAsc")),isSortByMarkDesc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByMarkDesc")),isSortByTimeDesc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"))}),this.cateId=null!==(e=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==e?e:0,this.examId=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("id")))&&void 0!==i?i:0,this.resultId=null!==(o=Number(this.activeRoute.snapshot.paramMap.get("result_id")))&&void 0!==o?o:0;let r=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,r&&r.includes("shareType")&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(r)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.subscriptions.add(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanMarkObjs(!0)})),super.ngOnInit(),this.gaService.gaEvent("teacher_tested_list")}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(ea.K),t.Y36(vl.Y),t.Y36(Bt.DR),t.Y36(i3),t.Y36(yo.x),t.Y36(Bt.$4),t.Y36(lo.j),t.Y36(Oa.U),t.Y36(w.gz),t.Y36(qu.M),t.Y36(le.U),t.Y36(Gs.e),t.Y36(Fu),t.Y36(Q_.n),t.Y36(Qu.O),t.Y36(Uu.F),t.Y36(wi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-result-list-new"]],viewQuery:function(e,i){if(1&e&&t.Gf(Dw,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:62,vars:41,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-new-20jmo8LMYqG","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-PlRPlXkXka5","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-gV0jdKgcvAo","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],["onlineExam",""],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-new-o479Z6DA7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-new-0py_X_1wx7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","exam-result-list-new-ZcBH31bMc7","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","lucide-search","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],[3,"initData","isNotTestedYet","reloadApi"],[3,"initData","isNotTestedYet","userList","reloadApi"],["azt-track-service","exam-result-list-new-o479Z6DA7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-new-0py_X_1wx7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","examResultObjsByClassroom","isNotTestedYet","isOpenSideNav","hasEssayQuestion","showFileScan","obj","scanLoading","isMobile","headerTitle","mustShownResultId","onRefactorMode","removeOfflineResultEmitter","selectTabClassroomEmitter","selectPageClassroomEmitter","notTestedOpenFileScan"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit",4,"ngIf"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit"],["azt-track-service","exam-result-list-new-esmVBDKJjs",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-new-dlmCFDcvLN",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-IJMCAvs_Zj",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-zKngslcUte",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-GFRfEkklS3",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-new-CFoSFfiD7N0",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-K6OMK-6lFqk",1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,jw,1,0,"azt-loading-effect",1),t.YNc(2,Yw,39,73,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),t.YNc(9,Gw,8,3,"li",8),t.ALo(10,"viewPermission"),t.YNc(11,Ww,8,3,"li",8),t.ALo(12,"viewPermission"),t.YNc(13,Vw,8,3,"li",8),t.ALo(14,"viewPermission"),t.YNc(15,Xw,8,3,"li",8),t.ALo(16,"viewPermission"),t.YNc(17,t6,10,3,"li",8),t.ALo(18,"viewPermission"),t.YNc(19,e6,10,3,"li",8),t.ALo(20,"viewPermission"),t.YNc(21,n6,10,3,"li",8),t.ALo(22,"viewPermission"),t.TgZ(23,"li")(24,"label",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(25,"span",10),t.O4$(),t.TgZ(26,"svg",11),t._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),t.qZA(),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(34,"div",17)(35,"input",18),t.NdJ("change",function(){return i.changeSortEvent("isSortByNameAsc")}),t.qZA()()()(),t.TgZ(36,"li")(37,"label",19),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(38,"span",10),t.O4$(),t.TgZ(39,"svg",11),t._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),t.qZA(),t._uU(45),t.ALo(46,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(47,"div",17)(48,"input",22),t.NdJ("change",function(){return i.changeSortEvent("isSortByMarkDesc")}),t.qZA()()()(),t.TgZ(49,"li")(50,"label",23),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(51,"span",10),t.O4$(),t.TgZ(52,"svg",11),t._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(60,"div",17)(61,"input",24),t.NdJ("change",function(){return i.changeSortEvent("isSortByTimeDesc")}),t.qZA()()()()()()()()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",t.xi3(10,14,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,17,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,20,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,23,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,26,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,29,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(22,32,i.examObj.permissionObj,"exam")),t.xp6(11),t.hij(" ",t.lcZ(33,35,"lang_testbank_testted_list_sort_name")," "),t.xp6(13),t.hij(" ",t.lcZ(46,37,"lang_testbank_testted_list_sort_point")," "),t.xp6(13),t.hij(" ",t.lcZ(59,39,"lang_testbank_testted_list_sort_time")," ")}},dependencies:[E.mk,E.O5,ke.VK,ke.p6,li.jA,li.kh,li.LW,Le.gM,P.KC,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,xe.Q,Pe.M,Ws,Xe._,U_,J_,$_,Y_,G_.A,V_,X_,_t.bT,_t.Pz],encapsulation:2}),n})();const o6=["drawer"];function a6(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function s6(n,a){1&n&&t._UZ(0,"status-loading-effect-component")}function r6(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"menu-offline-test",54),t.NdJ("reloadApi",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.reloadApi())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)}}function l6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"menu-online-test",55),t.NdJ("reloadApi",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.reloadApi())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("initData",e.initDataTestedList)("isNotTestedYet",e.isNotTestedYet)("userList",e.allUserObjsForMonitorModule)}}function c6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",59),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function u6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",46),t._UZ(3,"rect",57)(4,"path",58)(5,"path",61),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function d6(n,a){1&n&&(t.TgZ(0,"div",62)(1,"div",63)(2,"p",64),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function _6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-file-scan-offline-exam-new",67),t.NdJ("saveStudentMarkEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.scanMarkObjs(o))})("firstSuccessResultId",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.foundClassOfSuccessScanResult(o))})("showStudentMarkEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.closeScanFile(o))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("backToLink",e.backFromStudentView)("examObj",e.examObj)("loadedJs",e.loadedJs)("tokenScan",e.tokenScanExamOffline)("hasExamOffline",e.hasExamOffline)("examOfflineMessage",e.examOfflineMessage)}}function m6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-student-exam-result-new",65),t.NdJ("notTestedOpenFileScan",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.openFileScan(o))}),t.YNc(1,_6,1,6,"app-file-scan-offline-exam-new",66),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("backToLink",e.backFromStudentView)("examResultObjsByClassroom",e.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",e.isNotTestedYet)("isOpenSideNav",e.isOpenSideNav)("hasEssayQuestion",e.hasEssayQuestion)("showFileScan",e.showFileScan)("obj",e.examObj)("scanLoading",e.scanLoading)("isMobile",e.isMobile)("headerTitle",e.headerTitle)("mustShownResultId",e.mustShownResultId),t.xp6(1),t.Q6J("ngIf",e.showFileScan)}}const p6=function(n,a){return{"w-85":n,"w-30":a}},h6=function(n){return{"ml-5":n}},g6=function(n){return{"px-0":n}};function f6(n,a){if(1&n){const e=t.EpF();t._UZ(0,"azt-export-docx-loading-box",25),t.YNc(1,s6,1,0,"status-loading-effect-component",8),t.TgZ(2,"div",26)(3,"mat-drawer-container",27)(4,"mat-drawer",28,29),t.NdJ("closedStart",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeStatusNav())}),t.TgZ(6,"ng-scrollbar",30),t.YNc(7,r6,2,2,"ng-container",1),t.YNc(8,l6,1,3,"ng-template",null,31,t.W1O),t.qZA()(),t.TgZ(10,"mat-drawer-content")(11,"div",32)(12,"div",33),t.YNc(13,c6,6,3,"button",34),t.YNc(14,u6,6,3,"button",35),t.TgZ(15,"div",36)(16,"div",37)(17,"form",6)(18,"input",38),t.NdJ("keyup.enter",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search())}),t.ALo(19,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(20,"svg",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.search())}),t._UZ(21,"circle",40)(22,"line",41),t.qZA()()(),t.kcU(),t.TgZ(23,"div",42)(24,"testbank-exam-result-filter-menu",43),t.NdJ("changeFilterEvent",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeFilterEvent())}),t.qZA()(),t.TgZ(25,"div",44)(26,"button",45),t.O4$(),t.TgZ(27,"svg",46),t._UZ(28,"line",47)(29,"line",48)(30,"line",49),t.qZA()()()()(),t.kcU(),t.TgZ(31,"div",50),t.YNc(32,d6,5,3,"div",51),t.YNc(33,m6,2,12,"ng-template",null,52,t.W1O),t.qZA()(),t._UZ(35,"app-excel-score-sheet",53)(36,"app-excel-score-sheet",53)(37,"app-excel-score-sheet",53)(38,"app-excel-score-sheet",53),t.qZA()()()}if(2&n){const e=t.MAs(9),i=t.MAs(34),o=t.oxw(),s=t.MAs(5);t.Q6J("msg",o.exportResultService.keyLoading)("show",o.exportResultService.isLoading)("percent",o.exportResultService.percent),t.xp6(1),t.Q6J("ngIf",o.exportLoading),t.xp6(2),t.Q6J("hasBackdrop",o.hasBackdrop),t.xp6(1),t.s9C("opened",o.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(70,p6,o.isMobile,!o.isMobile))("mode",o.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("ngIf",o.isOfflineExam)("ngIfElse",e),t.xp6(4),t.Q6J("ngClass",t.VKq(73,h6,!o.isMobile&&o.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!o.isOpenSideNav||o.isMobile),t.xp6(1),t.Q6J("ngIf",o.isOpenSideNav&&!o.isMobile),t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(1),t.s9C("placeholder",t.lcZ(19,68,"lang_testbank_testted_list_search")),t.xp6(8),t.Q6J("matMenuTriggerFor",s),t.xp6(5),t.Q6J("ngClass",t.VKq(75,g6,o.isMobile||!o.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",0==o.allViewExamResultObjsOfStudentByClassroom.length&&0!=o.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",i),t.xp6(3),t.Q6J("dataScore",o.highestMark)("dataScoreByClass",o.dataExportHighestMark)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("totalQuestion",o.totalExamQuestion)("exportQuestionObjs",o.exportQuestionObjs)("tableType","highest")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.exportToExcelObjs)("dataScoreByClass",o.dataExportLastTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("totalQuestion",o.totalExamQuestion)("exportQuestionObjs",o.exportQuestionObjs)("tableType","lastTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.firstMark)("dataScoreByClass",o.dataExportFirstTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("totalQuestion",o.totalExamQuestion)("exportQuestionObjs",o.exportQuestionObjs)("tableType","firstTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion),t.xp6(1),t.Q6J("dataScore",o.allTimeMark)("dataScoreByClass",o.dataExportAllTime)("maxGroupQuestion",o.maxGroupQuestion)("examObj",o.examObj)("totalQuestion",o.totalExamQuestion)("exportQuestionObjs",o.exportQuestionObjs)("tableType","allTime")("isSortByMark",o.form.controls.isSortByMarkDesc.value)("isSortByTime",o.form.controls.isSortByTimeDesc.value)("isSortByName",o.form.controls.isSortByNameAsc.value)("hasEssayQuestion",o.hasEssayQuestion)("countEssayQuestion",o.countEssayQuestion)}}function x6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",68),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("lastTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_last_exam")," "))}function v6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("highest"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_highest_point")," "))}function b6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",74),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("firstTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_first_time_score")," "))}function y6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",75),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToExcel("allTime"))}),t.O4$(),t.TgZ(2,"svg",69),t._UZ(3,"path",70)(4,"polyline",71)(5,"line",72),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_testted_list_export_excel_all_exam")," "))}function w6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF())}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_last")," "))}function k6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",83),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF("highest"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_point_bigger")," "))}function C6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",84),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.exportToPDF("first"))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",79)(5,"line",80)(6,"line",81)(7,"line",82),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_testted_list_export_pdf_fisrt")," "))}let T6=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y,C,I){super(),this.fb=e,this.sortService=i,this.examFilterService=o,this.testedListApiService=s,this.offlineExamResultService=r,this.homeworkExamService=l,this.globalService=c,this.activeRoute=u,this.monitorService=d,this.cdnService=m,this.exportResultService=p,this.examResultFilterService=b,this.examResultListSortService=y,this.gaService=C,this.mobileWebviewService=I,this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.form=new h.cw({}),this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.examObj={},this.allUserObjsForMonitorModule=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalExamQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.totalStudentByClass=0,this.headerTitle="",this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.currentDate=new Date,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam");this.isOpenSideNav=!e||"close"!=e}}_viewDataBySortSearchAndFilter(){var e,i;let o=this.commonService.myClone(this.allRawExamResultObjsOfStudentByClassroom);var s=this.examResultFilterService.getDefaultFilterObj();o=this.examResultListSortService._filterExamResultObjsByFilterSettingObjByClassroom(s,o);var r=null===(i=null===(e=this.form.controls.searchContent.value)||void 0===e?void 0:e.toString())||void 0===i?void 0:i.trim();""!=r&&(o=this.examResultListSortService._searchExamResultObjsByFullNameInClassroom(o,r));var l=this.examResultListSortService._getCurrentSortTypeOfSetting();o=this.examResultListSortService._sortExamResultObjsBySettingObjByClassroom(o,this.hasEssayQuestion,l),this.allViewExamResultObjsOfStudentByClassroom=o}search(){this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){var e,i;null===(i=null===(e=this.form.controls)||void 0===e?void 0:e.searchContent)||void 0===i||i.setValue(""),this._viewDataBySortSearchAndFilter()}changeSortEvent(e){let i=!1;"isSortByNameAsc"==e&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),i=!0),"isSortByMarkDesc"==e&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),i=!0),"isSortByTimeDesc"==e&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),i=!0),i?this.examResultListSortService._saveSortTypeOfSetting(e):this.examResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(e){var i=[];return e.forEach(o=>{var s;o.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(s=o.results)&&void 0!==s?s:new Array),this.exportQuestionObjs),o.results=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(o.results),this.hasEssayQuestion),i.push(o)}),i}isNewInfoFieldFormatInExportExcel(e){var i=!1;if(null!=e)for(var o=0;o<e.length;o++)if(e[o].hasOwnProperty("contents")){i=!0;break}return i}parseInfoFieldForStudentObjsInExportExcel(e){var i,o,s,r,l=[];for(let d=0;d<e.length;d++){var c=null!==(o=this.commonService.myParseJson(null!==(i=e[d].infors)&&void 0!==i?i:""))&&void 0!==o?o:[];if(this.isNewInfoFieldFormatInExportExcel(c))if(null!=c){var u=new Array;c.forEach(m=>{m.contents&&1==m.contents.length?u.push({key:m.title,value:m.contents[0]}):m.contents&&m.contents.length>1&&u.push({key:m.title,value:m.contents.join(", ")})}),e[d].inforsParse=u}else e[d].inforsParse=new Array;else e[d].inforsParse=null!==(r=this.commonService.myParseJson(null!==(s=e[d].infors)&&void 0!==s?s:""))&&void 0!==r?r:[];l.push(e[d])}return l}mapQuestionWithAnswerForExportExcel(e,i){var o=[];return e.forEach(s=>{if(""!=s.answers&&null!=s.answers&&"[]"!=s.answers){var r=this.commonService.willDeleteParseJson(s.answers),l=[];i.forEach(c=>{for(var u={QuestionId:c.questionId,Answer:"",index:c.sort},d=0;d<r.length;d++)if(r[d].QuestionId==c.questionId&&r[d].AnswerContent&&r[d].AnswerContent.length>0){u.Answer=r[d].AnswerContent[0].Content;break}l.push(u)}),o.push(Object.assign(Object.assign({},s),{results:l}))}else l=[],i.forEach(u=>{l.push({QuestionId:u.questionId,Answer:"",index:u.sort})}),o.push(Object.assign(Object.assign({},s),{results:l}))}),o}exportToExcel(e){let i="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(o=>{i=o.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,Ke.AX.openLoadingEffect(i),"lastTime"==e?this.subscriptions.add(this.testedListApiService.getTestedLastMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct;Array.isArray(o)||1!=o.success?(this.showErrorSnack(null!==(ct=o.message)&&void 0!==ct?ct:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1):(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(lt=>{i=lt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.totalExamQuestion=null!==(c=null===(l=o.data)||void 0===l?void 0:l.totalQuestion)&&void 0!==c?c:0,this.exportToExcelObjs=null!==(d=null===(u=o.data)||void 0===u?void 0:u.studentsNotInClassResults)&&void 0!==d?d:[],this.maxGroupQuestion=null!==(p=null===(m=o.data)||void 0===m?void 0:m.maxGroupId)&&void 0!==p?p:0,this.exportToExcelObjs=null!==(y=null===(b=this.form.controls)||void 0===b?void 0:b.sortByMarkDESC)&&void 0!==y&&y.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(I=null===(C=o.data)||void 0===C?void 0:C.studentsNotInClassResults)&&void 0!==I?I:[],this.hasEssayQuestion),null!==(U=null===(D=o.data)||void 0===D?void 0:D.questionObjs)&&void 0!==U?U:[]):null!==(q=null===(B=this.form.controls)||void 0===B?void 0:B.isSortByTimeDesc)&&void 0!==q&&q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(et=null===(R=o.data)||void 0===R?void 0:R.studentsNotInClassResults)&&void 0!==et?et:[]),null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.questionObjs)&&void 0!==V?V:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.studentsNotInClassResults)&&void 0!==at?at:[]),null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.questionObjs)&&void 0!==rt?rt:[]),this.exportToExcelObjs=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.exportToExcelObjs),this.hasEssayQuestion),this.dataExportLastTime=this.processDataForExcel(null!==(gt=null===(vt=o.data)||void 0===vt?void 0:vt.studentsInClassResults)&&void 0!==gt?gt:[]),setTimeout(()=>{var lt;null===(lt=document.getElementById("table_"+e))||void 0===lt||lt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e4),this.successStatusObj())})):"highest"==e?this.subscriptions.add(this.testedListApiService.getTestedHighestMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(lt=>{i=lt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.totalExamQuestion=null!==(c=null===(l=o.data)||void 0===l?void 0:l.totalQuestion)&&void 0!==c?c:0,this.highestMark=null!==(d=null===(u=o.data)||void 0===u?void 0:u.studentsNotInClassResults)&&void 0!==d?d:[],this.maxGroupQuestion=null!==(p=null===(m=o.data)||void 0===m?void 0:m.maxGroupId)&&void 0!==p?p:0,this.highestMark=null!==(y=null===(b=this.form.controls)||void 0===b?void 0:b.isSortByMarkDesc)&&void 0!==y&&y.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(I=null===(C=o.data)||void 0===C?void 0:C.studentsNotInClassResults)&&void 0!==I?I:[],this.hasEssayQuestion),null!==(U=null===(D=o.data)||void 0===D?void 0:D.questionObjs)&&void 0!==U?U:[]):null!==(q=null===(B=this.form.controls)||void 0===B?void 0:B.isSortByTimeDesc)&&void 0!==q&&q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(et=null===(R=o.data)||void 0===R?void 0:R.studentsNotInClassResults)&&void 0!==et?et:[]),null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.questionObjs)&&void 0!==V?V:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.studentsNotInClassResults)&&void 0!==at?at:[]),null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.questionObjs)&&void 0!==rt?rt:[]),this.highestMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.highestMark),this.hasEssayQuestion),this.dataExportHighestMark=this.processDataForExcel(null!==(gt=null===(vt=o.data)||void 0===vt?void 0:vt.studentsInClassResults)&&void 0!==gt?gt:[]),setTimeout(()=>{var lt;null===(lt=document.getElementById("table_"+e))||void 0===lt||lt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(ct=o.message)&&void 0!==ct?ct:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"firstTime"==e?this.subscriptions.add(this.testedListApiService.getTestedFirstMark("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(lt=>{i=lt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.firstMark=null!==(c=null===(l=o.data)||void 0===l?void 0:l.studentsNotInClassResults)&&void 0!==c?c:[],this.totalExamQuestion=null!==(d=null===(u=o.data)||void 0===u?void 0:u.totalQuestion)&&void 0!==d?d:0,this.maxGroupQuestion=null!==(p=null===(m=o.data)||void 0===m?void 0:m.maxGroupId)&&void 0!==p?p:0,this.firstMark=null!==(y=null===(b=this.form.controls)||void 0===b?void 0:b.isSortByMarkDesc)&&void 0!==y&&y.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(I=null===(C=o.data)||void 0===C?void 0:C.studentsNotInClassResults)&&void 0!==I?I:[],this.hasEssayQuestion),null!==(U=null===(D=o.data)||void 0===D?void 0:D.questionObjs)&&void 0!==U?U:[]):null!==(q=null===(B=this.form.controls)||void 0===B?void 0:B.isSortByTimeDesc)&&void 0!==q&&q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(et=null===(R=o.data)||void 0===R?void 0:R.studentsNotInClassResults)&&void 0!==et?et:[]),null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.questionObjs)&&void 0!==V?V:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.studentsNotInClassResults)&&void 0!==at?at:[]),null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.questionObjs)&&void 0!==rt?rt:[]),this.firstMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.firstMark),this.hasEssayQuestion),this.dataExportFirstTime=this.processDataForExcel(null!==(gt=null===(vt=o.data)||void 0===vt?void 0:vt.studentsInClassResults)&&void 0!==gt?gt:[]),setTimeout(()=>{var lt;null===(lt=document.getElementById("table_"+e))||void 0===lt||lt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(ct=o.message)&&void 0!==ct?ct:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)})):"allTime"==e&&this.subscriptions.add(this.testedListApiService.getTestedAllResult("export_tool",this.examId).subscribe(o=>{var s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct;1==o.success?(this.commonService.myTranslate(["lang_auto_tao_tin_dang_duoc_tai_xuong"]).subscribe(lt=>{i=lt.lang_auto_tao_tin_dang_duoc_tai_xuong}),Ke.AX.changeMsgLoadingEffect(i),this.exportQuestionObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.questionObjs)&&void 0!==r?r:[],this.totalExamQuestion=null!==(c=null===(l=o.data)||void 0===l?void 0:l.totalQuestion)&&void 0!==c?c:0,this.allTimeMark=null!==(d=null===(u=o.data)||void 0===u?void 0:u.studentsNotInClassResults)&&void 0!==d?d:[],this.maxGroupQuestion=null!==(p=null===(m=o.data)||void 0===m?void 0:m.maxGroupId)&&void 0!==p?p:0,this.allTimeMark=null!==(y=null===(b=this.form.controls)||void 0===b?void 0:b.isSortByMarkDesc)&&void 0!==y&&y.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortMarkDESC(null!==(I=null===(C=o.data)||void 0===C?void 0:C.studentsNotInClassResults)&&void 0!==I?I:[],this.hasEssayQuestion),null!==(U=null===(D=o.data)||void 0===D?void 0:D.questionObjs)&&void 0!==U?U:[]):null!==(q=null===(B=this.form.controls)||void 0===B?void 0:B.isSortByTimeDesc)&&void 0!==q&&q.value?this.mapQuestionWithAnswerForExportExcel(this.sortService.sortTimeDESC(null!==(et=null===(R=o.data)||void 0===R?void 0:R.studentsNotInClassResults)&&void 0!==et?et:[]),null!==(V=null===(Q=o.data)||void 0===Q?void 0:Q.questionObjs)&&void 0!==V?V:[]):this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(null!==(at=null===(Y=o.data)||void 0===Y?void 0:Y.studentsNotInClassResults)&&void 0!==at?at:[]),null!==(rt=null===(tt=o.data)||void 0===tt?void 0:tt.questionObjs)&&void 0!==rt?rt:[]),this.allTimeMark=this.examResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.allTimeMark),this.hasEssayQuestion),this.dataExportAllTime=this.processDataForExcel(null!==(gt=null===(vt=o.data)||void 0===vt?void 0:vt.studentsInClassResults)&&void 0!==gt?gt:[]),setTimeout(()=>{var lt;null===(lt=document.getElementById("table_"+e))||void 0===lt||lt.click(),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(null!==(ct=o.message)&&void 0!==ct?ct:""),Ke.AX.closeLoadingEffect(10),this.exportLoading=!1)}))}exportToPDF(e){var i;this.exportResultService.processClasses(null!==(i=this.examObj.id)&&void 0!==i?i:0,e).then(()=>{}).catch(o=>{this.commonService.snackError("string"==typeof o?o:o.message)})}scanMarkObjs(e){e&&(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData())}closeScanFile(e){e&&(this.showFileScan=!1)}openFileScan(e){this.showFileScan=!(!e||!this.loadedJs)&&e}checkHasExamOffline(e){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(e).subscribe(i=>{var o,s,r,l;1==i.success?null!==(o=i.data)&&void 0!==o&&o.value&&this.homeworkExamService.isPdfExam(null!==(s=this.examObj.examType)&&void 0!==s?s:0)?(this.hasExamOffline=!0,this.tokenScanExamOffline=null===(r=i.data)||void 0===r?void 0:r.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=null!==(l=i.message)&&void 0!==l?l:""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(e){e&&(this.mustShownResultId=e)}parseAllUserObjsForMonitorModule(e,i){let o=this.examResultListSortService._changeExamResultStatusForAllClassroom(e,this.hasEssayQuestion),s=this.examResultListSortService._changeExamResultStatusForOneClassroom(i,this.hasEssayQuestion),r=[];return o.forEach(l=>{l.results&&l.results.length>0&&l.results.forEach(c=>{var d={userid:c.userId,studentid:c.studentId,username:null,studentname:c.fullName,status:c.isOnTest?1:c.isNotMarked?2:c.isMarked?3:0};this.commonService.filterArray(r,d)||r.push(d)})}),s.forEach(l=>{var u={userid:l.userId,studentid:l.studentId,username:l.fullName,studentname:l.fullName,status:l.isOnTest?1:l.isNotMarked?2:l.isMarked?3:0};this.commonService.filterArray(r,u)||r.push(u)}),r}changeHeaderTitle(){var e=0,i=0,o=0,s=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(r=>{var l,c,u,d,m,p;e+=null!==(c=null===(l=r.results)||void 0===l?void 0:l.length)&&void 0!==c?c:0,s+=null!==(d=null===(u=r.results)||void 0===u?void 0:u.length)&&void 0!==d?d:0,i+=null!==(m=r.results)&&void 0!==m&&m.filter(b=>1==b.isOnTest)?r.results.filter(b=>1==b.isOnTest).length:0,o+=null!==(p=r.results)&&void 0!==p&&p.filter(b=>1==b.isNotTested)?r.results.filter(b=>1==b.isNotTested).length:0}),this.totalSubmitted=e-o-i,this.totalStudentByClass=s,this.totalStudents=e,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(r=>{this.headerTitle=r+" ("+this.totalSubmitted+"/"+e+")"})}reloadApi(){this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData()}getData(){this.testedListApiService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(e=>{var i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V;if(1==e.success){this.initDataTestedList=null!==(i=e.data)&&void 0!==i?i:{studentsNotInClassResults:[]},this.examObj=null!==(s=null===(o=e.data)||void 0===o?void 0:o.examObj)&&void 0!==s?s:{},this.maxGroupQuestion=null!==(l=null===(r=e.data)||void 0===r?void 0:r.maxGroupId)&&void 0!==l?l:0;let at=null!==(c=this.commonService.getMyQueryParam("backto"))&&void 0!==c?c:"";this.backToLink=at||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.totalExamQuestion=null!==(d=null===(u=e.data)||void 0===u?void 0:u.totalQuestion)&&void 0!==d?d:0,this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj.orcLogId),this.countEssayQuestion=this.examResultListSortService._counterTotalEssayOfQuestionObjs(null!==(p=null===(m=e.data)||void 0===m?void 0:m.questionObjs)&&void 0!==p?p:[]),this.hasEssayQuestion=!!this.countEssayQuestion;var Y=[];Y=null!==(y=null===(b=e.data)||void 0===b?void 0:b.studentsInClassResults)&&void 0!==y?y:[],!(null===(C=e.data)||void 0===C)&&C.studentsNotInClassResults&&(null===(I=e.data)||void 0===I?void 0:I.studentsNotInClassResults.length)>0&&(Y=Y.concat({classObj:{id:-1,name:"lang_auto_tu_do",countStudents:e.data.studentsNotInClassResults.length},results:e.data.studentsNotInClassResults})),this.allRawExamResultObjsOfStudentByClassroom=this.examResultListSortService._changeExamResultStatusForAllClassroom(Y,this.hasEssayQuestion),this.isNotTestedYet=0==this.allViewExamResultObjsOfStudentByClassroom.length&&0==this.allRawExamResultObjsOfStudentByClassroom.length,this.changeFilterEvent(),this.checkHasExamOffline(null!==(D=this.examObj.hashId)&&void 0!==D?D:""),this.allUserObjsForMonitorModule=this.parseAllUserObjsForMonitorModule(null!==(B=null===(U=e.data)||void 0===U?void 0:U.studentsInClassResults)&&void 0!==B?B:[],null!==(R=null===(q=e.data)||void 0===q?void 0:q.studentsNotInClassResults)&&void 0!==R?R:[]),this.scanLoading=!1,this.successStatusObj()}else if(this.scanLoading=!1,this.isNotTestedYet=!0,e.data&&e.data.errorConfigClassroomPermission)this.examObj=null!==(et=e.data.examObj)&&void 0!==et?et:{},this.stopStatusObj();else{let at=null!==(Q=this.commonService.getMyQueryParam("backto"))&&void 0!==Q?Q:"";this.backToLink=at||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(null!==(V=e.message)&&void 0!==V?V:"")}})}loadingFileJs(){return new Promise((e,i)=>{var o=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(o).then(()=>(0,so.mG)(this,void 0,void 0,function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?(typeof imgsdk<"u"&&imgsdk&&e(!0),i(new Error)):(this.countRetryLoadJS++,this.countRetryLoadJS>3?i(new Error("T\u1ea3i th\u01b0 vi\u1ec7n kh\xf4ng th\xe0nh c\xf4ng")):this.loadingFileJs())},1e3)}))})}ngOnInit(){this.initStatusObj(),this.getStatusSideNav(),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i,o,s;this.form=this.fb.group({searchContent:new h.NI("",h.kI.required),isSortByNameAsc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByNameAsc")),isSortByMarkDesc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByMarkDesc")),isSortByTimeDesc:new h.NI(this.examResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"))}),this.cateId=null!==(e=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==e?e:0,this.examId=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("id")))&&void 0!==i?i:0,this.resultId=null!==(o=Number(this.activeRoute.snapshot.paramMap.get("result_id")))&&void 0!==o?o:0;let r=null!==(s=this.commonService.getMyQueryParam("backto"))&&void 0!==s?s:"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,r&&r.includes("shareType")&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(r)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.subscriptions.add(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanMarkObjs(!0)})),super.ngOnInit(),this.gaService.gaEvent("teacher_tested_list")}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(ea.K),t.Y36(vl.Y),t.Y36(yo.x),t.Y36(Bt.$4),t.Y36(lo.j),t.Y36(Oa.U),t.Y36(w.gz),t.Y36(qu.M),t.Y36(le.U),t.Y36(Gs.e),t.Y36(Fu),t.Y36(Q_.n),t.Y36(Qu.O),t.Y36(Uu.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-result-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(o6,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:62,vars:41,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-0QZproco5xZ","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-4Z_EfTLJxQi","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-w_SF8LQVEoJ","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],["onlineExam",""],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-ebYwc4pDURL","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-W-MbuCFxges","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","exam-result-list--SRq4KozVPk","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","lucide-search","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],[3,"initData","isNotTestedYet","reloadApi"],[3,"initData","isNotTestedYet","userList","reloadApi"],["azt-track-service","exam-result-list-ebYwc4pDURL",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-W-MbuCFxges",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","examResultObjsByClassroom","isNotTestedYet","isOpenSideNav","hasEssayQuestion","showFileScan","obj","scanLoading","isMobile","headerTitle","mustShownResultId","notTestedOpenFileScan"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit",4,"ngIf"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit"],["azt-track-service","exam-result-list-i4C5FY9wmRS",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-R5IoDfDGPjl",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-uu4eRK1bM_Y",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-Z2Yv5PDF0ip",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-lkdrlUeMVIu",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-Y2rW9vySVE4",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-E1ccsRZD8jm",1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,a6,1,0,"azt-loading-effect",1),t.YNc(2,f6,39,77,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),t.YNc(9,x6,8,3,"li",8),t.ALo(10,"viewPermission"),t.YNc(11,v6,8,3,"li",8),t.ALo(12,"viewPermission"),t.YNc(13,b6,8,3,"li",8),t.ALo(14,"viewPermission"),t.YNc(15,y6,8,3,"li",8),t.ALo(16,"viewPermission"),t.YNc(17,w6,10,3,"li",8),t.ALo(18,"viewPermission"),t.YNc(19,k6,10,3,"li",8),t.ALo(20,"viewPermission"),t.YNc(21,C6,10,3,"li",8),t.ALo(22,"viewPermission"),t.TgZ(23,"li")(24,"label",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(25,"span",10),t.O4$(),t.TgZ(26,"svg",11),t._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),t.qZA(),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(34,"div",17)(35,"input",18),t.NdJ("change",function(){return i.changeSortEvent("isSortByNameAsc")}),t.qZA()()()(),t.TgZ(36,"li")(37,"label",19),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(38,"span",10),t.O4$(),t.TgZ(39,"svg",11),t._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),t.qZA(),t._uU(45),t.ALo(46,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(47,"div",17)(48,"input",22),t.NdJ("change",function(){return i.changeSortEvent("isSortByMarkDesc")}),t.qZA()()()(),t.TgZ(49,"li")(50,"label",23),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(51,"span",10),t.O4$(),t.TgZ(52,"svg",11),t._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(60,"div",17)(61,"input",24),t.NdJ("change",function(){return i.changeSortEvent("isSortByTimeDesc")}),t.qZA()()()()()()()()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",t.xi3(10,14,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,17,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,20,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,23,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,26,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,29,i.examObj.permissionObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(22,32,i.examObj.permissionObj,"exam")),t.xp6(11),t.hij(" ",t.lcZ(33,35,"lang_testbank_testted_list_sort_name")," "),t.xp6(13),t.hij(" ",t.lcZ(46,37,"lang_testbank_testted_list_sort_point")," "),t.xp6(13),t.hij(" ",t.lcZ(59,39,"lang_testbank_testted_list_sort_time")," ")}},dependencies:[E.mk,E.O5,ke.VK,ke.p6,li.jA,li.kh,li.LW,Le.gM,P.KC,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,xe.Q,Pe.M,Ws,Xe._,U_,J_,$_,Y_,G_.A,V_,X_,_t.bT,_t.Pz],encapsulation:2}),n})();var A6=A(52106);let tm=(()=>{class n{constructor(e,i){this.commonService=e,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_homework_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}getDefaultFilterObj(){var e,i=this._getInitFilterObj(),o=this.commonService.castJsonToObj(null!==(e=this.browserStorageService.getSimpleStorage(this.localStorageSlug))&&void 0!==e?e:"");return o&&(i=o),i}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var i=0;for(var o in e)!0===e[o]&&(i+=1);return i}_getInitFilterObj(){return{isSubmitted:!1,isNotSubmit:!1,isMarked:!1,mustReSubmit:!1}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v),t.LFG(wi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function S6(n,a){1&n&&(t.TgZ(0,"div",3),t.O4$(),t.TgZ(1,"svg",4)(2,"g",5)(3,"g",6),t._UZ(4,"circle",7),t.TgZ(5,"path",8),t._UZ(6,"animateTransform",9),t.qZA()()()()())}function O6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",10)(1,"form",11)(2,"div",12)(3,"div",13)(4,"h3",14),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",15),t._UZ(8,"editor",16),t.qZA()()()(),t.TgZ(9,"div",17)(10,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialog())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.saveHomework())}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,5,"lang_auto_noi_dung")," "),t.xp6(3),t.Q6J("init",e.initDataEditor),t.xp6(3),t.hij(" ",t.lcZ(12,7,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(15,9,"lang_auto_luu")," ")}}let E6=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c){super(),this.formBuilder=e,this.zipDataService=i,this.documentConfigService=o,this.browserStorageService=s,this.uploadImageOfHomeworkService=r,this.dialogRef=l,this.data=c,this.form=new h.nJ({}),this.permissionTypes=Ai.$,this.homeworkId=0,this.homeworkHashId="",this.homeworkObj=void 0,this.initDataEditor={},this.homeworkHashId=c.hashId,this.getHomework(this.homeworkHashId)}closeDialog(){this.dialogRef.close()}saveHomework(){if(this.initStatusObj(),this.form.invalid)this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");else{var i=this.commonService.getFormObj(this.form).homeworkDescription;this.uploadImageOfHomeworkService.replaceImageInContent(i).subscribe(o=>{if(null==o.errorMessage){let r={content:this.zipDataService.convertContentGzip(o.content)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,r).subscribe(l=>{var c;1==l.success?(l.data&&l.data.objs&&this.data.callback(l.data.objs[0]),this.closeDialog(),this.showSuccessSnack("lang_auto_luu_thanh_cong")):this.errorStatusObj(null!==(c=l.message)&&void 0!==c?c:"",!0)}))}else this.showErrorSnack(o.errorMessage),this.stopStatusObj()})}}getHomework(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(e,[]).subscribe(i=>{var o,s,r,l;if(1==i.success){this.homeworkObj=null===(o=i.data)||void 0===o?void 0:o.homeworkObj;let c=null!==(s=this.homeworkObj)&&void 0!==s&&s.content?this.zipDataService.decodeContentGzip(null===(r=this.homeworkObj)||void 0===r?void 0:r.content):"";this.form.patchValue({homeworkDescription:c}),this.successStatusObj()}else this.errorStatusObj(null!==(l=i.message)&&void 0!==l?l:"",!0)}))}checkModeUiEditor(){var e;this.initDataEditor="dark"==(""==this.browserStorageService.getStorage("mode_ui")?"light":null!==(e=this.browserStorageService.getStorage("mode_ui"))&&void 0!==e?e:"light")?{height:250,menubar:!1,plugins:[],skin:"oxide-dark",content_css:"dark",toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}:{height:250,menubar:!1,plugins:[],toolbar:"bold italic backcolor | alignleft aligncenter alignright alignjustify"}}ngOnInit(){this.form=this.formBuilder.group({homeworkDescription:new h.p4("")}),this.checkModeUiEditor(),super.ngOnInit()}ngOnChanges(){this.checkModeUiEditor()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(Ca.D),t.Y36(Bt.Cq),t.Y36(wi.z),t.Y36(Us.J),t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-homework"]],features:[t._Bn([{provide:zn.fM,useClass:es.HF,deps:[Bi.Ad,Wo.o8]},{provide:zn.ab,useFactory:Qs.hx,deps:[Si.O]}]),t.qOj,t.TTD],decls:4,vars:2,consts:[[1,"box"],["class","azt-icon-loading text-center p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"azt-icon-loading","text-center","p-5"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"mx-auto","w-8","h-8"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"setting","p-3"],[3,"formGroup"],["id","document-desc"],[1,"setting-label-textarea"],[1,"text-md","font-medium"],[1,"mt-2"],["formControlName","homeworkDescription","apiKey","ldij13v1886vlrnk42g9bvngyqdc6gxpe8l0n9mo8gdjpg9d",3,"init"],[1,"p-3","text-right"],["azt-track-service","config-homework-dialog-lVvTPghlWFp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","config-homework-dialog-DfiuQtfSx_I",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,S6,7,0,"div",1),t.YNc(2,O6,16,11,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,g.PG,h._Y,h.JJ,h.JL,h.sg,h.u,Pe.M,_t.bT],encapsulation:2}),n})(),M6=(()=>{class n{constructor(e,i){this.dialogRef=e,this.data=i}handleCloseDialog(){this.dialogRef.close(!1)}handleConfirmDialog(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so),t.Y36(z.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-delete-dialog"]],decls:23,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-Bb7ymz69OiI",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-5Ii165wkYxm",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(12,"div",10)(13,"p",11),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()(),t.TgZ(16,"div",12)(17,"button",13),t.NdJ("click",function(){return i.handleCloseDialog()}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"button",14),t.NdJ("click",function(){return i.handleConfirmDialog()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(10),t.hij(" ",t.lcZ(11,4,"lang_auto_ban_co_chac_chan_muon_xoa")+" ?"," "),t.xp6(4),t.hij(" ",t.lcZ(15,6,"lang_auto_ban_muon_xoa_file")+" "+i.data.name," "),t.xp6(4),t.hij(" ",t.lcZ(19,8,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," "))},dependencies:[_t.bT],encapsulation:2}),n})();function I6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clickToSeeMore())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_see_more")))}function L6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"a",2),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clickToShowShortContent())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_see_short_content")))}let Z6=(()=>{class n extends st.Q{constructor(){super(...arguments),this.content="",this.maxLength=500,this.showContent="",this.showSeeMoreButton=!0,this.showShortContentButton=!1}clickToShowShortContent(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}clickToSeeMore(){this.showSeeMoreButton=!1,this.showShortContentButton=!0,this.processSeeMore()}processSeeMore(){let e=this.commonService.removeTagHtml(this.content);e.length>this.maxLength?this.showContent=this.showSeeMoreButton?e.substring(0,this.maxLength)+"...":this.content:(this.showSeeMoreButton=!1,this.showShortContentButton=!1,this.showContent=this.content)}ngOnInit(){this.processSeeMore(),super.ngOnInit()}ngOnChanges(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-see-more"]],inputs:{content:"content",maxLength:"maxLength"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[[3,"innerHTML"],["class","btn-text-primary",3,"click",4,"ngIf"],[1,"btn-text-primary",3,"click"]],template:function(e,i){1&e&&(t._UZ(0,"div",0),t.YNc(1,I6,3,3,"a",1),t.YNc(2,L6,3,3,"a",1)),2&e&&(t.Q6J("innerHTML",i.showContent,t.oJD),t.xp6(1),t.Q6J("ngIf",i.showSeeMoreButton&&i.content.length>i.maxLength),t.xp6(1),t.Q6J("ngIf",i.showShortContentButton&&i.content.length>i.maxLength))},dependencies:[E.O5,_t.bT],encapsulation:2}),n})();function P6(n,a){if(1&n&&(t.TgZ(0,"div",11),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"rect",13)(3,"line",14)(4,"line",15)(5,"line",16),t.qZA(),t.kcU(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_bat_dau")+": "+t.lcZ(9,3,null==e.initData.homeworkObj?null:e.initData.homeworkObj.startDate)," ")}}function N6(n,a){if(1&n&&t._UZ(0,"azt-share",32),2&n){const e=t.oxw();let i;t.Q6J("objectCodeType",2)("objectCode","HOMEWORK")("objectId",null!==(i=e.initData.homeworkObj.id)&&void 0!==i?i:0)("homeworkWithPermissionObj",e.initData.homeworkObj)}}function D6(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",63)(2,"a",64),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.redirectToClassroomDetail())}),t._uU(3),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.s9C("matTooltip",e.initData.classroomObj.name),t.xp6(1),t.hij(" ",e.initData.classroomObj.name," ")}}function j6(n,a){1&n&&(t.TgZ(0,"div",63)(1,"a",65),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function q6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openConfigDialog())}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",67)(3,"path",68),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function F6(n,a){if(1&n&&(t.TgZ(0,"div",69),t._UZ(1,"azt-see-more",70),t.qZA()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.Q6J("content",null!==(i=null==e.initData.homeworkObj?null:e.initData.homeworkObj.content)&&void 0!==i?i:"")("maxLength",200)}}function Q6(n,a){1&n&&(t.TgZ(0,"p",71),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_noi_dung")," "))}function U6(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",19),t._UZ(2,"path",73)(3,"polyline",74)(4,"line",75),t.qZA()())}function B6(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",76)(2,"g",77)(3,"g",78),t._UZ(4,"circle",79),t.TgZ(5,"path",80),t._UZ(6,"animateTransform",81),t.qZA()()()()())}function R6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e),t.oxw();const o=t.MAs(51);return t.KtG(o.click())}),t.YNc(1,U6,5,0,"span",31),t.YNc(2,B6,7,0,"span",31),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.loadingUpload),t.xp6(1),t.Q6J("ngIf",e.loadingUpload),t.xp6(1),t.hij(" ",t.lcZ(4,3,"lang_auto_them_file")," ")}}function z6(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",84),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.onShowFile(s,-1))}),t.O4$(),t.TgZ(2,"svg",19),t._UZ(3,"path",85)(4,"polyline",86)(5,"line",87)(6,"line",88)(7,"line",89),t.qZA(),t.kcU(),t.TgZ(8,"span",90),t._uU(9),t.qZA()(),t.TgZ(10,"button",91),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(3);return t.KtG(r.removeFile(s))}),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",92),t._UZ(13,"line",93)(14,"line",94),t.qZA()(),t.BQk()}if(2&n){const e=a.$implicit;t.xp6(8),t.s9C("matTooltip",e.name),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,3,"lang_auto_xoa"))}}function J6(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",82),t.YNc(2,z6,15,5,"ng-container",83),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.formHomework.files)}}function H6(n,a){1&n&&(t.TgZ(0,"p",95),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_file_dinh_kem")," "))}const em=function(n){return{opacity:n}};function $6(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",33)(1,"h3",34),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",35)(5,"ul",36)(6,"li",37),t.ALo(7,"deletePermission"),t.TgZ(8,"a",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openDeleteHomeworkDialog())}),t.O4$(),t.TgZ(9,"svg",12),t._UZ(10,"path",39)(11,"path",40)(12,"path",41)(13,"line",42)(14,"line",43),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(17,"li",37),t.ALo(18,"editPermission"),t.TgZ(19,"a",44),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.redirectToSetting())}),t.O4$(),t.TgZ(20,"svg",12),t._UZ(21,"path",45)(22,"circle",46),t.qZA(),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()(),t.kcU(),t.TgZ(25,"div",47)(26,"div",48)(27,"h3",34),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.TgZ(30,"div",49),t.YNc(31,D6,4,2,"ng-container",50),t.YNc(32,j6,4,3,"ng-template",null,51,t.W1O),t.qZA()(),t.TgZ(34,"div",52)(35,"div",48)(36,"h3",34),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.YNc(39,q6,6,3,"button",53),t.ALo(40,"editPermission"),t.ALo(41,"configPermission"),t.qZA(),t.TgZ(42,"div",54),t.YNc(43,F6,2,2,"div",55),t.YNc(44,Q6,3,3,"p",56),t.qZA()(),t.TgZ(45,"div",57)(46,"div",48)(47,"h3",34),t._uU(48),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"input",58,59),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onFileSelected(o))}),t.qZA(),t.YNc(52,R6,5,5,"button",60),t.ALo(53,"editPermission"),t.ALo(54,"configPermission"),t.qZA(),t.TgZ(55,"div",61),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.YNc(58,J6,3,1,"ng-container",50),t.YNc(59,H6,3,3,"ng-template",null,62,t.W1O),t.qZA()}if(2&n){const e=t.MAs(33),i=t.MAs(60),o=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,17,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(49,em,t.xi3(7,19,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),t.xp6(9),t.hij(" ",t.lcZ(16,22,"lang_auto_xoa")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(51,em,t.xi3(18,24,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"homework")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(24,27,"lang_auto_cai_dat")," "),t.xp6(5),t.hij(" ",t.lcZ(29,29,"lang_auto_giao_cho")," "),t.xp6(3),t.Q6J("ngIf",o.initData.classroomObj)("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(38,31,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(40,33,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"homework")||t.xi3(41,36,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"homework")),t.xp6(4),t.Q6J("ngIf",null==o.initData.homeworkObj?null:o.initData.homeworkObj.content),t.xp6(1),t.Q6J("ngIf",!(null!=o.initData.homeworkObj&&o.initData.homeworkObj.content)),t.xp6(4),t.hij(" ",t.lcZ(49,39,"lang_auto_file_dinh_kem")," "),t.xp6(4),t.Q6J("ngIf",t.xi3(53,41,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"exam")||t.xi3(54,44,null==o.initData.homeworkObj?null:o.initData.homeworkObj.permissionObj,"exam")),t.xp6(4),t.hij(" ",t.lcZ(57,47,"lang_auto_ho_tro_file_dinh_danh_anh_pdf_work_excel_audio_hoac_video")," "),t.xp6(2),t.Q6J("ngIf",null==o.formHomework.files?null:o.formHomework.files.length)("ngIfElse",i)}}function K6(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",96),t._UZ(2,"polyline",97),t.qZA()())}function Y6(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",96),t._UZ(2,"polyline",98),t.qZA()())}let G6=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.dialog=e,this.apiUploadService=i,this.documentConfigService=o,this.zipDataService=s,this.permissionService=r,this.initData={},this.reloadApi=new t.vpe,this.isShowActions=!0,this.loadingUpload=!1,this.uploadProgress=0,this.formHomework={files:[],content:""}}toggleShowActions(){this.isShowActions=!this.isShowActions}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong_duong_dan_nop_bai")}copyLinkToClipboard(e){return`${this.commonService.getCurrentDomain()}/bai-tap/${e}`}onFileSelected(e){var i;if(this.permissionService.hasEditPermission("homework",null===(i=this.initData.homeworkObj)||void 0===i?void 0:i.permissionObj)){let r=e.target,l=r.files,c=!!l&&l[0];0!=c&&((0,ot.C0)(c.type)?(0,ot.ml)(c.type)?this.showErrorSnack("lang_auto__chua_ho_tro_dinh_dang_video_wmv_vui_long_thu_lai"):(this.loadingUpload=!0,this.uploadProgress=0,(0,ot.hv)(c).then(u=>{this.apiUploadService.uploadToCdnForHomework(u).subscribe(d=>{var m,p,b;if(d.type!=K.dt.UploadProgress)if(1==d.success){this.formHomework.files.push(Object.assign({},d.data));let y={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(null!==(p=null===(m=this.initData.homeworkObj)||void 0===m?void 0:m.hashId)&&void 0!==p?p:"",y).subscribe(C=>{var I;1==C.success?this.showSuccessSnack("lang_auto_them_file_thanh_cong"):this.errorStatusObj(null!==(I=C.message)&&void 0!==I?I:"",!0),this.loadingUpload=!1})),this.uploadProgress=-1}else this.loadingUpload=!1,this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",null!==(b=d.message)&&void 0!==b?b:"none"))})})):this.showErrorSnack("lang_auto_vui_long_tai_len_file_dinh_dang_anh_pdf_word_excel_audio_hoac_video")),r.files=null}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}removeFile(e){var i;this.dialog.open(M6,{width:"400px",data:null===(i=this.formHomework.files)||void 0===i?void 0:i[e],restoreFocus:!1}).afterClosed().subscribe(s=>{var r,l,c;if(s){null===(r=this.formHomework.files)||void 0===r||r.splice(e,1);let u={files:JSON.stringify(this.formHomework.files)};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(null!==(c=null===(l=this.initData.homeworkObj)||void 0===l?void 0:l.hashId)&&void 0!==c?c:"",u).subscribe(d=>{var m;1==d.success?this.showSuccessSnack("lang_auto_xoa_file_thanh_cong"):this.errorStatusObj(null!==(m=d.message)&&void 0!==m?m:"",!0),this.loadingUpload=!1}))}})}onShowFile(e,i){let o=Object.assign(Object.assign({},e),{index:i});this.dialog.open(Nu.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:o},restoreFocus:!1})}redirectToClassroomDetail(){var e,i,o,s,r,l,c,u,d,m;let p=`/admin/testbank/homework-results-list/${null!==(i=null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/${null===(o=this.initData.homeworkObj)||void 0===o?void 0:o.id}/${null===(s=this.initData.homeworkObj)||void 0===s?void 0:s.hashId}`,b=null!==(r=this.commonService.getMyQueryParam("backto"))&&void 0!==r?r:"";b&&b.includes("shareType")&&(p=`/admin/testbank/homework-results-list/${null!==(c=null===(l=this.initData.homeworkObj)||void 0===l?void 0:l.categoryId)&&void 0!==c?c:0}/${null===(u=this.initData.homeworkObj)||void 0===u?void 0:u.id}/${null===(d=this.initData.homeworkObj)||void 0===d?void 0:d.hashId}?backto=`+encodeURIComponent(b)),this.myNavigationWithQueryString(`/admin/student/class-details/${null===(m=this.initData.classroomObj)||void 0===m?void 0:m.id}`,`?backto=${p}`)}redirectToSetting(){var e,i,o,s,r,l,c,u,d,m,p,b,y;if(this.permissionService.hasEditPermission("homework",null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.permissionObj)){let I=`/admin/testbank/homework-results-list/${null!==(o=null===(i=this.initData.homeworkObj)||void 0===i?void 0:i.categoryId)&&void 0!==o?o:0}/${null===(s=this.initData.homeworkObj)||void 0===s?void 0:s.id}/${null===(r=this.initData.homeworkObj)||void 0===r?void 0:r.hashId}`,D=null!==(l=this.commonService.getMyQueryParam("backto"))&&void 0!==l?l:"";D&&D.includes("shareType")&&(I=`/admin/testbank/homework-results-list/${null!==(u=null===(c=this.initData.homeworkObj)||void 0===c?void 0:c.categoryId)&&void 0!==u?u:0}/${null===(d=this.initData.homeworkObj)||void 0===d?void 0:d.id}/${null===(m=this.initData.homeworkObj)||void 0===m?void 0:m.hashId}?backto=`+encodeURIComponent(D)),this.myNavigationWithQueryString(`/admin/testbank/config-homework/${null!==(b=null===(p=this.initData.homeworkObj)||void 0===p?void 0:p.categoryId)&&void 0!==b?b:0}/${null===(y=this.initData.homeworkObj)||void 0===y?void 0:y.hashId}`,`?backto=${I}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.dialog.open(wl,{data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteHomeworkDialog(){var e;this.permissionService.hasFullPermission("homework",null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.permissionObj)?this.dialog.open(kl.h,{data:{homeworkObj:this.initData.homeworkObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/1/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openConfigDialog(){var e;this.dialog.open(E6,{width:"850px",data:{callback:this.callbackConfigDialog.bind(this),showConfig:{description:!0},hashId:null===(e=this.initData.homeworkObj)||void 0===e?void 0:e.hashId},restoreFocus:!1})}callbackConfigDialog(e){var i;this.initData.homeworkObj&&(this.initData.homeworkObj.name=e.name,this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(null!==(i=e.content)&&void 0!==i?i:""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}processData(){var e,i,o;this.initData.homeworkObj&&(this.formHomework.files=null!==(i=this.commonService.myParseJson(null!==(e=this.initData.homeworkObj.files)&&void 0!==e?e:""))&&void 0!==i?i:[],this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(null!==(o=this.initData.homeworkObj.content)&&void 0!==o?o:""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}ngOnInit(){this.processData(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(Do.$),t.Y36(Bt.Cq),t.Y36(Ca.D),t.Y36(ta.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-homework"]],inputs:{initData:"initData"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:47,vars:28,consts:[[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",2,"max-width","60%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","mt-2","lg:mt-0","flex","items-center"],["azt-track-service","menu-homework-eI2NNVUSUY1",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"ml-1",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["class"," flex items-center mt-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18"],["d","M21 15.5V6a2 2 0 0 0-2-2H9.5"],["d","M16 2v4"],["d","M3 10h7"],["d","M21 10h-5.5"],["x1","2","y1","2","x2","22","y2","22"],[1,"text-sm","inline-block","ml-1"],[1,"flex","mt-2"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-homework-uD4Lx8Z-l-r",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"objectCodeType","objectCode","objectId","homeworkWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-homework-2OnoCiN1dtn",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-homework--_M1HhvAdpz",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-homework-TNawByu5aUA","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"azt-document-desc"],["id","description_content","class","description text-left",4,"ngIf"],["class","text-md text-center",4,"ngIf"],[1,"azt-document-file","mt-4"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""],["azt-track-service","menu-homework-nZbwE5HD5ts","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"leading-relaxed","text-slate-500","text-xs"],["noFile",""],[1,"col-span-12","md:col-span-6"],["azt-track-service","menu-homework-zV31SFaqVqP",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-homework-TNawByu5aUA",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["id","description_content",1,"description","text-left"],[3,"content","maxLength"],[1,"text-md","text-center"],["azt-track-service","menu-homework-nZbwE5HD5ts",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"w-4","h-4","lucide","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"app-block-detail","mt-2"],[4,"ngFor","ngForOf"],["azt-track-service","menu-homework-qPLF48TFcWr",1,"btn-text-primary",2,"width","85%",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],[1,"truncate",2,"width","75%","text-align","left",3,"matTooltip"],["azt-track-service","menu-homework-8wcAt-Fpoyn",1,"btn","btn-transparent",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"text-md","text-center","mt-3"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.showCopySuccess()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"rect",8)(10,"path",9),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.kcU(),t._UZ(13,"azt-download-qr-code",10),t.qZA()(),t.TgZ(14,"div",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),t.qZA(),t.kcU(),t.TgZ(20,"span",17),t._uU(21),t.ALo(22,"mytranslate"),t.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(24,P6,10,5,"div",18),t.TgZ(25,"div",11),t.O4$(),t.TgZ(26,"svg",19),t._UZ(27,"path",20)(28,"path",21)(29,"path",22)(30,"path",23)(31,"path",24)(32,"line",25),t.qZA(),t.kcU(),t.TgZ(33,"span",17),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"span",26),t._uU(37),t.ALo(38,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(39,"mytranslate"),t.qZA()(),t.TgZ(40,"div",27),t.YNc(41,N6,1,4,"ng-template",28),t.qZA()(),t.YNc(42,$6,61,53,"ng-template",28),t.TgZ(43,"div",29)(44,"button",30),t.NdJ("click",function(){return i.toggleShowActions()}),t.YNc(45,K6,3,0,"span",31),t.YNc(46,Y6,3,0,"span",31),t.qZA()()()),2&e){const o=t.MAs(4);t.xp6(3),t.s9C("matTooltip",null==i.initData.homeworkObj?null:i.initData.homeworkObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),t.xp6(2),t.hij(" ",null==i.initData.homeworkObj?null:i.initData.homeworkObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(null==i.initData.homeworkObj?null:i.initData.homeworkObj.hashId)),t.xp6(4),t.hij(" ",t.lcZ(12,16,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_submit_homework_qrcode_"+(null==i.initData.homeworkObj?null:i.initData.homeworkObj.hashId))("linkUrl",i.copyLinkToClipboard(null==i.initData.homeworkObj?null:i.initData.homeworkObj.hashId)),t.xp6(8),t.hij(" ",t.lcZ(22,18,"lang_testbank_tested_list_date_create")+": "+t.lcZ(23,20,null==i.initData.homeworkObj?null:i.initData.homeworkObj.createdAt)," "),t.xp6(3),t.Q6J("ngIf",null==i.initData.homeworkObj?null:i.initData.homeworkObj.startDate),t.xp6(10),t.hij(" ",t.lcZ(35,22,"lang_auto_han_cuoi")+": "," "),t.xp6(3),t.hij(" ",null!=i.initData.homeworkObj&&i.initData.homeworkObj.deadline?t.lcZ(38,24,null==i.initData.homeworkObj?null:i.initData.homeworkObj.deadline):t.lcZ(39,26,"lang_auto_khong_thoi_han")," "),t.xp6(4),t.Q6J("ngIf",i.initData.homeworkObj&&i.initData.homeworkObj.hasOwnProperty("id")),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(3),t.Q6J("ngIf",i.isShowActions),t.xp6(1),t.Q6J("ngIf",!i.isShowActions)}},dependencies:[E.sg,E.O5,E.PC,Fo.i3,Le.gM,Ks.o,Z6,Ji.Q,is.I,_t.bT,_t.BU,_t.vL,_t.El,_t.tO],encapsulation:2}),n})();const W6=["TABLE"],V6=function(){return{}};function X6(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA(),t.TgZ(3,"td",4),t._uU(4),t.ALo(5,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(6,"td",7),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"td",4),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"td",4),t._UZ(16,"span",8),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.oxw();t.xp6(1),t.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",0)("excelStyle",o.styleTdNormal),t.xp6(1),t.Oqu(e.fullName),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",1)("excelStyle",o.styleTdNormal),t.xp6(1),t.Oqu(t.lcZ(5,25,e.birthday)),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",2)("excelStyle",o.styleTdNormal),t.xp6(1),t.Oqu(0==e.gender?t.lcZ(8,27,"lang_gender_female"):1==e.gender?t.lcZ(9,29,"lang_gender_male"):""),t.xp6(3),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",3)("excelStyle",o.styleTdNormal),t.xp6(1),t.Oqu(e.isMarked?o.checkPoint(e.point?e.point:0):e.mustReSubmit?t.lcZ(12,31,"lang_homework_utils_excel_table_export_must_resubmit"):e.isNotSubmit?t.lcZ(13,33,"lang_homework_utils_excel_table_export_not_submit"):t.lcZ(14,35,"lang_homework_utils_excel_table_export_not_point")),t.xp6(4),t.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",4)("excelStyle",o.styleTdNormal),t.xp6(1),t.Q6J("innerHTML",o.getComment(e.answer?e.answer:t.DdM(37,V6)),t.oJD)}}let tk=(()=>{class n extends st.Q{constructor(e,i){super(),this.shareFileFlutterService=e,this.exportExcelService=i,this.studentLists=[],this.homeworkObj={},this.tableType="homework",this.currentDate=new Date,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}exportToExcel(){var e;let i=this.homeworkObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([null!==(e=this.homeworkObj.name)&&void 0!==e?e:""])+"-ScoreSheet.xlsx":this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx",o=this.exportExcelService.exportHtmlTableToExcelBlob(this.TABLE,!0);this.shareFileFlutterService.shareFileWithBlob(o,i)}checkPoint(e){var i,o,s,r,l;let c=null!==(i=this.commonService.myTranslateInstant("lang_auto_dat"))&&void 0!==i?i:"",u=null!==(o=this.commonService.myTranslateInstant("lang_auto_chua_dat"))&&void 0!==o?o:"",d=null!==(s=this.commonService.myTranslateInstant("lang_auto_hoan_thanh"))&&void 0!==s?s:"",m=null!==(r=this.commonService.myTranslateInstant("lang_auto_chua_hoan_thanh"))&&void 0!==r?r:"",p=null!==(l=this.commonService.myTranslateInstant("lang_auto_hoan_thanh_tot"))&&void 0!==l?l:"";switch(e){case 1e3:return c;case 1001:return u;case 2e3:return d;case 2001:return m;case 3e3:return p;default:return e}}getComment(e){var i="";return null!=e&&e.result&&(i=this.commonService.willDeleteParseJson(e.result).comment),this.commonService.removeTagHtml(i)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ka.g),t.Y36(Zu.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-excel-export"]],viewQuery:function(e,i){if(1&e&&t.Gf(W6,5),2&e){let o;t.iGM(o=t.CRH())&&(i.TABLE=o.first)}},inputs:{studentLists:"studentLists",homeworkObj:"homeworkObj",tableType:"tableType"},features:[t.qOj],decls:44,vars:54,consts:[["azt-track-service","excel-table-export-ZXUlfEPdCW2",1,"table","table-bordered","azt-hidden",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table","azt-excel-cell"],[4,"ngFor","ngForOf"],["colspan","2",1,"border-table","azt-excel-cell"],[1,"azt-excel-cell"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return i.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr"),t._UZ(8,"th"),t.qZA(),t.TgZ(9,"tr")(10,"th",3),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(14,"tr"),t._UZ(15,"th"),t.qZA(),t.TgZ(16,"tr")(17,"th",4),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"th",4),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"th",4),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,X6,17,38,"tr",5),t._UZ(34,"tr"),t.TgZ(35,"tr"),t._UZ(36,"td")(37,"td")(38,"td"),t.TgZ(39,"td",6),t._uU(40),t.ALo(41,"mytranslate"),t.qZA(),t._UZ(42,"td")(43,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",i.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,36,"lang_homework_utils_excel_table_export_homework"),": ",i.homeworkObj.name,""),t.xp6(6),t.AsE("",t.lcZ(12,38,"lang_homework_utils_excel_table_export_time_export_result"),": ",t.lcZ(13,40,i.currentDate),""),t.xp6(6),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",0)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(19,42,"lang_first_and_last_name")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(22,44,"lang_birthday")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(25,46,"lang_gender")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",3)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(28,48,"lang_point")),t.xp6(2),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",4)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(31,50,"lang_homework_utils_excel_table_export_comment")),t.xp6(3),t.Q6J("ngForOf",i.studentLists),t.xp6(6),t.uIk("excelWidth",15)("excelRow",6+i.studentLists.length)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.hij("",t.lcZ(41,52,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[E.sg,_t.bT,_t._I],encapsulation:2}),n})();var ek=A(37104);const nk=["student",""];function ik(n,a){1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_cham")))}function ok(n,a){1&n&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_nop")))}function ak(n,a){1&n&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai"),""))}function sk(n,a){1&n&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_point")+": "))}function rk(n,a){if(1&n&&(t.TgZ(0,"span",17),t._UZ(1,"azt-check-mark",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("mark",e.student.point)}}function lk(n,a){if(1&n&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function ck(n,a){1&n&&(t.TgZ(0,"p",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function uk(n,a){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,ck,3,3,"p",21),t.TgZ(2,"p",22),t._uU(3),t.qZA()()),2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isSubmitted),t.xp6(2),t.hij(" ",null!==(i=null==e.student.answerFileObjs?null:e.student.answerFileObjs.length)&&void 0!==i?i:0," ")}}const dk=function(n){return{"zoom-in":n}};let _k=(()=>{class n extends st.Q{constructor(e){super(),this.timeService=e}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-result-student-exam-result-box","student",""]],inputs:{student:"student"},features:[t.qOj],attrs:nk,decls:16,vars:15,consts:[[1,"flex","items-center","p-3","rounded-md","h-full","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name"],[1,"font-medium",3,"isDisabledTooltip"],[1,"flex","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-xs",4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"text-pending"],[1,"text-danger"],[1,"text-slate-500"],[1,"text-black","font-medium"],[3,"mark"],[1,"text-slate-500","text-xs"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"azt-create-avatar",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7),t.YNc(9,ik,3,3,"span",8),t.YNc(10,ok,3,3,"span",9),t.YNc(11,ak,3,3,"span",10),t.YNc(12,sk,3,3,"span",10),t.YNc(13,rk,2,1,"span",11),t.qZA(),t.YNc(14,lk,3,3,"div",12),t.qZA(),t.YNc(15,uk,4,2,"div",13),t.qZA()()),2&e){let o;t.Q6J("ngClass",t.VKq(13,dk,!(i.student.isNotSubmit&&i.student.mustReSubmit))),t.xp6(2),t.Q6J("linkAvatar",null!==(o=i.student.avatar)&&void 0!==o?o:"")("nameCreateAvatar",i.student.fullName)("size",40),t.xp6(3),t.Q6J("isDisabledTooltip",!1),t.xp6(1),t.hij(" ",i.student.fullName," "),t.xp6(3),t.Q6J("ngIf",i.student.isSubmitted),t.xp6(1),t.Q6J("ngIf",i.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",i.student.mustReSubmit),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",null!=i.student.createdAt),t.xp6(1),t.Q6J("ngIf",i.student.isMarked||i.student.isSubmitted)}},dependencies:[E.mk,E.O5,Xs.g,ek.B,Ji.Q,_t.bT],encapsulation:2}),n})();function mk(n,a){if(1&n&&(t.TgZ(0,"div",4),t.GkF(1,5),t.qZA()),2&n){t.oxw();const e=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}const pk=function(n){return[n]},hk=function(n){return{backto:n}};function gk(n,a){if(1&n&&(t.TgZ(0,"div")(1,"a",14),t.ALo(2,"mylocalize"),t._UZ(3,"testbank-homework-result-student-exam-result-box",15),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(5,pk,t.lcZ(2,3,"/admin/homework/switch-mark-exercise/"+e.answer.id+"/"+i.obj.hashId)))("queryParams",t.VKq(7,hk,i.backToLink)),t.xp6(2),t.Q6J("student",e)}}function fk(n,a){if(1&n&&t._UZ(0,"testbank-homework-result-student-exam-result-box",15),2&n){const e=t.oxw().$implicit;t.Q6J("student",e)}}const xk=function(n){return{"lg:col-span-3":n}};function vk(n,a){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,gk,4,9,"div",12),t.YNc(2,fk,1,1,"ng-template",null,13,t.W1O),t.qZA()),2&n){const e=a.$implicit,i=t.MAs(3),o=t.oxw(2);t.Q6J("ngClass",t.VKq(3,xk,!o.isOpenSideNav&&!o.isMobile)),t.xp6(1),t.Q6J("ngIf",e.answer)("ngIfElse",i)}}function bk(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",6)(2,"ng-scrollbar",7)(3,"div",8)(4,"div",9),t.YNc(5,vk,4,5,"div",10),t.qZA()()()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("visibility","hover"),t.xp6(3),t.Q6J("ngForOf",e.studentLists)}}function yk(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",16)(1,"p",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",18),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"a",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showCopySuccess())}),t.O4$(),t.TgZ(10,"svg",20),t._UZ(11,"circle",21)(12,"circle",22)(13,"circle",23)(14,"line",24)(15,"line",25),t.qZA(),t.kcU(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(3),t.lnq("",t.lcZ(6,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',t.lcZ(7,10,"lang_auto_copy_link_bai_tap"),'" ',t.lcZ(8,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),t.xp6(4),t.Q6J("cdkCopyToClipboard",e.copyLinkHomeWorkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(18,14,"lang_auto_copy_link_bai_tap"))}}let wk=(()=>{class n extends st.Q{constructor(e){super(),this.timeService=e,this.isOpenSideNav=!0,this.backToLink="",this.obj={},this.studentLists=[],this.isNotTestedYet=!1,this.isMobile=this.commonService.isMobileOrTable()}copyLinkHomeWorkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-homework-result"]],inputs:{isOpenSideNav:"isOpenSideNav",backToLink:"backToLink",obj:"obj",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet"},features:[t.qOj],decls:5,vars:2,consts:[[1,"box","mt-2","relative"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],["isNotTestedYetTmp",""],[1,"scrollable-content","flex","items-center"],[3,"ngTemplateOutlet"],[1,"azt-student-list","scrollable-content",2,"height","95vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"mt-4","p-2"],[1,"grid","grid-cols-12","gap-3","sm:gap-6",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[4,"ngIf","ngIfElse"],["answerIdNull",""],["azt-track-service","student-homework-result-p_58RoCuYW9",3,"routerLink","queryParams"],[3,"student"],[1,"text-center","mt-5","mx-auto",2,"max-width","28rem"],[1,"text-lg"],[1,"mt-2","mx-auto"],["azt-track-service","student-homework-result-GcOiOvgvvW2",1,"mt-2","btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,mk,2,1,"div",1),t.YNc(2,bk,6,2,"div",2),t.qZA(),t.YNc(3,yk,19,16,"ng-template",null,3,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!i.isNotTestedYet))},dependencies:[w.rH,E.mk,E.sg,E.O5,E.tP,Fo.i3,P.KC,_k,_t.mp,_t.bT],encapsulation:2}),n})();function kk(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",23)(1,"span",24),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.homeworkResultFilterService.totalCustomFilter)}}function Ck(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",27),t._uU(3),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.homeworkResultFilterService.totalCustomFilter)}}function Tk(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",25),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,Ck,4,1,"span",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_testted_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.homeworkResultFilterService.totalCustomFilter>0)}}let Ak=(()=>{class n extends st.Q{constructor(e){super(),this.homeworkResultFilterService=e,this.changeFilterEvent=new t.vpe}changeFilter(){this.homeworkResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.homeworkResultFilterService.filterObj)}clearFilter(){this.homeworkResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tm))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-IuO864aLwuv","for","isSubmitted",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isSubmitted","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-up7nJngmzVG","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-UMBRazW55_8","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-ZcOfEctFCTF","for","mustReSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","mustReSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-QejPhqaKsKg",3,"click"],["azt-track-service","filter-menu-e-_PwZJaZjq",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,kk,3,1,"span",3),t.YNc(4,Tk,4,4,"span",4),t.qZA(),t.kcU(),t.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",10)(14,"input",11),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isSubmitted=!i.homeworkResultFilterService.filterObj.isSubmitted,i.changeFilter()}),t.qZA()()()(),t.TgZ(15,"li")(16,"label",12),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(17),t.ALo(18,"mytranslate"),t.TgZ(19,"div",10)(20,"input",13),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isNotSubmit=!i.homeworkResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),t.qZA()()()(),t.TgZ(21,"li")(22,"label",14),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(23),t.ALo(24,"mytranslate"),t.TgZ(25,"div",10)(26,"input",15),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isMarked=!i.homeworkResultFilterService.filterObj.isMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(27,"li")(28,"label",16),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"div",10)(32,"input",17),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.mustReSubmit=!i.homeworkResultFilterService.filterObj.mustReSubmit,i.changeFilter()}),t.qZA()()()(),t.TgZ(33,"li"),t._UZ(34,"hr",18),t.qZA(),t.TgZ(35,"li")(36,"div",19)(37,"button",20),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"div",21),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(41,"button",22),t.NdJ("click",function(){return i.clearFilter()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA()()()()()()()),2&e){const o=t.MAs(6);t.Q6J("matMenuTriggerFor",o),t.xp6(3),t.Q6J("ngIf",i.homeworkResultFilterService.totalCustomFilter>0),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(12,13,"lang_homework_homework_score_list_sort_student_not_marking")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isSubmitted),t.xp6(3),t.hij(" ",t.lcZ(18,15,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isNotSubmit),t.xp6(3),t.hij(" ",t.lcZ(24,17,"lang_homework_homework_score_list_sort_mark")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(30,19,"lang_homework_homework_score_list_sort_student_resubmit")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.mustReSubmit),t.xp6(6),t.Oqu(t.lcZ(39,21,"lang_buttom_close")),t.xp6(4),t.Oqu(t.lcZ(43,23,"lang_buttom_delete"))}},dependencies:[E.O5,ke.VK,ke.p6,_t.bT],encapsulation:2}),n})();const Sk=["drawer"];function Ok(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function Ek(n,a){if(1&n&&(t.TgZ(0,"div",36)(1,"span"),t.O4$(),t.TgZ(2,"svg",37),t._UZ(3,"circle",38)(4,"line",39)(5,"line",40),t.qZA()(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(7),t.AsE("",t.lcZ(8,2,"lang_homework_homework_score_list_not_search_data"),"! ",t.lcZ(9,4,"lang_core_not_found_classroom_or_homework"==e.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function Mk(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",60),t._UZ(3,"rect",73)(4,"path",74)(5,"path",75),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function Ik(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",76),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",60),t._UZ(3,"rect",73)(4,"path",74)(5,"path",77),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function Lk(n,a){1&n&&(t.TgZ(0,"div",78)(1,"div",79)(2,"p",80),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function Zk(n,a){if(1&n&&t._UZ(0,"app-student-homework-result",81),2&n){const e=t.oxw(4);t.Q6J("backToLink",e.backToLink)("studentLists",e.studentHaveSortAndSearchByNameObjs)("isNotTestedYet",0==e.rawStudentObjs.length)("isOpenSideNav",e.isOpenSideNav)("obj",e.homeworkObj)}}const Pk=function(n,a){return{"w-85":n,"w-30":a}},Nk=function(n){return{"ml-5":n}},Dk=function(n){return{"px-0":n}},jk=function(n){return[n]};function qk(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-drawer-container",41)(1,"mat-drawer",42,43),t.NdJ("closedStart",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changeStatusNav())}),t.TgZ(3,"ng-scrollbar",44),t._UZ(4,"menu-homework",45),t.qZA()(),t.TgZ(5,"mat-drawer-content")(6,"div",46)(7,"div",47),t.YNc(8,Mk,6,3,"button",48),t.YNc(9,Ik,6,3,"button",49),t.TgZ(10,"div",50)(11,"div",51)(12,"form",28)(13,"input",52),t.NdJ("keyup.enter",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.search())}),t.ALo(14,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(15,"svg",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.search())}),t._UZ(16,"circle",54)(17,"line",55),t.qZA()()(),t.kcU(),t.TgZ(18,"div",56)(19,"testbank-homework-result-filter-menu",57),t.NdJ("changeFilterEvent",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.changeFilterEvent())}),t.qZA()(),t.TgZ(20,"div",58)(21,"button",59),t.O4$(),t.TgZ(22,"svg",60),t._UZ(23,"line",61)(24,"line",62)(25,"line",63),t.qZA()()()()(),t.kcU(),t.TgZ(26,"div",64)(27,"div",65)(28,"div",66)(29,"p",67),t._uU(30),t.ALo(31,"mytranslate"),t.TgZ(32,"a",68),t.ALo(33,"mylocalize"),t._uU(34),t.qZA()()()(),t.YNc(35,Lk,5,3,"div",69),t.YNc(36,Zk,1,5,"ng-template",null,70,t.W1O),t.qZA()(),t._UZ(38,"app-excel-export",71),t.qZA()()}if(2&n){const e=t.MAs(37),i=t.oxw(3),o=t.MAs(5);t.Q6J("hasBackdrop",i.hasBackdrop),t.xp6(1),t.s9C("opened",i.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(28,Pk,i.isMobile,!i.isMobile))("mode",i.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("initData",i.initDataHomework),t.xp6(2),t.Q6J("ngClass",t.VKq(31,Nk,!i.isMobile&&i.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!i.isOpenSideNav||i.isMobile),t.xp6(1),t.Q6J("ngIf",i.isOpenSideNav&&!i.isMobile),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.s9C("placeholder",t.lcZ(14,22,"lang_homework_homework_score_list_search")),t.xp6(8),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("ngClass",t.VKq(33,Dk,i.isMobile||!i.isOpenSideNav)),t.xp6(4),t.hij("",t.lcZ(31,24,"lang_homework_homework_score_list_list_submit_class"),": "),t.xp6(2),t.Q6J("routerLink",t.VKq(35,jk,t.lcZ(33,26,"/admin/student/class-details/"+i.classroomId))),t.xp6(2),t.AsE(" ",i.classroomObj.name," (",(null==i.initDataHomework.homeworkObj?null:i.initDataHomework.homeworkObj.count)+"/"+(null==i.initDataHomework.studentObjs?null:i.initDataHomework.studentObjs.length),") "),t.xp6(1),t.Q6J("ngIf",0!=i.rawStudentObjs.length&&0==i.studentHaveSortAndSearchByNameObjs.length)("ngIfElse",e),t.xp6(3),t.Q6J("studentLists",i.studentHaveSortAndSearchByNameObjs)("homeworkObj",i.homeworkObj)("tableType","homework")}}function Fk(n,a){1&n&&t._UZ(0,"div",82)}function Qk(n,a){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"azt-export-docx-loading-box",31),t.TgZ(2,"div",32),t.YNc(3,Ek,10,6,"div",33),t.YNc(4,qk,39,37,"mat-drawer-container",34),t.qZA(),t.YNc(5,Fk,1,0,"div",35),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("msg",e.exportResultService.keyLoading)("show",e.exportResultService.isLoading)("percent",e.exportResultService.percent),t.xp6(2),t.Q6J("ngIf",""!=e.errorMessage),t.xp6(1),t.Q6J("ngIf",""==e.errorMessage),t.xp6(1),t.Q6J("ngIf",1==e.isMobile)}}function Uk(n,a){if(1&n&&t.YNc(0,Qk,6,6,"div",30),2&n){const e=t.oxw();t.Q6J("ngIf",e.homeworkObj)}}let Bk=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p){super(),this.dialog=e,this.activeRoute=i,this.fb=o,this.answerService=s,this.zipDataService=r,this.sortService=l,this.browserStorageService=c,this.examFilterService=u,this.exportResultService=d,this.homeworkResultFilterService=m,this.gaService=p,this.form=new h.cw({}),this.backToLink="",this.paramBackToLink="",this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classroomId=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.rawStudentObjs=[],this.studentHaveSortAndSearchByNameObjs=[],this.homeworkObj={},this.classroomObj={},this.initDataHomework={},this.errorMessage="",this.sortByStorageKey="homework_list_sort_by"}toggleDrawer(){var e;null===(e=this.drawer)||void 0===e||e.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav(),this.isMobile&&(document.body.style.overflow="auto")}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.isOpenSideNav)}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("homework");this.isOpenSideNav=!e||"close"!=e}else this.isOpenSideNav=!1}exportToExcel(e){setTimeout(()=>{var i;null===(i=document.getElementById("table_"+e))||void 0===i||i.click()},1e3)}exportToPDF(){this.exportResultService.processHomeworks(Number(this.homeworkId),this.homeworkHashId).then(()=>{}).catch(e=>{this.commonService.snackError("string"==typeof e?e:e.message)})}_isSortedByTimeDesc(){return!!this.browserStorageService.getSimpleStorage(this.sortByStorageKey)}_sortStudentObjs(e){var i,o=this._isSortedByTimeDesc(),s=null!==(i=this.classroomObj.sortType)&&void 0!==i?i:0;return o?this.sortService.sortTimeDESC(e):0==s?this.sortService.sortFirstNameStudents(e):this.sortService.sortArrayByMultipleObjectKeyAsc(e,"pos","id")}_searchStudentObjsByName(e,i){var o;i=this.commonService.convertVietnameseToEnglish(i);var s=[];for(let l=0;l<e.length;l++)-1!=this.commonService.convertVietnameseToEnglish(null!==(o=e[l].fullName)&&void 0!==o?o:"").toLowerCase().indexOf(i.toLowerCase())&&s.push(e[l]);return s}_getStudentObjByFilterObj(e,i){return i.isSubmitted||i.isNotSubmit||i.isMarked||i.mustReSubmit?e.filter(s=>i.isSubmitted&&1==s.isSubmitted||i.isNotSubmit&&1==s.isNotSubmit||i.isMarked&&1==s.isMarked||i.mustReSubmit&&1==s.mustReSubmit):e}_viewDataBySortSearchAndFilter(){var e,i,o=this.homeworkResultFilterService.getDefaultFilterObj(),s=this._getStudentObjByFilterObj(this.rawStudentObjs,o),r=null===(i=null===(e=this.form.controls.searchContent.value)||void 0===e?void 0:e.toString())||void 0===i?void 0:i.trim();""!=r&&(s=this._searchStudentObjsByName(s,r)),s=this._sortStudentObjs(s),this.studentHaveSortAndSearchByNameObjs=s}search(){this.homeworkResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}sortByTimeDesc(){this.form.controls.sortByTimeDesc.value?this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,"sort_by_time_desc"):this.browserStorageService.removeSimpleStorage(this.sortByStorageKey),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){var e,i;null===(i=null===(e=this.form.controls)||void 0===e?void 0:e.searchContent)||void 0===i||i.setValue(""),this._viewDataBySortSearchAndFilter()}addStatusToStudentObjs(e){for(var i,o,s=[],r=0;r<e.length;r++)s.push(Object.assign(Object.assign({},e?.[r]),{index:r})),e[r].confirmedAt&&e[r].confirmedAt&&s[r].index==r?s[r].isMarked=!0:null==e[r].answer||e[r].confirmedAt||s[r].index!=r?null==e[r].answer&&null!=e[r].answerHistory&&s[r].index==r?s[r].mustReSubmit=!0:s[r].isNotSubmit=!0:s[r].isSubmitted=!0,s[r].answerFileObjs=this.castJsonToObj(null!==(o=null===(i=e[r].answer)||void 0===i?void 0:i.files)&&void 0!==o?o:"");return s}parseHomeworkData(e){var i=this.castObj(e);return i?.files&&(i.fileObjs=this.commonService.myParseJson(i.files)),this.zipDataService.convertHomeworkObj(i??{}),i}getData(){this.initStatusObj(),this.subscriptions.add(this.answerService.apiAnswerGetStudentsHomeworkGet(this.homeworkHashId).subscribe(e=>{var i,o,s,r,l,c,u,d,m,p,b,y,C;if(1==e.success){this.errorMessage="",this.zipDataService.convertStudentsHomeworkObj(null===(i=e.data)||void 0===i?void 0:i.studentObjs),this.initDataHomework=null!==(o=e.data)&&void 0!==o?o:{},this.rawStudentObjs=this.addStatusToStudentObjs(null!==(r=null===(s=e.data)||void 0===s?void 0:s.studentObjs)&&void 0!==r?r:new Array),this.homeworkObj=this.parseHomeworkData(null!==(c=null===(l=e.data)||void 0===l?void 0:l.homeworkObj)&&void 0!==c?c:{}),this.classroomObj=null!==(d=null===(u=e.data)||void 0===u?void 0:u.classroomObj)&&void 0!==d?d:{},this.classroomId=null!==(m=this.classroomObj.id)&&void 0!==m?m:0,this.categoryId=null!==(b=null===(p=this.homeworkObj)||void 0===p?void 0:p.categoryId)&&void 0!==b?b:0;let I=null!==(y=this.commonService.getMyQueryParam("backto"))&&void 0!==y?y:"";this.backToLink="/admin/testbank/homework-results-list/"+this.categoryId+"/"+this.homeworkId+"/"+this.homeworkHashId,I&&I.includes("shareType")&&(this.backToLink=`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}?backto=`+encodeURIComponent(I)),this.paramBackToLink=I||`/admin/testbank/document-management/1/${this.categoryId}/1`,this.changeFilterEvent(),this.successStatusObj()}else this.errorMessage=null!==(C=e.message)&&void 0!==C?C:"",this.errorStatusObj(this.errorMessage,!0)}))}ngOnInit(){this.getStatusSideNav(),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i,o;this.form=this.fb.group({searchContent:new h.NI("",h.kI.required),sortByTimeDesc:new h.NI(this._isSortedByTimeDesc())}),this.homeworkId=null!==(e=this.activeRoute.snapshot.paramMap.get("id"))&&void 0!==e?e:"",this.homeworkHashId=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"",this.categoryId=null!==(o=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==o?o:0,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),this.gaService.gaEvent("teacher_homework_score"),super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto",super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(w.gz),t.Y36(h.QS),t.Y36(A6.P),t.Y36(Ca.D),t.Y36(ea.K),t.Y36(wi.z),t.Y36(vl.Y),t.Y36(Gs.e),t.Y36(tm),t.Y36(Qu.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-homework-result-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(Sk,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:40,vars:13,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","homework-result-list-UoAbuGB6VrG",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","homework-result-list-PxxtOkbgmqm",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","homework-result-list-mTV5aEMDlSD","for","isSortByTimeDESC",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M11 5h10"],["d","M11 9h7"],["d","M11 13h4"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],[3,"formGroup"],["id","isSortByTimeDESC","type","checkbox","formControlName","sortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[4,"ngIf"],[3,"msg","show","percent"],[1,"azt-homework-result-list","container-fluid"],["class","intro-y col-span-11 alert alert-danger alert-dismissible show flex items-center mb-6",4,"ngIf"],["class","azt-drawer-container mt-5",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"intro-y","col-span-11","alert","alert-danger","alert-dismissible","show","flex","items-center","mb-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","info","data-lucide","info",1,"lucide","w-4","h-4","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",1,"scroll-menu-test",3,"visibility"],[3,"initData"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","homework-result-list-Ej_zMayVTN_","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","homework-result-list-hYOFjZmUAjh","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"search","mr-2"],["type","text","formControlName","searchContent",1,"form-control","border-transparent","bg-slate-100","dark:bg-darkmode-300","py-1","px-4","w-full","lg:w-64","box","pr-10",2,"border-radius","0.375rem",3,"placeholder","keyup.enter"],["azt-track-service","homework-result-list-44epYiQtrQC","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","search",1,"lucide","w-4","h-4","absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","content-zone","pr-0",3,"ngClass"],[1,"row","mt-2","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"mb-1","h6",2,"font-weight","400","font-size","14px"],["azt-track-service","homework-result-list-Fk1Yij7NXbZ",1,"clickable","link-stu",3,"routerLink"],["class","box-content py-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"studentLists","homeworkObj","tableType"],["azt-track-service","homework-result-list-Ej_zMayVTN_",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","homework-result-list-hYOFjZmUAjh",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2"],[1,"text-center","mt-3"],[1,"h4"],[3,"backToLink","studentLists","isNotTestedYet","isOpenSideNav","obj"],[1,"py-4"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Ok,1,0,"azt-loading-effect",1),t.YNc(2,Uk,1,1,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"ul",6)(8,"li")(9,"a",7),t.NdJ("click",function(){return i.exportToExcel("homework")}),t.O4$(),t.TgZ(10,"svg",8),t._UZ(11,"path",9)(12,"polyline",10)(13,"line",11),t.qZA(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(16,"li")(17,"a",12),t.NdJ("click",function(){return i.exportToPDF()}),t.O4$(),t.TgZ(18,"svg",13),t._UZ(19,"path",14)(20,"polyline",15)(21,"line",16)(22,"line",17)(23,"line",18),t.qZA(),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(26,"li")(27,"label",19),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(28,"span",20),t.O4$(),t.TgZ(29,"svg",21),t._UZ(30,"path",22)(31,"path",23)(32,"path",24)(33,"path",25)(34,"path",26),t.qZA(),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(37,"div",27)(38,"form",28)(39,"input",29),t.NdJ("change",function(){return i.sortByTimeDesc()}),t.qZA()()()()()()()()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.paramBackToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(13),t.hij(" ",t.lcZ(15,7,"lang_homework_homework_score_list_export_excel")," "),t.xp6(10),t.hij(" ",t.lcZ(25,9,"lang_homework_homework_score_list_export_pdf")," "),t.xp6(11),t.hij(" ",t.lcZ(36,11,"lang_testbank_testted_list_sort_time")," "),t.xp6(3),t.Q6J("formGroup",i.form)}},dependencies:[w.rH,E.mk,E.O5,ke.VK,ke.p6,li.jA,li.kh,li.LW,Le.gM,P.KC,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,xe.Q,Pe.M,Ws,Xe._,G6,tk,wk,Ak,_t.mp,_t.bT],encapsulation:2}),n})();function Rk(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function zk(n,a){if(1&n&&(t.TgZ(0,"div",22),t._UZ(1,"print-history-box",23),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("startStudentCode",e.startStudentCode)("examPrintInfoObj",e.examPrintInfoObj)}}const nm=function(n){return[n]};function Jk(n,a){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7),t.YNc(6,zk,2,4,"div",8),t.qZA(),t.TgZ(7,"div",9)(8,"div",10)(9,"a",11),t.ALo(10,"mylocalize"),t.O4$(),t.TgZ(11,"svg",12),t._UZ(12,"path",13)(13,"polyline",14)(14,"path",15)(15,"path",16)(16,"path",17)(17,"path",18),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(20,"div",19)(21,"a",20),t.ALo(22,"mylocalize"),t.O4$(),t.TgZ(23,"svg",12),t._UZ(24,"path",21),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw(2);let i,o;t.xp6(3),t.hij(" ",t.lcZ(4,6,"lang_auto_tao_file_thanh_cong")," \u{1f44f} "),t.xp6(3),t.Q6J("ngIf",e.offlineExamObj&&(null==e.offlineExamObj?null:e.offlineExamObj.hashId)),t.xp6(3),t.Q6J("routerLink",t.VKq(16,nm,t.lcZ(10,8,"/admin/testbank/exam-results-list/"+(null!==(i=e.examObj.categoryId)&&void 0!==i?i:0)+"/"+e.examObj.id+"/0"))),t.xp6(9),t.hij(" ",t.lcZ(19,10,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(18,nm,t.lcZ(22,12,"/admin/testbank/document-management/0/"+(e.backToLink.includes("shareType")?0:null!==(o=e.examObj.categoryId)&&void 0!==o?o:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(26,14,"lang_auto_ve_trang_quan_ly_file")," ")}}function Hk(n,a){if(1&n&&t.YNc(0,Jk,27,20,"div",3),2&n){const e=t.oxw();t.Q6J("ngIf",e.examObj)}}let $k=(()=>{class n extends st.Q{constructor(e,i){super(),this.documentConfigService=e,this.activeRoute=i,this.backToLink="",this.offlineHashId="",this.startStudentCode=1,this.examPrintInfoObj={}}redirectToDocumentManager(){var e,i;this.myNavigation(`/admin/testbank/document-management/0/${null!==(i=null===(e=this.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/1`)}redirectToTestResultList(){var e,i,o;this.myNavigation(`/admin/testbank/exam-results-list/${null!==(i=null===(e=this.examObj)||void 0===e?void 0:e.categoryId)&&void 0!==i?i:0}/${null===(o=this.examObj)||void 0===o?void 0:o.id}/0`)}getExamInfo(e,i){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e,i).subscribe(o=>{var s,r,l;1==o.success?(!(null===(s=o.data)||void 0===s)&&s.examObj&&o.data.offlineExamObj&&(this.examObj=o.data.examObj,this.offlineExamObj=o.data.offlineExamObj,this.examPrintInfoObj=null!==(r=o.data.examPrintInfoObj)&&void 0!==r?r:{}),this.successStatusObj()):this.errorStatusObj(null!==(l=o.message)&&void 0!==l?l:"",!0)}))}ngOnInit(){var e,i,o;let s=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",r=null!==(i=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==i?i:"";this.offlineHashId=null!==(o=this.commonService.getMyParam(this.activeRoute,"offline_hash_id"))&&void 0!==o?o:"",this.getExamInfo(s,this.offlineHashId);let l=this.commonService.getMyQueryParam("backto");this.backToLink=l??`/admin/testbank/document-management/0/${r}/1`,this.commonService.translateMetaData({title:"lang_cms_download_print_data_title",description:"lang_cms_download_print_data_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.Cq),t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-download-file-print"]],features:[t._Bn([E.uU]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","intro-y action-document mx-auto mt-8","style","max-width: 700px",4,"ngIf"],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],[1,"action-heading","mb-4"],[1,"text-lg","font-medium","mb-1"],[1,"action-offline","mt-5"],["class","box mt-3 p-5",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","download-file-print-KZ0pTIEXewD",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","download-file-print-O-UfiBIC5BM",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mt-3","p-5"],[3,"examObj","offlineExamObj","startStudentCode","examPrintInfoObj"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,Rk,1,0,"azt-loading-effect",1),t.YNc(2,Hk,1,1,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[w.rH,E.O5,xe.Q,Xe._,O_,_t.mp,_t.bT],styles:[".app[_ngcontent-%COMP%]{margin-top:100px}.app-block[_ngcontent-%COMP%]{max-width:750px;margin:0 auto}.app-head[_ngcontent-%COMP%]{text-align:center}.app-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:0}.app-main[_ngcontent-%COMP%]{margin-top:40px}.app-copy[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;width:630px;margin:0 auto}.btn-export[_ngcontent-%COMP%]{transition:all .5s;background:#2361ae}.btn-export[_ngcontent-%COMP%]:hover:enabled{background:#122e50}.app-content[_ngcontent-%COMP%]{border:none;outline:none;background:#fff;border-radius:5px;box-shadow:#00000012 0 0 5px;height:70px;box-sizing:border-box;padding:15px 20px;font-size:18px;color:#2361ae;width:100%;display:flex;align-items:center}.app-content-icon[_ngcontent-%COMP%]{margin-right:15px}.app-main-bottom[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;max-width:630px}.btn-text[_ngcontent-%COMP%]{border:none;text-transform:uppercase;background:transparent;color:#2361ae}.app-footer[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:100px;text-align:center}.app-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#babbbc;font-size:18px}.btn-copy[_ngcontent-%COMP%]{position:absolute;display:flex;background:#2361ae;align-items:center;right:0;height:100%;width:134px;border:none;padding:22px 23px;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;transition:all .5s}.btn-copy[_ngcontent-%COMP%]:hover{background:#184479}.btn-copy[_ngcontent-%COMP%]   .text-copy[_ngcontent-%COMP%]{margin-left:15px;text-transform:initial;font-size:16px}.btn-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px}.truncate[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 768px){.app-copy[_ngcontent-%COMP%]{max-width:630px;width:auto}.btn-copy[_ngcontent-%COMP%]{right:0;width:auto}.app-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:140px}}"]}),n})(),Kk=(()=>{class n extends st.Q{redirectToDonate(){this.commonService.myNavigation("/admin/testbank/donate")}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank"]],features:[t.qOj],decls:2,vars:0,consts:[["id","testbank-layout"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[w.lC],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}.btn-donate[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;font-size:14px;color:#3c8dbc;display:flex;justify-content:center;align-items:center;margin-right:15px;transition:all .5s}.btn-donate[_ngcontent-%COMP%]:hover{color:#204e69}.btn-donate[_ngcontent-%COMP%]:hover   .donate-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}.donate-icon[_ngcontent-%COMP%]{margin-right:5px;animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-14px,0) scaleY(1.1) rotate(-15deg)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-7px,0) scaleY(1.05) rotate(15deg)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95) rotate(0)}90%{transform:translate3d(0,-2px,0) scaleY(1.02) rotate(0)}}@media screen and (max-width: 768px){.donate-title[_ngcontent-%COMP%]{display:none}.btn-donate[_ngcontent-%COMP%]{margin-right:0}}"]}),n})();var Yk=A(57851),im=A(61135),om=A(56451);class Cl{constructor(a,e,i,o,s,r=1,l=!1,c=!1,u,d){this.id=a,this.pr=e,this.type=i,this.shareType=o,this.item=s,this.level=r,this.expandable=l,this.isLoading=c,this.prNode=u,this.isLeaf=d}}let Gk=(()=>{class n{constructor(e,i){this.testMarketQuestionService=e,this.fb=i,this.dataMap=new Map,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.formSchoolInfo=new h.cw({}),this.formSchoolInfo=this.fb.group({schoolLevel:new h.NI("0"),schoolSubject:new h.NI("0")})}initialData(){return new Promise(e=>{this.testMarketQuestionService.apiTestMarketQuestionsSubjectLevelsGet().subscribe(i=>{var o,s,r,l;1==i.success?(this.schoolLevelObjs=null!==(s=null===(o=i.data)||void 0===o?void 0:o.schoolLevelObjs)&&void 0!==s?s:[],this.schoolSubjectObjs=null!==(l=null===(r=i.data)||void 0===r?void 0:r.schoolSubjectObjs)&&void 0!==l?l:[],this.formSchoolInfo.controls.schoolLevel.setValue("12"),this.formSchoolInfo.controls.schoolSubject.setValue("40"),this.apiLeechData(void 0).then(c=>{e(c.map(u=>new Cl(u.id,u.pr,u.type,void 0,u.name,0,!u.isLeaf,!1,void 0,u.isLeaf)))}).catch(()=>{e([])})):e([])})})}isExpandable(e){return this.dataMap.has(e)}apiLeechData(e){return new Promise(i=>{const o=[];this.testMarketQuestionService.apiTestMarketQuestionsKnowledgeGet(Number(this.formSchoolInfo.controls.schoolLevel.value),Number(this.formSchoolInfo.controls.schoolSubject.value),e).subscribe(s=>{1===s.success&&s.data&&(s.data.objs||[]).forEach(l=>{var c,u;o.push({pr:e??0,id:null!==(c=l.id)&&void 0!==c?c:0,name:l.name?l.name:"",type:"knowledge",isLeaf:null!==(u=l.isLeaf)&&void 0!==u&&u})}),i(o)})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Bt.Q_),t.LFG(h.qu))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wk{constructor(a,e){this._treeControl=a,this._database=e,this.dataChange=new im.X([])}get data(){return this.dataChange.value}set data(a){this._treeControl.dataNodes=a,this.dataChange.next(a)}connect(a){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,om.T)(a.viewChange,this.dataChange).pipe((0,ss.U)(()=>this.data))}getNode(a){let e=this.data.filter(i=>i.id==a);return e&&e.length>0?e[0]:null}disconnect(a){}handleTreeControl(a){a.added&&a.added.forEach(e=>this.toggleNode(e,!0)),a.removed&&a.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(a,e){if("knowledge"===a.type){const i=this.data.indexOf(a);if(e)a.isLoading=!0,this._database.apiLeechData(a.id).then(o=>{const s=o.map(r=>new Cl(r.id,r.pr,r.type,void 0,r.name,a.level+1,!r.isLeaf,!1,a,r.isLeaf));this.data.splice(i+1,0,...s),this.dataChange.next(this.data),a.isLoading=!1});else{let o=0;for(let s=i+1;s<this.data.length&&this.data[s].level>a.level;s++,o++);this.data.splice(i+1,o),this.dataChange.next(this.data)}}}}let Vk=(()=>{class n{constructor(e){this.documentService=e,this.dataMap=new Map}initialData(){return new Promise(e=>{this.apiLeechData(0).then(i=>{e(i.map(o=>new Cl(o.id,o.pr,o.type,o.shareType,o.name,0,"cate"===o.type,o.isLeaf)))})})}isExpandable(e){return this.dataMap.has(e)}apiLeechData(e,i){return new Promise(o=>{const s=[];this.documentService.apiDocumentsGet(e,void 0,i,void 0,void 0,1,1,-1).subscribe(r=>{1===r.success&&r.data&&((r.data.categoryObjs||[]).forEach(u=>{var d,m;s.push({pr:e,id:null!==(d=u.id)&&void 0!==d?d:0,name:null!==(m=u.name)&&void 0!==m?m:"",type:"cate",shareType:u.shareType,isLeaf:!1})}),(r.data.documentObjs||[]).forEach(u=>{var d,m;u.exam&&s.push({pr:e,id:null!==(d=u.exam.id)&&void 0!==d?d:0,name:null!==(m=u.exam.name)&&void 0!==m?m:"",type:"test",shareType:void 0,isLeaf:!0})})),o(s)})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Bt.Zg))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Xk{constructor(a,e){this._treeControl=a,this._database=e,this.dataChange=new im.X([])}get data(){return this.dataChange.value}set data(a){this._treeControl.dataNodes=a,this.dataChange.next(a)}connect(a){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,om.T)(a.viewChange,this.dataChange).pipe((0,ss.U)(()=>this.data))}disconnect(a){}handleTreeControl(a){a.added&&a.added.forEach(e=>this.toggleNode(e,!0)),a.removed&&a.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(a,e){if("cate"===a.type){const i=this.data.indexOf(a);if(e)a.isLoading=!0,this._database.apiLeechData(a.id,a.shareType).then(o=>{const s=o.map(r=>new Cl(r.id,r.pr,r.type,r.shareType,r.name,a.level+1,"cate"===r.type,!1,a));this.data.splice(i+1,0,...s),this.dataChange.next(this.data),a.isLoading=!1});else{let o=0;for(let s=i+1;s<this.data.length&&this.data[s].level>a.level;s++,o++);this.data.splice(i+1,o),this.dataChange.next(this.data)}}}}var Tl=A(35423);const tC=["tableMain"],eC=["popupConfirm"];function nC(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function iC(n,a){if(1&n&&(t.TgZ(0,"option",70),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("value",e.id)("selected",e.id==i.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function oC(n,a){if(1&n&&(t.TgZ(0,"option",70),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("value",e.id)("selected",e.id==i.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function aC(n,a){if(1&n&&(t.TgZ(0,"form",63)(1,"label",64),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"select",65)(5,"option",66),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.YNc(8,iC,3,5,"option",67),t.qZA(),t.TgZ(9,"label",68),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"select",69)(13,"option",66),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.YNc(16,oC,3,5,"option",67),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("formGroup",e.azotaKnowledgeDatabaseService.formSchoolInfo),t.xp6(2),t.hij(" ",t.lcZ(3,9,"lang_auto_lop_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij("",t.lcZ(7,11,"lang_auto_---chon_khoi"),"---"),t.xp6(2),t.Q6J("ngForOf",e.azotaKnowledgeDatabaseService.schoolLevelObjs),t.xp6(2),t.hij(" ",t.lcZ(11,13,"lang_auto_mon_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.azotaKnowledgeDatabaseService.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij("",t.lcZ(15,15,"lang_auto_---chon_mon"),"---"),t.xp6(2),t.Q6J("ngForOf",e.azotaKnowledgeDatabaseService.schoolSubjectObjs)}}function sC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",71),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.switchContentAction(s))}),t._uU(2),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.name)}}function rC(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",77),t._UZ(2,"path",78),t.qZA()())}function lC(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",79),t._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),t.qZA()())}function cC(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",83),t._UZ(2,"path",80)(3,"polyline",81)(4,"line",84)(5,"line",85)(6,"line",86),t.qZA()())}const am=function(n){return{paddingLeft:n,paddingBottom:"10px"}},sm=function(n,a){return{"tb-active":n,"d-none":a}};function uC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",72),t.ALo(1,"compareString"),t._UZ(2,"button",73),t.TgZ(3,"div",74),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(s))}),t.YNc(4,rC,3,0,"span",75),t.YNc(5,lC,5,0,"span",75),t.YNc(6,cC,7,0,"span",75),t.TgZ(7,"span",76),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(11,am,15*e.level+"px"))("ngClass",t.WLB(13,sm,i.exitsTables.includes(e.id),!t.xi3(1,6,e.item,i.filterContent))),t.xp6(4),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type),t.xp6(1),t.Q6J("ngIf","knowledge"===e.type&&e.isLeaf),t.xp6(2),t.hij(" ",t.lcZ(9,9,e.item)," ")}}function dC(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",77),t._UZ(2,"path",78),t.qZA()())}function _C(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",91),t._UZ(2,"path",80)(3,"polyline",81)(4,"path",82),t.qZA()())}function mC(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",92)(1,"g",93)(2,"g",94),t._UZ(3,"circle",95),t.TgZ(4,"path",96),t._UZ(5,"animateTransform",97),t.qZA()()()())}function pC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",72),t.ALo(1,"compareString"),t.TgZ(2,"button",87)(3,"mat-icon",88),t._uU(4),t.qZA()(),t.TgZ(5,"div",89),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(null==r.tableEditor?null:r.tableEditor.pushNode(s))}),t.YNc(6,dC,3,0,"span",75),t.YNc(7,_C,5,0,"span",75),t.TgZ(8,"span",76),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,mC,6,0,"svg",90),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(14,am,15*e.level+"px"))("ngClass",t.WLB(16,sm,i.exitsTables.includes(e.id),!t.xi3(1,9,e.item,i.filterContent))),t.xp6(2),t.Q6J("disabled",e.isLoading),t.uIk("aria-label","Toggle "+e.item),t.xp6(2),t.hij(" ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(2),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type||"knowledge"===e.type&&e.isLeaf),t.xp6(2),t.hij(" ",t.lcZ(10,12,e.item)," "),t.xp6(2),t.Q6J("ngIf",e.isLoading)}}function hC(n,a){if(1&n&&(t.TgZ(0,"div",98)(1,"div",99)(2,"div",100)(3,"span"),t._UZ(4,"span",101),t._uU(5,"\xa0"),t.qZA()(),t.TgZ(6,"div",102),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(7),t.Oqu(t.lcZ(8,1,e.logConfig.msg))}}const gC=function(n){return{"has-err":n}};function fC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",3),t.YNc(2,aC,17,17,"form",4),t.qZA(),t.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"form",8),t._UZ(7,"input",9),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"button",10),t._uU(10),t.ALo(11,"mytranslate"),t.TgZ(12,"mat-icon"),t._uU(13,"expand_more"),t.qZA()(),t.TgZ(14,"mat-menu",null,11)(16,"div",12)(17,"ng-scrollbar",13)(18,"ul",14)(19,"li")(20,"a",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.createNew())}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"li"),t._UZ(24,"hr",16),t.qZA(),t.YNc(25,sC,3,1,"li",17),t.qZA()()()()()(),t.TgZ(26,"div",18)(27,"div",19)(28,"div",20)(29,"ng-scrollbar",13)(30,"mat-tree",21),t.YNc(31,uC,10,16,"mat-tree-node",22),t.YNc(32,pC,12,19,"mat-tree-node",23),t.qZA()()(),t.TgZ(33,"div",24)(34,"input",25),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.filterContent=o)}),t.ALo(35,"mytranslate"),t.qZA()()(),t.TgZ(36,"div",26)(37,"div",27,28)(39,"table",29)(40,"thead",30)(41,"tr",31)(42,"td",32),t._uU(43),t.ALo(44,"mytranslate"),t.qZA(),t.TgZ(45,"td",32),t._uU(46),t.ALo(47,"mytranslate"),t.qZA(),t.TgZ(48,"td",33),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"td",34),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"td",35),t._uU(55),t.ALo(56,"mytranslate"),t.qZA(),t.TgZ(57,"td",36),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.TgZ(60,"td",32),t._uU(61,"%"),t._UZ(62,"br"),t._uU(63),t.ALo(64,"mytranslate"),t._UZ(65,"br"),t._uU(66),t.ALo(67,"mytranslate"),t.qZA()(),t.TgZ(68,"tr",31)(69,"td",37),t._uU(70),t.ALo(71,"mytranslate"),t.qZA(),t.TgZ(72,"td",37),t._uU(73),t.ALo(74,"mytranslate"),t.qZA(),t.TgZ(75,"td",37),t._uU(76),t.ALo(77,"mytranslate"),t.qZA(),t.TgZ(78,"td",37),t._uU(79),t.ALo(80,"mytranslate"),t.qZA(),t.TgZ(81,"td",37),t._uU(82),t.ALo(83,"mytranslate"),t.qZA(),t.TgZ(84,"td",38),t._uU(85),t.ALo(86,"mytranslate"),t.qZA()(),t.TgZ(87,"tr",31)(88,"td"),t._uU(89),t.ALo(90,"mytranslate"),t.qZA(),t.TgZ(91,"td"),t._uU(92),t.ALo(93,"mytranslate"),t.qZA(),t.TgZ(94,"td"),t._uU(95),t.ALo(96,"mytranslate"),t.qZA(),t.TgZ(97,"td"),t._uU(98),t.ALo(99,"mytranslate"),t.qZA(),t.TgZ(100,"td"),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"td"),t._uU(104),t.ALo(105,"mytranslate"),t.qZA(),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"mytranslate"),t.qZA(),t.TgZ(109,"td"),t._uU(110),t.ALo(111,"mytranslate"),t.qZA(),t.TgZ(112,"td"),t._uU(113),t.ALo(114,"mytranslate"),t.qZA(),t.TgZ(115,"td"),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()()(),t.TgZ(118,"tbody")(119,"tr",39)(120,"td",40),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()()(),t.TgZ(123,"tfoot",30)(124,"tr",41)(125,"td",42),t._uU(126),t.ALo(127,"mytranslate"),t.qZA(),t._UZ(128,"td")(129,"td")(130,"td")(131,"td")(132,"td")(133,"td")(134,"td")(135,"td")(136,"td")(137,"td")(138,"td")(139,"td")(140,"td"),t.qZA()()(),t.TgZ(141,"div",43),t._uU(142),t.ALo(143,"mytranslate"),t._UZ(144,"br"),t._uU(145),t.ALo(146,"mytranslate"),t._UZ(147,"br"),t._uU(148),t.ALo(149,"mytranslate"),t.TgZ(150,"a",44),t._uU(151),t.ALo(152,"mytranslate"),t.qZA(),t._UZ(153,"br"),t._uU(154),t.ALo(155,"mytranslate"),t._UZ(156,"br"),t.qZA(),t.TgZ(157,"div",45)(158,"li",46),t.O4$(),t.TgZ(159,"svg",47),t._UZ(160,"path",48)(161,"path",49)(162,"path",50)(163,"path",51)(164,"path",52)(165,"path",53),t.qZA(),t.kcU(),t.TgZ(166,"span",54),t._uU(167),t.ALo(168,"mytranslate"),t.qZA()(),t.TgZ(169,"li",55),t.O4$(),t.TgZ(170,"svg",56),t._UZ(171,"path",57)(172,"path",49)(173,"path",58)(174,"path",59)(175,"path",60),t.qZA(),t.kcU(),t.TgZ(176,"span",54),t._uU(177),t.ALo(178,"mytranslate"),t.qZA()()()()()(),t._UZ(179,"editor-confirm",null,61),t.YNc(181,hC,9,3,"div",62)}if(2&n){const e=t.MAs(15),i=t.oxw();t.xp6(2),t.Q6J("ngIf","azota"===i.selfRequestData),t.xp6(4),t.Q6J("formGroup",i.matrixTableForm),t.xp6(1),t.s9C("placeholder",t.lcZ(8,50,"lang_auto_nhap_ten_ma_tran")+"..."),t.Q6J("readonly",i.isDisableEditor)("ngClass",t.VKq(124,gC,i.checkName&&(!i.matrixTableForm.controls.blackSelectName.value||0===i.matrixTableForm.controls.blackSelectName.value.trim().length))),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(11,52,"lang_auto_danh_sach_da_tao")," "),t.xp6(7),t.Q6J("visibility","hover"),t.xp6(4),t.hij(" + ",t.lcZ(22,54,"lang_testbank_create_new_matrix")," "),t.xp6(4),t.Q6J("ngForOf",i.banks),t.xp6(4),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("dataSource",i.commonDataSourceProcess)("treeControl",i.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",i.hasChild),t.xp6(2),t.s9C("placeholder",t.lcZ(35,56,"lang_auto_loc_theo_ten")),t.Q6J("ngModel",i.filterContent),t.xp6(9),t.hij(" ",t.lcZ(44,58,"lang_auto_STT")," "),t.xp6(3),t.hij(" ",t.lcZ(47,60,"lang_auto_noi_dung_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(50,62,"lang_auto_don_vi_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(53,64,"lang_auto_cau_trong_de_minh_hoa")," "),t.xp6(3),t.hij(" ",t.lcZ(56,66,"lang_auto_muc_do_nhan_biet")," "),t.xp6(3),t.hij(" ",t.lcZ(59,68,"lang_auto_tong")," "),t.xp6(5),t.hij(" ",t.lcZ(64,70,"lang_auto_tong")," "),t.xp6(3),t.Oqu(t.lcZ(67,72,"lang_auto_diem")),t.xp6(4),t.hij(" ",t.lcZ(71,74,"lang_auto_nhan_biet")," "),t.xp6(3),t.Oqu(t.lcZ(74,76,"lang_auto_thong_hieu")),t.xp6(3),t.Oqu(t.lcZ(77,78,"lang_auto_van_dung")),t.xp6(3),t.Oqu(t.lcZ(80,80,"lang_auto_van_dung_cao")),t.xp6(3),t.Oqu(t.lcZ(83,82,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(86,84,"lang_auto_thoi_gian_phut")),t.xp6(4),t.Oqu(t.lcZ(90,86,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(93,88,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(96,90,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(99,92,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(102,94,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(105,96,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(108,98,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(111,100,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(114,102,"lang_auto_TN")),t.xp6(3),t.Oqu(t.lcZ(117,104,"lang_auto_TL")),t.xp6(5),t.hij(" ",t.lcZ(122,106,"lang_auto_chon_cac_noi_dung_kien_thuc_o_cay_thu_muc_ben_cac_de_them_vao_ma_tran")," "),t.xp6(5),t.hij(" ",t.lcZ(127,108,"lang_auto_tong")," "),t.xp6(16),t.hij(" * ",t.lcZ(143,110,"lang_auto_nhap_tl_vao_sau_so_luong_cau_can_lay_de_chi_lay_cau_tu_luan"),""),t.xp6(3),t.hij(" * ",t.lcZ(146,112,"lang_auto_viet_tat_ch_cau_hoi_tl_tu_luan_dot"),""),t.xp6(3),t.hij(" * ",t.lcZ(149,114,"lang_auto_ban_can_gan_nhan_muc_do_nhan_biet_cho_cac_cau_hoi_trong_dot")," "),t.xp6(3),t.hij(" ",t.lcZ(152,116,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.hij(" * ",t.lcZ(155,118,"lang_auto_nhap_vi_tri_trong_de_note")," "),t.xp6(13),t.Oqu(t.lcZ(168,120,"lang_auto_gop_cac_o_da_chon")),t.xp6(10),t.hij(" ",t.lcZ(178,122,"lang_auto_huy_gop_o_da_chon")," "),t.xp6(4),t.Q6J("ngIf",i.logConfig.status)}}let xC=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u){super(),this.userCategoriesDatabase=e,this.azotaKnowledgeDatabaseService=i,this.editorOutputDataService=o,this.activeRoute=s,this.examBankService=r,this.questionService=l,this.gzipHelper=c,this.fb=u,this.backToLink="",this.checkName=!1,this.cur_cateId=0,this.cur_bankId=0,this.exitsTables=[],this.banks=[],this.logConfig={},this.filterContent="",this.doneInitView=!1,this.doneGetRequest=!1,this.selfRequestData="user",this.isDisableEditor=!1,this.getLevel=d=>d.level,this.isExpandable=d=>d.expandable,this.hasChild=(d,m)=>m.expandable,this.treeControl=new Yk.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new Xk(this.treeControl,e),this.azotaKnowledgeDataSource=new Wk(this.treeControl,i),this.matrixTableForm=this.fb.group({blankSelectId:new h.NI(null),blackSelectName:new h.NI(null)})}switchContentAction(e){var i,o;let s=null!==(i=this.commonService.myTranslateInstant("lang_auto_xac_nhap_thay_the_noi_dung_ma_tran_da_chon"))&&void 0!==i?i:"";null===(o=this.popupConfirm)||void 0===o||o.startConfirm(s).then(r=>{r&&this.switchContent(e)})}switchContent(e){var i;let o=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=o,this.examBankService.apiExamBanksIdGet(null!==(i=e.id)&&void 0!==i?i:0).subscribe(s=>{var r,l,c,u;if(s.success&&s.data){let d=this.gzipHelper.resultContentSupport(null!==(r=s.data.content)&&void 0!==r?r:"");const m=this.commonService.castJsonToObj(d);m&&(this.matrixTableForm.controls.blankSelectId.setValue(s.data.id),this.matrixTableForm.controls.blackSelectName.setValue(s.data.name),this.setStatusDisable(null!==(l=!s.data.editable)&&void 0!==l&&l),null===(c=this.tableEditor)||void 0===c||c.resetAndPushList(m).then(()=>{this.logConfig.status=!1,this.logConfig.msg=void 0}))}else this.errorStatusObj(null!==(u=s.message)&&void 0!==u?u:"",!0),this.logConfig.status=!1,this.logConfig.msg=void 0})}setStatusDisable(e){var i;this.isDisableEditor=e,null===(i=this.tableEditor)||void 0===i||i.setDisable(this.isDisableEditor)}cancelAction(){var e;null===(e=this.popupConfirm)||void 0===e||e.startConfirm("lang_auto_confirm_destroy_content").then(i=>{i&&location.reload()})}actionRedirect(e){this.logConfig.status=!1,this.logConfig.msg=void 0,this.editorOutputDataService.setMatrixData({matrix:e,response:{id:Number(this.matrixTableForm.controls.blankSelectId.value),name:this.matrixTableForm.controls.blackSelectName.value,type:this.selfRequestData,editable:!this.isDisableEditor}}),window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+("azota"===this.selfRequestData?"?self=azota":"")}saveAction(){var e,i;const o=null===(e=this.tableEditor)||void 0===e?void 0:e.getResult();if(null!==(i=this.tableEditor)&&void 0!==i&&i.isErrSum)this.showErrorSnack("lang_auto_vui_long_nhap_tong_%_diem_khong_qua_100%");else if(this.tableEditor&&this.tableEditor.isErrNumPos)this.showErrorSnack("lang_auto_vui_long_nhap_vi_tri_cau_hoi_hop_le");else if("azota"===this.selfRequestData&&this.tableEditor&&this.tableEditor.getSumQuestion()>120)this.showErrorSnack("lang_auto_limit_matrix_bank_question");else if(o&&o.length>0&&this.matrixTableForm.controls.blackSelectName.value&&this.matrixTableForm.controls.blackSelectName.value.length>0)if(this.isDisableEditor)this.actionRedirect(o);else{let s=this.commonService.myTranslateInstant("lang_auto_dang_chuan_bi_cau_hoi_cho_ma_tran_vua_tao");this.logConfig.status=!0,this.logConfig.msg=s,this.matrixTableForm.controls.blankSelectId.value&&Number(this.matrixTableForm.controls.blankSelectId.value)>0?this.examBankService.apiExamBanksIdPut(Number(this.matrixTableForm.controls.blankSelectId.value),{name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(o)),type:this.typeRequestData}).subscribe(r=>{r&&1==r.success?this.actionRedirect(o):this.showErrorSnack("lang_auto_khong_the_thay_doi_ma_tran_de_thi")}):this.examBankService.apiExamBanksPost({name:this.matrixTableForm.controls.blackSelectName.value,content:this.gzipHelper.zipBigContent(JSON.stringify(o)),type:this.typeRequestData}).subscribe(r=>{r&&1==r.success?this.actionRedirect(o):this.showErrorSnack("lang_auto_khong_the_luu_ma_tran_de_thi")})}else o&&0!==o.length?(this.checkName=!0,this.showErrorSnack("lang_auto_vui_long_nhap_ten_ma_tran_de_thi")):this.showErrorSnack("lang_auto_khong_tim_thay_du_lieu_ma_tran")}initTableEditor(){var e;if(this.tableMain){const i=this.tableMain.nativeElement;this.tableEditor=new Ce(this.commonService,(r,l,c)=>{l?c&&this.showErrorSnack(r):this.showSuccessSnack(r)},this.questionService,i,i.firstElementChild,$e.generate({is_select_cell:!1}),r=>{this.exitsTables=[],r.forEach(l=>{this.exitsTables.push(l.obj.id)})});const s=this.editorOutputDataService.getMatrixData();s&&s.matrix.length>0&&s.response.type===this.selfRequestData&&(this.matrixTableForm.controls.blankSelectId.setValue(s.response.id),this.matrixTableForm.controls.blackSelectName.setValue(s.response.name),this.setStatusDisable(null!==(e=!s.response.editable)&&void 0!==e&&e),this.tableEditor.resetAndPushList(s.matrix)),this.doneInitView=!0,this.checkDataBeforeInitDone()}}checkDataBeforeInitDone(){if(this.doneInitView&&this.doneGetRequest&&this.banks.length>0&&this.matrixTableForm.controls.blackSelectName.value===this.banks[0].name&&(this.matrixTableForm.controls.blankSelectId.setValue(this.banks[0].id),this.matrixTableForm.controls.blackSelectName.setValue(this.banks[0].name)),0!==this.cur_bankId){const e=this.banks.find(i=>i.id===this.cur_bankId);e&&this.switchContent(e)}}createNew(){var e,i;let o=null!==(e=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_moi_ma_tran_de_thi"))&&void 0!==e?e:"";null===(i=this.popupConfirm)||void 0===i||i.startConfirm(o).then(s=>{var r;s&&(this.matrixTableForm.controls.blackSelectName.setValue(null),this.matrixTableForm.controls.blankSelectId.setValue(null),null===(r=this.tableEditor)||void 0===r||r.resetAndPushList([]))})}initData(){let e=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=e,this.commonDataSourceProcess._database.initialData().then(i=>{this.commonDataSourceProcess.data=i,this.examBankService.apiExamBanksGet(this.typeRequestData).subscribe(o=>{var s,r;o.success&&o.data?(this.banks=null!==(s=o.data.banks)&&void 0!==s?s:[],this.logConfig.status=!1,this.logConfig.msg=void 0,this.doneGetRequest=!0,this.checkDataBeforeInitDone()):this.errorStatusObj(null!==(r=o.message)&&void 0!==r?r:"",!0)})})}ngAfterViewInit(){this.initTableEditor()}ngOnInit(){super.ngOnInit(),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"cat_id","0")),this.selfRequestData=this.commonService.getMyParamOrDefault(this.activeRoute,"mode_name","user"),this.cur_bankId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"matrix_id","0"));let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+this.cur_cateId}),this.initData()}get commonDataSourceProcess(){return"user"===this.selfRequestData?this.userCategoriesDataSource:"azota"===this.selfRequestData?this.azotaKnowledgeDataSource:this.userCategoriesDataSource}get typeRequestData(){return"user"===this.selfRequestData?"matrix":"azota"===this.selfRequestData?"knowledge":"matrix"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Vk),t.Y36(Gk),t.Y36(Rn),t.Y36(w.gz),t.Y36(Bt.SP),t.Y36(Bt.aE),t.Y36(si.n),t.Y36(h.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mix-bank-template"]],viewQuery:function(e,i){if(1&e&&(t.Gf(tC,5,t.SBq),t.Gf(eC,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.tableMain=o.first),t.iGM(o=t.CRH())&&(i.popupConfirm=o.first)}},features:[t.qOj],decls:4,vars:4,consts:[[3,"headerBackTolink","showConfirmButton","handleCancel","handleConfirm"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"header-mix-bank"],["class","header-fx-item",3,"formGroup",4,"ngIf"],[1,"header-fx-item","d-block"],[1,"bank-name-block"],[1,"name-block"],[1,"input",3,"formGroup"],["formControlName","blackSelectName","type","text",1,"form-control",3,"readonly","placeholder","ngClass"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["historyMatrix","matMenu"],[1,"dropdown-menu","show","relative","w-56",2,"height","60vh"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content","mt-0"],["azt-track-service","mix-bank-template-qYcpBwTiaO",1,"dropdown-item","uppercase",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],[4,"ngFor","ngForOf"],[1,"main-mix-blank","bg-white","dark:bg-darkmode-400"],[1,"col-tree"],[1,"col-tree-main"],[2,"padding-right","10px",3,"dataSource","treeControl"],[3,"ngStyle","ngClass",4,"matTreeNodeDef"],[3,"ngStyle","ngClass",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"filler-node","bg-white","dark:bg-darkmode-400"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-table"],["id","table_main",1,"table-main"],["tableMain",""],["id","table__element"],[2,"color","#2a3545"],[1,"header-tb"],["rowspan","3"],["rowspan","3","colspan","2"],["rowspan","3","colspan","1"],["colspan","8"],["colspan","3"],["colspan","2"],["rowspan","2"],["id","tr__empty-length",1,"text-center","text-slate-500","dark:text-slate-200"],["colspan","17"],[1,"dis-item-tb"],["colspan","4",1,"text-center"],[1,"ins-info"],["azt-track-service","mix-bank-template-uenTko-_UV","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de","target","_blank",1,"text-primary"],["id","menu__excel_editor",1,"menu-excel"],["id","menu__excel_editor__merge",2,"display","none"],["width","25px","viewBox","0, 0, 2048, 2048","focusable","false"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 m 563 -615 v 1741 h -1741 v -1741 m 103 308 h 717 v -205 h -717 m 717 1536 v -205 h -717 v 205 m 1536 -205 h -717 v 205 h 717 m 0 -1229 h -1536 v 922 h 1536 m 0 -1229 h -717 v 205 h 717 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 154 1792 v -1638 h 1638 v 1638 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 1024 410 h -102 v -205 h 102 m 0 1536 h -102 v -205 h 102 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 1639 h 1536 v -1536 h -1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 410 v 1126 h -1741 v -1126 m 103 1024 h 1536 v -922 h -1536 z",2,"fill","rgba(30, 139, 205, 1)"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 z",2,"fill","rgba(30, 139, 205, 1)"],[1,"menu-content"],["id","menu__excel_editor__un_merge",2,"display","none"],["width","25px","viewBox","0,0,2048,2048","focusable","false"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 512 h 717 v -409 h -717 m 1229 1024 h 307 v -512 h -307 m -103 0 h -307 v 512 h 307 m -819 -512 h -307 v 512 h 307 m 102 0 h 308 v -512 h -308 m 308 1024 v -410 h -717 v 410 m 1536 -410 h -717 v 410 h 717 m 0 -1127 v -409 h -717 v 409 z"],["type","path","d","M 1024 1331 v 410 h -102 v -410 m 0 -614 v -512 h 102 v 512 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 1639 103 h -1536 v 1536 h 1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 614 v 717 h -1741 v -717 m 410 615 v -512 h -307 v 512 m 717 0 v -512 h -308 v 512 m 717 0 v -512 h -307 v 512 m 717 -512 h -307 v 512 h 307 z",2,"fill","rgba(30, 139, 205, 1)"],["popupConfirm",""],["class","loading-mess",4,"ngIf"],[1,"header-fx-item",3,"formGroup"],["for","",1,"mr-2","flex-none",2,"width","55px"],["formControlName","schoolLevel",1,"form-select","form-select-sm"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["for","",1,"ml-2","mr-2","flex-none",2,"width","55px"],["formControlName","schoolSubject",1,"form-select","form-select-sm"],[3,"value","selected"],["azt-track-service","mix-bank-template-8PSLx-wsAL",1,"dropdown-item",3,"click"],[3,"ngStyle","ngClass"],["mat-icon-button","","disabled",""],["azt-track-service","mix-bank-template-wg2qiwIfQ",1,"title-box",2,"cursor","pointer",3,"click"],[4,"ngIf"],[1,"text-matrix-title"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","mix-bank-template-dDNwOKdL6l",1,"title-box",2,"cursor","pointer",3,"click"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)","class","ml-2 flex-none w-4 h-4",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"ml-2","flex-none","w-4","h-4"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"text-msg"]],template:function(e,i){if(1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),t.YNc(1,nC,1,0,"azt-loading-effect",1),t.YNc(2,fC,182,126,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink)("showConfirmButton",!0),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.mk,E.sg,E.O5,E.PC,ro.RK,qe.Hw,ke.VK,ke.p6,Tl.fQ,Tl.eu,Tl.gi,Tl.uo,P.KC,h._Y,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.JL,h.On,h.sg,h.u,xe.Q,Pe.M,Ti,ul.Z,_t.bT,_t.ds],styles:['.header-mix-bank[_ngcontent-%COMP%]{padding:5px 20px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .bank-his-matrix[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;justify-content:center;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:10px}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .has-err[_ngcontent-%COMP%]{border:1px solid red!important}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;padding:5px 10px;border-radius:5px;margin-right:15px}.header-mix-bank[_ngcontent-%COMP%]   .header-fx-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-save[_ngcontent-%COMP%]{background-color:#2361ae;line-height:30px;margin-top:5px;text-transform:none}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2e8cff}.btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.btn-cancel[_ngcontent-%COMP%]{background-color:#d0d0d0;line-height:30px;margin-top:5px;text-transform:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#a3a3a3}.btn-cancel.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}  .main-mix-blank{width:100%;height:calc(100vh - 115px);display:flex}  .main-mix-blank .col-tree{position:relative;height:100%;overflow:hidden;width:25%;border-right:1px dotted #7f7f7f}  .main-mix-blank .col-tree-main{overflow:hidden;height:calc(100% - 54px)}  .main-mix-blank .col-tree .filler-node{position:sticky;bottom:0;padding:10px 0 10px 10px;border-top:1px dotted #e0e0e0}  .main-mix-blank .col-tree .filler-node input{width:100%;padding:5px 10px}  .main-mix-blank .col-tree mat-tree-node mat-icon{color:#37474f;width:30px}  .main-mix-blank .col-tree mat-tree-node string{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;cursor:pointer}  .main-mix-blank .col-tree mat-tree-node .icon--folder{color:#ff9800}  .main-mix-blank .col-tree mat-tree-node .icon--article{color:#2196f3}  .main-mix-blank .col-tree .tb-active mat-icon{color:#3f51b5}  .main-mix-blank .col-tree .tb-active span{color:#3f51b5}  .main-mix-blank .col-table{width:75%;margin:20px 0;padding:0 20px;overflow:auto}  .main-mix-blank .table-main{position:relative}  .main-mix-blank .table-main td,   .main-mix-blank .table-main th{box-shadow:1px 1px #000 inset;-webkit-user-select:none;user-select:none}  .main-mix-blank .table-main table{position:relative;border-right:1px solid #000;border-bottom:1px solid #000;width:100%}  .main-mix-blank .table-main table thead{position:sticky;top:0;z-index:2}  .main-mix-blank .table-main table tfoot{position:sticky;bottom:0;box-shadow:0 1px #000 inset}  .main-mix-blank .table-main td{padding:10px}  .main-mix-blank .table-main .note-edit-item-tb:before{position:absolute;z-index:3;width:-moz-fit-content;width:fit-content;display:block;background:#fff59d;padding:5px;border-radius:5px;color:#263238;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}  .main-mix-blank .table-main .note-edit-item-tb:focus-visible:before{content:attr(first-trans) ": " attr(num-tn) "; " attr(last-trans) ": " attr(num-tl) "";white-space:pre-wrap}  .main-mix-blank .table-main .warning-item:after,   .main-mix-blank .table-main .common-warning-item:after{content:"\\e000";position:absolute;font-family:Material Icons;color:#ff9800;font-size:12px;top:0;right:3px;opacity:.5}  .main-mix-blank .table-main .warning-item:hover:after,   .main-mix-blank .table-main .common-warning-item:after{cursor:pointer}  .main-mix-blank .table-main .common-warning-item:after{color:red;font-size:15px;top:2px}  .main-mix-blank .table-main .common-note-item:hover:before{content:attr(common-note-trans);position:absolute;background:#fff59d;z-index:3;color:#000;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));padding:5px;border-radius:5px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;display:block}  .main-mix-blank .table-main .wn-empty:hover:before{content:attr(empty-question-trans);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tn:hover:before{content:attr(over-question-trans-tn);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tl:hover:before{content:attr(over-question-trans-tl);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .edit-item-tb{text-align:center;position:relative}  .main-mix-blank .table-main .edit-item-tb:focus-visible{outline:2px solid #00279d;background-color:#fff;color:#000}  .main-mix-blank .table-main .header-tb{background-color:#c8e6c9;text-align:center;font-weight:600}  .main-mix-blank .table-main .header-tb td:hover{background-color:#c8e6c9}  .main-mix-blank .table-main .dis-item-tb{background-color:#cfd8dc;color:#2a3545}  .main-mix-blank .table-main .dis-item-tb td:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .dis-item-tb:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .text-center{text-align:center}  .main-mix-blank .table-main .no-background{background:#fff!important}  .main-mix-blank .table-main .no-background:hover{background:#fff!important}  .main-mix-blank .table-main table .select{background:#c7e5ff!important}  .main-mix-blank .table-main .menu-excel{display:none;width:-moz-fit-content;width:fit-content;background:#fff;border:1px solid #3f51b5;position:absolute;box-shadow:#00000059 0 5px 15px}  .main-mix-blank .table-main .menu-excel li{padding:10px;list-style:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer}  .main-mix-blank .table-main .menu-excel li:hover{background:rgba(200,230,201,.231372549)}  .main-mix-blank .table-main .menu-excel li svg{margin-right:10px}  .main-mix-blank .table-main .border-err{border:1px solid #f44336!important;outline:1px solid #f44336!important}  .main-mix-blank .table-main .tb-matrix-editor-trash-node{cursor:pointer;width:20px}  .main-mix-blank .table-main .tb-matrix-editor-trash-node:hover{color:#f44336}  .main-mix-blank .table-main thead td{font-weight:400}.header-mix-bank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{text-transform:none}.ins-info[_ngcontent-%COMP%]{padding-top:15px;font-style:italic}@media (max-width: 768px){.bank-name-block[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-bottom:5px}.main-mix-blank[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%!important}.col-tree[_ngcontent-%COMP%]{width:100%!important;height:50vh!important;padding:10px 10px 0;--tw-border-opacity: 1;border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity))}.col-tree[_ngcontent-%COMP%]   .filler-node[_ngcontent-%COMP%]{padding:5px!important}.col-table[_ngcontent-%COMP%]{width:calc(100vw - 20px)!important;padding-bottom:30px}}.text-matrix-title[_ngcontent-%COMP%]{cursor:pointer;text-align:justify}.d-none[_ngcontent-%COMP%]{display:none!important}@media (max-width: 640px){.d-block[_ngcontent-%COMP%]{display:block!important}.name-block[_ngcontent-%COMP%]{width:90vw}}']}),n})();function vC(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function bC(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t._UZ(5,"preview-offline-exam",6),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);let i;t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_dap_an_de_thi_offline")," "),t.xp6(3),t.Q6J("offlineExportObjs",e.offlineExportObjs)("type","normal")("hashId",null!==(i=e.offlineExportObjs[0].offlineMixQuestionHashId)&&void 0!==i?i:1)}}function yC(n,a){1&n&&(t.TgZ(0,"div",7)(1,"div",8),t.O4$(),t.TgZ(2,"svg",9),t._UZ(3,"path",10)(4,"path",11)(5,"path",12)(6,"path",13)(7,"path",14)(8,"path",15),t.qZA()(),t.kcU(),t.TgZ(9,"div",16),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()),2&n&&(t.xp6(10),t.hij(" ",t.lcZ(11,1,"lang_auto_khong_co_du_lieu_dap_an_de_thi")," "))}function wC(n,a){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,bC,6,6,"ng-container",0),t.YNc(2,yC,12,3,"ng-template",null,3,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",i.offlineExportObjs.length)("ngIfElse",e)}}let kC=(()=>{class n extends st.Q{constructor(e,i){super(),this.activeRoute=e,this.offlineExamExportService=i,this.offlineExportObjs=[],this.indexHashId=0}getData(){var e;this.initStatusObj();let i=null!==(e=this.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.subscriptions.add(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(i).subscribe(o=>{var s,r,l;1==o.success?(this.offlineExportObjs=null!==(r=null===(s=o.data)||void 0===s?void 0:s.objs)&&void 0!==r?r:[],this.successStatusObj()):this.errorStatusObj(null!==(l=o.message)&&void 0!==l?l:"",!0)}))}changeViewHashId(e){this.indexHashId=e}replace3DigitExamCode(e){for(var i=e.toString();i.length<3;)i="0"+i;return i}ngOnInit(){this.getData(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.qr))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-offline-answer-list"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-8","mx-auto",2,"max-width","1200px"],["noDataAnswer",""],[1,"font-medium","text-center"],[1,"mt-4"],[3,"offlineExportObjs","type","hashId"],[1,"empty-block","mt-10"],[1,"icon-empty","flex"],["width","87","height","102","viewBox","0 0 87 102","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M66.6719 13.9999L75.9738 81.8427L76.8095 88.649C77.0787 90.8417 75.5194 92.8374 73.3268 93.1066L14.7665 100.297C12.5739 100.566 10.5781 99.0069 10.3089 96.8142L1.29312 23.3867C1.1585 22.2904 1.93813 21.2925 3.03447 21.1579C3.0414 21.157 3.04832 21.1562 3.05526 21.1554L7.91363 20.6104M11.8422 20.1698L16.4292 19.6552Z","fill","white"],["d","M67.9103 13.8302C67.8165 13.1462 67.186 12.6678 66.5021 12.7615C65.8181 12.8553 65.3397 13.4858 65.4335 14.1697L67.9103 13.8302ZM75.9738 81.8427L77.2144 81.6903C77.2137 81.6845 77.213 81.6787 77.2122 81.6729L75.9738 81.8427ZM76.8095 88.649L78.0502 88.4967L76.8095 88.649ZM73.3268 93.1066L73.4791 94.3473L73.3268 93.1066ZM14.7665 100.297L14.9189 101.538L14.7665 100.297ZM10.3089 96.8142L11.5496 96.6619L10.3089 96.8142ZM3.05526 21.1554L3.1946 22.3976L3.05526 21.1554ZM8.05297 21.8527C8.73902 21.7757 9.23279 21.1572 9.15584 20.4711C9.07888 19.7851 8.46034 19.2913 7.77428 19.3682L8.05297 21.8527ZM11.7028 18.9276C11.0168 19.0045 10.523 19.6231 10.5999 20.3091C10.6769 20.9952 11.2954 21.4889 11.9815 21.412L11.7028 18.9276ZM16.5685 20.8974C17.2546 20.8205 17.7484 20.2019 17.6714 19.5159C17.5945 18.8298 16.9759 18.3361 16.2899 18.413L16.5685 20.8974ZM65.4335 14.1697L74.7354 82.0125L77.2122 81.6729L67.9103 13.8302L65.4335 14.1697ZM74.7331 81.995L75.5688 88.8013L78.0502 88.4967L77.2144 81.6903L74.7331 81.995ZM75.5688 88.8013C75.7539 90.3088 74.6819 91.6809 73.1744 91.866L73.4791 94.3473C76.357 93.994 78.4035 91.3745 78.0502 88.4967L75.5688 88.8013ZM73.1744 91.866L14.6142 99.0563L14.9189 101.538L73.4791 94.3473L73.1744 91.866ZM14.6142 99.0563C13.1067 99.2414 11.7347 98.1694 11.5496 96.6619L9.0682 96.9666C9.42156 99.8445 12.041 101.891 14.9189 101.538L14.6142 99.0563ZM11.5496 96.6619L2.5338 23.2344L0.0524334 23.539L9.0682 96.9666L11.5496 96.6619ZM2.5338 23.2344C2.48332 22.8232 2.77568 22.449 3.18681 22.3986L2.88213 19.9172C1.10059 20.1359 -0.166313 21.7575 0.0524334 23.539L2.5338 23.2344ZM3.18681 22.3986C3.1894 22.3982 3.192 22.3979 3.1946 22.3976L2.91592 19.9132C2.90465 19.9145 2.89339 19.9158 2.88213 19.9172L3.18681 22.3986ZM3.1946 22.3976L8.05297 21.8527L7.77428 19.3682L2.91592 19.9132L3.1946 22.3976ZM11.9815 21.412L16.5685 20.8974L16.2899 18.413L11.7028 18.9276L11.9815 21.412Z","fill","#1F64E7"],["fill-rule","evenodd","clip-rule","evenodd","d","M64.14 18.2692L72.5596 79.7529L73.3169 85.9212C73.5609 87.9083 72.1669 89.7146 70.2033 89.9557L17.7613 96.3948C15.7978 96.6359 14.0082 95.2204 13.7642 93.2333L5.61416 26.8568C5.47955 25.7605 6.25918 24.7626 7.35551 24.628L13.8431 23.8314","fill","#E8F0FE"],["d","M23.6719 1.25H69.2286C69.9577 1.25 70.6569 1.5395 71.1726 2.05485L84.6158 15.4898C85.1319 16.0056 85.4219 16.7053 85.4219 17.4349V80C85.4219 81.5188 84.1907 82.75 82.6719 82.75H23.6719C22.1531 82.75 20.9219 81.5188 20.9219 80V4C20.9219 2.48122 22.1531 1.25 23.6719 1.25Z","fill","white","stroke","#1F64E7","stroke-width","2.5"],["d","M69.6719 2.40283V14C69.6719 15.6569 71.015 17 72.6719 17H80.6055","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M31 17H57M31 29H74M31 42H74M31 55H74M31 68H57","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-center","font-medium","mt-4"]],template:function(e,i){if(1&e&&(t.YNc(0,vC,1,0,"azt-loading-effect",0),t.YNc(1,wC,4,2,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,K_,_t.bT],encapsulation:2}),n})();var rm=A(10731),CC=A(95524),TC=A(74470);const AC=function(n){return{"box-select":n}},SC=function(n){return{active:n}};function OC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"img",3),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.ChooseTemplate(s.id?s.id:0))}),t.ALo(2,"mycdn"),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(5,AC,i.template_selected_id===e.id)),t.xp6(1),t.s9C("src",t.lcZ(2,3,e.thumb),t.LSH),t.Q6J("ngClass",t.VKq(7,SC,i.template_selected_id===e.id))}}let EC=(()=>{class n extends st.Q{constructor(){super(...arguments),this.templates=[],this.template_selected_id=0,this.change_template=new t.vpe}ChooseTemplate(e){e!==this.template_selected_id&&this.change_template.emit(e)}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-choose-question-form"]],inputs:{templates:"templates",template_selected_id:"template_selected_id"},outputs:{change_template:"change_template"},features:[t.qOj],decls:4,vars:4,consts:[[1,"box-title","bg-slate-900","dark:bg-darkmode-400"],["class","box-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"box-item",3,"ngClass"],["azt-track-service","choose-question-form-Irw33xRlJC","alt","",1,"noChooseTemplate",3,"ngClass","src","click"]],template:function(e,i){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,OC,3,9,"div",1)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,2,"lang_auto_chon_mau_hien_thi_cau_hoi_upper")),t.xp6(2),t.Q6J("ngForOf",i.templates))},dependencies:[E.mk,E.sg,_t.bT,_t.GT],styles:['.box-title[_ngcontent-%COMP%]{text-align:center;font-size:large;padding:10px;border-radius:5px 5px 0 0;background:rgb(var(--color-primary));color:#fff;font-weight:500}.box-item[_ngcontent-%COMP%]{cursor:pointer;margin:10px;position:relative}.box-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.box-select[_ngcontent-%COMP%]:before{content:"";background:rgb(var(--color-primary));width:15px;height:15px;position:absolute;border-radius:50%;top:5px;left:5px}.active[_ngcontent-%COMP%]{border:2px solid rgb(var(--color-primary));box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}']}),n})();var MC=A(24698),IC=A(12623);const LC=["left_element_box"],ZC=["right_element_box"];function PC(n,a){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._UZ(1,"span",24),t._uU(2,"\xa0"),t.qZA())}function NC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(4);return t.KtG(r.redirectShowDetail(s))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function DC(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",25)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,27)(10,"div",28)(11,"ul",29),t.YNc(12,NC,5,6,"li",30),t.qZA()()()()),2&n){const e=t.MAs(9),i=t.oxw(3);t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",(null==i.examObj?null:i.examObj.powerpointLinks)&&(null==i.examObj||null==i.examObj.powerpointLinks?null:i.examObj.powerpointLinks.length)," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",null==i.examObj?null:i.examObj.powerpointLinks)}}function jC(n,a){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._UZ(1,"span",24),t._uU(2,"\xa0"),t.qZA())}function qC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",43),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(5);return t.KtG(r.redirectShowDetail(s))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function FC(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",41)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,42)(10,"div",28)(11,"ul",29),t.YNc(12,qC,5,6,"li",30),t.qZA()()()()),2&n){const e=t.MAs(9),i=t.oxw().$implicit;t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",null==i.powerpointLinks?null:i.powerpointLinks.length," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",i.powerpointLinks)}}function QC(n,a){if(1&n&&t._UZ(0,"azt-template-one",44),2&n){const e=t.oxw(),o=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",o)("isAnswer",!0)}}function UC(n,a){if(1&n&&t._UZ(0,"azt-template-two",44),2&n){const e=t.oxw(),o=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",o)("isAnswer",!0)}}function BC(n,a){if(1&n&&t._UZ(0,"azt-template-three",44),2&n){const e=t.oxw(),o=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",o)("isAnswer",!0)}}function RC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"button",36),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw(3);return t.KtG(r.generateLinkAction(s))}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,jC,3,0,"span",18),t.qZA()(),t.YNc(13,FC,13,12,"div",37),t.qZA(),t.kcU(),t.TgZ(14,"div",38)(15,"container-element",39),t.YNc(16,QC,1,3,"azt-template-one",40),t.YNc(17,UC,1,3,"azt-template-two",40),t.YNc(18,BC,1,3,"azt-template-three",40),t.qZA()()()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw(3);t.xp6(4),t.AsE("",t.lcZ(5,9,"lang_testbank_powerpoint_question")," ",i+1,""),t.xp6(6),t.hij(" ",t.lcZ(11,11,"lang_testbank_powerpoint_copy_link_question")," "),t.xp6(2),t.Q6J("ngIf",e.isLoading&&!0===e.isLoading),t.xp6(1),t.Q6J("ngIf",0!=(null==e.powerpointLinks?null:e.powerpointLinks.length)),t.xp6(2),t.Q6J("ngSwitch",null==o.templateObj?null:o.templateObj.id),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3)}}function zC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9,10)(2,"div",11)(3,"div",12)(4,"div",13),t._uU(5),t.qZA(),t.TgZ(6,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.generateLinkAction())}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,PC,3,0,"span",18),t.qZA()(),t.YNc(13,DC,13,12,"div",19),t.qZA(),t.kcU(),t.TgZ(14,"div")(15,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.redirectToYTB())}),t._UZ(16,"img",21),t.ALo(17,"convertCdnLinkOfGitHub"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"div",22),t.YNc(21,RC,19,13,"div",23),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(5),t.hij(" ",t.lcZ(11,7,"lang_testbank_powerpoint_copy_link_exam")," "),t.xp6(2),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.isLoading)&&!0===(null==e.examObj?null:e.examObj.isLoading)),t.xp6(1),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.powerpointLinks)&&0!=(null==e.examObj||null==e.examObj.powerpointLinks?null:e.examObj.powerpointLinks.length)),t.xp6(3),t.Q6J("src",t.lcZ(17,9,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(19,11,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(3),t.Q6J("ngForOf",e.questionObjs)}}function JC(n,a){if(1&n&&(t.TgZ(0,"div",45)(1,"div",11)(2,"div",12)(3,"div",13),t._uU(4),t.qZA()(),t.TgZ(5,"div",46)(6,"div",47),t._UZ(7,"img",48),t.ALo(8,"convertCdnLinkOfGitHub"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",22)(12,"div",49),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(3),t.Q6J("src",t.lcZ(8,4,"azota_assets/images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(10,6,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(4),t.Oqu(t.lcZ(14,8,"lang_testbank_powerpoint_note_toturial"))}}function HC(n,a){1&n&&(t.TgZ(0,"div",45)(1,"div",22)(2,"div",50)(3,"span"),t._UZ(4,"span",24),t._uU(5,"\xa0"),t.qZA(),t.TgZ(6,"span",51),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_testbank_powerpoint_data_sample"),""))}function $C(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4,5)(3,"app-choose-question-form",6),t.NdJ("change_template",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.changeTemplate(o))}),t.qZA()(),t.YNc(4,zC,22,13,"div",7),t.YNc(5,JC,15,10,"div",8),t.YNc(6,HC,9,3,"div",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("templates",e.templatesObjs),t.xp6(1),t.Q6J("ngIf",e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading)}}function KC(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",52),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.isShowVideo=!1)}),t.TgZ(1,"div",53)(2,"div",54)(3,"div",55),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",56)(7,"mat-icon",57),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",58),t._UZ(10,"iframe",59),t.qZA()()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"lang_testbank_powerpoint_video_tutorial")))}let YC=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.activeRoute=e,this.powerPointLinkService=i,this.homeworkExamService=o,this.powerpointExamService=s,this.backToLink="",this.exam_id=0,this.cat_id=0,this.questionObjs=[],this.isLoading=!1,this.isSupport=!1,this.isViewQuestion=!1,this.widthView=0,this.isShowVideo=!1}generateLinkAction(e){var i,o,s,r;void 0!==e?null===(i=this.questionObjs)||void 0===i||i.forEach(l=>{var c;(null===(c=this.questionObjs)||void 0===c?void 0:c[e].id)===l.id&&(l.isLoading=!0)}):this.examObj=Object.assign(Object.assign({},this.examObj),{isLoading:!0}),this.powerPointLinkService.apiPowerPointLinkGenerateLinkObjPost({examId:void 0!==e?0:this.exam_id,questionId:void 0!==e?null===(o=this.questionObjs)||void 0===o?void 0:o[e].id:0,templateId:null!==(r=null===(s=this.templateObj)||void 0===s?void 0:s.id)&&void 0!==r?r:0}).subscribe(l=>{var c,u,d,m,p,b,y,C,I;if(1==l.success){this.showSuccessSnack("lang_auto_copy_link_thanh_cong");const D=document.createElement("textarea");D.value=`${On.N.base_embed_link}/embed_ppt/?link_id=${null===(u=null===(c=l.data)||void 0===c?void 0:c.obj)||void 0===u?void 0:u.id}&hash_class=${null===(m=null===(d=l.data)||void 0===d?void 0:d.obj)||void 0===m?void 0:m.hashCode}`,D.value=D.value.replace(/(^\w+:|^)\/\//,""),D.setAttribute("readonly",""),D.style.position="absolute",D.style.left="-9999px",document.body.appendChild(D),D.select(),document.execCommand("copy"),document.body.removeChild(D),void 0!==e?(this.mergeLinks(null===(p=this.questionObjs)||void 0===p?void 0:p[e].powerpointLinks,null===(b=l.data)||void 0===b?void 0:b.obj),null===(y=this.questionObjs)||void 0===y||y.forEach(U=>{var B;(null===(B=this.questionObjs)||void 0===B?void 0:B[e].id)===U.id&&(U.isLoading=!1)})):(this.mergeLinks(null===(C=this.examObj)||void 0===C?void 0:C.powerpointLinks,null===(I=l.data)||void 0===I?void 0:I.obj),this.examObj=Object.assign(Object.assign({},this.examObj),{isLoading:!1}))}else this.commonService.snackError("lang_auto_copy_link_that_bai_he_thong_khong_the_tao_link_cho_noi_dung_nay")})}mergeLinks(e,i){var o;for(let s=0;s<(null!==(o=e?.length)&&void 0!==o?o:0);s++)if(e?.[s].id===i?.id)return;e?.push(i??{})}redirectShowDetail(e){this.commonService.myNavigation(`/powerpoint/embed/${e.id}/${e.hashCode}`)}changeTemplate(e){this.getDataPowerPoint(e)}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}getDataPowerPoint(e){this.powerPointLinkService.apiPowerPointLinkGetObjGet(this.exam_id,e).subscribe(i=>{var o,s,r,l,c,u,d,m;if(1==i.success){if(null!=i.data){this.templatesObjs=null===(o=i.data)||void 0===o?void 0:o.templatesObjs,this.templateObj=null===(s=i.data)||void 0===s?void 0:s.templateObj,this.examObj=null===(r=i.data)||void 0===r?void 0:r.examObj;let p=this.commonService.castJsonToClassObjs(rm.x,JSON.stringify(null===(l=i.data)||void 0===l?void 0:l.questionObjs));this.questionObjs=null!==(c=this.homeworkExamService.changeDataQuestions(p??[]))&&void 0!==c?c:[]}else this.isViewQuestion=!0;this.isSupport=this.homeworkExamService.isLstQuestionTrueFalse(this.questionObjs),this.powerpointExamService.convert(this.questionObjs,null!==(d=null===(u=i.data)||void 0===u?void 0:u.examObj)&&void 0!==d?d:{}),this.isLoading=!0}else this.isViewQuestion=!0,this.showErrorSnack(null!==(m=i.message)&&void 0!==m?m:""),this.isLoading=!0})}addEventElement(){document.addEventListener("scroll",()=>{this.left_element_box&&this.right_element_box&&(window.innerWidth>=1e3?(this.left_element_box.nativeElement.getBoundingClientRect().top<=-10&&(this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.left_element_box.nativeElement.classList.add("content__fixed"),this.right_element_box.nativeElement.classList.add("content__rfixed")),this.right_element_box.nativeElement.getBoundingClientRect().top>=0&&(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.add("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed"))):(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed")))})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_question_powerpoint_title",description:"lang_cms_question_powerpoint_description",image:"lang_cms_test_image"}),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i;this.exam_id=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")),this.cat_id=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"/admin/testbank/document-management/0/"+(null!==(i=this.cat_id)&&void 0!==i?i:0)+"/1"}),this.getDataPowerPoint(),this.addEventElement(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.WZ),t.Y36(lo.j),t.Y36(CC.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-powerpoint-link"]],viewQuery:function(e,i){if(1&e&&(t.Gf(LC,5),t.Gf(ZC,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.left_element_box=o.first),t.iGM(o=t.CRH())&&(i.right_element_box=o.first)}},features:[t.qOj],decls:4,vars:6,consts:[[3,"headerBackTolink","headerTitle"],["class","azt-ppt-content",4,"ngIf"],["azt-track-service","powerpoint-bN85gjV08DU","class","popup__video",3,"click",4,"ngIf"],[1,"azt-ppt-content"],[1,"left","box"],["left_element_box",""],[3,"templates","change_template"],["class","right box",4,"ngIf"],["class","right",4,"ngIf"],[1,"right","box"],["right_element_box",""],[1,"right__header"],[1,"right__header_lview"],[1,"right__header__exam_title"],["azt-track-service","powerpoint-N-aYwfOOF_",1,"btn","btn-outline-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[4,"ngIf"],["class","right__header_cview ml-2",4,"ngIf"],["azt-track-service","powerpoint-Zd6K5twMof",1,"btn-text-primary","ml-2",3,"click"],["alt","",1,"mr-2",3,"src"],[1,"right__content"],["class","right__content__question_item",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"right__header_cview","ml-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["detailLinksExam","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["azt-track-service","powerpoint-32OdBjI0q1",1,"dropdown-item",3,"click"],[1,"right__content__question_item"],[1,"right__content__question_item__header"],[1,"right__content__question_item__header_lview"],[1,"right__content__question_item__title"],["azt-track-service","powerpoint-UsKaxl1tor",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","right__content__question_item__header_rview",4,"ngIf"],[1,"right__content__question_item__content"],[3,"ngSwitch"],[3,"questionObj","indexQuestion","isAnswer",4,"ngSwitchCase"],[1,"right__content__question_item__header_rview"],["detailLinks","matMenu"],["azt-track-service","powerpoint-MYsWxijcXF",1,"dropdown-item",3,"click"],[3,"questionObj","indexQuestion","isAnswer"],[1,"right"],[1,"right__header_rview"],[1,"right__header__video"],["alt","",3,"src"],[1,"right__content_noti"],[1,"text-center","m-5"],[1,"right__content_loading"],["azt-track-service","powerpoint-bN85gjV08DU",1,"popup__video",3,"click"],[1,"popup__video_box"],[1,"popup__video__header"],[1,"popup__video__header--title"],[1,"popup__video__header--close"],[1,"d-flex"],[1,"popup__video__video"],["width","560","height","315","src","https://www.youtube.com/embed/FpcOtHNGMCQ","title","YouTube video player","frameborder","0","allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture","allowfullscreen",""]],template:function(e,i){1&e&&(t.TgZ(0,"editor-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,$C,7,4,"div",1),t.YNc(3,KC,11,3,"div",2),t.qZA()),2&e&&(t.Q6J("headerBackTolink",i.backToLink)("headerTitle",t.lcZ(1,4,"lang_testbank_powerpoint_header_title")),t.xp6(2),t.Q6J("ngIf",0==i.isViewQuestion),t.xp6(1),t.Q6J("ngIf",i.isShowVideo))},dependencies:[E.sg,E.O5,E.RF,E.n9,qe.Hw,ke.VK,ke.p6,TC.m,EC,MC.j,IC._,ul.Z,_t.bT,_t.Jc,_t.tO],styles:[".azt-ppt-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;height:100vh;justify-content:space-between;padding-top:10px;padding-bottom:40px}.azt-ppt-content__fixed[_ngcontent-%COMP%]{position:fixed;top:0;animation:_ngcontent-%COMP%_dropdownboxelement .5s}.azt-ppt-content__downtoup[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_downtoupboxelement .5s}.azt-ppt-content__rfixed[_ngcontent-%COMP%]{margin-left:380px!important}.azt-ppt-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:350px;height:100%;margin:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin:10px;width:calc(100% - 340px);border-width:1px;border-style:solid;border-radius:5px;padding:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content[_ngcontent-%COMP%]{padding-bottom:80px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_lview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__exam_title[_ngcontent-%COMP%]{max-width:350px;font-weight:700;margin:0 10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]{margin:20px 10px;display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_lview[_ngcontent-%COMP%], .azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_rview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;font-size:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_noti[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin:50px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_loading[_ngcontent-%COMP%]{font-size:20px}.azt-ppt-content__btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-transform:uppercase;padding:6px 15px;border-radius:5px;cursor:pointer}.popup__video[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center}.popup__video__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:10px 10px 0 0}.popup__video__header--title[_ngcontent-%COMP%]{font-size:18px}.popup__video__header--close[_ngcontent-%COMP%]{cursor:pointer}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}@keyframes _ngcontent-%COMP%_dropdownboxelement{0%{top:-10px}50%{top:40px}60%{top:10px}to{top:0}}@keyframes _ngcontent-%COMP%_downtoupboxelement{0%{padding-top:40px}to{padding-top:auto}}@media screen and (max-width: 925px){.content[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:auto!important}.right__header[_ngcontent-%COMP%]{row-gap:10px}.right__header__exam_title[_ngcontent-%COMP%]{max-width:100%!important}.popup__video[_ngcontent-%COMP%]{align-items:flex-start}.popup__video_box[_ngcontent-%COMP%]{width:95%}.popup__video__header[_ngcontent-%COMP%]{margin-top:50px}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 1199px) and (min-width: 926px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 890px) and (min-width: 551px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 550px){.right__content__question_item__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px}.right__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px;align-items:center!important;justify-content:space-between!important;align-content:center!important}.right__header__exam_title[_ngcontent-%COMP%]{max-width:50%!important}}"]}),n})();class wo{static objectLength(a){return Object.keys(a).length}static removeKeyInObject(a,e){for(var i in a)e.hasOwnProperty(i)&&delete a[i];return a}}var tT=A(92384),eT=A(87878);function nT(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function iT(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_luong_de_dao")," "))}function oT(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_luong_de_phai_lon_hon_0")," "))}function aT(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_luong_de_phai_nho_hon"),"\xa0",e.limitMaxMixQuestionHashId," ")}}function sT(n,a){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,iT,3,3,"span",24),t.YNc(2,oT,3,3,"span",24),t.YNc(3,aT,3,4,"span",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.numberExam.errors.max)}}function rT(n,a){1&n&&(t.TgZ(0,"div",39)(1,"small",40),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_offline_test_cannot_be_reversed"),". "))}function lT(n,a){1&n&&(t.TgZ(0,"div",39)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_de_thi_qua_120_cau_vui_long_tao_de_con_duoi_120_cau_de_in_de"),". "))}function cT(n,a){if(1&n&&(t.TgZ(0,"div",39)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_offline_test_not_print_exam_have_answer")+" "+e.dataConfigDocument.allowMaxAnswerChoices,". ")}}function uT(n,a){if(1&n&&(t.TgZ(0,"p",44,45),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(3);t.s9C("matTooltip",i.pagePrintExamCodeWithString),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.AsE(" ",t.lcZ(3,5,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_will_create"),"\xa0",i.pagePrintExamCodeWithString," ")}}function dT(n,a){if(1&n&&(t.TgZ(0,"span")(1,"span",46),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",46),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid")," "),t.xp6(3),t.HOy(" ",t.lcZ(6,7,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_real"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.countReal," \xa0|\xa0 ",t.lcZ(7,9,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_you"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.countOfCode," ")}}function _T(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_format_invalid")," "))}function mT(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_duplicated_invalid"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds?null:e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds.join(", ")," ")}}function pT(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_min_invalid"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.minOfStart," ")}}function hT(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_max_invalid"),"\xa0",e.form.controls.inputOfflineMixQuestionHashId.errors.maxOfStart," ")}}function gT(n,a){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,dT,8,11,"span",24),t.YNc(2,_T,3,3,"span",24),t.YNc(3,mT,3,4,"span",24),t.YNc(4,pT,3,4,"span",24),t.YNc(5,hT,3,4,"span",24),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.countOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.formatOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.minOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",e.form.controls.inputOfflineMixQuestionHashId.errors.maxOfflineMixQuestionHashIdInvalid)}}function fT(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"input",41),t.ALo(2,"mytranslate"),t.TgZ(3,"div",42),t.YNc(4,uT,4,7,"p",43),t.qZA(),t.YNc(5,gT,6,5,"div",14),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.s9C("placeholder",t.lcZ(2,3,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_placeholder")),t.xp6(3),t.Q6J("ngIf",!e.form.controls.numberExam.errors&&!e.form.controls.inputOfflineMixQuestionHashId.errors&&""!=e.pagePrintExamCodeWithString),t.xp6(1),t.Q6J("ngIf",!e.form.controls.numberExam.errors&&e.form.controls.inputOfflineMixQuestionHashId.errors)}}function xT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",47)(4,"div",48)(5,"label",49),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",50),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",51)(12,"div",32)(13,"input",52),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeRandomQuestionConfig(o))}),t.qZA()()()()()()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function vT(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",56)(1,"g",57)(2,"g",58),t._UZ(3,"circle",59),t.TgZ(4,"path",60),t._UZ(5,"animateTransform",61),t.qZA()()()())}function bT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"input",62),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.changeConfigSubjectMark(o))}),t.qZA()}}function yT(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",47)(4,"div",48)(5,"label",53),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",50),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",51)(12,"div",32),t.YNc(13,vT,6,0,"svg",54),t.YNc(14,bT,1,0,"input",55),t.qZA()()()()()()),2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,4,"lang_config_create_exam_multiple_component")," "),t.xp6(3),t.hij(" ",t.lcZ(10,6,"lang_config_create_exam_multiple_component_description")," "),t.xp6(4),t.Q6J("ngIf",e.loadingSaveConfigMultiple),t.xp6(1),t.Q6J("ngIf",!e.loadingSaveConfigMultiple)}}function wT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",30)(3,"div",16)(4,"div",48)(5,"label",63),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",64),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",51)(12,"div",32)(13,"input",65),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeCreateSubTestConfig(o))}),t.qZA()()()()()()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "))}function kT(n,a){1&n&&(t.TgZ(0,"div",74)(1,"div",75)(2,"a",76),t._UZ(3,"img",77),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",78),t._UZ(6,"img",79),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"azota_assets/images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"azota_assets/images/2928664.svg"),t.LSH))}function CT(n,a){1&n&&(t.TgZ(0,"p",71),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function TT(n,a){1&n&&(t.TgZ(0,"div",74)(1,"div",80)(2,"p",81)(3,"span",82),t._uU(4,"Google Play"),t.qZA(),t._UZ(5,"azt-download-qr-code",83),t.qZA(),t.TgZ(6,"p",84)(7,"span",82),t._uU(8,"App Store"),t.qZA(),t._UZ(9,"azt-download-qr-code",83),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("fileName","azota_exam_qrcode_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qrcode_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function AT(n,a){if(1&n&&(t.TgZ(0,"div",66)(1,"div",67)(2,"span",68),t._uU(3," * "),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",69)(7,"div",70)(8,"p",71),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,kT,8,6,"div",72),t.qZA(),t.TgZ(12,"div",46),t.YNc(13,CT,3,3,"p",73),t.YNc(14,TT,10,4,"div",72),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),t.xp6(5),t.hij(" ",t.lcZ(10,7,"lang_core_tai_app_tai_day")," "),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView)}}const ST=function(n){return{hidden:n}};function OT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5)(5,"form",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"label",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t._UZ(14,"input",13),t.ALo(15,"mytranslate"),t.YNc(16,sT,4,3,"div",14),t.YNc(17,rT,4,3,"div",14),t.YNc(18,lT,4,3,"div",14),t.YNc(19,cT,4,3,"div",14),t.qZA(),t.TgZ(20,"div",15)(21,"div",16)(22,"div",17)(23,"label",18),t._uU(24),t.ALo(25,"mytranslate"),t.TgZ(26,"span",19),t.ALo(27,"mytranslate"),t._UZ(28,"lucide-icon",20),t.qZA()()(),t.TgZ(29,"div",21)(30,"div",22),t._UZ(31,"input",23),t.qZA()()(),t.YNc(32,fT,6,5,"ng-container",24),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"app-testbank-choose-answersheet",25),t.qZA()(),t.TgZ(35,"div",10),t._UZ(36,"preview-answersheet-dialog",26),t.qZA()(),t.YNc(37,xT,14,6,"div",27),t.YNc(38,yT,15,8,"div",27),t.YNc(39,wT,14,6,"div",27),t.TgZ(40,"div",28)(41,"test-config-online-mix-question",29),t.NdJ("isGroupMixQuestionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.isGroupMixQuestion=o)})("checkValidateCountQuestionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.checkValidateCountQuestion=o)})("hasChangeValueLimitQuestion",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.changeLimitQuestionNonGroup(o))})("totalTakeQuestionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.changeLimitQuestionInGroup(o))}),t.qZA()(),t.TgZ(42,"div",9)(43,"div",10)(44,"div",30)(45,"div",16)(46,"div",17)(47,"label",31),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()(),t.TgZ(50,"div",21)(51,"div",32),t._UZ(52,"input",33),t.qZA()()()(),t.TgZ(53,"div",34),t._UZ(54,"add-info-print",35),t.qZA()()()(),t.YNc(55,AT,15,9,"div",36),t.qZA(),t.TgZ(56,"div",37)(57,"button",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.savePrintConfigObj())}),t._uU(58),t.ALo(59,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,30,"lang_auto_in_de_co_phieu_tra_loi_trac_nghiem_rieng")," "),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(7),t.hij(" ",t.lcZ(13,32,"lang_auto_so_luong_de_dao")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(15,34,"lang_auto_nhap_so_luong_de_dao")),t.xp6(2),t.Q6J("ngIf",e.form.controls.numberExam.dirty&&e.form.controls.numberExam.errors),t.xp6(1),t.Q6J("ngIf",0===(null==e.dataConfigDocument?null:e.dataConfigDocument.canMixQuestion)&&e.form.controls.numberExam.value>1),t.xp6(1),t.Q6J("ngIf",1===(null==e.dataConfigDocument?null:e.dataConfigDocument.exceedMaxQuestions)),t.xp6(1),t.Q6J("ngIf",e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4),t.xp6(5),t.hij(" ",t.lcZ(25,36,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(27,38,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_tooltip")),t.xp6(6),t.Q6J("ngIf",e.form.controls.allowCustomInputOfflineMixQuestionHashId.value),t.xp6(2),t.Q6J("form",e.form),t.xp6(2),t.Q6J("answersheetTemplate",e.form.controls.answersheetTemplate.value)("amountAnswersheet",e.form.controls.amountAnswersheet.value),t.xp6(1),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",e.canUseSubjectMark),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value),t.xp6(1),t.Q6J("hidden",e.form.controls.isRandomQuestion.value||!(1==e.form.controls.isCreateSubTest.value&&1==e.form.controls.mixQuestion.value)),t.xp6(1),t.Q6J("fromPrintOffline",!0)("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos),t.xp6(7),t.hij(" ",t.lcZ(49,40,"lang_core_them_thong_tin")," "),t.xp6(5),t.Q6J("ngClass",t.VKq(44,ST,!e.form.controls.addInfoPrint.value)),t.xp6(1),t.Q6J("form",e.form)("examPrintInfoObj",e.examPrintInfoObj),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("disabled",e.checkValidateCountQuestion&&1==e.form.controls.isCreateSubTest.value||0==e.form.controls.answersheetTemplate.value&&e.form.controls.amountAnswersheet.errors||1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&e.totalTakeQuestion>120||1==e.form.controls.isCreateSubTest.value&&e.isGroupMixQuestion&&0==e.totalTakeQuestion||void 0!==e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4||e.form.controls.numberExam.errors||e.form.controls.allowCustomInputOfflineMixQuestionHashId.value&&e.form.controls.inputOfflineMixQuestionHashId.errors),t.xp6(1),t.hij(" ",t.lcZ(59,42,"lang_auto_in_de_and_phieu")," ")}}let ET=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.formBuilder=e,this.offlineExamService=i,this.documentConfigService=o,this.formatAnswersheetService=s,this.activeRoute=r,this.dialog=l,this.form=new h.nJ({}),this.examObj={},this.obj={},this.backToLink="",this.dataConfigDocument={},this.isLoadingPrintTest=!1,this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.totalTakeQuestion=0,this.hasGroupQuestion=!1,this.examGroupInfos=[],this.minLimitMixQuestion=0,this.enableRandomQuestion=!1,this.defaultMaxCreateMixExamOneTime=100,this.defaultMaxMixQuestionHashId=999,this.limitMaxMixQuestionHashId=999,this.examHashId="",this.examPrintInfoObj={},this.loadingSaveConfigMultiple=!1,this.canUseSubjectMark=!1}get pagePrintExamCodeWithString(){const e=this.makeExamCodeWithInput();return e?`(${e.map(i=>this.formatAnswersheetService.formatOfflineExamHashIdToNumber(i,3)).join(", ")})`:""}makeExamCodeWithInput(){var e,i;if(this.form.controls.numberExam.errors||this.form.controls.inputOfflineMixQuestionHashId.errors)return;const o=this.commonService.examExtractNumbers(null!==(e=this.form.controls.numberExam.value)&&void 0!==e?e:1,null!==(i=this.form.controls.inputOfflineMixQuestionHashId.value)&&void 0!==i?i:"");return o.susses?o.data:void 0}getOfflineMixQuestionHashIdsWillCreated(e,i){e=Number(e),i=Number(i);let o=[];if(e>0&&i>0){let s=this.formatAnswersheetService.getOfflineMixQuestionHashIdsFromStart(e,i);for(let r=0;r<s.length;r++)o.push(this.formatAnswersheetService.formatOfflineExamHashIdToNumber(s[r],3))}return o.length>0?"("+o.join(", ")+")":""}getGroupMixInfosSubmit(e){let i={},o=[];return e.forEach(r=>{var l;if(!i.hasOwnProperty(r.groupId)){i[r.groupId]=null!==(l=r.totalQuestion)&&void 0!==l?l:0;let c=[],u=Number(r.totalGroupScore)/Number(r.totalQuestion);for(let d=0;d<r.totalQuestion;d++)c.push(u);o=o.concat(c)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:o}}getMixInfoSubmit(e,i){let o=Number(i)/Number(e),s=new Array(Number(e)).fill(o);return{limitMixQuestion:Number(e),marks:s}}startCreateOfflineExamData(){var e,i;this.isLoadingPrintTest=!0;let o=Number(this.form.controls.numberExam.value),r=this.form.controls.answersheetTemplate?Number(this.form.controls.answersheetTemplate.value):11,l=this.makeExamCodeWithInput(),c=null!==(e=this.form.controls.amountAnswersheet.value)&&void 0!==e?e:void 0;this.subscriptions.add(this.offlineExamService.apiOfflineExamCreateExamObjPost({examHashId:null!==(i=this.examObj.hashId)&&void 0!==i?i:"",total:o,examTemplate:0,answersheetTemplate:r,totalQuestionOfAnswerSheet:c,customOfflineMixQuestionHashId:l}).subscribe(u=>{var d,m,p,b;if(1===u.success){if(null!==(d=u.data)&&void 0!==d&&d.obj){let y=u.data.obj,I=`/admin/testbank/print-exam-and-ticket/${null!==(m=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==m?m:"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/download-file-print/${null!==(p=this.examObj.categoryId)&&void 0!==p?p:0}/${y.examHashId}/${y.hashId}`,`?backto=${encodeURIComponent(I)}`)}this.successStatusObj(),this.isLoadingPrintTest=!1}else this.errorStatusObj(null!==(b=u.message)&&void 0!==b?b:"",!0),this.isLoadingPrintTest=!1}))}changeRandomQuestionConfig(e){e.target instanceof HTMLInputElement&&e.target.checked&&(this.form.controls.subjectMarks.enable(),this.form.controls.isCreateSubTest.setValue(!1))}changeConfigSubjectMark(e){if(e.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.commonService.getFormObj(this.form),o={subjectMarks:i.subjectMarks?1:0};this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,o).subscribe(s=>{var r;1==s.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(null!==(r=s.message)&&void 0!==r?r:"",!0),this.form.controls.subjectMarks.setValue(!o.subjectMarks))}))}}changeCreateSubTestConfig(e){e.target instanceof HTMLInputElement&&(e.target.checked?(120!=this.form.controls.limitMixQuestion.value||this.isGroupMixQuestion&&120!=this.totalTakeQuestion)&&(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable())}changeLimitQuestionNonGroup(e){this.isGroupMixQuestion||this.disableSubjectMarksConfig(e)}changeLimitQuestionInGroup(e){this.totalTakeQuestion=e,this.isGroupMixQuestion&&this.disableSubjectMarksConfig(e)}disableSubjectMarksConfig(e){this.form.controls.isCreateSubTest.value&&120!=e||!this.canUseSubjectMark?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable()}savePrintConfigObj(){var e,i;this.initStatusObj(),this.form.controls.isRandomQuestion.value&&this.form.controls.isCreateSubTest.setValue(!1);let o=this.commonService.getFormObj(this.form);o.limitMixQuestion=o.limitMixQuestion>0?o.limitMixQuestion:0;let s=o.isCreateSubTest?2:2==(null===(e=this.dataConfigDocument.examObj)||void 0===e?void 0:e.mixQuestion)?1:void 0,r=this.getGroupMixInfosSubmit(o.groupInfos),l=this.getMixInfoSubmit(o.limitMixQuestion,o.totalPointQuestionNoGroup);this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(null!==(i=this.examObj.hashId)&&void 0!==i?i:"",{mixQuestion:s,mixQuestionNotInGroupInfoWithMarkObj:l,mixQuestionGroupInfoWithMarkObj:r,subjectMarks:o.subjectMarks?1:0,isRandomQuestion:this.enableRandomQuestion?o.isRandomQuestion?1:0:void 0}).subscribe(u=>{var d;1==u.success?(this.startCreateOfflineExamData(),this.addInfoPrint()):this.errorStatusObj(null!==(d=u.message)&&void 0!==d?d:"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var o,s,r,l;1==i.success?(this.dataConfigDocument=null!==(o=i.data)&&void 0!==o?o:{},this.canUseSubjectMark=null!==(r=null===(s=i.data)||void 0===s?void 0:s.canUseSubjectMark)&&void 0!==r&&r,this.initData(this.dataConfigDocument),this.successStatusObj()):this.errorStatusObj(null!==(l=i.message)&&void 0!==l?l:"",!0)}))}initData(e){var i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R;let et=null!==(i=e?.examObj)&&void 0!==i?i:{},Q={},V=this.defaultMaxMixQuestionHashId-(null!==(o=e?.totalUsedMixQuestionHashId)&&void 0!==o?o:0);Q=null!==(s=this.castObj(et))&&void 0!==s?s:{},Q.limitQuestionGroupsParse=this.commonService.myParseJson(null!==(r=et.limitQuestionGroups)&&void 0!==r?r:""),this.obj=Q,this.examObj=null!==(l=e.examObj)&&void 0!==l?l:{},this.examPrintInfoObj=null!==(c=e.examPrintInfoObj)&&void 0!==c?c:{},this.enableRandomQuestion=null!==(u=e.enableRandomQuestion)&&void 0!==u&&u,this.examPrintInfoObj.status&&this.form.controls.addInfoPrint.setValue(!0),this.limitMaxMixQuestionHashId=V>this.defaultMaxCreateMixExamOneTime?this.defaultMaxCreateMixExamOneTime:V;let Y=null===(p=null===(m=null===(d=e.examObj)||void 0===d?void 0:d.mixQuestionNotInGroupInfoWithMarkObj)||void 0===m?void 0:m.marks)||void 0===p?void 0:p.reduce((at,tt)=>at+tt,0);Y=Math.round(100*(Y??1))/100,this.form.controls.limitMixQuestion.setValue(this.obj.limitMixQuestion),this.form.controls.isCreateSubTest.setValue(2==this.obj.mixQuestion),this.form.controls.numberExam.addValidators(h.kI.max(this.limitMaxMixQuestionHashId)),this.form.controls.answersheetTemplate.setValue(null!==(b=e.offlineExamObj)&&void 0!==b&&b.answersheetTemplate?null===(y=e.offlineExamObj)||void 0===y?void 0:y.answersheetTemplate.toString():"11"),this.form.controls.amountAnswersheet.setValue(null!==(I=null===(C=e.offlineExamObj)||void 0===C?void 0:C.totalQuestionOfAnswersheet)&&void 0!==I?I:null!==(D=this.obj.countQuestion)&&void 0!==D?D:1),this.form.addValidators(function VC(n,a){return e=>{var i,o=e.get("inputOfflineMixQuestionHashId"),s=e.get("numberExam");if(o&&o.value&&s&&""!=s.value.toString().trim()){var r=Qe.v.stcExamExtractNumbers(Number(s.value),o.value),c=r.data.filter(function(p){return-1!=a.indexOf(p)});if(r.data.length>0&&c.length>0){for(var u=[],d=0;d<c.length;d++)u.push(n.formatOfflineExamHashIdToNumber(c[d],3));return o?.setErrors({duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:u}),{identityRevealed:!0}}}var m=null!==(i=o?.errors)&&void 0!==i?i:{};return m=wo.removeKeyInObject(m,{duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:[]}),wo.objectLength(m)<=0?o?.setErrors(null):o?.setErrors(m),null}}(this.formatAnswersheetService,null!==(U=e.offlineMixQuestionHashIdsUsed)&&void 0!==U?U:[])),this.form.addValidators(function GC(){return n=>{var a,e=n.get("inputOfflineMixQuestionHashId");if(e&&""!=e.value.trim()){var i=n.get("numberExam");if(!i||""==i.value.toString().trim())return e?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),{identityRevealed:!0};var o=Number(i.value),s=Qe.v.stcExamExtractNumbers(o,e.value);if(s.susses&&s.data.length!=o)return e?.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:o,countReal:s.data.length}),{identityRevealed:!0}}var r=null!==(a=e?.errors)&&void 0!==a?a:{};return r=wo.removeKeyInObject(r,{countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),wo.objectLength(r)<=0?e?.setErrors(null):e?.setErrors(r),null}}()),this.form.addValidators(function WC(){return n=>{var a,e=n.get("inputOfflineMixQuestionHashId"),i=n.get("numberExam");if(e&&""!=e.value.trim()&&i&&""!=i.value.toString().trim()){var o=Qe.v.stcExamExtractNumbers(Number(i.value),e.value);if(!o.susses)return e?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0};if(0===o.data.length||o.data.filter(r=>r<0).length>0)return e?.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0}}var s=null!==(a=e?.errors)&&void 0!==a?a:{};return s=wo.removeKeyInObject(s,{formatOfflineMixQuestionHashIdInvalid:!0}),wo.objectLength(s)<=0?e?.setErrors(null):e?.setErrors(s),null}}()),this.form.addValidators(function XC(n,a){return e=>{var i,o,s=e.get("inputOfflineMixQuestionHashId"),r=e.get("numberExam");if(s&&""!=s.value.trim()&&r&&""!=r.value.toString().trim()){var l=Qe.v.stcExamExtractNumbers(Number(r.value),s.value);if(l.susses)for(let d=0;d<l.data.length;d++){if(l.data[d]<n)return s?.setErrors({minOfflineMixQuestionHashIdInvalid:!0,minOfStart:n}),{identityRevealed:!0};if(l.data[d]>a){let m=a;return"special"===l.msg&&(m=m-Number(r.value)+1),s?.setErrors({maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:m}),{identityRevealed:!0}}}}var c=null!==(i=s?.errors)&&void 0!==i?i:{};c=wo.removeKeyInObject(c,{minOfflineMixQuestionHashIdInvalid:!0,minOfStart:0}),wo.objectLength(c)<=0?s?.setErrors(null):s?.setErrors(c);var u=null!==(o=s?.errors)&&void 0!==o?o:{};return u=wo.removeKeyInObject(u,{maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:0}),wo.objectLength(u)<=0?s?.setErrors(null):s?.setErrors(u),null}}(1,999)),this.form.controls.schoolName.setValue(null===(B=e.examPrintInfoObj)||void 0===B?void 0:B.schoolName),this.form.controls.subjectName.setValue(null===(q=e.examPrintInfoObj)||void 0===q?void 0:q.subject),this.form.controls.isRandomQuestion.setValue(1==this.obj.isRandomQuestion),this.form.controls.subjectMarks.setValue(!!this.examObj.subjectMarks),this.form.controls.totalPointQuestionNoGroup.setValue(Y),120!=this.examObj.countQuestion&&this.form.controls.subjectMarks.disable(),this.hasGroupQuestion=!!e.hasGroupQuestion,this.minLimitMixQuestion=null!==(R=e.minLimitMixQuestion)&&void 0!==R?R:0,this.examGroupInfos=e.examGroupInfos&&e.examGroupInfos.length>0?e.examGroupInfos:this.examGroupInfos}addInfoPrint(){this.subscriptions.add(this.documentConfigService.apiDocumentConfigSaveExamPrintInfoObjPost(this.examHashId,{schoolName:this.form.controls.schoolName.value,subject:this.form.controls.subjectName.value,status:this.form.controls.addInfoPrint.value?1:0}).subscribe(i=>{var o;1===i.success||this.errorStatusObj(null!==(o=i.message)&&void 0!==o?o:"")}))}ngOnInit(){var e,i,o;this.form=this.formBuilder.group({numberExam:new h.p4(1,[h.kI.required,h.kI.min(1)]),isCreateSubTest:new h.p4(!1),mixQuestion:new h.p4("1"),groupInfos:new h.vC([]),limitMixQuestion:new h.p4(""),totalPointQuestionNoGroup:new h.p4(10),answersheetTemplate:new h.p4("11",[h.kI.required]),amountAnswersheet:new h.p4(1,[h.kI.required,h.kI.min(1),h.kI.max(120)]),allowCustomInputOfflineMixQuestionHashId:new h.p4(!1,[h.kI.required]),inputOfflineMixQuestionHashId:new h.p4(""),addInfoPrint:new h.p4(!1),schoolName:new h.p4(""),subjectName:new h.p4(""),isRandomQuestion:new h.p4(!1),subjectMarks:new h.p4({value:!1,disabled:!1})}),this.examHashId=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";let s=null!==(i=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==i?i:"",r=null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"";this.backToLink=r||`/admin/testbank/action-online-offline/${s??0}/${this.examHashId}`,this.getExamInfoByHashId(this.examHashId),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(Bt.lP),t.Y36(Bt.Cq),t.Y36(tT.D),t.Y36(w.gz),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-print-exam-and-ticket"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[1,"form-label","font-medium"],["type","text","appOnlyNumber","","formControlName","numberExam",1,"form-control",3,"placeholder"],["class","text-xs text-danger fade mt-2",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-10","lg:col-span-5"],["for","allow-input-start-offline-mix-question-hash-id",1,"form-check-label","ml-0","azt-ml-0","mr-2","flex","items-center","font-medium"],[1,"w-4","h-4","ml-2","inline-block",3,"matTooltip"],["name","info"],[1,"col-span-2","lg:col-span-7","flex"],[1,"form-check","form-switch","mb-3","ml-auto"],["id","allow-input-start-offline-mix-question-hash-id","formControlName","allowCustomInputOfflineMixQuestionHashId","type","checkbox",1,"show-code","form-check-input"],[4,"ngIf"],["formArrayName","answersheetTemplate",3,"form"],[3,"answersheetTemplate","amountAnswersheet"],["class","grid grid-cols-12 gap-5",4,"ngIf"],[1,"mt-3",3,"hidden"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"fromPrintOffline","form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange","hasChangeValueLimitQuestion","totalTakeQuestionChange"],[1,"mt-5"],["for","add-info-print",1,"form-label","font-medium"],[1,"form-check","form-switch","ml-auto"],["id","add-info-print","formControlName","addInfoPrint","type","checkbox",1,"show-code","form-check-input","mr-0","ml-3"],[3,"ngClass"],[3,"form","examPrintInfoObj"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","print-exam-and-ticket-PVsGtKGXRK",1,"btn","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","fade","mt-2"],[1,"text-note","text-danger"],["type","text","formControlName","inputOfflineMixQuestionHashId",1,"form-control",3,"placeholder"],[1,"col-span-12","px-0","mt-2"],["class","text-slate-500 text-xs truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[1,"text-slate-500","text-xs","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"block"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","config-matrix-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],["id","config-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],["for","subject-marks-question",1,"form-label","font-medium"],["class","show-code ml-auto form-check-input w-5 h-5","width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","rgb(30, 41, 59)",1,"show-code","ml-auto","form-check-input","w-5","h-5"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],["for","create-sub-exam",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],["id","create-sub-exam","formControlName","isCreateSubTest","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,nT,1,0,"azt-loading-effect",1),t.YNc(2,OT,60,46,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.mk,E.O5,Le.gM,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,xe.Q,Ks.o,Bo.Y,Pe.M,Ji.Q,eT.z,Xe._,f.Nh5,j_,Z_,P_,_t.bT,_t.Jc],encapsulation:2}),n})();function MT(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function IT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._UZ(4,"input",28),t.TgZ(5,"button",29),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=a.$implicit,i=t.oxw(3);let o;t.xp6(2),t.hij(" ",null==e.classObj?null:e.classObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(null!==(o=e.linkDocument)&&void 0!==o?o:"")),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function LT(n,a){if(1&n&&(t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.YNc(3,IT,11,6,"div",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.homeworkObj.name," "),t.xp6(1),t.Q6J("ngForOf",e.listLinkDocument)}}function ZT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.TgZ(3,"div",32),t._UZ(4,"input",33),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.examObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard(e.linkDocument)),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function PT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"p",36),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",37)(8,"code",38)(9,"span"),t._uU(10,"<"),t.TgZ(11,"span"),t._uU(12,"iframe"),t.qZA(),t._uU(13,"\xa0 "),t.TgZ(14,"span"),t._uU(15,"width"),t.qZA(),t._uU(16,"="),t.TgZ(17,"span"),t._uU(18,'"100%"'),t.qZA(),t._uU(19,"\xa0 "),t.TgZ(20,"span"),t._uU(21,"height"),t.qZA(),t._uU(22,"="),t.TgZ(23,"span"),t._uU(24,'"900"'),t.qZA(),t._uU(25,"\xa0 "),t.TgZ(26,"span"),t._uU(27,"src"),t.qZA(),t._uU(28,"="),t.TgZ(29,"span"),t._uU(30),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"span"),t._uU(33,"title"),t.qZA(),t._uU(34,"="),t.TgZ(35,"span"),t._uU(36),t.qZA(),t._uU(37,"\xa0 "),t.TgZ(38,"span"),t._uU(39,"frameborder"),t.qZA(),t._uU(40,"="),t.TgZ(41,"span"),t._uU(42,'"0"'),t.qZA(),t._uU(43,"\xa0 "),t.TgZ(44,"span"),t._uU(45,"allow"),t.qZA(),t._uU(46,"="),t.TgZ(47,"span"),t._uU(48,'"accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture"'),t.qZA(),t._uU(49,"\xa0 "),t.TgZ(50,"span"),t._uU(51,"allowfullscreen"),t.qZA(),t._uU(52,">"),t.qZA(),t._uU(53,"\xa0 "),t.TgZ(54,"span"),t._uU(55,"</"),t.TgZ(56,"span"),t._uU(57,"iframe"),t.qZA(),t._uU(58,">"),t.qZA()()(),t.TgZ(59,"div",39)(60,"button",40),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.showCopySuccess())}),t.O4$(),t.TgZ(61,"svg",41),t._UZ(62,"path",42)(63,"polyline",14),t.qZA(),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,6,"lang_testbank_publish_result_had_website"),"? "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_testbank_publish_result_note_tutorial")," "),t.xp6(25),t.hij('"',e.linkDocument,'"'),t.xp6(6),t.hij('"',e.examObj.name,'"'),t.xp6(24),t.Q6J("cdkCopyToClipboard",e.copyLinkToIframe()),t.xp6(4),t.hij(" ",t.lcZ(65,10,"lang_auto_sao_chep_ma_nhung")," ")}}const NT=function(n){return[n]};function DT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"p",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,LT,4,2,"div",7),t.YNc(12,ZT,11,6,"div",7),t.YNc(13,PT,66,12,"div",8),t.TgZ(14,"div",9)(15,"div",10)(16,"a",11),t.ALo(17,"mylocalize"),t.O4$(),t.TgZ(18,"svg",12),t._UZ(19,"path",13)(20,"polyline",14)(21,"path",15)(22,"path",16)(23,"path",17)(24,"path",18),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(27,"div",19)(28,"a",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.backToDocumentManager())}),t.O4$(),t.TgZ(29,"svg",12),t._UZ(30,"path",21),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",1==e.type?e.homeworkObj.isPublished?t.lcZ(4,8,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(5,10,"lang_auto_da_luu_thanh_cong_chua_xuat_ban"):e.examObj.isPublished?t.lcZ(6,12,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(7,14,"lang_auto_da_luu_thanh_cong_chua_xuat_ban")," \u{1f389} "),t.xp6(6),t.hij(" ",t.lcZ(10,16,"lang_auto_copy_link_ben_duoi_va_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai")," "),t.xp6(2),t.Q6J("ngIf",1==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(3),t.Q6J("routerLink",t.VKq(24,NT,t.lcZ(17,18,e.getRouterLinkByType()))),t.xp6(9),t.hij(" ",t.lcZ(26,20,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(32,22,"lang_auto_ve_trang_quan_ly_file")," ")}}let jT=(()=>{class n extends st.Q{constructor(e,i){super(),this.documentConfigService=e,this.activeRoute=i,this.backToLink="",this.linkDocument="",this.listLinkDocument=[],this.linkIframeDocument="",this.homeworkObj={},this.successListHomework=[],this.examObj={},this.type=0}createLinkHomeworkObjs(e,i){var o=[];let s=this.commonService.getCurrentDomain();return e.forEach(r=>{var l,c=i.filter(u=>u.id==r.classroomId);if(c&&c.length>0)o.push({classObj:c[0],homeworkObj:r,linkDocument:`${s}/bai-tap/${r.hashId}`});else{let u=null!==(l=this.commonService.myTranslateInstant("lang_auto_tu_do"))&&void 0!==l?l:"";o.push({classObj:{name:u},homeworkObj:r,linkDocument:`${s}/bai-tap/${r.hashId}`})}}),o}getHomeworkInfoByHashId(e){var i,o=this.commonService.myParseJson(e);this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(null!==(i=o?.[0])&&void 0!==i?i:"",o).subscribe(s=>{var r,l,c,u,d,m,p,b,y;if(1==s.success){this.homeworkObj=null!==(l=null===(r=s.data)||void 0===r?void 0:r.homeworkObj)&&void 0!==l?l:{},this.successListHomework=null!==(u=null===(c=s.data)||void 0===c?void 0:c.successHomeworkObjs)&&void 0!==u?u:[],this.listLinkDocument=this.createLinkHomeworkObjs(null!==(m=null===(d=s.data)||void 0===d?void 0:d.successHomeworkObjs)&&void 0!==m?m:[],null!==(b=null===(p=s.data)||void 0===p?void 0:p.classroomObjs)&&void 0!==b?b:[]);let C=this.commonService.getCurrentDomain();this.linkDocument=`${C}/bai-tap/${this.homeworkObj.hashId}`,this.successStatusObj()}else this.errorStatusObj(null!==(y=s.message)&&void 0!==y?y:"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{var o,s,r;if(1==i.success){this.examObj=null!==(s=null===(o=i.data)||void 0===o?void 0:o.examObj)&&void 0!==s?s:{};let l=this.commonService.getCurrentDomain();this.linkDocument=`${l}/de-thi/${this.examObj.hashId}`,this.linkIframeDocument=`<iframe width="100%" height="900" src="${this.linkDocument}"  title="${this.examObj.name}" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`,this.successStatusObj()}else this.errorStatusObj(null!==(r=i.message)&&void 0!==r?r:"",!0)}))}copyLinkToClipboard(e){return e}copyLinkToIframe(){return this.linkIframeDocument}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getRouterLinkByType(){var e;return 1==this.type?"/admin/testbank/homework-results-list/"+this.homeworkObj.classroomId+"/"+this.homeworkObj.id+"/"+this.homeworkObj.hashId:"/admin/testbank/exam-results-list/"+(null!==(e=this.examObj.categoryId)&&void 0!==e?e:0)+"/"+this.examObj.id+"/0"}backToDocumentManager(){var e;this.myNavigation(1==this.type?"/admin/testbank/document-management/1/0/1":`/admin/testbank/document-management/0/${this.backToLink.includes("shareType")?0:null!==(e=this.examObj.categoryId)&&void 0!==e?e:0}/1`)}ngOnInit(){var e,i;let o=this.commonService.getMyQueryParam("backto"),s=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"";this.type=null!==(i=Number(this.commonService.getMyParam(this.activeRoute,"type")))&&void 0!==i?i:0,1==this.type?this.getHomeworkInfoByHashId(s):this.getExamInfoByHashId(s),this.backToLink=o??"/admin/testbank/document-management/0/0/1",this.commonService.translateMetaData({title:"lang_cms_publish_document_title",description:"lang_cms_publish_document_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.Cq),t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-publish-document"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"text-md","text-center"],["class","box mx-auto mt-5 p-3","style","max-width: 560px",4,"ngIf"],["class","box p-3 text-center mt-5 intro-x mx-auto","style","max-width: 560px;",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","publish-document-WN-MSecHgq",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","publish-document-zSqq-4hFwf",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-md"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","publish-document-pWkyuGbsV",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"azt-copy","relative","mt-5","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","publish-document-OwwIaPHrMx",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"box","p-3","text-center","mt-5","intro-x","mx-auto",2,"max-width","560px"],[1,"tex-md"],[1,"overflow-y-auto","mt-3","rounded-md","text-left","border","border-slate-200","dark:border-darkmode-300","p-3"],[1,"whitespace-nowrap",2,"padding","1rem"],[1,"text-right","mt-3"],["azt-track-service","publish-document--zJK66x3oF",1,"copy-code","btn","py-1","mr-auto","px-2","btn-outline-secondary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","file","data-lucide","file",1,"lucide","lucide-file","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,MT,1,0,"azt-loading-effect",1),t.YNc(2,DT,33,26,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[w.rH,E.sg,E.O5,Fo.i3,xe.Q,Xe._,_t.mp,_t.bT],encapsulation:2}),n})();var zu=A(60167);let tr=(()=>{class n{constructor(e,i,o){this.globalService=e,this.commonService=i,this.examPageResultService=o}getExamStatisticObjs(e,i,o){return this.globalService.startIntervalFunc(e),this.getExamAndQuestionObjsForStatistic(e,i,o??0)}getExamAndQuestionObjsForStatistic(e,i,o){return new pl.y(s=>{this.examPageResultService.apiExamPageResultGetObjV2Get(i,o).subscribe(r=>{var l,c,u,d,m,p,b,y,C,I,D;if(1==r.success){var U=null!==(c=null===(l=r.data)||void 0===l?void 0:l.serverSecond)&&void 0!==c?c:0,B=null!==(d=null===(u=r.data)||void 0===u?void 0:u.examObj)&&void 0!==d?d:{};let et=null!==(p=null===(m=r.data)||void 0===m?void 0:m.totalQuestion)&&void 0!==p?p:B.countQuestion;var q=null!==(y=null===(b=r.data)||void 0===b?void 0:b.classroomWithAvatarAndStudentObjs)&&void 0!==y?y:new Array,R=null!==(I=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify(null===(C=r.data)||void 0===C?void 0:C.questionObjs)))&&void 0!==I?I:new Array;this.getAllExamMarksObjsForStatistic(e,[],i,"",Q=>{var V,Y;if(Q.hasOwnProperty("success")&&1==Q.success){var at=[],tt={};null===(V=Q.resultObjs)||void 0===V||V.forEach(rt=>{rt.examResultObjs&&rt.examResultObjs.length>0&&rt.examResultObjs.forEach(vt=>{var gt,ct,lt;at.push(null!==(gt=vt.id)&&void 0!==gt?gt:0),tt.hasOwnProperty(null!==(ct=vt.id)&&void 0!==ct?ct:0)||(tt[null!==(lt=vt.id)&&void 0!==lt?lt:0]=vt)})}),this.getAllAnswerObjsForStatistic(at,i,rt=>{var vt,gt,ct,lt;if(rt.hasOwnProperty("success")&&1==rt.success){var Et=[];q.forEach(jt=>{jt.classroomObj&&Et.push(jt.classroomObj)});var It=[];null===(vt=rt.resultObjs)||void 0===vt||vt.forEach(jt=>{if(jt.id&&tt.hasOwnProperty(jt.id)){var Rt=Object.assign(Object.assign({},tt[jt.id]),{correctQuestionIds:jt.correctQuestionIds,wrongQuestionIds:jt.wrongQuestionIds,resultQuestionIds:jt.resultQuestionIds});It.push(Rt)}});var wt={examObj:B,classroomObjs:Et,totalQuestion:et,classroomObjsWithStudentObjs:q,questionObjs:R,resultQuestionObjs:It,resultObjs:null!==(gt=Q.resultObjs)&&void 0!==gt?gt:[],curServerTime:U,totalAttended:null===(ct=r.data)||void 0===ct?void 0:ct.totalAttended};R.length>0?(s.next({status:200,success:1,data:wt,message:"successful"}),s.complete()):(s.next({status:200,success:0,data:null,message:"lang_core_there_are_no_question_in_exam"}),s.complete())}else s.next({status:rt.code,success:0,data:null,message:null!==(lt=rt.message)&&void 0!==lt?lt:""}),s.complete()})}else s.next({status:Q.code,success:0,data:null,message:null!==(Y=Q.message)&&void 0!==Y?Y:""}),s.complete()})}else s.next({status:r.code,success:0,data:null,message:null!==(D=r.message)&&void 0!==D?D:""}),s.complete()})})}getAllExamMarksObjsForStatistic(e,i,o,s,r){this.examPageResultService.apiExamPageResultGetObjsV2Get(o,"statistic",s).subscribe(l=>{var c,u,d;1==l.success?(!(null===(c=l.data)||void 0===c)&&c.objs&&i.push(...l.data.objs),null!==(u=l.data)&&void 0!==u&&u.nextPage?this.globalService.isStopIntervalFunc(e)?r({code:200,resultObjs:i,success:1,message:"successful"}):setTimeout(()=>{var m,p;this.getAllExamMarksObjsForStatistic(e,i,o,null!==(p=null===(m=l.data)||void 0===m?void 0:m.nextPage)&&void 0!==p?p:"",r)},300):r({code:200,resultObjs:i,success:1,message:"successful"})):r({code:l.code,resultObjs:[],success:0,message:null!==(d=l.message)&&void 0!==d?d:""})})}getAllAnswerObjsForStatistic(e,i,o){this.examPageResultService.apiExamPageResultGetQuestionStatisticByExamResultIdsPost({examResultIds:e},i).subscribe(s=>{var r,l;if(1==s.success){var c=[];!(null===(r=s.data)||void 0===r)&&r.objs&&c.push(...s.data.objs),o({code:200,resultObjs:c,success:1,message:"successful"})}else o({code:s.code,resultObjs:void 0,success:0,message:null!==(l=s.message)&&void 0!==l?l:""})})}findExamResultOfStudent(e,i){var o=[];return e.length>1?e.forEach(s=>{s.testStatus&&(s.studentId==i||null==s.studentId)&&o.push(s)}):1==e.length&&(e[0].studentId==i||null==e[0].studentId)&&o.push(e[0]),o}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Oa.U),t.LFG(Qe.v),t.LFG(Bt.DR))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class er extends Xo.v{constructor(){super(...arguments),this.countTested=0,this.countTrue=0,this.countNotAnswer=0,this.countAttended=0,this.countFalse=0,this.studentWhoFalse=[],this.studentWhoNotAnswer=[]}}class Ju{constructor(){this.listResult=[],this.listQuestions=[]}}var Al=A(54729),nr=A(98674),Sl=A(90893);function qT(n,a){1&n&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),t.xp6(3),t.hij("",t.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function FT(n,a){1&n&&(t.TgZ(0,"div",6)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}function QT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.handleChangeClassStatistic(s))}),t.TgZ(1,"button",16),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(3);let o;t.xp6(1),t.Gre("nav-link w-full py-2 ",i.idClassObj==e.id?"active":""," "),t.xp6(1),t.hij(" ",t.lcZ(3,4,null!==(o=e.name)&&void 0!==o?o:"lang_auto_thi_sinh_tu_do")," ")}}function UT(n,a){if(1&n&&(t.TgZ(0,"ul",13),t.YNc(1,QT,4,6,"li",14),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.classroomObjs)}}function BT(n,a){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_cms_common_loading"),"..."))}function RT(n,a){if(1&n&&(t.TgZ(0,"div",59)(1,"div",60)(2,"div",61)(3,"mat-icon",62),t._uU(4," close "),t.qZA()()(),t.TgZ(5,"div"),t._UZ(6,"azt-standalone-question",63),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw().index,o=t.oxw(3);t.xp6(6),t.Q6J("startQuestionIndex",o.examObj.startQuestionIndex)("expandInfo",o.examObj.expandInfo)("hideQuestionLabel",!0)("follower",o.followerRenderQuest)("isMobile",o.isMobile)("examObj",o.examObj)("question",e)("index",i)}}function zT(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.Dn7(2,1,t.xi3(3,5,(e.countNotAnswer+e.countFalse)/e.countAttended*100,"1.0-2"),",","."),"%")}}function JT(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1,"0%"),t.qZA())}const lm=function(){return{}};function HT(n,a){if(1&n&&t._UZ(0,"img",66),2&n){const e=t.oxw().$implicit;let i;t.Q6J("nameImages",null!==(i=e.nameImages)&&void 0!==i?i:t.DdM(1,lm))}}function $T(n,a){1&n&&(t.TgZ(0,"span",69),t._uU(1," , "),t.qZA())}function KT(n,a){if(1&n&&(t.TgZ(0,"span",67),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,$T,2,0,"span",68)),2&n){const e=t.oxw(),i=e.$implicit,o=e.index,s=t.oxw(2).$implicit;let r;t.xp6(1),t.Oqu(null!==(r=i.fullName)&&void 0!==r?r:t.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),t.xp6(2),t.Q6J("ngIf",o!=s.studentWhoFalse.length-1)}}function YT(n,a){if(1&n&&(t.ynx(0),t.YNc(1,HT,1,2,"img",64),t.YNc(2,KT,4,4,"ng-template",null,65,t.W1O),t.BQk()),2&n){const e=a.$implicit,i=t.MAs(3),o=t.oxw(5);let s;t.xp6(1),t.Q6J("ngIf",!o.isEmptyObj(null!==(s=e.nameImages)&&void 0!==s?s:t.DdM(2,lm)))("ngIfElse",i)}}function GT(n,a){if(1&n&&(t.ynx(0),t.YNc(1,YT,4,3,"ng-container",41),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.studentWhoFalse)}}function WT(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function VT(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"span",47),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"div",48)(7,"span",47),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",49),t.NdJ("click",function(o){const r=t.CHM(e).$implicit,l=t.MAs(15),c=t.oxw(3);return t.KtG(c.onContextMenu(o,r,l))}),t.O4$(),t.TgZ(11,"svg",50),t._UZ(12,"path",51)(13,"circle",52),t.qZA()()(),t.kcU(),t.TgZ(14,"context-menu",null,53),t.YNc(16,RT,7,8,"ng-template",54),t.qZA()(),t.TgZ(17,"td",55),t._uU(18),t.qZA(),t.TgZ(19,"td",55),t._uU(20),t.qZA(),t.TgZ(21,"td",55),t._uU(22),t.qZA(),t.TgZ(23,"td",55),t._uU(24),t.qZA(),t.TgZ(25,"td",55),t._uU(26),t.qZA(),t.TgZ(27,"td",55),t.YNc(28,zT,4,8,"div",56),t.YNc(29,JT,2,0,"div",56),t.qZA(),t.TgZ(30,"td",55),t.YNc(31,GT,2,1,"ng-container",57),t.YNc(32,WT,2,3,"ng-template",null,58,t.W1O),t.qZA()()}if(2&n){const e=a.$implicit,i=a.index,o=t.MAs(33);t.xp6(4),t.Oqu(i+1),t.xp6(4),t.AsE("",t.lcZ(9,12,"lang_testbank_statistical_question")," ",e.id,""),t.xp6(10),t.Oqu(e.countAttended),t.xp6(2),t.Oqu(e.countTested),t.xp6(2),t.Oqu(e.countNotAnswer),t.xp6(2),t.Oqu(e.countTrue),t.xp6(2),t.Oqu(e.countFalse),t.xp6(2),t.Q6J("ngIf",0!=e.countAttended),t.xp6(1),t.Q6J("ngIf",0==e.countAttended),t.xp6(2),t.Q6J("ngIf",e.studentWhoFalse.length<=50)("ngIfElse",o)}}function XT(n,a){1&n&&t._UZ(0,"span",70)}function t5(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"table",21)(2,"thead",22)(3,"tr")(4,"th",23)(5,"div",24),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",25)(9,"div",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortIDQuestion())}),t._uU(10),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",27),t._UZ(13,"polyline",28)(14,"line",29)(15,"polyline",30)(16,"line",31),t.qZA()()(),t.kcU(),t.TgZ(17,"th",32)(18,"div",33),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountAttended())}),t._uU(19),t.ALo(20,"mytranslate"),t.O4$(),t.TgZ(21,"svg",27),t._UZ(22,"polyline",28)(23,"line",29)(24,"polyline",30)(25,"line",31),t.qZA()()(),t.kcU(),t.TgZ(26,"th",32)(27,"div",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountTested())}),t._uU(28),t.ALo(29,"mytranslate"),t.O4$(),t.TgZ(30,"svg",27),t._UZ(31,"polyline",28)(32,"line",29)(33,"polyline",30)(34,"line",31),t.qZA()()(),t.kcU(),t.TgZ(35,"th",32)(36,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountNotAnswer())}),t._uU(37),t.ALo(38,"mytranslate"),t.O4$(),t.TgZ(39,"svg",27),t._UZ(40,"polyline",28)(41,"line",29)(42,"polyline",30)(43,"line",31),t.qZA()()(),t.kcU(),t.TgZ(44,"th",32)(45,"div",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountTrue())}),t._uU(46),t.ALo(47,"mytranslate"),t.O4$(),t.TgZ(48,"svg",27),t._UZ(49,"polyline",28)(50,"line",29)(51,"polyline",30)(52,"line",31),t.qZA()()(),t.kcU(),t.TgZ(53,"th",32)(54,"div",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountFalse())}),t._uU(55),t.ALo(56,"mytranslate"),t.O4$(),t.TgZ(57,"svg",27),t._UZ(58,"polyline",28)(59,"line",29)(60,"polyline",30)(61,"line",31),t.qZA()()(),t.kcU(),t.TgZ(62,"th",38)(63,"div",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortFalse())}),t._uU(64),t.ALo(65,"mytranslate"),t.O4$(),t.TgZ(66,"svg",27),t._UZ(67,"polyline",28)(68,"line",29)(69,"polyline",30)(70,"line",31),t.qZA()()(),t.kcU(),t.TgZ(71,"th",40)(72,"span"),t._uU(73),t.ALo(74,"mytranslate"),t.qZA()()()(),t.TgZ(75,"tbody"),t.YNc(76,VT,34,14,"tr",41),t.qZA()(),t.TgZ(77,"div",42)(78,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);let s;return t.KtG(o.getDataForClassroomStatistical(null!==(s=o.idClassObj)&&void 0!==s?s:-1,!0))}),t.YNc(79,XT,1,0,"span",44),t._uU(80),t.ALo(81,"mytranslate"),t.O4$(),t.TgZ(82,"svg",45),t._UZ(83,"polyline",46),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,13,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,15,"lang_testbank_statistical_questions")," "),t.xp6(9),t.hij(" ",t.lcZ(20,17,"lang_testbank_statistical_total_number_exam")," "),t.xp6(9),t.hij(" ",t.lcZ(29,19,"lang_testbank_statistical_number_student_did")," "),t.xp6(9),t.hij(" ",t.lcZ(38,21,"lang_testbank_statistical_number_student_do_not")," "),t.xp6(9),t.hij(" ",t.lcZ(47,23,"lang_testbank_statistical_number_student_right")," "),t.xp6(9),t.hij(" ",t.lcZ(56,25,"lang_testbank_statistical_number_student_wrong")," "),t.xp6(9),t.hij(" ",t.lcZ(65,27,"lang_testbank_statistical_student_not_done")," "),t.xp6(9),t.hij(" ",t.lcZ(74,29,"lang_testbank_statistical_student_who_wrong")," "),t.xp6(3),t.Q6J("ngForOf",e.listQuestion),t.xp6(2),t.Q6J("disabled",e.isLoadMore||e.listQuestion.length<50*e.page),t.xp6(1),t.Q6J("ngIf",e.isLoadMore),t.xp6(1),t.hij("\xa0 ",t.lcZ(81,31,"lang_auto_xem_them"),"\xa0 ")}}function e5(n,a){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,UT,2,1,"ul",9),t.TgZ(3,"div",10),t.YNc(4,BT,5,3,"div",11),t.YNc(5,t5,84,33,"div",12),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.classroomObjs&&e.classroomObjs.length>0),t.xp6(2),t.Q6J("ngIf",e.changeClassLoading),t.xp6(1),t.Q6J("ngIf",!e.changeClassLoading)}}let n5=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m){super(),this.testedListApiService=e,this.dialog=i,this.activeRoute=o,this.contextMenuService=s,this.docxService=r,this.dictionaryService=l,this.customQuestionInterface=c,this.fb=u,this.answerTypeService=d,this.examPageResultService=m,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.idClassObj=-1,this.listQuestion=[],this.examObj={},this.isCheckData=!1,this.changeClassLoading=!1,this.isMobile=this.commonService.isMobileOrTable(),this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new ls.G,this.form=new h.nJ({}),this.classroomObjs=[],this.questionObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1,idQuestion:!1},this.page=1,this.isLoadMore=!1}onContextMenu(e,i,o){e&&(this.contextMenuService.show.next({anchorElement:e?.target?e.target:void 0,contextMenu:o,event:e,item:i}),e?.preventDefault(),e?.stopPropagation())}countEssayQuestion(){let e=0;return this.questionObjs.forEach(i=>{this.answerTypeService.isEssayAnswer(i.answerType)&&e++}),e}readyData(e){this.listQuestion=e,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((i,o)=>i.countAttended>0&&o.countAttended>0?(o.countNotAnswer+o.countFalse)/o.countAttended*100-(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(){var e;if(this.dataStatistical){let i=this.dataStatistical;this.examObj.id=i.id,this.examObj.name=i.name;let o=this.commonService.castJsonToClassObjs(Ju,JSON.stringify(i.classrooms));this.classroomObjs=o??[],this.getDataForClassroomStatistical(this.idClassObj?this.idClassObj:null!==(e=this.classroomObjs[0].id)&&void 0!==e?e:-1,!1)}else this.doneLoadingEmit.emit(!1)}getDataForClassroomStatistical(e,i){i?(this.isLoadMore=!0,this.page+=1):this.initStatusObj(),this.examPageResultService.apiExamPageResultListQuestionStatisticGet(this.examObj.id,e,this.page,50).subscribe(o=>{var s,r;if(o.success&&o.data){let l=[];null===(s=o.data.objs)||void 0===s||s.forEach((c,u)=>{var d,m,p,b,y,C,I,D,U;let B=null!==(d=this.commonService.castJsonToClassObj(er,JSON.stringify(c.question)))&&void 0!==d?d:new er;B.countAttended=null!==(m=c.totalTest)&&void 0!==m?m:0,B.countTrue=null!==(p=c.totalCorrect)&&void 0!==p?p:0,B.countNotAnswer=null!==(b=c.totalNotAnswered)&&void 0!==b?b:0,B.countTested=null!==(y=c.totalAnswered)&&void 0!==y?y:0,B.countFalse=null!==(C=c.totalWrong)&&void 0!==C?C:0,B.countTrue=null!==(I=c.totalCorrect)&&void 0!==I?I:0,B.indexQuestion=u,B.studentWhoFalse=null!==(D=c.wrongStudents)&&void 0!==D?D:[],B.studentWhoNotAnswer=null!==(U=c.notAnsweredStudents)&&void 0!==U?U:[],this.questionObjs.push(B)}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(c=>{(this.answerTypeService.isOneChoiceAnswer(c.answerType)||this.answerTypeService.isFillAnswer(c.answerType))&&l.push(c)}),this.readyData(l)}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(null!==(r=o.message)&&void 0!==r?r:"")})}handleChangeClassStatistic(e){var i;this.idClassObj=e.id,this.page=1,this.changeClassLoading=!0,this.questionObjs=[],this.getDataForClassroomStatistical(null!==(i=this.idClassObj)&&void 0!==i?i:-1,!1)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortIDQuestion(){this.checkSortType.idQuestion=!this.checkSortType.idQuestion,this.checkSortType.idQuestion?this.listQuestion.sort((e,i)=>{var o,s;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(s=i.id)&&void 0!==s?s:0)}):this.listQuestion.sort((e,i)=>{var o,s;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(s=i.id)&&void 0!==s?s:0)}).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended):this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((e,i)=>e.countTested-i.countTested):this.listQuestion.sort((e,i)=>e.countTested-i.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer):this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue):this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse):this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse).reverse()}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(yo.x),t.Y36(z.uw),t.Y36(w.gz),t.Y36(_.Lk),t.Y36(Al.x),t.Y36(nr.E),t.Y36(Sl.U),t.Y36(h.QS),t.Y36(wa.T),t.Y36(Bt.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-question-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto","overflow-y-hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true"],[1,"flex","justify-center","pb-5"],["role","status",1,"spinner-border"],[1,"sr-only"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-kkZu13iI5D",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-xrD2etExg-",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-y6cuGZ-SC8",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-seyRna-GRR",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-LND-UYgzgn",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-kM4o8UGqyP",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-X1HptCCAQA",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","20.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-xwuEU3k_LH","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-1b7d1GbqkQ",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],["popUp",""],["contextMenuItem","","style","position: absolute"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notShowWhoFalse",""],[1,"box"],[1,"grid","grid-cols-12"],[1,"col-span-12","py-1",2,"text-align","end","padding-right","10px","cursor","context-menu"],[2,"color","#333333","vertical-align","middle","font-size","18px","width","18px","height","18px","cursor","pointer"],[2,"margin-bottom","0px",3,"startQuestionIndex","expandInfo","hideQuestionLabel","follower","isMobile","examObj","question","index"],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(e,i){1&e&&(t.YNc(0,qT,7,6,"div",0),t.YNc(1,FT,4,3,"div",1),t.YNc(2,e5,6,3,"div",2)),2&e&&(t.Q6J("ngIf",1==i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData))},dependencies:[E.sg,E.O5,ro.lW,qe.Hw,ds.L,Sa.$,_.GI,_.n5,E.JJ,_t.bT,_t.AS],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})();function i5(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",9)(1,"button",10),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.chooseTapClass(s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw();let s;t.xp6(1),t.Gre("nav-link w-full py-2 ",o.indexClassInArray==i?"active":"",""),t.xp6(1),t.hij(" ",t.lcZ(3,4,null!==(s=null==e.classObj?null:e.classObj.name)&&void 0!==s?s:"lang_auto_tu_do")," ")}}function o5(n,a){1&n&&(t.TgZ(0,"div",11)(1,"div",12)(2,"span",13),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_cms_common_loading"),"..."))}function a5(n,a){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody")(1,"tr")(2,"td",29)(3,"p",30),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function s5(n,a){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function r5(n,a){if(1&n&&(t.TgZ(0,"td",35),t._UZ(1,"img",39),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("nameImages",e.nameImages)}}function l5(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function c5(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function u5(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function d5(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function _5(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function m5(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function p5(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function h5(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",35),t._uU(2),t.qZA(),t.YNc(3,s5,2,1,"td",36),t.YNc(4,r5,2,1,"td",36),t.TgZ(5,"td",35),t.YNc(6,l5,3,3,"div",26),t.YNc(7,c5,2,3,"ng-template",null,37,t.W1O),t.qZA(),t.TgZ(9,"td",38),t.YNc(10,u5,3,3,"div",31),t.YNc(11,d5,3,3,"div",31),t.YNc(12,_5,3,3,"div",31),t.YNc(13,m5,3,3,"div",31),t.YNc(14,p5,2,1,"div",31),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(8);t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngIf",!e.nameImages||!e.nameImages.url),t.xp6(1),t.Q6J("ngIf",e.nameImages&&e.nameImages.url),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}function g5(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(4);let i;t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,null!==(i=e.statisticObj[e.indexClassInArray].avgMark)&&void 0!==i?i:0,"1.0-2"),",",".")," ")}}function f5(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody"),t.YNc(1,h5,15,10,"tr",32),t.TgZ(2,"tr",33)(3,"td",34),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",35),t.YNc(7,g5,4,8,"div",31),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",null==e.statisticObj[e.indexClassInArray]?null:e.statisticObj[e.indexClassInArray].studentsWithMark),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.statisticObj.length>0&&e.statisticObj[e.indexClassInArray])}}function x5(n,a){if(1&n&&(t.O4$(),t.YNc(0,f5,8,5,"tbody",31)),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.indexClassInArray>-1)}}function v5(n,a){1&n&&t._UZ(0,"span",45)}function b5(n,a){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.chooseTapClass(o.indexClassInArray,!0))}),t.YNc(2,v5,1,0,"span",42),t._uU(3),t.ALo(4,"mytranslate"),t.O4$(),t.TgZ(5,"svg",43),t._UZ(6,"polyline",44),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.loadingChangeClassroom||e.getStudentLength()<50*e.page),t.xp6(1),t.Q6J("ngIf",e.loadingChangeClassroom),t.xp6(1),t.hij("\xa0 ",t.lcZ(4,3,"lang_auto_xem_them"),"\xa0 ")}}function y5(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr")(4,"th",17)(5,"div",18),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",17)(9,"div",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortFullNameStudent(o.indexClassInArray))}),t._uU(10),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",20),t._UZ(13,"polyline",21)(14,"line",22)(15,"polyline",23)(16,"line",24),t.qZA()()(),t.kcU(),t.TgZ(17,"th",17)(18,"div",18),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"th",17)(22,"div",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.sortStudentByPoint(o.indexClassInArray))}),t._uU(23),t.ALo(24,"mytranslate"),t.O4$(),t.TgZ(25,"svg",20),t._UZ(26,"polyline",21)(27,"line",22)(28,"polyline",23)(29,"line",24),t.qZA()()()()(),t.YNc(30,a5,6,3,"tbody",26),t.YNc(31,x5,1,1,"ng-template",null,27,t.W1O),t.qZA(),t.YNc(33,b5,7,5,"div",28),t.qZA()}if(2&n){const e=t.MAs(32),i=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,7,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,9,"lang_first_and_last_name")," "),t.xp6(9),t.hij(" ",t.lcZ(20,11,"lang_birthday")," "),t.xp6(4),t.hij(" ",t.lcZ(24,13,"lang_point")," "),t.xp6(7),t.Q6J("ngIf",i.indexClassInArray>-1&&i.statisticObj.length>0&&0==(null==i.statisticObj[i.indexClassInArray].studentsWithMark?null:i.statisticObj[i.indexClassInArray].studentsWithMark.length)||-1==i.indexClassInArray&&0==i.freeStudentList.length)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",i.getStudentLength())}}let w5=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.dialog=e,this.sortService=i,this.globalService=o,this.testedListApiService=s,this.homeworkExamService=r,this.examPageResultService=l,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.examObj={},this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:!1,point:!1},this.loadingChangeClassroom=!1,this.page=1}chooseTapClass(e,i,o){var s,r;this.indexClassInArray!=e&&(this.page=1,this.indexClassInArray=e),i&&(this.loadingChangeClassroom=!0,this.page++),this.statisticObj[e]&&null!==(s=this.statisticObj[e].classObj)&&void 0!==s&&s.id?this.examPageResultService.apiExamPageResultListTranscriptsGet(this.examObj.id,null===(r=this.statisticObj[e].classObj)||void 0===r?void 0:r.id,void 0,void 0,1,50*this.page,o??void 0).subscribe(l=>{var c,u,d,m;l.success&&l.data?(this.statisticObj[e].studentsWithMark=this.convertStudentResults(null!==(u=null===(c=l.data.obj)||void 0===c?void 0:c.results)&&void 0!==u?u:[]),this.statisticObj[e].avgMark=null!==(m=null===(d=l.data.obj)||void 0===d?void 0:d.averageMark)&&void 0!==m?m:0,this.readyData(e,!!o),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!0)):i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}):i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}convertStudentResults(e){let i=[];return e.forEach(o=>{var s;let r={id:null===(s=o.studentId)||void 0===s?void 0:s.toString(),resultId:o.id,userId:o.userId,fullName:o.attendeeName,nameImages:o.attendeeNameImage,birthday:o.attendeeBirthDay,mark:o.mark,startedTest:o.startedTest,confirmedAt:o.confirmedAt,status:o.testStatus,createdAt:o.savedAt};i.push(r)}),i}getStudentLength(){var e,i;return this.statisticObj[this.indexClassInArray]&&this.statisticObj[this.indexClassInArray].studentsWithMark&&null!==(i=null===(e=this.statisticObj[this.indexClassInArray].studentsWithMark)||void 0===e?void 0:e.length)&&void 0!==i?i:0}getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let e=this.dataStatistical;this.examObj.id=e.id,this.examObj.name=e.name,e.classrooms?(e.classrooms.forEach(i=>{this.statisticObj.push({classObj:i,studentsWithMark:[]})}),this.chooseTapClass(0)):this.doneLoadingEmit.emit(!1)}else this.doneLoadingEmit.emit(!1)}readyData(e,i){var o,s,r,l;let c=null!==(o=this.commonService.myClone(this.statisticObj[e].studentsWithMark))&&void 0!==o?o:[];if(this.statisticObj[e].studentsWithMark=this.statisticObj[e].classObj&&0==(null===(s=this.statisticObj[e].classObj)||void 0===s?void 0:s.sortType)?this.checkStatusStudent(i?c:this.sortService.sortFirstNameStudents(c)):this.checkStatusStudent(i?c:this.sortService.sortArrayByMultipleObjectKeyAsc(c,"pos","id")),this.statisticObj[e].studentsWithMark)for(let u=0;u<(null!==(l=null===(r=this.statisticObj[e].studentsWithMark)||void 0===r?void 0:r.length)&&void 0!==l?l:0);u++)this.statisticObj[e].studentsWithMark[u].isMarked||(this.statisticObj[e].studentsWithMark[u].mark=-1);this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(e){var i=[];return e.forEach(o=>{this.hasEssayQuestion?o.confirmedAt&&""!=o.confirmedAt&&o.resultId&&o.resultId>0?o.isMarked=!0:o.resultId&&o.resultId>0&&(!o.confirmedAt||""==o.confirmedAt)?o.isNotMarked=!0:o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||0!=o.status?o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||-1!=o.status?null==o.startedTest&&(o.isNotTested=!0):o.isNotSubmit=!0:o.isOnTest=!0:o.resultId&&o.resultId>0?o.isMarked=!0:o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||0!=o.status?o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||-1!=o.status?null==o.startedTest&&(o.isNotTested=!0):o.isNotSubmit=!0:o.isOnTest=!0,i.push(o)}),i}calcAvgClassroomMark(e){var i=0,o=0;return e.forEach(s=>{var r;s.isMarked&&(i++,o+=null!==(r=s.mark)&&void 0!==r?r:0)}),i>0?(o/i).toFixed(2):0}goToStudentList(e){var i,o;let s=`/admin/testbank/statistic/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${null===(o=e.classObj)||void 0===o?void 0:o.id}`,"?backto="+encodeURIComponent(s))}sortFullNameStudent(e){this.checkSortObj.fullName=!this.checkSortObj.fullName,this.checkSortObj.fullName?this.chooseTapClass(e,!1,"fullname"):this.chooseTapClass(e,!1)}sortStudentByPoint(e){this.checkSortObj.point=!this.checkSortObj.point,this.checkSortObj.point?this.chooseTapClass(e,!1,"mark"):this.chooseTapClass(e,!1)}_sortByPoint(e){return e.sort((i,o)=>Number(i.mark)-Number(o.mark)),e}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(ea.K),t.Y36(Oa.U),t.Y36(yo.x),t.Y36(lo.j),t.Y36(Bt.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-score-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:11,vars:6,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],[1,"tab-content","overflow-x-auto","mt-5",2,"overflow-y","hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-ZNru2_q8UiD","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"flex","justify-center","pb-5"],["role","status",1,"spinner-border"],[1,"sr-only"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-1KLvUodz_gh",1,"flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block",2,"cursor","pointer"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["azt-track-service","table-score-ItfC-iAX4HX",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["class","text-center mt-3",4,"ngIf"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"],[1,"text-center","mt-3"],["azt-track-service","table-score-RqXWm0zMM","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),t.YNc(7,i5,4,6,"li",5),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,o5,5,3,"div",7),t.YNc(10,y5,34,15,"div",8),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_bang_diem")," "),t.xp6(5),t.Q6J("ngForOf",i.statisticObj),t.xp6(2),t.Q6J("ngIf",i.loadingChangeClassroom),t.xp6(1),t.Q6J("ngIf",!i.loadingChangeClassroom))},dependencies:[E.sg,E.O5,ro.lW,ds.L,E.JJ,_t.bT,_t.AS,_t._I],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),n})();var zt=A(83321);function k5(n,a){1&n&&(t.O4$(),t.TgZ(0,"svg",19),t._UZ(1,"path",20)(2,"polyline",21)(3,"path",22)(4,"path",23)(5,"path",24)(6,"path",25),t.qZA())}function C5(n,a){1&n&&(t.TgZ(0,"span"),t._UZ(1,"span",26),t._uU(2,"\xa0"),t.qZA())}function T5(n,a){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_success")))}function A5(n,a){1&n&&(t.TgZ(0,"div",28),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_error")))}let cm=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p,b,y){super(),this.statisticalApiService=e,this.testedListApiService=i,this.dialog=o,this.activeRoute=s,this.fb=r,this.sortService=l,this.homeworkExamService=c,this.globalService=u,this._decimalPipe=d,this.dictionaryService=m,this.answerTypeService=p,this.shareFileFlutterService=b,this.timeService=y,this.viewType=-1,this.form=new h.nJ({}),this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.examId=-1,this.examObj={},this.limitQuestions=0,this.loadingDownload=!1,this.isExportSuccess=void 0,this.isOnApp=!1,this.style_first={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}},diagonal:{style:"thin",color:{rgb:"ffffffff"}},diagonalDown:!0},alignment:{vertical:"center",horizontal:"left",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"ff3c8dbc"}}},this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0}},this.style_footer={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0},fill:{patternType:"solid",fgColor:{rgb:"ffffffff"}}},this.statisticalLoaded=!1,this.listquestionLoaded=!1,this.tablescoreLoaded=!1,this.wb=zt.utils.book_new(),this.Statistic={},this.ListQuest={},this.TableScore={}}exportExcel(){let e=this.commonService.getFormObj(this.form);if(0==e.statisticalCheck&&0==e.listquestionCheck&&0==e.tablescoreCheck){let i=this.commonService.myTranslateInstant("lang_auto_khong_the_de_trong_tat_ca_cac_lua_chon_dot");alert(i)}else this.loadingDownload=!0,this.isExportSuccess=void 0,this.getData(this.examId).then(i=>{setTimeout(()=>{var o,s,r,l,c,u,d,m;if(1==i){e.statisticalCheck&&this.AddStatisticToSheet(null!==(o=this.Statistic.statisticClass)&&void 0!==o?o:[],null!==(s=this.Statistic.statisticNoClass)&&void 0!==s?s:[]),e.tablescoreCheck&&this.AddTableScoreToSheet(null!==(r=this.TableScore.statisticClass)&&void 0!==r?r:[],null!==(l=this.TableScore.statisticNoClass)&&void 0!==l?l:[]),e.listquestionCheck&&this.AddListQuestionToSheet(null!==(c=this.ListQuest.attended)&&void 0!==c?c:0,null!==(u=this.ListQuest.listQuestions)&&void 0!==u?u:[],null!==(d=this.ListQuest.listClassStatistic)&&void 0!==d?d:[]);try{var p;if(p=null!=this.examObj?this.commonService.createFileNameExportFile(["Thong ke de thi",null!==(m=this.examObj.name)&&void 0!==m?m:""])+".xlsx":this.commonService.createFileNameExportFile(["Thong ke de thi"])+".xlsx",this.commonService.isMobileWebview(void 0)){var b=zt.write(this.wb,{bookType:"xlsx",bookSST:!0,type:"array"});const C=new Blob([b],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});this.shareFileFlutterService.shareFileWithBlob(C,p)}else zt.writeFile(this.wb,p);this.isExportSuccess=!0,this.loadingDownload=!1,this.wb=zt.utils.book_new()}catch(y){console.log(y),this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=zt.utils.book_new()}}else this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=zt.utils.book_new()},0)})}AddStatisticToSheet(e,i){var o,s,r,l,c,u,d;let m=null!==(o=this.commonService.myTranslateInstant("lang_auto_lop"))&&void 0!==o?o:"",p=null!==(s=this.commonService.myTranslateInstant("lang_auto_so_hoc_sinh"))&&void 0!==s?s:"",b=null!==(r=this.commonService.myTranslateInstant("lang_auto_tren_tb"))&&void 0!==r?r:"(>5)",y=null!==(l=this.commonService.myTranslateInstant("lang_auto_dang_ky"))&&void 0!==l?l:"",C=null!==(c=this.commonService.myTranslateInstant("lang_auto_du_thi"))&&void 0!==c?c:"",I=null!==(u=this.commonService.myTranslateInstant("lang_auto_amount"))&&void 0!==u?u:"",U=1,B=zt.utils.json_to_sheet([{A:m,B:p,C:"",D:"<1",E:"",F:"<2",G:"",H:"<3",I:"",J:"<4",K:"",L:"<5",M:"",N:"<6",O:"",P:"<7",Q:"",R:"<8",S:"",T:"<9",U:"",V:"<=10",W:"",X:b+"(>= 5)",Y:""},{A:"",B:y,C,D:I,E:"%",F:I,G:"%",H:I,I:"%",J:I,K:"%",L:I,M:"%",N:I,O:"%",P:I,Q:"%",R:I,S:"%",T:I,U:"%",V:I,W:"%",X:I,Y:"%"}],{skipHeader:!0});const q_e_c=24;for(let tt=0;tt<=q_e_c;++tt)B[zt.utils.encode_cell({c:tt,r:0})].s=this.style_header;if(null==e&&null==i){let tt=null!==(d=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"))&&void 0!==d?d:"";zt.utils.sheet_add_json(B,[{A:tt}],{skipHeader:!0,origin:-1})}else{e?.forEach(lt=>{null!=lt.classObj&&(zt.utils.sheet_add_json(B,[{A:lt.classObj.name,B:lt.registerCount,C:lt.testedCount,D:lt.markPercent[0].count,E:this._decimalPipe.transform(lt.markPercent[0].percent,"1.0-2"),F:lt.markPercent[1].count,G:this._decimalPipe.transform(lt.markPercent[1].percent,"1.0-2"),H:lt.markPercent[2].count,I:this._decimalPipe.transform(lt.markPercent[2].percent,"1.0-2"),J:lt.markPercent[3].count,K:this._decimalPipe.transform(lt.markPercent[3].percent,"1.0-2"),L:lt.markPercent[4].count,M:this._decimalPipe.transform(lt.markPercent[4].percent,"1.0-2"),N:lt.markPercent[5].count,O:this._decimalPipe.transform(lt.markPercent[5].percent,"1.0-2"),P:lt.markPercent[6].count,Q:this._decimalPipe.transform(lt.markPercent[6].percent,"1.0-2"),R:lt.markPercent[7].count,S:this._decimalPipe.transform(lt.markPercent[7].percent,"1.0-2"),T:lt.markPercent[8].count,U:this._decimalPipe.transform(lt.markPercent[8].percent,"1.0-2"),V:lt.markPercent[9].count,W:this._decimalPipe.transform(lt.markPercent[9].percent,"1.0-2"),X:lt.markPercent[10].count,Y:this._decimalPipe.transform(lt.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),U++)}),i?.forEach(lt=>{var Et;if((null!==(Et=lt.registerCount)&&void 0!==Et?Et:0)>0){let It=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do");zt.utils.sheet_add_json(B,[{A:It,B:lt.registerCount,C:lt.testedCount,D:lt.markPercent[0].count,E:this._decimalPipe.transform(lt.markPercent[0].percent,"1.0-2"),F:lt.markPercent[1].count,G:this._decimalPipe.transform(lt.markPercent[1].percent,"1.0-2"),H:lt.markPercent[2].count,I:this._decimalPipe.transform(lt.markPercent[2].percent,"1.0-2"),J:lt.markPercent[3].count,K:this._decimalPipe.transform(lt.markPercent[3].percent,"1.0-2"),L:lt.markPercent[4].count,M:this._decimalPipe.transform(lt.markPercent[4].percent,"1.0-2"),N:lt.markPercent[5].count,O:this._decimalPipe.transform(lt.markPercent[5].percent,"1.0-2"),P:lt.markPercent[6].count,Q:this._decimalPipe.transform(lt.markPercent[6].percent,"1.0-2"),R:lt.markPercent[7].count,S:this._decimalPipe.transform(lt.markPercent[7].percent,"1.0-2"),T:lt.markPercent[8].count,U:this._decimalPipe.transform(lt.markPercent[8].percent,"1.0-2"),V:lt.markPercent[9].count,W:this._decimalPipe.transform(lt.markPercent[9].percent,"1.0-2"),X:lt.markPercent[10].count,Y:this._decimalPipe.transform(lt.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),U++}});let tt=this.totalPoint(e,i),rt=this.totalPercent(e,i),vt=this.totalStudentRegister(e,i),gt=this.totalStudentTakeExam(e,i),ct=this.commonService.myTranslateInstant("lang_auto_tong_upper");zt.utils.sheet_add_json(B,[{A:ct,B:vt,C:gt,D:tt[0],E:this._decimalPipe.transform(rt[0],"1.0-2"),F:tt[1],G:this._decimalPipe.transform(rt[1],"1.0-2"),H:tt[2],I:this._decimalPipe.transform(rt[2],"1.0-2"),J:tt[3],K:this._decimalPipe.transform(rt[3],"1.0-2"),L:tt[4],M:this._decimalPipe.transform(rt[4],"1.0-2"),N:tt[5],O:this._decimalPipe.transform(rt[5],"1.0-2"),P:tt[6],Q:this._decimalPipe.transform(rt[6],"1.0-2"),R:tt[7],S:this._decimalPipe.transform(rt[7],"1.0-2"),T:tt[8],U:this._decimalPipe.transform(rt[8],"1.0-2"),V:tt[9],W:this._decimalPipe.transform(rt[9],"1.0-2"),X:tt[10],Y:this._decimalPipe.transform(rt[10],"1.0-2")}],{skipHeader:!0,origin:-1}),U++}B["!cols"]=[{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9}],B["!rows"]=[{hpt:28},{hpt:27}],B["!merges"]=[{s:{r:0,c:1},e:{r:0,c:2}},{s:{r:0,c:3},e:{r:0,c:4}},{s:{r:0,c:5},e:{r:0,c:6}},{s:{r:0,c:7},e:{r:0,c:8}},{s:{r:0,c:9},e:{r:0,c:10}},{s:{r:0,c:11},e:{r:0,c:12}},{s:{r:0,c:13},e:{r:0,c:14}},{s:{r:0,c:15},e:{r:0,c:16}},{s:{r:0,c:17},e:{r:0,c:18}},{s:{r:0,c:19},e:{r:0,c:20}},{s:{r:0,c:21},e:{r:0,c:22}},{s:{r:0,c:23},e:{r:0,c:24}}];let V_s_c=0,V_e_c=24,V_e_r=U-1,Y_s_c=0,Y_e_c=24;for(let tt=1;tt<=V_e_r;++tt)for(let rt=V_s_c;rt<=V_e_c;++rt)B[zt.utils.encode_cell({c:rt,r:tt})].s=this.style_body;for(let tt=Y_s_c;tt<=Y_e_c;++tt)B[zt.utils.encode_cell({c:tt,r:U})].s=this.style_footer;let at=this.commonService.myTranslateInstant("lang_auto_thong_ke_pho_diem");zt.utils.book_append_sheet(this.wb,B,at&&at?.length>31?at?.substring(0,27)+"...":at)}AddTableScoreToSheet(e,i){var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R;let et=null!==(o=this.commonService.myTranslateInstant("lang_auto_stt"))&&void 0!==o?o:"",Q=null!==(s=this.commonService.myTranslateInstant("lang_auto_ho_va_ten"))&&void 0!==s?s:"",V=null!==(r=this.commonService.myTranslateInstant("lang_auto_gioi_tinh"))&&void 0!==r?r:"",Y=null!==(l=this.commonService.myTranslateInstant("lang_auto_ngay_sinh"))&&void 0!==l?l:"",at=null!==(c=this.commonService.myTranslateInstant("lang_point"))&&void 0!==c?c:"",tt=this.commonService.myTranslateInstant("lang_auto_cau"),rt=null!==(u=this.commonService.myTranslateInstant("lang_combine_exam_component"))&&void 0!==u?u:"";if(0==e.length&&0==i.length){let It=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_thanh_gia_lam_de"),wt=this.commonService.myTranslateInstant("lang_auto_bang_diem");R=zt.utils.json_to_sheet([{A:It,B:"",C:"",D:"",E:""}],{skipHeader:!0}),zt.utils.book_append_sheet(this.wb,R,wt&&wt?.length>31?wt?.substring(0,27)+"...":wt)}else{var vt=[{width:8},{width:22},{width:34},{width:13},{width:13}];for(let wt=0;wt<this.limitQuestions;wt++)vt.push({width:13});var gt=[{s:{r:0,c:0},e:{r:0,c:4}}],ct=0,lt=[],Et=[];if(R=zt.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0!=e.length&&e.forEach(wt=>{var jt,Rt,Kt,Dt,re,Ut,ni,ii,Xi,Un,gi,fi,ce,xi,Io;let Dn=[{A:null===(jt=wt.classObj)||void 0===jt?void 0:jt.name,B:"",C:"",D:"",E:""},{A:et,B:Q,C:Y,D:V,E:at}],We=5,me=0,oi=0;this.examObj.subjectMarks&&(Dn[0]=Object.assign(Object.assign({},Dn[0]),{F:"",G:"",H:""}),Dn[1]=Object.assign(Object.assign({},Dn[1]),{F:rt+"1",G:rt+"2",H:rt+"3"}),We+=3);for(let Kn=0;Kn<this.limitQuestions;Kn++){We>=26&&(We=0,me++);let sn="";0==me&&0==oi?sn=this.keyColExcelArr[We]:(me>26&&(me=1,oi++),oi>0&&(sn+=this.keyColExcelArr[oi-1]),sn+=this.keyColExcelArr[me-1]+""+this.keyColExcelArr[We]),Dn[0][sn]="",Dn[1][sn]=tt+" "+(Kn+(null!==(Rt=this.examObj.startQuestionIndex)&&void 0!==Rt?Rt:0)<9?"0"+(Kn+(null!==(Kt=this.examObj.startQuestionIndex)&&void 0!==Kt?Kt:1)):Kn+(null!==(Dt=this.examObj.startQuestionIndex)&&void 0!==Dt?Dt:1)),We++}if(lt.push(ct+=2),gt.push({s:{r:ct-1,c:0},e:{r:ct-1,c:4}}),R=zt.utils.sheet_add_json(R,Dn,{skipHeader:!0,origin:-1}),0==(null===(re=wt.studentsWithMark)||void 0===re?void 0:re.length)){let sn=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),B:"",C:"",D:"",E:""}];gt.push({s:{r:ct+1,c:0},e:{r:ct+1,c:4}}),zt.utils.sheet_add_json(R,sn,{skipHeader:!0,origin:-1}),ct++}else{let Kn=null!==(Ut=this.commonService.myTranslateInstant("lang_auto_chua_cham"))&&void 0!==Ut?Ut:"",sn=null!==(ni=this.commonService.myTranslateInstant("lang_auto_dang_thi"))&&void 0!==ni?ni:"",Ee=null!==(ii=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai"))&&void 0!==ii?ii:"",da=null!==(Xi=this.commonService.myTranslateInstant("lang_auto_chua_thi"))&&void 0!==Xi?Xi:"",Lo=null!==(Un=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh"))&&void 0!==Un?Un:"",wc=null!==(gi=this.commonService.myTranslateInstant("lang_auto_nam"))&&void 0!==gi?gi:"",ma=null!==(fi=this.commonService.myTranslateInstant("lang_auto_nu"))&&void 0!==fi?fi:"";null===(ce=wt.studentsWithMark)||void 0===ce||ce.forEach((rn,vi)=>{var ai,_n;let vn,bi=this.timeService.formatOnlyDateByUserUnit(rn.birthday)?this.timeService.formatOnlyDateByUserUnit(rn.birthday):void 0;vn=rn.isNotMarked?Kn:rn.isOnTest?sn:rn.isNotSubmit?Ee:rn.isNotTested?da:null!==(ai=rn.mark)&&void 0!==ai?ai:"",ct++;let In=[{A:vi+1,B:rn.fullName,C:null==rn.birthday?Lo:`${bi}`,D:`${1==rn.gender?wc:ma}`,E:`${vn}`}],nn=5;if(this.examObj.subjectMarks){let ue={};ue=rn.subjectMarks?{F:rn.subjectMarks[0],G:rn.subjectMarks[1],H:rn.subjectMarks[2]}:{F:"",G:"",H:""},In[0]=Object.assign(Object.assign({},In[0]),ue),nn+=3}if(rn.answeredQuestions){let ue=0,Te=0;for(let Ae=0;Ae<(null===(_n=rn.answeredQuestions)||void 0===_n?void 0:_n.length);Ae++){nn>=26&&(nn=0,ue++);let ln="";0==ue&&0==Te?ln=this.keyColExcelArr[nn]:(ue>26&&(ue=1,Te++),Te>0&&(ln+=this.keyColExcelArr[Te-1]),ln+=this.keyColExcelArr[ue-1]+""+this.keyColExcelArr[nn]),In[0][ln]=this.checkAnswerQuestionTableExport(rn.answeredQuestions[Ae]),nn++}}zt.utils.sheet_add_json(R,In,{skipHeader:!0,origin:-1})})}let ua=null!==(xi=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh"))&&void 0!==xi?xi:"";zt.utils.sheet_add_json(R,[{A:ua,B:"",C:"",D:"",E:this.calcAvgClassroomMark(null!==(Io=wt.studentsWithMark)&&void 0!==Io?Io:[])}],{skipHeader:!0,origin:-1}),Et.push(ct+1),gt.push({s:{r:(ct+=3)-2,c:0},e:{r:ct-2,c:3}}),zt.utils.sheet_add_json(R,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}),0!=i.length){let wt=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_da_tham_gia_nhung_chua_chon_lop"),jt=[{A:wt,B:"",C:"",D:"",E:""},{A:et,B:Q,C:Y,D:V,E:at}],Rt=5,Kt=0,Dt=0;this.examObj.subjectMarks&&(jt[0]=Object.assign(Object.assign({},jt[0]),{F:"",G:"",H:""}),jt[1]=Object.assign(Object.assign({},jt[1]),{F:rt+"1",G:rt+"2",H:rt+"3"}),Rt+=3);for(let re=0;re<this.limitQuestions;re++){Rt>=26&&(Rt=0,Kt++);let Ut="";0==Kt&&0==Dt?Ut=this.keyColExcelArr[Rt]:(Kt>26&&(Kt=1,Dt++),Dt>0&&(Ut+=this.keyColExcelArr[Dt-1]),Ut+=this.keyColExcelArr[Kt-1]+""+this.keyColExcelArr[Rt]),jt[0][Ut]="",jt[1][Ut]=tt+" "+(re+(null!==(d=this.examObj.startQuestionIndex)&&void 0!==d?d:0)<9?"0"+(re+(null!==(m=this.examObj.startQuestionIndex)&&void 0!==m?m:1)):re+(null!==(p=this.examObj.startQuestionIndex)&&void 0!==p?p:1)),Rt++}if(gt.push({s:{r:(ct+=2)-1,c:0},e:{r:ct-1,c:4}}),lt.push(ct),R=zt.utils.sheet_add_json(R,jt,{skipHeader:!0,origin:-1}),null==i)wt=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),zt.utils.sheet_add_json(R,[{A:wt,B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1});else{let re=1,Ut=null!==(b=this.commonService.myTranslateInstant("lang_auto_chua_cham"))&&void 0!==b?b:"",ni=null!==(y=this.commonService.myTranslateInstant("lang_auto_dang_thi"))&&void 0!==y?y:"",ii=null!==(C=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai"))&&void 0!==C?C:"",Xi=null!==(I=this.commonService.myTranslateInstant("lang_auto_chua_thi"))&&void 0!==I?I:"",Un=null!==(D=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh"))&&void 0!==D?D:"",gi=null!==(U=this.commonService.myTranslateInstant("lang_auto_nam"))&&void 0!==U?U:"",fi=null!==(B=this.commonService.myTranslateInstant("lang_auto_nu"))&&void 0!==B?B:"";Object.keys(i).forEach(xi=>{var Io,Dn;let oi,We=i[xi],me=this.timeService.formatOnlyDateByUserUnit(We.birthday)?this.timeService.formatOnlyDateByUserUnit(We.birthday):void 0;oi=We.isNotMarked?Ut:We.isOnTest?ni:We.isNotSubmit?ii:We.isNotTested?Xi:null!==(Io=We.mark)&&void 0!==Io?Io:"";let ua=[{A:re,B:We.fullName,C:null==me?Un:`${me}`,D:`${1==We.gender?gi:fi}`,E:oi}],Kn=5;if(this.examObj.subjectMarks){let sn={};sn=We.subjectMarks?{F:We.subjectMarks[0],G:We.subjectMarks[1],H:We.subjectMarks[2]}:{F:"",G:"",H:""},ua[0]=Object.assign(Object.assign({},ua[0]),sn),Kn+=3}if(We.answeredQuestions){let sn=0,Ee=0;for(let da=0;da<(null===(Dn=We.answeredQuestions)||void 0===Dn?void 0:Dn.length);da++){Kn>=26&&(Kn=0,sn++);let Lo="";0==sn&&0==Ee?Lo=this.keyColExcelArr[Kn]:(sn>26&&(sn=1,Ee++),Ee>0&&(Lo+=this.keyColExcelArr[Ee-1]),Lo+=this.keyColExcelArr[sn-1]+""+this.keyColExcelArr[Kn]),ua[0][Lo]=this.checkAnswerQuestionTableExport(We.answeredQuestions[da]),Kn++}}zt.utils.sheet_add_json(R,ua,{skipHeader:!0,origin:-1}),re++,ct++});let ce=null!==(q=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh"))&&void 0!==q?q:"";zt.utils.sheet_add_json(R,[{A:ce,B:"",C:"",D:"",E:this.calcAvgClassroomMark(i)}],{skipHeader:!0,origin:-1}),Et.push(ct+1),gt.push({s:{r:ct+=1,c:0},e:{r:ct,c:3}}),zt.utils.sheet_add_json(R,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}}R["!cols"]=vt,R["!merges"]=gt;for(let wt=0;wt<lt.length;wt++){R[zt.utils.encode_cell({c:0,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},R[zt.utils.encode_cell({c:1,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},R[zt.utils.encode_cell({c:2,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},R[zt.utils.encode_cell({c:3,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},R[zt.utils.encode_cell({c:4,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},R[zt.utils.encode_cell({c:0,r:lt[wt]})].s=this.style_header,R[zt.utils.encode_cell({c:1,r:lt[wt]})].s=this.style_header,R[zt.utils.encode_cell({c:2,r:lt[wt]})].s=this.style_header,R[zt.utils.encode_cell({c:3,r:lt[wt]})].s=this.style_header,R[zt.utils.encode_cell({c:4,r:lt[wt]})].s=this.style_header,R[zt.utils.encode_cell({c:0,r:Et[wt]})].s=this.style_footer,R[zt.utils.encode_cell({c:1,r:Et[wt]})].s=this.style_footer,R[zt.utils.encode_cell({c:2,r:Et[wt]})].s=this.style_footer,R[zt.utils.encode_cell({c:3,r:Et[wt]})].s=this.style_footer,R[zt.utils.encode_cell({c:4,r:Et[wt]})].s=this.style_footer;for(let Rt=0;Rt<this.limitQuestions+(this.examObj.subjectMarks?3:0);Rt++)R[zt.utils.encode_cell({c:4,r:lt[wt]-1})]&&(R[zt.utils.encode_cell({c:4,r:lt[wt]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}}),R[zt.utils.encode_cell({c:5+Rt,r:lt[wt]})]&&(R[zt.utils.encode_cell({c:5+Rt,r:lt[wt]})].s=this.style_header),R[zt.utils.encode_cell({c:5+Rt,r:Et[wt]})]&&(R[zt.utils.encode_cell({c:5+Rt,r:Et[wt]})].s=this.style_footer);let jt={s:{c:0,r:lt[wt]+1},e:{c:4+this.limitQuestions+(this.examObj.subjectMarks?3:0),r:Et[wt]}};for(let Rt=jt.s.r;Rt<=jt.e.r;++Rt)for(let Kt=jt.s.c;Kt<=jt.e.c;++Kt)R[zt.utils.encode_cell({c:Kt,r:Rt})]&&(R[zt.utils.encode_cell({c:Kt,r:Rt})].s=this.style_body)}let It=this.commonService.myTranslateInstant("lang_auto_bang_diem");zt.utils.book_append_sheet(this.wb,R,It&&It?.length>31?It?.substring(0,27)+"...":It)}}AddListQuestionToSheet(e,i,o){var s,r=0,l=[{s:{r:0,c:0},e:{r:0,c:7}}],u=[],d=[];if(s=zt.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0==e){let m=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),p=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export"),b=[{A:m,B:"",C:"",D:"",E:"",F:"",G:"",H:""}];r++,u.push(r),l.push({s:{r:r-1,c:0},e:{r:r-1,c:7}}),s=zt.utils.sheet_add_json(s,b,{skipHeader:!0,origin:-1}),zt.utils.book_append_sheet(this.wb,s,p&&p?.length>31?p?.substring(0,27)+"...":p)}else{let m=this.commonService.myTranslateInstant("lang_auto_cau_hoi"),p=this.commonService.myTranslateInstant("lang_auto_tong_so_hs_du_thi"),b=this.commonService.myTranslateInstant("lang_auto_so_hs_da_lam"),y=this.commonService.myTranslateInstant("lang_auto_so_hs_chua_lam"),C=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_dung"),I=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_sai"),D=this.commonService.myTranslateInstant("lang_auto_ty_le_hoc_sinh_khong_hoan_thanh_cau"),U=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_lam_sai"),B=this.commonService.myTranslateInstant("lang_auto_thong_ke_theo_cau_hoi"),q=this.commonService.myTranslateInstant("lang_auto_cau");o.length>0&&o.forEach(Q=>{var V,Y;let at=[{A:Q.name,B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:m,B:p,C:b,D:y,E:C,F:I,G:D,H:U}];if(u.push(r+=2),l.push({s:{r:r-1,c:0},e:{r:r-1,c:7}}),s=zt.utils.sheet_add_json(s,at,{skipHeader:!0,origin:-1}),0==(null===(V=Q.listQuestions)||void 0===V?void 0:V.length)){let rt=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),B:"",C:"",D:"",E:"",F:"",G:"",H:""}];r++,l.push({s:{r:r+1,c:0},e:{r:r+1,c:7}}),zt.utils.sheet_add_json(s,rt,{skipHeader:!0,origin:-1})}else null===(Y=Q.listQuestions)||void 0===Y||Y.forEach((tt,rt)=>{let gt=[{A:`${q} ${tt.id}`,B:tt.countAttended,C:tt.countTested,D:tt.countNotAnswer,E:tt.countTrue,F:tt.countFalse,G:0!=tt.countAttended?`${((tt.countNotAnswer+tt.countFalse)/tt.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(tt.studentWhoFalse).join(", ")}];zt.utils.sheet_add_json(s,gt,{skipHeader:!0,origin:-1}),r++});d.push(r),r+=2,zt.utils.sheet_add_json(s,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""}],{skipHeader:!0,origin:-1})});let R=[{A:B,B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:m,B:p,C:b,D:y,E:C,F:I,G:D,H:U}];l.push({s:{r:(r+=2)-1,c:0},e:{r:r-1,c:7}}),u.push(r),s=zt.utils.sheet_add_json(s,R,{skipHeader:!0,origin:-1}),i.forEach((Q,V)=>{zt.utils.sheet_add_json(s,[{A:`${q} ${Q.id}`,B:Q.countAttended,C:Q.countTested,D:Q.countNotAnswer,E:Q.countTrue,F:Q.countFalse,G:0!=Q.countAttended?`${((Q.countNotAnswer+Q.countFalse)/Q.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(Q.studentWhoFalse).join(", ")}],{skipHeader:!0,origin:-1}),r++}),d.push(r),zt.utils.sheet_add_json(s,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:""}],{skipHeader:!0,origin:-1}),s["!cols"]=[{wch:15.25},{wch:10.63},{wch:6.25},{wch:8.25},{wch:9},{wch:7.25},{wch:16.75},{wch:60}],s["!merges"]=l;for(let Q=0;Q<u.length;Q++){s[zt.utils.encode_cell({c:0,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:1,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:2,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:3,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:4,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:5,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:6,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:7,r:u[Q]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},s[zt.utils.encode_cell({c:0,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:1,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:2,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:3,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:4,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:5,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:6,r:u[Q]})].s=this.style_header,s[zt.utils.encode_cell({c:7,r:u[Q]})].s=this.style_header;let V={s:{c:0,r:u[Q]+1},e:{c:7,r:d[Q]}};for(let Y=V.s.r;Y<=V.e.r;++Y)for(let at=V.s.c;at<=V.e.c;++at)s[zt.utils.encode_cell({c:at,r:Y})].s=this.style_body}let et=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export");zt.utils.book_append_sheet(this.wb,s,et&&et?.length>31?et?.substring(0,27)+"...":et)}}getNameStudentWhoFalse(e){var i,o=[];return e.forEach(s=>{s.fullName&&o.push(s.fullName)}),o.length>50?[null!==(i=this.commonService.myTranslateInstant("lang_testbank_statistical_student_not_show_who_wrong"))&&void 0!==i?i:""]:o}checkStatusStudent(e,i){var o=[];return e.forEach(s=>{i?s.confirmedAt&&""!=s.confirmedAt&&s.resultId&&s.resultId>0?s.isMarked=!0:s.resultId&&s.resultId>0&&(!s.confirmedAt||""==s.confirmedAt)?s.isNotMarked=!0:s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||0!=s.status?s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||-1!=s.status?null==s.startedTest&&(s.isNotTested=!0):s.isNotSubmit=!0:s.isOnTest=!0:s.resultId&&s.resultId>0?s.isMarked=!0:s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||0!=s.status?s.resultId&&0!=s.resultId||!s.startedTest||""==s.startedTest||-1!=s.status?null==s.startedTest&&(s.isNotTested=!0):s.isNotSubmit=!0:s.isOnTest=!0,o.push(s)}),o}totalPercent(e,i){var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt=[0,0,0,0,0,0,0,0,0,0,0,0];let vt=0;for(let gt=0;gt<e.length;gt++)e[gt]&&(vt+=null!==(o=e[gt].testedCount)&&void 0!==o?o:0,rt[0]+=null!==(s=e[gt].markPercent[0].count)&&void 0!==s?s:0,rt[1]+=null!==(r=e[gt].markPercent[1].count)&&void 0!==r?r:0,rt[2]+=null!==(l=e[gt].markPercent[2].count)&&void 0!==l?l:0,rt[3]+=null!==(c=e[gt].markPercent[3].count)&&void 0!==c?c:0,rt[4]+=null!==(u=e[gt].markPercent[4].count)&&void 0!==u?u:0,rt[5]+=null!==(d=e[gt].markPercent[5].count)&&void 0!==d?d:0,rt[6]+=null!==(m=e[gt].markPercent[6].count)&&void 0!==m?m:0,rt[7]+=null!==(p=e[gt].markPercent[7].count)&&void 0!==p?p:0,rt[8]+=null!==(b=e[gt].markPercent[8].count)&&void 0!==b?b:0,rt[9]+=null!==(y=e[gt].markPercent[9].count)&&void 0!==y?y:0,rt[10]+=null!==(C=e[gt].markPercent[10].count)&&void 0!==C?C:0);for(let gt=0;gt<i.length;gt++)i[gt]&&(vt+=null!==(I=i[gt].testedCount)&&void 0!==I?I:0,rt[0]+=null!==(D=i[gt].markPercent[0].count)&&void 0!==D?D:0,rt[1]+=null!==(U=i[gt].markPercent[1].count)&&void 0!==U?U:0,rt[2]+=null!==(B=i[gt].markPercent[2].count)&&void 0!==B?B:0,rt[3]+=null!==(q=i[gt].markPercent[3].count)&&void 0!==q?q:0,rt[4]+=null!==(R=i[gt].markPercent[4].count)&&void 0!==R?R:0,rt[5]+=null!==(et=i[gt].markPercent[5].count)&&void 0!==et?et:0,rt[6]+=null!==(Q=i[gt].markPercent[6].count)&&void 0!==Q?Q:0,rt[7]+=null!==(V=i[gt].markPercent[7].count)&&void 0!==V?V:0,rt[8]+=null!==(Y=i[gt].markPercent[8].count)&&void 0!==Y?Y:0,rt[9]+=null!==(at=i[gt].markPercent[9].count)&&void 0!==at?at:0,rt[10]+=null!==(tt=i[gt].markPercent[10].count)&&void 0!==tt?tt:0);for(let gt=0;gt<rt.length;gt++)rt[gt]=100*rt[gt]/vt;return rt}totalPoint(e,i){var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y;let at=[0,0,0,0,0,0,0,0,0,0,0];for(let tt=0;tt<e.length;tt++)at[0]+=null!==(o=e[tt].markPercent[0].count)&&void 0!==o?o:0,at[1]+=null!==(s=e[tt].markPercent[1].count)&&void 0!==s?s:0,at[2]+=null!==(r=e[tt].markPercent[2].count)&&void 0!==r?r:0,at[3]+=null!==(l=e[tt].markPercent[3].count)&&void 0!==l?l:0,at[4]+=null!==(c=e[tt].markPercent[4].count)&&void 0!==c?c:0,at[5]+=null!==(u=e[tt].markPercent[5].count)&&void 0!==u?u:0,at[6]+=null!==(d=e[tt].markPercent[6].count)&&void 0!==d?d:0,at[7]+=null!==(m=e[tt].markPercent[7].count)&&void 0!==m?m:0,at[8]+=null!==(p=e[tt].markPercent[8].count)&&void 0!==p?p:0,at[9]+=null!==(b=e[tt].markPercent[9].count)&&void 0!==b?b:0,at[10]+=null!==(y=e[tt].markPercent[10].count)&&void 0!==y?y:0;for(let tt=0;tt<i.length;tt++)at[0]+=null!==(C=i[tt].markPercent[0].count)&&void 0!==C?C:0,at[1]+=null!==(I=i[tt].markPercent[1].count)&&void 0!==I?I:0,at[2]+=null!==(D=i[tt].markPercent[2].count)&&void 0!==D?D:0,at[3]+=null!==(U=i[tt].markPercent[3].count)&&void 0!==U?U:0,at[4]+=null!==(B=i[tt].markPercent[4].count)&&void 0!==B?B:0,at[5]+=null!==(q=i[tt].markPercent[5].count)&&void 0!==q?q:0,at[6]+=null!==(R=i[tt].markPercent[6].count)&&void 0!==R?R:0,at[7]+=null!==(et=i[tt].markPercent[7].count)&&void 0!==et?et:0,at[8]+=null!==(Q=i[tt].markPercent[8].count)&&void 0!==Q?Q:0,at[9]+=null!==(V=i[tt].markPercent[9].count)&&void 0!==V?V:0,at[10]+=null!==(Y=i[tt].markPercent[10].count)&&void 0!==Y?Y:0;return at}totalStudentRegister(e,i){var o,s,r=0;for(let l=0;l<e.length;l++)r+=null!==(o=e[l].registerCount)&&void 0!==o?o:0;for(let l=0;l<i.length;l++)r+=null!==(s=i[l].registerCount)&&void 0!==s?s:0;return r}totalStudentTakeExam(e,i){var o,s,r=0;for(let l=0;l<e.length;l++)r+=null!==(o=e[l].testedCount)&&void 0!==o?o:0;for(let l=0;l<i.length;l++)r+=null!==(s=i[l].testedCount)&&void 0!==s?s:0;return r}calcAvgClassroomMark(e){var i=0,o=0;return e.forEach(s=>{var r;s.isMarked&&(i++,o+=null!==(r=s.mark)&&void 0!==r?r:0)}),i>0?(o/i).toFixed(2):0}convertStatisticalAllQuestion(e){var i,o,s,r,l,c,u,d,m,p,b,y=null!==(i=e.data)&&void 0!==i&&i.questionObjs&&e.data.questionObjs.length>0?e.data.questionObjs:new Array,C=[];C=null!==(o=this.commonService.castJsonToClassObjs(er,JSON.stringify(y)))&&void 0!==o?o:[];var I=null!==(s=e.data)&&void 0!==s&&s.resultQuestionObjs&&(null===(r=e.data)||void 0===r?void 0:r.resultQuestionObjs.length)>0?e.data.resultQuestionObjs:new Array,D=this.dictionaryService.getDictionaryByGroupFieldTS(I,"userId"),U=[];this.examObj=null!==(c=null===(l=e.data)||void 0===l?void 0:l.examObj)&&void 0!==c?c:{};var B=null!==(u=e.data)&&void 0!==u&&u.resultObjs&&e.data.resultObjs.length>0?e.data.resultObjs:new Array,q={},R=[],et={};null===(m=null===(d=e.data)||void 0===d?void 0:d.classroomObjsWithStudentObjs)||void 0===m||m.forEach(tt=>{tt.classroomObj&&tt.studentObjs&&tt.studentObjs.forEach(rt=>{var vt,gt;if(rt.parentId){this.commonService.filterArray(R,rt.parentId)||R.push(rt.parentId);var ct=this.statisticalApiService.findExamResultOfStudent(null!==(vt=D[rt.parentId])&&void 0!==vt?vt:[],null!==(gt=rt.id)&&void 0!==gt?gt:"0");if(ct.length>0){var lt=ct[ct.length-1],Et=rt.parentId+"_"+(rt.id?rt.id:0)+"_"+lt.id;q.hasOwnProperty(Et)||(q[Et]=rt),et.hasOwnProperty(Et)||(et[Et]=lt)}}})}),B.forEach(tt=>{var rt,vt,gt,ct;if(tt.parentId&&D.hasOwnProperty(null!==(rt=tt.parentId)&&void 0!==rt?rt:0)&&!this.commonService.filterArray(R,null!==(vt=tt.parentId)&&void 0!==vt?vt:"0")){var lt=D[tt.parentId][D[tt.parentId].length-1];let It=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");tt.fullName=null!==(gt=tt.fullName)&&void 0!==gt?gt:It+"_"+lt.id;var Et=tt.parentId+"_"+(null!==(ct=tt.id)&&void 0!==ct?ct:0)+"_"+lt.id;q.hasOwnProperty(Et)||(q[Et]=tt),et.hasOwnProperty(Et)||(et[Et]=lt)}});for(var Q=0;Q<C.length;Q++)(this.answerTypeService.isOneChoiceAnswer(C[Q].answerType)||this.answerTypeService.isFillAnswer(C[Q].answerType))&&(C[Q].countFalse=0,C[Q].countNotAnswer=0,C[Q].countTested=0,C[Q].countAttended=0,C[Q].countTrue=0,C[Q].indexQuestion=Q,C[Q].studentWhoFalse=[],C[Q].studentWhoNotAnswer=[]);for(var V in et)if(et.hasOwnProperty(V))for(Q=0;Q<C.length;Q++)if(this.answerTypeService.isOneChoiceAnswer(C[Q].answerType)||this.answerTypeService.isFillAnswer(C[Q].answerType)){var Y=et[V],at=q.hasOwnProperty(V)?q[V]:{};Y.correctQuestionIds&&this.commonService.filterArray(Y.correctQuestionIds,C[Q].id)&&(C[Q].countTrue++,C[Q].countTested++),Y.wrongQuestionIds&&this.commonService.filterArray(Y.wrongQuestionIds,C[Q].id)&&(C[Q].countFalse++,C[Q].countTested++,this.commonService.filterArray(C[Q].studentWhoFalse,{studentId:at.id,parentId:at.parentId,fullName:at.fullName,nameImages:at.nameImages})||null===(p=C[Q].studentWhoFalse)||void 0===p||p.push({studentId:at.id,parentId:at.parentId,fullName:at.fullName,nameImages:at.nameImages})),Y.resultQuestionIds&&this.commonService.filterArray(Y.resultQuestionIds,C[Q].id)&&C[Q].countAttended++,this.commonService.filterArray(Y.resultQuestionIds,C[Q].id)&&!this.commonService.filterArray(Y.correctQuestionIds,C[Q].id)&&!this.commonService.filterArray(Y.wrongQuestionIds,C[Q].id)&&(C[Q].countNotAnswer++,this.commonService.filterArray(C[Q].studentWhoNotAnswer,{studentId:at.id,parentId:at.parentId,fullName:at.fullName,nameImages:at.nameImages})||null===(b=C[Q].studentWhoNotAnswer)||void 0===b||b.push({studentId:at.id,parentId:at.parentId,fullName:at.fullName,nameImages:at.nameImages}))}return C.forEach(tt=>{(this.answerTypeService.isOneChoiceAnswer(tt.answerType)||this.answerTypeService.isFillAnswer(tt.answerType))&&U.push(tt)}),U}getData(e){return(0,so.mG)(this,void 0,void 0,function*(){return new Promise((i,o)=>{let s=0,r=0,l=this.commonService.getFormObj(this.form);1==l.statisticalCheck&&0==this.statisticalLoaded&&s++,1==l.listquestionCheck&&0==this.listquestionLoaded&&s++,1==l.tablescoreCheck&&0==this.tablescoreLoaded&&s++,0==s&&i(!0),this.statisticalApiService.getExamStatisticObjs("statistic_export_excel",e,1).subscribe(c=>{var u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt,vt,gt,ct,lt,Et,It,wt,jt;if(1==l.statisticalCheck&&0==this.statisticalLoaded){if(1==c.success&&c.data){var Rt=c.data.classroomObjsWithStudentObjs&&c.data.classroomObjsWithStudentObjs.length>0?c.data.classroomObjsWithStudentObjs:new Array,Kt=c.data.resultObjs&&c.data.resultObjs.length>0?c.data.resultObjs:new Array,Dt=this.testedListApiService.mergeStudentWithAvatar(Kt??[]),re=[],Ut=[],ni=this.dictionaryService.getDictionaryByFieldTS(Dt,"parentId");if(this.examObj=null!==(u=c.data.examObj)&&void 0!==u?u:{},Rt.length>0){var ii=[],Xi=[];Rt.forEach(bi=>{var vn,In=[],nn=[],ue=0;null===(vn=bi.studentObjs)||void 0===vn||vn.forEach(kn=>{var Zo,Po,Ve,Yn,Ii,mn,ho;ii.push(null!==(Zo=kn.parentId)&&void 0!==Zo?Zo:"0");var No=null!==(Po=kn.parentId)&&void 0!==Po?Po:"0";if(ni.hasOwnProperty(No)&&(Array.isArray(kn.examResultObjs)||(kn.examResultObjs=[]),kn.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Ii=null===(Ve=kn.examResultObjs)||void 0===Ve?void 0:Ve.concat(null!==(Yn=ni[No].examResultObjs)&&void 0!==Yn?Yn:[]))&&void 0!==Ii?Ii:[],null!==(mn=kn.id)&&void 0!==mn?mn:"0")),kn.examResultObjs&&kn.examResultObjs.length>0){var pn=kn.examResultObjs[kn.examResultObjs.length-1];pn.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(ho=this.examObj.examType)&&void 0!==ho?ho:0)||pn.confirmedAt)&&nn.push(pn)}ue++});for(var Te=this.homeworkExamService.countMarks(nn),Ae=0;Ae<Te.length;Ae++)In.push({key:10==Ae?"Avg":9==Ae?"<= 10":"<"+(Ae+1),count:Te[Ae],percent:this.homeworkExamService.calcPercent(Te[Ae],nn.length)});re.push({classObj:bi.classroomObj,registerCount:ue,testedCount:nn.length>0?nn.length:0,markPercent:In})});var Un=[],gi=[];Dt.forEach(bi=>{var vn,In,nn,ue;if(!this.commonService.filterArray(ii,null!==(vn=bi.parentId)&&void 0!==vn?vn:"0")&&bi.examResultObjs&&bi.examResultObjs.length>0){var Te=this.statisticalApiService.findExamResultOfStudent(bi.examResultObjs,null!==(In=bi.id)&&void 0!==In?In:"0");if(Te.length>0){var Ae=Te[Te.length-1];Ae.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==(nn=this.examObj.examType)&&void 0!==nn?nn:0)||Ae.confirmedAt)&&gi.push(Ae),Xi.push(null!==(ue=bi.parentId)&&void 0!==ue?ue:"0"))}}});for(var fi=this.homeworkExamService.countMarks(gi),ce=0;ce<fi.length;ce++)Un.push({key:10==ce?"Avg":9==ce?"<=10":"<"+(ce+1),count:fi[ce],percent:this.homeworkExamService.calcPercent(fi[ce],gi.length)});gi.length>0&&Ut.push({classObj:{},registerCount:Xi.length>0?Xi.length:0,testedCount:gi.length>0?gi.length:0,markPercent:Un})}else{var Io=[],Dn=[],We=[];for(Dt.forEach(vn=>{var In,nn,ue;if(vn.examResultObjs&&vn.examResultObjs.length>0){var Te=this.statisticalApiService.findExamResultOfStudent(vn.examResultObjs,null!==(In=vn.id)&&void 0!==In?In:"0");if(Te.length>0){var Ae=Te[Te.length-1];Ae.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==(nn=this.examObj.examType)&&void 0!==nn?nn:0)||Ae.confirmedAt)&&Dn.push(Ae),We.push(null!==(ue=vn.parentId)&&void 0!==ue?ue:"0"))}}}),fi=this.homeworkExamService.countMarks(Dn),ce=0;ce<fi.length;ce++)Io.push({key:10==ce?"Avg":9==ce?"<=10":"<"+(ce+1),count:fi[ce],percent:this.homeworkExamService.calcPercent(fi[ce],Dn.length)});Dn.length>0&&Ut.push({classObj:{},registerCount:We.length>0?We.length:0,testedCount:Dn.length>0?Dn.length:0,markPercent:Io})}this.Statistic={statisticClass:re,statisticNoClass:Ut},this.statisticalLoaded=!0}else this.showErrorSnack(null!==(d=c.message)&&void 0!==d?d:"");r++,r==s&&i(!0)}if(1==l.listquestionCheck&&0==this.listquestionLoaded){if(1==c.success&&c.data){Kt=c.data.resultObjs&&c.data.resultObjs.length>0?c.data.resultObjs:new Array,Dt=this.testedListApiService.mergeStudentWithAvatar(Kt??[]);var me=null!==(m=this.commonService.castJsonToClassObjs(Ju,JSON.stringify(c.data.classroomObjs)))&&void 0!==m?m:[],oi={};null===(p=c.data.classroomObjsWithStudentObjs)||void 0===p||p.forEach(ue=>{var Te,Ae,ln,kn;ue.classroomObj&&ue.studentObjs&&(oi.hasOwnProperty(null!==(Ae=null===(Te=ue.classroomObj)||void 0===Te?void 0:Te.id)&&void 0!==Ae?Ae:0)||(oi[null!==(kn=null===(ln=ue.classroomObj)||void 0===ln?void 0:ln.id)&&void 0!==kn?kn:0]=ue.studentObjs))});for(var ua=c.data.questionObjs&&c.data.questionObjs.length>0?c.data.questionObjs:new Array,Kn=null!==(b=c.data)&&void 0!==b&&b.resultQuestionObjs&&(null===(y=c.data)||void 0===y?void 0:y.resultQuestionObjs.length)>0?c.data.resultQuestionObjs:new Array,sn=this.dictionaryService.getDictionaryByGroupFieldTS(Kn,"userId"),Ee=(ii=[],0);Ee<me.length;Ee++)oi.hasOwnProperty(null!==(C=me[Ee].id)&&void 0!==C?C:0)&&(me[Ee].students=oi[null!==(I=me[Ee].id)&&void 0!==I?I:0]),null===(D=me[Ee].students)||void 0===D||D.forEach(ue=>{var Te,Ae;if(ue.parentId&&!this.commonService.filterArray(ii,ue.parentId)&&ii.push(ue.parentId),ue.parentId&&sn.hasOwnProperty(ue.parentId)&&!this.commonService.filterArray(me[Ee].listResult,sn[ue.parentId][0])){var ln=this.statisticalApiService.findExamResultOfStudent(sn[ue.parentId],null!==(Te=ue.id)&&void 0!==Te?Te:"0");ln.length>0&&(null===(Ae=me[Ee].listResult)||void 0===Ae||Ae.push(ln[ln.length-1]))}});var da=!1,Lo={id:-1,name:this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"),userTested:[],listResult:[],listQuestions:[]};Dt.forEach(ue=>{var Te,Ae,ln,kn,Zo;if(!this.commonService.filterArray(ii,null!==(Te=ue.parentId)&&void 0!==Te?Te:"0")){if(ue.parentId&&sn.hasOwnProperty(null!==(Ae=ue.parentId)&&void 0!==Ae?Ae:0)){var Po=this.statisticalApiService.findExamResultOfStudent(sn[ue.parentId],null!==(ln=ue.id)&&void 0!==ln?ln:"0");if(Po.length>0){var Ve=Po[Po.length-1];Lo.listResult.push(Ve);let Yn=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");ue.fullName=null!==(kn=ue.fullName)&&void 0!==kn?kn:Yn+"_"+Ve.id,null===(Zo=Lo.userTested)||void 0===Zo||Zo.push(ue)}}da=!0}}),da&&me.push(Lo);var wc=0;for(ce=0;ce<me.length;ce++){var ma=[];ma=null!==(U=this.commonService.castJsonToClassObjs(er,JSON.stringify(ua)))&&void 0!==U?U:[];for(var rn=0;rn<ma.length;rn++)(this.answerTypeService.isOneChoiceAnswer(ma[rn].answerType)||this.answerTypeService.isFillAnswer(ma[rn].answerType))&&(ma[rn].indexQuestion=rn,me[ce].listQuestions.push(ma[rn]));var vi=this.dictionaryService.getDictionaryByGroupFieldTS(null!==(B=me[ce].listResult)&&void 0!==B?B:[],"userId");for(var ai in vi)if(vi.hasOwnProperty(ai)){wc++;var _n=-1==me[ce].id?null===(q=me[ce].userTested)||void 0===q?void 0:q.filter(Te=>Te.parentId==vi[ai][0].userId):null===(R=me[ce].students)||void 0===R?void 0:R.filter(Te=>Te.parentId==vi[ai][0].userId);for(Ee=0;Ee<me[ce].listQuestions.length;Ee++)(this.answerTypeService.isOneChoiceAnswer(me[ce].listQuestions[Ee].answerType)||this.answerTypeService.isFillAnswer(me[ce].listQuestions[Ee].answerType))&&(vi[ai][0].correctQuestionIds&&this.commonService.filterArray(vi[ai][0].correctQuestionIds,me[ce].listQuestions[Ee].id)&&(me[ce].listQuestions[Ee].countTrue++,me[ce].listQuestions[Ee].countTested++),vi[ai][0].wrongQuestionIds&&this.commonService.filterArray(vi[ai][0].wrongQuestionIds,me[ce].listQuestions[Ee].id)&&(me[ce].listQuestions[Ee].countFalse++,me[ce].listQuestions[Ee].countTested++,_n&&_n.length>0&&(this.commonService.filterArray(me[ce].listQuestions[Ee].studentWhoFalse,{studentId:_n[0].id,parentId:_n[0].parentId,fullName:_n[0].fullName,nameImages:_n[0].nameImages})||null===(et=me[ce].listQuestions[Ee].studentWhoFalse)||void 0===et||et.push({studentId:_n[0].id,parentId:_n[0].parentId,fullName:_n[0].fullName,nameImages:_n[0].nameImages}))),vi[ai][0].resultQuestionIds&&this.commonService.filterArray(vi[ai][0].resultQuestionIds,me[ce].listQuestions[Ee].id)&&me[ce].listQuestions[Ee].countAttended++,this.commonService.filterArray(vi[ai][0].resultQuestionIds,me[ce].listQuestions[Ee].id)&&!this.commonService.filterArray(vi[ai][0].correctQuestionIds,me[ce].listQuestions[Ee].id)&&!this.commonService.filterArray(vi[ai][0].wrongQuestionIds,me[ce].listQuestions[Ee].id)&&(me[ce].listQuestions[Ee].countNotAnswer++,_n&&_n.length>0&&(this.commonService.filterArray(me[ce].listQuestions[Ee].studentWhoNotAnswer,{studentId:_n[0].id,parentId:_n[0].parentId,fullName:_n[0].fullName,nameImages:_n[0].nameImages})||null===(Q=me[ce].listQuestions[Ee].studentWhoNotAnswer)||void 0===Q||Q.push({studentId:_n[0].id,parentId:_n[0].parentId,fullName:_n[0].fullName,nameImages:_n[0].nameImages}))))}}this.ListQuest={attended:wc,listQuestions:this.convertStatisticalAllQuestion(c),listClassStatistic:me},this.listquestionLoaded=!0}else this.showErrorSnack(null!==(V=c.message)&&void 0!==V?V:"");r++,r==s&&i(!0)}if(1==l.tablescoreCheck&&0==this.tablescoreLoaded){if(1==c.success&&c.data){this.examObj=null!==(at=null===(Y=c.data)||void 0===Y?void 0:Y.examObj)&&void 0!==at?at:{},this.limitQuestions=null!==(tt=c.data.totalQuestion)&&void 0!==tt?tt:null!==(rt=this.examObj.countQuestion)&&void 0!==rt?rt:0;let bi=this.homeworkExamService.hasEssayInExam(null!==(vt=this.examObj.examType)&&void 0!==vt?vt:0),vn=c.data.classroomObjsWithStudentObjs&&c.data.classroomObjsWithStudentObjs.length>0?c.data.classroomObjsWithStudentObjs:new Array,In=null!==(gt=c.data)&&void 0!==gt&&gt.resultObjs&&(null===(ct=c.data)||void 0===ct?void 0:ct.resultObjs.length)>0?c.data.resultObjs:new Array,nn=this.testedListApiService.mergeStudentWithAvatar(In??[]),ue=[],Te={};nn?.forEach(Ve=>{var Yn,Ii;let mn=null!==(Yn=Ve.parentId)&&void 0!==Yn?Yn:"0";Te.hasOwnProperty(mn)||(Te[mn]=null!==(Ii=Ve.examResultObjs)&&void 0!==Ii?Ii:[]),ue=ue.concat(Te[mn])});let Ae=this.testedListApiService.filterExamResultOnTest(ue,this.examObj,null!==(lt=c.data.curServerTime)&&void 0!==lt?lt:0),ln=[],kn=[],Zo=[],Po=[];this.homeworkExamService.mustInClassroom(null!==(Et=this.examObj.whoAllow)&&void 0!==Et?Et:0)&&vn.length>0&&vn.forEach(Ve=>{var Yn;let Ii=[];null===(Yn=Ve.studentObjs)||void 0===Yn||Yn.forEach(mn=>{var ho,No,pn,Is,Lr,Ls,Zr,Pr;let Gn={};Po.push(null!==(ho=mn.parentId)&&void 0!==ho?ho:"0");let kc=null!==(No=mn.parentId)&&void 0!==No?No:"0";Te.hasOwnProperty(kc)&&(Array.isArray(mn.examResultObjs)||(mn.examResultObjs=[]),mn.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Lr=null===(pn=mn.examResultObjs)||void 0===pn?void 0:pn.concat(null!==(Is=Te[kc])&&void 0!==Is?Is:[]))&&void 0!==Lr?Lr:[],null!==(Ls=mn.id)&&void 0!==Ls?Ls:"0")),mn.examResultObjs&&mn.examResultObjs.length>0&&(Gn=mn.examResultObjs[mn.examResultObjs.length-1]??{});let Zs=Ae.hasOwnProperty(null!==(Zr=Gn.userId)&&void 0!==Zr?Zr:"0")?Ae[null!==(Pr=Gn.userId)&&void 0!==Pr?Pr:"0"]:0,u_=Gn.mark?Gn.mark:0,mh=Gn.id&&Zs>0?Gn.id:0,tP=Gn.startedTest?Gn.startedTest:null,eP=Gn.confirmedAt?Gn.confirmedAt:null,nP=Gn.answeredQuestions?Gn.answeredQuestions:[],iP=Gn.subjectMarks?Gn.subjectMarks:void 0,oP=Object.assign(Object.assign({},mn),{subjectMarks:iP,mark:u_,resultId:mh,startedTest:tP,confirmedAt:eP,status:Zs,answeredQuestions:nP});Ii.push(oP)}),ln.push({classObj:Ve.classroomObj,studentsWithMark:Ii})}),In.forEach(Ve=>{var Yn,Ii,mn,ho,No;let pn={};if(!this.commonService.filterArray(Po,null!==(Yn=Ve.parentId)&&void 0!==Yn?Yn:"0")){Ve.examResultObjs&&Ve.examResultObjs.length>0&&(pn=Ve.examResultObjs[Ve.examResultObjs.length-1]);let Is=Ae.hasOwnProperty(null!==(Ii=pn.userId)&&void 0!==Ii?Ii:"0")?Ae[null!==(mn=pn.userId)&&void 0!==mn?mn:"0"]:0,Lr=pn.mark?pn.mark:0,Ls=pn.id&&Is>0?pn.id:0,Zr=pn.startedTest?pn.startedTest:null,Pr=pn.confirmedAt?pn.confirmedAt:null,Gn=pn.answeredQuestions?pn.answeredQuestions:[],kc=pn.subjectMarks?pn.subjectMarks:void 0,Zs=Object.assign(Object.assign({},Ve),{subjectMarks:kc,mark:Lr,resultId:Ls,startedTest:Zr,confirmedAt:Pr,nameImages:null!==(ho=Ve.nameImages)&&void 0!==ho?ho:{},nameImage:"",status:Is,answeredQuestions:Gn}),u_=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");Zs.fullName=null!==(No=Zs.fullName)&&void 0!==No?No:u_+"_"+Ls,Zo.push(Zs)}}),kn=Zo;for(let Ve of ln)Ve.studentsWithMark=this.checkStatusStudent(Ve.classObj&&0==Ve.classObj.sortType?this.sortService.sortFirstNameStudents(null!==(It=Ve.studentsWithMark)&&void 0!==It?It:[]):this.sortService.sortArrayByMultipleObjectKeyAsc(null!==(wt=this.commonService.myClone(Ve.studentsWithMark))&&void 0!==wt?wt:[],"pos","id"),bi);this.TableScore={statisticClass:ln,statisticNoClass:this.checkStatusStudent(this.sortService.sortFirstNameStudents(kn),bi)},this.tablescoreLoaded=!0}else this.showErrorSnack(null!==(jt=c.message)&&void 0!==jt?jt:"");r++,r==s&&i(!0)}})})})}getObjKeyLength(e){return Object.keys(e).length}checkAnswerQuestionTableExport(e){var i;let o="";return o=e.correct&&!e.isEssay?"lang_auto_dung":e.correct&&e.isEssay?"lang_auto_cau_TL":"lang_auto_sai",null!==(i=this.commonService.myTranslateInstant(o))&&void 0!==i?i:""}ngOnInit(){this.form=this.fb.group({statisticalCheck:[!0],listquestionCheck:[!0],tablescoreCheck:[!0]}),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e;this.examId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==e?e:0,this.isOnApp=this.isMobileWebView}),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_export_excel1"),this.globalService.stopIntervalFunc("statistic_export_excel2"),this.globalService.stopIntervalFunc("statistic_export_excel3"),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tr),t.Y36(yo.x),t.Y36(z.uw),t.Y36(w.gz),t.Y36(h.QS),t.Y36(ea.K),t.Y36(lo.j),t.Y36(Oa.U),t.Y36(E.JJ),t.Y36(nr.E),t.Y36(wa.T),t.Y36(ka.g),t.Y36(Si.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-export-excel"]],inputs:{viewType:"viewType"},features:[t.qOj],decls:33,vars:20,consts:[[1,"intro-y","flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-y","mt-3"],[3,"formGroup"],[1,"box","p-5"],[1,"text-slate-500","border-b","border-slate-200","flex","mb-2","pb-2"],[1,"form-check","mt-2"],["name","statistical","formControlName","statisticalCheck","id","checkbox-switch-1","type","checkbox",1,"form-check-input"],["for","checkbox-switch-1",1,"form-check-label"],["id","checkbox-switch-2","name","listquestion","formControlName","listquestionCheck","type","checkbox",1,"form-check-input"],["for","checkbox-switch-2",1,"form-check-label"],["id","checkbox-switch-3","name","tablescore","formControlName","tablescoreCheck","type","checkbox","value","",1,"form-check-input"],["for","checkbox-switch-3",1,"form-check-label"],[1,"mt-3"],["azt-track-service","export-excel-0azmzdMjTm",1,"btn","btn-outline-primary","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","lucide w-4 h-4 mr-2","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(87, 141, 32);",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(204, 49, 80);",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h3"],["d","M8 17h3"],["d","M14 13h3"],["d","M14 17h3"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"col-md-8","mt-4",2,"color","rgb(87, 141, 32)"],[1,"col-md-8","mt-4",2,"color","rgb(204, 49, 80)"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",5)(14,"div",6),t._UZ(15,"input",9),t.TgZ(16,"label",10),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6),t._UZ(21,"input",11),t.TgZ(22,"label",12),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()(),t.TgZ(25,"div",13)(26,"button",14),t.NdJ("click",function(){return i.exportExcel()}),t.YNc(27,k5,7,0,"svg",15),t.YNc(28,C5,3,0,"span",16),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.YNc(31,T5,3,3,"div",17),t.YNc(32,A5,3,3,"div",18),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,10,"lang_testbank_statistical_export_data_to_excel")," "),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(6),t.hij(" ",t.lcZ(12,12,"lang_testbank_statistical_score_spectrum_statistics")," "),t.xp6(6),t.hij(" ",t.lcZ(18,14,"lang_testbank_statistical_statistics_right_wrong")," "),t.xp6(6),t.hij(" ",t.lcZ(24,16,"lang_testbank_statistical_transcript")," "),t.xp6(4),t.Q6J("ngIf",1!=i.loadingDownload),t.xp6(1),t.Q6J("ngIf",1==i.loadingDownload),t.xp6(1),t.hij("",t.lcZ(30,18,"lang_testbank_statistical_export_file_excel")," "),t.xp6(2),t.Q6J("ngIf",!i.isOnApp&&!0===i.isExportSuccess),t.xp6(1),t.Q6J("ngIf",!i.isOnApp&&!1===i.isExportSuccess))},dependencies:[E.O5,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,Pe.M,_t.bT],styles:["td[_ngcontent-%COMP%]{vertical-align:center!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:unset!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#3c8dbc;color:#fff}hr.solid[_ngcontent-%COMP%]{border-top:1px solid #bbb}input[type=checkbox].export-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;vertical-align:middle}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#252525;padding-top:1rem;padding-bottom:.5rem;padding-right:.5rem}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:19px;height:19px;margin:-2px 10px 0 0;vertical-align:middle;cursor:pointer}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:.5rem}@media only screen and (max-width: 720px){.export-block[_ngcontent-%COMP%]{text-align:center}}"]}),n})();function S5(n,a){1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),t.xp6(3),t.hij("",t.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function O5(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.goToStudentList(o))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.classObj.name))}}function E5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function M5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function I5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function L5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function Z5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function P5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function N5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function D5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function j5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function q5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function F5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function Q5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function U5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function B5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function R5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function z5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function J5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function H5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function $5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function K5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function Y5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function G5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function W5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function V5(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function X5(n,a){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,O5,3,3,"td",52),t.YNc(2,E5,2,1,"td",53),t.YNc(3,M5,2,1,"td",53),t.YNc(4,I5,2,1,"td",53),t.YNc(5,L5,4,8,"td",53),t.YNc(6,Z5,2,1,"td",53),t.YNc(7,P5,4,8,"td",53),t.YNc(8,N5,2,1,"td",53),t.YNc(9,D5,4,8,"td",53),t.YNc(10,j5,2,1,"td",53),t.YNc(11,q5,4,8,"td",53),t.YNc(12,F5,2,1,"td",53),t.YNc(13,Q5,4,8,"td",53),t.YNc(14,U5,2,1,"td",53),t.YNc(15,B5,4,8,"td",53),t.YNc(16,R5,2,1,"td",53),t.YNc(17,z5,4,8,"td",53),t.YNc(18,J5,2,1,"td",53),t.YNc(19,H5,4,8,"td",53),t.YNc(20,$5,2,1,"td",53),t.YNc(21,K5,4,8,"td",53),t.YNc(22,Y5,2,1,"td",53),t.YNc(23,G5,4,8,"td",53),t.YNc(24,W5,2,1,"td",53),t.YNc(25,V5,4,8,"td",53),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj)}}function tA(n,a){if(1&n&&(t.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),t._uU(10),t.qZA(),t.TgZ(11,"div",12)(12,"div",13),t.O4$(),t.TgZ(13,"svg",14),t._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(19,"div",18)(20,"div",19),t._uU(21),t.qZA()()(),t.TgZ(22,"div",12)(23,"div",13),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(31,"div",18)(32,"div",19),t._uU(33),t.qZA(),t.TgZ(34,"div",22),t._uU(35),t.ALo(36,"replace"),t.ALo(37,"number"),t.qZA()()(),t.TgZ(38,"div",12)(39,"div",13),t.O4$(),t.TgZ(40,"svg",14),t._UZ(41,"path",23)(42,"path",24)(43,"path",25),t.qZA(),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(46,"div",18)(47,"div",19),t._uU(48),t.qZA()()()()(),t.TgZ(49,"div",26)(50,"div",27)(51,"p",28),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"div",18)(55,"span",19),t._uU(56),t.ALo(57,"replace"),t.ALo(58,"number"),t.qZA()()(),t.TgZ(59,"div",29)(60,"p",28),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"div",18)(64,"span",19),t._uU(65),t.qZA(),t.TgZ(66,"div",22),t._uU(67),t.ALo(68,"replace"),t.ALo(69,"number"),t.qZA()()(),t.TgZ(70,"div",27)(71,"p",30),t._uU(72),t.ALo(73,"mytranslate"),t.qZA(),t.TgZ(74,"div",18)(75,"span",19),t._uU(76),t.qZA(),t.TgZ(77,"div",31),t._uU(78),t.ALo(79,"replace"),t.ALo(80,"number"),t.qZA()()(),t.TgZ(81,"div",27)(82,"p",30),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.TgZ(85,"div",18)(86,"span",19),t._uU(87),t.qZA(),t.TgZ(88,"div",32),t._uU(89),t.ALo(90,"replace"),t.ALo(91,"number"),t.qZA()()()()()()(),t.TgZ(92,"div",33),t._UZ(93,"app-export-excel",34),t.qZA(),t.TgZ(94,"div",2)(95,"div",3)(96,"h3",4),t._uU(97),t.ALo(98,"mytranslate"),t.qZA()(),t.TgZ(99,"div",35)(100,"div",36)(101,"div",37)(102,"div",38),t._UZ(103,"div",39),t.qZA()()()()(),t.TgZ(104,"div",2)(105,"div",3)(106,"h3",4),t._uU(107),t.ALo(108,"mytranslate"),t.qZA()(),t.TgZ(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr")(114,"th",44),t._uU(115),t.ALo(116,"mytranslate"),t.qZA(),t.TgZ(117,"th",45),t._uU(118),t.ALo(119,"mytranslate"),t.qZA(),t.TgZ(120,"th",45),t._uU(121,"< 1"),t.qZA(),t.TgZ(122,"th",45),t._uU(123,"< 2"),t.qZA(),t.TgZ(124,"th",45),t._uU(125,"< 3"),t.qZA(),t.TgZ(126,"th",45),t._uU(127,"< 4"),t.qZA(),t.TgZ(128,"th",45),t._uU(129,"< 5"),t.qZA(),t.TgZ(130,"th",45),t._uU(131,"< 6"),t.qZA(),t.TgZ(132,"th",45),t._uU(133,"< 7"),t.qZA(),t.TgZ(134,"th",45),t._uU(135,"< 8"),t.qZA(),t.TgZ(136,"th",45),t._uU(137,"< 9"),t.qZA(),t.TgZ(138,"th",45),t._uU(139,"<= 10"),t.qZA(),t.TgZ(140,"th",45),t._uU(141),t.ALo(142,"mytranslate"),t.qZA()()(),t.TgZ(143,"tbody",46)(144,"tr"),t._UZ(145,"td"),t.TgZ(146,"td",47),t._uU(147),t.ALo(148,"mytranslate"),t.qZA(),t.TgZ(149,"td",47),t._uU(150),t.ALo(151,"mytranslate"),t.qZA(),t.TgZ(152,"td",48),t._uU(153),t.ALo(154,"mytranslate"),t.qZA(),t.TgZ(155,"td",48),t._uU(156,"%"),t.qZA(),t.TgZ(157,"td",48),t._uU(158),t.ALo(159,"mytranslate"),t.qZA(),t.TgZ(160,"td",48),t._uU(161,"%"),t.qZA(),t.TgZ(162,"td",48),t._uU(163),t.ALo(164,"mytranslate"),t.qZA(),t.TgZ(165,"td",48),t._uU(166,"%"),t.qZA(),t.TgZ(167,"td",48),t._uU(168),t.ALo(169,"mytranslate"),t.qZA(),t.TgZ(170,"td",48),t._uU(171,"%"),t.qZA(),t.TgZ(172,"td",48),t._uU(173),t.ALo(174,"mytranslate"),t.qZA(),t.TgZ(175,"td",48),t._uU(176,"%"),t.qZA(),t.TgZ(177,"td",48),t._uU(178),t.ALo(179,"mytranslate"),t.qZA(),t.TgZ(180,"td",48),t._uU(181,"%"),t.qZA(),t.TgZ(182,"td",48),t._uU(183),t.ALo(184,"mytranslate"),t.qZA(),t.TgZ(185,"td",48),t._uU(186,"%"),t.qZA(),t.TgZ(187,"td",48),t._uU(188),t.ALo(189,"mytranslate"),t.qZA(),t.TgZ(190,"td",48),t._uU(191,"%"),t.qZA(),t.TgZ(192,"td",48),t._uU(193),t.ALo(194,"mytranslate"),t.qZA(),t.TgZ(195,"td",48),t._uU(196,"%"),t.qZA(),t.TgZ(197,"td",48),t._uU(198),t.ALo(199,"mytranslate"),t.qZA(),t.TgZ(200,"td",48),t._uU(201,"%"),t.qZA(),t.TgZ(202,"td",48),t._uU(203),t.ALo(204,"mytranslate"),t.qZA(),t.TgZ(205,"td",48),t._uU(206,"%"),t.qZA()(),t.YNc(207,X5,26,25,"tr",49),t.TgZ(208,"tr",50)(209,"td",51),t._uU(210),t.ALo(211,"mytranslate"),t.qZA(),t.TgZ(212,"td",51),t._uU(213),t.qZA(),t.TgZ(214,"td",51),t._uU(215),t.qZA(),t.TgZ(216,"td",51),t._uU(217),t.qZA(),t.TgZ(218,"td",51),t._uU(219),t.ALo(220,"replace"),t.ALo(221,"number"),t.qZA(),t.TgZ(222,"td",51),t._uU(223),t.qZA(),t.TgZ(224,"td",51),t._uU(225),t.ALo(226,"replace"),t.ALo(227,"number"),t.qZA(),t.TgZ(228,"td",51),t._uU(229),t.qZA(),t.TgZ(230,"td",51),t._uU(231),t.ALo(232,"replace"),t.ALo(233,"number"),t.qZA(),t.TgZ(234,"td",51),t._uU(235),t.qZA(),t.TgZ(236,"td",51),t._uU(237),t.ALo(238,"replace"),t.ALo(239,"number"),t.qZA(),t.TgZ(240,"td",51),t._uU(241),t.qZA(),t.TgZ(242,"td",51),t._uU(243),t.ALo(244,"replace"),t.ALo(245,"number"),t.qZA(),t.TgZ(246,"td",51),t._uU(247),t.qZA(),t.TgZ(248,"td",51),t._uU(249),t.ALo(250,"replace"),t.ALo(251,"number"),t.qZA(),t.TgZ(252,"td",51),t._uU(253),t.qZA(),t.TgZ(254,"td",51),t._uU(255),t.ALo(256,"replace"),t.ALo(257,"number"),t.qZA(),t.TgZ(258,"td",51),t._uU(259),t.qZA(),t.TgZ(260,"td",51),t._uU(261),t.ALo(262,"replace"),t.ALo(263,"number"),t.qZA(),t.TgZ(264,"td",51),t._uU(265),t.qZA(),t.TgZ(266,"td",51),t._uU(267),t.ALo(268,"replace"),t.ALo(269,"number"),t.qZA(),t.TgZ(270,"td",51),t._uU(271),t.qZA(),t.TgZ(272,"td",51),t._uU(273),t.ALo(274,"replace"),t.ALo(275,"number"),t.qZA(),t.TgZ(276,"td",51),t._uU(277),t.qZA(),t.TgZ(278,"td",51),t._uU(279),t.ALo(280,"replace"),t.ALo(281,"number"),t.qZA()()()()()()()),2&n){const e=t.oxw();let i;t.xp6(3),t.hij(" ",t.lcZ(4,66,"lang_auto_chi_so_co_ban")," "),t.xp6(7),t.hij(" ",e.examCommonStatistical.name," "),t.xp6(7),t.hij(" ",t.lcZ(18,68,"lang_auto_so_nguoi_dang_ky_thi")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalRegister),t.xp6(8),t.hij(" ",t.lcZ(30,70,"lang_auto_so_nguoi_thi")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalNotComplete),t.xp6(2),t.hij("",null!==(i=t.Dn7(36,72,t.xi3(37,76,e.examCommonStatistical.totalNotComplete/e.examCommonStatistical.totalRegister*100,"1.0-2"),",","."))&&void 0!==i?i:0,"%"),t.xp6(9),t.hij(" ",t.lcZ(45,79,"lang_auto_tong_luot_lam")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalAttendee),t.xp6(4),t.hij(" ",t.lcZ(53,81,"lang_auto_diem_trung_binh")," "),t.xp6(4),t.Oqu(t.Dn7(57,83,t.xi3(58,87,e.examCommonStatistical.averageMark,"1.0-2"),",",".")),t.xp6(5),t.hij(" ",t.lcZ(62,90,"lang_auto_so_hoc_sinh_dat_diem")+" <1"," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalLte1),t.xp6(2),t.hij("",t.Dn7(68,92,t.xi3(69,96,100*e.examCommonStatistical.totalLte1/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),t.xp6(5),t.Oqu(t.lcZ(73,99,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),t.xp6(4),t.Oqu(e.examCommonStatistical.totalGte5),t.xp6(2),t.hij("",t.Dn7(79,101,t.xi3(80,105,100*e.examCommonStatistical.totalGte5/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),t.xp6(5),t.hij(" ",t.lcZ(84,108,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.markPopular),t.xp6(2),t.hij("",t.Dn7(90,110,t.xi3(91,114,e.examCommonStatistical.totalPopular/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete)*100,"1.0-2"),",","."),"%"),t.xp6(4),t.Q6J("viewType",e.viewType),t.xp6(4),t.hij(" ",t.lcZ(98,117,"lang_auto_bieu_do_pho_diem")," "),t.xp6(6),t.Q6J("chart",e.chart),t.xp6(4),t.hij(" ",t.lcZ(108,119,"lang_auto_bang_tan_so")," "),t.xp6(8),t.Oqu(t.lcZ(116,121,"lang_testbank_statistical_class")),t.xp6(3),t.Oqu(t.lcZ(119,123,"lang_testbank_statistical_number_student")),t.xp6(23),t.hij("",t.lcZ(142,125,"lang_testbank_statistical_on_tb")," (>= 5)"),t.xp6(6),t.Oqu(t.lcZ(148,127,"lang_buttom_register")),t.xp6(3),t.Oqu(t.lcZ(151,129,"lang_testbank_statistical_join_exam")),t.xp6(3),t.Oqu(t.lcZ(154,131,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(159,133,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(164,135,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(169,137,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(174,139,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(179,141,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(184,143,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(189,145,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(194,147,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(199,149,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(204,151,"lang_auto_amount")),t.xp6(4),t.Q6J("ngForOf",e.statistic),t.xp6(3),t.Oqu(t.lcZ(211,153,"lang_testbank_statistical_total")),t.xp6(3),t.Oqu(e.countStudentRegister),t.xp6(2),t.Oqu(e.countStudentTakeExam),t.xp6(2),t.Oqu(e.markPointOne),t.xp6(2),t.Oqu(t.Dn7(220,155,t.xi3(221,159,e.markPercentOne,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTwo),t.xp6(2),t.Oqu(t.Dn7(226,162,t.xi3(227,166,e.markPercentTwo,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointThree),t.xp6(2),t.Oqu(t.Dn7(232,169,t.xi3(233,173,e.markPercentThree,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFour),t.xp6(2),t.Oqu(t.Dn7(238,176,t.xi3(239,180,e.markPercentFour,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFive),t.xp6(2),t.Oqu(t.Dn7(244,183,t.xi3(245,187,e.markPercentFive,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSix),t.xp6(2),t.Oqu(t.Dn7(250,190,t.xi3(251,194,e.markPercentSix,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSeven),t.xp6(2),t.Oqu(t.Dn7(256,197,t.xi3(257,201,e.markPercentSeven,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointEight),t.xp6(2),t.Oqu(t.Dn7(262,204,t.xi3(263,208,e.markPercentEight,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointNine),t.xp6(2),t.Oqu(t.Dn7(268,211,t.xi3(269,215,e.markPercentNine,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTen),t.xp6(2),t.Oqu(t.Dn7(274,218,t.xi3(275,222,e.markPercentTen,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.Oqu(t.Dn7(280,225,t.xi3(281,229,e.markPercentAvg,"1.0-2"),",","."))}}let eA=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.dialog=e,this.homeworkExamService=i,this.dictionaryService=o,this.testedListApiService=s,this.examPageResultService=r,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.chart=new x.kL,this.examId=-1,this.statistic=[],this.examCommonStatistical={id:0,categoryId:0,name:"",totalRegister:0,totalNotComplete:0,totalAttendee:0,averageMark:0,markPopular:0,totalPopular:0,totalLte1:0,totalGte5:0},this.totalAttended=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}getDataStatistic(){var e,i,o,s,r,l,c,u,d,m,p;if(this.initStatusObj(),this.dataStatistical){let b={id:null!==(e=this.dataStatistical.id)&&void 0!==e?e:0,categoryId:null!==(i=this.dataStatistical.categoryId)&&void 0!==i?i:0,name:null!==(o=this.dataStatistical.name)&&void 0!==o?o:"",totalRegister:null!==(s=this.dataStatistical.totalRegister)&&void 0!==s?s:0,totalNotComplete:null!==(r=this.dataStatistical.totalNotComplete)&&void 0!==r?r:0,totalAttendee:null!==(l=this.dataStatistical.totalAttendee)&&void 0!==l?l:0,averageMark:null!==(c=this.dataStatistical.averageMark)&&void 0!==c?c:0,markPopular:null!==(u=this.dataStatistical.markPopular)&&void 0!==u?u:0,totalPopular:null!==(d=this.dataStatistical.totalPopular)&&void 0!==d?d:0,totalLte1:null!==(m=this.dataStatistical.totalLte1)&&void 0!==m?m:0,totalGte5:null!==(p=this.dataStatistical.totalGte5)&&void 0!==p?p:0};this.examCommonStatistical=b,this.examPageResultService.apiExamPageResultGetExamClassroomFrequencyMarkGet(b.id).subscribe(y=>{var C,I;if(y.success&&y.data){let D=[];null===(C=y.data.objs)||void 0===C||C.forEach(U=>{var B,q,R;let et={classObj:{id:U.classroomId,name:null!==(B=U.classroomName)&&void 0!==B?B:"lang_testbank_statistical_freelance_contestant"},registerCount:U.totalRegister,testedCount:U.totalAttendee,markPercent:this.calcMarkPerCentForClassroom(null!==(q=U.marks)&&void 0!==q?q:[],null!==(R=U.totalAttendee)&&void 0!==R?R:0)};D.push(et)}),this.readyData(D)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(I=y.message)&&void 0!==I?I:"")})}else this.doneLoadingEmit.emit(!1)}readyData(e){this.statistic=e,this.totalStudentRegister(this.statistic),this.totalStudentTakeExam(this.statistic),this.totalPercent(this.statistic),this.totalPoint(this.statistic),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}calcMarkPerCentForClassroom(e,i){var o,s,r,l,c,u;let d=[],m=0;for(let b=1;b<=11;b++){let y={key:"",count:0,percent:0};if(e[b-1]){let C=e[b-1];0==C.fromMark&&1==C.toMark?y.key="<1":1==C.fromMark&&2==C.toMark?y.key="<2":2==C.fromMark&&3==C.toMark?y.key="<3":3==C.fromMark&&4==C.toMark?y.key="<4":4==C.fromMark&&5==C.toMark?y.key="<5":5==C.fromMark&&6==C.toMark?(y.key="<6",m+=null!==(o=C.total)&&void 0!==o?o:0):6==C.fromMark&&7==C.toMark?(y.key="<7",m+=null!==(s=C.total)&&void 0!==s?s:0):7==C.fromMark&&8==C.toMark?(y.key="<8",m+=null!==(r=C.total)&&void 0!==r?r:0):8==C.fromMark&&9==C.toMark?(y.key="<9",m+=null!==(l=C.total)&&void 0!==l?l:0):(y.key="<=10",m+=null!==(c=C.total)&&void 0!==c?c:0),y.count=null!==(u=C.total)&&void 0!==u?u:0,y.percent=this.homeworkExamService.calcPercent(C.total,i)}else y.key="<"+b;d.push(y)}let p={key:"Avg",count:m,percent:this.homeworkExamService.calcPercent(m,i)};return d.push(p),d}createChart(){var e,i;let o=null!==(e=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi"))&&void 0!==e?e:"",s=null!==(i=this.commonService.myTranslateInstant("lang_auto_so_luong"))&&void 0!==i?i:"",l=new x.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:o+"_"+this.examCommonStatistical.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["< 1","< 2","< 3","< 4","< 5","< 6","< 7","< 8","< 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:s,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=l}totalPercent(e){var i,o,s,r,l,c,u,d,m,p,b,y,C=0,I=0,D=0,U=0,B=0,q=0,R=0,et=0,Q=0,V=0,Y=0,at=0;for(let tt=0;tt<e.length;tt++)e[tt]&&(at+=null!==(i=e[tt].testedCount)&&void 0!==i?i:0,C+=null!==(o=e[tt].markPercent[0].count)&&void 0!==o?o:0,I+=null!==(s=e[tt].markPercent[1].count)&&void 0!==s?s:0,D+=null!==(r=e[tt].markPercent[2].count)&&void 0!==r?r:0,U+=null!==(l=e[tt].markPercent[3].count)&&void 0!==l?l:0,B+=null!==(c=e[tt].markPercent[4].count)&&void 0!==c?c:0,q+=null!==(u=e[tt].markPercent[5].count)&&void 0!==u?u:0,R+=null!==(d=e[tt].markPercent[6].count)&&void 0!==d?d:0,et+=null!==(m=e[tt].markPercent[7].count)&&void 0!==m?m:0,Q+=null!==(p=e[tt].markPercent[8].count)&&void 0!==p?p:0,V+=null!==(b=e[tt].markPercent[9].count)&&void 0!==b?b:0,Y+=null!==(y=e[tt].markPercent[10].count)&&void 0!==y?y:0);this.markPercentOne=100*C/at,this.markPercentTwo=100*I/at,this.markPercentThree=100*D/at,this.markPercentFour=100*U/at,this.markPercentFive=100*B/at,this.markPercentSix=100*q/at,this.markPercentSeven=100*R/at,this.markPercentEight=100*et/at,this.markPercentNine=100*Q/at,this.markPercentTen=100*V/at,this.markPercentAvg=100*Y/at}totalPoint(e){var i,o,s,r,l,c,u,d,m,p,b,y=0,C=0,I=0,D=0,U=0,B=0,q=0,R=0,et=0,Q=0,V=0;for(let Y=0;Y<e.length;Y++)e[Y]&&(y+=null!==(i=e[Y].markPercent[0].count)&&void 0!==i?i:0,C+=null!==(o=e[Y].markPercent[1].count)&&void 0!==o?o:0,I+=null!==(s=e[Y].markPercent[2].count)&&void 0!==s?s:0,D+=null!==(r=e[Y].markPercent[3].count)&&void 0!==r?r:0,U+=null!==(l=e[Y].markPercent[4].count)&&void 0!==l?l:0,B+=null!==(c=e[Y].markPercent[5].count)&&void 0!==c?c:0,q+=null!==(u=e[Y].markPercent[6].count)&&void 0!==u?u:0,R+=null!==(d=e[Y].markPercent[7].count)&&void 0!==d?d:0,et+=null!==(m=e[Y].markPercent[8].count)&&void 0!==m?m:0,Q+=null!==(p=e[Y].markPercent[9].count)&&void 0!==p?p:0,V+=null!==(b=e[Y].markPercent[10].count)&&void 0!==b?b:0);this.markPointOne=y,this.markPointTwo=C,this.markPointThree=I,this.markPointFour=D,this.markPointFive=U,this.markPointSix=B,this.markPointSeven=q,this.markPointEight=R,this.markPointNine=et,this.markPointTen=Q,this.markPointAvg=V}totalStudentRegister(e){var i,o=0;for(let s=0;s<e.length;s++)o+=null!==(i=e[s].registerCount)&&void 0!==i?i:0;this.countStudentRegister=o}totalStudentTakeExam(e){var i,o=0;for(let s=0;s<e.length;s++)o+=null!==(i=e[s].testedCount)&&void 0!==i?i:0;this.countStudentTakeExam=o}goToStudentList(e){var i,o,s;if(null!==(i=e.classObj)&&void 0!==i&&i.id&&(null===(o=e.classObj)||void 0===o?void 0:o.id)>0){let r=`/admin/testbank/statistic/${null!==(s=this.examCommonStatistical.categoryId)&&void 0!==s?s:0}/${this.examCommonStatistical.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${e.classObj.id}`,"?backto="+encodeURIComponent(r))}}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(lo.j),t.Y36(nr.E),t.Y36(yo.x),t.Y36(Bt.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical-point-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],["azt-track-service","statistical-point-H1Y1HbVLKAS","style","padding: 9.5px !important",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-H1Y1HbVLKAS",2,"padding","9.5px !important",3,"click"]],template:function(e,i){if(1&e&&(t.YNc(0,S5,8,6,"div",0),t.YNc(1,tA,282,232,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statistic&&0!=i.statistic.length&&i.freeStudentList&&0!=i.freeStudentList.length)("ngIfElse",o)}},dependencies:[E.sg,E.O5,x.Dm,cm,E.JJ,_t.bT,_t.AS],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),n})();const nA=["drawer"];function iA(n,a){1&n&&t._UZ(0,"azt-loading-effect")}const oA=function(n){return{hidden:n}};let aA=(()=>{class n extends st.Q{constructor(e,i){super(),this.examPageResultService=e,this.activeRoute=i,this.isListQuestion=!0,this.isStatistical=!1,this.isTabScore=!0,this.isExportExcel=!0,this.viewType=1,this.backToLink="",this.examId=0,this.examObj={},this.doneLoadCount=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.examInfoForStatistical={}}getDataStatistical(){this.initStatusObj(),this.examPageResultService.apiExamPageResultGetExamInfoGet(this.examId).subscribe(e=>{var i,o;1==e.success&&e.data?this.examInfoForStatistical=null!==(i=e.data)&&void 0!==i?i:{}:(this.showErrorSnack(null!==(o=e.message)&&void 0!==o?o:""),this.stopStatusObj())})}doneLoadingFunc(e){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){var e,i,o;this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let s=null!==(e=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==e?e:"",r=null!==(i=this.commonService.getMyParam(this.activeRoute,"id"))&&void 0!==i?i:"";this.backToLink=this.commonService.getMyQueryParam("backto")?null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"":`/admin/testbank/exam-results-list/${s}/${r}/0`,(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var c;this.examId=null!==(c=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==c?c:0,this.getDataStatistical()}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.DR),t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical-new"]],viewQuery:function(e,i){if(1&e&&t.Gf(nA,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:9,vars:15,consts:[[3,"headerTitle","headerBackTolink"],[1,"statistical","mx-auto","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1),t.YNc(3,iA,1,0,"azt-loading-effect",2),t.TgZ(4,"div",3)(5,"app-statistical-point-new",4),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA(),t.TgZ(6,"app-list-question-new",5),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA(),t.TgZ(7,"app-table-score-new",5),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA()(),t._UZ(8,"azt-scroll-to-top-bottom",6),t.qZA()()),2&e&&(t.Q6J("headerTitle",t.lcZ(1,11,"lang_testbank_statistical_header_title"))("headerBackTolink",i.backToLink),t.xp6(3),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.Q6J("ngClass",t.VKq(13,oA,i.statusObj.loading)),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("isScrollToTop",!0))},dependencies:[E.mk,E.O5,xe.Q,zu.M,Xe._,n5,w5,eA,_t.bT],encapsulation:2}),n})();function sA(n,a){1&n&&(t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),t.xp6(3),t.hij("",t.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function rA(n,a){1&n&&(t.TgZ(0,"div",6)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}function lA(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",15),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.handleChangeClassStatistic(s))}),t.TgZ(1,"button",16),t._uU(2),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(3);t.xp6(1),t.Gre("nav-link w-full py-2 ",i.idClassObj==e.id?"active":""," "),t.xp6(1),t.hij(" ",e.name," ")}}function cA(n,a){if(1&n&&(t.TgZ(0,"ul",13),t.YNc(1,lA,3,4,"li",14),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.classroomObjs)}}function uA(n,a){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_cms_common_loading"),"..."))}function dA(n,a){if(1&n&&(t.TgZ(0,"div",59)(1,"div",60)(2,"div",61)(3,"mat-icon",62),t._uU(4," close "),t.qZA()()(),t.TgZ(5,"div"),t._UZ(6,"azt-standalone-question",63),t.qZA()()),2&n){const e=a.$implicit,i=t.oxw().index,o=t.oxw(3);t.xp6(6),t.Q6J("startQuestionIndex",o.examObj.startQuestionIndex)("expandInfo",o.examObj.expandInfo)("hideQuestionLabel",!0)("follower",o.followerRenderQuest)("isMobile",o.isMobile)("examObj",o.examObj)("question",e)("index",i)}}function _A(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.Dn7(2,1,t.xi3(3,5,(e.countNotAnswer+e.countFalse)/e.countAttended*100,"1.0-2"),",","."),"%")}}function mA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1,"0%"),t.qZA())}function pA(n,a){if(1&n&&t._UZ(0,"img",66),2&n){const e=t.oxw().$implicit;t.Q6J("nameImages",e.nameImages)}}function hA(n,a){1&n&&(t.TgZ(0,"span",69),t._uU(1," , "),t.qZA())}function gA(n,a){if(1&n&&(t.TgZ(0,"span",67),t._uU(1),t.qZA(),t.YNc(2,hA,2,0,"span",68)),2&n){const e=t.oxw(),i=e.$implicit,o=e.index,s=t.oxw(2).$implicit;t.xp6(1),t.Oqu(i.fullName),t.xp6(1),t.Q6J("ngIf",o!=s.studentWhoFalse.length-1)}}function fA(n,a){if(1&n&&(t.ynx(0),t.YNc(1,pA,1,1,"img",64),t.YNc(2,gA,3,2,"ng-template",null,65,t.W1O),t.BQk()),2&n){const e=a.$implicit,i=t.MAs(3);let o;t.xp6(1),t.Q6J("ngIf",e.nameImages&&(null!==(o=e.studentId)&&void 0!==o?o:0)<=0)("ngIfElse",i)}}function xA(n,a){if(1&n&&(t.ynx(0),t.YNc(1,fA,4,2,"ng-container",41),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.studentWhoFalse)}}function vA(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function bA(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",24)(3,"span",47),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"div",48)(7,"span",47),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",49),t.NdJ("click",function(o){const r=t.CHM(e).$implicit,l=t.MAs(15),c=t.oxw(3);return t.KtG(c.onContextMenu(o,r,l))}),t.O4$(),t.TgZ(11,"svg",50),t._UZ(12,"path",51)(13,"circle",52),t.qZA()()(),t.kcU(),t.TgZ(14,"context-menu",null,53),t.YNc(16,dA,7,8,"ng-template",54),t.qZA()(),t.TgZ(17,"td",55),t._uU(18),t.qZA(),t.TgZ(19,"td",55),t._uU(20),t.qZA(),t.TgZ(21,"td",55),t._uU(22),t.qZA(),t.TgZ(23,"td",55),t._uU(24),t.qZA(),t.TgZ(25,"td",55),t._uU(26),t.qZA(),t.TgZ(27,"td",55),t.YNc(28,_A,4,8,"div",56),t.YNc(29,mA,2,0,"div",56),t.qZA(),t.TgZ(30,"td",55),t.YNc(31,xA,2,1,"ng-container",57),t.YNc(32,vA,2,3,"ng-template",null,58,t.W1O),t.qZA()()}if(2&n){const e=a.$implicit,i=a.index,o=t.MAs(33);t.xp6(4),t.Oqu(i+1),t.xp6(4),t.AsE("",t.lcZ(9,12,"lang_testbank_statistical_question")," ",e.id,""),t.xp6(10),t.Oqu(e.countAttended),t.xp6(2),t.Oqu(e.countTested),t.xp6(2),t.Oqu(e.countNotAnswer),t.xp6(2),t.Oqu(e.countTrue),t.xp6(2),t.Oqu(e.countFalse),t.xp6(2),t.Q6J("ngIf",0!=e.countAttended),t.xp6(1),t.Q6J("ngIf",0==e.countAttended),t.xp6(2),t.Q6J("ngIf",e.studentWhoFalse.length<=50)("ngIfElse",o)}}function yA(n,a){1&n&&t._UZ(0,"span",70)}function wA(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"table",21)(2,"thead",22)(3,"tr")(4,"th",23)(5,"div",24),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",25)(9,"div",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortIDQuestion())}),t._uU(10),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",27),t._UZ(13,"polyline",28)(14,"line",29)(15,"polyline",30)(16,"line",31),t.qZA()()(),t.kcU(),t.TgZ(17,"th",32)(18,"div",33),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountAttended())}),t._uU(19),t.ALo(20,"mytranslate"),t.O4$(),t.TgZ(21,"svg",27),t._UZ(22,"polyline",28)(23,"line",29)(24,"polyline",30)(25,"line",31),t.qZA()()(),t.kcU(),t.TgZ(26,"th",32)(27,"div",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountTested())}),t._uU(28),t.ALo(29,"mytranslate"),t.O4$(),t.TgZ(30,"svg",27),t._UZ(31,"polyline",28)(32,"line",29)(33,"polyline",30)(34,"line",31),t.qZA()()(),t.kcU(),t.TgZ(35,"th",32)(36,"div",35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountNotAnswer())}),t._uU(37),t.ALo(38,"mytranslate"),t.O4$(),t.TgZ(39,"svg",27),t._UZ(40,"polyline",28)(41,"line",29)(42,"polyline",30)(43,"line",31),t.qZA()()(),t.kcU(),t.TgZ(44,"th",32)(45,"div",36),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountTrue())}),t._uU(46),t.ALo(47,"mytranslate"),t.O4$(),t.TgZ(48,"svg",27),t._UZ(49,"polyline",28)(50,"line",29)(51,"polyline",30)(52,"line",31),t.qZA()()(),t.kcU(),t.TgZ(53,"th",32)(54,"div",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortStudentCountFalse())}),t._uU(55),t.ALo(56,"mytranslate"),t.O4$(),t.TgZ(57,"svg",27),t._UZ(58,"polyline",28)(59,"line",29)(60,"polyline",30)(61,"line",31),t.qZA()()(),t.kcU(),t.TgZ(62,"th",38)(63,"div",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.toggleSortFalse())}),t._uU(64),t.ALo(65,"mytranslate"),t.O4$(),t.TgZ(66,"svg",27),t._UZ(67,"polyline",28)(68,"line",29)(69,"polyline",30)(70,"line",31),t.qZA()()(),t.kcU(),t.TgZ(71,"th",40)(72,"span"),t._uU(73),t.ALo(74,"mytranslate"),t.qZA()()()(),t.TgZ(75,"tbody"),t.YNc(76,bA,34,14,"tr",41),t.qZA()(),t.TgZ(77,"div",42)(78,"button",43),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.getListQuestionStatistic(o.page+1,!0))}),t.YNc(79,yA,1,0,"span",44),t._uU(80),t.ALo(81,"mytranslate"),t.O4$(),t.TgZ(82,"svg",45),t._UZ(83,"polyline",46),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,13,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,15,"lang_testbank_statistical_questions")," "),t.xp6(9),t.hij(" ",t.lcZ(20,17,"lang_testbank_statistical_total_number_exam")," "),t.xp6(9),t.hij(" ",t.lcZ(29,19,"lang_testbank_statistical_number_student_did")," "),t.xp6(9),t.hij(" ",t.lcZ(38,21,"lang_testbank_statistical_number_student_do_not")," "),t.xp6(9),t.hij(" ",t.lcZ(47,23,"lang_testbank_statistical_number_student_right")," "),t.xp6(9),t.hij(" ",t.lcZ(56,25,"lang_testbank_statistical_number_student_wrong")," "),t.xp6(9),t.hij(" ",t.lcZ(65,27,"lang_testbank_statistical_student_not_done")," "),t.xp6(9),t.hij(" ",t.lcZ(74,29,"lang_testbank_statistical_student_who_wrong")," "),t.xp6(3),t.Q6J("ngForOf",e.listQuestion),t.xp6(2),t.Q6J("disabled",e.isLoadMore||e.listQuestion.length>=e.totalQuestion-e.totalEssayQuestion),t.xp6(1),t.Q6J("ngIf",e.isLoadMore),t.xp6(1),t.hij("\xa0 ",t.lcZ(81,31,"lang_auto_xem_them"),"\xa0 ")}}function kA(n,a){if(1&n&&(t.TgZ(0,"div",7)(1,"div",8),t.YNc(2,cA,2,1,"ul",9),t.TgZ(3,"div",10),t.YNc(4,uA,5,3,"div",11),t.YNc(5,wA,84,33,"div",12),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.classroomObjs&&e.classroomObjs.length>0),t.xp6(2),t.Q6J("ngIf",e.changeClassLoading),t.xp6(1),t.Q6J("ngIf",!e.changeClassLoading)}}let CA=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m,p){super(),this.statisticalApiService=e,this.testedListApiService=i,this.dialog=o,this.activeRoute=s,this.contextMenuService=r,this.docxService=l,this.dictionaryService=c,this.customQuestionInterface=u,this.fb=d,this.answerTypeService=m,this.examPageResultService=p,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.idClassObj=-1,this.examId=-1,this.listQuestion=[],this.examObj={},this.isCheckData=!1,this.changeClassLoading=!1,this.examAttended=0,this.isMobile=this.commonService.isMobileOrTable(),this.panelOpenState=!1,this.statusSort=1,this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new ls.G,this.form=new h.nJ({}),this.classroomObjs=[],this.questionObjs=[],this.listResults=[],this.studentObjs=[],this.userObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1,idQuestion:!1},this.totalQuestion=0,this.totalEssayQuestion=0,this.page=1,this.isLoadMore=!1}onContextMenu(e,i,o){e&&(this.contextMenuService.show.next({anchorElement:e?.target?e.target:void 0,contextMenu:o,event:e,item:i}),e?.preventDefault(),e?.stopPropagation())}countEssayQuestion(){let e=0;return this.questionObjs.forEach(i=>{this.answerTypeService.isEssayAnswer(i.answerType)&&e++}),e}readyData(e,i){this.listQuestion=e,this.examAttended=i,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((o,s)=>o.countAttended>0&&s.countAttended>0?(s.countNotAnswer+s.countFalse)/s.countAttended*100-(o.countNotAnswer+o.countFalse)/o.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(e,i){var o,s,r;if(i?this.isLoadMore=!0:this.initStatusObj(),this.dataStatistical){let l=this.dataStatistical;if(1==l.success&&l.data){this.examObj=null!==(o=l.data.examObj)&&void 0!==o?o:{};let c=l.data.resultObjs&&l.data.resultObjs.length>0?l.data.resultObjs:new Array,u=this.testedListApiService.mergeStudentWithAvatar(c??[]),d=this.commonService.castJsonToClassObjs(Ju,JSON.stringify(l.data.classroomObjs));this.classroomObjs=d??[];let m={};null===(s=l.data.classroomObjsWithStudentObjs)||void 0===s||s.forEach(p=>{var b,y,C,I;p.classroomObj&&p.studentObjs&&(m.hasOwnProperty(null!==(y=null===(b=p.classroomObj)||void 0===b?void 0:b.id)&&void 0!==y?y:0)||(m[null!==(I=null===(C=p.classroomObj)||void 0===C?void 0:C.id)&&void 0!==I?I:0]=p.studentObjs))}),this.form=this.fb.group(this.classroomObjs&&this.classroomObjs.length>0?{curSelectClass:new h.p4(this.classroomObjs[0].id)}:{curSelectClass:new h.p4(-1)}),this.examPageResultService.apiExamPageResultListQuestionsGet(this.examObj.id,e,50).subscribe(p=>{var b,y,C,I,D,U,B,q,R;if(p.data&&1==p.success){this.totalQuestion=null!==(b=p.data.total)&&void 0!==b?b:0,this.page=e;let et=p.data.objs&&p.data.objs.length>0?p.data.objs:new Array;this.questionObjs.push(...null!==(y=this.commonService.castJsonToClassObjs(er,JSON.stringify(et)))&&void 0!==y?y:[]),this.totalEssayQuestion=this.countEssayQuestion(),this.listResults=null!==(C=l.data)&&void 0!==C&&C.resultQuestionObjs&&(null===(I=l.data)||void 0===I?void 0:I.resultQuestionObjs.length)>0?l.data.resultQuestionObjs:new Array;let Q=this.dictionaryService.getDictionaryByGroupFieldTS(this.listResults,"userId"),V=[];for(let rt=0;rt<this.classroomObjs.length;rt++)m.hasOwnProperty(null!==(D=this.classroomObjs[rt].id)&&void 0!==D?D:0)&&(this.classroomObjs[rt].students=m[null!==(U=this.classroomObjs[rt].id)&&void 0!==U?U:0]),null===(B=this.classroomObjs[rt].students)||void 0===B||B.forEach(vt=>{var gt,ct;if(vt.parentId&&!this.commonService.filterArray(V,vt.parentId)&&V.push(vt.parentId),vt.parentId&&Q.hasOwnProperty(vt.parentId)&&!this.commonService.filterArray(this.classroomObjs[rt].listResult,Q[vt.parentId][0])){let lt=this.statisticalApiService.findExamResultOfStudent(Q[vt.parentId],null!==(gt=vt.id)&&void 0!==gt?gt:"0");lt.length>0&&(null===(ct=this.classroomObjs[rt].listResult)||void 0===ct||ct.push(lt[lt.length-1]))}});let Y=!1,tt={id:-1,name:null!==(q=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"))&&void 0!==q?q:"",userTested:[],listResult:[],listQuestions:[]};u.forEach(rt=>{var vt,gt,ct,lt,Et;if(!this.commonService.filterArray(V,null!==(vt=rt.parentId)&&void 0!==vt?vt:"0")){if(rt.parentId&&Q.hasOwnProperty(null!==(gt=rt.parentId)&&void 0!==gt?gt:0)){let It=this.statisticalApiService.findExamResultOfStudent(Q[rt.parentId],null!==(ct=rt.id)&&void 0!==ct?ct:"0");if(It.length>0){let wt=It[It.length-1];tt.listResult.push(wt);let jt=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");rt.fullName=null!==(lt=rt.fullName)&&void 0!==lt?lt:jt+"_"+wt.id,null===(Et=tt.userTested)||void 0===Et||Et.push(rt)}}Y=!0}}),Y&&this.classroomObjs.push(tt),this.classroomObjs.length>0?this.handleChangeClassStatistic(this.classroomObjs[0]):(this.doneLoadingEmit.emit(!1),this.isCheckData=!0,this.isLoadMore=!1,this.successStatusObj())}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(R=l.message)&&void 0!==R?R:""),this.isLoadMore=!1,this.successStatusObj()})}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(null!==(r=l.message)&&void 0!==r?r:"")}else this.doneLoadingEmit.emit(!1)}handleChangeClassStatistic(e){var i,o,s,r,l,c,u;this.idClassObj=e.id;let d=[],m=0;this.changeClassLoading=!0;for(let p=0;p<this.questionObjs.length;p++)this.questionObjs[p].isRoleTeacher=!0,(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[p].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[p].answerType))&&(this.questionObjs[p].countFalse=0,this.questionObjs[p].countNotAnswer=0,this.questionObjs[p].countTested=0,this.questionObjs[p].countAttended=0,this.questionObjs[p].countTrue=0,this.questionObjs[p].indexQuestion=p,this.questionObjs[p].studentWhoFalse=[],this.questionObjs[p].studentWhoNotAnswer=[]);if(-1==e.id){let p=this.dictionaryService.getDictionaryByGroupFieldTS(e.listResult,"userId");for(let b in p)if(p.hasOwnProperty(b)){m++;let y=null===(i=e.userTested)||void 0===i?void 0:i.filter(C=>C.parentId==p[b][p[b].length-1].userId);for(let C=0;C<this.questionObjs.length;C++)(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[C].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[C].answerType))&&(p[b][0].correctQuestionIds&&this.commonService.filterArray(p[b][0].correctQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countTrue++,this.questionObjs[C].countTested++),p[b][0].wrongQuestionIds&&this.commonService.filterArray(p[b][0].wrongQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countFalse++,this.questionObjs[C].countTested++,y&&y.length>0&&(this.commonService.filterArray(this.questionObjs[C].studentWhoFalse,{studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages})||null===(o=this.questionObjs[C].studentWhoFalse)||void 0===o||o.push({studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages}))),p[b][0].resultQuestionIds&&this.commonService.filterArray(p[b][0].resultQuestionIds,this.questionObjs[C].id)&&this.questionObjs[C].countAttended++,this.commonService.filterArray(p[b][0].resultQuestionIds,this.questionObjs[C].id)&&!this.commonService.filterArray(p[b][0].correctQuestionIds,this.questionObjs[C].id)&&!this.commonService.filterArray(p[b][0].wrongQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countNotAnswer++,y&&y.length>0&&(this.commonService.filterArray(this.questionObjs[C].studentWhoNotAnswer,{studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages})||null===(s=this.questionObjs[C].studentWhoNotAnswer)||void 0===s||s.push({studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages}))))}}else{let p=this.dictionaryService.getDictionaryByGroupFieldTS(null!==(r=e.listResult)&&void 0!==r?r:[],"userId");for(let b in p)if(p.hasOwnProperty(b)){m++;let y=null===(l=e.students)||void 0===l?void 0:l.filter(C=>C.parentId==p[b][0].userId);for(let C=0;C<this.questionObjs.length;C++)(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[C].answerType)||this.answerTypeService.isFillAnswer(this.questionObjs[C].answerType))&&(p[b][0].correctQuestionIds&&this.commonService.filterArray(p[b][0].correctQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countTrue++,this.questionObjs[C].countTested++),p[b][0].wrongQuestionIds&&this.commonService.filterArray(p[b][0].wrongQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countFalse++,this.questionObjs[C].countTested++,y&&y.length>0&&(this.commonService.filterArray(this.questionObjs[C].studentWhoFalse,{studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages})||null===(c=this.questionObjs[C].studentWhoFalse)||void 0===c||c.push({studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages}))),p[b][0].resultQuestionIds&&this.commonService.filterArray(p[b][0].resultQuestionIds,this.questionObjs[C].id)&&this.questionObjs[C].countAttended++,this.commonService.filterArray(p[b][0].resultQuestionIds,this.questionObjs[C].id)&&!this.commonService.filterArray(p[b][0].correctQuestionIds,this.questionObjs[C].id)&&!this.commonService.filterArray(p[b][0].wrongQuestionIds,this.questionObjs[C].id)&&(this.questionObjs[C].countNotAnswer++,y&&y.length>0&&(this.commonService.filterArray(this.questionObjs[C].studentWhoNotAnswer,{studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages})||null===(u=this.questionObjs[C].studentWhoNotAnswer)||void 0===u||u.push({studentId:y[0].id,parentId:y[0].parentId,fullName:y[0].fullName,nameImages:y[0].nameImages}))))}}this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(p=>{(this.answerTypeService.isOneChoiceAnswer(p.answerType)||this.answerTypeService.isFillAnswer(p.answerType))&&d.push(p)}),this.readyData(d,m)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortIDQuestion(){this.checkSortType.idQuestion=!this.checkSortType.idQuestion,this.checkSortType.idQuestion?this.listQuestion.sort((e,i)=>{var o,s;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(s=i.id)&&void 0!==s?s:0)}):this.listQuestion.sort((e,i)=>{var o,s;return(null!==(o=e.id)&&void 0!==o?o:0)-(null!==(s=i.id)&&void 0!==s?s:0)}).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended):this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((e,i)=>e.countTested-i.countTested):this.listQuestion.sort((e,i)=>e.countTested-i.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer):this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue):this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse):this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse).reverse()}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic(1)}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getListQuestionStatistic(1),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tr),t.Y36(yo.x),t.Y36(z.uw),t.Y36(w.gz),t.Y36(_.Lk),t.Y36(Al.x),t.Y36(nr.E),t.Y36(Sl.U),t.Y36(h.QS),t.Y36(wa.T),t.Y36(Bt.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-question"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto","overflow-y-hidden"],["class","d-flex justify-content-center",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-VAy8J_Yx_D","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-VAy8J_Yx_D","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"sr-only"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-GCPxsToMJS",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-c5WyXnSfnr",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-HCsLCkAgiv",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-CSLPAG4Oo6",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-YGS4XG1UOf",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-LBCxzBt8zt",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-MydBjyN4anN",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","20.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-CnHi5fD67ev","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","spinner-border spinner-border-sm","style","color: silver","role","status",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-Tw8CgZADPqX",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],["popUp",""],["contextMenuItem","","style","position: absolute"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notShowWhoFalse",""],[1,"box"],[1,"grid","grid-cols-12"],[1,"col-span-12","py-1",2,"text-align","end","padding-right","10px","cursor","context-menu"],[2,"color","#333333","vertical-align","middle","font-size","18px","width","18px","height","18px","cursor","pointer"],[2,"margin-bottom","0px",3,"startQuestionIndex","expandInfo","hideQuestionLabel","follower","isMobile","examObj","question","index"],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["role","status",1,"spinner-border","spinner-border-sm",2,"color","silver"]],template:function(e,i){1&e&&(t.YNc(0,sA,7,6,"div",0),t.YNc(1,rA,4,3,"div",1),t.YNc(2,kA,6,3,"div",2)),2&e&&(t.Q6J("ngIf",1==i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData))},dependencies:[E.sg,E.O5,ro.lW,qe.Hw,ds.L,Sa.$,_.GI,_.n5,E.JJ,_t.bT,_t.AS],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})();function TA(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",6)(1,"button",23),t.NdJ("click",function(){const s=t.CHM(e).index,r=t.oxw();return t.KtG(r.chooseTapClass(s))}),t._uU(2),t.qZA()()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw();t.xp6(1),t.Gre("nav-link w-full py-2 ",o.indexClassInArray==i?"active":"",""),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function AA(n,a){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody")(1,"tr")(2,"td",24)(3,"p",25),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function SA(n,a){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function OA(n,a){if(1&n&&(t.TgZ(0,"td",30),t._UZ(1,"img",34),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("src",e.nameImage,t.LSH)}}function EA(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function MA(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function IA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function LA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function ZA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function PA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function NA(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function DA(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.YNc(3,SA,2,1,"td",31),t.YNc(4,OA,2,1,"td",31),t.TgZ(5,"td",30),t.YNc(6,EA,3,3,"div",21),t.YNc(7,MA,2,3,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(9,"td",33),t.YNc(10,IA,3,3,"div",26),t.YNc(11,LA,3,3,"div",26),t.YNc(12,ZA,3,3,"div",26),t.YNc(13,PA,3,3,"div",26),t.YNc(14,NA,2,1,"div",26),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(8);let s,r;t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngIf",!e.nameImage||(null!==(s=e.id)&&void 0!==s?s:0)>0),t.xp6(1),t.Q6J("ngIf",e.nameImage&&(null!==(r=e.id)&&void 0!==r?r:0)<=0),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}const um=function(){return[]};function jA(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(3);let i;t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,e.calcAvgClassroomMark(null!==(i=e.statisticObj[e.indexClassInArray].studentsWithMark)&&void 0!==i?i:t.DdM(8,um)),"1.0-2"),",",".")," ")}}function qA(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody"),t.YNc(1,DA,15,10,"tr",27),t.TgZ(2,"tr",28)(3,"td",29),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",30),t.YNc(7,jA,4,9,"div",26),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",null==e.statisticObj[e.indexClassInArray]?null:e.statisticObj[e.indexClassInArray].studentsWithMark),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.statisticObj.length>0&&e.statisticObj[e.indexClassInArray])}}function FA(n,a){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function QA(n,a){if(1&n&&(t.TgZ(0,"td",30),t._UZ(1,"img",35),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("nameImages",e.nameImages)}}function UA(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function BA(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function RA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function zA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function JA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function HA(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function $A(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function KA(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",30),t._uU(2),t.qZA(),t.YNc(3,FA,2,1,"td",31),t.YNc(4,QA,2,1,"td",31),t.TgZ(5,"td",30),t.YNc(6,UA,3,3,"div",21),t.YNc(7,BA,2,3,"ng-template",null,32,t.W1O),t.qZA(),t.TgZ(9,"td",33),t.YNc(10,RA,3,3,"div",26),t.YNc(11,zA,3,3,"div",26),t.YNc(12,JA,3,3,"div",26),t.YNc(13,HA,3,3,"div",26),t.YNc(14,$A,2,1,"div",26),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(8);t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngIf",!e.nameImages||!e.nameImages.url),t.xp6(1),t.Q6J("ngIf",e.nameImages&&e.nameImages.url),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",o),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}function YA(n,a){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,e.calcAvgClassroomMark(e.freeStudentList||t.DdM(8,um)),"1.0-2"),",",".")," ")}}function GA(n,a){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"tbody"),t.YNc(1,KA,15,10,"tr",27),t.TgZ(2,"tr",28)(3,"td",29),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",30),t.YNc(7,YA,4,9,"div",26),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.freeStudentList),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.freeStudentList.length>0)}}function WA(n,a){if(1&n&&(t.O4$(),t.YNc(0,qA,8,5,"tbody",26),t.YNc(1,GA,8,5,"tbody",26)),2&n){const e=t.oxw();t.Q6J("ngIf",e.indexClassInArray>-1),t.xp6(1),t.Q6J("ngIf",-1==e.indexClassInArray)}}let VA=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.statisticalApiService=e,this.dialog=i,this.sortService=o,this.globalService=s,this.testedListApiService=r,this.homeworkExamService=l,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.examObj={},this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:!1,point:!1}}chooseTapClass(e){this.indexClassInArray=e}getDataStatistic(){var e,i,o,s,r,l,c;if(this.initStatusObj(),this.dataStatistical){let B=this.dataStatistical;if(1==B.success&&B.data){this.examObj=null!==(e=B.data.examObj)&&void 0!==e?e:{},this.hasEssayQuestion=this.homeworkExamService.hasEssayInExam(null!==(i=this.examObj.examType)&&void 0!==i?i:0);var u=B.data.classroomObjsWithStudentObjs&&B.data.classroomObjsWithStudentObjs.length>0?B.data.classroomObjsWithStudentObjs:new Array,d=null!==(o=B.data)&&void 0!==o&&o.resultObjs&&(null===(s=B.data)||void 0===s?void 0:s.resultObjs.length)>0?B.data.resultObjs:new Array,m=this.testedListApiService.mergeStudentWithAvatar(d??[]),p=[],b={};m?.forEach(q=>{var R,et,Q=null!==(R=q.parentId)&&void 0!==R?R:"0";b.hasOwnProperty(Q)||(b[Q]=null!==(et=q.examResultObjs)&&void 0!==et?et:[]),p=p.concat(b[Q])});var y=this.testedListApiService.filterExamResultOnTest(p,this.examObj,null!==(r=B.data.curServerTime)&&void 0!==r?r:0),C=[],D=[];if(this.homeworkExamService.mustInClassroom(null!==(l=this.examObj.whoAllow)&&void 0!==l?l:0)&&u.length>0){var U=[];u.forEach(q=>{var R,et=[];null===(R=q.studentObjs)||void 0===R||R.forEach(Q=>{var V,Y,at,tt,rt,vt,gt,ct,lt={};U.push(null!==(V=Q.parentId)&&void 0!==V?V:"0");var Et=null!==(Y=Q.parentId)&&void 0!==Y?Y:"0";b.hasOwnProperty(Et)&&(Array.isArray(Q.examResultObjs)||(Q.examResultObjs=[]),Q.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(rt=null===(at=Q.examResultObjs)||void 0===at?void 0:at.concat(null!==(tt=b[Et])&&void 0!==tt?tt:[]))&&void 0!==rt?rt:[],null!==(vt=Q.id)&&void 0!==vt?vt:"0")),Q.examResultObjs&&Q.examResultObjs.length>0&&(lt=Q.examResultObjs[Q.examResultObjs.length-1]??{});var wt=y.hasOwnProperty(null!==(gt=lt.userId)&&void 0!==gt?gt:"0")?y[null!==(ct=lt.userId)&&void 0!==ct?ct:"0"]:0,jt=lt.mark?lt.mark:0,Rt=lt.id&&wt>0?lt.id:0,Kt=lt.startedTest?lt.startedTest:null,Dt=lt.confirmedAt?lt.confirmedAt:null,re=Object.assign(Object.assign({},Q),{mark:jt,resultId:Rt,startedTest:Kt,confirmedAt:Dt,status:wt});et.push(re)}),C.push({classObj:q.classroomObj,studentsWithMark:et})})}d.forEach(q=>{var R,et,Q,V,Y,at,tt={};if(!this.commonService.filterArray(U,null!==(R=q.parentId)&&void 0!==R?R:"0")){if(q.examResultObjs&&q.examResultObjs.length>0){var rt=this.statisticalApiService.findExamResultOfStudent(q.examResultObjs,null!==(et=q.id)&&void 0!==et?et:"0");tt=rt[rt.length-1]}var gt=y.hasOwnProperty(null!==(Q=tt.userId)&&void 0!==Q?Q:"0")?y[null!==(V=tt.userId)&&void 0!==V?V:"0"]:0,ct=tt.mark?tt.mark:0,lt=tt.id&&gt>0?tt.id:0,Et=tt.startedTest?tt.startedTest:null,It=tt.confirmedAt?tt.confirmedAt:null,wt=Object.assign(Object.assign({},q),{mark:ct,resultId:lt,startedTest:Et,confirmedAt:It,nameImages:null!==(Y=q.nameImages)&&void 0!==Y?Y:{},nameImage:"",status:gt});let jt=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");wt.fullName=null!==(at=wt.fullName)&&void 0!==at?at:jt+"_"+lt,D.push(wt)}}),this.readyData(C,D),this.statisticObjClone=this.commonService.myClone(this.statisticObj)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(c=B.message)&&void 0!==c?c:"")}else this.doneLoadingEmit.emit(!1)}readyData(e,i){var o,s,r,l,c;this.statisticObj=e??new Array,this.freeStudentList=this.checkStatusStudent(this.sortService.sortFirstNameStudents(i));for(let u=0;u<this.freeStudentList.length;u++)this.freeStudentList[u].isMarked||(this.freeStudentList[u].mark=-1);for(let u=0;u<this.statisticObj.length;u++)if(this.statisticObj[u].studentsWithMark=this.statisticObj[u].classObj&&0==(null===(o=this.statisticObj[u].classObj)||void 0===o?void 0:o.sortType)?this.checkStatusStudent(this.sortService.sortFirstNameStudents(null!==(s=this.commonService.myClone(this.statisticObj[u].studentsWithMark))&&void 0!==s?s:[])):this.checkStatusStudent(this.sortService.sortArrayByMultipleObjectKeyAsc(null!==(r=this.commonService.myClone(this.statisticObj[u].studentsWithMark))&&void 0!==r?r:[],"pos","id")),this.statisticObj[u].studentsWithMark)for(let d=0;d<(null!==(c=null===(l=this.statisticObj[u].studentsWithMark)||void 0===l?void 0:l.length)&&void 0!==c?c:0);d++)this.statisticObj[u].studentsWithMark[d].isMarked||(this.statisticObj[u].studentsWithMark[d].mark=-1);this.statisticObj.length||(this.indexClassInArray=-1),this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(e){var i=[];return e.forEach(o=>{this.hasEssayQuestion?o.confirmedAt&&""!=o.confirmedAt&&o.resultId&&o.resultId>0?o.isMarked=!0:o.resultId&&o.resultId>0&&(!o.confirmedAt||""==o.confirmedAt)?o.isNotMarked=!0:o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||0!=o.status?o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||-1!=o.status?null==o.startedTest&&(o.isNotTested=!0):o.isNotSubmit=!0:o.isOnTest=!0:o.resultId&&o.resultId>0?o.isMarked=!0:o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||0!=o.status?o.resultId&&0!=o.resultId||!o.startedTest||""==o.startedTest||-1!=o.status?null==o.startedTest&&(o.isNotTested=!0):o.isNotSubmit=!0:o.isOnTest=!0,i.push(o)}),i}calcAvgClassroomMark(e){var i=0,o=0;return e.forEach(s=>{var r;s.isMarked&&(i++,o+=null!==(r=s.mark)&&void 0!==r?r:0)}),i>0?(o/i).toFixed(2):0}goToStudentList(e){var i,o;let s=`/admin/testbank/statistic/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${null===(o=e.classObj)||void 0===o?void 0:o.id}`,"?backto="+encodeURIComponent(s))}sortFullNameStudent(e){var i,o;this.checkSortObj.fullName=!this.checkSortObj.fullName,-1==e?this.freeStudentList=this.checkSortObj.fullName?this.sortService.sortFirstNameStudents(this.freeStudentList):this.sortService.sortFirstNameStudents(this.freeStudentList).reverse():this.statisticObj[e].studentsWithMark=this.checkSortObj.fullName?this.sortService.sortFirstNameStudents(null!==(i=this.statisticObj[e].studentsWithMark)&&void 0!==i?i:[]):this.sortService.sortFirstNameStudents(null!==(o=this.statisticObj[e].studentsWithMark)&&void 0!==o?o:[]).reverse()}sortStudentByPoint(e){var i,o;this.checkSortObj.point=!this.checkSortObj.point,-1==e?this.freeStudentList=this.checkSortObj.point?this._sortByPoint(this.freeStudentList):this._sortByPoint(this.freeStudentList).reverse():this.statisticObj[e].studentsWithMark=this.checkSortObj.point?this._sortByPoint(null!==(i=this.statisticObj[e].studentsWithMark)&&void 0!==i?i:[]):this._sortByPoint(null!==(o=this.statisticObj[e].studentsWithMark)&&void 0!==o?o:[]).reverse()}_sortByPoint(e){return e.sort((i,o)=>Number(i.mark)-Number(o.mark)),e}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tr),t.Y36(z.uw),t.Y36(ea.K),t.Y36(Oa.U),t.Y36(yo.x),t.Y36(lo.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-score"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:46,vars:24,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-Pqzc1J0xy-k","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"tab-content","overflow-x-auto","mt-5"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-ZNy16Mp_9vy",1,"flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["azt-track-service","table-score-wSQ94cCf2e7",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["azt-track-service","table-score-lnprV5P2qOp","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],[1,"img-fluid",3,"src"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),t.YNc(7,TA,3,4,"li",5),t.TgZ(8,"li",6)(9,"button",7),t.NdJ("click",function(){return i.chooseTapClass(-1)}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"table",10)(15,"thead",11)(16,"tr")(17,"th",12)(18,"div",13),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"th",12)(22,"div",14),t.NdJ("click",function(){return i.sortFullNameStudent(i.indexClassInArray)}),t._uU(23),t.ALo(24,"mytranslate"),t.O4$(),t.TgZ(25,"svg",15),t._UZ(26,"polyline",16)(27,"line",17)(28,"polyline",18)(29,"line",19),t.qZA()()(),t.kcU(),t.TgZ(30,"th",12)(31,"div",13),t._uU(32),t.ALo(33,"mytranslate"),t.qZA()(),t.TgZ(34,"th",12)(35,"div",20),t.NdJ("click",function(){return i.sortStudentByPoint(i.indexClassInArray)}),t._uU(36),t.ALo(37,"mytranslate"),t.O4$(),t.TgZ(38,"svg",15),t._UZ(39,"polyline",16)(40,"line",17)(41,"polyline",18)(42,"line",19),t.qZA()()()()(),t.YNc(43,AA,6,3,"tbody",21),t.YNc(44,WA,2,2,"ng-template",null,22,t.W1O),t.qZA()()()()()),2&e){const o=t.MAs(45);t.xp6(2),t.hij(" ",t.lcZ(3,12,"lang_auto_bang_diem")," "),t.xp6(5),t.Q6J("ngForOf",i.statisticObj),t.xp6(2),t.Gre("nav-link w-full py-2 ",-1==i.indexClassInArray?"active":"",""),t.xp6(1),t.hij(" ",t.lcZ(11,14,"lang_auto_tu_do")," "),t.xp6(9),t.hij(" ",t.lcZ(20,16,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(24,18,"lang_first_and_last_name")," "),t.xp6(9),t.hij(" ",t.lcZ(33,20,"lang_birthday")," "),t.xp6(4),t.hij(" ",t.lcZ(37,22,"lang_point")," "),t.xp6(7),t.Q6J("ngIf",i.indexClassInArray>-1&&i.statisticObj.length>0&&0==(null==i.statisticObj[i.indexClassInArray].studentsWithMark?null:i.statisticObj[i.indexClassInArray].studentsWithMark.length)||-1==i.indexClassInArray&&0==i.freeStudentList.length)("ngIfElse",o)}},dependencies:[E.sg,E.O5,ds.L,E.JJ,_t.bT,_t.AS,_t._I],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),n})();function XA(n,a){1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),t.xp6(3),t.hij("",t.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function tS(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",54),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.goToStudentList(o))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.classObj.name)}}function eS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function nS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function iS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function oS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function aS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function sS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function rS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function lS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function cS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function uS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function dS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function _S(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function mS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function pS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function hS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function gS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function fS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function xS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function vS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function bS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function yS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function wS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function kS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function CS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function TS(n,a){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,tS,2,1,"td",52),t.YNc(2,eS,2,1,"td",53),t.YNc(3,nS,2,1,"td",53),t.YNc(4,iS,2,1,"td",53),t.YNc(5,oS,4,8,"td",53),t.YNc(6,aS,2,1,"td",53),t.YNc(7,sS,4,8,"td",53),t.YNc(8,rS,2,1,"td",53),t.YNc(9,lS,4,8,"td",53),t.YNc(10,cS,2,1,"td",53),t.YNc(11,uS,4,8,"td",53),t.YNc(12,dS,2,1,"td",53),t.YNc(13,_S,4,8,"td",53),t.YNc(14,mS,2,1,"td",53),t.YNc(15,pS,4,8,"td",53),t.YNc(16,hS,2,1,"td",53),t.YNc(17,gS,4,8,"td",53),t.YNc(18,fS,2,1,"td",53),t.YNc(19,xS,4,8,"td",53),t.YNc(20,vS,2,1,"td",53),t.YNc(21,bS,4,8,"td",53),t.YNc(22,yS,2,1,"td",53),t.YNc(23,wS,4,8,"td",53),t.YNc(24,kS,2,1,"td",53),t.YNc(25,CS,4,8,"td",53),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj)}}function AS(n,a){1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_freelance_contestant")))}function SS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function OS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function ES(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function MS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function IS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function LS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function ZS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function PS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function NS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function DS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function jS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function qS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function FS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function QS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function US(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function BS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function RS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function zS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function JS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function HS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function $S(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function KS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function YS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function GS(n,a){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function WS(n,a){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,AS,3,3,"td",53),t.YNc(2,SS,2,1,"td",53),t.YNc(3,OS,2,1,"td",53),t.YNc(4,ES,2,1,"td",53),t.YNc(5,MS,4,8,"td",53),t.YNc(6,IS,2,1,"td",53),t.YNc(7,LS,4,8,"td",53),t.YNc(8,ZS,2,1,"td",53),t.YNc(9,PS,4,8,"td",53),t.YNc(10,NS,2,1,"td",53),t.YNc(11,DS,4,8,"td",53),t.YNc(12,jS,2,1,"td",53),t.YNc(13,qS,4,8,"td",53),t.YNc(14,FS,2,1,"td",53),t.YNc(15,QS,4,8,"td",53),t.YNc(16,US,2,1,"td",53),t.YNc(17,BS,4,8,"td",53),t.YNc(18,RS,2,1,"td",53),t.YNc(19,zS,4,8,"td",53),t.YNc(20,JS,2,1,"td",53),t.YNc(21,HS,4,8,"td",53),t.YNc(22,$S,2,1,"td",53),t.YNc(23,KS,4,8,"td",53),t.YNc(24,YS,2,1,"td",53),t.YNc(25,GS,4,8,"td",53),t.qZA()),2&n){const e=a.$implicit;let i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt;t.xp6(1),t.Q6J("ngIf",(null!==(i=e.registerCount)&&void 0!==i?i:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(o=e.registerCount)&&void 0!==o?o:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(s=e.registerCount)&&void 0!==s?s:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(r=e.registerCount)&&void 0!==r?r:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(l=e.registerCount)&&void 0!==l?l:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(c=e.registerCount)&&void 0!==c?c:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(u=e.registerCount)&&void 0!==u?u:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(d=e.registerCount)&&void 0!==d?d:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(m=e.registerCount)&&void 0!==m?m:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(p=e.registerCount)&&void 0!==p?p:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(b=e.registerCount)&&void 0!==b?b:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(y=e.registerCount)&&void 0!==y?y:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(C=e.registerCount)&&void 0!==C?C:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(I=e.registerCount)&&void 0!==I?I:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(D=e.registerCount)&&void 0!==D?D:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(U=e.registerCount)&&void 0!==U?U:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(B=e.registerCount)&&void 0!==B?B:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(q=e.registerCount)&&void 0!==q?q:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(R=e.registerCount)&&void 0!==R?R:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(et=e.registerCount)&&void 0!==et?et:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(Q=e.registerCount)&&void 0!==Q?Q:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(V=e.registerCount)&&void 0!==V?V:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(Y=e.registerCount)&&void 0!==Y?Y:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(at=e.registerCount)&&void 0!==at?at:0)>0),t.xp6(1),t.Q6J("ngIf",(null!==(tt=e.registerCount)&&void 0!==tt?tt:0)>0)}}function VS(n,a){if(1&n&&(t.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),t._uU(10),t.qZA(),t.TgZ(11,"div",12)(12,"div",13),t.O4$(),t.TgZ(13,"svg",14),t._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(19,"div",18)(20,"div",19),t._uU(21),t.qZA()()(),t.TgZ(22,"div",12)(23,"div",13),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(31,"div",18)(32,"div",19),t._uU(33),t.qZA(),t.TgZ(34,"div",22),t._uU(35),t.ALo(36,"replace"),t.ALo(37,"number"),t.qZA()()(),t.TgZ(38,"div",12)(39,"div",13),t.O4$(),t.TgZ(40,"svg",14),t._UZ(41,"path",23)(42,"path",24)(43,"path",25),t.qZA(),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(46,"div",18)(47,"div",19),t._uU(48),t.qZA()()()()(),t.TgZ(49,"div",26)(50,"div",27)(51,"p",28),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"div",18)(55,"span",19),t._uU(56),t.ALo(57,"replace"),t.ALo(58,"number"),t.qZA()()(),t.TgZ(59,"div",29)(60,"p",28),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"div",18)(64,"span",19),t._uU(65),t.qZA(),t.TgZ(66,"div",22),t._uU(67),t.ALo(68,"replace"),t.ALo(69,"number"),t.qZA()()(),t.TgZ(70,"div",27)(71,"p",30),t._uU(72),t.ALo(73,"mytranslate"),t.qZA(),t.TgZ(74,"div",18)(75,"span",19),t._uU(76),t.qZA(),t.TgZ(77,"div",31),t._uU(78),t.ALo(79,"replace"),t.ALo(80,"number"),t.qZA()()(),t.TgZ(81,"div",27)(82,"p",30),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.TgZ(85,"div",18)(86,"span",19),t._uU(87),t.qZA(),t.TgZ(88,"div",32),t._uU(89),t.ALo(90,"replace"),t.ALo(91,"number"),t.qZA()()()()()()(),t.TgZ(92,"div",33),t._UZ(93,"app-export-excel",34),t.qZA(),t.TgZ(94,"div",2)(95,"div",3)(96,"h3",4),t._uU(97),t.ALo(98,"mytranslate"),t.qZA()(),t.TgZ(99,"div",35)(100,"div",36)(101,"div",37)(102,"div",38),t._UZ(103,"div",39),t.qZA()()()()(),t.TgZ(104,"div",2)(105,"div",3)(106,"h3",4),t._uU(107),t.ALo(108,"mytranslate"),t.qZA()(),t.TgZ(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr")(114,"th",44),t._uU(115),t.ALo(116,"mytranslate"),t.qZA(),t.TgZ(117,"th",45),t._uU(118),t.ALo(119,"mytranslate"),t.qZA(),t.TgZ(120,"th",45),t._uU(121,"< 1"),t.qZA(),t.TgZ(122,"th",45),t._uU(123,"< 2"),t.qZA(),t.TgZ(124,"th",45),t._uU(125,"< 3"),t.qZA(),t.TgZ(126,"th",45),t._uU(127,"< 4"),t.qZA(),t.TgZ(128,"th",45),t._uU(129,"< 5"),t.qZA(),t.TgZ(130,"th",45),t._uU(131,"< 6"),t.qZA(),t.TgZ(132,"th",45),t._uU(133,"< 7"),t.qZA(),t.TgZ(134,"th",45),t._uU(135,"< 8"),t.qZA(),t.TgZ(136,"th",45),t._uU(137,"< 9"),t.qZA(),t.TgZ(138,"th",45),t._uU(139,"<= 10"),t.qZA(),t.TgZ(140,"th",45),t._uU(141),t.ALo(142,"mytranslate"),t.qZA()()(),t.TgZ(143,"tbody",46)(144,"tr"),t._UZ(145,"td"),t.TgZ(146,"td",47),t._uU(147),t.ALo(148,"mytranslate"),t.qZA(),t.TgZ(149,"td",47),t._uU(150),t.ALo(151,"mytranslate"),t.qZA(),t.TgZ(152,"td",48),t._uU(153),t.ALo(154,"mytranslate"),t.qZA(),t.TgZ(155,"td",48),t._uU(156,"%"),t.qZA(),t.TgZ(157,"td",48),t._uU(158),t.ALo(159,"mytranslate"),t.qZA(),t.TgZ(160,"td",48),t._uU(161,"%"),t.qZA(),t.TgZ(162,"td",48),t._uU(163),t.ALo(164,"mytranslate"),t.qZA(),t.TgZ(165,"td",48),t._uU(166,"%"),t.qZA(),t.TgZ(167,"td",48),t._uU(168),t.ALo(169,"mytranslate"),t.qZA(),t.TgZ(170,"td",48),t._uU(171,"%"),t.qZA(),t.TgZ(172,"td",48),t._uU(173),t.ALo(174,"mytranslate"),t.qZA(),t.TgZ(175,"td",48),t._uU(176,"%"),t.qZA(),t.TgZ(177,"td",48),t._uU(178),t.ALo(179,"mytranslate"),t.qZA(),t.TgZ(180,"td",48),t._uU(181,"%"),t.qZA(),t.TgZ(182,"td",48),t._uU(183),t.ALo(184,"mytranslate"),t.qZA(),t.TgZ(185,"td",48),t._uU(186,"%"),t.qZA(),t.TgZ(187,"td",48),t._uU(188),t.ALo(189,"mytranslate"),t.qZA(),t.TgZ(190,"td",48),t._uU(191,"%"),t.qZA(),t.TgZ(192,"td",48),t._uU(193),t.ALo(194,"mytranslate"),t.qZA(),t.TgZ(195,"td",48),t._uU(196,"%"),t.qZA(),t.TgZ(197,"td",48),t._uU(198),t.ALo(199,"mytranslate"),t.qZA(),t.TgZ(200,"td",48),t._uU(201,"%"),t.qZA(),t.TgZ(202,"td",48),t._uU(203),t.ALo(204,"mytranslate"),t.qZA(),t.TgZ(205,"td",48),t._uU(206,"%"),t.qZA()(),t.YNc(207,TS,26,25,"tr",49),t.YNc(208,WS,26,25,"tr",49),t.TgZ(209,"tr",50)(210,"td",51),t._uU(211),t.ALo(212,"mytranslate"),t.qZA(),t.TgZ(213,"td",51),t._uU(214),t.qZA(),t.TgZ(215,"td",51),t._uU(216),t.qZA(),t.TgZ(217,"td",51),t._uU(218),t.qZA(),t.TgZ(219,"td",51),t._uU(220),t.ALo(221,"replace"),t.ALo(222,"number"),t.qZA(),t.TgZ(223,"td",51),t._uU(224),t.qZA(),t.TgZ(225,"td",51),t._uU(226),t.ALo(227,"replace"),t.ALo(228,"number"),t.qZA(),t.TgZ(229,"td",51),t._uU(230),t.qZA(),t.TgZ(231,"td",51),t._uU(232),t.ALo(233,"replace"),t.ALo(234,"number"),t.qZA(),t.TgZ(235,"td",51),t._uU(236),t.qZA(),t.TgZ(237,"td",51),t._uU(238),t.ALo(239,"replace"),t.ALo(240,"number"),t.qZA(),t.TgZ(241,"td",51),t._uU(242),t.qZA(),t.TgZ(243,"td",51),t._uU(244),t.ALo(245,"replace"),t.ALo(246,"number"),t.qZA(),t.TgZ(247,"td",51),t._uU(248),t.qZA(),t.TgZ(249,"td",51),t._uU(250),t.ALo(251,"replace"),t.ALo(252,"number"),t.qZA(),t.TgZ(253,"td",51),t._uU(254),t.qZA(),t.TgZ(255,"td",51),t._uU(256),t.ALo(257,"replace"),t.ALo(258,"number"),t.qZA(),t.TgZ(259,"td",51),t._uU(260),t.qZA(),t.TgZ(261,"td",51),t._uU(262),t.ALo(263,"replace"),t.ALo(264,"number"),t.qZA(),t.TgZ(265,"td",51),t._uU(266),t.qZA(),t.TgZ(267,"td",51),t._uU(268),t.ALo(269,"replace"),t.ALo(270,"number"),t.qZA(),t.TgZ(271,"td",51),t._uU(272),t.qZA(),t.TgZ(273,"td",51),t._uU(274),t.ALo(275,"replace"),t.ALo(276,"number"),t.qZA(),t.TgZ(277,"td",51),t._uU(278),t.qZA(),t.TgZ(279,"td",51),t._uU(280),t.ALo(281,"replace"),t.ALo(282,"number"),t.qZA()()()()()()()),2&n){const e=t.oxw();let i;t.xp6(3),t.hij(" ",t.lcZ(4,67,"lang_auto_chi_so_co_ban")," "),t.xp6(7),t.hij(" ",e.examObj.name," "),t.xp6(7),t.hij(" ",t.lcZ(18,69,"lang_auto_so_nguoi_dang_ky_thi")," "),t.xp6(4),t.Oqu(e.countStudentRegister),t.xp6(8),t.hij(" ",t.lcZ(30,71,"lang_auto_so_nguoi_thi")," "),t.xp6(4),t.Oqu(e.countStudentRegister-e.countStudentTakeExam),t.xp6(2),t.hij("",null!==(i=t.Dn7(36,73,t.xi3(37,77,(e.countStudentRegister-e.countStudentTakeExam)/e.countStudentRegister*100,"1.0-2"),",","."))&&void 0!==i?i:0,"%"),t.xp6(9),t.hij(" ",t.lcZ(45,80,"lang_auto_tong_luot_lam")," "),t.xp6(4),t.Oqu(e.totalAttended),t.xp6(4),t.hij(" ",t.lcZ(53,82,"lang_auto_diem_trung_binh")," "),t.xp6(4),t.Oqu(t.Dn7(57,84,t.xi3(58,88,e.avgPoint,"1.0-2"),",",".")),t.xp6(5),t.hij(" ",t.lcZ(62,91,"lang_auto_so_hoc_sinh_dat_diem")+" <1"," "),t.xp6(4),t.Oqu(e.markPointOne),t.xp6(2),t.hij("",t.Dn7(68,93,t.xi3(69,97,e.markPercentOne?e.markPercentOne:0,"1.0-2"),",","."),"%"),t.xp6(5),t.Oqu(t.lcZ(73,100,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.hij("",t.Dn7(79,102,t.xi3(80,106,e.markPercentAvg?e.markPercentAvg:0,"1.0-2"),",","."),"%"),t.xp6(5),t.hij(" ",t.lcZ(84,109,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),t.xp6(4),t.Oqu(e.highestCountPoint),t.xp6(2),t.hij("",t.Dn7(90,111,t.xi3(91,115,e.highestPercentPoint?e.highestPercentPoint:0,"1.0-2"),",","."),"%"),t.xp6(4),t.Q6J("viewType",e.viewType),t.xp6(4),t.hij(" ",t.lcZ(98,118,"lang_auto_bieu_do_pho_diem")," "),t.xp6(6),t.Q6J("chart",e.chart),t.xp6(4),t.hij(" ",t.lcZ(108,120,"lang_auto_bang_tan_so")," "),t.xp6(8),t.Oqu(t.lcZ(116,122,"lang_testbank_statistical_class")),t.xp6(3),t.Oqu(t.lcZ(119,124,"lang_testbank_statistical_number_student")),t.xp6(23),t.hij("",t.lcZ(142,126,"lang_testbank_statistical_on_tb")," (>= 5)"),t.xp6(6),t.Oqu(t.lcZ(148,128,"lang_buttom_register")),t.xp6(3),t.Oqu(t.lcZ(151,130,"lang_testbank_statistical_join_exam")),t.xp6(3),t.Oqu(t.lcZ(154,132,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(159,134,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(164,136,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(169,138,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(174,140,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(179,142,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(184,144,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(189,146,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(194,148,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(199,150,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(204,152,"lang_auto_amount")),t.xp6(4),t.Q6J("ngForOf",e.statistic),t.xp6(1),t.Q6J("ngForOf",e.freeStudentList),t.xp6(3),t.Oqu(t.lcZ(212,154,"lang_testbank_statistical_total")),t.xp6(3),t.Oqu(e.countStudentRegister),t.xp6(2),t.Oqu(e.countStudentTakeExam),t.xp6(2),t.Oqu(e.markPointOne),t.xp6(2),t.Oqu(t.Dn7(221,156,t.xi3(222,160,e.markPercentOne,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTwo),t.xp6(2),t.Oqu(t.Dn7(227,163,t.xi3(228,167,e.markPercentTwo,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointThree),t.xp6(2),t.Oqu(t.Dn7(233,170,t.xi3(234,174,e.markPercentThree,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFour),t.xp6(2),t.Oqu(t.Dn7(239,177,t.xi3(240,181,e.markPercentFour,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFive),t.xp6(2),t.Oqu(t.Dn7(245,184,t.xi3(246,188,e.markPercentFive,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSix),t.xp6(2),t.Oqu(t.Dn7(251,191,t.xi3(252,195,e.markPercentSix,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSeven),t.xp6(2),t.Oqu(t.Dn7(257,198,t.xi3(258,202,e.markPercentSeven,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointEight),t.xp6(2),t.Oqu(t.Dn7(263,205,t.xi3(264,209,e.markPercentEight,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointNine),t.xp6(2),t.Oqu(t.Dn7(269,212,t.xi3(270,216,e.markPercentNine,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTen),t.xp6(2),t.Oqu(t.Dn7(275,219,t.xi3(276,223,e.markPercentTen,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.Oqu(t.Dn7(281,226,t.xi3(282,230,e.markPercentAvg,"1.0-2"),",","."))}}let XS=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.dialog=e,this.statisticalApiService=i,this.homeworkExamService=o,this.dictionaryService=s,this.testedListApiService=r,this.viewType=-1,this.dataStatistical={},this.doneLoadingEmit=new t.vpe,this.chart=new x.kL,this.examId=-1,this.statistic=[],this.examObj={},this.totalAttended=0,this.avgPoint=0,this.highestCountPoint=0,this.highestPercentPoint=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}getDataStatistic(){var e,i,o;if(this.initStatusObj(),this.dataStatistical){let q=this.dataStatistical;if(1==q.success&&q.data){var s=q.data.classroomObjsWithStudentObjs&&q.data.classroomObjsWithStudentObjs.length>0?q.data.classroomObjsWithStudentObjs:new Array,r=q.data.resultObjs&&q.data.resultObjs.length>0?q.data.resultObjs:new Array,l=this.testedListApiService.mergeStudentWithAvatar(r??[]),c=[],u=[],d=this.dictionaryService.getDictionaryByFieldTS(l,"parentId");let R=0,et=0;if(this.examObj=null!==(e=q.data.examObj)&&void 0!==e?e:{},this.totalAttended=null!==(i=q.data.totalAttended)&&void 0!==i?i:0,s.length>0){var m=[],p=[];s.forEach(V=>{var Y,at=[],tt=[],rt=0;null===(Y=V.studentObjs)||void 0===Y||Y.forEach(lt=>{var Et,It,wt,jt,Rt,Kt,Dt;m.push(null!==(Et=lt.parentId)&&void 0!==Et?Et:"0");var re=null!==(It=lt.parentId)&&void 0!==It?It:"0";if(d.hasOwnProperty(re)&&(Array.isArray(lt.examResultObjs)||(lt.examResultObjs=[]),lt.examResultObjs=this.statisticalApiService.findExamResultOfStudent(null!==(Rt=null===(wt=lt.examResultObjs)||void 0===wt?void 0:wt.concat(null!==(jt=d[re].examResultObjs)&&void 0!==jt?jt:[]))&&void 0!==Rt?Rt:[],null!==(Kt=lt.id)&&void 0!==Kt?Kt:"0")),lt.examResultObjs&&lt.examResultObjs.length>0){var Ut=lt.examResultObjs[lt.examResultObjs.length-1];Ut.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(Dt=this.examObj.examType)&&void 0!==Dt?Dt:0)||Ut.confirmedAt)&&(tt.push(Ut),null!=Ut.mark&&(R+=Ut.mark))}rt++});for(var vt=this.homeworkExamService.countMarks(tt),gt=0;gt<vt.length;gt++)at.push({key:10==gt?"Avg":9==gt?"<=10":"<"+(gt+1),count:vt[gt],percent:this.homeworkExamService.calcPercent(vt[gt],tt.length)});et+=tt.length,c.push({classObj:V.classroomObj,registerCount:rt,testedCount:tt.length>0?tt.length:0,markPercent:at})});var b=[],y=[];let Q=0;l.forEach(V=>{var Y,at,tt,rt;if(!this.commonService.filterArray(m,null!==(Y=V.parentId)&&void 0!==Y?Y:"0")&&V.examResultObjs&&V.examResultObjs.length>0){var vt=this.statisticalApiService.findExamResultOfStudent(V.examResultObjs,null!==(at=V.id)&&void 0!==at?at:"0");if(vt.length>0){var gt=vt[vt.length-1];Q++,gt.testStatus&&((this.homeworkExamService.isOnlyTrueFalse(null!==(tt=this.examObj.examType)&&void 0!==tt?tt:0)||gt.confirmedAt)&&(y.push(gt),null!=gt.mark&&(R+=gt.mark)),p.push(null!==(rt=V.parentId)&&void 0!==rt?rt:"0"))}}});for(var C=this.homeworkExamService.countMarks(y),I=0;I<C.length;I++)b.push({key:10==I?"Avg":9==I?"<=10":"<"+(I+1),count:C[I],percent:this.homeworkExamService.calcPercent(C[I],y.length)});u.push({classObj:{},registerCount:Q,testedCount:y.length>0?y.length:0,markPercent:b}),et+=y.length,this.avgPoint=R/et,this.readyData(c,u)}else{var U=[],B=[];let Q=0;for(l.forEach(Y=>{var at,tt;if(Y.examResultObjs&&Y.examResultObjs.length>0){var rt=this.statisticalApiService.findExamResultOfStudent(Y.examResultObjs,null!==(at=Y.id)&&void 0!==at?at:"0");if(rt.length>0){var vt=rt[rt.length-1];Q++,vt.testStatus&&(this.homeworkExamService.isOnlyTrueFalse(null!==(tt=this.examObj.examType)&&void 0!==tt?tt:0)||vt.confirmedAt)&&(B.push(vt),null!=vt.mark&&(R+=vt.mark))}}}),C=this.homeworkExamService.countMarks(B),I=0;I<C.length;I++)U.push({key:10==I?"Avg":9==I?"<=10":"<"+(I+1),count:C[I],percent:this.homeworkExamService.calcPercent(C[I],B.length)});u.push({classObj:{},registerCount:Q,testedCount:B.length>0?B.length:0,markPercent:U}),et=B.length,this.avgPoint=R/et,this.readyData(c,u)}}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(null!==(o=q.message)&&void 0!==o?o:"")}else this.doneLoadingEmit.emit(!1)}readyData(e,i){this.statistic=e,this.freeStudentList=i,this.totalStudentRegister(this.statistic,this.freeStudentList),this.totalStudentTakeExam(this.statistic,this.freeStudentList),this.totalPercent(this.statistic,this.freeStudentList),this.totalPoint(this.statistic,this.freeStudentList),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}createChart(){var e,i;let o=null!==(e=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi"))&&void 0!==e?e:"",s=null!==(i=this.commonService.myTranslateInstant("lang_auto_so_luong"))&&void 0!==i?i:"",l=new x.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:o+"_"+this.examObj.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["< 1","< 2","< 3","< 4","< 5","< 6","< 7","< 8","< 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:s,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=l}totalPercent(e,i){var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at,tt,rt=0,vt=0,gt=0,ct=0,lt=0,Et=0,It=0,wt=0,jt=0,Rt=0,Kt=0,Dt=0;for(let Ut=0;Ut<e.length;Ut++)e[Ut]&&(Dt+=null!==(o=e[Ut].testedCount)&&void 0!==o?o:0,rt+=null!==(s=e[Ut].markPercent[0].count)&&void 0!==s?s:0,vt+=null!==(r=e[Ut].markPercent[1].count)&&void 0!==r?r:0,gt+=null!==(l=e[Ut].markPercent[2].count)&&void 0!==l?l:0,ct+=null!==(c=e[Ut].markPercent[3].count)&&void 0!==c?c:0,lt+=null!==(u=e[Ut].markPercent[4].count)&&void 0!==u?u:0,Et+=null!==(d=e[Ut].markPercent[5].count)&&void 0!==d?d:0,It+=null!==(m=e[Ut].markPercent[6].count)&&void 0!==m?m:0,wt+=null!==(p=e[Ut].markPercent[7].count)&&void 0!==p?p:0,jt+=null!==(b=e[Ut].markPercent[8].count)&&void 0!==b?b:0,Rt+=null!==(y=e[Ut].markPercent[9].count)&&void 0!==y?y:0,Kt+=null!==(C=e[Ut].markPercent[10].count)&&void 0!==C?C:0);for(let Ut=0;Ut<i.length;Ut++)i[Ut]&&(Dt+=null!==(I=i[Ut].testedCount)&&void 0!==I?I:0,rt+=null!==(D=i[Ut].markPercent[0].count)&&void 0!==D?D:0,vt+=null!==(U=i[Ut].markPercent[1].count)&&void 0!==U?U:0,gt+=null!==(B=i[Ut].markPercent[2].count)&&void 0!==B?B:0,ct+=null!==(q=i[Ut].markPercent[3].count)&&void 0!==q?q:0,lt+=null!==(R=i[Ut].markPercent[4].count)&&void 0!==R?R:0,Et+=null!==(et=i[Ut].markPercent[5].count)&&void 0!==et?et:0,It+=null!==(Q=i[Ut].markPercent[6].count)&&void 0!==Q?Q:0,wt+=null!==(V=i[Ut].markPercent[7].count)&&void 0!==V?V:0,jt+=null!==(Y=i[Ut].markPercent[8].count)&&void 0!==Y?Y:0,Rt+=null!==(at=i[Ut].markPercent[9].count)&&void 0!==at?at:0,Kt+=null!==(tt=i[Ut].markPercent[10].count)&&void 0!==tt?tt:0);this.markPercentOne=100*rt/Dt,this.markPercentTwo=100*vt/Dt,this.markPercentThree=100*gt/Dt,this.markPercentFour=100*ct/Dt,this.markPercentFive=100*lt/Dt,this.markPercentSix=100*Et/Dt,this.markPercentSeven=100*It/Dt,this.markPercentEight=100*wt/Dt,this.markPercentNine=100*jt/Dt,this.markPercentTen=100*Rt/Dt,this.markPercentAvg=100*Kt/Dt;let re=[this.markPercentOne,this.markPercentTwo,this.markPercentThree,this.markPercentFour,this.markPercentFive,this.markPercentSix,this.markPercentSeven,this.markPercentEight,this.markPercentNine,this.markPercentTen];for(let Ut=0;Ut<re.length;++Ut)this.highestPercentPoint<re[Ut]&&(this.highestPercentPoint=re[Ut])}totalPoint(e,i){var o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at=0,tt=0,rt=0,vt=0,gt=0,ct=0,lt=0,Et=0,It=0,wt=0,jt=0;for(let Dt=0;Dt<e.length;Dt++)e[Dt]&&(at+=null!==(o=e[Dt].markPercent[0].count)&&void 0!==o?o:0,tt+=null!==(s=e[Dt].markPercent[1].count)&&void 0!==s?s:0,rt+=null!==(r=e[Dt].markPercent[2].count)&&void 0!==r?r:0,vt+=null!==(l=e[Dt].markPercent[3].count)&&void 0!==l?l:0,gt+=null!==(c=e[Dt].markPercent[4].count)&&void 0!==c?c:0,ct+=null!==(u=e[Dt].markPercent[5].count)&&void 0!==u?u:0,lt+=null!==(d=e[Dt].markPercent[6].count)&&void 0!==d?d:0,Et+=null!==(m=e[Dt].markPercent[7].count)&&void 0!==m?m:0,It+=null!==(p=e[Dt].markPercent[8].count)&&void 0!==p?p:0,wt+=null!==(b=e[Dt].markPercent[9].count)&&void 0!==b?b:0,jt+=null!==(y=e[Dt].markPercent[10].count)&&void 0!==y?y:0);for(let Dt=0;Dt<i.length;Dt++)i[Dt]&&(at+=null!==(C=i[Dt].markPercent[0].count)&&void 0!==C?C:0,tt+=null!==(I=i[Dt].markPercent[1].count)&&void 0!==I?I:0,rt+=null!==(D=i[Dt].markPercent[2].count)&&void 0!==D?D:0,vt+=null!==(U=i[Dt].markPercent[3].count)&&void 0!==U?U:0,gt+=null!==(B=i[Dt].markPercent[4].count)&&void 0!==B?B:0,ct+=null!==(q=i[Dt].markPercent[5].count)&&void 0!==q?q:0,lt+=null!==(R=i[Dt].markPercent[6].count)&&void 0!==R?R:0,Et+=null!==(et=i[Dt].markPercent[7].count)&&void 0!==et?et:0,It+=null!==(Q=i[Dt].markPercent[8].count)&&void 0!==Q?Q:0,wt+=null!==(V=i[Dt].markPercent[9].count)&&void 0!==V?V:0,jt+=null!==(Y=i[Dt].markPercent[10].count)&&void 0!==Y?Y:0);this.markPointOne=at,this.markPointTwo=tt,this.markPointThree=rt,this.markPointFour=vt,this.markPointFive=gt,this.markPointSix=ct,this.markPointSeven=lt,this.markPointEight=Et,this.markPointNine=It,this.markPointTen=wt,this.markPointAvg=jt;let Rt=[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen],Kt=0;for(let Dt=0;Dt<Rt.length;++Dt)Kt<Rt[Dt]&&(Kt=Rt[Dt],this.highestCountPoint=Dt+1)}totalStudentRegister(e,i){var o,s,r=0;for(let l=0;l<e.length;l++)r+=null!==(o=e[l].registerCount)&&void 0!==o?o:0;for(let l=0;l<i.length;l++)r+=null!==(s=i[l].registerCount)&&void 0!==s?s:0;this.countStudentRegister=r}totalStudentTakeExam(e,i){var o,s,r=0;for(let l=0;l<e.length;l++)r+=null!==(o=e[l].testedCount)&&void 0!==o?o:0;for(let l=0;l<i.length;l++)r+=null!==(s=i[l].testedCount)&&void 0!==s?s:0;this.countStudentTakeExam=r}goToStudentList(e){var i,o;let s=`/admin/testbank/statistic/${null!==(i=this.examObj.categoryId)&&void 0!==i?i:0}/${this.examObj.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/class-details/${null===(o=e.classObj)||void 0===o?void 0:o.id}`,"?backto="+encodeURIComponent(s))}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}ngOnChanges(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic()}ngOnInit(){this.isEmptyObj(this.dataStatistical)||this.getDataStatistic(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(tr),t.Y36(lo.j),t.Y36(nr.E),t.Y36(yo.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical-point"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],["azt-track-service","statistical-point-yvlv4cG_SS6","style","padding: 9.5px !important",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-yvlv4cG_SS6",2,"padding","9.5px !important",3,"click"]],template:function(e,i){if(1&e&&(t.YNc(0,XA,8,6,"div",0),t.YNc(1,VS,283,233,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statistic&&0==i.statistic.length&&i.freeStudentList&&0==i.freeStudentList.length)("ngIfElse",o)}},dependencies:[E.sg,E.O5,x.Dm,cm,E.JJ,_t.bT,_t.AS],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),n})();const tO=["drawer"];function eO(n,a){1&n&&t._UZ(0,"azt-loading-effect")}const nO=function(n){return{hidden:n}};let iO=(()=>{class n extends st.Q{constructor(e,i){super(),this.statisticalApiService=e,this.activeRoute=i,this.isListQuestion=!0,this.isStatistical=!1,this.isTabScore=!0,this.isExportExcel=!0,this.viewType=1,this.backToLink="",this.examId=0,this.examObj={},this.doneLoadCount=0,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.dataForStatistical={}}getDataStatistical(){this.initStatusObj(),this.statisticalApiService.getExamStatisticObjs("statistic",this.examId,1).subscribe(e=>{var i;1==e.success&&e.data?this.dataForStatistical=e:(this.showErrorSnack(null!==(i=e.message)&&void 0!==i?i:""),this.stopStatusObj())})}doneLoadingFunc(e){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){var e,i,o;this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let s=null!==(e=this.commonService.getMyParam(this.activeRoute,"cat_id"))&&void 0!==e?e:"",r=null!==(i=this.commonService.getMyParam(this.activeRoute,"id"))&&void 0!==i?i:"";this.backToLink=this.commonService.getMyQueryParam("backto")?null!==(o=this.commonService.getMyQueryParam("backto"))&&void 0!==o?o:"":`/admin/testbank/exam-results-list/${s}/${r}/0`,(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var c;this.examId=null!==(c=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==c?c:0,this.getDataStatistical()}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(tr),t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical"]],viewQuery:function(e,i){if(1&e&&t.Gf(tO,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:9,vars:15,consts:[[3,"headerTitle","headerBackTolink"],[1,"statistical","mx-auto","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.TgZ(2,"div",1),t.YNc(3,eO,1,0,"azt-loading-effect",2),t.TgZ(4,"div",3)(5,"app-statistical-point",4),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA(),t.TgZ(6,"app-list-question",5),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA(),t.TgZ(7,"app-table-score",5),t.NdJ("doneLoadingEmit",function(s){return i.doneLoadingFunc(s)}),t.qZA()(),t._UZ(8,"azt-scroll-to-top-bottom",6),t.qZA()()),2&e&&(t.Q6J("headerTitle",t.lcZ(1,11,"lang_testbank_statistical_header_title"))("headerBackTolink",i.backToLink),t.xp6(3),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.Q6J("ngClass",t.VKq(13,nO,i.statusObj.loading)),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.dataForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.dataForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.dataForStatistical),t.xp6(1),t.Q6J("isScrollToTop",!0))},dependencies:[E.mk,E.O5,xe.Q,zu.M,Xe._,CA,VA,XS,_t.bT],encapsulation:2}),n})();var _s=A(59729),oO=A(25034);class aO{process(a){let e=["(^c\xe2u\\s*\\d{1,4}[^0-9])","(^ca\u0302u\\s*\\d{1,4}[^0-9])","(^c\xa9u\\s*\\d{1,4}[^0-9])","(^ca\u201au\\s*\\d{1,4}[^0-9])","(^b\xe0i\\s*\\d{1,4}[^0-9])","(^ba\u0300i\\s*\\d{1,4}[^0-9])","(^cau\\s*\\d{1,4}[^0-9])","(^bai\\s*\\d{1,4}[^0-9])","(^question\\s*\\d{1,4}[^0-9])","(^questions\\s*\\d{1,4}[^0-9])","(^\\[\\d{1,4}\\][^0-9])","(^\\d+\\s*\\(nb\\))","(^\\d+\\s*\\(th\\))","(^\\d+\\s*\\(vd\\))","(^\\d+\\s*\\(vdc\\))","(^c\xe2u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u0302u\\s*\\d{1,4}[\\s\\.:]*$)","(^c\xa9u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u201au\\s*\\d{1,4}[\\s\\.:]*$)","(^b\xe0i\\s*\\d{1,4}[\\s\\.:]*$)","(^ba\u0300i\\s*\\d{1,4}[\\s\\.:]*$)","(^cau\\s*\\d{1,4}[\\s\\.:]*$)","(^bai\\s*\\d{1,4}[\\s\\.:]*$)","(^questions\\s*\\d{1,4}[\\s\\.:]*$)","(^question\\s*\\d{1,4}[\\s\\.:]*$)"],i=["(^(\\d+\\s*\\.)\\s*[\\.0-9])","(^(\\d+\\s*\\.)\\s*\\(\\s*\\d+\\s*\\))","(^(\\d+\\s*\\.)\\s*[^\\s]\\s*[^\\s0-9])","(^\\d+\\s*\\.\\s*$)"],o=["(H\u01af\u1edaNG\\s*D\u1eaaN)","(\u01af\u1edaNG\\s*D\u1eaaN\\s*GI\u1ea2I\\s*CHI)","(GI\u1ea2I\\s*TH\xcdCH\\s*CHI\\s*TI\u1ebeT)","(H\u01b0\u1edbng\\s*d\u1eabn\\s*gi\u1ea3i)","(L\u1eddi\\s*gi\u1ea3i)","(L\u1edcI\\s*GI\u1ea2I)","(GI\u1ea2I\\s*CHI\\s*TI\u1ebeT)","(HD:)","(GLOSSARY)"],s=0,r=[],l=[];for(let u of a){let d=this.do(u,e,i);null!=d?(r.push({idx:s,val:oO.Utils.capitalizeFirstLetter(d.olabel)}),l.push("q")):(d=this.match(u,o),null!=d&&l.push("h")),s++}if(l.join("-").startsWith("q-h-q-h")){let u=1;for(let d of r)a[d.idx]=a[d.idx].replace(d.val,d.val.replace(/\d+/g,u+"")),u++}}do(a,e,i){let o=this.matchPos(a,e,i);if(o.value){let s=null;for(let m=o.value.length-1;m>=0;m--)if(o.value[m]){s=o.value[m];break}if(null==s)return null;let r=a.replace(/\|/g,"").toLowerCase().indexOf(s),l=r,c="",u=a.toLowerCase();for((s.endsWith("(")||s.endsWith("["))&&(s=s.substring(0,s.length-1));l<u.length&&("|"!=u[l]&&(c+=u[l]),l++,c!=s););return{pos:[r,l],olabel:s}}return null}matchPos(a,e,i){let o=a.replace(/\|/g,"").toLowerCase().trim(),s=e.join("|"),r=o.matchAll(s).next();return r.value||(s=i.join("|"),r=o.matchAll(s).next()),r}match(a,e){let i=a.replace(/\|/g,"").trim().match(e.join("|"));return null!=i&&i.length>0?{pos:[0,0],olabel:""}:null}}let sO=(()=>{class n{constructor(e,i,o,s,r,l,c,u,d,m){this.editorCommonService=e,this.commonService=i,this.cdnService=o,this.infoService=s,this.questionService=r,this.examCategoryService=l,this.apiUploadService=c,this.userService=u,this.questionSaveService=d,this.examService=m,this.saveParts=[],this.cropPdfParams="",this.configRenderService=new Yt.B,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.loadingManager=new Map,this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g}init(){return new Promise((e,i)=>{this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("azota_assets/js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(o=>{this.cropPdfParams=o.CROPPDF_PARAMS,e()})}).catch(o=>{i(o)})})}hasStyleAns(e,i,o){if(!i)return"";let s=o.filter(r=>r.lineIdx==i.lineIdx&&r.s<=i.b&&r.e>=i.b);for(let r of s)if(r.style.indexOf("!u")>=0||r.style.indexOf("!b")>=0||r.style.indexOf("!hl")>=0)return r.style;return""}applyStyle(e,i,o){var s;for(let r=i.length-1;r>=0;r--){let l=i[r],c=o.filter(u=>u.lineIdx==l.lineIdx&&u.e>=l.s);for(let u=c.length-1;u>=0;u--){let d=c[u].s>=l.s?c[u].s:l.s,m=c[u].e<=(null!==(s=l.e)&&void 0!==s?s:9999999)?c[u].e:l.e,p=c[u].style.replaceAll("!hl","");if(d<m&&""!=p){let b=e[l.lineIdx],y=b.substring(d,m);""!=y.trim()&&(e[l.lineIdx]=b.substring(0,d)+"["+p+":$"+y+"$]"+b.substring(m))}}}}processUnderlineAns(e){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,o=0,s=[];for(let r of e){if(/^[ABCD\.\s\t\*]+$/.test(r)&&""!=r.trim()&&o>0){let l=r;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),u=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let d=e[o-1].match(i);if(d&&l.length==d.length){for(let p of d)e[o-1]=e[o-1].replace(p,p.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==u?"*":""}${l.substring(0,1)}:`).replace("$]","]")),s[s.length-1]=e[o-1],l=l.substring(1),u++;o++;continue}}}s.push(r),o++}return s}processStyle(e){var i;let o=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,s=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],l=0;for(let C of e){if(s.test(e[l].replaceAll(o,"$1"))&&(e[l]=e[l].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),C=e[l]),C){let U,I=C.matchAll(o),D=0;for(;;){let B=I.next();if(B.done)break;let q=B.value[0],R=q.indexOf(":"),et=q.substring(1,R),V=B.value.index-D,Y=V+B.value[1].length;U&&V==U.e&&U.style==et?U.e=Y:(U={lineIdx:l,s:V,e:Y,style:et},r.push(U)),D+=R+4}e[l]=C.replaceAll(o,"$1")}l++}const c=new G.ExamIntellisense(this.cropPdfParams);c.setLines(e);let u=c.parse(),d=[],m=new Map,p=0;for(let C of u){p++;for(let I of C.parts)d.push(I);for(let I of C.answers){let D=this.hasStyleAns(e,I.parts[0],r);""!=D&&m.set(`${C.label}-${C.group}-${I.label}-${p}`,D);for(let U of I.parts)d.push(U)}}for(let C of u)if(C.help)for(let I of C.help)d.push(I);this.applyStyle(e,d,r),c.setLines(e),u=null!==(i=c.parse())&&void 0!==i?i:[];let b=[];p=0;for(let C of u){p++;let I=new Map;if(!(C.answers.filter(D=>D.isCorrect).length>0)){for(let D of C.answers){let U=m.get(`${C.label}-${C.group}-${D.label}-${p}`);U&&""!=U&&I.set(U,I.has(U)?void 0:D.parts[0])}for(let D of I)if(D[1]){b.push(D[1]);break}}}for(let C=b.length-1;C>=0;C--){let I=b[C];e[I.lineIdx]=e[I.lineIdx].substring(0,I.b)+"*"+e[I.lineIdx].substring(I.b)}return e=this.processUnderlineAns(e),u.length>0?e.slice(u[0].parts[0].lineIdx):e}processMath(e,i){let o=0;for(let s of e){let r=s.matchAll(this.MATH_PAT);for(;;){let l=r.next();if(l.done)break;let c=l.value[0],d=i.get(l.value[1]);d&&(d.lineIdx=o+1,d.startCol=l.value.index+1,d.endCol=d.startCol+c.length)}o++}}getLoadedIds(e){return e.filter(i=>i.id&&i.id>0).map(i=>{var o;return null!==(o=i.id)&&void 0!==o?o:0})}getIncludeIds(e,i){return[]}renderStr(e,i,o,s,r,l,c,u,d=!0){let m=d?s.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):s,p=[new pe,new Bn(this.cdnService),new be,new $t,new Ie,new Vt,new yi(i),new he,new jn.$(this.cdnService,this.commonService,this.configRenderService,l),new Wn(this.cdnService,this.commonService,c,this.apiCallbackCache,this.aztEditor,u,this.getIncludeIds(e),this.apiDataCache,this.matrixLoadedData)];"link"==r&&(p=[new jn.$(this.cdnService,this.commonService,this.configRenderService,l)]),"help"==r&&p.pop();for(const b of p)b.setLoadingManager(this.loadingManager),m=b.render(m,o,this.questionService);return m}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:e};let s=e.matchAll(/\[!info:\d+\]/g),r="",l=0;for(;;){let u=s.next();if(u.done)break;r=u.value[0],l=u.value.index;break}if(""==r)return{val:"",idx:0,id:"0"};let c=r.replace("[!info:","").replace("]","").trim();return{val:r,idx:l,id:c}}fillImg(e,i,o,s){let r=new RegExp("<div id='"+o+"'[^>]+></div>","g"),l=e[i];l.renderedStr=l.renderedStr.replace(r,s??"");for(let c of l.answers)c.renderedStr=c.renderedStr.replace(r,s??"");l.helpRenderedStr&&(l.helpRenderedStr=l.helpRenderedStr.replace(r,s??""))}fillError(e,i,o){e[i].err=`<span style='color:red'>${o}</span>`}renderQuest(e,i,o,s,r){return new Promise(l=>{var c;let u=3;s.answers.length>0&&(u=1),0==s.answers.length&&s.strAns&&(u=4);let d=(D,U)=>{console.log("nvanh fill image ",e.length,D,U),this.fillImg(e,r,D,U)},m=D=>{console.log("nvanh fill quest ",r,D)},p=D=>{this.fillError(e,r,D)},b=s.parts.map(D=>{var U;return null!==(U=D.text)&&void 0!==U?U:""}).join("<br>").trim(),y=this.parseExtra(b);""!=y.val&&(b=b.substring(0,y.idx)+b.substring(y.idx+y.val.length));let C=s.help?s.help.map(D=>{var U;return null!==(U=D.text)&&void 0!==U?U:""}).join("<br>").trim():void 0,I={renderedStr:this.renderStr(e,i,o,b,"full",d,m,p),quest:s,type:u,strAns:s.strAns?s.strAns.split(/[\|]/).map(D=>D.trim()):void 0,label:this.upperFirst(null!==(c=s.olabel)&&void 0!==c?c:""),helpRenderedStr:C?this.renderStr(e,i,o,C,"full",d,m,p):void 0,answers:s.answers.map(D=>{let U=D.parts.map(B=>{var q;return null!==(q=B.text)&&void 0!==q?q:""}).join("<br>").trim();return{renderedStr:this.renderStr(e,i,o,U,"full",d,m,p),ans:D}})};if(I.renderedStr.startsWith("Loading...|")){let D=I.renderedStr.split("|");if(D[1].indexOf(",")<0){let U=+D[1];U>0&&(I.id=U)}I.renderedStr=D[0]}e[r]=I,l(I)})}getLstQuestWithFile(e,i){return new Promise((o,s)=>{const r=new Jt(this.editorCommonService,this.commonService),l=[],c=new Map,u=[],d=[];let m=1;r.handleFileSelect(e,p=>{for(let B of p.data)if("img"==B.type)l.push({id:B.key,link:B.value,cssStyle:B.cssStyle}),B.cssStyle&&B.cssStyle.split(";").length>2&&u.push([`^\\[img:\\$${B.key}\\$\\]`,`[img:$${B.key}$]\n`]);else if("mathml"==B.type){let q=+B.key.split("_")[1];c.set(B.key,{id:q,str:B.value,raw:B.docx,lineIdx:0,startCol:0,endCol:0}),q>m&&(m=q)}m++;for(let B of p.lines){if(0==B.length)continue;let q="";q=Array.isArray(B[0])&&Array.isArray(B[B.length-1])&&Array.isArray(B[Math.floor(B.length/2)])?"[* "+B.map(et=>et.map(Q=>Q.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":B.join("");for(let et of u)q=q.replaceAll(new RegExp(et[0],"g"),et[1]);let R=q.split("\n");for(let et of R)d.push(et)}(new qt).process(d);let y=this.processStyle(d);this.processMath(y,c),(new aO).process(y);const I=new G.ExamIntellisense(this.cropPdfParams);I.setLines(y);let D=I.parse();const U=new X.Q(2);for(let B=0;B<D.length;B++)U.addTask(this,this.renderQuest,[i,c,l,D[B],B]);U.start().then(B=>{setTimeout(()=>{o({lstQuest:i,mathMap:c,images:l})},10*l.length)})})})}createFolder(e,i){return new Promise((o,s)=>{this.examCategoryService.apiExamCategorySaveObjPost({name:e,parentId:i}).subscribe(l=>{var c;1==l.success?o(null!==(c=l.data)&&void 0!==c?c:{}):s(new Error(l.message))})})}convertPartItem(e){var i,o;return 0===e.length?"":/^\[@((.)+)\]/g.test(null!==(i=e[0].text)&&void 0!==i?i:"")?e[0].lineIdx+"_____"+(null===(o=e[0].text)||void 0===o?void 0:o.split("]=>")[0])+"]":""}convertQuestion(e,i,o,s,r,l){return new Promise((c,u)=>{var d,m,p,b;const y=[];s.answers.forEach(U=>{y.push({key:U.ans.label,content:U.renderedStr})});let C=s.answers.find(U=>!0===U.ans.isCorrect);const D={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(r+1),answerType:s.type,categoryId:0,questionContent:s.renderedStr,questionText:s.renderedStr,answerConfig:JSON.stringify(y),groupId:l,answerResult:C?JSON.stringify([C.ans.label]):s.strAns&&(null===(d=s.strAns)||void 0===d?void 0:d.length)>0?JSON.stringify(s.strAns):void 0,totalQuestion:e.length,version:"4",isFixAns:s.quest.isFixAns?1:0,isImage:1,answerMedia:s.helpRenderedStr,mediaMeta:JSON.stringify(i),groupType:i?.isFixGroup?"1":void 0,tags:s.tag&&s.tag.length?s.tag.map(U=>{var B;return null!==(B=U.code)&&void 0!==B?B:""}):[],__path:this.convertPartItem(s.quest.parts)};null===(p=null===(m=o.exam)||void 0===m?void 0:m.questionObj.listQuestions)||void 0===p||p.push(D),null===(b=o.exam)||void 0===b||b.rootQuests.push(s),s.audio&&(0,ot.F0)(s.audio.type)?s.attachments&&"[]"!==s.attachments?(D.attachments=s.attachments,c()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(s.audio).subscribe(U=>{U.type!=K.dt.UploadProgress&&(1==U.success?D.attachments=JSON.stringify([U.data]):u(new Error("lang_auto_upload_file_audio_that_bai")),c())}):c()})}generateFileAzt(e){var i,o;let s=null!==(o=null===(i=this.aztEditor)||void 0===i?void 0:i._editor.getValue().trim())&&void 0!==o?o:"";if(""!=s){let r=[],l=[];for(let d of e.mathMap)r.push(d);let u=JSON.stringify({text:s,imgs:e.images,maths:r,infos:l});return new Blob([u],{type:"text/plain"})}return null}saveCdn(e,i){return new Promise(o=>{var s;if(null!==(s=i.exam)&&void 0!==s&&s.examObj){let r=new Date,l=`user-${this.userService.getUserObj().id}-de-azota-${r.getDate()}${r.getMonth()+1}${r.getFullYear()}-${r.getTime()}.azt`;const c=this.generateFileAzt(e);if(c){const u=new File([c],l,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(u).subscribe(d=>{var m,p;d.type!=K.dt.UploadProgress&&(1==d.success&&d.data&&!(null===(m=i.exam)||void 0===m)&&m.examObj&&(i.exam.examObj.cdnEditorFile=null!==(p=d.data.url)&&void 0!==p?p:""),o())})}else o()}else o()})}makeExpandInfoObj(e){var i,o;const r=e.map(l=>{var c;return null===(c=l.quest.olabel)||void 0===c?void 0:c.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")}).filter(l=>l&&l.length>0);return r.length>0?{label:(l=null!==(i=r[0])&&void 0!==i?i:null!==(o=this.commonService.myTranslateInstant("lang_auto_cau"))&&void 0!==o?o:"",l.charAt(0).toUpperCase()+l.slice(1))}:{};var l}uploadFileProcess(e,i){return new Promise(o=>{e?this.apiUploadService.uploadToCdnProgressForTestbankDocx(e).subscribe(s=>{var r,l;s.type!=K.dt.UploadProgress&&(1==s.success&&i.exam&&(i.exam.examObj.cdnExamFile=null!==(l=null===(r=s.data)||void 0===r?void 0:r.url)&&void 0!==l?l:""),o())}):o()})}saveQuestionObjs(e,i,o){return new Promise(s=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:i}).subscribe(r=>{var l,c,u;if(e.exam&&1===r.success&&null!==(l=r.data)&&void 0!==l&&l.objs){const d=[];r.data.objs.forEach((m,p)=>{var b;const y=null===(b=e.exam)||void 0===b?void 0:b.examConfig.find(I=>I.name==m.name);if(d.push({id:m.id,name:m.name,groupId:m.groupId,scorePerQuestion:y?.point||1,totalQuestion:1,sort:p+o}),i[p]){const I=i[p];I.__path&&I.__path.length>0?this.saveParts.includes(I.__path)||this.saveParts.push(I.__path):this.saveParts.push(`[@Q${m.id}: C\xe2u ${p+o+1}]`)}}),s({indexSaved:(null===(u=null===(c=r.data)||void 0===c?void 0:c.objs)||void 0===u?void 0:u.length)+o,examConfigs:d})}else s({indexSaved:o,examConfigs:[]})})})}processSaveQuestions(e,i,o,s,r){var l,c,u,d,m,p;if(null!==(l=i.exam)&&void 0!==l&&l.questionObj&&null!==(c=i.exam)&&void 0!==c&&c.questionObj.listQuestions){var b=null===(u=i.exam)||void 0===u?void 0:u.questionObj.listQuestions.length;let C=o+100>b?b:o+100;var y=null!==(m=null===(d=i.exam)||void 0===d?void 0:d.questionObj.listQuestions.slice(o,C))&&void 0!==m?m:[];let I=[];for(const D of y)I.push({categoryId:D.categoryId,groupId:D.groupId,name:null!==(p=D.name)&&void 0!==p?p:"none",metadata:D.metadata,isImage:D.isImage,questionContent:D.questionContent,answerMedia:D.answerMedia,questionText:D.questionText,answerType:D.answerType,answerConfig:D.answerConfig,coordinates:D.coordinates,answerResult:D.answerResult,totalQuestion:D.totalQuestion,tags:D.tags,mediaId:D.mediaId,mediaMeta:D.mediaMeta,attachments:D.attachments,version:D.version,isFixAns:D.isFixAns,groupType:D.groupType});I.length>0?this.saveQuestionObjs(i,I,s).then(D=>{if(D.examConfigs&&D.examConfigs.length>0){let U=r.concat(D.examConfigs);this.processSaveQuestions(e,i,C,D.indexSaved,U)}}):this.saveExamObj(e,i,r)}}saveExamObj(e,i,o){var s;if(i.exam){let r=!1;this.saveParts=this.saveParts.map(d=>{const m=d.split("_____");return-1!==d.indexOf("ng\u1eabu nhi\xean")&&(r=!0),1===m.length?m[0]:m[1]});let l=Object.assign(Object.assign({},this.formSubjectAndClassroom),{generalTitle:null===(s=i.exam)||void 0===s?void 0:s.examObj.name,generalDescription:""}),c=this.userService.getUserObj(),u=JSON.stringify({type:"exam",id:0,user:c.id});i.exam.examObj.scoringMethod="1",i.exam.examObj.name=l.generalTitle,i.exam.examObj.examConfigs=JSON.stringify(o),i.exam.examObj.description=l.generalDescription,i.exam.examObj.editorStatus=2,i.exam.examObj.metadata=JSON.stringify(this.saveParts),i.exam.examObj.isRandomExam=r,i.exam.examObj.schoolLevelId=l.schoolLevel,i.exam.examObj.schoolSubjectId=l.schoolSubject,this.examService.apiExamSaveObjPost(i.exam.examObj,u).subscribe(d=>{e()})}}saveExam(e,i,o){return new Promise(s=>{var r;if(e.result){const l=new X.Q(10,{function:(y,C)=>{o.pushMsg(`D\u1eef li\u1ec7u: ${Math.floor(y/C*100)}%`)}}),c={},d=null!==(r=(e.result.lstQuest[0].quest.isGroup?e.result.lstQuest[1]:e.result.lstQuest[0]).quest.label)&&void 0!==r?r:1;let m,p=[],b=!0;c.exam={examObj:{categoryId:i,name:e.file.name,startQuestionIndex:d},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},l.addTask(this,this.uploadFileProcess,[e.file,c]),e.result.lstQuest.forEach((y,C)=>{var I,D;if(y.quest.isGroup)m=y,b=!1;else{b||(b=!0,p.push(C-(p.length+1)));const B={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(C-p.length+1),point:1};null===(I=c.exam)||void 0===I||I.examConfig.push(B),l.addTask(this,this.convertQuestion,[null===(D=e.result)||void 0===D?void 0:D.lstQuest,m,c,y,C-p.length,p.length])}}),l.addTask(this,this.saveCdn,[e.result,c]),c.exam.examObj.firstInGroupIndexes=JSON.stringify(p),c.exam.examObj.expandInfoObj=this.makeExpandInfoObj(e.result.lstQuest),l.start().then(()=>{var y,C,I,D;o.pushMsg("\u0110ang l\u01b0u ..."),console.log("nvanh save ",c);const U=null!==(C=null===(y=c.exam)||void 0===y?void 0:y.questionObj.listQuestions)&&void 0!==C?C:[];this.questionSaveService.convertQuestions(U,null!==(D=null===(I=c.exam)||void 0===I?void 0:I.rootQuests)&&void 0!==D?D:[],(B,q="",R)=>{o.remove(),s()}).then(()=>{this.saveParts=[],this.processSaveQuestions(()=>{o.remove(),s()},c,0,0,[])})})}else s()})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ka),t.LFG(Qe.v),t.LFG(le.U),t.LFG(Bt.CM),t.LFG(Bt.aE),t.LFG(Bt.F1),t.LFG(Do.$),t.LFG(qn.K),t.LFG(Ui),t.LFG(Bt.Oe))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rO=(()=>{class n{constructor(e,i){this.syncQuestionTestBankService=e,this.commonService=i,this.logger=new _s.O,this.treeDataFolders=new Ol}reset(){this.logger=new _s.O}cancel(){return new Promise(e=>{this.treeDataFolders.pushActionCancel(0).then(()=>{this.logger.remove(),e()})})}init(e,i){return new Promise(o=>{this.logger=new _s.O(!0,this.commonService.myTranslateInstant("lang_loading_data")),this.treeDataFolders=new Ol,this.treeDataFolders.parentId=e,this.treeDataFolders.pushActionCancel(1),this.treeDataFolders.pushActionRunner(!0),this.syncQuestionTestBankService.formSubjectAndClassroom=i,this.syncQuestionTestBankService.init().then(()=>{o()})})}push(e){this.treeDataFolders.push(e)}start(){var e;this.logger.pushMsg(null!==(e=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu"))&&void 0!==e?e:"");const i=new X.Q(1);this.treeDataFolders.pushTaskDocument(i,this.syncQuestionTestBankService,this.logger),i.start().then(o=>{this.logger.remove()})}get keyLoading(){return this.logger.lines}get isLoading(){var e;return null!==(e=this.logger.run)&&void 0!==e&&e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(sO),t.LFG(Qe.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ol{constructor(a){this.parentName="",this.parentId=-1,this.folderId=-1,this.name="",this.documents=[],this.children=[],this.LOCAL_STORAGE_KEY="NVANH_TOOL_SYNC_ACTION",a&&(this.name=a)}push(a){const e=a.webkitRelativePath.split("/"),i=e.shift();if(""===this.name&&(this.name=i??"root"),1===e.length)return void this.documents.push({file:a});e.pop();let o=this;e.forEach(s=>{o=this.getOrCreateObject(s,o)}),o.documents.push({file:a})}pushTaskDocument(a,e,i){a.addTask(this,this.syncFolderAction,[e,i],this.name),this.documents.forEach(o=>{a.addTask(this,this.processDocument,[o,e,i],o.file.name)}),this.children.forEach(o=>{o.pushTaskDocument(a,e,i)})}syncActionDocument(a,e,i){return new Promise(o=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(i.file.name)))if(i.result&&i.result.lstQuest.filter(s=>s.answers.length>2).length>0){const s=new _s.O(!0,"\u0110ang l\u01b0u \u0111\u1ec1 thi "+i.file.name);e.pushChild(s),a.saveExam(i,this.folderId,s).then(()=>{this.saveName(this.makeName(i.file.name)),s.remove(),o()})}else o();else o()})}syncFolderAction(a,e){return new Promise(i=>{if(1===this.getStatusAction()&&this.checkName(this.makeName()))if(-1===this.folderId){const o=new _s.O(!0,"\u0110ang t\u1ea1o th\u01b0 m\u1ee5c "+this.name);e.pushChild(o),-1!==this.parentId?a.createFolder(this.name,this.parentId).then(s=>{var r,l;this.folderId=null!==(l=null===(r=s.obj)||void 0===r?void 0:r.id)&&void 0!==l?l:-1,this.children.forEach(c=>{c.parentId=this.folderId}),this.saveName(this.makeName()),this.saveFolderId(this.makeName(),this.folderId),o.remove(),i()}).catch(()=>{this.folderId=-1,o.remove(),i()}):(o.remove(),i())}else i();else 1===this.getStatusAction()&&(this.folderId=this.getFolderId(this.makeName()),this.children.forEach(o=>{o.parentId=this.folderId})),i()})}processDocument(a,e,i){return new Promise((o,s)=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(a.file.name))){const r=new _s.O(!0,"\u0110ang x\u1eed l\xfd t\u1ec7p tin "+a.file.name);i.pushChild(r),e.getLstQuestWithFile(a.file,[]).then(c=>{a.result=c,c.lstQuest.filter(u=>u.answers.length>2).length>0&&(r.pushMsg("\u0110ang l\u01b0u \u0111\u1ec1 thi "+a.file.name),this.syncActionDocument(e,i,a).then(()=>{r.remove(),o()}))})}else o()})}getOrCreateObject(a,e){let i=e.children.find(o=>o.name===a);return i||(i=new Ol(a),i.parentName=e.parentName+"/"+e.name,e.children.push(i)),i}saveName(a){const e=this.makeObjSave();e.save_names.push(a),this.setObjSave(e)}saveFolderId(a,e){const i=this.makeObjSave();i.folder_save.push({name:a,value:e}),this.setObjSave(i)}checkName(a){return!this.makeObjSave().save_names.includes(a)}makeName(a){return a?this.parentName+"_"+this.name+"_"+a:this.parentName+"_"+this.name}getFolderId(a){var e,i;return null!==(i=null===(e=this.makeObjSave().folder_save.find(s=>s.name===a))||void 0===e?void 0:e.value)&&void 0!==i?i:0}pushActionCancel(a){return new Promise(e=>{const i=this.makeObjSave();if(i.status=a,this.setObjSave(i),0===a){const o=setInterval(()=>{this.makeObjSave().isRun||(clearInterval(o),e())},100)}else e()})}pushActionRunner(a){const e=this.makeObjSave();e.isRun=a,this.setObjSave(e)}getStatusAction(){const a=this.makeObjSave().status;return 0===a&&this.pushActionRunner(!1),a}makeObjSave(){const a=window.localStorage.getItem(this.LOCAL_STORAGE_KEY);return a?JSON.parse(a):new lO}setObjSave(a){window.localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(a))}}class lO{constructor(){this.status=1,this.save_names=[],this.folder_save=[],this.isRun=!0}}var cO=A(25157);const uO=["drawer"];function dO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.handleCancelSync())}),t._uU(1,"Hu\u1ef7"),t.qZA()}}function _O(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",38),t._UZ(3,"rect",39)(4,"path",40)(5,"path",41),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function mO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",38),t._UZ(3,"rect",39)(4,"path",40)(5,"path",43),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}const pO=function(n){return{"ml-5":n}};function hO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",19),t.YNc(2,_O,6,3,"button",20),t.YNc(3,mO,6,3,"button",21),t.qZA(),t._UZ(4,"config-level-subject",22),t.TgZ(5,"div",10)(6,"p",23),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",24)(10,"div",25)(11,"div",26)(12,"input",27,28),t.NdJ("change",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handleEventChangeFolder(o))}),t.qZA(),t.TgZ(14,"div",29)(15,"div",30)(16,"div")(17,"span",14),t._UZ(18,"lucide-icon",31),t.qZA(),t.TgZ(19,"span",32),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()(),t.TgZ(22,"div",33)(23,"span",34),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",33)(27,"a",35),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(13);return t.KtG(o.click())}),t.TgZ(28,"span",14),t._UZ(29,"lucide-icon",36),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(19,pO,!e.isMobile&&e.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!e.isOpenSideNav||e.isMobile),t.xp6(1),t.Q6J("ngIf",e.isOpenSideNav&&!e.isMobile),t.xp6(1),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("schoolSubjectObjs",e.schoolSubjectObjs)("examSchoolLogObj",e.examSchoolLogObj),t.xp6(3),t.hij(" ",t.lcZ(8,11,"lang_core_auto_tool_sync_chon_thu_muc")," "),t.xp6(13),t.hij(" ",t.lcZ(21,13,"lang_core_auto_tool_sync_keo_tha")," "),t.xp6(4),t.hij(" ",t.lcZ(25,15,"lang_core_auto_tool_sync_hoac")," "),t.xp6(7),t.Oqu(t.lcZ(32,17,"lang_core_auto_tool_sync_chon_thu_muc_can_sync"))}}const gO=function(n,a){return{"w-85":n,"w-30":a}};let fO=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l){super(),this.examFilterService=e,this.syncTestbankService=i,this.activeRoute=o,this.documentConfigService=s,this.userService=r,this.formBuilder=l,this.backToLink="/admin/dashboard",this.aztConfigCropParam="",this.drawer=void 0,this.mode=this.commonService.isMobileOrTable()?"over":"side",this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.isMobile=this.commonService.isMobileOrTable(),this.isLoadForm=!1,this.form=new h.nJ({}),this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.examSchoolLogObj={}}ngOnInit(){super.ngOnInit(),this.userService.isTestMarketAdminRole()?(this.form=this.formBuilder.group({generalDescription:new h.p4(""),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])}),this.subscriptions.add(this.documentConfigService.apiDocumentConfigGetSubjectAndLevelObjsGet().subscribe(e=>{var i,o,s,r,l,c,u;1==e.success?(this.examSchoolLogObj=null!==(o=null===(i=e.data)||void 0===i?void 0:i.examSchoolLogObj)&&void 0!==o?o:{},this.schoolLevelObjs=null!==(r=null===(s=e.data)||void 0===s?void 0:s.schoolLevelObjs)&&void 0!==r?r:[],this.schoolSubjectObjs=null!==(c=null===(l=e.data)||void 0===l?void 0:l.schoolSubjectObjs)&&void 0!==c?c:[],this.isLoadForm=!0):this.errorStatusObj(null!==(u=e.message)&&void 0!==u?u:"")}))):this.commonService.myNavigation("/admin/dashboard")}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0,this.saveStatusSideNav()}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1,this.saveStatusSideNav()}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam_sync_folder",this.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam_sync_folder")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam_sync_folder");this.isOpenSideNav=!e||"close"!=e}}mainProcessFiles(e){var i;const o=null!==(i=Number(this.activeRoute.snapshot.paramMap.get("cat_id")))&&void 0!==i?i:0,s=this.form.getRawValue();this.syncTestbankService.init(o,s).then(()=>{e.forEach(r=>{(0,ot.D_)(r.type)&&r.name.includes("docx")&&this.syncTestbankService.push(r)}),this.syncTestbankService.start()})}handleEventChangeFolder(e){e.target.files&&this.mainProcessFiles([...e.target.files]),e.target.value=""}handleCancelSync(){this.syncTestbankService.cancel().then(()=>{})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(vl.Y),t.Y36(rO),t.Y36(w.gz),t.Y36(Bt.Cq),t.Y36(qn.K),t.Y36(h.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sync-folder"]],viewQuery:function(e,i){if(1&e&&t.Gf(uO,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},features:[t.qOj],decls:22,vars:22,consts:[[3,"headerBackTolink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],["azt-track-service","sync-folder-I_srCKgqJ","class","cancel","style","\n\t\t    z-index: 999999999999;\n\t\t\tposition: fixed;\n\t\t\tpadding: 5px 20px;\n\t\t\tborder-radius: 5px;\n\t\t\tborder: 1px solid #cfd8dc;\n\t\t\tbackground: #eceff1;\n\t\t\ttop: 50px;\n\t\t\tleft: 50%;\n\t\t\tcursor: pointer;\n\t\t",3,"click",4,"ngIf"],[3,"msg","show","percent"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"height","80vh"],[1,"document-info"],[1,"flex","items-center"],["matTooltip","\u0110\u1ed3ng b\u1ed9 th\u01b0 m\u1ee5c",1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-md","mt-2"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["class","azt-drawer-content",3,"ngClass",4,"ngIf"],["azt-track-service","sync-folder-I_srCKgqJ",1,"cancel",2,"z-index","999999999999","position","fixed","padding","5px 20px","border-radius","5px","border","1px solid #cfd8dc","background","#eceff1","top","50px","left","50%","cursor","pointer",3,"click"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","sync-folder-SS5UgcvZq","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","sync-folder-q_c8tTVOYm","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[3,"form","schoolLevelObjs","schoolSubjectObjs","examSchoolLogObj"],[1,"text-md","font-medium","mr-auto","ng-star-inserted"],[1,"box","mt-2","relative","py-2",2,"height","62vh"],[1,"h-100","flex","items-center","justify-center",2,"height","100%"],[1,"text-center"],["type","file","webkitdirectory","",2,"display","none",3,"change"],["folderInputDirectory",""],["appDragDrop","",1,"xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[1,"flex","items-center","justify-center","text-center","cursor-pointer","relative",2,"width","400px","height","200px"],["name","folder-input"],[1,"text-primary","mr-1"],[1,"mt-3","lg:mr-auto"],[1,"text-md"],["azt-track-service","sync-folder-AgaqXySbDm",1,"btn","btn-secondary-soft",3,"click"],["name","folder-up"],["azt-track-service","sync-folder-SS5UgcvZq",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","sync-folder-q_c8tTVOYm",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.NdJ("contextmenu",function(){return!1}),t.YNc(2,dO,2,0,"div",2),t._UZ(3,"azt-export-docx-loading-box",3),t.TgZ(4,"mat-drawer-container",4)(5,"mat-drawer",5,6),t.NdJ("closedStart",function(){return i.changeStatusNav()}),t.TgZ(7,"ng-scrollbar",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"h3",11,12),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",13)(16,"span",14),t._UZ(17,"lucide-icon",15),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()(),t.TgZ(20,"mat-drawer-content"),t.YNc(21,hO,33,21,"div",16),t.qZA()()()()),2&e){const o=t.MAs(12);t.Q6J("headerBackTolink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.syncTestbankService.isLoading),t.xp6(1),t.Q6J("msg",i.syncTestbankService.keyLoading)("show",i.syncTestbankService.isLoading)("percent",0),t.xp6(1),t.Q6J("hasBackdrop",i.hasBackdrop),t.xp6(1),t.s9C("opened",i.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(19,gO,i.isMobile,!i.isMobile))("mode",i.mode),t.xp6(2),t.Q6J("visibility","hover"),t.xp6(4),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(14,15,"lang_core_auto_tool_sync_huong_dan_dong_bo")," "),t.xp6(5),t.hij(" ",t.lcZ(19,17,"lang_core_auto_tool_sync_huong_dan_dong_bo_description")," "),t.xp6(3),t.Q6J("ngIf",i.isLoadForm)}},dependencies:[E.mk,E.O5,li.jA,li.kh,li.LW,Le.gM,P.KC,cO.N,Ji.Q,Ws,Xe._,f.Nh5,rl,_t.bT],encapsulation:2}),n})();var xO=A(67755),vO=A(73828);function bO(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function yO(n,a){if(1&n&&(t.TgZ(0,"div",3),t._UZ(1,"azt-test-result-tracking",4),t.qZA()),2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("startQuestionIndex",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("dataResultObjs",e.dataResultObjs)("dataScrollObjs",e.dataScrollObjs)}}let wO=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.activeRoute=e,this.examResultTrackService=i,this.zipDataService=o,this.sAztTestResultTrackingService=s,this.dataResultObjs=[],this.dataScrollObjs=[],this.backToLink=""}getData(e,i,o,s){this.initStatusObj(),this.subscriptions.add(this.examResultTrackService.apiExamResultTrackGetObjGet(e,i,o,s).subscribe(r=>{var l,c,u,d,m,p,b,y,C;if(1==r.success){this.examObj=null===(l=r.data)||void 0===l?void 0:l.examObj;var I=this.castJsonToObj(this.zipDataService.decodeContentGzip(null!==(d=null===(u=null===(c=r?.data)||void 0===c?void 0:c.examResultTrackObj)||void 0===u?void 0:u.trackData)&&void 0!==d?d:""));I&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(I)),this.backToLink="/admin/testbank/exam-results-list/"+(null!==(p=null===(m=r.data)||void 0===m?void 0:m.examObj)&&void 0!==p&&p.categoryId?r.data.examObj.categoryId:0)+"/"+(null===(y=null===(b=r.data)||void 0===b?void 0:b.examObj)||void 0===y?void 0:y.id)+"/0",this.successStatusObj()}else this.errorStatusObj(null!==(C=r.message)&&void 0!==C?C:"",!0)}))}ngOnInit(){var e,i,o;this.commonService.translateMetaData({title:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let s=Number(this.activeRoute.snapshot.paramMap.get("exam_id"));var r=null!==(e=this.activeRoute.snapshot.paramMap.get("result_id"))&&void 0!==e?e:"0";let l=parseInt(r,10),c=null!==(i=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==i?i:"",u=null!==(o=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==o?o:"";this.getData(s,c,u,l),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Bt.UR),t.Y36(Ca.D),t.Y36(xO.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-result-tracking"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","mt-3","mb-5"],[3,"startQuestionIndex","dataResultObjs","dataScrollObjs"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,bO,1,0,"azt-loading-effect",1),t.YNc(2,yO,2,3,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,vO.$,Xe._]}),n})();var kO=A(82805),_m=A(41752),CO=A(28304),TO=A(43977);function AO(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"span",9),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.s9C("matTooltip",null==e.studentObj?null:e.studentObj.fullName),t.xp6(1),t.Oqu(null==e.studentObj?null:e.studentObj.fullName)}}const SO=function(){return{}};function OO(n,a){if(1&n&&t._UZ(0,"img",10),2&n){const e=t.oxw();t.Q6J("nameImages",(null==e.studentObj?null:e.studentObj.nameImages)||t.DdM(1,SO))}}function EO(n,a){if(1&n&&(t.TgZ(0,"div",11),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13),t.qZA(),t.kcU(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"anonymousPhone"),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.AsE("",t.lcZ(5,2,"lang_auto_dien_thoai"),": ",e.studentObj?t.lcZ(6,4,e.studentObj.phone):""," ")}}function MO(n,a){if(1&n&&(t.TgZ(0,"div",14),t.O4$(),t.TgZ(1,"svg",15),t._UZ(2,"rect",16)(3,"line",17)(4,"line",18)(5,"line",19)(6,"path",20)(7,"path",21)(8,"path",22)(9,"path",23)(10,"path",24)(11,"path",25),t.qZA(),t.kcU(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"formatOnlyDateByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw();t.xp6(13),t.AsE("",t.lcZ(14,2,"lang_auto_ngay_sinh"),": ",t.lcZ(15,4,null==e.studentObj?null:e.studentObj.birthday),"")}}let IO=(()=>{class n extends st.Q{constructor(e){super(),this.userService=e}returnTooltip(){var e,i,o,s;return null==(null===(e=this.studentObj)||void 0===e?void 0:e.parentPhone)?"ID: "+(null===(i=this.studentObj)||void 0===i?void 0:i.parentId)+" - Phone: "+this.userService.anonymousPhone(null!==(s=null===(o=this.studentObj)||void 0===o?void 0:o.phone)&&void 0!==s?s:""):"ID: "+this.studentObj.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(qn.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-basic-info-box"]],inputs:{studentObj:"studentObj"},features:[t.qOj],decls:10,vars:8,consts:[[1,"flex","flex-1","items-center","justify-start"],[1,"w-20","h-20","flex-none","image-fit","relative"],[2,"cursor","pointer",3,"nameCreateAvatar","matTooltip","size","linkAvatar"],[1,"ml-5","w-full"],[1,"font-medium","text-md"],[4,"ngIf","ngIfElse"],["noStudentName",""],["class","flex items-center text-xs mt-1",4,"ngIf"],["class","flex items-center mt-1 text-xs",4,"ngIf"],[1,"truncate","sm:whitespace-normal",2,"max-width","72%",3,"matTooltip"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"max-width","95%!important",3,"nameImages"],[1,"flex","items-center","text-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-3","h-3","mr-2"],["d","M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"],[1,"flex","items-center","mt-1","text-xs"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["d","M8 14h.01"],["d","M12 14h.01"],["d","M16 14h.01"],["d","M8 18h.01"],["d","M12 18h.01"],["d","M16 18h.01"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"azt-create-avatar",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,AO,3,2,"ng-container",5),t.YNc(6,OO,1,2,"ng-template",null,6,t.W1O),t.qZA(),t.YNc(8,EO,7,6,"div",7),t.YNc(9,MO,16,6,"div",8),t.qZA()()),2&e){const o=t.MAs(7);let s;t.xp6(2),t.s9C("matTooltip",i.returnTooltip()),t.Q6J("nameCreateAvatar",null==i.studentObj?null:i.studentObj.fullName)("size",80)("linkAvatar",null==i.studentObj?null:i.studentObj.avatar),t.xp6(3),t.Q6J("ngIf",!(null!=i.studentObj&&i.studentObj.nameImages)||(null!==(s=null==i.studentObj?null:i.studentObj.id)&&void 0!==s?s:0)>0)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",i.studentObj&&10==(null==i.studentObj.phone?null:i.studentObj.phone.length)),t.xp6(1),t.Q6J("ngIf",null==i.studentObj?null:i.studentObj.birthday)}},dependencies:[E.O5,Le.gM,Xs.g,ds.L,_t.bT,_t.C5,_t._I],encapsulation:2}),n})();var mm=A(62e3),LO=A(40486);function ZO(n,a){if(1&n&&(t.TgZ(0,"div",5)(1,"button",6),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"span",7),t._uU(5),t.qZA()()()),2&n){const e=t.oxw(),i=t.MAs(2);t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_xem_cac_lan_thi_")," "),t.xp6(3),t.hij("(",e.historyExamResultObjs.length,")")}}function PO(n,a){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",13),t.qZA())}const NO=function(n){return{"bg-slate-100 dark:bg-darkmode-300":n}};function DO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",8),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.getAndProcessAnswers(s.id))}),t.TgZ(2,"div",9)(3,"div",10),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",11),t._uU(8),t.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(10,"formatOnlyTimeByUserUnitPipe"),t.qZA(),t.TgZ(11,"div",11),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()(),t.YNc(14,PO,2,0,"li",12)}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(20,NO,e.id===o.examResultIdParam)),t.xp6(3),t.HOy(" ",t.lcZ(5,10,"lang_auto_lan")," ",o.historyExamResultObjs.length-i," [",t.lcZ(6,12,"lang_auto_diem")," ",e.mark,"] "),t.xp6(4),t.AsE("",t.lcZ(9,14,e.startedTest)," - ",t.lcZ(10,16,e.createdAt),""),t.xp6(4),t.AsE("",t.lcZ(13,18,"lang_auto_thoi_gian_lam_bai"),": ",o.calculateTime(e.startedTest,e.createdAt),""),t.xp6(2),t.Q6J("ngIf",i!=o.historyExamResultObjs.length-1)}}let jO=(()=>{class n extends st.Q{constructor(e){super(),this.timeService=e,this.historyExamResultObjs=[],this.backToLink=""}getAndProcessAnswers(e){var i=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+e)+"?backto="+encodeURIComponent(this.backToLink);window.location.href=i.toString()}calculateTime(e,i){return this.timeService.calculationTestedTime(e,i)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Si.O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-exam-result-history"]],inputs:{historyExamResultObjs:"historyExamResultObjs",backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam"},features:[t.qOj],decls:6,vars:2,consts:[["class","history-exam mt-3",4,"ngIf"],["menuTimeTest","matMenu"],[1,"dropdown-menu","show","w-72","relative",2,"overflow-y","auto"],[1,"dropdown-content",2,"margin-top","0"],["ngFor","",3,"ngForOf"],[1,"history-exam","mt-3"],[1,"btn","btn-outline-secondary","block","w-full",3,"matMenuTriggerFor"],[1,"ml-2"],["azt-track-service","exam-result-history-6Kv3ed2IY6",1,"dropdown-item",3,"ngClass","click"],[1,"once-tested"],[1,"font-medium"],[1,"text-xs","text-slate-600","dark:text-slate-300","mt-1"],[4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"]],template:function(e,i){1&e&&(t.YNc(0,ZO,6,5,"div",0),t.TgZ(1,"mat-menu",null,1)(3,"div",2)(4,"ul",3),t.YNc(5,DO,15,22,"ng-template",4),t.qZA()()()),2&e&&(t.Q6J("ngIf",i.historyExamResultObjs),t.xp6(5),t.Q6J("ngForOf",i.historyExamResultObjs))},dependencies:[E.mk,E.sg,E.O5,ke.VK,ke.p6,_t.bT,_t.tO,_t.t2],encapsulation:2}),n})();var qO=A(3840);let FO=(()=>{class n extends st.Q{constructor(e){super(),this.activeRoute=e,this.backToLink=""}hasNext(){var e=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){e=i;break}return e<this.testedUserObjs.length-1}return!1}hasPrev(){var e=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){e=i;break}return e>0}return!1}handleNavigate(e){var i,o,s,r,l,c,u=-1;if(this.testedUserObjs){for(var d=0;d<this.testedUserObjs.length;d++)if(this.testedUserObjs[d].userId==this.userIdParam&&this.testedUserObjs[d].studentId==this.studentIdParam){u=d,console.log("found data");break}if("next"==e){if(u>=0&&u<=this.testedUserObjs.length-2){var m=null===(i=this.testedUserObjs[u+1].userId)||void 0===i?void 0:i.toString(),p=null===(o=this.testedUserObjs[u+1].studentId)||void 0===o?void 0:o.toString(),b=null===(s=this.testedUserObjs[u+1].resultId)||void 0===s?void 0:s.toString(),y=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+m+"/"+p+"/"+(b??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=y.toString()}}else u>0&&u<=this.testedUserObjs.length-1&&(m=null===(r=this.testedUserObjs[u-1].userId)||void 0===r?void 0:r.toString(),p=null===(l=this.testedUserObjs[u-1].studentId)||void 0===l?void 0:l.toString(),b=null===(c=this.testedUserObjs[u-1].resultId)||void 0===c?void 0:c.toString(),y=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+m+"/"+p+"/"+(b??0))+"?backto="+encodeURIComponent(this.backToLink),window.location.href=y.toString())}}ngOnInit(){super.ngOnInit(),(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i,o,s;this.backToLink=null!==(e=this.commonService.getMyQueryParam("backto"))&&void 0!==e?e:"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=null!==(i=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==i?i:void 0,this.studentIdParam=null!==(o=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==o?o:void 0,this.examIdParam=null!==(s=this.activeRoute.snapshot.paramMap.get("exam_id"))&&void 0!==s?s:void 0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-show-next-back-button"]],inputs:{testedUserObjs:"testedUserObjs"},features:[t.qOj],decls:9,vars:8,consts:[[1,"p-3"],["azt-track-service","show-next-back-box-_0g3eIKk5Q",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["points","15 18 9 12 15 6"],["azt-track-service","show-next-back-box-gLJelBC71K",1,"btn","btn-sm","btn-secondary-soft",3,"disabled","matTooltip","click"],["points","9 18 15 12 9 6"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.handleNavigate("prev")}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"polyline",3),t.qZA()(),t.kcU(),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.handleNavigate("next")}),t.ALo(6,"mytranslate"),t.O4$(),t.TgZ(7,"svg",2),t._UZ(8,"polyline",5),t.qZA()()()),2&e&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_auto_hoc_sinh_truoc_do")),t.Q6J("disabled",!i.hasPrev()),t.xp6(4),t.s9C("matTooltip",t.lcZ(6,6,"lang_auto_hoc_sinh_tiep_theo")),t.Q6J("disabled",!i.hasNext()))},dependencies:[Le.gM,_t.bT],encapsulation:2}),n})(),QO=(()=>{class n extends st.Q{constructor(e){super(),this.exportResultService=e,this.essayQuestionObjs=[]}clickExportPdf(){var e,i,o;this.essayQuestionObjs.length>0&&(null===(e=this.examResultObj)||void 0===e||!e.confirmedAt)?this.showErrorSnack("lang_auto_ban_chi_co_the_tai_file_pdf_khi_cham_xong_tu_luan"):this.exportResultService.processUser(Number(null!==(i=this.examIdParam)&&void 0!==i?i:0),Number(null!==(o=this.examResultIdParam)&&void 0!==o?o:0),this.userIdParam,this.studentIdParam).then(()=>{}).catch(s=>{this.commonService.snackError("string"==typeof s?s:s.message)})}redirectToTestedList(){this.commonService.myNavigation("/admin/testbank/exam-results-list/"+(this.examObj?this.examObj.categoryId:0)+"/"+this.examIdParam+"/0")}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Gs.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-export-pdf-menu"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",examObj:"examObj",examResultObj:"examResultObj",essayQuestionObjs:"essayQuestionObjs"},features:[t.qOj],decls:29,vars:7,consts:[[1,"menu","ml-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","export-pdf-menu-box-55F1itGQin",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","export-pdf-menu-box-LA2X4vBtnx",1,"dropdown-item",3,"click"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 11h4"],["d","M12 16h4"],["d","M8 11h.01"],["d","M8 16h.01"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.O4$(),t.TgZ(2,"svg",2),t._UZ(3,"line",3)(4,"line",4)(5,"line",5),t.qZA()()(),t.kcU(),t.TgZ(6,"mat-menu",6,7)(8,"div",8)(9,"ul",9)(10,"li")(11,"a",10),t.NdJ("click",function(){return i.clickExportPdf()}),t.O4$(),t.TgZ(12,"svg",11),t._UZ(13,"path",12)(14,"polyline",13)(15,"line",14),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(18,"li")(19,"a",15),t.NdJ("click",function(){return i.redirectToTestedList()}),t.O4$(),t.TgZ(20,"svg",11),t._UZ(21,"rect",16)(22,"path",17)(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21),t.qZA(),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()),2&e){const o=t.MAs(7);t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(15),t.hij(" ",t.lcZ(17,3,"lang_auto_tai_bai_lam_duoi_dang_pdf")," "),t.xp6(11),t.hij(" ",t.lcZ(28,5,"lang_auto_danh_sach_da_thi")," ")}},dependencies:[ke.VK,ke.p6,_t.bT],encapsulation:2}),n})();function UO(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_trac_nghiem")))}function BO(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_tu_luan")))}function RO(n,a){if(1&n&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,e.data.createdAt)," ")}}function zO(n,a){if(1&n&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,e.data.createdAt)," ")}}function JO(n,a){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",13)(2,"g",14)(3,"g",15),t._UZ(4,"circle",16),t.TgZ(5,"path",17),t._UZ(6,"animateTransform",18),t.qZA()()()()())}let pm=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialogRef=e,this.data=i}btnCloseDialog(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-history"]],features:[t.qOj],decls:23,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center"],[2,"font-weight","450","font-size","14px"],[4,"ngIf"],["style","font-weight: 450; font-size: 15px; color: #ff0024",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"text-right","my-3","p-3"],["azt-track-service","dialog-confirm-action-0FalsTWUHN",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","dialog-confirm-action-weCfaxHnGJ",1,"btn","w-32","btn-primary",3,"disabled","click"],[2,"font-weight","450","font-size","15px","color","#ff0024"],["width","25","viewBox","-2 -2 42 42","xmlns","http://www.w3.org/2000/svg","stroke","white",1,"w-4","h-4","mr-2"],["fill","none","fill-rule","evenodd"],["transform","translate(1 1)","stroke-width","4"],["stroke-opacity",".5","cx","18","cy","18","r","18"],["d","M36 18c0-9.94-8.06-18-18-18"],["attributeName","transform","type","rotate","from","0 18 18","to","360 18 18","dur","1s","repeatCount","indefinite"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t.YNc(5,UO,3,3,"span",5),t.YNc(6,BO,3,3,"span",5),t.YNc(7,RO,4,7,"span",6),t.YNc(8,zO,4,7,"span",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",7)(12,"p",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return i.btnCloseDialog(void 0)}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return i.btnCloseDialog(i.data)}),t.YNc(20,JO,7,0,"span",5),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",10!=i.data.type),t.xp6(1),t.Q6J("ngIf",10==i.data.type),t.xp6(1),t.Q6J("ngIf",10!=i.data.type),t.xp6(1),t.Q6J("ngIf",10==i.data.type),t.xp6(1),t.hij(" ",t.lcZ(10,10,"lang_auto_lam_ket_qua_phuc_khao_cho_hoc_sinh_nay")," "),t.xp6(4),t.hij(" ",t.lcZ(14,12,"lang_auto_de_tra_loi_cau_hoi_tu_luan_ban_co_the_lam_truc_tiep_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(18,14,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",i.statusObj.loading),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(22,16,"lang_cms_common_confirm_btn")," "))},dependencies:[E.O5,_t.bT,_t.tO],encapsulation:2}),n})();function HO(n,a){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function $O(n,a){1&n&&t._UZ(0,"th")}function KO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span")(1,"span",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(5);return t.KtG(r.onShowFile(s))}),t._uU(2),t.qZA()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.name)}}function YO(n,a){if(1&n&&(t.ynx(0),t.YNc(1,KO,3,1,"span",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.fileObjs)}}function GO(n,a){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_auto_khong_co_file")," ")}function WO(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=o.$implicit,r=o.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(s,r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.fileObjs&&e.fileObjs.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function VO(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,YO,2,1,"ng-container",15),t.YNc(9,GO,2,3,"ng-template",null,16,t.W1O),t.qZA(),t.YNc(11,WO,4,4,"td",12),t.qZA(),t.BQk()),2&n){const e=a.$implicit,i=a.index,o=t.MAs(10),s=t.oxw(3);t.xp6(3),t.Oqu(i+1),t.xp6(2),t.Oqu(t.lcZ(6,5,e.createdAt)),t.xp6(3),t.Q6J("ngIf",null==e.fileObjs?null:e.fileObjs.length)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",!s.isFrontEnd)}}function XO(n,a){if(1&n&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"File"),t.qZA(),t.YNc(10,$O,1,0,"th",12),t.qZA(),t.YNc(11,VO,12,7,"ng-container",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,6,"lang_auto_thoi_gian")),t.xp6(4),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function tE(n,a){1&n&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function eE(n,a){1&n&&(t.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"span",23),t._uU(4,"Loading..."),t.qZA()()()())}function nE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function iE(n,a){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,XO,12,8,"table",6),t.YNc(4,tE,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,eE,5,0,"div",9),t.YNc(8,nE,5,4,"div",10),t.qZA()()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",i.isLoadMore),t.xp6(1),t.Q6J("ngIf",!i.isLoadMore)}}let oE=(()=>{class n extends st.Q{constructor(e,i){super(),this.examResultHistoryLogService=e,this.dialog=i,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.dataPreviewFile=new t.vpe,this.form=new h.nJ({}),this.IAztTestbankMarkEssayDialogConfirmData={type:0,isShow:!1},this.objs=[],this.isLoadMore=!1,this.curPage="",this.offset=0,this.disableBtn=!1}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){var i;this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptFileObjGet(e.examId,null!==(i=this.data.resultObj.id)&&void 0!==i?i:0,e.userId,e.id).subscribe(o=>{var s;1==o.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_file_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(null!==(s=o.message)&&void 0!==s?s:"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,i){var o,s,r,l;let c={isShow:!0,index:i+1,type:10,createdAt:null!==(o=e.createdAt)&&void 0!==o?o:0,examId:null!==(s=e.examId)&&void 0!==s?s:0,userId:null!==(r=e.userId)&&void 0!==r?r:0,id:null!==(l=e.id)&&void 0!==l?l:0};this.dialog.open(pm,{data:c,restoreFocus:!1}).afterClosed().subscribe(d=>{d&&this.confirmData(d)})}onShowFile(e){let i=Object.assign(Object.assign({},e),{index:-1});this.dialog.open(Nu.F,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i},restoreFocus:!1})}convertFileObjs(e){for(var i=[],o=0;o<e.length;o++){var s=this.castObj(e[o]);s?.files&&(s.fileObjs=this.castJsonToObj(s.files)),i.push(e[o])}return i}getNextPage(){this.getObjs(this.curPage)}getObjs(e){var i,o,s;""==e&&this.initStatusObj(),this.isLoadMore=!0,this.examResultHistoryLogService.apiExamResultHistoryLogGetFileObjsGet(null!==(i=this.data.examObj.id)&&void 0!==i?i:0,null!==(o=this.data.resultObj.id)&&void 0!==o?o:0,null===(s=this.data.resultObj.userId)||void 0===s?void 0:s.toString(),e).subscribe(r=>{var l,c,u,d,m;1==r.success?(this.isLoadMore=!1,this.curPage=null!==(c=null===(l=r.data)||void 0===l?void 0:l.nextPage)&&void 0!==c?c:"",!(null===(u=r.data)||void 0===u)&&u.objs&&r.data.objs.length>0&&(this.objs=this.objs.concat(this.convertFileObjs(r.data.objs))),!(null===(d=r.data)||void 0===d)&&d.nextPage||(this.disableBtn=!0),this.successStatusObj()):(this.isLoadMore=!1,this.errorStatusObj(null!==(m=r.message)&&void 0!==m?m:"",!0))})}ngOnInit(){this.getObjs(""),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.ml),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history-essay"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog",dataPreviewFile:"dataPreviewFile"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],[4,"ngIf","ngIfElse"],["noFiles",""],["azt-track-service","essay-qvqBong5nt",1,"preview-file",3,"click"],["azt-track-service","essay-CT8RATAJF6",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","essay-TB1XoFOuoU","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,HO,2,0,"div",0),t.YNc(1,iE,9,4,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.sg,E.O5,ro.lW,qe.Hw,Le.gM,xe.Q,_t.bT,_t.tO],encapsulation:2}),n})();function aE(n,a){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function sE(n,a){1&n&&t._UZ(0,"th")}function rE(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0|\xa0"),t.qZA())}function lE(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,rE,2,0,"span",12),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2),s=o.index,r=o.$implicit,l=t.oxw(2).$implicit;let c;t.xp6(1),t.hij(" ",e.content+(s!=(null!==(c=null==l.dataObj.answers?null:l.dataObj.answers.length)&&void 0!==c?c:0)-1&&i==r.answerContent.length-1?", ":"")," "),t.xp6(1),t.Q6J("ngIf",i!=r.answerContent.length-1)}}function cE(n,a){if(1&n&&(t.TgZ(0,"span")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,lE,3,2,"span",13),t.qZA()),2&n){const e=t.oxw(),i=e.index,o=e.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_auto_cau")," ",i+1,":\xa0"),t.xp6(2),t.Q6J("ngForOf",o.answerContent)}}function uE(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,cE,5,5,"span",12),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.answerContent.length>0)}}function dE(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,uE,2,1,"span",13),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.dataObj.answers)}}function _E(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_chon_dap_an")))}function mE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),s=o.$implicit,r=o.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(s,r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function pE(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,dE,2,1,"div",12),t.YNc(9,_E,3,3,"div",12),t.qZA(),t.YNc(10,mE,4,4,"td",12),t.qZA(),t.BQk()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(3);t.xp6(3),t.Oqu(i+1),t.xp6(2),t.Oqu(t.lcZ(6,5,1e3*(e.secondTime?e.secondTime:0))),t.xp6(3),t.Q6J("ngIf",null==e.dataObj||null==e.dataObj.answers?null:e.dataObj.answers.length),t.xp6(1),t.Q6J("ngIf",!(null!=e.dataObj&&null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Q6J("ngIf",!o.isFrontEnd)}}function hE(n,a){if(1&n&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,sE,1,0,"th",12),t.qZA(),t.YNc(12,pE,11,7,"ng-container",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,7,"lang_auto_thoi_gian")),t.xp6(3),t.Oqu(t.lcZ(10,9,"lang_auto_dap_an_chon")),t.xp6(2),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function gE(n,a){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function fE(n,a){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"span",20),t._uU(4,"Loading..."),t.qZA()()()())}function xE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function vE(n,a){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,hE,13,11,"table",6),t.YNc(4,gE,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,fE,5,0,"div",9),t.YNc(8,xE,5,4,"div",10),t.qZA()()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",i.isLoadMore),t.xp6(1),t.Q6J("ngIf",!i.isLoadMore)}}let bE=(()=>{class n extends st.Q{constructor(e,i,o,s){super(),this.examResultHistoryLogService=e,this.zipDataService=i,this.questionAnswerConfigService=o,this.dialog=s,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.form=new h.nJ({}),this.objs=[],this.curPage="",this.offset=0,this.disableBtn=!1,this.questionObjs=[],this.isLoadMore=!1}convertGzipResultObjs(e){for(var i,o,s=[],r=0;r<e.length;r++){var l=this.castObj(e[r]);if(l){var c=this.zipDataService.decodeContentGzip(null!==(i=l?.datas)&&void 0!==i?i:"");l.dataObj=null!==(o=this.castJsonToObj(c))&&void 0!==o?o:{},s.push(l)}}return s}convertRawToMixForAnswerObjs(e){for(var i,o=0;o<e.length;o++){var s=null===(i=e[o].dataObj)||void 0===i?void 0:i.answers;if(s){for(var r=0;r<s.length;r++)s[r].answerContent.length&&(s[r].answerContent[0].content=this.findAlphaOfAnswerContent(s[r].answerContent[0].content,s[r].questionId));e[o].dataObj.answers=s}}return e}findAlphaOfAnswerContent(e,i){var o,s,r,l;let c="";for(let d=0;d<this.questionObjs.length;d++)if(this.questionObjs[d].id==i){if(this.questionAnswerConfigService.isTrueFalseQuestion(null!==(o=this.questionObjs[d].answerType)&&void 0!==o?o:0)){var u=null===(s=this.questionObjs[d].answerConfigParse)||void 0===s?void 0:s.filter(m=>m.key==e&&m.questionId==i);u&&u.length>0&&(c=null!==(l=null!==(r=u[0].alpha)&&void 0!==r?r:u[0].key)&&void 0!==l?l:"");break}c=e}return c}getQuestionData(e,i){var o;this.examResultHistoryLogService.apiExamResultHistoryLogGetAllExamQuestionObjsGet(e,null!==(o=this.data.resultObj.id)&&void 0!==o?o:0).subscribe(s=>{var r,l;if(1==s.success){let c=this.commonService.castJsonToClassObjs(rm.x,JSON.stringify(null===(r=s.data)||void 0===r?void 0:r.objs));this.questionObjs=this.questionAnswerConfigService.changeQuestionContent(c??[],!0),i(!0)}else this.errorStatusObj(null!==(l=s.message)&&void 0!==l?l:"",!0),i(!1)})}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){var i;this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptResultObjGet(e.examId,null!==(i=this.data.resultObj.id)&&void 0!==i?i:0,e.userId,e.id).subscribe(o=>{var s;1==o.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_du_lieu_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(null!==(s=o.message)&&void 0!==s?s:"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,i){var o,s,r,l;let c={isShow:!0,index:i+1,type:11,createdAt:null!==(o=e.secondTime)&&void 0!==o?o:0,examId:null!==(s=e.examId)&&void 0!==s?s:0,userId:null!==(r=e.userId)&&void 0!==r?r:0,id:null!==(l=e.id)&&void 0!==l?l:0};this.dialog.open(pm,{data:c,restoreFocus:!1}).afterClosed().subscribe(d=>{d&&this.confirmData(d)})}getNextPage(){this.getObjs(this.curPage)}getObjs(e){var i;""==e&&this.initStatusObj(),this.isLoadMore=!0,this.getQuestionData(null!==(i=this.data.examObj.id)&&void 0!==i?i:0,o=>{var s,r,l;o?this.examResultHistoryLogService.apiExamResultHistoryLogGetResultObjsGet(null!==(s=this.data.examObj.id)&&void 0!==s?s:0,null!==(r=this.data.resultObj.id)&&void 0!==r?r:0,null===(l=this.data.resultObj.userId)||void 0===l?void 0:l.toString(),this.curPage).subscribe(c=>{var u,d,m,p,b;if(1==c.success){if(null!==(u=c.data)&&void 0!==u&&u.objs&&c.data.objs.length>0){var y=this.convertGzipResultObjs(c.data.objs);y=this.convertRawToMixForAnswerObjs(y),this.objs=this.objs.concat(y)}this.curPage=null!==(m=null===(d=c.data)||void 0===d?void 0:d.nextPage)&&void 0!==m?m:"",!(null===(p=c.data)||void 0===p)&&p.nextPage||(this.disableBtn=!0),this.isLoadMore=!1,this.successStatusObj()}else this.isLoadMore=!1,this.errorStatusObj(null!==(b=c.message)&&void 0!==b?b:"",!0)}):(this.stopStatusObj(),this.isLoadMore=!0)})}ngOnInit(){this.getObjs(this.curPage),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.ml),t.Y36(Ca.D),t.Y36(Sl.U),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history-true-false"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],["azt-track-service","truefalse-XnX_QRUEsZ0",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],["role","status",1,"spinner-border","text-secondary"],[1,"sr-only"],[1,"col-md-12","text-center"],["azt-track-service","truefalse-RDGSarfASfG","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,aE,2,0,"div",0),t.YNc(1,vE,9,4,"ng-template",null,1,t.W1O)),2&e){const o=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.sg,E.O5,ro.lW,qe.Hw,Le.gM,xe.Q,_t.bT,_t.ZN],encapsulation:2}),n})();function yE(n,a){if(1&n&&(t.TgZ(0,"div",9)(1,"span",10),t._UZ(2,"azt-create-avatar",11),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.qZA(),t._uU(5,"\xa0-\xa0 "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("linkAvatar",e.data.studentObj.avatar)("nameCreateAvatar",e.data.studentObj.fullName)("size",30),t.xp6(2),t.hij(" ",e.data.studentObj.fullName,""),t.xp6(3),t.Oqu(t.lcZ(8,5,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi"))}}function wE(n,a){1&n&&(t.TgZ(0,"div",9)(1,"span",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi")))}function kE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-true-false",15),t.NdJ("closeDialog",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.btnCloseDialog(o))}),t.qZA()()()}if(2&n){const e=t.oxw();t.s9C("label",t.lcZ(1,3,"lang_auto_du_lieu_bai_lam")),t.xp6(3),t.Q6J("data",e.data)("isFrontEnd",e.isFrontEnd)}}function CE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-essay",16),t.NdJ("closeDialog",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.btnCloseDialog(o))})("dataPreviewFile",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.btnCloseDialog(o))}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.s9C("label",t.lcZ(1,3,"lang_auto_file_bai_lam")),t.xp6(3),t.Q6J("isFrontEnd",e.isFrontEnd)("data",e.data)}}function TE(n,a){if(1&n&&(t.ynx(0),t.YNc(1,CE,4,5,"mat-tab",4),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.data.resultObj.files||""==e.data.resultObj.files||"[]"==e.data.resultObj.files)}}let AE=(()=>{class n extends st.Q{constructor(e,i){super(),this.dialogRef=e,this.data={examObj:{},resultObj:{},studentObj:{}},this.isFrontEnd=!1,this.data=i.dataHistory,this.isFrontEnd=i.isFrontEnd}btnCloseDialog(e){this.dialogRef.close(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.so,8),t.Y36(z.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history"]],features:[t.qOj],decls:13,vars:10,consts:[[1,"box"],[1,"px-5","pt-5"],["class","flex items-center",4,"ngIf"],["mat-align-tabs","start","dynamicHeight","",1,"mt-3",2,"height","60vh",3,"selectedIndex"],[3,"label",4,"ngIf"],[4,"ngIf"],["align","end"],[1,"text-right","p-3"],["azt-track-service","result-history-mkCSltAT1",1,"btn","w-24","btn","btn-secondary",3,"click"],[1,"flex","items-center"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3"],[1,"text-danger"],[3,"label"],[2,"width","100%",3,"data","isFrontEnd","closeDialog"],[2,"width","100%",3,"isFrontEnd","data","closeDialog","dataPreviewFile"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,yE,9,7,"div",2),t.YNc(3,wE,4,3,"div",2),t.TgZ(4,"mat-tab-group",3),t.YNc(5,kE,4,5,"mat-tab",4),t.YNc(6,TE,2,1,"ng-container",5),t.ALo(7,"hasEssayInExam"),t.qZA()(),t.TgZ(8,"mat-dialog-actions",6)(9,"div",7)(10,"button",8),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()()),2&e){let o;t.xp6(2),t.Q6J("ngIf",!i.isFrontEnd),t.xp6(1),t.Q6J("ngIf",i.isFrontEnd),t.xp6(1),t.Q6J("selectedIndex",0),t.xp6(1),t.Q6J("ngIf","[]"==i.data.resultObj.answers),t.xp6(1),t.Q6J("ngIf",t.lcZ(7,6,null!==(o=null==i.data.examObj?null:i.data.examObj.examType)&&void 0!==o?o:0)),t.xp6(5),t.hij(" ",t.lcZ(12,8,"lang_auto_dong")," ")}},dependencies:[E.O5,z.H8,Ta.uX,Ta.SP,Xs.g,oE,bE,dl.O,_t.bT,_t.kK],encapsulation:2}),n})();var SE=A(9310);function OE(n,a){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_combine_exam_component")+(i+1),":\xa0"),t.xp6(3),t.Oqu(e+(o.totalMarkSubject?"/"+t.xi3(5,4,o.totalMarkSubject/o.totalSubject,"1.0-2"):""))}}function EE(n,a){if(1&n&&(t.ynx(0),t.YNc(1,OE,6,7,"div",11),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.examResultObj?null:e.examResultObj.subjectMarkValues)}}function ME(n,a){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq("(",e.examResultObj.rightAnswer,"/",e.examResultObj.totalQuestion-e.essayQuestionObjs.length,"\xa0",t.lcZ(2,3,"lang_auto_cau_brackets"),"")}}function IE(n,a){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.YNc(4,ME,3,5,"span",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,3,"lang_auto_trac_nghiem"),": ",null!=e.examResultObj.trueFalseMark?e.examResultObj.trueFalseMark:t.lcZ(3,5,"lang_auto_chua_co_diem")," "),t.xp6(3),t.Q6J("ngIf",null!=(null==e.examResultObj?null:e.examResultObj.rightAnswer))}}function LE(n,a){if(1&n&&t.YNc(0,IE,5,7,"div",10),2&n){const e=t.oxw();t.Q6J("ngIf",e.trueFalseChoiceQuestionObjs.length>0&&e.examResultObj&&e.examResultObj.totalQuestion)}}function ZE(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_tu_luan"),": ",null==e.examResultObj?null:e.examResultObj.essayMark," (",e.essayQuestionObjs.length," ",t.lcZ(3,6,"lang_auto_cau_brackets")," ")}}function PE(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"span",16),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,4,"lang_auto_tu_luan"),": "),t.xp6(3),t.Oqu(t.lcZ(5,6,"lang_auto_chua_cham")),t.xp6(2),t.AsE(" (",e.essayQuestionObjs.length," ",t.lcZ(7,8,"lang_auto_cau_brackets")," ")}}function NE(n,a){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,ZE,4,8,"span",15),t.YNc(2,PE,8,10,"span",15),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.examResultObj?null:e.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",!(null!=e.examResultObj&&e.examResultObj.confirmedAt))}}function DE(n,a){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",e.files.length," ")}}function jE(n,a){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",e.examTracks.exitFullScreen," ")}}function qE(n,a){if(1&n&&(t.TgZ(0,"div",12)(1,"span",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"azt-create-avatar",18),t.ALo(5,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_auto_giao_vien_cham"),": "),t.xp6(2),t.s9C("matTooltip",t.lcZ(5,7,"lang_auto_giao_vien_cham")+": "+(null==e.markedByObj?null:e.markedByObj.fullName)),t.Q6J("nameCreateAvatar",null==e.markedByObj?null:e.markedByObj.fullName)("size",25)("linkAvatar",null==e.markedByObj?null:e.markedByObj.avatar)}}function FE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.clickResultTrack())}),t.O4$(),t.TgZ(4,"svg",20),t._UZ(5,"path",21)(6,"polyline",22)(7,"circle",23)(8,"path",24),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function QE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",25),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showResultInfors())}),t.O4$(),t.TgZ(4,"svg",26),t._UZ(5,"circle",27)(6,"path",28)(7,"path",29)(8,"path",30),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_show_infos_test_submit"),": "))}function UE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.openResultHistoryReview())}),t.O4$(),t.TgZ(4,"svg",32),t._UZ(5,"path",33)(6,"path",34)(7,"path",35),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_phuc_khao"),": "))}let BE=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.answerTypeService=e,this.homeworkExamService=i,this.dialog=o,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.historyExamResultObjs=[],this.resultInfos=[],this.totalSubject=3,this.totalMarkSubject=30}get checkHasType1Question(){var e,i,o;let s=!1;for(let r=0;r<(null!==(i=null===(e=this.questionObjs)||void 0===e?void 0:e.length)&&void 0!==i?i:0);r++)if(this.answerTypeService.isOneChoiceAnswer(null===(o=this.questionObjs)||void 0===o?void 0:o[r].answerType)){s=!0;break}return s}checkShowIconHistory(){var e,i,o,s;let r=!1;return this.historyExamResultObjs&&this.historyExamResultObjs.length>0&&(r=!0),this.homeworkExamService.isOnlyTrueFalse(null!==(i=null===(e=this.examObj)||void 0===e?void 0:e.examType)&&void 0!==i?i:0)?!(!r||!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj)):!(!r||""!=(null===(o=this.examResultObj)||void 0===o?void 0:o.files)&&null!=(null===(s=this.examResultObj)||void 0===s?void 0:s.files)&&!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj))}openResultHistoryReview(){this.dialog.open(AE,{data:{dataHistory:{examObj:this.examObj,resultObj:this.examResultObj,studentObj:this.studentObj},isFrontEnd:!1},restoreFocus:!1})}showResultInfors(){this.dialog.open(SE.p,{width:"500px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){const e=this.commonService.getLocalRouter("/admin/testbank/test-result-tracking")+"/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+this.examResultIdParam;window.open(e,"_blank")}ngOnInit(){var e,i,o,s,r,l,c;super.ngOnInit(),this.totalSubject=null!==(o=null===(i=null===(e=this.examResultObj)||void 0===e?void 0:e.subjectMarkValues)||void 0===i?void 0:i.length)&&void 0!==o?o:3,this.totalMarkSubject=null!==(c=null===(l=null===(r=null===(s=this.examResultObj)||void 0===s?void 0:s.examResultStatisticObj)||void 0===r?void 0:r.examQuestionStatisticObj)||void 0===l?void 0:l.totalMark)&&void 0!==c?c:0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(wa.T),t.Y36(lo.j),t.Y36(z.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-show-detail-info-for-teacher"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos"},features:[t.qOj],decls:24,vars:16,consts:[[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"font-medium","flex","items-center"],[1,"mr-3"],[1,"text-lg"],[4,"ngIf","ngIfElse"],["showNormalMark",""],["class","flex items-center mt-2",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],[1,"mr-2"],[2,"cursor","pointer",3,"matTooltip","nameCreateAvatar","size","linkAvatar"],["azt-track-service","show-detail-info-box-for-teacher--xrnTJmA5SE",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],["points","14 2 14 8 20 8"],["cx","8","cy","16","r","6"],["d","M9.5 17.5 8 16.25V14"],["azt-track-service","show-detail-info-box-for-teacher-setZE9eOS5A",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["cx","12","cy","12","r","10"],["d","M17 12h.01"],["d","M12 12h.01"],["d","M7 12h.01"],["azt-track-service","show-detail-info-box-for-teacher-IF9N08gpe_f",1,"btn-text-primary","ml-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 3v5h5"],["d","M3.05 13A9 9 0 1 0 6 5.3L3 8"],["d","M12 7v5l4 2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"span",6),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"span",7),t._uU(13),t.qZA()(),t.YNc(14,EE,2,1,"ng-container",8),t.YNc(15,LE,1,1,"ng-template",null,9,t.W1O),t.YNc(17,NE,3,2,"div",10),t.YNc(18,DE,3,4,"div",10),t.YNc(19,jE,3,4,"div",10),t.YNc(20,qE,6,9,"div",10),t.YNc(21,FE,9,3,"div",10),t.YNc(22,QE,9,3,"div",10),t.YNc(23,UE,8,3,"div",10),t.qZA()()),2&e){const o=t.MAs(16);let s;t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_auto_thong_tin_chi_tiet")," "),t.xp6(5),t.hij("",t.lcZ(11,14,"lang_auto_diem_cuoi"),": "),t.xp6(3),t.Oqu((null==i.examResultObj?null:i.examResultObj.mark)+(i.totalMarkSubject?"/"+i.totalMarkSubject:"")),t.xp6(1),t.Q6J("ngIf",(null==i.examObj?null:i.examObj.subjectMarks)&&(null==i.examResultObj||null==i.examResultObj.subjectMarkValues?null:i.examResultObj.subjectMarkValues.length))("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",i.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",i.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),t.xp6(1),t.Q6J("ngIf",null==i.examResultObj?null:i.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",i.checkHasType1Question&&i.trueFalseChoiceQuestionObjs.length>0&&(null==i.examResultObj?null:i.examResultObj.totalQuestion)),t.xp6(1),t.Q6J("ngIf",i.resultInfos.length),t.xp6(1),t.Q6J("ngIf",i.checkShowIconHistory()&&(null!==(s=null==i.examResultObj?null:i.examResultObj.userId)&&void 0!==s?s:0)>0)}},dependencies:[E.sg,E.O5,Le.gM,Xs.g,E.JJ,_t.bT],encapsulation:2}),n})();var RE=A(12205);const zE=["drawer"];function JE(n,a){1&n&&(t.TgZ(0,"div",5),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function HE(n,a){1&n&&(t.TgZ(0,"div")(1,"div",30),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_thi_sinh_chua_thi_lan_nao")," "))}function $E(n,a){if(1&n&&t._UZ(0,"app-testbank-show-offline-result",33),2&n){const e=t.oxw(3);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("essayExam",!!e.essayQuestionObjs.length)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}const Hu=function(){return[]};function KE(n,a){if(1&n&&(t._UZ(0,"app-testbank-test-review-show-detail-info-for-teacher",31),t.YNc(1,$E,1,10,"app-testbank-show-offline-result",25),t._UZ(2,"app-testbank-test-review-exam-result-history",32)),2&n){const e=t.oxw(2);let i,o;t.Q6J("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("studentObj",e.studentObj)("examObj",e.examObj)("examResultObj",e.examResultObj)("markedByObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.markedByObj)("questionObjs",e.questionObjs)("essayQuestionObjs",e.essayQuestionObjs)("trueFalseChoiceQuestionObjs",e.trueFalseChoiceQuestionObjs)("files",e.files)("historyExamResultObjs",null!==(i=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==i?i:t.DdM(22,Hu))("examTracks",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.examTracks)("resultInfos",e.resultInfos),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("historyExamResultObjs",null!==(o=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==o?o:t.DdM(23,Hu))("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)}}function YE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",35),t._UZ(3,"rect",36)(4,"path",37)(5,"path",38),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function GE(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",35),t._UZ(3,"rect",36)(4,"path",37)(5,"path",40),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function WE(n,a){if(1&n&&t._UZ(0,"app-testbank-show-offline-result",33),2&n){const e=t.oxw(2);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("essayExam",!!e.essayQuestionObjs.length)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}function VE(n,a){if(1&n&&t._UZ(0,"azt-loaded-img",49),2&n){const e=t.oxw(3);t.Q6J("imgSrc",null==e.examObj?null:e.examObj.examHeader)}}function XE(n,a){if(1&n&&(t.TgZ(0,"div",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_dung")," ",null==e.examResultObj?null:e.examResultObj.rightAnswer,".")}}function tM(n,a){if(1&n&&(t.TgZ(0,"div",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_sai")," ",((null==e.examResultObj?null:e.examResultObj.totalQuestion)||0)-e.essayQuestionObjs.length-((null==e.examResultObj?null:e.examResultObj.rightAnswer)||0),".")}}const eM=function(n,a){return{correct:n,incorrect:a}};function nM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-standalone-question",51),t.NdJ("statusResult",function(o){const r=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.setClassStatusResult(o,r))}),t.qZA()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw(3);t.Q6J("startQuestionIndex",null==o.examObj?null:o.examObj.startQuestionIndex)("expandInfo",null==o.examObj?null:o.examObj.expandInfo)("follower",o.followerRenderQuest)("ngClass",t.WLB(14,eM,null==e?null:e.correctAnswer,!e.correctAnswer))("userAnswersObj",o.userAnswersObj)("question",e)("index",i)("place","multiple_choice")("configExam",o.examObj)("index",i)("cur_result",o.examResultIdParam)("newFirstInGroupIndexes",t.DdM(17,Hu))("showButtonCommentToTeacher",!0)("displayScreen",o.displayScreen)}}function iM(n,a){if(1&n&&(t.TgZ(0,"mat-tab",41),t.ALo(1,"mytranslate"),t.TgZ(2,"div",42)(3,"div",43)(4,"ng-scrollbar",44)(5,"div",45),t.YNc(6,VE,1,1,"azt-loaded-img",46),t.YNc(7,XE,3,4,"div",47),t.YNc(8,tM,3,4,"div",47),t.YNc(9,nM,1,18,"ng-template",48),t.qZA()()()()()),2&n){const e=t.oxw(2);t.s9C("label",t.lcZ(1,10,"lang_auto_trac_nghiem")),t.xp6(2),t.Tol(e.viewOption),t.xp6(2),t.Q6J("visibility","hover")("disabled",e.isMobile),t.xp6(2),t.Q6J("ngIf",null==e.examObj?null:e.examObj.examHeader),t.xp6(1),t.Q6J("ngIf","viewRight"==e.viewOption),t.xp6(1),t.Q6J("ngIf","viewWrong"==e.viewOption),t.xp6(1),t.Q6J("ngForOf",e.questionObjs)}}function oM(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"azt-mark-essay-new",56),t.NdJ("saveResultEvent",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saveResultEvent(o))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);let i;t.xp6(1),t.Q6J("displayScreen",e.displayScreen)("resultID",null!==(i=e.examResultIdParam)&&void 0!==i?i:0)("files",e.files)("questions",e.essayQuestionObjs)("userAnswersObj",e.userAnswersObj)("iframeSrc",e.iframeSrc)("examResultObj",e.examResultObj)("configExam",e.examObj)("iframeViewMode","edit")("examObj",e.examObj)("isBackEnd",!0)("curSelectedTab",e.curSelectedTab)("changeSelectedTab",e.changeSelectedTab)("hasLoadedData",e.hasLoadedData)}}function aM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-mark-essay",57),t.NdJ("saveResultEvent",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.saveResultEvent(o))}),t.qZA()}if(2&n){const e=t.oxw(3);let i;t.Q6J("displayScreen",e.displayScreen)("resultID",null!==(i=e.examResultIdParam)&&void 0!==i?i:0)("files",e.files)("questions",e.essayQuestionObjs)("userAnswersObj",e.userAnswersObj)("iframeSrc",e.iframeSrc)("examResultObj",e.examResultObj)("configExam",e.examObj)("iframeViewMode","edit")("examObj",e.examObj)("isBackEnd",!0)("hasLoadedData",e.hasLoadedData)}}function sM(n,a){if(1&n&&(t.TgZ(0,"mat-tab",52),t.ALo(1,"mytranslate"),t.TgZ(2,"div",53)(3,"div",54),t.YNc(4,oM,2,14,"ng-container",13),t.YNc(5,aM,1,12,"ng-template",null,55,t.W1O),t.qZA()()()),2&n){const e=t.MAs(6),i=t.oxw(2);t.s9C("label",t.lcZ(1,3,"lang_auto_tu_luan")),t.xp6(4),t.Q6J("ngIf",i.checkMarkNote)("ngIfElse",e)}}const rM=function(n,a){return{"w-85":n,"w-25":a}},lM=function(n){return{"ml-5":n}};function cM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-drawer-container",6)(1,"mat-drawer",7,8),t.NdJ("closedStart",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.changeStatusNav())}),t.TgZ(3,"div",9)(4,"div",10),t._UZ(5,"azt-basic-info-box",11),t.qZA(),t.TgZ(6,"div",12),t.YNc(7,HE,4,3,"div",13),t.YNc(8,KE,3,24,"ng-template",null,14,t.W1O),t.qZA(),t._UZ(10,"app-testbank-test-review-show-next-back-button",15),t.qZA()(),t.TgZ(11,"mat-drawer-content")(12,"div",16)(13,"div",17)(14,"div",18),t.YNc(15,YE,6,3,"button",19),t.YNc(16,GE,6,3,"button",20),t.TgZ(17,"div",21),t._uU(18),t.qZA(),t.TgZ(19,"div",22),t.GkF(20,23),t._UZ(21,"app-testbank-test-review-export-pdf-menu",24),t.qZA()(),t.YNc(22,WE,1,10,"app-testbank-show-offline-result",25),t.TgZ(23,"div",26)(24,"mat-tab-group",27),t.NdJ("selectedTabChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onTabChanged(o))})("selectedIndexChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.curSelectedTab=o)}),t.YNc(25,iM,10,12,"mat-tab",28),t.YNc(26,sM,7,5,"mat-tab",29),t.qZA()()()()()()}if(2&n){const e=t.MAs(9),i=t.oxw(),o=t.MAs(6);t.Q6J("hasBackdrop",i.hasBackdrop),t.xp6(1),t.s9C("opened",i.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(25,rM,i.isMobile,!i.isMobile))("mode",i.mode),t.xp6(4),t.Q6J("studentObj",i.studentObj),t.xp6(2),t.Q6J("ngIf",0===(null==i.initDataResult||null==i.initDataResult.data||null==i.initDataResult.data.historyExamResultObjs?null:i.initDataResult.data.historyExamResultObjs.length))("ngIfElse",e),t.xp6(3),t.Q6J("testedUserObjs",i.testedUserObjs),t.xp6(2),t.Q6J("ngClass",t.VKq(28,lM,!i.isMobile&&i.isOpenSideNav)),t.xp6(3),t.Q6J("ngIf",!i.isOpenSideNav||i.isMobile),t.xp6(1),t.Q6J("ngIf",i.isOpenSideNav&&!i.isMobile),t.xp6(1),t.s9C("matTooltip",null==i.examObj?null:i.examObj.name),t.xp6(1),t.hij(" ",null==i.examObj?null:i.examObj.name," "),t.xp6(2),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.Q6J("examResultIdParam",i.examResultIdParam)("userIdParam",i.userIdParam)("studentIdParam",i.studentIdParam)("examIdParam",i.examIdParam)("examObj",i.examObj)("examResultObj",i.examResultObj)("essayQuestionObjs",i.essayQuestionObjs),t.xp6(1),t.Q6J("ngIf",i.isMobileWebView),t.xp6(2),t.Q6J("selectedIndex",i.curSelectedTab),t.xp6(1),t.Q6J("ngIf",i.trueFalseChoiceQuestionObjs.length>0),t.xp6(1),t.Q6J("ngIf",i.essayQuestionObjs.length>0&&i.examObj&&i.examResultObj)}}function uM(n,a){1&n&&(t.TgZ(0,"button",74)(1,"span",75),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_sai")," "))}function dM(n,a){1&n&&(t.TgZ(0,"button",76)(1,"span",75),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dung")," "))}function _M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",58),t.YNc(1,uM,4,3,"button",59),t.YNc(2,dM,4,3,"button",60),t.TgZ(3,"button",61),t.O4$(),t.TgZ(4,"svg",62),t._UZ(5,"polygon",63),t.qZA(),t.kcU(),t.TgZ(6,"span",64),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"mat-menu",65,66)(11,"div",67)(12,"ul",68)(13,"li")(14,"label",69),t._uU(15),t.ALo(16,"mytranslate"),t.TgZ(17,"div",70)(18,"input",71),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onChangeViewOption("viewRight"))})("click",function(o){return o.stopPropagation()}),t.qZA()()()(),t.TgZ(19,"li")(20,"label",72),t._uU(21),t.ALo(22,"mytranslate"),t.TgZ(23,"div",70)(24,"input",73),t.NdJ("change",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onChangeViewOption("viewWrong"))})("click",function(o){return o.stopPropagation()}),t.qZA()()()()()()()}if(2&n){const e=t.MAs(10),i=t.oxw();t.xp6(1),t.Q6J("ngIf","viewWrong"===i.viewOption),t.xp6(1),t.Q6J("ngIf","viewRight"===i.viewOption),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.hij(" ",t.lcZ(8,8,"lang_testbank_testted_list_sort")," "),t.xp6(8),t.hij(" ",t.lcZ(16,10,"lang_auto_cau_dung")," "),t.xp6(3),t.Q6J("checked","viewRight"==i.viewOption),t.xp6(3),t.hij(" ",t.lcZ(22,12,"lang_auto_cau_sai")," "),t.xp6(3),t.Q6J("checked","viewWrong"==i.viewOption)}}let mM=(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u){super(),this.activeRoute=e,this.docxService=i,this.envService=o,this.testReviewService=s,this.examResultService=r,this.testMarketFeedbackService=l,this.answerBoxService=c,this.exportResultService=u,this.displayScreen=3,this.curSelectedTab=0,this.backToLink="",this.examResultIdParam=0,this.viewOption="viewAll",this.matTabGroupIndex=0,this.drawer=void 0,this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isMobile=this.commonService.isMobileOrTable(),this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.followerRenderQuest=new ls.G,this.iframeSrc="",this.hasLoadedData=!1,this.checkMarkNote=!1,this.changeSelectedTab=!1}onResize(e){e.target.innerWidth<980?(this.isMobile=!0,this.mode="over",this.hasBackdrop=!0):(this.isMobile=!1,this.mode="side",this.hasBackdrop=!1)}openDrawer(){var e;null===(e=this.drawer)||void 0===e||e.open(),this.isOpenSideNav=!0}closeDrawer(){var e;null===(e=this.drawer)||void 0===e||e.close(),this.isOpenSideNav=!1}changeStatusNav(){this.isMobile&&(document.body.style.overflow="auto")}onChangeViewOption(e){this.viewOption=this.viewOption==e?"viewAll":e}onTabChanged(e){this.matTabGroupIndex=e.index,this.changeSelectedTab=!0}setClassStatusResult(e,i){(0,kO.H)(100).subscribe(()=>i.isStatusResult=e)}saveResultEvent(e){e&&this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam,this.studentIdParam,this.examResultIdParam).subscribe(i=>{var o,s,r,l,c,u,d,m;1==i.success?(this.examResultObj=null===(o=i?.data)||void 0===o?void 0:o.examResultObj,null!==(r=null===(s=this.initDataResult)||void 0===s?void 0:s.data)&&void 0!==r&&r.markedByObj&&(this.initDataResult.data.markedByObj.fullName=null===(c=null===(l=i.data)||void 0===l?void 0:l.markedByObj)||void 0===c?void 0:c.fullName,this.initDataResult.data.markedByObj.avatar=null===(d=null===(u=i.data)||void 0===u?void 0:u.markedByObj)||void 0===d?void 0:d.avatar)):this.errorStatusObj(null!==(m=i.message)&&void 0!==m?m:"",!0)})}processConvertData(e){var i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B;if(e.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObj(e.data,this.testedUserObjs,this.studentObj),this.examObj=null===(i=e?.data)||void 0===i?void 0:i.examObj,this.examResultObj=null===(o=e?.data)||void 0===o?void 0:o.examResultObj,this.files=null!==(l=this.commonService.myParseJson(null!==(r=null===(s=this.examResultObj)||void 0===s?void 0:s.files)&&void 0!==r?r:""))&&void 0!==l?l:[],this.resultInfos=null!==(d=this.commonService.willDeleteParseJson(null!==(u=null===(c=this.examResultObj)||void 0===c?void 0:c.infors)&&void 0!==u?u:""))&&void 0!==d?d:[];const q=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify(null!==(m=e.data.questionObjs)&&void 0!==m?m:[]));this.followerRenderQuest.setNumQuest(q?.length||0),this.questionObjs=q,null===(p=this.questionObjs)||void 0===p||p.forEach(Q=>{var V;Q.correctAnswer=this.commonService.filterArray(null===(V=e?.data)||void 0===V?void 0:V.correctQuestionIds,Q.id),Q.isRoleTeacher=!0}),this.docxService.replaceCanvasBackgroundTS(null!==(b=this.questionObjs)&&void 0!==b?b:[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(null!==(I=this.castJsonToObj(null!==(C=null===(y=e.data.examResultObj)||void 0===y?void 0:y.answers)&&void 0!==C?C:""))&&void 0!==I?I:[]),this.getQuestionCanFeedback(),this.hasLoadedData=!0;const R=parseInt(this.iframeSrc.split("?")[1].split("=")[1]),et=1e6;if(null!==(D=this.examResultObj)&&void 0!==D&&D.result){const Q=this.castJsonToObj(null!==(B=null===(U=this.examResultObj)||void 0===U?void 0:U.result)&&void 0!==B?B:"");this.checkMarkNote=!(!Q||!Q.urlDataMark)}else this.checkMarkNote=R>et}}getQuestionCanFeedback(){var e;let i=[];Array.isArray(this.questionObjs)&&(this.questionObjs.forEach(o=>{o.id&&!this.commonService.filterArray(i,o.id)&&i.push(o.id)}),this.subscriptions.add(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(null===(e=this.examObj)||void 0===e?void 0:e.id,i.join(",")).subscribe(o=>{var s,r,l,c,u;if(1==o.success&&null!==(r=null===(s=o.data)||void 0===s?void 0:s.objs)&&void 0!==r&&r.length){let d=null!==(c=null===(l=o.data)||void 0===l?void 0:l.objs)&&void 0!==c?c:[];if(Array.isArray(this.questionObjs))for(let m=0;m<this.questionObjs.length;m++)d.forEach(p=>{this.questionObjs&&this.questionObjs[m].id==p.questionId&&(this.questionObjs[m].enableFeedback=p.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(null!==(u=o.message)&&void 0!==u?u:"",!0)})))}ngOnInit(){var e;this.iframeSrc=null!==(e=this.envService.getEnvValue("classliveUrl"))&&void 0!==e?e:"",(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var i,o,s,r,l;this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=null!==(o=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==o?o:void 0,this.studentIdParam=null!==(s=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==s?s:void 0,this.examIdParam=null!==(r=this.activeRoute.snapshot.paramMap.get("exam_id"))&&void 0!==r?r:void 0,this.processConvertData(null!==(l=this.initDataResult)&&void 0!==l?l:{})}),this.answerBoxService.switchEssayTabMessage.subscribe(i=>{i&&(this.curSelectedTab=1,setTimeout(()=>{window.scroll(0,0)},0))}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(Al.x),t.Y36(_m.D),t.Y36(CO.l),t.Y36(Bt.kS),t.Y36(Bt.nC),t.Y36(TO.g),t.Y36(Gs.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-test-review-for-teacher"]],viewQuery:function(e,i){if(1&e&&t.Gf(zE,5),2&e){let o;t.iGM(o=t.CRH())&&(i.drawer=o.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs",displayScreen:"displayScreen"},features:[t.qOj],decls:7,vars:5,consts:[[1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],["hasResult",""],[3,"msg","show","percent"],["ShowCorrectIncorrectFilterTpl",""],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"box"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"relative",3,"studentObj"],[1,"p-3","sm:pb-0"],[4,"ngIf","ngIfElse"],["allReadyTested",""],[3,"testedUserObjs"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","examResultObj","essayQuestionObjs"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj",4,"ngIf"],[1,"box","flex-1"],[3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"flex","justify-center"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","files","historyExamResultObjs","examTracks","resultInfos"],[3,"historyExamResultObjs","backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"label"],["id","multipleChoiceWrap"],[1,"azt-student-list","scrollable-content"],["pointerEventsMethod","scrollbar",2,"height","calc(100vh - 166px)","width","100%",3,"visibility","disabled"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","px-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"px-2","font-bold"],[1,"relative",3,"startQuestionIndex","expandInfo","follower","ngClass","userAnswersObj","question","index","place","configExam","cur_result","newFirstInGroupIndexes","showButtonCommentToTeacher","displayScreen","statusResult"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],["isFrameMark",""],[3,"displayScreen","resultID","files","questions","userAnswersObj","iframeSrc","examResultObj","configExam","iframeViewMode","examObj","isBackEnd","curSelectedTab","changeSelectedTab","hasLoadedData","saveResultEvent"],[3,"displayScreen","resultID","files","questions","userAnswersObj","iframeSrc","examResultObj","configExam","iframeViewMode","examObj","isBackEnd","hasLoadedData","saveResultEvent"],[1,"filter","flex"],["class","btn btn-sm btn-danger mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],["class","btn btn-sm btn-success mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"azt-hidden","md:block"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-teacher-Pz5-Lg4oM39","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-teacher-l9jNq9CQL6R","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],[1,"btn","btn-sm","btn-danger","mx-2",2,"cursor","default","padding","6px 4px"],[1,"azt-hidden","text-white","md:block"],[1,"btn","btn-sm","btn-success","mx-2",2,"cursor","default","padding","6px 4px"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("resize",function(s){return i.onResize(s)},!1,t.Jf7),t.YNc(1,JE,3,3,"div",1),t.YNc(2,cM,27,30,"ng-template",null,2,t.W1O),t.qZA(),t._UZ(4,"azt-export-docx-loading-box",3),t.YNc(5,_M,25,14,"ng-template",null,4,t.W1O)),2&e){const o=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.examResultObj||null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.historyExamResultObjs))("ngIfElse",o),t.xp6(3),t.Q6J("msg",i.exportResultService.keyLoading)("show",i.exportResultService.isLoading)("percent",i.exportResultService.percent)}},dependencies:[E.mk,E.sg,E.O5,E.tP,ke.VK,ke.p6,li.jA,li.kh,li.LW,Ta.uX,Ta.SP,Le.gM,P.KC,IO,mm.l,LO.s,Sa.$,Ws,jO,qO.i,FO,QO,BE,RE.P,_t.bT],encapsulation:2}),n})();function pM(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function hM(n,a){if(1&n&&t._UZ(0,"azt-test-review-for-teacher",3),2&n){const e=t.oxw();t.Q6J("initDataResult",e.initDataLastResultExam)("testedUserObjs",e.testedUserObjs)("displayScreen",4)}}let gM=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.activeRoute=e,this.browserStorageService=i,this.examResultService=o,this.sortService=s,this.testedListApiService=r,this.headerTitle="",this.examResultHistoryDialog=void 0,this.isShowPreviewFile=!1,this.backToLink=""}openResultHistoryReview(e){this.examResultHistoryDialog=e}closeResultHistoryReview(e){e&&location.reload(),this.examResultHistoryDialog=void 0}onShowFile(e){this.isShowPreviewFile=!0,this.previewFile=e}onFileClose(){this.isShowPreviewFile=!1,this.previewFile=void 0}getAndProcessData(){var e,i;this.initStatusObj();let o=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),s=null!==(e=this.activeRoute.snapshot.paramMap.get("user_id"))&&void 0!==e?e:"",r=null!==(i=this.activeRoute.snapshot.paramMap.get("student_id"))&&void 0!==i?i:"",l=Number(this.activeRoute.snapshot.paramMap.get("result_id"));this.getTestedUsers(()=>{setTimeout(()=>{this.examResultService.apiExamResultGetLastResultGet(o,s,r,l).subscribe(c=>{var u,d,m,p,b,y;1==c.success?(this.initDataLastResultExam=c,this.headerTitle=null!==(m=null===(d=null===(u=c?.data)||void 0===u?void 0:u.examObj)||void 0===d?void 0:d.name)&&void 0!==m?m:"",this.translateMetaTitle(null===(b=null===(p=c.data)||void 0===p?void 0:p.examObj)||void 0===b?void 0:b.name),this.successStatusObj()):this.errorStatusObj(null!==(y=c.message)&&void 0!==y?y:"",!0)})},100)})}getTestedUsers(e){let i=Number(this.activeRoute.snapshot.paramMap.get("result_id")),o=Number(this.activeRoute.snapshot.paramMap.get("exam_id"));var s=this.browserStorageService.getSimpleStorage(i+"_azt_setting_sort_desc_tested_by_time"),r=this.browserStorageService.getSimpleStorage(i+"_azt_setting_sort_tested_by_name"),l=this.browserStorageService.getSimpleStorage(i+"_azt_setting_sort_desc_tested_by_mark");this.testedListApiService.getTestedUserObjs("test_review",o,!0).subscribe(c=>{var u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V;if(1==c.success){let Y=[],at=[];s&&"true"==s?(Y=this.sortService.sortTimeDESC(null!==(d=null===(u=c?.data)||void 0===u?void 0:u.studentsNotInClassResults)&&void 0!==d?d:[]),at=this.sortService.sortTimeStudentsInClass(null!==(p=null===(m=c?.data)||void 0===m?void 0:m.studentsInClassResults)&&void 0!==p?p:[],1),this.testedUserObjs=this.progressUserObjsList(Y,at)):r&&"true"==r?(Y=this.sortService.sortFirstNameStudents(null!==(y=null===(b=c?.data)||void 0===b?void 0:b.studentsNotInClassResults)&&void 0!==y?y:[]),at=this.sortService.sortFirstNameStudentsInClass(null!==(I=null===(C=c?.data)||void 0===C?void 0:C.studentsInClassResults)&&void 0!==I?I:[]),this.testedUserObjs=this.progressUserObjsList(Y,at)):l&&"true"==l?(Y=this.sortService.sortMarkDESC(null!==(U=null===(D=c?.data)||void 0===D?void 0:D.studentsNotInClassResults)&&void 0!==U?U:[],!0),at=this.sortService.sortMarkStudentsInClass(null!==(q=null===(B=c?.data)||void 0===B?void 0:B.studentsInClassResults)&&void 0!==q?q:[],1,!0),this.testedUserObjs=this.progressUserObjsList(Y,at)):this.testedUserObjs=this.progressUserObjsList(null!==(et=null===(R=c?.data)||void 0===R?void 0:R.studentsNotInClassResults)&&void 0!==et?et:[],null!==(V=null===(Q=c?.data)||void 0===Q?void 0:Q.studentsInClassResults)&&void 0!==V?V:[])}e()})}progressUserObjsList(e,i){var o=[];return e.length>0&&e.forEach(s=>{s.resultId&&s.resultId>0&&o.push(s)}),i.forEach(s=>{var r;null===(r=s?.results)||void 0===r||r.forEach(l=>{l.resultId&&l.resultId>0&&o.push(l)})}),o}translateMetaTitle(e){this.commonService.getTranslate("lang_auto_cham_de_thi").subscribe(i=>{this.commonService.translateMetaData({title:i+" "+e,description:i+e,image:"lang_cms_test_image"})})}ngOnInit(){var e,i,o,s,r,l;let c=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),u=this.commonService.getMyQueryParam("backto"),d="/admin/testbank/exam-results-list/"+(null!==(o=null===(i=null===(e=this.initDataLastResultExam)||void 0===e?void 0:e.data)||void 0===i?void 0:i.examObj)&&void 0!==o&&o.categoryId?null===(l=null===(r=null===(s=this.initDataLastResultExam)||void 0===s?void 0:s.data)||void 0===r?void 0:r.examObj)||void 0===l?void 0:l.categoryId:0)+"/"+c+"/0";this.backToLink=u||d,this.getAndProcessData(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.gz),t.Y36(wi.z),t.Y36(Bt.kS),t.Y36(ea.K),t.Y36(yo.x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-review"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"initDataResult","testedUserObjs","displayScreen"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,pM,1,0,"azt-loading-effect",1),t.YNc(2,hM,1,3,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,mM,Xe._],encapsulation:2}),n})();function fM(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function xM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"ui-create-offline-exam",5),t.NdJ("handleSaveData",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handleUpdateQuestionAndExam(o))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_core_update_exam_offline_title")," "),t.xp6(2),t.Q6J("form",e.form)("type",e.type)("dataExamOffline",e.dataExamOffline)}}let vM=(()=>{class n extends st.Q{constructor(e,i,o,s,r){super(),this.httpClient=e,this.formBuilder=i,this.activeRoute=o,this.offlineExamMixQuestionV2Service=s,this.offlineExamCreatorV2Service=r,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.form=new h.nJ({}),this.backToLink="",this.prevData="",this.type=Hi.edit,this.form=i.group({nameExam:new h.p4("",[h.kI.required,Ri._.noWhiteSpace]),codeExamList:i.array([]),schoolLevel:new h.p4(0,[h.kI.required]),schoolSubject:new h.p4(0,[h.kI.required])})}handleUpdateQuestionAndExam(e){var i;let o=[],s=[],r=null!==(i=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==i?i:"";e.forEach((c,u)=>{c.isUpdate?o.push({offlineMixQuestionId:c.offlineMixQuestionId,offlineQuestionObjs:c.offlineQuestionObjs}):s.push({offlineMixQuestionHashId:c.offlineMixQuestionHashId,offlineQuestionObjs:c.offlineQuestionObjs})}),this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.nameExam.value,updateOfflineMixQuestionObjs:o,addOfflineMixQuestionObjs:s}).subscribe(c=>{var u,d;if(1===c.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const m=null!==(u=this.getMyQueryParam("backto"))&&void 0!==u?u:"admin/testbank/document-management/0/0/1";this.myNavigation(m)}else this.errorStatusObj(null!==(d=c.message)&&void 0!==d?d:"",!0)}))}getData(){var e,i;this.initStatusObj();let o=null!==(e=this.commonService.getMyParam(this.activeRoute,"hash_id"))&&void 0!==e?e:"",s=null!==(i=Number(this.commonService.getMyParam(this.activeRoute,"offline_id")))&&void 0!==i?i:0;this.subscriptions.add(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateOneOfflineMixQuestionIdGet(o,s).subscribe(r=>{var l,c,u;if(1===r.success){const d=null===(l=r.data)||void 0===l?void 0:l.updateOfflineExamRequest;d&&(this.dataExamOffline.updateOfflineMixQuestionObjs=null!==(c=d.updateOfflineMixQuestionObjs)&&void 0!==c?c:[],this.dataExamOffline.schoolLevelId=d.schoolLevelId,this.dataExamOffline.examHashId=o,this.dataExamOffline.schoolSubjectId=d.schoolSubjectId,this.dataExamOffline.name=d.name),this.successStatusObj()}else this.errorStatusObj(null!==(u=r.message)&&void 0!==u?u:"",!0)}))}ngOnInit(){var e,i;super.ngOnInit();let o=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0;this.backToLink=null!==(i=this.commonService.getMyQueryParam("backto"))&&void 0!==i?i:`/admin/testbank/create-new-document/${o}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline_title",description:"lang_core_update_exam_offline_title",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(s=>{let r=JSON.stringify(s);r!=this.prevData&&(this.prevData=r,this.form.patchValue(s))}),this.getData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(K.eN),t.Y36(h.QS),t.Y36(w.gz),t.Y36(Bt.Sr),t.Y36(L_.J))},n.\u0275cmp=t.Xpm({type:n,selectors:[["update-exam-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1000px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,fM,1,0,"azt-loading-effect",1),t.YNc(2,xM,5,6,"ng-template",null,2,t.W1O),t.qZA()),2&e){const o=t.MAs(3);t.Q6J("headerBackTolink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o)}},dependencies:[E.O5,xe.Q,Xe._,fl,_t.bT],encapsulation:2}),n})();var bM=A(11481);function yM(n,a){1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"span",4),t._uU(3,"Loading..."),t.qZA()()())}function wM(n,a){if(1&n&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.fileOption.name)}}function kM(n,a){if(1&n&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.fileNameCustom)}}function CM(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_dung_luong"),": ",e.fileMb," MB | ")}}function TM(n,a){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,CM,3,4,"span",22),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",0!=e.fileMb),t.xp6(1),t.AsE("",t.lcZ(3,3,"lang_auto_loai")," : ",e.fileOption.mimes,"")}}function AM(n,a){1&n&&(t.TgZ(0,"div",21),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function SM(n,a){if(1&n&&(t.TgZ(0,"a",23)(1,"mat-icon",16),t._uU(2,"save_alt"),t.qZA()()),2&n){const e=t.oxw(2);t.uIk("href",e.rootLink,t.LSH)("download",e.fileOption.name)}}function OM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",28)(2,"audio",29)(3,"source",30),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA(),t._uU(4," Your browser does not support the audio element. "),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("src",e.cdnLink,t.LSH),t.uIk("type",null==e.fileOption?null:e.fileOption.mimes)}}function EM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",31)(2,"video",32)(3,"source",30),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA(),t.TgZ(4,"p",33),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.s9C("poster",e.videoThumbUrl,t.LSH),t.xp6(1),t.Q6J("src",e.cdnLink,t.LSH),t.uIk("type",null==e.fileOption?null:e.fileOption.mimes),t.xp6(2),t.Oqu(t.lcZ(6,4,"lang_auto_ban_dang_su_dung_trinh_duyet_khong_ho_tro_xem_video_truc_tuyen"))}}function MM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"iframe",34),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("src",e.cdnLink,t.uOi)}}function IM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",31)(2,"img",35),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.uIk("src",e.cdnLink,t.LSH)}}function LM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",36)(2,"iframe",37),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("src",e.cdnLink,t.uOi)}}function ZM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",38)(2,"pdf-viewer",39),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.onLoad())}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("src",e.cdnLink)("show-all",!0)}}function PM(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"div",24)(2,"div",25),t.YNc(3,OM,5,2,"div",22),t.YNc(4,EM,7,6,"div",22),t.YNc(5,MM,2,1,"div",22),t.YNc(6,IM,3,1,"div",22),t.YNc(7,LM,3,1,"div",22),t.YNc(8,ZM,3,2,"div",22),t._UZ(9,"div",26),t.qZA(),t._UZ(10,"div",27),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf","audio"===e.typeFile),t.xp6(1),t.Q6J("ngIf","video"===e.typeFile),t.xp6(1),t.Q6J("ngIf","vimeo"===e.typeFile),t.xp6(1),t.Q6J("ngIf","image"===e.typeFile),t.xp6(1),t.Q6J("ngIf","officeapps"===e.typeFile),t.xp6(1),t.Q6J("ngIf","pdf"===e.typeFile)}}function NM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"div",40)(3,"img",41),t.NdJ("load",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.onLoad())}),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.uIk("src",e.linkUrl,t.LSH)}}function DM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),t._UZ(4,"div",9),t.qZA(),t.YNc(5,wM,2,1,"div",10),t.YNc(6,kM,2,1,"div",10),t.YNc(7,TM,4,5,"div",11),t.YNc(8,AM,3,3,"div",11),t.qZA(),t.TgZ(9,"div",12)(10,"span",13),t.YNc(11,SM,3,2,"a",14),t.qZA(),t.TgZ(12,"span",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.btnClosePreview())}),t.TgZ(13,"mat-icon",16),t._uU(14,"close"),t.qZA()()()(),t.TgZ(15,"div",17),t.YNc(16,PM,11,6,"ng-container",18),t.YNc(17,NM,4,1,"ng-template",null,19,t.W1O),t.qZA()()}if(2&n){const e=t.MAs(18),i=t.oxw();t.xp6(5),t.Q6J("ngIf",null!=i.fileOption),t.xp6(1),t.Q6J("ngIf",null==i.fileOption),t.xp6(1),t.Q6J("ngIf",null!=i.fileOption),t.xp6(1),t.Q6J("ngIf",null==i.fileOption),t.xp6(3),t.Q6J("ngIf",null!=i.fileOption),t.xp6(5),t.Q6J("ngIf",0==i.typePreview)("ngIfElse",e)}}let jM=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.dom=e,this.cdnService=i,this.envService=o,this.typePreview=0,this.fileNameCustom="",this.closePreview=new t.vpe,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.isVimeoLink=!1}onLoad(){this.stopStatusObj()}initData(){var e,i,o,s,r;if(0==this.typePreview){let l=null!==(e=this.fileOption)&&void 0!==e&&e.size?Number(this.fileOption.size):0,c=null!==(i=this.fileOption)&&void 0!==i&&i.mimes?this.fileOption.mimes:"";if(this.cdnLink=this.cdnService.getMyCdn(null!==(s=null===(o=this.fileOption)||void 0===o?void 0:o.url)&&void 0!==s?s:""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(l),this.typeFile=(0,ot.Z9)(c),"string"==typeof this.cdnLink&&(this.isVimeoLink=this.cdnLink.includes("https://player.vimeo.com/")||this.cdnLink.includes("https://mega.nz")),this.isVimeoLink&&(this.typeFile="vimeo"),"string"==typeof this.cdnLink&&""!=this.cdnLink)switch(this.typeFile){case"pdf":this.cdnLink=this.cdnLink;break;case"officeapps":this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.envService.getLinkEmbedDocument(this.cdnLink));break;default:this.cdnLink=this.dom.bypassSecurityTrustResourceUrl(this.cdnLink)}}else this.linkUrl=this.cdnService.getMyCdn(null!==(r=this.linkUrl)&&void 0!==r?r:"");setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.closePreview.emit()}getFileMB(e){return e&&e>0?(e/=1048576).toFixed(2):0}reloadFrame(e){let i=document.getElementById(e);i&&i.parentNode&&i.parentNode.replaceChild(i.cloneNode(),i)}ngOnInit(){document.body.classList.add("overflow-hidden"),setTimeout(()=>{this.initData()},0),this.videoThumbUrl=this.cdnService.convertCdnLinkOfGitHub("azota_assets/images/video-thumb.png"),this.initStatusObj(),super.ngOnInit()}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(bM.H7),t.Y36(le.U),t.Y36(_m.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-preview-media"]],inputs:{fileOption:"fileOption",typePreview:"typePreview",fileNameCustom:"fileNameCustom",linkUrl:"linkUrl"},outputs:{closePreview:"closePreview"},features:[t.qOj],decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","file-preview",4,"ngIf"],[1,"loading-block"],["role","status",1,"spinner-border","text-secondary",2,"width","5rem","height","5rem"],[1,"sr-only"],[1,"file-preview"],[1,"file-preview__header","flx","flx-sp-btw"],[1,"file-preview__header-left"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-image","url('https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/documents.png')","background-size","cover"],["class","file-preview__header__title",4,"ngIf"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"file-preview__controls-container"],["azt-track-service","preview-media-rf73f2TV3G","class","clickable download","target","_blank",4,"ngIf"],["azt-track-service","preview-media-l05RPS6FbP",1,"file-preview__buttons-container",3,"click"],[2,"color","rgb(53, 53, 53)","cursor","pointer"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"file-preview__header__title"],[1,"file-preview__header__send-time"],[4,"ngIf"],["azt-track-service","preview-media-rf73f2TV3G","target","_blank",1,"clickable","download"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],["controls",""],[3,"src","load"],[1,"pl-2","pr-2","mt-3"],["id","my-video","playsinline","playsinline","controls","","preload","auto","data-setup","{}",1,"video-js",2,"max-height","calc(100vh - 80px)","width","100%","padding-bottom","1rem",3,"poster"],[1,"vjs-no-js"],["frameborder","0","allowfullscreen","",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],[1,"pl-2","pr-2","mp-0"],["frameborder","0",2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem",3,"src","load"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],[1,"pl-2","pr-2","mt-3","block-img"],["alt","Responsive image",1,"img-fluid","image-preview",3,"load"]],template:function(e,i){1&e&&(t.YNc(0,yM,4,0,"div",0),t.YNc(1,DM,19,7,"div",1)),2&e&&(t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.Q6J("ngIf",(null!=i.fileOption||""!=i.linkUrl)&&!i.statusObj.loading))},dependencies:[E.O5,qe.Hw,k.rQ,_t.bT],styles:[".file-preview[_ngcontent-%COMP%]{background:#ECF0F5;position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0}.block-img[_ngcontent-%COMP%]{background:#a3a3a3;width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#ecf0f5}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed;background:#ECF0F5}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;background:#fff;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;color:#fff;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px;background-color:#e5efff}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;color:#222;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{color:#fff;margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.file-preview__buttons-container[_ngcontent-%COMP%]{display:inline-flex;align-items:center;position:relative}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),n})(),qM=(()=>{class n extends st.Q{constructor(e){super(),this.fb=e,this.expandInfoParse={},this.closeDialog=new t.vpe,this.form=new h.nJ({})}ngOnInit(){var e;this.form=this.fb.group({labelQuestion:new h.p4(null!==(e=this.expandInfoParse.label)&&void 0!==e?e:"C\xe2u")}),super.ngOnInit()}saveConfig(){this.closeDialog.emit(this.form.controls.labelQuestion.value&&this.form.controls.labelQuestion.value.length>0?{label:this.form.controls.labelQuestion.value}:{label:void 0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-expand-info"]],inputs:{expandInfoParse:"expandInfoParse"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:31,vars:14,consts:[[1,"label-info_bg"],[1,"label-info","p-4"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal",3,"formGroup"],[1,"row","mt-3"],[1,"col-md-12"],[1,"col-md-12","mt-2"],["formControlName","labelQuestion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","C\xe2u"],["value","Question"],["value","B\xe0i"],[1,"text-right","mt-4"],["azt-track-service","azt-split-point-echJ9MnECDy",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","azt-split-point-FNP5lMszlU9",1,"btn","w-24","btn-primary",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",5)(10,"form",7)(11,"div",8)(12,"div",9)(13,"p"),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.TgZ(16,"div",10)(17,"select",11)(18,"option",12),t._uU(19,"C\xe2u"),t.qZA(),t.TgZ(20,"option",13),t._uU(21,"Question"),t.qZA(),t.TgZ(22,"option",14),t._uU(23,"B\xe0i"),t.qZA()()()()()(),t.TgZ(24,"div",15)(25,"button",16),t.NdJ("click",function(){return i.closeDialog.emit()}),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"button",17),t.NdJ("click",function(){return i.saveConfig()}),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()()()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,6,"lang_core_exam_config_question_label")),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(4),t.Oqu(t.lcZ(15,8,"lang_core_exam_config_question_label_description")),t.xp6(12),t.hij(" ",t.lcZ(27,10,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",i.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(30,12,"lang_auto_luu")," "))},dependencies:[h._Y,h.YN,h.Kr,h.EJ,h.JJ,h.JL,h.sg,h.u,Pe.M,_t.bT],styles:[".label-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.label-info[_ngcontent-%COMP%]{max-width:400px;border-radius:.375rem;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();function FM(n,a){1&n&&t._UZ(0,"azt-loading-effect")}function QM(n,a){1&n&&(t.TgZ(0,"div",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_testted_list_teacher_confirmed")," "))}function UM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-expand-info",40),t.NdJ("closeDialog",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.closeDialogConfigExpandInfo(o))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("expandInfoParse",e.expandInfoParse)}}function BM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"azt-split-point",41),t.NdJ("closeDialog",function(){t.CHM(e);const o=t.oxw(4);return t.KtG(o.closeDialogSpitPoint())})("setPoint",function(o){t.CHM(e);const s=t.oxw(4);return t.KtG(s.setPointTest(o))}),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("data",e.dataSpitPoint)}}function RM(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"button",26),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.showAllResultQuestion())}),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",27),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openExamInfoDialog())}),t.ALo(8,"mytranslate"),t.TgZ(9,"mat-icon"),t._uU(10,"info"),t.qZA()()(),t.TgZ(11,"div",28)(12,"div",29)(13,"div",30)(14,"button",31),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openDialogConfigExpandInfo())}),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.TgZ(17,"button",32),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.openDialogSpitPoint())}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()(),t.YNc(20,UM,1,1,"azt-expand-info",33),t.YNc(21,BM,1,1,"azt-split-point",34),t.qZA(),t.TgZ(22,"div",35)(23,"div",36)(24,"span",37),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"input",38),t.NdJ("ngModelChange",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.nexToQuestionConf.value=o)})("focus",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.toggleTooltipNextToQuestion(!0))})("focusout",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.toggleTooltipNextToQuestion(!1))}),t.qZA(),t.TgZ(28,"button",39),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(3);return t.KtG(o.actionNextToQuestion())}),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.AsE(" ",0==e.defaultShowResultMedia?t.lcZ(4,11,"lang_testbank_update_exam_show"):t.lcZ(5,13,"lang_testbank_update_exam_hide")," ",t.lcZ(6,15,"lang_testbank_update_exam_explain")," "),t.xp6(4),t.s9C("matTooltip",t.lcZ(8,17,"lang_auto_chi_tiet_de_thi")),t.xp6(8),t.Oqu(t.lcZ(16,19,"lang_core_exam_config_question_label")),t.xp6(3),t.Oqu(t.lcZ(19,21,"lang_testbank_update_exam_split_points")),t.xp6(2),t.Q6J("ngIf",null==e.dataConfigExpandInfo?null:e.dataConfigExpandInfo.isShow),t.xp6(1),t.Q6J("ngIf",null==e.dataSpitPoint?null:e.dataSpitPoint.isShow),t.xp6(4),t.Oqu(t.lcZ(26,23,"lang_testbank_create_exam_width_file_pdf_go_to")),t.xp6(2),t.Q6J("min",1)("ngModel",e.nexToQuestionConf.value),t.xp6(2),t.Oqu(t.lcZ(30,25,"lang_auto_den"))}}function zM(n,a){1&n&&(t.TgZ(0,"span",48),t._uU(1,",\xa0"),t.qZA())}function JM(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(5);let l;return t.KtG(r.goToQuestionAll(null!==(l=s.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,zM,2,0,"span",47),t.BQk()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw(5);let s;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(s=e.index)&&void 0!==s?s:0)+1,""),t.xp6(2),t.Q6J("ngIf",i<o.invalidTypeQuestionConfig.length-1)}}function HM(n,a){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",44),t.YNc(4,JM,6,8,"ng-container",45),t.qZA(),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function $M(n,a){if(1&n&&(t.TgZ(0,"div",42)(1,"mat-icon",43),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,HM,5,4,"ng-container",3),t.qZA()),2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function KM(n,a){1&n&&(t.TgZ(0,"span",52),t._uU(1,"|"),t.qZA())}function YM(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",50),t.NdJ("click",function(o){const r=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.onShowFile(o,r,-1))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,KM,2,0,"span",51),t.BQk()}if(2&n){const e=a.index,i=t.oxw(4);t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_testbank_update_exam_image")," ",e+1,""),t.xp6(2),t.Q6J("ngIf",e<i.cropperData.length-1)}}function GM(n,a){if(1&n&&(t.TgZ(0,"div",49),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,YM,5,5,"ng-container",45),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),t.xp6(2),t.Q6J("ngForOf",e.cropperData)}}function WM(n,a){if(1&n&&t._UZ(0,"azt-loaded-img",53),2&n){const e=t.oxw(3);t.Q6J("imgSrc",e.examObj.examHeader)}}function VM(n,a){1&n&&(t.TgZ(0,"div",79),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",80),t._UZ(3,"line",81)(4,"path",82),t.qZA()()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function XM(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1,"|"),t.qZA())}function t8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",83)(1,"div",84)(2,"mat-chip-listbox")(3,"mat-chip-option",85),t.NdJ("removed",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.setTag(o))}),t._uU(4),t.ALo(5,"mytranslate"),t.TgZ(6,"button",86)(7,"mat-icon",87),t._uU(8,"cancel"),t.qZA()()()()()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,1,"azt_lang_tag_"+e.tags[0].code)," ")}}function e8(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1,"|"),t.qZA())}function n8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",98),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.setTag(r,s))}),t._uU(2),t.qZA()()}if(2&n){const e=a.$implicit,i=t.oxw(6);let o;t.xp6(2),t.hij(" ",null!==(o=e[i.commonService.getCurrentLang()+"Name"])&&void 0!==o?o:e.enName," ")}}function i8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",88)(1,"button",89),t.O4$(),t.TgZ(2,"svg",74),t._UZ(3,"path",90)(4,"path",91)(5,"path",92),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"mat-menu",null,93)(11,"div",94)(12,"ul",95),t.YNc(13,n8,3,1,"li",45),t.TgZ(14,"li"),t._UZ(15,"hr",96),t.qZA(),t.TgZ(16,"li")(17,"button",97),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.applyTagAll(o))}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()()()}if(2&n){const e=t.MAs(10),i=t.oxw(2).$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(6),t.Oqu(t.lcZ(8,5,"lang_teacher_set_tags")),t.xp6(6),t.Q6J("ngForOf",o.questionTags),t.xp6(4),t.Q6J("disabled",!i.tags),t.xp6(1),t.hij(" ",t.lcZ(19,7,"lang_teacher_apply_all_tags")," ")}}function o8(n,a){1&n&&(t.TgZ(0,"div",78),t._uU(1,"|"),t.qZA())}function a8(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,VM,5,3,"div",68),t.YNc(2,XM,2,0,"div",69),t.TgZ(3,"div",70),t.YNc(4,t8,9,3,"div",71),t.qZA(),t.YNc(5,e8,2,0,"div",69),t.YNc(6,i8,20,9,"div",72),t.YNc(7,o8,2,0,"div",69),t.TgZ(8,"div",73),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.editQuestion(o))}),t.TgZ(9,"span"),t.O4$(),t.TgZ(10,"svg",74),t._UZ(11,"path",75)(12,"polyline",76)(13,"path",77),t.qZA(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(16,"div",78),t._uU(17,"|"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(2),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(7),t.hij(" ",t.lcZ(15,7,"lang_teacher_edit_content_exam"),"")}}function s8(n,a){1&n&&(t.TgZ(0,"div",99),t.ALo(1,"mytranslate"),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),t.xp6(3),t.Oqu(t.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function r8(n,a){if(1&n&&(t.TgZ(0,"div",102),t._UZ(1,"img",103),t.ALo(2,"mycdn"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("src",t.lcZ(2,1,e.answerMedia),t.LSH)}}function l8(n,a){if(1&n&&(t.TgZ(0,"div",102)(1,"div",104),t._UZ(2,"span",105),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("innerHtml",e.answerMedia,t.oJD)}}function c8(n,a){if(1&n&&(t.TgZ(0,"div",100),t.YNc(1,r8,3,3,"div",101),t.YNc(2,l8,3,1,"div",101),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==e.isImage),t.xp6(1),t.Q6J("ngIf",0==e.isImage)}}const u8=function(n){return{"d-none":n}},d8=function(n){return{"error-border":n}};function _8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"div",57),t._UZ(4,"div",58)(5,"div",59),t.TgZ(6,"div",60),t.YNc(7,a8,18,9,"ng-container",3),t.ALo(8,"isOfflineExam"),t.TgZ(9,"div",61)(10,"span",62),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"input",63),t.NdJ("input",function(o){const r=t.CHM(e).$implicit,l=t.oxw(3);let c;return t.KtG(l.setScore(o,null!==(c=r.id)&&void 0!==c?c:0))}),t.qZA()()()(),t.TgZ(14,"div",64)(15,"azt-standalone-question",65),t.NdJ("showResultQuestionEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.showResultQuestion(o))})("setAnswerType4UpdateEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.setAnswerType4(o))})("removeAnswerType4Emit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.removeAnswerType4(o))})("setAnswerOnUpdateEmit",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.setAnswer(o))}),t.YNc(16,s8,5,6,"div",66),t.qZA()()(),t.YNc(17,c8,3,2,"div",67),t.qZA()()}if(2&n){const e=a.$implicit,i=a.index,o=t.oxw(3);let s;t.uIk("id","questViewBoxByLabel"+e.rawIndex),t.xp6(2),t.s9C("id","question_"+i),t.xp6(5),t.Q6J("ngIf",!t.lcZ(8,18,null==o.examObj?null:o.examObj.orcLogId)),t.xp6(3),t.Q6J("ngClass",t.VKq(22,u8,o.isMobile)),t.xp6(1),t.hij("",t.lcZ(12,20,"lang_testbank_update_exam_point"),":"),t.xp6(2),t.s9C("value",o.isDivinePointForQuestion?o.parseNumberFixed(null!==(s=e.scorePerQuestion)&&void 0!==s?s:0,8):e.scorePerQuestion),t.Q6J("ngClass",t.VKq(24,d8,null==e.scorePerQuestion||e.scorePerQuestion<0))("decimal",!0),t.xp6(2),t.Q6J("startQuestionIndex",o.examObj.startQuestionIndex)("expandInfo",o.examObj.expandInfo)("follower",o.followerRenderQuest)("displayScreen",8)("isMobile",o.isMobile)("examObj",o.examObj)("question",e)("index",i),t.xp6(1),t.Q6J("ngIf",(null==e.groupInfo?null:e.groupInfo.isFirstInGroup)&&(null==e.groupInfo?null:e.groupInfo.isFixGroup)),t.xp6(1),t.Q6J("ngIf",e.showResultMedia)}}function m8(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"div",6)(3,"div",7),t._UZ(4,"input",8),t.qZA(),t.TgZ(5,"div",9)(6,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.goBack())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.handleSubmitSaveExam())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",12)(13,"div",13)(14,"div",14),t.YNc(15,QM,3,3,"div",15),t.YNc(16,RM,31,27,"div",16),t.YNc(17,$M,6,4,"div",17),t.YNc(18,GM,4,4,"div",18),t.TgZ(19,"div",19),t.YNc(20,WM,1,1,"azt-loaded-img",20),t.YNc(21,_8,18,26,"div",21),t.qZA()()()(),t._UZ(22,"azt-scroll-to-top-bottom",22),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("formControl",e.nameExamInp),t.xp6(3),t.Oqu(t.lcZ(8,11,"lang_buttom_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(11,13,"lang_buttom_save")),t.xp6(5),t.Q6J("ngIf",0===e.questionObjs.length),t.xp6(1),t.Q6J("ngIf",e.questionObjs.length>0),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",e.cropperData&&e.cropperData.length>0),t.xp6(2),t.Q6J("ngIf",e.examObj.examHeader),t.xp6(1),t.Q6J("ngForOf",e.questionObjs),t.xp6(1),t.Q6J("isScrollToTop",!0)}}function p8(n,a){1&n&&(t.TgZ(0,"div",106)(1,"span",107),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"! "))}function h8(n,a){if(1&n&&(t.YNc(0,m8,23,15,"ng-container",1),t.ALo(1,"editPermission"),t.YNc(2,p8,4,3,"ng-template",null,4,t.W1O)),2&n){const e=t.MAs(3),i=t.oxw();t.Q6J("ngIf",t.xi3(1,2,i.examObj.permissionObj,"exam"))("ngIfElse",e)}}function g8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-preview-media",108),t.NdJ("closePreview",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onFileClose())}),t.ALo(2,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("linkUrl",e.previewFile)("typePreview",1)("fileNameCustom",t.lcZ(2,3,"lang_auto_du_lieu_cat_de"))}}function f8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",109),t.NdJ("closeDialog",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.closeDialogExamInfo())}),t.qZA()()}if(2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("startIndexQuestion",null!==(i=e.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",e.dataExamInfo)}}const v8=[{path:"",component:Kk,canActivate:[G0.v],children:[{path:"create-new-document/:cat_id",component:Pb},{path:"azota-editor/:cat_id",component:Vn},{path:"azota-editor/:cat_id/:quest_id",component:Vn},{path:"mix-bank-template/:cat_id/:mode_name/:matrix_id",component:xC},{path:"sync-folder/:cat_id",component:fO},{path:"document-management/:type/:cat_id/:page",component:il.Vn},{path:"action-online-offline/:cat_id/:hash_id",component:D1},{path:"print-exam-and-ticket/:cat_id/:hash_id",component:ET},{path:"config-exam-offline/:cat_id/:hash_id",component:Jv},{path:"config-exam-online/:cat_id/:hash_id",component:Cb},{path:"config-homework/:cat_id/:hash_id",component:q_},{path:"config-homework/:cat_id",component:q_},{path:"download-file-print/:cat_id/:hash_id/:offline_hash_id",component:$k},{path:"exam-results-list/:cat_id/:id/:result_id",component:T6},{path:"exam-results-list-new/:cat_id/:id/:result_id",component:i6},{path:"publish-document/:type/:cat_id/:hash_id",component:jT},{path:"all-documents-in-class/:classroom_id/:page",component:n3},{path:"homework-results-list/:cat_id/:id/:hash_id",component:Bk},{path:"create-file-pdf-ver2/:cat_id",component:Df},{path:"create-exam-by-excel/:cat_id",component:Mb},{path:"create-exam-by-hand/:cat_id",component:Ib},{path:"test-review/:exam_id/:user_id/:student_id/:result_id",component:gM},{path:"test-result-tracking/:exam_id/:user_id/:student_id/:result_id",component:wO},{path:"statistic/:cat_id/:id",component:iO},{path:"statistic-new/:cat_id/:id",component:aA},{path:"update-exam/:cat_id/:id",component:(()=>{class n extends st.Q{constructor(e,i,o,s,r,l,c,u,d,m){super(),this.dialog=e,this.fb=i,this.questionService=o,this.examService=s,this.activeRoute=r,this.questionInterfaceService=l,this.permissionService=c,this.docxService=u,this.answerTypeService=d,this.testMarketFeedbackService=m,this.questionTags=[],this.form=new h.nJ({}),this.questionObjs=[],this.followerRenderQuest=new ls.G,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.examObj={},this.firstInGroupIndexes=[],this.nameExamInp=new h.p4("",[Ri._.noWhiteSpace]),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[Du.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.isShowPreviewFile=!1,this.dataSpitPoint={isShow:!1},this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1}}onWindowScroll(){let e=document.getElementById("np-name-root");window.pageYOffset>30?e?.classList.add("fixToolBar"):e?.classList.remove("fixToolBar")}scrollDown(){let e=document.getElementById("azt-layout");console.log(e),e.scrollIntoView()}editQuestion(e){var i,o;if(this.examObj.editable){let s=`/admin/testbank/update-exam/${null!=this.cur_cateId?this.cur_cateId:0}/${this.examId}`+(this.backToLink.includes("shareType")?"?backto="+encodeURIComponent(this.backToLink):"");window.location=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+"/"+e.id+"?backto="+encodeURIComponent(s)+"&r="+((null!==(i=e.rawIndex)&&void 0!==i?i:0)+(null!==(o=this.examObj.startQuestionIndex)&&void 0!==o?o:1)-1)+(this.expandInfoParse.label?"&defaultQuestLabel="+this.expandInfoParse.label:"")}else this.openDialogWaring("lang_auto_not_edit_content_question")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.dialog.open(wl,{data:{isShow:!0,content:i},restoreFocus:!1})})}setTag(e,i){e.tags=i?[i]:[]}applyTagAll(e){for(let o=this.questionObjs.indexOf(e)+1;o<this.questionObjs.length;o++)this.questionObjs[o].tags=e.tags}openDialogConfigExpandInfo(){this.dataConfigExpandInfo?this.dataConfigExpandInfo.isShow=!0:this.dataConfigExpandInfo={isShow:!0}}closeDialogConfigExpandInfo(e){void 0!==e&&(this.expandInfoParse=e,this.handleSubmitSaveExam()),this.dataConfigExpandInfo&&(this.dataConfigExpandInfo.isShow=!1)}openDialogSpitPoint(){if(this.dataSpitPoint){let e=this.trueFalseCounter(this.questionObjs),i=this.fillAnswerCounter(this.questionObjs),o=this.questionObjs.length-e-i,s={multipleQuestion:e,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:i,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:o,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.dataSpitPoint={isShow:!0,obj:s}}}closeDialogSpitPoint(){this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}get invalidTypeQuestionConfig(){return this.questionObjs.filter(e=>{var i,o;return null==e.scorePerQuestion||e.scorePerQuestion<0||!isFinite(null!==(i=e.scorePerQuestion)&&void 0!==i?i:0)||!(null!==(o=e.answerResult)&&void 0!==o&&o.length)&&this.answerTypeService.isFillAnswer(e.answerType)})}goToQuestionAll(e,i=150){document.getElementById("question_"+e).scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let e=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(e,i)}}onFileClose(){this.enableScroll(),this.isShowPreviewFile=!1,this.previewFile=void 0}onShowFile(e,i,o){this.isShowPreviewFile=!0,this.disableScroll(),this.previewFile=i}goBack(){this.commonService.myNavigation(this.backToLink)}showAllResultQuestion(){this.viewQuestions.forEach(e=>{e.isShowExplain=!this.defaultShowResultMedia}),this.defaultShowResultMedia=!this.defaultShowResultMedia}showResultQuestion(e){this.viewQuestions.forEach(i=>{i.id==e&&(i.isShowExplain=!i.isShowExplain)})}convertData(e){for(var i=[],o=0;o<e.length;o++)e[o].content&&i.push(e[o].content);return JSON.stringify(i)}keepAnswerResult(e){for(var i,o,s,r=[],l=0;l<e.length;l++)r.push({id:null!==(i=e[l].id)&&void 0!==i?i:0,answerResult:JSON.stringify(e[l].answerResult),scorePerQuestion:null!==(o=e[l].scorePerQuestion)&&void 0!==o?o:0,tags:null===(s=e[l].tags)||void 0===s?void 0:s.map(c=>{var u;return null!==(u=c.code)&&void 0!==u?u:""})});return r}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.permissionService.hasEditPermission("exam",this.examObj.permissionObj)){let e=!1,i=0;this.questionObjs.forEach(o=>{var s;3!=o.answerType&&0==(null===(s=o.answerResult)||void 0===s?void 0:s.length)&&(o.errorValidateQuestion=!0,e=!0,document.getElementById("question_"+i)?.scrollIntoView()),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(o=>{var s,r,l=this.questionObjs.filter(c=>c.id==o.id);null!=l&&l.length>0&&!this.answerTypeService.isFillAnswer(l[0].answerType)&&o.answerResultParse&&o.answerResultParse.length>0&&(o.answerResult=this.convertData(null!==(s=o.answerResultParse)&&void 0!==s?s:[]),o.tags=null===(r=l[0].tags)||void 0===r?void 0:r.map(c=>{var u;return null!==(u=c.code)&&void 0!==u?u:""}))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),e?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.initStatusObj(),this.subscriptions.add(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(s=>{var r;1==s.success?(this.newAnswerList=new Array,this.examObj.expandInfo=this.serializeJson(this.expandInfoParse),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(null!==(r=s.message)&&void 0!==r?r:"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(e){var i,o,s,r=this.newAnswerList.filter(d=>d.id==e.idQuestion);if(null!=e.index&&1==e.type){var l={id:e.idQuestion,answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score,answerResult:""};if(r&&r.length>0)for(var c=0;c<this.newAnswerList.length;c++)this.newAnswerList[c].id==l.id&&(null===(i=this.newAnswerList[c].answerResultParse)||void 0===i||i.push(null!==(s=null===(o=l.answerResultParse)||void 0===o?void 0:o[0])&&void 0!==s?s:{}),this.newAnswerList[c].answerResult=JSON.stringify(this.newAnswerList[c].answerResultParse));else l.answerResult=JSON.stringify(l.answerResultParse),this.newAnswerList.push(l);this.changeStatusAnswer(l,e.index,!0,e.isImage)}else if(null!=e.index&&2==e.type){var u={id:e.idQuestion,answerResult:JSON.stringify([{index:e.index,content:e.isImage?e.event.content:e.event.key}]),answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score};if(r&&r.length>0)for(c=0;c<this.newAnswerList.length;c++)this.newAnswerList[c].id==u.id&&(this.newAnswerList[c].answerResult=u.answerResult,this.newAnswerList[c].answerResultParse=u.answerResultParse);else this.newAnswerList.push(u);this.changeStatusAnswer(u,e.index,!1,e.isImage)}}setAnswerType4(e){const i=(e.event.value||"").trim();if(i){var o=this.newAnswerList.filter(s=>s.id==e.questionId);this.questionObjs.forEach(s=>{var r,l;if(s.id==e.questionId){i.split("|").forEach(d=>{var m;null===(m=s.answerResult)||void 0===m||m.push(d.trim())}),s.onChanges=!0;var c={id:s.id,answerResult:JSON.stringify(s.answerResult),scorePerQuestion:null!==(r=s.scorePerQuestion)&&void 0!==r?r:0,tags:null===(l=s.tags)||void 0===l?void 0:l.map(d=>{var m;return null!==(m=d.code)&&void 0!==m?m:""})};null!=o&&o.length>0?this.newAnswerList.forEach(d=>{d.id==e.questionId&&(d.answerResult=JSON.stringify(s.answerResult))}):this.newAnswerList.push(c)}})}this.questionObjs.forEach(s=>{var r;s.errorValidateQuestion=3!=s.answerType&&0==(null===(r=s.answerResult)||void 0===r?void 0:r.length)}),e.event.input.value=""}removeAnswerType4(e){var i=this.newAnswerList.filter(o=>o.id==e.questionId);this.questionObjs.forEach(o=>{var s,r,l,c,u;if(o.id==e.questionId){var d=null!==(r=null===(s=o.answerResult)||void 0===s?void 0:s.indexOf(e.answerObj))&&void 0!==r?r:0;if(d>=0){null===(l=o.answerResult)||void 0===l||l.splice(d,1);var m={id:o.id,answerResult:JSON.stringify(o.answerResult),scorePerQuestion:null!==(c=o.scorePerQuestion)&&void 0!==c?c:0,tags:null===(u=o.tags)||void 0===u?void 0:u.map(p=>{var b;return null!==(b=p.code)&&void 0!==b?b:""})};null!=i&&i.length>0?this.newAnswerList.forEach(p=>{p.id==e.questionId&&(p.answerResult=JSON.stringify(o.answerResult))}):this.newAnswerList.push(m)}}})}changeStatusAnswer(e,i,o,s){o||this.questionObjs.forEach(r=>{if(r.id==e.id&&r.answers&&r.answers.length>0){for(var l=0;l<r.answers.length;l++)r.answers[l].isTrue=!1;r.answers[i].isTrue=!0}})}setPointTest(e){var i,o;let s=Number(e.multiplePoint)/this.countTrueFalseQuestion,r=Number(e.fillPoint)/this.countFillAnswerQuestion,l=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(l=Number(e.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let c=0;c<this.questionObjs.length;c++){let u=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[c].answerType)){this.questionObjs[c].scorePerQuestion=Number(this.parseNumberFixed(s,8));for(let d=0;d<this.newAnswerList.length;d++)if(this.newAnswerList[d].id==this.questionObjs[c].id){this.newAnswerList[d].scorePerQuestion=Number(this.parseNumberFixed(s,8)),u=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[c].answerType)){this.questionObjs[c].scorePerQuestion=Number(this.parseNumberFixed(l,8));for(let d=0;d<this.newAnswerList.length;d++)if(this.newAnswerList[d].id==this.questionObjs[c].id){this.newAnswerList[d].scorePerQuestion=Number(this.parseNumberFixed(l,8)),u=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[c].answerType)){this.questionObjs[c].scorePerQuestion=Number(this.parseNumberFixed(r,8));for(let d=0;d<this.newAnswerList.length;d++)if(this.newAnswerList[d].id==this.questionObjs[c].id){this.newAnswerList[d].scorePerQuestion=Number(this.parseNumberFixed(r,8)),u=!0;break}}if(!u){let d={id:null!==(i=this.questionObjs[c].id)&&void 0!==i?i:0,answerResult:JSON.stringify(this.questionObjs[c].answerResult),scorePerQuestion:null!==(o=this.questionObjs[c].scorePerQuestion)&&void 0!==o?o:0};this.newAnswerList.push(d)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong"),this.dataSpitPoint&&(this.dataSpitPoint.isShow=!1)}setPointQuestion(){var e=this.commonService.getFormObj(this.form);if(e.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=e.maxScore/e.totalQuestion;this.questionObjs.forEach(o=>{if(this.answerTypeService.isOneChoiceAnswer(o.answerType)||this.answerTypeService.isFillAnswer(o.answerType)){o.scorePerQuestion=i;for(var s=0;s<this.newAnswerList.length;s++)if(this.newAnswerList[s].id==o.id){this.newAnswerList[s].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(e,i){var o,s,r;for(let c=0;c<this.questionObjs.length;c++){let u=isNaN(parseFloat(e.target.value))?void 0:parseFloat(e.target.value);if(this.questionObjs[c]&&this.questionObjs[c].id==i&&(this.questionObjs[c].scorePerQuestion=u,this.newAnswerList.length>0)){let d=!1;for(var l=0;l<this.newAnswerList.length;l++)if(this.newAnswerList[l].id==this.questionObjs[c].id){this.newAnswerList[l].scorePerQuestion=u??0,d=!0;break}if(!d){let m=Array.isArray(this.questionObjs[c].answerResult)&&null!==(o=this.questionObjs[c].answerResult)&&void 0!==o&&o.length?null===(s=this.questionObjs[c].answerResult)||void 0===s?void 0:s[0]:"";this.newAnswerList.push({id:null!==(r=this.questionObjs[c].id)&&void 0!==r?r:0,answerResult:JSON.stringify(this.questionObjs[c].answerResult),answerResultParse:[{content:m}],scorePerQuestion:parseFloat(e.target.value)})}}}}trueFalseCounter(e){var i=0;return e.forEach(o=>{this.answerTypeService.isOneChoiceAnswer(o.answerType)&&i++}),i}fillAnswerCounter(e){var i=0;return e.forEach(o=>{this.answerTypeService.isFillAnswer(o.answerType)&&i++}),i}maxPointCounter(e){var i=0;return e.forEach(o=>{var s;this.answerTypeService.isOneChoiceAnswer(o.answerType)&&(i+=null!==(s=o.scorePerQuestion)&&void 0!==s?s:0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(e){var i=0;return e.forEach(o=>{var s;this.answerTypeService.isFillAnswer(o.answerType)&&(i+=null!==(s=o.scorePerQuestion)&&void 0!==s?s:0)}),this.parseNumberFixed(i,4)}essayPointCounter(e){var i=0;return e.forEach(o=>{var s;!this.answerTypeService.isOneChoiceAnswer(o.answerType)&&!this.answerTypeService.isFillAnswer(o.answerType)&&(i+=null!==(s=o.scorePerQuestion)&&void 0!==s?s:0)}),i.toString()}parseNumberFixed(e,i){let o=Number(parseFloat(e.toString()).toFixed(i));return isNaN(o)?"0":parseFloat(e.toString()).toFixed(i)}convertErrsResultQuestions(){for(let e=0;e<this.questionObjs.length;e++)null===this.questionObjs[e].answerResult&&(this.questionObjs[e].answerResult=[])}changeAnswerResultStatus(e){var i=[];let o=0;return e.forEach(s=>{var r;if(s.index=o,s.isRoleTeacher=!0,o++,s.answers&&s.answerResult)for(let l=0;l<s.answers.length;l++)s.answers[l].questionId=s.id,s.answers[l].checked=!1,s.answers[l].isTrue=!!this.checkAnswerResult(null!==(r=s.answers[l].key)&&void 0!==r?r:"",s.answerResult);i.push(s)}),i}checkAnswerResult(e,i){var o=!1;for(var s in i){if(i[s]==e){o=!0;break}o=!1}return o}getQuestionCanFeedback(){let e=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.filterArray(e,i.id)&&e.push(i.id)}),this.subscriptions.add(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,e.join(",")).subscribe(i=>{var o,s,r,l,c;if(1==i.success&&null!==(s=null===(o=i.data)||void 0===o?void 0:o.objs)&&void 0!==s&&s.length){let u=null!==(l=null===(r=i.data)||void 0===r?void 0:r.objs)&&void 0!==l?l:[];for(let d=0;d<this.questionObjs.length;d++)u.forEach(m=>{this.questionObjs[d].id==m.questionId&&(this.questionObjs[d].enableFeedback=m.allowFeedback)});this.successStatusObj()}else this.errorStatusObj(null!==(c=i.message)&&void 0!==c?c:"",!0)}))}getData(){this.initStatusObj(),this.subscriptions.add(this.examService.apiExamGetQuestionsIdGet(this.examId).subscribe(e=>{var i,o,s,r,l,c,u,d,m,p,b;if(1==e.success){this.examObj=null!==(o=null===(i=e.data)||void 0===i?void 0:i.examObj)&&void 0!==o?o:{},this.expandInfoParse=null!==(r=this.commonService.castJsonToObj(null!==(s=this.examObj.expandInfo)&&void 0!==s?s:"{}"))&&void 0!==r?r:{},this.firstInGroupIndexes=null!==(c=this.commonService.myParseJson(null!==(l=this.examObj.firstInGroupIndexes)&&void 0!==l?l:""))&&void 0!==c?c:[],this.nameExamInp.setValue(null!==(u=this.examObj.name)&&void 0!==u?u:"");let y=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify(null===(d=e.data)||void 0===d?void 0:d.questionObjs));const C=this.changeAnswerResultStatus(y??[]);this.followerRenderQuest.setNumQuest(C.length),this.questionObjs=C,this.cropperData=null!==(p=this.commonService.myParseJson(null!==(m=this.examObj.labelsUrl)&&void 0!==m?m:""))&&void 0!==p?p:[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.trueFalseCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=this.fb.group({maxScore:new h.p4(this.maxPointCounter(this.questionObjs),[h.kI.required]),totalQuestion:new h.p4(this.trueFalseCounter(this.questionObjs),[h.kI.required])}),this.questionService.apiQuestionGetTagsGet().subscribe(I=>{var D;1==I.success&&I.data&&(this.questionTags=null!==(D=I.data.objs)&&void 0!==D?D:[])})}else this.showErrorSnack(null!==(b=e.message)&&void 0!==b?b:"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}ngOnInit(){(0,nt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{var e,i;this.cur_cateId=null!==(e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")))&&void 0!==e?e:0,this.examId=null!==(i=Number(this.commonService.getMyParam(this.activeRoute,"id")))&&void 0!==i?i:0;var o=this.commonService.getMyQueryParam("backto");this.backToLink=o||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()}),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(e){this.nexToQuestionConf.showTooltip=e}actionNextToQuestion(){var e;if(void 0===this.nexToQuestionConf.value)return;const i=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));i?i.scrollIntoView():this.showErrorSnack(null!==(e=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den"))&&void 0!==e?e:"")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z.uw),t.Y36(h.QS),t.Y36(Bt.aE),t.Y36(Bt.Oe),t.Y36(w.gz),t.Y36(Sl.U),t.Y36(ta.$),t.Y36(Al.x),t.Y36(wa.T),t.Y36(Bt.nC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(e,i){if(1&e&&t.Gf(Sa.$,5),2&e){let o;t.iGM(o=t.CRH())&&(i.viewQuestions=o)}},hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(s){return i.onWindowScroll(s)},!1,t.Jf7)},features:[t.qOj],decls:7,vars:8,consts:[[3,"headerTitle","headerBackTolink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"grid","grid-cols-12","gap-5",2,"width","100%","margin","20px auto"],[1,"mb-1","lg:col-span-8","sm:col-span-6","col-span-12"],["type","text",1,"inputMobile","form-control",3,"formControl"],[1,"text-center","h-9","flex","col-span-12","lg:col-span-4","sm:col-span-6"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-3",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","grid grid-cols-12 gap-1 items-center","style","justify-content: space-between",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"box-questions","mt-3"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","box-questions-item mb-2","style","position: relative",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[1,"box-control","text-center"],[1,"grid","grid-cols-12","gap-1","items-center",2,"justify-content","space-between"],[1,"box-control","text-left","col-span-12","md:col-span-6"],["azt-track-service","update-exam-7Rsn956k43",1,"btn","btn-show",3,"click"],["azt-track-service","update-exam-RjxFPV1tds",1,"btn-detail",2,"margin-left","10px",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6","flex","justify-btn-block"],[1,"flex","flex-col","sm:flex-row","justify-btn-block"],[1,"flex","items-center","mb-2"],["azt-track-service","update-exam-4zmWzk9Yc",1,"btn","btn-set-quest-label",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[3,"expandInfoParse","closeDialog",4,"ngIf"],[3,"data","closeDialog","setPoint",4,"ngIf"],[1,"col-span-12","mt-2"],[1,"next-to-question","mb-2","rounded","shadow","py-1","px-2",2,"display","inline-block"],[1,"font-medium",2,"width","auto"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-next-to-question",3,"click"],[3,"expandInfoParse","closeDialog"],[3,"data","closeDialog","setPoint"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"box-questions-item","mb-2",2,"position","relative"],[1,"w-100"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0","relative",2,"box-shadow","none"],[1,"mb-0","relative","overflow-hidden",3,"startQuestionIndex","expandInfo","follower","displayScreen","isMobile","examObj","question","index","showResultQuestionEmit","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],["class","fix-group",3,"matTooltip",4,"ngIf"],["class","card question-card","style","box-shadow: none",4,"ngIf"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-1"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"edit-question-header-dr"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,"fix-group",3,"matTooltip"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"linkUrl","typePreview","fileNameCustom","closePreview"],[3,"startIndexQuestion","data","closeDialog"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,FM,1,0,"azt-loading-effect",1),t.YNc(3,h8,4,5,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(5,g8,3,5,"div",3),t.YNc(6,f8,2,2,"div",3)),2&e){const o=t.MAs(4);t.Q6J("headerTitle",t.lcZ(1,6,"lang_testbank_update_exam_exam"))("headerBackTolink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",o),t.xp6(3),t.Q6J("ngIf",i.isShowPreviewFile),t.xp6(1),t.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[E.mk,E.sg,E.O5,Xn.z2,Xn.iO,Xn.qH,qe.Hw,ke.VK,ke.p6,Le.gM,h.Fj,h.wV,h.JJ,h.qQ,h.On,h.oH,mm.l,xe.Q,jM,Bo.Y,y_,w_,Sa.$,zu.M,qM,Xe._,_t.bT,_t.GT,_t.BU,_t.HU],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding:5px 20px;width:100%;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%], #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;border:1px solid #000;padding:5px 20px;font-size:small;text-align:center;width:100%;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .box-questions-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.question-offline-title[_ngcontent-%COMP%]{font-weight:500;margin-bottom:15px}.question-offline-answer[_ngcontent-%COMP%]{max-width:300px;padding:10px;display:flex;justify-content:space-between;font-weight:500}.question-offline-answer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.listda[_ngcontent-%COMP%]{margin-top:30px;padding-left:20px}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.listli[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block}.listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;cursor:pointer}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.show_explain[_ngcontent-%COMP%]{color:#fff;font-size:15px;margin-block:auto}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}.image_group[_ngcontent-%COMP%]{position:relative}.image_group[_ngcontent-%COMP%]   .mixGroupLabel[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-35px;left:-45px;background-color:#ff000094;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px;display:block}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.box-questions[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.box-questions[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-questions[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}"]}),n})()},{path:"update-exam-offline/:cat_id/:hash_id/:offline_id",component:vM},{path:"add-code-exam-offline/:cat_id/:hash_id",component:tv},{path:"create-website",component:Hb},{path:"create-website-result",component:jb},{path:"powerpoint/:cat_id/:exam_id",component:YC},{path:"config-share-offline-result/:cat_id/:hash_id",component:Tb},{path:"offline-answer-list/:cat_id/:hash_id",component:kC},{path:"matrix-list/:cate/:page",component:wv}]}];let b8=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[w.Bz.forChild(v8),w.Bz,ns.fQ]}),n})();class y8 extends Xo.v{constructor(){super(...arguments),this.isSelected=!1,this.isShow=!0}}var hm=A(33502);const w8=["colItem"],k8=["resizeBarH"],C8=["aztColResizable",""];function T8(n,a){1&n&&(t.TgZ(0,"div",6)(1,"div",2),t.Hsn(2,1),t.qZA()())}const A8=[[["","colLeftContent",""]],[["","colRightContent",""]]],S8=function(n){return{width:n}},O8=["[colLeftContent]","[colRightContent]"];let E8=(()=>{class n extends st.Q{constructor(){super(),this.hasColRight=!1,this.width=0,this.x=0,this.y=0,this.leftWidth=0,this.handleMouseUp=e=>{var i,o,s;this.resizeBarH&&this.resizeBarH.nativeElement.classList.remove("hover"),null===(i=this.resizeBarH)||void 0===i||i.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),null===(o=this.colItem)||void 0===o||o.nativeElement.style.removeProperty("user-select"),null===(s=this.colItem)||void 0===s||s.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=e=>{if(this.colItem){let i=this.colItem.nativeElement;i.style.width=`${this.leftWidth+(e.clientX-this.x)}px`,document.body.style.cursor="col-resize",i.style.userSelect="none",i.style.pointerEvents="none"}}}handleMouseDown(e){this.colItem&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.colItem.nativeElement.getBoundingClientRect().width,this.resizeBarH&&this.resizeBarH.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["","aztColResizable",""]],viewQuery:function(e,i){if(1&e&&(t.Gf(w8,5),t.Gf(k8,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.colItem=o.first),t.iGM(o=t.CRH())&&(i.resizeBarH=o.first)}},inputs:{hasColRight:"hasColRight",width:"width"},features:[t.qOj],attrs:C8,ngContentSelectors:O8,decls:7,vars:4,consts:[[1,"col-item","border-r","border-slate-400","dark:border-darkmode-400",3,"ngStyle"],["colItem",""],[1,"col-content"],[1,"resize-bar","resize-bar-h",3,"mousedown"],["resizeBarH",""],["class","col-right",4,"ngIf"],[1,"col-right"]],template:function(e,i){1&e&&(t.F$t(A8),t.TgZ(0,"div",0,1)(2,"div",2),t.Hsn(3),t.qZA(),t.TgZ(4,"div",3,4),t.NdJ("mousedown",function(s){return i.handleMouseDown(s)}),t.qZA()(),t.YNc(6,T8,3,0,"div",5)),2&e&&(t.Q6J("ngStyle",t.VKq(2,S8,i.hasColRight?"60%":i.width?i.width+"px":"100%")),t.xp6(6),t.Q6J("ngIf",i.hasColRight))},dependencies:[E.O5,E.PC],styles:[".col-item[_ngcontent-%COMP%]{min-width:150px;min-height:150px;height:100%;position:relative}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;background-color:transparent}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}.col-item[_ngcontent-%COMP%]   .resize-bar.hover[_ngcontent-%COMP%]{background-color:#2262ae}.col-item[_ngcontent-%COMP%]   .resize-bar.resize-bar-h[_ngcontent-%COMP%]{width:3px;right:0;top:0;bottom:0}.col-right[_ngcontent-%COMP%]{flex:auto}.col-content[_ngcontent-%COMP%]{height:100%;padding:15px;overflow-y:auto;overflow-x:hidden}"]}),n})();function M8(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"azt-standalone-question",3),t.BQk()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(2);t.xp6(1),t.Q6J("follower",o.followerRenderQuest)("question",e)("index",i)("displayScreen",9)("configExam",o.exam)("expandInfo",null==o.exam?null:o.exam.expandInfo)("startQuestionIndex",null==o.exam?null:o.exam.startQuestionIndex)("hidden",!e.isShow)}}function I8(n,a){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,M8,2,8,"ng-container",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.questionList)}}let L8=(()=>{class n extends st.Q{constructor(e,i,o){super(),this.fb=e,this.store=i,this.commonService=o,this.questionList=[],this.filterTag=[],this.filterType=[],this.followerRenderQuest=new ls.G}getTagsOfQuestion(e){var i;let o=[];return null===(i=e.tags)||void 0===i||i.forEach(s=>{s.code&&o.push(s.code)}),o}getFilterTagValue(e){let i=[];return e.forEach(o=>{o.hasOwnProperty("key")&&o.key&&i.push(o.key)}),i}getFilterTypeValue(e){let i=[];return e.forEach(o=>{o.hasOwnProperty("key")&&o.key&&("TN"==o.key?i.push(1):"TL"==o.key?i.push(3):"\u0110T"==o.key&&i.push(4))}),i}checkValidTagQuestion(e,i){let o=!1;return e.forEach(s=>{this.commonService.filterArray(i,s)&&(o=!0)}),o}ngOnChanges(){let e=this.getFilterTagValue(this.filterTag),i=this.getFilterTypeValue(this.filterType);for(let o=0;o<this.questionList.length;o++){let s=this.getTagsOfQuestion(this.questionList[o]);this.questionList[o].isShow=e.length>0&&!i.length?!!this.checkValidTagQuestion(s,e):i.length>0&&!e.length?!!this.commonService.filterArray(i,this.questionList[o].answerType):!(e.length>0&&i.length>0)||!!this.checkValidTagQuestion(s,e)&&!!this.commonService.filterArray(i,this.questionList[o].answerType)}}ngOnInit(){this.subscriptions.add(this.store.select(hm.Y).subscribe(e=>{this.state=e})),this.followerRenderQuest.setNumQuest(this.questionList.length);for(let e=0;e<this.questionList.length;e++)this.questionList[e].isRoleTeacher=!0;super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.QS),t.Y36(Ps.yh),t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-preview-list-question"]],inputs:{exam:"exam",questionList:"questionList",filterTag:"filterTag",filterType:"filterType"},features:[t.qOj,t.TTD],decls:1,vars:1,consts:[["id","boxContentQuestion",4,"ngIf"],["id","boxContentQuestion"],[4,"ngFor","ngForOf"],[3,"follower","question","index","displayScreen","configExam","expandInfo","startQuestionIndex","hidden"]],template:function(e,i){1&e&&t.YNc(0,I8,2,1,"div",0),2&e&&t.Q6J("ngIf",i.questionList.length>0)},dependencies:[E.sg,E.O5,Sa.$],styles:['.used[_ngcontent-%COMP%]{position:relative}.used[_ngcontent-%COMP%]:after{content:"";display:block;width:100%;height:100%;position:absolute;z-index:3;background-color:#44444429;left:0;top:0}.image_group[_ngcontent-%COMP%]{border:1px solid #ccc}.image_group.selected-group[_ngcontent-%COMP%]{border:1px solid green;outline:3px solid rgba(0,193,0,.321)}.hidden[_ngcontent-%COMP%]{display:none!important}.image_group[_ngcontent-%COMP%], .image_question[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px}']}),n})();var Z8=A(77579),gm=A(82722);let P8=(()=>{class n{constructor(e){this.commonService=e}isEmptyObj(e){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}filterObjInArrObjs(e,i){if(0==e.length||!i||this.isEmptyObj(i))return!1;let o=!1;for(let s=0;s<e.length;s++)if(e[s].key==i.key&&e[s].value==i.value){o=!0;break}return o}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Qe.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const N8=["searchDropdownInput"],D8=["multiAllOption"];function j8(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(2),t.lnq(" ",t.lcZ(3,3,"lang_auto_tat_ca"),"\xa0",e.options.length," ",t.lcZ(4,5,"lang_auto_duoc_chon")," ")}}function q8(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=a.$implicit,i=a.index,o=t.oxw(4);t.xp6(1),t.AsE(" ",e.value," ",o.selected.length>1&&i<o.selected.length-1?", ":""," ")}}function F8(n,a){if(1&n&&(t.ynx(0),t.YNc(1,q8,2,2,"span",7),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.selected)}}function Q8(n,a){if(1&n&&(t.TgZ(0,"mat-select-trigger"),t.YNc(1,j8,5,7,"ng-container",4),t.YNc(2,F8,2,1,"ng-container",4),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",(null==e.multiAllOption?null:e.multiAllOption.selected)||(null==e.selected?null:e.selected.length)===(null==e.options?null:e.options.length)),t.xp6(1),t.Q6J("ngIf",!(null!=e.multiAllOption&&e.multiAllOption.selected)&&(null==e.selected?null:e.selected.length)!==(null==e.options?null:e.options.length))}}function U8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",13),t.NdJ("click",function(o){t.CHM(e);const s=t.oxw(3);return t.KtG(s.clear(o))}),t._uU(1,"clear "),t.qZA()}}function B8(n,a){if(1&n&&(t.TgZ(0,"div",8),t._UZ(1,"lucide-icon",9)(2,"input",10,11),t.YNc(4,U8,2,0,"mat-icon",12),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("placeholder",e.searchPlaceholder),t.xp6(2),t.Q6J("ngIf",e.showClearButton)}}function R8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",14,15),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(2);return t.KtG(s.toggleMultiAll(o))})("keyup.enter",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(2);return t.KtG(s.toggleMultiAll(o))})("keyup.space",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(2);return t.KtG(s.toggleMultiAll(o))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("value",e.options),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_tat_ca")," ")}}function z8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",18,19),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))})("keyup.enter",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))})("keyup.space",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))}),t._uU(2),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("value",e),t.xp6(2),t.hij(" ",i.displayValue(e)," ")}}function J8(n,a){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_no_result_found")," "))}function H8(n,a){if(1&n&&(t.ynx(0),t.YNc(1,z8,3,2,"mat-option",16),t.ALo(2,"async"),t.YNc(3,J8,3,3,"span",17),t.ALo(4,"async"),t.BQk()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,2,e.filteredOptions$)),t.xp6(2),t.Q6J("ngIf",!e.showAllOption&&0===(null==(i=t.lcZ(4,4,e.filteredOptions$))?null:i.length))}}function $8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",22,19),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))})("keyup.enter",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))})("keyup.space",function(){t.CHM(e);const o=t.MAs(1),s=t.oxw(3);return t.KtG(s.recalculateCheckedBoxes(o))}),t._uU(2),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(3);t.Q6J("value",e),t.xp6(2),t.hij(" ",i.displayValue(e)," ")}}function K8(n,a){if(1&n&&(t.ynx(0),t.YNc(1,$8,3,2,"mat-option",21),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.options)}}const fm=function(n){return{inactive:n}},Y8=function(n,a){return["new-select-design-panel",n,a]};function G8(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"form",1)(1,"mat-label"),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-select",3),t.NdJ("selectionChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.onSelectionChange(o))})("openedChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.openedChange(o))}),t.YNc(5,Q8,3,2,"mat-select-trigger",4),t.YNc(6,B8,5,2,"div",5),t.YNc(7,R8,4,4,"mat-option",6),t.ALo(8,"async"),t.YNc(9,H8,5,6,"ng-container",4),t.YNc(10,K8,2,1,"ng-container",4),t.qZA()()()}if(2&n){const e=t.oxw();let i;t.Q6J("formGroup",e.selectSearchForm)("ngClass",t.VKq(17,fm,e.disableSelectSearch)),t.xp6(2),t.hij(" ",e.label," "),t.xp6(1),t.Q6J("ngClass",t.VKq(19,fm,e.disableSelectSearch)),t.xp6(1),t.s9C("multiple",e.multiple),t.Q6J("ngClass",e.selected.length>0?"custom-selected-text":"")("panelClass",t.WLB(21,Y8,e.panelClass,e.scrollClass))("disableOptionCentering",!0)("disabled",e.disableSelectSearch)("placeholder",e.selected.length>0?e.selected.length+" selected":e.selectPlaceholder),t.xp6(1),t.Q6J("ngIf",e.multiple),t.xp6(1),t.Q6J("ngIf",e.showSearch),t.xp6(1),t.Q6J("ngIf",e.multiple&&e.options.length>1&&0!==(null==(i=t.lcZ(8,15,e.filteredOptions$))?null:i.length)),t.xp6(2),t.Q6J("ngIf",e.showSearch),t.xp6(1),t.Q6J("ngIf",!e.showSearch)}}let W8=(()=>{class n{constructor(e,i,o){this._formBuilder=e,this._cd=i,this.testFinderService=o,this._destroy$=new Z8.x,this.selectedEvent=new t.vpe,this.formValidEvent=new t.vpe,this.maxNumOptionsBeforeSearch=5,this.selected=[],this.selectPlaceholder="Select One",this.disableSelectSearch=!1,this.searchPlaceholder="Search",this.defaultOptionIndex=0,this.panelClass="",this.setInitialValue=!0,this.scrollClass="",this.multiple=!1,this.selectSearchForm=new h.cw({}),this._filteredListLength=0}ngOnInit(){var e,i;(null===(e=this.options)||void 0===e?void 0:e.length)>this.maxNumOptionsBeforeSearch&&(this.showSearch=!0,this.scrollClass="scroll"),this._setUpFormControls(this.selected,this.setInitialValue,this.multiple),this.showSearch&&(this.filteredOptions$=null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i?void 0:i.valueChanges.pipe((0,Iu.O)(""),(0,ss.U)(o=>(this.showClearButton=this._showClearButton(o),this._filter(o))),(0,gm.R)(this._destroy$))),this.selectSearchForm.statusChanges.pipe((0,gm.R)(this._destroy$)).subscribe(o=>{"VALID"===o&&this.formValidEvent.emit(!0),"INVALID"===o&&this.formValidEvent.emit(!1)})}ngAfterViewChecked(){this._cd&&!this._cd.destroyed&&this._cd.detectChanges()}ngOnDestroy(){this._destroy$.next(void 0),this._destroy$.complete()}onSelectionChange(e){console.log("onSelectionChange $event --\x3e",e)}clear(e){var i,o;e.stopPropagation(),this._filteredList=this.options,this._setSelectValue(this.selected),null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i||i.setValue(""),null===(o=this.selectSearchForm.get("SearchControl"))||void 0===o||o.reset(),this.showClearButton=!1}openedChange(e){var i,o,s,r,l,c,u,d,m;!e&&0===this._filteredListLength&&!this.multiple&&(null===(i=this.selectSearchForm.get("SearchControl"))||void 0===i||i.setValue(""),null===(o=this.selectSearchForm.get("SearchControl"))||void 0===o||o.reset(),this._setSelectValue(this.selected)),!e&&this._filteredListLength>0&&!this.multiple&&this._setSelectValue(this._filteredList[0]),e&&(!(null===(l=null===(r=null===(s=this.searchDropdownInput)||void 0===s?void 0:s.nativeElement)||void 0===r?void 0:r.value)||void 0===l)&&l.toLowerCase().includes("all")&&(null===(c=this.selectSearchForm.get("SearchControl"))||void 0===c||c.setValue(""),null===(u=this.selectSearchForm.get("SearchControl"))||void 0===u||u.reset(),this.searchDropdownInput.nativeElement.value=""),null===(m=null===(d=this.searchDropdownInput)||void 0===d?void 0:d.nativeElement)||void 0===m||m.focus())}displayValue(e){return e.value}toggleMultiAll(e){this._setSelectValue(e.selected?this.options:[])}recalculateCheckedBoxes(e){this._setSelectValue(this.multiple?e.selected?[e.value,...this.selected]:this._removeOptionFromSelected(e.value,this.selected):e.value)}_removeOptionFromSelected(e,i){return i.filter(o=>e!==o)}_setUpFormControls(e,i,o){this.selectSearchForm=this._formBuilder.group({SelectControl:[this._setInitialValue(e,i,o)],SearchControl:[""]})}_isOptionAll(e){return!!e&&this.displayValue(e).toLowerCase().includes("all")}_setInitialValue(e,i,o){return e?(this.selected=e,this.selected):e||!i||o||0!==this.defaultOptionIndex&&!this.defaultOptionIndex?[]:(this.testFinderService.filterObjInArrObjs(this.selected,this.options[this.defaultOptionIndex])&&this.selected.push(this.options[this.defaultOptionIndex]),this.selected)}_setSelectValue(e){var i,o;this.testFinderService.filterObjInArrObjs(this.selected,e)||(this.selected=e,null===(i=this.selectSearchForm.get("SelectControl"))||void 0===i||i.setValue(e),this.selectedEvent.emit(this.selected),this.multiple&&(this.selected.length===this.options.length?this.multiAllOption.select():this.multiAllOption.deselect()),!this.multiple&&!this._isOptionAll(e)&&(null===(o=this.selectSearchForm.get("SearchControl"))||void 0===o||o.setValue(this.displayValue(e))))}_filter(e){return!e||e?.toLowerCase().includes("all")?this.options:(this._filterValue=e.toLowerCase(),this._filteredList=this.options.filter(i=>{var o;return-1!==this.displayValue(i).toLowerCase().indexOf(null!==(o=this._filterValue)&&void 0!==o?o:"")}),this._filteredListLength=this._filteredList.length,this._filteredList)}_showClearButton(e){return e.length>0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.qu),t.Y36(t.sBO),t.Y36(P8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-search-dropdown"]],viewQuery:function(e,i){if(1&e&&(t.Gf(N8,5),t.Gf(D8,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.searchDropdownInput=o.first),t.iGM(o=t.CRH())&&(i.multiAllOption=o.first)}},inputs:{label:"label",options:"options",selected:"selected",selectPlaceholder:"selectPlaceholder",extractValue:"extractValue",disableSelectSearch:"disableSelectSearch",searchPlaceholder:"searchPlaceholder",defaultOptionIndex:"defaultOptionIndex",panelClass:"panelClass",tooltipMessage:"tooltipMessage",setInitialValue:"setInitialValue",multiple:"multiple"},outputs:{selectedEvent:"selectedEvent",formValidEvent:"formValidEvent"},decls:1,vars:1,consts:[["class","new-select-design",3,"formGroup","ngClass",4,"ngIf"],[1,"new-select-design",3,"formGroup","ngClass"],["appearance","outline",3,"ngClass"],["formControlName","SelectControl",3,"ngClass","panelClass","disableOptionCentering","disabled","multiple","placeholder","selectionChange","openedChange"],[4,"ngIf"],["class","search-option",4,"ngIf"],[3,"value","click","keyup.enter","keyup.space",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"search-option"],["name","search",2,"height","21px!important","width","21px!important","margin-right","2px"],["tabindex","0","type","text","matInput","","formControlName","SearchControl","autocomplete","off",1,"search-input",3,"placeholder"],["searchDropdownInput",""],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","class","clear-icon","aria-label","Clear",3,"click",4,"ngIf"],["azt-track-service","filter-multiple-select-WoiRt2u4Ct1","matSuffix","","aria-label","Clear",1,"clear-icon",3,"click"],[3,"value","click","keyup.enter","keyup.space"],["multiAllOption",""],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["azt-track-service","filter-multiple-select-wD4mllrERlL",3,"value","click","keyup.enter","keyup.space"],["matOption",""],[1,"no-results"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space",4,"ngFor","ngForOf"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click","keyup.enter","keyup.space"]],template:function(e,i){1&e&&t.YNc(0,G8,11,24,"form",0),2&e&&t.Q6J("ngIf",!!i.options&&i.options.length>0)},dependencies:[E.mk,E.sg,E.O5,Bi.ey,qe.Hw,Bs.Nt,Fn.KE,Fn.hX,Fn.R9,no.gD,no.$L,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Pe.M,f.Nh5,E.Ov,_t.bT],styles:[".search-input[_ngcontent-%COMP%]{border:none!important;outline:none!important}.new-select-design[_ngcontent-%COMP%]{padding:0!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:700;color:#63738a}input[_ngcontent-%COMP%]{font-size:16px}.se-search[_ngcontent-%COMP%]{color:#008cff;font-size:22px}ngk-icon[_ngcontent-%COMP%]{cursor:pointer;fill:#0000008a}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:#000!important}.no-results[_ngcontent-%COMP%]{display:block;line-height:1;font-size:14px;margin:1rem;text-align:center}.search-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:15px 10px}.search-option[_ngcontent-%COMP%]   .ngk-search-icon[_ngcontent-%COMP%], .search-option[_ngcontent-%COMP%]   .se-search[_ngcontent-%COMP%]{margin-right:10px;margin-left:-16px}.search-option[_ngcontent-%COMP%]   .ngk-clear-icon[_ngcontent-%COMP%]{align-self:flex-end;margin-right:-16px}mat-error[_ngcontent-%COMP%]{color:#d6312b;margin-top:5px;font-size:16px}.custom-selected-text[_ngcontent-%COMP%]  .mat-select-placeholder{color:#000!important;opacity:1!important}"]}),n})();function V8(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function X8(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function t7(n,a){1&n&&(t.TgZ(0,"span",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const xm=function(n,a){return{selected:n,last:a}};function e7(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw(2);let c;return t.KtG(l.handleClickFolder(null!==(c=s.id)&&void 0!==c?c:0,r,s.name||"Th\u01b0 m\u1ee5c "+s.id,l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==s.id&&1==l.state.itemSelecteds[r].type,s.shareType))}),t.O4$(),t.TgZ(1,"svg",19),t._UZ(2,"path",20),t.qZA(),t.kcU(),t.TgZ(3,"span",21),t.YNc(4,V8,3,3,"span",2),t.YNc(5,X8,2,1,"span",2),t.qZA(),t.YNc(6,t7,3,3,"span",22),t._UZ(7,"mat-spinner",23),t.qZA()}if(2&n){const e=a.$implicit,i=t.oxw(2).index,o=t.oxw(2);t.Q6J("ngClass",t.WLB(7,xm,o.state.itemSelecteds.length>0&&o.state.itemSelecteds[i]&&o.state.itemSelecteds[i].id==e.id&&1==o.state.itemSelecteds[i].type,o.state.itemSelecteds.length>0&&i==o.state.itemSelecteds.length-1&&o.state.itemSelecteds[i].id==e.id&&1==o.state.itemSelecteds[i].type)),t.xp6(3),t.Q6J("title",e.name),t.xp6(1),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id),t.xp6(1),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function n7(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",25),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2).index,l=t.oxw(2);return t.KtG(l.handleClickFile(s,r,s.name||"T\xean \u0111\u1ec1 thi",l.state.itemSelecteds.length>0&&r==l.state.itemSelecteds.length-1&&l.state.itemSelecteds[r].id==(null==s.exam?null:s.exam.id)&&2==l.state.itemSelecteds[r].type))}),t.TgZ(2,"div",26),t.O4$(),t.TgZ(3,"svg",27),t._UZ(4,"path",28),t.qZA()(),t.kcU(),t.TgZ(5,"span",21),t._uU(6),t.qZA(),t._UZ(7,"mat-spinner",23),t.qZA(),t.BQk()}if(2&n){const e=a.$implicit,i=t.oxw(2).index,o=t.oxw(2);t.xp6(1),t.Q6J("ngClass",t.WLB(5,xm,o.state.itemSelecteds.length>0&&o.state.itemSelecteds[i]&&o.state.itemSelecteds[i].id==(null==e.exam?null:e.exam.id)&&2==o.state.itemSelecteds[i].type,o.state.itemSelecteds.length>0&&i==o.state.itemSelecteds.length-1&&o.state.itemSelecteds[i].id==(null==e.exam?null:e.exam.id)&&2==o.state.itemSelecteds[i].type)),t.xp6(4),t.Q6J("title",(null==e.exam?null:e.exam.name)||(null==e.homework?null:e.homework.className)||""),t.xp6(1),t.hij(" ",(null==e.exam?null:e.exam.name)||(null==e.homework?null:e.homework.className)||""," "),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function i7(n,a){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16),t.YNc(2,e7,8,10,"div",17),t.YNc(3,n7,8,8,"ng-container",10),t.qZA()()),2&n){const e=t.oxw(),i=e.last,o=e.$implicit,s=t.oxw(2);t.Q6J("width",300)("id",!s.state.showPreview&&i?"col-last":""),t.xp6(2),t.Q6J("ngForOf",o.categoryObjs),t.xp6(1),t.Q6J("ngForOf",o.documentObjs)}}function o7(n,a){if(1&n&&(t.TgZ(0,"div",29)(1,"div",16)(2,"div",30),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(3);t.Q6J("id",e.state.showPreview?"":"col-last")("width",300),t.xp6(3),t.Oqu(t.lcZ(4,3,"lang_auto_thu_muc_trong"))}}function a7(n,a){if(1&n&&(t.ynx(0),t.YNc(1,i7,4,4,"div",13),t.YNc(2,o7,5,5,"ng-template",null,14,t.W1O),t.BQk()),2&n){const e=a.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.categoryObjs.length>0||e.documentObjs.length>0)("ngIfElse",i)}}function s7(n,a){if(1&n&&(t.TgZ(0,"div",29)(1,"div",16)(2,"div",31),t._uU(3),t.qZA()()()),2&n){const e=t.oxw(2);t.Q6J("id",e.state.showPreview?"":"col-last")("width",300),t.xp6(3),t.Oqu("[ERROR] "+e.state.error)}}function r7(n,a){if(1&n&&(t.TgZ(0,"div",32)(1,"div",33),t._UZ(2,"azt-preview-list-question",34),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("exam",e.exam)("questionList",e.questionList)("filterTag",e.questionTag)("filterType",e.questionType)}}function l7(n,a){if(1&n&&(t.ynx(0),t.YNc(1,a7,4,2,"ng-container",10),t.YNc(2,s7,4,3,"div",11),t.YNc(3,r7,3,4,"div",12),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.state.dataLevels),t.xp6(1),t.Q6J("ngIf",e.state.error),t.xp6(1),t.Q6J("ngIf",e.state.showPreview)}}function c7(n,a){if(1&n&&(t._uU(0),t.ALo(1,"mytranslate"),t.TgZ(2,"b"),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.hij(" ",t.lcZ(1,2,"lang_auto_so_cau_da_chon"),":\xa0"),t.xp6(3),t.Oqu(e.calSelectings)}}function u7(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(2);return t.KtG(o.tongleTooltip())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.tooltipRandom)}}function d7(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.YNc(1,u7,2,1,"span",36),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",37),t.NdJ("focus",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.showTooltip=!0)})("keyup.enter",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.handlePressEnter(o))})("ngModelChange",function(o){t.CHM(e);const s=t.oxw();return t.KtG(s.random=o)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showTooltip&&e.state.itemSelecteds.length>0),t.xp6(2),t.Oqu(t.lcZ(4,3,"lang_auto_nhap_so_cau_can_lay")),t.xp6(2),t.Q6J("ngModel",e.random)}}const _7=function(n){return{loading:n}};let m7=(()=>{class n extends st.Q{constructor(e,i){super(),this.store=e,this.examService=i,this.closeTestFinder=new t.vpe,this.isFirstTime=!1,this.form=new h.nJ({}),this.random=0,this.usedIds=[],this.showTooltip=!0,this.questionList=[],this.loadingPreview=!1,this.questionType=[],this.questionTag=[],this.questionTypeList=[{key:"TN",value:"Tr\u1eafc nghi\u1ec7m"},{key:"TL",value:"T\u1ef1 lu\u1eadn"},{key:"\u0110T",value:"\u0110i\u1ec1n t\u1eeb"}],this.questionTagList=[{key:"NB",value:"Nh\u1eadn bi\u1ebft"},{key:"TH",value:"Th\xf4ng hi\u1ec3u"},{key:"VD",value:"V\u1eadn d\u1ee5ng"},{key:"VDC",value:"V\u1eadn d\u1ee5ng cao"}]}changeTypeQuestion(e){this.questionType=e}changeTagQuestion(e){this.questionTag=e}onKeydownHandler(e){"Escape"==e.key&&this.closeTestFinder.emit(void 0)}handlePressEnter(e){0==this.state.itemSelecteds.length||this.state.loading||this.handleClickChon()}handleClickFolder(e,i,o,s=!1,r){this.showTooltip=!0,!this.state.loading&&(s||(this.store.dispatch(Mt.nm()),this.store.dispatch(Mt.m_({item:{type:1,id:e,level:i,name:o,shareType:r}}))))}get tooltipRandom(){let e="",i="",o="",s="",r="";return this.commonService.getTranslate("lang_auto_lay_ngau_nhien_so_cau_hoi_o").subscribe(l=>{e=l}),this.commonService.getTranslate("lang_auto_nhom_thuong").subscribe(l=>{i=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_thu_muc_thuong").subscribe(l=>{o=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_de_thi_thuong").subscribe(l=>{s=l.toUpperCase()}),this.commonService.getTranslate("lang_auto_dang_chon").subscribe(l=>{r=l}),e+" "+(void 0!==this.state.chosenGroup?i:0==this.state.itemSelecteds.length||1==this.state.itemSelecteds[this.state.itemSelecteds.length-1].type?o:s)+" "+r}handleClickFile(e,i,o,s=!1,r){var l;if(this.showTooltip=!0,!this.state.loading&&!s&&e.exam){this.loadingPreview=!0;let c=null!==(l=e.exam.id)&&void 0!==l?l:0;this.store.dispatch(Mt.m_({item:{type:2,id:c,level:i,name:o,shareType:r}})),this.fectchPreview(c)}}fectchPreview(e){this.examService.apiExamGetQuestionsIdGet(e).subscribe(i=>{var o,s,r,l;if(i.success){this.exam=null===(o=i.data)||void 0===o?void 0:o.examObj;let c=null!==(r=this.commonService.castJsonToClassObjs(Xo.v,JSON.stringify((null===(s=i.data)||void 0===s?void 0:s.questionObjs)||[])))&&void 0!==r?r:[];this.questionList=null!==(l=this.commonService.castJsonToClassObjs(y8,JSON.stringify(c)))&&void 0!==l?l:[],this.loadingPreview=!1}else this.loadingPreview=!1})}handleClickCancel(){this.closeTestFinder.emit(void 0)}handleGetAllQuestionStringCode(){this.calSelectings<1&&this.random<1&&this.state.chosenGroup&&this.questionList.forEach(e=>{var i;(null===(i=e.groupInfo)||void 0===i?void 0:i.groupId)==this.state.chosenGroup&&(e.isSelected=!0)}),this.calSelectings<1&&this.random<1&&!this.state.chosenGroup&&this.questionList.forEach(e=>{e.isSelected=!0})}handleClickChon(){var e,i;this.handleGetAllQuestionStringCode();let o="",s="",r="",l="",c="";if(this.commonService.getTranslate("lang_auto_nhom").subscribe(p=>{o=p}),this.commonService.getTranslate("lang_auto_cau_thuong").subscribe(p=>{s=p}),this.commonService.getTranslate("lang_auto_lay_tieu_de").subscribe(p=>{r=p}),this.commonService.getTranslate("lang_auto_lay_ngau_nhien").subscribe(p=>{l=p}),this.commonService.getTranslate("lang_auto_lay_toan_bo").subscribe(p=>{c=p}),this.calSelectings>0){this.store.dispatch(Mt.qY({questions:this.questionList}));let p=[],b=0;for(let y=0;y<this.state.usedQuestionLocations.length;y++){const C=this.state.usedQuestionLocations[y];let I=[],D=0;for(let U=0;U<C.length;U++){const B=C[U];let q=null!==(e=this.commonService.myTranslateInstant(this.cleanName(B.name)))&&void 0!==e?e:this.cleanName(B.name);if(1==B.type&&I.push(`[@C${B.id}:${(B.shareType&&"user"===B.shareType?`:${B.shareType}-`:null)??""}${q}]`),2==B.type&&I.push(`[@T${B.id}:${q}]`),3==B.type){let et=this.questionList.filter(Q=>{var V,Y;return(null===(V=Q.groupInfo)||void 0===V?void 0:V.groupId)&&(null===(Y=Q.groupInfo)||void 0===Y?void 0:Y.groupId)==parseInt(q)}).length;et&&I.push(`[@G${q}:${et}-${o} ${q}]`),D=parseInt(q)}4==B.type&&I.push(`[@Q${B.id}:${q.replace("[PDFv2] ","")}]`)}if(0!=D&&D!=b){let U=[...I];U[U.length-1]=`[${r}]`,p.push(U.join(".")),b=D}p.push(I.join("."))}return void this.closeTestFinder.emit(p)}const u=this.state.itemSelecteds;let d=[];for(let p=0;p<u.length;p++){const b=u[p];let y=null!==(i=this.commonService.myTranslateInstant(this.cleanName(b.name)))&&void 0!==i?i:this.cleanName(b.name);1==b.type&&d.push(`[@C${b.id}:${(b.shareType&&"user"===b.shareType?`:${b.shareType}-`:null)??""}${y}]`),2==b.type&&d.push(`[@T${b.id}:${y}]`)}if(this.questionType.length>0&&this.questionType.forEach(p=>{d.push(`[@F:${p.key}]`)}),this.questionTag.length>0&&this.questionTag.forEach(p=>{d.push(`[@F:${p.key}]`)}),this.state.chosenGroup){let p=this.questionList.filter(b=>{var y;return(null===(y=b.groupInfo)||void 0===y?void 0:y.groupId)==this.state.chosenGroup}).length;if(d.push(`[@G${this.state.chosenGroup}:${p}-${o} ${this.state.chosenGroup}]`),this.random>0)d.push(`[${l} ${this.random} ${s}]`);else{let b=this.questionList.filter(y=>{var C;return(null===(C=y.groupInfo)||void 0===C?void 0:C.groupId)==this.state.chosenGroup}).length;d.push(`[${c} ${b} ${s}]`)}}else if(this.random>0)d.push(`[${l} ${this.random} ${s}]`);else{if(!(this.questionList.length>0))return void this.showErrorSnack("lang_auto_ban_can_nhap_so_luong_it_nhat_1_cau");d.push(`[${c} ${this.questionList.length} ${s}]`)}let m=this.replaceFilterCodeStr(d);this.closeTestFinder.emit([m])}replaceFilterCodeStr(e){let i="";return e.forEach((o,s)=>{s<e.length-1?o.includes("[@F:")?i+=o+",":i+=o+".":i.includes("[@F:")?(i=i.substring(0,i.lastIndexOf(",")),i+="."+o):i+=o}),i}get calSelectings(){return this.questionList.filter(e=>e.isSelected).length}cleanName(e){let i=e;return i=i.replaceAll(/[\[\],\.\-]+/g,""),i}tongleTooltip(){this.showTooltip=!this.showTooltip}ngAfterViewInit(){if(this.state.itemSelecteds.length>0){let e=this.state.itemSelecteds[this.state.itemSelecteds.length-1];2==e.type&&this.fectchPreview(e.id)}}ngOnInit(){this.store.dispatch(Mt.WR({isFirstTime:this.isFirstTime})),this.store.dispatch(Mt.AL()),this.subscriptions.add(this.store.select(hm.Y).subscribe(e=>{this.state=e,this.usedIds=this.state.usedQuestions.map(i=>i.id||0)})),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ps.yh),t.Y36(Bt.Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-finder"]],hostBindings:function(e,i){1&e&&t.NdJ("keydown",function(s){return i.onKeydownHandler(s)},!1,t.evT)},inputs:{isFirstTime:"isFirstTime"},outputs:{closeTestFinder:"closeTestFinder"},features:[t.qOj],decls:23,vars:35,consts:[["azt-track-service","test-finder-De2lZomoHz6",1,"close-button","clickable",3,"matTooltip","click"],["id","grid-parent",1,"grid-parent",3,"ngClass"],[4,"ngIf"],["id","examSaveBtns",1,"bg-slate-200","dark:bg-darkmode-400"],[1,"left","test-finder",3,"formGroup"],[2,"margin-left","3px",3,"selectPlaceholder","searchPlaceholder","options","selected","multiple","selectedEvent"],[1,"right"],["manualSelect",""],["class","random",4,"ngIf","ngIfElse"],["azt-track-service","test-finder-cpsVY9x_hjE",1,"btn","btn-primary","w-24","ml-3",3,"disabled","click"],[4,"ngFor","ngForOf"],["aztColResizable","",3,"id","width",4,"ngIf"],["class","preview-pane","id","col-last",4,"ngIf"],["aztColResizable","",3,"width","id",4,"ngIf","ngIfElse"],["emptyCol",""],["aztColResizable","",3,"width","id"],["colLeftContent",""],["azt-track-service","test-finder-s_cSxPWj6","class","doc-item doc-item-cate clickable mb-2",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-s_cSxPWj6",1,"doc-item","doc-item-cate","clickable","mb-2",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"cat-name",3,"title"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["color","accent",3,"strokeWidth","diameter"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","test-finder-1CILmbro_M",1,"doc-item","doc-item-file","clickable","mb-2",3,"ngClass","click"],[1,"file-icon"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","text-pending"],["d","M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708z"],["aztColResizable","",3,"id","width"],[1,"text-center","alert","alert-info"],[1,"text-center","alert","alert-danger"],["id","col-last",1,"preview-pane"],[1,"preview-content"],[3,"exam","questionList","filterTag","filterType"],[1,"random"],["azt-track-service","test-finder-ZvOINp82Nc","class","qv_tooltip",3,"click",4,"ngIf"],["type","text","appOnlyNumber","","name","random","id","random",1,"form-control",3,"ngModel","focus","keyup.enter","ngModelChange"],["azt-track-service","test-finder-ZvOINp82Nc",1,"qv_tooltip",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-icon",0),t.NdJ("click",function(){return i.handleClickCancel()}),t.ALo(1,"mytranslate"),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,l7,4,3,"ng-container",2),t.qZA(),t.TgZ(5,"div",3)(6,"form",4)(7,"b"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(s){return i.changeTagQuestion(s)}),t.ALo(11,"mytranslate"),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(s){return i.changeTypeQuestion(s)}),t.ALo(14,"mytranslate"),t.ALo(15,"mytranslate"),t.qZA()(),t.TgZ(16,"div",6),t.YNc(17,c7,4,4,"ng-template",null,7,t.W1O),t.YNc(19,d7,6,5,"div",8),t.TgZ(20,"button",9),t.NdJ("click",function(){return i.handleClickChon()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e){const o=t.MAs(18);t.s9C("matTooltip",t.lcZ(1,19,"lang_auto_dong")),t.xp6(3),t.Q6J("ngClass",t.VKq(33,_7,i.state.loading)),t.xp6(1),t.Q6J("ngIf",i.state.dataLevels.length>0),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(2),t.hij("",t.lcZ(9,21,"lang_testbank_testted_list_sort"),": "),t.xp6(2),t.Q6J("selectPlaceholder",t.lcZ(11,23,"lang_auto_select_tag"))("searchPlaceholder",t.lcZ(12,25,"lang_auto_search_tag"))("options",i.questionTagList)("selected",i.questionTag)("multiple",!0),t.xp6(3),t.Q6J("selectPlaceholder",t.lcZ(14,27,"lang_auto_select_type"))("searchPlaceholder",t.lcZ(15,29,"lang_auto_search_type"))("options",i.questionTypeList)("selected",i.questionType)("multiple",!0),t.xp6(6),t.Q6J("ngIf",0==i.calSelectings)("ngIfElse",o),t.xp6(1),t.Q6J("disabled",0==i.state.itemSelecteds.length||i.state.loading),t.xp6(1),t.Oqu(t.lcZ(22,31,"lang_auto_chon"))}},dependencies:[E.mk,E.sg,E.O5,qe.Hw,b_.Ou,Le.gM,h._Y,h.Fj,h.JJ,h.JL,h.On,h.sg,E8,Bo.Y,L8,W8,_t.bT],styles:['.close-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;color:#9c9c9c;z-index:10}.close-button[_ngcontent-%COMP%]:hover{color:#747474;cursor:pointer}.grid-parent[_ngcontent-%COMP%]{min-width:300;width:100%;min-height:150px;height:100%;display:flex;flex-wrap:nowrap;overflow-y:auto;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:orange;margin-right:5px;width:40px;height:40px;min-width:40px;font-size:40px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:5px;padding:5px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{width:40px;min-width:40px;margin-right:5px;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .examTableIconObj[_ngcontent-%COMP%]{position:absolute;top:3px;left:5px;width:20px;background-image:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/titlePublishExam.png);background-position:top;background-size:cover;overflow:hidden;height:20px}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]{background-color:#7497c2}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{color:#fff}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected.last[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]{flex:1;min-width:800px;padding:15px;overflow-y:auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{width:100%;max-width:700px;height:100%;margin:0 auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .question-item[_ngcontent-%COMP%]{border:1px solid rgb(231,231,231)}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:50px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:15px;flex:auto;display:flex;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:right;align-items:center;padding-right:15px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:1px solid #eeeeee;margin-left:5px;padding:5px;width:100px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]{display:flex;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#18a2b8;margin-right:.25rem}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin-left:5px;width:auto!important}mat-spinner[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 570px){#examSaveBtns[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;padding-top:5px;padding-bottom:5px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:block;margin-bottom:5px;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex:none}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px!important}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-right:30px;padding-left:30px}}.qv_tooltip[_ngcontent-%COMP%]{bottom:47px;right:110px;display:flex;font-size:11px;justify-content:space-between;position:absolute;z-index:999;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:29px;left:298px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}']}),n})();var p7=A(63064),h7=A(79036),g7=A(96442),$u=A(86642),f7=A(99050),x7=A(25721),v7=A(58349);function b7(n,a){1&n&&(t.TgZ(0,"div"),t.Hsn(1),t.qZA())}const y7=["*"];let w7=(()=>{class n extends st.Q{constructor(e){super(),this.testMarketQuestionService=e,this.applyType="",this.hasPermission=!1}checkPermissionCallApi(){this.subscriptions.add(this.testMarketQuestionService.apiTestMarketQuestionsPermissionGet(this.applyType).subscribe(e=>{var i,o,s;1==e.success?(this.hasPermission=null!==(o=null===(i=e.data)||void 0===i?void 0:i.obj)&&void 0!==o&&o,this.successStatusObj()):this.errorStatusObj(null!==(s=e.message)&&void 0!==s?s:"")}))}ngOnInit(){this.checkPermissionCallApi()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Bt.Q_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-permission-checking"]],inputs:{applyType:"applyType"},features:[t.qOj],ngContentSelectors:y7,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,b7,2,0,"div",0)),2&e&&t.Q6J("ngIf",i.hasPermission)},dependencies:[E.O5],encapsulation:2}),n})();var k7=A(61896),C7=A(54968);const T7=["editorContainer"];let A7=(()=>{class n{constructor(e,i,o,s,r){this.cdnService=e,this.documentService=i,this.examService=o,this.infoService=s,this.commonService=r,this.loaderScript=document.createElement("script"),this.config="",this.onInit=new t.vpe,this.returnImageMap=new t.vpe}initMonacoAction(){return new Promise(e=>{const i="assets/monaco-editor/min/vs";"object"!=typeof window.monaco?(this.loaderScript.type="text/javascript",this.loaderScript.setAttribute("async","false"),this.loaderScript.src=`${i}/loader.js`,this.loaderScript.addEventListener("load",()=>{window.require.config({paths:{vs:`${i}`}}),window.require(["vs/editor/editor.main"],()=>{e()})}),document.body.appendChild(this.loaderScript)):e()})}ngAfterViewInit(){this.initMonacoAction().then(()=>{this.initMonaco()})}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0),this.loaderScript.parentNode&&this.loaderScript.parentNode.removeChild(this.loaderScript)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(le.U),t.Y36(Bt.Zg),t.Y36(Bt.Oe),t.Y36(Bt.CM),t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(1&e&&t.Gf(T7,7),2&e){let o;t.iGM(o=t.CRH())&&(i._editorContainer=o.first)}},inputs:{config:"config"},outputs:{onInit:"onInit",returnImageMap:"returnImageMap"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class ir{constructor(a){this.name=a}}class S7 extends ir{run(a){let e=a.getModel(),i=a.getSelection(),o={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=e.getValueInRange(o);a.executeEdits("",[{range:o,text:`<code>${s}</code>`}]),a.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+7+s.length})}}class O7 extends ir{run(a){let e=a.getPosition(),o="________";a.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:o}]),a.setPosition({lineNumber:e.lineNumber,column:e.column+o.length})}}class E7 extends ir{run(a){let e=a.getModel(),i=a.getSelection(),o={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=e.getValueInRange(o);a.executeEdits("",[{range:o,text:`\\( ${s} \\)`}]),a.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+3+s.length})}}class Ku extends ir{constructor(a,e){super(a),this.tag=e}run(a){let e=a.getModel(),i=a.getSelection(),o={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},s=e.getValueInRange(o),r=s;s.indexOf(`!${this.tag}`)>=0?(r=r.replaceAll(`!${this.tag}`,""),r=r.replaceAll(/\[:\$(([^\$]|\$[^\]])+)\$\]/g,"$1")):r=s.startsWith("[!")?`[!${this.tag}`+s.substring(1):`[!${this.tag}:$${s}$]`,a.executeEdits("",[{range:o,text:r}])}}class M7 extends ir{run(a){let e=a.getSelection(),i=a.getModel(),o={startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,startColumn:e.startColumn,endColumn:e.endColumn},s=i.getValueInRange(o);/^\[\*?[A-H]:[^\]]+\]$/.test(s)?(s=s.substring(s.indexOf(":")+1,s.length-2),a.executeEdits("",[{range:o,text:s}])):a.executeEdits("",[{range:o,text:`[A:${s}]`}])}}class I7{constructor(){this.placeHolderRemoved=!1,this.decorations=[],this.parseChange=!0,this.hasError=!1}setIntellisense(a){this.azotaIntel=a}setSingleMode(a){var e;null===(e=this.azotaIntel)||void 0===e||e.setSingleMode(a)}setLang(a){var e;this.lang=a,null===(e=this.azotaIntel)||void 0===e||e.setLang(a)}registerPlugin(a,e){this._editor&&this._editor.addAction({id:a.name,label:a.name,keybindings:[this.monaco.KeyMod.CtrlCmd|e],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(i){a.run(i)}})}getCurLine(){return this._editor.getPosition().lineNumber}getCurLineText(){let a=this._editor.getPosition().lineNumber;return this._editor.getModel().getLineContent(a)}getLineText(a){return this._editor.getModel().getLineContent(a)}getCurQuest(){if(this.azotaIntel){let a=this.getCurLine()-1;return this.azotaIntel.getCurPos(a,50)[0]}}goToLine(a){this._editor.focus(),this._editor.setPosition({lineNumber:a,column:0}),this._editor.revealLineNearTop(a+1)}setPosition(a,e){let i={lineNumber:a,column:e};this._editor.focus(),this._editor.setPosition(i),this._editor.revealPositionNearTop(i)}insertDetails(a,e){let i=this.getLineText(a),s=[],r=i.replaceAll(/\s+/g," ").split("].[");r.splice(r.length-1);let l=r.join("].[")+"]";for(const c of e)s.push(l+`.[@Q${c}]`);if(s.length>0){let c=s.join("\n");this._editor.executeEdits("",[{range:{startLineNumber:a,endLineNumber:a,startColumn:0,endColumn:i.length+2},text:c}]),this._editor.setSelection({startLineNumber:a,endLineNumber:a,startColumn:0,endColumn:0})}}setError(a){this.hasError=a.length>0;let e=[],i=this._editor.getModel();for(const o of a){let s=o.split("|"),r=+s[0],l=s[1],c=i.getLineContent(r);e.push({startLineNumber:r,endLineNumber:r,startColumn:0,endColumn:c.length+1,message:l})}this.monaco.editor.setModelMarkers(i,"",e)}init(a,e,i,o){var s,r,l,c,u,d,m,p,b,y,C,I,D,U;i&&this.setLang(i);let B=this;this.monaco=a;let q="azota",R=a.languages.getLanguages().filter(lt=>lt.id==q),et=R&&R.length>0;et||(a.languages.register({id:q}),a.languages.setMonarchTokensProvider(q,{operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^\s*C\xe2u\s*\d+/,"question-label"],[/^\s*Question\s*\d+/,"question-label"],[/\s+\*?[A-Ha-h][\.\)]/,"answer-label"],[/^\s*\*?[A-Ha-h][\.\)]/,"answer-label"],[/\[[^\]]+\]/,"expression"],[/^\s*L\u1eddi gi\u1ea3i\s*$/,"token"],[/^\s*GLOSSARY\s*$/,"token"],[/^\s*B\u1ea2NG \u0110\xc1P \xc1N\s*$/,"token"],[/^\s*B\u1ea3ng \u0111\xe1p \xe1n\s*$/,"token"],[/^\s*\-+H\u1ebeT\-+\s*$/,"token"],[/^\s*H\u01b0\u1edbng d\u1eabn gi\u1ea3i\s*$/,"token"],[/^\s*H\u01af\u1edaNG D\u1eaaN GI\u1ea2I\s*$/,"token"],[/^\s*Ch\u1ecdn\s*[A-Ha-h]\s*$/,"choose"],[/^\s*Answer keys\s*$/,"token"],[/^\s*ANSWER KEYS\s*$/,"token"],[/^\s*Answer key\s*$/,"token"],[/^\s*ANSWER KEY\s*$/,"token"],[/^\s*Answer Section\s*$/,"token"],[/^\s*\-+THE END\-+\s*$/,"token"],[/^\s*\-+END\-+\s*$/,"token"],[/^\s*Instructions\s*$/,"token"],[/^\s*INSTRUCTIONS\s*$/,"token"],[/^\s*Choose\s*[A-Ha-h]\s*$/,"choose"],[/^[IVX]+\s*[\.:].*$/,"section"],[/^Section+\s*[\dA-K]+[\.:].*$/,"section"],[/^Part+\s*[\dA-KVX]+[\.:].*$/,"section"],[/^Ph\u1ea7n+\s*[\dA-KVX]+[\.:].*$/,"section"],[/\\[a-z][a-z0-9]+/,"latex"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}}));let Q="dark"==localStorage.getItem("mode_ui");a.editor.defineTheme("azotaTheme",{base:Q?"vs-dark":"vs",inherit:!0,rules:[{token:"question-label",foreground:Q?"569cd6":"3437eb",fontStyle:"bold"},{token:"answer-label",foreground:Q?"FF6464":"ff0000",fontStyle:"bold"},{token:"expression",foreground:"ab2428"},{token:"operator",foreground:"ab2428"},{token:"latex",foreground:"3437eb"},{token:"keyword",foreground:"2504da"},{token:"keyword.predefined",foreground:"2504da"},{token:"token",foreground:"8f4106",fontStyle:"bold"},{token:"choose",foreground:"000000",fontStyle:"bold"},{token:"section",foreground:"000000",fontStyle:"bold"}],colors:{"editor.foreground":Q?"#d4d4d4":"#000000","editor.background":Q?"#25304C":"#ffffff"}}),et||(a.languages.setLanguageConfiguration(q,{brackets:[["{","}"],["[","]"],["(",")"],["\\(","\\)"],["[*","*]"]]}),a.languages.registerCompletionItemProvider(q,{triggerCharacters:["@",".",","],provideCompletionItems:function(lt,Et){return(0,so.mG)(this,void 0,void 0,function*(){if(!B.azotaIntel)return{suggestions:[]};let It=lt.getWordUntilPosition(Et),wt=lt.getLineContent(Et.lineNumber);return{suggestions:(yield B.azotaIntel.getSuggestions(Et.lineNumber-1,Et.column-1,It.word,wt)).map(Rt=>{let re,ni,Kt=Rt.split("|"),Dt=a.languages.CompletionItemKind.Text,Ut=Kt[0];if(Kt.length>2){switch(Kt[2]){case"file":Dt=a.languages.CompletionItemKind.File,Ut="2"+Kt[0];break;case"folder":Dt=a.languages.CompletionItemKind.Folder,Ut="1"+Kt[0];break;case"class":Dt=a.languages.CompletionItemKind.Class,Ut="3"+Kt[3];break;case"function":Dt=a.languages.CompletionItemKind.Function,Ut="3"+Kt[3];break;case"snippet":Dt=a.languages.CompletionItemKind.Module,re=a.languages.CompletionItemInsertTextRule.InsertAsSnippet,Ut="0"}ni={id:"editor.action.triggerSuggest",title:""}}return{label:Kt[0],kind:Dt,insertText:Kt[1],insertTextRules:re,sortText:Ut,command:ni,documentation:{supportHtml:!0,value:Kt[4]}}})}})}}));let Y=a.editor.create(e,{theme:"azotaTheme",language:q,wordBasedSuggestions:!1,minimap:{enabled:!1},overviewRulerLanes:0,wordWrap:"on",tabSize:4,readOnly:o}),at=Y.getModel();Y.onMouseDown(function(lt){B.onChangePosCalback&&lt.target.position&&B.onChangePosCalback(lt.target.position.lineNumber,lt.target.position.column),Y.focus()});let tt={domNode:null,getId:function(){return"my.content.widget"},getDomNode:function(){var lt,Et;return this.domNode||this.domNode||(this.domNode=document.createElement("div"),this.domNode.innerHTML=null!==(Et=null===(lt=B.lang)||void 0===lt?void 0:lt.myTranslateInstant("azt_lang_enter_at_to_choose_from_bank"))&&void 0!==Et?Et:"Nh\u1eadp @ \u0111\u1ec3 ch\xe8n t\u1eeb ng\xe2n h\xe0ng c\xe1 nh\xe2n",this.domNode.style.color="grey",this.domNode.style.width="250px"),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:2},preference:[a.editor.ContentWidgetPositionPreference.BELOW]}}};Y.addContentWidget(tt),at.onDidChangeContent(lt=>{let It=at.getValue().replaceAll("\r","").split("\n");this.placeHolderRemoved||(Y.removeContentWidget(tt),this.placeHolderRemoved=!0);let wt=lt.changes[0].range.startLineNumber,jt=wt<=It.length?at.getLineContent(wt):"";jt.startsWith("@[@")&&this.runEditAction([lt.changes[0].range.startLineNumber-1+"|0|3|[@"],Y,!1),jt.endsWith(".,")&&this.runEditAction([`${lt.changes[0].range.startLineNumber-1}|${jt.length-2}|${jt.length}|,`],Y,!1),this.azotaIntel&&this.parseChange?this.azotaIntel.onChange({startLineNumber:lt.changes[0].range.startLineNumber,endLineNumber:lt.changes[0].range.endLineNumber,startColumn:lt.changes[0].range.startColumn,endColumn:lt.changes[0].range.endColumn,text:lt.changes[0].text},B,this.onChangeCalback):this.parseChange&&this.onChangeCalback&&this.onChangeCalback(It,null)});let rt=Y.addCommand(0,function(lt,Et,It){if(B.onInsertDetailsCb){let wt=It.replaceAll(/\s+/g," ").trim();B.onInsertDetailsCb(wt,Et)}},""),vt=Y.addCommand(0,function(lt,Et,It){if(B.onRefreshCalback){let wt=It.replaceAll(/\s+/g," ").trim();B.onRefreshCalback(wt,Et)}},""),gt=Y.addCommand(0,function(lt,Et,It){if(B.onInsertQuestTextCb){let wt=It.replaceAll(/\s+/g," ").trim();B.onInsertQuestTextCb(wt,Et)}},""),ct=new Map;return o||(ct.set("insertDirectQuest",rt),ct.set("insertQuestText",gt)),ct.set("randomAgain",vt),et||a.languages.registerCodeLensProvider(q,{provideCodeLenses:function(lt,Et){let It=lt.getValue().split("\n");return B.azotaIntel?{lenses:B.azotaIntel.getCodeLens(It).map(jt=>{let Rt=jt.split("|"),Kt=+Rt[0]+1;return{range:{startLineNumber:Kt,startColumn:1,endLineNumber:Kt,endColumn:1},id:Rt[1],command:{id:ct.get(Rt[1]),title:Rt[2],arguments:[Kt,Rt[4]],tooltip:Rt[3]}}}),dispose:()=>{}}:{lenses:[],dispose:()=>{}}}}),Y.onKeyUp(lt=>{if(lt.keyCode==a.KeyCode.Enter&&B.runCommand("enter",Y),lt.keyCode==a.KeyCode.Tab){let Et=Y.getPosition(),It=at.getLineContent(Et.lineNumber);Et.column>It.length&&B.runCommand("tab",Y)}}),Y.onKeyDown(lt=>{if(lt.keyCode==a.KeyCode.Backspace){let Et=Y.getSelection();if(Et.startLineNumber!=Et.endLineNumber||Et.startColumn!=Et.endColumn)return;let It=Y.getPosition(),jt=at.getValueInRange({startLineNumber:It.lineNumber,endLineNumber:It.lineNumber,startColumn:It.column-1,endColumn:It.column}),Rt={startLineNumber:It.lineNumber,endLineNumber:It.lineNumber,startColumn:0,endColumn:It.column};if("]"==jt){let Ut=at.getValueInRange(Rt).lastIndexOf("[")+2;return Rt.startColumn=Ut,void Y.executeEdits("",[{range:Rt,text:""}])}let Kt=at.getLineContent(It.lineNumber).trim(),Dt=[/^C\xe2u\s\d+[\.:]$/,/^Question\s\d+[\.:]$/,/^[A-H]\.$/];if(It.column>Kt.length){let re=!1;for(const Ut of Dt)if(Ut.test(Kt)){re=!0;break}if(re)return void Y.executeEdits("",[{range:Rt,text:"\n"}])}}}),Y.onDidPaste(lt=>{this.pastePosition=lt}),a.languages.registerHoverProvider("azota",{provideHover:function(lt,Et){if(B.onHoverCalback){let It=B.onHoverCalback(Et.lineNumber,Et.column,lt.getLineContent(Et.lineNumber));return It?{range:new a.Range(It.lineIdx,It.s,It.lineIdx,It.e),contents:[{supportHtml:!0,value:It.text}]}:void 0}}}),this._editor=Y,Y.addCommand(a.KeyMod.CtrlCmd|a.KeyCode.Enter,function(){}),this.registerPlugin(new O7(null!==(r=null===(s=this.lang)||void 0===s?void 0:s.myTranslateInstant("azt_lang_menu_fill_blank"))&&void 0!==r?r:"\u0110i\u1ec1n v\xe0o ch\u1ed7 tr\u1ed1ng"),a.KeyCode.Period),this.registerPlugin(new M7(null!==(c=null===(l=this.lang)||void 0===l?void 0:l.myTranslateInstant("azt_lang_menu_find_mistake"))&&void 0!==c?c:"\u0110\xe1p \xe1n t\xecm l\u1ed7i sai"),a.KeyCode.KeyD),this.registerPlugin(new E7(null!==(d=null===(u=this.lang)||void 0===u?void 0:u.myTranslateInstant("azt_lang_menu_enter_latex"))&&void 0!==d?d:"Nh\u1eadp latex"),a.KeyCode.KeyL),this.registerPlugin(new Ku(null!==(p=null===(m=this.lang)||void 0===m?void 0:m.myTranslateInstant("azt_lang_menu_italic"))&&void 0!==p?p:"In nghi\xeang","i"),a.KeyCode.KeyI),this.registerPlugin(new Ku(null!==(y=null===(b=this.lang)||void 0===b?void 0:b.myTranslateInstant("azt_lang_menu_bold"))&&void 0!==y?y:"In \u0111\u1eadm","b"),a.KeyCode.KeyB),this.registerPlugin(new Ku(null!==(I=null===(C=this.lang)||void 0===C?void 0:C.myTranslateInstant("azt_lang_menu_underline"))&&void 0!==I?I:"G\u1ea1ch ch\xe2n","u"),a.KeyCode.KeyU),this.registerPlugin(new S7(null!==(U=null===(D=this.lang)||void 0===D?void 0:D.myTranslateInstant("azt_lang_menu_enter_code"))&&void 0!==U?U:"Hi\u1ec3n th\u1ecb d\u1ea1ng code block"),a.KeyCode.KeyF),setTimeout(()=>{this._editor.focus()},200),Y}setHoverCalback(a){this.onHoverCalback=a}onChange(a){this.onChangeCalback=a}onChangePosition(a){this.onChangePosCalback=a}onRefreshInclude(a){this.onRefreshCalback=a}onInsertDetails(a){this.onInsertDetailsCb=a}onInsertQuestText(a){this.onInsertQuestTextCb=a}updateLine(a,e,i,o){this._editor.executeEdits("",[{range:{startLineNumber:a,endLineNumber:a,startColumn:e,endColumn:i},text:o}])}insertLine(a){let e=this._editor.getPosition(),o=this._editor.getModel().getLineContent(e.lineNumber),s=o+"\n"+a;this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:0,endColumn:o.length+1},text:s.trim()}]);let l=e.lineNumber+s.split("\n").length;this._editor.setSelection({startLineNumber:l,endLineNumber:l,startColumn:0,endColumn:0}),this._editor.focus()}removeLines(a,e){let i=this.parseChange;this.parseChange=!1;for(let o=a.length-1;o>=0;o--){let s=a[o],r={startLineNumber:s+1,endLineNumber:s+2,startColumn:0,endColumn:0};0==o&&e&&(this.parseChange=!0),this._editor.executeEdits("",[{range:r,text:""}])}this.parseChange=i}removeText(a,e,i,o){let s={startLineNumber:a,endLineNumber:a,startColumn:e,endColumn:i},r=this.parseChange;this.parseChange=o,this._editor.executeEdits("",[{range:s,text:""}]),this.parseChange=r}getCurPos(){return this._editor.getPosition()}insertAtCurPos(a){let e=this._editor.getPosition();this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:a}]);let o=e.lineNumber,s=e.column+a.length;return this._editor.setSelection({startLineNumber:o,endLineNumber:o,startColumn:s,endColumn:s}),this._editor.focus(),{lineIdx:o,startCol:e.column,endCol:s}}runEditAction(a,e,i,o){this.parseChange=!1;let s="",r=0;for(const l of a){let c=l.split("|"),u=+c[0]+1,p=c[3],b={startLineNumber:u,endLineNumber:u,startColumn:+c[1]+1,endColumn:+c[2]+1};if(r==a.length-1&&i&&!o&&(this.parseChange=!0),r==a.length-1&&o&&(p+="|"),e.executeEdits("",[{range:b,text:p}]),r==a.length-1&&o){this.parseChange=i??!1,b.startColumn=b.startColumn+p.length-1,b.endColumn=b.startColumn+1;let y=p.split("\n");y.length>1&&(b.startLineNumber=u+y.length-1,b.endLineNumber=b.startLineNumber,b.startColumn=y[y.length-1].length,b.endColumn=b.startColumn+1),e.executeEdits("",[{range:b,text:""}])}s=p,r++}return this.parseChange=!0,s}runCommand(a,e){var i;let o=e.getPosition(),s=null===(i=this.azotaIntel)||void 0===i?void 0:i.getAutofillValue(o.lineNumber-1,o.column-1,a);if(!s||0==s.length)return;let r=this.runEditAction(s,e,!0,!0),c=e.getModel().getLineCount(),u=r.split("\n").length,m={lineNumber:o.lineNumber+(o.lineNumber+u-1==c&&"enter"==a?u:0),column:("enter"==a?0:o.column)+r.length};e.setPosition(m),this.onChangePosCalback&&this.onChangePosCalback(m.lineNumber,m.column)}zeroPad(a,e){return a=a||2,(new Array(a).join("0")+e).slice(-1*a)}}class L7{constructor(a,e){this.examIntel=new G.ExamIntellisense(a),this.examIntel.setApiService(e),this.apiService=e}setSingleMode(a){this.examIntel.setSingleMode(a)}setLang(a){this.lang=a}getSuggestions(a,e,i,o){return new Promise(s=>{this.examIntel.getSuggestions(a,e,i,o).then(r=>{s(this.translate(r))})})}getAutofillValue(a,e,i){return this.translate(this.examIntel.getAutofillValue(a,e,i))}getCurPos(a,e){return this.examIntel.getCurPos(a,e)}getCodeLens(a){let e=[],i=0;for(const d of a)/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(d.trim())?(e.push(`${i}|insertDirectQuest|azt_lang_editor_insert_direct|azt_lang_editor_insert_direct_desc|${d.trim()}`),e.push(`${i}|randomAgain|azt_lang_editor_random_again|azt_lang_editor_random_again_desc|${d.trim()}`)):/\[@Q\d+:[^\]]*\]$/.test(d.trim())&&e.push(`${i}|insertQuestText|azt_lang_editor_insert_quest_text|azt_lang_editor_insert_quest_text_desc|${d.trim()}`),i++;return this.translate(e)}getApiService(){return this.apiService}onChange(a,e,i){if(1!=a.text.length||"\n"==a.text)this.notiChange(e,i);else{let o=e._editor.getValue().replaceAll("\r",""),s=o.split("\n"),r=200;o.length>1e5&&(r=200*o.length/1e5),this.examIntel.setLines(s),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.notiChange(e,i)},r)}}onMobileChange(a,e){let i=a.split("\n"),o=400;a.length>1e5&&(o=400*a.length/1e5),this.examIntel.setLines(i),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{let s=this.examIntel.parse();e&&e(i,s)},o)}translate(a){var e,i;let o=[];for(let s of a)o.push(null!==(i=null===(e=this.lang)||void 0===e?void 0:e.translateString(s))&&void 0!==i?i:s);return o}notiChange(a,e){let i=a._editor.getValue().replaceAll("\r",""),o=i.split("\n");this.examIntel.setLines(o);let s=this.examIntel.parse(),r=this.examIntel.getEditHint();r&&a.runEditAction(r,a._editor),a.parseChange=!0,r.length>0&&(i=a._editor.getValue(),o=i.split("\n"),this.examIntel.setLines(o),s=this.examIntel.parse()),e&&e(o,s)}}let Z7=(()=>{class n extends A7{constructor(){super(...arguments),this.onStartProcessFile=new t.vpe,this.onSwitchFilePdf=new t.vpe}setupDropFile(){const e=jQuery("#frame_monaco_editor");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.onStartProcessFile.emit(i.originalEvent.dataTransfer.files[0])})}initMonaco(){let e=new I7;this.editorApiService&&(e.setIntellisense(new L7(this.config,this.editorApiService)),this._editor=e.init(monaco,this._editorContainer.nativeElement,this.commonService,this.readOnly),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,C7.R)(window,"resize").subscribe(()=>this._editor.layout()),this.setupDropFile(),this.onInit.emit({azotaEditor:e}))}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-monaco-editor"]],inputs:{editorApiService:"editorApiService",readOnly:"readOnly"},outputs:{onStartProcessFile:"onStartProcessFile",onSwitchFilePdf:"onSwitchFilePdf"},features:[t._Bn([{provide:h.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}]),t.qOj],decls:4,vars:0,consts:[["id","frame_monaco_editor"],[1,"editor-container"],["editorContainer",""],[1,"file-drop-background"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1,2)(3,"div",3),t.qZA())},styles:["[_nghost-%COMP%]{display:block}.editor-container[_ngcontent-%COMP%]{width:100%;height:100%}#frame_monaco_editor[_ngcontent-%COMP%]{height:100%;position:relative}.file-drop-background[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000029;justify-content:center;align-items:center;color:#fff}"]}),n})();var El=A(15861),P7=Object.defineProperty,N7=Object.defineProperties,D7=Object.getOwnPropertyDescriptors,vm=Object.getOwnPropertySymbols,j7=Object.prototype.hasOwnProperty,q7=Object.prototype.propertyIsEnumerable,bm=(n,a,e)=>a in n?P7(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,At=(n,a)=>{for(var e in a||(a={}))j7.call(a,e)&&bm(n,e,a[e]);if(vm)for(var e of vm(a))q7.call(a,e)&&bm(n,e,a[e]);return n},ge=(n,a)=>N7(n,D7(a));function Pn(n){return Array.isArray(n)}function Di(){return"window"in globalThis&&"document"in globalThis}function ym(){if(!Di())throw new Error("<math-field> is an interactive component that needs to run in a browser environment\nIf you are using nextjs, see https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr")}function wm(){return"matchMedia"in globalThis?globalThis.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in globalThis||navigator.maxTouchPoints>0}function Yu(){return"function"==typeof navigator.vibrate}function ms(){var n,a;if(!Di())return"other";let e=null!=(a=null==(n=navigator.userAgentData)?void 0:n.platform)?a:navigator.platform;return/^mac/i.test(e)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(e)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function km(){if(!Di())return!0;if(/firefox/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/firefox\/(\d+)/i);return!!n&&parseInt(n[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/edg\/(\d+)/i);return!!n&&parseInt(n[1])>=79}return!0}var Ye={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"\u0645\u0647\u0627\u0645","keyboard.tooltip.symbols":"\u062d\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.command":"\u062d\u0627\u0644\u0629 \u062a\u0644\u0642\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0644\u0627\u062a\u0643","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.roman":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621","menu.insert matrix":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.insert vector":"\u0623\u062f\u062e\u0644 \u0645\u062a\u062c\u0647","submenu.array.matrix delimiters":"\u0645\u062d\u062f\u062f\u0627\u062a \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064b\u0627 \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062d\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.array.delete column":"\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","menu.array.delete columns":"\u062d\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","submenu.array.insert separator":"\u0623\u062f\u062e\u0644 \u0641\u0627\u0635\u0644","menu.insert table":"\u0625\u062f\u0631\u0627\u062c \u062c\u062f\u0648\u0644","submenu.table style":"\u0646\u0645\u0637 \u0627\u0644\u062c\u062f\u0648\u0644"},bg:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u044a\u0446\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u0435\u043d \u0440\u0435\u0436\u0438\u043c \u043d\u0430 \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u0435 \u0432 \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434\u0430","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u041f\u0440\u0435\u0432\u043a\u043b\u044e\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u041e\u0442\u043c\u044f\u043d\u0430","menu.insert matrix":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u0441\u043b\u0435\u0434","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434\u0438","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u0441\u043b\u0435\u0434","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434\u0438","menu.array.delete row":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434\u0430","menu.array.delete rows":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430","menu.array.delete columns":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0438","submenu.array.insert separator":"\u041f\u043e\u0441\u0442\u0430\u0432\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b","menu.insert table":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u0435\u043d \u0441\u0442\u0438\u043b"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i red","menu.array.delete rows":"Izbri\u0161i odabrane redove","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"\u0158eck\xe9 dopisy","keyboard.tooltip.command":"P\u0159\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"\u010c\xedseln\xe9","keyboard.tooltip.roman":"\u0158\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"P\u0159ed\u011blat","tooltip.toggle virtual keyboard":"P\u0159epnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vlo\u017ete matici","menu.insert vector":"Vlo\u017eit vektor","submenu.array.matrix delimiters":"Odd\u011blova\u010de matic","menu.array.add row above":"P\u0159idat \u0159\xe1dek za","menu.array.add row below":"P\u0159idat \u0159\xe1dek p\u0159ed","menu.array.add column after":"P\u0159idat sloupec za","menu.array.add column before":"P\u0159idat sloupec d\u0159\xedve","menu.array.delete row":"Odstranit \u0159\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 \u0159\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vlo\u017ete odd\u011blova\u010d","menu.insert table":"Vlo\u017eit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"\u03c3\u03c5\u03bd\u03b1\u03c1\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2","keyboard.tooltip.symbols":"\u03c3\u03cd\u03bc\u03b2\u03bf\u03bb\u03b1","keyboard.tooltip.greek":"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","keyboard.tooltip.command":"\u039b\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b5\u03bd\u03c4\u03bf\u03bb\u03ce\u03bd LaTeX","keyboard.tooltip.numeric":"\u0391\u03c1\u03b9\u03b8\u03bc\u03b7\u03c4\u03b9\u03ba\u03cc\u03c2","keyboard.tooltip.roman":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","tooltip.copy to clipboard":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03bf \u03c0\u03c1\u03cc\u03c7\u03b5\u03b9\u03c1\u03bf","tooltip.redo":"\u039e\u03b1\u03bd\u03b1\u03ba\u03ac\u03bd\u03c9","tooltip.toggle virtual keyboard":"\u0395\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03ba\u03bf\u03cd \u03c0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5","tooltip.undo":"\u039e\u03b5\u03ba\u03ac\u03bd\u03c9","menu.insert matrix":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae Matrix","menu.insert vector":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03bd\u03cd\u03c3\u03bc\u03b1\u03c4\u03bf\u03c2","submenu.array.matrix delimiters":"\u039f\u03c1\u03b9\u03bf\u03b8\u03ad\u03c4\u03b5\u03c2 Matrix","menu.array.add row above":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add row below":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.add column after":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add column before":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.delete row":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.array.delete rows":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03b5\u03b9\u03c1\u03ce\u03bd","menu.array.delete column":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2","menu.array.delete columns":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd","submenu.array.insert separator":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03c7\u03c9\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03bf\u03cd","menu.insert table":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03af\u03bd\u03b1\u03ba\u03b1","submenu.table style":"\u03a3\u03c4\u03c5\u03bb \u03c0\u03af\u03bd\u03b1\u03ba\u03b1"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4sure\u017eiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.roman":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"\u062a\u0648\u0627\u0628\u0639","keyboard.tooltip.symbols":"\u0646\u0645\u0627\u062f\u0647\u0627","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u06cc\u0648\u0646\u0627\u0646\u06cc","keyboard.tooltip.command":"\u062d\u0627\u0644\u062a \u062f\u0633\u062a\u0648\u0631 \u0644\u0627\u062a\u06a9","keyboard.tooltip.numeric":"\u0639\u062f\u062f\u06cc","keyboard.tooltip.roman":"\u062d\u0631\u0648\u0641 \u0631\u0648\u0645\u06cc","tooltip.copy to clipboard":"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e\u0628\u0648\u0631\u062f","tooltip.redo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0628\u0639\u062f","tooltip.toggle virtual keyboard":"\u0646\u0645\u0627\u06cc\u0634/\u0646\u0647\u0641\u062a\u0646 \u06a9\u06cc\u0628\u0648\u0631\u062f \u0645\u062c\u0627\u0632\u06cc","tooltip.undo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0642\u0628\u0644","menu.insert matrix":"\u0645\u0627\u062a\u0631\u06cc\u0633 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","menu.insert vector":"\u062f\u0631\u062c \u0628\u0631\u062f\u0627\u0631","submenu.array.matrix delimiters":"\u0645\u0631\u0632\u0647\u0627\u06cc \u0645\u0627\u062a\u0631\u06cc\u0633","menu.array.add row above":"\u0628\u0639\u062f \u0627\u0632 \u0622\u0646 \u0631\u062f\u06cc\u0641 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add row below":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u0642\u0628\u0644 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add column after":"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0633\u062a\u0648\u0646 \u0628\u0639\u062f","menu.array.add column before":"\u0633\u062a\u0648\u0646 \u0642\u0628\u0644 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.delete row":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete rows":"\u0631\u062f\u06cc\u0641 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete column":"\u062d\u0630\u0641 \u0633\u062a\u0648\u0646","menu.array.delete columns":"\u0633\u062a\u0648\u0646 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","submenu.array.insert separator":"\u062f\u0631\u062c \u062c\u062f\u0627 \u06a9\u0646\u0646\u062f\u0647","menu.insert table":"\u0642\u0631\u0627\u0631 \u062f\u0627\u062f\u0646 \u062c\u062f\u0648\u0644","submenu.table style":"\u0633\u0628\u06a9 \u0645\u06cc\u0632"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.roman":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.roman":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d5\u05ea","keyboard.tooltip.symbols":"\u05e1\u05de\u05dc\u05d9\u05dd","keyboard.tooltip.greek":"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05d5\u05d5\u05e0\u05d9\u05d5\u05ea","keyboard.tooltip.command":"\u05de\u05e6\u05d1 \u05e4\u05e7\u05d5\u05d3\u05d4 \u05dc\u05d8\u05e7\u05e1","keyboard.tooltip.numeric":"\u05de\u05e1\u05e4\u05e8\u05d9","keyboard.tooltip.roman":"\u05de\u05db\u05ea\u05d1\u05d9\u05dd \u05e8\u05d5\u05de\u05d9\u05d9\u05dd","tooltip.copy to clipboard":"\u05d4\u05e2\u05ea\u05e7 \u05dc\u05dc\u05d5\u05d7","tooltip.redo":"\u05dc\u05b7\u05e2\u05b2\u05e9\u05c2\u05d5\u05b9\u05ea \u05e9\u05c1\u05d5\u05bc\u05d1","tooltip.toggle virtual keyboard":"\u05d4\u05d7\u05dc\u05e3 \u05d0\u05ea \u05d4\u05de\u05e7\u05dc\u05d3\u05ea \u05d4\u05d5\u05d5\u05d9\u05e8\u05d8\u05d5\u05d0\u05dc\u05d9\u05ea","tooltip.undo":"\u05dc\u05d1\u05d8\u05dc","menu.insert matrix":"\u05d4\u05db\u05e0\u05e1 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.insert vector":"\u05d4\u05db\u05e0\u05e1 \u05d5\u05e7\u05d8\u05d5\u05e8","submenu.array.matrix delimiters":"\u05de\u05e4\u05e8\u05d9\u05d3\u05d9 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.array.add row above":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add row below":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.add column after":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add column before":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.delete row":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4","menu.array.delete rows":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.array.delete column":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4","menu.array.delete columns":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","submenu.array.insert separator":"\u05d4\u05db\u05e0\u05e1 \u05de\u05e4\u05e8\u05d9\u05d3","menu.insert table":"\u05d4\u05db\u05e0\u05e1 \u05d8\u05d1\u05dc\u05d4","submenu.table style":"\u05d8\u05d1\u05dc\u05d4 \u05e1\u05b4\u05d2\u05b0\u05e0\u05d5\u05b9\u05df"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u me\u0111uspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i redak","menu.array.delete rows":"Izbri\u0161i odabrane retke","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.roman":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"\u0915\u093e\u0930\u094d\u092f\u094b\u0902","keyboard.tooltip.symbols":"\u092a\u094d\u0930\u0924\u0940\u0915","keyboard.tooltip.greek":"\u0917\u094d\u0930\u0940\u0915 \u0905\u0915\u094d\u0937\u0930","keyboard.tooltip.command":"\u0932\u093e\u091f\u0947\u0915\u094d\u0938 \u0915\u092e\u093e\u0902\u0921 \u092e\u094b\u0921","keyboard.tooltip.numeric":"\u0938\u0902\u0916\u094d\u092f\u093e\u0924\u094d\u092e\u0915","keyboard.tooltip.roman":"\u0930\u094b\u092e\u0928 \u092a\u0924\u094d\u0930","tooltip.copy to clipboard":"\u0915\u094d\u0932\u093f\u092a\u092c\u094b\u0930\u094d\u0921 \u092a\u0930 \u0915\u0949\u092a\u0940 \u0915\u0930\u0947\u0902","tooltip.redo":"\u092b\u093f\u0930 \u0938\u0947 \u0915\u0930\u0947\u0902","tooltip.toggle virtual keyboard":"\u0935\u0930\u094d\u091a\u0941\u0905\u0932 \u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u091f\u0949\u0917\u0932 \u0915\u0930\u0947\u0902","tooltip.undo":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924","menu.insert matrix":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0921\u093e\u0932\u0947\u0902","menu.insert vector":"\u0935\u0947\u0915\u094d\u091f\u0930 \u0921\u093e\u0932\u0947\u0902","submenu.array.matrix delimiters":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0938\u0940\u092e\u093e\u0902\u0915\u0915","menu.array.add row above":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add row below":"\u092a\u0939\u0932\u0947 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column after":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column before":"\u092a\u0939\u0932\u0947 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.delete row":"\u092a\u0902\u0915\u094d\u0924\u093f \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete rows":"\u091a\u092f\u0928\u093f\u0924 \u092a\u0902\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete column":"\u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","menu.array.delete columns":"\u091a\u092f\u0928\u093f\u0924 \u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","submenu.array.insert separator":"\u0935\u093f\u092d\u093e\u091c\u0915 \u0921\u093e\u0932\u0947\u0902","menu.insert table":"\u091f\u0947\u092c\u0932 \u0907\u0902\u0938\u0930\u094d\u091f \u0915\u0930\u0947\u0902","submenu.table style":"\u091f\u0947\u092c\u0932 \u0938\u094d\u091f\u093e\u0907\u0932"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.roman":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billenty\u0171zetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor el\u0151tt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop el\u0151tt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.roman":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"\u95a2\u6570","keyboard.tooltip.symbols":"\u30b7\u30f3\u30dc\u30eb","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.command":"\u30e9\u30c6\u30c3\u30af\u30b9\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.roman":"\u30ed\u30fc\u30de\u5b57","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059","menu.insert matrix":"\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u633f\u5165","menu.insert vector":"\u30d9\u30af\u30c8\u30eb\u3092\u633f\u5165","submenu.array.matrix delimiters":"\u884c\u5217\u533a\u5207\u308a\u6587\u5b57","menu.array.add row above":"\u5f8c\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add row below":"\u524d\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add column after":"\u5f8c\u306b\u5217\u3092\u8ffd\u52a0","menu.array.add column before":"\u524d\u306b\u5217\u3092\u8ffd\u52a0","menu.array.delete row":"\u884c\u3092\u524a\u9664","menu.array.delete rows":"\u9078\u629e\u3057\u305f\u884c\u3092\u524a\u9664\u3059\u308b","menu.array.delete column":"\u5217\u3092\u524a\u9664","menu.array.delete columns":"\u9078\u629e\u3057\u305f\u5217\u3092\u524a\u9664\u3059\u308b","submenu.array.insert separator":"\u30bb\u30d1\u30ec\u30fc\u30bf\u30fc\u3092\u633f\u5165","menu.insert table":"\u30c6\u30fc\u30d6\u30eb\u3092\u633f\u5165","submenu.table style":"\u30c6\u30fc\u30d6\u30eb\u30b9\u30bf\u30a4\u30eb"},ko:{"keyboard.tooltip.functions":"\uae30\ub2a5","keyboard.tooltip.symbols":"\uae30\ud638","keyboard.tooltip.greek":"\uadf8\ub9ac\uc2a4 \ubb38\uc790","keyboard.tooltip.command":"\uc720\uc561 \uba85\ub839 \ubaa8\ub4dc","keyboard.tooltip.numeric":"\uc22b\uc790","keyboard.tooltip.roman":"\ub85c\ub9c8 \ubb38\uc790","tooltip.copy to clipboard":"\ud074\ub9bd \ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac","tooltip.redo":"\ub2e4\uc2dc \ud558\ub2e4","tooltip.toggle virtual keyboard":"\uac00\uc0c1 \ud0a4\ubcf4\ub4dc \uc804\ud658","tooltip.undo":"\uc2e4\ud589 \ucde8\uc18c","menu.insert matrix":"\ub9e4\ud2b8\ub9ad\uc2a4 \uc0bd\uc785","menu.insert vector":"\ubca1\ud130 \uc0bd\uc785","submenu.array.matrix delimiters":"\ud589\ub82c \uad6c\ubd84 \uae30\ud638","menu.array.add row above":"\ub4a4\uc5d0 \ud589 \ucd94\uac00","menu.array.add row below":"\uc55e\uc5d0 \ud589 \ucd94\uac00","menu.array.add column after":"\ub4a4\uc5d0 \uc5f4 \ucd94\uac00","menu.array.add column before":"\uc55e\uc5d0 \uc5f4 \ucd94\uac00","menu.array.delete row":"\ud589 \uc0ad\uc81c","menu.array.delete rows":"\uc120\ud0dd\ud55c \ud589 \uc0ad\uc81c","menu.array.delete column":"\uc5f4 \uc0ad\uc81c","menu.array.delete columns":"\uc120\ud0dd\ud55c \uc5f4 \uc0ad\uc81c","submenu.array.insert separator":"\uad6c\ubd84\uc790 \uc0bd\uc785","menu.insert table":"\ud45c \uc0bd\uc785","submenu.table style":"\ud14c\uc774\ube14 \uc2a4\ud0c0\uc77c"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grie\u0137u burti","keyboard.tooltip.command":"LaTeX komandu re\u017e\u012bms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.roman":"Romie\u0161u v\u0113stules","tooltip.copy to clipboard":"Kop\u0113t starpliktuv\u0113","tooltip.redo":"P\u0101rtais\u012bt","tooltip.toggle virtual keyboard":"P\u0101rsl\u0113gt virtu\u0101lo tastat\u016bru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graiki\u0161kos raid\u0117s","keyboard.tooltip.command":"LaTeX komand\u0173 re\u017eimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.roman":"Romos lai\u0161kai","tooltip.copy to clipboard":"Nukopijuoti \u012f i\u0161karpin\u0119","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtuali\u0105j\u0105 klaviat\u016br\u0105","tooltip.undo":"At\u0161aukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.roman":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.roman":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0447\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u043e \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0432\u043e \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u0412\u043a\u043b\u0443\u0447\u0435\u0442\u0435 \u0458\u0430 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0430\u0442\u0430 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u0412\u0440\u0430\u0442\u0438","menu.insert matrix":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u0420\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0443\u0432\u0430\u0447\u0438 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0434\u0438 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0433\u043e \u0440\u0435\u0434\u043e\u0442","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0435\u0442\u0435 \u0433\u0438 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0438","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","submenu.array.insert separator":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0442\u0430\u0431\u0435\u043b\u0430","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430 \u0441\u0442\u0438\u043b"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece\u0144 LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wype\u0142nij tabel\u0119","submenu.table style":"Styl tabel\u0119"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Func\u021bii","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grece\u0219ti","keyboard.tooltip.command":"Modul de comand\u0103 latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Scrisori romane","tooltip.copy to clipboard":"Copia\u021bi \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comuta\u021bi tastatura virtual\u0103","tooltip.undo":"Anula","menu.insert matrix":"Introduce\u021bi Matrix","menu.insert vector":"Insera\u021bi Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Ad\u0103uga\u021bi r\xe2ndul dup\u0103","menu.array.add row below":"Ad\u0103uga\u021bi r\xe2ndul \xeenainte","menu.array.add column after":"Ad\u0103uga\u021bi o coloan\u0103 dup\u0103","menu.array.add column before":"Ad\u0103uga\u021bi o coloan\u0103 \xeenainte","menu.array.delete row":"\u0218terge\u021bi r\xe2ndul","menu.array.delete rows":"\u0218terge\u021bi r\xe2ndurile selectate","menu.array.delete column":"\u0218terge\u021bi coloana","menu.array.delete columns":"\u0218terge\u021bi coloanele selectate","submenu.array.insert separator":"Introduce\u021bi separatorul","menu.insert table":"Introduce\u021bi tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u044b","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u041b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439","keyboard.tooltip.roman":"\u041b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","tooltip.copy to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","tooltip.redo":"\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0440\u0430\u0441\u0441\u0442\u0435\u0433\u0438\u0432\u0430\u0442\u044c","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u044b\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0435\u0440\u0435\u0434","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443","menu.array.delete rows":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438","menu.array.delete column":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","menu.array.delete columns":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.roman":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrova\u0165 do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfa\u0165 virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4\u0165","menu.insert matrix":"Vlo\u017ete maticu","menu.insert vector":"Vlo\u017ete vektor","submenu.array.matrix delimiters":"Odde\u013eova\u010de mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Prida\u0165 st\u013apec za","menu.array.add column before":"Pridajte st\u013apec predt\xfdm","menu.array.delete row":"Odstr\xe1ni\u0165 riadok","menu.array.delete rows":"Odstr\xe1ni\u0165 vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1ni\u0165 st\u013apec","menu.array.delete columns":"Odstr\xe1ni\u0165 vybrat\xe9 st\u013apce","submenu.array.insert separator":"Vlo\u017ete odde\u013eova\u010d","menu.insert table":"Vlo\u017ete tabu\u013eku","submenu.table style":"\u0160t\xfdl tabu\u013eky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u0161ka pisma","keyboard.tooltip.command":"Ukazni na\u010din LaTeX","keyboard.tooltip.numeric":"\u0160tevilsko","keyboard.tooltip.roman":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odlo\u017ei\u0161\u010de","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matri\u010dni lo\u010devalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbri\u0161i vrstico","menu.array.delete rows":"Izbri\u0161i izbrane vrstice","menu.array.delete column":"Izbri\u0161i stolpec","menu.array.delete columns":"Izbri\u0161i izbrane stolpce","submenu.array.insert separator":"Vstavi lo\u010dilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.roman":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0458\u0435","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0435\u043a \u041b\u0435\u0442\u0442\u0435\u0440\u0441","keyboard.tooltip.command":"\u041b\u0430\u0422\u0435\u041a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u0438 \u0440\u0435\u0436\u0438\u043c","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0430 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0443 \u043c\u0435\u0452\u0443\u0441\u043f\u0440\u0435\u043c\u043d\u0438\u043a","tooltip.redo":"\u041f\u043e\u043d\u043e\u0432\u0438","tooltip.toggle virtual keyboard":"\u0423\u043a\u0459\u0443\u0447\u0438 / \u0438\u0441\u043a\u0459\u0443\u0447\u0438 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0443 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u041e\u043f\u043e\u0437\u043e\u0432\u0438","menu.insert matrix":"\u0423\u043c\u0435\u0442\u043d\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u043a \u0414\u0435\u043b\u0438\u043c\u0438\u0442\u0435\u0440\u0441","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u0440\u0435","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u0440\u0435","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0440\u0435\u0434","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u043a\u043e\u043b\u043e\u043d\u0443","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u043a\u043e\u043b\u043e\u043d\u0435","submenu.array.insert separator":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0423\u0431\u0430\u0446\u0438 \u0442\u0430\u0431\u0435\u043b\u0443","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430\u0440\u043d\u0438 \u0441\u0442\u0438\u043b"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"\u0e1f\u0e31\u0e07\u0e01\u0e4c\u0e0a\u0e31\u0e48\u0e19","keyboard.tooltip.symbols":"\u0e2a\u0e31\u0e0d\u0e25\u0e31\u0e01\u0e29\u0e13\u0e4c","keyboard.tooltip.greek":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e01\u0e23\u0e35\u0e01","keyboard.tooltip.command":"\u0e42\u0e2b\u0e21\u0e14\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 \u0e19\u0e49\u0e33\u0e22\u0e32\u0e07","keyboard.tooltip.numeric":"\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02","keyboard.tooltip.roman":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e42\u0e23\u0e21\u0e31\u0e19","tooltip.copy to clipboard":"\u0e04\u0e31\u0e14\u0e25\u0e2d\u0e01\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e04\u0e25\u0e34\u0e1b\u0e1a\u0e2d\u0e23\u0e4c\u0e14","tooltip.redo":"\u0e17\u0e33\u0e0b\u0e49\u0e33","tooltip.toggle virtual keyboard":"\u0e2a\u0e25\u0e31\u0e1a\u0e41\u0e1b\u0e49\u0e19\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e40\u0e2a\u0e21\u0e37\u0e2d\u0e19","tooltip.undo":"\u0e40\u0e25\u0e34\u0e01\u0e17\u0e33","menu.insert matrix":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.insert vector":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e27\u0e01\u0e40\u0e15\u0e2d\u0e23\u0e4c","submenu.array.matrix delimiters":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.array.add row above":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e2b\u0e25\u0e31\u0e07","menu.array.add row below":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e01\u0e48\u0e2d\u0e19","menu.array.add column after":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e2b\u0e25\u0e31\u0e07","menu.array.add column before":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e01\u0e48\u0e2d\u0e19","menu.array.delete row":"\u0e25\u0e1a\u0e41\u0e16\u0e27","menu.array.delete rows":"\u0e25\u0e1a\u0e41\u0e16\u0e27\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","menu.array.delete column":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c","menu.array.delete columns":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","submenu.array.insert separator":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e41\u0e17\u0e23\u0e01","menu.insert table":"\u0e41\u0e17\u0e23\u0e01\u0e15\u0e32\u0e23\u0e32\u0e07","submenu.table style":"\u0e2a\u0e44\u0e15\u0e25\u0e4c\u0e15\u0e32\u0e23\u0e32\u0e07"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Say\u0131sal","keyboard.tooltip.roman":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris S\u0131n\u0131rlay\u0131c\u0131lar","menu.array.add row above":"Sat\u0131rdan Sonra Ekle","menu.array.add row below":"\xd6nce Sat\u0131r Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"S\u0131ray\u0131 sil","menu.array.delete rows":"Se\xe7ili Sat\u0131rlar\u0131 Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunlar\u0131 Sil","submenu.array.insert separator":"Ay\u0131r\u0131c\u0131 Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0456\u0457","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u043b\u0430\u0442\u0435\u043a\u0441\u0443","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438\u0439","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0456\u043d\u0443","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u044e","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0456 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a\u0438","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043f\u0456\u0441\u043b\u044f","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0434\u043e","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0456\u0441\u043b\u044f","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0440\u044f\u0434\u043a\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0441\u0442\u043e\u0432\u043f\u0446\u0456","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0442\u0435 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","submenu.table style":"\u0421\u0442\u0438\u043b\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0456"},vi:{"keyboard.tooltip.functions":"Ch\u1ee9c n\u0103ng","keyboard.tooltip.symbols":"K\xfd hi\u1ec7u","keyboard.tooltip.greek":"Ch\u1eef Hy L\u1ea1p","keyboard.tooltip.command":"Ch\u1ebf \u0111\u1ed9 l\u1ec7nh LaTeX","keyboard.tooltip.numeric":"S\u1ed1","keyboard.tooltip.roman":"Ch\u1eef c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m l\u1ea1i","tooltip.toggle virtual keyboard":"Chuy\u1ec3n \u0111\u1ed5i b\xe0n ph\xedm \u1ea3o","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma tr\u1eadn","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"D\u1ea5u ph\xe2n c\xe1ch ma tr\u1eadn","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng tr\u01b0\u1edbc","menu.array.add column after":"Th\xeam c\u1ed9t sau","menu.array.add column before":"Th\xeam c\u1ed9t tr\u01b0\u1edbc","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng \u0111\xe3 ch\u1ecdn","menu.array.delete column":"X\xf3a c\u1ed9t","menu.array.delete columns":"X\xf3a c\xe1c c\u1ed9t \u0111\xe3 ch\u1ecdn","submenu.array.insert separator":"Ch\xe8n d\u1ea5u ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n b\u1ea3ng","submenu.table style":"Ki\u1ec3u b\u1ea3ng"},zh_cn:{"keyboard.tooltip.functions":"\u804c\u80fd","keyboard.tooltip.symbols":"\u7b26\u53f7","keyboard.tooltip.greek":"\u5e0c\u814a\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u80f6 \u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6570\u5b57","keyboard.tooltip.roman":"\u7f57\u9a6c\u5b57\u6bcd","tooltip.copy to clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u6362\u865a\u62df\u952e\u76d8","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9635","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9635\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u540e\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u540e\u9762\u6dfb\u52a0\u5217r","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u5220\u9664\u884c","menu.array.delete rows":"\u5220\u9664\u9009\u5b9a\u884c","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6837\u5f0f"},zh_tw:{"keyboard.tooltip.functions":"\u8077\u80fd","keyboard.tooltip.symbols":"\u7b26\u865f","keyboard.tooltip.greek":"\u5e0c\u81d8\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u81a0\u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6578\u5b57","keyboard.tooltip.roman":"\u7f85\u99ac\u5b57\u6bcd","tooltip.copy to clipboard":"\u8907\u88fd\u5230\u526a\u8cbc\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u63db\u865b\u64ec\u9375\u76e4","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9663","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9663\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u5f8c\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u5f8c\u9762\u6dfb\u52a0\u5217","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u522a\u9664\u884c","menu.array.delete rows":"\u522a\u9664\u9078\u5b9a\u884c","menu.array.delete column":"\u522a\u9664\u5217","menu.array.delete columns":"\u522a\u9664\u9078\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6a23\u5f0f"}},_locale:"",get locale(){return Ye._locale||(Ye._locale=Di()?navigator.language.slice(0,5):"en"),Ye._locale},set locale(n){Ye._locale=n},merge(n,a){if(n&&a){let e=Ye._locale;Ye.locale=n,Ye.strings[n]=At(At({},Ye.strings[n]),a),Ye.locale=e}else if(n&&!a)for(let e of Object.keys(n))Ye.merge(e,n[e])}};function Ea(n){if(void 0===n)return;let a=Ye.locale.slice(0,2),e="";return Ye.strings[Ye.locale]&&(e=Ye.strings[Ye.locale][n]),!e&&Ye.strings[a]&&(e=Ye.strings[a][n]),e||(e=Ye.strings.en[n]),e||void 0}var Q7={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},U7={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Ml={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},Il={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},Cm={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},B7={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function Ll(n){var a,e,i,o,s,r;let c,u,d,l=n.split("!"),m=255,p=255,b=255,y=-1,C=l.length>0&&l[0].startsWith("-");C&&(l[0]=l[0].slice(1));for(let I=0;I<l.length;I++){c=m,u=p,d=b;let D=null==(a=l[I].trim().match(/^([A-Za-z\d]+)/))?void 0:a[1],U=D?.toLowerCase(),B=D&&null!=(r=null!=(s=null!=(o=null!=(i=null!=(e=Il[U])?e:Il[Cm[D]])?i:U7[D])?o:B7[D])?s:Q7[D])?r:l[I].trim(),q=B.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=q&&q[1]&&q[2]&&q[3])m=Math.max(0,Math.min(255,Number.parseInt(q[1],16))),p=Math.max(0,Math.min(255,Number.parseInt(q[2],16))),b=Math.max(0,Math.min(255,Number.parseInt(q[3],16)));else if(q=B.match(/^#([\da-f]{3})$/i),null!=q&&q[1]){let R=Number.parseInt(q[1][0],16),et=Number.parseInt(q[1][1],16),Q=Number.parseInt(q[1][2],16);m=Math.max(0,Math.min(255,16*R+R)),p=Math.max(0,Math.min(255,16*et+et)),b=Math.max(0,Math.min(255,16*Q+Q))}else{if(q=B.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(null!=q&&q[1]&&q[2]&&q[3]))return;m=Math.max(0,Math.min(255,Number.parseInt(q[1]))),p=Math.max(0,Math.min(255,Number.parseInt(q[2]))),b=Math.max(0,Math.min(255,Number.parseInt(q[3])))}y>=0&&(m=(1-y)*m+y*c,p=(1-y)*p+y*u,b=(1-y)*b+y*d,y=-1),I+1<l.length&&(y=Math.max(0,Math.min(100,Number.parseInt(l[++I])))/100)}return y>=0&&(m=y*m+(1-y)*c,p=y*p+(1-y)*u,b=y*b+(1-y)*d),C&&(m=255-m,p=255-p,b=255-b),"#"+("00"+Math.round(m).toString(16)).slice(-2)+("00"+Math.round(p).toString(16)).slice(-2)+("00"+Math.round(b).toString(16)).slice(-2)}function Gu(n){var a,e;return n=n.trim(),null!=(e=null!=(a=Ml[n.toLowerCase()])?a:Ml[Cm[n]])?e:Ll(n)}function Wu(n,a,e){return e<0&&(e+=6),e>=6&&(e-=6),e<1?(a-n)*e+n:e<3?a:e<4?(a-n)*(4-e)+n:n}function Vu(n){return n<0?0:n>255?255:Math.round(n)}function Tm(n){let a=function R7(n){if(!n||"#"!==n[0])return;let a;return(n=n.slice(1)).length<=4?(a={r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16)},4===n.length&&(a.a=parseInt(n[3]+n[3],16)/255)):(a={r:parseInt(n[0]+n[1],16),g:parseInt(n[2]+n[3],16),b:parseInt(n[4]+n[5],16)},8===n.length&&(a.a=parseInt(n[6]+n[7],16)/255)),a&&void 0===a.a&&(a.a=1),a}(n);if(!a)return n;let{h:e,s:i,l:o}=function H7(n){let{r:a,g:e,b:i}=n;a/=255,e/=255,i/=255;let l,c,o=Math.min(a,e,i),s=Math.max(a,e,i),r=s-o;s===o?l=0:a===s?l=(e-i)/r:e===s?l=2+(i-a)/r:i===s&&(l=4+(a-e)/r),l=Math.min(60*l,360),l<0&&(l+=360);let u=(o+s)/2;return c=s===o?0:u<=.5?r/(s+o):r/(2-s-o),{h:l,s:c,l:u}}(a);return i+=.1,o-=.1,function J7(n){let{r:a,g:e,b:i}=n,o=((1<<24)+(Vu(a)<<16)+(Vu(e)<<8)+Vu(i)).toString(16).slice(1);return o[0]===o[1]&&o[2]===o[3]&&o[4]===o[5]&&o[6]===o[7]&&(o=o[0]+o[2]+o[4]),"#"+o}(function z7(n){let[a,e,i]=[n.h,n.s,n.l];a=(a+360)%360/60,i=Math.max(0,Math.min(i,1)),e=Math.max(0,Math.min(e,1));let o=i<=.5?i*(e+1):i+e-i*e,s=2*i-o;return{r:Math.round(255*Wu(s,o,a+2)),g:Math.round(255*Wu(s,o,a)),b:Math.round(255*Wu(s,o,a-2))}}({h:e,s:i,l:o}))}var ko={},Zl={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},Co={},Xu={},G7={iff:"\\;\u27fa\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}","braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},expand:!1},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},expand:!1}},Jo={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201c":8220,"\u201d":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},W7=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/,V7=km()?new RegExp("\\p{Letter}","u"):/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,Pl=km()?new RegExp("[0-9\\p{Letter}]","u"):/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/;function td(n,a,e="mord",i){void 0!==a&&(ko[n]={definitionType:"symbol",type:e,variant:i,codepoint:a},Zl[a]||(Zl[a]=n),Jo[n]||(Jo[n]=a))}function Qn(n,a,e){if("string"!=typeof n)for(let[i,o,s,r]of n)td(i,o,s??a,r??e);else for(let i=0;i<n.length;i++){let o=n.charAt(i);td(o,o.codePointAt(0))}}function Am(n,a){for(let e=n;e<=a;e++)td(String.fromCodePoint(e),e)}function Nl(n,a){if(void 0===a)return"";if("math"===n&&Zl[a])return Zl[a];if("text"===n){let e=Object.keys(Jo).find(i=>Jo[i]===a);if(!e){let i=a.toString(16);e="^".repeat(i.length)+i}return e}return String.fromCodePoint(a)}var ql,ed={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Sm=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function Om(n){let a="auto",e=n.match(/:([^=]+)/);return e&&(a=e[1].trim()),a}function Dl(n){if(!n)return[];let a=[],e=n.split("]");if(e[0].startsWith("[")){a.push({isOptional:!0,type:Om(e[0].slice(1))});for(let i=1;i<=e.length;i++)a.push(...Dl(e[i]))}else if(e=n.split("}"),e[0].startsWith("{")){a.push({isOptional:!1,type:Om(e[0].slice(1))});for(let i=1;i<=e.length;i++)a.push(...Dl(e[i]))}return a}function Em(n){if(!n)return"";let a="",e=!0;for(let i of n)"string"==typeof i.value?a+=i.value:e=!1;return e?a:""}function jl(n,a,e,i=!1){"string"==typeof n&&(n=[n]);let s={tabular:i,params:Dl(a),createAtom:e};for(let r of n)Xu[r]=s}function To(n,a,e){jl(n,a,e,!0)}function Ct(n,a,e){var i,o;e||(e={});let s={definitionType:"function",params:Dl(a),ifMode:e.ifMode,isFunction:null!=(i=e.isFunction)&&i,applyMode:e.applyMode,infix:null!=(o=e.infix)&&o,createAtom:e.createAtom,applyStyle:e.applyStyle};if("string"==typeof n)Co["\\"+n]=s;else for(let r of n)Co["\\"+r]=s}function nd(n){return ql||(ql=id(G7)),n?id(At(At({},ql),n)):ql}function Mm(n,a){var e,i,o,s;if("string"==typeof n){let r=0,l=n;return/(^|[^\\])#1/.test(l)&&(r=1),/(^|[^\\])#2/.test(l)&&(r=2),/(^|[^\\])#3/.test(l)&&(r=3),/(^|[^\\])#4/.test(l)&&(r=4),/(^|[^\\])#5/.test(l)&&(r=5),/(^|[^\\])#6/.test(l)&&(r=6),/(^|[^\\])#7/.test(l)&&(r=7),/(^|[^\\])#8/.test(l)&&(r=8),/(^|[^\\])#9/.test(l)&&(r=9),{expand:null==(e=a?.expand)||e,captureSelection:null==(i=a?.captureSelection)||i,args:r,def:l}}return At({expand:null==(o=a?.expand)||o,captureSelection:null==(s=a?.captureSelection)||s,args:0},n)}function id(n){if(!n)return{};let a={};for(let e of Object.keys(n)){let i=n[e];if(null==i)delete a[e];else if("object"==typeof i&&"package"in i)for(let o of Object.keys(i.package))a[o]=Mm(i.package[o],{expand:i.expand,captureSelection:i.captureSelection});else a[e]=Mm(i)}return a}var mt=[0,.69444,0,0],Ht=[0,.61111,0,0],ae=[.25,.75,0,0],se=[0,.44444,0,0],de=[0,.68611,0,0],_e=[.19444,.69444,0,0],ve=[0,.68333,0,0],we=[0,.68889,0,0],Ze=[0,.69141,0,0],Oe=[0,0,0,0],cn=[0,.64444,0,0],En=[0,.69224,0,0],Mn=[.19444,.44444,0,0],Jn=[.65002,1.15,0,0],ti=[0,.55556,0,0],ci=[.35001,.85,0,0],ui=[1.25003,1.75,0,0],di=[.95003,1.45,0,0],Ei=[0,.75,0,0],Mi=[0,.47534,0,0],$i=[.25001,.75,0,0],Ki=[.55001,1.05,0,0],od=[.16667,.68889,0,0],Yi=[.08167,.58167,0,0],o9={"AMS-Regular":{32:Oe,65:we,66:we,67:we,68:we,69:we,70:we,71:we,72:we,73:we,74:od,75:we,76:we,77:we,78:we,79:od,80:we,81:od,82:we,83:we,84:we,85:we,86:we,87:we,88:we,89:we,90:we,107:we,160:Oe,165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:we,295:we,710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:Yi,1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:we,8487:we,8498:we,8502:we,8503:we,8504:we,8513:we,8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:En,8625:En,8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:we,8709:Yi,8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:Yi,8733:En,8736:En,8737:En,8738:[.03517,.52239,0,0],8739:Yi,8740:[.25142,.74111,0,0],8741:Yi,8742:[.25142,.74111,0,0],8756:En,8757:En,8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:Yi,8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:En,8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:En,8873:En,8874:En,8876:we,8877:we,8878:we,8879:we,8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:Yi,8905:Yi,8906:Yi,8907:En,8908:En,8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:En,8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:En,9488:En,9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:En,10016:En,10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:Yi,57351:Yi,57352:Yi,57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{32:Oe,65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889],160:Oe},"Fraktur-Regular":{32:Oe,33:Ze,34:Ze,38:Ze,39:Ze,40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:Mi,49:Mi,50:Mi,51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:Ze,55:[.18906,.47534,0,0],56:Ze,57:[.18906,.47534,0,0],58:Mi,59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:Ze,65:Ze,66:Ze,67:Ze,68:Ze,69:Ze,70:[.12604,.69141,0,0],71:Ze,72:[.06302,.69141,0,0],73:Ze,74:[.12604,.69141,0,0],75:Ze,76:Ze,77:Ze,78:Ze,79:Ze,80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:Ze,83:Ze,84:Ze,85:Ze,86:Ze,87:Ze,88:Ze,89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:Ze,97:Mi,98:Ze,99:Mi,100:[0,.62119,0,0],101:Mi,102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:Ze,106:Ze,107:Ze,108:Ze,109:Mi,110:Mi,111:Mi,112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:Mi,115:Mi,116:[0,.62119,0,0],117:Mi,118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],160:Oe,8216:Ze,8217:Ze,58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:Ze,58118:[0,.62119,0,0],58119:Mi},"Main-Bold":{32:Oe,33:mt,34:mt,35:_e,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:mt,39:mt,40:ae,41:ae,42:Ei,43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:se,46:[0,.15556,0,0],47:ae,48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,58:se,59:Mn,60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:mt,64:mt,65:de,66:de,67:de,68:de,69:de,70:de,71:de,72:de,73:de,74:de,75:de,76:de,77:de,78:de,79:de,80:de,81:[.19444,.68611,0,0],82:de,83:de,84:de,85:de,86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:de,89:[0,.68611,.02875,0],90:de,91:ae,92:ae,93:ae,94:mt,95:[.31,.13444,.03194,0],97:se,98:mt,99:se,100:mt,101:se,102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:mt,105:mt,106:_e,107:mt,108:mt,109:se,110:se,111:se,112:Mn,113:Mn,114:se,115:se,116:[0,.63492,0,0],117:se,118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:se,121:[.19444,.44444,.01597,0],122:se,123:ae,124:ae,125:ae,126:[.35,.34444,0,0],160:Oe,163:mt,168:mt,172:se,176:mt,177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:de,215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:mt,230:se,247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:se,338:de,339:se,567:Mn,710:mt,711:[0,.63194,0,0],713:[0,.59611,0,0],714:mt,715:mt,728:mt,729:mt,730:mt,732:mt,733:mt,915:de,916:de,920:de,923:de,926:de,928:de,931:de,933:de,934:de,936:de,937:de,8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:mt,8217:mt,8220:mt,8221:mt,8224:_e,8225:_e,8242:ti,8407:[0,.72444,.15486,0],8463:mt,8465:mt,8467:mt,8472:Mn,8476:mt,8501:mt,8592:[-.10889,.39111,0,0],8593:_e,8594:[-.10889,.39111,0,0],8595:_e,8596:[-.10889,.39111,0,0],8597:ae,8598:_e,8599:_e,8600:_e,8601:_e,8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:_e,8658:[-.10889,.39111,0,0],8659:_e,8660:[-.10889,.39111,0,0],8661:ae,8704:mt,8706:[0,.69444,.06389,0],8707:mt,8709:[.05556,.75,0,0],8711:de,8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:ae,8726:ae,8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:se,8734:se,8736:En,8739:ae,8741:ae,8743:ti,8744:ti,8745:ti,8746:ti,8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:_e,8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:ti,8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:ti,8852:ti,8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:mt,8867:mt,8868:mt,8869:mt,8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:ae,8969:ae,8970:ae,8971:ae,8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:_e,9657:[-.02778,.47222,0,0],9661:_e,9667:[-.02778,.47222,0,0],9711:_e,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:Ei,9838:_e,9839:_e,10216:ae,10217:ae,10815:de,10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:_e},"Main-BoldItalic":{32:Oe,33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:de,66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:de,77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],160:Oe,168:[0,.69444,.11473,0],176:mt,184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:mt,728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:mt,732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:de,920:[0,.68611,.09062,0],923:de,926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{32:Oe,33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:ve,66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:ve,77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],160:Oe,168:[0,.66786,.10474,0],176:mt,184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:mt,728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:mt,732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:ve,920:[0,.68333,.09403,0],923:ve,926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:we},"Main-Regular":{32:Oe,33:mt,34:mt,35:_e,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:mt,39:mt,40:ae,41:ae,42:Ei,43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:ae,48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:mt,64:mt,65:ve,66:ve,67:ve,68:ve,69:ve,70:ve,71:ve,72:ve,73:ve,74:ve,75:ve,76:ve,77:ve,78:ve,79:ve,80:ve,81:[.19444,.68333,0,0],82:ve,83:ve,84:ve,85:ve,86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:ve,89:[0,.68333,.025,0],90:ve,91:ae,92:ae,93:ae,94:mt,95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:mt,99:[0,.43056,0,0],100:mt,101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:mt,105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:mt,108:mt,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:ae,124:ae,125:ae,126:[.35,.31786,0,0],160:Oe,163:mt,167:_e,168:[0,.66786,0,0],172:[0,.43056,0,0],176:mt,177:[.08333,.58333,0,0],182:_e,184:[.17014,0,0,0],198:ve,215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:mt,230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:ve,339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:mt,711:[0,.62847,0,0],713:[0,.56778,0,0],714:mt,715:mt,728:mt,729:[0,.66786,0,0],730:mt,732:[0,.66786,0,0],733:mt,915:ve,916:ve,920:ve,923:ve,926:ve,928:ve,931:ve,933:ve,934:ve,936:ve,937:ve,8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:mt,8217:mt,8220:mt,8221:mt,8224:_e,8225:_e,8230:[0,.12,0,0],8242:ti,8407:[0,.71444,.15382,0],8463:we,8465:mt,8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:mt,8501:mt,8592:[-.13313,.36687,0,0],8593:_e,8594:[-.13313,.36687,0,0],8595:_e,8596:[-.13313,.36687,0,0],8597:ae,8598:_e,8599:_e,8600:_e,8601:_e,8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:_e,8658:[-.13313,.36687,0,0],8659:_e,8660:[-.13313,.36687,0,0],8661:ae,8704:mt,8706:[0,.69444,.05556,.08334],8707:mt,8709:[.05556,.75,0,0],8711:ve,8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:ae,8726:ae,8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:En,8739:ae,8741:ae,8743:ti,8744:ti,8745:ti,8746:ti,8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:_e,8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:ti,8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:ti,8852:ti,8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:mt,8867:mt,8868:mt,8869:mt,8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:ae,8969:ae,8970:ae,8971:ae,8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:_e,9657:[-.03472,.46528,0,0],9661:_e,9667:[-.03472,.46528,0,0],9711:_e,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:Ei,9838:_e,9839:_e,10216:ae,10217:ae,10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:ve,10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:_e},"Math-BoldItalic":{32:Oe,48:se,49:se,50:se,51:Mn,52:Mn,53:Mn,54:cn,55:Mn,56:cn,57:Mn,65:de,66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:de,72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:de,77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:se,98:mt,99:se,100:mt,101:se,102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:mt,105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:se,110:se,111:se,112:Mn,113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:se,116:[0,.63492,0,0],117:se,118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:se,121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],160:Oe,915:[0,.68611,.15972,0],916:de,920:[0,.68611,.03194,0],923:de,926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:de,936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:se,946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:se,950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:se,954:se,955:mt,956:Mn,957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:se,960:[0,.44444,.03704,0],961:Mn,962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:Mn,967:Mn,968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:mt,981:_e,982:[0,.44444,.03194,0],1009:Mn,1013:se,57649:se,57911:Mn},"Math-Italic":{32:Oe,48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:cn,55:[.19444,.43056,0,0],56:cn,57:[.19444,.43056,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:mt,99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:mt,105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],160:Oe,915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:mt,956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556],57649:[0,.43056,0,.02778],57911:[.19444,.43056,0,.08334]},"SansSerif-Bold":{32:Oe,33:mt,34:mt,35:_e,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:mt,39:mt,40:ae,41:ae,42:Ei,43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:ae,48:mt,49:mt,50:mt,51:mt,52:mt,53:mt,54:mt,55:mt,56:mt,57:mt,58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:mt,64:mt,65:mt,66:mt,67:mt,68:mt,69:mt,70:mt,71:mt,72:mt,73:mt,74:mt,75:mt,76:mt,77:mt,78:mt,79:mt,80:mt,81:[.10556,.69444,0,0],82:mt,83:mt,84:mt,85:mt,86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:mt,89:[0,.69444,.0275,0],90:mt,91:ae,93:ae,94:mt,95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:mt,99:[0,.45833,0,0],100:mt,101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:mt,105:mt,106:_e,107:mt,108:mt,109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],160:Oe,168:mt,176:mt,180:mt,184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:mt,711:[0,.63542,0,0],713:[0,.63778,0,0],728:mt,729:mt,730:mt,732:mt,733:mt,915:mt,916:mt,920:mt,923:mt,926:mt,928:mt,931:mt,933:mt,934:mt,936:mt,937:mt,8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:mt,8217:mt,8220:mt,8221:mt},"SansSerif-Italic":{32:Oe,33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:mt,66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:mt,77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],160:Oe,168:[0,.67937,.06385,0],176:mt,184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:mt,728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:mt,732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:mt,920:[0,.69444,.07555,0],923:mt,926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{32:Oe,33:mt,34:mt,35:_e,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:mt,39:mt,40:ae,41:ae,42:Ei,43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:se,46:[0,.08333,0,0],47:ae,48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:se,59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:mt,64:mt,65:mt,66:mt,67:mt,68:mt,69:mt,70:mt,71:mt,72:mt,73:mt,74:mt,75:mt,76:mt,77:mt,78:mt,79:mt,80:mt,81:[.125,.69444,0,0],82:mt,83:mt,84:mt,85:mt,86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:mt,89:[0,.69444,.025,0],90:mt,91:ae,93:ae,94:mt,95:[.35,.09444,.02778,0],97:se,98:mt,99:se,100:mt,101:se,102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:mt,105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:mt,108:mt,109:se,110:se,111:se,112:Mn,113:Mn,114:[0,.44444,.01389,0],115:se,116:[0,.57143,0,0],117:se,118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:se,121:[.19444,.44444,.01389,0],122:se,126:[.35,.32659,0,0],160:Oe,168:[0,.67937,0,0],176:mt,184:[.17014,0,0,0],305:se,567:Mn,710:mt,711:[0,.63194,0,0],713:[0,.60889,0,0],714:mt,715:mt,728:mt,729:[0,.67937,0,0],730:mt,732:[0,.67659,0,0],733:mt,915:mt,916:mt,920:mt,923:mt,926:mt,928:mt,931:mt,933:mt,934:mt,936:mt,937:mt,8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:mt,8217:mt,8220:mt,8221:mt},"Script-Regular":{32:Oe,65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0],160:Oe},"Size1-Regular":{32:Oe,40:ci,41:ci,47:ci,91:ci,92:ci,93:ci,123:ci,125:ci,160:Oe,710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:$i,8720:$i,8721:$i,8730:ci,8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:$i,8897:$i,8898:$i,8899:$i,8968:ci,8969:ci,8970:ci,8971:ci,9168:[-99e-5,.601,0,0],10216:ci,10217:ci,10752:$i,10753:$i,10754:$i,10756:$i,10758:$i},"Size2-Regular":{32:Oe,40:Jn,41:Jn,47:Jn,91:Jn,92:Jn,93:Jn,123:Jn,125:Jn,160:Oe,710:Ei,732:Ei,770:Ei,771:Ei,8719:Ki,8720:Ki,8721:Ki,8730:Jn,8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:Ki,8897:Ki,8898:Ki,8899:Ki,8968:Jn,8969:Jn,8970:Jn,8971:Jn,10216:Jn,10217:Jn,10752:Ki,10753:Ki,10754:Ki,10756:Ki,10758:Ki},"Size3-Regular":{32:Oe,40:di,41:di,47:di,91:di,92:di,93:di,123:di,125:di,160:Oe,710:Ei,732:Ei,770:Ei,771:Ei,8730:di,8968:di,8969:di,8970:di,8971:di,10216:di,10217:di},"Size4-Regular":{32:Oe,40:ui,41:ui,47:ui,91:ui,92:ui,93:ui,123:ui,125:ui,160:Oe,710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:ui,8968:ui,8969:ui,8970:ui,8971:ui,9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:Jn,9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:Jn,9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:ui,10217:ui,57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:Oe,33:Ht,34:Ht,35:Ht,36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:Ht,39:Ht,40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:Ht,49:Ht,50:Ht,51:Ht,52:Ht,53:Ht,54:Ht,55:Ht,56:Ht,57:Ht,58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:Ht,64:Ht,65:Ht,66:Ht,67:Ht,68:Ht,69:Ht,70:Ht,71:Ht,72:Ht,73:Ht,74:Ht,75:Ht,76:Ht,77:Ht,78:Ht,79:Ht,80:Ht,81:[.13889,.61111,0,0],82:Ht,83:Ht,84:Ht,85:Ht,86:Ht,87:Ht,88:Ht,89:Ht,90:Ht,91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:Ht,95:[.09514,0,0,0],96:Ht,97:[0,.43056,0,0],98:Ht,99:[0,.43056,0,0],100:Ht,101:[0,.43056,0,0],102:Ht,103:[.22222,.43056,0,0],104:Ht,105:Ht,106:[.22222,.61111,0,0],107:Ht,108:Ht,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:Ht,127:Ht,160:Oe,176:Ht,184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:Ht,715:Ht,728:Ht,730:Ht,770:Ht,771:Ht,776:Ht,915:Ht,916:Ht,920:Ht,923:Ht,926:Ht,928:Ht,931:Ht,933:Ht,934:Ht,936:Ht,937:Ht,8216:Ht,8217:Ht,8242:Ht,9251:[.11111,.21944,0,0]}},a9=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,co=.25,Ma=.431,Im={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[Ma,Ma,Ma],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[co,co,co],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},ad=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Lm={"\xa0":" ","\u200b":" ",\u00c5:"A",\u00c7:"C",\u00d0:"D",\u00de:"o",\u00e5:"a",\u00e7:"c",\u00f0:"d",\u00fe:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041a:"K",\u041b:"N",\u041c:"M",\u041d:"H",\u041e:"O",\u041f:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042a:"B",\u042b:"X",\u042c:"B",\u042d:"3",\u042e:"X",\u042f:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043a:"n",\u043b:"n",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044a:"a",\u044b:"m",\u044c:"a",\u044d:"e",\u044e:"m",\u044f:"r"};function La(n,a){void 0===n&&(n=77);let e=o9[a][n];if(e)return{defaultMetrics:!1,depth:e[0],height:e[1],italic:e[2],skew:e[3]};if(11034===n)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0};let i=String.fromCodePoint(n);if(i in Lm)n=Lm[i].codePointAt(0);else if(a9.test(i))return n=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}var na=class{constructor(n,a,e){this.id=n,this.sizeDelta=a,this.cramped=e;let i={"-4":2,"-3":1,0:0}[a];this.metrics=Object.keys(Im).reduce((o,s)=>ge(At({},o),{[s]:Im[s][i]}),{})}getFontSize(n){return Math.max(1,n+this.sizeDelta)}get sup(){return Hn[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return Hn[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return Hn[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return Hn[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return Hn[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},Hn={7:new na(7,0,!1),6:new na(6,0,!0),5:new na(5,0,!1),4:new na(4,0,!0),3:new na(3,-3,!1),2:new na(2,-3,!0),1:new na(1,-4,!1),0:new na(0,-4,!0)};function Ao(n,a){return null===n?0:function r9(n,a){var e;if(!n)return 0;let i={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(e=n.unit)?e:"pt"];if(Number.isFinite(a)){let o=10**a;return Math.round(n.dimension/10*i*o)/o}return n.dimension*i}(n,a)/10}function ld(n){var a;return`${n.dimension}${null!=(a=n.unit)?a:"pt"}`}Hn.displaystyle=Hn[7],Hn.textstyle=Hn[5],Hn.scriptstyle=Hn[3],Hn.scriptscriptstyle=Hn[1];var fe=class{constructor(n,a,e){var i,o,s,r,l,c;n instanceof fe&&(this.parent=n),n instanceof fe||(this.registers=null!=(i=n.registers)?i:{}),this.isPhantom=null!=(r=null!=(s=a?.isPhantom)?s:null==(o=this.parent)?void 0:o.isPhantom)&&r;let d,u=At({},n);if(a&&(a.letterShapeStyle&&"auto"!==a.letterShapeStyle&&(u.letterShapeStyle=a.letterShapeStyle),a.color&&"none"!==a.color&&(u.color=a.color),a.backgroundColor&&"none"!==a.backgroundColor&&(u.backgroundColor=a.backgroundColor),a.fontSize&&"auto"!==a.fontSize&&a.fontSize!==(null==(l=this.parent)?void 0:l._size)&&(this._size=a.fontSize)),this.letterShapeStyle=null!=(c=u.letterShapeStyle)?c:"tex",this.color=u.color,this.backgroundColor=u.backgroundColor,"string"==typeof e){if(n instanceof fe)switch(e){case"cramp":d=n.mathstyle.cramp;break;case"superscript":d=n.mathstyle.sup;break;case"subscript":d=n.mathstyle.sub;break;case"numerator":d=n.mathstyle.fracNum;break;case"denominator":d=n.mathstyle.fracDen}switch(e){case"textstyle":d=Hn.textstyle;break;case"displaystyle":d=Hn.displaystyle;break;case"scriptstyle":d=Hn.scriptstyle;break;case"scriptscriptstyle":d=Hn.scriptscriptstyle}}this._mathstyle=d,this.atomIdsSettings=n.atomIdsSettings,this.renderPlaceholder=u.renderPlaceholder}get mathstyle(){let n=this._mathstyle,a=this.parent;for(;!n;)n=a._mathstyle,a=a.parent;return n}getRegister(n){var a;return null!=(a=this.registers)&&a[n]?this.registers[n]:this.parent?this.parent.getRegister(n):void 0}getRegisterAsGlue(n){var a;if(null!=(a=this.registers)&&a[n]){let e=this.registers[n];return"object"==typeof e&&"glue"in e?e:"object"==typeof e&&"dimension"in e?{glue:{dimension:e.dimension}}:"number"==typeof e?{glue:{dimension:e}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(n)}getRegisterAsEm(n){return Ao(this.getRegisterAsDimension(n))}getRegisterAsDimension(n){var a;if(null!=(a=this.registers)&&a[n]){let e=this.registers[n];return"object"==typeof e&&"glue"in e?e.glue:"object"==typeof e&&"dimension"in e?e:"number"==typeof e?{dimension:e}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(n)}setRegister(n,a){void 0!==a?this.registers[n]=a:delete this.registers[n]}setGlobalRegister(n,a){let e=this;for(;e.parent;)e.setRegister(n,void 0),e=e.parent;e.setRegister(n,a)}get size(){let n=this._size,a=this.parent;for(;!n;)n=a._size,a=a.parent;return n}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);let n=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,n}scale(n){return n*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get effectiveFontSize(){return ad[Math.max(1,this.size+this.mathstyle.sizeDelta)]}get computedColor(){let n=this.color,a=this.parent;return!n&&a&&(n=a.color,a=a.parent),n??""}get computedBackgroundColor(){let n=this.backgroundColor,a=this.parent;return!n&&a&&(n=a.backgroundColor,a=a.parent),n??""}get metrics(){return this.mathstyle.metrics}},cd={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},ud={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},Zm={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:"m 529 160\n  c -179 0 -524 -115 -524 -115\n  c -5 -1 -9 -5 -9 -10\n  c 0 -1 1 -2 1 -3\n  l 4 -22\n  c 1 -5 5 -9 11 -9\n  h 2\n  s 338 93 512 92\n  c 174 0 513 -92 513 -92\n  h 2\n  c 5 0 9 4 11 9\n  l 5 22\n  c 1 6 -2 12 -8 13\n  c 0 0 -342 115 -520 115\n  z\n  ",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},sr=class{constructor(n){sr._registry[n]=this}static createAtom(n,a,e,i){return sr._registry[n].createAtom(a,e,i)}static serialize(n,a){return sr._registry[n[0].mode].serialize(n,a)}static applyStyle(n,a,e){return sr._registry[n].applyStyle(a,e)}},ia=sr;function Wi(n,a){let o,e=[],i=[];for(let s of n)if("first"!==s.type&&s.style){let r;"variant"===a?(r=s.style.variant,s.style.variantStyle&&"up"!==s.style.variantStyle&&(r+="-"+s.style.variantStyle)):"cssClass"===a?"group"===s.type&&(r=s.customClass):r=s.style[a],r===o?i.push(s):(i.length>0&&e.push(i),i=[s],o=r)}return i.length>0&&e.push(i),e}ia._registry={};var _9=["","chem","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","latex","composition","error","placeholder","supsub","none","mathfield"],p9={mord:{mop:3,mbin:4,mrel:5,minner:3},mop:{mord:3,mop:3,rel:5,minner:3},mbin:{mord:4,mop:4,mopen:4,minner:4},mrel:{mord:5,mop:5,mopen:5,minner:5},mclose:{mop:3,mbin:4,mrel:5,minner:3},mpunct:{mord:3,mop:3,mrel:3,mopen:3,mpunct:3,minner:3},minner:{mord:3,mop:3,mbin:4,mrel:5,mopen:3,mpunct:3,minner:3}},h9={mord:{mop:3},mop:{mord:3,mop:3},mclose:{mop:3},minner:{mop:3}};function rr(n,a){if("string"==typeof n)return n;if("number"==typeof n){Number.isFinite(n);let e=Math.ceil(100*n)/100;return 0===e?"0":e.toString()+(a??"")}return""}var Nt=class{constructor(n,a){var e,i,o,s,r,l;if("number"==typeof n?this.value=String.fromCodePoint(n):"string"==typeof n?this.value=n:Pn(n)?this.children=n.filter(u=>null!==u):n&&n instanceof Nt&&(this.children=[n]),this.type=null!=(e=a?.type)?e:"",this.isSelected=!1,this.isTight=null!=(i=a?.isTight)&&i,this.newList=null!=(o=a?.newList)&&o,null!=a&&a.properties)for(let u of Object.keys(a.properties))this.setStyle(u,a.properties[u]);null!=a&&a.attributes&&(this.attributes=a.attributes),this.classes=null!=(s=a?.classes)?s:"";let c=a?.fontFamily||"Main-Regular";if(null!=a&&a.style&&this.value&&(c=ia.applyStyle(null!=(r=a.mode)?r:"math",this,a.style)||"Main-Regular"),this.height=0,this.depth=0,this.skew=0,this.italic=0,this.maxFontSize=0,"latex"===this.type)this.height=.8,this.depth=.2;else if("number"==typeof n){let u=La(n,c);this.height=u.height,this.depth=u.depth,this.skew=u.skew,this.italic=u.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this.skew=-1/0,this.italic=-1/0;for(let u=0;u<this.value.length;u++){let d=La(this.value.codePointAt(u),c||"Main-Regular");this.height=Math.max(this.height,d.height),this.depth=Math.max(this.depth,d.depth),this.skew=d.skew,this.italic=d.italic}}else if(this.children&&this.children.length>0)if(1===this.children.length){let u=this.children[0];this.height=u.height,this.depth=u.depth,this.maxFontSize=u.maxFontSize,this.skew=u.skew,this.italic=u.italic}else{let u=-1/0,d=-1/0,m=0;for(let p of this.children)p.height>u&&(u=p.height),p.depth>d&&(d=p.depth),m=Math.max(m,null!=(l=p.maxFontSize)?l:0);this.height=u,this.depth=d,this.maxFontSize=m}void 0!==a?.height&&(this.height=a.height),void 0!==a?.depth&&(this.depth=a.depth),void 0!==a?.maxFontSize&&(this.maxFontSize=a.maxFontSize)}set atomID(n){void 0===n||0===n.length||(this.attributes||(this.attributes={}),this.attributes["data-atom-id"]=n)}selected(n){if(this.isSelected!==n&&(this.isSelected=n,this.children))for(let a of this.children)a.selected(n)}setStyle(n,a,e){if(void 0===a)return;let i=rr(a,e);i.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[n]=i)}setTop(n){Number.isFinite(n)&&Math.abs(n)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=rr(n,"em"),this.height-=n,this.depth+=n)}get left(){var n;return null!=(n=this.cssProperties)&&n["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=rr(n,"em")))}set right(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=rr(n,"em")))}set width(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties.width:(this.cssProperties||(this.cssProperties={}),this.cssProperties.width=rr(n,"em")))}wrap(n,a){let e=n.parent;if(!e)return this;n.isPhantom&&this.setStyle("opacity",0);let i=n.computedColor;i===e.computedColor&&(i=""),this.setStyle("color",i);let r,o=n.effectiveFontSize===e.effectiveFontSize?void 0:n.effectiveFontSize,s=n.computedBackgroundColor;if(this.isSelected&&(s=Tm(s)),s===e.computedBackgroundColor&&(s=""),!(o||s||a&&(a.classes||a.type)))return this;s?(r=oa(this,a),r.selected(this.isSelected),r.setStyle("background-color",s),r.setStyle("display","inline-block")):r=new Nt(this,a);let l=n.scalingFactor;return 1!==l&&(r.setStyle("font-size",100*l,"%"),r.height*=l,r.depth*=l,r.italic*=l,r.skew*=l),r}wrapSelect(n){if(!this.isSelected)return this;if(!n.parent)return this;let a=Tm(n.computedBackgroundColor),e=oa(this);return e.selected(!0),e.setStyle("background-color",a),e.setStyle("display","inline-block"),e}toMarkup(){var n,a,e;let i=null!=(n=this.value)?n:"";if(this.children)for(let l of this.children)i+=l.toMarkup();let o=this.classes.split(" ");o.push(null!=(a={latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])?a:""),"latex"===this.caret&&o.push("ML__latex-caret");let s=1===o.length?o[0]:o.filter((l,c,u)=>l.length>0&&u.indexOf(l)===c).join(" "),r="";if(i.length>0&&"\u200b"!==i||s.length>0||this.cssId||this.htmlData||this.htmlStyle||this.attributes||this.cssProperties||this.svgBody||this.svgOverlay){let l="";if(this.cssId&&(l+=` id="${this.cssId.replace(/ /g,"-")}" `),this.htmlData){let u=this.htmlData.split(",");for(let d of u){let m=d.match(/([^=]+)=(.+$)/);if(m){let p=m[1].trim().replace(/ /g,"-");p&&(l+=` data-${p}="${m[2]}" `)}else{let p=d.trim().replace(/ /g,"-");p&&(l+=` data-${p} `)}}}if(this.htmlStyle){let u=this.htmlStyle.split(";"),d="";for(let m of u){let p=m.match(/([^=]+):(.+$)/);if(p){let b=p[1].trim().replace(/ /g,"-");b&&(d+=`${b}:${p[2]};`)}}d&&(l+=` style="${d}"`)}if(this.attributes&&(l+=" "+Object.keys(this.attributes).map(u=>`${u}="${this.attributes[u]}"`).join(" ")),s.length>0&&(l+=` class="${s}"`),this.cssProperties){let u=Object.keys(this.cssProperties).map(d=>`${d}:${this.cssProperties[d]}`).join(";");u.length>0&&(l+=` style="${u}"`)}let c="";this.svgBody?c=function c9(n){if(ud[n]){let[u,d,m]=ud[n];return`<span style="display:inline-block;height:${m/2}em;min-width:0"><span class="stretchy" style="height:${m}em"><svg width="100%" height="${m}em" viewBox="0 0 ${u} ${d}" preserveAspectRatio="none" ><path fill="currentcolor" d="${Zm[n]}"></path></svg></span></span>`}let s,r,[a,e,i,o]=cd[n],l=i/1e3;3===a.length?(s=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],r=["xMinYMin","xMidYMin","xMaxYMin"]):2===a.length?(s=["slice-1-of-2","slice-2-of-2"],r=["xMinYMin","xMaxYMin"]):(s=["slice-1-of-1"],r=[o]);let c=a.map((u,d)=>`<span class="${s[d]}" style=height:${l}em><svg width=400em height=${l}em viewBox="0 0 400000 ${i}" preserveAspectRatio="${r[d]} slice"><path fill="currentcolor" d="${Zm[u]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${l}em;min-width:${e}em;">${c}</span>`}(this.svgBody):this.svgOverlay&&(c='<span style="',c+="display: inline-block;",c+=`height:${this.height+this.depth}em;`,c+=`vertical-align:${this.depth}em;`,c+='">',c+=i,c+="</span>",c+='<svg style="position:absolute;overflow:overlay;',c+=`height:${this.height+this.depth}em;`,null!=(e=this.cssProperties)&&e.padding?(c+=`top:${this.cssProperties.padding}em;`,c+=`left:${this.cssProperties.padding}em;`,c+=`width:calc(100% - 2 * ${this.cssProperties.padding}em );`):c+="top:0;left:0;width:100%;",c+="z-index:2;",c+='"',this.svgStyle&&(c+=` style="${this.svgStyle}"`),c+=`>${this.svgOverlay}</svg>`),r=`<span${l}>${i}${c}</span>`}return"text"===this.caret?r+='<span class="ML__text-caret"></span>':"math"===this.caret&&(r+='<span class="ML__caret"></span>'),r}tryCoalesceWith(n){if(this.type!==n.type||!/ML__text/.test(this.classes)&&!["mord","mbin","mrel"].includes(this.type)||this.svgBody||!this.value||n.svgBody||!n.value)return!1;if(this.children&&this.children.length>0||n.children&&n.children.length>0)return!1;let i=this.cssProperties?Object.keys(this.cssProperties).length:0;if(i!==(n.cssProperties?Object.keys(n.cssProperties).length:0))return!1;if(i>0)for(let l of Object.keys(this.cssProperties))if(this.cssProperties[l]!==n.cssProperties[l])return!1;let s=this.classes.trim().replace(/\s+/g," ").split(" "),r=n.classes.trim().replace(/\s+/g," ").split(" ");if(s.length!==r.length)return!1;s.sort(),r.sort();for(let[l,c]of s.entries())if("vertical-separator"===c||c!==r[l])return!1;return this.value+=n.value,this.height=Math.max(this.height,n.height),this.depth=Math.max(this.depth,n.depth),this.maxFontSize=Math.max(this.maxFontSize,n.maxFontSize),this.italic=n.italic,!0}};function dd(n){if(!n||0===n.length)return[];n[0].children=dd(n[0].children);let a=[n[0]];for(let e=1;e<n.length;e++)a[a.length-1].tryCoalesceWith(n[e])||(n[e].children=dd(n[e].children),a.push(n[e]));return a}function Ql(n){return n.children&&(n.children=dd(n.children)),n}function Pm(n,a,e){a.newList&&(n=null);let i=a.type;if("first"===i)return null;if("spacing"===i)return n;if(e(n,a),a.children){let o=null;(void 0===i||0===i.length)&&(o=n);for(let s of a.children)o=Pm(o,s,e);(void 0===i||0===i.length)&&(n=o)}return"supsub"!==i&&void 0!==i&&i.length>0&&(n=a),n}function Nm(n,a){n&&Pm(null,n,a)}function gs(n,a=1){return function g9(n){Nm(n,(a,e)=>{"mbin"===e.type&&(!a||/first|none|mbin|mop|mrel|mopen|mpunct/.test(a.type))&&(e.type="mord"),a&&"mbin"===a.type&&/mrel|mclose|mpunct|placeholder/.test(e.type)&&(a.type="mord")})}(n),function f9(n,a){Nm(n,(e,i)=>{var o,s,r,l;let c=null!=(o=e?.type)?o:"none",u=i.isTight?null!=(s=h9[c])?s:null:null!=(r=p9[c])?r:null,d=u&&null!=(l=u[i.type])?l:0;d&&(i.left+=a*(d/18))})}(n,a),n}function oa(n,a){if(!n)return new Nt(null,a);let e=new Nt(null,{classes:"ML__strut"});e.setStyle("height",Math.max(0,n.height),"em");let i=[e];if(0!==n.depth){let o=new Nt(null,{classes:"ML__strut--bottom"});o.setStyle("height",n.height+n.depth,"em"),o.setStyle("vertical-align",-n.depth,"em"),i.push(o)}return i.push(n),new Nt(i,a)}function Ul(n){let a=function u9(n){return cd[n]?cd[n][2]/1e3:ud[n][2]}(n)/2,e=new Nt(null,{height:a+.166,depth:a-.166,maxFontSize:0});return e.svgBody=n,e}var Rl,Tn=class extends Nt{constructor(n,a){var e;let[i,o,s]=function b9(n){var a;let[e,i]=function v9(n){if("individualShift"in n){let a=n.individualShift,e=a[0],i=[e],o=-e.shift-e.box.depth,s=o;for(let r=1;r<a.length;r++){let l=a[r],c=-l.shift-s-l.box.depth;s+=c,i.push(c-(e.box.height+e.box.depth)),i.push(l),e=l}return[i,o]}if("top"in n){let a=n.top;for(let e of n.children)a-="number"==typeof e?e:e.box.height+e.box.depth;return[n.children,a]}if("bottom"in n)return[n.children,-n.bottom];if("firstBaseline"in n){let a=n.firstBaseline[0];if("number"==typeof a)throw new Error("First child must be an element.");return[n.firstBaseline,-a.box.depth]}if("shift"in n){let a=n.children[0];if("number"==typeof a)throw new Error("First child must be an element.");return[n.children,-a.box.depth-n.shift]}return[null,0]}(n);if(!e)return[[],0,0];let o=0;for(let b of e)if("number"!=typeof b){let y=b.box;o=Math.max(o,y.maxFontSize,y.height)}o+=2;let s=new Nt(null,{classes:"pstrut"});s.setStyle("height",o,"em");let r=[],l=i,c=i,u=i;for(let b of e){if("number"==typeof b)u+=b;else{let y=b.box,C=null!=(a=b.classes)?a:[],I=new Nt([s,y],{classes:C.join(" "),style:b.style});I.setStyle("top",-o-u-y.depth,"em"),b.marginLeft&&I.setStyle("margin-left",b.marginLeft,"em"),b.marginRight&&I.setStyle("margin-right",b.marginRight,"em"),r.push(I),u+=y.height+y.depth}l=Math.min(l,u),c=Math.max(c,u)}let d=new Nt(r,{classes:"vlist"});if(d.setStyle("height",c,"em"),l>=0)return[[new Nt(d,{classes:"vlist-r"})],c,-l];let m=new Nt(new Nt(null),{classes:"vlist"});m.setStyle("height",-l,"em");let p=new Nt(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new Nt([d,p],{classes:"vlist-r"}),new Nt(m,{classes:"vlist-r"})],c,-l]}(n);super(1===i.length?i[0]:i,{classes:(null!=(e=a?.classes)?e:"")+" vlist-t"+(2===i.length?" vlist-t2":""),height:o,depth:s,type:a?.type})}},k9=[[8205,1],[65038,2],[127995,5],[129456,4],[917536,96]],Dm=[127462,127487];function jm(n){var a;if(void 0===Rl){Rl={};for(let e of k9)for(let i=e[0];i<=e[0]+e[1]-1;i++)Rl[i]=!0}return null!=(a=Rl[n])&&a}function C9(n){return n>=Dm[0]&&n<=Dm[1]}function qm(n){if(/^[\u0020-\u00FF]*$/.test(n))return n;let a=[],e=function w9(n){let a=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(13===i&&10===n.charCodeAt(e+1)&&(i=10,e++),(13===i||12===i)&&(i=10),0===i&&(i=65533),i>=55296&&i<=56319){let o=n.charCodeAt(e+1);o>=56320&&o<=57343&&(i=65536+1024*(i-55296)+(o-56320),e++)}a.push(i)}return a}(n),i=0;for(;i<e.length;){let o=e[i++],s=e[i];if(8205===s){let r=i-1;for(i+=2;8205===e[i];)i+=2;a.push(String.fromCodePoint(...e.slice(r,i-r+1)))}else if(jm(s)){let r=i-1;for(;jm(e[i]);)i+=8205===e[i]?2:1;a.push(String.fromCodePoint(...e.slice(r,2*i-r-1)))}else C9(o)?(i+=1,a.push(String.fromCodePoint(...e.slice(i-2,2)))):a.push(String.fromCodePoint(o))}return a}function A9(n,a){var e,i,o,s;let r=[],l=n.next();if(l&&"\\relax"!==l)if("\\noexpand"===l)l=n.next(),l&&r.push(l);else if("\\obeyspaces"===l)n.obeyspaces=!0;else if("\\space"===l||"~"===l)r.push("<space>");else if("\\bgroup"===l)r.push("<{>");else if("\\egroup"===l)r.push("<}>");else if("\\string"===l){if(l=n.next(),l)if(l.startsWith("\\"))for(let c of l)r.push("\\"===c?"\\backslash":c);else"<{>"===l?r.push("\\{"):"<space>"===l?r.push("~"):"<}>"===l&&r.push("\\}")}else if("\\csname"===l){for(;"<space>"===n.peek();)n.next();let c="",u=!1,d=[];do{0===d.length&&(/^#[\d?@]$/.test(n.peek())?(d=fs(null!=(i=null!=(e=a?.(n.get().slice(1)))?e:a?.("?"))?i:"\\placeholder{}",a),l=d[0]):(l=n.next(),d=l?[l]:[])),u=0===d.length,!u&&"\\endcsname"===l&&(u=!0,d.shift()),u||(u="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||"string"==typeof l&&l.length>1&&l.startsWith("\\")),u||(c+=d.shift())}while(!u);c&&r.push("\\"+c),r.push(...d)}else if("\\endcsname"!==l)if(l.length>1&&l.startsWith("#")){let c=l.slice(1);r.push(...fs(null!=(s=null!=(o=a?.(c))?o:a?.("?"))?s:"\\placeholder{}",a))}else r.push(l);return r}function fs(n,a=null){let e=[],i="";for(let r of n.toString().split(/\r?\n/)){i&&e.push(i),i=" ";let l=r.match(/((?:\\%)|[^%])*/);null!==l&&e.push(l[0])}let o=new class{constructor(n){this.s=qm(n),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(n){let a=n.exec("string"==typeof this.s?this.s.slice(this.pos):this.s.slice(this.pos).join(""));return null!=a&&a[0]?(this.pos+=a[0].length,a[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let n=this.get();if("\\"===n){if(!this.end()){let a=this.match(/^[a-zA-Z\*]+/);if(a)this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);else if(a=this.get()," "===a)return"<space>";return"\\"+a}}else{if("{"===n)return"<{>";if("}"===n)return"<}>";if("^"===n){if("^"===this.peek()){this.get();let a=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(a)return String.fromCodePoint(Number.parseInt(a.slice(a.lastIndexOf("^")+1),16))}return n}if("#"===n){if(!this.end()){let a=!1;return/[\d?@]/.test(this.peek())&&(a=!0,this.pos+1<this.s.length)&&(a=/[^\dA-Za-z]/.test(this.s[this.pos+1])),a?"#"+this.get():"#"}}else if("$"===n)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return n}}(e.join("")),s=[];do{s.push(...A9(o,a))}while(!o.end());return s}function un(n){let a="",e=[];for(let i of n)i&&(/[a-zA-Z\*]/.test(i[0])&&e.push(a),e.push(i),/\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(i)&&e.push(" "),a=/\\[a-zA-Z]+\*?$/.test(i)?" ":"");return e.join("")}function lr(n){return un(n.map(a=>{var e;return null!=(e={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[a])?e:a}))}var O9=class extends Nt{constructor(n,a,e){super(null,e),this.mathfield=a,this.htmlData=`placeholder-id="${n}" `;let i=function S9(n){return oa(gs(n.model.root.render(new fe({registers:n.registers},{fontSize:5,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(a._mathfield);this.height=i.height,this.depth=i.depth}toMarkup(){let n=[],a=this.classes.split(" "),e=1===a.length?a[0]:a.filter((o,s,r)=>o.length>0&&r.indexOf(o)===s).join(" ");if(this.cssId&&n.push(`id="${this.cssId.replace(/ /g,"-")}"`),this.htmlData){let o=this.htmlData.split(",");for(let s of o){let r=s.match(/([^=]+)=(.+$)/);if(r){let l=r[1].trim().replace(/ /g,"-");l&&n.push(`data-${l}=${r[2]}`)}else{let l=s.trim().replace(/ /g,"-");l&&n.push(`data-${l}`)}}}if(this.htmlStyle){let o=this.htmlStyle.split(";"),s="";for(let r of o){let l=r.match(/([^=]+):(.+$)/);if(l){let c=l[1].trim().replace(/ /g,"-");c&&(s+=`${c}:${l[2]};`)}}s&&n.push(`style="${s}"`)}this.attributes&&n.push(...Object.keys(this.attributes).map(o=>`${o}="${this.attributes[o]}"`)),e.length>0&&n.push(`class="${e}"`);let i=this.mathfield;return n.push(`style="display:inline-block; width:${i.clientWidth}px; height:${i.clientHeight}px;" `),`<span ${n.join(" ")}></span>`}},Za=["above","body","below","superscript","subscript"];function Pa(n){return"string"==typeof n&&Za.includes(n)}function zl(n){return void 0!==n&&Array.isArray(n)&&2===n.length}var uo=class{constructor(n,a,e){var i,o,s,r,l,c;this.id=void 0,this.verbatimLatex=void 0,this._isDirty=!1,this._changeCounter=0,this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.skipBoundary=!1,this.captureSelection=!1,this.type=n,this.context=a,"string"==typeof e?.value&&(this.value=e.value),this.command=null!=(o=null!=(i=e?.command)?i:this.value)?o:"",this.mode=null!=(s=e?.mode)?s:"math",this.isFunction=null!=(r=e?.isFunction)&&r,this.subsupPlacement=e?.limits,this.style=null!=(l=e?.style)?l:{},this.displayContainsHighlight=null!=(c=e?.displayContainsHighlight)&&c,null!=e&&e.serialize&&(uo.customSerializer[e.command]=e.serialize)}static createBox(n,a,e){var i,o,s;if(!a)return null;let r=function E9(n){let a,e=[],i=[];for(let o of n)if(a||o.style){let s=o.computedStyle;a&&s.color===a.color&&s.backgroundColor===a.backgroundColor&&s.fontSize===a.fontSize?i.push(o):(i.length>0&&e.push(i),i=[o],a=s)}else i.push(o);return i.length>0&&e.push(i),e}(a);if(1===r.length){let u=r[0];return _d(n,u,u[0].style?ge(At({},e),{style:{color:u[0].style.color,backgroundColor:u[0].style.backgroundColor,fontSize:u[0].style.fontSize}}):e)}let l=[],c=e?.newList;for(let u of r){let m=_d(new fe(n,{color:null==(i=u[0].style)?void 0:i.color,backgroundColor:null==(o=u[0].style)?void 0:o.backgroundColor,fontSize:null==(s=u[0].style)?void 0:s.fontSize}),u,{newList:c});m&&(c=!1,l.push(m))}return 0===l.length?null:1!==l.length||null!=e&&e.classes||null!=e&&e.type?new Nt(l,{classes:e?.classes,type:e?.type,newList:e?.newList}).wrap(n):l[0].wrap(n)}static serialize(n,a){return Pn(n)?xs(n,a):"number"==typeof n||"boolean"==typeof n?n.toString():"string"==typeof n?n.replace(/\s/g,"~"):void 0===n?"":a.expandMacro||"string"!=typeof n.verbatimLatex?n.command&&uo.customSerializer[n.command]?uo.customSerializer[n.command](n,a):n.serialize(a):n.verbatimLatex}static commonAncestor(n,a){if(n===a||n.parent===a.parent)return n.parent;let e=new WeakSet,{parent:i}=n;for(;i;)e.add(i),i=i.parent;for(i=a.parent;i;){if(e.has(i))return i;i=i.parent}Boolean(i)}static fromJson(n,a){let e=new uo(n.type,a,n);for(let i of Za)n[i]&&e.setChildren(n[i],i);return e}toJson(){let n={type:this.type};if("math"!==this.mode&&(n.mode=this.mode),this.command&&this.command!==this.value&&(n.command=this.command),void 0!==this.value&&(n.value=this.value),this.style&&Object.keys(this.style).length>0&&(n.style=At({},this.style)),void 0!==this.verbatimLatex&&(n.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(n.explicitSubsupPlacement=!0),this.isFunction&&(n.isFunction=!0),this.displayContainsHighlight&&(n.displayContainsHighlight=!0),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.skipBoundary&&(n.skipBoundary=!0),this.captureSelection&&(n.captureSelection=!0),this._branches)for(let a of Object.keys(this._branches))this._branches[a]&&(n[a]=this._branches[a].filter(e=>"first"!==e.type).map(e=>e.toJson()));return n}get changeCounter(){return this._changeCounter}get isDirty(){return this._isDirty}set isDirty(n){if(this._isDirty=n,n){this._changeCounter++,this.verbatimLatex=void 0,this._children=void 0;let{parent:a}=this;for(;a;)a._isDirty=!0,a._changeCounter++,a.verbatimLatex=void 0,a._children=void 0,a=a.parent}}serialize(n){var a;return this.body&&this.command?un([this.command,"{",this.bodyToLatex(n),"}",this.supsubToLatex(n)]):this.body?un([this.bodyToLatex(n),this.supsubToLatex(n)]):this.value&&"\u200b"!==this.value?null!=(a=this.command)?a:function e9(n,a){var e;if("text"===n)return null!=(e=Nl(n,a.codePointAt(0)))?e:a;let i;if(i=Nl(n,a.codePointAt(0)),i)return i;let s=function X7(n){var a;if((n<119808||n>120831)&&(n<8448||n>8527))return{char:String.fromCodePoint(n)};for(let e in ed)if(ed[e]===n){n=null!=(a=e.codePointAt(0))?a:0;break}for(let e of Sm)if(n>=e.start&&n<e.start+e.len)return{char:String.fromCodePoint(n-e.start+e.offset),variant:e.variant,style:e.style};return{char:String.fromCodePoint(n)}}(a.codePointAt(0));return s.style||s.variant?(i=s.char,s.variant&&(i="\\"+s.variant+"{"+i+"}"),"bold"===s.style?i="\\mathbf{"+i+"}":"italic"===s.style?i="\\mathit{"+i+"}":"bolditalic"===s.style&&(i="\\mathbfit{"+i+"}"),"\\mathord{"+i+"}"):""}(this.mode,this.value):""}bodyToLatex(n){return xs(this.body,n)}aboveToLatex(n){return xs(this.above,n)}belowToLatex(n){return xs(this.below,n)}supsubToLatex(n){let a="";if(void 0!==this.branch("subscript")){let e=xs(this.subscript,n);a+=0===e.length?"_{}":1===e.length?"_"+e:`_{${e}}`}if(void 0!==this.branch("superscript")){let e=xs(this.superscript,n);a+=0===e.length?"^{}":1===e.length?"\u2032"===e?"^\\prime ":"\u2033"===e?"^\\doubleprime ":"^"+e:`^{${e}}`}return a}get treeDepth(){let n=1,a=this.parent;for(;a;)a=a.parent,n+=1;return n}get inCaptureSelection(){let n=!1,a=this;for(;a;){if(a.captureSelection){n=!0;break}a=a.parent}return n}branch(n){if(Pa(n)&&this._branches)return this._branches[n]}get branches(){if(!this._branches)return[];let n=[];for(let a of Za)this._branches[a]&&n.push(a);return n}createBranch(n){return Pa(n),Pa(n)?(this._branches?this._branches[n]||(this._branches[n]=[this.makeFirstAtom(n)]):this._branches={[n]:[this.makeFirstAtom(n)]},this.isDirty=!0,this._branches[n]):[]}get row(){return zl(this.treeBranch)?this.treeBranch[0]:-1}get col(){return zl(this.treeBranch)?this.treeBranch[1]:-1}get body(){var n;return null==(n=this._branches)?void 0:n.body}set body(n){this.setChildren(n,"body")}get superscript(){var n;return null==(n=this._branches)?void 0:n.superscript}set superscript(n){this.setChildren(n,"superscript")}get subscript(){var n;return null==(n=this._branches)?void 0:n.subscript}set subscript(n){this.setChildren(n,"subscript")}get above(){var n;return null==(n=this._branches)?void 0:n.above}set above(n){this.setChildren(n,"above")}get below(){var n;return null==(n=this._branches)?void 0:n.below}set below(n){this.setChildren(n,"below")}get computedStyle(){var n;if(!this.parent)return At({},null!=(n=this.style)?n:{});let a=void 0!==this.style.verbatimColor,e=void 0!==this.style.verbatimBackgroundColor,i=At(At({},this.parent.computedStyle),this.style);return delete i.variant,delete i.variantStyle,e||delete i.verbatimBackgroundColor,a||delete i.verbatimColor,i}applyStyle(n){this.isDirty=!0,this.style=At(At({},this.style),n),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize;for(let a of this.children)a.applyStyle(n)}getInitialBaseElement(){let a;return this.hasEmptyBranch("body")||(a=this.body[1].getInitialBaseElement()),a??this}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){if("leftright"===this.type)return!1;let n=this.getInitialBaseElement();return/mord/.test(n.type)}hasEmptyBranch(n){let a=this.branch(n);return!a||1===a.length}setChildren(n,a){if(!n||(Pa(a),!Pa(a)))return;let i=[this.makeFirstAtom(a),...n];this._branches?this._branches[a]=i:this._branches={[a]:i};for(let o of n)o.parent=this,o.treeBranch=a;this.isDirty=!0}makeFirstAtom(n){let a=new uo("first",this.context,{mode:this.mode});return a.parent=this,a.treeBranch=n,a}addChild(n,a){this.createBranch(a).push(n),this.isDirty=!0,n.parent=this,n.treeBranch=a}addChildBefore(n,a){let e=this.createBranch(a.treeBranch);e.splice(e.indexOf(a),0,n),this.isDirty=!0,n.parent=this,n.treeBranch=a.treeBranch}addChildAfter(n,a){let e=this.createBranch(a.treeBranch);e.splice(e.indexOf(a)+1,0,n),this.isDirty=!0,n.parent=this,n.treeBranch=a.treeBranch}addChildren(n,a){for(let e of n)this.addChild(e,a)}addChildrenAfter(n,a){let e=this.createBranch(a.treeBranch);e.splice(e.indexOf(a)+1,0,...n),this.isDirty=!0;for(let i of n)i.parent=this,i.treeBranch=a.treeBranch;return n[n.length-1]}removeBranch(n){let a=this.branch(n);if(Pa(n)&&(this._branches[n]=void 0),!a)return[];for(let e of a)e.parent=void 0,e.treeBranch=void 0;return a.shift(),this.isDirty=!0,a}removeChild(n){if("first"===n.type)return;let a=this.branch(n.treeBranch),e=a.indexOf(n);a.splice(e,1),this.isDirty=!0,n.parent=void 0,n.treeBranch=void 0}get siblings(){return"root"===this.type?[]:this.parent.branch(this.treeBranch)}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:n}=this;return n[n.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)-1]}get rightSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)+1]}get hasChildren(){return Boolean(this._branches&&this.children.length>0)}get firstChild(){return this.children[0]}get lastChild(){let{children:n}=this;return n[n.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let n=[];for(let a of Za)if(this._branches[a])for(let e of this._branches[a])n.push(...e.children),n.push(e);return this._children=n,n}render(n,a){if("first"===this.type&&!n.atomIdsSettings)return null;let e=new fe(n,this.style),i="";"root"===this.type&&(i+=" ML__base"),this.isSelected&&(i+=" ML__selected");let o=this.createBox(e,{classes:i,newList:!0===a?.newList||"first"===this.type});return o?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(o=this.attachSupsub(e,{base:o})),o.wrap(e)):null}attachSupsub(n,a){var e,i;let o=a.base,s=this.superscript,r=this.subscript;if(!s&&!r)return o;let l=null,c=null,u=null!=(e=a.isCharacterBox)?e:this.isCharacterBox(),d=0;if(s){let I=new fe(n,void 0,"superscript");l=uo.createBox(I,s,{newList:!0}),u||(d=o.height-n.metrics.supDrop*I.scalingFactor)}let p,m=0;if(r){let I=new fe(n,void 0,"subscript");c=uo.createBox(I,r,{newList:!0}),u||(m=o.depth+n.metrics.subDrop*I.scalingFactor)}p=n.isDisplayStyle?n.metrics.sup1:n.isCramped?n.metrics.sup3:n.metrics.sup2;let b=.05/n.scalingFactor,y=null;if(c&&l){d=Math.max(d,p,l.depth+.25*n.metrics.xHeight),m=Math.max(m,n.metrics.sub2);let I=n.metrics.defaultRuleThickness;if(d-l.depth-(c.height-m)<4*I){m=4*I-(d-l.depth)+c.height;let U=.8*n.metrics.xHeight-(d-l.depth);U>0&&(d+=U,m-=U)}y=new Tn({individualShift:[{box:c,shift:m,marginLeft:this.isExtensibleSymbol&&o.italic?-o.italic:0},{box:l,shift:-d}]}).wrap(n)}else c&&!l?(m=Math.max(m,n.metrics.sub1,c.height-.3448),y=new Tn({shift:m,children:[{box:c,marginRight:b,marginLeft:this.isCharacterBox()?-(null!=(i=o.italic)?i:0):0}]})):!c&&l&&(d=Math.max(d,p,l.depth+.10775),y=new Tn({shift:-d,children:[{box:l,marginRight:b}]}),y.wrap(n));let C=new Nt(y,{classes:"msubsup"+(this.isSelected?" ML__selected":"")});return this.caret&&(C.caret=this.caret),new Nt([o,C],{type:a.type})}attachLimits(n,a){var e;let i=this.superscript?uo.createBox(new fe(n,this.style,"superscript"),this.superscript,{newList:!0}):null,o=this.subscript?uo.createBox(new fe(n,this.style,"subscript"),this.subscript,{newList:!0}):null;return i||o?function y9(n,a){var e,i,o,s,r;let l=n.metrics,c=new Nt(a.base),u=null!=(e=a.baseShift)?e:0,d=null!=(i=a.slant)?i:0,m=0,p=0;a.above&&(m=null!=(o=a.aboveShift)?o:Math.max(l.bigOpSpacing1,l.bigOpSpacing3-a.above.depth)),a.below&&(p=null!=(s=a.belowShift)?s:Math.max(l.bigOpSpacing2,l.bigOpSpacing4-a.below.height));let b=null;return b=a.below&&a.above?new Tn({bottom:l.bigOpSpacing5+a.below.height+a.below.depth+p+c.depth+u,children:[l.bigOpSpacing5,{box:a.below,marginLeft:-d,classes:["ML__center"]},p,{box:c,classes:["ML__center"]},m,{box:a.above,marginLeft:d,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):a.below&&!a.above?new Tn({top:c.height-u,children:[l.bigOpSpacing5,{box:a.below,marginLeft:-d,classes:["ML__center"]},p,{box:c,classes:["ML__center"]}]}).wrap(n):!a.below&&a.above?new Tn({bottom:c.depth+u,children:[{box:c,classes:["ML__center"]},m,{box:a.above,marginLeft:d,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):new Tn({bottom:c.depth+u,children:[{box:c},l.bigOpSpacing5]}).wrap(n),new Nt(b,{type:null!=(r=a.type)?r:"mop"})}(n,ge(At({},a),{above:i,below:o,type:null!=(e=a?.type)?e:"mop"})):a.base.wrap(n)}bind(n,a){if(!a||n.isPhantom||"\u200b"===this.value)return a;let e=this.parent;for(;e&&!e.captureSelection;)e=e.parent;return null!=e&&e.captureSelection||(this.id||(this.id=n.makeID()),a.atomID=this.id),a}createMathfieldBox(n,a,e){let o=new O9(e,a,{type:"mathfield",mode:this.mode,maxFontSize:n.scalingFactor,style:ge(At({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:""});return n.isTight&&(o.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(o.italic=0),o.right=o.italic,this.bind(n,o),oa(o,{type:"mord"})}createBox(n,a){var e,i,o;let s=null!=(e=this.value)?e:this.body,r=function m9(n){return _9.includes(n)}(this.type)?this.type:void 0,l=null!=(i=a?.classes)?i:"";"text"===this.mode&&(l+=" ML__text");let c="string"==typeof s||void 0===s?new Nt(s??null,{type:r,mode:this.mode,maxFontSize:n.scalingFactor,style:ge(At({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:l,newList:a?.newList}):null!=(o=uo.createBox(n,s,{type:r,mode:this.mode,style:this.style,classes:l,newList:a?.newList}))?o:new Nt(null);return n.isTight&&(c.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(c.italic=0),c.right=c.italic,this.bind(n,c),this.caret&&!this.superscript&&!this.subscript&&(c.caret=this.caret),c}isDigit(){var n;return"mord"===this.type&&this.value?/^[\d,.]$/.test(this.value):"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var n;return"mord"===this.type&&this.value&&/^[\d,.]$/.test(this.value)?this.value:"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value?".":""}},Tt=uo;function xs(n,a){if(!n||0===n.length)return"";if("first"===n[0].type){if(1===n.length)return"";n=n.slice(1)}return 0===n.length?"":un(Wi(n,"cssClass").map(e=>un(Wi(e,"color").map(i=>un(function d9(n){let a=[],e=[],i="NONE";for(let o of n)"first"!==o.type&&(o.mode!==i?(e.length>0&&a.push(e),e=[o],i=o.mode):e.push(o));return e.length>0&&a.push(e),a}(i).map(o=>ia.serialize(o,a)))))))}function _d(n,a,e){var i,o,s,r,l;function c(y){return"text"===y.mode}if(!a||0===a.length)return null;let b,u=new fe(n,e?.style),d=!(null!=(i=u.atomIdsSettings)&&i.groupNumbers),m=[],p=null!=(o=e?.newList)&&o;if(1===a.length){let y=a[0],C=y.render(u,{newList:p});C&&(d&&y.isSelected&&C.selected(!0),m=[C])}else{let y="",C=!0;for(let I of a){null!=(s=u.atomIdsSettings)&&s.groupNumbers&&y&&(C&&I.isDigit()||!C&&c(I))&&(u.atomIdsSettings.overrideID=y);let D=I.render(u,{newList:p});u.atomIdsSettings&&(u.atomIdsSettings.overrideID=void 0),D&&(p="group"===I.type&&!I.boxType,null!=(r=u.atomIdsSettings)&&r.groupNumbers&&((I.isDigit()||c(I))&&(!y||C!==I.isDigit())&&(C=I.isDigit(),y=null!=(l=I.id)?l:""),y&&(!(I.isDigit()||c(I))||!I.hasEmptyBranch("superscript")||!I.hasEmptyBranch("subscript"))&&(y="")),d&&I.isSelected&&D.selected(!0),m.push(D))}}return 0===m.length?null:(e||u.isTight||m.length>1?(b=new Nt(m,At({isTight:u.isTight},e??{})),b.isSelected=m.every(y=>y.isSelected)):b=m[0],b.wrap(u).wrap(n))}Tt.customSerializer={};var cr=class extends Tt{constructor(n,a,e,i){super("accent",e,{command:n,style:i.style}),i.accentChar?this.accent=i.accentChar:this.svgAccent=i?.svgAccent,this.body=a,this.skipBoundary=!0}static fromJson(n,a){return new cr(n.command,n.body,a,{accentChar:n.accentChar,svgAccent:n.svgAccent,style:n.style})}toJson(){return ge(At({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(n){var a;let e=new fe(n,this.style,"cramp"),i=null!=(a=Tt.createBox(e,this.body))?a:new Nt(null),o=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(o=i.skew);let r,s=Math.min(i.height,Ma);if(this.svgAccent)r=Ul(this.svgAccent),s=e.metrics.bigOpSpacing1-s;else if(this.accent){let c=new Nt(this.accent,{fontFamily:"Main-Regular"});c.italic=0;let u=8407===this.accent?" ML__accent-vec":"";r=new Nt(new Nt(c),{classes:"ML__accent-body"+u})}r=new Tn({shift:0,children:[{box:new Nt(i)},-s,{box:r,marginLeft:i.left+2*o,classes:["ML__center"]}]});let l=new Nt(r,{newList:!0,type:"mord"});return this.caret&&(l.caret=this.caret),this.bind(e,l.wrap(e)),this.attachSupsub(e,{base:l})}},ur={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},Fm=Object.fromEntries(Object.entries(ur).map(([n,a])=>[a,n]));function Jl(n){var a;return null!=(a={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[n])?a:n.codePointAt(0)}function Qm(n,a,e,i,o){let s=new fe(i,o?.style,"textstyle"),r=new Nt(Jl(n),{fontFamily:"Size"+a+"-Regular",classes:"ML__delim-size"+a}).wrap(s);return e&&r.setTop((1-s.scalingFactor)*co),r}function Um(n,a,e,i,o){var s;let r,l,c,u;r=c=u=Jl(n),l=null;let d="Size1-Regular";"\\vert"===n||"\\lvert"===n||"\\rvert"===n||"\\mvert"===n||"\\mid"===n?c=r=u=8739:"\\Vert"===n||"\\lVert"===n||"\\rVert"===n||"\\mVert"===n||"\\|"===n?c=r=u=8741:"\\uparrow"===n?c=u=9168:"\\Uparrow"===n?c=u=8214:"\\downarrow"===n?r=c=9168:"\\Downarrow"===n?r=c=8214:"\\updownarrow"===n?(r=8593,c=9168,u=8595):"\\Updownarrow"===n?(r=8657,c=8214,u=8659):"["===n||"\\lbrack"===n?(r=9121,c=9122,u=9123,d="Size4-Regular"):"]"===n||"\\rbrack"===n?(r=9124,c=9125,u=9126,d="Size4-Regular"):"\\lfloor"===n||"\u230a"===n?(c=r=9122,u=9123,d="Size4-Regular"):"\\lceil"===n||"\u2308"===n?(r=9121,c=u=9122,d="Size4-Regular"):"\\rfloor"===n||"\u230b"===n?(c=r=9125,u=9126,d="Size4-Regular"):"\\rceil"===n||"\u2309"===n?(r=9124,c=u=9125,d="Size4-Regular"):"("===n||"\\lparen"===n?(r=9115,c=9116,u=9117,d="Size4-Regular"):")"===n||"\\rparen"===n?(r=9118,c=9119,u=9120,d="Size4-Regular"):"\\{"===n||"\\lbrace"===n?(r=9127,l=9128,u=9129,c=9130,d="Size4-Regular"):"\\}"===n||"\\rbrace"===n?(r=9131,l=9132,u=9133,c=9130,d="Size4-Regular"):"\\lgroup"===n||"\u27ee"===n?(r=9127,u=9129,c=9130,d="Size4-Regular"):"\\rgroup"===n||"\u27ef"===n?(r=9131,u=9133,c=9130,d="Size4-Regular"):"\\lmoustache"===n||"\u23b0"===n?(r=9127,u=9133,c=9130,d="Size4-Regular"):"\\rmoustache"===n||"\u23b1"===n?(r=9131,u=9129,c=9130,d="Size4-Regular"):"\\surd"===n?(r=57345,u=9143,c=57344,d="Size4-Regular"):"\\ulcorner"===n?(r=9484,c=u=32):"\\urcorner"===n?(r=9488,c=u=32):"\\llcorner"===n?(u=9492,c=r=32):"\\lrcorner"===n&&(r=9496,c=r=32);let m=La(r,d),p=m.height+m.depth,b=La(c,d),y=b.height+b.depth,C=La(u,d),I=C.height+C.depth,D=0,U=1;if(null!==l){let vt=La(l,d);D=vt.height+vt.depth,U=2}let B=p+I+D,q=Math.max(0,Math.ceil((a-B)/(U*y))),et=co;e&&(et*=i.scalingFactor);let Q=(B+q*U*y)/2-et,V=.008,Y=[];Y.push({box:new Nt(u,{fontFamily:d})}),Y.push(-V);let at=new Nt(c,{fontFamily:d});if(null===l)for(let vt=0;vt<q;vt++)Y.push({box:at});else{for(let vt=0;vt<q;vt++)Y.push({box:at});Y.push(-V),Y.push({box:new Nt(l,{fontFamily:d})}),Y.push(-V);for(let vt=0;vt<q;vt++)Y.push({box:at})}Y.push(-V),Y.push({box:new Nt(r,{fontFamily:d})});let tt="";"Size1-Regular"===d?tt=" delim-size1":"Size4-Regular"===d&&(tt=" delim-size4");let rt=new Tn({bottom:Q,children:Y},{classes:tt});return new Nt(rt,ge(At({},o??{}),{classes:(null!=(s=o?.classes)?s:"")+" ML__delim-mult"}))}var Bm=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230a","\u230b","\u2308","\u2309"]),I9=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27ee","\u27ef","\u23b0","\u23b1"]),Rm=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),L9=[0,1.2,1.8,2.4,3],P9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],N9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],D9=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function j9(n){return"small"===n.type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":"Size4-Regular"}function Hl(n,a,e,i,o,s){var r;if(!a||0===a.length||"."===a)return Na(o,n,n);let l;"<"===a||"\\lt"===a?a="\\langle":(">"===a||"\\gt"===a)&&(a="\\rangle"),l=Rm.has(a)?P9:Bm.has(a)?D9:N9;let c=function q9(n,a,e,i){for(let s={"-4":0,"-3":1,0:2}[i.mathstyle.sizeDelta];s<e.length&&"stack"!==e[s].type;s++){let r=La(n,j9(e[s]));if(r.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let l=r.height+r.depth;if("small"===e[s].type&&("scriptscriptstyle"===e[s].mathstyle?l*=ad[Math.max(1,i.size-2)]:"scriptstyle"===e[s].mathstyle&&(l*=ad[Math.max(1,i.size-1)])),l>a)return e[s]}return e[e.length-1]}(Jl(a),e,l,o),u=new fe(o,s?.style,c.mathstyle);return"small"===c.type?function M9(n,a,e,i){let o=new Nt(Jl(n),{fontFamily:"Main-Regular"}).wrap(a,i);return e&&o.setTop((1-a.scalingFactor)*co),o}(a,u,i,{type:n,classes:"ML__small-delim "+(null!=(r=s?.classes)?r:"")}):"large"===c.type?Qm(a,c.size,i,u,ge(At({},s),{type:n})):Um(a,e,i,u,ge(At({},s),{type:n}))}function dr(n,a,e,i,o,s){if("."===a)return Na(o,n,s?.classes);let r=co*o.scalingFactor,u=Math.max(e-r,i+r);return Hl(n,a,Math.max(u/500*901,2*u-.5),!0,o,s)}function Na(n,a,e){let i=new fe(n,void 0,"textstyle");return new Nt(null,{classes:" nulldelimiter "+(e??""),type:a}).wrap(i)}var ji=class extends Tt{constructor(n,a,e){var i,o,s,r;super("overunder",a,{command:n,serialize:e.serialize,style:e.style}),this.skipBoundary=null==(i=e.skipBoundary)||i,this.subsupPlacement=e.supsubPlacement,this.body=e.body,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=null!=(o=e.boxType)?o:"mord",this.paddedBody=null!=(s=e.paddedBody)&&s,this.paddedLabels=null!=(r=e.paddedLabels)&&r}static fromJson(n,a){return new ji(n.command,a,n)}toJson(){let n={};return this.skipBoundary||(n.skipBoundary=!1),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.svgAbove&&(n.svgAbove=this.svgAbove),this.svgBelow&&(n.svgBelow=this.svgBelow),this.svgBody&&(n.svgBody=this.svgBody),"mord"!==this.boxType&&(n.boxType=this.boxType),this.paddedBody&&(n.paddedBody=!0),this.paddedLabels&&(n.paddedLabels=!0),At(At({},super.toJson()),n)}render(n){let a=this.svgBody?Ul(this.svgBody):Tt.createBox(n,this.body,{newList:!0}),e=new fe(n,this.style,"scriptstyle"),i=null;this.svgAbove?i=Ul(this.svgAbove):this.above&&(i=Tt.createBox(e,this.above,{newList:!0}));let o=null;this.svgBelow?o=Ul(this.svgBelow):this.below&&(o=Tt.createBox(e,this.below,{newList:!0})),this.paddedBody&&(a=new Nt([Na(n,"mopen"),a,Na(n,"mclose")],{newList:!0}));let s=function F9(n,a){if(!a.base)return null;if(!a.above&&!a.below){let l=new Nt(a.base,{type:a.type});return l.setStyle("position","relative"),l}let e=0;a.above&&(e=-a.above.depth+n.metrics.bigOpSpacing2);let i=null,o=a.base,r=["ML__center"];return a.paddedAboveBelow&&r.push("ML__label_padding"),a.below&&a.above?i=new Tn({bottom:n.metrics.bigOpSpacing5+a.below.height+a.below.depth+o.depth+0,children:[n.metrics.bigOpSpacing5,{box:a.below,classes:r},{box:o,classes:["ML__center"]},e,{box:a.above,classes:r},n.metrics.bigOpSpacing5]}):a.below?i=new Tn({top:o.height-0,children:[n.metrics.bigOpSpacing5,{box:a.below,classes:r},{box:o,classes:["ML__center"]}]}):a.above&&(i=new Tn({bottom:o.depth+0,children:[{box:o,classes:["ML__center"]},e,{box:a.above,classes:r},n.metrics.bigOpSpacing5]})),new Nt(i,{type:a.type})}(n,{base:a,above:i,below:o,type:"mbin"===this.boxType||"mrel"===this.boxType?this.boxType:"mord",paddedAboveBelow:this.paddedLabels});return s?(s="over-under"===this.subsupPlacement?this.attachLimits(n,{base:s,type:s.type}):this.attachSupsub(n,{base:s}),this.caret&&(s.caret=this.caret),this.bind(n,s)):null}},Nn=class extends Tt{constructor(n,a,e){var i,s,r;super("group",a,{command:e?.command,mode:null!=(i=e?.mode)?i:"math",serialize:e?.serialize,style:e?.style}),this.body=n,this.mathstyleName=e?.mathstyleName,!(null!=e&&e.serialize)||!Boolean(e?.latexClose)||Boolean(e?.latexOpen),this.latexOpen=e?.latexOpen,this.latexClose=e?.latexClose,this.cssId=e?.cssId,this.htmlData=e?.htmlData,this.htmlStyle=e?.htmlStyle,this.customClass=e?.customClass,this.boxType=e?.boxType,this.skipBoundary=!0,this.captureSelection=null!=(s=e?.captureSelection)&&s,this.changeMode=null!=(r=e?.changeMode)&&r,this.displayContainsHighlight=!1,n&&1===n.length&&","===n[0].command&&(this.captureSelection=!0)}static fromJson(n,a){return new Nn(n.body,a,n)}toJson(){let n={};return this.mathstyleName&&(n.mathstyleName=this.mathstyleName),this.latexOpen&&(n.latexOpen=this.latexOpen),this.latexClose&&(n.latexClose=this.latexClose),this.cssId&&(n.cssId=this.cssId),this.htmlData&&(n.htmlData=this.htmlData),this.htmlStyle&&(n.htmlStyle=this.htmlStyle),this.customClass&&(n.customClass=this.customClass),this.boxType&&(n.boxType=this.boxType),this.captureSelection&&(n.captureSelection=!0),this.changeMode&&(n.changeMode=!0),At(At({},super.toJson()),n)}render(n){let a=new fe(n,this.style,this.mathstyleName),e=Tt.createBox(a,this.body,{type:this.boxType,classes:this.customClass,mode:this.mode,style:{backgroundColor:this.style.backgroundColor},newList:!this.boxType});return e?(this.cssId&&(e.cssId=this.cssId),this.htmlData&&(e.htmlData=this.htmlData),this.htmlStyle&&(e.htmlStyle=this.htmlStyle),this.caret&&(e.caret=this.caret),this.bind(n,e)):null}serialize(n){let a=this.bodyToLatex(n);return"string"==typeof this.latexOpen&&(a=this.latexOpen+a+this.latexClose),this.htmlData&&(a=`\\htmlData{${this.htmlData}}{${a}}`),this.htmlStyle&&(a=`\\htmlStyle{${this.htmlStyle}}{${a}}`),this.customClass&&(a=`\\class{${this.customClass}}{${a}}`),this.cssId&&(a=`\\cssId{${this.cssId}}{${a}}`),a}},Da=class extends Tt{constructor(n,a,e,i){super("spacing",e,{command:n,style:a}),this.width=i}static fromJson(n,a){return new Da(n.command,n.style,a,n.width)}toJson(){let n={};return this.width&&(n.width=this.width),At(At({},super.toJson()),n)}render(n){var a;let e;if(this.width)e=new Nt(null,{classes:"mspace"}),e.left=function l9(n){return Ao(n.glue)}(this.width);else{let i=null!=(a={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.command])?a:"mediumspace";e=new Nt(null,{classes:i})}return e=this.bind(n,e),this.caret&&(e.caret=this.caret),e}serialize(n){var a;let e=null!=(a=this.command)?a:"";return"\\hspace"===this.command||"\\hspace*"===this.command?Number.isFinite(this.width)?e+=`{${this.width}em'}`:e+="{0pt}":Number.isFinite(this.width)&&(e+=` ${this.width}em`),e}},$n=class extends Tt{constructor(n,a,e,i){super("leftright",e,{style:i.style,displayContainsHighlight:!0}),this.variant=n,this.body=a,this.leftDelim=i.leftDelim,this.rightDelim=i.rightDelim}static fromJson(n,a){var e;return new $n(null!=(e=n.variant)?e:"",n.body,a,n)}toJson(){let n=super.toJson();return this.variant&&(n.variant=this.variant),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),n}serialize(n){var a,e;let i=this.matchingRightDelim();return un("left...right"===this.variant?["\\left"+(null!=(a=this.leftDelim)?a:"."),this.bodyToLatex(n),"\\right"+i]:"mleft...mright"===this.variant?["\\mleft"+(null!=(e=this.leftDelim)?e:"."),this.bodyToLatex(n),"\\mright"+i]:[this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(n),i])}matchingRightDelim(){var n,a;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let e=null!=(n=this.leftDelim)?n:".";return null!=(a=ur[e])?a:e}render(n){var a,e,i;let o=new fe(n,this.style),s=new fe(n,this.style,"textstyle"),r=null!=(a=Tt.createBox(o,this.body,{newList:!0}))?a:new Nt(null,{newList:!0}),l=r.height/s.scalingFactor,c=r.depth/s.scalingFactor,u=[];if(this.leftDelim&&u.push(this.bind(s,dr("mopen",this.leftDelim,l,c,s,{classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),r){if(r.children)for(let p=0;p<r.children.length;p++){let b=r.children[p];if(b.delim){let y=b.caret;r.children[p]=this.bind(o,dr("minner",b.delim,l,c,o)),r.children[p].caret=y}}u.push(r)}if(this.rightDelim){let p=this.containsCaret?" ML__contains-caret":"",b=this.rightDelim;"?"===b&&(this.context.smartFence?(b=this.matchingRightDelim(),p+=" ML__smart-fence__close"):b="."),u.push(this.bind(s,dr("mclose",b,l,c,s,{classes:p+" ML__close",mode:this.mode,style:this.style})))}let d=null!=(i="mleft...mright"===this.variant||(null==(e=this.leftSibling)?void 0:e.isFunction))&&i,m=new Nt(u,{type:d?"mclose":"minner",classes:"left-right"});return this.caret&&(m.caret=this.caret),this.bind(o,m.wrap(o))}},_r=class extends Tt{constructor(n,a){super("msubsup",n,{style:a?.style})}static fromJson(n,a){let e=new _r(a,n);for(let i of Za)n[i]&&e.setChildren(n[i],i);return e}toJson(){return super.toJson()}render(n){var a;let e=this.leftSibling,i=new fe(n,{isPhantom:!0}),o=null!=(a=e.render(i))?a:new Nt(null),s=new Nt(null,{height:o.height,depth:o.depth});return this.attachSupsub(n,{base:s,isCharacterBox:e.isCharacterBox(),type:"supsub"})}serialize(n){return this.supsubToLatex(n)}},fn=class extends Tt{constructor(n,a){var e;super("placeholder",n,{mode:null!=(e=a?.mode)?e:"math",style:a?.style,value:a?.value||n.placeholderSymbol,command:"\\placeholder"}),this.captureSelection=!0,this.placeholderId=a?.placeholderId,null!=a&&a.default&&(this.defaultValue=a?.default)}static fromJson(n,a){return new fn(a,n)}toJson(){let n=super.toJson();return this.placeholderId&&(n.placeholderId=this.placeholderId),this.value===this.context.placeholderSymbol&&delete n.value,this.defaultValue&&(n.defaultValue=this.defaultValue.map(a=>a.toJson())),n}render(n){if("function"==typeof n.renderPlaceholder)return n.renderPlaceholder(n,this);let a="";return this.caret&&(a+="ML__placeholder-selected "),this.isSelected&&(a+=" ML__selected "),this.createBox(n,{classes:a})}serialize(n){var a;let e=null!=(a=this.value)?a:"";return e===this.context.placeholderSymbol&&(e=""),`\\placeholder${this.placeholderId?`[${this.placeholderId}]`:""}${this.defaultValue?`[${Tt.serialize(this.defaultValue,n)}]`:""}{${e}}`}},md=class extends Tt{constructor(n,a){super("error",a,{value:n,command:n,mode:"math"}),this.verbatimLatex=n}static fromJson(n,a){return new md(n.command,a)}toJson(){return super.toJson()}render(n){let a=this.createBox(n,{classes:"ML__error"});return this.caret&&(a.caret=this.caret),a}},pd=class extends Tt{constructor(n,a,e){var i,o;super("macro",a,{command:n}),this.body=e.body,this.captureSelection=void 0===e.captureSelection?!e.args:e.captureSelection,this.macroArgs=null!=(i=e.args)?i:"",this.expand=null!=(o=e.expand)&&o}static fromJson(n,a){return new pd(n.command,a,n)}toJson(){let n=super.toJson();return this.expand&&(n.expand=!0),void 0!==this.captureSelection&&(n.captureSelection=this.captureSelection),this.macroArgs&&(n.args=this.macroArgs),n}serialize(n){return n.expandMacro&&this.expand?this.bodyToLatex(n):this.command+this.macroArgs}render(n){let a=Tt.createBox(n,this.body);return a?(this.caret&&(a.caret=this.caret),this.bind(n,a)):null}},vs=class extends Tt{constructor(n,a,e,i){super("text",i,{command:n,mode:"text",displayContainsHighlight:!0}),this.value=a,this.verbatimLatex=a,this.applyStyle(e)}static fromJson(n,a){return new vs(n.command,n.value,n.style,a)}toJson(){return super.toJson()}render(n){let a=this.createBox(n);return this.caret&&(a.caret=this.caret),a}serialize(n){var a;return null!=(a=this.verbatimLatex)?a:Nl("text",this.value.codePointAt(0))}};function $l(n){return!/^<({|}|\$|\$\$|space)>$/.test(n)}var Kl=class{constructor(n,a,e){var i,o,s,r,l,c;this.index=0,this.endCount=0,this.tokens=n,this.context=a,this.errors=[],this.args=null!=(i=e.args)?i:null,this.smartFence=null!=(o=e.smartFence)?o:a.smartFence,this._currentParsingContext={parent:void 0,mathlist:[],style:null!=(s=e.style)?s:{},parseMode:null!=(r=e.parseMode)?r:"math",mathstyle:null!=(l=e.mathstyle)?l:"displaystyle",registers:null!=(c=e.registers)?c:a.registers,tabular:!1}}get currentContext(){return this._currentParsingContext}get rootContext(){let n=this._currentParsingContext;for(;n.parent;)n=n.parent;return n}beginContext(n){var a,e,i;let o={parent:this.currentContext,mathlist:[],style:At({},this.currentContext.style),parseMode:null!=(a=n?.mode)?a:this.currentContext.parseMode,mathstyle:null!=(e=n?.mathstyle)?e:this.currentContext.mathstyle,registers:null,tabular:null!=(i=n?.tabular)&&i};this._currentParsingContext=o}endContext(){this._currentParsingContext=this._currentParsingContext.parent}onError(n){this.errors.push(At({before:lr(this.tokens.slice(this.index,this.index+10)),after:lr(this.tokens.slice(Math.max(0,this.index-10),this.index))},n))}get mathlist(){return this.currentContext.mathlist}set mathlist(n){this.currentContext.mathlist=n}get parseMode(){return this.currentContext.parseMode}set parseMode(n){this.currentContext.parseMode=n}get tabularMode(){return this.currentContext.tabular}get style(){let n=this.currentContext;for(;n;){if(n.style)return n.style;n=n.parent}return{}}set style(n){this.currentContext.style=n}getRegister(n){var a,e,i;if(n.startsWith("global "))return null!=(e=null==(a=this.rootContext.registers)?void 0:a[n.slice(7)])?e:0;let o=this.currentContext;for(;o;){if(null!=(i=o.registers)&&i[n])return o.registers[n];o=o.parent}return 0}setRegister(n,a){var e;if(n.startsWith("global ")){n=n.slice(7);let i=this.currentContext;for(;i;)null!=(e=i.registers)&&e[n]&&delete i.registers[n],i=i.parent;this.rootContext.registers[n]=a}else this.currentContext.registers||(this.currentContext.registers={}),this.currentContext.registers[n]=a}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(n){return this.tokens[this.index]===n&&(this.index++,!0)}lastSubsupAtom(){let n;return this.mathlist.length>0&&(n=this.mathlist[this.mathlist.length-1],"msubsup"===n.type||void 0!==n.subsupPlacement)||(n=new _r(this.context,{style:this.style}),this.mathlist.push(n)),n}hasPattern(n){return n.test(this.tokens[this.index])}hasInfixCommand(){var n;let{index:a}=this;if(a<this.tokens.length&&this.tokens[a].startsWith("\\")){let e=this.context.getDefinition(this.tokens[a],this.parseMode);return!(!e||"symbol"===e.definitionType||e.ifMode&&!e.ifMode.includes(this.parseMode))&&null!=(n=e.infix)&&n}return!1}matchColumnSeparator(){let{index:n}=this;return!(!this.tabularMode||"&"!==this.tokens[n]||(this.index++,0))}matchRowSeparator(){let{index:n}=this;return!(!this.tabularMode||"\\\\"!==this.tokens[n]&&"\\cr"!==this.tokens[n]||(this.index++,0))}placeholder(){var n;let a=null==(n=this.args)?void 0:n.call(this,"?");return a?mi(a,this.context,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new fn(this.context,{mode:this.parseMode,style:this.style})]}matchWhitespace(){let n=!1;for(;this.match("<space>");)n=!0;return n}skipUntilToken(n){let a=this.tokens[this.index];for(;a&&a!==n;)a=this.tokens[++this.index];a===n&&this.index++}skipFiller(){let n=!1;do{let a=this.matchWhitespace(),e=this.match("\\relax");n=!a&&!e}while(!n)}matchKeyword(n){let a=this.index,e=this.end(),i="";for(;!e;){let s=this.get();$l(s)?(i+=s,e=this.end()||i.length>=n.length):e=!0}let o=n.toUpperCase()===i.toUpperCase();return o||(this.index=a),o}scanString(){let n="";for(;!this.end();)if(this.match("<space>"))n+=" ";else{let a=this.peek();if("]"===a)break;if($l(a))n+=this.get();else{if(!a.startsWith("\\"))break;this.onError({code:"unbalanced-braces"}),n+=this.get()}}return n}scanBalancedString(){let n="",a=this.end(),e=1;for(;!a;){if(this.match("<space>"))n+=" ";else{let i=this.get();"<{>"===i?(n+="{",e+=1):"<}>"===i?(e-=1,e>0?n+="}":this.index-=1):n+="<$>"===i?"$":"<$$>"===i?"$$":i}a=0===e||this.end()}return n}matchLiteralArg(){var n;let a="";if(this.match("<{>")){let e=1;for(;e>0&&!this.end();){let i=this.get();"<}>"===i?(e-=1,e>0&&(a+="}")):"<{>"===i?(e+=1,a+="{"):a+=null!=(n={"<space>":" ","<$$>":"$$","<$>":"$"}[i])?n:i}}return a}scanNumber(n=!0){var a,e;let i=!1,o=this.peek();for(;"<space>"===o||"+"===o||"-"===o;)this.get(),"-"===o&&(i=!i),o=this.peek();n=Boolean(n);let s=10,r=/\d/;if(this.match("'"))s=8,r=/[0-7]/,n=!0;else if(this.match('"')||this.match("x"))s=16,r=/[\dA-F]/,n=!0;else if(this.match("`"))return o=this.get(),o?o.startsWith("\\")&&2===o.length?(i?-1:1)*(null!=(a=o.codePointAt(1))?a:0):(i?-1:1)*(null!=(e=o.codePointAt(0))?e:0):null;let l="";for(;this.hasPattern(r);)l+=this.get();if(!n&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(r);)l+=this.get();let c=n?Number.parseInt(l,s):Number.parseFloat(l);return Number.isNaN(c)?null:i?-c:c}scanDimen(){var n,a,e;let o,i=this.scanNumber(!1);if(null===i){if(null==(n=this.peek())||!n.startsWith("\\"))return null;i=1}return this.matchWhitespace(),this.matchKeyword("pt")?o={dimension:i,unit:"pt"}:this.matchKeyword("mm")?o={dimension:i,unit:"mm"}:this.matchKeyword("cm")?o={dimension:i,unit:"cm"}:this.matchKeyword("ex")?o={dimension:i,unit:"ex"}:this.matchKeyword("px")?o={dimension:i,unit:"px"}:this.matchKeyword("em")?o={dimension:i,unit:"em"}:this.matchKeyword("bp")?o={dimension:i,unit:"bp"}:this.matchKeyword("dd")?o={dimension:i,unit:"dd"}:this.matchKeyword("pc")?o={dimension:i,unit:"pc"}:this.matchKeyword("in")?o={dimension:i,unit:"in"}:this.matchKeyword("mu")?o={dimension:i,unit:"mu"}:null!=(a=this.peek())&&a.startsWith("\\")?(o=null!=(e=Yl(this.getRegister(this.get().slice(1)),this.context))?e:{dimension:0},o.dimension*=i):(this.match("\\relax")||this.onError({code:"missing-unit"}),o={dimension:i,unit:"pt"}),o}scanGlue(){let n=this.scanDimen();if(null===n)return null;let a={glue:n};return this.matchWhitespace(),this.match("\\relax")||(this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.match("\\relax"))||(this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen()),a}scanColspec(){this.matchWhitespace();let n=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){let a=this.get();"c"===a||"r"===a||"l"===a?n.push({align:a}):"|"===a?n.push({separator:"solid"}):":"===a?n.push({separator:"dashed"}):"@"===a&&(this.match("<{>")&&(this.beginContext({mode:"math"}),n.push({gap:this.parse(e=>"<}>"===e)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return n}parseModeSet(){let n="";if(this.match("\\(")&&(n="\\)"),!n&&this.match("\\[")&&(n="\\]"),!n)return null;this.beginContext({mode:"math",mathstyle:"\\)"===n?"textstyle":"displaystyle"});let a=new Nn(this.parse(e=>e===n),this.context,{mathstyleName:"\\)"===n?"textstyle":"displaystyle",latexOpen:"\\]"===n?"\\[":"\\(",latexClose:n,boxType:"mord"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),a.hasEmptyBranch("body")?null:a}parseModeShift(){let n="";if(this.match("<$>")&&(n="<$>"),!n&&this.match("<$$>")&&(n="<$$>"),!n)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let a=new Nn(this.parse(e=>e===n),this.context,{mathstyleName:"<$>"===n?"textstyle":"displaystyle",latexOpen:"<$>"===n?"$ ":"$$ ",latexClose:"<$>"===n?" $":" $$"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),a.hasEmptyBranch("body")?null:a}parseEnvironment(){if(!this.match("\\begin"))return null;let n=this.parseArgument("string");if(!n)return null;let a=function n9(n){var a;return null!=(a=Xu[n])?a:null}(n);if(!a)return this.onError({code:"unknown-environment",arg:n}),null;let e=[];if(a.params)for(let l of a.params)if(l.isOptional)e.push(this.parseOptionalArgument(l.type));else{let c=this.parseArgument(l.type);c||this.onError({code:"missing-argument",arg:n}),e.push(c)}this.beginContext({tabular:a.tabular});let i=[],o=[],s=[],r=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:n}),r=!0),!r&&this.match("\\end")&&(this.parseArgument("string")!==n&&this.onError({code:"unbalanced-environment",arg:n}),r=!0),!r)if(this.matchColumnSeparator())s.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){s.push(this.mathlist),this.mathlist=[];let l=null;this.matchWhitespace(),this.match("[")&&(l=this.scanDimen(),this.matchWhitespace(),this.match("]")),o.push(l??{dimension:0}),i.push(s),s=[]}else this.mathlist.push(...this.parse(l=>"<}>"===l||"&"===l||"\\end"===l||"\\cr"===l||"\\\\"===l))}while(!r);return s.push(this.mathlist),s.length>0&&i.push(s),this.endContext(),a.createAtom(this.context,n,i,o,e)}parse(n){this.beginContext(),n||(n=l=>"<}>"===l);let r,a="",e=null,i=[],o=null,s=this.mathlist;for(this.mathlist=[];!this.end()&&!n(this.peek());)this.hasInfixCommand()&&!a?(a=this.get(),e=this.context.getDefinition(a,"math"),e&&(i=this.parseArguments(e)[1]),o=this.mathlist,this.mathlist=[]):this.parseToken();return a?(Boolean(e),i.unshift(this.mathlist),this.mathlist=s,o&&i.unshift(o),r=[e.createAtom(a,i,this.style,this.context)]):(r=this.mathlist,this.mathlist=s),this.endContext(),r}parseGroup(){if(!this.match("<{>"))return null;let n=new Nn(this.parse(a=>"<}>"===a),this.context,{mode:this.parseMode,latexOpen:"{",latexClose:"}"});return this.match("<}>")||this.onError({code:"unbalanced-braces"}),n}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;this.beginContext();let n=1;for(;!this.end()&&0!==n;)this.match("(")&&(n+=1),this.match(")")&&(n-=1),0!==n&&this.parseToken();0===n&&this.match(")");let a=new $n("",this.mathlist,this.context,{leftDelim:"(",rightDelim:0===n?")":"?"});return this.endContext(),a}scanDelim(){this.matchWhitespace();let n=this.get();if(!n)return this.onError({code:"unexpected-end-of-string"}),null;let a=".";(n.startsWith("\\")||$l(n))&&(a=n);let e=this.context.getDefinition(a,"math");return e?"function"===e.definitionType&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:a}),null):"symbol"===e.definitionType&&("mopen"===e.type||"mclose"===e.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(a)?a:(this.onError({code:"unexpected-delimiter",arg:a}),null):(this.onError({code:"unknown-command",arg:a}),null)}parseLeftRight(){var n;if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;let a="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;a="\\mright"}let e=this.scanDelim();if(!e)return null;for(this.beginContext();!this.end()&&!this.match(a);)this.parseToken();let i=this.mathlist;this.endContext();let o=null!=(n=this.scanDelim())?n:".";return new $n("\\right"===a?"left...right":"mleft...mright",i,this.context,{leftDelim:e,rightDelim:o,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let n=this.peek();if("^"!==n&&"_"!==n&&"'"!==n)return!1;for(;"^"===n||"_"===n||"'"===n;){if(this.match("'"))this.match("'")?this.lastSubsupAtom().addChild(new Tt("mord",this.context,{command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript"):this.lastSubsupAtom().addChild(new Tt("mord",this.context,{command:"\\prime",mode:"math",value:"\u2032"}),"superscript");else if(this.match("^")||this.match("_")){let a=this.parseArgument("math");a?this.lastSubsupAtom().addChildren(a,"_"===n?"subscript":"superscript"):this.lastSubsupAtom().createBranch("_"===n?"subscript":"superscript")}n=this.peek()}return!0}parseLimits(){let n=this.match("\\limits"),a=!n&&this.match("\\nolimits"),e=!a&&!n&&this.match("\\displaylimits");if(!n&&!a&&!e)return!1;let i=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return!(null===i||"mop"!==i.type||(n?(i.subsupPlacement="over-under",i.explicitSubsupPlacement=!0,0):a?(i.subsupPlacement="adjacent",i.explicitSubsupPlacement=!0,0):!e||(i.subsupPlacement="auto",i.explicitSubsupPlacement=!0,0)))}parseArguments(n){if(null==n||!n.params)return[void 0,[]];let a,e=[],i=n.infix?2:0;for(;i<n.params.length;){let o=n.params[i];if("rest"===o.type)e.push(this.parse(s=>"<}>"===s||"&"===s||"\\end"===s||"\\cr"===s||"\\\\"===s));else if(o.isOptional)e.push(this.parseOptionalArgument(o.type));else if(o.type.endsWith("*"))a=o.type.slice(0,-1);else{let s=this.parseArgument(o.type);if(null!==s)e.push(s);else switch(this.onError({code:"missing-argument"}),o.type){case"number":e.push(0);break;case"dimen":e.push({dimension:0,unit:"pt"});break;case"glue":e.push({glue:{dimension:0,unit:"pt"}});break;case"string":case"balanced-string":e.push("");break;case"delim":e.push(".");break;case"colspec":e.push("llllllllll");break;default:e.push(this.placeholder())}}i+=1}return[a,e]}parseArgument(n){var a,e;this.skipFiller(),"auto"===n&&(n=this.parseMode);let i=null,o="<{>"===this.peek();if(!o){if("delim"===n)return null!=(a=this.scanDelim())?a:".";if("text"===n||"math"===n){this.beginContext();let r=this.parseSimpleToken();return this.endContext(),r}}if(o&&this.get(),"text"===n||"math"===n){this.beginContext({mode:n});do{this.mathlist.push(...this.parse())}while(!this.match("<}>")&&!this.end())}else if(this.beginContext(),"string"===n?i=this.scanString():"balanced-string"===n?i=this.scanBalancedString():"number"===n?i=this.scanNumber():"colspec"===n?i=this.scanColspec():"dimen"===n?i=this.scanDimen():"glue"===n?i=this.scanGlue():"delim"===n&&(i=null!=(e=this.scanDelim())?e:"."),o&&this.skipUntilToken("<}>"),null===i)return this.endContext(),null;let s=this.mathlist;return this.endContext(),i??s}parseOptionalArgument(n){var a,e;if(n="auto"===n?this.parseMode:n,this.matchWhitespace(),!this.match("["))return null;let i=null;for(;!this.end()&&!this.match("]");)if("string"===n)i=this.scanString();else if("number"===n)i=this.scanNumber();else if("dimen"===n)i=this.scanDimen();else if("glue"===n)i=this.scanGlue();else if("colspec"===n)i=this.scanColspec();else if("bbox"===n){let o=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),s={};for(let r of o){let l=null==(e=(a=this.context).backgroundColorMap)?void 0:e.call(a,r);if(l)s.backgroundcolor=l;else{let c=r.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(c)s.padding=c[0];else{let u=r.match(/^\s*border\s*:\s*(.*)/);u&&(s.border=u[1])}}}i=s}else"math"===n&&(this.beginContext({mode:"math"}),i=this.mathlist.concat(this.parse(o=>"]"===o)),this.endContext());return i}parseCommand(n){var a,e,i,o,s,r,l;if("\\placeholder"===n){let m=this.parseOptionalArgument("string"),p=this.parseOptionalArgument("math"),b=null!=(a=this.parseArgument("string"))?a:void 0;return[new fn(this.context,{mode:this.parseMode,placeholderId:m,value:b,default:p,style:this.style})]}let c=null;if("\\char"===n){let m=this.index,p=Math.floor(null!=(e=this.scanNumber(!0))?e:Number.NaN);(!Number.isFinite(p)||p<0||p>1114111)&&(p=10067);let b="\\char"+lr(this.tokens.slice(m,this.index));return c=new Tt("math"===this.parseMode?"mord":"text",this.context,{command:"\\char",mode:this.parseMode,value:String.fromCodePoint(p),serialize:()=>b}),c.verbatimLatex=b,[c]}if("\\hskip"===n||"\\kern"===n){let m=this.scanGlue();return m?[new Da(n,this.style,this.context,m)]:null}if(c=this.scanMacro(n),c)return[c];let u=this.context.getDefinition(n,this.parseMode);if(!u)return this.onError({code:"unknown-command",arg:n}),[new md(n,this.context)];let d=this.index;if("symbol"===u.definitionType){let m=At({},this.style);u.variant&&(m.variant=u.variant),c=new Tt(null!=(i=u.type)?i:"mop",this.context,{command:n,style:m,value:String.fromCodePoint(u.codepoint),mode:this.parseMode})}else{if(u.ifMode&&!u.ifMode.includes(this.parseMode))return[];let m=this.parseMode;u.applyMode&&(this.parseMode=u.applyMode);let[p,b]=this.parseArguments(u);if(this.parseMode=m,!b)return null;if(u.applyMode&&!u.applyStyle&&!u.createAtom)return b[0];if(u.infix)return this.onError({code:"too-many-infix-commands",arg:n}),null;if("function"==typeof u.createAtom)c=u.createAtom(n,b,this.style,this.context),p&&(c.body=null!=(o=this.parseArgument(p))?o:void 0);else if("function"==typeof u.applyStyle){let y=u.applyStyle(n,b,this.context),C=this.parseMode;if(u.applyMode&&(this.parseMode=u.applyMode),p){let I=this.style;this.style=At(At({},this.style),y);let D=this.parseArgument(p);return this.style=I,this.parseMode=C,D}this.style=At(At({},this.style),y),this.parseMode=C}else c=new Tt("mop",this.context,{command:null!=(s=u.command)?s:n,style:At({},this.style),value:n,mode:null!=(r=u.applyMode)?r:this.parseMode})}if(c instanceof Tt&&void 0===c.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(n)&&(c.verbatimLatex=(null!=(l=c.command)?l:"")+lr(this.tokens.slice(d,this.index)),0===c.verbatimLatex.length&&(c.verbatimLatex=void 0),c.isFunction&&this.smartFence)){let m=this.scanSmartFence();if(m)return[c,m]}return c?[c]:null}parseLiteral(n){let a=ia.createAtom(this.parseMode,n,this.context,At({},this.style));if(!a)return null;if(a.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[a,e]}return[a]}parseSimpleToken(){let n=this.get();return n?"<space>"===n?"text"===this.parseMode?[new vs(" "," ",this.style,this.context)]:null:n.startsWith("\\")?this.parseCommand(n):$l(n)?this.parseLiteral(n):(this.onError("<}>"===n?{latex:"",code:"unbalanced-braces"}:{latex:"",code:"unexpected-token",arg:n}),null):null}scanMacro(n){var a;let e=this.context.getMacro(n);if(!e)return null;let i=this.index,o=e.args,s={"?":null==(a=this.args)?void 0:a.call(this,"?")};for(let r=1;r<=o;r++)s[r]=this.matchLiteralArg();return new pd(n,this.context,{expand:e.expand,captureSelection:e.captureSelection,args:lr(this.tokens.slice(i,this.index)),body:mi(e.def,this.context,{parseMode:this.parseMode,args:r=>s[r],mathstyle:this.currentContext.mathstyle})})}parseToken(){var n,a,e,i;let o=null!=(i=null!=(e=null!=(a=null!=(n=this.parseEnvironment())?n:this.parseModeShift())?a:this.parseModeSet())?e:this.parseGroup())?i:this.parseLeftRight();if(null===o){if(this.parseSupSub()||this.parseLimits())return!0;o=this.parseSimpleToken()}return Pn(o)?this.mathlist.push(...o):o&&this.mathlist.push(o),null!==o}};function mi(n,a,e){var i,o,s;let r=null!=(i=e?.args)?i:null,l=new Kl(fs(n,r),a,{args:r,mathstyle:null!=(o=e?.mathstyle)?o:"displaystyle",parseMode:null!=(s=e?.parseMode)?s:"math"}),c=[];for(;!l.end();)c.push(...l.parse());return c}function Q9(n,a,e){return"object"==typeof n&&"glue"in n?n:"object"==typeof n&&"dimension"in n?{glue:n}:"number"==typeof n?{glue:{dimension:n}}:new Kl(fs(n),a,{registers:e}).scanGlue()}function Yl(n,a,e){return"number"==typeof n?{dimension:n,unit:"pt"}:("object"==typeof n&&"glue"in n&&(n=n.glue),"object"==typeof n&&"dimension"in n?n:new Kl(fs(n),a,{registers:e}).scanDimen())}var ja=class extends Tt{constructor(n,a,e,i){super("box",e,{command:n,serialize:i.serialize,style:i.style}),this.body=a,this.framecolor=i.framecolor,this.verbatimFramecolor=i.verbatimBackgroundcolor,this.backgroundcolor=i.backgroundcolor,this.verbatimBackgroundcolor=i.verbatimBackgroundcolor,this.padding=i.padding,this.border=i.border}static fromJson(n,a){return new ja(n.command,n.body,a,n)}toJson(){return ge(At({},super.toJson()),{framecolor:this.framecolor,verbatimFramecolor:this.verbatimFramecolor,backgroundcolor:this.backgroundcolor,verbatimBackgroundcolor:this.verbatimBackgroundcolor,padding:this.padding,border:this.border})}render(n){let a=new fe(n,this.style),e=Ao(a.getRegisterAsDimension("fboxsep")),i=void 0===this.padding?e:Ao(Yl(this.padding,ge(At({},this.context),{registers:n.registers}))),o=Tt.createBox(n,this.body);if(!o)return null;o.setStyle("vertical-align",-o.height,"em");let s=new Nt(o,{type:"mord"}),r=new Nt(null,{classes:"ML__box"});r.height=s.height+i,r.depth=s.depth+i,r.setStyle("box-sizing","border-box"),r.setStyle("position","absolute"),r.setStyle("height",s.height+s.depth+2*i,"em"),0===i?r.setStyle("width","100%"):(r.setStyle("width",`calc(100% + ${2*i}em)`),r.setStyle("top",e,"em"),r.setStyle("left",-i,"em")),this.backgroundcolor&&r.setStyle("background-color",this.backgroundcolor),this.framecolor&&r.setStyle("border",`${Ao(a.getRegisterAsDimension("fboxrule"))}em solid ${this.framecolor}`),this.border&&r.setStyle("border",this.border),s.setStyle("display","inline-block"),s.setStyle("height",o.height+o.depth,"em"),s.setStyle("vertical-align",-i,"em");let l=new Nt([r,s]);return l.setStyle("position","relative"),l.setStyle("display","inline-block"),l.setStyle("line-height",0),l.height=s.height+i,l.depth=s.depth+i,l.left=i,l.right=i,l.setStyle("height",s.height+i,"em"),l.setStyle("top",s.depth-s.height,"em"),l.setStyle("vertical-align",s.depth+i,"em"),this.caret&&(l.caret=this.caret),this.attachSupsub(n,{base:l})}},on=class extends Tt{constructor(n,a,e,i,o={}){var s,r;super("array",n),this.environmentName=a,this.rowGaps=i,o.mathstyleName&&(this.mathstyleName=o.mathstyleName),o.columns&&(this.colFormat=0===o.columns.length?[{align:"l"}]:o.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function U9(n,a,e,i){let o=0;for(let d of i)"align"in d&&(o+=1);let s=0,r=[];for(let d of e){let m=0;for(s=Math.max(s,Math.min(d.length,o));m<d.length;){let p=[],b=Math.min(d.length,m+o);for(;m<b;)p.push(0===d[m].length?[new Tt("first",n,{mode:a.mode})]:"first"!==d[m][0].type?[new Tt("first",n,{mode:a.mode}),...d[m]]:d[m]),m+=1;r.push(p)}}1===r[r.length-1].length&&0===r[r.length-1][0].length&&r.pop();let l=[];for(let d of r){if(d.length!==s)for(let m=d.length;m<s;m++)d.push([new Tt("first",n,{mode:a.mode}),new fn(n)]);l.push(d)}let c=0,u=0;for(let d of l){u=0;for(let m of d){for(let p of m)p.parent=a,p.treeBranch=[c,u];u+=1}c+=1}return a.isDirty=!0,l}(n,this,e,this.colFormat),o.leftDelim&&(this.leftDelim=o.leftDelim),o.rightDelim&&(this.rightDelim=o.rightDelim),void 0!==o.jot&&(this.jot=o.jot),o.arraycolsep&&(this.arraycolsep=o.arraycolsep),this.colSeparationType=o.colSeparationType,this.arraystretch=null!=(s=o.arraystretch)?s:1,this.minColumns=null!=(r=o.minColumns)?r:1}static fromJson(n,a){return new on(a,n.environmentName,n.array,n.rowGaps,n)}toJson(){let n=ge(At({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(a=>a.map(e=>e.map(i=>i.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return 1!==this.arraystretch&&(n.arraystretch=this.arraystretch),this.arraycolsep&&(n.arraycolsep=this.arraycolsep),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),void 0!==this.jot&&(n.jot=this.jot),n}branch(n){var a;if(zl(n))return null!=(a=this.array[n[0]][n[1]])?a:void 0}get branches(){let n=super.branches;return this.array.forEach((a,e)=>{this.array[e].forEach((i,o)=>{this.array[e][o]&&n.push([e,o])})}),n}createBranch(n){var a;return zl(n)?(this.isDirty=!0,null!=(a=this.branch(n))?a:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(n=>Boolean(n.align)).length}removeBranch(n){if(Pa(n))return super.removeBranch(n);let a=this.branch(n);return this.array[n[0]][n[1]]=void 0,a.forEach(e=>{e.parent=void 0,e.treeBranch=void 0}),a.shift(),this.isDirty=!0,a}get hasChildren(){return this.children.length>0}get children(){let n=[];for(let a of this.array)for(let e of a)if(e)for(let i of e)n.push(...i.children),n.push(i);return[...n,...super.children]}render(n){var a,e,i,o,s;let r=new fe(n,this.style,this.mathstyleName),l=r.getRegisterAsEm("arrayrulewidth"),c=r.getRegisterAsEm("arraycolsep"),u=r.getRegisterAsEm("doublerulesep"),d=null!=(a=this.arraystretch)?a:1,m="number"==typeof this.arraycolsep?this.arraycolsep:c;"small"===this.colSeparationType&&(m=new fe(n,void 0,"scriptstyle").scalingFactor/n.scalingFactor*.2778);let p=1.2*d,b=.7*p,y=.3*p,C=0,I=[],D=0,U=this.array.length;for(let ct=0;ct<U;++ct){let lt=this.array[ct];D=Math.max(D,lt.length);let Et=new fe(r,this.style,this.mathstyleName),It=b/Et.scalingFactor,wt=y/Et.scalingFactor,jt={cells:[],height:0,depth:0,pos:0};for(let Kt of lt){let Dt=null!=(e=Tt.createBox(Et,Kt,{newList:!0}))?e:new Nt(null,{newList:!0});wt=Math.max(wt,Dt.depth),It=Math.max(It,Dt.height),jt.cells.push(Dt)}let Rt=null!=(i=Ao(this.rowGaps[ct]))?i:0;Rt>0&&(Rt+=y,wt=Math.max(wt,Rt),Rt=0),void 0!==this.jot&&(wt+=this.jot),jt.height=It,jt.depth=wt,C+=It,jt.pos=C,C+=wt+Rt,I.push(jt)}let B=C/2+co,q=[];for(let ct=0;ct<D;ct++){let lt=[];for(let Et of I){let It=Et.cells[ct];It.depth=Et.depth,It.height=Et.height,lt.push({box:It,shift:Et.pos-B})}lt.length>0&&q.push(new Tn({individualShift:lt}))}let R=[],et=!1,Q=!1,V=0,Y=!this.leftDelim,{colFormat:at}=this;for(let ct of at){if("align"in ct&&V>=q.length)break;if("align"in ct)et?R.push(Wl(2*m)):(Q||Y)&&R.push(Wl(m)),R.push(new Nt(q[V],{classes:"col-align-"+ct.align})),V++,et=!0,Q=!1,Y=!1;else if("gap"in ct){if("number"==typeof ct.gap)R.push(Wl(ct.gap));else{let lt=B9(n,I,B,ct.gap);lt&&R.push(lt)}et=!1,Q=!1,Y=!1}else if("separator"in ct){let lt=new Nt(null,{classes:"vertical-separator"});lt.setStyle("height",C,"em"),lt.setStyle("border-right",`${l}em ${ct.separator} currentColor`),lt.setStyle("vertical-align",-(C-B),"em");let Et=0;Q?Et=u-l:et&&(Et=m-l),lt.left=Et,R.push(lt),et=!1,Q=!0,Y=!1}}et&&!this.rightDelim&&R.push(Wl(m));let tt=new Nt(R,{classes:"mtable"});if(!(this.leftDelim&&"."!==this.leftDelim||this.rightDelim&&"."!==this.rightDelim))return this.caret&&(tt.caret=this.caret),tt;let rt=tt.height,vt=tt.depth,gt=this.bind(n,new Nt([this.bind(n,dr("mopen",null!=(o=this.leftDelim)?o:".",rt,vt,r)),tt,this.bind(n,dr("mclose",null!=(s=this.rightDelim)?s:".",rt,vt,r))],{type:"mord"}));return gt?(this.caret&&(gt.caret=this.caret),this.attachSupsub(n,{base:gt})):null}serialize(n){let a="\\begin{"+this.environmentName+"}";if("array"===this.environmentName){if(a+="{",void 0!==this.colFormat)for(let e of this.colFormat)"align"in e?a+=e.align:"separator"in e&&"solid"===e.separator?a+="|":"separator"in e&&"dashed"===e.separator&&(a+=":");a+="}"}for(let e=0;e<this.array.length;e++){for(let i=0;i<this.array[e].length;i++)i>0&&(a+=" & "),a=un([a,Tt.serialize(this.array[e][i],n)]);e<this.array.length-1&&(a+=" \\\\ ")}return a+="\\end{"+this.environmentName+"}",a}getCell(n,a){return this.array[n][a]}setCell(n,a,e){"array"===this.type&&Array.isArray(this.array);for(let o of this.array[n][a])o.parent=void 0,o.treeBranch=void 0;let i=e;(0===e.length||"first"!==e[0].type)&&(i=[new Tt("first",this.context,{mode:this.mode}),...e]),this.array[n][a]=i;for(let o of i)o.parent=this,o.treeBranch=[n,a];this.isDirty=!0}addRowBefore(n){"array"===this.type&&Array.isArray(this.array);let a=[];for(let e=0;e<this.colCount;e++)a.push(Gl(this));this.array.splice(n,0,a);for(let e=n;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let o=this.array[e][i];if(o)for(let s of o)s.treeBranch=[e,i]}this.isDirty=!0}addRowAfter(n){"array"===this.type&&Array.isArray(this.array);let a=[];for(let e=0;e<this.colCount;e++)a.push(Gl(this));this.array.splice(n+1,0,a);for(let e=n+1;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let o=this.array[e][i];if(o)for(let s of o)s.treeBranch=[e,i]}this.isDirty=!0}removeRow(n){"array"===this.type&&Array.isArray(this.array);let a=this.array.splice(n,1);for(let e of a)for(let i of e)if(i)for(let o of i)o.parent=void 0,o.treeBranch=void 0;for(let e=n;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let o=this.array[e][i];if(o)for(let s of o)s.treeBranch=[e,i]}this.isDirty=!0}addColumnBefore(n){"array"===this.type&&Array.isArray(this.array);for(let a of this.array)a.splice(n,0,Gl(this));for(let a=0;a<this.rowCount;a++)for(let e=n;e<this.colCount;e++){let i=this.array[a][e];if(i)for(let o of i)o.treeBranch=[a,e]}this.isDirty=!0}addColumnAfter(n){"array"===this.type&&Array.isArray(this.array);for(let a of this.array)a.splice(n+1,0,Gl(this));for(let a=0;a<this.rowCount;a++)for(let e=n+1;e<this.colCount;e++){let i=this.array[a][e];if(i)for(let o of i)o.treeBranch=[a,e]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(n){"array"===this.type&&Array.isArray(this.array);for(let a of this.array){let e=a.splice(n,1);for(let i of e)if(i)for(let o of i)o.parent=void 0,o.treeBranch=void 0}for(let a=0;a<this.rowCount;a++)for(let e=n;e<this.colCount;e++){let i=this.array[a][e];if(i)for(let o of i)o.treeBranch=[a,e]}this.isDirty=!0}get cells(){let n=[];for(let a of this.array)for(let e of a)e&&n.push(e);return n}};function Gl(n){let a=new Tt("first",n.context,{mode:n.mode});a.parent=n;let e=new fn(n.context,{mode:n.mode});return e.parent=n,[a,e]}function Wl(n){let a=new Nt(null,{classes:"arraycolsep"});return a.width=n,a}function B9(n,a,e,i){if(!i)return null;let o=[];for(let s of a){let r=Tt.createBox(n,i,{newList:!0});r&&(r.depth=s.depth,r.height=s.height,o.push({box:r,shift:s.pos-e}))}return new Tn({individualShift:o}).wrap(n)}var hd=class extends Tt{constructor(n,a,e){var i;super("composition",a,{mode:null!=(i=e?.mode)?i:"math",value:n})}static fromJson(n,a){return new hd(n.value,a,n)}toJson(){return super.toJson()}get computedStyle(){return{}}render(n){let a=new Nt(this.value,{classes:"ML__composition",type:"composition"});return this.bind(n,a),this.caret&&(a.caret=this.caret),a}serialize(n){return""}},gd=class extends Tt{constructor(n,a,e){super("chem",e,{command:n,mode:"math"});let i=Ge.go(Ot.go(a,"\\pu"===n?"pu":"ce"),!1);this.body=mi(i,e),this.verbatimLatex=n+"{"+a+"}",this.arg=a,this.captureSelection=!0}static fromJson(n,a){return new gd(n.command,n.arg,a)}toJson(){return ge(At({},super.toJson()),{arg:this.arg})}render(n){let a=Tt.createBox(n,this.body,{type:"chem",newList:!0});return this.caret&&(a.caret=this.caret),this.bind(n,a)}serialize(n){return this.verbatimLatex}};Ct(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(n,a,e,i)=>new gd(n,a[0],i)});var Ot={go:function(n,a){if(!n)return[];void 0===a&&(a="ce");var e="0",i={parenthesisLevel:0};n=(n=(n=n.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var o,s=10,r=[];;){o!==n?(s=10,o=n):s--;var l=Ot.stateMachines[a],c=l.transitions[e]||l.transitions["*"];t:for(var u=0;u<c.length;u++){var d=Ot.patterns.match_(c[u].pattern,n);if(d){for(var m=c[u].task,p=0;p<m.action_.length;p++){var b;if(l.actions[m.action_[p].type_])b=l.actions[m.action_[p].type_](i,d.match_,m.action_[p].option);else{if(!Ot.actions[m.action_[p].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+m.action_[p].type_+")"];b=Ot.actions[m.action_[p].type_](i,d.match_,m.action_[p].option)}Ot.concatArray(r,b)}if(e=m.nextState||e,!(n.length>0))return r;if(m.revisit||(n=d.remainder),!m.toContinue)break t}}if(s<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(n,a){if(a)if(Array.isArray(a))for(var e=0;e<a.length;e++)n.push(a[e]);else n.push(a)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(n){var a=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return a&&a[0]?{match_:a.splice(1),remainder:n.substr(a[0].length)}:null},"(-)(9)^(-9)":function(n){var a=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return a&&a[0]?{match_:a.splice(1),remainder:n.substr(a[0].length)}:null},"state of aggregation $":function(n){var a=Ot.patterns.findObserveGroups(n,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(a&&a.remainder.match(/^($|[\s,;\)\]\}])/))return a;var e=n.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return e?{match_:e[0],remainder:n.substr(e[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"^{","","","}")},"^($...$)":function(n){return Ot.patterns.findObserveGroups(n,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(n){return Ot.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(n){return Ot.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"_{","","","}")},"_($...$)":function(n){return Ot.patterns.findObserveGroups(n,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(n){return Ot.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(n){return Ot.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(n){return Ot.patterns.findObserveGroups(n,"","{","}","")},"{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"{","","","}")},"$...$":function(n){return Ot.patterns.findObserveGroups(n,"","$","$","")},"${(...)}$":function(n){return Ot.patterns.findObserveGroups(n,"${","","","}$")},"$(...)$":function(n){return Ot.patterns.findObserveGroups(n,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(n){return Ot.patterns.findObserveGroups(n,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(n){return Ot.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(n){return Ot.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(n){return Ot.patterns.findObserveGroups(n,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(n){return Ot.patterns.findObserveGroups(n,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(n){return Ot.patterns.findObserveGroups(n,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(n){return Ot.patterns.findObserveGroups(n,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(n){var a;if(a=n.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:a[0],remainder:n.substr(a[0].length)};var e=Ot.patterns.findObserveGroups(n,"","$","$","");return e&&(a=e.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:a[0],remainder:n.substr(a[0].length)}:null},amount2:function(n){return this.amount(n)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(n){if(n.match(/^\([a-z]+\)$/))return null;var a=n.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return a?{match_:a[0],remainder:n.substr(a[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(n,a,e,i,o,s,r,l,c,u){var d=function(D,U){if("string"==typeof U)return 0!==D.indexOf(U)?null:U;var B=D.match(U);return B?B[0]:null},p=d(n,a);if(null===p||(n=n.substr(p.length),null===(p=d(n,e))))return null;var b=function(D,U,B){for(var q=0;U<D.length;){var R=D.charAt(U),et=d(D.substr(U),B);if(null!==et&&0===q)return{endMatchBegin:U,endMatchEnd:U+et.length};if("{"===R)q++;else if("}"===R){if(0===q)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];q--}U++}return null}(n,p.length,i||o);if(null===b)return null;var y=n.substring(0,i?b.endMatchEnd:b.endMatchBegin);if(s||r){var C=this.findObserveGroups(n.substr(b.endMatchEnd),s,r,l,c);if(null===C)return null;var I=[y,C.match_];return{match_:u?I.join(""):I,remainder:C.remainder}}return{match_:y,remainder:n.substr(b.endMatchEnd)}},match_:function(n,a){var e=Ot.patterns.patterns[n];if(void 0===e)throw["MhchemBugP","mhchem bug P. Please report. ("+n+")"];if("function"==typeof e)return Ot.patterns.patterns[n](a);var i=a.match(e);return i?{match_:i[2]?[i[1],i[2]]:i[1]?i[1]:i[0],remainder:a.substr(i[0].length)}:null}},actions:{"a=":function(n,a){n.a=(n.a||"")+a},"b=":function(n,a){n.b=(n.b||"")+a},"p=":function(n,a){n.p=(n.p||"")+a},"o=":function(n,a){n.o=(n.o||"")+a},"q=":function(n,a){n.q=(n.q||"")+a},"d=":function(n,a){n.d=(n.d||"")+a},"rm=":function(n,a){n.rm=(n.rm||"")+a},"text=":function(n,a){n.text_=(n.text_||"")+a},insert:function(n,a,e){return{type_:e}},"insert+p1":function(n,a,e){return{type_:e,p1:a}},"insert+p1+p2":function(n,a,e){return{type_:e,p1:a[0],p2:a[1]}},copy:function(n,a){return a},rm:function(n,a){return{type_:"rm",p1:a||""}},text:function(n,a){return Ot.go(a,"text")},"{text}":function(n,a){var e=["{"];return Ot.concatArray(e,Ot.go(a,"text")),e.push("}"),e},"tex-math":function(n,a){return Ot.go(a,"tex-math")},"tex-math tight":function(n,a){return Ot.go(a,"tex-math tight")},bond:function(n,a,e){return{type_:"bond",kind_:e||a}},"color0-output":function(n,a){return{type_:"color0",color:a[0]}},ce:function(n,a){return Ot.go(a)},"1/2":function(n,a){var e=[];a.match(/^[+\-]/)&&(e.push(a.substr(0,1)),a=a.substr(1));var i=a.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return i[1]=i[1].replace(/\$/g,""),e.push({type_:"frac",p1:i[1],p2:i[2]}),i[3]&&(i[3]=i[3].replace(/\$/g,""),e.push({type_:"tex-math",p1:i[3]})),e},"9,9":function(n,a){return Ot.go(a,"9,9")}},createTransitions:function(n){var a,e,i,o,s={};for(a in n)for(e in n[a])for(i=e.split("|"),n[a][e].stateArray=i,o=0;o<i.length;o++)s[i[o]]=[];for(a in n)for(e in n[a])for(i=n[a][e].stateArray||[],o=0;o<i.length;o++){var r=n[a][e];if(r.action_){r.action_=[].concat(r.action_);for(var l=0;l<r.action_.length;l++)"string"==typeof r.action_[l]&&(r.action_[l]={type_:r.action_[l]})}else r.action_=[];for(var c=a.split("|"),u=0;u<c.length;u++)if("*"===i[o])for(var d in s)s[d].push({pattern:c[u],task:r});else s[i[o]].push({pattern:c[u],task:r})}return s},stateMachines:{}};Ot.stateMachines={ce:{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(n,a){var e;if((n.d||"").match(/^[0-9]+$/)){var i=n.d;n.d=void 0,e=this.output(n),n.b=i}else e=this.output(n);return Ot.actions["o="](n,a),e},"d= kv":function(n,a){n.d=a,n.dType="kv"},"charge or bond":function(n,a){if(n.beginsWithBond){var e=[];return Ot.concatArray(e,this.output(n)),Ot.concatArray(e,Ot.actions.bond(n,a,"-")),e}n.d=a},"- after o/d":function(n,a,e){var i=Ot.patterns.match_("orbital",n.o||""),o=Ot.patterns.match_("one lowercase greek letter $",n.o||""),s=Ot.patterns.match_("one lowercase latin letter $",n.o||""),r=Ot.patterns.match_("$one lowercase latin letter$ $",n.o||""),l="-"===a&&(i&&""===i.remainder||o||s||r);l&&!n.a&&!n.b&&!n.p&&!n.d&&!n.q&&!i&&s&&(n.o="$"+n.o+"$");var c=[];return l?(Ot.concatArray(c,this.output(n)),c.push({type_:"hyphen"})):(i=Ot.patterns.match_("digits",n.d||""),e&&i&&""===i.remainder?(Ot.concatArray(c,Ot.actions["d="](n,a)),Ot.concatArray(c,this.output(n))):(Ot.concatArray(c,this.output(n)),Ot.concatArray(c,Ot.actions.bond(n,a,"-")))),c},"a to o":function(n){n.o=n.a,n.a=void 0},"sb=true":function(n){n.sb=!0},"sb=false":function(n){n.sb=!1},"beginsWithBond=true":function(n){n.beginsWithBond=!0},"beginsWithBond=false":function(n){n.beginsWithBond=!1},"parenthesisLevel++":function(n){n.parenthesisLevel++},"parenthesisLevel--":function(n){n.parenthesisLevel--},"state of aggregation":function(n,a){return{type_:"state of aggregation",p1:Ot.go(a,"o")}},comma:function(n,a){var e=a.replace(/\s*$/,"");return e!==a&&0===n.parenthesisLevel?{type_:"comma enumeration L",p1:e}:{type_:"comma enumeration M",p1:e}},output:function(n,a,e){var i,o,s;for(var r in n.r?(o="M"===n.rdt?Ot.go(n.rd,"tex-math"):"T"===n.rdt?[{type_:"text",p1:n.rd||""}]:Ot.go(n.rd),s="M"===n.rqt?Ot.go(n.rq,"tex-math"):"T"===n.rqt?[{type_:"text",p1:n.rq||""}]:Ot.go(n.rq),i={type_:"arrow",r:n.r,rd:o,rq:s}):(i=[],!n.a&&!n.b&&!n.p&&!n.o&&!n.q&&!n.d&&!e||(n.sb&&i.push({type_:"entitySkip"}),n.o||n.q||n.d||n.b||n.p||2===e?n.o||n.q||n.d||!n.b&&!n.p?n.o&&"kv"===n.dType&&Ot.patterns.match_("d-oxidation$",n.d||"")?n.dType="oxidation":n.o&&"kv"===n.dType&&!n.q&&(n.dType=void 0):(n.o=n.a,n.d=n.b,n.q=n.p,n.a=n.b=n.p=void 0):(n.o=n.a,n.a=void 0),i.push({type_:"chemfive",a:Ot.go(n.a,"a"),b:Ot.go(n.b,"bd"),p:Ot.go(n.p,"pq"),o:Ot.go(n.o,"o"),q:Ot.go(n.q,"pq"),d:Ot.go(n.d,"oxidation"===n.dType?"oxidation":"bd"),dType:n.dType}))),n)"parenthesisLevel"!==r&&"beginsWithBond"!==r&&delete n[r];return i},"oxidation-output":function(n,a){var e=["{"];return Ot.concatArray(e,Ot.go(a,"oxidation")),e.push("}"),e},"frac-output":function(n,a){return{type_:"frac-ce",p1:Ot.go(a[0]),p2:Ot.go(a[1])}},"overset-output":function(n,a){return{type_:"overset",p1:Ot.go(a[0]),p2:Ot.go(a[1])}},"underset-output":function(n,a){return{type_:"underset",p1:Ot.go(a[0]),p2:Ot.go(a[1])}},"underbrace-output":function(n,a){return{type_:"underbrace",p1:Ot.go(a[0]),p2:Ot.go(a[1])}},"color-output":function(n,a){return{type_:"color",color1:a[0],color2:Ot.go(a[1])}},"r=":function(n,a){n.r=a},"rdt=":function(n,a){n.rdt=a},"rd=":function(n,a){n.rd=a},"rqt=":function(n,a){n.rqt=a},"rq=":function(n,a){n.rq=a},operator:function(n,a,e){return{type_:"operator",kind_:e||a}}}},a:{transitions:Ot.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Ot.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(n){if(n.text_){var a={type_:"text",p1:n.text_};for(var e in n)delete n[e];return a}}}},pq:{transitions:Ot.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(n,a){return{type_:"state of aggregation subscript",p1:Ot.go(a,"o")}},"color-output":function(n,a){return{type_:"color",color1:a[0],color2:Ot.go(a[1],"pq")}}}},bd:{transitions:Ot.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(n,a){return{type_:"color",color1:a[0],color2:Ot.go(a[1],"bd")}}}},oxidation:{transitions:Ot.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(n,a){return{type_:"roman numeral",p1:a||""}}}},"tex-math":{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(n){if(n.o){var a={type_:"tex-math",p1:n.o};for(var e in n)delete n[e];return a}}}},"tex-math tight":{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(n,a){n.o=(n.o||"")+"{"+a+"}"},output:function(n){if(n.o){var a={type_:"tex-math",p1:n.o};for(var e in n)delete n[e];return a}}}},"9,9":{transitions:Ot.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(n,a){var e=[];return"+-"===a[0]||"+/-"===a[0]?e.push("\\pm "):a[0]&&e.push(a[0]),a[1]&&(Ot.concatArray(e,Ot.go(a[1],"pu-9,9")),a[2]&&(a[2].match(/[,.]/)?Ot.concatArray(e,Ot.go(a[2],"pu-9,9")):e.push(a[2])),a[3]=a[4]||a[3],a[3]&&(a[3]=a[3].trim(),"e"===a[3]||"*"===a[3].substr(0,1)?e.push({type_:"cdot"}):e.push({type_:"times"}))),a[3]&&e.push("10^{"+a[5]+"}"),e},"number^":function(n,a){var e=[];return"+-"===a[0]||"+/-"===a[0]?e.push("\\pm "):a[0]&&e.push(a[0]),Ot.concatArray(e,Ot.go(a[1],"pu-9,9")),e.push("^{"+a[2]+"}"),e},operator:function(n,a,e){return{type_:"operator",kind_:e||a}},space:function(){return{type_:"pu-space-1"}},output:function(n){var a,e=Ot.patterns.match_("{(...)}",n.d||"");e&&""===e.remainder&&(n.d=e.match_);var i=Ot.patterns.match_("{(...)}",n.q||"");if(i&&""===i.remainder&&(n.q=i.match_),n.d&&(n.d=n.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.d=n.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),n.q){n.q=n.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.q=n.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var o={d:Ot.go(n.d,"pu"),q:Ot.go(n.q,"pu")};"//"===n.o?a={type_:"pu-frac",p1:o.d,p2:o.q}:((a=o.d).push(o.d.length>1||o.q.length>1?{type_:" / "}:{type_:"/"}),Ot.concatArray(a,o.q))}else a=Ot.go(n.d,"pu-2");for(var s in n)delete n[s];return a}}},"pu-2":{transitions:Ot.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(n,a){n.rm+="^{"+a+"}"},space:function(){return{type_:"pu-space-2"}},output:function(n){var a=[];if(n.rm){var e=Ot.patterns.match_("{(...)}",n.rm||"");a=e&&""===e.remainder?Ot.go(e.match_,"pu"):{type_:"rm",p1:n.rm}}for(var i in n)delete n[i];return a}}},"pu-9,9":{transitions:Ot.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(n){var a=[];if(n.text_=n.text_||"",n.text_.length>4){var e=n.text_.length%3;0===e&&(e=3);for(var i=n.text_.length-3;i>0;i-=3)a.push(n.text_.substr(i,3)),a.push({type_:"1000 separator"});a.push(n.text_.substr(0,e)),a.reverse()}else a.push(n.text_);for(var o in n)delete n[o];return a},"output-o":function(n){var a=[];if(n.text_=n.text_||"",n.text_.length>4){for(var e=n.text_.length-3,i=0;i<e;i+=3)a.push(n.text_.substr(i,3)),a.push({type_:"1000 separator"});a.push(n.text_.substr(i))}else a.push(n.text_);for(var o in n)delete n[o];return a}}}};var ra,Ge={go:function(n,a){if(!n)return"";for(var e="",i=!1,o=0;o<n.length;o++){var s=n[o];"string"==typeof s?e+=s:(e+=Ge._go2(s),"1st-level escape"===s.type_&&(i=!0))}return!a&&!i&&e&&(e="{"+e+"}"),e},_goInner:function(n){return n&&Ge.go(n,!0)},_go2:function(n){var a;switch(n.type_){case"chemfive":a="";var e={a:Ge._goInner(n.a),b:Ge._goInner(n.b),p:Ge._goInner(n.p),o:Ge._goInner(n.o),q:Ge._goInner(n.q),d:Ge._goInner(n.d)};e.a&&(e.a.match(/^[+\-]/)&&(e.a="{"+e.a+"}"),a+=e.a+"\\,"),(e.b||e.p)&&(a+="{\\vphantom{X}}",a+="^{\\hphantom{"+(e.b||"")+"}}_{\\hphantom{"+(e.p||"")+"}}",a+="{\\vphantom{X}}",a+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(e.b||"")+"}}",a+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(e.p||"")+"}}}"),e.o&&(e.o.match(/^[+\-]/)&&(e.o="{"+e.o+"}"),a+=e.o),"kv"===n.dType?((e.d||e.q)&&(a+="{\\vphantom{X}}"),e.d&&(a+="^{"+e.d+"}"),e.q&&(a+="_{\\smash[t]{"+e.q+"}}")):"oxidation"===n.dType?(e.d&&(a+="{\\vphantom{X}}",a+="^{"+e.d+"}"),e.q&&(a+="{\\vphantom{X}}",a+="_{\\smash[t]{"+e.q+"}}")):(e.q&&(a+="{\\vphantom{X}}",a+="_{\\smash[t]{"+e.q+"}}"),e.d&&(a+="{\\vphantom{X}}",a+="^{"+e.d+"}"));break;case"rm":case"roman numeral":a="\\mathrm{"+n.p1+"}";break;case"text":n.p1.match(/[\^_]/)?(n.p1=n.p1.replace(" ","~").replace("-","\\text{-}"),a="\\mathrm{"+n.p1+"}"):a="\\text{"+n.p1+"}";break;case"state of aggregation":a="\\mskip2mu "+Ge._goInner(n.p1);break;case"state of aggregation subscript":a="\\mskip1mu "+Ge._goInner(n.p1);break;case"bond":if(!(a=Ge._getBond(n.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+n.kind_+")"];break;case"frac":var i="\\frac{"+n.p1+"}{"+n.p2+"}";a="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"pu-frac":var o="\\frac{"+Ge._goInner(n.p1)+"}{"+Ge._goInner(n.p2)+"}";a="\\mathchoice{\\textstyle"+o+"}{"+o+"}{"+o+"}{"+o+"}";break;case"tex-math":case"1st-level escape":a=n.p1+" ";break;case"frac-ce":a="\\frac{"+Ge._goInner(n.p1)+"}{"+Ge._goInner(n.p2)+"}";break;case"overset":a="\\overset{"+Ge._goInner(n.p1)+"}{"+Ge._goInner(n.p2)+"}";break;case"underset":a="\\underset{"+Ge._goInner(n.p1)+"}{"+Ge._goInner(n.p2)+"}";break;case"underbrace":a="\\underbrace{"+Ge._goInner(n.p1)+"}_{"+Ge._goInner(n.p2)+"}";break;case"color":a="{\\color{"+n.color1+"}{"+Ge._goInner(n.color2)+"}}";break;case"color0":a="\\color{"+n.color+"}";break;case"arrow":var s={rd:Ge._goInner(n.rd),rq:Ge._goInner(n.rq)},r="\\x"+Ge._getArrow(n.r);s.rq&&(r+="[{"+s.rq+"}]"),a=r+=s.rd?"{"+s.rd+"}":"{}";break;case"operator":a=Ge._getOperator(n.kind_);break;case"space":a=" ";break;case"entitySkip":case"pu-space-1":a="~";break;case"pu-space-2":a="\\mkern3mu ";break;case"1000 separator":a="\\mkern2mu ";break;case"commaDecimal":a="{,}";break;case"comma enumeration L":a="{"+n.p1+"}\\mkern6mu ";break;case"comma enumeration M":a="{"+n.p1+"}\\mkern3mu ";break;case"comma enumeration S":a="{"+n.p1+"}\\mkern1mu ";break;case"hyphen":a="\\text{-}";break;case"addition compound":a="\\,{\\cdot}\\,";break;case"electron dot":a="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":a="{\\times}";break;case"prime":a="\\prime ";break;case"cdot":a="\\cdot ";break;case"tight cdot":a="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":a="\\times ";break;case"circa":a="{\\sim}";break;case"^":a="uparrow";break;case"v":a="downarrow";break;case"ellipsis":a="\\ldots ";break;case"/":a="/";break;case" / ":a="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return a},_getArrow:function(n){switch(n){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(n){switch(n){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(n){switch(n){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},fd=class extends Tt{constructor(n,a,e,i){super("delim",e,{command:n,style:i?.style}),this.value=a,this.size=i?.size}static fromJson(n,a){return new fd(n.command,n.delim,a,n)}toJson(){return ge(At({},super.toJson()),{delim:this.value,size:this.size})}render(n){let a=new Nt(null);return a.delim=this.value,a}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},xd=class extends Tt{constructor(n,a,e,i){super("sizeddelim",e,{command:n,style:i.style}),this.value=a,this.delimClass=i.delimClass,this.size=i.size}static fromJson(n,a){return new xd(n.command,n.delim,a,n)}toJson(){return ge(At({},super.toJson()),{delim:this.value,size:this.size,delimClass:this.delimClass})}render(n){let a=function Z9(n,a,e,i){var o;return void 0===n||"."===n?Na(e,null!=(o=i.type)?o:"minner",i.classes):("<"===n||"\\lt"===n||"\u27e8"===n?n="\\langle":(">"===n||"\\gt"===n||"\u27e9"===n)&&(n="\\rangle"),Bm.has(n)||Rm.has(n)?Qm(n,a,!1,e,i):I9.has(n)?Um(n,L9[a],!1,e,i):null)}(this.value,this.size,n,{classes:this.delimClass});return a?(a=this.bind(n,a),this.caret&&(a.caret=this.caret),a):null}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},bs=class extends Tt{constructor(n,a,e,i,o){super("enclose",i,{command:n,style:o.style}),this.body=a,this.backgroundcolor=o.backgroundcolor,e.updiagonalarrow&&(e.updiagonalstrike=!1),e.box&&(e.left=!1,e.right=!1,e.bottom=!1,e.top=!1),this.notation=e,this.shadow=o.shadow,this.strokeWidth=o.strokeWidth,this.strokeStyle=o.strokeStyle,this.svgStrokeStyle=o.svgStrokeStyle,this.strokeColor=o.strokeColor,this.borderStyle=o.borderStyle,this.padding=o.padding,this.captureSelection=!0}static fromJson(n,a){return new bs(n.command,n.body,n.notation,a,n)}toJson(){let n={};return this.notation.downdiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.verticalstrike&&(n.downdiagonalstrike=!0),this.notation.horizontalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalarrow&&(n.downdiagonalstrike=!0),this.notation.right&&(n.downdiagonalstrike=!0),this.notation.bottom&&(n.downdiagonalstrike=!0),this.notation.left&&(n.downdiagonalstrike=!0),this.notation.top&&(n.downdiagonalstrike=!0),this.notation.circle&&(n.downdiagonalstrike=!0),this.notation.roundedbox&&(n.downdiagonalstrike=!0),this.notation.madruwb&&(n.downdiagonalstrike=!0),this.notation.actuarial&&(n.downdiagonalstrike=!0),this.notation.box&&(n.downdiagonalstrike=!0),ge(At({},super.toJson()),{notation:n,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}serialize(n){var a;let e=null!=(a=this.command)?a:"";if("\\enclose"===this.command){e+="{"+Object.keys(this.notation).join(" ")+"}";let i="",o="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(i+=o+'mathbackground="'+this.backgroundcolor+'"',o=","),this.shadow&&"auto"!==this.shadow&&(i+=o+'shadow="'+this.shadow+'"',o=","),this.strokeWidth||"solid"!==this.strokeStyle?(i+=o+this.borderStyle,o=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(i+=o+'mathcolor="'+this.strokeColor+'"',o=","),i&&(e+=`[${i}]`)}return e+=`{${this.bodyToLatex(n)}}`,e}render(n){var a;let e=new fe(n,this.style),i=Tt.createBox(e,this.body);if(!i)return null;let o=null!=(a=Ao(this.padding&&"auto"!==this.padding?Yl(this.padding,ge(At({},this.context),{registers:n.registers})):e.getRegisterAsDimension("fboxsep")))?a:0,s=function R9(n){if(!n)return"1px";let a=n.match(/([0-9][a-zA-Z\%]+)/);return null===a?"1px":a[1]}(this.borderStyle),r=new Nt(null,{classes:"ML__notation"});r.setStyle("box-sizing","border-box"),r.setStyle("top",`calc(-${s} / 2 - ${o}em)`),r.setStyle("left",`calc(-${s} / 2 - ${o}em)`),r.setStyle("height",`calc(100% + ${2*o}em + 2 * ${s})`),r.height=i.height+o,r.depth=i.depth+o,r.setStyle("width",`calc(100% + ${2*o}em + 2 * ${s})`),this.backgroundcolor&&r.setStyle("background-color",this.backgroundcolor),this.notation.box&&r.setStyle("border",this.borderStyle),this.notation.actuarial&&(r.setStyle("border-top",this.borderStyle),r.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(r.setStyle("border-bottom",this.borderStyle),r.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(r.setStyle("border-radius","8px"),r.setStyle("border",this.borderStyle)),this.notation.circle&&(r.setStyle("border-radius","50%"),r.setStyle("border",this.borderStyle)),this.notation.top&&r.setStyle("border-top",this.borderStyle),this.notation.left&&r.setStyle("border-left",this.borderStyle),this.notation.right&&r.setStyle("border-right",this.borderStyle),this.notation.bottom&&r.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let u;"none"!==this.shadow&&(u="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),function x9(n,a,e){n.svgOverlay=a,n.svgStyle=e}(r,l,u)}let c=new Nt([r,i]);return c.setStyle("position","relative"),c.setStyle("display","inline"),c.height=i.height+o,c.depth=i.depth+o,c.left=o,c.right=o,this.caret&&(c.caret=this.caret),c.wrap(e)}},qa=class extends Tt{constructor(n,a,e,i,o){var s,r;super("genfrac",i,{style:o.style,command:n,serialize:o.serialize,displayContainsHighlight:!0}),this.above=a,this.below=e,this.hasBarLine=null==(s=o?.hasBarLine)||s,this.continuousFraction=null!=(r=o?.continuousFraction)&&r,this.numerPrefix=o?.numerPrefix,this.denomPrefix=o?.denomPrefix,this.mathstyleName=o?.mathstyleName,this.leftDelim=o?.leftDelim,this.rightDelim=o?.rightDelim}static fromJson(n,a){return new qa(n.command,n.above,n.below,a,n)}toJson(){let n={};return this.continuousFraction&&(n.continuousFraction=!0),this.numerPrefix&&(n.numerPrefix=this.numerPrefix),this.denomPrefix&&(n.denomPrefix=this.denomPrefix),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),this.hasBarLine||(n.hasBarLine=!1),this.mathstyleName&&(n.mathstyleName=this.mathstyleName),At(At({},super.toJson()),n)}serialize(n){return this.command+`{${this.aboveToLatex(n)}}{${this.belowToLatex(n)}}`}get children(){if(this._children)return this._children;let n=[];if("numerator-denominator"===this.context.fractionNavigationOrder){for(let a of this.above)n.push(...a.children),n.push(a);for(let a of this.below)n.push(...a.children),n.push(a)}else{for(let a of this.below)n.push(...a.children),n.push(a);for(let a of this.above)n.push(...a.children),n.push(a)}return this._children=n,n}render(n){var a,e;let d,p,i=new fe(n,this.style,this.mathstyleName),o=i.metrics,s=new fe(i,this.style,this.continuousFraction?"":"numerator"),r=this.numerPrefix?new Nt([new Nt(this.numerPrefix),Tt.createBox(s,this.above)],{isTight:s.isTight,newList:!0}):null!=(a=Tt.createBox(s,this.above,{newList:!0}))?a:new Nt(null,{newList:!0}),l=new fe(i,this.style,this.continuousFraction?"":"denominator"),c=this.denomPrefix?new Nt([new Nt(this.denomPrefix),Tt.createBox(l,this.below,{newList:!0})]):null!=(e=Tt.createBox(l,this.below,{newList:!0}))?e:new Nt(null,{newList:!0}),u=this.hasBarLine?o.defaultRuleThickness:0,m=0;i.isDisplayStyle?(d=o.num1,m=u>0?3*u:7*u,p=o.denom1):(u>0?(d=o.num2,m=u):(d=o.num3,m=3*u),p=o.denom2);let b=[];this.isSelected&&b.push("ML__selected");let I,y=r.depth,C=c.height;if(u<=0){let et=d-y-(C-p);et<m&&(d+=(m-et)/2,p+=(m-et)/2),I=new Tn({individualShift:[{box:r,shift:-d,classes:[...b,"ML__center"]},{box:c,shift:p,classes:[...b,"ML__center"]}]}).wrap(i)}else{let et=co+u/2,Q=co-u/2;d<m+y+et&&(d=m+y+et),p<m+C-Q&&(p=m+C-Q);let V=new Nt(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});V.height=u/2,V.depth=u/2,I=new Tn({individualShift:[{box:c,shift:p,classes:[...b,"ML__center"]},{box:V,shift:u/2-Q,classes:b},{box:r,shift:-d,classes:[...b,"ML__center"]}]}).wrap(i)}let D=i.isDisplayStyle?o.delim1:o.delim2,U=this.isSelected?" ML__selected":"",B=this.leftDelim?this.bind(n,Hl("mopen",this.leftDelim,D,!0,n,{style:this.style,mode:this.mode,classes:U})):Na(i,"mopen"),q=null;q=this.continuousFraction?new Nt(null,{type:"mclose"}):this.rightDelim?this.bind(n,Hl("mclose",this.rightDelim,D,!0,n,{style:this.style,mode:this.mode,classes:U})):Na(i,"mclose");let R=this.bind(n,new Nt([B,I,q],{isTight:i.isTight,type:"mord",classes:"mfrac"}));return R?(this.caret&&(R.caret=this.caret),this.attachSupsub(n,{base:R})):null}},An=class extends Tt{constructor(n,a,e){var i;super("latex",a,{value:n,mode:"latex"}),this.isSuggestion=null!=(i=e?.isSuggestion)&&i,this.isError=!1,this.verbatimLatex=n}static fromJson(n,a){let e=new An(n.command,a);return n.isSuggestion&&(e.isSuggestion=!0),n.isError&&(e.isError=!0),e}toJson(){let n={};return this.isSuggestion&&(n.isSuggestion=!0),this.isError&&(n.isError=!0),At(At({},super.toJson()),n)}get computedStyle(){return{}}render(n){let a=new Nt(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return a?(this.caret&&(a.caret=this.caret),this.bind(n,a)):null}},aa=class extends Tt{constructor(n,a){super("latexgroup",a,{mode:"latex"}),this.body=[...n].map(e=>new An(e,a)),this.skipBoundary=!1}static fromJson(n,a){return new aa("",a)}toJson(){return super.toJson()}render(n){let a=Tt.createBox(n,this.body,{newList:!0});return a?(this.caret&&(a.caret=this.caret),this.bind(n,a)):null}serialize(n){var a,e;return null!=(e=null==(a=this.body)?void 0:a.map(i=>i.value).join(""))?e:""}},Vl=class extends Tt{constructor(n,a,e,i){super("line",e,{command:n,style:i.style}),this.skipBoundary=!0,this.body=a,this.position=i.position}static fromJson(n,a){return new Vl(n.command,n.body,a,n)}toJson(){return ge(At({},super.toJson()),{position:this.position})}render(n){let a=new fe(n,this.style,"cramp"),e=Tt.createBox(a,this.body);if(!e)return null;let s,i=a.metrics.defaultRuleThickness/a.scalingFactor,o=new Nt(null,{classes:this.position+"-line"});return o.height=i,o.maxFontSize=1.125*i*a.scalingFactor,s=new Tn("overline"===this.position?{shift:0,children:[{box:e},3*i,{box:o},i]}:{top:e.height,children:[i,{box:o},3*i,{box:e}]}),this.caret&&(s.caret=this.caret),new Nt(s,{classes:this.position,type:"mord"})}},qi=class extends Tt{constructor(n,a,e,i){var o,s,r,l;super(null!=(o=i.type)?o:"mop",e,{command:n,style:i.style,isFunction:i?.isFunction}),"string"==typeof a?this.value=a:this.body=a,this.captureSelection=null!=(s=i.captureSelection)&&s,this.hasArgument=null!=(r=i.hasArgument)&&r,this.variant=i?.variant,this.variantStyle=i?.variantStyle,this.subsupPlacement=i?.limits,this.isExtensibleSymbol=null!=(l=i?.isExtensibleSymbol)&&l}static fromJson(n,a){return new qi(n.command,n.body?n.body:n.value,a,n)}toJson(){let n=super.toJson();return this.hasArgument&&(n.hasArgument=!0),this.variant&&(n.variant=this.variant),this.variantStyle&&(n.variantStyle=this.variantStyle),this.subsupPlacement&&(n.limits=this.subsupPlacement),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.value&&(n.symbol=this.value),n}render(n){var a;let e,i=0,o=0;if(this.isExtensibleSymbol){let r=n.isDisplayStyle&&"\\smallint"!==this.value;if(e=new Nt(this.value,{fontFamily:r?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(r?"large-op":"small-op"),type:"mop",maxFontSize:n.scalingFactor}),!e)return null;e.right=e.italic,i=(e.height-e.depth)/2-co*n.scalingFactor,o=e.italic,e.setStyle("color",this.style.color),e.setStyle("background-color",this.style.backgroundColor)}else if(this.body){if(e=Tt.createBox(n,this.body,{newList:!0}),!e)return null;e.setStyle("color",this.style.color),e.setStyle("background-color",this.style.backgroundColor)}else e=new Nt(this.value,{type:"mop",mode:"math",maxFontSize:n.scalingFactor,style:{color:this.style.color,backgroundColor:this.style.backgroundColor,letterShapeStyle:n.letterShapeStyle,variant:this.variant,variantStyle:this.variantStyle}});this.isExtensibleSymbol&&e.setTop(i);let s=e;if(this.superscript||this.subscript){let r=null!=(a=this.subsupPlacement)?a:"auto";s="over-under"===r||"auto"===r&&n.isDisplayStyle?this.attachLimits(n,{base:e,baseShift:i,slant:o}):this.attachSupsub(n,{base:e})}return this.caret&&(s.caret=this.caret),new Nt(this.bind(n,s),{type:"mop",classes:"op-group"+(this.isSelected?" ML__selected":"")})}serialize(n){if("\u200b"===this.value)return this.supsubToLatex(n);let a=[];return a.push(this.command),this.hasArgument&&a.push(`{${this.bodyToLatex(n)}}`),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&a.push("\\limits"),"adjacent"===this.subsupPlacement&&a.push("\\nolimits"),"auto"===this.subsupPlacement&&a.push("\\displaylimits")),a.push(this.supsubToLatex(n)),un(a)}},sa=class extends Tt{constructor(n,a,e,i){var o,s;super("overlap",e,{command:n,style:i?.style}),this.skipBoundary=!0,this.body="string"==typeof a?[new Tt("mord",e,{value:a})]:a,this.align=null!=(o=i?.align)?o:"left",this.boxType=null!=(s=i?.boxType)?s:"mord"}static fromJson(n,a){return new sa(n.command,n.body,a,n)}toJson(){let n={};return this.align&&(n.align=this.align),this.boxType&&(n.boxType=this.boxType),At(At({},super.toJson()),n)}render(n){let a=Tt.createBox(n,this.body,{classes:"inner"});return a?(this.caret&&(a.caret=this.caret),this.bind(n,new Nt([a,new Nt(null,{classes:"fix"})],{classes:"left"===this.align?"llap":"rlap",type:this.boxType}))):null}},Fa=class extends Tt{constructor(n,a,e,i){var o,s,r,l;super("phantom",e,{command:n,style:i.style}),this.captureSelection=!0,this.body=a,this.isInvisible=null!=(o=i.isInvisible)&&o,this.smashDepth=null!=(s=i.smashDepth)&&s,this.smashHeight=null!=(r=i.smashHeight)&&r,this.smashWidth=null!=(l=i.smashWidth)&&l}static fromJson(n,a){return new Fa(n.command,n.body,a,n)}toJson(){let n={};return this.isInvisible&&(n.isInvisible=!0),this.smashDepth&&(n.smashDepth=!0),this.smashHeight&&(n.smashHeight=!0),this.smashWidth&&(n.smashWidth=!0),At(At({},super.toJson()),n)}render(n){let a=new fe(n,{isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return Tt.createBox(a,this.body,{classes:"inner"});let e=Tt.createBox(this.isInvisible?a:n,this.body);if(!e)return null;if(this.smashWidth){let i=new Nt(null,{classes:"fix"});return new Nt([e,i],{classes:"rlap"}).wrap(n)}if(!this.smashHeight&&!this.smashDepth)return e;if(this.smashHeight&&(e.height=0),this.smashDepth&&(e.depth=0),e.children)for(let i of e.children)this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0);return new Tn({firstBaseline:[{box:e}]},{type:"mord"}).wrap(n)}},vd=class extends Tt{constructor(n,a,e){var i;super("rule",a,{command:n,style:e.style}),this.shift=null!=(i=e.shift)?i:{dimension:0},this.height=e.height,this.width=e.width}static fromJson(n,a){return new vd(n.command,a,n)}toJson(){let n={height:this.height,width:this.width};return this.shift&&(n.shift=this.shift),At(At({},super.toJson()),n)}render(n){let a=new fe(n,this.style,"textstyle"),e=Ao(this.shift),i=Ao(this.width),o=Ao(this.height),s=new Nt(null,{classes:"rule",type:"mord"});return s.setStyle("border-right-width",i,"em"),s.setStyle("border-top-width",o,"em"),s.setStyle("border-color",this.style.color),s.setStyle("vertical-align",e,"em"),this.isSelected&&s.setStyle("opacity","50%"),s.width=i,s.height=o+e,s.depth=-e,this.bind(n,s),this.caret&&(s.caret=this.caret),s.wrap(a)}serialize(n){var a;let e=null!=(a=this.command)?a:"";return this.shift&&(e+=`[${ld(this.shift)}]`),e+=`{${ld(this.width)}}{${ld(this.height)}}`,e}},bd=class extends Tt{constructor(n,a,e){var i;super("surd",a,{command:n,mode:null!=(i=e.mode)?i:"math",style:e.style,displayContainsHighlight:!0}),this.body=e.body,this.above=e.index}static fromJson(n,a){return new bd(n.command,a,ge(At({},n),{index:n.above}))}toJson(){return super.toJson()}serialize(n){let a="";return this.above&&(a+=`[${this.aboveToLatex(n)}]`),a+=`{${this.bodyToLatex(n)}}`,this.command+a}render(n){var a;let e=new fe(n,this.style,"cramp"),i=null!=(a=Tt.createBox(e,this.body,{style:this.style,newList:!0}))?a:new Nt(null),o=e.scalingFactor,s=e.metrics.defaultRuleThickness/o,r=n.isDisplayStyle?Ma:s,l=new Nt(null,{classes:"ML__sqrt-line",style:this.style,height:s}),c=o*(s+r/4),u=Math.max(2*o*r,i.height+i.depth)+c+s,d=new fe(n,this.style),m=this.isSelected?" ML__selected":"",p=this.bind(d,new Nt(Hl("","\\surd",u,!1,d,{classes:m}),{classes:"ML__sqrt-sign"+m,style:this.style}));if(!p)return null;let b=p.height+p.depth-s;b>i.height+i.depth+c&&(c=(c+b-(i.height+i.depth))/2),p.setTop(p.height-i.height-c);let y=this.bind(n,new Tn({firstBaseline:[{box:new Nt(i)},c-2*s,{box:l},s]}).wrap(n)),C=Tt.createBox(new fe(n,this.style,"scriptscriptstyle"),this.above,{style:this.style,newList:!0});if(!C){let U=new Nt([p,y],{classes:this.containsCaret?"ML__contains-caret":"",type:"mord"});return this.caret&&(U.caret=this.caret),this.bind(n,U.wrap(n))}let I=new Tn({shift:-.6*(Math.max(p.height,y.height)-Math.max(p.depth,y.depth)),children:[{box:C}]}),D=new Nt([new Nt(I,{classes:"ML__sqrt-index"}),p,y],{type:"mord",classes:this.containsCaret?"ML__contains-caret":""});return D.height=p.height,D.depth=p.depth,this.caret&&(D.caret=this.caret),this.bind(n,D.wrap(n))}},Jm={"p@":"1pt ","z@":"0pt",maxdimen:"16383.99999pt",hfuzz:"0.1pt",vfuzz:"0.1pt",overfullrule:"5pt",hsize:"6.5in",vsize:"8.9in",parindent:"20pt",maxdepth:"4pt",splitmaxdepth:"\\maxdimen",boxmaxdepth:"\\maxdimen",delimitershortfall:"5pt",nulldelimiterspace:"1.2pt",scriptspace:"0.5pt",topskip:"10pt",splittopskip:"10pt",normalbaselineskip:"12pt",normallineskip:"1pt",normallineskiplimit:"0pt",jot:"3pt",doublerulesep:"2pt",arrayrulewidth:"0.4pt",arraycolsep:"5pt",fboxsep:"3pt",fboxrule:"0.4pt"},Hm={"z@skip":"0pt plust0pt minus0pt",hideskip:"-1000pt plust 1fill","@flushglue":"0pt plust 1fill",parskip:"0pt plus 1pt",abovedisplayskip:"12pt plus 3pt minus 9pt",abovedisplayshortskip:"0pt plus 3pt",belowdisplayskip:"12pt plus 3pt minus 9pt",belowdisplayshortskip:"7pt plus 3pt minus 4pt",parfillskip:"0pt plus 1fil",thinmuskip:"3mu",medmuskip:"4mu plus 2mu minus 4mu",thickmuskip:"5mu plus 5mu",smallskipamount:"3pt plus1pt minus1pt",medskipamount:"6pt plus2pt minus2pt",bigskipamount:"12pt plus4pt minus4pt"},z9={pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:"",month:(new Date).getMonth()+1,day:(new Date).getDate(),year:(new Date).getFullYear()};function $m(n){var a,e;if(ra)return ra;ra=At({},z9);for(let i of Object.keys(Jm))ra[i]=null!=(a=Yl(Jm[i],n,ra))?a:0;for(let i of Object.keys(Hm))ra[i]=null!=(e=Q9(Hm[i],n,ra))?e:0;return ra}function Qa(){let n={registers:{},smartFence:!1,fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",letterShapeStyle:Ye.locale.startsWith("fr")?"french":"tex",colorMap:Ll,backgroundColorMap:Gu,getDefinition:yd,getMacro:a=>Km(a,nd())};return ge(At({},n),{registers:$m(n)})}function yd(n,a="math"){if(!n||0===n.length)return null;let e=null;if(n.startsWith("\\")){if(e=Co[n],e)return e;"math"===a?e=ko[n]:Jo[n]&&(e={definitionType:"symbol",type:"mord",codepoint:Jo[n]})}else if("math"===a){if(e=ko[n],!e&&1===n.length){let i=Nl("math",n.codePointAt(0));return i.startsWith("\\")?ge(At({},yd(i,"math")),{command:i}):null}}else Jo[n]?e={definitionType:"symbol",type:"mord",codepoint:Jo[n]}:"text"===a&&(e={definitionType:"symbol",type:"mord",codepoint:n.codePointAt(0)});return e&&"symbol"===e.definitionType&&"mord"===e.type&&(102===e.codepoint||103===e.codepoint||104===e.codepoint)&&(e.isFunction=!0),e??null}function Km(n,a){return n.startsWith("\\")?a[n.slice(1)]:null}var Xl=class extends Tt{constructor(n,a,e,i){super("tooltip",e,{command:i?.command,mode:"math",serialize:i?.serialize,style:i?.style,displayContainsHighlight:!0}),this.body=n;let o=Qa();this.tooltip=new Tt("root",o,{style:{}}),this.tooltip.body=a,this.skipBoundary=!0,this.captureSelection=!1}static fromJson(n,a){return new Xl(n.body,_o(n.tooltip,a),a,n)}toJson(){var n;let a=null==(n=this.tooltip.body)?void 0:n.filter(e=>"first"!==e.type).map(e=>e.toJson());return ge(At({},super.toJson()),{tooltip:a})}render(n){let a=Tt.createBox(n,this.body,{style:this.style});if(!a)return null;let e=Ql(gs(new Nt(this.tooltip.render(new fe({registers:n.registers},{fontSize:5},"displaystyle")),{classes:"ML__tooltip-content"}))),i=new Nt([e,a],{classes:"ML__tooltip-container"});return this.caret&&(i.caret=this.caret),this.bind(n,i)}serialize(n){return`${this.command}{${this.bodyToLatex(n)}}{${Tt.serialize(this.tooltip.body,n)}}`}};function _o(n,a){if(Pn(n))return n.map(o=>_o(o,a));n=At({},n);for(let o of Za)n[o]&&(n[o]=_o(n[o],a));n.array&&(n.array=_o(n.array,a));let i,e=n.type;"accent"===e&&(i=cr.fromJson(n,a)),"array"===e&&(i=on.fromJson(n,a)),"box"===e&&(i=ja.fromJson(n,a)),"chem"===e&&(i=gd.fromJson(n,a)),"choice"===e&&(i=wd.fromJson(n,a)),"composition"===e&&(i=hd.fromJson(n,a)),"delim"===e&&(i=fd.fromJson(n,a)),"enclose"===e&&(i=bs.fromJson(n,a)),"error"===e&&(i=md.fromJson(n,a)),"genfrac"===e&&(i=qa.fromJson(n,a)),"group"===e&&(i=Nn.fromJson(n,a)),"latex"===e&&(i=An.fromJson(n,a)),"latexgroup"===e&&(i=aa.fromJson(n,a)),"leftright"===e&&(i=$n.fromJson(n,a)),"line"===e&&(i=Vl.fromJson(n,a)),"macro"===e&&(i=pd.fromJson(n,a)),"msubsup"===e&&(i=_r.fromJson(n,a)),"overlap"===e&&(i=sa.fromJson(n,a)),"overunder"===e&&(i=ji.fromJson(n,a)),"placeholder"===e&&(n.defaultValue&&(n.defaultValue=_o(n.defaultValue,a)),i=fn.fromJson(n,a)),"phantom"===e&&(i=Fa.fromJson(n,a)),"rule"===e&&(i=vd.fromJson(n,a)),"sizeddelim"===e&&(i=xd.fromJson(n,a)),"spacing"===e&&(i=Da.fromJson(n,a)),"surd"===e&&(i=bd.fromJson(n,a)),"text"===e&&(i=vs.fromJson(n,a)),"tooltip"===e&&(i=Xl.fromJson(n,a)),"mop"===e&&(i=qi.fromJson(n,a)),i||(["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(e),i=Tt.fromJson(n,a));for(let o of Za)n[o]&&i.setChildren(n[o],o);return void 0!==n.verbatimLatex&&(i.verbatimLatex=n.verbatimLatex),n.subsupPlacement&&(i.subsupPlacement=n.subsupPlacement),n.explicitSubsupPlacement&&(i.explicitSubsupPlacement=!0),n.isFunction&&(i.isFunction=!0),n.isExtensibleSymbol&&(i.isExtensibleSymbol=!0),n.skipBoundary&&(i.skipBoundary=!0),n.captureSelection&&(i.captureSelection=!0),i}var wd=class extends Tt{constructor(n,a){super("choice",a),this.choices=n,this.skipBoundary=!0}static fromJson(n,a){return new wd([_o(n.choices[0],a),_o(n.choices[1],a),_o(n.choices[2],a),_o(n.choices[3],a)],a)}toJson(){let n=[];for(let a of this.choices)n.push(a.filter(e=>"first"!==e.type).map(e=>e.toJson()));return ge(At({},super.toJson()),{choices:n})}render(n){let a=Tt.createBox(n,this.choices[Math.floor(n.mathstyle.id/2)]);return a?(this.caret&&(a.caret=this.caret),this.bind(n,a)):null}serialize(n){return`\\mathchoice{${Tt.serialize(this.choices[0],n)}}{${Tt.serialize(this.choices[1],n)}}{${Tt.serialize(this.choices[2],n)}}{${Tt.serialize(this.choices[3],n)}}`}};Ct("mathtip","{:math}{:math}",{createAtom:(n,a,e,i)=>new Xl(a[0],a[1],i,{command:n,content:"math",style:e})}),Ct("texttip","{:math}{:text}",{createAtom:(n,a,e,i)=>new Xl(a[0],a[1],i,{command:n,content:"text",style:e})}),Ct("error","{:math}",{createAtom:(n,a,e,i)=>new Nn(a[0],i,{mode:"math",command:"\\error",customClass:"ML__error",style:e,serialize:(o,s)=>`\\error{${o.bodyToLatex(s)}}`})}),Ct("ensuremath","{:math}",{createAtom:(n,a,e,i)=>new Nn(a[0],i,{mode:"math",latexOpen:"\\ensuremath{",latexClose:"}",style:e})}),Ct("color","{:string}",{applyStyle:(n,a,e)=>{var i,o;let s=a[0];return{verbatimColor:a[0],color:null!=(o=null==(i=e.colorMap)?void 0:i.call(e,s))?o:s}}}),Ct("textcolor","{:string}{content:auto*}",{applyStyle:(n,a,e)=>{var i,o;let s=a[0];return{verbatimColor:s,color:null!=(o=null==(i=e.colorMap)?void 0:i.call(e,s))?o:s}}}),Ct("boxed","{content:math}",{createAtom:(n,a,e,i)=>new ja(n,a[0],i,{framecolor:"black",style:e})}),Ct("colorbox","{:string}{content:auto*}",{applyMode:"text",applyStyle:(n,a,e)=>{var i,o;let s=a[0];return{verbatimBackgroundColor:a[0],backgroundColor:null!=(o=null==(i=e.backgroundColorMap)?void 0:i.call(e,s))?o:s}}}),Ct("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{applyMode:"text",createAtom:(n,a,e,i)=>{var o,s,r,l;let c=a[0],u=a[1];return new ja(n,a[2],i,{verbatimFramecolor:c,framecolor:null!=(s=null==(o=i.colorMap)?void 0:o.call(i,c))?s:c,verbatimBackgroundcolor:a[1],backgroundcolor:null!=(l=null==(r=i.backgroundColorMap)?void 0:r.call(i,u))?l:u,style:e,serialize:(d,m)=>{var p,b;return`${d.command}{${null!=(p=d.verbatimFramecolor)?p:d.framecolor}{${null!=(b=d.verbatimBackgroundcolor)?b:d.backgroundcolor}}{${d.bodyToLatex(m)}}`}})}}),Ct("bbox","[:bbox]{body:auto}",{createAtom:(n,a,e,i)=>{if(a[0]){let o=a[0];return new ja(n,a[1],i,{padding:o.padding,border:o.border,backgroundcolor:o.backgroundcolor,style:e,serialize:(s,r)=>{var l;let c=n;if(Number.isFinite(s.padding)||void 0!==s.border||void 0!==s.backgroundcolor){let u=[];s.padding&&u.push(s.padding),s.border&&u.push(`border: ${s.border}`),(s.verbatimBackgroundcolor||s.backgroundcolor)&&u.push(null!=(l=s.verbatimBackgroundcolor)?l:s.backgroundcolor),c+=`[${u.join(",")}]`}return c+`{${s.bodyToLatex(r)}}`}})}return new ja(n,a[1],i,{style:e})}}),Ct(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(n,a,e,i)=>new Nn(a[0],i,{latexOpen:`{${n} `,latexClose:"}",style:e,mathstyleName:n.slice(1)})}),Ct(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(n,a)=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[n]})}),Ct("fontseries","{:string}",{ifMode:"text",applyStyle:(n,a)=>({fontSeries:a[0]})}),Ct("fontshape","{:string}",{ifMode:"text",applyStyle:(n,a)=>({fontShape:a[0]})}),Ct("fontfamily","{:string}",{ifMode:"text",applyStyle:(n,a)=>({fontFamily:a[0]})}),Ct("selectfont","",{ifMode:"text",applyStyle:(n,a)=>({})}),Ct("bf","",{applyStyle:(n,a)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})}),Ct(["boldsymbol","bm"],"{:math*}",{applyMode:"math",createAtom:(n,a,e,i)=>new Nn(a[0],i,{latexOpen:`${n}{`,latexClose:"}",style:e,customClass:"ML__boldsymbol"})}),Ct("bold","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variantStyle:"bold"})}),Ct("bfseries","",{applyMode:"text",applyStyle:(n,a)=>({fontSeries:"b"})}),Ct("mdseries","",{applyMode:"text",applyStyle:(n,a)=>({fontSeries:"m"})}),Ct("upshape","",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"n"})}),Ct("slshape","",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"sl"})}),Ct("scshape","",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"sc"})}),Ct("textbf","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontSeries:"b"})}),Ct("textmd","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontSeries:"m"})}),Ct("textup","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"n"})}),Ct("textnormal","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"n",fontSeries:"m"})}),Ct("textsl","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"sl"})}),Ct("textit","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"it"})}),Ct("textsc","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontShape:"sc"})}),Ct("textrm","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontFamily:"roman"})}),Ct("textsf","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontFamily:"sans-serif"})}),Ct("texttt","{:text*}",{applyMode:"text",applyStyle:(n,a)=>({fontFamily:"monospace"})}),Ct("mathbf","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"normal",variantStyle:"bold"})}),Ct("mathit","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"main",variantStyle:"italic"})}),Ct("mathnormal","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"normal",variantStyle:"italic"})}),Ct("mathbfit","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"main",variantStyle:"bolditalic"})}),Ct("mathrm","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"normal",variantStyle:"up"})}),Ct("mathsf","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"sans-serif",variantStyle:"up"})}),Ct("mathtt","{:math*}",{applyMode:"math",applyStyle:(n,a)=>({variant:"monospace",variantStyle:"up"})}),Ct("it","",{applyStyle:(n,a)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})}),Ct("rmfamily","",{applyStyle:(n,a)=>({fontFamily:"roman"})}),Ct("sffamily","",{applyStyle:(n,a)=>({fontFamily:"sans-serif"})}),Ct("ttfamily","",{applyStyle:(n,a)=>({fontFamily:"monospace"})}),Ct(["Bbb","mathbb"],"{:math*}",{applyStyle:(n,a)=>({variant:"double-struck",variantStyle:"up"})}),Ct(["frak","mathfrak"],"{:math*}",{applyStyle:(n,a)=>({variant:"fraktur",variantStyle:"up"})}),Ct("mathcal","{:math*}",{applyStyle:(n,a)=>({variant:"calligraphic",variantStyle:"up"})}),Ct("mathscr","{:math*}",{applyStyle:(n,a)=>({variant:"script",variantStyle:"up"})}),Ct("mbox","{:text}",{ifMode:"math",createAtom:(n,a,e,i)=>new Nn(a[0],i,{changeMode:!0,style:e,mode:"text",command:n,serialize:(o,s)=>`\\mbox{${o.bodyToLatex(ge(At({},s),{skipModeCommand:!0}))}}`})}),Ct("text","{:text}",{ifMode:"math",applyMode:"text"}),Ct("class","{name:string}{content:auto*}",{createAtom:(n,a,e,i)=>new Nn(a[1],i,{customClass:a[0],style:e})}),Ct("cssId","{id:string}{content:auto}",{createAtom:(n,a,e,i)=>new Nn(a[1],i,{cssId:a[0],style:e})}),Ct("htmlData","{data:string}{content:auto}",{createAtom:(n,a,e,i)=>new Nn(a[1],i,{htmlData:a[0],style:e})}),Ct("htmlStyle","{data:string}{content:auto}",{createAtom:(n,a,e,i)=>new Nn(a[1],i,{htmlStyle:a[0],style:e})}),Ct("em","{:auto*}",{createAtom:(n,a,e,i)=>new Nn(a[0],i,{latexOpen:"\\em",latexClose:"",customClass:"ML__emph",style:e})}),Ct("emph","{:auto}",{createAtom:(n,a,e,i)=>new Nn(a[0],i,{latexOpen:"\\emph{",latexClose:"}",customClass:"ML__emph",style:e})});var Ym={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Ct(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(n,a,e,i)=>new xd(n,a[0],i,{size:Ym[n].size,delimClass:Ym[n].mclass,style:e})}),Ct(["hspace","hspace*"],"{width:glue}",{createAtom:(n,a,e,i)=>{var o;return new Da(n,e,i,null!=(o=a[0])?o:{glue:{dimension:0}})}}),Ct(["mkern","kern"],"{width:glue}",{createAtom:(n,a,e,i)=>{var o;return new Da(n,e,i,null!=(o=a[0])?o:{glue:{dimension:0}})}}),Ct("mspace","{width:glue}",{createAtom:(n,a,e,i)=>{var o;return new Da(n,e,i,null!=(o=a[0])?o:{glue:{dimension:0}})}}),Ct("mathop","{:auto}",{createAtom:(n,a,e,i)=>new qi(n,a[0],i,{type:"mop",captureSelection:!0,limits:"over-under",isFunction:!0,hasArgument:!0,style:e})}),Ct("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(n,a,e,i)=>new wd(a,i)}),Ct(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(n,a,e,i)=>new qi(n,a[0],i,{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[n],captureSelection:!0,hasArgument:!0,style:e})}),Ct(["operatorname","operatorname*"],"{operator:math}",{createAtom:(n,a,e,i)=>{let o=new qi(n,a[0],i,{isFunction:!0,hasArgument:!0,limits:"\\operatorname"===n?"adjacent":"over-under",style:e});return o.captureSelection=!0,o.body&&o.body.forEach(s=>{var r;"first"!==s.type&&(s.type="mord",s.value=null!=(r={"\u2217":"*","\u2212":"-"}[s.value])?r:s.value,s.isFunction=!1,!s.style.variant&&!s.style.variantStyle&&(s.style.variant="main",s.style.variantStyle="up"))}),o}});var J9=class extends Tt{constructor(n,a,e){let i=Number.parseInt(n);Number.isFinite(i)||(i=10067),super("mord",e,{value:String.fromCodePoint(i),style:a}),this.codepoint=i}serialize(n){return'\\unicode"'+("000000"+this.codepoint.toString(16)).toUpperCase().slice(-6)}};function tc(n){if(1===n.length){let a=n[0];if("mbin"===a.type)return"mbin";if("mrel"===a.type)return"mrel"}return"mord"}Ct("unicode","{charcode:number}",{createAtom:(n,a,e,i)=>new J9(a[0],e,i)}),Ct("rule","[raise:dimen]{width:dimen}{thickness:dimen}",{createAtom:(n,a,e,i)=>new vd(n,i,{shift:a[0],width:a[1],height:a[2],style:e})}),Ct("overline","{:auto}",{createAtom:(n,a,e,i)=>new Vl(n,a[0],i,{position:"overline",style:e})}),Ct("underline","{:auto}",{createAtom:(n,a,e,i)=>new Vl(n,a[0],i,{position:"underline",style:e})}),Ct("overset","{above:auto}{base:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{above:a[0],body:a[1],skipBoundary:!1,style:e,boxType:tc(a[1]),serialize:(o,s)=>`${o.command}{${o.aboveToLatex(s)}}{${o.bodyToLatex(s)}}`})}),Ct("underset","{below:auto}{base:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{below:a[0],body:a[1],skipBoundary:!1,style:e,boxType:tc(a[1]),serialize:(o,s)=>`${n}{${o.belowToLatex(s)}}{${o.bodyToLatex(s)}}`})}),Ct("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{above:a[0],below:a[1],body:a[2],skipBoundary:!1,style:e,boxType:tc(a[2]),serialize:(o,s)=>`${o.command}{${o.aboveToLatex(s)}}{${o.bodyToLatex(s)}}`})}),Ct(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[2],above:a[1],below:a[0],skipBoundary:!1,style:e,boxType:"\\stackrel"===n?"mrel":"mbin",serialize:(o,s)=>`${o.command}{${o.aboveToLatex(s)}}{${o.bodyToLatex(s)}}`})}),Ct("smash","[:string]{:auto}",{createAtom:(n,a,e,i)=>new Fa(n,a[1],i,a[0]?{smashHeight:a[0].includes("t"),smashDepth:a[0].includes("b"),style:e}:{smashHeight:!0,smashDepth:!0,style:e})}),Ct(["vphantom"],"{:auto*}",{createAtom:(n,a,e,i)=>new Fa(n,a[1],i,{isInvisible:!0,smashWidth:!0,style:e})}),Ct(["hphantom"],"{:auto*}",{createAtom:(n,a,e,i)=>new Fa(n,a[1],i,{isInvisible:!0,smashHeight:!0,smashDepth:!0,style:e})}),Ct(["phantom"],"{:auto*}",{createAtom:(n,a,e,i)=>new Fa(n,a[1],i,{isInvisible:!0,style:e})}),Ct("not","{:math}",{createAtom:(n,a,e,i)=>{if(a.length<1||null===a[0])return new Tt("mrel",i,{command:n,style:e,value:"\ue020"});let o=a[0];return new Nn([new sa(n,"\ue020",i,{align:"right",style:e,boxType:"mrel"}),...o],i,{boxType:"mrel",captureSelection:!0,command:"\\not",serialize:(s,r)=>{let l=Tt.serialize(o,r);return 1!==l.length||/[a-zA-Z]/.test(l)?`\\not{${l}}`:"\\not"+l}})}}),Ct(["ne","neq"],"",{createAtom:(n,a,e,i)=>new Nn([new sa(n,"\ue020",i,{align:"right",style:e,boxType:"mrel"}),new Tt("mrel",i,{style:e,value:"="})],i,{boxType:"mrel",captureSelection:!0,serialize:()=>n,command:n})}),Ct("rlap","{:auto}",{createAtom:(n,a,e,i)=>new sa(n,a[0],i,{align:"right",style:e})}),Ct("llap","{:auto}",{createAtom:(n,a,e,i)=>new sa(n,a[0],i,{style:e})}),Ct("mathllap","{:auto}",{createAtom:(n,a,e,i)=>new sa(n,a[0],i,{style:e})}),Ct("mathrlap","{:auto}",{createAtom:(n,a,e,i)=>new sa(n,a[0],i,{align:"right",style:e})});var Gm={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};function Fi(n){for(let a of n)for(let e of a)if(e.length>0)return!1;return!0}Ct(Object.keys(Gm),"{body:auto}",{createAtom:(n,a,e,i)=>new cr(n,a[0],i,{accentChar:Gm[n.slice(1)],style:e})}),Ct(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(n,a,e,i)=>{let o=Em(a[0]);return new cr(n,a[0],i,{style:e,svgAccent:n.slice(1)+(o.length>5?"4":["1","1","2","2","3","3"][o.length])})}}),Ct(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(n,a,e,i)=>new cr(n,a[0],i,{style:e,svgAccent:"overarc"})}),Ct(["underarc","underparen"],"{body:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[0],style:e,svgBelow:"underarc"})}),Ct("utilde","{body:auto}",{createAtom:(n,a,e,i)=>{let o=Em(a[0]);return new ji(n,i,{body:a[0],svgBelow:"widetilde"+(o.length>5?"4":["1","1","2","2","3","3"][o.length]),style:e,boxType:tc(a[0])})}}),Ct("^","{:string}",{createAtom:(n,a,e,i)=>{var o;return new Tt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:a[0]&&null!=(o={a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[a[0]])?o:"^"})}}),Ct("`","{:string}",{createAtom:(n,a,e,i)=>{var o;return new Tt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:a[0]&&null!=(o={a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[a[0]])?o:"`"})}}),Ct("'","{:string}",{createAtom:(n,a,e,i)=>{var o;return new Tt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:a[0]&&null!=(o={a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[a[0]])?o:"^"})}}),Ct("~","{:string}",{createAtom:(n,a,e,i)=>{var o;return new Tt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:a[0]&&null!=(o={n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[a[0]])?o:"\xb4"})}}),Ct("c","{:string}",{createAtom:(n,a,e,i)=>{var o;return new Tt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:a[0]&&null!=(o={c:"\xe7",C:"\xc7"}[a[0]])?o:""})}}),Ct("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(n,a,e,i)=>{var o;let s={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:e};if(a[1]){let l=a[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of l){let u=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(u)s.strokeWidth=u[1],s.strokeStyle=u[2],s.strokeColor=u[3];else{let d=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);d&&("mathbackground"===d[1]?s.backgroundcolor=d[2]:"mathcolor"===d[1]?s.strokeColor=d[2]:"padding"===d[1]?s.padding=d[2]:"shadow"===d[1]&&(s.shadow=d[2]))}}"dashed"===s.strokeStyle?s.svgStrokeStyle="5,5":"dotted"===s.strokeStyle&&(s.svgStrokeStyle="1,5")}s.borderStyle=`${s.strokeWidth} ${s.strokeStyle} ${s.strokeColor}`;let r={};return(null!=(o=a[0])?o:"").split(/[, ]/).filter(l=>l.length>0).forEach(l=>{r[l.toLowerCase()]=!0}),new bs(n,a[2],r,i,s)}}),Ct("cancel","{body:auto}",{createAtom:(n,a,e,i)=>new bs(n,a[0],{updiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),Ct("bcancel","{body:auto}",{createAtom:(n,a,e,i)=>new bs(n,a[0],{downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),Ct("xcancel","{body:auto}",{createAtom:(n,a,e,i)=>new bs(n,a[0],{updiagonalstrike:!0,downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),jl("math","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{mathstyleName:"textstyle"}))),jl("displaymath","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{mathstyleName:"textstyle"}))),To("array","{columns:colspec}",(n,a,e,i,o)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:o[0],mathstyleName:"textstyle"}))),To(["equation","equation*","subequations"],"",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:[{align:"c"}]}))),To("multline","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:[{align:"m"}]}))),To(["align","align*","aligned","eqnarray"],"",(n,a,e,i)=>{let o=0;Fi(e)&&(e=[[[new Tt("first",n),new fn(n)],[new Tt("first",n),new fn(n)]]]);for(let l of e)o=Math.max(o,l.length);let s=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],r=2;for(;r<o;)s.push({gap:1}),s.push({align:"r"}),s.push({gap:.25}),s.push({align:"l"}),r+=2;return s.push({gap:0}),new on(n,a,e,i,{arraycolsep:0,columns:s,colSeparationType:"align",jot:.3,minColumns:2})}),To("split","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)],[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:[{align:"r"},{align:"l"}],minColumns:2}))),To(["gather","gathered"],"",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:[{gap:.25},{align:"c"},{gap:0}],colSeparationType:"gather"}))),To(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",(n,a,e,i,o)=>{var s;Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]);let r=".",l=".";switch(a){case"pmatrix":case"pmatrix*":r="(",l=")";break;case"bmatrix":case"bmatrix*":r="[",l="]";break;case"Bmatrix":case"Bmatrix*":r="\\lbrace",l="\\rbrace";break;case"vmatrix":case"vmatrix*":r="\\vert",l="\\vert";break;case"Vmatrix":case"Vmatrix*":r="\\Vert",l="\\Vert";break;case"matrix":case"matrix*":r=".",l="."}return new on(n,a,e,i,{mathstyleName:"textstyle",leftDelim:r,rightDelim:l,columns:null!=(s=o[0])?s:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]})}),To(["smallmatrix","smallmatrix*"],"[columns:colspec]",(n,a,e,i,o)=>{var s;return Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{mathstyleName:"scriptstyle",columns:null!=(s=o[0])?s:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],colSeparationType:"small",arraystretch:.5})}),To(["cases","dcases"],"",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{mathstyleName:"dcases"===a?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]}))),To("rcases","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]}))),jl("center","",(n,a,e,i)=>(Fi(e)&&(e=[[[new Tt("first",n),new fn(n)]]]),new on(n,a,e,i,{columns:[{align:"c"}]}))),Ct(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:e,svgAbove:n.slice(1)})}),Ct("overbrace","{:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:e,svgAbove:n.slice(1)})}),Ct(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:e,svgBelow:n.slice(1)})}),Ct(["underbrace"],"{:auto}",{createAtom:(n,a,e,i)=>new ji(n,i,{body:a[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:e,svgBelow:n.slice(1)})}),Ct(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",{createAtom:(n,a,e,i)=>{var o,s;return new ji(n,i,{style:e,svgBody:n.slice(1),above:0===(null==(o=a[1])?void 0:o.length)?void 0:a[1],below:null!=(s=a[0])?s:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"mrel",serialize:(r,l)=>n+(r.hasEmptyBranch("below")?"":`[${r.belowToLatex(l)}]`)+`{${r.aboveToLatex(l)}}${r.supsubToLatex(l)}`})}}),Ct(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,createAtom:(n,a,e,i)=>new qi(n,n.slice(1),i,{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up",style:e})}),Ct(["liminf","limsup"],"",{createAtom:(n,a,e,i)=>new qi(n,{"\\liminf":"lim inf","\\limsup":"lim sup"}[n],i,{limits:"over-under",variant:"main",style:e})}),Ct(["lim","mod"],"",{createAtom:(n,a,e,i)=>new qi(n,n.slice(1),i,{limits:"over-under",variant:"main",style:e})}),Ct(["det","max","min"],"",{isFunction:!0,createAtom:(n,a,e,i)=>new qi(n,n.slice(1),i,{limits:"over-under",isFunction:!0,variant:"main",style:e})}),Ct(["ang"],"{:math}",{isFunction:!0,createAtom:(n,a,e,i)=>new Nn([...a[0],new Tt("mord",i,{value:"\xb0",style:e})],i,{mode:"math",latexOpen:"\\ang{",latexClose:"}",style:e})}),Ct("sqrt","[index:auto]{radicand:auto}",{createAtom:(n,a,e,i)=>new bd(n,i,{body:a[1],index:a[0],style:e})}),Ct(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",{createAtom:(n,a,e,i)=>{let o={style:e};switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o.hasBarLine=!0;break;case"\\atopfrac":o.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o.hasBarLine=!1,o.leftDelim="(",o.rightDelim=")"}switch(n){case"\\dfrac":case"\\dbinom":o.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":o.mathstyleName="textstyle";break;case"\\cfrac":o.hasBarLine=!0,o.continuousFraction=!0}return new qa(n,a[0],a[1],i,o)}}),Ct(["brace","brack"],"",{infix:!0,createAtom:(n,a,e,i)=>new qa(n,a[0],a[1],i,{hasBarLine:!1,leftDelim:"\\brace"===n?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===n?"\\rbrace":"\\rbrack",style:e,serialize:(o,s)=>un([o.aboveToLatex(s),o.command,o.belowToLatex(s)])})}),Ct(["over","atop","choose"],"",{infix:!0,createAtom:(n,a,e,i)=>{let o,s;return"\\choose"===n&&(o="(",s=")"),new qa(n,a[0],a[1],i,{hasBarLine:"\\over"===n,leftDelim:o,rightDelim:s,style:e,serialize:(r,l)=>un([r.aboveToLatex(l),r.command,r.belowToLatex(l)])})}}),Ct(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:(n,a,e,i)=>new qa(n,a[0],a[1],i,{leftDelim:a[2],rightDelim:a[3],hasBarLine:!1,style:e,serialize:(o,s)=>`${o.aboveToLatex(s)} ${o.command}${o.leftDelim}${o.rightDelim}${o.belowToLatex(s)}`})}),Ct("pdiff","{numerator}{denominator}",{createAtom:(n,a,e,i)=>new qa(n,a[0],a[1],i,{hasBarLine:!0,numerPrefix:"\u2202",denomPrefix:"\u2202",style:e})}),Ct(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{createAtom:(n,a,e,i)=>new qi(n,{coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[n.slice(1)],i,{isExtensibleSymbol:!0,limits:"auto",variant:"main",style:e})}),Ct("smallint","",{createAtom:(n,a,e,i)=>new qi(n,"\u222b",i,{limits:"adjacent",isExtensibleSymbol:!1,style:e,variant:"main"})});var kd={int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228e",wr:"\u2240",amalg:"\u2a3f",Cap:"\u22d2",Cup:"\u22d3",doublecap:"\u22d2",doublecup:"\u22d3"};function $9(n,a){return n[0]===a[0]&&n[1]===a[1]?"equal":"different"}function Vi(n){let a=1/0,e=-1/0;for(let i of n.ranges)a=Math.min(a,i[0],i[1]),e=Math.max(e,i[0],i[1]);return[a,e]}function Cd(n,a,e){return e?function K9(n,a){if(!a)return"";if("string"==typeof a)return a;if(!n||void 0===a.after)return a.value;let e=!1,i=!1,o=!1,s=!1,r=!1,l=!1,c=!1,u=!1,d=!1,m=!1,p=!1,b=!1,y=!1,C=!1,I=!1,D=n[0],U=0;for(;D&&/msubsup|placeholder/.test(D.type);)U+=1,D=n[U];return e=!D||"first"===D.type,D&&(C="text"===D.mode,i=!C&&"mord"===D.type&&V7.test(D.value),o=!C&&"mord"===D.type&&/\d+$/.test(D.value),s=!C&&D.isFunction,r="genfrac"===D.type,l="surd"===D.type,c="mbin"===D.type,u="mrel"===D.type,d="mop"===D.type,m="mpunct"===D.type||"minner"===D.type,p="array"===D.type,b="mopen"===D.type,y="mclose"===D.type||"leftright"===D.type,I="space"===D.type),a.after.includes("nothing")&&e||a.after.includes("letter")&&i||a.after.includes("digit")&&o||a.after.includes("function")&&s||a.after.includes("frac")&&r||a.after.includes("surd")&&l||a.after.includes("binop")&&c||a.after.includes("relop")&&u||a.after.includes("operator")&&d||a.after.includes("punct")&&m||a.after.includes("array")&&p||a.after.includes("openfence")&&b||a.after.includes("closefence")&&y||a.after.includes("text")&&C||a.after.includes("space")&&I?a.value:""}(n,e[a]):""}Ct(Object.keys(kd),"",{createAtom:(n,a,e,i)=>new qi(n,kd[n.slice(1)],i,{limits:"adjacent",isExtensibleSymbol:!0,style:e,variant:{"\u22d2":"ams","\u22d3":"ams"}[kd[n.slice(1)]]})}),Ct(["Re","Im"],"",{createAtom:(n,a,e,i)=>new qi(n,{"\\Re":"\u211c","\\Im":"\u2111"}[n],i,{limits:"adjacent",style:e,isFunction:!0,variant:"fraktur"})}),Ct("middle","{:delim}",{createAtom:(n,a,e,i)=>new fd(n,a[0],i,{size:1,style:e})}),Qn("0123456789/@.?!"),Am(65,90),Am(97,122),Qn([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),Qn([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),Qn([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),Qn([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),Qn([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),Qn([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nrightarrow",8603],["\\nleftarrow",8602],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),Qn([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),Qn([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),Qn([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),Qn([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),Qn([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),Qn([["\\wp",8472],["\\aleph",8501]]),Qn([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),Qn([["\\ ",160],["~",160],["\\space",160]],"space"),Ct(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:(n,a,e,i)=>new Da(n,e,i)}),Qn([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),Qn([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),Qn([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Wm={"&":"\\&","%":"\\%","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","\u221e":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},\u00b5:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",\u03a9:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function ec(n,a){var e;let i=null!=(e=a?.format)?e:"auto";return"auto"===i&&([i,n]=function Y9(n){if((n=n.trim()).length<=1)return["latex",n];let a;return[a,n]=Td(n),a?["latex",n]:n.startsWith("`")&&n.endsWith("`")?["ascii-math",n=n.substring(1,n.length-1)]:n.includes("\\")?["latex",n]:/\$.+\$/.test(n)?["latex",`\\text{${n}}`]:[void 0,n]}(n)),"ascii-math"===i?["ascii-math",pi(n=(n=(n=(n=(n=(n=n.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:a?.inlineShortcuts})]:["latex",n]}function pi(n,a){var e,i,o;if(!n)return"";let r,s=!1,l=null!=(e=a.inlineShortcuts)?e:Wm;if(!s&&(n.startsWith("^")||n.startsWith("_"))&&(r=Ua(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n=n[0]+"{"+r.match+"}",n+=pi(r.rest,a),s=!0),s||(r=n.match(/^(sqrt|\u221A)(.*)/),r&&(r=Ua(r[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt{"+(null!=(i=r.match)?i:"\\placeholder{}")+"}",n+=pi(r.rest,a),s=!0)),s||(r=n.match(/^(\\cbrt|\u221B)(.*)/),r&&(r=Ua(r[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt[3]{"+(null!=(o=r.match)?o:"\\placeholder{}")+"}",n+=pi(r.rest,a),s=!0)),s||(r=n.match(/^abs(.*)/),r&&(r=Ua(r[1],{inlineShortcuts:l,noWrap:!0}),n="\\left|"+r.match+"\\right|",n+=pi(r.rest,a),s=!0)),s||(r=n.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),r&&(n="\\text{"+r[1]+"}",n+=pi(r[2],a),s=!0)),s||(r=n.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),r&&(n=Vm(r[1],l),n+=pi(r[2],a),s=!0)),!s&&/^([fgh])[^a-zA-Z]/.test(n)&&(r=Ua(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n="("===n[1]?n[0]+"\\left("+r.match+"\\right)":n[0]+r.match,n+=pi(r.rest,a),s=!0),s||(r=n.match(/^([a-zA-Z]+)(.*)/),r&&(n=Vm(r[1],l),n+=pi(r[2],a),s=!0)),!s)if(r=Ua(n,{inlineShortcuts:l,noWrap:!0}),r.match&&"/"===r.rest[0]){let c=Ua(r.rest.slice(1),{inlineShortcuts:l,noWrap:!0});c.match&&(n="\\frac{"+r.match+"}{"+c.match+"}"+pi(c.rest,a)),s=!0}else r.match&&(n=n.startsWith("(")?"\\left("+r.match+"\\right)"+pi(r.rest,a):r.match+pi(r.rest,a),s=!0);return s||(r=n.match(/^(\s+)(.*)$/),r&&(n=" "+pi(r[2],a),s=!0)),n}function Ua(n,a){let e="",i=n=n.trim(),o=n.charAt(0),s={"(":")","{":"}","[":"]"}[o];if(s){let r=1,l=1;for(;l<n.length&&r>0;)n[l]===o&&r++,n[l]===s&&r--,l++;0===r?(a.noWrap&&"("===o?e=pi(n.substring(1,l-1),a):("{"===o&&"}"===s&&(o="\\{",s="\\}"),e="\\left"+o+pi(n.substring(1,l-1),a)+"\\right"+s),i=n.slice(Math.max(0,l))):(e=n.substring(1,l),i="")}else{let r=n.match(/^([a-zA-Z]+)/);if(r){let l=Cd(null,n,a.inlineShortcuts);if(l)return l=l.replace("_{#?}",""),l=l.replace("^{#?}",""),{match:l,rest:n.slice(l.length)}}if(r=n.match(/^([a-zA-Z])/),r)return{match:r[1],rest:n.slice(1)};if(r=n.match(/^(-)?\d+(\.\d*)?/),r)return{match:r[0],rest:n.slice(r[0].length)};/^\\(left|right)/.test(n)||(r=n.match(/^(\\[a-zA-Z]+)/),r&&(i=n.slice(r[1].length),e=r[1]))}return{match:e,rest:i}}function Vm(n,a){let e=Cd(null,n,a);return e?(e=e.replace("_{#?}",""),e=e.replace("^{#?}",""),e+=" "):e=n,e}var Xm=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function Td(n){let a=n.trim();for(let e of Xm)if(a.startsWith(e[0])&&a.endsWith(e[1]))return[!0,a.substring(e[0].length,a.length-e[1].length)];return[!1,n]}var V9=(n,a,e)=>(Xm.some(i=>a.startsWith(i[0])&&a.endsWith(i[1]))||(a=`$$ ${a} $$`),a),nc=class{constructor(n){nc._registry[n]=this}static onPaste(n,a,e){var i;if("string"==typeof e){let s=new DataTransfer;s.setData("text/plain",e),e=s}let o=new ClipboardEvent("paste",{clipboardData:e,cancelable:!0});return!(null==(i=a.host)||!i.dispatchEvent(o))&&nc._registry[n].onPaste(a,e)}static onCopy(n,a){if(!a.clipboardData)return;let e=n.model,i=e.selectionIsCollapsed?[0,e.lastOffset]:Vi(e.selection),o=e.getAtoms(i);if(o.every(s=>"text"===s.mode||!s.mode))a.clipboardData.setData("text/plain",o.filter(s=>s instanceof vs).map(s=>s.value).join(""));else if(o.every(s=>"latex"===s.mode))a.clipboardData.setData("text/plain",e.getAtoms(i,{includeChildren:!0}).map(s=>{var r;return null!=(r=s.value)?r:""}).join(""));else{let s;s=1===o.length&&void 0!==o[0].verbatimLatex?o[0].verbatimLatex:e.getValue(i,"latex-expanded"),a.clipboardData.setData("application/x-latex",s);try{a.clipboardData.setData("text/plain",n.options.onExport(n,s,i))}catch{}1===o.length&&("root"===o[0].type||"group"===o[0].type)&&(o=o[0].body.filter(l=>"first"!==l.type));try{a.clipboardData.setData("application/json+mathlive",JSON.stringify(o.map(l=>l.toJson())))}catch{}let r=n.computeEngine;if(r)try{r.jsonSerializationOptions={metadata:["latex"]};let l=r.parse(s),c=JSON.stringify(l.json);c&&a.clipboardData.setData("application/json",c)}catch{}}a.preventDefault()}static insert(n,a,e,i={}){return nc._registry[n].insert(a,e,i)}onPaste(n,a){return!1}insert(n,a,e){return!1}},dn=nc;dn._registry={};var Qi={"\\ne":"<mo>&ne;</mo>","\\neq":"<mo>&neq;</mo>","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"},tp="<mo>&#x2061;</mo>",Ad="<mo>&#8290;</mo>";function ic(n){return n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function tn(n,a){return n&&a.generateID?` extid="${n}"`:""}function X9(n,a,e){var i,o,s,r,l,c,u,d;let m=!1;a=a??n.atoms.length;let p="",b="",y=n.atoms[n.index];if("\\operatorname"===y.command)b=pr(y.body),n.index+=1;else{let C=null!=(o=null==(i=y.style)?void 0:i.variant)?o:"",I=null!=(r=null==(s=y.style)?void 0:s.variantStyle)?r:"";for(;n.index<a&&("mord"===y.type||"macro"===y.type)&&!y.isDigit()&&C===(null!=(c=null==(l=y.style)?void 0:l.variant)?c:"")&&I===(null!=(d=null==(u=y.style)?void 0:u.variantStyle)?d:"");)b+=pr([y]),n.index+=1,y=n.atoms[n.index]}return b.length>0&&(m=!0,p=`<mi>${b}</mi>`,("mi"===n.lastType||"mn"===n.lastType||"mtext"===n.lastType||"fence"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(p)&&(p=Ad+p),b.endsWith(">f</mi>")||b.endsWith(">g</mi>")?(p+=tp,n.lastType="applyfunction"):n.lastType=/^<mo>(.*)<\/mo>$/.test(p)?"mo":"mi",mr(b,n,e)||(n.mathML+=p)),m}function mr(n,a,e){var i;let o=a.atoms[a.index-1];if(!o)return!1;if(!o.superscript&&!o.subscript){if("msubsup"!==(null==(i=a.atoms[a.index])?void 0:i.type))return!1;o=a.atoms[a.index],a.index+=1}let s=De(o.superscript,e),r=De(o.subscript,e);if(!s&&!r)return!1;let l="";return s&&r?l=`<msubsup>${n}${r}${s}</msubsup>`:s?l=`<msup>${n}${s}</msup>`:r&&(l=`<msub>${n}${r}</msub>`),a.mathML+=l,a.lastType="",!0}function nI(n,a,e){a=a??n.atoms.length;let i=n.index,o="";for(;n.index<a&&"text"===n.atoms[n.index].mode;)o+=n.atoms[n.index].value?n.atoms[n.index].value:" ",n.index+=1;return o.length>0&&(n.mathML+=`<mtext ${tn(n.atoms[i].id,e)}\n      >${o}</mtext>`,n.lastType="mtext",!0)}function iI(n,a,e){a=a??n.atoms.length;let i=n.index,o="",s=function eI(n){let a=-1,e=n.index,i=!1,o=!1;for(;e<n.atoms.length&&!i&&!o;){let s=n.atoms[e];i=!s.isDigit(),o=!i&&void 0!==s.superscript,e++}return o&&(a=e-1),a}(n);for(s>=0&&s<a&&(a=s);n.index<a&&n.atoms[n.index].isDigit();)o+=n.atoms[n.index].asDigit(),n.index+=1;return!(o.length<=0||(o="<mn"+tn(n.atoms[i].id,e)+">"+o+"</mn>",s<0&&function tI(n){return n.index<n.atoms.length&&n.atoms[n.index].superscript&&"msubsup"===n.atoms[n.index].type}(n)&&(s=n.index,n.index+=1),mr(o,n,e)||(n.mathML+=o,n.lastType="mn"),0))}function oI(n,a,e){let i=!1,o="",s="";if(n.index<(a=a??n.atoms.length)&&"mopen"===n.atoms[n.index].type){let r=!1,l=0,c=n.index,u=-1,d=c+1;for(;d<a&&!r;)"mopen"===n.atoms[d].type?l+=1:"mclose"===n.atoms[d].type&&(l-=1),-1===l&&(r=!0,u=d),d+=1;r&&(o="<mrow>",o+=Ba(n.atoms[c],e),o+=De(n.atoms,e,c+1,u),o+=Ba(n.atoms[u],e),o+="</mrow>",n.index=u+1,("mi"===n.lastType||"mn"===n.lastType||"mfrac"===n.lastType||"fence"===n.lastType)&&(n.mathML+=Ad),mr(o,n,e)&&(i=!0,n.lastType="",o=""),s="fence")}return o.length>0&&(i=!0,n.mathML+=o,n.lastType=s),i}function aI(n,a,e){let i=!1,o="",s="",r=n.atoms[n.index];if(n.index<(a=a??n.atoms.length)&&("mbin"===r.type||"mrel"===r.type))o+=Sd(n.atoms[n.index],e),n.index+=1,s="mo";else if(n.index<a&&"mop"===r.type){if("over-under"===r.subsupPlacement&&(r.superscript||r.subscript)){let l=Ba(r,e);r.superscript&&r.subscript?(o+="<munderover>"+l,o+=De(r.subscript,e),o+=De(r.superscript,e),o+="</munderover>"):r.superscript?(o+="<mover>"+l,o+=De(r.superscript,e),o+="</mover>"):r.subscript&&(o+="<munder>"+l,o+=De(r.subscript,e),o+="</munder>"),s="mo"}else{let l=n.atoms[n.index],c="\\operatorname"===l.value,u=c?'<mi class="MathML-Unit"'+tn(l.id,e)+">"+pr(l.value)+"</mi>":Ba(l,e);o+=u,c||/^<mo>(.*)<\/mo>$/.test(u)?s=c?"mi":"mo":(o+=tp,s="applyfunction")}("mi"===n.lastType||"mn"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(o)&&(o=Ad+o),n.index+=1}return o.length>0&&(i=!0,mr(o,n,e)||(n.mathML+=o,n.lastType=s)),i}function De(n,a,e,i){let o={atoms:[],index:e??0,mathML:"",lastType:""};if("number"==typeof n||"boolean"==typeof n)o.mathML=n.toString();else if("string"==typeof n)o.mathML=n;else if(n instanceof Tt)o.mathML=Sd(n,a);else if(Array.isArray(n)){o.atoms=n;let s=0;for(i=i||(n?n.length:0);o.index<i;)if(nI(o,i,a)||iI(o,i,a)||X9(o,i,a)||aI(o,i,a)||oI(o,i,a))s+=1;else if(o.index<i){let r=Sd(o.atoms[o.index],a);"mn"===o.lastType&&r.length>0&&"genfrac"===o.atoms[o.index].type&&(r="<mo>&#x2064;</mo>"+r),o.lastType="genfrac"===o.atoms[o.index].type?"mfrac":"",o.index+=1,mr(r,o,a)?s+=1:r.length>0&&(o.mathML+=r,s+=1)}s>1&&(o.mathML="<mrow>"+o.mathML+"</mrow>")}return o.mathML}function Ba(n,a){let e="",i=pr(n.value);return i&&(e="<mo"+tn(n.id,a)+">"+i+"</mo>"),e}function pr(n){if(!n)return"";if("string"==typeof n)return ic(n);if(!Array.isArray(n)&&"string"==typeof n.body)return ic(n.body);let a="";for(let e of n)"string"==typeof e.value&&(a+=e.value);return ic(a)}function Sd(n,a){var e,i,o,s,r,l,c,u,d,m,p,b,y,C,I,D,U,B,q,R,et,Q,V,Y,at;let Et,It,wt,jt,Rt,Kt,tt={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},rt={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."},gt={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},ct="",lt="",Dt=null!=(i={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[null!=(e=n.fontFamily)?e:n.font])?i:"";Dt&&(Dt=` mathvariant="${Dt}"`);let{command:re}=n;if("text"===n.mode)ct=`<mi${tn(n.id,a)}>${n.value}</mi>`;else switch(n.type){case"first":case"line":case"overlap":case"msubsup":case"phantom":case"composition":case"rule":case"chem":case"error":break;case"group":case"root":ct=Qi[n.command]?Qi[n.command]:De(n.body,a);break;case"array":if((n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(ct+="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(ct+="<mo>"+(Qi[n.leftDelim]||n.leftDelim)+"</mo>")),ct+="<mtable",n.colFormat){for(ct+=' columnalign="',wt=0;wt<n.colFormat.length;wt++)n.colFormat[wt].align&&(ct+={l:"left",c:"center",r:"right"}[n.colFormat[wt].align]+" ");ct+='"'}for(ct+=">",It=0;It<n.array.length;It++){for(ct+="<mtr>",Et=0;Et<n.array[It].length;Et++)ct+="<mtd>"+De(n.array[It][Et],a)+"</mtd>";ct+="</mtr>"}ct+="</mtable>",(n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(n.rightDelim&&"."!==n.rightDelim&&(ct+="<mo>"+(Qi[n.leftDelim]||n.rightDelim)+"</mo>"),ct+="</mrow>");break;case"genfrac":(n.leftDelim||n.rightDelim)&&(ct+="<mrow>"),n.leftDelim&&"."!==n.leftDelim&&(ct+="<mo"+tn(n.id,a)+">"+(Qi[n.leftDelim]||n.leftDelim)+"</mo>"),n.hasBarLine?(ct+="<mfrac>",ct+=De(n.above,a)||"<mi>&nbsp;</mi>",ct+=De(n.below,a)||"<mi>&nbsp;</mi>",ct+="</mfrac>"):(ct+="<mtable"+tn(n.id,a)+">",ct+="<mtr>"+De(n.above,a)+"</mtr>",ct+="<mtr>"+De(n.below,a)+"</mtr>",ct+="</mtable>"),n.rightDelim&&"."!==n.rightDelim&&(ct+="<mo"+tn(n.id,a)+">"+(Qi[n.rightDelim]||n.rightDelim)+"</mo>"),(n.leftDelim||n.rightDelim)&&(ct+="</mrow>");break;case"surd":n.hasEmptyBranch("above")?(ct+="<msqrt"+tn(n.id,a)+">",ct+=De(n.body,a),ct+="</msqrt>"):(ct+="<mroot"+tn(n.id,a)+">",ct+=De(n.body,a),ct+=De(n.above,a),ct+="</mroot>");break;case"leftright":ct="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(ct+="<mo"+tn(n.id,a)+">"+(null!=(o=Qi[n.leftDelim])?o:n.leftDelim)+"</mo>"),n.body&&(ct+=De(n.body,a)),n.rightDelim&&"."!==n.rightDelim&&(ct+="<mo"+tn(n.id,a)+">"+(null!=(s=Qi[n.rightDelim])?s:n.rightDelim)+"</mo>"),ct+="</mrow>";break;case"sizeddelim":case"delim":ct+='<mo separator="true"'+tn(n.id,a)+">"+(Qi[n.delim]||n.delim)+"</mo>";break;case"accent":ct+='<mover accent="true"'+tn(n.id,a)+">",ct+=De(n.body,a),ct+="<mo>"+(Qi[re]||n.accent)+"</mo>",ct+="</mover>";break;case"overunder":Rt=n.above,jt=n.below,(n.svgAbove||Rt)&&(n.svgBelow||jt)?Kt=n.body:Rt&&Rt.length>0?(Kt=n.body,null!=(l=null==(r=n.body)?void 0:r[0])&&l.below?(jt=n.body[0].below,Kt=n.body[0].body):"first"===(null==(u=null==(c=n.body)?void 0:c[0])?void 0:u.type)&&null!=(m=null==(d=n.body)?void 0:d[1])&&m.below&&(jt=n.body[1].below,Kt=n.body[1].body)):jt&&jt.length>0&&(Kt=n.body,null!=(b=null==(p=n.body)?void 0:p[0])&&b.above?(Rt=n.body[0].above,Kt=n.body[0].body):"first"===(null==(C=null==(y=n.body)?void 0:y[0])?void 0:C.type)&&null!=(D=null==(I=n.body)?void 0:I[1])&&D.above&&(Rt=n.body[1].overscript,Kt=n.body[1].body)),(n.svgAbove||Rt)&&(n.svgBelow||jt)?(ct+=`<munderover ${Dt} ${tn(n.id,a)}>`,ct+=null!=(U=tt[n.svgBody])?U:De(Kt,a),ct+=null!=(B=tt[n.svgBelow])?B:De(jt,a),ct+=null!=(q=tt[n.svgAbove])?q:De(Rt,a),ct+="</munderover>"):n.svgAbove||Rt?(ct+=`<mover ${Dt} ${tn(n.id,a)}>`+(null!=(R=tt[n.svgBody])?R:De(Kt,a)),ct+=null!=(et=tt[n.svgAbove])?et:De(Rt,a),ct+="</mover>"):(n.svgBelow||jt)&&(ct+=`<munder ${Dt} ${tn(n.id,a)}>`+(null!=(Q=tt[n.svgBody])?Q:De(Kt,a)),ct+=null!=(V=tt[n.svgBelow])?V:De(jt,a),ct+="</munder>");break;case"placeholder":case"mord":{ct=rt[re]||re||("string"==typeof n.value?n.value:"");let Ut=re?re.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;Ut?ct="&#x"+Ut[1]+";":ct.length>0&&ct.startsWith("\\")&&(ct="string"==typeof n.value&&n.value.charCodeAt(0)>255?"&#x"+("000000"+n.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof n.value?n.value.charAt(0):"");let ni=/\d/.test(ct)?"mn":"mi";ct=`<${ni}${Dt}${tn(n.id,a)}>${ic(ct)}</${ni}>`;break}case"mbin":case"mrel":case"minner":ct=re&&rt[re]?"<mi"+tn(n.id,a)+">"+rt[re]+"</mi>":re&&Qi[re]?"<mo"+tn(n.id,a)+">"+Qi[re]+"</mo>":Ba(n,a);break;case"mpunct":ct='<mo separator="true"'+tn(n.id,a)+">"+(null!=(Y=Qi[re])?Y:re)+"</mo>";break;case"mop":"\u200b"!==n.body&&(ct="<mo"+tn(n.id,a)+">",ct+="\\operatorname"===re?n.body:re||n.body,ct+="</mo>");break;case"box":ct='<menclose notation="box"',n.backgroundcolor&&(ct+=' mathbackground="'+n.backgroundcolor+'"'),ct+=tn(n.id,a)+">"+De(n.body,a)+"</menclose>";break;case"spacing":ct+='<mspace width="'+(null!=(at=gt[re])?at:0)+'em"/>';break;case"enclose":ct='<menclose notation="';for(let Ut in n.notation)Object.prototype.hasOwnProperty.call(n.notation,Ut)&&n.notation[Ut]&&(ct+=lt+Ut,lt=" ");ct+=tn(n.id,a)+'">'+De(n.body,a)+"</menclose>";break;case"space":ct+="&nbsp;";break;case"mopen":case"mclose":ct+=Ba(n,a);break;case"macro":{let Ut=n.command+pr(n.macroArgs);Ut&&(ct+=`<mo ${tn(n.id,a)}>${Ut}</mo>`)}break;case"latexgroup":case"tooltip":ct+=De(n.body,a);break;case"latex":ct+="<mtext"+tn(n.id,a)+">"+n.value+"</mtext>"}return ct}var ys={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},Od={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function hr(n){let a=0;if(Pn(n))for(let e of n)"first"!==e.type&&(a+=1);return 1===a}function ep(n){let a="";if(Pn(n))for(let e of n)"first"!==e.type&&"string"==typeof e.value&&(a+=e.value);return a}function Fe(n,a,e){var i,o,s,r;function c(d){return"<emphasis>"+d+"</emphasis>"}if(!a)return"";let u="";if(Pn(a)){let d=!1,m=!1;for(let p=0;p<a.length;p++)"first"!==a[p].type&&("text"!==a[p].mode&&(m=!1),p<a.length-2&&"mopen"===a[p].type&&"mclose"===a[p+2].type&&"mord"===a[p+1].type?(u+=" of ",u+=c(Fe(n,a[p+1],e)),p+=2):"text"===a[p].mode?m?u+=null!=(i=a[p].value)?i:" ":(m=!0,u+=Fe("text",a[p],e)):a[p].isDigit()?d?u+=a[p].asDigit():(d=!0,u+=Fe(n,a[p],e)):(d=!1,u+=Fe(n,a[p],e)))}else if("text"===a.mode)a.id&&"math"===n&&(u+='<mark name="'+a.id.toString()+'"/>'),u+=a.value;else{a.id&&"math"===n&&(u+='<mark name="'+a.id.toString()+'"/>');let d="",m="",p="",b=!1,{command:y}=a;switch(a.type){case"accent":"\\vec"===y&&(u+="vector "+Fe(n,a.body,e));break;case"array":let C=a.array,I=a.environmentName;if(Object.keys(Od).includes(I)){u+=` begin ${Od[I]} `;for(let q=0;q<C.length;q++){q>0&&(u+=","),u+=` row ${q+1} `;for(let R=0;R<C[q].length;R++)R>0&&(u+=","),u+=` column ${R+1}: `,u+=Fe("math",C[q][R],e)}u+=` end ${Od[I]} `}break;case"group":"\\ne"===y?u+=" not equal ":("\\not"===y&&(u+=" not "),u+=Fe("math",a.body,e));break;case"root":u+=Fe("math",a.body,e);break;case"genfrac":if(d=Fe("math",a.above,e),m=Fe("math",a.below,e),hr(a.above)&&hr(a.below)){let q={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[ep(a.above)+"/"+ep(a.below)];q?u=q:u+=d+" over "+m}else u+=' the fraction <break time="150ms"/>'+d+' over <break time="150ms"/>'+m+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(p=Fe("math",a.body,e),a.hasEmptyBranch("above"))u+=hr(a.body)?" the square root of "+p+" , ":' the square root of <break time="200ms"/>'+p+'. <break time="200ms"/> End square root';else{let q=Fe("math",a.above,e);q=q.trim();let R=q.replace(/<mark([^/]*)\/>/g,"");u+="3"===R?' the cube root of <break time="200ms"/>'+p+'. <break time="200ms"/> End cube root':"n"===R?' the nth root of <break time="200ms"/>'+p+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+q+', of <break time="200ms"/>'+p+'. <break time="200ms"/> End root'}break;case"leftright":{let q=a;u+=null!=(o=q.leftDelim?ys[q.leftDelim]:void 0)?o:q.leftDelim,u+=Fe("math",a.body,e),u+=null!=(s=q.rightDelim?ys[q.rightDelim]:void 0)?s:q.rightDelim}break;case"rule":case"overunder":case"overlap":case"space":case"spacing":break;case"line":let D=a.position;u+=`${D} `,u+=Fe("math",a.body,e),u+=` end ${D} `;break;case"macro":let U=y.replace(/^\\/g,""),B=nd()[U];B&&(u+=null!=B&&B.expand?Fe("math",a.body,e):`${U} `);break;case"placeholder":u+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===y||"\\mathrel"===y||"\\mathopen"===y||"\\mathclose"===y||"\\mathpunct"===y||"\\mathord"===y||"\\mathinner"===y){u=Fe(n,a.body,e);break}let q=a.isDigit()?a.asDigit():a.value,R=a.command;if(("delim"===a.type||"sizeddelim"===a.type)&&(R=a.value,q=R),"text"===n)u+=q;else{if("mbin"===a.type&&(u+='<break time="150ms"/>'),q){let et=ys[q]||(R?ys[R.trim()]:"");if(et)u+=" "+et;else{let Q=R?function sI(n){let a="";return n.startsWith("\\")&&(a=" "+n.replace("\\","")+" "),a}(R.trim()):"";u+=Q||function l(d){return e.textToSpeechMarkup?/[a-z]/.test(d)?` <say-as interpret-as="character">${d}</say-as>`:/[A-Z]/.test(d)?`capital <say-as interpret-as="character">${d.toLowerCase()}</say-as>`:d:/[a-z]/.test(d)?" '"+d.toUpperCase()+"'":/[A-Z]/.test(d)?" 'capital "+d.toUpperCase()+"'":d}(q)}}else u+=Fe("math",a.body,e);"mbin"===a.type&&(u+='<break time="150ms"/>')}break}case"mop":if("\u200b"!==a.value){let q=a.command;if("\\sum"===q)if(a.hasEmptyBranch("superscript")||a.hasEmptyBranch("subscript"))if(a.hasEmptyBranch("subscript"))u+=" the summation of";else{let R=Fe("math",a.subscript,e);R=R.trim(),u+=' the summation from <break time="200ms"/>'+R+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let R=Fe("math",a.superscript,e);R=R.trim();let et=Fe("math",a.subscript,e);et=et.trim(),u+=' the summation from <break time="200ms"/>'+et+'<break time="200ms"/> to  <break time="200ms"/>'+R+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\prod"===q)if(a.hasEmptyBranch("superscript")||a.hasEmptyBranch("subscript"))if(a.hasEmptyBranch("subscript"))u+=" the product  of ";else{let R=Fe("math",a.subscript,e);R=R.trim(),u+=' the product from <break time="200ms"/>'+R+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let R=Fe("math",a.superscript,e);R=R.trim();let et=Fe("math",a.subscript,e);et=et.trim(),u+=' the product from <break time="200ms"/>'+et+'<break time="200ms"/> to <break time="200ms"/>'+R+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\int"===q)if(a.hasEmptyBranch("superscript")||a.hasEmptyBranch("subscript"))u+=' the integral of <break time="200ms"/> ';else{let R=Fe("math",a.superscript,e);R=R.trim();let et=Fe("math",a.subscript,e);et=et.trim(),u+=' the integral from <break time="200ms"/>'+c(et)+'<break time="200ms"/> to <break time="200ms"/>'+c(R)+' <break time="200ms"/> of ',b=!0}else"string"==typeof a.value?u+=(null!=(r=ys[a.value])?r:a.command?ys[a.command]:void 0)||" "+a.value:a.command&&(u+="\\mathop"===a.command?Fe("math",a.body,e):"\\operatorname"===a.command?function lI(n,a){return n?n.map(e=>e.value).join(""):""}(a.body):a.command.startsWith("\\")?" "+a.command.slice(1):" "+a.command)}break;case"enclose":p=Fe("math",a.body,e),u+=" crossed out "+p+". End crossed out."}if(!b&&!a.hasEmptyBranch("superscript")){let C=Fe(n,a.superscript,e);C=C.trim();let I=C.replace(/<[^>]*>/g,"");if(hr(a.superscript)){if("math"===n){let D=function rI(n){if(Pn(n))for(let a of n)if("first"!==a.type&&a.id)return a.id.toString();return""}(a.superscript);D&&(u+='<mark name="'+D+'"/>')}"\u2032"===I?u+=" prime ":"2"===I?u+=" squared ":"3"===I?u+=" cubed ":Number.isNaN(Number.parseInt(I))?u+=" to the "+C+"; ":u+=' to the <say-as interpret-as="ordinal">'+I+"</say-as> power; "}else Number.isNaN(Number.parseInt(I))?u+=" raised to the "+C+"; ":u+=' raised to the <say-as interpret-as="ordinal">'+I+"</say-as> power; "}if(!b&&!a.hasEmptyBranch("subscript")){let C=Fe("math",a.subscript,e);C=C.trim(),u+=hr(a.subscript)?" sub "+C:" subscript "+C+". End subscript. "}}return u}function ws(n,a){var e;let i=ge(At({},a),{textToSpeechRulesOptions:At({},a.textToSpeechRulesOptions)});if("sre"===i.textToSpeechRules&&"sre"in globalThis){let s=De(n,i);return s?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=null!=(e=i.textToSpeechRulesOptions)?e:{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,"ssml"===i.textToSpeechRulesOptions.markup&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&globalThis.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),globalThis.sre.System.getInstance().toSpeech(s)):""}let o=Fe("math",n,i);if("ssml"===i.textToSpeechMarkup){let s="";i.speechEngineRate&&(s='<prosody rate="'+i.speechEngineRate+'">'),o='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+s+"<p><s>"+o+"</s></p>"+(s?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else o="mac"===i.textToSpeechMarkup&&"macos"===ms()?o.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):o.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return o}function mo(n,a,e,i){let o=a.split(" ");for(let s of o){let r=s.match(/(.*):(.*)/);if(r){let l=i??{};"active"===r[2]?l.passive=!1:l[r[2]]=!0,n.addEventListener(r[1],e,l)}else n.addEventListener(s,e,i)}}function oc(n,a,e,i){let o=a.split(" ");for(let s of o){let r=s.match(/(.*):(.*)/);if(r){let l=i??{};"active"===r[2]?l.passive=!1:l[r[2]]=!0,n.removeEventListener(r[1],e,l)}else n.removeEventListener(s,e,i)}}function np(n){var a;ym();let e=document.getElementById(n);return e?e.dataset.refcount=Number(Number.parseInt(null!=(a=e.getAttribute("data-refcount"))?a:"0")+1).toString():(e=document.createElement("div"),e.setAttribute("aria-hidden","true"),e.dataset.refcount="1",e.id=n,document.body.append(e)),e}function ip(n){var a;if(!n)return;let e=Number.parseInt(null!=(a=n.getAttribute("data-refcount"))?a:"0");e<=1?n.remove():n.dataset.refcount=Number(e-1).toString()}function Ra(n){var a;return(null==(a=n.element)?void 0:a.mathfield)===n}function gr(n){let a=function cI(n){var a,e;return null!=(e=null!=(a=n.querySelector(".ML__caret"))?a:n.querySelector(".ML__text-caret"))?e:n.querySelector(".ML__latex-caret")}(n);if(!a)return null;let e=a.getBoundingClientRect();return{x:e.right,y:e.bottom,height:e.height}}function uI(n){var a;if(!n.parent)return"root";let e=null!=(a=n.parent.id)?a:"";return e+="string"==typeof n.treeBranch?"-"+n.treeBranch:`-${n.treeBranch[0]}/${n.treeBranch[0]}`,e}function op(n,a){if(!a)return null;let e=n.field.getBoundingClientRect(),i=a.right-a.left,o=a.bottom-a.top,s=Math.ceil(a.left-e.left+n.field.scrollLeft),r=Math.ceil(a.top-e.top);return{left:s,right:s+i,top:r,bottom:r+o}}function ap(n){let a=n.getBoundingClientRect(),e=parseInt(getComputedStyle(n).marginRight),i={top:a.top-1,bottom:a.bottom,left:a.left,right:a.right-1+e};if(0===n.children.length||"SVG"===n.tagName.toUpperCase())return i;for(let o of n.children)if(1===o.nodeType&&"atomId"in o.dataset&&!o.classList.contains("pstrut")){let s=ap(o);i.left=Math.min(i.left,s.left),i.right=Math.max(i.right,s.right),i.top=Math.min(i.top,s.top),i.bottom=Math.max(i.bottom,s.bottom)}return i}function fr(n,a){var e,i;if(!a.id)return null;let o=null!=(i=null==(e=n.atomBoundsCache)?void 0:e.get(a.id))?i:null;if(null!==o)return o;let s=n.field.querySelector(`[data-atom-id="${a.id}"]`);return o=s?ap(s):null,n.atomBoundsCache&&(o?n.atomBoundsCache.set(a.id,o):n.atomBoundsCache.delete(a.id)),o??null}function sp(n,a){return n.model.selection.ranges.reduce((e,i)=>e.concat(...function dI(n,a,e){let i=new Map;for(let o of n.model.getAtoms(a,{includeChildren:!0})){if(null!=e&&e.excludeAtomsWithBackground&&o.style.backgroundColor)break;let s=op(n,fr(n,o));if(s){let r=uI(o);if(i.has(r)){let l=i.get(r);i.set(r,{left:Math.min(l.left,s.left),right:Math.max(l.right,s.right),top:Math.min(l.top,s.top),bottom:Math.max(l.bottom,s.bottom)})}else i.set(r,s)}}return[...i.values()]}(n,i,a)),[])}function lp(n){let a=0,e=0,i=n.offsetWidth,o=n.offsetHeight;for(;n instanceof HTMLElement;)a+=n.offsetTop,e+=n.offsetLeft,n=n.offsetParent;return new DOMRect(e,a,i,o)}var cp={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},up={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},dp=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,mI=[/^[a-z]$/,/^[A-Z]$/,dp,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],pI={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function Ed(n){if(!n)return"";let{style:a}=n;if(void 0===a.variant)return"";let e=a.variant;return a.variantStyle&&"up"!==a.variantStyle&&(e+="-"+a.variantStyle),e}function ks(n){return[un(n.map(a=>a[0])),n.map(a=>a[1]).some(a=>!0===a)]}function wI(n,a){return ks(Wi(n,"fontSize").map(e=>{var i,o;let[s,r]=function yI(n,a){return ks(Wi(n,"fontSeries").map(e=>{let[i,o]=function bI(n,a){return ks(Wi(n,"fontShape").map(e=>{let[i,o]=function vI(n,a){return[un(n.map(e=>Tt.serialize(e,a))),!0]}(e,a),{fontShape:s}=e[0].style;return"it"===s?["\\textit{"+i+"}",!1]:"sl"===s?["\\textsl{"+i+"}",!1]:"sc"===s?["\\textsc{"+i+"}",!1]:"n"===s?["\\textup{"+i+"}",!1]:s?[`{\\fontshape{${e[0].style.fontShape}}${i}`,!1]:[i,o]}))}(e,a),{fontSeries:s}=e[0].style;return"b"===s?[`\\textbf{${i}}`,!1]:"l"===s?[`\\textlf{${i}}`,!1]:"m"===s?[`\\textmd{${i}}`,!1]:s?[`\\fontseries{${s}}${i}`,!1]:[i,o]}))}(e,a),l=null!=(o=["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][null!=(i=e[0].style.fontSize)?i:""])?o:"";return l?[`{\\${l} ${s}}`,r]:[s,r]}))}function TI(n,a){return ks(Wi(n,"backgroundColor").map(e=>{var i,o;let[s,r]=function AI(n,a){var e;if(!n||0===n.length)return["",!1];let i=null==(e=n[0].parent)?void 0:e.style.color;return ks(Wi(n,"color").map(o=>{var s,r;let[l,c]=function CI(n,a){return function kI(n,a){return ks(Wi(n,"fontFamily").map(e=>{var i,o;let[s,r]=wI(e,a),l=null!=(o={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[null!=(i=e[0].style.fontFamily)?i:""])?o:"";return l?[`\\${l}{${s}}`,!1]:e[0].style.fontFamily?[`\\fontfamily{${e[0].style.fontFamily}}${s}`,r]:[s,r]}))}(n,a)}(o,a);return null!=(s=a.skipStyles)&&s||!o[0].style.color||"none"===o[0].style.color||i===o[0].style.color?[l,c]:[`\\textcolor{${null!=(r=o[0].style.verbatimColor)?r:o[0].style.color}}{${l}}`,!1]}))}(e,a),l=e[0].computedStyle;return null!=(i=a.skipStyles)&&i||!l.backgroundColor||"none"===l.backgroundColor?[s,r]:[`\\colorbox{${null!=(o=l.verbatimBackgroundColor)?o:l.backgroundColor}}{${s}}`,!1]}))}new class extends ia{constructor(){super("math")}createAtom(n,a,e){var i,o,s,r,l;let c=a.getDefinition(n,"math");if(null===c)return new Tt("mord",a,{mode:"math",command:n,value:n,style:e});if("symbol"===c.definitionType){let d=new Tt(null!=(i=c.type)?i:"mord",a,{mode:"math",command:null!=(o=c.command)?o:n,value:String.fromCodePoint(c.codepoint),style:e});return null!=(s=c.isFunction)&&s&&(d.isFunction=!0),n.startsWith("\\")&&(d.verbatimLatex=n),d}let u=new Tt("mord",a,{mode:"math",command:null!=(r=c.command)?r:n,value:n,style:e});return null!=(l=c.isFunction)&&l&&(u.isFunction=!0),n.startsWith("\\")&&(u.verbatimLatex=n),u}serialize(n,a){let{parent:e}=n[0],i=e?.computedStyle.fontSize;return un(Wi(n,"fontSize").map(o=>{let s=function xI(n,a){let{parent:e}=n[0],i=e?.computedStyle.backgroundColor;return un(Wi(n,"backgroundColor").map(o=>{var s,r;let l=function fI(n,a){let{parent:e}=n[0],i=e?.computedStyle.color;return un(Wi(n,"color").map(o=>{var s,r;let l=function gI(n,a){var e;let{parent:i}=n[0],o=Ed(i),s=null!=(e=i?.mode)?e:"math";return un(Wi(n,"variant").map(r=>{let l=Ed(r[0]);if(r.every(u=>{let d=u.context.getDefinition(u.command,s);return!(!d||"function"===d.definitionType||!d.variant)&&Ed(u)===l}))return un(r.map(u=>Tt.serialize(u,a)));let c="";return l&&l!==o&&(c={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathnormal{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[l]),c?c+un(r.map(u=>Tt.serialize(u,a)))+"}":un(r.map(u=>Tt.serialize(u,a)))}))}(o,a),c=o[0].computedStyle;return null!=(s=a.skipStyles)&&s||!c.color||e&&i===c.color?l:"\\textcolor{"+(null!=(r=c.verbatimColor)?r:c.color)+"}{"+l+"}"}))}(o,a),c=o[0].computedStyle;return!(null!=(s=a.skipStyles)&&s)&&l.trim()&&c.backgroundColor&&(!e||i!==c.backgroundColor)&&(o.length>0||!(o[0]instanceof ja))&&(l=`\\ensuremath{${l}}`,l=`\\colorbox{${null!=(r=c.verbatimBackgroundColor)?r:c.backgroundColor}}{${l}}`),l}))}(o,a),r=o[0].computedStyle.fontSize;return!r||e&&i===r?s:"\\"+["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][r]+" "+s}))}applyStyle(n,a){if(void 0===a.variant)return"";let e="auto"!==a.letterShapeStyle&&a.letterShapeStyle?a.letterShapeStyle:"tex",{variant:i}=a,{variantStyle:o}=a;"normal"===i&&!o&&/[\u00A3\u0131\u0237]/.test(n.value)&&(i="main",o="italic"),"normal"===i&&!o&&1===n.value.length&&mI.forEach((c,u)=>{c.test(n.value)&&"it"===pI[e][u]&&(o="italic")}),"up"===o&&(o=void 0);let s=o?i+"-"+o:i,[r,l]=cp[s];return up[i]&&!up[i].test(n.value)?(n.value=function t9(n,a,e){if(!/[A-Za-z\d]/.test(n)||!a&&!e)return n;let i=n.codePointAt(0);if(void 0===i)return n;for(let o of Sm)if((!a||o.variant===a)&&(!e||o.style===e)&&i>=o.offset&&i<o.offset+o.len){let s=o.start+i-o.offset;return String.fromCodePoint(ed[s]||s)}return n}(n.value,i,o),null):(dp.test(n.value)&&(n.classes+=" lcGreek"),l&&(n.classes+=" "+l),r)}};var _p={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function Ho(n){let a=0;for(let e=0;e<n.length;e++)a=Math.imul(31,a)+n.charCodeAt(e)|0;return Math.abs(a)}function $o(n,a,e){var i,o;if(!a)return null;let s=null!=(i=n?.getRootNode())?i:document?.head;if(!s)return null;s===document&&(s=document.head);let r=s.querySelector(`style[data-id="${e}"]`);if(r){let l=Number.parseFloat(null!=(o=r.getAttribute("data-refcount"))?o:"0");r.dataset.refcount=Number(l+1).toString()}else{let l=document.createElement("style");l.dataset.id=e,l.dataset.refcount="1",l.append(document.createTextNode(a)),s.appendChild(l)}return{release:()=>{var l;let c=s.querySelector(`style[data-id="${e}"]`);if(c){let u=Number.parseFloat(null!=(l=c.getAttribute("data-refcount"))?l:"0");1===u?c.remove():c.dataset.refcount=Number(u-1).toString()}}}}function mp(n){let a=n.split("+"),e={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:a.pop()};return a.includes("shift")&&(e.shift=!0),a.includes("alt")&&(e.alt=!0),a.includes("ctrl")&&(e.ctrl=!0),a.includes("cmd")&&(e.cmd=!0),a.includes("win")&&(e.win=!0),a.includes("meta")&&(e.meta=!0),e}function ac(n){let a="";return n.shift&&(a+="shift+"),n.alt&&(a+="alt+"),n.ctrl&&(a+="ctrl+"),n.cmd&&(a+="cmd+"),n.win&&(a+="win+"),n.meta&&(a+="meta+"),a+n.key}new class extends ia{constructor(){super("text")}createAtom(n,a,e){let i=a.getDefinition(n,"text");return i&&"symbol"===i.definitionType?new vs(n,String.fromCodePoint(i.codepoint),e??{},a):null}serialize(n,a){var e;let[i,o]=TI(n,a);return!0===(null!=(e=a.skipModeCommand)&&e)&&(o=!1),o&&(i=`\\text{${i}}`),i}applyStyle(n,a){var e,i,o,s,r;let{fontFamily:l}=a;if(_p[l]?n.classes+=" "+_p[l]:l&&n.setStyle("font-family",l),a.fontShape&&(n.classes+=" ",n.classes+=null!=(e={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[a.fontShape])?e:""),a.fontSeries){let c=a.fontSeries.match(/(.?[lbm])?(.?[cx])?/);c&&(n.classes+=" ",n.classes+=null!=(o={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[null!=(i=c[1])?i:""])?o:"",n.classes+=" ",n.classes+=null!=(r={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[null!=(s=c[2])?s:""])?r:"")}return"Main-Regular"}},new class extends ia{constructor(){super("latex")}createAtom(n,a,e){return new An(n,a)}serialize(n,a){return n.filter(e=>e instanceof An&&!e.isSuggestion).map(e=>e.value).join("")}applyStyle(){return null}};var za,pp="apple"===Md()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u0131"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\u02dd"],KeyH:["h","H","\u02d9","\xd3"],KeyI:["i","I","\u02c6","\u02c6"],KeyJ:["j","J","\u2206","\xd4"],KeyK:["k","K","\u02da","\uf8ff"],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","\u02dc","\u02dc"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae","\u2030"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","\u2020","\u02c7"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\u02db"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","\u03a9","\xb8"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xb1"],BracketLeft:["[","{","\u201c","\u201d"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","\u2026","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","\u02dc","`","`"],Comma:[",","<","\u2264","\xaf"],Period:[".",">","\u2265","\u02d8"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===Md()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","\u20ac",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},EI={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},xr=[];function Md(){switch(ms()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function So(n){(!n.platform||n.platform===Md())&&xr.push(n)}function hp(n){za=xr.find(a=>n.startsWith(a.locale))}function vr(){return za??xr[0]}So(pp),So({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03a9"],KeyB:["b","B","\xdf","\u222b"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","\u0192","\xb7"],KeyG:["g","G","\ufb01","\ufb02"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","\u221e","\xbf"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","\u201a"],KeyS:["s","S","\xd2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","\u25ca","\u221a"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xda","\u0178"],KeyZ:["w","W","\u2039","\u203a"],Digit1:["&","1","\uf8ff","\xb4"],Digit2:["\xe9","2","\xeb","\u201e"],Digit3:['"',"3","\u201c","\u201d"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","\u20ac","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xf7","\\"],Slash:["=","+","\u2260","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}}),So({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0192","\ufb01"],KeyG:["g","G","\uf8ff","\ufb02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","\u02c7"],KeyL:["l","L"," ","\u02d8"],KeyM:["m","M","\xb5","\u02da"],KeyN:["n","N"," ","\u02d9"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae"," "],KeyS:["s","S","\u222b"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","\u2211","\u203a"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","\u03a9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02dd"],Digit3:["3","\xb7","#","\u2022"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","\u221e","\u2030"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","\u2044"],Digit8:["8","(","\u201c","\u2018"],Digit9:["9",")","\u201d","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","\u201a","\u02db"],BracketLeft:["`","^","[","\u02c6"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","\u02dc"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201e",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),So({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20ac",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),So({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","\u215b"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030a"],BracketRight:["+","*","]","\u0304"],Backslash:["\xe7","\xc7","}","\u0306"],Semicolon:["\xf1","\xd1","~","\u030b"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","\u2500","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),So({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03a9"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030b"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","\u215b"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215c"],Digit6:["-","6","|","\u215d"],Digit7:["\xe8","7","`","\u215e"],Digit8:["_","8","\\","\u2122"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030a"],BracketRight:["$","\xa3","\xa4","\u0304"],Backslash:["*","\xb5","\u0300","\u0306"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","\u0302","\u030c"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","\u2500","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),So({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),So({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","\u1e9e"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),So({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u2039"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20ac","\u2030"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","\u2044","\xdb"],KeyJ:["j","J","\xba","\u0131"],KeyK:["k","K","\u2206","\u02c6"],KeyL:["l","L","@","\ufb02"],KeyM:["m","M","\xb5","\u02d8"],KeyN:["n","N","~","\u203a"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","\u201a","\xcd"],KeyT:["t","T","\u2020","\u02dd"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\xd9"],KeyY:["z","Z","\u03a9","\u02c7"],KeyZ:["y","Y","\xa5","\u2021"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"\u201c","\u201d"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","\ufb01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02dc"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","\u2260","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","\u02d9"],Equal:["\xb4","`","'","\u02da"],BracketLeft:["\xfc","\xdc","\u2022","\xb0"],BracketRight:["+","*","\xb1","\uf8ff"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xf6","\xd6","\u0153","\u0152"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221e","\u02db"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","\u201e","\u201c"],NumpadEqual:["=","=","=","="]}}),So({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","\u2248","\u02db"],KeyC:["j","J","\u2206","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","\u2265","\u02d8"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","\u02c6","\u02c6"],KeyH:["d","D","\u2202","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","\u02d9","\xd3"],KeyK:["t","T","\u2020","\u02c7"],KeyL:["n","N","\u02dc","\u02dc"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","\u222b","\u0131"],KeyO:["r","R","\xae","\u2030"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","\u03c0","\u220f"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","\u02dd"],KeyV:["k","K","\u02da","\uf8ff"],KeyW:[",","<","\u2264","\xaf"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xcf"],KeyZ:[";",":","\u2026","\xda"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["[","{","\u201c","\u201d"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","\u2260","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201e"],Period:["v","V","\u221a","\u25ca"],Slash:["z","Z","\u03a9","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});var gp=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",command:"cutToClipboard"},{key:"cmd+x",command:"cutToClipboard"},{key:"ctrl+c",command:"copyToClipboard"},{key:"cmd+c",command:"copyToClipboard"},{key:"ctrl+v",command:"pasteFromClipboard"},{key:"cmd+v",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+w",ifMode:"math",command:["insert","\\sum_{i=#?}^{#?}"]},{key:"alt+b",command:["insert","\\int_{#?}^{#?}"]},{key:"alt+u",ifMode:"math",command:["insert","\\cup"]},{key:"alt+n",ifMode:"math",command:["insert","\\cap"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"shift+alt+p",ifMode:"math",command:["insert","\\prod_{i=#?}^{#?}"]},{key:"shift+alt+u",ifMode:"math",command:["insert","\\bigcup"]},{key:"shift+alt+n",ifMode:"math",command:["insert","\\bigcap"]},{key:"shift+alt+a",ifMode:"math",command:["insert","\\forall"]},{key:"shift+alt+e",ifMode:"math",command:["insert","\\exists"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"shift+ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\wedge"]},{key:"shift+alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\vee"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],ZI={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"shift+alt+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"shift+alt+u","\\bigcap":"shift+alt+n","\\forall":"shift+alt+a","\\exists":"shift+alt+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit6]","\\vee":"shift+alt+[Digit6]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function fp(n){let a=n;return Pn(a)&&(a=a.length>0?a[0]+"("+a.slice(1).join("")+")":""),a}function DI(n,a){let e=[];if("string"==typeof a){let s=ZI[a];Pn(s)?e=s.slice():s&&e.push(s)}let i=fp(a),o=new RegExp("^"+i.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let s of n)o.test(fp(s.command))&&e.push(s.key);return e.map(Id)}function Id(n){var a;let e=/macos|ios|/.test(ms()),i=n.split("+"),o="";for(let s of i)!e&&o&&(o+='<span class="ML__shortcut-join">+</span>'),s.startsWith("[Key")?o+=s.slice(4,5):s.startsWith("Key")?o+=s.slice(3,4):s.startsWith("[Digit")?o+=s.slice(6,7):s.startsWith("Digit")?o+=s.slice(5,6):o+=null!=(a={cmd:"\u2318",meta:e?"\u2318":"command",shift:e?"\u21e7":"shift",alt:e?"\u2325":"alt",ctrl:e?"\u2303":"control","\n":e?"\u23ce":"return","[return]":e?"\u23ce":"return","[enter]":e?"\u2324":"enter","[tab]":e?"\u21e5":"tab","[escape]":"esc","[backspace]":e?"\u232b":"backspace","[delete]":e?"\u2326":"del","[pageup]":e?"\u21de":"page up","[pagedown]":e?"\u21df":"page down","[home]":e?"\u2912":"home","[end]":e?"\u2913":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"\u21e0",up:"\u21e1",right:"\u21e2",down:"\u21e3","[arrowleft]":"\u21e0","[arrowup]":"\u21e1","[arrowright]":"\u21e2","[arrowdown]":"\u21e3","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[s.toLowerCase()])?a:s.toUpperCase();return o}function jI(n,a){if(n.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(n.ifPlatform))throw new Error(`Unexpected platform "${n.ifPlatform}" for keybinding ${n.key}`);if(void 0!==n.ifLayout&&(0===a.score||!n.ifLayout.includes(a.id)))return;let e=mp(n.key),i=n.ifPlatform;if(e.cmd){if(i&&"macos"!==i&&"ios"!==i)throw new Error('Unexpected "cmd" modifier with platform "'+i+'"\n"cmd" modifier can only be used with macOS or iOS platform.');i||(i="ios"===ms()?"ios":"macos"),e.win=!1,e.cmd=!1,e.meta=!0}if(e.win){if(i&&"windows"!==i)throw new Error('Unexpected "win" modifier with platform "'+i+'"\n"win" modifier can only be used with Windows platform.');i="windows",e.win=!1,e.cmd=!1,e.meta=!0}if(i&&!function PI(n){if(Di()){let a=ms(),e=n.startsWith("!"),i=n.endsWith(a);if(e&&!i||!e&&i)return!0}return"!other"!==n&&"other"===n}(i))return;if(/^\[.+\]$/.test(e.key))return ge(At({},n),{ifPlatform:i,key:ac(e)});let o=function MI(n,a){var e;let i={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!n)return i;for(let[o,s]of Object.entries(a.mapping)){if(s[0]===n)return i.key=`[${o}]`,i;if(s[1]===n)return i.shift=!0,i.key=`[${o}]`,i;if(s[2]===n)return i.alt=!0,i.key=`[${o}]`,i;if(s[3]===n)return i.shift=!0,i.alt=!0,i.key=`[${o}]`,i}return i.key=null!=(e=EI[n])?e:"",i}(e.key,a);if(!o)throw new Error('Invalid keybinding key "'+n.key+'"');if(o.shift&&e.shift||o.alt&&e.alt)throw new Error(`The keybinding ${n.key} (${Ld(n.command)}) is conflicting with the key combination ${ac(o)} using the ${a.displayName} keyboard layout`);return o.shift=o.shift||e.shift,o.alt=o.alt||e.alt,o.meta=e.meta,o.ctrl=e.ctrl,ge(At({},n),{ifPlatform:i,key:ac(o)})}function Ld(n){if(Array.isArray(n)){let a=[...n];return a.shift()+"("+a.map(e=>"string"==typeof e?`"${e}"`:e.toString()).join(", ")+")"}return n}var xp="#mathlive-popover-panel{visibility:hidden;background-color:rgba(97,97,97,0.95);color:#fff;text-align:center;border-radius:8px;position:fixed;z-index:1;display:flex;flex-direction:column;justify-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:all .2s cubic-bezier(.64, .09, .08, 1)}#mathlive-popover-panel::after{content:'';position:absolute;top:-5px;left:calc(50% - 3px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;font-size:1rem;border-bottom:5px solid rgba(97,97,97,0.9)}#mathlive-popover-panel.is-visible{visibility:inherit;animation:ML__fade-in cubic-bezier(0, 0, .2, 1) .15s}@keyframes ML__fade-in{from{opacity:0}to{opacity:1}}#mathlive-popover-panel ul{display:flex;flex-flow:column;list-style:none;margin:0;padding:0;align-items:flex-start;justify-content:center}#mathlive-popover-panel li{display:flex;flex-direction:row;justify-content:space-between;margin:8px;padding:8px;width:calc(100% - 16px - 16px);column-gap:1em;border-radius:8px;cursor:pointer}#mathlive-popover-panel li a{color:#5ea6fd;padding-top:.3em;margin-top:.4em;display:block}#mathlive-popover-panel li a:hover{color:#5ea6fd;text-decoration:underline}#mathlive-popover-panel li:hover,#mathlive-popover-panel li.is-pressed,#mathlive-popover-panel li.is-active{background:rgba(255,255,255,0.1)}.ML__popover__command{font-size:1.6rem;font-family:KaTeX_Main}.ML__popover__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;align-self:center}.ML__popover__keybinding{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:.8em;opacity:.7}.ML__shortcut-join{opacity:.5}",Oo=".ML__sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);clip-path:inset(50%);white-space:nowrap;border:0}.ML__isInline{display:inline-block}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text;padding:0;margin:0;box-sizing:content-box;border:0;outline:0;vertical-align:baseline;font-weight:inherit;font-family:inherit;font-style:inherit;text-decoration:none;width:min-content}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family, system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:bold}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:normal}.ML__mathbfit{font-family:KaTeX_Math;font-weight:bold;font-style:italic}.ML__ams{font-family:KaTeX_AMS}.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_ul{font-weight:100}.ML__series_el{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px black;text-stroke:1px black;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__center{text-align:center}.ML__label_padding{padding:0 .5em}.ML__frac-line{width:100%;min-height:1px}.ML__frac-line:after{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;box-sizing:content-box;transform:translate(0, 0)}.ML__sqrt{display:inline-block}.ML__sqrt-sign{display:inline-block;font-family:KaTeX_Main;position:relative}.ML__sqrt-line{display:inline-block;height:.04em;width:100%}.ML__sqrt-line:before{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;transform:translate(0, 0)}.ML__sqrt-line:after{border-bottom-width:1px;content:' ';display:block;margin-top:-0.1em}.ML__sqrt-index{margin-left:.27777778em;margin-right:-0.55555556em}.ML__delim-size1{font-family:KaTeX_Size1}.ML__delim-size2{font-family:KaTeX_Size2}.ML__delim-size3{font-family:KaTeX_Size3}.ML__delim-size4{font-family:KaTeX_Size4}.ML__delim-mult .delim-size1>span{font-family:KaTeX_Size1}.ML__delim-mult .delim-size4>span{font-family:KaTeX_Size4}.ML__accent-body>span{font-family:KaTeX_Main;width:0}.ML__accent-vec>span{position:relative;left:.24em}.ML__mathlive{display:inline-block;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main,'Times New Roman',serif;font-style:normal;font-size-adjust:none;font-stretch:normal;font-variant-caps:normal;letter-spacing:normal;line-height:1.2;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;user-select:none;width:min-content}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .mfrac,.ML__mathlive .left-right{display:inline-block}.ML__mathlive .vlist-t{display:inline-table;table-layout:fixed;border-collapse:collapse}.ML__mathlive .vlist-r{display:table-row}.ML__mathlive .vlist{display:table-cell;vertical-align:bottom;position:relative}.ML__mathlive .vlist>span{display:block;height:0;position:relative}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .vlist>span>.pstrut{overflow:hidden;width:0}.ML__mathlive .vlist-t2{margin-right:-2px}.ML__mathlive .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .negativethinspace{display:inline-block;margin-left:-0.16667em;height:.71em}.ML__mathlive .thinspace{display:inline-block;width:.16667em;height:.71em}.ML__mathlive .mediumspace{display:inline-block;width:.22222em;height:.71em}.ML__mathlive .thickspace{display:inline-block;width:.27778em;height:.71em}.ML__mathlive .enspace{display:inline-block;width:.5em;height:.71em}.ML__mathlive .quad{display:inline-block;width:1em;height:.71em}.ML__mathlive .qquad{display:inline-block;width:2em;height:.71em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative;display:inline-block}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:solid 0;position:relative;box-sizing:border-box}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:'';display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:'';display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:before,.ML__mathlive .stretchy:after{content:''}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{display:inline-flex;position:absolute;left:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;right:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .nulldelimiter{width:.12em;display:inline-block}.ML__mathlive .op-group{display:inline-block}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .mtable .vertical-separator{display:inline-block;min-width:1px;box-sizing:border-box}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist-t{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist-t{text-align:right}.ML__error{display:inline-block;background-image:radial-gradient(ellipse at center, hsl(341,100%,40%), rgba(0,0,0,0) 70%);background-color:hsla(341,100%,40%,0.1);background-repeat:repeat-x;background-size:3px 3px;padding-bottom:3px;background-position:0 100%}.ML__error>.ML__error{background:transparent;padding:0}.ML__composition{background:#fff1c2;color:black;text-decoration:underline var(--caret-color-computed, var(--ML__caret-color))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:white}}.ML__placeholder{color:var(--placeholder-color, var(--ML__placeholder-color));opacity:var(--placeholder-opacity, .4);padding-left:.4ex;padding-right:.4ex;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.ML__placeholdercontainer{display:none}.ML__placeholdercontainer math-field{display:inline-block;position:absolute;z-index:1001;min-width:32px;padding-left:4px;padding-right:4px;border-radius:4px;border:1px solid var(--editable-border)}.ML__isReadOnly .ML__placeholdercontainer{display:block}.ML__notation{position:absolute;box-sizing:border-box}.ML__container{min-height:auto !important}";function vp(n){var a,e;"function"==typeof(null==(a=n.listeners)?void 0:a.onSelectionDidChange)&&!n.suppressChangeNotifications&&(n.suppressChangeNotifications=!0,n.listeners.onSelectionDidChange(n),n.suppressChangeNotifications=!1),null==(e=n.mathfield.virtualKeyboard)||e.updateToolbar(n.mathfield)}function en(n,a={}){var e;if(n.suppressChangeNotifications||!n.mathfield.host)return!0;n.suppressChangeNotifications=!0;let i=n.mathfield.host.dispatchEvent(new InputEvent("beforeinput",ge(At({},a),{data:a.data?a.data:null!=(e=a.inputType)?e:"",cancelable:!0,bubbles:!0,composed:!0})));return n.suppressChangeNotifications=!1,i}function an(n,a){var e;n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new InputEvent("input",ge(At({},a),{data:a.data?a.data:null!=(e=a.inputType)?e:"",bubbles:!0,composed:!0}))),n.suppressChangeNotifications=!1)}function br(n){var a,e;let i=n.atoms.find(o=>o instanceof aa);return i&&null!=(e=null==(a=i.body)?void 0:a.filter(o=>o instanceof An))?e:[]}function bp(n,a){var e;let i=0,o=!1,s=Number.isFinite(a?.before)?null!=(e=a?.before)?e:0:n.lastOffset;for(;i<=s&&!o;){let c=n.at(i);o=c instanceof An&&c.isSuggestion,o||i++}if(!o)return[void 0,void 0];let r=i,l=!1;for(;r<=s&&!l;){let c=n.at(r);l=!(c instanceof An&&c.isSuggestion),l||r++}return[i-1,r-1]}function Zd(n){let a=br(n.model).filter(e=>e.isSuggestion);if(0!==a.length){n.model.position=n.model.offsetOf(a[0].leftSibling);for(let e of a)e.parent.removeChild(e)}}function sc(n,a){var e;let{model:i}=n;Zd(n);for(let u of br(i))u.isError=!1;if(!i.selectionIsCollapsed)return void yr(n);let o=[],s=i.at(i.position);for(;s&&s instanceof An&&/^[a-zA-Z\*]$/.test(s.value);)s=s.leftSibling;if(s&&s instanceof An&&"\\"===s.value)for(o.push(s),s=s.rightSibling;s&&s instanceof An&&/^[a-zA-Z\*]$/.test(s.value);)o.push(s),s=s.rightSibling;let r=o.map(u=>u.value).join(""),l=r?function i9(n,a){var e,i;if("\\"===a)return[];if(!a.startsWith("\\"))return[];let o=[];for(let r in Co)r.startsWith(a)&&!Co[r].infix&&o.push({match:r,frequency:null!=(e=Co[r].frequency)?e:0});for(let r in ko)r.startsWith(a)&&o.push({match:r,frequency:null!=(i=ko[r].frequency)?i:0});let s=a.substring(1);for(let r of Object.keys(n.options.macros))r.startsWith(s)&&o.push({match:"\\"+r,frequency:0});return o.sort((r,l)=>{var c,u;return r.frequency===l.frequency?r.match.length===l.match.length?r.match<l.match?-1:1:r.match.length-l.match.length:(null!=(c=l.frequency)?c:0)-(null!=(u=r.frequency)?u:0)}),o.map(r=>r.match)}(n,r):[];if(0===l.length)return/^\\[a-zA-Z\*]+$/.test(r)&&o.forEach(u=>{u.isError=!0}),void yr(n);n.suggestionIndex=null!=(e=a?.atIndex)?e:0,n.suggestionIndex<0&&(n.suggestionIndex=l.length-1);let c=l[n.suggestionIndex%l.length];if(c!==r){let u=o[o.length-1];u.parent.addChildrenAfter([...c.slice(r.length-c.length)].map(d=>new An(d,n,{isSuggestion:!0})),u),yn(n)}!function RI(n,a){if(0===a.length||!1===n.options.enablePopover)return void yr(n);a=a.slice(0,10);let e="<ul>";for(let o of a){let s=o,r=BI(n,o),l=DI(n.keybindings,s).join("<br>");e+=`<li role="button" data-command="${s}"><span class="ML__popover__latex">${s}</span><span class="ML__popover__command">${r}</span>`,l&&(e+=`<span class="ML__popover__keybinding">${l}</span>`),e+="</li>"}e+="</ul>",n.popover=function zI(n,a){return n.popover?(n.popover.innerHTML=n.options.createHTML(a),n.popover):(n.popover=np("mathlive-popover-panel"),void 0===Pd&&(Pd=Ho(xp).toString(36)),Nd=$o(null,xp,Pd),Dd=$o(null,Oo,Ho(Oo).toString(36)),n.popover.innerHTML=n.options.createHTML(a),n.popover)}(n,e);let i=n.popover.querySelectorAll("ul li");for(let o of i)o.addEventListener("pointerdown",s=>s.preventDefault()),o.addEventListener("click",s=>{Ja(n,"reject"),dn.insert("math",n.model,o.dataset.command,{selectionMode:"placeholder",format:"latex"}),n.dirty=!0,n.scrollIntoView(),n.focus()});setTimeout(()=>{let o=gr(n.field);o&&wp(n,o),n.popover&&(n.popover.classList.add("is-visible"),n.popoverVisible=!0)},32)}(n,l)}function yp(n){let[a,e]=bp(n,{before:n.position});if(void 0===a||void 0===e)return!1;let i=!1;return n.getAtoms([a,e]).forEach(o=>{o.isSuggestion&&(o.isSuggestion=!1,i=!0)}),i}function Ja(n,a="accept",e){var i,o;yr(n);let s=function UI(n){return n.atoms.find(a=>a instanceof aa)}(n.model);if(!s)return!1;if("accept-suggestion"===a){let c=br(n.model).filter(u=>u.isSuggestion);if(0===c.length)return!1;for(let u of c)u.isSuggestion=!1;return n.model.position=n.model.offsetOf(c[c.length-1]),!0}let r=br(n.model).filter(c=>!c.isSuggestion).map(c=>c.value).join(""),l=s.leftSibling;return s.parent.removeChild(s),n.model.position=n.model.offsetOf(l),n.mode=null!=(i=e?.mode)?i:"math","reject"===a||(dn.insert("math",n.model,r,{selectionMode:null!=(o=e?.selectItem)&&o?"item":"placeholder",format:"latex"}),n.snapshot(),n.model.announce("replacement")),!0}new class extends dn{constructor(){super("latex")}createAtom(n,a,e){return new An(n,a)}onPaste(n,a){var e;if(!a)return!1;let i="string"==typeof a?a:null!=(e=a.getData("text/x-latex"))?e:a.getData("text/plain");return!(!i||!en(n.model,{inputType:"insertFromPaste",data:i})||(n.snapshot(),this.insert(n.model,i)&&(an(n.model,{inputType:"insertFromPaste"}),yn(n)),0))}insert(n,a,e){if(!en(n,{data:a,inputType:"insertText"}))return!1;e||(e={}),e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder");let{suppressChangeNotifications:i}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let o=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vi(n.selection));let s=[];for(let c of a)W7.test(c)&&s.push(new An(c,n.mathfield));let r=n.at(n.position);if(r instanceof aa&&(r=r.lastChild),!(r.parent instanceof aa)){let c=new aa("",n.mathfield);r.parent.addChildAfter(c,r),r=c.firstChild}let l=r.parent.addChildrenAfter(s,r);return n.suppressChangeNotifications=o,"before"===e.selectionMode||("item"===e.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),an(n,{data:a,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var Pd,Nd=null,Dd=null;function BI(n,a){let e=n,i=new Tt("root",e);return i.body=mi(a,e,{parseMode:"math"}),oa(Ql(gs(new Nt(i.render(new fe({registers:e.registers},{fontSize:5},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function rc(n,a){var e;if(n.element&&n.element.mathfield===n&&n.popover&&n.popoverVisible){if(null!=a&&a.deferred)return void setTimeout(()=>rc(n),100);if("latex"!==(null==(e=n.model.at(n.model.position))?void 0:e.type))yr(n);else{let i=gr(n.field);i&&wp(n,i)}}}function wp(n,a){if(ym(),!n.popover||!n.popoverVisible)return;let e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,o=window.innerWidth-document.documentElement.clientWidth,s=window.innerHeight-document.documentElement.clientHeight,r=n.virtualKeyboard.height;n.popover.style.left=a.x+n.popover.offsetWidth/2>i-o?i-n.popover.offsetWidth-o+"px":a.x-n.popover.offsetWidth/2<0?"0":a.x-n.popover.offsetWidth/2+"px",a.y+n.popover.offsetHeight+5>e-s-r?(n.popover.classList.add("ML__popover--reverse-direction"),n.popover.style.top=a.y-a.height-n.popover.offsetHeight-5+"px"):(n.popover.classList.remove("ML__popover--reverse-direction"),n.popover.style.top=`${a.y+5}px`)}function yr(n){n.suggestionIndex=0,n.popoverVisible=!1,n.popover&&(n.popover.classList.remove("is-visible"),n.popover.innerHTML="")}function HI(n){let a=0;for(let e=0;e<n.length;e++)a=31*a+n.charCodeAt(e),a|=0;return Math.abs(a)}function yn(n,a){n.dirty||(n.dirty=!0,requestAnimationFrame(()=>{Ra(n)&&n.dirty&&(n.atomBoundsCache=new Map,Ha(n,a),n.atomBoundsCache=void 0)}))}function Ha(n,a){var e;if(!Ra(n))return;a=a??{};let{model:i}=n;i.root.caret="",i.root.isSelected=!1,i.root.containsCaret=!0;for(let c of i.atoms)c.caret="",c.isSelected=!1,c.containsCaret=!1;let o=!n.options.readOnly&&n.hasFocus();if(i.selectionIsCollapsed)i.at(i.position).caret=o?n.mode:"";else{let c=i.getAtoms(i.selection,{includeChildren:!0});for(let u of c)u.isSelected=!0}if(o){let c=i.at(i.position).parent;for(;c;)c.containsCaret=!0,c=c.parent}let s=function $I(n,a){var e;return oa(gs(n.model.root.render(new fe({registers:n.registers,atomIdsSettings:{seed:(a=a??{}).forHighlighting?HI(Tt.serialize(n.model.root,{expandMacro:!1,defaultMode:n.options.defaultMode})):"random",groupNumbers:null!=(e=a.forHighlighting)&&e},renderPlaceholder:n.options.readOnly?(o,s)=>{if(s.placeholderId){let r=n.getPlaceholderField(s.placeholderId);return s.createMathfieldBox(o,r,s.placeholderId)}return s.createBox(o)}:void 0},{fontSize:5,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(n,a),r=n.field,l=r.classList.contains("ML__focused");l&&!o?r.classList.remove("ML__focused"):!l&&o&&r.classList.add("ML__focused"),r.innerHTML=n.options.createHTML(s.toMarkup()),n.fieldContent=r.querySelector(".ML__mathlive"),n.accessibleMathML.innerHTML=n.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+De(i.root,n.options)+"</math>"),kp(n),n.options.readOnly&&n.attachNestedMathfield(),null!=(e=a.interactive)&&e||setTimeout(()=>kp(n),32),n.dirty=!1}function kp(n){let a=n.field;if(!a)return;for(let s of a.querySelectorAll(".ML__selection, .ML__contains-highlight"))s.remove();if(!n.hasFocus())return;let e=n.model,i=parseFloat(getComputedStyle(a).width),o=a.getBoundingClientRect().width/i;if(o=isNaN(o)?1:o,e.selectionIsCollapsed){setTimeout(()=>rc(n),32);let s=e.at(e.position);for(;s&&(!s.containsCaret||!s.displayContainsHighlight);)s=s.parent;if(null!=s&&s.containsCaret&&s.displayContainsHighlight){let r=op(n,fr(n,s));if(r){r.left/=o,r.right/=o,r.top/=o,r.bottom/=o;let l=document.createElement("div");l.classList.add("ML__contains-highlight"),l.style.position="absolute",l.style.left=`${r.left}px`,l.style.top=`${r.top}px`,l.style.width=`${Math.ceil(r.right-r.left)}px`,l.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,a.insertBefore(l,a.childNodes[0])}}}else for(let s of function KI(n){let a=[];for(let e of n){let i=!1;for(let o of a)if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom){i=!0;break}i||a.push(e)}n=a,a=[];for(let e of n){let i=0;for(let o of n)if(e.left>=o.left&&e.right<=o.right&&e.top>=o.top&&e.bottom<=o.bottom&&(i+=1,i>1))break;1===i&&a.push(e)}return a}(sp(n,{excludeAtomsWithBackground:!0}))){s.left/=o,s.right/=o,s.top/=o,s.bottom/=o;let r=document.createElement("div");r.classList.add("ML__selection"),r.style.position="absolute",r.style.left=`${s.left}px`,r.style.top=`${s.top}px`,r.style.width=`${Math.ceil(s.right-s.left)}px`,r.style.height=`${Math.ceil(s.bottom-s.top-1)}px`,a.insertBefore(r,a.childNodes[0])}}var Ko={};function hi(n,a){a=a??{target:"mathfield",canUndo:!1};for(let e of Object.keys(n))Ko[e]=ge(At({},a),{fn:n[e]})}function wr(n){var a;let e;return e=Pn(n)?n[0]:n,e=e.replace(/-\w/g,i=>i[1].toUpperCase()),null==(a=Ko[e])?void 0:a.target}function Cs(n,a,e){return a+ws(e,ge(At({},n),{textToSpeechMarkup:"",textToSpeechRulesOptions:ge(At({},n.textToSpeechRulesOptions),{markup:"none"})}))}function tL(n,a){var e,i,o;if(Di()&&(null!=a||(a=null!=(e=Sn().config)?e:{}),a))if(a.speechEngine&&"local"!==a.speechEngine)if("amazon"===a.speechEngine)if("AWS"in window){let s=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"mp3",VoiceId:null!=(i=a.speechEngineVoice)?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(o=a.speechEngineVoice)?o:"Joanna")?"neural":"standard",Text:n,TextType:"ssml"};s.synthesizeSpeech(r,(l,c)=>{if(l)console.error("MathLive: polly.synthesizeSpeech() error:",l,l.stack);else if(null!=c&&c.AudioStream){let u=new Uint8Array(c.AudioStream),d=new Blob([u.buffer],{type:"audio/mpeg"}),m=URL.createObjectURL(d);new Audio(m).play().catch(p=>console.log(p))}})}else console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else"google"===a.speechEngine&&console.error("MathLive: The Google speech engine is not supported yet. Please come again.");else{let s=new SpeechSynthesisUtterance(n);window.speechSynthesis.speak(s)}}function Cp(n){if(n&&(n.classList.remove("ML__highlight"),n.children))for(let a of n.children)Cp(a)}function qd(n,a){var e;n&&(a&&(null==(e=n.dataset)?void 0:e.atomId)!==a?(n.classList.remove("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&qd(i,a)})):(n.classList.add("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&qd(i)})))}function eL(n,a,e){var i;if(!Di())return;if(null!=e||(e=Sn().config),"amazon"!==e.speechEngine)return console.error("MathLive: Use Amazon TTS Engine for synchronized highlighting"),void(e.speakHook&&e.speakHook(a,e));if(!globalThis.AWS)return void console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");let o=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"json",VoiceId:null!=(i=e.speechEngineVoice)?i:"Joanna",Engine:"standard",Text:a,TextType:"ssml",SpeechMarkTypes:["ssml"]};Sn().readAloudElement=n,o.synthesizeSpeech(s,(r,l)=>{if(r)return void console.error("MathLive: polly.synthesizeSpeech() error:",r,r.stack);if(null==l||!l.AudioStream)return;let c=new TextDecoder("utf-8").decode(new Uint8Array(l.AudioStream));Sn().readAloudMarks=c.split("\n").map(u=>u?JSON.parse(u):{}),Sn().readAloudTokens=[];for(let u of Sn().readAloudMarks)u.value&&Sn().readAloudTokens.push(u.value);Sn().readAloudCurrentMark="",s.OutputFormat="mp3",s.SpeechMarkTypes=[],o.synthesizeSpeech(s,(u,d)=>{if(u)return void console.error("MathLive: polly.synthesizeSpeech(",a,") error:",u,u.stack);if(null==d||!d.AudioStream)return;let m=new Uint8Array(d.AudioStream),p=new Blob([m.buffer],{type:"audio/mpeg"}),b=URL.createObjectURL(p),y=Sn();y.readAloudAudio?y.readAloudAudio.pause():(y.readAloudAudio=new Audio,y.readAloudAudio.addEventListener("ended",()=>{let C=y.readAloudMathField;y.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),C?(Ha(C),y.readAloudElement=null,y.readAloudMathField=null,y.readAloudTokens=[],y.readAloudMarks=[],y.readAloudCurrentMark=""):Cp(y.readAloudElement)}),y.readAloudAudio.addEventListener("timeupdate",()=>{let C="",I=1e3*y.readAloudAudio.currentTime+100;for(let D of y.readAloudMarks)D.time<I&&(C=D.value);y.readAloudCurrentMark!==C&&(y.readAloudCurrentToken=C,C&&C===y.readAloudFinalToken?y.readAloudAudio.pause():(y.readAloudCurrentMark=C,qd(y.readAloudElement,y.readAloudCurrentMark)))})),y.readAloudAudio.src=b,y.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),y.readAloudAudio.play()})})}function Fd(n,a){var e,i,o;let s=Ts(n,Object.keys(n));for(let r of Object.keys(a))switch(r){case"scriptDepth":if(Pn(a.scriptDepth))s.scriptDepth=[a.scriptDepth[0],a.scriptDepth[1]];else{if("number"!=typeof a.scriptDepth)throw new TypeError("Unexpected value for scriptDepth");s.scriptDepth=[a.scriptDepth,a.scriptDepth]}break;case"locale":s.locale="auto"===a.locale?navigator.language.slice(0,5):a.locale,Ye.locale=s.locale;break;case"strings":Ye.merge(a.strings),s.strings=Ye.strings;break;case"virtualKeyboardLayout":s.virtualKeyboardLayout=a.virtualKeyboardLayout;break;case"virtualKeyboardMode":let l=a.virtualKeyboardMode.toLowerCase();s.virtualKeyboardMode="auto"===l?wm()?"onfocus":"off":l;break;case"customVirtualKeyboardLayers":s.customVirtualKeyboardLayers=At(At({},s.customVirtualKeyboardLayers),a.customVirtualKeyboardLayers);break;case"customVirtualKeyboards":s.customVirtualKeyboards=At(At({},s.customVirtualKeyboards),a.customVirtualKeyboards);break;case"letterShapeStyle":s.letterShapeStyle="auto"===a.letterShapeStyle?Ye.locale.startsWith("fr")?"french":"tex":a.letterShapeStyle;break;case"plonkSound":void 0!==a.plonkSound&&(s.plonkSound=a.plonkSound);break;case"keypressSound":null===a.keypressSound?s.keypressSound={default:null,delete:null,return:null,spacebar:null}:"string"==typeof a.keypressSound?s.keypressSound={delete:a.keypressSound,return:a.keypressSound,spacebar:a.keypressSound,default:a.keypressSound}:"object"==typeof a.keypressSound&&"default"in a.keypressSound&&(s.keypressSound=At({},a.keypressSound),s.keypressSound.delete=null!=(e=s.keypressSound.delete)?e:a.keypressSound.default,s.keypressSound.return=null!=(i=s.keypressSound.return)?i:a.keypressSound.default,s.keypressSound.spacebar=null!=(o=s.keypressSound.spacebar)?o:a.keypressSound.default);break;case"computeEngine":s.computeEngine=a.computeEngine;break;case"virtualKeyboardContainer":s.virtualKeyboardContainer=a.virtualKeyboardContainer;break;case"macros":s.macros=id(a.macros);break;default:s[r]=Pn(a[r])?[...a[r]]:"object"==typeof a[r]?At({},a[r]):a[r]}return s}function Ts(n,a){let e;e="string"==typeof a?[a]:void 0===a?Object.keys(n):a;let i={};for(let o of e)i[o]=null===n[o]?null:Pn(n[o])?[...n[o]]:"object"!=typeof n[o]||n[o]instanceof Element||"computeEngine"===o?n[o]:At({},n[o]);return"string"==typeof a?i[a]:i}hi({performWithFeedback:(n,a)=>function GI(n,a){n.focus(),n.options.keypressVibration&&Yu()&&navigator.vibrate(3),a=a.replace(/-\w/g,i=>i[1].toUpperCase()),n.playSound("moveToNextPlaceholder"===a||"moveToPreviousPlaceholder"===a||"complete"===a?"return":"deleteBackward"===a||"deleteForward"===a||"deletePreviousWord"===a||"deleteNextWord"===a||"deleteToGroupStart"===a||"deleteToGroupEnd"===a||"deleteToMathFieldStart"===a||"deleteToMathFieldEnd"===a?"delete":"keypress");let e=n.executeCommand(a);return n.scrollIntoView(),e}(n,a)}),hi({complete:Ja,nextSuggestion:function WI(n){return sc(n,{atIndex:n.suggestionIndex+1}),!1},previousSuggestion:function VI(n){return sc(n,{atIndex:n.suggestionIndex-1}),!1}},{target:"mathfield",category:"autocomplete"}),hi({speak:(n,a,e)=>function XI(n,a,e){var i,o;e=e??{withHighlighting:!1};let{model:s}=n;let c=function r(m){let p=null;switch(m){case"all":default:p=s.root;break;case"selection":p=s.getAtoms(s.selection);break;case"left":p=s.getAtoms(s.offsetOf(s.at(s.position).leftSibling),s.position);break;case"right":p=s.getAtoms(s.position,s.offsetOf(s.at(s.position).rightSibling));break;case"group":p=s.getAtoms(s.getSiblingsRange(s.position));break;case"parent":{let{parent:b}=s.at(s.position);p=b&&"root"!==b.type?b:s.root;break}}return p}(a);if(null===c)return null==(o=(i=n.options).speakHook)||o.call(i,function l(m){let p="";switch(m){case"all":case"group":default:break;case"selection":p="no selection";break;case"left":p="at start";break;case"right":p="at end";break;case"parent":p="no parent"}return p}(a),n.options),!1;let u=At({},n.options);(e.withHighlighting||"amazon"===u.speechEngine)&&(u.textToSpeechMarkup=globalThis.sre&&"sre"===u.textToSpeechRules?"ssml_step":"ssml");let d=ws(c,u);return Di()&&e.withHighlighting?(Sn().readAloudMathField=n,Ha(n,{forHighlighting:!0}),n.options.readAloudHook&&n.options.readAloudHook(n.field,d,n.options)):n.options.speakHook&&n.options.speakHook(d,u),!1}(n,a,e)},{target:"mathfield",category:"speech"});var Tp='<span style="width: 21px; margin-top: 4px;"><svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>';function Qd(){var n,a,e;return{readOnly:!1,createHTML:i=>i,fontsDirectory:"./fonts",soundsDirectory:"./sounds",computeEngine:void 0,defaultMode:"math",macros:nd(),registers:{},colorMap:Ll,backgroundColorMap:Gu,horizontalSpacingScale:1,letterShapeStyle:Ye.locale.startsWith("fr")?"french":"tex",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",decimalSeparator:".",fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",enablePopover:!0,locale:Ye.locale,strings:Ye.strings,keybindings:gp,inlineShortcuts:Wm,inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:Tp,virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:/android|cros/i.test(navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,virtualKeyboardToolbar:"default",virtualKeyboardContainer:null!=(a=null==(n=globalThis.document)?void 0:n.body)?a:null,useSharedVirtualKeyboard:!1,sharedVirtualKeyboardTargetOrigin:null==(e=globalThis.window)?void 0:e.origin,originValidator:"same-origin",textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:tL,readAloudHook:eL,onInlineShortcut:()=>"",onExport:V9,value:""}}function Ud(n){return"inline-math"===n.defaultMode?"math":n.defaultMode}var Sp,Op,Ap="@keyframes ML__caret-blink{0%,100%{opacity:1}50%{opacity:0}}.ML__caret:after{content:'';border:none;border-radius:2px;border-right:2px solid var(--caret-color, var(--ML__caret-color));margin-right:-2px;position:relative;left:-1px;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__text-caret:after{content:'';border:none;border-radius:1px;border-right:1px solid var(--caret-color, var(--ML__caret-color));margin-right:-1px;position:relative;left:0;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__latex-caret:after{content:'_';border:none;margin-right:0;margin-right:calc(-1ex - 2px);position:relative;color:var(--caret-color, var(--ML__caret-color));animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__container{display:flex;flex-flow:row;justify-content:space-between;align-items:flex-end;min-height:39px;width:100%;isolation:isolate;touch-action:none;--ML__selection-background-color:hsl(var(--hue, 212), 97%, 85%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .1);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 40%, 95%);--ML__selection-color:currentColor;--ML__caret-color:hsl(var(--hue, 212), 40%, 49%);--ML__smart-fence-color:currentColor;--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 40%, 49%)}@media (prefers-color-scheme:dark){.ML__container{--ML__selection-background-color:hsl(var(--hue, 212), 25%, 45%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .2);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 5%, 34%);--ML__caret-color:hsl(var(--hue, 212), 60%, 69%);--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 60%, 69%)}}.ML__content{display:flex;align-items:center;align-self:center;position:relative;overflow:hidden;padding:2px 0 2px 1px;width:100%}.ML__virtual-keyboard-toggle{display:none;box-sizing:border-box}.ML__virtual-keyboard-toggle>span{display:flex;align-self:center;align-items:center}.ML__virtual-keyboard-toggle.is-visible{display:flex;align-self:center;align-items:center;flex-shrink:0;flex-direction:column;justify-content:center;width:34px;height:34px;padding:0;margin-right:4px;cursor:pointer;border-radius:8px;border:1px solid transparent;transition:background .2s cubic-bezier(.64, .09, .08, 1);color:var(--primary, hsl(var(--hue, 212), 40%, 50%));fill:currentColor;background:transparent}.ML__virtual-keyboard-toggle.is-visible:hover{background:hsla(0,0%,70%,0.5);color:#333;fill:currentColor;border-radius:8px}.ML__keyboard-sink{display:inline-block;resize:none;outline:none;border:none;position:fixed;clip:rect(0 0 0 0);font-size:1em;font-family:KaTeX_Main}.ML__focused .ML__text{background:var(--highlight-text, var(--ML__text-highlight-background-color))}.ML__smart-fence__close{opacity:var(--smart-fence-opacity, .5);color:var(--smart-fence-color, var(--ML__smart-fence-color))}.ML__focused .ML__selection{background:var(--selection-background-color-focused, var(--selection-background-color, var(--ML__selection-background-color))) !important}.ML__focused .ML__selected,.ML__focused .ML__selected .ML__contains-caret,.ML__focused .ML__selected .ML__smart-fence__close,.ML__focused .ML__selected .ML__placeholder{color:var(--selection-color-focused, var(--selection-color, var(--ML__selection-color))) !important}.ML__selection{box-sizing:border-box;background:var(--selection-background-color, var(--ML__selection-background-color)) !important}.ML__selected,.ML__selected .ML__contains-caret,.ML__selected .ML__smart-fence__close,.ML__selected .ML__placeholder{color:var(--selection-color, var(--ML__selection-color));opacity:1}.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open,.ML__contains-caret .ML__sqrt-sign,.ML__contains-caret .ML__sqrt-line{color:var(--caret-color, var(--ML__caret-color))}.ML__contains-highlight{background:var(--contains-highlight-backround-color, var(--ML__contains-highlight));box-sizing:border-box}.ML__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;font-weight:400;color:var(--latex-color, var(--ML__latex-color))}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__virtual-keyboard-toggle:focus{outline:none;border-radius:8px;border:2px solid var(--primary, hsl(var(--hue, 212), 40%, 50%))}.ML__virtual-keyboard-toggle.is-pressed,.ML__virtual-keyboard-toggle.is-active:hover,.ML__virtual-keyboard-toggle.is-active{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__tooltip-container{position:relative;transform:scale(0)}.ML__tooltip-container .ML__tooltip-content{position:fixed;display:inline-table;visibility:hidden;z-index:2;width:max-content;max-width:400px;padding:12px 12px;border-radius:8px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);opacity:0;transition:opacity .15s cubic-bezier(.4, 0, 1, 1)}.ML__tooltip-container .ML__tooltip-content .ML__text{white-space:normal}.ML__tooltip-container .ML__tooltip-content .ML__base{display:contents}.ML__tooltip-container:hover .ML__tooltip-content{visibility:visible;opacity:1;font-size:.75em;transform:scale(1) translate(0, 3em)}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement='top']::after{top:inherit;bottom:100%}[data-ML__tooltip]::after{content:attr(data-ML__tooltip);position:absolute;display:none;z-index:2;right:110%;width:max-content;max-width:200px;padding:8px 8px;border-radius:2px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);text-align:center;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;opacity:0;transform:scale(.5);transition:all .15s cubic-bezier(.4, 0, 1, 1)}@media only screen and (max-width:767px){[data-ML__tooltip]::after{padding:8px 16px;font-size:16px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover::after{visibility:visible;display:inline-table;opacity:1;transform:scale(1)}[data-ML__tooltip][data-delay]::after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover::after{transition-delay:1s}",lc=null,Bd=(null==(Op=null==(Sp=globalThis?.document)?void 0:Sp.currentScript)?void 0:Op.src)||function nL(){let n=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===n.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${(new Error).stack}").`),"";let a=n[1],e=a.match(/http.*\.ts[\?:]/);return e&&(a=n[2]),e=a.match(/(https?:.*):[0-9]+:[0-9]+/),e||(e=a.match(/at (.*(\.ts))[\?:]/),e||(e=a.match(/at (.*(\.mjs|\.js))[\?:]/))),e?e[1]:(console.error(n),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${a}").`),"")}();function Ep(n){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,El.Z)(function*(n){if(/^(?:[a-z+]+:)?\/\//i.test(n))return new URL(n).href;if(null===lc)try{let a=yield fetch(Bd,{method:"HEAD"});200===a.status&&(lc=a.url)}catch{console.error(`Invalid URL "${n}" (relative to "${Bd}")`)}return new URL(n,lc??Bd).href})).apply(this,arguments)}function iL(n,a,e={}){return new FontFace(n,`url(${a}.woff2) format('woff2')`,e)}function zd(n){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,El.Z)(function*(n){var a;if(!(document.body.classList.contains("ML__fonts-loading")||null!=(a=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&a)&&(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document)){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],i=Array.from(document.fonts).map(r=>r.family);if(e.every(r=>i.includes(r)))return;document.body.classList.add("ML__fonts-loading");let o=yield Ep(n??"./fonts");if(!o)return document.body.classList.add("ML__fonts-did-not-load"),void document.body.classList.remove("ML__fonts-loading");let s=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(r=>iL(r[0].replace(/-[a-zA-Z]+$/,""),o+"/"+r[0],r[1]));try{(yield Promise.all(s.map(r=>{try{return r.load()}catch{}}))).forEach(r=>document.fonts.add(r))}catch(r){console.error(`The MathLive fonts could not be loaded from "${o}"`,{cause:r}),document.body.classList.add("ML__fonts-did-not-load")}document.body.classList.remove("ML__fonts-loading")}})).apply(this,arguments)}function la(n){return"number"==typeof n&&!Number.isNaN(n)}function cc(n){return Array.isArray(n)&&2===n.length}function uc(n){return null!=n&&"object"==typeof n&&"ranges"in n&&Array.isArray(n.ranges)}var kr={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},Hd={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function wn(n){var a,e,i,o,s,r,l,c,u,d,m,p,b;if(!n)return"";if(Pn(n)){if(0===n.length||("first"===n[0].type&&(n=n.slice(1)),0===n.length))return"";let D="";if("latex"===n[0].mode)for(let U of n)D+=wn(U);else if("text"===n[0].mode){let U=0;for(D='"';"text"===(null==(a=n[U])?void 0:a.mode);)D+=n[U].body?wn(n[U].body):n[U].value,U++;D+='"'+wn(n.slice(U))}else if("math"===n[0].mode){let U=0;for(;n[U]&&"math"===n[U].mode;)D+=wn(n[U]),U++;D+=wn(n.slice(U))}else console.warn("toASCIIMath: Unexpected mode");return D.trim()}if("text"===n.mode)return'"'+n.value+'"';let I,y="",{command:C}=n;switch(n.type){case"first":return"";case"group":case"root":y=null!=(e=kr[C])?e:wn(n.body);break;case"genfrac":{let et=n;(et.leftDelim||et.rightDelim)&&(y+="."!==et.leftDelim&&et.leftDelim?et.leftDelim:"{:"),et.hasBarLine?(y+="(",y+=wn(et.above),y+=")/(",y+=wn(et.below),y+=")"):(y+="("+wn(et.above)+"),",y+="("+wn(et.below)+")"),(et.leftDelim||et.rightDelim)&&(y+="."!==et.rightDelim&&et.rightDelim?et.rightDelim:"{:")}break;case"surd":y+=n.hasEmptyBranch("above")?"sqrt("+wn(n.body)+")":"root("+wn(n.above)+")("+wn(n.body)+")";break;case"latex":y=n.value;break;case"leftright":{let et=n;y+="."!==et.leftDelim&&et.leftDelim?et.leftDelim:"{:",y+=wn(et.body),y+="."!==et.rightDelim&&et.rightDelim?et.rightDelim:":}"}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":y=null!=(o=null!=(i=kr[C])?i:C)?o:"string"==typeof n.value?n.value:"",y.startsWith("\\")&&(y+=" "),I=C?C.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null,I?y=String.fromCodePoint(Number.parseInt("0x"+I[1])):y.length>0&&y.startsWith("\\")&&(y="string"==typeof n.value?n.value.charAt(0):n.command);break;case"mbin":case"mrel":case"minner":y=null!=(r=null!=(s=kr[C])?s:Hd[C])?r:n.value;break;case"mopen":case"mclose":y+=n.value;break;case"mpunct":y=null!=(l=Hd[C])?l:C;break;case"mop":"\u200b"!==n.value&&(y="",y+="\\operatorname"===C?wn(n.body):null!=(c=n.value)?c:C,y+=" ");break;case"array":let D=n.array,U=n.environmentName,B=null!=(u={bmatrix:["[","]"],"bmatrix*":["[","]"]}[U])?u:["(",")"],q=[];for(let et of D){let Q=[];for(let V of et)Q.push(B[0]+wn(V)+B[1]);q.push(Q.join(","))}let R=null!=(d={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[U])?d:["(",")"];y=R[0]+q.join(",")+R[1];break;case"spacing":y=null!=(m=kr[C])?m:" ";break;case"enclose":y="("+wn(n.body)+")";break;case"space":y=" ";break;case"msubsup":y="";break;case"macro":y=null!=(b=null!=(p=kr[C])?p:Hd[C])?b:wn(n.body)}if(!n.hasEmptyBranch("subscript")){y+="_";let D=wn(n.subscript);y+=D.length>1?"("+D+")":D}if(!n.hasEmptyBranch("superscript")){y+="^";let D=wn(n.superscript);y+=D.length>1?"("+D+")":D}return y}function Mp(n){let a;if("body"===n.treeBranch)a={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator"}[n.type];else if("genfrac"===n.parent.type){if("above"===n.treeBranch)return"numerator";if("below"===n.treeBranch)return"denominator"}else"surd"===n.parent.type?"above"===n.treeBranch&&(a="index"):"superscript"===n.treeBranch?a="superscript":"subscript"===n.treeBranch&&(a="subscript");return a??"parent"}function Ip(n,a,e,i){let o=n.offsetOf(a);if(o<e||o>i)return!1;if(!a.hasChildren)return!0;let s=n.offsetOf(a.firstChild);if(s>=e&&s<=i){let r=n.offsetOf(a.lastChild);if(r>=e&&r<=i)return!0}return!1}function $d(n,a,e){if(null==a||!a.hasChildren)return!1;let[i,o]=e,s=n.offsetOf(a.firstChild),r=n.offsetOf(a.lastChild);return s>=i&&s<=o&&r>=s&&r<=o}function dc(n,a){let e=n.at(n.position);for(;e&&!(Array.isArray(e.treeBranch)&&e.parent instanceof on);)e=e.parent;if(Array.isArray(e?.treeBranch)&&e?.parent instanceof on){let o,i=e.parent;switch(a){case"after row":i.addRowAfter(e.treeBranch[0]),o=n.offsetOf(i.getCell(e.treeBranch[0]+1,0)[0]);break;case"after column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnAfter(e.treeBranch[1]),o=n.offsetOf(i.getCell(e.treeBranch[0],e.treeBranch[1]+1)[0]);break;case"before row":i.addRowBefore(e.treeBranch[0]),o=n.offsetOf(i.getCell(e.treeBranch[0]-1,0)[0]);break;case"before column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnBefore(e.treeBranch[1]),o=n.offsetOf(i.getCell(e.treeBranch[0],e.treeBranch[1]-1)[0])}n.setSelection(o,o+1)}}function Lp(n){return!!en(n,{inputType:"insertText"})&&(dc(n,"after row"),an(n,{inputType:"insertText"}),!0)}function Zp(n){return!!en(n,{inputType:"insertText"})&&(dc(n,"after column"),an(n,{inputType:"insertText"}),!0)}function Pp(n,a){let e=n.at(n.position);for(;e&&!(Array.isArray(e.treeBranch)&&e.parent instanceof on);)e=e.parent;if(Array.isArray(e?.treeBranch)&&e?.parent instanceof on){let s,i=e.parent,o=e.treeBranch;switch(a){case"row":if(i.rowCount>1){i.removeRow(o[0]);let r=i.getCell(Math.max(0,o[0]-1),o[1]);s=n.offsetOf(r[r.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(o[1]);let r=i.getCell(o[0],Math.max(0,o[1]-1));s=n.offsetOf(r[r.length-1])}}s&&n.setPositionHandlingPlaceholder(s)}}function Cr(n,a,e,i){var o,s,r,l,c,u;let d=e.parent;if(d&&e instanceof $n){let m=!i&&"forward"===a||"body"===i&&"backward"===a,p=n.offsetOf(m?e.firstChild:e.lastChild);return m?"?"!==e.rightDelim&&"."!==e.rightDelim?(e.leftDelim=".",e.isDirty=!0):(d.addChildrenAfter(e.removeBranch("body"),e),d.removeChild(e),p--):"?"!==e.leftDelim&&"."!==e.leftDelim?(e.rightDelim=".",e.isDirty=!0):(d.addChildrenAfter(e.removeBranch("body"),e),d.removeChild(e),p--),n.position=p,!0}if(d&&"surd"===e.type){if("forward"===a&&!i||"backward"===a&&"body"===i){let m=e.leftSibling;e.hasChildren&&d.addChildrenAfter(e.removeBranch("body"),e),d.removeChild(e),n.position=n.offsetOf(m)}else"forward"===a&&"body"===i?n.position=n.offsetOf(e):i||"backward"!==a?"above"===i&&(e.hasEmptyBranch("above")&&e.removeBranch("above"),n.position=n.offsetOf("backward"===a?e.leftSibling:e.body[0])):e.hasChildren?n.position=n.offsetOf(e.lastChild):(n.position=Math.max(0,n.offsetOf(e)-1),d.removeChild(e));return!0}if(d&&("box"===e.type||"enclose"===e.type)){let m=i&&"backward"===a||!i&&"forward"===a?e.leftSibling:e.lastChild;return d.addChildrenAfter(e.removeBranch("body"),e),d.removeChild(e),n.position=n.offsetOf(m),!0}if("genfrac"===e.type||"overunder"===e.type){if(!i)return!("overunder"===e.type&&e.hasEmptyBranch("body")||"genfrac"===e.type&&e.hasEmptyBranch("below")&&e.hasEmptyBranch("above")||(n.position=n.offsetOf("forward"===a?e.firstChild:e.lastChild),0));let m="numerator-denominator"===e.context.fractionNavigationOrder?"above":"below",p="above"===m?"below":"above";if(d&&("forward"===a&&i===m||"backward"===a&&i===p)){let b=e.removeBranch(m),y=e.removeBranch(p);return d.addChildrenAfter([...b,...y],e),d.removeChild(e),n.position=n.offsetOf(b.length>0?b[b.length-1]:y[0]),!0}return n.position=n.offsetOf("backward"===a?e.leftSibling:e),!0}if(e.isExtensibleSymbol||"msubsup"===e.type){if(!i&&"forward"===a)return!1;if(!i){if(e.subscript||e.superscript){let m="forward"===a?null!=(r=null==(o=e.superscript)?void 0:o[0])?r:null==(s=e.subscript)?void 0:s[0]:null!=(u=null==(l=e.subscript)?void 0:l[0].lastSibling)?u:null==(c=e.superscript)?void 0:c[0].lastSibling;return m&&(n.position=n.offsetOf(m)),!0}return!1}if(i&&e.hasEmptyBranch(i)&&e.removeBranch(i),!e.hasChildren){let m="forward"===a?n.offsetOf(e):Math.max(0,n.offsetOf(e)-1);return e.parent.removeChild(e),n.position=m,!0}if("superscript"===i)if("backward"===a){let m=n.offsetOf(e.firstChild)-1;n.position=m}else n.position=n.offsetOf(e.subscript?e.subscript[0]:e);else"subscript"===i&&(n.position="backward"===a&&e.superscript?n.offsetOf(e.superscript[0].lastSibling):"backward"===a?n.offsetOf(e.firstChild)-1:n.offsetOf(e));return!0}if("genfrac"===d?.type&&!i&&"first"!==e.type){let m=n.offsetOf(e.leftSibling);return d.removeChild(e),d.hasEmptyBranch("above")&&d.hasEmptyBranch("below")?(m=n.offsetOf(d.leftSibling),d.parent.removeChild(d),n.announce("delete",void 0,[d]),n.position=m,!0):(n.announce("delete",void 0,[e]),n.position=m,!0)}return!1}function Eo(n,a,e){let i=n.getAtoms(a);if(i.length>0&&i[0].parent){let o=i[0].parent.firstChild;"first"===o.type&&(o=o.rightSibling);let r=i[0];if("first"===r.type&&(r=r.rightSibling),r===o&&i[i.length-1]===i[i.length-1].parent.lastChild){let c=i[0].parent;"root"!==c.type&&(a=[n.offsetOf(c.leftSibling),n.offsetOf(c.rightSibling)])}if(1===i.length&&"placeholder"===i[0].type&&"genfrac"===i[0].parent.type){let c=i[0].parent,u="below"===i[0].treeBranch?"above":"below",d=n.offsetOf(c.leftSibling);return n.deferNotifications({content:!0,selection:!0,type:e},()=>{var m,p;let b=c.removeBranch(u);if(1===b.length&&"placeholder"===b[0].type)null==(p=c.parent)||p.removeChild(c),n.position=Math.max(0,d);else{let y=c.parent.addChildrenAfter(b,c);null==(m=c.parent)||m.removeChild(c),n.position=n.offsetOf(y)}})}}return n.deferNotifications({content:!0,selection:!0,type:e},()=>n.deleteAtoms(a))}function Np(n,a){let i,e=n.at(a);if(e){i=e.mode;let o=e.parent;for(;!i&&o;)o&&(i=o.mode),o=o.parent}return i}function ca(n,a){!n||!a||(Pn(n)?n.forEach(e=>ca(e,a)):"object"==typeof n&&!n.style.color&&!n.style.backgroundColor&&!n.style.fontFamily&&!n.style.fontShape&&!n.style.fontSeries&&!n.style.fontSize&&!n.style.variant&&!n.style.variantStyle&&(n.applyStyle(a),ca(n.body,a),ca(n.above,a),ca(n.below,a),ca(n.subscript,a),ca(n.superscript,a)))}function Kd(n,a,e,i){function o(r,l){for(let c of s)if(c.style[r]!==l)return!1;return!0}if((a=n.normalizeRange(a))[0]===a[1])return!1;let s=n.getAtoms(a,{includeChildren:!0});"toggle"===i.operation&&(e.color&&o("color",e.color)&&(e.color="none",e.verbatimColor=void 0),e.backgroundColor&&o("backgroundColor",e.backgroundColor)&&(e.backgroundColor="none",e.verbatimBackgroundColor=void 0),e.fontFamily&&o("fontFamily",e.fontFamily)&&(e.fontFamily="none"),e.fontSeries&&o("fontSeries",e.fontSeries)&&(e.fontSeries="auto"),e.fontShape&&o("fontShape",e.fontShape)&&(e.fontShape="auto"),e.fontSize&&o("fontSize",e.fontSize)&&(e.fontSize=5));for(let r of s)r.applyStyle(e);return!0}function Yd(n,a,e){if("text"!==n.at(a).mode)return a;let o,i="backward"===e?-1:1;if(Pl.test(n.at(a).value)){let r,s=a;do{r="text"===n.at(s).mode&&Pl.test(n.at(s).value),s+=i}while(n.at(s)&&r);o=n.at(s)?s-2*i:s-i}else if(/\s/.test(n.at(a).value)){let s=a;for(;n.at(s)&&"text"===n.at(s).mode&&/\s/.test(n.at(s).value);)s+=i;if(n.at(s)){let r=!0;do{r="text"===n.at(s).mode&&!/\s/.test(n.at(s).value),s+=i}while(n.at(s)&&r);o=n.at(s)?s-2*i:s-i}else o=s-i}else{let s=a;for(;n.at(s)&&"text"===n.at(s).mode&&!/\s/.test(n.at(s).value);)s+=i;o=n.at(s)?s:s-i;let r=!0;for(;n.at(s)&&r;)r="text"===n.at(s).mode&&/\s/.test(n.at(s).value),r&&(o=s),s+=i;o=n.at(s)?s-2*i:s-i}return o-(i>0?0:1)}function As(n,a,e){var i,o,s,r,l,c,u;let d=n.position;null!=(i=e?.extend)&&i||n.collapseSelection(a);let m=n.at(n.position);if("forward"===a&&("msubsup"===m.type?(m=m.rightSibling,m||(m=n.at(n.position+1))):m=n.at(n.position+1)),!m)return n.announce("plonk"),!1;let p=n.offsetOf(m);if(m instanceof vs)p=Yd(n,p,a);else if(m instanceof An)if(m.isSuggestion)for(;m&&m instanceof An;)m.isSuggestion=!1,p=n.offsetOf(m),m=m.rightSibling;else if("forward"===a){if(m=m.rightSibling,!(m&&m instanceof An))return n.announce("plonk"),!1;for(;m&&m instanceof An&&/[a-zA-Z\*]/.test(m.value);)p=n.offsetOf(m),m=m.rightSibling}else{if(m=m.leftSibling,!(m&&m instanceof An))return n.announce("plonk"),!1;for(;m&&m instanceof An&&/[a-zA-Z\*]/.test(m.value);)p=n.offsetOf(m),m=m.leftSibling}else if("forward"===a&&"mopen"===m.type){let b=0;do{"mopen"===m.type?b+=1:"mclose"===m.type&&(b-=1),m=m.rightSibling}while(!m.isLastSibling&&0!==b);p=n.offsetOf(m.leftSibling)}else if("backward"===a&&"mclose"===m.type){let b=0;do{"mopen"===m.type?b+=1:"mclose"===m.type&&(b-=1),m=m.leftSibling}while(!m.isFirstSibling&&0!==b);p=n.offsetOf(m)}else if("backward"===a)if("first"===m.type)for(;p>0&&"first"===m.type;)p-=1,m=n.at(p);else{let b=m.type;"msubsup"===m.type&&(p=n.offsetOf(n.at(p).leftSibling)),p-=1;let y=null==(o=n.at(p))?void 0:o.type;for(;p>=0&&y===b;)"msubsup"===(null==(s=n.at(p))?void 0:s.type)?p=n.offsetOf(n.at(p).leftSibling):p-=1,y=n.at(p).type}else{let{type:b}=m,y=null==(r=n.at(p))?void 0:r.type,{lastOffset:C}=n;for(;p<=C&&(y===b||"msubsup"===y);){for(;"msubsup"===(null==(l=n.at(p).rightSibling)?void 0:l.type);)p=n.offsetOf(n.at(p).rightSibling);p+=1,y=null==(c=n.at(p))?void 0:c.type}p-=1}if(null!=(u=e?.extend)&&u){if(!n.setSelection(n.anchor,p))return n.announce("plonk"),!1}else{if(p===n.position)return n.announce("plonk"),!1;n.position=p}return n.announce("move",d),!0}function Yo(n,a,e){var i,o,s,r,l,c,u,d;if(e=e??{extend:!1},"forward"!==a){let[p,b]=bp(n);void 0!==p&&void 0!==b&&n.deleteAtoms([p,b])}if("upward"===a)return function fL(n,a){var e,i,o,s;let r=null!=(e=a?.extend)&&e;r||n.collapseSelection("backward");let l=n.at(n.position),c=l;for(;c&&"below"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof on);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof on){let u=c.parent,d=Math.max(0,c.treeBranch[0]-1);_c(n,l,u.array[d][c.treeBranch[1]],r,"up")}else{if(!c){let u=!0;return n.suppressChangeNotifications||(u=null==(s=null==(o=n.mathfield.host)?void 0:o.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||s),n.announce(u?"plonk":"line"),u}_c(n,l,null!=(i=c.parent.branch("above"))?i:c.parent.createBranch("above"),r,"up")}return!0}(n,e);if("downward"===a)return function xL(n,a){var e,i,o,s;let r=null!=(e=a?.extend)&&e;r||n.collapseSelection("forward");let l=n.at(n.position),c=l;for(;c&&"above"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof on);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof on){let u=c.parent,d=Math.min(u.array.length-1,c.treeBranch[0]+1);_c(n,l,u.array[d][c.treeBranch[1]],r,"down")}else{if(!c){let u=!0;return n.suppressChangeNotifications||(u=null==(s=null==(o=n.mathfield.host)?void 0:o.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||s),n.announce(u?"plonk":"line"),u}_c(n,l,null!=(i=c.parent.branch("below"))?i:c.parent.createBranch("below"),r,"down")}return!0}(n,e);let m=n.position;if(e.extend)return n.extendSelection(a);if(n.selectionIsPlaceholder)return n.collapseSelection(a),Yo(n,a);if(!n.collapseSelection(a)){let p=n.position+("forward"===a?1:-1),b=n.at(p);if(p>=0&&p<=n.lastOffset)if("forward"===a)if(b.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;p=n.offsetOf(b)}else if(!b.isFirstSibling&&b.isLastSibling&&null!=(i=b.parent)&&i.skipBoundary){if(p+1!==n.lastOffset)return n.position=p,Yo(n,"forward",e);p+=1}else null!=(o=b.parent)&&o.skipBoundary&&null!=(s=b.rightSibling)&&s.isLastSibling?p+=2:null!=(r=b.parent)&&r.skipBoundary&&"first"===b.type?p+=1:b instanceof An&&b.isSuggestion&&(b.isSuggestion=!1);else if("backward"===a)if(null!=(l=b.parent)&&l.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;p=Math.max(0,n.offsetOf(b.leftSibling))}else(b.skipBoundary||null!=(c=b.parent)&&c.skipBoundary&&"first"===b.type)&&(p=Math.max(0,n.position-2));if(p<0||p>n.lastOffset){let y=!0;return n.suppressChangeNotifications||(y=null==(d=null==(u=n.mathfield.host)?void 0:u.dispatchEvent(new CustomEvent("move-out",{detail:{direction:a},cancelable:!0,bubbles:!0,composed:!0})))||d),y&&n.announce("plonk"),y}n.setPositionHandlingPlaceholder(p)}return n.announce("move",m),!0}function _c(n,a,e,i,o){let s=lp(n.mathfield.getHTMLElement(a)).right,r=n.offsetOf(function gL(n,a,e){let i=1/0,o=0;for(;o<a.length;o++){let s=lp(n.getHTMLElement(a[o])).right,r=Math.abs(e-s);if(!(r<=i))break;i=r}return a[o-1]}(n.mathfield,e,s));if(i){let u,[l,c]=n.selection.ranges[0];u=r<("up"===o?l:c)?{ranges:[[r,c]],direction:"backward"}:{ranges:[[l,r]],direction:"forward"},n.setSelection(u)}else n.setPositionHandlingPlaceholder(r);n.announce(`move ${o}`)}function Dp(n){let a=n.position,e=n.at(a).parent;return e&&"root"!==e.type?(n.position=n.offsetOf(e),n.announce("move",a),!0):(n.announce("plonk"),!1)}function jp(n){var a;if(n.collapseSelection(),function vL(n){let a=0,e=n.at(n.position),i=!1;for(;e;)(!e.hasEmptyBranch("superscript")||!e.hasEmptyBranch("subscript"))&&(a+=1),e.hasEmptyBranch("superscript")?e.hasEmptyBranch("subscript")||(i=!1):i=!0,e=e.parent;return i?a:0}(n)>=n.mathfield.options.scriptDepth[1])return n.announce("plonk"),!1;let e=n.at(n.position);return void 0===e.subsupPlacement&&("msubsup"!==(null==(a=e.rightSibling)?void 0:a.type)&&e.parent.addChildAfter(new _r(n.mathfield,{style:e.computedStyle}),e),e=e.rightSibling),e.createBranch("superscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(e.superscript[0]))),!0}function qp(n){var a;if(n.collapseSelection(),function bL(n){let a=0,e=n.at(n.position),i=!1;for(;e;)(!e.hasEmptyBranch("superscript")||!e.hasEmptyBranch("subscript"))&&(a+=1),e.hasEmptyBranch("superscript")?e.hasEmptyBranch("subscript")||(i=!0):i=!1,e=e.parent;return i?a:0}(n)>=n.mathfield.options.scriptDepth[0])return n.announce("plonk"),!1;let e=n.at(n.position);return void 0===e.subsupPlacement&&("msubsup"!==(null==(a=n.at(n.position+1))?void 0:a.type)&&e.parent.addChildAfter(new _r(n.mathfield,{style:n.at(n.position).computedStyle}),e),e=n.at(n.position+1)),e.createBranch("subscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(e.subscript[0]))),!0}function Fp(n,a,e=!0){var i,o;let s="forward"===a?1:-1;"placeholder"===n.at(n.anchor).type&&Yo(n,a);let r=n.getAllAtoms(Math.max(n.position+s,0));"backward"===a&&r.reverse();let l=r.filter(m=>"placeholder"===m.type||m.treeDepth>2&&m.isFirstSibling&&m.isLastSibling);if(0===l.length){if(!e||null!=(o=null==(i=n.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:a},cancelable:!0,bubbles:!0,composed:!0})))&&!o)return n.announce("plonk"),!1;let m=function yL(){function a(c){return!(!function e(c){return!(c.disabled||"hidden"===c.type&&"INPUT"===c.tagName.toUpperCase()||function l(c){if(!Di()||c===document.activeElement||c.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(c).visibility)return!0;let u=c.getBoundingClientRect();if(0===u.width||0===u.height)return!0;for(;c;){if("none"===getComputedStyle(c).display)return!0;c=c.parentElement}return!1}(c))}(c)||function o(c){return"INPUT"===c.tagName.toUpperCase()&&"radio"===c.type&&!function r(c){var u;if(!c.name)return!0;let m=function s(c,u){for(let d of c)if(d.checked&&d.form===u)return d;return null}((null!=(u=c.form)?u:c.ownerDocument).querySelectorAll('input[type="radio"][name="'+c.name+'"]'),c.form);return!m||m===c}(c)}(c)||i(c)<0)}function i(c){var u;let d=Number.parseInt(null!=(u=c.getAttribute("tabindex"))?u:"NaN",10);return Number.isNaN(d)?"true"===c.contentEditable||("AUDIO"===c.nodeName||"VIDEO"===c.nodeName)&&null===c.getAttribute("tabindex")?0:c.tabIndex:d}return Di()?function n(c){let u=[],d=[];return[...c.querySelectorAll('input, select, textarea, a[href], button,\n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')].filter(a).forEach((m,p)=>{let b=i(m);0===b?u.push(m):d.push({documentOrder:p,tabIndex:b,node:m})}),d.sort((m,p)=>m.tabIndex===p.tabIndex?m.documentOrder-p.documentOrder:m.tabIndex-p.tabIndex).map(m=>m.node).concat(u)}(document.body):[]}();if(!document.activeElement||1===m.length)return n.announce("plonk"),!1;let p=m.indexOf(document.activeElement)+s;return!!(document.activeElement instanceof c_&&c(document.activeElement,a,s)||(p<0&&(p=m.length-1),p>=m.length&&(p=0),m[p]instanceof c_&&c(m[p],a,s)))||(m[p].focus(),0!==p||(n.announce("plonk"),!1))}function c(m,p,b){var y,C,I;let D=[...null!=(C=null==(y=m.shadowRoot)?void 0:y.querySelectorAll("math-field"))?C:[]];if(D.length){let U=null==(I=m.shadowRoot)?void 0:I.activeElement,B=D.indexOf(U),q=B+b;if(B<0&&"backward"===p&&(q=D.length-1),q>=0&&q<D.length)return D[q].focus(),!0}return!1}let u=n.position,d=n.offsetOf(l[0]);return"placeholder"===l[0].type?n.setSelection(d-1,d):n.position=d,n.announce("move",u),!0}function Qp(n){var a,e,i,o,s,r;if("text"===Np(n,n.position)){let l=Math.min(n.anchor,n.position),c=Math.max(n.anchor,n.position),u=!1;for(;!u&&l>0;){let d=n.at(l);"text"===d.mode&&Pl.test(d.value)?l-=1:u=!0}for(u=!1;!u&&c<=n.lastOffset;){let d=n.at(c);"text"===d.mode&&Pl.test(d.value)?c+=1:u=!0}if(u&&(c-=1),l>=c)return n.setSelection(c-1,c),!0;n.setSelection(l,c)}else{let l=n.at(n.position);if(l.isDigit()){let c=Math.min(n.anchor,n.position),u=Math.max(n.anchor,n.position);for(;null!=(a=n.at(c))&&a.isDigit();)c-=1;for(;null!=(e=n.at(u))&&e.isDigit();)u+=1;n.setSelection(c,u-1)}else if(l.style.variant||l.style.variantStyle){let c=Math.min(n.anchor,n.position),u=Math.max(n.anchor,n.position),d=null==(i=n.at(c))?void 0:i.style;for(;d&&d.variant===l.style.variant&&d.variantStyle===l.style.variantStyle;)c-=1,d=null==(o=n.at(c))?void 0:o.style;for(d=null==(s=n.at(u))?void 0:s.style;d&&d.variant===l.style.variant&&d.variantStyle===l.style.variantStyle;)u+=1,d=null==(r=n.at(u))?void 0:r.style;n.setSelection(c,u-1)}else n.setSelection(n.offsetOf(l.firstSibling),n.offsetOf(l.lastSibling))}return!0}hi({addRowAfter:Lp,addColumnAfter:Zp,addRowBefore:function lL(n){return!!en(n,{inputType:"insertText"})&&(dc(n,"before row"),an(n,{inputType:"insertText"}),!0)},addColumnBefore:function cL(n){return!!en(n,{inputType:"insertText"})&&(dc(n,"before column"),an(n,{inputType:"insertText"}),!0)},removeRow:function uL(n){return!!en(n,{inputType:"deleteContent"})&&(Pp(n,"row"),an(n,{inputType:"deleteContent"}),!0)},removeColumn:function dL(n){return!!en(n,{inputType:"deleteContent"})&&(Pp(n,"column"),an(n,{inputType:"deleteContent"}),!0)}},{target:"model",category:"array-edit"}),hi({deleteAll:n=>en(n,{inputType:"deleteContent"})&&Eo(n,[0,-1],"deleteContent"),deleteForward:n=>function mL(n){return!!en(n,{inputType:"deleteContentForward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var a,e;let i=n.at(n.position).rightSibling;if(i&&Cr(n,"forward",i))return;if(i){if(n.at(n.position).isLastSibling&&Cr(n,"forward",i.parent,i.treeBranch))return}else{if(i=n.at(n.position),i.isLastSibling&&Cr(n,"forward",i.parent,i.treeBranch))return;i=void 0}if(n.position===n.lastOffset||!i)return void n.announce("plonk");i.parent.removeChild(i);let o=null==(a=n.at(n.position))?void 0:a.rightSibling;for(;"msubsup"===o?.type;)o.parent.removeChild(o),o=null==(e=n.at(n.position))?void 0:e.rightSibling;n.announce("delete",void 0,[i])}):Eo(n,Vi(n.selection),"deleteContentForward"))}(n),deleteBackward:n=>function _L(n){return!!en(n,{inputType:"deleteContentBackward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let a=n.at(n.position);if(!a||!Cr(n,"backward",a)){if(null!=a&&a.isFirstSibling){if(Cr(n,"backward",a.parent,a.treeBranch))return;a=null}if(!a)return void n.announce("plonk");n.position=n.offsetOf(a.leftSibling),a.parent.removeChild(a),n.announce("delete",void 0,[a])}}):Eo(n,Vi(n.selection),"deleteContentBackward"))}(n),deleteNextWord:n=>en(n,{inputType:"deleteWordForward"})&&Eo(n,[n.anchor,Yd(n,n.position,"forward")],"deleteWordForward"),deletePreviousWord:n=>en(n,{inputType:"deleteWordBackward"})&&Eo(n,[n.anchor,Yd(n,n.position,"backward")],"deleteWordBackward"),deleteToGroupStart:n=>en(n,{inputType:"deleteSoftLineBackward"})&&Eo(n,[n.anchor,n.offsetOf(n.at(n.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:n=>en(n,{inputType:"deleteSoftLineForward"})&&Eo(n,[n.anchor,n.offsetOf(n.at(n.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:n=>en(n,{inputType:"deleteHardLineBackward"})&&Eo(n,[n.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:n=>en(n,{inputType:"deleteHardLineForward"})&&Eo(n,[n.anchor,-1],"deleteHardLineForward")},{target:"model",category:"delete"}),hi({moveToOpposite:n=>{let e=n.at(n.position),{parent:i}=e;if(!i)return n.announce("plonk"),!1;let s,o=e.treeBranch;return"string"==typeof o&&(s={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[o]),s?(i.branch(s)||i.createBranch(s),n.setSelection(n.getBranchRange(n.offsetOf(i),s))):e.subsupPlacement?qp(n):jp(n)},moveBeforeParent:n=>{let{parent:a}=n.at(n.position);return a?(n.position=n.offsetOf(a),!0):(n.announce("plonk"),!1)},moveAfterParent:n=>Dp(n),moveToNextPlaceholder:n=>Fp(n,"forward"),moveToPreviousPlaceholder:n=>Fp(n,"backward"),moveToNextChar:n=>Yo(n,"forward"),moveToPreviousChar:n=>Yo(n,"backward"),moveUp:n=>Yo(n,"upward"),moveDown:n=>Yo(n,"downward"),moveToNextWord:n=>As(n,"forward"),moveToPreviousWord:n=>As(n,"backward"),moveToGroupStart:n=>{let a=n.offsetOf(n.at(n.position).firstSibling);return a===n.position?(n.announce("plonk"),!1):(n.position=a,!0)},moveToGroupEnd:n=>{let a=n.offsetOf(n.at(n.position).lastSibling);return a===n.position?(n.announce("plonk"),!1):(n.position=a,!0)},moveToMathfieldStart:n=>0===n.position?(n.announce("plonk"),!1):(n.position=0,!0),moveToMathfieldEnd:n=>n.position===n.lastOffset?(n.announce("plonk"),!1):(n.position=n.lastOffset,!0),moveToSuperscript:n=>jp(n),moveToSubscript:n=>qp(n)},{target:"model",category:"selection-anchor"}),hi({selectGroup:n=>{let a=Qp(n);return a||n.announce("plonk"),a},selectAll:n=>n.setSelection(0,n.lastOffset),extendSelectionForward:n=>{let a=n.extendSelection("forward");return a||n.announce("plonk"),a},extendSelectionBackward:n=>{let a=n.extendSelection("backward");return a||n.announce("plonk"),a},extendToNextWord:n=>As(n,"forward",{extend:!0}),extendToPreviousWord:n=>As(n,"backward",{extend:!0}),extendSelectionUpward:n=>Yo(n,"upward",{extend:!0}),extendSelectionDownward:n=>Yo(n,"downward",{extend:!0}),extendToNextBoundary:n=>As(n,"forward",{extend:!0}),extendToPreviousBoundary:n=>As(n,"backward",{extend:!0}),extendToGroupStart:n=>{let a=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).firstSibling));return a||n.announce("plonk"),a},extendToGroupEnd:n=>{let a=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).lastSibling));return a||n.announce("plonk"),a},extendToMathFieldStart:n=>{let a=n.setSelection(n.anchor,0);return a||n.announce("plonk"),a},extendToMathFieldEnd:n=>{let a=n.setSelection(n.anchor,n.lastOffset);return a||n.announce("plonk"),a}},{target:"model",category:"selection-extend"});var Ss=class{constructor(n){var a,e;this.preventOverlayClose=null!=(a=n?.preventOverlayClose)&&a,this.translucent=null!=(e=n?.translucent)&&e,this.state="closed"}get element(){if(this._element)return this._element;let n=document.createElement("div");return n.setAttribute("role","presentation"),n.style.position="fixed",n.style.contain="content",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.zIndex="var(--scrim-zindex, 10099)",n.style.outline="none",this.translucent?(n.style.background="rgba(255, 255, 255, .2)",n.style.backdropFilter="contrast(40%)"):n.style.background="transparent",this._element=n,n}open(n){var a;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=Up();let{element:e}=this;(null!=(a=n?.root)?a:document.body).appendChild(e),e.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let i=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let o=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${o+i}px`,null!=n&&n.child&&e.append(n.child),this.state="open"}close(){var n,a,e,i;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:o}=this;o.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),o.remove(),document.body.style.overflow=null!=(n=this.savedOverflow)?n:"",document.body.style.marginRight=null!=(a=this.savedMarginRight)?a:"",Up()!==this.savedActiveElement&&(null==(i=null==(e=this.savedActiveElement)?void 0:e.focus)||i.call(e)),o.innerHTML="",this.state="closed"}handleEvent(n){this.preventOverlayClose||(n.target===this._element&&"click"===n.type||n.target===document&&("touchmove"===n.type||"scroll"===n.type))&&(this.close(),n.preventDefault(),n.stopPropagation())}};function Up(){var n;let a=document.activeElement;for(;null!=(n=a?.shadowRoot)&&n.activeElement;)a=a.shadowRoot.activeElement;return a}var wL=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function Bp(n){return!n.ctrlKey&&!n.metaKey&&"Dead"!==n.key&&(""===n.code||wL.has(n.code))}function Rp(n){n=function II(n){if(n.code)return n;let a=Object.entries(vr().mapping),e=!1,i=!1,o="";for(let s=0;s<4;s++){for(let[r,l]of a)if(l[s]===n.key){o=r,3===s?(e=!0,i=!0):2===s?e=!0:1===s&&(i=!0);break}if(o)break}return new KeyboardEvent(n.type,ge(At({},n),{altKey:e,shiftKey:i,code:o}))}(n);let a=[];return n.ctrlKey&&a.push("ctrl"),n.metaKey&&a.push("meta"),n.altKey&&a.push("alt"),n.shiftKey&&a.push("shift"),0===a.length?"["+n.code+"]":(a.push("["+n.code+"]"),a.join("+"))}function mc(n){var a;if(!n)return"";let e;return"Unidentified"===n.key&&n.target&&(e=n.target.value),e=null!=(a=e??n.key)?a:n.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e)&&(e=""),e}var Gd,zp=".ML__keyboard{--hue:206;--keyboard-background:rgba(209, 213, 217);--keyboard-text:#000;--keyboard-text-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-background-border:#ddd;--keycap-background:white;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-alternate-text:var(--keycap-text, #000);--keyboard-alternate-text-active:#fff;--keyboard-alternate-key-length:70px;--keyboard-alternate-key-font-size:30px;--keyboard-alternate-key-aside-font-size:12px;--keyboard-height:calc(276px + env(safe-area-inset-bottom, 0));--keycap-height:52px;--keycap-font-size:20px;--keycap-small-font-size:calc(var(--keycap-font-size) * .8);--keycap-extra-small-font-size:calc(var(--keycap-font-size) / 1.42);--keycap-tt-font-size:calc(var(--keycap-font-size) * 1.5);position:fixed;top:0;left:0;height:100%;width:100%;z-index:var(--keyboard-zindex, 105);pointer-events:none}.ML__keyboard.is-visible .ML__keyboard--plate{transform:translate(0, calc(-1 * var(--keyboard-height, 276px)));opacity:1;visibility:visible;transition-timing-function:cubic-bezier(.4, 0, 1, 1)}.ML__keyboard.alternate-keys{visibility:hidden;max-width:286px;background-color:var(--keyboard-alternate-background);text-align:center;border-radius:6px;position:fixed;bottom:auto;top:0;box-sizing:content-box;transform:none;z-index:calc(var(--keyboard-zindex, 105) + 1);display:flex;flex-direction:row;justify-content:center;align-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:none}@media (max-width: 414px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys.compact{--keyboard-alternate-key-length:50px;--keyboard-alternate-key-font-size:24px;--keyboard-alternate-key-aside-font-size:10px}.ML__keyboard.alternate-keys ul{list-style:none;margin:3px;padding:0;display:flex;flex-flow:row wrap-reverse;justify-content:center}.ML__keyboard.alternate-keys ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;font-size:var(--keyboard-alternate-key-font-size);height:var(--keyboard-alternate-key-length);width:var(--keyboard-alternate-key-length);box-sizing:border-box;margin:0;background:transparent;border:1px solid transparent;border-radius:5px;pointer-events:all;cursor:pointer;color:var(--keyboard-alternate-text);fill:currentColor}@media (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li .ML__mathlive{pointer-events:none}.ML__keyboard.alternate-keys ul>li:hover,.ML__keyboard.alternate-keys ul>li.is-pressed,.ML__keyboard.alternate-keys ul>li.is-active{background:var(--keyboard-alternate-background-active);color:var(--keyboard-alternate-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard.alternate-keys ul>li.small-button{width:42px;height:42px;margin:2px;background:#fbfbfb}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,0.24)}.ML__keyboard.alternate-keys ul>li .warning{min-height:60px;min-width:60px;background:#cd0030;color:white;padding:5px;display:flex;align-items:center;justify-content:center;border-radius:5px}.ML__keyboard.alternate-keys ul>li .warning:hover,.ML__keyboard.alternate-keys ul>li .warning.is-pressed,.ML__keyboard.alternate-keys ul>li .warning.is-active{background:red}.ML__keyboard.alternate-keys ul>li .warning svg.svg-glyph{width:50px;height:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:var(--keyboard-alternate-key-aside-font-size);line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard .ML__keyboard--plate{position:absolute;left:0;bottom:calc(-1 * var(--keyboard-height, 276px));width:100%;margin:0;padding-bottom:env(safe-area-inset-bottom, 0);padding-top:5px;transform:translate(0, 0);opacity:0;visibility:hidden;transition:.28s cubic-bezier(0, 0, .2, 1);transition-property:transform, opacity;touch-action:none;-webkit-user-select:none;user-select:none;pointer-events:all;background-color:var(--keyboard-background);border-top:1px solid var(--keyboard-background-border);font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:16px;font-weight:400;box-sizing:border-box;text-shadow:none;box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23)}.ML__keyboard .ML__keyboard--plate .tex{font-family:'KaTeX_Math',KaTeX_Main,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tex-math{font-family:KaTeX_Math,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tt{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace !important;font-size:var(--keycap-tt-font-size, 30px);font-weight:400}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer{display:none;outline:none}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;width:100%;min-width:736px;max-width:766px}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:20px;width:20px}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{min-width:556px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{width:365px;min-width:365px;max-width:100vw}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.left{position:relative;display:flex;justify-content:flex-start;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.right{display:flex;justify-content:flex-end;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{display:flex;align-items:baseline;justify-content:center;color:var(--keyboard-text);fill:currentColor;background:0;font-size:110%;padding:4px 15px;cursor:pointer;min-height:0;width:max-content;border:none;padding-left:10px;padding-right:10px;margin-top:7px;margin-bottom:8px;margin-left:4px;margin-right:4px;box-shadow:none;border-bottom:2px solid transparent}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled:hover svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled.is-pressed svg{color:var(--keyboard-text);opacity:.2}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{padding-left:4px;padding-right:4px;font-size:90%}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:hover,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-pressed,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-active{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.selected{color:var(--keyboard-text-active);border-bottom-color:var(--keyboard-text-active);padding-bottom:0}.ML__keyboard .ML__keyboard--plate [data-tooltip]{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{position:absolute;display:inline-table;content:attr(data-tooltip);top:inherit;bottom:100%;width:max-content;max-width:200px;padding:8px 8px;background:#616161;color:#fff;text-align:center;z-index:2;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);border-radius:2px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;transition:all .15s cubic-bezier(.4, 0, 1, 1) 1s;opacity:0;transform:scale(.5)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{padding:8px 16px;font-size:16px}}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover::after{opacity:1;transform:scale(1)}.ML__keyboard .ML__keyboard--plate div .rows{border:0;border-collapse:separate;clear:both;margin:auto;display:flex;flex-flow:column;align-items:center}.ML__keyboard .ML__keyboard--plate div .rows>ul{display:flex;flex-flow:row;max-width:100vw;list-style:none;height:var(--keycap-height, 52px);margin:0 0 3px 0;padding:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;--max-width:100px;--margin:6px;margin-right:var(--margin);width:calc(min(var(--max-width), 10vw) - var(--margin));height:var(--keycap-height, 52px);box-sizing:border-box;padding:0;vertical-align:top;text-align:center;float:left;color:var(--keycap-text);fill:currentColor;font-size:var(--keycap-font-size, 20px);background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;cursor:pointer;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .ML__mathlive{pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li:last-child{margin-right:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w0{width:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(min(var(--max-width), 10vw) / 2 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li svg.svg-glyph{padding:8px 0;width:20px;height:20px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:25px;width:25px;min-height:25px;min-width:25px;background:#cd0030;color:white;border-radius:100%;padding:5px;display:flex;align-items:center;justify-content:center;margin-bottom:-2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:16px;height:16px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:16px;width:16px;min-height:16px;min-width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:14px;height:14px}}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.if-wide{display:none}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.is-pressed{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.is-active{transform:translateY(calc(-0.2 * var(--keycap-height, 52px))) scale(1.4, 1.4);z-index:calc(var(--keyboard-zindex, 105) - 5);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.is-active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:18px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:var(--keycap-extra-small-font-size, 14px)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:calc(var(--keycap-extra-small-font-size, 14px) / 1.55)}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{background-color:var(--keycap-modifier-background);border-color:var(--keycap-modifier-border);border-bottom-color:var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-active{color:white}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.w50{font-size:80%;padding-top:10px;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{font-size:9px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:10px;line-height:10px;color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{display:none}}@media (max-width: 768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{--margin:2px;--max-width:74px;--width:34px;min-width:34px}}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{width:calc(10vw - 2px);height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(5vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{width:2px;min-width:2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{font-size:65%}}@media (prefers-color-scheme:dark){.ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:#303030}}body[theme='dark'] .ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:hsl(var(--hue), 19%, 38%)}";function pc(n,a,e){let i,o;e.default&&(n.dataset.command=JSON.stringify(e.default)),e.alt&&(n.dataset.commandAlt=JSON.stringify(e.alt)),e.shift&&(n.dataset.commandShift=JSON.stringify(e.shift)),e.pressed&&(n.dataset.commandPressed=JSON.stringify(e.pressed)),e.pressAndHoldStart&&(n.dataset.commandPressAndHoldStart=JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&(n.dataset.commandPressAndHoldEnd=JSON.stringify(e.pressAndHoldEnd)),mo(n,"pointerdown:passive",s=>{if(1!==s.buttons)return;s.stopPropagation(),i=Date.now(),n.classList.add("is-pressed");let r=s.target;r.hasPointerCapture(s.pointerId)&&r.releasePointerCapture(s.pointerId);let l=n.getAttribute("data-command-pressed");l&&a(JSON.parse(l));let c=n.getAttribute("data-command-press-and-hold-start");c&&(o&&clearTimeout(o),o=setTimeout(()=>{n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),a(JSON.parse(c)))},300))}),mo(n,"pointerenter",s=>{let r=s.target;r.hasPointerCapture(s.pointerId)&&r.releasePointerCapture(s.pointerId),1===s.buttons&&n.classList.add("is-pressed")}),mo(n,"pointercancel",()=>n.classList.remove("is-pressed")),mo(n,"pointerleave",()=>n.classList.remove("is-pressed")),mo(n,"pointerup",s=>{let r=n.classList.contains("is-pressed");n.classList.remove("is-pressed"),n.classList.add("is-active"),setTimeout(()=>n.classList.remove("is-active"),150);let l=Date.now()>=i&&!r?n.getAttribute("data-command-press-and-hold-end"):null;!l&&s.altKey&&(l=n.getAttribute("data-command-alt")),!l&&s.shiftKey&&(l=n.getAttribute("data-command-shift")),l||(l=n.getAttribute("data-command")),l&&a(JSON.parse(l)),s.stopPropagation(),s.preventDefault()})}function Tr(){var n;let a=document.querySelector("#mathlive-alternate-keys-panel");return a&&(a.classList.remove("is-visible"),a.innerHTML=""),null==(n=Ss.scrim)||n.close(),!1}var Hp={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;\u2260\u2208",classes:"tex",layers:["symbols"]}},Wd={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'\\char"0190'],"\\rho ":["&#x3A1",'\\char"3A1'],"\\tau ":["&#x3A4;",'\\char"3A4'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'\\char"399'],"\\omicron ":["&#x039F;",'\\char"39F'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'\\char"391'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'\\char"397'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'\\char"39A'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'\\char"396'],"\\chi ":["&Chi;",'\\char"3A7'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'\\char"392'],"\\nu ":["&Nu;",'\\char"39D'],"\\mu ":["&Mu;",'\\char"39C']},Ar={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[".",",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",class:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",class:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div","\\%"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\lessgtr","\\nless","\\nleq","\\lesssim","\\precsim","\\prec","\\nprec","\\preccurlyeq","\\lessdot"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\gtrless","\\ngtr","\\ngeq","\\gtrsim","\\succsim","\\succ","\\nsucc","\\succcurlyeq","\\gtrdot"],in:["\\owns"],"!in":["\\backepsilon"],subset:["\\subseteq","\\nsubset","\\nsubseteq"],superset:["\\supseteq","\\nsupset","\\nsupseteq"],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\log_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],underline:["\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"],overline:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}"],xleftarrows:["\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xLeftarrow{#@}","\\xleftharpoonup{#@}","\\xleftharpoondown{#@}","\\xtwoheadleftarrow{#@}","\\xhookleftarrow{#@}","\\xtofrom{#@}","\\xleftequilibrium{#@}","\\xrightleftarrows{#@}"],xrightarrows:["\\xrightarrow{#@}","\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xRightarrow{#@}","\\xrightharpoonup{#@}","\\xrightharpoondown{#@}","\\xtwoheadrightarrow{#@}","\\xrightleftharpoons{#@}","\\xhookrightarrow{#@}","\\xmapsto{#@}","\\xrightequilibrium{#@}","\\xrightleftarrows{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"\u2153 em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"\xbd em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>',command:"deleteAll"}],"->|":[]},He={},SL={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='\\exponentialE' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-latex='\\imaginaryI' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='#@^{2}' data-latex='x^2'></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}' data-latex='x^\\placeholder'></li>\n                <li class='keycap tex small' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap small' data-alt-keys='int' data-latex='\\int_0^\\infty'></li>\n                <li class='keycap' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' >,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='xleftarrows' data-latex='\\leftarrow' ></li>\n                <li class='keycap tex small' data-alt-keys='xrightarrows' data-latex='\\rightarrow' ></li>\n                <li class='keycap tex' data-alt-keys='overline' data-latex='\\overline{#@}' data-aside='overline'></li>\n                <li class='keycap tex' data-alt-keys='underline' data-latex='\\underline{#@}' data-aside='underline'></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n\n                <li class='keycap tex' data-alt-keys='in' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!in' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='superset' data-insert='\\supset '>&#x2283;</li>\n\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\left| #0 \\right|' data-latex='\\left| #? \\right|' data-aside='abs'></li>\n\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-latex='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"\\\\char\\\"391\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"0190'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A1'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A4'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"399'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39F'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='\\char\"391'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"397'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39A'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\char\"396'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A7'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='\\char\"392'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39D'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39C'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\cos'></li>\n                <li class='fnbutton' data-latex='\\cos^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log'></li>\n                <li class='fnbutton' data-latex='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-latex='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-latex='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\tan'></li>\n                <li class='fnbutton' data-latex='\\tan^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log_{#?}'></li>\n                <li class='fnbutton' data-latex='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?}' data-latex='x^{#?}'></li>\n                <li class='fnbutton' data-insert='_{#?}' data-latex='x_{#?}'></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#@} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function $p(n,a){n=n.replace(/(^|[^\\])#@/g,"$1#?");let e=Qa(),i=new Tt("root",e);return i.body=mi(n,e,{parseMode:"math",args:a}),oa(Ql(gs(new Nt(i.render(new fe({registers:e.registers},{fontSize:5},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function OL(n,a,e){var i,o,s;let r="<div class='left'>",l=a.replace(/\s+/g," ").split(" ");if(l.length>1){let c=At(At({},Hp),null!=(i=n.customVirtualKeyboards)?i:{});for(let u of l){if(!c[u]){console.error('MathLive: Unknown virtual keyboard "',u,'"');break}r+="<div class='",r+=u===e?"selected ":c[u].command?"action ":"layer-switch ",r+=(null!=(o=c[u].classes)?o:"")+"'",c[u].tooltip&&(r+="data-tooltip='"+(null!=(s=Ea(c[u].tooltip))?s:c[u].tooltip)+"' "),u!==e&&("string"==typeof c[u].command?r+=`data-command='"${c[u].command}"'`:Array.isArray(c[u].command)&&(r+=`data-command='${JSON.stringify(c[u].command)}'`),c[u].layer&&(r+="data-layer='"+c[u].layer+"'")),r+=">"+c[u].label+"</div>"}}return r+="</div>",r+="<div class='ML__toolbar-action right'></div>",r}function EL(n,a){let e="";if("none"===n.virtualKeyboardToolbar)return"";let i=[];null!=a&&a.model.selectionIsCollapsed?i.push("undo","redo","pasteFromClipboard"):i.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let o={undo:`<div class='action ${!1===a?.canUndo()?"disabled":""}'\n          data-command='"undo"'\n          data-tooltip='${Ea("tooltip.undo")}'>\n          <svg><use xlink:href='#svg-undo' /></svg>\n      </div>`,redo:`<div class='action ${!1===a?.canRedo()?"disabled":""}'\n          data-command='"redo"'\n          data-tooltip='${Ea("tooltip.redo")}'>\n          <svg><use xlink:href='#svg-redo' /></svg>\n      </div>`,cutToClipboard:`\n        <div class='action'\n            data-command='"cutToClipboard"'\n            data-tooltip='${Ea("tooltip.cut to clipboard")}'>\n            <svg><use xlink:href='#svg-cut' /></svg>\n        </div>\n    `,copyToClipboard:`\n        <div class='action'\n            data-command='"copyToClipboard"'\n            data-tooltip='${Ea("tooltip.copy to clipboard")}'>\n            <svg><use xlink:href='#svg-copy' /></svg>\n        </div>\n    `,pasteFromClipboard:`\n        <div class='action'\n            data-command='"pasteFromClipboard"'\n            data-tooltip='${Ea("tooltip.paste from clipboard")}'>\n            <svg><use xlink:href='#svg-paste' /></svg>\n        </div>\n    `};return e+=i.map(s=>o[s]).join(""),e}function Kp(n,a,e){var i,o;for(let s of a){let r;s.getAttribute("data-latex")?r=$p(s.getAttribute("data-latex").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):s.getAttribute("data-insert")&&""===s.innerHTML?r=$p(s.getAttribute("data-insert").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):s.getAttribute("data-content")&&(r=s.getAttribute("data-content").replace(/&quot;/g,'"')),s.getAttribute("data-aside")&&(r=(r??"")+"<aside>"+s.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),void 0!==r&&(s.innerHTML=n.options.createHTML(r)),s.getAttribute("data-classes")&&s.classList.add(s.getAttribute("data-classes"));let l=null==(i=s.getAttribute("data-insert"))?void 0:i.replace(/&quot;/g,'"');l&&Wd[l]&&(s.dataset.shifted=Wd[l][0],s.dataset.shiftedCommand=JSON.stringify(["insertAndUnshiftKeyboardLayer",Wd[l][1]]));let c,u=s.getAttribute("data-command");if(u)if(/^[a-zA-Z]+$/.test(u))c=u;else try{c=JSON.parse(u)}catch{}else c=s.getAttribute("data-insert")?["insert",s.getAttribute("data-insert"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:s.getAttribute("data-latex")?["insert",s.getAttribute("data-latex"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",null!=(o=s.getAttribute("data-key"))?o:s.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}];if(c){e&&(c=[e,c]);let d={default:c},m=s.getAttribute("data-alt-keys");m&&He[m]&&(d={default:c,pressAndHoldStart:["showAlternateKeys",m],pressAndHoldEnd:"hideAlternateKeys"}),pc(s,p=>n.executeCommand(p),d)}}}function ML(n,a){var e,i,o,s;let r={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},l=n.virtualKeyboardLayout;if("auto"===l){let p=vr();p&&(l=p.virtualLayout),(!l||"auto"===l)&&(l=null!=(e={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[Ye.locale.slice(0,2)])?e:"qwerty")}let d,c=null!=(i=r[l])?i:r.qwerty,u=a;u=u.replace(/<arrows\/>/g,'\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToPreviousChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-left" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToPreviousChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-left\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToNextChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-right" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToNextChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-right\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","commit"]\'>\n        <svg class="svg-glyph"><use xlink:href=\'#svg-commit\' /></svg></li>');let m=u.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;m;){d="";let p=m[2].match(/[a-zA-Z][a-zA-Z\d-]*=(['"])(.*?)\1/g),b={};if(p)for(let C of p){let I=C.match(/([a-zA-Z][a-zA-Z\d-]*)=(['"])(.*?)\2/);I&&(b[I[1]]=I[3])}let y=c[b.name];if(y||(y=r.qwerty[b.name]),y)for(let C of y){let I=null!=(o=b.class)?o:"";I&&(I=` ${I}`),"~"===C?(d+="<li class='action font-glyph bottom right ",d+=y.length-(y.match(/ /g)||[]).length/2==10?"w10":"w15",d+='\' data-shifted=\'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deleteBackward"]\'\n                        ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>'):" "===C?d+="<li class='separator w5'></li>":"^"===C?d+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+b["shift-layer"]+'\'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>':"/"===C?d+="<li class='keycap"+I+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":"*"===C?d+="<li class='keycap"+I+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===C?d+="<li class='keycap"+I+"' data-alt-keys='-' data-key='-'>&#x2212;</li>":"."===C?d+="<li class='keycap"+I+"' data-alt-keys='.' data-command='\"insertDecimalSeparator\"'>"+(null!=(s=n.decimalSeparator)?s:".")+"</li>":I.includes("tt")?d+=`<li class='keycap${I}' data-alt-keys='${C}' data-command='["typedText","${C}",{"mode":"latex", "focus":true, "feedback":true}]'>${C}</li>`:d+="<li class='keycap"+I+"' data-alt-keys='"+C+"'>"+C+"</li>"}else console.error("MathLive: Unknown roman keyboard row:",b.name);u=u.replace(new RegExp(m[1]+m[2]+m[3]),d),m=u.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return u}function hc(n){Tr();let a=n.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(a)for(let e of a){let i=e.getAttribute("data-unshifted-content");i&&(e.innerHTML=n.options.createHTML(i),e.dataset.unshiftedContent="");let o=e.getAttribute("data-unshifted-command");o&&(e.dataset.command=o,e.dataset.unshiftedCommand="")}return!1}function ZL(n){return Object.keys(n).map(a=>`${a} {${function LL(n){return"string"==typeof n?n:Object.entries(n).map(([a,e])=>`${a}:${e} !important`).join(";")}(n[a])}}`).join("")}function Yp(n,a){Sr(n),Tr(),hc(n);let e=n?.element.querySelectorAll(".keyboard-layer"),i=!1;for(let o of e)if(o.dataset.layer===a){i=!0;break}if(i)for(let o of e)o.dataset.layer===a?o.classList.add("is-visible"):o.classList.remove("is-visible");return n.focusMathfield(),!0}function Sr(n,a=""){let e=n.options.virtualKeyboardContainer;if(!e||!n.stateWillChange(!0))return!1;if(n.element?n.element.classList.add("is-visible"):n.buildAndAttachElement(a),!n.visible){let i=Sn();i.visibleVirtualKeyboard&&Vd(i.visibleVirtualKeyboard),i.visibleVirtualKeyboard=n;let o=e.style.paddingBottom;n.originalContainerBottomPadding=o,e.style.paddingBottom=o?`calc(${o} + var(--keyboard-height, 276px) - 1px)`:"calc(var(--keyboard-height, 276px) - 1px)"}return setTimeout(()=>{var i;null==(i=n.element)||i.classList.add("is-visible"),n.focusMathfield()},1),n.visible=!0,n.stateChanged(),!1}function Vd(n){var a,e,i;let o=n.options.virtualKeyboardContainer;return!o||!n.stateWillChange(!1)||(n.element&&(Sn().visibleVirtualKeyboard=void 0,n.disable(),Tr(),n.visible=!1,null==(a=n.coreStylesheet)||a.release(),n.coreStylesheet=null,null==(e=n.virtualKeyboardStylesheet)||e.release(),n.virtualKeyboardStylesheet=null,null==(i=n._element)||i.remove(),n._element=void 0,null!==n.originalContainerBottomPadding&&(o.style.paddingBottom=n.originalContainerBottomPadding)),n.visible=!1,n.stateChanged()),!1}function gc(n,a,e){"function"==typeof a&&(e=a,a=1/0),void 0===a&&(a=1/0);let i=n.position,o=!1,s="";for(;!o;){let r=n.at(i);o=0===a||void 0===r||"math"!==r.mode||!(/mord|textord|mpunct/.test(r.type)||"mop"===r.type&&/[a-zA-Z]+/.test(r.value))||!r.hasEmptyBranch("superscript")||!r.hasEmptyBranch("subscript")||"function"==typeof e&&!e(r),o||(r.mode="text",r.command=r.value,r.verbatimLatex=void 0,s+=r.value),i-=1,a-=1}an(n,{data:s,inputType:"insertText"})}function Or(n,a,e){"function"==typeof a&&(e=a,a=1/0),void 0===a&&(a=1/0);let i=n.position,o=!1,s=[];for(;!o;){let r=n.at(i);o=0===a||!r||r.isFirstSibling||"text"!==r.mode||" "===r.value||e&&!e(r),o||(s.push(r.serialize({defaultMode:"math"})),r.mode="math"),i-=1,a-=1}Xd(n),an(n,{data:un(s),inputType:"insertText"})}function Xd(n){var a;let e=n.position-1;for(;e>=0&&"math"===(null==(a=n.at(e))?void 0:a.mode);)e-=1;if(!(e<0)&&"text"===n.at(e).mode&&" "===n.at(e).value&&"math"===n.at(e-1).mode){n.at(e-1).parent.removeChild(n.at(e-1));let i=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,n.position-=1,n.suppressChangeNotifications=i,an(n,{inputType:"deleteContent"})}}hi({showAlternateKeys:function AL(n,a){var e,i;let o=He[a],s=document.createElement("div");s.setAttribute("aria-hidden","true"),s.className="ML__keyboard alternate-keys"+(n.element.classList.contains("material")?" material":""),s.id="mathlive-alternate-keys-panel",s.style.width=o.length>=14?"236px":o.length>=7?"286px":4===o.length||2===o.length?"146px":1===o.length?"86px":"146px",s.style.height="auto";let r="";for(let u of o)r+="<li","string"==typeof u?r+=' data-latex="'+u.replace(/"/g,"&quot;")+'"':(u.latex&&(r+=' data-latex="'+u.latex.replace(/"/g,"&quot;")+'"'),u.content&&(r+=' data-content="'+u.content.replace(/"/g,"&quot;")+'"'),u.insert&&(r+=' data-insert="'+u.insert.replace(/"/g,"&quot;")+'"'),u.command&&(r+="string"==typeof u.command?` data-command="${u.command.replace(/"/g,"&quot;")}"`:" data-command='"+JSON.stringify(u.command).replace(/"/g,"&quot;")+"'"),u.aside&&(r+=` data-aside="${u.aside.replace(/"/g,"&quot;")}"`),u.class&&(r+=` data-classes="${u.class}"`)),r+=">",r+="string"==typeof u?u:null!=(e=u.label)?e:"",r+="</li>";r="<ul>"+r+"</ul>",s.innerHTML=n.options.createHTML(r),Kp(n,[...s.querySelectorAll("li")],"performAlternateKeys"),Ss.scrim||(Ss.scrim=new Ss),Ss.scrim.open({root:n.options.virtualKeyboardContainer,child:s});let c=(null==(i=n?.element)?void 0:i.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+a+'"]'))?.getBoundingClientRect();if(c){c.top-s.clientHeight<0&&(s.style.width="auto",o.length<=6?s.style.height="56px":o.length<=12?s.style.height="108px":o.length<=18?s.style.height="205px":s.classList.add("compact"));let u=(c.top-s.clientHeight+5).toString()+"px",d=Math.max(0,Math.min(window.innerWidth-s.offsetWidth,(c.left+c.right-s.offsetWidth)/2))+"px";s.style.transform="translate("+d+","+u+")",s.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),hi({shiftKeyboardLayer:function PL(n){let a=n?.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(a)for(let e of a){if(e.dataset.unshiftedContent)return!1;let i=e.getAttribute("data-shifted");if(i||/^[a-z]$/.test(e.innerHTML)){e.dataset.unshiftedContent=e.innerHTML,i||(i=e.innerHTML.toUpperCase()),e.innerHTML=n.options.createHTML(i);let o=e.getAttribute("data-command");if(o){e.dataset.unshiftedCommand=o;let s=e.getAttribute("data-shifted-command");if(s)e.dataset.command=s;else{let r=JSON.parse(o);Pn(r)&&(r[1]=r[1].toUpperCase()),e.dataset.command=JSON.stringify(r)}}}}return!1}},{target:"virtual-keyboard"}),hi({hideAlternateKeys:()=>Tr(),performAlternateKeys:function NL(n,a){return Tr(),n.executeCommand(a)},switchKeyboardLayer:(n,a)=>Yp(n,a),unshiftKeyboardLayer:n=>hc(n),insertAndUnshiftKeyboardLayer:function DL(n,a){return n.executeCommand(["insert",a]),hc(n),!0}},{target:"virtual-keyboard"}),hi({toggleVirtualKeyboardAlt:function jL(n){let a=!1;return null!=n&&n.element&&(a=n?.element.classList.contains("material"),n.disable()),Sr(n,a?"":"material"),!1},toggleVirtualKeyboardShift:function qL(n){var a,e,i;n.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[n.options.virtualKeyboardLayout];let o=null!=(i=null==(e=null==(a=n?.element)?void 0:a.querySelector("div.keyboard-layer.is-visible"))?void 0:e.id)?i:"";return n&&n.disable(),Sr(n),o&&Yp(n,o),!1}},{target:"virtual-keyboard"}),hi({toggleVirtualKeyboard:(n,a)=>function FL(n,a){return n.visible?Vd(n):Sr(n,a),!1}(n,a),hideVirtualKeyboard:n=>Vd(n),showVirtualKeyboard:(n,a)=>Sr(n,a)},{target:"virtual-keyboard"});var t_,Gp="#mathlive-keystroke-caption-panel{visibility:hidden;background:var(--secondary, hsl(var(--hue, 212), 19%, 26%));border-color:var(--secondary-border, hsl(0,0%,91%));box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23);text-align:center;border-radius:6px;padding:16px;position:absolute;z-index:1;display:flex;flex-direction:row-reverse;justify-content:center;--keystroke:white;--on-keystroke:#555;--keystroke-border:#f7f7f7}@media (prefers-color-scheme:dark){body:not([theme='light']) #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}}body[theme='dark'] #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}#mathlive-keystroke-caption-panel>span{min-width:14px;margin:0 8px 0 0;padding:4px;background-color:var(--keystroke);color:var(--on-keystroke);fill:currentColor;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:1em;border-radius:6px;border:2px solid var(--keystroke-border)}",e_=null,n_=null;function Wp(n){return n.keystrokeCaption||(n.keystrokeCaption=np("mathlive-keystroke-caption-panel"),void 0===t_&&(t_=Ho(Gp).toString(36)),e_=$o(null,Gp,t_),n_=$o(null,Oo,Ho(Oo).toString(36))),n.keystrokeCaption}function $L(n){if(!n||n.length>1)return null;let a=n[0];return a instanceof $n&&"("===a.leftDelim&&")"===a.rightDelim?a.removeBranch("body"):null}function fc(n){if(n){for(let a=0;n[a];a++){let e=n[a];if(e instanceof $n&&"("===e.leftDelim){let i=0,o=0,s=0;for(let r=0;e.body[r];r++)"genfrac"===e.body[r].type&&(i++,o=r),s++;0===s&&1===i&&(n[a]=e.body[o])}}for(let a of n){for(let e of a.branches)if(!a.hasEmptyBranch(e)){fc(a.branch(e));let i=$L(a.branch(e));i&&a.setChildren(i,e)}if(a instanceof on)for(let e of a.cells)fc(e)}}}function Vp(n){if(!n)return[];let a=[];for(let e of n){for(let i of e.branches)if(!e.hasEmptyBranch(i)){let o=Vp(e.branch(i));a.push(...o)}e instanceof fn&&a.push(e)}return a}function Xp(n){return!!/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(n.type)&&!(n.isExtensibleSymbol||n.isFunction)}function i_(n,a,e){let i=n.at(n.position),{parent:o}=i,s=o instanceof $n?o.leftDelim+o.rightDelim:"";if("\\lbrace\\rbrace"===s&&(s="{}"),"\\{\\}"===s&&(s="{}"),"\\lparen\\rparen"===s&&(s="()"),"{}"===s&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(a))return dn.insert("math",n,"\\,\\middle"+a+"\\, ",{format:"latex",style:e}),!0;if(("{"===a||"\\{"===a)&&(a="\\lbrace"),("}"===a||"\\}"===a)&&(a="\\rbrace"),"["===a&&(a="\\lbrack"),"]"===a&&(a="\\rbrack"),ur[a]){let l=o;if("leftright"===l.type&&l.firstChild===i&&("?"===l.leftDelim||"."===l.leftDelim))return l.leftDelim=a,l.isDirty=!0,!0;if(!(o instanceof $n&&"|"===o.leftDelim)){if(dn.insert("math",n,`\\left${a}\\right?`,{format:"latex",style:e}),"first"!==i.lastSibling.type){let c=n.offsetOf(i.lastSibling),u=n.extractAtoms([n.position,c]);n.at(n.position).body=u,n.position-=1}return!0}}let r="";if(Object.keys(ur).forEach(l=>{a===ur[l]&&(r=l)}),r){if(o instanceof $n&&i.isLastSibling)return o.isDirty=!0,o.rightDelim=a,n.position+=1,an(n,{data:a,inputType:"insertText"}),!0;let c,l=n.offsetOf(i.firstSibling);for(c=n.position;c>=l;c--){let m=n.at(c);if(m instanceof $n&&"?"===m.rightDelim)break}let u=n.at(c);if(c>=l&&u instanceof $n)return u.rightDelim=a,u.addChildren(n.extractAtoms([c,n.position]),i.treeBranch),n.position=c,an(n,{data:a,inputType:"insertText"}),!0;if(o instanceof $n&&"?"===o.rightDelim)return o.isDirty=!0,o.rightDelim=a,o.parent.addChildren(n.extractAtoms([n.position,n.offsetOf(i.lastSibling)]),o.treeBranch),n.position=n.offsetOf(o),an(n,{data:a,inputType:"insertText"}),!0;let d=o.parent;return!!(d instanceof $n&&"?"===d.rightDelim&&n.at(n.position).isLastSibling)&&(n.position=n.offsetOf(d),i_(n,a,e))}return!1}function th(n,a,e){var i,o,s,r;let{model:l}=n;!function LI(n){var a,e;if(!n||"Unidentified"===n.key||"Dead"===n.key)return;let i=n.shiftKey&&n.altKey?3:n.altKey?2:n.shiftKey?1:0;for(let o of xr)(null==(a=o.mapping[n.code])?void 0:a[i])===n.key?o.score+=1:null!=(e=o.mapping[n.code])&&e[i]&&(o.score=0);xr.sort((o,s)=>s.score-o.score)}(e);let c=vr();if(n.keyboardLayout!==c.id&&(n.keyboardLayout=c.id,n._keybindings=void 0),clearTimeout(n.inlineShortcutBufferFlushTimer),n.inlineShortcutBufferFlushTimer=0,function BL(n,a){if(n.options.readOnly||!n.keystrokeCaptionVisible)return;let e=Wp(n),i=n.element.getBoundingClientRect();e.style.left=`${i.left}px`,e.style.top=i.top-64+"px",e.innerHTML=n.options.createHTML("<span>"+(Id(a)||a)+"</span>"+e.innerHTML),e.style.visibility="visible",setTimeout(()=>{e.childNodes.length>0&&e.childNodes[e.childNodes.length-1].remove(),0===e.childNodes.length&&(e.style.visibility="hidden")},3e3)}(n,a),e.defaultPrevented)return n.flushInlineShortcutBuffer(),!1;let u,m,d="";if(!n.options.readOnly){if("math"===n.mode)if("[Backspace]"===a)n.inlineShortcutBuffer.pop(),n.flushInlineShortcutBuffer({defer:!0});else if(Bp(e)){let y=mc(e),C=[...null!=(o=null==(i=n.inlineShortcutBuffer[n.inlineShortcutBuffer.length-1])?void 0:i.keystrokes)?o:[],y];n.inlineShortcutBuffer.push({state:l.getState(),keystrokes:C,leftSiblings:YL(n)});let I=0,D="";for(;!u&&I<C.length;)m=n.inlineShortcutBuffer.length-(C.length-I),D=C.slice(I).join(""),u=Cd(n.inlineShortcutBuffer[m].leftSiblings,D,n.options.inlineShortcuts),!u&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(D)&&(u=n.options.onInlineShortcut(n,D)),I+=1;n.flushInlineShortcutBuffer({defer:!0})}else n.flushInlineShortcutBuffer();if(n.options.smartMode){let y=n.mode;u?n.mode="math":function UL(n,a,e){if(n.smartModeSuppressed)return!1;let{model:i}=n;if(!i.at(i.position).isLastSibling||!e||!Bp(e))return!1;let o=mc(e);if(!i.selectionIsCollapsed)return!("text"!==n.mode||!/[/_^]/.test(o));let s=function QL(n){let a="",e=n.position,i=!1;for(;!i;){let o=n.at(e);i=!(o&&("text"===o.mode||"math"===o.mode&&/mord|textord|mpunct/.test(o.type))),i||(a=o.value+a),e-=1}return a}(i)+o;if("text"===n.mode){if("Esc"===a||/[/\\]/.test(o))return!0;if(/[\^_]/.test(o))return/(^|\s)[a-zA-Z][^_]$/.test(s)&&Or(i,1),!0;let r={")":"(","}":"{","]":"["}[o],{parent:l}=i.at(i.position);if(r&&l instanceof $n&&l.leftDelim===r)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(s))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(o))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(s))return Or(i,1),!1;if(/\D\.[^\d\s]$/.test(s)){Or(i,1);let c=i.at(i.position);return c.value="\u22c5",c.style.variant="normal",c.command="\\cdot",c.verbatimLatex=void 0,an(i,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(s)||/\.\d$/.test(s)||/\([\d+\-.]$/.test(s))return Or(i,1),!0;if(/\([a-z][,;]$/.test(s))return Or(i,2),!0;if(/[\d+\-=><*|]$/.test(o))return Xd(i),!0}else{if("[Space]"===a)return gc(i,void 0,r=>/[a-z][:,;.]$/.test(r.value)),!0;if(/[a-zA-Z]{3,}$/.test(s)&&!/(dxd|abc|xyz|uvw)$/.test(s))return gc(i,void 0,r=>/[a-zA-Z]/.test(r.value)),!0;if(/(^|\W)(if)$/i.test(s))return gc(i,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(s)&&!/(\u03b1\u03b2\u03b3)$/.test(s))return gc(i,void 0,r=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(r.value)),!0;if("?"===o||"."===o&&!/[\d-+]\.$/.test(s))return!0}return!1}(n,a,e)&&(n.mode={math:"text",text:"math"}[n.mode],d=""),n.mode!==y&&(null!=(s=n.host)&&s.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(n.mode=y))}}if(!u){if(d||(d=function NI(n,a,e){if(0===n.length)return"";let i=ac(mp(e));for(let o=n.length-1;o>=0;o--)if(n[o].key===i&&(!n[o].ifMode||n[o].ifMode===a))return n[o].command;return""}(n.keybindings,n.mode,a)),!d&&("[Enter]"===a||"[Return]"===a)){let y=!1;return en(l,{inputType:"insertLineBreak"})&&(n.host&&(y=!n.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),y||e.preventDefault&&(e.preventDefault(),e.stopPropagation()),an(l,{inputType:"insertLineBreak"})),y}if("math"===n.mode){if("[Space]"===a){if(n.flushInlineShortcutBuffer(),n.options.mathModeSpace)return n.snapshot(),dn.insert("math",l,n.options.mathModeSpace,{format:"latex"}),d="",n.dirty=!0,n.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let y=l.at(l.position+1),C=l.at(l.position-1);("text"===y?.mode||"text"===C?.mode)&&(n.snapshot(),dn.insert("text",l," "),n.dirty=!0)}null!=(r=l.at(l.position))&&r.isDigit()&&","===n.options.decimalSeparator&&","===mc(e)&&(d="insertDecimalSeparator")}}if(!u&&!d)return!0;let p=l.at(Math.max(l.position,l.anchor)),{parent:b}=p;if("moveAfterParent"===d&&"leftright"===b?.type&&p.isLastSibling&&n.options.smartFence&&i_(l,".",n.style)&&(d="",yn(n)),n.keyboardDelegate.cancelComposition(),d)n.executeCommand(d);else if(u){let y=At(At({},l.at(l.position).computedStyle),n.style);if(!/^\\({|}|\[|]|@|#|\$|%|&|\^|_|backslash)$/.test(u)){let C=n.mode;dn.insert(n.mode,l,mc(e),{suppressChangeNotifications:!0,style:y}),n.snapshot(),l.setState(n.inlineShortcutBuffer[m].state),n.mode=C}l.deferNotifications({content:!0,selection:!0,data:u??null,type:"insertText"},()=>(dn.insert(n.mode,l,u,{format:"latex",style:y}),Xd(n.model),u.endsWith(" ")&&(n.mode="text",dn.insert("text",l," ",{style:y})),!0)),n.snapshot(),n.dirty=!0,l.announce("replacement")}return n.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function o_(n,a,e){var i;let{model:o}=n;if(n.options.readOnly)return void o.announce("plonk");if((e=e??{}).focus&&n.focus(),e.feedback&&(n.options.keypressVibration&&Yu()&&navigator.vibrate(3),n.playSound("keypress")),"string"==typeof e.mode&&n.switchMode(e.mode),e.simulateKeystroke){let c=a.charAt(0),u=new KeyboardEvent("keypress",{key:c});if(!th(n,c,u))return}let s=o.at(o.position),r=At(At({},s.computedStyle),n.style);o.selectionIsCollapsed||(o.deleteAtoms(Vi(o.selection)),n.snapshot());let l=qm(a);if("latex"===n.mode)o.deferNotifications({content:!0,selection:!0,data:a,type:"insertText"},()=>{Zd(n);for(let c of l)dn.insert("latex",o,c);sc(n)});else if("text"===n.mode)for(let c of l)dn.insert("text",o,c,{style:r});else if("math"===n.mode)for(let c of l){let u={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[c];" "===c&&n.options.mathModeSpace&&(u=["insert",n.options.mathModeSpace]),u?n.executeCommand(u):/\d/.test(c)&&n.options.smartSuperscript&&"superscript"===s.treeBranch&&"mop"!==(null==(i=s.parent)?void 0:i.type)&&s.hasNoSiblings?(dn.insert("math",o,c,{style:r}),Dp(o)):("mord"===s.type&&/[a-zA-Z]/.test(s.value)&&/[a-zA-Z]/.test(c)&&(s.style.variant&&(r.variant=s.style.variant),s.style.variantStyle&&(r.variantStyle=s.style.variantStyle)),dn.insert("math",o,c,{style:r}))}n.snapshotAndCoalesce(),n.dirty=!0,n.scrollIntoView()}function YL(n){let a=n.model,e=[],i=a.at(Math.min(a.position,a.anchor));for(;"first"!==i.type;)e.push(i),i=i.leftSibling;return e}function eh(n,a){var e,i,o,s,r,l;let c={};"string"==typeof a.color&&(c.verbatimColor=a.color,c.color=null!=(e=n.colorMap(a.color))?e:"none"),"string"==typeof a.backgroundColor&&(c.verbatimBackgroundColor=a.backgroundColor,c.backgroundColor=null!=(i=n.backgroundColorMap(a.backgroundColor))?i:"none"),"string"==typeof a.fontFamily&&(c.fontFamily=a.fontFamily),"string"==typeof a.series&&(c.fontSeries=a.series),"string"==typeof a.fontSeries&&(c.fontSeries=a.fontSeries.toLowerCase()),c.fontSeries&&(c.fontSeries=null!=(o={bold:"b",medium:"m",normal:"m"}[c.fontSeries])?o:c.fontSeries),"string"==typeof a.shape&&(c.fontShape=a.shape),"string"==typeof a.fontShape&&(c.fontShape=a.fontShape.toLowerCase()),c.fontShape&&(c.fontShape=null!=(s={italic:"it",up:"n",upright:"n",normal:"n"}[c.fontShape])?s:c.fontShape);let u=null!=(r=a.size)?r:a.fontSize;return"number"==typeof u?c.fontSize=Math.max(1,Math.min(10,u)):"string"==typeof u&&(c.fontSize=null!=(l={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[u.toLowerCase()])?l:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[u]),c}new class extends dn{constructor(){super("math")}onPaste(n,a){if(!a||!en(n.model,{data:"string"==typeof a?a:null,dataTransfer:"string"==typeof a?null:a,inputType:"insertFromPaste"}))return!1;let e="",i="auto",o="string"!=typeof a?a.getData("application/json+mathlive"):"";if(o)try{let s=JSON.parse(o);if(s&&Array.isArray(s)){n.snapshot();let r=_o(s,n),{model:l}=n;l.selectionIsCollapsed||l.deleteAtoms(Vi(l.selection));let c=l.at(l.position);if(c.parent instanceof on){let u=[],d=[];"first"===r[0].type&&r.shift(),"first"===r[r.length-1].type&&r.pop();for(let y of r)"first"===y.type&&d.length>0?(u.push(d),d=[y]):d.push(y);d.length>0&&u.push(d);let m=Number(c.treeBranch[0]),p=Number(c.treeBranch[1]),b=c.parent.maxColumns;for(;c.parent.colCount-p<u.length&&c.parent.colCount<b;)c.parent.addColumn();c.parent.addChildrenAfter(u[0],c);for(let y=1;y<u.length;y++)p++,p>=b&&(p=0,c.parent.addRowAfter(m),m++),c.parent.setCell(m,p,u[y])}else c.parent.addChildrenAfter(r.filter(u=>"first"!==u.type),c);return l.position=l.offsetOf(r[r.length-1]),an(l,{inputType:"insertFromPaste"}),yn(n),!0}}catch{}if(o="string"!=typeof a?a.getData("application/json"):"",o&&n.computeEngine)try{let s=JSON.parse(o);if("object"==typeof s&&"latex"in s&&s.latex&&(e=s.latex),!e){let r=n.computeEngine.box(s);r&&!r.has("Error")&&(e=r.latex)}e||(i="latex")}catch{}if(!e&&"string"!=typeof a&&(e=a.getData("application/x-latex"),e&&(i="latex")),e||(e="string"==typeof a?a:a.getData("text/plain")),e){let s;return n.snapshot(),[s,e]=Td(e),"auto"===i&&s&&(i="latex"),this.insert(n.model,e,{format:i})&&yn(n),!0}return!1}insert(n,a,e){var i,o;let s="string"==typeof a?a:null!=(o=null==(i=n.mathfield.computeEngine)?void 0:i.box(a).latex)?o:"";if(!e.suppressChangeNotifications&&!en(n,{data:s,inputType:"insertText"}))return!1;if(e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),n.mathfield.smartFence){if(n.selectionIsCollapsed&&"string"==typeof a&&i_(n,a,e.style))return!0}else if("replaceAll"!==e.insertionMode){let{parent:q}=n.at(n.position);if(q instanceof $n&&"?"===q.rightDelim&&n.at(n.position).isLastSibling&&"string"==typeof a&&/^[)}\]|]$/.test(a))return q.isDirty=!0,q.rightDelim=a,n.position+=1,vp(n),an(n,{data:s,inputType:"insertText"}),!0}let{suppressChangeNotifications:r}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let l=n.suppressChangeNotifications;n.suppressChangeNotifications=!0;let c={};if(c[0]="replaceAll"===e.insertionMode?"":n.getValue(n.selection,"latex-unstyled"),c["?"]="\\placeholder{}",c["@"]=c["?"],"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vi(n.selection)),n.at(n.position).isLastSibling||"placeholder"!==n.at(n.position+1).type?"placeholder"===n.at(n.position).type&&n.deleteAtoms([n.position-1,n.position]):n.deleteAtoms([n.position,n.position+1]),c[0])c["@"]=c[0];else if("string"==typeof a&&/(^|[^\\])#@/.test(a)){let q=function KL(n){let a=n.at(n.position);if("text"===a.mode){for(;!a.isFirstSibling&&"text"===a.mode;)a=a.leftSibling;return n.offsetOf(a)}let e=a,i=!1;if("mclose"===a.type){let o=Fm[a.value];for(;!a.isFirstSibling&&("mopen"!==a.type||a.value!==o);)a=a.leftSibling;a.isFirstSibling||(a=a.leftSibling),i=!0}else"leftright"===a.type&&(a=a.leftSibling,i=!0);if(i)for(;!a.isFirstSibling&&(a.isFunction||Xp(a));)a=a.leftSibling;else{let o=[];for(;!a.isFirstSibling&&(Xp(a)||o.length>0);)"mclose"===a.type&&o.unshift(a.value),"mopen"===a.type&&o.length>0&&a.value===Fm[o[0]]&&o.shift(),a=a.leftSibling}return e===a?-1:n.offsetOf(a)}(n);q>=0&&(c["@"]=n.getValue(q,n.position,"latex-unstyled"),n.deleteAtoms([q,n.position]))}c[0]||(c[0]=c["?"]);let u=!1,[m,p]=function HL(n,a,e,i){var o;let s,r=[];if("string"!=typeof a||"math-json"===i.format){if(!n.mathfield.computeEngine)return["math-json",[]];[s,a]=["latex",n.mathfield.computeEngine.box(a).latex],r=mi(a,n.mathfield,{parseMode:"math"})}else"string"==typeof a&&"ascii-math"===i.format?([s,a]=ec(a,{format:"ascii-math",inlineShortcuts:n.mathfield.options.inlineShortcuts}),r=mi(a,n.mathfield,{parseMode:"math"}),"latex"!==s&&n.options.removeExtraneousParentheses&&fc(r)):("auto"===i.format||null!=(o=i.format)&&o.startsWith("latex"))&&("auto"===i.format&&([s,a]=ec(a,{format:"auto",inlineShortcuts:n.mathfield.options.inlineShortcuts})),"latex"===i.format&&([,a]=Td(a)),r=mi(a,n.mathfield,{parseMode:"math",args:e}),"latex"!==i.format&&n.options.removeExtraneousParentheses&&fc(r));return ca(r,i.style),[s??"latex",r]}(n,a,q=>(u=!0,c[q]),e);if(!p)return!1;let b=Vp(p),y=b.filter(q=>q.placeholderId&&!n.mathfield.placeholders.has(q.placeholderId)),C=b.map(q=>q.placeholderId);[...n.mathfield.placeholders.keys()].filter(q=>!C.includes(q)).forEach(q=>{var R;n.mathfield.placeholders.has(q)&&(null==(R=n.mathfield.placeholders.get(q))||R.field.remove(),n.mathfield.placeholders.delete(q))}),y.forEach(q=>{var R,et;q.placeholderId&&n.mathfield.placeholders.has(q.placeholderId);let Q=n.mathfield.options.virtualKeyboardMode;"manual"===Q&&(Q="onfocus");let V=new c_(ge(At({},n.mathfield.options),{virtualKeyboardMode:Q,readOnly:!1})),Y=q.defaultValue?Tt.serialize(q.defaultValue,{defaultMode:"math"}):"";V.value=Y,V.addEventListener("input",()=>{(function FI(n,a){n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new CustomEvent("placeholder-change",{detail:{placeholderId:a},bubbles:!0,composed:!0})),n.suppressChangeNotifications=!1)})(n,q.placeholderId),setTimeout(()=>yn(n.mathfield))}),null==(et=null==(R=n.mathfield.element)?void 0:R.querySelector(".ML__placeholdercontainer"))||et.appendChild(V),n.mathfield.placeholders.set(q.placeholderId,{atom:q,field:V})});let{parent:I}=n.at(n.position);if("latex"!==m&&n.options.removeExtraneousParentheses&&I instanceof $n&&"("===I.leftDelim&&I.hasEmptyBranch("body")&&1===p.length&&"genfrac"===p[0].type){let q=I.parent,R=I.treeBranch;q.removeChild(I),q.setChildren(p,R)}let D=I.hasEmptyBranch("body"),U=n.at(n.position);U.parent.addChildrenAfter(p,U),"latex"===m&&"string"==typeof a&&"root"===I.type&&D&&!u&&(I.verbatimLatex=a),n.suppressChangeNotifications=l;let B=p[p.length-1];if("placeholder"===e.selectionMode){let q=p.reduce((R,et)=>[...R,...et.children.filter(Q=>"placeholder"===Q.type)],[]);if(q.length>0){let R=n.offsetOf(q[0]);n.setSelection(R-1,R),n.announce("move")}else B&&(n.position=n.offsetOf(B))}else"before"===e.selectionMode||("after"===e.selectionMode?B&&(n.position=n.offsetOf(B)):"item"===e.selectionMode&&n.setSelection(n.anchor,n.offsetOf(B)));return an(n,{data:s,inputType:"insertText"}),n.suppressChangeNotifications=r,!0}},hi({undo:n=>(Ja(n,"accept"),n.undo(),!0),redo:n=>(Ja(n,"accept"),n.redo(),!0),scrollIntoView:n=>(n.scrollIntoView(),!0),scrollToStart:n=>(n.field.scroll(0,0),!0),scrollToEnd:n=>{let a=n.field.getBoundingClientRect();return n.field.scroll(a.left-window.scrollX,0),!0},toggleKeystrokeCaption:function RL(n){return n.keystrokeCaptionVisible=!n.keystrokeCaptionVisible,n.keystrokeCaptionVisible?(n.keystrokeCaption=Wp(n),n.keystrokeCaption.innerHTML=""):n.keystrokeCaption&&(n.keystrokeCaption.style.visibility="hidden"),!1},plonk:n=>(n.model.announce("plonk"),!0),switchMode:(n,a,e,i)=>(n.switchMode(a,e,i),!0),insert:(n,a,e)=>n.insert(a,e),typedText:(n,a,e)=>(o_(n,a,e),!0),insertDecimalSeparator:n=>{if("math"===n.mode&&","===n.options.decimalSeparator){let a=n.model;if(a.at(Math.max(a.position,a.anchor)).isDigit())return n.snapshot(),n.insert("{,}",{format:"latex"}),!0}return n.insert("."),!0},commit:n=>{var a;return en(n.model,{inputType:"insertLineBreak"})&&(null==(a=n.host)||a.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),an(n.model,{inputType:"insertLineBreak"})),!0}}),hi({copyToClipboard:n=>(n.focus(),n.model.selectionIsCollapsed&&n.select(),document.queryCommandSupported("copy")?document.execCommand("copy"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1),cutToClipboard:n=>(n.focus(),document.queryCommandSupported("cut")?document.execCommand("cut"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:n=>(n.focus(),document.queryCommandSupported("paste")?document.execCommand("paste"):navigator.clipboard.readText().then(a=>{a&&en(n.model,{inputType:"insertFromPaste",data:a})?(n.snapshot(),n.insert(a)&&(an(n.model,{inputType:"insertFromPaste"}),yn(n))):n.model.announce("plonk")}),!0)},{target:"mathfield",category:"clipboard"}),hi({applyStyle:function GL(n,a){n.flushInlineShortcutBuffer();let e=eh(n,a),{model:i}=n;return i.selectionIsCollapsed?(n.style.fontSeries&&e.fontSeries===n.style.fontSeries&&(e.fontSeries="auto"),e.fontShape&&e.fontShape===n.style.fontShape&&(e.fontShape="auto"),e.color&&e.color===n.style.color&&(e.color="none"),e.backgroundColor&&e.backgroundColor===n.style.backgroundColor&&(e.backgroundColor="none"),e.fontSize&&e.fontSize===n.style.fontSize&&(e.fontSize="auto"),n.style=At(At({},n.style),e)):n.model.deferNotifications({content:!0,type:"insertText"},()=>{i.selection.ranges.forEach(o=>Kd(i,o,e,{operation:"toggle"})),n.snapshot()}),!0}},{target:"mathfield"});var $a=null,Er=0;function nh(n){return n instanceof PointerEvent}function WL(n,a,e){if(n>=e.left&&n<=e.right&&a>=e.top&&a<=e.bottom)return 0;let i=n-(e.left+e.right)/2,o=a-(e.top+e.bottom)/2;return i*i+o*o}function oh(n,a,e,i,o){if(!e.id)return[1/0,null];if(a.has(e.id))return a.get(e.id);let s=fr(n,e);if(!s)return[1/0,null];let r=[1/0,null];if(e.hasChildren&&!e.captureSelection&&i>=s.left&&i<=s.right)for(let l of e.children){let c=oh(n,a,l,i,o);c[0]<=r[0]&&(r=c)}return r[1]||(r=[WL(i,o,s),e]),a.set(e.id,r),r}function VL(n,a,e){let[,i]=oh(n,new Map,n.model.root,a,e);return i}function Mr(n,a,e,i){var o;let s=n.fieldContent.getBoundingClientRect();if(a>s.right||e>s.bottom+8)return n.model.lastOffset;if(a<s.left||e<s.top-8)return 0;(i=i??{}).bias=null!=(o=i.bias)?o:0;let r=VL(n,a,e),l=[],c=r;for(;c;)l.unshift(c),c=c.parent;for(let d of l)if(d.captureSelection){r=d;break}let u=n.model.offsetOf(r);if(u<0)return-1;if(r.leftSibling)if(0===i.bias&&"placeholder"!==r.type){let d=fr(n,r);d&&a<(d.left+d.right)/2&&(u=n.model.offsetOf(r.leftSibling))}else i.bias<0&&(u=n.model.offsetOf(r.leftSibling));return u}new class extends dn{constructor(){super("text")}onPaste(n,a){if(!a)return!1;let e="string"==typeof a?a:a.getData("text/plain");return!(!e||!en(n.model,{inputType:"insertFromPaste",data:e})||(n.snapshot(),this.insert(n.model,e)&&(an(n.model,{inputType:"insertFromPaste"}),yn(n)),0))}insert(n,a,e={}){if(!en(n,{data:a,inputType:"insertText"}))return!1;e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto");let{suppressChangeNotifications:i}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let o=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vi(n.selection));let s=function tZ(n,a){return mi(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),a,{parseMode:"text"})}(a,n.mathfield);if(ca(s,e.style),!s)return!1;let r=n.at(n.position),l=r.parent.addChildrenAfter(s,r);return n.suppressChangeNotifications=o,"before"===e.selectionMode||("item"===e.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),an(n,{data:a,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var a_,s_,xc="mathlive#remote-virtual-keyboard-message";function Ir(n){if("object"!=typeof n)return{};let a={};return n.fontsDirectory&&(a.fontsDirectory=n.fontsDirectory),n.soundsDirectory&&(a.soundsDirectory=n.soundsDirectory),n.virtualKeyboards&&(a.virtualKeyboards=n.virtualKeyboards),n.virtualKeyboardLayout&&(a.virtualKeyboardLayout=n.virtualKeyboardLayout),n.customVirtualKeyboardLayers&&(a.customVirtualKeyboardLayers=n.customVirtualKeyboardLayers),n.customVirtualKeyboards&&(a.customVirtualKeyboards=n.customVirtualKeyboards),n.virtualKeyboardTheme&&(a.virtualKeyboardTheme=n.virtualKeyboardTheme),n.keypressVibration&&(a.keypressVibration=n.keypressVibration),n.keypressSound&&(a.keypressSound=n.keypressSound),n.plonkSound&&(a.plonkSound=n.plonkSound),n.virtualKeyboardToolbar&&(a.virtualKeyboardToolbar=n.virtualKeyboardToolbar),n.targetOrigin&&(a.targetOrigin=n.targetOrigin),n.originValidator&&(a.originValidator=n.originValidator),a}Di()||console.error('MathLive: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var r_=Di()?document.createElement("template"):null;r_&&(r_.innerHTML='<style>\n:host { display: block; position: relative; overflow: hidden auto;}\n:host([hidden]) { display: none; }\n:host([disabled]) { opacity:  .5; }\n:host(:focus), :host(:focus-within) {\n  outline: Highlight auto 1px;    /* For Firefox */\n  outline: -webkit-focus-ring-color auto 1px;\n}\n:host([readonly]), :host([read-only]) { outline: none; }\n</style>\n<div></div><slot style="display:none"></slot>');var je=new WeakMap,po=class extends HTMLElement{constructor(n){super(),l_()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open"}),this.shadowRoot.append(r_.content.cloneNode(!0));let a=this.shadowRoot.querySelector("slot:not([name])");this._slotValue=a.assignedNodes().map(e=>3===e.nodeType?e.textContent:"").join("").trim(),n&&this.setOptions(n),this.shadowRoot.host.addEventListener("pointerdown",e=>this.onPointerDown(),!0),this.shadowRoot.host.addEventListener("focus",()=>{var e;return null==(e=this._mathfield)?void 0:e.focus()},!0),this.shadowRoot.host.addEventListener("blur",()=>{var e;return null==(e=this._mathfield)?void 0:e.blur()},!0)}static get formAssociated(){return l_()}static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","sounds-directory":"string","horizontal-spacing-scale":"string","math-mode-space":"string","inline-shortcut-timeout":"string","keypress-vibration":"on/off","keypress-sound":"string","plonk-sound":"string","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string","use-shared-virtual-keyboard":"boolean","shared-virtual-keyboard-target-origin":"string"}}static get observedAttributes(){return[...Object.keys(po.optionsAttributes),"disabled","readonly","read-only"]}onPointerDown(){window.addEventListener("pointerup",n=>{n.target===this&&this.dispatchEvent(new MouseEvent("click",{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,metaKey:n.metaKey,movementX:n.movementX,movementY:n.movementY,relatedTarget:n.relatedTarget,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey}))},{once:!0})}getPlaceholderField(n){var a;return null==(a=this._mathfield)?void 0:a.getPlaceholderField(n)}addEventListener(n,a,e){return super.addEventListener(n,a,e)}removeEventListener(n,a,e){super.removeEventListener(n,a,e)}get form(){var n;return null==(n=this._internals)?void 0:n.form}get name(){var n;return null!=(n=this.getAttribute("name"))?n:""}get type(){return this.localName}get mode(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.mode)?a:"math"}set mode(n){this._mathfield&&(this._mathfield.mode=n)}get computeEngine(){if(this._mathfield)return this._mathfield.computeEngine}set computeEngine(n){this._mathfield&&this._mathfield.setOptions({computeEngine:n})}get expression(){if(this._mathfield)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._mathfield.expression}set expression(n){var a,e;if(!this._mathfield)return;let i=null!=(e=null==(a=this.computeEngine)?void 0:a.box(n).latex)?e:null;null!==i&&this._mathfield.setValue(i),globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"')}get errors(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.errors)?a:[]}get placeholders(){if(!this._mathfield)return{};let n={};for(let[a,e]of this._mathfield.placeholders)n[a]=e.field;return n}getOptions(n){return this._mathfield?Ts(this._mathfield.options,n):je.has(this)?Ts(Fd(Qd(),je.get(this).options),n):null}getOption(n){return this.getOptions([n])[n]}setOptions(n){if(this._mathfield)this._mathfield.setOptions(n),this._mathfield.placeholders.forEach(a=>{a.field.setOptions(ge(At({},n),{readOnly:!1}))});else if(je.has(this)){let a=At(At({},je.get(this).options),n);je.set(this,ge(At({},je.get(this)),{selection:{ranges:a.readOnly?[[0,0]]:[[0,-1]]},options:a}))}else je.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:n});!function oZ(n){let a=Qd(),e=n.getOptions();Object.keys(po.optionsAttributes).forEach(i=>{let o=Mo(i);"on/off"===po.optionsAttributes[i]?a[o]!==e[o]?n.setAttribute(i,e[o]?"on":"off"):n.removeAttribute(i):a[o]!==e[o]&&("boolean"===po.optionsAttributes[i]?e[o]?n.setAttribute(i,""):n.removeAttribute(i):("string"==typeof e[o]||"number"==typeof e[o])&&n.setAttribute(i,e[o].toString()))})}(this)}executeCommand(n){var a,e;return null!=(e=null==(a=this._mathfield)?void 0:a.executeCommand(n))&&e}getValue(n,a,e){var i,o;if(this._mathfield)return this._mathfield.model.getValue(n,a,e);if(je.has(this)){let s,r,l;if(uc(n)?([s,r]=n.ranges[0],l=a):cc(n)?([s,r]=n,l=a):la(n)&&la(a)?(s=n,r=a,l=e):(s=0,r=-1,l=n),(void 0===l||"latex"===l)&&0===s&&-1===r)return null!=(o=null!=(i=je.get(this).value)?i:this.textContent)?o:""}return""}setValue(n,a){if(this._mathfield&&void 0!==n)return a||(a={suppressChangeNotifications:!0}),void this._mathfield.setValue(n,a);if(je.has(this)){let i=je.get(this).options;return void je.set(this,{value:n,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i})}let e=vc(this);je.set(this,{value:n,selection:{ranges:e.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:e})}hasFocus(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.hasFocus())&&a}get virtualKeyboardState(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.virtualKeyboardState)?a:"hidden"}set virtualKeyboardState(n){this._mathfield&&(this._mathfield.virtualKeyboardState=n)}focus(){super.focus()}blur(){var n;null==(n=this._mathfield)||n.blur(),super.blur()}select(){var n;null==(n=this._mathfield)||n.select()}insert(n,a){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.insert(n,a))&&i}applyStyle(n,a){var e;return null==(e=this._mathfield)?void 0:e.applyStyle(n,a)}get caretPoint(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.getCaretPoint())?a:null}set caretPoint(n){var a;n&&(null==(a=this._mathfield)||a.setCaretPoint(n.x,n.y))}setCaretPoint(n,a){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.setCaretPoint(n,a))&&i}offsetFromPoint(n,a,e){return this._mathfield?Mr(this._mathfield,n,a,e):-1}hitboxFromOffset(n){if(!this._mathfield)return null;let a=this._mathfield.model.at(n);if(!a)return null;let e=fr(this._mathfield,a);return e?new DOMRect(e.left,e.top,e.right-e.left,e.bottom-e.top):null}resetUndo(){var n;null==(n=this._mathfield)||n.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}connectedCallback(){var n,a,e;l_()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let i=this.shadowRoot.querySelector("slot:not([name])");try{this._style=i.assignedElements().filter(s=>"style"===s.tagName.toLowerCase()).map(s=>s.textContent).join("")}catch{}if(this._style){let s=document.createElement("style");s.textContent=this._style,this.shadowRoot.appendChild(s)}try{let s=i.assignedElements().filter(r=>"script"===r.tagName.toLowerCase()&&"application/json"===r.type).map(r=>r.textContent).join("");s&&this.setOptions(JSON.parse(s))}catch{}let o="";if(o=this.hasAttribute("value")?null!=(n=this.getAttribute("value"))?n:"":null!=(a=i?.assignedNodes().map(s=>3===s.nodeType?s.textContent:"").join("").trim())?a:"",this._mathfield=new class{constructor(n,a){var e,i,o;this.focusBlurInProgress=!1,this.stylesheets=[],this.audioBuffers={},this.options=Fd(ge(At({},Qd()),{registers:$m(this)}),a.readOnly?ge(At({},a),{virtualKeyboardMode:"off"}):At({plonkSound:"plonk.wav",keypressSound:{spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"}},a)),"auto"===this.options.virtualKeyboardMode&&(this.options.virtualKeyboardMode=wm()?"onfocus":"off"),void 0!==this.options.computeEngine&&(this._computeEngine=a.computeEngine),a.eventSink&&(this.host=a.eventSink),this.placeholders=new Map,this.element=n,n.mathfield=this,null!==this.options.fontsDirectory&&zd(this.options.fontsDirectory),a_||(a_=Ho(Oo).toString(36)),this.stylesheets.push($o(n,Oo,a_)),s_||(s_=Ho(Ap).toString(36)),this.stylesheets.push($o(n,Ap,s_));let s=[];if(s.push(`<span contenteditable=true class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=${null!=(e=n.tabIndex)?e:0}></span>`),s.push("<span part=container class=ML__container aria-hidden=true>"),s.push("<span part=content class=ML__content></span>"),s.push(`<div part='virtual-keyboard-toggle' class=ML__virtual-keyboard-toggle role=button data-ML__tooltip="${Ea("tooltip.toggle virtual keyboard")}">`),s.push(null!=(i=this.options.virtualKeyboardToggleGlyph)?i:Tp),s.push("</div>"),s.push("<div class=ML__placeholdercontainer></div>"),s.push("</span>"),s.push("<div class=ML__sr-only>"),s.push("<span role=status aria-live=assertive aria-atomic=true></span>"),s.push("<span class=accessibleMathML></span>"),s.push("</div>"),this.element.innerHTML=this.options.createHTML(s.join("")),!this.element.children)return void console.error("%cMathLive: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include 'runtimeCompiler: true' in your Vue configuration. Theremay a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",l=>l.stopImmediatePropagation(),{capture:!1}),this.field.addEventListener("wheel",this,{passive:!1}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this):this.field.addEventListener("mousedown",this),this.virtualKeyboardToggle=this.element.querySelector("[part=virtual-keyboard-toggle]"),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),pc(this.virtualKeyboardToggle,l=>this.executeCommand(l),{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.accessibleMathML=this.element.querySelector(".accessibleMathML"),this.keystrokeCaptionVisible=!1,this.popoverVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.mode=Ud(this.options),this.smartModeSuppressed=!1,this.style={},this.options.readOnly?this.element.classList.add("ML__isReadOnly"):this.element.classList.remove("ML__isReadOnly"),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.blurred=!0,this.keyboardDelegate=function kL(n,a,e){let i=null,o=null,s=!1,r=!1,l=!1;return n.addEventListener("keydown",c=>{s||"Process"===c.key||"CapsLock"===c.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(c.code)?i=null:(i=c,o=null,e.onKeystroke(Rp(c),c)||(i=null,n.textContent=""))},!0),n.addEventListener("keypress",c=>{s||(i&&o&&e.onKeystroke(Rp(i),i),o=c)},!0),n.addEventListener("compositionstart",c=>{n.textContent="",s=!0,e.onCompositionStart(c.data)},!0),n.addEventListener("compositionupdate",c=>{s&&e.onCompositionUpdate(c.data)},!0),n.addEventListener("compositionend",c=>{n.textContent="",s&&(s=!1,e.onCompositionEnd(c.data))},!0),n.addEventListener("beforeinput",c=>c.stopImmediatePropagation()),n.addEventListener("input",c=>{var u;if(!s&&(n.textContent="","insertCompositionText"!==c.inputType)){if("insertFromPaste"===c.inputType)return c.preventDefault(),void c.stopPropagation();e.onInput(null!=(u=c.data)?u:""),c.preventDefault(),c.stopPropagation()}}),n.addEventListener("paste",c=>{n.focus(),n.textContent="",e.onPaste(c)||c.preventDefault(),c.stopImmediatePropagation()},!0),n.addEventListener("cut",c=>e.onCut(c),!0),n.addEventListener("copy",c=>e.onCopy(c),!0),n.addEventListener("blur",c=>{var u,d,m,p;if((null==(d=null==(u=c.relatedTarget)?void 0:u._mathfield)?void 0:d.element)===a)return n.focus(),c.preventDefault(),void c.stopPropagation();let b=null==(m=Ss.scrim)?void 0:m.state;return"open"===b||"opening"===b||c.relatedTarget===c.target.getRootNode().host?(c.preventDefault(),void c.stopPropagation()):void(l||r||(l=!0,i=null,o=null,null==(p=e.onBlur)||p.call(e),l=!1,c.stopPropagation()))},!0),n.addEventListener("focus",c=>{var u;l||r||(r=!0,null==(u=e.onFocus)||u.call(e),r=!1,c.stopPropagation())},!0),{cancelComposition:()=>{s&&(n.blur(),requestAnimationFrame(()=>n.focus()))},blur:()=>{"function"==typeof n.blur&&n.blur()},focus:()=>{!r&&"function"==typeof n.focus&&n.focus()},hasFocus:()=>function CL(){var n;let a=document.activeElement;for(;null!=(n=a?.shadowRoot)&&n.activeElement;)a=a.shadowRoot.activeElement;return a}()===n,setAriaLabel:c=>n.setAttribute("aria-label",c),setValue:c=>{var u;n.innerText=c,n.style.top="-1000px",null==(u=window.getSelection())||u.selectAllChildren(n)},moveTo:(c,u)=>{n.style.top=`${u}px`,n.style.left=`${c}px`}}}(this.element.querySelector(".ML__keyboard-sink"),this.element,{onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),onInput:l=>o_(this,l),onKeystroke:(l,c)=>th(this,l,c),onCompositionStart:l=>this.onCompositionStart(l),onCompositionUpdate:l=>this.onCompositionUpdate(l),onCompositionEnd:l=>this.onCompositionEnd(l),onCut:l=>{this.options.readOnly?this.model.announce("plonk"):en(this.model,{inputType:"deleteByCut"})&&(this.snapshot(),dn.onCopy(this,l),Eo(this.model,Vi(this.model.selection),"deleteByCut"),yn(this))},onCopy:l=>dn.onCopy(this,l),onPaste:l=>{let c=!this.options.readOnly;return c&&(c=dn.onPaste(this.model.at(this.model.position).mode,this,l.clipboardData)),c||this.model.announce("plonk"),l.preventDefault(),l.stopPropagation(),c}}),window.addEventListener("resize",this),window.addEventListener("blur",()=>{Ra(this)&&this.hasFocus()&&window.addEventListener("focus",l=>{l.target===window&&Ra(this)&&this.focus()},{once:!0})},{capture:!0}),this.model=new class{constructor(n,a,e){this.options=n,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.mathfield=e,this.suppressChangeNotifications=!1,this.root=new Tt("root",e,{mode:n.mode}),this.root.body=[],this.setListeners(a)}get atoms(){return this.root.children}get selection(){return this._selection}set selection(n){this.setSelection(n)}setSelection(n,a){return this.deferNotifications({selection:!0},()=>{let e=this.normalizeSelection(n,a);if(void 0===e)throw new TypeError("Invalid selection");if(1===e.ranges.length&&e.ranges[0][0]===e.ranges[0][1]){let i=e.ranges[0][0];this._position=i,this._anchor=i,this._selection=e}else{let i=Vi(e);"backward"===e.direction?[this._position,this._anchor]=i:[this._anchor,this._position]=i;let o=this.at(i[0]+1),s=this.at(i[1]);Tt.commonAncestor(o,s),this._selection={ranges:[i],direction:e.direction}}})}setPositionHandlingPlaceholder(n){var a,e,i;"placeholder"===(null==(a=this.at(n))?void 0:a.type)?this.setSelection(n-1,n):"placeholder"===(null==(i=null==(e=this.at(n))?void 0:e.rightSibling)?void 0:i.type)?this.setSelection(n,n+1):this.position=n}getState(){return{content:this.root.toJson(),selection:this.selection}}setState(n,a){var e;let i=this.suppressChangeNotifications;this.suppressChangeNotifications=null==(e=a?.suppressChangeNotifications)||e;let o={};"undo"===a?.type&&(o={inputType:"historyUndo"}),"redo"===a?.type&&(o={inputType:"historyRedo"}),en(this,o)&&(this.root=_o(n.content,this.mathfield),this.selection=n.selection,an(this,o)),this.suppressChangeNotifications=i}get position(){return this._position}set position(n){this.setSelection(n,n)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(n="forward"){return this._anchor!==this._position&&(this.position="backward"===n?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(n){return this.atoms[n]}offsetOf(n){return this.atoms.indexOf(n)}getSiblingsRange(n){let a=this.at(n),{parent:e}=a;if(!e)return[0,this.lastOffset];let i=a.parent.branch(a.treeBranch);return[this.offsetOf(i[0]),this.offsetOf(i[i.length-1])]}getBranchRange(n,a){let e=this.at(n).branch(a);return[this.offsetOf(e[0]),this.offsetOf(e[e.length-1])]}getAtoms(n,a,e){let o,s,i=e??{};if(uc(n)){if(i=a??{},n.ranges.length>1)return n.ranges.reduce((u,d)=>[...u,...this.getAtoms(d,i)],[]);n=n.ranges[0]}if(la(n)){if(o=n,!la(a))return[];s=a}else[o,s]=n,i=a??{};if(!Number.isFinite(o))return[];void 0===i.includeChildren&&(i.includeChildren=!1),o<0&&(o=this.lastOffset-o+1),s<0&&(s=this.lastOffset-s+1);let r=Math.min(o,s)+1,l=Math.max(o,s);if(1===r&&l===this.lastOffset)return[this.root];let c=[];for(let u=r;u<=l;u++){let d=this.atoms[u];Ip(this,d,r,l)&&c.push(d)}return i.includeChildren||(c=c.filter(u=>{let d=!1,{parent:m}=u;for(;m&&!d;)d=Ip(this,m,r,l),m=m.parent;return!d})),c}getAllAtoms(n){let a=[],e=this.lastOffset;for(let i=n;i<=e;i++)a.push(this.atoms[i]);for(let i=0;i<n;i++)a.push(this.atoms[i]);return a}extractAtoms(n){let a=this.getAtoms(n);1===a.length&&"root"===a[0].type&&(a=a[0].children);for(let e of a)e.parent.removeChild(e);return a}deleteAtoms(n){this.extractAtoms(n),this.position=n[0]}atomToString(n,a){let e=a??"latex";if(e.startsWith("latex"))return ia.serialize([n],{expandMacro:"latex-expanded"===e,skipStyles:"latex-unstyled"===e,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===e)return De(n,this.mathfield.options);if("spoken"===e)return ws(n,this.mathfield.options);if("spoken-text"===e){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="";let o=ws(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,o}if("spoken-ssml"===e||"spoken-ssml-with-highlighting"===e){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="ssml";let o=ws(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,o}if("math-json"===e){if(!this.mathfield.computeEngine)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),'["Error", "compute-engine-not-available"]';try{let i=this.mathfield.computeEngine.parse(Tt.serialize(n,{expandMacro:!1,defaultMode:"math"}));return JSON.stringify(i.json)}catch(i){return JSON.stringify(["Error",`'${i.toString()}'`])}}return"ascii-math"===e?wn(n):(console.error("MathLive: Unknown format :",e),"")}getValue(n,a,e){if(void 0===n)return this.atomToString(this.root,"latex");if("string"==typeof n)return this.atomToString(this.root,n);let i,o;if(la(n)&&la(a)?(i=[this.normalizeRange([n,a])],o=e??"latex"):cc(n)?(i=[this.normalizeRange(n)],o=a):uc(n)?(i=n.ranges,o=a):(i=[],o="latex"),o.startsWith("latex")){let s={expandMacro:"latex-expanded"===o,skipStyles:"latex-unstyled"===o,defaultMode:this.mathfield.options.defaultMode};return un(i.map(r=>Tt.serialize(this.getAtoms(r),s)))}return i.map(s=>this.getAtoms(s).map(r=>this.atomToString(r,o)).join("")).join("")}extendSelection(n){let a=this._anchor;if("forward"===n){let i=this._position;do{let o=this.at(i+1);if(null!=o&&o.inCaptureSelection){for(;!o.captureSelection;)o=o.parent;i=this.offsetOf(o?.lastChild)+1}else i+=1}while(i<=this.lastOffset&&this.at(i).isFirstSibling);return i===a-1&&"first"===this.at(a).type&&(i=a),this.extendSelectionTo(a,i)}let e=this._position-1;if(e<0)return!1;for(;e>=0&&this.at(e).isLastSibling;){let i=this.at(e);if(null!=i&&i.inCaptureSelection){for(;!i.captureSelection;)i=i.parent;e=this.offsetOf(i.firstChild)-1}else e-=1}return e<0&&(e=0),e===a+1&&"first"===this.at(e).type&&(a=e),this.extendSelectionTo(a,e)}extendSelectionTo(n,a){return this.deferNotifications({selection:!0},()=>{let e=this.normalizeRange([n,a]),[i,o]=e,{parent:s}=this.at(o);if(s&&("genfrac"===s.type||"msubsup"===s.type))for(;s!==this.root&&$d(this,s,[i,o]);)o=this.offsetOf(s),s=s.parent;for(s=this.at(i).parent;s!==this.root&&$d(this,s,[i,o]);)i=this.offsetOf(s.leftSibling),s=s.parent;if(s=this.at(o).parent,"genfrac"===s?.type)for(;s!==this.root&&$d(this,s,[i,o]);)o=this.offsetOf(s),s=s.parent;this._position=this.normalizeOffset(a),this._selection={ranges:[[i,o]],direction:"none"}})}setListeners(n){this.listeners=n}announce(n,a,e=[]){var i,o;(null==(o=null==(i=this.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("announce",{detail:{command:n,previousPosition:a,atoms:e},cancelable:!0,bubbles:!0,composed:!0})))||o)&&function oL(n,a,e,i){let o="";"plonk"===a?(n.playSound("plonk"),n.flushInlineShortcutBuffer()):"delete"===a?o=Cs(n.options,"deleted: ",i):"focus"===a||a.includes("move")?o=function aL(n,a){if(Number.isNaN(a))return"";let e=n.at(a);if(!e||e.treeDepth<=n.at(n.position).treeDepth)return"";let i="",o=e.parent,s=n.at(n.position).parent;for(;o!==n.root&&o!==s;)i+=`out of ${Mp(o)};`,o=o.parent;return i}(n.model,e)+(n.model.selectionIsCollapsed?"":"selected: ")+function sL(n,a){if(!n.selectionIsCollapsed)return Cs(a,"",n.getAtoms(n.selection));let e="",i=n.at(n.position),o=Mp(i);return i.isFirstSibling&&(e=(o?"start of "+o:"unknown")+": "),i.isLastSibling?i.isFirstSibling||(e+=o?"end of "+o:"unknown"):e+=Cs(a,"",i),e}(n.model,n.options):"replacement"===a?o=Cs(n.options,"",n.model.at(n.model.position)):"line"===a?(o=Cs(n.options,"",n.model.root),n.keyboardDelegate.setAriaLabel("after: "+o)):o=i?Cs(n.options,a+" ",i):a;let s=n.ariaLiveText.textContent.includes("\xa0")?" \u202f ":" \xa0 ";n.ariaLiveText.textContent=o+s}(this.mathfield,n,a,e)}deferNotifications(n,a){let e=this._selection,i=this._anchor,o=this._position,s=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;let r=this.root.changeCounter;a();let l=this.root.changeCounter!==r,c=i!==this._anchor||o!==this._position||"different"===function H9(n,a){if(n.direction===a.direction){let e=n.ranges.length;if(a.ranges.length===e){let i=0;for(;i<e&&"equal"===$9(n.ranges[i],a.ranges[i]);)i++;return i===e?"equal":"different"}}return"different"}(this._selection,e);return this.suppressChangeNotifications=s,n.content&&l&&an(this,{inputType:n.type}),n.selection&&c&&vp(this),l||c}normalizeOffset(n){return n>0?n=Math.min(n,this.lastOffset):n<0&&(n=this.lastOffset+n+1),n}normalizeRange(n){let[a,e]=n;return a=this.normalizeOffset(a),e=this.normalizeOffset(e),a<e?[a,e]:[e,a]}normalizeSelection(n,a){var e;let i;if(la(n)){let o=this.normalizeOffset(n);if(la(a)){let s=this.normalizeOffset(a);i=o<=s?{ranges:[[o,s]],direction:"none"}:{ranges:[[s,o]],direction:"backward"}}else i={ranges:[[o,o]],direction:"none"}}else if(cc(n)){let o=this.normalizeOffset(n[0]),s=this.normalizeOffset(n[1]);i=o<=s?{ranges:[[o,s]],direction:"none"}:{ranges:[[s,o]],direction:"backward"}}else uc(n)&&(i={ranges:n.ranges.map(o=>this.normalizeRange(o)),direction:null!=(e=n.direction)?e:"none"});return i}}({mode:Ud(this.options),macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onSelectionDidChange:()=>this._onSelectionDidChange()},this),this.undoManager=new class{constructor(n){this.recording=!1,this.canCoalesce=!1,this.model=n,this.reset()}get maximumDepth(){return 1e3}reset(){this.stack=[],this.index=-1}startRecording(){this.recording=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{suppressChangeNotifications:!1,type:"undo"}),this.index-=1,this.canCoalesce=!1,!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{suppressChangeNotifications:!1,type:"redo"}),this.canCoalesce=!1,!0)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(){return!!this.recording&&(this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),this.canCoalesce=!1,!0)}snapshotAndCoalesce(){if(!this.recording)return!1;this.canCoalesce&&this.pop();let n=this.snapshot();return this.canCoalesce=!0,n}}(this.model);let r=null!=(o=a.value)?o:this.element.textContent;r&&(r=r.trim()),r&&dn.insert("math",this.model,r,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),this.undoManager.startRecording(),this.undoManager.snapshot(),za&&!this.options.locale.startsWith(za.locale)&&hp(this.options.locale),yn(this),document.fonts.ready.then(()=>Ha(this))}get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}get colorMap(){return n=>{var a;let e;return"function"==typeof(null==(a=this.options)?void 0:a.colorMap)&&(e=this.options.colorMap(n)),e||(e=Ll(n)),e}}get backgroundColorMap(){return n=>{var a;let e;return"function"==typeof(null==(a=this.options)?void 0:a.backgroundColorMap)&&(e=this.options.backgroundColorMap(n)),!e&&"function"==typeof this.options.colorMap&&(e=this.options.colorMap(n)),e||(e=Gu(n)),e}}get fractionNavigationOrder(){var n,a;return null!=(a=null==(n=this.options)?void 0:n.fractionNavigationOrder)?a:"numerator-denominator"}get placeholderSymbol(){var n,a;return null!=(a=null==(n=this.options)?void 0:n.placeholderSymbol)?a:"\u25a2"}get smartFence(){var n,a;return null!=(a=null==(n=this.options)?void 0:n.smartFence)&&a}get letterShapeStyle(){var n,a;return null!=(a=null==(n=this.options)?void 0:n.letterShapeStyle)?a:"tex"}get registers(){var n,a;return null!=(a=null==(n=this.options)?void 0:n.registers)?a:{}}getDefinition(n,a="math"){return yd(n,a)}getMacro(n){return Km(n,this.options.macros)}get virtualKeyboard(){if(!this.options.readOnly)return this._virtualKeyboard||(this._virtualKeyboard=this.options.useSharedVirtualKeyboard||Sn().sharedVirtualKeyboard?new class{constructor(n){var a,e,i;this.targetOrigin=null!=(e=null!=(a=n.targetOrigin)?a:globalThis.origin)?e:"*",this.originValidator=null!=(i=n.originValidator)?i:"same-origin",this._mathfield=n.mathfield}get visible(){var n,a;return null!=(a=null==(n=Sn().sharedVirtualKeyboard)?void 0:n.visible)&&a}set visible(n){Sn().sharedVirtualKeyboard&&(Sn().sharedVirtualKeyboard.visible=n)}setOptions(n){this.sendMessage("set-options",{options:JSON.stringify(Ir(n))})}create(){}dispose(){this.disable()}enable(){this.enabled||(this.enabled=!0,globalThis.addEventListener("message",this),this.updateToolbar())}disable(){this.enabled&&(globalThis.removeEventListener("message",this),this.enabled=!1)}executeCommand(n){var a,e,i;return"virtual-keyboard"===wr(n)?(this._mathfield&&(this.setOptions(Ir(this._mathfield.getOptions())),("showVirtualKeyboard"===n||"toggleVirtualKeyboard"===n&&!1===this.visible)&&(null==(e=(a=this._mathfield).focus)||e.call(a))),this.sendMessage("execute-command",{command:n}),requestAnimationFrame(()=>this.updateToolbar()),!1):null==(i=this._mathfield)?void 0:i.executeCommand(n)}focusMathfield(){}blurMathfield(){}stateWillChange(n){return!0}stateChanged(){}updateToolbar(){var n;null==(n=Sn().sharedVirtualKeyboard)||n.updateToolbar(this._mathfield)}handleEvent(n){var a,e,i,o;if("message"===n.type&&n.data&&n.data.type===xc){if(!function rp(n,a){return"*"===n||"none"===a||("same-origin"===a?!globalThis.origin||n===globalThis.origin:"function"==typeof a&&a(n))}(n.origin,this.originValidator))throw new Error(`Message from unknown origin (${n.origin}) cannot be handled`);let{action:s}=n.data;if("execute-command"===s){if("virtual-keyboard"===wr(n.data.command)&&window===globalThis.parent)return;this.executeCommand(n.data.command)}else"update-state"===s?(this.visible=n.data.state.visible,this.height=n.data.state.height):"focus"===s?null==(e=null==(a=this._mathfield)?void 0:a.focus)||e.call(a):"blur"===s?null==(o=null==(i=this._mathfield)?void 0:i.blur)||o.call(i):"update-toolbar"===s&&this.updateToolbar()}}sendMessage(n,a={}){return!!globalThis.parent&&(globalThis.parent.postMessage(At({type:xc,action:n},a),this.targetOrigin),!0)}}({targetOrigin:this.options.sharedVirtualKeyboardTargetOrigin,originValidator:this.options.originValidator,mathfield:this}):new class{constructor(n,a){this.originalContainerBottomPadding=null,this.options=n,this.visible=!1,this._mathfield=a,this.coreStylesheet=null,this.virtualKeyboardStylesheet=null}setOptions(n){var a,e;let i="";if(this._element){let o=this._element.querySelector("div.keyboard-layer.is-visible");o&&(i=null!=(a=o.getAttribute("data-layer"))?a:""),this._element.remove(),this._element=void 0}if(this.options=n,this.visible){this.buildAndAttachElement(n.virtualKeyboardTheme);let o=this.element.querySelector(`.keyboard-layer[data-layer="${i}"]`);o&&(null==(e=this.element.querySelector(".keyboard-layer.is-visible"))||e.classList.remove("is-visible"),o.classList.add("is-visible")),this.element.classList.add("is-visible")}}get element(){return this._element}set element(n){var a;this._element!==n&&(null==(a=this._element)||a.remove(),this._element=n)}get visible(){return this._visible}set visible(n){this._visible=n}get height(){var n,a;return null!=(a=null==(n=this.element)?void 0:n.offsetHeight)?a:0}buildAndAttachElement(n){var a;this.element=function IL(n,a){var e,i,o,s;let r='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n    <symbol id="svg-delete-backward" viewBox="0 0 576 512">\n      <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>\n    </symbol>\n\n    <symbol id="svg-shift" viewBox="0 0 384 512">\n      <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>\n    </symbol>\n\n    <symbol id="svg-commit" viewBox="0 0 512 512">\n      <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>\n    </symbol>\n\n    <symbol id="svg-command" viewBox="0 0 640 512">\n      <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n    </symbol>\n\n    <symbol id="svg-undo" viewBox="0 0 512 512">\n      <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n    </symbol>\n    <symbol id="svg-redo" viewBox="0 0 512 512">\n      <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-arrow-left" viewBox="0 0 320 512">\n      <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>\n    </symbol>\n    <symbol id="svg-arrow-right" viewBox="0 0 320 512">\n      <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>\n    </symbol>\n    <symbol id="svg-tab" viewBox="0 0 448 512">\n      <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>\n    <symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>\n    <symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>\n    </symbol>\n    <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n      <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n    </symbol>\n    <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n      <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n    </symbol>\n    <symbol id="svg-trash" viewBox="0 0 448 512">\n      <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n    </symbol>\n</svg>\n        ';n.create(),Ar["foreground-color"]=[];for(let q of Object.keys(Il))Ar["foreground-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+Il[q]+'"></span>',command:["applyStyle",{color:q}]});Ar["background-color"]=[];for(let q of Object.keys(Ml))Ar["background-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+Ml[q]+'"></span>',command:["applyStyle",{backgroundColor:q}]});He=At({},Ar);for(let q of Object.keys(He))He[q]=He[q].slice();for(let q=0;q<26;q++){let R="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[q];He[R]||(He[R]=[]),He[R].unshift({latex:"\\mathbb{"+R+"}",aside:"blackboard",insert:"\\mathbb{"+R+"}"}),He[R].unshift({latex:"\\mathbf{"+R+"}",aside:"bold",insert:"\\mathbf{"+R+"}"}),He[R].unshift({latex:"\\mathsf{"+R+"}",aside:"sans",insert:"\\mathsf{"+R+"}"}),He[R].unshift({latex:"\\mathtt{"+R+"}",aside:"monospace",insert:"\\mathtt{"+R+"}"}),He[R].unshift({latex:"\\mathcal{"+R+"}",aside:"calligraphy",insert:"\\mathcal{"+R+"}"}),He[R].unshift({latex:"\\mathfrak{"+R+"}",aside:"fraktur",insert:"\\mathfrak{"+R+"}"})}for(let q=0;q<=26;q++){let R="abcdefghijklmnopqrstuvwxyz"[q];He[R]||(He[R]=[]),He[R].unshift({latex:"\\mathsf{"+R+"}",aside:"sans",insert:"\\mathsf{"+R+"}"}),He[R].unshift({latex:"\\mathbf{"+R+"}",aside:"bold",insert:"\\mathbf{"+R+"}"}),He[R].unshift({latex:"\\mathtt{"+R+"}",aside:"monospace",insert:"\\mathtt{"+R+"}"}),He[R].unshift({latex:"\\mathfrak{"+R+"}",aside:"fraktur",insert:"\\mathfrak{"+R+"}"})}for(let q=0;q<10;q++){let R="0123456789"[q];He[R]||(He[R]=[]),He[R].unshift({latex:"\\mathbf{"+R+"}",aside:"bold",insert:"\\mathbf{"+R+"}"}),He[R].unshift({latex:"\\mathsf{"+R+"}",aside:"sans",insert:"\\mathsf{"+R+"}"}),He[R].unshift({latex:"\\mathtt{"+R+"}",aside:"monospace",insert:"\\mathtt{"+R+"}"}),He[R].unshift({latex:"\\mathcal{"+R+"}",aside:"script",insert:"\\mathcal{"+R+"}"}),He[R].unshift({latex:"\\mathfrak{"+R+"}",aside:"fraktur",insert:"\\mathfrak{"+R+"}"})}let d=n.options.virtualKeyboards;d||(d="all"),d=d.replace(/\ball\b/i,"numeric functions symbols roman greek");let m=At(At({},SL),null!=(e=n.options.customVirtualKeyboardLayers)?e:{}),p=At(At({},Hp),null!=(i=n.options.customVirtualKeyboards)?i:{}),b=d.replace(/\s+/g," ").split(" ");for(let q of b){if(!p[q]){console.error('MathLive: Unknown virtual keyboard "'+q+'"');continue}let R=null!=(o=p[q].layers)?o:[];p[q].layer&&R.push(p[q].layer),R=[...new Set(R)];for(let et of R){if(!m[et]){console.error('MathLive: Unknown virtual keyboard layer: "',et,'"');break}if("object"==typeof m[et]){let V=m[et],Y="";if("string"==typeof V.styles?Y+=`<style>${V.styles}</style>`:"object"==typeof V.styles&&(Y+=`<style>${ZL(V.styles)}</style>`),V.backdrop&&(Y+=`<div class='${V.backdrop}'>`),V.container&&(Y+=`<div class='${V.container}'>`),V.rows){Y+="<div class='rows'>";for(let at of V.rows){Y+="<ul>";for(let tt of at){if(Y+="<li",tt.class){let rt=tt.class;tt.layer&&!/layer-switch/.test(rt)&&(rt+=" layer-switch"),/separator/.test(rt)||(rt+=" keycap"),Y+=` class="${rt}"`}else Y+=' class="keycap"';if(tt.key&&(Y+=` data-key="${tt.key}"`),tt.command&&("string"==typeof tt.command?Y+=` data-command='"${tt.command}"'`:(Y+=" data-command='",Y+=JSON.stringify(tt.command),Y+="'")),tt.insert&&(Y+=` data-insert="${tt.insert}"`),tt.latex&&(Y+=` data-latex="${tt.latex}"`),tt.aside&&(Y+=` data-aside="${tt.aside}"`),tt.variants){let rt=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);He[rt]=tt.variants,Y+=` data-alt-keys="${rt}"`}tt.shifted&&(Y+=` data-shifted="${tt.shifted}"`),tt.shiftedCommand&&(Y+=` data-shifted-command="${tt.shiftedCommand}"`),tt.layer&&(Y+=` data-layer="${tt.layer}"`),Y+=`>${tt.label?tt.label:""}</li>`}Y+="</ul>"}Y+="</div>"}V.container&&(Y+="</div>"),V.backdrop&&(Y+="</div>"),m[et]=Y}r+=`<div tabindex="-1" class='keyboard-layer' data-layer='${et}'>`,r+=`<div class='keyboard-toolbar' role='toolbar'>${OL(n.options,d,q)}</div>`;let Q=m[et];"string"==typeof Q&&(r+=ML(n.options,Q)),r+="</div>"}}let y=document.createElement("div");y.className="ML__keyboard",a?y.classList.add(a):n.options.virtualKeyboardTheme&&y.classList.add(n.options.virtualKeyboardTheme);let C=document.createElement("div");C.className="ML__keyboard--plate",C.innerHTML=n.options.createHTML(r),y.appendChild(C);let I=y.querySelectorAll(".ML__toolbar-action");if(I)for(let q of I)q.addEventListener("click",R=>{var et,Q;let V=R.target,Y="";for(;V&&!Y;)Y=null!=(et=V?.getAttribute("data-command"))?et:"",V=null!=(Q=V?.parentElement)?Q:null;Y&&n.executeCommand(JSON.parse(Y))});let D=y.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton");for(let q of D)q.id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);Kp(n,[...D]);let U=y.querySelectorAll(".layer-switch");for(let q of U)q.classList.contains("shift")?pc(q,R=>n.executeCommand(R),{pressed:"shiftKeyboardLayer",default:["switchKeyboardLayer",q.getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):pc(q,R=>n.executeCommand(R),{default:["switchKeyboardLayer",q.getAttribute("data-layer")]});let B=y.querySelectorAll(".keyboard-layer");for(let q of B)q.addEventListener("mousedown",R=>R.preventDefault());return null==(s=B[0])||s.classList.add("is-visible"),y}(this,n??""),mo(this.element,"mousedown",()=>this.focusMathfield()),null==(a=this.options.virtualKeyboardContainer)||a.appendChild(this.element)}handleEvent(n){if(this.element)switch(n.type){case"mouseup":case"blur":case"touchend":case"touchcancel":document.body.style.userSelect="",hc(this)}}focusMathfield(){var n,a;null==(a=null==(n=this._mathfield)?void 0:n.focus)||a.call(n)}blurMathfield(){var n,a;null==(a=null==(n=this._mathfield)?void 0:n.blur)||a.call(n)}stateWillChange(n){var a,e;return(null==(e=null==(a=this._mathfield)?void 0:a.host)?void 0:e.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:n},bubbles:!0,cancelable:!0,composed:!0})))??!0}stateChanged(){var n,a;null==(a=null==(n=this._mathfield)?void 0:n.host)||a.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1,composed:!0}))}updateToolbar(n){var a;let e=null==(a=this._element)?void 0:a.querySelectorAll(".ML__toolbar-action");if(e)for(let i of e)i.innerHTML=EL(this.options,n)}executeCommand(n){var a,e,i;let o,s=[];return Pn(n)?(o=n[0],s=n.slice(1)):o=n,o=o.replace(/-\w/g,r=>r[1].toUpperCase()),"virtual-keyboard"===(null==(a=Ko[o])?void 0:a.target)?Ko[o].fn(this,...s):null!=(i=null==(e=this._mathfield)?void 0:e.executeCommand(n))&&i}create(){this.virtualKeyboardStylesheet||(Gd||(Gd=Ho(zp).toString(36)),this.virtualKeyboardStylesheet=$o(null,zp,Gd)),this.coreStylesheet||(this.coreStylesheet=$o(null,Oo,Ho(Oo).toString(36))),null!==this.options.fontsDirectory&&zd(this.options.fontsDirectory)}enable(){window.addEventListener("mouseup",this),window.addEventListener("blur",this)}disable(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this)}dispose(){}}(this.options,this)),this._virtualKeyboard}get computeEngine(){var n,a;if(void 0===this._computeEngine){let e=null==(n=globalThis[Symbol.for("io.cortexjs.compute-engine")])?void 0:n.ComputeEngine;e?this._computeEngine=new e:console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._computeEngine&&","===this.options.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(a=this._computeEngine)?a:null}get virtualKeyboardState(){var n;return null!=(n=this.virtualKeyboard)&&n.visible?"visible":"hidden"}set virtualKeyboardState(n){this.virtualKeyboard&&("hidden"===n?this.virtualKeyboard.executeCommand("hideVirtualKeyboard"):"visible"===n&&this.virtualKeyboard.executeCommand("showVirtualKeyboard"))}get keybindings(){var n,a;if(this._keybindings)return this._keybindings;let[e,i]=function qI(n,a){let e=[],i=[];for(let o of n)try{let s=jI(o,a);if(s){let r=e.filter(l=>l.key===s.key&&l.ifMode===s.ifMode);if(r.length>0)throw new Error(`Ambiguous key binding ${o.key} (${Ld(o.command)}) matches ${r[0].key} (${Ld(r[0].command)}) with the ${a.displayName} keyboard layout`);e.push(s)}}catch(s){s instanceof Error&&i.push(s.message)}return[e,i]}(this.options.keybindings,null!=(n=vr())?n:pp);return(null==(a=vr())?void 0:a.score)>0&&(this._keybindings=e,i.length>0&&console.error("MathLive: Invalid keybindings for current keyboard layout",i)),e}setOptions(n){var a,e;if(this.options=Fd(this.options,n),"computeEngine"in n&&(this._computeEngine=this.options.computeEngine),this._computeEngine&&"decimalSeparator"in n&&(this._computeEngine.latexOptions.decimalMarker=","===this.options.decimalSeparator?"{,}":"."),this.model.setListeners({onSelectionDidChange:o=>this._onSelectionDidChange()}),this.model.options.macros=this.options.macros,za&&!this.options.locale.startsWith(za.locale)&&hp(this.options.locale),this._keybindings=void 0,("soundsDirectory"in n||"plonkSound"in n||"keypressSound"in n||"spacebarKeypressSound"in n||"returnKeypressSound"in n||"deleteKeypressSound"in n)&&(this.audioBuffers={}),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.options.readOnly?(this.hasFocus()&&"visible"===this.virtualKeyboardState&&this.executeCommand("hideVirtualKeyboard"),this.onBlur(),this.element.classList.add("ML__isReadOnly")):this.element.classList.remove("ML__isReadOnly"),null==(a=this.virtualKeyboard)||a.setOptions(this.options),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),"virtualKeyboardToggleGlyph"in n){let o=null==(e=this.element)?void 0:e.querySelector(".ML__virtual-keyboard-toggle");o&&(o.innerHTML=this.options.createHTML(this.options.virtualKeyboardToggleGlyph))}let i=Tt.serialize(this.model.root,{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in n||this.model.getValue()!==i)&&dn.insert("math",this.model,i,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),yn(this)}getOptions(n){return Ts(this.options,n)}getOption(n){return Ts(this.options,n)}handleEvent(n){if(Ra(this))switch(n.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function ih(n,a){var e;n.atomBoundsCache=new Map;let o,i=n,s=!1,r=!1,l="none";if(a.buttons>1)return;let c=!1,u=!1,d=a.clientX,m=a.clientY,p=Date.now(),b=i.field,y=setInterval(()=>{c?b.scroll({top:0,left:b.scrollLeft-16}):u&&b.scroll({top:0,left:b.scrollLeft+16})},32);function C(U){"PointerEvent"in window?(oc(b,"pointermove",I),oc(b,"pointerup pointercancel",C),U instanceof PointerEvent&&b.releasePointerCapture(U.pointerId)):(oc(window,"mousemove",I),oc(window,"mouseup blur",C)),s=!1,clearInterval(y),n.element.classList.remove("tracking"),U&&U.preventDefault()}function I(U){if(!i.hasFocus())return void C(null);let B=U.clientX,q=U.clientY,R=nh(U)&&"touch"===U.pointerType?20:5;if(Date.now()<p+500&&Math.abs(d-B)<R&&Math.abs(m-q)<R)return U.preventDefault(),void U.stopPropagation();let et=b.getBoundingClientRect();u=B>et.right,c=B<et.left;let Q=o;nh(U)&&(U.isPrimary||(Q=Mr(i,U.clientX,U.clientY,{bias:0})));let V=Mr(i,B,q,{bias:B<=d?B===d?0:-1:1});Q>=0&&V>=0&&(i.model.extendSelectionTo(Q,V),yn(n)),U.preventDefault(),U.stopPropagation()}$a&&Math.abs($a.x-d)<5&&Math.abs($a.y-m)<5&&Date.now()<$a.time+500?(Er+=1,$a.time=p):($a={x:d,y:m,time:p},Er=1);let D=b.getBoundingClientRect();if(d>=D.left&&d<=D.right&&m>=D.top&&m<=D.bottom){if(n.hasFocus()||(l="all",n.focus({scrollIntoView:!1})),n.flushInlineShortcutBuffer(),n.smartModeSuppressed=!1,o=Mr(n,d,m,{bias:0}),o>=0){if(n.element.classList.add("tracking"),a.shiftKey){let U=n.model.selectionIsCollapsed;n.model.extendSelectionTo(n.model.anchor,o),l=yp(n.model)||U?"all":"selection"}else"placeholder"===n.model.at(o).type?(n.model.setSelection(o-1,o),l="selection"):"placeholder"===(null==(e=n.model.at(o).rightSibling)?void 0:e.type)?(n.model.setSelection(o,o+1),l="selection"):(n.model.position=o,l=yp(n.model)?"all":"selection");n.style={},3===a.detail||Er>2?(C(a),(3===a.detail||3===Er)&&(n.model.selection={ranges:[[0,n.model.lastOffset]]},l="all")):s||(s=!0,"PointerEvent"in window?(mo(b,"pointermove",I),mo(b,"pointerup pointercancel",C),a instanceof PointerEvent&&b.setPointerCapture(a.pointerId)):(mo(window,"blur",C),mo(window,"mousemove",I),mo(window,"mouseup",C)),(2===a.detail||2===Er)&&(r=!0,Qp(n.model),l="all"))}}else $a=null;"none"!==l&&(n.model.selectionIsCollapsed&&(l="all"),yn(n)),a.preventDefault()}(this,n);break;case"resize":this.resizeTimer&&cancelAnimationFrame(this.resizeTimer),this.resizeTimer=requestAnimationFrame(()=>Ra(this)&&this.onResize());break;case"wheel":this.onWheel(n);break;default:console.warn("Unexpected event type",n.type)}}dispose(){if(!Ra(this))return;let n=this.element;delete this.element,delete n.mathfield,n.innerHTML=this.model.getValue(),n.removeEventListener("pointerdown",this),n.removeEventListener("mousedown",this),n.removeEventListener("focus",this),n.removeEventListener("blur",this),window.removeEventListener("resize",this),window.removeEventListener("blur",this,{capture:!0}),delete this.accessibleMathML,delete this.ariaLiveText,delete this.field,delete this.fieldContent,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,this._virtualKeyboard&&(this._virtualKeyboard.dispose(),delete this._virtualKeyboard),function JI(n){ip(n.popover),Nd&&Nd.release(),Dd&&Dd.release(),delete n.popover}(this),function zL(n){ip(n.keystrokeCaption),e_&&e_.release(),n_&&n_.release(),delete n.keystrokeCaption}(this),this.stylesheets.forEach(a=>a?.release())}flushInlineShortcutBuffer(n){if(null!=n||(n={defer:!1}),!n.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(n){var a,e;return"virtual-keyboard"===wr(n)?null!=(e=null==(a=this.virtualKeyboard)?void 0:a.executeCommand(n))&&e:function YI(n,a){var e,i,o;if(!a)return!1;let s,r=[],l=!1,c=!1;Pn(a)?(s=a[0],r=a.slice(1)):s=a,s=s.replace(/-\w/g,d=>d[1].toUpperCase());let u=null==(e=Ko[s])?void 0:e.target;if("model"===u){if(n.options.readOnly&&/^(paste|cut|insert|delete|transpose|add)/.test(s))return n.model.announce("plonk"),!1;/^(delete|transpose|add)/.test(s)&&"deleteBackward"!==s&&n.flushInlineShortcutBuffer(),/^(delete|transpose|add)/.test(s)&&"latex"!==n.mode&&(n.popUndoStack(),n.snapshot()),"latex"===n.mode&&!/^(complete)/.test(s)&&Zd(n),Ko[s].fn(n.model,...r),"latex"!==n.mode&&/^(delete|transpose|add)/.test(s)&&n.snapshot(),"latex"===n.mode&&sc(n),c=!0,l=!0}else if("virtual-keyboard"===u)c=null!=(o=null==(i=n.virtualKeyboard)?void 0:i.executeCommand(a))&&o,l=!0;else{if(!Ko[s])throw new Error(`Unknown command "${s}"`);/^(undo|redo)/.test(s)&&n.flushInlineShortcutBuffer(),c=Ko[s].fn(n,...r),l=!0}return"virtual-keyboard"!==u&&(!n.model.selectionIsCollapsed||/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(s))&&(n.flushInlineShortcutBuffer(),n.style={}),c&&yn(n),l}(this,n)}get errors(){return function zm(n,a,e){var i;let o=new Kl(fs(n,null),a,{args:null,mathstyle:"displaystyle",parseMode:null!=(i=e?.parseMode)?i:"math"});for(;!o.end();)o.parse();return o.errors}(this.model.getValue(),this)}getValue(n,a,e){return this.model.getValue(n,a,e)}setValue(n,a){var e;void 0===(a=a??{mode:"math"}).insertionMode&&(a.insertionMode="replaceAll"),(void 0===a.format||"auto"===a.format)&&(a.format="latex");let i="math";(void 0===a.mode||"auto"===a.mode)&&(i=null!=(e=Np(this.model,this.model.position))?e:"math"),dn.insert(i,this.model,n,a)&&(this.undoManager.snapshot(),yn(this))}get expression(){let n=this.computeEngine;return n?n.box(n.parse(this.model.getValue())):null}loadSound(n){var a=this;return(0,El.Z)(function*(){var e,i,o,s,r,l,c;delete a.audioBuffers[n];let u="";switch(n){case"keypress":u="string"==typeof a.options.keypressSound?a.options.keypressSound:null==(e=a.options.keypressSound)?void 0:e.default;break;case"spacebar":u="string"==typeof a.options.keypressSound?a.options.keypressSound:null!=(s=null==(i=a.options.keypressSound)?void 0:i.spacebar)?s:null==(o=a.options.keypressSound)?void 0:o.default;break;case"delete":u="string"==typeof a.options.keypressSound?a.options.keypressSound:null!=(c=null==(r=a.options.keypressSound)?void 0:r.delete)?c:null==(l=a.options.keypressSound)?void 0:l.default;break;case"plonk":u=a.options.plonkSound}if("string"!=typeof u)return;u=u.trim();let d=a.options.soundsDirectory;if(null==d||"null"===d||"none"===u||"null"===u)return;let m=yield(yield fetch(yield Ep(d+"/"+u))).arrayBuffer(),p=yield a.audioContext.decodeAudioData(m);a.audioBuffers[n]=p})()}playSound(n){var a=this;return(0,El.Z)(function*(){if(a.audioBuffers[n]||(yield a.loadSound(n)),!a.audioBuffers[n])return;let e=a.audioContext.createBufferSource();e.buffer=a.audioBuffers[n];let i=a.audioContext.createGain();i.gain.value=.5,e.connect(i).connect(a.audioContext.destination),e.start()})()}scrollIntoView(){var n;if(!this.element)return;null==(n=this.host)||n.scrollIntoView({block:"nearest",inline:"nearest"}),this.dirty&&Ha(this,{interactive:!0});let a=this.field.getBoundingClientRect(),e=null;if(this.model.selectionIsCollapsed)e=gr(this.field);else{let i=sp(this);if(i.length>0){let o=-1/0,s=-1/0;for(let r of i)r.right>o&&(o=r.right),r.top<s&&(s=r.top);e={x:o+a.left-this.field.scrollLeft,y:s+a.top-this.field.scrollTop,height:0}}}if(this.host&&e){let i=this.host.getBoundingClientRect(),o=e.y,s=this.host.scrollTop;o<i.top?s=o-i.top+this.host.scrollTop:o>i.bottom&&(s=o-i.bottom+this.host.scrollTop+e.height),this.host.scroll({top:s,left:0})}if(e){let i=e.x-window.scrollX,o=this.field.scrollLeft;i<a.left?o=i-a.left+this.field.scrollLeft-20:i>a.right&&(o=i-a.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:o})}}insert(n,a){if("string"==typeof n&&n.length>0){if(this.flushInlineShortcutBuffer(),(a=a??{mode:"math"}).focus&&this.focus(),a.feedback&&(this.options.keypressVibration&&Yu()&&navigator.vibrate(3),this.playSound("keypress")),a.scrollIntoView&&this.scrollIntoView(),"\\\\"===n)Lp(this.model);else if("&"===n)Zp(this.model);else{let e=this.style;dn.insert(this.mode,this.model,n,At({style:this.model.at(this.model.position).computedStyle},a)),a.resetStyle&&(this.style=e)}return this.undoManager.snapshot(),yn(this),!0}return!1}switchMode(n,a="",e=""){var i;if(this.mode===n||this.options.readOnly||null==(i=this.host)||!i.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0})))return;let o=this.mode,{model:s}=this;s.deferNotifications({content:Boolean(e)||Boolean(a),selection:!0,type:"insertText"},()=>{let r=!1;if(this.flushInlineShortcutBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(n),a&&"latex"!==n){let l=mi(a,this,{parseMode:n});s.collapseSelection("forward");let c=s.at(s.position);s.position=s.offsetOf(c.parent.addChildrenAfter(l,c)),r=!0}if(this.mode=n,"latex"===n){let l=s.selectionIsCollapsed;Ja(this,"accept");let c,u=s.at(s.position);if(l)c="\\";else{let m=Vi(s.selection);c=this.model.getValue(m,"latex");let p=this.model.extractAtoms(m);1===p.length&&p[0]instanceof fn&&(c=a,l=!0),u=s.at(m[0])}let d=new aa(c,this);u.parent.addChildAfter(d,u),l?s.position=s.offsetOf(d.lastChild):s.setSelection(s.offsetOf(d.firstChild),s.offsetOf(d.lastChild))}else br(s).forEach(l=>{l.isError=!1});if(e){let l=mi(e,this,{parseMode:o});s.collapseSelection("forward");let c=s.at(s.position);s.position=s.offsetOf(c.parent.addChildrenAfter(l,c)),r=!0}return yn(this),r}),this.mode=n}hasFocus(){return this.keyboardDelegate.hasFocus()}focus(n){var a;this.hasFocus()||(this.keyboardDelegate.focus(),this.model.announce("line"),(null==(a=n?.scrollIntoView)||a)&&this.scrollIntoView())}blur(){this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(n,a={}){var e,i;let o={operation:"set",suppressChangeNotifications:!1};cc(a)?o.range=a:(o.range=a.range,o.suppressChangeNotifications=null!=(e=a.suppressChangeNotifications)&&e);let s=eh(this,n),r=null!=(i=o.operation)?i:"set";this.model.deferNotifications({content:!o.suppressChangeNotifications,type:"insertText"},()=>{void 0===o.range?this.model.selection.ranges.forEach(l=>Kd(this.model,l,s,{operation:r})):Kd(this.model,o.range,s,{operation:r})}),yn(this)}getCaretPoint(){let n=gr(this.field);return n?{x:n.x,y:n.y}:null}setCaretPoint(n,a){let e=Mr(this,n,a,{bias:0});if(e<0)return!1;let i=this.model.position;return this.model.position=e,this.model.announce("move",i),yn(this),!0}getPlaceholderField(n){var a;return null==(a=this.placeholders.get(n))?void 0:a.field}attachNestedMathfield(){let n=!1,a=this.field.getBoundingClientRect();this.placeholders.forEach((e,i)=>{var o,s;let r=this.field.querySelector(`[data-placeholder-id="${i}"]`);if(!r)return;let l=r.getBoundingClientRect(),u=l.left-a.left+(null!=(o=this.element.offsetLeft)?o:0);(!e.field.style.left||Math.abs(u-parseFloat(e.field.style.left))>=1)&&(n=!0,e.field.style.left=`${u}px`);let d=l.top-a.top+(null!=(s=this.element.offsetTop)?s:0);(!e.field.style.top||Math.abs(d-parseFloat(e.field.style.top))>=1)&&(n=!0,e.field.style.top=`${d}px`)}),n&&yn(this)}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){var n,a;this.undoManager.snapshot()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(a=this.host)||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}snapshotAndCoalesce(){var n,a;this.undoManager.snapshotAndCoalesce()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(a=this.host)||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}undo(){var n,a;this.undoManager.undo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(a=this.host)||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var n,a;this.undoManager.redo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(a=this.host)||a.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var n;null==(n=this.undoManager)||n.reset()}_onSelectionDidChange(){var n,a,e;let i=this.model;this.keyboardDelegate.setValue(this.model.getValue(this.model.selection,"latex-expanded"));let o=i.getAtoms(i.selection);if(1===o.length&&"placeholder"===o[0].type){let s=o[0];this.placeholders.has(s.placeholderId)&&(null==(n=this.placeholders.get(s.placeholderId))||n.field.focus())}{let s=i.at(i.position),r=null!=(a=s.mode)?a:Ud(this.options);this.mode!==r&&("latex"===this.mode?(Ja(this,"accept",{mode:r}),i.position=i.offsetOf(s)):this.switchMode(r))}null==(e=this.host)||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0}))}onFocus(){var n,a,e;this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),null==(n=this.virtualKeyboard)||n.setOptions(this.options),null==(a=this.virtualKeyboard)||a.enable(),"onfocus"===this.options.virtualKeyboardMode&&this.executeCommand("showVirtualKeyboard"),rc(this),Ha(this,{interactive:!0}),null==(e=this.host)||e.dispatchEvent(new FocusEvent("focus",{bubbles:!1,composed:!0})),this.valueOnFocus=this.model.getValue(),this.focusBlurInProgress=!1)}onBlur(){var n,a,e,i;this.focusBlurInProgress||this.blurred||(this.focusBlurInProgress=!0,this.blurred=!0,this.ariaLiveText.textContent="",Ja(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(n=this.host)||n.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),/onfocus|manual/.test(this.options.virtualKeyboardMode)&&!Sn().sharedVirtualKeyboard&&this.executeCommand("hideVirtualKeyboard"),null==(a=this.virtualKeyboard)||a.disable(),null==(e=this.host)||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(i=this.host)||i.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),yn(this),this.focusBlurInProgress=!1)}onCompositionStart(n){this.model.deleteAtoms(Vi(this.model.selection));let a=gr(this.field);a&&requestAnimationFrame(()=>{Ha(this),this.keyboardDelegate.moveTo(a.x,a.y-a.height)})}onCompositionUpdate(n){(function pL(n,a){let e=n.at(n.position);if("composition"===e.type)e.value=a;else{let{caret:i}=e;e.caret="";let o=new hd(a,n.mathfield,{mode:e.mode});o.caret=i,e.parent.addChildAfter(o,e),n.position+=1}})(this.model,n),yn(this)}onCompositionEnd(n){(function hL(n){let a=n.at(n.position);"composition"===a.type&&(a.parent.removeChild(a),n.position-=1)})(this.model),o_(this,n,{simulateKeystroke:!0})}onResize(){rc(this)}onWheel(n){let a=5*n.deltaX;if(!Number.isFinite(a)||0===a)return;let e=this.field;a<0&&0===e.scrollLeft||a>0&&e.offsetWidth+e.scrollLeft>=e.scrollWidth||(e.scrollBy({top:0,left:a}),n.preventDefault(),n.stopPropagation())}getHTMLElement(n){let a=n;for(;!a.id&&a.hasChildren;)a=n.children[0];if(a.id)return this.fieldContent.querySelector(`[data-atom-id="${a.id}"]`);throw new TypeError("Could not get an ID from atom")}}(this.shadowRoot.querySelector(":host > div"),ge(At({},je.has(this)?je.get(this).options:vc(this)),{eventSink:this,value:o})),!je.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let s of Object.keys(po.optionsAttributes))this.upgradeProperty(Mo(s))}null!=(e=this._mathfield)&&e.model?(je.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let s=je.get(this).value;void 0!==s&&this._mathfield.setValue(s),this._mathfield.model.selection=je.get(this).selection,je.delete(this)}),i.addEventListener("slotchange",s=>{if(s.target!==i)return;let r=i.assignedNodes().map(l=>3===l.nodeType?l.textContent:"").join("").trim();r!==this._slotValue&&(this._mathfield?this._mathfield.setValue(r):this.value=r)}),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))):this._mathfield=null}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})),!this._mathfield)return;let n=Ts(this._mathfield.options,Object.keys(po.optionsAttributes).map(a=>Mo(a)));je.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:n}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(n){if(this.hasOwnProperty(n)){let a=this[n];delete this[n],("readonly"===n||"read-only"===n)&&(n="readOnly"),this[n]=a}}attributeChangedCallback(n,a,e){if(a===e)return;let i=null!==e;switch(n){case"disabled":this.disabled=i;break;case"read-only":case"readonly":this.readOnly=i}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(n){let a=Boolean(n);a?(this.setAttribute("readonly",""),this.setAttribute("disabled",""),this.setAttribute("aria-readonly","true")):(this.removeAttribute("readonly"),this.removeAttribute("read-only"),this.removeAttribute("disabled"),this.removeAttribute("aria-readonly")),this.setOptions({readOnly:a})}get disabled(){return this.hasAttribute("disabled")}set disabled(n){let a=Boolean(n);a?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",a?"true":"false"),this.setOptions({readOnly:a})}get value(){return this.getValue()}set value(n){this.setValue(n)}get defaultMode(){return this.getOption("defaultMode")}set defaultMode(n){this.setOptions({defaultMode:n})}get fontsDirectory(){return this.getOption("fontsDirectory")}set fontsDirectory(n){this.setOptions({fontsDirectory:n})}get mathModeSpace(){return this.getOption("mathModeSpace")}set mathModeSpace(n){this.setOptions({mathModeSpace:n})}get inlineShortcutTimeout(){return this.getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(n){this.setOptions({inlineShortcutTimeout:n})}get keypressVibration(){return this.getOption("keypressVibration")}set keypressVibration(n){this.setOptions({keypressVibration:n})}get keypressSound(){return this.getOption("keypressSound")}set keypressSound(n){this.setOptions({keypressSound:n})}get plonkSound(){var n;return null!=(n=this.getOption("plonkSound"))?n:null}set plonkSound(n){this.setOptions({plonkSound:n})}get letterShapeStyle(){return this.getOption("letterShapeStyle")}set letterShapeStyle(n){this.setOptions({letterShapeStyle:n})}get locale(){return this.getOption("locale")}set locale(n){this.setOptions({locale:n})}get readOnly(){return this.getOption("readOnly")}set readOnly(n){this.setOptions({readOnly:n})}get removeExtraneousParentheses(){return this.getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(n){this.setOptions({removeExtraneousParentheses:n})}get smartFence(){return this.getOption("smartFence")}set smartFence(n){this.setOptions({smartFence:n})}get smartMode(){return this.getOption("smartMode")}set smartMode(n){this.setOptions({smartMode:n})}get smartSuperscript(){return this.getOption("smartSuperscript")}set smartSuperscript(n){this.setOptions({smartSuperscript:n})}get speechEngine(){return this.getOption("speechEngine")}set speechEngine(n){this.setOptions({speechEngine:n})}get speechEngineRate(){return this.getOption("speechEngineRate")}set speechEngineRate(n){this.setOptions({speechEngineRate:n})}get speechEngineVoice(){return this.getOption("speechEngineVoice")}set speechEngineVoice(n){this.setOptions({speechEngineVoice:n})}get textToSpeechMarkup(){return this.getOption("textToSpeechMarkup")}set textToSpeechMarkup(n){this.setOptions({textToSpeechMarkup:n})}get textToSpeechRules(){return this.getOption("textToSpeechRules")}set textToSpeechRule(n){this.setOptions({textToSpeechRules:n})}get virtualKeyboardLayout(){return this.getOption("virtualKeyboardLayout")}set virtualKeyboardLayout(n){this.setOptions({virtualKeyboardLayout:n})}get virtualKeyboardMode(){return this.getOption("virtualKeyboardMode")}set virtualKeyboardMode(n){this.setOptions({virtualKeyboardMode:n})}get virtualKeyboardTheme(){return this.getOption("virtualKeyboardTheme")}set virtualKeyboardTheme(n){this.setOptions({virtualKeyboardTheme:n})}get virtualKeyboards(){return this.getOption("virtualKeyboards")}set virtualKeyboards(n){this.setOptions({virtualKeyboards:n})}get useSharedVirtualKeyboard(){return this.getOption("useSharedVirtualKeyboard")}set useSharedVirtualKeyboard(n){this.setOptions({useSharedVirtualKeyboard:n})}get sharedVirtualKeyboardTargetOrigin(){return this.getOption("sharedVirtualKeyboardTargetOrigin")}set sharedVirtualKeyboardTargetOrigin(n){this.setOptions({sharedVirtualKeyboardTargetOrigin:n})}get selection(){return this._mathfield?this._mathfield.model.selection:je.has(this)?je.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(n){"number"==typeof n&&(n={ranges:[[n,n]]}),this._mathfield?this._mathfield.model.selection=n:je.has(this)?je.set(this,ge(At({},je.get(this)),{selection:n})):je.set(this,{value:void 0,selection:n,options:vc(this)})}get selectionIsCollapsed(){let n=this.selection;return 1===n.ranges.length&&n.ranges[0][0]===n.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:je.has(this)?je.get(this).selection.ranges[0][0]:0}set position(n){this._mathfield&&(this._mathfield.model.position=n),je.has(this)?je.set(this,ge(At({},je.get(this)),{selection:{ranges:[[n,n]]}})):je.set(this,{value:void 0,selection:{ranges:[[n,n]]},options:vc(this)})}getOffsetDepth(n){var a;return this._mathfield?(null==(a=this._mathfield.model.at(n))?void 0:a.treeDepth)-2:0}get lastOffset(){var n,a;return null!=(a=null==(n=this._mathfield)?void 0:n.model.lastOffset)?a:-1}};function Mo(n){return n.toLowerCase().replace(/[^a-zA-Z\d]+(.)/g,(a,e)=>e.toUpperCase())}function vc(n){let a={},e=po.optionsAttributes;return Object.keys(e).forEach(i=>{if(n.hasAttribute(i)){let o=n.getAttribute(i);a[Mo(i)]="boolean"===e[i]||("on/off"===e[i]?"on"===o||"off"!==o&&void 0:"number"===e[i]?Number.parseFloat(o??"0"):o)}else"boolean"===e[i]&&(a[Mo(i)]=!1)}),a}function l_(){return!(!window.ElementInternals||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var sh,rh,lh,c_=po;!Di()||null!=(sh=window.customElements)&&sh.get("math-field")||(null!=globalThis[rh=Symbol.for("io.cortexjs.mathlive")]||(globalThis[rh]={}),globalThis[Symbol.for("io.cortexjs.mathlive")].version="0.89.4",window.MathfieldElement=po,null==(lh=window.customElements)||lh.define("math-field",po));var ie=1200,xn=3e3,ei=4e3;function Zt(n,a,e=xn,i="$0"){for(let o of a)ko[o]&&(ko[o].frequency=e,ko[o].category=n,ko[o].template=i.replace(/\$0/g,o)),Co[o]&&(Co[o]=ge(At({},Co[o]),{frequency:e,category:n,template:i.replace(/\$0/g,o)}))}function Sn(){var n;return null!=globalThis[n=Symbol.for("io.cortexjs.mathlive")]||(globalThis[n]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}Zt("Trigonometry",["\\cos","\\sin","\\tan"],ei),Zt("Trigonometry",["\\arccos","\\arcsin","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),Zt("Functions",["\\ln","\\log","\\exp","\\lim"],ei),Zt("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],xn),Zt("Functions",["\\hom"],ie),Zt("Decoration",["\\rule"],200,"$0{2em}{1em}"),Zt("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),Zt("Decoration",["\\overline","\\underline"],xn,"$0{\\placeholder{}}"),Zt("Decoration",["\\enclose"],ie,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),Zt("Decoration",["\\fcolorbox"],ie,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),Zt("Decoration",["\\colorbox"],ie,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),Zt("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],ie,"$0{\\placeholder{}}"),Zt("Decoration",["\\bbox"],ie,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),Zt("Styling",["\\mathbb"],ei,"$0{Don Knuth}"),Zt("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],xn,"$0{Don Knuth}"),Zt("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId","\\htmlData","\\htmlStyle"],ie,"{$0 Don Knuth}"),Zt("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],ie,"\\text{$0 Don Knuth}"),Zt("Styling",["\\class","\\cssId"],ie,"$0{testIdentifier}{Don Knuth}"),Zt("Styling",["\\fontseries"],ie,"\\text{$0{b}Don Knuth}"),Zt("Styling",["\\fontfamily"],ie,"\\text{$0{cmtt}Don Knuth}"),Zt("Styling",["\\fontshape"],ie,"\\text{$0{sc}Don Knuth}"),Zt("Styling",["\\selectfont"],ie,"\\text{$0}"),Zt("Styling",["\\emph"],ie,"Don$0{Knuth}"),Zt("Styling",["\\em"],ie,"Don{$0 Knuth}"),Zt("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],ie,"x=$0{arg}=0"),Zt("Layout",["\\middle"],ie,"\\left\\{x$0|x>0\\right\\}"),Zt("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],ie,"$0{arg}{x=0}"),Zt("Layout",["\\rlap","\\mathrlap"],ie,"$0{/}0"),Zt("Layout",["\\llap","\\mathllap"],ie,"o$0{/}"),Zt("Fractions",["\\frac"],ei,"$0{\\placeholder{}}{\\placeholder{}}"),Zt("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],ie,"$0{\\placeholder{}}{\\placeholder{}}"),Zt("Fractions",["\\over","\\atop","\\choose"],ie,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),Zt("Fractions",["\\overwithdelims","\\atopwithdelims"],ie,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),Zt("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],ei),Zt("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],xn),Zt("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],ie),Zt("Accents",["\\vec"],ei),Zt("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],xn,"$0{\\placeholder{}}"),Zt("Accents",["\\^","\\`","\\'"],ie,"$0{e}"),Zt("Accents",["\\c"],ie,"$0{c}"),Zt("Accents",["\\~"],ie,"$0{n}"),Zt("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],ie,"$0{\\placeholder{}}"),Zt("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],xn,"$0{ABC}"),Zt("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],xn,"$0{ABC}"),Zt("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],ie,"$0{x=0}"),Zt("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],ie,"$0($0)"),Zt("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],ie,"$0("),Zt("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],ie,"$0)"),Zt("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],ie,"$0|"),Zt("Letterlike Symbols",["\\nabla","\\partial","\\N","\\R","\\Q","\\C","\\Z","\\exponentialE","\\forall","\\exists","\\nexists"],ei),Zt("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\doubleStruckCapitalN","\\doubleStruckCapitalR","\\doubleStruckCapitalQ","\\doubleStruckCapitalC","\\doubleStruckCapitalZ","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im","\\$","\\%","\\And","\\degree"],xn),Zt("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],ie),Zt("Crosses",["\\dagger","\\dag"],ei),Zt("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],ie),Zt("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],ie),Zt("Various",["\\unicode"],ie,'$0{"2B1A}'),Zt("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],ei),Zt("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],xn),Zt("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],ie),Zt("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),Zt("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],ie),Zt("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],ie,"$0[below]{above}=0"),Zt("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],ie),Zt("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],ie),Zt("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],ei),Zt("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],xn),Zt("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],ie),Zt("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],ei),Zt("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],xn),Zt("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],ie),Zt("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],ei),Zt("Logic",["\\models","\\vdash"],xn),Zt("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],ie),Zt("Operators",["+","-","*","\\cdot"],ei),Zt("Operators",["\\sqrt"],ei,"$0{\\placeholder{}}"),Zt("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],xn),Zt("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],ie),Zt("Logic",["\\wedge","\\vee","\\neg"],ei),Zt("Logic",["\\lnot"],xn),Zt("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],ie),Zt("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],xn),Zt("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],ei),Zt("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],xn),Zt("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],ie),Zt("Spacing",["\\space","\\quad","\\qquad"],xn,'\\unicode{"203A}$0\\unicode{"2039}'),Zt("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],ie,'\\unicode{"203A}$0\\unicode{"2039}'),Zt("Spacing",["\\hspace","\\hspace*"],ie,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),Zt("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],xn),Zt("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],ie),Zt("Boxes",["\\square","\\Box"],xn),Zt("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],ie),Zt("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],xn),Zt("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],ie),Zt("Triangles",["\\triangle","\\triangleq"],xn),Zt("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],ie),Zt("Shapes",["\\ast","\\star"],xn),Zt("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],ie);let yZ=(()=>{class n extends st.Q{constructor(e){super(),this.commonService=e,this.onClose=new t.vpe,this.onInsertLatex=new t.vpe,this.isMobile=!1,this.isLoadLib=!1,this.mfe=new po}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(){this.inp&&(this.inp.str=this.mfe.value,this.onInsertLatex.emit(this.inp))}ngAfterViewInit(){var e,i,o,s,r;const l=document.getElementById("formula-mathtype-editor");this.mfe.value=null!==(r=null!==(e=this.inp)&&void 0!==e&&e.str.includes("<math xmlns")?this.commonService.convertMathtypeToLatex(null!==(o=null===(i=this.inp)||void 0===i?void 0:i.str)&&void 0!==o?o:""):null===(s=this.inp)||void 0===s?void 0:s.str)&&void 0!==r?r:"",this.mfe.style.fontSize="35px",this.mfe.style.padding="10px",this.mfe.setOptions({fontsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/fonts",soundsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/sounds",virtualKeyboardMode:"onfocus",virtualKeyboardLayout:"dvorak"}),l?.appendChild(this.mfe),this.mfe.focus()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Qe.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mathtype-editor"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsertLatex:"onInsertLatex"},features:[t.qOj],decls:18,vars:9,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body"],["id","formula-mathtype-editor"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","mathTypeEditor-QurJasjSBOm",1,"btn","btn-primary","w-24",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5),t._UZ(11,"div",6),t.qZA(),t.TgZ(12,"div",7),t._UZ(13,"div",8),t.TgZ(14,"div",9)(15,"button",10),t.NdJ("click",function(){return i.actionInsert()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,5,"lang_auto_soan_thao_cong_thuc")," "),t.xp6(11),t.hij(" ",t.lcZ(17,7,"lang_auto_chen")," "))},dependencies:[qe.Hw,_t.bT],styles:["body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}"]}),n})(),wZ=(()=>{class n extends st.Q{constructor(){super(...arguments),this.id_content="",this.onDropFile=new t.vpe}onFileSelected(e){let s=e.target.files,r=!!s&&s[0];0!=r&&this.onDropFile.emit(r)}setupDropFile(){const e=jQuery("#frame_inp_editor_"+this.id_content);e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.onDropFile.emit(i.originalEvent.dataTransfer.files[0])})}ngAfterViewInit(){this.setupDropFile()}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["question-dropper"]],inputs:{id_content:"id_content"},outputs:{onDropFile:"onDropFile"},features:[t.qOj],decls:13,vars:7,consts:[["azt-track-service","question-dropper-qkcT8PYGlf",1,"editor-drop-file",3,"id","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending","mx-auto"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"link"],["type","file","name","fileHomework",1,"azt-hidden",3,"change"],["formChoseFile",""]],template:function(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(12);return t.KtG(r.click())}),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2)(3,"path",3)(4,"path",4),t.qZA(),t.kcU(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"span",5),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"input",6,7),t.NdJ("change",function(r){return i.onFileSelected(r)}),t.qZA()}2&e&&(t.MGl("id","frame_inp_editor_",i.id_content,""),t.xp6(6),t.hij("",t.lcZ(7,3,"lang_auto_keo_tha_fiel_vao_day_hoc_bam_vao")," "),t.xp6(3),t.Oqu(t.lcZ(10,5,"lang_auto_chon_file")+" ..."))},dependencies:[_t.bT],styles:[".editor-drop-file[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border:1px dotted #2462ae;padding:20px;border-radius:5px;-webkit-user-select:none;user-select:none}.editor-drop-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.editor-drop-file[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#2462ae}.is-dragover[_ngcontent-%COMP%]{background-color:#2462ae6a}"]}),n})();var Ms=A(41206);function kZ(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_loading")))}function CZ(n,a){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_cau_hoi_nao")))}function TZ(n,a){if(1&n&&(t.TgZ(0,"mat-icon",18),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t._uU(3," push_pin"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("matTooltip",e.isFixGroup?t.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):t.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function AZ(n,a){1&n&&(t.TgZ(0,"div",19)(1,"span",20),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"tieu_de_nhom")))}function SZ(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"app-quest-header",22),t.NdJ("onChooseSimilar",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.actionInsert(o))})("onError",function(o){t.CHM(e);const s=t.oxw(2);return t.KtG(s.commonService.snackError(o))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("q",e)("similar",!0)}}function OZ(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function EZ(n,a){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,OZ,2,1,"span",6),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function MZ(n,a){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,EZ,2,1,"span",29),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an_dung")+":"),t.xp6(2),t.Q6J("ngForOf",e.quest.answers)}}function IZ(n,a){if(1&n&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}function LZ(n,a){if(1&n&&(t.TgZ(0,"div",30)(1,"span",31),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,IZ,2,1,"span",32),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an")+":"),t.xp6(2),t.Q6J("ngForOf",e.strAns)}}function ZZ(n,a){1&n&&(t.TgZ(0,"span",38),t._UZ(1,"div",39)(2,"div",40),t.qZA())}const _h=function(n){return{"an-true":n}};function PZ(n,a){if(1&n&&(t.TgZ(0,"div",34),t.YNc(1,ZZ,3,0,"span",35),t.TgZ(2,"div",36),t._uU(3),t.qZA(),t._UZ(4,"div",37),t.ALo(5,"safeContentQuestion"),t.ALo(6,"mathJaxContent"),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.ans.isCorrect),t.xp6(1),t.Q6J("ngClass",t.VKq(9,_h,e.ans.isCorrect)),t.xp6(1),t.hij(" ",e.ans.label,""),t.xp6(1),t.Q6J("innerHTML",t.lcZ(5,5,t.lcZ(6,7,e.renderedStr)),t.oJD)("ngClass",t.VKq(11,_h,e.ans.isCorrect))}}function NZ(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,MZ,5,4,"div",6),t.YNc(2,LZ,5,4,"div",27),t.YNc(3,PZ,7,13,"div",28),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Gre("box-ans quest-ans-ver-",e.v,""),t.xp6(1),t.Q6J("ngIf","pdf-1-0"==e.v),t.xp6(1),t.Q6J("ngIf",4==e.type&&e.strAns),t.xp6(1),t.Q6J("ngForOf",e.answers)}}const DZ=function(n){return{"padding-mobile":n}};function jZ(n,a){if(1&n&&(t.TgZ(0,"div",41)(1,"div",42)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t._UZ(5,"div",43),t.ALo(6,"safeContentQuestion"),t.ALo(7,"mathJaxContent"),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.Gre("box-help quest-help-ver-",e.v,""),t.Q6J("ngClass",t.VKq(12,DZ,i.isMobile)),t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),t.xp6(2),t.Q6J("innerHTML",t.lcZ(6,8,t.lcZ(7,10,e.helpRenderedStr)),t.oJD)}}function qZ(n,a){if(1&n&&(t.TgZ(0,"div",23),t._UZ(1,"div",24),t.ALo(2,"safeContentQuestion"),t.ALo(3,"mathJaxContent"),t.ALo(4,"removeBracket"),t.YNc(5,NZ,4,6,"div",25),t.YNc(6,jZ,8,14,"div",26),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Gre("tex2jax_process box-content quest-ver-",e.v,""),t.Q6J("innerHTML",t.lcZ(2,6,t.lcZ(3,8,t.lcZ(4,10,e.renderedStr))),t.oJD),t.xp6(4),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",e.helpRenderedStr)}}function FZ(n,a){if(1&n&&(t._UZ(0,"div",44),t.ALo(1,"safeContentQuestion")),2&n){const e=t.oxw().$implicit;t.Q6J("innerHTML",t.lcZ(1,1,e.err),t.oJD)}}function QZ(n,a){1&n&&t._UZ(0,"div",45)}function UZ(n,a){if(1&n&&(t.TgZ(0,"div",8)(1,"div",9),t.YNc(2,TZ,4,5,"mat-icon",10),t._UZ(3,"div",11),t.ALo(4,"safeContentQuestion"),t.YNc(5,AZ,4,3,"div",12),t.YNc(6,SZ,2,2,"div",13),t.TgZ(7,"div",14)(8,"div"),t.YNc(9,qZ,7,12,"div",15),t.YNc(10,FZ,2,3,"div",16),t.qZA()()(),t.YNc(11,QZ,1,0,"div",17),t.qZA()),2&n){const e=a.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",e.isFixGroup||e.quest.isFixAns),t.xp6(1),t.Q6J("innerHTML",t.lcZ(4,7,i.errorQuestionView.makeErr(e,i.lstQuest)),t.oJD),t.xp6(2),t.Q6J("ngIf",e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(3),t.Q6J("ngIf",!e.err),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(1),t.Q6J("ngIf",0==i.lstQuest.length)}}const BZ=function(n){return{"max-height":n}};let RZ=(()=>{class n extends st.Q{constructor(){super(),this.onClose=new t.vpe,this.onInsert=new t.vpe,this.onChooseSimilar=new t.vpe,this.isMobile=!1,this.lstQuest=[],this.errorQuestionView=new Ci(this.commonService)}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(e){e.v="similar",this.onInsert.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["similar-quest"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsert:"onInsert",onChooseSimilar:"onChooseSimilar"},features:[t.qOj],decls:14,vars:12,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[4,"ngIf"],["class","question-content",4,"ngFor","ngForOf"],[1,"question-content"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],[1,"box-service-header","w-full"],[3,"q","similar","onChooseSimilar","onError"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"innerHTML"],[3,"class",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"ngClass"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"innerHTML","ngClass"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"innerHTML"],[1,"exam-box",3,"innerHTML"],[1,"skeleton-box-loading","h-100","w-100"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5),t.YNc(11,kZ,3,3,"div",6),t.YNc(12,CZ,3,3,"div",6),t.YNc(13,UZ,12,9,"div",7),t.qZA()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_auto_doi_cau_khac")," "),t.xp6(5),t.Q6J("ngStyle",t.VKq(10,BZ,i.isMobile?"75vh":"500px")),t.xp6(1),t.Q6J("ngIf",!i.inp),t.xp6(1),t.Q6J("ngIf",i.inp&&0==i.inp.length),t.xp6(1),t.Q6J("ngForOf",i.inp))},dependencies:[E.mk,E.sg,E.O5,E.PC,Ms.Zt,Ms.Bh,qe.Hw,Le.gM,Va.X,_t.bT,_t.QA,_t.Ev,_t.vw],styles:['body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{overflow:auto;position:relative}.question-content[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .quest-err{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .quest-err:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}']}),n})();function zZ(n,a){if(1&n&&(t.TgZ(0,"li",8),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e)}}const JZ=function(n){return{"max-height":n}};let HZ=(()=>{class n extends st.Q{constructor(){super(),this.onClose=new t.vpe,this.lstErrors=[],this.isMobile=!1,this.stringTrans=this.commonService.myTranslateInstant("lang_auto_line")}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}get lstMsgErrors(){return this.lstErrors.map(e=>e.split("|")).map(e=>`${this.stringTrans} ${e[0]}: ${e[1]}`)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["show-errors-quests"]],inputs:{lstErrors:"lstErrors"},outputs:{onClose:"onClose"},features:[t.qOj],decls:13,vars:10,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[1,"lst-errs"],["class","lst-err-item",4,"ngFor","ngForOf"],[1,"lst-err-item"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"ul",6),t.YNc(12,zZ,2,1,"li",7),t.qZA()()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,6,"lang_auto_vui_long_kiem_tra_lai_cac_noi_dung_sau")," "),t.xp6(5),t.Q6J("ngStyle",t.VKq(8,JZ,i.isMobile?"75vh":"500px")),t.xp6(2),t.Q6J("ngForOf",i.lstMsgErrors))},dependencies:[E.sg,E.PC,Ms.Zt,Ms.Bh,qe.Hw,_t.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}"]}),n})();function $Z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onHandleNextQuestion(s.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.label)}}function KZ(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"lowercase"),t.qZA(),t.TgZ(5,"td",14),t._uU(6),t.qZA(),t.TgZ(7,"td",15),t.YNc(8,$Z,2,1,"span",16),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,4,"lang_testbank_test_config_total_number_question")," ",t.lcZ(4,6,e.type),""),t.xp6(4),t.Oqu(e.countQuest),t.xp6(2),t.Q6J("ngForOf",e.lstQuest)}}function YZ(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"span",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.onHandleNextQuestion(s.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.label)}}function GZ(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"lowercase"),t.ALo(5,"mytranslate"),t.ALo(6,"lowercase"),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"td",14),t._uU(9),t.qZA(),t.TgZ(10,"td",15),t.YNc(11,YZ,2,1,"span",16),t.qZA()()),2&n){const e=a.$implicit;t.xp6(2),t.HOy("",t.lcZ(3,6,"lang_auto_tong_so_cau_trac_nghiem")," ",t.lcZ(4,8,t.lcZ(5,10,"lang_auto_co"))," ",e.numberAns," ",t.lcZ(6,12,t.lcZ(7,14,"lang_auto_dap_an")),""),t.xp6(7),t.Oqu(e.countQuest),t.xp6(2),t.Q6J("ngForOf",e.lstQuest)}}let WZ=(()=>{class n extends st.Q{constructor(){super(),this.onClose=new t.vpe,this.onNextQuestion=new t.vpe,this.isMobile=!1}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),this.makeInfo(),this.showMore=Object.assign(Object.assign({},this.info),{typeQuests:this.info.typeQuests.filter(e=>e.lstQuest.length>0)})}makeInfo(){const e={totalQuest:this.lstQuest.filter(i=>!i.quest.isGroup).length,typeQuests:[],ansCountQuest:[]};this.lstQuest.filter(i=>!i.quest.isGroup).forEach(i=>{var o,s;let r=e.typeQuests.findIndex(l=>l.typeNumber===i.type);if(-1===r&&(r=e.typeQuests.push({type:this.getNameTypeQuestion(null!==(o=i.type)&&void 0!==o?o:-1),typeNumber:null!==(s=i.type)&&void 0!==s?s:-1,countQuest:0,lstQuest:[]})-1),e.typeQuests[r].countQuest++,1===e.typeQuests[r].typeNumber){let l=e.ansCountQuest.findIndex(c=>c.numberAns===i.answers.length);-1===l&&(l=e.ansCountQuest.push({numberAns:i.answers.length,countQuest:0,lstQuest:[]})-1),e.ansCountQuest[l].countQuest++,e.ansCountQuest[l].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)})}else e.typeQuests[r].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)})}),e.ansCountQuest.sort((i,o)=>o.numberAns-i.numberAns),this.info=e}getNameTypeQuestion(e){var i,o,s;switch(e){case 1:return null!==(i=this.commonService.myTranslateInstant("lang_auto_trac_nghiem"))&&void 0!==i?i:"";case 3:return null!==(o=this.commonService.myTranslateInstant("lang_testbank_create_exam_width_file_docx_essay"))&&void 0!==o?o:"";case 4:return null!==(s=this.commonService.myTranslateInstant("lang_auto_dien_tu"))&&void 0!==s?s:""}return""}extractNumberFromString(e){const o=e.match(/\d+/g);return o?parseInt(o[0]):0}actionClose(){this.onClose.emit()}onHandleNextQuestion(e){this.onNextQuestion.emit(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["show-info-quests"]],inputs:{lstQuest:"lstQuest"},outputs:{onClose:"onClose",onNextQuestion:"onNextQuestion"},features:[t.qOj],decls:32,vars:26,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto","max-height","70vh"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngFor","ngForOf"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"div",6)(12,"p",7),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"lowercase"),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"table",8)(18,"thead")(19,"tr",9)(20,"td",10),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"td",11),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"td",12),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,KZ,9,8,"tr",13),t.YNc(31,GZ,12,16,"tr",13),t.qZA()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,12,"lang_auto_thong_tin_de_thi")," "),t.xp6(8),t.lnq("",t.lcZ(14,14,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.info.totalQuest," ",t.lcZ(15,16,t.lcZ(16,18,"lang_auto_cau")),""),t.xp6(8),t.Oqu(t.lcZ(22,20,"lang_auto_thong_tin")),t.xp6(3),t.Oqu(t.lcZ(25,22,"lang_auto_so_luong")),t.xp6(3),t.Oqu(t.lcZ(28,24,"lang_auto_danh_sach_cac_cau")),t.xp6(3),t.Q6J("ngForOf",i.showMore.typeQuests),t.xp6(1),t.Q6J("ngForOf",i.showMore.ansCountQuest))},dependencies:[E.sg,Ms.Zt,Ms.Bh,qe.Hw,E.i8,_t.bT],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var VZ=A(73162);let XZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[E.JJ],imports:[w.Bz,E.ez,M.j,P.kb,g.Z_,b8,h.u5,h.UX,z.Is,Z.Z,k.xC,T.QG,x.SD,S.h,j.W,Fs,O.d,f.qyJ.pick(f.ciZ),_.vI.forRoot()]}),n})();t.B6R(il.Vn,function(){return[w.rH,E.mk,E.sg,E.O5,ke.VK,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,xe.Q,xl.L,Pe.M,zs,w7,Xe._,q0,nl]},function(){return[E.JJ,ns.lO,_t.bT]}),t.B6R(h7.A,function(){return[E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Pe.M]},function(){return[_t.bT]}),t.B6R(p7.b,function(){return[E.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Pe.M]},function(){return[_t.bT]}),t.B6R(kl.h,function(){return[E.O5]},function(){return[_t.bT]}),t.B6R(jo.Y,function(){return[E.mk,E.O5,P.KC,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,h.CE,Pe.M,zi.o,Ne.g]},function(){return[_t.bT]}),t.B6R(g7.L,function(){return[qe.Hw]},function(){return[_t.bT]}),t.B6R(p_.D,function(){return[z.ZT]},function(){return[_t.bT]}),t.B6R($u.o,function(){return[E.O5]},function(){return[_t.bT]}),t.B6R(f7.b,function(){return[E.O5,qe.Hw,$u.o]},function(){return[_t.bT]}),t.B6R(x7.h,function(){return[E.mk,E.sg,E.O5,ro.nh,qe.Hw,$u.o,v7._]},function(){return[_t.bT]}),t.B6R(h_.P,function(){return[E.sg,E.O5,Xn.RA,Xn.oH,Xn.qH,Xn.z3,z.ZT,qe.Hw,Fn.KE,Fn.hX]},function(){return[_t.bT]}),t.B6R(Vn,function(){return[E.mk,E.sg,E.O5,E.PC,qe.Hw,ke.VK,ke.p6,Le.gM,h.Fj,h.wV,h.JJ,h.qQ,h.On,Bo.Y,k7.C,Z7,yZ,wZ,Va.X,Ti,qs,RZ,HZ,WZ,ul.Z,f.Nh5,Y0,Rs,m7]},function(){return[_t.bT,_t.QA,_t.Ev,_t.AS,_t.vw]}),t.B6R(F0.J,function(){return[E.O5,VZ.pW]},function(){return[_t.bT]})},25631:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>QuestHeaderComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94650),src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55330),src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(51442),src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15043),angular_shepherd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(65463),src_app_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(34782);const _c0=["markInput"],_c1=["inpAudioUpload"];function QuestHeaderComponent_div_3_common_tooltip_9_Template(ut,J){1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"common-tooltip")(1,"em")(2,"mark"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3,"Ctr + Enter"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,1,"lang_auto_de_tu_dong_nhap_diem_cho_cac_cau_con_lai_trong_nhom_bang_dot")," "))}const _c2=function(ut){return{hide:ut}};function QuestHeaderComponent_div_3_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",19)(1,"div",20)(2,"span",21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.showMarkInput())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(4,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"div",22)(7,"input",23,24),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("keyup",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.checkKeyup(h))})("focus",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.enableTooltip())})("focusout",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.disableTooltip())})("ngModelChange",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.q.point=h)}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,QuestHeaderComponent_div_3_common_tooltip_9_Template,6,3,"common-tooltip",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(10,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(12,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()}if(2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();let E;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(13,_c2,A.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",A.q.point&&+A.q.point>0?A.q.point+" "+_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(4,7,"lang_auto_diem"):_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,9,"lang_auto_nhap_diem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_4__.VKq(15,_c2,!A.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("size",(null==A.q.point||null==(E=A.q.point.toString())?null:E.length)||2)("ngModel",A.q.point),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.isTooltipPoint),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(12,11,"lang_auto_diem")," ")}}function QuestHeaderComponent_div_4_div_1_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",30),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A),_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(4);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.click())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(1,"svg",31),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(2,"path",32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3," Audio "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_2_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span",41),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.removeAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"[X]"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_3_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span",42),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(A.audioName)}}function QuestHeaderComponent_div_4_div_2_span_4_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(A.audioName)}}function QuestHeaderComponent_div_4_div_2_mat_icon_5_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",43),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.loadAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2,"cached"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}2&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"lang_auto_tai_lai_audio"))}function QuestHeaderComponent_div_4_div_2_mat_icon_6_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",44),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.stopAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,"pause "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_mat_icon_7_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"mat-icon",45),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.playAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1," play_circle"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}}function QuestHeaderComponent_div_4_div_2_i_8_Template(ut,J){1&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(0,"i",46)}function QuestHeaderComponent_div_4_div_2_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",33)(1,"span",34),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_4_div_2_span_2_Template,2,0,"span",35),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_4_div_2_span_3_Template,2,1,"span",36),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_4_div_2_span_4_Template,2,1,"span",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(5,QuestHeaderComponent_div_4_div_2_mat_icon_5_Template,3,3,"mat-icon",37),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_4_div_2_mat_icon_6_Template,2,0,"mat-icon",38),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(7,QuestHeaderComponent_div_4_div_2_mat_icon_7_Template,2,0,"mat-icon",39),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(8,QuestHeaderComponent_div_4_div_2_i_8_Template,1,0,"i",40),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let E;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matTooltip",A.audioName),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(E=A.q.quest.parts[0].text.trim())&&E.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.isLoadFalseAudio&&A.isLoadedAudio&&A.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.isLoadFalseAudio&&A.isLoadedAudio&&!A.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.isLoadedAudio)}}function QuestHeaderComponent_div_4_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(1,QuestHeaderComponent_div_4_div_1_Template,4,0,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_4_div_2_Template,9,8,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"input",28,29),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("input",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.selectFileAudio(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();let E;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(A.isHasAudio||null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(E=A.q.quest.parts[0].text.trim())&&E.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.isHasAudio)}}function QuestHeaderComponent_div_5_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",47)(1,"div",33)(2,"mat-select",48)(3,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(9,"mat-option",49),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(11,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngModel",A.q.type)("disabled",!0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,8,"lang_testbank_create_exam_width_file_docx_essay")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,10,"lang_auto_trac_nghiem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(11,12,"lang_auto_dien_tu")," ")}}function QuestHeaderComponent_div_6_button_6_Template(ut,J){1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",52)(1,"mat-icon",53),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2,"cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()())}function QuestHeaderComponent_div_6_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",47)(1,"div",33)(2,"mat-chip-listbox")(3,"mat-chip",50),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("removed",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.setTag())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_6_button_6_Template,3,0,"button",51),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()}if(2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(),E=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);let h;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",E),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(5,3,"azt_lang_tag_"+A.q.tag[0].code)," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(h=A.q.quest.parts[0].text.trim())&&h.startsWith("[@")))}}function QuestHeaderComponent_button_9_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",54),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.chooseQuest(h.q))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(2,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()}2&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(2,1,"lang_auto_chon")," "))}function QuestHeaderComponent_button_10_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",55),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",57)(4,"path",58),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&ut){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",A)}}function QuestHeaderComponent_ng_container_11_button_1_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",60),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.changeQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"span",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"svg",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(4,"path",62)(5,"path",63)(6,"path",64)(7,"path",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"lang_auto_doi_cau_khac"))}function QuestHeaderComponent_ng_container_11_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(1,QuestHeaderComponent_ng_container_11_button_1_Template,8,3,"button",59),_angular_core__WEBPACK_IMPORTED_MODULE_4__.BQk()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.similar&&A.notOnlyQuestEdit)}}function QuestHeaderComponent_ng_template_12_button_0_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",67),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.changeQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"span",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"svg",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(4,"path",62)(5,"path",63)(6,"path",64)(7,"path",65),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"lang_auto_doi_cau_khac"))}function QuestHeaderComponent_ng_template_12_Template(ut,J){if(1&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(0,QuestHeaderComponent_ng_template_12_button_0_Template,8,3,"button",66),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.similar&&A.notOnlyQuestEdit)}}function QuestHeaderComponent_button_14_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",68),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.randomQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"span",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"svg",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(4,"path",69)(5,"path",70)(6,"path",71)(7,"path",72)(8,"path",73),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&_angular_core__WEBPACK_IMPORTED_MODULE_4__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(1,1,"azt_lang_editor_random_again"))}function QuestHeaderComponent_button_15_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"button",74)(1,"span",61),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",56),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"circle",75)(4,"circle",76)(5,"circle",77),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()),2&ut){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(17);_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",A)}}function QuestHeaderComponent_li_20_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",78),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.setFixAns())}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",79),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"line",80)(4,"path",81),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(9,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}if(2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AsE("",A.q.quest.isFixAns?_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,2,"lang_auto_bo_co_dinh"):_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,4,"lang_auto_co_dinh")," ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(9,6,"lang_auto_dap_an"),"")}}function QuestHeaderComponent_li_21_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",82),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.copyContent(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"rect",84)(4,"path",85),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(7,1,"lang_auto_copy_noi_dung")," "))}function QuestHeaderComponent_li_22_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",86),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.cut(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"circle",87)(4,"circle",88)(5,"line",89)(6,"line",90)(7,"line",91),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(10,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(10,1,"lang_auto_cat")," "))}function QuestHeaderComponent_li_23_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",92),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(z.del(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",83),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",93)(4,"path",94)(5,"path",95),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()}2&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,1,"lang_auto_xoa")," "))}function QuestHeaderComponent_li_24_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",96),_angular_core__WEBPACK_IMPORTED_MODULE_4__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(2,"svg",79),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(3,"path",97)(4,"path",98)(5,"path",99),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()),2&ut){_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(26);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("matMenuTriggerFor",A),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(8,2,"lang_auto_gan_nhan")," ")}}function QuestHeaderComponent_div_27_li_2_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"a",101),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){const z=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A).$implicit,w=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(w.setTag(z))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&ut){const A=J.$implicit,E=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let h;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",null!==(h=A[E.commonService.getCurrentLang()+"Name"])&&void 0!==h?h:A.enName," ")}}function QuestHeaderComponent_div_27_li_3_Template(ut,J){1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(1,"hr",102),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA())}function QuestHeaderComponent_div_27_li_4_Template(ut,J){if(1&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li")(1,"button",103),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_4__.CHM(A);const h=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);let z;return _angular_core__WEBPACK_IMPORTED_MODULE_4__.KtG(h.applyTagAll(null!==(z=h.q.tag)&&void 0!==z?z:[]))}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(3,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()}if(2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("disabled",!A.q.tag),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(3,2,"lang_auto_ap_dung_cho_cac_cau_con_lai")," ")}}function QuestHeaderComponent_div_27_Template(ut,J){if(1&ut&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",14)(1,"ul",15),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(2,QuestHeaderComponent_div_27_li_2_Template,3,1,"li",100),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_27_li_3_Template,2,0,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_27_li_4_Template,4,4,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&ut){const A=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngForOf",A.questionTags),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit)}}let QuestHeaderComponent=(()=>{class QuestHeaderComponent extends src_app_core_supers_mybase_component__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(ut,J,A){super(),this.cdnService=ut,this.shepherdService=J,this.browserStorageService=A,this.index=0,this.notOnlyQuestEdit=!0,this.showType=!0,this.similar=!1,this.questionTags=[],this.onLabelClick=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onHotKeyPointSync=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onApplyAllTag=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onError=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onCopy=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onCut=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onChooseSimilar=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onDel=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onChangeQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onRandomQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.onExtraInfo=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.isHasAudio=!1,this.isLoadedAudio=!1,this.isLoadFalseAudio=!1,this.audioName="",this.audioMime="",this.audioUrl="",this.isTooltipPoint=!1,this.isPlayingAudio=!1,this.showPointInput=!1,this.isMobile=!1,this.q={label:"",quest:{label:0,answers:[],parts:[]},answers:[],renderedStr:""}}chooseQuest(ut){this.onChooseSimilar.emit(ut)}ngAfterViewInit(){setTimeout(()=>{const ut=document.getElementById("azt_tour_1"),J=[{attachTo:{element:"#azt_tour_1",on:"bottom"},buttons:[{action(){return this.cancel()},classes:"btn btn-primary w-20",text:this.commonService.myTranslateInstant("lang_buttom_close")}],classes:"box",id:"intro",title:this.commonService.myTranslateInstant("lang_core_change_to_the_same_question"),text:this.commonService.myTranslateInstant("lang_core_click_here_to_select_a_similar_question_from_the_general_bank_of_azota")}],A=this.browserStorageService.getSimpleStorage("show_tour_quest_header");0===this.index&&!A&&!this.shepherdService.isActive&&ut&&(this.shepherdService.defaultStepOptions={classes:"box",scrollTo:!0,cancelIcon:{enabled:!1}},this.shepherdService.requiredElements=[{selector:"#azt_tour_1"}],this.shepherdService.modal=!0,this.shepherdService.addSteps(J),this.shepherdService.start(),this.browserStorageService.saveSimpleStorage("show_tour_quest_header","1"))},500)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable();let ut=this.commonService.willDeleteParseJson(this.q.attachments||"[]");this.q.audio?(this.isHasAudio=!0,this.audioName=this.q.audio.name,this.isLoadedAudio=!0,this.isLoadFalseAudio=!1):ut.forEach(J=>{(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(J.mimes||"")&&(this.isHasAudio=!0,this.audioUrl=J.url||"",this.audioName=J.name||"",this.audioMime=J.mimes||""),this.audioUrl&&this.loadAudio()})}loadAudio(){this.isLoadedAudio=!1,fetch(this.cdnService.getRawCdnLink(this.audioUrl)).then(ut=>{if(!ut.ok)throw new Error("Something went wrong");ut.blob().then(J=>{this.q.audio=new File([J],this.audioName,{type:this.audioMime}),this.isLoadedAudio=!0,this.isLoadFalseAudio=!1})}).catch(()=>{this.isLoadedAudio=!0,this.isLoadFalseAudio=!0;let ut=this.commonService.myTranslateInstant("lang_auto_khong_the_tai_tep_audio_cho"),J=this.commonService.myTranslateInstant("lang_auto_vui_long_thu_lai");this.showErrorSnack(`${ut} ${this.q.label} ${J}`)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}changeQuest(){this.shepherdService.isActive&&this.shepherdService.cancel(),this.onChangeQuest.emit(this.q)}randomQuest(){this.onRandomQuest.emit()}removeAudio(){this.q.attachments=void 0,this.stopAudio(),this.q.audio=void 0,this.isHasAudio=!1,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio}),this.inpAudioUpload&&(this.inpAudioUpload.nativeElement.value=null)}selectFileAudio(ut){var J,A;(0,src_app_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(ut.target.files[0].type)?(this.stopAudio(),this.q.audio=ut.target.files[0],this.audioName=null!==(A=null===(J=this.q.audio)||void 0===J?void 0:J.name)&&void 0!==A?A:"",this.isLoadedAudio=!0,this.isLoadFalseAudio=!1,this.isHasAudio=!0,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio})):this.showErrorSnack("lang_auto_file_dinh_kem_phai_la_mot_audio")}showMarkInput(){this.showPointInput=!0,setTimeout(()=>{var ut;null===(ut=this.markInput)||void 0===ut||ut.nativeElement.focus()},50)}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.showPointInput&&this.onExtraInfo.emit({q:this.q,type:"point",data:this.q.point}),this.isTooltipPoint=!1,this.showPointInput=!1}setFixAns(){this.q.quest.isFixAns=!this.q.quest.isFixAns,this.onExtraInfo.emit({q:this.q,type:"fix",data:this.q.quest.isFixAns})}setTag(ut){this.q.tag=ut?[ut]:[],this.onExtraInfo.emit({q:this.q,type:"tag",data:this.q.tag})}applyTagAll(ut){this.onApplyAllTag.emit(ut)}copyContent(ut){this.onCopy.emit(this.q)}cut(ut){this.onCut.emit(this.q)}del(ut){this.onDel.emit(this.q)}getTagName(ut){return ut.toUpperCase().split(" ").map(J=>{var A;return null!==(A=J[0])&&void 0!==A?A:""}).join("")}checkKeyup(ev){var _a;if("Enter"==ev.code){let v=null===(_a=this.markInput)||void 0===_a?void 0:_a.nativeElement.value;if(!/^[\d\.\+\-\*\/\s\(\)]+$/.test(v)){let ut=this.commonService.myTranslateInstant("lang_auto_du_lieu_diem_ban_nhap_khong_hop_le_dot");return void this.onError.emit(ut)}if(v=eval(v),this.q.point=Math.round(100*v)/100,ev.ctrlKey)this.isTooltipPoint=!1,this.showPointInput=!1,this.onHotKeyPointSync.emit(this.q.point);else{window.focus();let ut=document.activeElement;ut&&ut.blur()}}}isPlayAudio(){var ut;return!(!window.playMedia||window.playMedia.id!==(null===(ut=this.q)||void 0===ut?void 0:ut.quest.label)||!window.playMedia.played)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0,this.isPlayingAudio=!1)}playAudio(){var ut;window.playMedia&&window.playMedia.pause(),this.q.audio&&(window.playMedia=new Audio(URL.createObjectURL(this.q.audio)),window.playMedia.id=null===(ut=this.q)||void 0===ut?void 0:ut.quest.label,window.playMedia.play(),this.isPlayingAudio=!0)}labelClick(){var ut;this.onLabelClick.emit(null===(ut=this.q)||void 0===ut?void 0:ut.quest.parts)}}return QuestHeaderComponent.\u0275fac=function ut(J){return new(J||QuestHeaderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(src_app_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__.U),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(angular_shepherd__WEBPACK_IMPORTED_MODULE_5__.a),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(src_app_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__.z))},QuestHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Xpm({type:QuestHeaderComponent,selectors:[["app-quest-header"]],viewQuery:function ut(J,A){if(1&J&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Gf(_c1,5)),2&J){let E;_angular_core__WEBPACK_IMPORTED_MODULE_4__.iGM(E=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CRH())&&(A.markInput=E.first),_angular_core__WEBPACK_IMPORTED_MODULE_4__.iGM(E=_angular_core__WEBPACK_IMPORTED_MODULE_4__.CRH())&&(A.inpAudioUpload=E.first)}},inputs:{q:"q",index:"index",notOnlyQuestEdit:"notOnlyQuestEdit",showType:"showType",similar:"similar",questionTags:"questionTags"},outputs:{onLabelClick:"onLabelClick",onHotKeyPointSync:"onHotKeyPointSync",onApplyAllTag:"onApplyAllTag",onError:"onError",onCopy:"onCopy",onCut:"onCut",onChooseSimilar:"onChooseSimilar",onDel:"onDel",onChangeQuest:"onChangeQuest",onRandomQuest:"onRandomQuest",onExtraInfo:"onExtraInfo"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_4__.qOj],decls:28,vars:17,consts:[[1,"box-service-question"],["azt-track-service","quest-header-7xvJmr2fh",1,"box-service-question-name",3,"click"],["class","box-service-inp-point",4,"ngIf"],["class","box-service-attach-files cursor-pointer",4,"ngIf"],["class","box-service-type",4,"ngIf"],[1,"box-service-type",2,"padding-right","0px","padding-left","0px"],[1,"first-text","ml-2","sm:ml-0"],["azt-track-service","quest-header-QjB4b6i1y","class","btn btn-primary w-20","style","vertical-align: middle;",3,"click",4,"ngIf"],["class","btn btn-transparent",3,"matMenuTriggerFor","matTooltip",4,"ngIf"],[4,"ngIf","ngIfElse"],["noAddTourAnchor",""],["azt-track-service","quest-header-HExiRUm87","style","width: 20px","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["style","width: 20px","class","btn btn-transparent",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngIf"],["tags","matMenu"],["class","dropdown-menu show relative w-56",4,"ngIf"],[1,"box-service-inp-point"],[1,"first-text","cursor-pointer"],["azt-track-service","quest-header-1hL1VYrnNh",3,"ngClass","click"],[1,"inp-point",3,"ngClass"],[3,"size","ngModel","keyup","focus","focusout","ngModelChange"],["markInput",""],[1,"box-service-attach-files","cursor-pointer"],["azt-track-service","quest-header-i7a1qGxHBu","class","first-text","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","first-text",4,"ngIf"],["type","file","accept","audio/ogg;audio/mpeg;audio/wav",1,"hide",3,"input"],["inpAudioUpload",""],["azt-track-service","quest-header-i7a1qGxHBu",1,"first-text",2,"white-space","nowrap",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"],[1,"first-text"],[1,"name-audio",3,"matTooltip"],["azt-track-service","quest-header-bBZd9Ohvof","class","delete",3,"click",4,"ngIf"],["style","\n            color: #9e9e9e;\n            text-decoration: line-through;",4,"ngIf"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click",4,"ngIf"],["azt-track-service","quest-header-SjZKht1L9l",3,"click",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["azt-track-service","quest-header-bBZd9Ohvof",1,"delete",3,"click"],[2,"color","#9e9e9e","text-decoration","line-through"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click"],["azt-track-service","quest-header-SjZKht1L9l",3,"click"],[1,"fa","fa-spinner","fa-spin"],[1,"box-service-type"],[3,"ngModel","disabled"],[3,"value"],[1,"tag-chip",3,"matMenuTriggerFor","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"font-size","15px"],["azt-track-service","quest-header-QjB4b6i1y",1,"btn","btn-primary","w-20",2,"vertical-align","middle",3,"click"],[1,"btn","btn-transparent",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],["d","M7 7h.01"],["id","azt_tour_1","azt-track-service","quest-header-3k0hFmhY0C","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["id","azt_tour_1","azt-track-service","quest-header-3k0hFmhY0C",1,"btn","btn-transparent",3,"matTooltip","click"],[1,"w-5","h-5","inline-block"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","quest-header-6bPT_kB0nD","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-6bPT_kB0nD",1,"btn","btn-transparent",3,"matTooltip","click"],["azt-track-service","quest-header-HExiRUm87",1,"btn","btn-transparent",2,"width","20px",3,"matTooltip","click"],["d","m17 2 4 4-4 4"],["d","M3 11v-1a4 4 0 0 1 4-4h14"],["d","m7 22-4-4 4-4"],["d","M21 13v1a4 4 0 0 1-4 4H3"],["d","M11 10h1v4"],[1,"btn","btn-transparent",2,"width","20px",3,"matMenuTriggerFor"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["azt-track-service","quest-header-NheQ3Js3Ya",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-5","lucide","mr-2"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["azt-track-service","quest-header-gKmo4Y1J7u",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","quest-header-Y1KbHn_mie",1,"dropdown-item",3,"click"],["cx","6","cy","6","r","3"],["cx","6","cy","18","r","3"],["x1","20","y1","4","x2","8.12","y2","15.88"],["x1","14.47","y1","14.48","x2","20","y2","20"],["x1","8.12","y1","8.12","x2","12","y2","12"],["azt-track-service","quest-header-84pgUW5VoW",1,"dropdown-item",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["mat-menu-item","",1,"dropdown-item",3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[4,"ngFor","ngForOf"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","quest-header-RiQa-w8Jwo",1,"dropdown-item","w-full",3,"disabled","click"]],template:function ut(J,A){if(1&J&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(){return A.labelClick()}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,QuestHeaderComponent_div_3_Template,13,17,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(4,QuestHeaderComponent_div_4_Template,5,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(5,QuestHeaderComponent_div_5_Template,12,14,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(6,QuestHeaderComponent_div_6_Template,7,5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(7,"div",5)(8,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(9,QuestHeaderComponent_button_9_Template,3,3,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(10,QuestHeaderComponent_button_10_Template,5,4,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(11,QuestHeaderComponent_ng_container_11_Template,2,1,"ng-container",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(12,QuestHeaderComponent_ng_template_12_Template,1,1,"ng-template",null,10,_angular_core__WEBPACK_IMPORTED_MODULE_4__.W1O),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(14,QuestHeaderComponent_button_14_Template,9,3,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(15,QuestHeaderComponent_button_15_Template,6,1,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(16,"mat-menu",null,13)(18,"div",14)(19,"ul",15),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(20,QuestHeaderComponent_li_20_Template,10,8,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(21,QuestHeaderComponent_li_21_Template,8,3,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(22,QuestHeaderComponent_li_22_Template,11,3,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(23,QuestHeaderComponent_li_23_Template,9,3,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(24,QuestHeaderComponent_li_24_Template,9,4,"li",16),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(25,"mat-menu",null,17),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(27,QuestHeaderComponent_div_27_Template,5,3,"div",18),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()()),2&J){const E=_angular_core__WEBPACK_IMPORTED_MODULE_4__.MAs(13);let h,z,w;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(A.q.label),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit&&!A.similar),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.isMobile&&!A.similar),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.showType),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.q.tag&&A.q.tag.length>0&&!A.similar),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.similar),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(A.q.tag&&0!=A.q.tag.length||A.similar)),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",0===A.index)("ngIfElse",E),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.similar&&A.q.changeable),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!A.similar),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",1===A.q.type&&!(null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(h=A.q.quest.parts[0].text.trim())&&h.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",A.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(z=A.q.quest.parts[0].text.trim())&&z.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",!(null!=A.q.quest.parts[0]&&null!=A.q.quest.parts[0].text&&null!=(w=A.q.quest.parts[0].text.trim())&&w.startsWith("[@")))}},styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.box-service-pin-ans[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}.delete[_ngcontent-%COMP%]{color:red}  .mat-select-arrow-wrapper{margin-left:5px}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.name-audio[_ngcontent-%COMP%]{max-width:100px;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1}.name-audio[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding-right:5px}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}"]}),QuestHeaderComponent})()},2964:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FileParser=void 0;const E=A(82660),h=A(81606),z=A(94884),w=A(41366);J.FileParser=class _{constructor(){this.services=[],this.conf=""}loadConf(x){this.conf=x}init(){this.registerService(new w.WordService),this.registerService(new h.PdfService),this.registerService(new E.ImageService),this.registerService(new z.TableService)}registerService(x){x.loadConf(this.conf),this.services.push(x)}start(x){return new Promise((f,k)=>{let S=0;for(let T=0;T<this.services.length;T++)this.services[T].start(x).then(j=>{S++,j.supported?f(j):S===this.services.length&&k()})})}loadAllLibs(x){return new Promise(f=>{let k=0;const S=()=>{if(k===x.length)f(!0);else{const T=x[k];if(document.getElementById(T.name))k++,S();else{const j=document.createElement("script");j.setAttribute("src",T.link),j.setAttribute("id",T.name),j.setAttribute("async","false"),j.addEventListener("load",()=>{k++,S()},!1),document.body.appendChild(j)}}};S()})}}},28091:(ut,J,A)=>{J.uD=void 0;const h=A(2964);Object.defineProperty(J,"uD",{enumerable:!0,get:function(){return h.FileParser}});A(76994)},76994:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DocxParser=void 0;class A{constructor(){this.arrayBuffer=null,this.numberID=0}start(h){this.wmf||(this.wmf=new WMFConverter),this.file=h}reset(){this.file=void 0,this.arrayBuffer=void 0}load(){return new Promise(h=>{if(this.file)if("docx"===this.file.name.split(".").pop()?.toLocaleLowerCase()){const w=new FileReader;w.onloadend=()=>{this.arrayBuffer=w.result,h(!0)},w.readAsArrayBuffer(this.file)}else h(!1);else h(!1)})}toTextLines(){return new Promise((h,z)=>{this.load().then(w=>{if(w){const _=[],g=[];mammoth.convertToMarkdown({arrayBuffer:this.arrayBuffer},{styleMap:["b => ","i => ","u => "]}).then(k=>{k.value.split("\n").forEach(T=>{T.length>0&&(0===T.indexOf("\t")&&(T=T.substring(1)),T=this.convertImageString(T,g),_.push(T.replace(/\t/g,"    ").replace(/\\./g,".")))}),g.forEach(T=>{this.processImageWmf(T)}),h({str:_,maps:g})})}else z({msg:"File kh\xf4ng h\u1ed7 tr\u1ee3."})})})}processImageWmf(h){(h.link.indexOf("image/x-wmf")>=0||h.link.indexOf("image/x-emf")>=0)&&(h.link=this.wmf.toPNG(h.link))}convertImageString(h,z){for(;-1!==h.indexOf(A.IMG_MD_START);){const w="ha"+this.numberID,_=h.indexOf(A.IMG_MD_START),g=h.indexOf(")",_+1),x=h.substring(_+A.IMG_MD_START.length,g);z.push({id:w,link:x}),h=h.substring(0,_)+"[!img:"+w+"]"+h.substring(g+1,h.length),this.numberID++}return h}}J.DocxParser=A,A.IMG_MD_START="![]("},82660:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ImageService=void 0,J.ImageService=class A{constructor(){this.conf=""}toBase64(h){return new Promise((z,w)=>{const _=new FileReader;_.onload=()=>{z(_.result)},_.onerror=g=>{w(g)},_.readAsDataURL(h)})}isFileImage(h){return h&&"image"===h.type.split("/")[0]}generateIdRequired(h){let z="";const w="abcdefghijklmnopqrstuvwxyz0123456789",_=w.length;for(let g=0;g<h;g++)z+=w.charAt(Math.floor(Math.random()*_));return Math.floor(Date.now()/1e3)+z}loadConf(h){this.conf=h}start(h){return new Promise(z=>{this.isFileImage(h)?this.toBase64(h).then(w=>{const _="ih"+this.generateIdRequired(3),g={maps:[],str:[]};g.maps.push({id:_,link:w}),g.str.push("[!img:"+_+"]"),z({type:"image",supported:!0,data:g})}).catch(()=>{z({type:"image",supported:!1,data:{str:[],maps:[]}})}):z({type:"image",supported:!1,data:{str:[],maps:[]}})})}}},81606:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PdfService=void 0,J.PdfService=class A{constructor(){this.conf=""}isPdfDocument(h){return/^(?:application\/pdf)$/i.test(h.type)}loadConf(h){this.conf=h}start(h){return new Promise(z=>{this.isPdfDocument(h)?z({type:"pdf",supported:!0,data:{str:[],maps:[]}}):z({type:"pdf",supported:!1,data:{str:[],maps:[]}})})}cropQuestionContent(h,z){const w=[];let _=Number.MAX_VALUE;return h.answers.forEach(x=>{w.push({label:this.mergeContentCanvas(x.remove,z),content:this.mergeContentsCanvas(x.positions,z),conf:x}),_>x.positions[0].top&&(_=x.positions[0].top)}),h.positions[h.positions.length-1].heigh=_-h.positions[h.positions.length-1].top,{label:this.mergeContentCanvas(h.remove,z),content:this.mergeContentsCanvas(h.positions,z),ans:w,conf:h}}mergeContentsCanvas(h,z){let w=0,_=0,g=[];h.forEach(S=>{const T=this.mergeContentCanvas(S,z);w=T.width,_+=T.height,g.push(T)});const x=document.createElement("canvas");x.width=w,x.height=_;const f=x.getContext("2d");let k=0;return g.forEach(S=>{f?.drawImage(S,0,k,S.width,S.height,0,0,S.width,S.height),k+=S.height}),x}mergeContentCanvas(h,z){const w=z[h.pageIndex].canvas,_=document.createElement("canvas");return _.width=h.width,_.height=h.heigh,_.getContext("2d")?.drawImage(w,h.left,h.top,h.width,h.heigh,0,0,h.width,h.heigh),_}}},94884:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.TableService=void 0;const E=A(76994);J.TableService=class h{constructor(){this.conf="",this.docxParser=new E.DocxParser}loadConf(w){}start(w){return new Promise(_=>{_("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==w.type||"application/vnd.ms-excel"==w.type||".csv"==w.type?{type:"xlsx",supported:!0,data:{str:[],maps:[]}}:{type:"xlsx",supported:!1,data:{str:[],maps:[]}})})}}},41366:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.WordService=void 0;const E=A(76994);J.WordService=class h{constructor(){this.pattern_remove=/<a id="[^"]+"><\/a>/g,this.conf="",this.docxParser=new E.DocxParser}loadConf(w){}start(w){return new Promise(_=>{this.docxParser.start(w),this.docxParser.toTextLines().then(g=>{for(let x=0;x<g.str.length;x++)g.str[x]=g.str[x].replace(this.pattern_remove,"");_({type:"docx",supported:!0,data:g})}).catch(g=>{_({type:"docx",supported:!1,data:{str:[],maps:[]}})})})}}},94358:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Utils=J.CONST=void 0;class A{static load(z){let w=JSON.parse(z);Object.assign(this,w)}}J.CONST=A,A.RENDER_SCALE=2,A.LINE_SMALL_HEIGHT=7*A.RENDER_SCALE,A.SPLIT_MARGIN=3*A.RENDER_SCALE,A.INTERSEC_MARGIN=20*A.RENDER_SCALE,A.LINE_MAGIN=2*A.RENDER_SCALE,A.MARGIN_LEFT=2*A.RENDER_SCALE,A.ENABLE_IMAGE_PROCESS=!0,A.STEP_SIZE=2,A.CROP_FULL_WIDTH=!0,A.OVERLAP=.5,A.QUESTION_PATTERN=[],A.QUESTION_PATTERN2=[],A.BREAK_LINE_PATTERN=[],A.SECTION_PATTERN_LOWER=[],A.SECTION_PATTERN_NORMAL=[],A.KICK_PATTERN=[],A.TVCN_CHAR=[],A.HET_PATTERN=[],A.DAPAN_PATTERN=[],A.HUONGDAN_PATTERN=[],A.MULTIPLE_ANS_PATTERN=[],A.DRAW_RESULT="",A.SKIP_CHAR=[],A.FOOTER_PATTERN=[],A.HELP_ANS_PATTERN=[],J.Utils=class E{static capitalizeFirstLetter(z){return z.charAt(0).toUpperCase()+z.slice(1)}static tagLang(z){let w=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return w.has(z)?w.get(z):z}static parseInclude(z){var w;let _=z.split("=>"),g=_.length>1?_[1]:-1,T=_[0];T=T.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let X,P=T.split("."),j=[],Z=[],M=[],O=[],K=[],H=[],G=[],nt=[],it=[],ot=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),ft=[];for(let st=P.length-1;st>=0;st--){let Mt=P[st].trim();if(/^\d*$/.test(Mt)){X=+Mt;continue}let ee=Mt.split(",");for(let St of ee){let Jt=St.split(":"),yt=Jt[0],qt=null!==(w=Jt[1])&&void 0!==w?w:"";if(/^G[\-\d]+$/.test(yt.trim()))j.push(+yt.trim().substring(1));else if(/^Q[\-\d]+$/.test(yt.trim()))M.push(+yt.trim().substring(1)),nt.push(qt),ft.push({type:"QUEST",id:+yt.trim().substring(1)});else if(/^C[\-\d]+$/.test(yt.trim())){let Yt=+yt.trim().substring(1);O.push(Yt),H.push(qt),ft.push({type:""!=qt?"SHARE":"CATEGORY",id:Yt})}else if(/^K[\-\d]+$/.test(yt.trim())){let Yt=+yt.trim().substring(1);O.push(Yt),H.push(qt),ft.push({type:""!=qt?"SHARE":"KNOWLEDGE",id:Yt})}else if(/^T[\-\d]+$/.test(yt.trim()))Z.push(+yt.trim().substring(1)),G.push(qt),ft.push({type:"EXAM",id:+yt.trim().substring(1),groupIds:j});else if(/^F:/.test(St.trim())){let Yt=St.trim().substring(2);it.push(ot.has(Yt)?ot.get(Yt):Yt)}}if(ft.length>0){if(it.length>0){let St=["TL","TN","\u0110T","ES","MC","FB"];for(let Jt of ft)Jt.tags=it.filter(yt=>St.indexOf(yt)<0),Jt.answerTypes=it.filter(yt=>St.indexOf(yt)>=0).map(yt=>"TL"==yt||"ES"==yt?3:"TN"==yt||"MC"==yt?1:4)}break}}return M.length>0&&(X=M.length),K.push(...H),K.push(...G),K.push(...nt),{paths:ft,shareTypes:K,catId:O,examId:Z,tag:it,groupId:j,questId:M,getNum:X,idx:g}}static getNumberFromStr(z){let w=z.match(/(\d+)/);return w?w[0]:""}static removeAccents(z){let w=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const _ of w){let g=new RegExp("["+_.substring(1)+"]","g");z=z.replace(g,_[0])}return z}static zeroPad(z,w){return z=z||2,(new Array(z).join("0")+w).slice(-1*z)}}},28594:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ExamParser=void 0;const E=A(94358),h=A(29218),z=A(43543),w=A(12395),_=A(93286),g=A(85278),x=A(536),f=A(94694),k=A(4153),S=A(79972),T=A(97749),P=A(54049),j=A(58171);J.ExamParser=class Z{constructor(O){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",E.CONST.load(O)}setLang(O){this.lang=O,this.DEF_QUEST_NAME="vi"==O?"c\xe2u ":"question "}parse(O,K,H){var G,nt,X,it,ot,ft,xt,st,Mt,ee;let St=this.findItems(O,H);K&&console.log("items",St);let Jt=new Map,yt=[],qt=null,Yt=0,Ft="main",pe=0,Me=0,Bn=[],jn=!0,oe=new Map;for(let he=0;he<St.length;he++){let $t=St[he],Ie=he==St.length-1?void 0:St[he+1],Vt=this.getPartInfo(O,$t,Ie);if(this.loadText(O,Vt),$t.type==k.SectionParser.TYPE_NAME&&"main"==Ft&&(Yt++,yt.push({label:Yt,parts:Vt,answers:[],isGroup:!0})),$t.type==f.QuestionParser.TYPE_NAME){if(Ie&&Ie.type==h.AnswerParser.TYPE_NAME&&Ie.pos[2]>0){let t;for(let le=he+1;le<St.length;le++)if(St[le].type!=h.AnswerParser.TYPE_NAME){t=St[le];break}Vt=this.getPartInfo(O,$t,t),this.loadText(O,Vt)}let be=$t.label?+$t.label:0,Gt=Jt.get(be);Gt&&"main"!=Ft?(Gt.help=Vt,qt=Gt):"main"==Ft&&(Gt={label:be,olabel:$t.olabel,answers:[],parts:Vt},Yt>0&&(Gt.group=Yt),Jt.set(be,Gt),yt.push(Gt),qt=Gt)}if($t.type==h.AnswerParser.TYPE_NAME&&qt){let be=!1;if(1==Vt.length){let $e=O[Vt[0].lineIdx].replace(/\|/g,"").trim().match(E.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=$e&&$e.length>0&&(be=!0)}let Gt=""==$t.olabel;$t.pos[2]>0&&(Vt=[Vt[0]],Vt[0].e=$t.pos[2],this.loadText(O,Vt),Gt=!0);let t={label:null!==(G=$t.label)&&void 0!==G?G:"",isCorrect:"*"==$t.extInfo,parts:Gt?[Vt[0]]:Vt,isInline:Gt,olabel:$t.olabel};qt.answers.push(t),qt.isFixAns=Gt||be}if($t.type==x.IncludeParser.TYPE_NAME)if($t.label&&/\.\d*$/.test($t.label)){let be=$t.label.split("."),Gt=+be[be.length-1],t=null!==(nt=Vt[0].text)&&void 0!==nt?nt:"",le=null!==(X=oe.get(t))&&void 0!==X?X:-1;if(le++,oe.set(t,le),0==Gt){Yt++;let Ce=t+"=>"+le+"-0",On=[];On.push(...Vt),On[0]={lineIdx:Vt[0].lineIdx,s:0,b:0,text:Ce},yt.push({label:Yt,parts:On,answers:[],isGroup:!0});continue}let Ln=qt?qt.label:0,$e=0;for(let Ce=0;Ce<Gt;Ce++){$e++;let On=t+"=>"+le+"-"+Ce,Zn=[];Zn.push(...Vt),Zn[0]={lineIdx:Vt[0].lineIdx,s:0,b:0,text:On};let si={label:Ln+$e,olabel:qt?null===(it=qt.olabel)||void 0===it?void 0:it.replace(/\d+/,Ln+$e+""):this.DEF_QUEST_NAME+(Ln+$e)+".",answers:[],parts:Zn};Jt.set(si.label,si),yt.push(si),qt=si}}else if($t.label&&/\.Q\d+(,Q\d+)*$/.test($t.label)){let t=null!==(ot=$t.label.split(".").pop()?.split(",").length)&&void 0!==ot?ot:0;for(let le=0;le<t;le++){let Ln={lineIdx:Vt[0].lineIdx,s:0,b:0,text:Vt[0].text+"=>0-"+le},$e=qt?qt.label:0,Ce={label:$e+1,olabel:qt?null===(ft=qt.olabel)||void 0===ft?void 0:ft.replace(/\d+/,$e+1+""):this.DEF_QUEST_NAME+($e+1)+".",answers:[],parts:[Ln]};Jt.set(Ce.label,Ce),yt.push(Ce),qt=Ce}}$t.type==g.HuongDanParser.TYPE_NAME&&qt&&(Vt.splice(0,1),Ie&&Ie.type==f.QuestionParser.TYPE_NAME&&Ie.label&&!Jt.has(+Ie.label)||!Ie||Ie.type==k.SectionParser.TYPE_NAME?"main"==Ft&&(qt.help=Vt):"main"==Ft&&(Ft="info",pe=null!==(xt=$t.lineIdx)&&void 0!==xt?xt:0),pe>0&&0==Me&&(Me=null!==(st=$t.lineIdx)&&void 0!==st?st:0)),($t.type==_.HetParser.TYPE_NAME||$t.type==w.DapAnParser.TYPE_NAME)&&(Ft="info",pe=null!==(Mt=$t.lineIdx)&&void 0!==Mt?Mt:0),$t.type==z.DapAnChiTietParser.TYPE_NAME&&jn&&Bn.push($t),$t.type!=z.DapAnChiTietParser.TYPE_NAME&&Bn.length>0&&(jn=!1)}let Be=new z.DapAnChiTietParser,Wn=Be.getAnsMC(O,Bn),yi=new Map;if(pe>0){let he=Me>0?O.slice(pe,Me):O.slice(pe);yi=Be.getAnsStr(he)}for(const he of yt){if(he.isGroup)continue;let $t=Wn.get(he.label),Ie=yi.get(he.label),Vt=null;if(he.help&&(Vt=Be.getAnsFromHelp(he.help,O)),he.answers.length>0){let be=he.answers.filter(Gt=>Gt.isCorrect);for(let Gt=1;Gt<be.length;Gt++)be[Gt].isCorrect=!1;if(0==be.length){let Gt=null!==(ee=$t??Vt)&&void 0!==ee?ee:Ie?Ie[0]:"";for(const t of he.answers)if(t.label==Gt){t.isCorrect=!0;break}}}else he.strAns=Ie}return K&&console.log("lstQuest",yt),yt}cleanRes(O){for(const K of O){for(let H=K.parts.length-1;H>=0;H--)""==K.parts[H].text&&K.parts.splice(H,1);for(const H of K.answers)for(let G=H.parts.length-1;G>=0;G--)""==H.parts[G].text&&H.parts.splice(G,1);if(K.help)for(let H=K.help.length-1;H>=0;H--)""==K.help[H].text&&K.help.splice(H,1)}}getPartInfo(O,K,H){var G,nt;let X=null!==(G=K.lineIdx)&&void 0!==G?G:0,it=null!==(nt=H?.lineIdx)&&void 0!==nt?nt:O.length-1;if(X==it)return H?[{lineIdx:X,b:K.pos[0],s:K.pos[1],e:H?.pos[0]}]:[{lineIdx:X,b:K.pos[0],s:K.pos[1]}];{let ot=[];ot.push({lineIdx:X,b:K.pos[0],s:K.pos[1]});for(let ft=X+1;ft<it;ft++)ot.push({lineIdx:ft,b:0,s:0});if(H){let ft=H?.pos[0];""!=O[it].substring(0,ft).replace(/\|/g,"").trim()&&ot.push({lineIdx:it,b:0,s:0,e:ft})}else ot.push({lineIdx:it,b:0,s:0});return ot}}loadText(O,K){for(const H of K)H.text=O[H.lineIdx].substring(H.s,H.e)}findItems(O,K){let H=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];K&&(H=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let G=[new P.RemoveRule,new S.ModifyAnsRule,new j.SameKindRule,new T.RemoveDupRule],nt=[{parser:new z.DapAnChiTietParser,also:[2]},{parser:new k.SectionParser,from:[0],to:[1],also:[3]},{parser:new f.QuestionParser,from:[0],to:[1],also:[3]},{parser:new h.AnswerParser},{parser:new _.HetParser,to:[2]},{parser:new w.DapAnParser,to:[2],also:[6]},{parser:new g.HuongDanParser},{parser:new x.IncludeParser,from:[0],to:[1]}],X=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],it=X[0],ot=[],ft=0;for(const Mt of O)if(""!=Mt){for(const ee of it.expect){let St=nt[ee],Jt=St.parser.parse(Mt);if(Jt.length>0){if(Jt.forEach(yt=>yt.lineIdx=ft),ot.push(...Jt),St.parser.TYPE==g.HuongDanParser.TYPE_NAME){let yt=ot.filter(Ft=>Ft.type==f.QuestionParser.TYPE_NAME).length,qt=ot.filter(Ft=>Ft.type==g.HuongDanParser.TYPE_NAME).length,Yt=ot.filter(Ft=>Ft.type==w.DapAnParser.TYPE_NAME).length;if(it.name==X[1].name&&yt>1&&0==qt){it=X[2];let Ft=X[2].expect.indexOf(6);Ft>=0&&X[2].expect.splice(Ft,1)}else if(it.name==X[2].name){Yt>0&&nt[0].parser.off();let Ft=X[2].expect.indexOf(6);Ft>=0&&X[2].expect.splice(Ft,1)}}if(St.to){let yt=0;for(const qt of St.to)(St.from&&X[St.from[yt]]==it||!St.from)&&(it=X[qt])}if(St.also)for(const yt of St.also){let Yt=ot[ot.length-1].pos[1],Ft=nt[yt].parser.parse(Mt.substring(Yt));Ft.length>0&&(Ft.forEach(pe=>{pe.lineIdx=ft;for(let Me=0;Me<pe.pos.length;Me++)pe.pos[Me]=pe.pos[Me]+Yt}),ot.push(...Ft))}break}}ft++}else ft++;let xt=[];for(const Mt of H)for(const ee of G){let St=ee.load(Mt);if(St){xt.push(St);break}}let st=0;for(;st<ot.length;){for(const Mt of xt){let ee=ot.length;if(Mt.run(ot,st)){let St=ee-ot.length;St>0&&(st-=St+1);break}}st++}return ot}}},9923:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.EditorApiService=void 0,J.EditorApiService=class A{}},66071:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ExamIntellisense=void 0;const E=A(28594),h=A(84367),z=A(67261),w=A(94807),_=A(64430),g=A(88197),x=A(82619);J.ExamIntellisense=class f{constructor(S){this.conf=S,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new E.ExamParser(S),this.apiService=null}setSingleMode(S){this.singleMode=S}setLines(S){this._lines=S}setApiService(S){this.apiService=S}parse(){return this._lstQuest=this.exParser.parse(this._lines,!0,!0),this._lstQuest}getAutofillValue(S,T,P){var j;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[S].trim()))return[];let M=[],O=this.getCurPos(S,T),K=O[0],H=O[1],G=O[2],nt=this._lines[S>0?S-1:0];if(K&&K.parts.length>0&&null!==(j=K.parts[0].text)&&void 0!==j&&j.trim().startsWith("[@"),nt.startsWith("[@")||""==nt.trim())return[];if(H&&K){let X="ABCDEFGHIJKLMN",it=X.indexOf(H.label),ot=X[it+1]+H.olabel+" ",ft=H.label+H.olabel+" ";if(!this.singleMode&&this._lines[H.parts[0].lineIdx].trim()==ft.trim()&&H.parts[0].lineIdx!=S){let xt=K.parts[0],Mt=this._lines[xt.lineIdx].substring(xt.b,xt.s).replace(/\d+/,K.label+1+"")+" ";return M.push(`${H.parts[0].lineIdx}|0|${ft.length}|`),M.push(`${S}|${T}|${T}|${Mt}`),M}if(H.label<"D"&&("enter"!=P||S>0&&""!=this._lines[S-1].trim()&&H.parts[0].lineIdx!=S))return M.push(`${S}|${T}|${T}|${ot}`),M;if(!this.singleMode&&H.label>="D"&&H.parts[0].lineIdx!=S&&"enter"==P&&S==this._lines.length-1){let xt=K.parts[0],Mt=this._lines[xt.lineIdx].substring(xt.b,xt.s).replace(/\d+/,K.label+1+"")+" ";return M.push(`${S}|${T}|${T}|\n${Mt}`),M}}if(!H&&!G&&K&&"enter"==P&&""==this._lines[S].trim()&&S>0&&""!=this._lines[S-1].trim()){let X=K.parts[0],it=this._lines[X.lineIdx].substring(X.s).trim();if(this.singleMode||""!=it)if(0==K.answers.length)M.push(`${S}|${T}|${T}|A. `);else if(!this.singleMode){let ot=K.parts[0],xt=this._lines[ot.lineIdx].substring(ot.b,ot.s).replace(/\d+/,K.label+1+"")+" ";M.push(`${S}|${T}|${T}|${xt}`)}return M}return M}getSuggestions(S,T,P,j){return new Promise(Z=>{var M,O;let K=null!==(M=j?.substring(0,T))&&void 0!==M?M:"",H=this.singleMode?[new h.AnsSugg,new w.EndSugg,new z.ChooseSugg]:[new _.IncludeSugg(this.apiService,Z),new g.QuestSugg,new h.AnsSugg,new x.SectionSugg,new w.EndSugg,new z.ChooseSugg],G=[],nt=this.getCurPos(S,T),X=nt[0],it=nt[1],xt=X?{type:nt[2]?"h":it?"a":"q",quest:X,ansLabel:it?it.label:void 0,secLabel:X.group?null===(O=this._lstQuest.filter(st=>st.isGroup).pop())||void 0===O?void 0:O.parts[0].text:void 0,lineIdx:S,col:T}:void 0;for(let st of H){let Mt=st.run(K,P,xt);if(1==Mt.length&&"-1"==Mt[0])return;G.push(...Mt)}Z(G)})}getEditHint(){let T=0,P=[],j=!1;for(const Z of this._lstQuest){if(Z.isGroup)continue;let M="",O="A".charCodeAt(0)-1,K=!1;for(const H of Z.answers){if(""==H.olabel)break;if(M+=H.label,!K&&!"ABCDEFGHIJKLMN".startsWith(M)&&(K=!0),O++,K){let G=H.parts[0],nt="*"==this._lines[G.lineIdx].substring(G.b,G.b+1)?1:0;P.push(`${G.lineIdx}|${G.b+nt}|${G.b+nt+1}|${String.fromCharCode(O)}`)}}if(!j&&Z.label-T<=0&&T>0&&(j=!0),j){let H=Z.parts[0],nt=this._lines[H.lineIdx].substring(H.b,H.s).replace(/\d+/,T+1+"");P.push(`${H.lineIdx}|${H.b}|${H.s}|${nt}`),T++}else T=Z.label}return P}getCurPos(S,T){var P,j;let Z=!1,M=null,O=null,K=!1,H=!1;for(const G of this._lstQuest)if(!G.isGroup){for(const nt of G.parts)if(nt.lineIdx==S){Z=!0,M=G,O=null,G.parts.length>0&&null!==(P=G.parts[0].text)&&void 0!==P&&P.trim().startsWith("[@")&&(H=!0,Z=!1);break}if(H&&G.parts.length>0&&(null===(j=G.parts[0].text)||void 0===j||!j.trim().startsWith("[@")))break;for(const nt of G.answers)for(const X of nt.parts)if(X.lineIdx==S&&X.s<=T&&(!X.e||X.e>=T)){Z=!0,M=G,O=nt;break}if(Z)break;if(G.help)for(const nt of G.help)if(nt.lineIdx==S&&nt.s<=T&&(!nt.e||nt.e>=T)){Z=!0,M=G,O=null,K=!0;break}if(Z)break}return[M,O,K]}}},84367:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnsSugg=void 0;const E=A(59582);J.AnsSugg=class h extends E.Sugg{run(w,_,g){if(!g||"h"==g.type||/^\[?\s*@/.test(w))return[];let x=g.ansLabel?String.fromCharCode(g.ansLabel.charCodeAt(0)+1)+".":"A.";return[x+"|"+x+" "]}}},67261:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ChooseSugg=void 0;const E=A(59582);J.ChooseSugg=class h extends E.Sugg{run(w,_,g){if(w!=_||!g)return[];let x=[];if("h"==g.type&&g.quest)for(let f of g.quest.answers)x.push(`azt_lang_sugg_choose ${f.label}|azt_lang_sugg_choose ${f.label}`);return x}}},94807:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.EndSugg=void 0;const E=A(59582);J.EndSugg=class h extends E.Sugg{run(w,_){return w!=_?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},64430:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.IncludeSugg=void 0;const E=A(94358),h=A(59582);J.IncludeSugg=class z extends h.Sugg{constructor(_,g){super(),this.apiService=_,this.resolve=g}run(_){let g=_;if(g.startsWith("@[")&&(g=g.substring(1)),/^\[?\s*@/.test(g)&&null!=this.apiService){let x=g.replace("]..","].").split("].").map(H=>H.replace("]","").replace("[","").replace("@","").trim()),f=x[x.length-1],k=0,S=!0,T="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",P="azt_lang_sugg_get_all|[ALL]|snippet",j=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],Z="",M="",K=g.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let H=K.next();if(H.done)break;M="user_"+H.value[1]}if(x.length>1){f.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(f)&&(Z=f.substring(0,1),f="");let H=x[x.length-2];if(H.startsWith("F:"))return this.resolve([T]),["-1"];if(H.indexOf(",")>=0){let G=[];return""==Z&&G.push(T),G.push(...j),this.resolve(G),["-1"]}if(f.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(f))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(H))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(H)&&(k=+H.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(H)&&(M="user")),/^T[\-\d]+:/.test(H)&&(k=+H.split(":")[0].trim().substring(1),S=!1),/^G[\-\d]+:/.test(H)){let G=H.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${g}[azt_lang_sugg_get_all ${G} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+g+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(H)||/^Q[\-\d]+:/.test(f))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(H)||/^Q[\-\d]+:/.test(f))return this.resolve([]),["-1"]}if(S)return"F"==Z?(this.resolve(j),["-1"]):(this.apiService.searchRes(M,k).then(H=>{let G="";-1==k&&(G=":user-"),(0==k||-1==k)&&(T="");let nt=H.map(X=>{let it=X.name;return it=it.replaceAll(/[\[\],\.\-]+/g,""),`${it}|[@${("cat"==X.type?"C":"T")+X.id}:${G}${it}].|${"cat"==X.type?"folder":"file"}`});""!=T&&""==Z&&(nt.push(T),nt.push(...j)),this.resolve(nt)}),["-1"]);if(g.endsWith(".")||g.endsWith(",")){let H=Math.abs(k);return this.apiService.getQuestion(H).then(G=>{let nt=G.map(ot=>{let ft=("group"==ot.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+ot.label,xt=("group"==ot.type?"G":"Q")+ot.id,st="group"==ot.type?".":"",Mt=ot.content,ee="group"==ot.type?"class":"function",St="group"==ot.type?G.filter(Yt=>Yt.groupId==ot.id).length+"-":"",Jt="group"!=ot.type&&ot.groupId?"G"+E.Utils.zeroPad(3,ot.groupId):"G000";return"group"==ot.type&&(Jt="G"+E.Utils.zeroPad(3,ot.id)),{name:ft,code:xt,groupQnum:St,posfix:st,icon:ee,sort:`${Jt}-${"group"==ot.type?"G"+E.Utils.zeroPad(3,ot.id):"Q"+E.Utils.zeroPad(10,ot.id)}`,doc:Mt}});nt.sort((ot,ft)=>ot.sort>ft.sort?1:-1);let X=nt.map(ot=>`${ot.name}|[@${ot.code}:${ot.groupQnum}${ot.name}]${ot.posfix}|${ot.icon}|${ot.sort}|${ot.doc}`),it=[];if(""!=T){""==Z&&(it.push(T),it.push(...j));let ot=P.split("|");ot[1]=nt.map((ft,xt)=>(0==xt?"":g)+`[@${ft.code}:${ft.groupQnum}${ft.name}]`+(ft.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),it.push(ot.join("|"))}it.push(...X),"F"==Z&&(it=j),this.resolve(it)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},88197:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.QuestSugg=void 0;const E=A(94358),h=A(59582);J.QuestSugg=class z extends h.Sugg{run(_,g,x){var f;if(_!=g)return[];if(!x)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let k=null!==(f=x.quest.olabel)&&void 0!==f?f:"azt_lang_sugg_question_cc 1.",S=+E.Utils.getNumberFromStr(k),T=k.replace(/\d+/,S+1+"");return T=x.quest.olabel?E.Utils.capitalizeFirstLetter(T):T,[E.Utils.removeAccents(T)+"|"+T+" ",T+"|"+T+" "]}}},82619:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SectionSugg=J.toArabic=J.isRoman=J.toRoman=J.BaseNumbers=J.RomanNumber=void 0;const E=A(94358),h=A(59582);class z{constructor(k,S){this.baseUnits=0,this.thousands=0,this.num=k,this.str=S}}function w(f){let k,S;if(f<=0||f>3999)return"";{k=0;let T="";for(f=Math.floor(f);f>0;)S=J.BaseNumbers[k],0===Math.floor(f/S.num)?++k:(T+=S.str,f-=S.num);return T}}function _(f){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(f)}function g(f){let k=f.toUpperCase();if(!_(k))return null;let S=0,T=0;for(;k.length>0&&T<J.BaseNumbers.length;){const P=J.BaseNumbers[T];k.startsWith(P.str)?(S+=P.num,k=k.substring(P.str.length)):T++}return k.length>0?null:S}J.RomanNumber=z,J.BaseNumbers=[new z(1e3,"M"),new z(900,"CM"),new z(500,"D"),new z(400,"CD"),new z(100,"C"),new z(90,"XC"),new z(50,"L"),new z(40,"XL"),new z(10,"X"),new z(9,"IX"),new z(5,"V"),new z(4,"IV"),new z(1,"I")],J.toRoman=w,J.isRoman=_,J.toArabic=g,J.SectionSugg=class x extends h.Sugg{run(k,S,T){var P,j;if(k!=S)return[];if(!T)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==T.type||!T.secLabel)return[];let Z="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(T.secLabel.toLowerCase())){let M=T.secLabel.split("."),O=+E.Utils.getNumberFromStr(M[0]);Z=M[0].replace(/\d+/,O+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(T.secLabel.toLowerCase())){let O=T.secLabel.split(".")[0].split(" "),H=w((null!==(P=g(O.pop()))&&void 0!==P?P:0)+1);O.push(H),Z=O.join(" ")+"."}else/^[ivx]+\./.test(T.secLabel.toLowerCase())&&(Z=w((null!==(j=g(T.secLabel.split(".")[0]))&&void 0!==j?j:0)+1)+".");return[E.Utils.removeAccents(Z)+"|"+Z+" ",Z+"|"+Z+" "]}}},59582:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Sugg=void 0,J.Sugg=class A{constructor(){this.lang="vi"}setLang(h){this.lang=h}}},23231:function(ut,J,A){var E=this&&this.__createBinding||(Object.create?function(z,w,_,g){void 0===g&&(g=_);var x=Object.getOwnPropertyDescriptor(w,_);(!x||("get"in x?!w.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return w[_]}}),Object.defineProperty(z,g,x)}:function(z,w,_,g){void 0===g&&(g=_),z[g]=w[_]}),h=this&&this.__exportStar||function(z,w){for(var _ in z)"default"!==_&&!Object.prototype.hasOwnProperty.call(w,_)&&E(w,z,_)};Object.defineProperty(J,"__esModule",{value:!0}),h(A(66071),J),h(A(9923),J),h(A(28594),J),h(A(41702),J),h(A(94358),J)},20579:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.CanvasUtil=void 0;const E=A(94358);class h{static drawPoint(w,_,g){null!=w&&(w.fillStyle=_,w.beginPath(),w.arc(g.left,g.top,5,0,2*Math.PI),w.fill())}static drawBox(w,_,g,x){null!=w&&(x?(w.fillStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.fill()):(w.strokeStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.stroke()))}static drawBox2(w,_,g,x,f){null!=w&&(w.strokeStyle=_,w.beginPath(),w.rect(f[4],f[5],g,x),w.stroke())}static drawLine(w,_,g,x){null!=w&&(w.strokeStyle=_,w.beginPath(),w.moveTo(g,x),w.lineTo(w.canvas.width-10,x),w.stroke())}static drawText(w,_,g,x){null!=w&&(w.font="11px Arial",w.fillStyle=_,w.fillText(x,g[4],g[5]))}static isLineIntersec(w,_){let g=w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height,x=_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height,f=w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN,k=_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN,S=this.isSameLine(w,_);return(g||x)&&(f||k)&&!S}static isLineVIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN)&&Math.abs(_.transform[4]-w.transform[4])>E.CONST.INTERSEC_MARGIN/2}static isSameLine(w,_){return Math.abs(w.transform[5]+w.height-(_.transform[5]+_.height))<=E.CONST.LINE_MAGIN}static isObjIntersec(w,_){return w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height}static isObjFullIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width)}static isFirstLineOfPage(w,_){return!(w<0||w>=_.length||0!=w&&_[w-1].pageIndex==_[w].pageIndex)}static isLastLineOfPage(w,_){return!(w<0||w>=_.length||w!=_.length-1&&_[w+1].pageIndex==_[w].pageIndex)}static getTopLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5],j=0,Z=3*S;if(!h.isFirstLineOfPage(_,g)){let O=h.isSameLine(g[_-1],x);h.isLineIntersec(g[_-1],x)?(P=g[_-1].transform[5]+g[_-1].height,j=g[_-1].transform[5],g[_-1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j-=2*E.CONST.MARGIN_LEFT:j+=g[_-1].height*T,S=1,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_-2>=0?g[_-2].transform[5]+g[_-2].height*T:g[_-1].transform[5]+g[_-1].height*T,O&&h.isFirstLineOfPage(_-1,g)&&(j=0))}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P>j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P+=Z),P-=S}}return[x.transform[5],1]}static arrContains(w,_){for(const g of _)if(g==w)return!0;return!1}static getBottomLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5]+x.height,j=9999,Z=3*S;if(!h.isLastLineOfPage(_,g)){let O=h.isSameLine(g[_+1],x);h.isLineIntersec(g[_+1],x)?(P=g[_+1].transform[5],j=g[_+1].transform[5]+g[_+1].height,g[_+1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j+=2*E.CONST.MARGIN_LEFT:j-=g[_+1].height*T,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_+2<g.length?g[_+2].transform[5]+g[_+2].height-g[_+2].height*T:g[_+1].transform[5]+g[_+1].height-g[_+1].height*T,O&&h.isLastLineOfPage(_+1,g)&&(j=9999));let K=g[_+1].top;if(K&&P>=K&&!O)return[K,0]}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P<j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P-=Z),P+=S}}return[x.transform[5]+x.height,1]}static hasColor(w,_,g,x,f){let k=Math.round(_),S=Math.round(k+x),T=Math.round(g),P=Math.round(T+f);for(let K=T;K<P;K++)for(let H=k;H<S;H++){let G=4*(K*w.width+H);if((w.data[G]+w.data[G+1]+w.data[G+2])/3<150)return!0}return!1}static calIndexPos2(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0;for(const X of w){K=this.isObjIntersec(w[0],X),j=X.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=X.str.trim()||Z!=X.transform[5]?1:0),O=j+2*E.CONST.MARGIN_LEFT>=P;let it=X.transform[4]+X.width;if(K&&(P=it),it>T&&K&&(T=it),S+=X.str.length,S>x&&O&&K){X.transform.forEach(st=>{k.push(st)}),k[3]=X.height,k[2]=M,k[1]=X.str.length-S+x;let ot=X.str.substr(0,X.str.length-S+x+1);if(ot.length==X.str.length){k[4]=k[4]+X.width;break}var G=_[X.fontName].fontFamily,nt=Math.hypot(X.transform[2],X.transform[3]);g.font=`${nt}px ${G}`;let ft=g.measureText(ot).width,xt=g.measureText(X.str).width;k[4]=k[4]+X.width*ft/xt;break}K&&(Z=X.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static calIndexPos(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0,H="";for(const it of w){K=this.isObjIntersec(w[0],it),j=it.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?1:0,H+=(j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?"|":"")+it.str),O=j+2*E.CONST.MARGIN_LEFT>=P;let ot=it.transform[4]+it.width;if(K&&(P=ot),ot>T&&K&&(T=ot),S+=it.str.length,S>x&&O&&K){let ft=it.str.substr(0,it.str.length-S+x);var nt=_[it.fontName].fontFamily,X=Math.hypot(it.transform[2],it.transform[3]);g.font=`${X}px ${nt}`;let xt=g.measureText(ft).width,st=g.measureText(it.str).width;it.transform.forEach(Mt=>{k.push(Mt)}),k[4]=k[4]+it.width*xt/st,k[3]=it.height,k[2]=M,k[1]=it.str.length-S+x;break}K&&(Z=it.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static getTextBottom(w,_,g,x){let f=Math.atan2(w[1],w[0]);_.vertical&&(f+=Math.PI/2);const k=Math.hypot(w[2],w[3]),S=k*h.getAscent(_.fontFamily,g,x);let T=w[5],P=0;P=0===f?S:S*Math.cos(f);let j=0*P;return T=w[5]-P-j,[T,k+j]}static getAscent(w,_,g){const k=g.get(w);if(k)return k;_.save(),_.font=`30px ${w}`;const S=_.measureText("");let T=S.fontBoundingBoxAscent,P=Math.abs(S.fontBoundingBoxDescent);if(T){_.restore();const Z=T/(T+P);return g.set(w,Z),Z}_.strokeStyle="red",_.clearRect(0,0,30,30),_.strokeText("g",0,0);let j=_.getImageData(0,0,30,30).data;P=0;for(let Z=j.length-1-3;Z>=0;Z-=4)if(j[Z]>0){P=Math.ceil(Z/4/30);break}_.clearRect(0,0,30,30),_.strokeText("A",0,30),j=_.getImageData(0,0,30,30).data,T=0;for(let Z=0,M=j.length;Z<M;Z+=4)if(j[Z]>0){T=30-Math.floor(Z/4/30);break}if(_.restore(),T){const Z=T/(T+P);return g.set(w,Z),Z}return g.set(w,.8),.8}static getMaxLineRight(w,_){let g=0;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4]+x.width;f>g&&(g=f)}return g}static getMinLineLeft(w,_){let g=99999;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4];f<g&&(g=f)}return g}}J.CanvasUtil=h},2830:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PdfUtils=void 0;const E=A(94358),h=A(20579);class z{constructor(){let _=document.createElement("canvas");this.tempCanvas=_.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(_,g){let f={url:URL.createObjectURL(_),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const k=pdfjsLib.getDocument(f);let S=[],T=this;k.promise.then(function(P){T.optionalContentConfigPromise=P.getOptionalContentConfig();let j=P._pdfInfo.numPages;for(let Z=1;Z<=j;Z++)P.getPage(Z).then(M=>{S.push(M),S.length==j&&(S=S.sort((O,K)=>O._pageIndex>K._pageIndex?1:-1),g(S))})},function(P){console.error(P)})}getImages(_,g){let x=[];if("function"!=typeof _.objs.getAll)return x;let f=_.objs.getAll(),k=Object.keys(f);for(const S of k)f[S].data.pageIndex=g,x.push(f[S].data);return x}isImageObj(_){return-999==_.transform[0]&&"img"==_.str}getLines(_,g,x,f){let k=f.scale,S=_.items.length;for(let M=0;M<S;M++){let O=_.items[M];this.isImageObj(O)||(O.transform=z.transform(f.transform,O.transform),O.width=O.width*k),O.transform[4]+O.width>x.canvas.width&&(O.width=x.canvas.width-O.transform[4]-20);let K=this.isImageObj(O)?[O.transform[5],O.height]:h.CanvasUtil.getTextBottom(O.transform,_.styles[O.fontName],this.tempCanvas,this.ascentCache);O.height=K[1];let H=Math.ceil(K[0]);O.transform[5]=H}_.items.sort((M,O)=>1e6*Math.floor(M.transform[5])-M.transform[4]<1e6*Math.floor(O.transform[5])-O.transform[4]?-1:1);let j,T=[],P=0;this.imageCache[g]?j=this.imageCache[g]:(j=x.getImageData(0,0,x.canvas.width,x.canvas.height),this.imageCache[g]=j);let Z={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let M=0;M<S;M++){let O=_.items[M];if(this.isImageObj(O))for(let H=0;H<S;H++){let G=_.items[H];if(!this.isImageObj(G)&&M!=H&&h.CanvasUtil.isObjIntersec(O,G)&&""!=G.str.trim()&&!/^[\sA-K\.\|]+$/g.test(G.str)){O.str="";break}}if(h.CanvasUtil.arrContains(O.str.trim(),E.CONST.SKIP_CHAR))continue;let K=Math.floor(O.transform[5]+O.height);0!=P?P-K>=-E.CONST.LINE_MAGIN?this.addTxtToLine(Z,O):0!=Z.textObjs.length&&(T.push(Z),Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height)):(Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height))}T.push(Z);for(const M of T)this.calculateSize(M);this.findAndMergeAnsQuestBlock(T,"ans"),this.findAndMergeAnsQuestBlock(T,"quest"),this.findAndMergeBlock(T),this.mergeIntersecLine(T),this.mergeSmallLine(T,j);for(const M of T)this.calculateSize(M);return T}mergeIntersecLine(_){let g=0;for(;g<_.length;){let x=_[g];g++,g<_.length&&h.CanvasUtil.isLineVIntersec(x,_[g])&&(this.mergeLine(x,_[g]),_.splice(g,1),g--)}}findAndSplitQuestAnsLine(_,g,x){let f=0,k=[],S=E.CONST.BREAK_LINE_PATTERN.join("|");for(const T of _){T.top=void 0,T.bottom=void 0;let P=T.strLine.replace(/\|/g,"").trim().match(S);if(null!=P&&P.length>0){let j=/[\s\|\.]+[B\u0412][\s\|]*\./g,Z=T.strLine.trim().toUpperCase().match(j);if(null!=Z&&Z.length>0){let M=P[0].toUpperCase().indexOf("A");k.push({lineIndex:f,strIndex:M})}}f++}for(let T=k.length-1;T>=0;T--){let P=k[T].lineIndex;this.splitLine(P,g[_[P].pageIndex],x[_[P].pageIndex],k[T].strIndex,_)}}mergeSmallLine(_,g){let x=0,f=1.2*E.CONST.LINE_SMALL_HEIGHT;for(;x<_.length;){let k=_[x];if(!k||!this.isSmallLine(k)){x++;continue}x-1>=0&&!_[x-1].bottom&&(_[x-1].bottom=h.CanvasUtil.getBottomLine(g,x-1,_)[0]),x+1<_.length&&!_[x+1].top&&(_[x+1].top=h.CanvasUtil.getTopLine(g,x+1,_)[0]);let S=x-1<0?-9999:this.getLineTop(k)-this.getLineBot(_[x-1]),T=x+1>=_.length?-9999:this.getLineTop(_[x+1])-this.getLineBot(k),P=x-1>=0&&_[x-1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x-1].transform[4]+_[x-1].width,j=x+1<_.length&&_[x+1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x+1].transform[4]+_[x+1].width;if(0==x&&T<=f&&j){this.mergeLine(_[x+1],k),_.splice(x,1),x--;continue}if(x==_.length-1&&S<=f&&P){this.mergeLine(_[x-1],k),_.splice(x,1),x--;continue}let Z=-1;S>T&&j&&T<=f?Z=x+1:S<=T&&P&&S<=f?Z=x-1:S<=T&&j&&T<=f?Z=x+1:S>T&&P&&S<=f&&(Z=x-1),Z>=0?(this.mergeLine(_[Z],k),_.splice(x,1),x--):x++}}isSmallLine(_){return _.height<E.CONST.LINE_SMALL_HEIGHT}mergeLine(_,g){for(const x of g.textObjs)this.addTxtToLine(_,x)}findAndMergeAnsQuestBlock(_,g){let f=0;for(;f<_.length;){if("ans"==g&&this.isAnsLine(_[f])||"quest"==g&&this.isQuestLine(_[f])){let S=f,T=-1,P=1,j=[];for(;P<=10;){if(S=f+T*P,S<0){T=1,P=1;continue}if(S>=_.length)break;let Z=this.isAnsLine(_[S]),M=Z||this.isQuestLine(_[S]),O="ans"==g&&Z&&h.CanvasUtil.isSameLine(_[f],_[S]),K=!M&&h.CanvasUtil.isLineIntersec(_[f],_[S])&&_[S].transform[4]>_[f].transform[4];if((O||K)&&j.push(S),P++,M&&1==T)break;(P>10||M)&&-1==T&&(T=1,P=1)}j.sort((Z,M)=>Z<M?1:-1);for(const Z of j)for(const M of _[Z].textObjs)this.addTxtToLine(_[f],M);for(const Z of j)_.splice(Z,1),Z<f&&f--}f++}}findAndMergeBlock(_){let g=0;for(;g<_.length;){if(this.isAnsLine(_[g])||this.isQuestLine(_[g])){g++;continue}let f=g+1;for(;f<_.length&&_[g].pageIndex==_[f].pageIndex;){let k=this.isAnsLine(_[f])||this.isQuestLine(_[f]);if(h.CanvasUtil.isLineIntersec(_[g],_[f])&&!k||h.CanvasUtil.isSameLine(_[g],_[f])){for(const S of _[f].textObjs)this.addTxtToLine(_[g],S);_.splice(f,1),f=g}f++}g++}}isAnsLine(_){let x=_.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=x&&x.length>0}isQuestLine(_){let g=E.CONST.QUESTION_PATTERN.join("|"),x=_.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=x&&x.length>0}encodeLines(_,g){let x="",f=0;for(const k of g){if(k.height<E.CONST.LINE_SMALL_HEIGHT){f-1>=0&&!g[f-1].bottom&&(g[f-1].bottom=h.CanvasUtil.getBottomLine(_,f-1,g)[0]),f+1<g.length&&!g[f+1].top&&(g[f+1].top=h.CanvasUtil.getTopLine(_,f+1,g)[0]);let S=f-1<0?-9999:this.getLineTop(k)-this.getLineBot(g[f-1]),T=f+1>=g.length?-9999:this.getLineTop(g[f+1])-this.getLineBot(k),P=f-1>=0&&g[f-1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f-1].transform[4]+g[f-1].width,j=f+1<g.length&&g[f+1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f+1].transform[4]+g[f+1].width,Z=1.2*E.CONST.LINE_SMALL_HEIGHT;Math.abs(S)>=Z&&Math.abs(T)>=Z?x+="L":x+=-9999==S?"3":-9999==T?"4":S>T&&j?"2":S<=T&&P?"1":S<=T&&j?"2":S>T&&P?"1":"L"}else x+="L";f++}return x}getLineTop(_){return _.top?_.top:_.transform[5]}getLineBot(_){return _.bottom?_.bottom:_.transform[5]+_.height}splitLine(_,g,x,f,k){let S=k[_],T=h.CanvasUtil.calIndexPos(S.textObjs,g,x,f,!0),P=this.newLine(S.textObjs[0],S.pageIndex),j=T[2],Z=T[1],M=S.textObjs[j],O=M.transform,K={str:M.str.substr(0,Z),width:T[4]-O[4],height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],O[4],O[5]]},H={str:M.str.substr(Z),width:M.width-K.width,height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],T[4],O[5]]},G=S.textObjs;S.textObjs=[],P.textObjs=[];for(let nt=0;nt<G.length;nt++)nt<j?this.addTxtToLine(S,G[nt]):nt>j?this.addTxtToLine(P,G[nt]):(this.addTxtToLine(S,K),this.addTxtToLine(P,H));return this.calculateSize(S),this.calculateSize(P),_==k.length-1?k.push(P):k.splice(_+1,0,P),P}findAndMergeSmallLine(_,g,x){let f=0,k=_.matchAll(x),S=[];for(;;){let T=k.next();if(T.done)break;let P=T.value[0],j=T.value.index,Z=0,M=[];for(let O=0;O<P.length;O++)"L"==P[O]?Z=j+O:M.push(j+O);for(const O of M){for(const K of g[O].textObjs)this.addTxtToLine(g[Z],K);g[Z].top=void 0,g[Z].bottom=void 0,S.push(O)}f++}S.sort((T,P)=>T<P?1:-1);for(const T of S)g.splice(T,1);return f}newLine(_,g){let x={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return x.transform[4]=_.transform[4],x.transform[5]=_.transform[5],x.height=_.height,x.width=_.width,x.txtLength=_.str.length,x.textObjs.push(_),x}addTxtToLine(_,g){g.transform[4]<_.transform[4]&&(_.transform[4]=g.transform[4]),g.transform[5]<_.transform[5]&&(_.transform[5]=g.transform[5]),g.transform[5]+g.height>_.transform[5]+_.height&&(_.height=g.transform[5]+g.height-_.transform[5]),g.transform[4]+g.width>_.transform[4]+_.width&&(_.width=g.transform[4]+g.width-_.transform[4]),_.txtLength+=g.str.length,_.textObjs.push(g);let x=_.transform[4]+_.width,f=_.height;for(const k of _.textObjs)k.transform[4]+k.width>x&&(x=k.transform[4]+k.width),k.transform[5]+k.height>_.transform[5]+f&&(f=k.transform[5]+k.height-_.transform[5]);_.width=x-_.transform[4],_.height=f}static transform(_,g){return pdfjsLib.Util.transform(_,g)}render(_,g,x,f){var k;let S=this,T=_.length;for(let P=0;P<T;P++){let j=document.createElement("div");j.className="pdf-page",j.id="page-"+P,null===(k=document.getElementById(g))||void 0===k||k.appendChild(j),S.renderPage(_[P],x,f)}}calculateSize(_){if(0==_.textObjs.length)return;_.textObjs.sort((M,O)=>1e6*Math.floor(M.transform[4])+M.transform[5]>1e6*Math.floor(O.transform[4])+O.transform[5]?1:-1),_.strLine="";let g=0,x=0,f=0,k=0,S=9999,T=0,P=9999;for(const M of _.textObjs){let O=h.CanvasUtil.isObjIntersec(_.textObjs[0],M);f=M.transform[4];let K=f-x>E.CONST.SPLIT_MARGIN&&""!=M.str.trim()||k!=M.transform[5]?"|":"";_.strLine+=K+M.str,f<P&&(P=f);let H=M.transform[4]+M.width;O&&(x=H),H>g&&O&&(g=H),O&&(k=M.transform[5]),M.transform[5]<S&&(S=M.transform[5]),M.transform[5]+M.height>T&&(T=M.transform[5]+M.height)}_.transform[4]=P,_.transform[5]=S,_.width=g-P,_.height=T-S,_.transform[0]=S,_.transform[1]=T;let j=E.CONST.TVCN_CHAR,Z=_.strLine;for(const M of j)Z=Z.replace(new RegExp(M[0],"g"),M[1]);_.strLine=Z}renderPage(_,g,x){let f=_._pageIndex,k=_.getViewport({scale:g}),S=.8*k.width,T=document.createElement("canvas"),P=document.getElementById("page-"+f);P?.appendChild(T),T.id="canvas"+f;let j=T.getContext("2d",{alpha:!1});T.height=k.height,T.width=k.width,T.style.height=k.height*S/k.width+"px",T.style.width=S+"px",P&&(P.style.width=T.style.width,P.style.height=T.style.height);const M={canvasContext:j,transform:[1,0,0,1,0,0],viewport:k,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};_.render(M).promise.then(function(){x&&x(j,_._pageIndex,k)})}}J.PdfUtils=z},41702:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Process=void 0;const E=A(94358),h=A(28594),z=A(90345),w=A(20579),_=A(2830);J.Process=class g{constructor(f){var k,S;this.config=f,E.CONST.load(f);let T=JSON.parse(f);E.CONST.LINE_SMALL_HEIGHT=T.LINE_SMALL_HEIGHT*E.CONST.RENDER_SCALE,E.CONST.SPLIT_MARGIN=T.SPLIT_MARGIN*E.CONST.RENDER_SCALE,E.CONST.INTERSEC_MARGIN=T.INTERSEC_MARGIN*E.CONST.RENDER_SCALE,E.CONST.LINE_MAGIN=T.LINE_MAGIN*E.CONST.RENDER_SCALE,E.CONST.MARGIN_LEFT=T.MARGIN_LEFT*E.CONST.RENDER_SCALE,E.CONST.FOOTER_PATTERN=null!==(k=T.FOOTER_PATTERN)&&void 0!==k?k:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],E.CONST.HELP_ANS_PATTERN=null!==(S=T.HELP_ANS_PATTERN)&&void 0!==S?S:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(f){this.updateStatusCallback=f}setOncompleteCallback(f){this.onCompleteCallback=f}getOverview(f){let k=f.filter(O=>O.isGroup).length,S=f.filter(O=>!O.isGroup).length,T=f.filter(O=>O.answers.length>0).length,P=f.filter(O=>!O.isGroup&&0==O.answers.length).length,j=f.filter(O=>O.answers.length>4),Z=j.length+"|"+j.map(O=>O.num).join(",");return j=f.filter(O=>O.answers.length<4&&O.answers.length>0),{groupNum:k+"",questNum:S+"",tnNum:T+"",tlNum:P+"",tnGt4:Z,tnLt4:j.length+"|"+j.map(O=>O.num).join(",")}}parsePdf(f){let k=new _.PdfUtils;k.loadPdf(f,S=>{const T=S.length;let P=[],j=[],Z=document.createElement("div");Z.id="hiddenWrapper",Z.style.width="1px",Z.style.height="1px",Z.style.overflow="hidden",Z.style.opacity="0",Z.style.zIndex="-9999",Z.style.position="fixed",Z.style.top="0",Z.style.left="0",document.body.appendChild(Z);let M=document.createElement("div"),O="canvasWrapper";M.id=O,Z.appendChild(M);const K=(new Date).getTime();let H=[];k.render(S,O,E.CONST.RENDER_SCALE,(G,nt,X)=>{if(null!=G&&(P[nt]=G,j[nt]=X),H.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${H.length}/${T}`),H.length==T){const it=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(it-K)/1e3+" secs"),this.startAnalyze(P,j,S)}})})}imgToTextObj(f,k){return{str:"img",fontName:k,width:f.paintWidth,height:f.paintHeight,transform:[-999,0,0,0,-f.left,-f.top-f.paintHeight]}}startAnalyze(f,k,S){const T=S.length;let P=[],j=[],Z=[],M=new _.PdfUtils;const O=(new Date).getTime();for(let K=0;K<T;K++){const H=K;let G=M.getImages(S[K],H);S[K].getTextContent().then(nt=>{for(const it of G)nt.items.push(this.imgToTextObj(it,nt.items.length>0?nt.items[0].fontName:""));let X=M.getLines(nt,H,f[H],k[H]);if(j=j.concat(X),Z[H]=nt.styles,P.push(1),P.length==T){j.sort((St,Jt)=>1e7*St.pageIndex+(St.transform.length>0?St.transform[5]:0)-(1e7*Jt.pageIndex+(Jt.transform.length>0?Jt.transform[5]:0))),M.findAndSplitQuestAnsLine(j,Z,f);let it=new z.FooterParser,ot=0;for(const St of j){if((j.length-1==ot||ot+1<j.length-1&&St.pageIndex!=j[ot+1].pageIndex)&&(St.isLastLine=!0),St.isLastLine&&it.parse(St.strLine).length>0){St.isFooter=!0;let Jt=w.CanvasUtil.getBottomLine(M.imageCache[j[ot-1].pageIndex],ot-1,j);St.top=Jt[0]+E.CONST.MARGIN_LEFT}ot++}let ft=new h.ExamParser(this.config),xt=j.map(St=>St.strLine),st=ft.parse(xt),Mt=this.getQuestionInfo(st,j,Z,f,M.imageCache);const ee=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(ee-O)/1e3+" secs"),this.showOnCanvas(Mt,f,E.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(Mt,f)}})}}getPosInfo(f,k,S,T,P,j,Z,M,O){if(!S.top){let G=w.CanvasUtil.getTopLine(P,j,T);S.top=G[0],S.isIntersec=G[1]}if(!S.bottom){let G=w.CanvasUtil.getBottomLine(P,j,T);S.bottom=G[0],S.isIntersec=G[1]}return{str:"",pageIndex:S.pageIndex,lineIndex:j,transform:"a"==f?w.CanvasUtil.calIndexPos2(S.textObjs,M,Z,O?O-1:0):S.transform,startLeft:k>=0?w.CanvasUtil.calIndexPos2(S.textObjs,M,Z,k-1):void 0,type:f}}getQuestionInfo(f,k,S,T,P){let j=[];for(const Z of f){let M=Z.parts[0].lineIdx,O=k[M],K=this.getPosInfo("q",Z.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]),H=null;if(M=Z.parts[Z.parts.length-1].lineIdx,Z.answers.length>0){let G=Z.answers[Z.answers.length-1];G.parts.length>0&&(M=G.parts[G.parts.length-1].lineIdx)}if(M+=1,M<k.length&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex])),Z.isGroup)j.push({num:Z.label,answers:[],remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),isGroup:!0,text:Z.parts.map(G=>k[G.lineIdx])});else{let G={num:Z.label,answers:[],remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),group:Z.group,strAns:Z.strAns,isFixAns:Z.isFixAns,text:Z.parts.map(X=>k[X.lineIdx])};j.push(G);let nt=0;for(const X of Z.answers){let it={pageIndex:G.remove.pageIndex,top:G.remove.top-1,left:G.remove.left-1,width:1,heigh:1};if(X.parts.length>0){if(M=X.parts[0].lineIdx,O=k[M],1==O.isIntersec&&(G.isFixAns=!0),X.parts.length>1&&(G.isFixAns=!0),K=this.getPosInfo("a",X.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex],X.parts[0].b),H=null,nt<Z.answers.length-1){let xt=Z.answers[nt+1];M=xt.parts[0].lineIdx,O=k[M],H=this.getPosInfo("a",xt.parts[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex],xt.parts[0].b)}else M=X.parts[X.parts.length-1].lineIdx+1,M<k.length-1&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]));let ot=this.getAnsRemoveBox(K,k),ft={label:X.label,remove:ot,isCorrect:X.isCorrect,positions:X.isInline?[ot]:this.getAnsBoxes(K,k,H,T[O.pageIndex].canvas.height)};G.answers.push(ft)}else G.answers.push({label:X.label,remove:it,isCorrect:X.isCorrect,positions:[it]});nt++}Z.help&&Z.help.length>0&&(M=Z.help[0].lineIdx,O=k[M],K=this.getPosInfo("q",Z.help[0].s,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex]),H=null,M=Z.help[Z.help.length-1].lineIdx+1,M<k.length&&(O=k[M],H=this.getPosInfo("q",-1,O,k,P[O.pageIndex],M,T[O.pageIndex],S[O.pageIndex])),G.help={num:Z.label,remove:this.getQuestRemoveBox(K,k),positions:this.getQuestBoxes(K,k,H,T[O.pageIndex].canvas.height),text:Z.help.map(X=>k[X.lineIdx])})}}return j}showHidden(){let f=document.getElementById("hiddenWrapper");f&&(f.style.opacity="1",f.style.width="",f.style.height="",f.style.overflow="",f.style.position="")}showOnCanvas(f,k,S){const T=(new Date).getTime(),P=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(S.indexOf("quest")>=0)for(const Z of f){for(const M of Z.positions)w.CanvasUtil.drawBox(k[M.pageIndex],Z.isGroup?"black":"red",M);w.CanvasUtil.drawBox(k[Z.remove.pageIndex],"yellow",Z.remove);for(const M of Z.answers){for(const O of M.positions)w.CanvasUtil.drawBox(k[O.pageIndex],P.get(M.label)+"",O,!0);w.CanvasUtil.drawBox(k[M.remove.pageIndex],"yellow",M.remove),M.isCorrect&&w.CanvasUtil.drawPoint(k[M.positions[0].pageIndex],"green",M.positions[0])}if(Z.help){for(const M of Z.help.positions)w.CanvasUtil.drawBox(k[M.pageIndex],"orange",M);Z.help.remove&&w.CanvasUtil.drawBox(k[Z.help.remove.pageIndex],"yellow",Z.help.remove)}}const j=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(j-T)/1e3+" secs")}getAnsRemoveBox(f,k){let S=f.startLeft?f.startLeft[5]-2:k[f.lineIndex].top,T=f.transform[4]-E.CONST.MARGIN_LEFT,P=f.startLeft?f.startLeft[5]+f.startLeft[3]:k[f.lineIndex].bottom;return{pageIndex:f.pageIndex,top:S||20,left:T,heigh:P&&S?P-S:0,width:(f.startLeft?f.startLeft[4]:0)-T}}getAnsBoxes(f,k,S,T){const P=T,j=E.CONST.MARGIN_LEFT;let Z=[],M=k[f.lineIndex].top,O=k[f.lineIndex].bottom;if(!M||!O)return[];let H=O,G=f.transform[4]-j,nt=S&&f.lineIndex==S.lineIndex?S.transform[4]-j:k[f.lineIndex].transform[4]+k[f.lineIndex].width+j;if(Z.push({pageIndex:f.pageIndex,top:M,left:G,width:nt-G,heigh:O-M}),S&&S.lineIndex==f.lineIndex)return Z;M=O,O=P,nt=0;let X=f.pageIndex,it=0;for(it=f.lineIndex+1;it<k.length;it++){if(O==P&&w.CanvasUtil.isLastLineOfPage(it,k)){let ft=k[it].isFooter?k[it-1]:k[it];O=ft.transform[5]+ft.height+20}let ot=k[it].top;if(it>f.lineIndex+1&&!k[it-1].isFooter){let ft=k[it-1].transform[4]+k[it-1].width+j;ft>nt&&(nt=ft);let xt=k[it-1].transform[4]-j;xt<G&&(G=xt)}if(k[it].isFooter&&ot)it-f.lineIndex>1?(O=k[it-1].transform[5]+k[it-1].height+E.CONST.LINE_MAGIN,G=k[f.lineIndex+1].transform[4]-j):O=k[f.lineIndex].bottom;else if(k[it].pageIndex>X&&(O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&it-f.lineIndex>1&&Z.push({pageIndex:X,top:M,left:G,width:nt-G,heigh:O-M}),M=20,H=M),X=k[it].pageIndex,ot){O=ot;break}}if(it>=k.length&&(it=k.length-1),it-f.lineIndex>1&&k[it-1].transform[5]>H&&!w.CanvasUtil.isFirstLineOfPage(it,k)){let ot=20==M?k[it].transform[4]:k[f.lineIndex+1].transform[4];if(20!=M)for(let ft=f.lineIndex+2;ft<=it;ft++)k[ft].transform[4]<ot&&(ot=k[ft].transform[4]);O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&Z.push({pageIndex:X,top:M,left:ot,width:nt-ot,heigh:O-M})}S&&"a"==S.type&&S.transform[4]>k[S.lineIndex].transform[4]+10*E.CONST.RENDER_SCALE&&(nt=S.transform[4]-j,M=k[S.lineIndex].top,G=k[S.lineIndex].transform[4]-j,O=k[S.lineIndex].bottom,M&&O&&O-M>E.CONST.LINE_SMALL_HEIGHT&&Z.push({pageIndex:X,top:M,left:G,width:nt-G,heigh:O-M}));for(let ot=Z.length-1;ot>=1;ot--)Z[ot].left-(Z[ot-1].left+Z[ot-1].width)>=20*E.CONST.RENDER_SCALE&&Z.splice(ot,1);return Z}getQuestRemoveBox(f,k){let S=f.startLeft?f.startLeft[5]:k[f.lineIndex].top,T=f.transform[4]-E.CONST.MARGIN_LEFT,P=f.startLeft?f.startLeft[5]+f.startLeft[3]:k[f.lineIndex].bottom;return{pageIndex:f.pageIndex,top:S||20,left:T,heigh:P&&S?P-S:0,width:(f.startLeft?f.startLeft[4]:0)-T}}getQuestBoxes(f,k,S,T){let P=T;for(let it=f.lineIndex;it<k.length;it++)if(w.CanvasUtil.isLastLineOfPage(it,k)){let ot=k[it].isFooter?k[it-1]:k[it];P=ot.transform[5]+ot.height+20;break}let j=[],Z=f.pageIndex,M=S?S.lineIndex:k.length-1,O=k[f.lineIndex].transform[4]-E.CONST.MARGIN_LEFT,K=k[f.lineIndex].top;if(!K)return[];let H=E.CONST.CROP_FULL_WIDTH?w.CanvasUtil.getMaxLineRight(-1,k)+2*E.CONST.MARGIN_LEFT:k[f.lineIndex].transform[4]+k[f.lineIndex].width+2*E.CONST.MARGIN_LEFT,G=P,nt=Z,X=f.lineIndex+1;for(;X<=M;X++){let it=k[X].top;if(X==k.length-1&&!S&&(it=k[X].bottom),!E.CONST.CROP_FULL_WIDTH){let ft=k[X-1].transform[4]+k[X-1].width+2*E.CONST.MARGIN_LEFT;ft>H&&(H=ft)}let ot=k[X-1].transform[4]-E.CONST.MARGIN_LEFT;ot<O&&(O=ot),k[X].isFooter&&it?G=it:(k[X].pageIndex>nt&&(k[X-1].isFooter||(G=P),j.push({pageIndex:nt,top:K,left:O,width:H-O,heigh:G-K}),K=20,O=w.CanvasUtil.getMinLineLeft(k[X].pageIndex,k)-E.CONST.MARGIN_LEFT),nt=k[X].pageIndex,it&&(G=it))}if(X-=1,!S&&w.CanvasUtil.isLastLineOfPage(X,k)){let it=k[X].isFooter?k[X-1]:k[X];G=it.transform[5]+it.height+20}return w.CanvasUtil.isFirstLineOfPage(X,k)||j.push({pageIndex:nt,top:K,left:O,width:H-O,heigh:G-K}),j}}},29218:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnswerParser=void 0;const E=A(47271);class h extends E.Parser{constructor(w){super(),null!=w&&(this.isOn=w),this.TYPE=h.TYPE_NAME}do(w){let _=[],g="|"+w,x=/([\s\|\.\]]+\*?[A-H][\s\|]*[\.\)])/g,f=this.matchPos(g,x,!1);0==f.length&&(f=this.matchPos(g,x,!0));let k=!1;0==f.length&&/^\|?\s*\*?[A-H\s\|]+$/g.test(g)&&(k=!0,f=this.matchPos(g,/\*?[A-H]/g,!1));let S=!1;if(0==f.length&&(k=!0,S=!0,f=this.matchPos(g,/\[\*?[A-H]:[^\]]+\]/g,!1)),f.length>0)for(const T of f){let P=T.index+T.value.length-1,j=-9999,Z=T.value.replace(/\*?[\sA-H\|]/g,"");S&&(j=T.index+T.value.length-2,T.index=T.index+1,P=T.index+1+(T.value.startsWith("[*")?1:0),Z=".");let M={type:this.TYPE,pos:[T.index-1,P,j]},O=w.substring(M.pos[0]);!k&&!/^\|?\s*\*?[A-Himg\s\|\.]+$/g.test(g)&&O.trim()==T.value.trim()||(M.label=w.substring(M.pos[0],M.pos[0]+1),"*"==M.label&&(M.label=w.substring(M.pos[0]+1,M.pos[0]+2),M.extInfo="*"),M.olabel=Z,M.score=1,""==w.substring(0,M.pos[0]).replace(/[\s\|]/g,"")&&(M.score=2),_.push(M))}return _}matchPos(w,_,g){let x=g?w.toUpperCase():w,f=/[\s\|\.\]]/,k=x.matchAll(_),S=[];for(;;){let T=k.next();if(T.done)break;let P=0;for(let Z=T.value.index;Z<x.length&&f.test(x[Z]);Z++)P++;let j=T.value[0].substr(P,1);"A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("A")||"*A"==j&&!x.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").trim().startsWith("*A")||S.push({value:T.value[0].substr(P),index:T.value.index+P})}return S}}J.AnswerParser=h,h.TYPE_NAME="answer"},43543:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnChiTietParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),this.TYPE=z.TYPE_NAME,null!=_&&(this.isOn=_)}do(_){let x=this.cleanLine(_);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(x)&&x.length>=2?[{type:z.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(_){let g=[/\|/g,/[\s\.\-:,;!\[\]@\*\$\(\)]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],x=_;x=x.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),x=x.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const f of g)x=x.replaceAll(f,"");return x=x.replaceAll("\\n"," "),x}getAnsMC(_,g){var x;let f=[];for(const j of g)f.push(_[null!==(x=j.lineIdx)&&void 0!==x?x:0]);let k=f.join(""),S=this.cleanLine(k),T=this.getResultMC(S.toUpperCase()),P=new Map;for(const j of T)P.set(j.num,j.str);return P}getAnsStr(_){let g=_.join("\n");g=g.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),g=g.replaceAll(/\[![!iucsbp]+:!!\]/g,""),g=g.replaceAll("[*","").replaceAll("*]","");let x=this.getResultStr(g),f=new Map;for(const k of x)f.set(k.num,k.str);return f}getAnsFromHelp(_,g){let x=[];for(const k of _){let S=g[k.lineIdx];S=S.replaceAll(/\[![!iucsbp]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1"),S=S.replaceAll(/\[![!iucsbp]+:!!\]/g,""),x.push(S)}let f=0;for(const k of x){let S=k.trim().match(E.CONST.HELP_ANS_PATTERN.join("|"));if(null!=S)for(const T of S)if(null!=T&&1==T.length)return _.splice(f,1),T;f++}return""}getResultStr(_){let g=[],x=_.replace(/\n/g,"\n"),f=E.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),k=x.matchAll(new RegExp(f,"ig"));for(;;){let Z=k.next();if(Z.done)break;let M=Z.value[0],O=E.Utils.getNumberFromStr(M);x=x.replace(M,O+".")}let j,T=x.matchAll(/\d+[\.\-]/g),P=-1;for(;;){let Z=T.next();if(Z.done)break;if(-1==P)P=Z.value.index,j=Z;else{let M=x.substr(P,Z.value.index-P);g.push(this.toAns(M,j)),P=Z.value.index,j=Z}}if(P>=0&&j){let Z=x.substr(P);g.push(this.toAns(Z,j))}return g}toAns(_,g){let x=g.value[0].length;return{num:+g.value[0].substr(0,x-1),str:_.substring(x).replace(/\s+/g," ").trim()}}getResultMC(_){let g=[],x="",f=[],k=!1;for(let S=0;S<_.length;S++){let T=_.charCodeAt(S),P=T>=65&&T<=72;if(P&&""==x)return[];P!=k&&(f.push(x),x=""),k=P,x+=_[S]}""!=x&&f.push(x);for(let S=1;S<f.length;S+=2){let T=0,P=Math.floor(f[S-1].length/f[S].length),j=+f[S-1].substring(T,P),Z=j;for(let M=0;M<f[S].length;M++){if(M>=f[S-1].length)return[];if(j=+f[S-1].substring(T,T+P),j!=Z)return[];g.push({num:j,str:f[S][M]}),T+=P,Z=j+1,P=Z.toString().length}}return g}}J.DapAnChiTietParser=z,z.TYPE_NAME="chitietdapan"},12395:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.DAPAN_PATTERN)}static getAnsFromHelp(_){for(const g of _){let x=g.replace(/\|/g,"").trim().match(E.CONST.HELP_ANS_PATTERN.join("|"));if(null!=x)for(const f of x)if(null!=f&&1==f.length)return f}return""}}J.DapAnParser=z,z.TYPE_NAME="dapan"},90345:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FooterParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.FOOTER_PATTERN)}}J.FooterParser=z,z.TYPE_NAME="footer"},93286:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HetParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.HET_PATTERN)}}J.HetParser=z,z.TYPE_NAME="end"},85278:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HuongDanParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){return this.match(_,E.CONST.HUONGDAN_PATTERN)}}J.HuongDanParser=z,z.TYPE_NAME="huongdan"},536:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.IncludeParser=void 0;const E=A(47271);class h extends E.Parser{constructor(w){super(),null!=w&&(this.isOn=w),this.TYPE=h.TYPE_NAME}do(w){let _=w.replace(/\|/g,"").trim(),x=/\[@([CTQG]\d+):[^\]]*\]/g,f=/\[@(F:[^\]]*)\]/g,k=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,S=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(_)){let T=_;return T=T.replaceAll(x,"$1").replaceAll(f,"$1").replaceAll(k,"$1").replaceAll(S,""),[{type:this.TYPE,pos:[0,0],label:"@@."+T}]}return[]}}J.IncludeParser=h,h.TYPE_NAME="include"},47271:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Parser=void 0,J.Parser=class A{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(h){return this.isOn?this.do(h):[]}match(h,z){let w=h.replace(/\|/g,"").trim().match(z.join("|"));return null!=w&&w.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},94694:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.QuestionParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){let g=this.matchPos(_);if(g.value){let x=null;for(let j=g.value.length-1;j>=0;j--)if(g.value[j]){x=g.value[j];break}if(null==x)return[];let f=_.replace(/\|/g,"").toLowerCase().indexOf(x),k=f,S="",T=_.toLowerCase();for((x.endsWith("(")||x.endsWith("["))&&(x=x.substring(0,x.length-1));k<T.length&&("|"!=T[k]&&(S+=T[k]),k++,S!=x););let P={type:this.TYPE,pos:[f,k]};return P.label=this.getNumberFromStr(_.substring(P.pos[0],P.pos[1])),P.olabel=x,[P]}return[]}matchPos(_){let g=_.replace(/\|/g,"").toLowerCase().trim(),x=E.CONST.QUESTION_PATTERN.join("|"),f=g.matchAll(x).next();return f.value||(x=E.CONST.QUESTION_PATTERN2.join("|"),f=g.matchAll(x).next()),f}getNumberFromStr(_){let g=_.match(/(\d+)/);return g?g[0]:""}}J.QuestionParser=z,z.TYPE_NAME="question"},4153:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SectionParser=void 0;const E=A(94358),h=A(47271);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}do(_){let g=_.replace(/\|/g,"");g=g.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let x=g.toLowerCase().trim().match(E.CONST.SECTION_PATTERN_LOWER.join("|")),f=null!=x&&x.length>0;return f||(x=g.trim().match(E.CONST.SECTION_PATTERN_NORMAL.join("|")),f=null!=x&&x.length>0),f&&x?[{type:this.TYPE,pos:[0,0],label:g}]:[]}}J.SectionParser=z,z.TYPE_NAME="section"},79972:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.ModifyAnsRule=void 0;const E=A(94363);class h extends E.Rule{constructor(w){super(w??"","modify:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)&&this.checkVal(w,_)){for(const x of this.data){let f=x.split(":"),k=_-+f[0],S=w[k].label;w[k].label=f[1],w[k].err=S+" -> "+f[1]}return!0}return!1}}J.ModifyAnsRule=h},97749:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.RemoveDupRule=void 0;const E=A(94363);class h extends E.Rule{constructor(w){super(w??"","rmdup:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){var g,x;if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)){let k=null!==(g=w[_].score)&&void 0!==g?g:0,S=null!==(x=w[_-1].score)&&void 0!==x?x:0;if(w[_].label==w[_-1].label)return w.splice(k>S?_-1:_,1),!0}return!1}}J.RemoveDupRule=h},54049:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.RemoveRule=void 0;const E=A(94363);class h extends E.Rule{constructor(w){super(w??"","remove:")}load(w){let _=new h(w);return""!=_.pattern?_:null}run(w,_){if(""==this.pattern)return!1;if(this.getStack(w,_).endsWith(this.pattern)&&this.checkVal(w,_)){for(const x of this.data)w.splice(_-+x,1);return!0}return!1}}J.RemoveRule=h},94363:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Rule=void 0,J.Rule=class A{constructor(h,z){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=z,!h.startsWith(this.TYPE))return;let _=h.substring(this.TYPE.length).split("=>"),g=_[0].split(":");this.pattern=g[0].trim(),this.valPattern=g.length>1?g[1].trim():"",this.data=_[1].split(",").map(x=>x.trim())}checkVal(h,z){var w;if(""==this.valPattern)return!0;let g=[];for(let f=Math.ceil(this.pattern.length/2);f>0;f--)g.push(null===(w=h[z-f+1].label)||void 0===w?void 0:w.trim());let x=g.join("-");return new RegExp(this.valPattern).test(x)}getStack(h,z){let w="",_=z-10>=0?z-10:0;for(;_<=z;_++)w+="-"+h[_].type[0];return w}}},58171:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SameKindRule=void 0;const E=A(94358),h=A(12395),z=A(93286),w=A(85278),_=A(94363);class g extends _.Rule{constructor(f){super(f??"","same:")}load(f){let k=new g(f);return""!=k.pattern?k:null}run(f,k){var S,T,P;if(""==this.pattern)return!1;let j=f[k];if(j.type[0]!=this.pattern)return!1;let Z=[],M=[],O="";for(let K=0;K<k;K++){let H=f[K];(H.type==z.HetParser.TYPE_NAME||H.type==h.DapAnParser.TYPE_NAME)&&(O="da"),H.type==w.HuongDanParser.TYPE_NAME&&"da"==O&&(O="hd")}if("da"==O)return!1;for(let K=k-1;K>=0;K--){let H=f[K];if(H.type==z.HetParser.TYPE_NAME||H.type==h.DapAnParser.TYPE_NAME||"hd"==O&&H.type==w.HuongDanParser.TYPE_NAME||(H.type[0]==this.pattern&&H.olabel&&(Z.push(H.olabel),M.push(H.label)),2==Z.length))break}if(Z.length>=1){let K=Z[0],H=2==Z.length?Z[1]:K,G=null!==(S=j.olabel)&&void 0!==S?S:"";if("a"==this.pattern&&(""==K&&(K="."),""==H&&(H="."),""==G&&(G=".")),""==this.valPattern){if(K==H&&G!=K)return f.splice(k,1),!0}else{let nt=this.valPattern.split(",");for(const X of nt){let it=X.trim(),ft=new RegExp(E.CONST[it].join("|"));if(ft.test(K)&&ft.test(H)&&!ft.test(G)&&+(null!==(T=M[0])&&void 0!==T?T:"0")+1!=+(null!==(P=j.label)&&void 0!==P?P:"0"))return f.splice(k,1),!0}}}return!1}}J.SameKindRule=g},53108:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.AnswerParser=void 0;const E=A(7898),h=A(95070),z=A(17825);class w extends z.Parser{constructor(){super(),this.TYPE=w.TYPE_NAME}parse(g,x,f,k,S,T){var P=[],j=this.matchPos(x.strLine,!1);if(0==j.length&&(j=this.matchPos(x.strLine,!0)),j.length>0)for(const Z of j)P.push({str:Z.value,pageIndex:x.pageIndex,lineIndex:f,transform:E.CanvasUtil.calIndexPos(x.textObjs,S,T,Z.index),startLeft:E.CanvasUtil.calIndexPos2(x.textObjs,S,T,Z.index+1),type:this.TYPE});return P}static getRemoveBox(g,x){let f=g.startLeft?g.startLeft[5]-2:x[g.lineIndex].top,k=g.transform[4]-h.CONST.MARGIN_LEFT,S=g.startLeft?g.startLeft[5]+g.startLeft[3]:x[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:f||20,left:k,heigh:S&&f?S-f:0,width:(g.startLeft?g.startLeft[4]:0)-k}}static getBoxes(g,x,f,k){const S=k,T=h.CONST.MARGIN_LEFT;let P=[],j=x[g.lineIndex].top,Z=x[g.lineIndex].bottom;if(!j||!Z)return[];let O=Z,K=g.transform[4]-T,H=f&&g.lineIndex==f.lineIndex?f.transform[4]-T:x[g.lineIndex].transform[4]+x[g.lineIndex].width+T;if(P.push({pageIndex:g.pageIndex,top:j,left:K,width:H-K,heigh:Z-j}),f&&f.lineIndex==g.lineIndex)return P;j=Z,Z=S,H=0;let G=g.pageIndex,nt=0;for(nt=g.lineIndex+1;nt<x.length;nt++){if(Z==S&&E.CanvasUtil.isLastLineOfPage(nt,x)){let it=x[nt].isFooter?x[nt-1]:x[nt];Z=it.transform[5]+it.height+20}let X=x[nt].top;if(nt>g.lineIndex+1&&!x[nt-1].isFooter){let it=x[nt-1].transform[4]+x[nt-1].width+T;it>H&&(H=it);let ot=x[nt-1].transform[4]-T;ot<K&&(K=ot)}if(x[nt].isFooter&&X)nt-g.lineIndex>1?(Z=x[nt-1].transform[5]+x[nt-1].height+h.CONST.LINE_MAGIN,K=x[g.lineIndex+1].transform[4]-T):Z=x[g.lineIndex].bottom;else if(x[nt].pageIndex>G&&(Z&&Z-j>h.CONST.LINE_SMALL_HEIGHT&&nt-g.lineIndex>1&&P.push({pageIndex:G,top:j,left:K,width:H-K,heigh:Z-j}),j=20,O=j),G=x[nt].pageIndex,X){Z=X;break}}if(nt>=x.length&&(nt=x.length-1),nt-g.lineIndex>1&&x[nt-1].transform[5]>O&&!E.CanvasUtil.isFirstLineOfPage(nt,x)){let X=20==j?x[nt].transform[4]:x[g.lineIndex+1].transform[4];Z&&Z-j>h.CONST.LINE_SMALL_HEIGHT&&P.push({pageIndex:G,top:j,left:X,width:H-X,heigh:Z-j})}f&&f.type==w.TYPE_NAME&&f.transform[4]>x[f.lineIndex].transform[4]+25*h.CONST.RENDER_SCALE&&(H=f.transform[4]-T,j=x[f.lineIndex].top,K=x[f.lineIndex].transform[4]-T,Z=x[f.lineIndex].bottom,j&&Z&&Z-j>h.CONST.LINE_SMALL_HEIGHT&&P.push({pageIndex:G,top:j,left:K,width:H-K,heigh:Z-j}));for(let X=P.length-1;X>=1;X--)P[X].left-(P[X-1].left+P[X-1].width)>=20*h.CONST.RENDER_SCALE&&P.splice(X,1);return P}matchPos(g,x){for(var f=x?g.toUpperCase():g,k=h.CONST.ANS_PATTERN,S=new RegExp("[\\s\\|\\.]"),T=f.matchAll(k),P=[];;){var j=T.next();if(j.done)break;for(var Z=0,M=j.value.index;M<f.length&&S.test(f[M]);M++)Z++;let O=j.value[0].substr(Z,1);"A"==O&&!f.replace(/\|/g,"").trim().startsWith("A")||P.push({value:O,index:j.value.index+Z})}return P}}J.AnswerParser=w,w.TYPE_NAME="answer"},7898:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.CanvasUtil=void 0;const E=A(95070);class h{static drawPoint(w,_,g){null!=w&&(w.fillStyle=_,w.beginPath(),w.arc(g.left,g.top,5,0,2*Math.PI),w.fill())}static drawBox(w,_,g,x){null!=w&&(x?(w.fillStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.fill()):(w.strokeStyle=_,w.beginPath(),w.rect(g.left,g.top,g.width,g.heigh),w.stroke()))}static drawBox2(w,_,g,x,f){null!=w&&(w.strokeStyle=_,w.beginPath(),w.rect(f[4],f[5],g,x),w.stroke())}static drawLine(w,_,g,x){null!=w&&(w.strokeStyle=_,w.beginPath(),w.moveTo(g,x),w.lineTo(w.canvas.width-10,x),w.stroke())}static drawText(w,_,g,x){null!=w&&(w.font="11px Arial",w.fillStyle=_,w.fillText(x,g[4],g[5]))}static isLineIntersec(w,_){let g=w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height,x=_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height,f=w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN,k=_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN,S=this.isSameLine(w,_);return(g||x)&&(f||k)&&!S}static isLineVIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width+E.CONST.INTERSEC_MARGIN||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width+E.CONST.INTERSEC_MARGIN)&&Math.abs(_.transform[4]-w.transform[4])>E.CONST.INTERSEC_MARGIN/2}static isSameLine(w,_){return Math.abs(w.transform[5]+w.height-(_.transform[5]+_.height))<=E.CONST.LINE_MAGIN}static isObjIntersec(w,_){return w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height}static isObjFullIntersec(w,_){return(w.transform[5]<=_.transform[5]&&_.transform[5]<=w.transform[5]+w.height||_.transform[5]<=w.transform[5]&&w.transform[5]<=_.transform[5]+_.height)&&(w.transform[4]<=_.transform[4]&&_.transform[4]<=w.transform[4]+w.width||_.transform[4]<=w.transform[4]&&w.transform[4]<=_.transform[4]+_.width)}static isFirstLineOfPage(w,_){return!(w<0||w>=_.length||0!=w&&_[w-1].pageIndex==_[w].pageIndex)}static isLastLineOfPage(w,_){return!(w<0||w>=_.length||w!=_.length-1&&_[w+1].pageIndex==_[w].pageIndex)}static getTopLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5],j=0,Z=3*S;if(!h.isFirstLineOfPage(_,g)){let O=h.isSameLine(g[_-1],x);h.isLineIntersec(g[_-1],x)?(P=g[_-1].transform[5]+g[_-1].height,j=g[_-1].transform[5],g[_-1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j-=2*E.CONST.MARGIN_LEFT:j+=g[_-1].height*T,S=1,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_-2>=0?g[_-2].transform[5]+g[_-2].height*T:g[_-1].transform[5]+g[_-1].height*T,O&&h.isFirstLineOfPage(_-1,g)&&(j=0))}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P>j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P+=Z),P-=S}}return[x.transform[5],1]}static arrContains(w,_){for(const g of _)if(g==w)return!0;return!1}static getBottomLine(w,_,g){let x=g[_],f=[[E.CONST.STEP_SIZE,E.CONST.OVERLAP],[1,E.CONST.OVERLAP],[1,.3]];for(const k of f){let S=k[0],T=k[1],P=x.transform[5]+x.height,j=9999,Z=3*S;if(!h.isLastLineOfPage(_,g)){let O=h.isSameLine(g[_+1],x);h.isLineIntersec(g[_+1],x)?(P=g[_+1].transform[5],j=g[_+1].transform[5]+g[_+1].height,g[_+1].transform[4]>g[_].transform[4]+2*E.CONST.MARGIN_LEFT?j+=2*E.CONST.MARGIN_LEFT:j-=g[_+1].height*T,Z=g[_].transform[5]+g[_].height/2-P):(j=O&&_+2<g.length?g[_+2].transform[5]+g[_+2].height-g[_+2].height*T:g[_+1].transform[5]+g[_+1].height-g[_+1].height*T,O&&h.isLastLineOfPage(_+1,g)&&(j=9999));let K=g[_+1].top;if(K&&P>=K&&!O)return[K,0]}if(!E.CONST.ENABLE_IMAGE_PROCESS)return[P,0];let M=!1;for(;P<j;){if(!h.hasColor(w,x.transform[4],P,x.width,S))return[P,0];M||(M=!0,P-=Z),P+=S}}return[x.transform[5]+x.height,1]}static hasColor(w,_,g,x,f){let k=Math.round(_),S=Math.round(k+x),T=Math.round(g),P=Math.round(T+f);for(let K=T;K<P;K++)for(let H=k;H<S;H++){let G=4*(K*w.width+H);if((w.data[G]+w.data[G+1]+w.data[G+2])/3<150)return!0}return!1}static calIndexPos2(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0;for(const X of w){K=this.isObjIntersec(w[0],X),j=X.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=X.str.trim()||Z!=X.transform[5]?1:0),O=j+2*E.CONST.MARGIN_LEFT>=P;let it=X.transform[4]+X.width;if(K&&(P=it),it>T&&K&&(T=it),S+=X.str.length,S>x&&O&&K){X.transform.forEach(st=>{k.push(st)}),k[3]=X.height,k[2]=M,k[1]=X.str.length-S+x;let ot=X.str.substr(0,X.str.length-S+x+1);if(ot.length==X.str.length){k[4]=k[4]+X.width;break}var G=_[X.fontName].fontFamily,nt=Math.hypot(X.transform[2],X.transform[3]);g.font=`${nt}px ${G}`;let ft=g.measureText(ot).width,xt=g.measureText(X.str).width;k[4]=k[4]+X.width*ft/xt;break}K&&(Z=X.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static calIndexPos(w,_,g,x,f){let k=[],S=0,T=0,P=0,j=0,Z=0,M=0,O=!0,K=!0,H="";for(const it of w){K=this.isObjIntersec(w[0],it),j=it.transform[4],f||(S+=j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?1:0,H+=(j-P>E.CONST.SPLIT_MARGIN&&""!=it.str.trim()||Z!=it.transform[5]?"|":"")+it.str),O=j+2*E.CONST.MARGIN_LEFT>=P;let ot=it.transform[4]+it.width;if(K&&(P=ot),ot>T&&K&&(T=ot),S+=it.str.length,S>x&&O&&K){let ft=it.str.substr(0,it.str.length-S+x);var nt=_[it.fontName].fontFamily,X=Math.hypot(it.transform[2],it.transform[3]);g.font=`${X}px ${nt}`;let xt=g.measureText(ft).width,st=g.measureText(it.str).width;it.transform.forEach(Mt=>{k.push(Mt)}),k[4]=k[4]+it.width*xt/st,k[3]=it.height,k[2]=M,k[1]=it.str.length-S+x;break}K&&(Z=it.transform[5]),M++}return 0==k.length&&(k=[0,w[w.length-1].length-1,w.length-1,w[0].height,T,w[0].transform[5]]),k}static getTextBottom(w,_,g,x){let f=Math.atan2(w[1],w[0]);_.vertical&&(f+=Math.PI/2);const k=Math.hypot(w[2],w[3]),S=k*h.getAscent(_.fontFamily,g,x);let T=w[5],P=0;P=0===f?S:S*Math.cos(f);let j=0*P;return T=w[5]-P-j,[T,k+j]}static getAscent(w,_,g){const k=g.get(w);if(k)return k;_.save(),_.font=`30px ${w}`;const S=_.measureText("");let T=S.fontBoundingBoxAscent,P=Math.abs(S.fontBoundingBoxDescent);if(T){_.restore();const Z=T/(T+P);return g.set(w,Z),Z}_.strokeStyle="red",_.clearRect(0,0,30,30),_.strokeText("g",0,0);let j=_.getImageData(0,0,30,30).data;P=0;for(let Z=j.length-1-3;Z>=0;Z-=4)if(j[Z]>0){P=Math.ceil(Z/4/30);break}_.clearRect(0,0,30,30),_.strokeText("A",0,30),j=_.getImageData(0,0,30,30).data,T=0;for(let Z=0,M=j.length;Z<M;Z+=4)if(j[Z]>0){T=30-Math.floor(Z/4/30);break}if(_.restore(),T){const Z=T/(T+P);return g.set(w,Z),Z}return g.set(w,.8),.8}static getMaxLineRight(w,_){let g=0;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4]+x.width;f>g&&(g=f)}return g}static getMinLineLeft(w,_){let g=99999;for(const x of _)if(x.pageIndex==w||-1==w){let f=x.transform[4];f<g&&(g=f)}return g}}J.CanvasUtil=h},95070:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.CONST=void 0;class A{}J.CONST=A,A.RENDER_SCALE=2,A.LINE_SMALL_HEIGHT=7*A.RENDER_SCALE,A.SPLIT_MARGIN=3*A.RENDER_SCALE,A.INTERSEC_MARGIN=20*A.RENDER_SCALE,A.LINE_MAGIN=2*A.RENDER_SCALE,A.MARGIN_LEFT=2*A.RENDER_SCALE,A.ENABLE_IMAGE_PROCESS=!0,A.STEP_SIZE=2,A.CROP_FULL_WIDTH=!0,A.OVERLAP=.5,A.QUESTION_PATTERN=[],A.QUESTION_PATTERN2=[],A.BREAK_LINE_PATTERN=[],A.SECTION_PATTERN_LOWER=[],A.SECTION_PATTERN_NORMAL=[],A.KICK_PATTERN=[],A.TVCN_CHAR=[],A.HET_PATTERN=[],A.DAPAN_PATTERN=[],A.HUONGDAN_PATTERN=[],A.MULTIPLE_ANS_PATTERN=[],A.DRAW_RESULT="",A.SKIP_CHAR=[],A.FOOTER_PATTERN=[],A.HELP_ANS_PATTERN=[],A.ANS_PATTERN=[]},25937:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnChiTietParser=void 0;const E=A(17825);class h extends E.Parser{constructor(w,_){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=h.TYPE_NAME,null!=w&&(this.isOn=w),this.offCalback=_}parse(w,_,g,x,f,k){var T=_.strLine.replace(/\|/g,"").replace(/\s*\.*\-*:*,*;*/g,"");return T=(T=(T=(T=(T=T.replace(/C\xe2u/g,"")).replace(/\u0110\xe1p\xe1n/g,"")).replace(/\u0110\xe1p/g,"")).replace(/\xe1n/g,"")).replace(/\u0110\/A/g,""),/^[0-9ABCDEFGHabcdefgh]+$/g.test(T)&&T.length>=2&&(null==this.firstLine&&(this.firstLine=_,this.lineIdx=g),this.str+=T),[]}static getBoxes(w,_,g,x){return[]}getResult(w){let _=[],g="",x=[],f=!1;for(let k=0;k<w.length;k++){let S=w.charCodeAt(k),T=S>=65&&S<=72;if(T&&""==g)return[];T!=f&&(x.push(g),g=""),f=T,g+=w[k]}""!=g&&x.push(g);for(let k=1;k<x.length;k+=2){let S=0,T=Math.floor(x[k-1].length/x[k].length),P=+x[k-1].substr(S,T),j=P;for(let Z=0;Z<x[k].length;Z++){if(Z>=x[k-1].length)return[];if(P=+x[k-1].substr(S,T),P!=j)return[];_.push({num:P,str:x[k][Z]}),S+=T,j=P+1,T=j.toString().length}}return _}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var w=this.getResult(this.str.toUpperCase());if(w.length>0){let _=JSON.stringify({main:w,sub:[]});this.offCalback([{str:_,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}J.DapAnChiTietParser=h,h.TYPE_NAME="dapanchitiet"},42815:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnDienTuParser=void 0;const E=A(95070),h=A(48693),z=A(36391),w=A(17825);class _ extends w.Parser{constructor(x,f){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=_.TYPE_NAME,null!=x&&(this.isOn=x),this.offCalback=f}parse(x,f,k,S,T,P){let j=[new h.FooterParser,new z.HuongDanParser];for(const M of j)if(M.parse(x,f,k,S,T,P).length>0)return[];var Z=f.strLine;return null==this.firstLine&&(this.firstLine=f,this.lineIdx=k),this.str+=Z+"\n",[]}static getBoxes(x,f,k,S){return[]}getResult(x){let f=[],k=x.replace(/\n/g,"\n|"),S=E.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"(\\|"),T=k.matchAll(new RegExp(S,"ig"));for(;;){let O=T.next();if(O.done)break;let K=O.value[0],H=this.getNumberFromStr(K);k=k.replace(K,H+".")}let M,j=k.matchAll(/\d+[\.\-]/g),Z=-1;for(;;){let O=j.next();if(O.done)break;if(-1==Z)Z=O.value.index,M=O;else{let K=k.substr(Z,O.value.index-Z);f.push(this.toAns(K,M)),Z=O.value.index,M=O}}if(Z>=0&&M){let O=k.substr(Z);f.push(this.toAns(O,M))}return f}toAns(x,f){let k=f.value[0].length;return{num:+f.value[0].substr(0,k-1),str:x.substr(k).replace(/\|/g," ").replace(/ +/g," ").trim()}}getNumberFromStr(x){var f=x.match(/(\d+)/);return f?f[0]:""}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var x=this.getResult(this.str);if(x.length>0){let f=JSON.stringify({main:[],sub:x});this.offCalback([{str:f,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}J.DapAnDienTuParser=_,_.TYPE_NAME="dapandientu"},46215:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.DapAnParser=void 0;const E=A(95070),h=A(17825);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}parse(_,g,x,f,k,S){let T=g.strLine.replace(/\|/g,"").trim().match(E.CONST.DAPAN_PATTERN.join("|"));return null!=T&&T.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(_,g,x,f){return[]}static getAnsFromHelp(_){for(const g of _){let x=g.strLine.replace(/\|/g,"").trim().match(E.CONST.HELP_ANS_PATTERN.join("|"));if(null!=x)for(let f=0;f<x.length;f++)if(null!=x[f]&&1==x[f].length)return x[f]}return""}strContains(_,g){var x=_;for(const f of g)if(x.indexOf(f)>=0)return!0;return!1}}J.DapAnParser=z,z.TYPE_NAME="dapan"},48693:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FooterParser=void 0;const E=A(95070),h=A(17825);class z extends h.Parser{constructor(){super(),this.TYPE=z.TYPE_NAME}parse(_,g,x,f,k,S){if(!g.isLastLine||f&&g.transform[5]<f.transform[5]+f.height)return[];var P=g.strLine.replace(/\|/g,"").trim().match(E.CONST.FOOTER_PATTERN.join("|"));return null!=P&&P.length>0?[{str:P[0],pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(_,g,x,f){return[]}}J.FooterParser=z,z.TYPE_NAME="footer"},98930:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HetParser=void 0;const E=A(95070),h=A(17825);class z extends h.Parser{constructor(_){super(),null!=_&&(this.isOn=_),this.TYPE=z.TYPE_NAME}parse(_,g,x,f,k,S){let T=g.strLine.replace(/\|/g,"").trim().match(E.CONST.HET_PATTERN.join("|"));return null!=T&&T.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:x,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(_,g,x,f){return[]}strContains(_,g){for(const x of g)if(_.indexOf(x)>=0)return!0;return!1}}J.HetParser=z,z.TYPE_NAME="het"},36391:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.HuongDanParser=void 0;const E=A(95070),h=A(17825),z=A(34259);class w extends h.Parser{constructor(){super(),this.TYPE=w.TYPE_NAME}parse(g,x,f,k,S,T){let P=x.strLine.replace(/\|/g,"").trim().match(E.CONST.HUONGDAN_PATTERN.join("|"));return null!=P&&P.length>0?[{str:x.strLine,pageIndex:x.pageIndex,lineIndex:f,transform:x.transform,type:this.TYPE}]:[]}static getBoxes(g,x,f,k){return z.QuestionParser.getBoxes(g,x,f,k)}strContains(g,x){var f=g;for(const k of x)if(f.indexOf(k)>=0)return!0;return!1}}J.HuongDanParser=w,w.TYPE_NAME="huongdan"},17825:(ut,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Parser=void 0,J.Parser=class A{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}process(h,z,w,_,g,x){return this.isOn?this.parse(h,z,w,_,g,x):[]}}},1470:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.PdfRender=void 0;const E=A(7898),h=A(95070);class z{constructor(){let _=document.createElement("canvas");this.tempCanvas=_.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(_,g){var x=URL.createObjectURL(_);const k=pdfjsLib.getDocument({url:x,cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1});var S=[];let T=this;k.promise.then(function(P){T.optionalContentConfigPromise=P.getOptionalContentConfig();for(var j=P._pdfInfo.numPages,Z=1;Z<=j;Z++)P.getPage(Z).then(M=>{S.push(M),S.length==j&&(S=S.sort((O,K)=>O._pageIndex>K._pageIndex?1:-1),g(S))})},function(P){console.error(P)})}getImages(_,g){let x=[];if("function"!=typeof _.objs.getAll)return console.log("Unable to read img"),x;let f=_.objs.getAll(),k=Object.keys(f);for(const S of k)f[S].data.pageIndex=g,x.push(f[S].data);return x}isImageObj(_){return-999==_.transform[0]&&"img"==_.str}getLines(_,g,x,f){let k=f.scale,S=_.items.length;for(let M=0;M<S;M++){let O=_.items[M];this.isImageObj(O)||(O.transform=z.transform(f.transform,O.transform),O.width=O.width*k),O.transform[4]+O.width>x.canvas.width&&(O.width=x.canvas.width-O.transform[4]-20);let K=this.isImageObj(O)?[O.transform[5],O.height]:E.CanvasUtil.getTextBottom(O.transform,_.styles[O.fontName],this.tempCanvas,this.ascentCache);O.height=K[1];let H=Math.ceil(K[0]);O.transform[5]=H}_.items.sort((M,O)=>1e6*Math.floor(M.transform[5])-M.transform[4]<1e6*Math.floor(O.transform[5])-O.transform[4]?-1:1);let j,T=[],P=0;this.imageCache[g]?j=this.imageCache[g]:(j=x.getImageData(0,0,x.canvas.width,x.canvas.height),this.imageCache[g]=j);var Z={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};for(let M=0;M<S;M++){let O=_.items[M];if(this.isImageObj(O))for(let H=0;H<S;H++)if(M!=H&&E.CanvasUtil.isObjIntersec(O,_.items[H])){O.str="";break}if(E.CanvasUtil.arrContains(O.str.trim(),h.CONST.SKIP_CHAR))continue;let K=Math.floor(O.transform[5]+O.height);0!=P?P-K>=-h.CONST.LINE_MAGIN?this.addTxtToLine(Z,O):0!=Z.textObjs.length&&(T.push(Z),Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height)):(Z=this.newLine(O,g),P=Math.floor(Z.transform[5]+Z.height))}T.push(Z);for(const M of T)this.calculateSize(M);this.findAndMergeAnsQuestBlock(T,"ans"),this.findAndMergeAnsQuestBlock(T,"quest"),this.findAndMergeBlock(T),this.mergeIntersecLine(T),this.mergeSmallLine(T,j);for(const M of T)this.calculateSize(M);return T}mergeIntersecLine(_){let g=0;for(;g<_.length;){let x=_[g];g++,g<_.length&&E.CanvasUtil.isLineVIntersec(x,_[g])&&(this.mergeLine(x,_[g]),_.splice(g,1),g--)}}findAndSplitQuestAnsLine(_,g,x){let f=0,k=[],S=h.CONST.BREAK_LINE_PATTERN.join("|");for(const P of _){P.top=void 0,P.bottom=void 0;var T=P.strLine.replace(/\|/g,"").trim().match(S);if(null!=T&&T.length>0){let j=/[\s\|\.]+[B\u0412][\s\|]*\./g,Z=P.strLine.trim().toUpperCase().match(j);if(null!=Z&&Z.length>0){let M=T[0].toUpperCase().indexOf("A");k.push({lineIndex:f,strIndex:M})}}f++}for(let P=k.length-1;P>=0;P--){let j=k[P].lineIndex;this.splitLine(j,g[_[j].pageIndex],x[_[j].pageIndex],k[P].strIndex,_)}}mergeSmallLine(_,g){let x=0,f=1.2*h.CONST.LINE_SMALL_HEIGHT;for(;x<_.length;){let k=_[x];if(!k||!this.isSmallLine(k)){x++;continue}x-1>=0&&!_[x-1].bottom&&(_[x-1].bottom=E.CanvasUtil.getBottomLine(g,x-1,_)[0]),x+1<_.length&&!_[x+1].top&&(_[x+1].top=E.CanvasUtil.getTopLine(g,x+1,_)[0]);let S=x-1<0?-9999:this.getLineTop(k)-this.getLineBot(_[x-1]),T=x+1>=_.length?-9999:this.getLineTop(_[x+1])-this.getLineBot(k),P=x-1>=0&&_[x-1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x-1].transform[4]+_[x-1].width,j=x+1<_.length&&_[x+1].transform[4]<=k.transform[4]&&k.transform[4]<=_[x+1].transform[4]+_[x+1].width;if(0==x&&T<=f&&j){this.mergeLine(_[x+1],k),_.splice(x,1),x--;continue}if(x==_.length-1&&S<=f&&P){this.mergeLine(_[x-1],k),_.splice(x,1),x--;continue}let Z=-1;S>T&&j&&T<=f?Z=x+1:S<=T&&P&&S<=f?Z=x-1:S<=T&&j&&T<=f?Z=x+1:S>T&&P&&S<=f&&(Z=x-1),Z>=0?(this.mergeLine(_[Z],k),_.splice(x,1),x--):x++}}isSmallLine(_){return _.height<h.CONST.LINE_SMALL_HEIGHT}mergeLine(_,g){for(const x of g.textObjs)this.addTxtToLine(_,x)}findAndMergeAnsQuestBlock(_,g){let f=0;for(;f<_.length;){if("ans"==g&&this.isAnsLine(_[f])||"quest"==g&&this.isQuestLine(_[f])){let S=f,T=-1,P=1,j=[];for(;P<=10;){if(S=f+T*P,S<0){T=1,P=1;continue}if(S>=_.length)break;let Z=this.isAnsLine(_[S]),M=Z||this.isQuestLine(_[S]),O="ans"==g&&Z&&E.CanvasUtil.isSameLine(_[f],_[S]),K=!M&&E.CanvasUtil.isLineIntersec(_[f],_[S])&&_[S].transform[4]>_[f].transform[4];if((O||K)&&j.push(S),P++,M&&1==T)break;(P>10||M)&&-1==T&&(T=1,P=1)}j.sort((Z,M)=>Z<M?1:-1);for(const Z of j)for(const M of _[Z].textObjs)this.addTxtToLine(_[f],M);for(const Z of j)_.splice(Z,1),Z<f&&f--}f++}}findAndMergeBlock(_){let g=0;for(;g<_.length;){if(this.isAnsLine(_[g])||this.isQuestLine(_[g])){g++;continue}let f=g+1;for(;f<_.length&&_[g].pageIndex==_[f].pageIndex;){let k=this.isAnsLine(_[f])||this.isQuestLine(_[f]);if(E.CanvasUtil.isLineIntersec(_[g],_[f])&&!k||E.CanvasUtil.isSameLine(_[g],_[f])){for(const S of _[f].textObjs)this.addTxtToLine(_[g],S);_.splice(f,1),f=g}f++}g++}}isAnsLine(_){let x=_.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=x&&x.length>0}isQuestLine(_){let g=h.CONST.QUESTION_PATTERN.join("|"),x=_.strLine.replace(/\|/g,"").toLowerCase().trim().match(g);return null!=x&&x.length>0}encodeLines(_,g){let x="",f=0;for(const k of g){if(k.height<h.CONST.LINE_SMALL_HEIGHT){f-1>=0&&!g[f-1].bottom&&(g[f-1].bottom=E.CanvasUtil.getBottomLine(_,f-1,g)[0]),f+1<g.length&&!g[f+1].top&&(g[f+1].top=E.CanvasUtil.getTopLine(_,f+1,g)[0]);let S=f-1<0?-9999:this.getLineTop(k)-this.getLineBot(g[f-1]),T=f+1>=g.length?-9999:this.getLineTop(g[f+1])-this.getLineBot(k),P=f-1>=0&&g[f-1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f-1].transform[4]+g[f-1].width,j=f+1<g.length&&g[f+1].transform[4]<=k.transform[4]&&k.transform[4]+k.width<=g[f+1].transform[4]+g[f+1].width,Z=1.2*h.CONST.LINE_SMALL_HEIGHT;Math.abs(S)>=Z&&Math.abs(T)>=Z?x+="L":x+=-9999==S?"3":-9999==T?"4":S>T&&j?"2":S<=T&&P?"1":S<=T&&j?"2":S>T&&P?"1":"L"}else x+="L";f++}return x}getLineTop(_){return _.top?_.top:_.transform[5]}getLineBot(_){return _.bottom?_.bottom:_.transform[5]+_.height}splitLine(_,g,x,f,k){let S=k[_],T=E.CanvasUtil.calIndexPos(S.textObjs,g,x,f,!0),P=this.newLine(S.textObjs[0],S.pageIndex),j=T[2],Z=T[1],M=S.textObjs[j],O=M.transform,K={str:M.str.substr(0,Z),width:T[4]-O[4],height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],O[4],O[5]]},H={str:M.str.substr(Z),width:M.width-K.width,height:M.height,fontName:M.fontName,transform:[O[0],O[1],O[2],O[3],T[4],O[5]]},G=S.textObjs;S.textObjs=[],P.textObjs=[];for(let nt=0;nt<G.length;nt++)nt<j?this.addTxtToLine(S,G[nt]):nt>j?this.addTxtToLine(P,G[nt]):(this.addTxtToLine(S,K),this.addTxtToLine(P,H));return this.calculateSize(S),this.calculateSize(P),_==k.length-1?k.push(P):k.splice(_+1,0,P),P}findAndMergeSmallLine(_,g,x){let f=0,k=_.matchAll(x),S=[];for(;;){let T=k.next();if(T.done)break;let P=T.value[0],j=T.value.index,Z=0,M=[];for(let O=0;O<P.length;O++)"L"==P[O]?Z=j+O:M.push(j+O);for(const O of M){for(const K of g[O].textObjs)this.addTxtToLine(g[Z],K);g[Z].top=void 0,g[Z].bottom=void 0,S.push(O)}f++}S.sort((T,P)=>T<P?1:-1);for(const T of S)g.splice(T,1);return f}newLine(_,g){let x={strLine:"",transform:[],textObjs:[],pageIndex:g,width:0,height:0,txtLength:0};return x.transform[4]=_.transform[4],x.transform[5]=_.transform[5],x.height=_.height,x.width=_.width,x.txtLength=_.str.length,x.textObjs.push(_),x}addTxtToLine(_,g){g.transform[4]<_.transform[4]&&(_.transform[4]=g.transform[4]),g.transform[5]<_.transform[5]&&(_.transform[5]=g.transform[5]),g.transform[5]+g.height>_.transform[5]+_.height&&(_.height=g.transform[5]+g.height-_.transform[5]),g.transform[4]+g.width>_.transform[4]+_.width&&(_.width=g.transform[4]+g.width-_.transform[4]),_.txtLength+=g.str.length,_.textObjs.push(g);let x=_.transform[4]+_.width,f=_.height;for(const k of _.textObjs)k.transform[4]+k.width>x&&(x=k.transform[4]+k.width),k.transform[5]+k.height>_.transform[5]+f&&(f=k.transform[5]+k.height-_.transform[5]);_.width=x-_.transform[4],_.height=f}static transform(_,g){return pdfjsLib.Util.transform(_,g)}render(_,g,x,f){for(var k,T=_.length,P=0;P<T;P++){var j=document.createElement("div");j.className="pdf-page",j.id="page-"+P,null===(k=document.getElementById(g))||void 0===k||k.appendChild(j),this.renderPage(_[P],x,f)}}calculateSize(_){if(0==_.textObjs.length)return;_.textObjs.sort((M,O)=>1e6*Math.floor(M.transform[4])+M.transform[5]>1e6*Math.floor(O.transform[4])+O.transform[5]?1:-1),_.strLine="";let g=0,x=0,f=0,k=0,S=9999,T=0,P=9999;for(const M of _.textObjs){let O=E.CanvasUtil.isObjIntersec(_.textObjs[0],M);f=M.transform[4];let K=f-x>h.CONST.SPLIT_MARGIN&&""!=M.str.trim()||k!=M.transform[5]?"|":"";_.strLine+=K+M.str,f<P&&(P=f);let H=M.transform[4]+M.width;O&&(x=H),H>g&&O&&(g=H),O&&(k=M.transform[5]),M.transform[5]<S&&(S=M.transform[5]),M.transform[5]+M.height>T&&(T=M.transform[5]+M.height)}_.transform[4]=P,_.transform[5]=S,_.width=g-P,_.height=T-S,_.transform[0]=S,_.transform[1]=T;let j=h.CONST.TVCN_CHAR,Z=_.strLine;for(const M of j)Z=Z.replace(new RegExp(M[0],"g"),M[1]);_.strLine=Z}renderPage(_,g,x){var f=_._pageIndex,k=_.getViewport({scale:g});let S=.8*k.width;var T=document.createElement("canvas"),P=document.getElementById("page-"+f);P?.appendChild(T),T.id="canvas"+f;var j=T.getContext("2d",{alpha:!1});T.height=k.height,T.width=k.width,T.style.height=k.height*S/k.width+"px",T.style.width=S+"px",P&&(P.style.width=T.style.width,P.style.height=T.style.height);const O={canvasContext:j,transform:[1,0,0,1,0,0],viewport:k,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};_.render(O).promise.then(function(){x&&x(j,_._pageIndex,k)})}}J.PdfRender=z},90961:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.Process=void 0;const E=A(53108),h=A(7898),z=A(95070),w=A(25937),_=A(46215),g=A(48693),x=A(98930),f=A(36391),k=A(1470),S=A(34259),T=A(89945),P=A(42815);J.Process=class j{constructor(M){var O,K,H;let G=JSON.parse(M);z.CONST.RENDER_SCALE=G.RENDER_SCALE,z.CONST.LINE_SMALL_HEIGHT=G.LINE_SMALL_HEIGHT*z.CONST.RENDER_SCALE,z.CONST.SPLIT_MARGIN=G.SPLIT_MARGIN*z.CONST.RENDER_SCALE,z.CONST.INTERSEC_MARGIN=G.INTERSEC_MARGIN*z.CONST.RENDER_SCALE,z.CONST.LINE_MAGIN=G.LINE_MAGIN*z.CONST.RENDER_SCALE,z.CONST.MARGIN_LEFT=G.MARGIN_LEFT*z.CONST.RENDER_SCALE,z.CONST.ENABLE_IMAGE_PROCESS=G.ENABLE_IMAGE_PROCESS,z.CONST.STEP_SIZE=G.STEP_SIZE,z.CONST.CROP_FULL_WIDTH=G.CROP_FULL_WIDTH,z.CONST.OVERLAP=G.OVERLAP,z.CONST.QUESTION_PATTERN=G.QUESTION_PATTERN,z.CONST.QUESTION_PATTERN2=G.QUESTION_PATTERN2,z.CONST.BREAK_LINE_PATTERN=G.BREAK_LINE_PATTERN,z.CONST.SECTION_PATTERN_LOWER=G.SECTION_PATTERN_LOWER,z.CONST.SECTION_PATTERN_NORMAL=G.SECTION_PATTERN_NORMAL,z.CONST.KICK_PATTERN=G.KICK_PATTERN,z.CONST.TVCN_CHAR=G.TVCN_CHAR,z.CONST.HET_PATTERN=G.HET_PATTERN,z.CONST.DAPAN_PATTERN=G.DAPAN_PATTERN,z.CONST.HUONGDAN_PATTERN=G.HUONGDAN_PATTERN,z.CONST.MULTIPLE_ANS_PATTERN=G.MULTIPLE_ANS_PATTERN,z.CONST.DRAW_RESULT=G.DRAW_RESULT,z.CONST.SKIP_CHAR=G.SKIP_CHAR,z.CONST.FOOTER_PATTERN=null!==(O=G.FOOTER_PATTERN)&&void 0!==O?O:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],z.CONST.HELP_ANS_PATTERN=null!==(K=G.HELP_ANS_PATTERN)&&void 0!==K?K:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"],z.CONST.ANS_PATTERN=null!==(H=G.ANS_PATTERN)&&void 0!==H?H:["([\\s\\|\\.]+[ABCDEFGHIJK][\\s\\|]*[\\.\\)])"]}setUpdateStatusCallback(M){this.updateStatusCallback=M}setOncompleteCallback(M){this.onCompleteCallback=M}parsePdf(M){let O=new k.PdfRender;O.loadPdf(M,K=>{const H=K.length;let G=[],nt=[],X=document.createElement("div");X.id="hiddenWrapper",X.style.width="1px",X.style.height="1px",X.style.overflow="hidden",X.style.opacity="0",X.style.zIndex="-9999",X.style.position="fixed",X.style.top="0",X.style.left="0",document.body.appendChild(X);let it=document.createElement("div"),ot="canvasWrapper";it.id=ot,X.appendChild(it);const ft=(new Date).getTime();let xt=[];O.render(K,ot,z.CONST.RENDER_SCALE,(st,Mt,ee)=>{if(null!=st&&(G[Mt]=st,nt[Mt]=ee),xt.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${xt.length}/${H}`),xt.length==H){const St=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(St-ft)/1e3+" secs"),this.startAnalyze(G,nt,K)}})})}showHidden(){let M=document.getElementById("hiddenWrapper");M&&(M.style.opacity="1",M.style.width="",M.style.height="",M.style.overflow="",M.style.position="")}imgToTextObj(M,O){return{str:"img",fontName:O,width:M.paintWidth,height:M.paintHeight,transform:[-999,0,0,0,-M.left,-M.top-M.paintHeight]}}startAnalyze(M,O,K){const H=K.length;let G=[],nt=[],X=[],it=[],ot=new k.PdfRender;const ft=(new Date).getTime();for(let xt=0;xt<H;xt++){const st=xt;let Mt=ot.getImages(K[xt],st);for(const ee of Mt)it.push(ee);K[xt].getTextContent().then(ee=>{var St;for(const yt of Mt)ee.items.push(this.imgToTextObj(yt,ee.items.length>0?ee.items[0].fontName:""));var Jt=ot.getLines(ee,st,M[st],O[st]);if(nt=nt.concat(Jt),X[st]=ee.styles,G.push(1),G.length==H){nt.sort((oe,Be)=>1e7*oe.pageIndex+(oe.transform.length>0?oe.transform[5]:0)-(1e7*Be.pageIndex+(Be.transform.length>0?Be.transform[5]:0))),ot.findAndSplitQuestAnsLine(nt,X,M),""!=z.CONST.DRAW_RESULT&&console.log(nt);let yt=this.findEntityPos(nt,X,M,ot.imageCache,0);console.log("lstPos",yt);let qt=!1;for(const oe of yt)if(oe.type==S.QuestionParser.TYPE_NAME){qt=!0;break}if(qt||(yt=this.findEntityPos(nt,X,M,ot.imageCache,1)),0==yt.length)return void(this.onCompleteCallback&&this.onCompleteCallback([],M));let Yt=yt[0].type==w.DapAnChiTietParser.TYPE_NAME,Ft=Yt?JSON.parse(yt[0].str):null,pe=new Map,Me=new Map;if(Yt){for(const oe of Ft.main)pe.set(oe.num,oe.str);for(const oe of Ft.sub)Me.set(oe.num,oe.str)}let Bn=this.getQuestionInfo(yt,nt,M,pe);Bn.forEach(oe=>{if(!pe.has(oe.num)&&!Me.has(oe.num)&&oe.help&&oe.help.text){let Be=_.DapAnParser.getAnsFromHelp(oe.help.text);""!=Be&&Me.set(oe.num,Be)}});for(const oe of Bn){if(!oe.isGroup&&0==oe.answers.length&&pe.has(oe.num)){let Be={pageIndex:oe.remove.pageIndex,top:oe.remove.top-1,left:oe.remove.left-1,width:1,heigh:1};for(const Wn of["A","B","C","D"]){let yi={label:Wn,remove:Be,positions:[Be]};pe.get(oe.num)==Wn&&(yi.isCorrect=!0),oe.answers.push(yi)}oe.isFixAns=!0}if(!oe.isGroup&&0==oe.answers.length&&!pe.has(oe.num)&&Me.has(oe.num)&&(oe.strAns=Me.get(oe.num)),!oe.isGroup&&oe.answers.length>0&&!pe.has(oe.num)&&Me.has(oe.num))for(const Be of oe.answers)Be.label==(null===(St=Me.get(oe.num))||void 0===St?void 0:St.toUpperCase().substring(0,1))&&(Be.isCorrect=!0)}const jn=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(jn-ft)/1e3+" secs"),this.showOnCanvas(Bn,yt,nt,M,it,z.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(Bn,M)}})}}findEntityPos(M,O,K,H,G){let nt=[],ot=!1;var xt=[{parser:new T.SectionParser,on:[],off:[]},{parser:new S.QuestionParser(G),on:[3,4],off:[6]},{parser:new E.AnswerParser,on:[3,6],off:[]},{parser:new x.HetParser(!1),on:[6,8],off:[0,2]},{parser:new _.DapAnParser(!1),on:[6,8],off:[0,2,4]},{parser:new f.HuongDanParser,on:[],off:[8]},{parser:new w.DapAnChiTietParser(!1,yt=>{for(const qt of yt)nt.unshift(qt)}),on:[],off:[2]},{parser:new g.FooterParser,on:[],off:[]},{parser:new P.DapAnDienTuParser(!1,yt=>{if(0!=yt.length)if(nt.length>0&&nt[0].type==w.DapAnChiTietParser.TYPE_NAME){let qt=JSON.parse(yt[0].str),Yt=JSON.parse(nt[0].str);Yt.sub=qt.sub,nt[0].str=JSON.stringify(Yt)}else yt[0].type=w.DapAnChiTietParser.TYPE_NAME,nt.unshift(yt[0])}),on:[],off:[2]}],st=[8,0,1,2,3,4,5,6,7],Mt=null;let ee=0,St="";for(const yt of M){(ee==M.length-1||yt.pageIndex<M[ee+1].pageIndex)&&(yt.isLastLine=!0);for(const qt of st){let Yt=xt[qt];var Jt=Yt.parser.process(nt,yt,ee,Mt,O[yt.pageIndex],K[yt.pageIndex]);if(Jt.length>0){for(const Ft of Jt){if(Ft.type!=E.AnswerParser.TYPE_NAME&&Ft.type!=g.FooterParser.TYPE_NAME&&(St=""),Ft.type==E.AnswerParser.TYPE_NAME){if(!"ABCDEFGH".startsWith(St+Ft.str))continue;St+=Ft.str;for(let pe=nt.length-1;pe>=0&&nt[pe].type==T.SectionParser.TYPE_NAME;pe--)nt.splice(pe,1)}Ft.type==g.FooterParser.TYPE_NAME&&(yt.isFooter=!0),Ft.type==_.DapAnParser.TYPE_NAME&&(ot=!0),Ft.type==f.HuongDanParser.TYPE_NAME&&ot&&xt[5].parser.off(),nt.push(Ft)}for(const Ft of Yt.on)xt[Ft].parser.on();for(const Ft of Yt.off)xt[Ft].parser.off();break}}Mt=yt,ee++}for(const yt of xt)yt.parser.off();return nt.forEach(yt=>{if(!M[yt.lineIndex].top){let Yt=h.CanvasUtil.getTopLine(H[yt.pageIndex],yt.lineIndex,M);M[yt.lineIndex].top=Yt[0],1!=yt.isIntersec&&(yt.isIntersec=Yt[1])}}),nt.forEach(yt=>{if(!M[yt.lineIndex].bottom){let Yt=h.CanvasUtil.getBottomLine(H[yt.pageIndex],yt.lineIndex,M);M[yt.lineIndex].bottom=Yt[0],1!=yt.isIntersec&&(yt.isIntersec=Yt[0])}}),nt}showOnCanvas(M,O,K,H,G,nt){const X=(new Date).getTime(),it=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]),ot=new Map([[S.QuestionParser.TYPE_NAME,"red"],[E.AnswerParser.TYPE_NAME,"blue"],[x.HetParser.TYPE_NAME,"gray"],[w.DapAnChiTietParser.TYPE_NAME,"green"],[_.DapAnParser.TYPE_NAME,"orange"],[f.HuongDanParser.TYPE_NAME,"pink"],[g.FooterParser.TYPE_NAME,"yellow"],[T.SectionParser.TYPE_NAME,"black"]]);if(nt.indexOf("quest")>=0)for(const xt of M){for(const st of xt.positions)h.CanvasUtil.drawBox(H[st.pageIndex],xt.isGroup?"black":"red",st);h.CanvasUtil.drawBox(H[xt.remove.pageIndex],"yellow",xt.remove);for(const st of xt.answers){for(const Mt of st.positions)h.CanvasUtil.drawBox(H[Mt.pageIndex],it.get(st.label)+"",Mt,!0);h.CanvasUtil.drawBox(H[st.remove.pageIndex],"yellow",st.remove),st.isCorrect&&h.CanvasUtil.drawPoint(H[st.positions[0].pageIndex],"green",st.positions[0])}if(xt.help){for(const st of xt.help.positions)h.CanvasUtil.drawBox(H[st.pageIndex],"orange",st);xt.help.remove&&h.CanvasUtil.drawBox(H[xt.help.remove.pageIndex],"yellow",xt.help.remove)}}if(nt.indexOf("line")>=0)for(const xt of K)h.CanvasUtil.drawBox2(H[xt.pageIndex],xt.height<z.CONST.LINE_SMALL_HEIGHT?"red":"rgba(50, 58, 168, 0.4)",xt.width,xt.height,xt.transform);if(nt.indexOf("txt")>=0)for(const xt of K)for(const st of xt.textObjs)""!=st.str.trim()&&h.CanvasUtil.drawBox2(H[xt.pageIndex],xt.height<z.CONST.LINE_SMALL_HEIGHT?"red":"rgba(132, 0, 137, 0.2)",st.width,st.height,st.transform);if(nt.indexOf("img")>=0)for(const xt of G)h.CanvasUtil.drawBox2(H[xt.pageIndex],"green",xt.paintWidth,xt.paintHeight,[0,0,0,0,-xt.left,-xt.top-xt.paintHeight]);if(nt.indexOf("pos")>=0)for(const xt of O){let st={top:xt.transform[5],left:xt.transform[4],width:0,heigh:0,pageIndex:xt.pageIndex};h.CanvasUtil.drawPoint(H[xt.pageIndex],ot.get(xt.type)+"",st)}const ft=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(ft-X)/1e3+" secs")}getQuestionInfo(M,O,K,H){if(0==M.length)return[];let G=0,nt=[],X=new Map,it="",ot=!1,ft=!1,xt=0;M.forEach((st,Mt)=>{Mt>0&&null==M[Mt-1].text&&(M[Mt-1].text=O.slice(M[Mt-1].lineIndex,st.lineIndex)),Mt==M.length-1&&(M[Mt].text=O.slice(M[Mt].lineIndex,O.length))}),M.forEach(st=>{let Mt=":"+st.type;!ot&&(st.type==x.HetParser.TYPE_NAME||st.type==_.DapAnParser.TYPE_NAME)&&(ot=!0);let ee=null;for(let Jt=G+1;Jt<M.length;Jt++)if((st.type!=S.QuestionParser.TYPE_NAME||M[Jt].type!=E.AnswerParser.TYPE_NAME)&&M[Jt].type!=g.FooterParser.TYPE_NAME){ee=M[Jt];break}let St=K[st.pageIndex].canvas.height-20;if(!ot&&st.type==T.SectionParser.TYPE_NAME&&(xt++,nt.push({num:xt,answers:[],remove:T.SectionParser.getRemoveBox(st,O),positions:T.SectionParser.getBoxes(st,O,ee,St),isGroup:!0,text:st.text})),!ot&&st.type==S.QuestionParser.TYPE_NAME&&nt.push({num:+st.str,answers:[],remove:S.QuestionParser.getRemoveBox(st,O),positions:S.QuestionParser.getBoxes(st,O,ee,St),group:xt,text:st.text}),!ot&&st.type==E.AnswerParser.TYPE_NAME&&nt.length>0){let Jt=nt[nt.length-1].num,yt={label:st.str,remove:E.AnswerParser.getRemoveBox(st,O),positions:E.AnswerParser.getBoxes(st,O,ee,St)};H.size>0&&H.get(Jt)==yt.label&&(yt.isCorrect=!0),nt[nt.length-1].answers.push(yt);let qt=O[st.lineIndex].strLine.replace(/\|/g,"").trim().match(z.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=qt&&qt.length>0&&(nt[nt.length-1].isFixAns=!0),1==st.isIntersec&&(nt[nt.length-1].isFixAns=!0)}if(!ft&&st.type==f.HuongDanParser.TYPE_NAME&&1==nt.length&&it.endsWith(`:${S.QuestionParser.TYPE_NAME}:${E.AnswerParser.TYPE_NAME}`)&&(ft=!0),st.type==f.HuongDanParser.TYPE_NAME&&ft){let Jt=nt[nt.length-1].num;X.set(Jt,{num:Jt,positions:f.HuongDanParser.getBoxes(st,O,ee,St),text:st.text})}if(st.type==f.HuongDanParser.TYPE_NAME&&!ft&&(X.clear(),ot=!0),ot&&st.type==S.QuestionParser.TYPE_NAME){let Jt=+st.str;X.get(Jt)||X.set(Jt,{num:Jt,positions:S.QuestionParser.getBoxes(st,O,ee,St),remove:S.QuestionParser.getRemoveBox(st,O),text:st.text})}!it.endsWith(Mt)&&st.type!=g.FooterParser.TYPE_NAME&&(it+=Mt),G++});for(const st of nt)st.isGroup||(st.help=X.get(st.num),1==st.answers.length&&(st.answers=[]));return nt}}},34259:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.QuestionParser=void 0;const E=A(7898),h=A(95070),z=A(17825);class w extends z.Parser{constructor(g){super(),this.TYPE=w.TYPE_NAME,this.questType=g}parse(g,x,f,k,S,T){var P=this.matchPos(x.strLine);if(P.value){let j=null;for(let H=P.value.length-1;H>=0;H--)if(P.value[H]){j=P.value[H];break}if(null==j)return[];let M=j.matchAll(/\d+/g).next(),O=j.length;!M.done&&!j.trim().endsWith(".")&&!j.trim().endsWith(":")&&(O=M.value.index+M.value[0].length);let K=x.strLine.replace(/\|/g,"").toLowerCase().indexOf(j)+O-1;return[{str:this.getNumberFromStr(j),pageIndex:x.pageIndex,lineIndex:f,transform:x.transform,startLeft:E.CanvasUtil.calIndexPos2(x.textObjs,S,T,K,!0),type:this.TYPE}]}return[]}matchPos(g){let x=g.replace(/\|/g,"").toLowerCase().trim();if(0==this.questType){let f=h.CONST.QUESTION_PATTERN.join("|");return x.matchAll(f).next()}{let f=h.CONST.QUESTION_PATTERN2.join("|");return x.matchAll(f).next()}}getNumberFromStr(g){var x=g.match(/(\d+)/);return x?x[0]:""}static getRemoveBox(g,x){let f=g.startLeft?g.startLeft[5]:x[g.lineIndex].top,k=g.transform[4]-h.CONST.MARGIN_LEFT,S=g.startLeft?g.startLeft[5]+g.startLeft[3]:x[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:f||20,left:k,heigh:S&&f?S-f:0,width:(g.startLeft?g.startLeft[4]:0)-k}}static getBoxes(g,x,f,k){let S=k;for(let nt=g.lineIndex;nt<x.length;nt++)if(E.CanvasUtil.isLastLineOfPage(nt,x)){let X=x[nt].isFooter?x[nt-1]:x[nt];S=X.transform[5]+X.height+20;break}let T=[],P=g.pageIndex,j=f?f.lineIndex:x.length-1,Z=x[g.lineIndex].transform[4]-h.CONST.MARGIN_LEFT,M=x[g.lineIndex].top;if(!M)return[];let O=h.CONST.CROP_FULL_WIDTH?E.CanvasUtil.getMaxLineRight(-1,x)+2*h.CONST.MARGIN_LEFT:x[g.lineIndex].transform[4]+x[g.lineIndex].width+2*h.CONST.MARGIN_LEFT,K=S,H=P,G=g.lineIndex+1;for(;G<=j;G++){let nt=x[G].top;if(G==x.length-1&&!f&&(nt=x[G].bottom),!h.CONST.CROP_FULL_WIDTH){let it=x[G-1].transform[4]+x[G-1].width+2*h.CONST.MARGIN_LEFT;it>O&&(O=it)}let X=x[G-1].transform[4]-h.CONST.MARGIN_LEFT;X<Z&&(Z=X),x[G].isFooter&&nt?K=nt:(x[G].pageIndex>H&&(x[G-1].isFooter||(K=S),T.push({pageIndex:H,top:M,left:Z,width:O-Z,heigh:K-M}),M=20,Z=E.CanvasUtil.getMinLineLeft(x[G].pageIndex,x)-h.CONST.MARGIN_LEFT),H=x[G].pageIndex,nt&&(K=nt))}if(G-=1,!f&&E.CanvasUtil.isLastLineOfPage(G,x)){let nt=x[G].isFooter?x[G-1]:x[G];K=nt.transform[5]+nt.height+20}return E.CanvasUtil.isFirstLineOfPage(G,x)||T.push({pageIndex:H,top:M,left:Z,width:O-Z,heigh:K-M}),T}}J.QuestionParser=w,w.TYPE_NAME="question"},89945:(ut,J,A)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.SectionParser=void 0;const E=A(7898),h=A(95070),z=A(17825),w=A(34259);class _ extends z.Parser{constructor(){super(),this.TYPE=_.TYPE_NAME}parse(x,f,k,S,T,P){let j=f.strLine.replace(/\|/g,"").toLowerCase().trim().match(h.CONST.SECTION_PATTERN_LOWER.join("|")),Z=null!=j&&j.length>0;if(Z||(j=f.strLine.replace(/\|/g,"").trim().match(h.CONST.SECTION_PATTERN_NORMAL.join("|")),Z=null!=j&&j.length>0),Z&&j){let M=f.strLine.indexOf(j[0])+j[0].length+1,O=[j[0][0]];for(let K=x.length-1;K>=0;K--){if(x[K].type==w.QuestionParser.TYPE_NAME){O.push(".Q");break}O.push(x[K].str[0])}return"HGFEDCBA.Q".endsWith(O.join(""))?[]:[{str:j[0],pageIndex:f.pageIndex,lineIndex:k,transform:f.transform,startLeft:E.CanvasUtil.calIndexPos(f.textObjs,T,P,M,!0),type:this.TYPE}]}return[]}static getRemoveBox(x,f){let k=f[x.lineIndex].top,S=x.transform[4]-h.CONST.MARGIN_LEFT,T=f[x.lineIndex].bottom;return{pageIndex:x.pageIndex,top:k||20,left:S,heigh:T&&k?T-k:0,width:S-S}}static getBoxes(x,f,k,S){const T=S;let P=[],j=x.pageIndex,Z=k?k.lineIndex:f.length-1,M=E.CanvasUtil.getMinLineLeft(-1,f)-h.CONST.MARGIN_LEFT,O=f[x.lineIndex].top;if(!O)return[];let K=E.CanvasUtil.getMaxLineRight(-1,f)+2*h.CONST.MARGIN_LEFT,H=T,G=j,nt=x.lineIndex+1;for(;nt<=Z;nt++){let X=f[nt].top;if(f[nt].isFooter&&X)H=X;else if(f[nt].pageIndex>G&&(P.push({pageIndex:G,top:O,left:M,width:K-M,heigh:H-O}),O=20),G=f[nt].pageIndex,X){H=X;break}}return nt>=f.length&&(nt=f.length-1),E.CanvasUtil.isFirstLineOfPage(nt,f)||P.push({pageIndex:G,top:O,left:M,width:K-M,heigh:H-O}),P}}J.SectionParser=_,_.TYPE_NAME="section"},30361:function(ut,J,A){var E=this&&this.__createBinding||(Object.create?function(z,w,_,g){void 0===g&&(g=_),Object.defineProperty(z,g,{enumerable:!0,get:function(){return w[_]}})}:function(z,w,_,g){void 0===g&&(g=_),z[g]=w[_]}),h=this&&this.__exportStar||function(z,w){for(var _ in z)"default"!==_&&!Object.prototype.hasOwnProperty.call(w,_)&&E(w,z,_)};Object.defineProperty(J,"__esModule",{value:!0}),h(A(90961),J)},65463:(ut,J,A)=>{A.d(J,{a:()=>Eu});var E=A(94650),h=A(15861),z=function(N){return function w(L){return!!L&&"object"==typeof L}(N)&&!function _(L){var N=Object.prototype.toString.call(L);return"[object RegExp]"===N||"[object Date]"===N||function f(L){return L.$$typeof===x}(L)}(N)},x="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function S(L,N){return!1!==N.clone&&N.isMergeableObject(L)?H(function k(L){return Array.isArray(L)?[]:{}}(L),L,N):L}function T(L,N,F){return L.concat(N).map(function($){return S($,F)})}function Z(L){return Object.keys(L).concat(function j(L){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(L).filter(function(N){return L.propertyIsEnumerable(N)}):[]}(L))}function M(L,N){try{return N in L}catch{return!1}}function H(L,N,F){(F=F||{}).arrayMerge=F.arrayMerge||T,F.isMergeableObject=F.isMergeableObject||z,F.cloneUnlessOtherwiseSpecified=S;var $=Array.isArray(N);return $===Array.isArray(L)?$?F.arrayMerge(L,N,F):function K(L,N,F){var $={};return F.isMergeableObject(L)&&Z(L).forEach(function(W){$[W]=S(L[W],F)}),Z(N).forEach(function(W){(function O(L,N){return M(L,N)&&!(Object.hasOwnProperty.call(L,N)&&Object.propertyIsEnumerable.call(L,N))})(L,W)||($[W]=M(L,W)&&F.isMergeableObject(N[W])?function P(L,N){if(!N.customMerge)return H;var F=N.customMerge(L);return"function"==typeof F?F:H}(W,F)(L[W],N[W],F):S(N[W],F))}),$}(L,N,F):S(N,F)}H.all=function(N,F){if(!Array.isArray(N))throw new Error("first argument should be an array");return N.reduce(function($,W){return H($,W,F)},{})};var nt=H;function it(L){return L instanceof HTMLElement}function ot(L){return"function"==typeof L}function ft(L){return"string"==typeof L}function xt(L){return void 0===L}class st{on(N,F,$,W){return void 0===W&&(W=!1),xt(this.bindings)&&(this.bindings={}),xt(this.bindings[N])&&(this.bindings[N]=[]),this.bindings[N].push({handler:F,ctx:$,once:W}),this}once(N,F,$){return this.on(N,F,$,!0)}off(N,F){return xt(this.bindings)||xt(this.bindings[N])||(xt(F)?delete this.bindings[N]:this.bindings[N].forEach(($,W)=>{$.handler===F&&this.bindings[N].splice(W,1)})),this}trigger(N){for(var F=arguments.length,$=new Array(F>1?F-1:0),W=1;W<F;W++)$[W-1]=arguments[W];return!xt(this.bindings)&&this.bindings[N]&&this.bindings[N].forEach((dt,pt)=>{const{ctx:ht,handler:bt,once:kt}=dt;bt.apply(ht||this,$),kt&&this.bindings[N].splice(pt,1)}),this}}function Mt(L){const N=Object.getOwnPropertyNames(L.constructor.prototype);for(let F=0;F<N.length;F++){const $=N[F],W=L[$];"constructor"!==$&&"function"==typeof W&&(L[$]=W.bind(L))}return L}function Jt(L){return ft(L)&&""!==L?"-"!==L.charAt(L.length-1)?`${L}-`:L:""}function qt(L){return null==L||!L.element||!L.on}function Yt(){let L=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,N=>{const F=(L+16*Math.random())%16|0;return L=Math.floor(L/16),("x"==N?F:3&F|8).toString(16)})}function Ft(){return Ft=Object.assign?Object.assign.bind():function(L){for(var N=1;N<arguments.length;N++){var F=arguments[N];for(var $ in F)Object.prototype.hasOwnProperty.call(F,$)&&(L[$]=F[$])}return L},Ft.apply(this,arguments)}function pe(L,N){if(null==L)return{};var W,dt,F={},$=Object.keys(L);for(dt=0;dt<$.length;dt++)!(N.indexOf(W=$[dt])>=0)&&(F[W]=L[W]);return F}const Me=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],Bn=["mainAxis","crossAxis","limiter"];function jn(L){return L.split("-")[0]}function oe(L){return L.split("-")[1]}function Be(L){return["top","bottom"].includes(jn(L))?"x":"y"}function Wn(L){return"y"===L?"height":"width"}function yi(L,N,F){let{reference:$,floating:W}=L;const dt=$.x+$.width/2-W.width/2,pt=$.y+$.height/2-W.height/2,ht=Be(N),bt=Wn(ht),kt=$[bt]/2-W[bt]/2,Lt="x"===ht;let Pt;switch(jn(N)){case"top":Pt={x:dt,y:$.y-W.height};break;case"bottom":Pt={x:dt,y:$.y+$.height};break;case"right":Pt={x:$.x+$.width,y:pt};break;case"left":Pt={x:$.x-W.width,y:pt};break;default:Pt={x:$.x,y:$.y}}switch(oe(N)){case"start":Pt[ht]-=kt*(F&&Lt?-1:1);break;case"end":Pt[ht]+=kt*(F&&Lt?-1:1)}return Pt}const he=function(){var L=(0,h.Z)(function*(N,F,$){const{placement:W="bottom",strategy:dt="absolute",middleware:pt=[],platform:ht}=$,bt=pt.filter(Boolean),kt=yield null==ht.isRTL?void 0:ht.isRTL(F);let Qt=yield ht.getElementRects({reference:N,floating:F,strategy:dt}),{x:Lt,y:Pt}=yi(Qt,W,kt),Xt=W,Wt={},Se=0;for(let ze=0;ze<bt.length;ze++){const{name:Je,fn:gn}=bt[ze],{x:Ue,y:ne,data:te,reset:ye}=yield gn({x:Lt,y:Pt,initialPlacement:W,placement:Xt,strategy:dt,middlewareData:Wt,rects:Qt,platform:ht,elements:{reference:N,floating:F}});Lt=Ue??Lt,Pt=ne??Pt,Wt=Ft({},Wt,{[Je]:Ft({},Wt[Je],te)}),ye&&Se<=50&&(Se++,"object"==typeof ye&&(ye.placement&&(Xt=ye.placement),ye.rects&&(Qt=!0===ye.rects?yield ht.getElementRects({reference:N,floating:F,strategy:dt}):ye.rects),({x:Lt,y:Pt}=yi(Qt,Xt,kt))),ze=-1)}return{x:Lt,y:Pt,placement:Xt,strategy:dt,middlewareData:Wt}});return function(F,$,W){return L.apply(this,arguments)}}();function Ie(L){return"number"!=typeof L?function $t(L){return Ft({top:0,right:0,bottom:0,left:0},L)}(L):{top:L,right:L,bottom:L,left:L}}function Vt(L){return Ft({},L,{top:L.y,left:L.x,right:L.x+L.width,bottom:L.y+L.height})}function be(L,N){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,h.Z)(function*(L,N){var F;void 0===N&&(N={});const{x:$,y:W,platform:dt,rects:pt,elements:ht,strategy:bt}=L,{boundary:kt="clippingAncestors",rootBoundary:Qt="viewport",elementContext:Lt="floating",altBoundary:Pt=!1,padding:Xt=0}=N,Wt=Ie(Xt),ze=ht[Pt?"floating"===Lt?"reference":"floating":Lt],Je=Vt(yield dt.getClippingRect({element:null==(F=yield null==dt.isElement?void 0:dt.isElement(ze))||F?ze:ze.contextElement||(yield null==dt.getDocumentElement?void 0:dt.getDocumentElement(ht.floating)),boundary:kt,rootBoundary:Qt,strategy:bt})),gn="floating"===Lt?Ft({},pt.floating,{x:$,y:W}):pt.reference,Ue=yield null==dt.getOffsetParent?void 0:dt.getOffsetParent(ht.floating),ne=(yield null==dt.isElement?void 0:dt.isElement(Ue))&&(yield null==dt.getScale?void 0:dt.getScale(Ue))||{x:1,y:1},te=Vt(dt.convertOffsetParentRelativeRectToViewportRelativeRect?yield dt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:gn,offsetParent:Ue,strategy:bt}):gn);return{top:(Je.top-te.top+Wt.top)/ne.y,bottom:(te.bottom-Je.bottom+Wt.bottom)/ne.y,left:(Je.left-te.left+Wt.left)/ne.x,right:(te.right-Je.right+Wt.right)/ne.x}})).apply(this,arguments)}const t=Math.min,le=Math.max;function Ln(L,N,F){return le(L,t(N,F))}const Ce={left:"right",right:"left",bottom:"top",top:"bottom"};function On(L){return L.replace(/left|right|bottom|top/g,N=>Ce[N])}const si={start:"end",end:"start"};function Qe(L){return L.replace(/start|end/g,N=>si[N])}function Bt(L){return"x"===L?"y":"x"}const wi=function(N){return void 0===N&&(N={}),{options:N,fn(F){const{x:$,y:W,placement:dt,rects:pt,middlewareData:ht}=F,{offset:bt=0,mainAxis:kt=!0,crossAxis:Qt=!0}=N,Lt={x:$,y:W},Pt=Be(dt),Xt=Bt(Pt);let Wt=Lt[Pt],Se=Lt[Xt];const ze="function"==typeof bt?bt(F):bt,Je="number"==typeof ze?{mainAxis:ze,crossAxis:0}:Ft({mainAxis:0,crossAxis:0},ze);if(kt){const ye="y"===Pt?"height":"width",Cn=pt.reference[Pt]-pt.floating[ye]+Je.mainAxis,bn=pt.reference[Pt]+pt.reference[ye]-Je.mainAxis;Wt<Cn?Wt=Cn:Wt>bn&&(Wt=bn)}if(Qt){var gn,Ue,ne,te;const ye="y"===Pt?"width":"height",Cn=["top","left"].includes(jn(dt)),bn=pt.reference[Xt]-pt.floating[ye]+(Cn&&null!=(gn=null==(Ue=ht.offset)?void 0:Ue[Xt])?gn:0)+(Cn?0:Je.crossAxis),Li=pt.reference[Xt]+pt.reference[ye]+(Cn?0:null!=(ne=null==(te=ht.offset)?void 0:te[Xt])?ne:0)-(Cn?Je.crossAxis:0);Se<bn?Se=bn:Se>Li&&(Se=Li)}return{[Pt]:Wt,[Xt]:Se}}}};function Rn(L){var N;return(null==(N=L.ownerDocument)?void 0:N.defaultView)||window}function qn(L){return Rn(L).getComputedStyle(L)}function Ui(L){return Dr(L)?(L.nodeName||"").toLowerCase():""}let Ya;function Nr(){if(Ya)return Ya;const L=navigator.userAgentData;return L&&Array.isArray(L.brands)?(Ya=L.brands.map(N=>N.brand+"/"+N.version).join(" "),Ya):navigator.userAgent}function to(L){return L instanceof Rn(L).HTMLElement}function ki(L){return L instanceof Rn(L).Element}function Dr(L){return L instanceof Rn(L).Node}function jr(L){return!(typeof ShadowRoot>"u")&&(L instanceof Rn(L).ShadowRoot||L instanceof ShadowRoot)}function Ga(L){const{overflow:N,overflowX:F,overflowY:$,display:W}=qn(L);return/auto|scroll|overlay|hidden/.test(N+$+F)&&!["inline","contents"].includes(W)}function Cc(L){return["table","td","th"].includes(Ui(L))}function Ns(L){const N=/firefox/i.test(Nr()),F=qn(L),$=F.backdropFilter||F.WebkitBackdropFilter;return"none"!==F.transform||"none"!==F.perspective||!!$&&"none"!==$||N&&"filter"===F.willChange||N&&!!F.filter&&"none"!==F.filter||["transform","perspective"].some(W=>F.willChange.includes(W))||["paint","layout","strict","content"].some(W=>{const dt=F.contain;return null!=dt&&dt.includes(W)})}function qr(){return!/^((?!chrome|android).)*safari/i.test(Nr())}function Ds(L){return["html","body","#document"].includes(Ui(L))}const Fr={x:1,y:1};function pa(L){const N=!ki(L)&&L.contextElement?L.contextElement:ki(L)?L:null;if(!N)return Fr;const F=N.getBoundingClientRect(),$=qn(N);let W=F.width/parseFloat($.width),dt=F.height/parseFloat($.height);return(!W||!Number.isFinite(W))&&(W=1),(!dt||!Number.isFinite(dt))&&(dt=1),{x:W,y:dt}}function go(L,N,F,$){var W,dt,pt,ht;void 0===N&&(N=!1),void 0===F&&(F=!1);const bt=L.getBoundingClientRect();let kt=Fr;N&&($?ki($)&&(kt=pa($)):kt=pa(L));const Qt=ki(L)?Rn(L):window,Lt=!qr()&&F,Pt=(bt.left+(Lt&&null!=(W=null==(dt=Qt.visualViewport)?void 0:dt.offsetLeft)?W:0))/kt.x,Xt=(bt.top+(Lt&&null!=(pt=null==(ht=Qt.visualViewport)?void 0:ht.offsetTop)?pt:0))/kt.y,Wt=bt.width/kt.x,Se=bt.height/kt.y;return{width:Wt,height:Se,top:Xt,right:Pt+Wt,bottom:Xt+Se,left:Pt,x:Pt,y:Xt}}function fo(L){return((Dr(L)?L.ownerDocument:L.document)||window.document).documentElement}function Wa(L){return ki(L)?{scrollLeft:L.scrollLeft,scrollTop:L.scrollTop}:{scrollLeft:L.pageXOffset,scrollTop:L.pageYOffset}}function Qr(L){return go(fo(L)).left+Wa(L).scrollLeft}function Tc(L,N,F){const $=to(N),W=fo(N),dt=go(L,!0,"fixed"===F,N);let pt={scrollLeft:0,scrollTop:0};const ht={x:0,y:0};if($||!$&&"fixed"!==F)if(("body"!==Ui(N)||Ga(W))&&(pt=Wa(N)),to(N)){const bt=go(N,!0);ht.x=bt.x+N.clientLeft,ht.y=bt.y+N.clientTop}else W&&(ht.x=Qr(W));return{x:dt.left+pt.scrollLeft-ht.x,y:dt.top+pt.scrollTop-ht.y,width:dt.width,height:dt.height}}function ha(L){if("html"===Ui(L))return L;const N=L.assignedSlot||L.parentNode||(jr(L)?L.host:null)||fo(L);return jr(N)?N.host:N}function Ur(L){return to(L)&&"fixed"!==qn(L).position?L.offsetParent:null}function Br(L){const N=Rn(L);let F=Ur(L);for(;F&&Cc(F)&&"static"===qn(F).position;)F=Ur(F);return F&&("html"===Ui(F)||"body"===Ui(F)&&"static"===qn(F).position&&!Ns(F))?N:F||function Ac(L){let N=ha(L);for(;to(N)&&!Ds(N);){if(Ns(N))return N;N=ha(N)}return null}(L)||N}const zr=Math.min,ga=Math.max;function Jr(L){const N=ha(L);return Ds(N)?L.ownerDocument.body:to(N)&&Ga(N)?N:Jr(N)}function fa(L,N){var F;void 0===N&&(N=[]);const $=Jr(L),W=$===(null==(F=L.ownerDocument)?void 0:F.body),dt=Rn($);return W?N.concat(dt,dt.visualViewport||[],Ga($)?$:[]):N.concat($,fa($))}function Hr(L,N,F){return"viewport"===N?Vt(function Oc(L,N){const F=Rn(L),$=fo(L),W=F.visualViewport;let dt=$.clientWidth,pt=$.clientHeight,ht=0,bt=0;if(W){dt=W.width,pt=W.height;const kt=qr();(kt||!kt&&"fixed"===N)&&(ht=W.offsetLeft,bt=W.offsetTop)}return{width:dt,height:pt,x:ht,y:bt}}(L,F)):ki(N)?function Mc(L,N){const F=go(L,!0,"fixed"===N),$=F.top+L.clientTop,W=F.left+L.clientLeft,dt=to(L)?pa(L):{x:1,y:1},pt=L.clientWidth*dt.x,ht=L.clientHeight*dt.y,bt=W*dt.x,kt=$*dt.y;return{top:kt,left:bt,right:bt+pt,bottom:kt+ht,x:bt,y:kt,width:pt,height:ht}}(N,F):Vt(function Ec(L){var N;const F=fo(L),$=Wa(L),W=null==(N=L.ownerDocument)?void 0:N.body,dt=ga(F.scrollWidth,F.clientWidth,W?W.scrollWidth:0,W?W.clientWidth:0),pt=ga(F.scrollHeight,F.clientHeight,W?W.scrollHeight:0,W?W.clientHeight:0);let ht=-$.scrollLeft+Qr(L);const bt=-$.scrollTop;return"rtl"===qn(W||F).direction&&(ht+=ga(F.clientWidth,W?W.clientWidth:0)-dt),{width:dt,height:pt,x:ht,y:bt}}(fo(L)))}function Ic(L,N){const F=N.get(L);if(F)return F;let $=fa(L).filter(ht=>ki(ht)&&"body"!==Ui(ht)),W=null;const dt="fixed"===qn(L).position;let pt=dt?ha(L):L;for(;ki(pt)&&!Ds(pt);){const ht=qn(pt),bt=Ns(pt);(dt?bt||W:bt||"static"!==ht.position||!W||!["absolute","fixed"].includes(W.position))?W=ht:$=$.filter(Qt=>Qt!==pt),pt=ha(pt)}return N.set(L,$),$}const Zc={getClippingRect:function Lc(L){let{element:N,boundary:F,rootBoundary:$,strategy:W}=L;const pt=[..."clippingAncestors"===F?Ic(N,this._c):[].concat(F),$],bt=pt.reduce((kt,Qt)=>{const Lt=Hr(N,Qt,W);return kt.top=ga(Lt.top,kt.top),kt.right=zr(Lt.right,kt.right),kt.bottom=zr(Lt.bottom,kt.bottom),kt.left=ga(Lt.left,kt.left),kt},Hr(N,pt[0],W));return{width:bt.right-bt.left,height:bt.bottom-bt.top,x:bt.left,y:bt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function Sc(L){let{rect:N,offsetParent:F,strategy:$}=L;const W=to(F),dt=fo(F);if(F===dt)return N;let pt={scrollLeft:0,scrollTop:0},ht={x:1,y:1};const bt={x:0,y:0};if((W||!W&&"fixed"!==$)&&(("body"!==Ui(F)||Ga(dt))&&(pt=Wa(F)),to(F))){const kt=go(F);ht=pa(F),bt.x=kt.x+F.clientLeft,bt.y=kt.y+F.clientTop}return{width:N.width*ht.x,height:N.height*ht.y,x:N.x*ht.x-pt.scrollLeft*ht.x+bt.x,y:N.y*ht.y-pt.scrollTop*ht.y+bt.y}},isElement:ki,getDimensions:function Rr(L){if(to(L))return{width:L.offsetWidth,height:L.offsetHeight};const N=go(L);return{width:N.width,height:N.height}},getOffsetParent:Br,getDocumentElement:fo,getScale:pa,getElementRects(L){var N=this;return(0,h.Z)(function*(){let{reference:F,floating:$,strategy:W}=L;const dt=N.getOffsetParent||Br,pt=N.getDimensions;return{reference:Tc(F,yield dt($),W),floating:Ft({x:0,y:0},yield pt($))}})()},getClientRects:L=>Array.from(L.getClientRects()),isRTL:L=>"rtl"===qn(L).direction};function Dc(L){L.cleanup&&L.cleanup();const N=L._getResolvedAttachToOptions();let F=N.element;const $=function Bc(L,N){const F={strategy:"absolute",middleware:[]},$=function Rc(L){return!(!L.options.arrow||!L.el)&&L.el.querySelector(".shepherd-arrow")}(N);return qt(L)||(F.middleware.push(function(N){return void 0===N&&(N={}),{name:"flip",options:N,fn:F=>(0,h.Z)(function*(){var $;const{placement:W,middlewareData:dt,rects:pt,initialPlacement:ht,platform:bt,elements:kt}=F,{mainAxis:Qt=!0,crossAxis:Lt=!0,fallbackPlacements:Pt,fallbackStrategy:Xt="bestFit",flipAlignment:Wt=!0}=N,Se=pe(N,Me),ze=jn(W),gn=Pt||(ze!==ht&&Wt?function Ka(L){const N=On(L);return[Qe(L),N,Qe(N)]}(ht):[On(ht)]),Ue=[ht,...gn],ne=yield be(F,Se),te=[];let ye=(null==($=dt.flip)?void 0:$.overflows)||[];if(Qt&&te.push(ne[ze]),Lt){const{main:ao,cross:Uo}=function Zn(L,N,F){void 0===F&&(F=!1);const $=oe(L),W=Be(L),dt=Wn(W);let pt="x"===W?$===(F?"end":"start")?"right":"left":"start"===$?"bottom":"top";return N.reference[dt]>N.floating[dt]&&(pt=On(pt)),{main:pt,cross:On(pt)}}(W,pt,yield null==bt.isRTL?void 0:bt.isRTL(kt.floating));te.push(ne[ao],ne[Uo])}if(ye=[...ye,{placement:W,overflows:te}],!te.every(ao=>ao<=0)){var Cn,bn;const ao=(null!=(Cn=null==(bn=dt.flip)?void 0:bn.index)?Cn:0)+1,Uo=Ue[ao];if(Uo)return{data:{index:ao,overflows:ye},reset:{placement:Uo}};let bo="bottom";switch(Xt){case"bestFit":{var Li;const sl=null==(Li=ye.map(os=>[os,os.overflows.filter(ba=>ba>0).reduce((ba,Mu)=>ba+Mu,0)]).sort((os,ba)=>os[1]-ba[1])[0])?void 0:Li[0].placement;sl&&(bo=sl);break}case"initialPlacement":bo=ht}if(W!==bo)return{reset:{placement:bo}}}return{}})()}}(),function(N){return void 0===N&&(N={}),{name:"shift",options:N,fn:F=>(0,h.Z)(function*(){const{x:$,y:W,placement:dt}=F,{mainAxis:pt=!0,crossAxis:ht=!1,limiter:bt={fn:Je=>{let{x:gn,y:Ue}=Je;return{x:gn,y:Ue}}}}=N,kt=pe(N,Bn),Qt={x:$,y:W},Lt=yield be(F,kt),Pt=Be(jn(dt)),Xt=Bt(Pt);let Wt=Qt[Pt],Se=Qt[Xt];pt&&(Wt=Ln(Wt+Lt["y"===Pt?"top":"left"],Wt,Wt-Lt["y"===Pt?"bottom":"right"])),ht&&(Se=Ln(Se+Lt["y"===Xt?"top":"left"],Se,Se-Lt["y"===Xt?"bottom":"right"]));const ze=bt.fn(Ft({},F,{[Pt]:Wt,[Xt]:Se}));return Ft({},ze,{data:{x:ze.x-$,y:ze.y-W}})})()}}({limiter:wi(),crossAxis:!0})),$&&F.middleware.push((L=>({name:"arrow",options:L,fn:N=>(0,h.Z)(function*(){const{element:F,padding:$=0}=L??{},{x:W,y:dt,placement:pt,rects:ht,platform:bt}=N;if(null==F)return{};const kt=Ie($),Qt={x:W,y:dt},Lt=Be(pt),Pt=oe(pt),Xt=Wn(Lt),Wt=yield bt.getDimensions(F),Se="y"===Lt?"top":"left",ze="y"===Lt?"bottom":"right",Je=ht.reference[Xt]+ht.reference[Lt]-Qt[Lt]-ht.floating[Xt],gn=Qt[Lt]-ht.reference[Lt],Ue=yield null==bt.getOffsetParent?void 0:bt.getOffsetParent(F);let ne=Ue?"y"===Lt?Ue.clientHeight||0:Ue.clientWidth||0:0;0===ne&&(ne=ht.floating[Xt]);const ye=kt[Se],Cn=ne-Wt[Xt]-kt[ze],bn=ne/2-Wt[Xt]/2+(Je/2-gn/2),Li=Ln(ye,bn,Cn);return{[Lt]:Qt[Lt]-(("start"===Pt?kt[Se]:kt[ze])>0&&bn!==Li&&ht.reference[Xt]<=ht.floating[Xt]?bn<ye?ye-bn:Cn-bn:0),data:{[Lt]:Li,centerOffset:bn-Li}}})()}))({element:$})),F.placement=L.on),nt(N.options.floatingUIOptions||{},F)}(N,L),W=qt(N);return W&&(F=document.body,L.shepherdElementComponent.getElement().classList.add("shepherd-centered")),L.cleanup=function Pc(L,N,F,$){void 0===$&&($={});const{ancestorScroll:W=!0,ancestorResize:dt=!0,elementResize:pt=!0,animationFrame:ht=!1}=$,bt=W&&!ht,kt=bt||dt?[...ki(L)?fa(L):L.contextElement?fa(L.contextElement):[],...fa(N)]:[];kt.forEach(Wt=>{bt&&Wt.addEventListener("scroll",F,{passive:!0}),dt&&Wt.addEventListener("resize",F)});let Qt=null;if(pt){let Wt=!0;Qt=new ResizeObserver(()=>{Wt||F(),Wt=!1}),ki(L)&&!ht&&Qt.observe(L),!ki(L)&&L.contextElement&&!ht&&Qt.observe(L.contextElement),Qt.observe(N)}let Lt,Pt=ht?go(L):null;return ht&&function Xt(){const Wt=go(L);Pt&&(Wt.x!==Pt.x||Wt.y!==Pt.y||Wt.width!==Pt.width||Wt.height!==Pt.height)&&F(),Pt=Wt,Lt=requestAnimationFrame(Xt)}(),F(),()=>{var Wt;kt.forEach(Se=>{bt&&Se.removeEventListener("scroll",F),dt&&Se.removeEventListener("resize",F)}),null==(Wt=Qt)||Wt.disconnect(),Qt=null,ht&&cancelAnimationFrame(Lt)}}(F,L.el,()=>{L.el?function Fc(L,N,F,$){((L,N,F)=>{const $=new Map,W=Ft({platform:Zc},F),dt=Ft({},W.platform,{_c:$});return he(L,N,Ft({},W,{platform:dt}))})(L,N.el,F).then(function Qc(L,N){return F=>{let{x:$,y:W,placement:dt,middlewareData:pt}=F;return L.el&&(Object.assign(L.el.style,N?{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}:{position:"absolute",left:`${$}px`,top:`${W}px`}),L.el.dataset.popperPlacement=dt,function Uc(L,N){const F=L.querySelector(".shepherd-arrow");if(F){let $,W,dt,pt;if(N.arrow){const{x:ht,y:bt}=N.arrow;$=null!=ht?`${ht}px`:"",W=null!=bt?`${bt}px`:""}Object.assign(F.style,{left:$,top:W,right:dt,bottom:pt})}}(L.el,pt)),L}}(N,$)).then(W=>new Promise(dt=>{setTimeout(()=>dt(W),300)})).then(W=>{W&&W.el&&W.el.focus({preventScroll:!0})})}(F,L,$,W):L.cleanup()}),L.target=N.element,$}function ri(){}function zc(L,N){for(const F in N)L[F]=N[F];return L}function $r(L){return L()}function Kr(){return Object.create(null)}function xa(L){L.forEach($r)}function js(L){return"function"==typeof L}function eo(L,N){return L!=L?N==N:L!==N||L&&"object"==typeof L||"function"==typeof L}function Go(L,N){L.appendChild(N)}function Ci(L,N,F){L.insertBefore(N,F||null)}function Vn(L){L.parentNode&&L.parentNode.removeChild(L)}function Ti(L){return document.createElement(L)}function qs(L){return document.createElementNS("http://www.w3.org/2000/svg",L)}function Va(L){return document.createTextNode(L)}function Xa(){return Va(" ")}function ts(L,N,F,$){return L.addEventListener(N,F,$),()=>L.removeEventListener(N,F,$)}function Re(L,N,F){null==F?L.removeAttribute(N):L.getAttribute(N)!==F&&L.setAttribute(N,F)}function Bi(L,N){const F=Object.getOwnPropertyDescriptors(L.__proto__);for(const $ in N)null==N[$]?L.removeAttribute($):"style"===$?L.style.cssText=N[$]:"__value"===$?L.value=L[$]=N[$]:F[$]&&F[$].set?L[$]=N[$]:Re(L,$,N[$])}function qe(L,N,F){L.classList[F?"add":"remove"](N)}let ke;function no(L){ke=L}function Le(){if(!ke)throw new Error("Function called outside component initialization");return ke}function Fs(L){Le().$$.after_update.push(L)}const jo=[],zn=[],Wo=[],es=[],Qs=Promise.resolve();let Ai=!1;function va(L){Wo.push(L)}const Ri=new Set;let Vo=0;function Us(){const L=ke;do{for(;Vo<jo.length;){const N=jo[Vo];Vo++,no(N),Bs(N.$$)}for(no(null),jo.length=0,Vo=0;zn.length;)zn.pop()();for(let N=0;N<Wo.length;N+=1){const F=Wo[N];Ri.has(F)||(Ri.add(F),F())}Wo.length=0}while(jo.length);for(;es.length;)es.pop()();Ai=!1,Ri.clear(),no(L)}function Bs(L){if(null!==L.fragment){L.update(),xa(L.before_update);const N=L.dirty;L.dirty=[-1],L.fragment&&L.fragment.p(L.ctx,N),L.after_update.forEach(va)}}const Fn=new Set;let xe;function Pe(){xe={r:0,c:[],p:xe}}function zi(){xe.r||xa(xe.c),xe=xe.p}function Ne(L,N){L&&L.i&&(Fn.delete(L),L.i(N))}function hn(L,N,F,$){if(L&&L.o){if(Fn.has(L))return;Fn.add(L),xe.c.push(()=>{Fn.delete(L),$&&(F&&L.d(1),$())}),L.o(N)}else $&&$()}function qo(L){L&&L.c()}function xo(L,N,F,$){const{fragment:W,after_update:dt}=L.$$;W&&W.m(N,F),$||va(()=>{const pt=L.$$.on_mount.map($r).filter(js);L.$$.on_destroy?L.$$.on_destroy.push(...pt):xa(pt),L.$$.on_mount=[]}),dt.forEach(va)}function vo(L,N){const F=L.$$;null!==F.fragment&&(xa(F.on_destroy),F.fragment&&F.fragment.d(N),F.on_destroy=F.fragment=null,F.ctx=[])}function Yc(L,N){-1===L.$$.dirty[0]&&(jo.push(L),function Si(){Ai||(Ai=!0,Qs.then(Us))}(),L.$$.dirty.fill(0)),L.$$.dirty[N/31|0]|=1<<N%31}function io(L,N,F,$,W,dt,pt,ht){void 0===ht&&(ht=[-1]);const bt=ke;no(L);const kt=L.$$={fragment:null,ctx:[],props:dt,update:ri,not_equal:W,bound:Kr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(N.context||(bt?bt.$$.context:[])),callbacks:Kr(),dirty:ht,skip_bound:!1,root:N.target||bt.$$.root};pt&&pt(kt.root);let Qt=!1;if(kt.ctx=F?F(L,N.props||{},function(Lt,Pt){const Xt=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:Pt;return kt.ctx&&W(kt.ctx[Lt],kt.ctx[Lt]=Xt)&&(!kt.skip_bound&&kt.bound[Lt]&&kt.bound[Lt](Xt),Qt&&Yc(L,Lt)),Pt}):[],kt.update(),Qt=!0,xa(kt.before_update),kt.fragment=!!$&&$(kt.ctx),N.target){if(N.hydrate){const Lt=function Xn(L){return Array.from(L.childNodes)}(N.target);kt.fragment&&kt.fragment.l(Lt),Lt.forEach(Vn)}else kt.fragment&&kt.fragment.c();N.intro&&Ne(L.$$.fragment),xo(L,N.target,N.anchor,N.customElement),Us()}no(bt)}class oo{$destroy(){vo(this,1),this.$destroy=ri}$on(N,F){if(!js(F))return ri;const $=this.$$.callbacks[N]||(this.$$.callbacks[N]=[]);return $.push(F),()=>{const W=$.indexOf(F);-1!==W&&$.splice(W,1)}}$set(N){this.$$set&&!function Jc(L){return 0===Object.keys(L).length}(N)&&(this.$$.skip_bound=!0,this.$$set(N),this.$$.skip_bound=!1)}}function Gc(L){let N,F,$,W,dt;return{c(){N=Ti("button"),Re(N,"aria-label",F=L[3]?L[3]:null),Re(N,"class",$=`${L[1]||""} shepherd-button ${L[4]?"shepherd-button-secondary":""}`),N.disabled=L[2],Re(N,"tabindex","0")},m(pt,ht){Ci(pt,N,ht),N.innerHTML=L[5],W||(dt=ts(N,"click",function(){js(L[0])&&L[0].apply(this,arguments)}),W=!0)},p(pt,ht){let[bt]=ht;L=pt,32&bt&&(N.innerHTML=L[5]),8&bt&&F!==(F=L[3]?L[3]:null)&&Re(N,"aria-label",F),18&bt&&$!==($=`${L[1]||""} shepherd-button ${L[4]?"shepherd-button-secondary":""}`)&&Re(N,"class",$),4&bt&&(N.disabled=L[2])},i:ri,o:ri,d(pt){pt&&Vn(N),W=!1,dt()}}}function Wc(L,N,F){let dt,pt,ht,bt,kt,Qt,{config:$,step:W}=N;function Lt(Pt){return ot(Pt)?Pt=Pt.call(W):Pt}return L.$$set=Pt=>{"config"in Pt&&F(6,$=Pt.config),"step"in Pt&&F(7,W=Pt.step)},L.$$.update=()=>{192&L.$$.dirty&&(F(0,dt=$.action?$.action.bind(W.tour):null),F(1,pt=$.classes),F(2,ht=!!$.disabled&&Lt($.disabled)),F(3,bt=$.label?Lt($.label):null),F(4,kt=$.secondary),F(5,Qt=$.text?Lt($.text):null))},[dt,pt,ht,bt,kt,Qt,$,W]}class Vc extends oo{constructor(N){super(),io(this,N,Wc,Gc,eo,{config:6,step:7})}}function Yr(L,N,F){const $=L.slice();return $[2]=N[F],$}function Rs(L){let N,F,$=L[1],W=[];for(let pt=0;pt<$.length;pt+=1)W[pt]=Gr(Yr(L,$,pt));const dt=pt=>hn(W[pt],1,1,()=>{W[pt]=null});return{c(){for(let pt=0;pt<W.length;pt+=1)W[pt].c();N=function $c(){return Va("")}()},m(pt,ht){for(let bt=0;bt<W.length;bt+=1)W[bt].m(pt,ht);Ci(pt,N,ht),F=!0},p(pt,ht){if(3&ht){let bt;for($=pt[1],bt=0;bt<$.length;bt+=1){const kt=Yr(pt,$,bt);W[bt]?(W[bt].p(kt,ht),Ne(W[bt],1)):(W[bt]=Gr(kt),W[bt].c(),Ne(W[bt],1),W[bt].m(N.parentNode,N))}for(Pe(),bt=$.length;bt<W.length;bt+=1)dt(bt);zi()}},i(pt){if(!F){for(let ht=0;ht<$.length;ht+=1)Ne(W[ht]);F=!0}},o(pt){W=W.filter(Boolean);for(let ht=0;ht<W.length;ht+=1)hn(W[ht]);F=!1},d(pt){(function Hc(L,N){for(let F=0;F<L.length;F+=1)L[F]&&L[F].d(N)})(W,pt),pt&&Vn(N)}}}function Gr(L){let N,F;return N=new Vc({props:{config:L[2],step:L[0]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};2&W&&(dt.config=$[2]),1&W&&(dt.step=$[0]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function Ji(L){let N,F,$=L[1]&&Rs(L);return{c(){N=Ti("footer"),$&&$.c(),Re(N,"class","shepherd-footer")},m(W,dt){Ci(W,N,dt),$&&$.m(N,null),F=!0},p(W,dt){let[pt]=dt;W[1]?$?($.p(W,pt),2&pt&&Ne($,1)):($=Rs(W),$.c(),Ne($,1),$.m(N,null)):$&&(Pe(),hn($,1,1,()=>{$=null}),zi())},i(W){F||(Ne($),F=!0)},o(W){hn($),F=!1},d(W){W&&Vn(N),$&&$.d()}}}function Xc(L,N,F){let $,{step:W}=N;return L.$$set=dt=>{"step"in dt&&F(0,W=dt.step)},L.$$.update=()=>{1&L.$$.dirty&&F(1,$=W.options.buttons)},[W,$]}class tu extends oo{constructor(N){super(),io(this,N,Xc,Ji,eo,{step:0})}}function eu(L){let N,F,$,W,dt;return{c(){N=Ti("button"),F=Ti("span"),F.textContent="\xd7",Re(F,"aria-hidden","true"),Re(N,"aria-label",$=L[0].label?L[0].label:"Close Tour"),Re(N,"class","shepherd-cancel-icon"),Re(N,"type","button")},m(pt,ht){Ci(pt,N,ht),Go(N,F),W||(dt=ts(N,"click",L[1]),W=!0)},p(pt,ht){let[bt]=ht;1&bt&&$!==($=pt[0].label?pt[0].label:"Close Tour")&&Re(N,"aria-label",$)},i:ri,o:ri,d(pt){pt&&Vn(N),W=!1,dt()}}}function nu(L,N,F){let{cancelIcon:$,step:W}=N;return L.$$set=pt=>{"cancelIcon"in pt&&F(0,$=pt.cancelIcon),"step"in pt&&F(2,W=pt.step)},[$,pt=>{pt.preventDefault(),W.cancel()},W]}class iu extends oo{constructor(N){super(),io(this,N,nu,eu,eo,{cancelIcon:0,step:2})}}function ou(L){let N;return{c(){N=Ti("h3"),Re(N,"id",L[1]),Re(N,"class","shepherd-title")},m(F,$){Ci(F,N,$),L[3](N)},p(F,$){let[W]=$;2&W&&Re(N,"id",F[1])},i:ri,o:ri,d(F){F&&Vn(N),L[3](null)}}}function au(L,N,F){let{labelId:$,element:W,title:dt}=N;return Fs(()=>{ot(dt)&&F(2,dt=dt()),F(0,W.innerHTML=dt,W)}),L.$$set=ht=>{"labelId"in ht&&F(1,$=ht.labelId),"element"in ht&&F(0,W=ht.element),"title"in ht&&F(2,dt=ht.title)},[W,$,dt,function pt(ht){zn[ht?"unshift":"push"](()=>{W=ht,F(0,W)})}]}class su extends oo{constructor(N){super(),io(this,N,au,ou,eo,{labelId:1,element:0,title:2})}}function Wr(L){let N,F;return N=new su({props:{labelId:L[0],title:L[2]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};1&W&&(dt.labelId=$[0]),4&W&&(dt.title=$[2]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function Vr(L){let N,F;return N=new iu({props:{cancelIcon:L[3],step:L[1]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};8&W&&(dt.cancelIcon=$[3]),2&W&&(dt.step=$[1]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function ru(L){let N,F,$,W=L[2]&&Wr(L),dt=L[3]&&L[3].enabled&&Vr(L);return{c(){N=Ti("header"),W&&W.c(),F=Xa(),dt&&dt.c(),Re(N,"class","shepherd-header")},m(pt,ht){Ci(pt,N,ht),W&&W.m(N,null),Go(N,F),dt&&dt.m(N,null),$=!0},p(pt,ht){let[bt]=ht;pt[2]?W?(W.p(pt,bt),4&bt&&Ne(W,1)):(W=Wr(pt),W.c(),Ne(W,1),W.m(N,F)):W&&(Pe(),hn(W,1,1,()=>{W=null}),zi()),pt[3]&&pt[3].enabled?dt?(dt.p(pt,bt),8&bt&&Ne(dt,1)):(dt=Vr(pt),dt.c(),Ne(dt,1),dt.m(N,null)):dt&&(Pe(),hn(dt,1,1,()=>{dt=null}),zi())},i(pt){$||(Ne(W),Ne(dt),$=!0)},o(pt){hn(W),hn(dt),$=!1},d(pt){pt&&Vn(N),W&&W.d(),dt&&dt.d()}}}function zs(L,N,F){let dt,pt,{labelId:$,step:W}=N;return L.$$set=ht=>{"labelId"in ht&&F(0,$=ht.labelId),"step"in ht&&F(1,W=ht.step)},L.$$.update=()=>{2&L.$$.dirty&&(F(2,dt=W.options.title),F(3,pt=W.options.cancelIcon))},[$,W,dt,pt]}class ns extends oo{constructor(N){super(),io(this,N,zs,ru,eo,{labelId:0,step:1})}}function lu(L){let N;return{c(){N=Ti("div"),Re(N,"class","shepherd-text"),Re(N,"id",L[1])},m(F,$){Ci(F,N,$),L[3](N)},p(F,$){let[W]=$;2&W&&Re(N,"id",F[1])},i:ri,o:ri,d(F){F&&Vn(N),L[3](null)}}}function cu(L,N,F){let{descriptionId:$,element:W,step:dt}=N;return Fs(()=>{let{text:ht}=dt.options;ot(ht)&&(ht=ht.call(dt)),it(ht)?W.appendChild(ht):F(0,W.innerHTML=ht,W)}),L.$$set=ht=>{"descriptionId"in ht&&F(1,$=ht.descriptionId),"element"in ht&&F(0,W=ht.element),"step"in ht&&F(2,dt=ht.step)},[W,$,dt,function pt(ht){zn[ht?"unshift":"push"](()=>{W=ht,F(0,W)})}]}class uu extends oo{constructor(N){super(),io(this,N,cu,lu,eo,{descriptionId:1,element:0,step:2})}}function Xr(L){let N,F;return N=new ns({props:{labelId:L[1],step:L[2]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};2&W&&(dt.labelId=$[1]),4&W&&(dt.step=$[2]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function tl(L){let N,F;return N=new uu({props:{descriptionId:L[0],step:L[2]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};1&W&&(dt.descriptionId=$[0]),4&W&&(dt.step=$[2]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function el(L){let N,F;return N=new tu({props:{step:L[2]}}),{c(){qo(N.$$.fragment)},m($,W){xo(N,$,W),F=!0},p($,W){const dt={};4&W&&(dt.step=$[2]),N.$set(dt)},i($){F||(Ne(N.$$.fragment,$),F=!0)},o($){hn(N.$$.fragment,$),F=!1},d($){vo(N,$)}}}function du(L){let N,$,dt,ht,F=!xt(L[2].options.title)||L[2].options.cancelIcon&&L[2].options.cancelIcon.enabled,W=!xt(L[2].options.text),pt=Array.isArray(L[2].options.buttons)&&L[2].options.buttons.length,bt=F&&Xr(L),kt=W&&tl(L),Qt=pt&&el(L);return{c(){N=Ti("div"),bt&&bt.c(),$=Xa(),kt&&kt.c(),dt=Xa(),Qt&&Qt.c(),Re(N,"class","shepherd-content")},m(Lt,Pt){Ci(Lt,N,Pt),bt&&bt.m(N,null),Go(N,$),kt&&kt.m(N,null),Go(N,dt),Qt&&Qt.m(N,null),ht=!0},p(Lt,Pt){let[Xt]=Pt;4&Xt&&(F=!xt(Lt[2].options.title)||Lt[2].options.cancelIcon&&Lt[2].options.cancelIcon.enabled),F?bt?(bt.p(Lt,Xt),4&Xt&&Ne(bt,1)):(bt=Xr(Lt),bt.c(),Ne(bt,1),bt.m(N,$)):bt&&(Pe(),hn(bt,1,1,()=>{bt=null}),zi()),4&Xt&&(W=!xt(Lt[2].options.text)),W?kt?(kt.p(Lt,Xt),4&Xt&&Ne(kt,1)):(kt=tl(Lt),kt.c(),Ne(kt,1),kt.m(N,dt)):kt&&(Pe(),hn(kt,1,1,()=>{kt=null}),zi()),4&Xt&&(pt=Array.isArray(Lt[2].options.buttons)&&Lt[2].options.buttons.length),pt?Qt?(Qt.p(Lt,Xt),4&Xt&&Ne(Qt,1)):(Qt=el(Lt),Qt.c(),Ne(Qt,1),Qt.m(N,null)):Qt&&(Pe(),hn(Qt,1,1,()=>{Qt=null}),zi())},i(Lt){ht||(Ne(bt),Ne(kt),Ne(Qt),ht=!0)},o(Lt){hn(bt),hn(kt),hn(Qt),ht=!1},d(Lt){Lt&&Vn(N),bt&&bt.d(),kt&&kt.d(),Qt&&Qt.d()}}}function _u(L,N,F){let{descriptionId:$,labelId:W,step:dt}=N;return L.$$set=pt=>{"descriptionId"in pt&&F(0,$=pt.descriptionId),"labelId"in pt&&F(1,W=pt.labelId),"step"in pt&&F(2,dt=pt.step)},[$,W,dt]}class mu extends oo{constructor(N){super(),io(this,N,_u,du,eo,{descriptionId:0,labelId:1,step:2})}}function nl(L){let N;return{c(){N=Ti("div"),Re(N,"class","shepherd-arrow"),Re(N,"data-popper-arrow","")},m(F,$){Ci(F,N,$)},d(F){F&&Vn(N)}}}function il(L){let N,F,$,W,dt,pt,ht,bt,kt=L[4].options.arrow&&L[4].options.attachTo&&L[4].options.attachTo.element&&L[4].options.attachTo.on&&nl();$=new mu({props:{descriptionId:L[2],labelId:L[3],step:L[4]}});let Qt=[{"aria-describedby":W=xt(L[4].options.text)?null:L[2]},{"aria-labelledby":dt=L[4].options.title?L[3]:null},L[1],{role:"dialog"},{tabindex:"0"}],Lt={};for(let Pt=0;Pt<Qt.length;Pt+=1)Lt=zc(Lt,Qt[Pt]);return{c(){N=Ti("div"),kt&&kt.c(),F=Xa(),qo($.$$.fragment),Bi(N,Lt),qe(N,"shepherd-has-cancel-icon",L[5]),qe(N,"shepherd-has-title",L[6]),qe(N,"shepherd-element",!0)},m(Pt,Xt){Ci(Pt,N,Xt),kt&&kt.m(N,null),Go(N,F),xo($,N,null),L[13](N),pt=!0,ht||(bt=ts(N,"keydown",L[7]),ht=!0)},p(Pt,Xt){let[Wt]=Xt;Pt[4].options.arrow&&Pt[4].options.attachTo&&Pt[4].options.attachTo.element&&Pt[4].options.attachTo.on?kt||(kt=nl(),kt.c(),kt.m(N,F)):kt&&(kt.d(1),kt=null);const Se={};4&Wt&&(Se.descriptionId=Pt[2]),8&Wt&&(Se.labelId=Pt[3]),16&Wt&&(Se.step=Pt[4]),$.$set(Se),Bi(N,Lt=function Kc(L,N){const F={},$={},W={$$scope:1};let dt=L.length;for(;dt--;){const pt=L[dt],ht=N[dt];if(ht){for(const bt in pt)bt in ht||($[bt]=1);for(const bt in ht)W[bt]||(F[bt]=ht[bt],W[bt]=1);L[dt]=ht}else for(const bt in pt)W[bt]=1}for(const pt in $)pt in F||(F[pt]=void 0);return F}(Qt,[(!pt||20&Wt&&W!==(W=xt(Pt[4].options.text)?null:Pt[2]))&&{"aria-describedby":W},(!pt||24&Wt&&dt!==(dt=Pt[4].options.title?Pt[3]:null))&&{"aria-labelledby":dt},2&Wt&&Pt[1],{role:"dialog"},{tabindex:"0"}])),qe(N,"shepherd-has-cancel-icon",Pt[5]),qe(N,"shepherd-has-title",Pt[6]),qe(N,"shepherd-element",!0)},i(Pt){pt||(Ne($.$$.fragment,Pt),pt=!0)},o(Pt){hn($.$$.fragment,Pt),pt=!1},d(Pt){Pt&&Vn(N),kt&&kt.d(),vo($),L[13](null),ht=!1,bt()}}}function Fo(L){return L.split(" ").filter(N=>!!N.length)}function is(L,N,F){let Pt,Xt,Wt,{classPrefix:$,element:W,descriptionId:dt,firstFocusableElement:pt,focusableElements:ht,labelId:bt,lastFocusableElement:kt,step:Qt,dataStepId:Lt}=N;return function _t(L){Le().$$.on_mount.push(L)}(()=>{F(1,Lt={[`data-${$}shepherd-step-id`]:Qt.id}),F(9,ht=W.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),F(8,pt=ht[0]),F(10,kt=ht[ht.length-1])}),Fs(()=>{Wt!==Qt.options.classes&&function ze(){(function Je(te){if(ft(te)){const ye=Fo(te);ye.length&&W.classList.remove(...ye)}})(Wt),Wt=Qt.options.classes,function gn(te){if(ft(te)){const ye=Fo(te);ye.length&&W.classList.add(...ye)}}(Wt)}()}),L.$$set=te=>{"classPrefix"in te&&F(11,$=te.classPrefix),"element"in te&&F(0,W=te.element),"descriptionId"in te&&F(2,dt=te.descriptionId),"firstFocusableElement"in te&&F(8,pt=te.firstFocusableElement),"focusableElements"in te&&F(9,ht=te.focusableElements),"labelId"in te&&F(3,bt=te.labelId),"lastFocusableElement"in te&&F(10,kt=te.lastFocusableElement),"step"in te&&F(4,Qt=te.step),"dataStepId"in te&&F(1,Lt=te.dataStepId)},L.$$.update=()=>{16&L.$$.dirty&&(F(5,Pt=Qt.options&&Qt.options.cancelIcon&&Qt.options.cancelIcon.enabled),F(6,Xt=Qt.options&&Qt.options.title))},[W,Lt,dt,bt,Qt,Pt,Xt,te=>{const{tour:ye}=Qt;switch(te.keyCode){case 9:if(0===ht.length){te.preventDefault();break}te.shiftKey?(document.activeElement===pt||document.activeElement.classList.contains("shepherd-element"))&&(te.preventDefault(),kt.focus()):document.activeElement===kt&&(te.preventDefault(),pt.focus());break;case 27:ye.options.exitOnEsc&&Qt.cancel();break;case 37:ye.options.keyboardNavigation&&ye.back();break;case 39:ye.options.keyboardNavigation&&ye.next()}},pt,ht,kt,$,()=>W,function ne(te){zn[te?"unshift":"push"](()=>{W=te,F(0,W)})}]}class xu extends oo{constructor(N){super(),io(this,N,is,il,eo,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class Js extends st{constructor(N,F){return void 0===F&&(F={}),super(N,F),this.tour=N,this.classPrefix=this.tour.options?Jt(this.tour.options.classPrefix):"",this.styles=N.styles,this._resolvedAttachTo=null,Mt(this),this._setOptions(F),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){(function qc(L){L.cleanup&&L.cleanup(),L.cleanup=null})(this),it(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=function yt(L){const N=L.options.attachTo||{},F=Object.assign({},N);if(ot(F.element)&&(F.element=F.element.call(L)),ft(F.element)){try{F.element=document.querySelector(F.element)}catch{}F.element||console.error(`The element for this Shepherd step was not found ${N.element}`)}return F}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return Boolean(this.el&&!this.el.hidden)}show(){return ot(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(N){Object.assign(this.options,N),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){return this.shepherdElementComponent=new xu({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:`${this.id}-description`,labelId:`${this.id}-label`,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(N){const{element:F}=this._getResolvedAttachToOptions();ot(this.options.scrollToHandler)?this.options.scrollToHandler(F):function X(L){return L instanceof Element}(F)&&"function"==typeof F.scrollIntoView&&F.scrollIntoView(N)}_getClassOptions(N){const F=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,W=F&&F.classes?F.classes:"",dt=[...(N.classes?N.classes:"").split(" "),...W.split(" ")],pt=new Set(dt);return Array.from(pt).join(" ").trim()}_setOptions(N){void 0===N&&(N={});let F=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;F=nt({},F||{}),this.options=Object.assign({arrow:!0},F,N,function jc(L,N){return{floatingUIOptions:nt(L.floatingUIOptions||{},N.floatingUIOptions||{})}}(F,N));const{when:$}=this.options;this.options.classes=this._getClassOptions(N),this.destroy(),this.id=this.options.id||`step-${Yt()}`,$&&Object.keys($).forEach(W=>{this.on(W,$[W],this)})}_setupElements(){xt(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function St(L){const{event:N,selector:F}=L.options.advanceOn||{};if(!N)return console.error("advanceOn was defined, but no event name was passed.");{const $=function ee(L,N){return F=>{if(N.isOpen()){const $=N.el&&F.currentTarget===N.el;(!xt(L)&&F.currentTarget.matches(L)||$)&&N.tour.next()}}}(F,L);let W;try{W=document.querySelector(F)}catch{}if(!xt(F)&&!W)return console.error(`No element was found for the selector supplied to advanceOn: ${F}`);W?(W.addEventListener(N,$),L.on("destroy",()=>W.removeEventListener(N,$))):(document.body.addEventListener(N,$,!0),L.on("destroy",()=>document.body.removeEventListener(N,$,!0)))}}(this),Dc(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;const N=this.shepherdElementComponent.getElement(),F=this.target||document.body;F.classList.add(`${this.classPrefix}shepherd-enabled`),F.classList.add(`${this.classPrefix}shepherd-target`),N.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep(N){const F=N.target;F&&(N.options.highlightClass&&F.classList.add(N.options.highlightClass),F.classList.remove("shepherd-target-click-disabled"),!1===N.options.canClickTarget&&F.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){const N=this.target||document.body;this.options.highlightClass&&N.classList.remove(this.options.highlightClass),N.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}}function yu(L){let N,F,$,W,dt;return{c(){N=qs("svg"),F=qs("path"),Re(F,"d",L[2]),Re(N,"class",$=(L[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")},m(pt,ht){Ci(pt,N,ht),Go(N,F),L[11](N),W||(dt=ts(N,"touchmove",L[3]),W=!0)},p(pt,ht){let[bt]=ht;4&bt&&Re(F,"d",pt[2]),2&bt&&$!==($=(pt[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Re(N,"class",$)},i:ri,o:ri,d(pt){pt&&Vn(N),L[11](null),W=!1,dt()}}}function ol(L){if(!L)return null;const F=L instanceof HTMLElement&&window.getComputedStyle(L).overflowY;return"hidden"!==F&&"visible"!==F&&L.scrollHeight>=L.clientHeight?L:ol(L.parentElement)}function ku(L,N,F){let{element:$,openingProperties:W}=N;Yt();let pt,ht,dt=!1;function kt(){F(4,W={width:0,height:0,x:0,y:0,r:0})}function Qt(){F(1,dt=!1),Je()}function Lt(ne,te,ye,Cn){if(void 0===ne&&(ne=0),void 0===te&&(te=0),Cn){const{y:bn,height:Li}=function wu(L,N){const F=L.getBoundingClientRect();let $=F.y||F.top,W=F.bottom||$+F.height;if(N){const pt=N.getBoundingClientRect(),ht=pt.y||pt.top,bt=pt.bottom||ht+pt.height;$=Math.max($,ht),W=Math.min(W,bt)}return{y:$,height:Math.max(W-$,0)}}(Cn,ye),{x:ao,width:Uo,left:bo}=Cn.getBoundingClientRect();F(4,W={width:Uo+2*ne,height:Li+2*ne,x:(ao||bo)-ne,y:bn-ne,r:te})}else kt()}function Xt(){F(1,dt=!0)}kt();const Wt=ne=>{ne.preventDefault()};function Je(){pt&&(cancelAnimationFrame(pt),pt=void 0),window.removeEventListener("touchmove",Wt,{passive:!1})}return L.$$set=ne=>{"element"in ne&&F(0,$=ne.element),"openingProperties"in ne&&F(4,W=ne.openingProperties)},L.$$.update=()=>{16&L.$$.dirty&&F(2,ht=function bu(L){let{width:N,height:F,x:$=0,y:W=0,r:dt=0}=L;const{innerWidth:pt,innerHeight:ht}=window,{topLeft:bt=0,topRight:kt=0,bottomRight:Qt=0,bottomLeft:Lt=0}="number"==typeof dt?{topLeft:dt,topRight:dt,bottomRight:dt,bottomLeft:dt}:dt;return`M${pt},${ht}H0V0H${pt}V${ht}ZM${$+bt},${W}a${bt},${bt},0,0,0-${bt},${bt}V${F+W-Lt}a${Lt},${Lt},0,0,0,${Lt},${Lt}H${N+$-Qt}a${Qt},${Qt},0,0,0,${Qt}-${Qt}V${W+kt}a${kt},${kt},0,0,0-${kt}-${kt}Z`}(W))},[$,dt,ht,ne=>{ne.stopPropagation()},W,()=>$,kt,Qt,Lt,function Pt(ne){Je(),ne.tour.options.useModalOverlay?(function gn(ne){const{modalOverlayOpeningPadding:te,modalOverlayOpeningRadius:ye}=ne.options,Cn=ol(ne.target),bn=()=>{pt=void 0,Lt(te,ye,Cn,ne.target),pt=requestAnimationFrame(bn)};bn(),function ze(){window.addEventListener("touchmove",Wt,{passive:!1})}()}(ne),Xt()):Qt()},Xt,function Ue(ne){zn[ne?"unshift":"push"](()=>{$=ne,F(0,$)})}]}class Cu extends oo{constructor(N){super(),io(this,N,ku,yu,eo,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}const Qo=new st,Au=typeof window>"u";class al{constructor(){}}function Ou(L){const{classes:N,disabled:F,label:$,secondary:W,type:dt,text:pt}=L;if(!dt)return L;if(-1===["back","cancel","next"].indexOf(dt))throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[dt].bind(this),classes:N,disabled:F,label:$,secondary:W,text:pt}}Object.assign(Qo,Au?{Tour:al,Step:al}:{Tour:class Tu extends st{constructor(N){return void 0===N&&(N={}),super(N),Mt(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},N),this.classPrefix=Jt(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(W=>{(dt=>{this.on(dt,pt=>{(pt=pt||{}).tour=this,Qo.trigger(dt,pt)})})(W)}),this._setTourID(),this}addStep(N,F){let $=N;return $ instanceof Js?$.tour=this:$=new Js(this,$),xt(F)?this.steps.push($):this.steps.splice(F,0,$),$}addSteps(N){return Array.isArray(N)&&N.forEach(F=>{this.addStep(F)}),this}back(){const N=this.steps.indexOf(this.currentStep);this.show(N-1,!1)}cancel(){this.options.confirmCancel?window.confirm(this.options.confirmCancelMessage||"Are you sure you want to stop the tour?")&&this._done("cancel"):this._done("cancel")}complete(){this._done("complete")}getById(N){return this.steps.find(F=>F.id===N)}getCurrentStep(){return this.currentStep}hide(){const N=this.getCurrentStep();if(N)return N.hide()}isActive(){return Qo.activeTour===this}next(){const N=this.steps.indexOf(this.currentStep);N===this.steps.length-1?this.complete():this.show(N+1,!0)}removeStep(N){const F=this.getCurrentStep();this.steps.some(($,W)=>{if($.id===N)return $.isOpen()&&$.hide(),$.destroy(),this.steps.splice(W,1),!0}),F&&F.id===N&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(N,F){void 0===N&&(N=0),void 0===F&&(F=!0);const $=ft(N)?this.getById(N):this.steps[N];$&&(this._updateStateBeforeShow(),ot($.options.showOn)&&!$.options.showOn()?this._skipStep($,F):(this.trigger("show",{step:$,previous:this.currentStep}),this.currentStep=$,$.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done(N){const F=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach($=>$.destroy()),function vu(L){if(L){const{steps:N}=L;N.forEach(F=>{F.options&&!1===F.options.canClickTarget&&F.options.attachTo&&F.target instanceof HTMLElement&&F.target.classList.remove("shepherd-target-click-disabled")})}}(this),this.trigger(N,{index:F}),Qo.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===N||"complete"===N)&&this.modal){const $=document.querySelector(".shepherd-modal-overlay-container");$&&$.remove()}it(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),Qo.activeTour=this}_setupModal(){this.modal=new Cu({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(N,F){const $=this.steps.indexOf(N);$===this.steps.length-1?this.complete():this.show(F?$+1:$-1,F)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){this.id=`${this.options.tourName||"tour"}--${Yt()}`}},Step:Js});let Eu=(()=>{class L{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(F){this.tourObject.show(F)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(F){this.isActive=!1}addSteps(F){this._initialize();const $=this.tourObject;if(F&&Array.isArray(F)&&0!==F.length){if(!this.requiredElementsPresent())return void $.addStep({buttons:[{text:"Exit",action:$.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});F.forEach(W=>{W.buttons&&(W.buttons=W.buttons.map(Ou.bind(this),this)),$.addStep(W)})}}requiredElementsPresent(){let F=!0;return this.requiredElements.forEach($=>{const W=document.querySelector($.selector);F&&(!W||function Su(L){return 0===L.offsetWidth&&0===L.offsetHeight}(W))&&(F=!1,this.errorTitle=$.title,this.messageForUser=$.message)}),F}_initialize(){const F=new Qo.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal});F.on("complete",this.onTourFinish.bind(this,"complete")),F.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=F}}return L.\u0275fac=function(F){return new(F||L)},L.\u0275prov=E.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})()}}]);